"use strict";
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="e4d7e785-6a16-50f2-9669-3936c1f56182")}catch(e){}}();
(globalThis.webpackChunk_figma_web_bundler=globalThis.webpackChunk_figma_web_bundler||[]).push([[3627],{411916:(e,t,i)=>{i.d(t,{W:()=>u});var n=i(716976),r=i(237420),a=i(188220),o=i(449572),l=i(513369),s=i(435869),d=i(59849);function u(e=!1){let t=(0,r.wA)(),i=n.useMemo(()=>(0,a.g)(),[]),c=(0,o.bc)((0,d.gvX)({cacheNonce:i}));n.useEffect(()=>{if("loaded"!==c.status)return;let i=(0,l.oA)(c.data.currentUser.notificationExperimentInfo);i&&("exp_notification_catfile"===i.experimentName||"exp_notification_catfic"===i.experimentName)&&("prompt_to_opt_in"===i.type?t((e?s.hU:s.ZI)({userId:i.userId,fileKey:i.fileKey,experimentName:i.experimentName,toastType:"prompt_to_opt_in"})):t(s.EJ({userId:i.userId,fileKey:i.fileKey,preference:i.preference,experimentName:i.experimentName})))},[t,c,e])}},776968:(e,t,i)=>{i.d(t,{_:()=>c});var n=i(104076),r=i(716976),a=i(266808),o=i(652539),l=i(790099),s=i(223837),d=i(692042),u=i(733644);let c=r.memo(function(e){let{nodeId:t}=e,i=r.useRef(null),o=r.useRef(null),l=(0,d._X)({subscribeToUpdates_expensive:!0});return r.useEffect(()=>{let e=(0,s.EE)(`loading-embed-${t}`,[t],e=>{if(!e.position){a.glU.removeLoadingEmbed(t);return}o.current=e.position,p(i,l,o)}),n=e.currentNodePosition[t]?.position;return n?(o.current=n,p(i,l,o)):a.glU.removeLoadingEmbed(t),()=>{(0,s.lB)(`loading-embed-${t}`)}},[t,l]),(0,n.jsx)("div",{ref:i,children:(0,n.jsx)(m,{})})});function m(){return(0,n.jsx)("span",{className:"loading_embed_overlay--root--UKqJ8",children:(0,n.jsx)(o.B,{svg:u.A,className:"loading_embed_overlay--spinner--bw3Cv",autosize:!0})})}function p(e,t,i){if(!e.current||!t||!i.current)return;let n=e.current,r=i.current,a=(0,d.Yb)(t,r),o=28*t.zoomScale;n.style.transform=`translate(${a.x+(a.width-o)/2+t.x}px, ${a.y+(a.height*l.Ao/l.RN-o)/2+t.y}px) rotate(${r.angle}deg) scale(${t.zoomScale})`,n.style.transformOrigin="top left",n.style.position="absolute"}},143480:(e,t,i)=>{i.d(t,{Pm:()=>n,aF:()=>a});var n=(e=>(e.Light="LIGHT",e.Dark="DARK",e.Translucent="TRANSLUCENT",e))(n||{}),r=(e=>(e.Light="light",e.Dark="dark",e))(r||{});function a(e){let t,i;switch(e.theme){case void 0:case"LIGHT":t="LIGHT";break;case"DARK":case"TRANSLUCENT":t="DARK"}i="LIGHT"===t?"light":"dark";let n="true"===e.hideBackground;return n&&(i=function(e){switch(e){case"light":return"dark";case"dark":return"light"}}(i)),{theme:t,preferredTokenTheme:i,transparentMode:n}}},99876:(e,t,i)=>{i.d(t,{DR:()=>C,E$:()=>F,Wd:()=>B,gD:()=>V,lu:()=>z,wL:()=>k});var n=i(104076),r=i(716976),a=i(237420),o=i(684742),l=i(707779),s=i(266808),d=i(170627),u=i(264993),c=i(980852),m=i(812714),p=i(511570),f=i.n(p),g=i(367793),E=i(923513),y=i(236631),h=i(192075),v=i(58212),_=i(638641),b=i(337059),I=i(135592),x=i(657878),S=i(592726),N=i(331497),P=i(523966),T=i(190589),w=i(125616),R=i(719625),O=i(960245),A=i(961501),D=i(778047),L=i(697915);function C(e){let{nodeId:t,setConfigData:i,isReadOnly:o,invalidateThumbnail:l}=e,{isEmbedActive:u,setActiveEmbed:p}=(0,R._)(t),f=!o,g=(0,a.wA)(),E=(0,N.ut)(s.Ez5?.flappData().embeddablePrototypeIdPendingInsertion,""),[y,I]=(0,r.useState)(),x=(0,r.useMemo)(()=>{let t=V(e.configData);if(!t)return;let i=b.hY[t.presetIdentifier],n=t.rotation===s.xOL.CCW_90,{x:r,y:a}=i?.imageSize??{x:0,y:0},[o,l]=n?[a,r]:[r,a];return o/l},[e.configData]);(0,r.useEffect)(()=>{if(!f)return;let e=(0,c.getActiveTSSceneGraph)().get(t),i=x??y;e&&i&&d.l7.system("resizing-embed",()=>{let t=e.size.x>0?e.size.x:400,n=Math.floor(t/i);0===e.size.x&&(e.x-=t/2,e.y-=n/2),e.resizeWithConstraints(t,n),e.proportionsConstrained=!0})},[t,x,y,f]),(0,r.useEffect)(()=>{t===E&&(g(v.F.enqueue({type:"slides-embedded-prototype",message:(0,h.t)("slides.inserting_embed.visual_bell"),icon:_.zX.SPINNER,timeoutOverride:1/0})),p(),setTimeout(()=>{t===s.Ez5?.flappData().embeddablePrototypeIdPendingInsertion.getCopy()&&s.oHM?.embeddablePrototypeLoadFailed()},3e4))},[t,E,g,p]),(0,r.useEffect)(()=>{let e=e=>{if(e.origin!==location.origin||e.source&&"frameElement"in e.source&&null!=e.source.frameElement&&e.source.frameElement.id!==T.xu+t)return;let n=e.data;if("EMBED_PROTO_ASPECT_RATIO"===n.type&&n.data.aspectRatio&&(I(n.data.aspectRatio),t===E&&s.oHM?.embeddablePrototypeLoadSucceeded()),"EMBED_PROTO_DEVICE"===n.type){let e=n.data.device;f&&e?d.l7.system("set-embed-device-frame-config-data",()=>{i("deviceFrameShown",""!==e.presetIdentifier&&"PRESET"===e.type?"true":"false"),i("deviceFramePreset",e.presetIdentifier),i("deviceFrameRotation",e.rotation)}):f&&d.l7.system("set-embed-device-frame-config-data",()=>{i("deviceFrameShown","false"),i("deviceFramePreset",""),i("deviceFrameRotation","NONE")})}if("EMBED_PROTO_FILE_METADATA"===n.type&&f&&d.l7.system("embed-file-metatada",()=>{i("fileName",n.data.fileName),i("pageName",n.data.pageName),n.data.activeStartingPointNodeId&&i("activeStartingPointNodeId",n.data.activeStartingPointNodeId),n.data.startingPointsData&&i("startingPointsData",JSON.stringify(n.data.startingPointsData))}),"EMBED_PROTO_THUMBNAIL"===n.type&&n.data.thumbnail){if(!(0,m.kc)().slides_iframe_embedded_prototypes_thumbnail)return;(0,T.yx)(n.data.thumbnail,n.data.width,n.data.height,t,l)}};return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}},[t,i,g,E,f,l]);let S=(0,R.s)(t)||!u;return(0,n.jsx)(j,{...e,isActive:u,setActive:p,disablePointerEvents:!S})}function F(e){let t=(0,x.mr)(),i=(0,E.h)(),a=e.nodeId,[o,l]=(0,r.useState)(i?.isActiveSlidesEmbeddedPrototype(a)||!1);(0,g.O5)(i,"embeddedPrototypeDataChange",r.useCallback(e=>{let t=!1;for(let i of e)if(u.dI(i.nodeId)===a){t=!0;break}l(t)},[a]));let s=(0,r.useCallback)(e=>{t?.isAudienceViewPopout?(0,O.oR)({type:"LOAD_EMBEDDED_PROTOTYPE",nodeId:e}):i?.setActiveSlidesEmbeddedPrototype(e)},[i,t]);return(0,n.jsx)(j,{...e,isActive:o,setActive:s})}function j({configData:e,nodeId:t,setConfigData:i,isViewer:a,isActive:o,setActive:l,disablePointerEvents:s,invalidateThumbnail:d}){let u=(0,E.h)(),c=V(e),m=r.useCallback(e=>{let i=document.getElementById(T.xu+t);i?.contentWindow?.postMessage({type:"PROTOTYPE_EMBED_SELECT_FLOW",data:{flowId:e}},"*")},[t]);return(0,r.useEffect)(()=>{e.activeStartingPointNodeId&&m(e.activeStartingPointNodeId)},[e.activeStartingPointNodeId,m]),(0,r.useEffect)(()=>{let e=e=>{e.origin!==location.origin||e.source&&"frameElement"in e.source&&null!=e.source.frameElement&&e.source.frameElement.id!==T.xu+t||!u||"EMBEDDED_PROTOTYPE_SESSION_ID"!==e.data.type||u.setEmbeddedPrototypeSession(t,e.data.data.sessionId)};return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}},[u,t,i,a]),(0,n.jsx)(k,{deviceFrame:c,invalidateThumbnail:d,children:(0,n.jsxs)("div",{className:y.s.hFull.wFull.$,style:{pointerEvents:s?"none":"auto"},children:[o&&e.url?(0,n.jsx)(M,{baseUrl:e.url,nodeId:t,activeStartingNodeId:e.activeStartingPointNodeId}):null,!o&&l?(0,n.jsx)(z,{nodeId:t,onClick:()=>l(t)}):null]})})}let z=r.memo(({nodeId:e,onClick:t})=>{let[i,a]=(0,r.useState)(null);(0,r.useEffect)(()=>{let t=!0,i=null;return(async()=>{try{let n=(0,c.getActiveTSSceneGraph)().get(e);if(!n||!n.fills||0===n.fills.length)return;let r=n.fills.find(e=>"IMAGE"===e.type&&e.image?.hash);if(!r||!r.image?.hash)return;let o=await (0,P.I)(r);if(!o||!t)return;let l=new Blob([o],{type:"image/png"});i=URL.createObjectURL(l),t&&a(i)}catch(e){console.error("Failed to load thumbnail for embed overlay:",e)}})(),()=>{t=!1,i&&URL.revokeObjectURL(i)}},[e]);let s=(0,m.kc)().slides_iframe_embedded_prototypes_thumbnail?L.kg:L.zP,d=i&&(0,m.kc)().slides_iframe_embedded_prototypes_thumbnail?{backgroundImage:`url(${i})`}:{};return(0,n.jsx)(o.E,{className:f()(s,y.s.cursorPointer.$),style:d,onClick:t,"aria-label":(0,h.t)("slides.flapp.embed.activate_prototype"),children:(0,n.jsx)(l.i,{className:L.uZ,"aria-hidden":!0})})});function k({deviceFrame:e,children:t,invalidateThumbnail:i}){let r=e?.rotation===s.xOL.CCW_90?{x:e?.size.y??G.size.y,y:e?.size.x??G.size.x}:{x:e?.size.x??G.size.x,y:e?.size.y??G.size.y};return(0,n.jsx)("div",{className:L.kL,children:(0,n.jsx)(w._,{initialViewerSize:r,isDeviceFrameShown:null!=e&&e.type===s.XQq.PRESET&&""!==e.presetIdentifier,prototypeDevice:e,isInlinePreview:!1,onDeviceFrameLoaded:i,children:t})})}function M({baseUrl:e,nodeId:t,activeStartingNodeId:i}){let[a,o]=(0,r.useState)(i),l=function(e,t,i){if(!e)return null;let n=(0,D.A)(e);if(!n)return null;let r=n.searchParams;return(0,A.e)(r,"bare-ui","1"),(0,A.e)(r,"scaling","fit-width"),(0,A.e)(r,"content-scaling","fixed"),(0,A.e)(r,"needsAlpha","1"),(0,A.e)(r,"inline-viewer","1"),(0,A.e)(r,"disable-default-keyboard-nav","1"),t&&(0,A.e)(r,"fuid",t),i&&(0,A.e)(r,"starting-point-node-id",i),n}(e,(0,S.TA)(),a),[s,d]=(0,r.useState)(!1);return l?(0,n.jsx)("div",{className:f()(L.pU,{[L.Kc]:s}),children:(0,n.jsx)("iframe",{id:`${T.xu}${t}`,className:f()(L.pU,{[L.Kc]:s}),onLoad:()=>{d(!0)},loading:"eager",src:l.toString(),title:(0,h.t)("slides.flapp.embed.title"),allow:"autoplay; encrypted-media; picture-in-picture; fullscreen;",sandbox:"allow-scripts allow-same-origin allow-popups allow-top-navigation-by-user-activation",referrerPolicy:"same-origin"})}):null}let U=e=>{switch(e){case"NONE":default:return s.xOL.NONE;case"CCW_90":return s.xOL.CCW_90}};function B(e){return!!e.deviceFramePreset&&(void 0===e.deviceFrameShownOverride?"true"===e.deviceFrameShown:"true"===e.deviceFrameShownOverride)}function V(e){return B(e)?function(e){let t=b.hY[e.deviceFramePreset??""];return t?{type:s.XQq.PRESET,size:t.framePresetSize,presetIdentifier:t.presetIdentifier,rotation:U(e.deviceFrameRotation)}:null}(e):null}let $=I.eo[0],G={type:s.XQq.PRESET,size:$?.framePresetSize??{x:0,y:0},presetIdentifier:$?.presetIdentifier??"",rotation:s.xOL.NONE}},331447:(e,t,i)=>{i.d(t,{Jf:()=>D,uV:()=>L});var n=i(104076),r=i(716976),a=i(754245),o=i(276800),l=i(498349),s=i(266808),d=i(170627),u=i(980852),c=i(812714),m=i(824570),p=i(511570),f=i.n(p),g=i(232706),E=i.n(g),y=i(666875),h=i(883765),v=i(524684),_=i(278491),b=i(260495),I=i(223837),x=i(643077),S=i(692042),N=i(74620),P=i(211862),T=i(331497),w=i(141330),R=i(290407),O=i(945317),A=i(871600);function D(){let e=document.getElementById("fullscreen-root");if(!e)return null;let t=e.querySelectorAll(".view.container-view");return 0===t.length?null:t[t.length-1]??null}function L(){let e=(0,S._X)({subscribeToUpdates_expensive:!0}),t=(0,N.p8)("isReadOnly"),i=(0,N.p8)("topLevelMode")===s.lyf.HISTORY,r=(0,m.k9)(()=>e,[e]),o=D();return o?(0,a.createPortal)((0,n.jsx)(C,{viewportInfo:r,isReadOnly:t||i}),o):null}function C({viewportInfo:e,shouldRenderMobileFlapps:t,isReadOnly:i}){let a=(0,r.useCallback)(e=>{let t=(0,u.getActiveTSSceneGraph)().get(e.nodeId),i=t?.containingSlideId,n=t?.containingCanvas;if(t&&e.position&&i)return{guid:e.nodeId,slideId:i,pageId:n,position:e.position,type:t.interactiveSlideElementType}},[]),o=(0,T.ut)(s.Ez5?.flappData().nodeIds,[]),l=(0,I.tB)("Flapps",o,a,{useFlushSyncExpensive:!0}),d=(0,T.ut)(s.Ez5?.singleSlideView().focusedNodeId,""),c=s.Ez5?.singleSlideView().isFocusedNodeViewFocused()??!1,p=(0,x.dh)(),f=(0,m.k9)(()=>Object.values(l).filter(e=>e.pageId===p&&(!c||c&&e.slideId===d)),[l,c,d,p]);return(0,R.wj)(w.JT.BOARD_TO_DECK).state===R.qy.RUNNING?null:(0,n.jsx)(n.Fragment,{children:f.map(r=>(0,n.jsx)(F,{element:r,viewportInfo:e,shouldRenderMobileFlapp:t,isReadOnly:i},r.guid))})}let F=r.memo(({element:e,viewportInfo:t,shouldRenderMobileFlapp:i,isReadOnly:a})=>{let o=(0,r.useRef)(null),d=(0,v.I)(o),m=(0,T.ut)(s.Ez5?.flappData().nodeThumbnailEditCount,new Map).get(e.guid)??0,[p,g]=(0,r.useState)(0),E=(0,r.useCallback)(()=>g(e=>e+1),[]),[y,h]=(0,r.useState)(null);if(!e||!e.position||!t)return(0,n.jsx)(n.Fragment,{});let b=(0,u.getActiveTSSceneGraph)().get(e.guid);if(!b)return null;let x=(0,S.Yb)(t,e.position),N="ALIGNMENT"===e.type||"POLL"===e.type||"FACEPILE"===e.type||"EMBED"===e.type&&!(0,c.kc)().slides_iframe_embedded_prototypes_thumbnail;return(0,n.jsx)(l.i,{children:(0,n.jsxs)("div",{ref:o,className:f()({[_.Qx]:d}),"data-testid":`flapp-${e.guid}`,title:b.name,style:{position:"fixed",width:e.position.width,height:e.position.height,top:t.y,left:t.x,transform:`translate(${x.x}px, ${x.y}px) ${(0,I.aZ)(e.position,t.zoomScale)}`,transformOrigin:"top left",pointerEvents:a?"none":"auto"},children:[(0,n.jsx)("div",{className:A.U,ref:h,children:(0,n.jsx)(j,{element:e,shouldRenderMobileFlapp:i,isReadOnly:a,invalidateThumbnail:E})}),y&&N&&(0,n.jsx)(z,{nodeId:e.guid,editCount:m,flappDomElement:y,isReadOnly:a,manualThumbnailInvalidationCount:p})]})})});function j({element:e,shouldRenderMobileFlapp:t,isReadOnly:i,invalidateThumbnail:r}){if(null===e.type)return null;let{EditorFlapp:a}=t?(0,O.v)(e.type):(0,O.Z)(e.type);return(0,n.jsx)(a,{nodeId:e.guid,isReadOnly:i,invalidateThumbnail:r})}function z({nodeId:e,editCount:t,manualThumbnailInvalidationCount:i,flappDomElement:a,isReadOnly:l}){let[s]=(0,y.A)(t,500),[c]=(0,y.A)(i,500),m=(0,P.tS)();return r.useEffect(()=>{var t;if(l)return;let i=(0,u.getActiveTSSceneGraph)().get(e);if(!i||"INTERACTIVE_SLIDE_ELEMENT"!==i.type)return;let n=o.lQ;return t=()=>{n=function(e,t,i){let n=t.interactiveSlideElementType,r=t.guid,a=!1;return E().toBlob(e,{bgcolor:"transparent"}).then(e=>e?.arrayBuffer()).then(e=>{if(!e||0===e.byteLength)throw Error("Cannot decode empty buffer");return(0,b.UD)(new Uint8Array(e),"image/png",`${r}thumbnail`)}).then(e=>{t.isAlive&&!a&&d.l7.system("generate-slide-thumbnail",()=>{0===t.fills.length?t.insertImageInFillPaint(e):t.setImageInFillPaint(e)})}).catch(e=>{(0,h.sx)("Failed to generate thumbnail in editor for slide",{error:e,nodeId:r,flappType:n,fileKey:i},{forwardToDatadog:!0})}),()=>{a=!0}}(a,i,m??"")},requestAnimationFrame(()=>requestAnimationFrame(t)),n},[l,e,s,c,a,m]),(0,n.jsx)(n.Fragment,{})}},960245:(e,t,i)=>{i.d(t,{oR:()=>r}),i(716976),i(812714),i(795033),i(776111);var n=i(457365);function r(e){if(!window.opener){console.error("No parent window found! Did you open this window manually?");return}n.L2?.addAction("postMessageToPresenterView",{type:e.type}),window.opener.postMessage(e,"*")}i(367793),i(997996);var a=(e=>(e[e.LOADING=1]="LOADING",e[e.PRESENTER_VIEW_CAN_DRIVE=2]="PRESENTER_VIEW_CAN_DRIVE",e[e.POPOUT_VIEWER_CAN_DRIVE=3]="POPOUT_VIEWER_CAN_DRIVE",e[e.PRESENTER_VIEW_SPOTLIGHT=4]="PRESENTER_VIEW_SPOTLIGHT",e))(a||{})}}]);

//# debugId=e4d7e785-6a16-50f2-9669-3936c1f56182

//# sourceMappingURL=https://admin.figma.com/admin/webpack-artifacts/03a7b79bb316f1fa37824042940f38a2f12f19ba/3627-7056195772cd8066.min.js.map