"use strict";
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="2973f6b0-6683-573e-a68d-1cdeb466b4be")}catch(e){}}();
(globalThis.webpackChunk_figma_web_bundler=globalThis.webpackChunk_figma_web_bundler||[]).push([[1142],{697915:(e,t,l)=>{l.d(t,{Kc:()=>n,kL:()=>a,kg:()=>o,pU:()=>s,uZ:()=>i,zP:()=>r});let a="embed--container--KRhyf",s="embed--iframe--6z9Fq",n="embed--loaded--LStWq",i="embed--playIcon--8LC5v",r="embed--inactiveOverlayBackdrop__OLD--8aXxQ",o="embed--inactiveOverlayBackdrop--DDuMq"},871600:(e,t,l)=>{l.d(t,{U:()=>a});let a="flapp_overlay--elementContainer--b1Khv"},961501:(e,t,l)=>{l.d(t,{e:()=>a});function a(e,t,l){""!==l&&(e.delete(t),"starting-point-node-id"===t&&(e.delete("node-id"),e.append("node-id",l)),e.append(t,l))}},778047:(e,t,l)=>{l.d(t,{A:()=>n});var a=l(246144),s=l(104035);function n(e){let t;try{t=new URL(e)}catch(t){return(0,a.x1)("embeddable_prototype_url_validation","Failed to parse embeddable prototype URL",{url:e,error:t},{reportAsSentryError:!0}),null}return"https:"!==t.protocol?((0,a.x1)("embeddable_prototype_url_validation","Embeddable prototype URL must use HTTPS protocol",{url:e,protocol:t.protocol},{reportAsSentryError:!0}),null):("figma.com"===t.hostname||t.hostname.endsWith(".figma.com"))&&(0,s.F4)(t.hostname)?t:((0,a.x1)("embeddable_prototype_url_validation","Embeddable prototype URL must be from figma.com domain",{url:e,hostname:t.hostname},{reportAsSentryError:!0}),null)}},945317:(e,t,l)=>{l.d(t,{Z:()=>e7,v:()=>e9});var a=l(104076),s=l(716976),n=l(980852),i=l(641518),r=l(835307);let o=(0,s.createContext)(null);function p(){let e=(0,s.useContext)(o);if(!e)throw Error("useFlappConfigContext must be used within a FlappConfigProvider");return e}let d=(0,s.createContext)(null);function c(){let e=(0,s.useContext)(d);if(!e)throw Error("useFlappParticipantData must be used within a FlappParticipantDataProvider");return e}function u(e){return function({nodeId:t,isReadOnly:l,invalidateThumbnail:i}){let p=(0,s.useCallback)((e,l)=>{let a=(0,n.getActiveTSSceneGraph)().get(t);a&&a.setInteractiveSlideConfigData(e,l)},[t]),c=(0,s.useCallback)(e=>{let l=(0,n.getActiveTSSceneGraph)().get(t);l&&l.deleteInteractiveSlideConfigData(e)},[t]),u=(0,s.useCallback)((e,l)=>{let a=(0,n.getActiveTSSceneGraph)().get(t);a&&a.setInteractiveSlideParticipantData(e,l)},[t]),m=(0,s.useCallback)(()=>{let e=(0,n.getActiveTSSceneGraph)().get(t);e&&e.resetInteractiveSlideParticipantData()},[t]),f=(0,r.Fk)((e,t)=>{let l=e.get(t);return l?l.interactiveSlideConfigData:null},t),g=(0,r.Fk)((e,t)=>{let l=e.get(t);return l?l.interactiveSlideParticipantData:null},t);return f&&g?(0,a.jsx)(o.Provider,{value:{configData:f,isViewer:!1,isPresenter:!1,nodeId:t,isReadOnly:l,invalidateThumbnail:i,setConfigData:p,deleteConfigData:c},children:(0,a.jsx)(d.Provider,{value:{participantData:g,setParticipantData:u,resetParticipantData:m},children:(0,a.jsx)(e,{configData:f,deleteConfigData:c,invalidateThumbnail:i,isPresenter:!1,isReadOnly:l,isViewer:!1,nodeId:t,participantData:g,recordingKey:`flapp.${t}`,resetParticipantData:m,setConfigData:p,setParticipantData:u})})}):null}}function m(e){return function({viewer:t,nodeId:l}){let n=(0,r.x3)((e,t)=>{let l=e.getPrototypeNode(t);return l?e.nodeInteractiveSlideConfigData(l):null},l),i=(0,r.x3)((e,t)=>{let l=e.getPrototypeNode(t);return l?e.nodeInteractiveSlideParticipantData(l):null},l),p=(0,s.useCallback)((e,a)=>{t.setInteractiveSlideConfigData(l,e,a)},[t,l]),c=(0,s.useCallback)((e,a)=>{t.setInteractiveSlideParticipantData(l,e,a)},[t,l]);if(!n||!i)return null;let u=t.isPresenterSession();return(0,a.jsx)(o.Provider,{value:{configData:n,isViewer:!0,isPresenter:u,nodeId:l,isReadOnly:!1,invalidateThumbnail:void 0,setConfigData:p,deleteConfigData:void 0},children:(0,a.jsx)(d.Provider,{value:{participantData:i,setParticipantData:c,resetParticipantData:void 0},children:(0,a.jsx)(e,{configData:n,participantData:i,setConfigData:p,setParticipantData:c,recordingKey:`flapp.${l}`,isViewer:!0,isPresenter:u,nodeId:l,viewer:t})})})}}function f(e,t){return(t?i.Pt("flapp",e,t):i.Pt("flapp",e))||`flapp.${e}`}var g=l(971080),h=l(298112),x=l(684742),_=l(997811),v=l(20165),b=l(790009),j=l(170627),y=l(812714),N=l(511570),w=l.n(N),C=l(816565),S=l(652539),P=l(236631),I=l(192075),k=l(278491),E=l(117313),F=l(592726),T=l(349311),U=l(218587),L=l(404660),D=l(20226),O=l(143480);let B="alignment_scale--prompt--D-cNA text--fontPos20--Bcz97 text--_fontBase--QdLsd";var A=l(807151);let V=(0,s.forwardRef)(({nodeId:e,recordingKey:t,prompt:l,setPrompt:s},n)=>{let i=e=>{s(e.clipboardData.getData("text"))};return(0,a.jsx)(g.Y.Root,{className:"alignment_scale--promptContainer--hRH11",children:(0,a.jsx)(g.Y,{ref:n,id:f(e,"questionInput"),className:w()(B,k.Qx,k.Uu),placeholder:(0,I.t)("slides.flapp.alignment.prompt_placeholder"),value:l,onChange:s,htmlAttributes:{onPaste:e=>i(e)},recordingKey:t})})});function M({prompt:e}){return(0,a.jsx)("p",{className:B,children:e||(0,I.t)("slides.flapp.alignment.prompt_placeholder")})}function R(e){let t=Math.round(4*e)/4;return 0===t?(0,I.t)("slides.flapp.alignment.strongly_disagree_label"):.25===t?(0,I.t)("slides.flapp.alignment.slightly_disagree_label"):.5===t?(0,I.t)("slides.flapp.alignment.neutral_label"):.75===t?(0,I.t)("slides.flapp.alignment.slightly_agree_label"):(0,I.t)("slides.flapp.alignment.strongly_agree_label")}function $({promptElement:e,onVoteRequest:t}){var l;let{configData:n,setConfigData:i,nodeId:r}=p(),{participantData:o}=c(),d=(0,F.iZ)(),u=t&&d?(e,l)=>{t({name:d.name,userId:d.id,thumbnailUrl:d.img_url,alignmentXOffsetPercentage:e,alignmentYOffsetPercentage:l,timestamp:Date.now()})}:void 0,[m,g]=(l=d?.id,(0,s.useMemo)(()=>{let e;return o?[Object.values(o).reduce((t,a)=>{try{let s=JSON.parse(a);s.userId===l&&(e=s),t.push(s)}catch(e){}return t},[]).sort((e,t)=>e.timestamp-t.timestamp),e]:[[],void 0]},[o,l])),h="true"===n.resultsShown,x=j.nc.user("slides-toggle-alignment-scale-results-shown",()=>{i("resultsShown",(!h).toString())}),_=(0,O.aF)(n);return(0,a.jsx)(b.J,{mode:_.preferredTokenTheme,children:(0,a.jsxs)("div",{className:w()(P.s.wFull.flex.flexColumn.justifyCenter.itemsCenter.$,"alignment_scale--alignmentScaleThemeWrapper--1VvHW"),"data-transparency-mode":_.transparentMode,children:[(0,a.jsxs)("div",{className:"alignment_scale--mainContainer--aIN2p",children:[(0,a.jsx)(Q,{prompt:e,allVoteData:m,currentUserVoteData:g}),(0,a.jsx)(K,{resultsShown:h,alignmentVoteData:m,currentUserVoteData:g,onScaleClick:u}),(0,a.jsx)(W,{})]}),(0,a.jsx)(H,{recordingKey:f(r,"slides-alignment-scale-reveal-results"),resultsShown:h,onToggle:x})]})})}function z({onVoteRequest:e,currentUserVoteData:t}){let[l,n]=s.useState(t?.alignmentXOffsetPercentage??.5);return(s.useEffect(()=>{t?.alignmentXOffsetPercentage!==void 0&&n(t.alignmentXOffsetPercentage)},[t?.alignmentXOffsetPercentage]),e)?(0,a.jsx)("div",{className:"alignment_scale--sliderOverlayContainer--nBH3u",children:(0,a.jsx)(h.bL,{"aria-label":(0,I.t)("slides.flapp.alignment.vote_slider_label"),bigStep:.25,defaultValue:.5,hints:[0,.25,.5,.75,1],max:1,min:0,onChange:(t,{commit:l})=>{n(t),e(t,.5)},step:.01,value:l,valueText:`${Math.round(100*l)}%`,children:(0,a.jsx)(h.zi,{})})}):null}function Q({prompt:e,allVoteData:t,currentUserVoteData:l}){return(0,a.jsxs)("div",{className:"alignment_scale--headerContainer--l688h",children:[e,(0,a.jsx)(X,{allVoteData:t,currentUserVoteData:l})]})}function K({resultsShown:e,alignmentVoteData:t,currentUserVoteData:l,onScaleClick:n}){let i=(0,s.useRef)(null),r=n?e=>{let t=e.currentTarget.getBoundingClientRect(),l=e.clientX-t.left,a=e.clientY-t.top;n(l/t.width,a/t.height)}:void 0;return(0,a.jsxs)("div",{className:"alignment_scale--scaleContainerPseudoBorder--Jj6DE",children:[(0,a.jsx)("div",{className:"alignment_scale--scaleContainerSolidBackground--s4pRF"}),(0,y.kc)().slides_editor_a11y_2&&(0,a.jsx)(z,{onVoteRequest:n,currentUserVoteData:l}),(0,a.jsxs)(x.E,{"aria-label":(0,I.t)("slides.flapp.alignment.prompt_placeholder"),className:w()("alignment_scale--scaleContainer--gmwd3",n?P.s.cursorPointer.$:""),ref:i,onClick:r,htmlAttributes:{tabIndex:(0,y.kc)().slides_editor_a11y_2?-1:void 0},children:[(0,a.jsx)("div",{className:"alignment_scale--scaleLine--uHC-I"}),(0,a.jsxs)("div",{className:"alignment_scale--scaleMarkerContainer--X5x-j",children:[(0,a.jsx)("div",{className:"alignment_scale--scaleMarker0--QIykm alignment_scale--_scaleMarker---mTsV"}),(0,a.jsx)("div",{className:"alignment_scale--scaleMarker25--3Xe8a alignment_scale--_scaleMarker---mTsV"}),(0,a.jsx)("div",{className:"alignment_scale--scaleMarker50--L4exg alignment_scale--_scaleMarker---mTsV"}),(0,a.jsx)("div",{className:"alignment_scale--scaleMarker75--Urto8 alignment_scale--_scaleMarker---mTsV"}),(0,a.jsx)("div",{className:"alignment_scale--scaleMarker100--AHcJW alignment_scale--_scaleMarker---mTsV"})]}),e&&i.current?t.map(e=>(0,a.jsx)(C.oW,{"aria-label":(0,I.t)("slides.flapp.alignment.vote_label",{name:e.name,label:R(e.alignmentXOffsetPercentage)}),src:(0,E.p)(e.thumbnailUrl),alt:(0,I.t)("slides.flapp.alignment.vote_label",{name:e.name,label:R(e.alignmentXOffsetPercentage)}),className:"alignment_scale--alignmentScaleVote--zkhC9",style:{left:`${Math.floor(100*e.alignmentXOffsetPercentage)}%`,top:`${Math.floor(100*e.alignmentYOffsetPercentage)}%`,transform:"translate(-15px, -15px)"},tabIndex:(0,y.kc)().slides_editor_a11y_2?0:void 0},e.userId)):null]})]})}function W(){return(0,a.jsxs)("div",{className:"alignment_scale--scaleLabelContainer--HF5-I",children:[(0,a.jsx)("div",{className:"alignment_scale--stronglyDisagreeLabel--1Yzc0 alignment_scale--_labelBase--enfVZ text--fontPos14--OL9Hp text--_fontBase--QdLsd",children:(0,I.tx)("slides.flapp.alignment.strongly_disagree_label")}),(0,a.jsx)("div",{className:"alignment_scale--neutralLabel--qqm5f alignment_scale--_labelBase--enfVZ text--fontPos14--OL9Hp text--_fontBase--QdLsd",children:(0,I.tx)("slides.flapp.alignment.neutral_label")}),(0,a.jsx)("div",{className:"alignment_scale--stronglyAgreeLabel--Dhs7h alignment_scale--_labelBase--enfVZ text--fontPos14--OL9Hp text--_fontBase--QdLsd",children:(0,I.tx)("slides.flapp.alignment.strongly_agree_label")})]})}function X({allVoteData:e,currentUserVoteData:t}){let l,s=e;return t&&(s=[t,...e.filter(e=>e.userId!==t.userId)]),l=0===s.length?(0,I.t)("slides.flapp.results.no_votes_yet"):1===s.length?t?(0,I.t)("slides.flapp.results.single_self_vote"):(0,I.t)("slides.flapp.results.single_other_vote",{person:s[0].name}):t?(0,I.t)("slides.flapp.results.multiple_votes_including_user",{totalVotes:s.length-1}):(0,I.t)("slides.flapp.results.multiple_other_votes",{totalVotes:s.length}),(0,a.jsxs)("div",{className:"alignment_scale--voteDisplayContainer--upm2F text--fontPos13--xW8hS text--_fontBase--QdLsd",children:[(0,a.jsx)("p",{className:"alignment_scale--description--kxZH3",children:l}),(0,a.jsx)(q,{allVoteData:s,maxToShow:2})]})}function q({allVoteData:e,maxToShow:t}){let l=e.length;e.length>t+1&&(l=t);let s=e.slice(0,l),n=e.slice(l),i=n.map(e=>({id:e.userId,handle:e.name,img_url:e.thumbnailUrl}));return(0,a.jsxs)("div",{className:"alignment_scale--voteProfilesContainer--wbH0G",children:[s.map(e=>(0,a.jsx)("img",{className:"alignment_scale--voteProfile--Um0e6",alt:e.name,src:(0,E.p)(e.thumbnailUrl),"data-tooltip-type":T.Ib.TEXT,"data-tooltip":e.name},e.userId)),n.length>0?(0,a.jsx)("div",{className:"alignment_scale--overflowVote--KIoww text--fontPos11--2LvXf text--_fontBase--QdLsd","data-tooltip-type":T.Ib.SPECIAL,"data-tooltip":U.c,"data-tooltip-overflow-user-data":JSON.stringify(i),children:`+${n.length}`}):null]})}function H({recordingKey:e,resultsShown:t,onToggle:l}){return(0,a.jsxs)("div",{className:"alignment_scale--resultToggleContainer--euX1O",children:[(0,a.jsx)(S.B,{className:"alignment_scale--resultToggleContainerSvg--PFGWI",svg:A.A}),(0,a.jsxs)(x.E,{className:"alignment_scale--resultToggle--alry6 text--fontPos13--xW8hS text--_fontBase--QdLsd",onClick:l,recordingKey:e,children:[t?(0,a.jsx)(_.l,{}):(0,a.jsx)(v.f,{}),(0,a.jsx)("p",{children:t?(0,I.t)("slides.flapp.results.results_shown"):(0,I.t)("slides.flapp.results.results_hidden")})]})]})}let Y={EditorFlapp:u(function(){let{configData:e,setConfigData:t,nodeId:l}=p(),s=(0,L.US)(D.R8,{nodeId:l}),n=(0,a.jsx)(V,{ref:s,nodeId:l,recordingKey:f(l,"slides-alignment-scale-prompt-input"),prompt:e.prompt,setPrompt:e=>{j.l7.user("slides-update-alignment-scale-prompt",()=>{t("prompt",e)})}});return(0,a.jsx)($,{promptElement:n})}),ViewerFlapp:m(function(){let{configData:e}=p(),{setParticipantData:t}=c();return(0,a.jsx)($,{promptElement:(0,a.jsx)(M,{prompt:e.prompt}),onVoteRequest:e=>{j.l7.user("slides-update-alignment-scale-vote",()=>{t(e.userId,JSON.stringify(e))})}})})};var J=l(99876),G=l(219199),Z=l(681398),ee=l(923513);function et({configData:e,nodeId:t}){let l=(0,ee.h)(),s=(0,J.gD)(e);return(0,a.jsx)(J.wL,{deviceFrame:s,children:(0,a.jsx)(J.lu,{nodeId:t,onClick:()=>{e.url&&l&&G.Ay.redirect(e.url,Z.uG?void 0:"_blank")}})})}let el={EditorFlapp:u(J.DR),ViewerFlapp:m(J.E$)},ea={EditorFlapp:u(et),ViewerFlapp:m(et)},es="facepile--facepileStamp---gzFz facepile--_fixedStampBase--icx6v facepile--_stampBase--eCNDB";var en=l(363895);let ei=(0,s.forwardRef)(({prompt:e,setPrompt:t},l)=>{let{nodeId:s}=p();return(0,a.jsx)(g.Y,{ref:l,"aria-label":(0,I.t)("slides.flapp.facepile.input_label"),className:w()(k.Qx,k.Uu),htmlAttributes:{onPaste:e=>{t(e.clipboardData.getData("text"))}},id:f(s,"facepile-prompt-input"),onChange:e=>{t(e)},placeholder:(0,I.t)("slides.flapp.facepile.prompt_placeholder"),recordingKey:f(s,"facepile-prompt-input"),type:"text",value:e})});function er({prompt:e}){return(0,a.jsx)("h1",{children:e||(0,I.t)("slides.flapp.facepile.prompt_placeholder")})}function eo({promptElement:e,onToggleStampRequest:t}){let{configData:l,isViewer:s}=p(),{participantData:n}=c(),i=(0,F.iZ)(),r=function(e,t){if(!e||0===Object.keys(e).length)return{stamps:[],currentUserStamped:!1};let l=!1;return{stamps:Object.values(e).reduce((e,a)=>{try{let s=JSON.parse(a);s.userId===t&&(l=!0),e.push(s)}catch(e){}return e},[]).sort((e,l)=>e.userId===t?-1:l.userId===t?1:e.timestamp-l.timestamp),currentUserStamped:l}}(n,i?.id),o=function(e,t){let{stamps:l,currentUserStamped:a}=e;return 0===l.length?t?(0,I.t)("slides.flapp.facepile.description_click_to_stamp"):(0,I.t)("slides.flapp.results.no_stamps_yet"):1===l.length?a?(0,I.t)("slides.flapp.results.single_self_stamp"):(0,I.t)("slides.flapp.results.single_other_stamp",{person:l[0].name}):a?(0,I.t)("slides.flapp.results.multiple_stamps_including_user",{totalStamps:l.length-1}):(0,I.t)("slides.flapp.results.multiple_other_stamps",{totalStamps:l.length})}(r,s),d=(0,O.aF)(l);return(0,a.jsx)(b.J,{mode:d.preferredTokenTheme,children:(0,a.jsxs)("div",{className:w()("facepile--container--k1p6f","facepile--facepileThemeWrapper--dG-S8"),"data-transparent-mode":d.transparentMode,children:[(0,a.jsx)("div",{className:"facepile--prompt--6Xfxz text--fontPos24--YppUD text--_fontBase--QdLsd",children:e}),(0,a.jsx)(ep,{isStampingEnabled:s,stampsWithMetadata:r,maxStampsToShow:3,currentUser:i,onToggleStampRequest:t}),(0,a.jsx)("p",{className:"facepile--description--SesIh text--fontPos20--Bcz97 text--_fontBase--QdLsd",children:o})]})})}function ep({isStampingEnabled:e,stampsWithMetadata:t,maxStampsToShow:l,currentUser:s,onToggleStampRequest:n}){let{stamps:i,currentUserStamped:r}=t,o=i.length;i.length>l+1&&(o=l);let p=i.slice(0,o),d=i.slice(o),c=e&&s&&!r;return(0,a.jsxs)("div",{className:P.s.flex.gap12.pt36.pb24.itemsCenter.alignCenter.$,children:[p.map(e=>{let t=!!(n&&s&&e.userId===s.id),l={text:e.name,subtext:t?(0,I.t)("slides.flapp.facepile.tooltip.click_to_remove"):void 0};return(0,a.jsx)(ed,{stamp:e,tooltipToShow:l,isOwnToggleableStamp:t,onClick:()=>{t&&n(s.id,void 0)}},`${e.userId}-stamp`)}),d.length>0?(0,a.jsx)(ec,{overflowStamps:d}):null,(0,a.jsx)(eu,{previewStamp:c?em(s):void 0,onClick:()=>{c&&n&&n(s.id,em(s))},disabled:!c})]})}function ed({stamp:e,isOwnToggleableStamp:t,tooltipToShow:l,onClick:s}){let n=l?.subtext?(0,I.t)("slides.flapp.facepile.stamp_with_action",{name:e.name,action:l.subtext}):(0,I.t)("slides.flapp.facepile.stamp_by_user",{name:e.name}),i={"data-tooltip-type":T.Ib.TEXT,"data-tooltip":l?.text,"data-tooltip-subtext":l?.subtext,"data-tooltip-offset-y":8},r=(0,a.jsx)(C.oW,{className:es,src:(0,E.p)(e.thumbnailUrl),alt:e.name,draggable:!1});return t?(0,a.jsx)(x.E,{className:"facepile--stampButton--4DETa",onClick:s,"aria-label":n,htmlAttributes:i,children:r}):(0,a.jsx)("div",{role:"img","aria-label":n,...i,children:r})}function ec({overflowStamps:e}){let t=e.map(e=>({id:e.userId,handle:e.name,img_url:e.thumbnailUrl}));return(0,a.jsx)("div",{className:"facepile--overflowStamp--j3fn3 text--fontPos22--4H4Fc text--_fontBase--QdLsd facepile--_stampBase--eCNDB","data-tooltip-type":T.Ib.SPECIAL,"data-tooltip":U.c,"data-tooltip-overflow-user-data":JSON.stringify(t),"data-tooltip-offset-y":8,children:(0,a.jsx)("p",{children:`+${e.length}`})})}function eu({previewStamp:e,onClick:t,disabled:l}){return(0,a.jsxs)(x.E,{className:w()("facepile--emptyStampContainer--dAbYv facepile--_fixedStampBase--icx6v facepile--_stampBase--eCNDB",e?"facepile--displayPreviewOnHover--qPtfX":""),onClick:t,"aria-label":(0,I.t)("slides.flapp.facepile.add_stamp_button"),disabled:l,children:[(0,a.jsx)(S.B,{className:"facepile--emptyStamp--KiqZH",svg:en.A}),e?(0,a.jsx)("div",{className:"facepile--previewStamp--TbFAQ",children:(0,a.jsx)(C.oW,{className:es,src:(0,E.p)(e.thumbnailUrl),alt:e.name,draggable:!1})}):null]})}function em(e){return{name:e.name,userId:e.id,thumbnailUrl:e.img_url,timestamp:Date.now()}}let ef={EditorFlapp:u(function(){let{configData:e,setConfigData:t,nodeId:l}=p(),s=(0,L.US)(D.R8,{nodeId:l}),n=(0,a.jsx)(ei,{ref:s,prompt:e.prompt,setPrompt:e=>{j.l7.user("slides-update-facepile-question",()=>{t("prompt",e)})}});return(0,a.jsx)(eo,{promptElement:n})}),ViewerFlapp:m(function(){let{configData:e}=p(),{setParticipantData:t}=c();return(0,a.jsx)(eo,{promptElement:(0,a.jsx)(er,{prompt:e.prompt}),onToggleStampRequest:(e,l)=>{j.l7.user("slides-add-user-facepile-stamp",()=>{t(e,JSON.stringify(l))})}})})};var eg=l(293422),eh=l(236901),ex=l(699474),e_=l(709615),ev=l(719625),eb=l(237420),ej=l(954068),ey=l(180),eN=l(256384);let ew="slides-update-poll-question",eC="slides-update-poll-option",eS="slides-update-poll-options",eP="poll--questionContainer--ktcEn",eI="poll--question--F1M7f text--fontPos30--N-YT7 text--_fontBase--QdLsd",ek="poll--optionContainer--ds9OS",eE="poll--newOption--H35l3",eF="poll--optionInner--WmnWP",eT="poll--optionFill--birzf",eU="poll--winning--ZgYy7",eL="poll--optionContent--XecHh text--fontPos20--Bcz97 text--_fontBase--QdLsd",eD="poll--optionContentText---N25s",eO="poll--optionMetadata--IbCVD";function eB({option:e,votes:t,isWinningVote:l,isUserVote:s,percentage:n,resultsShown:i,recordingKey:r,optionIndex:o}){let{setParticipantData:p}=c(),d=(0,eb.wA)(),u=(0,F.iZ)(),m=j.nc.system("slides-update-poll-votes",e=>{if(!u){d(eN.s.error((0,I.t)("slides.flapp.poll.vote_failure")));return}let t={userId:u.id,name:u.name,thumbnailUrl:u.img_url,timestamp:Date.now(),selectedOption:e};p(t.userId,JSON.stringify(t))}),f=t.map(e=>({id:e.userId,handle:e.name,img_url:e.thumbnailUrl}));return(0,a.jsx)("div",{className:ek,children:(0,a.jsxs)(x.E,{className:w()(eF,"poll--hoverable--uHwKu"),recordingKey:r,onClick:()=>{m(o)},"aria-label":(0,I.t)("slides.flapp.poll.vote_for_option",{option:e}),"aria-pressed":s,htmlAttributes:{"data-tooltip-type":T.Ib.SPECIAL,"data-tooltip":i&&f.length>0?U.c:void 0,"data-tooltip-overflow-user-data":JSON.stringify(f),"data-tooltip-offset-y":8},children:[i&&(0,a.jsx)("div",{className:w()(eT,l?eU:""),style:{width:`${n}%`}}),(0,a.jsxs)("div",{className:eL,children:[(0,a.jsx)("div",{className:eD,children:e}),(0,a.jsxs)("div",{className:eO,children:[s&&(0,a.jsx)(ej.g,{}),i&&(0,a.jsx)("span",{children:`${n}%`})]})]})]})})}function eA({option:e,votes:t,isWinningVote:l,isUserVote:s,percentage:n,resultsShown:i,recordingKey:r,optionIndex:o,inputRef:d,setPollUpdated:c}){let{configData:u,setConfigData:m,deleteConfigData:f}=p(),h=eM(u),x=e=>`option${e}`,_=j.nc.user(eC,e=>{m(x(o),e)}),v=j.nc.user(eC,e=>{m(x(o),e.clipboardData.getData("text"))}),b=j.nc.user(eS,e=>{o===h.length-1&&("Enter"===e.key&&h.length<6?(m(x(o+1),""),c(!0)):h.length>2&&0===h[o].length&&("Backspace"===e.key||"Delete"===e.key)&&(f&&(f(x(o)),e.preventDefault()),c(!0)))}),y=t.map(e=>({id:e.userId,handle:e.name,img_url:e.thumbnailUrl}));return(0,a.jsx)("div",{className:ek,children:(0,a.jsxs)("div",{className:eF,"data-tooltip-type":T.Ib.SPECIAL,"data-tooltip":i&&y.length>0?U.c:void 0,"data-tooltip-overflow-user-data":JSON.stringify(y),"data-tooltip-offset-y":8,children:[i&&(0,a.jsx)("div",{className:w()(eT,l?eU:""),style:{width:`${n}%`}}),(0,a.jsxs)("div",{className:eL,children:[(0,a.jsx)(g.Y,{id:r,className:w()(eD,k.Qx,k.Uu),value:e,placeholder:(0,I.t)("slides.flapp.poll.option_placeholder"),onChange:_,htmlAttributes:{onPaste:v,onKeyDownCapture:b},ref:d,recordingKey:r}),(0,a.jsxs)("div",{className:eO,children:[s&&(0,a.jsx)(ej.g,{}),i&&(0,a.jsx)("span",{children:`${n}%`})]})]})]})})}function eV({recordingKey:e,onClick:t}){let{isViewer:l}=p();return l||!t?(0,a.jsx)("div",{"aria-hidden":"true",className:w()(ek,eE,"poll--newOptionInvisible--XwjKd")}):(0,a.jsx)("div",{className:ek,children:(0,a.jsx)(x.E,{className:eE,onClick:t,recordingKey:i.Pt(e,"addOption"),"aria-label":(0,I.t)("slides.flapp.poll.add_option"),children:(0,a.jsx)(ey.$,{})})})}function eM(e){let t=[];for(let l=0;l<6;l++){let a=e[`option${l}`];void 0!==a&&t.push(a)}return t}function eR({resultsShown:e,setResultsShown:t}){let l=(0,y.kc)().slides_editor_a11y_2?(0,I.t)("slides.flapp.results.reveal_results"):e?(0,I.t)("slides.flapp.results.results_shown"):(0,I.t)("slides.flapp.results.results_hidden");return(0,y.kc)().slides_editor_a11y_2?(0,a.jsxs)(x.E,{className:w()("poll_toggle_button--button--eBEva",{"poll_toggle_button--toggled--H3-Xs":e}),onClick:()=>t(!e),recordingKey:"resultsButton","aria-pressed":e,"aria-label":l,htmlAttributes:{"data-tooltip":l,"data-tooltip-type":T.Ib.TEXT},children:[e?(0,a.jsx)(eh.T,{}):(0,a.jsx)(ex.A,{})," ",l]}):(0,a.jsx)(eg.WW,{htmlAttributes:{"data-tooltip":l,"data-tooltip-type":T.Ib.TEXT},onClick:()=>t(!e),recordingKey:"resultsButton",variant:"secondary",iconPrefix:e?(0,a.jsx)(eh.T,{}):(0,a.jsx)(ex.A,{}),children:l})}function e$({totalVotes:e,hasUserVote:t,firstVoteByTimestamp:l}){let s;return s=0===e?(0,I.t)("slides.flapp.results.no_votes_yet"):1===e?t?(0,I.t)("slides.flapp.results.single_self_vote"):l?(0,I.t)("slides.flapp.results.single_other_vote",{person:l.name}):(0,I.t)("slides.flapp.results.multiple_other_votes",{totalVotes:e}):t?(0,I.t)("slides.flapp.results.multiple_votes_including_user",{totalVotes:e-1}):(0,I.t)("slides.flapp.results.multiple_other_votes",{totalVotes:e}),(0,a.jsx)("p",{children:s})}function ez({preferredTheme:e,transparencyMode:t}){let{configData:l,isViewer:i,nodeId:r,setConfigData:o}=p(),d=(0,L.US)(D.R8,{nodeId:r}),{participantData:u}=c(),m=(0,F.iZ)(),g=eM(l),h="true"===l.resultsShown,[x,_]=s.useState(!1),v=s.useMemo(()=>[],[]);(0,s.useEffect)(()=>{if(x&&v.length>0){let e=v.slice(-1)[0];e&&e.current&&e.current.focus()}},[g.length,v,x]);let N=(0,s.useRef)(null);(0,s.useEffect)(()=>{if(i)return;let e=N.current,t=new ResizeObserver(e=>{let t=(0,n.getActiveTSSceneGraph)().get(r);if(t)for(let l of e)j.l7.system("slides-poll-auto-resize",()=>{let e=getComputedStyle(l.target),a=parseFloat(e.paddingTop),s=a+parseFloat(e.paddingBottom)+parseFloat(e.borderTopWidth)+parseFloat(e.borderBottomWidth),n=l.contentRect.height+s;t&&n>t.size.y&&(t.size={x:t.size.x,y:n})})});return e&&t.observe(e),()=>{e&&t.unobserve(e)}},[r,i]);let C=(0,ev.s)(r);(0,s.useEffect)(()=>{C&&(0,y.kc)().slides_editor_a11y_2&&e_.Lj.announcePollInteractiveControlsAvailable()},[C]);let S=e=>`option${e}`,P=j.nc.user("slides-update-poll-results-visibility",e=>{o("resultsShown",e?"true":"false")}),{groupedVotes:I,totalVotes:k,votePercentages:E,winningVoteIndices:T,userVoteIndex:U,firstVoteByTimestamp:O}=function(e,t,l){let a;let s=eM(t),n=-1,i=Object.values(l).reduce((t,l)=>{try{let s=JSON.parse(l);s.userId===e&&(n=s.selectedOption),a=a&&a.timestamp>s.timestamp||!a?s:a,t.push(s)}catch(e){}return t},[]).sort((e,t)=>e.timestamp-t.timestamp),r=0,o=s.map((e,t)=>{let l=i.filter(e=>e.selectedOption===t);return r=l.length>r?l.length:r,l}),p=i.length,d=s.map((e,t)=>Math.round(100*(o[t].length/p||0))),c=o.reduce((e,t,l)=>t.length===r&&0!==t.length?[...e,l]:e,[]);return{groupedVotes:o,votePercentages:d,totalVotes:p,winningVoteIndices:c,userVoteIndex:n,firstVoteByTimestamp:a}}(m?.id,l,u);return(0,a.jsx)(b.J,{mode:e,children:(0,a.jsxs)("div",{className:w()("poll--pollThemeWrapper--z0UVm","poll--container--UKRlY"),"data-transparency-mode":t,ref:N,children:[(0,a.jsx)(eQ,{ref:d}),g.map((e,t)=>{let l=s.createRef();v.push(l);let n=-1!==T.indexOf(t);return i?(0,a.jsx)(eB,{option:e,votes:I[t]??[],isWinningVote:n,isUserVote:t===U,percentage:E[t]??0,resultsShown:h,recordingKey:f(r,`option${t}`),optionIndex:t},t):(0,a.jsx)(eA,{inputRef:l,isUserVote:t===U,isWinningVote:n,option:e,optionIndex:t,percentage:E[t]??0,recordingKey:f(r,`optionInput${t}`),resultsShown:h,setPollUpdated:_,votes:I[t]??[]},t)}),(0,a.jsx)(eV,{onClick:g.length>=6?void 0:j.nc.user(eS,()=>{o(S(g.length),""),_(!0)}),recordingKey:f(r)}),(0,a.jsxs)("div",{className:"poll--resultContainer--cQQVk text--fontPos20--Bcz97 text--_fontBase--QdLsd",children:[(0,a.jsx)(e$,{totalVotes:k,hasUserVote:U>=0,firstVoteByTimestamp:O}),(0,a.jsx)(eR,{resultsShown:h,setResultsShown:e=>P(e)})]})]})})}let eQ=(0,s.forwardRef)((e,t)=>{let{configData:l,isViewer:s,setConfigData:n,nodeId:i}=p(),r=l.question||"",o=j.nc.user(ew,e=>{n("question",e)}),d=j.nc.user(ew,e=>{n("question",e.clipboardData.getData("text"))});return s?(0,a.jsx)("div",{className:eP,children:(0,a.jsx)("h1",{className:eI,children:r})}):(0,a.jsx)(g.Y.Root,{className:eP,children:(0,a.jsx)(g.Y,{ref:t,id:f(i,"questionInput"),className:w()(eI,k.Qx,k.Uu),value:r,placeholder:(0,I.t)("slides.flapp.poll.question_placeholder"),onChange:o,htmlAttributes:{onPaste:e=>d(e)},recordingKey:f(i,"questionInput")})})});function eK(){let{configData:e}=p(),t=(0,O.aF)(e);return(0,a.jsx)(ez,{preferredTheme:t.preferredTokenTheme,transparencyMode:t.transparentMode})}let eW={EditorFlapp:u(eK),ViewerFlapp:m(eK)};var eX=l(638004),eq=l(419278),eH=l(246144),eY=l(679359),eJ=l(106170),eG=l(260495),eZ=l(52886);async function e0(e){if(!e)return;let t=(0,eq.KJ)(e.trim());if(t)try{let l=(await eZ.E.getLinkMetadata({text:t.isFromIFrame?e:t.url,useEmbedsAllowList:"true",useLinkPreviewsV2:"true"})).data.meta;if(!l||"embed"!==l.type)return;return{srcUrl:l.srcUrl.replace("&autoplay=1","").replace("&auto_play=1","")+"&enablejsapi=1",url:decodeURIComponent(l.url||""),height:800*(l.height||450)/(l.width||800),width:800,title:decodeURIComponent(l.title||"YouTube"),thumbnailImage:l.thumbnailImage,thumbnailUrl:l.thumbnailUrl}}catch(e){(0,eH.x1)(eX.e.SLIDES,"Failed to get youtube embed",e)}}function e1({disablePointerEvents:e,onIframeLoad:t}){let{configData:l}=p();return(0,a.jsxs)("div",{className:P.s.wFull.hFull.$,children:[l.srcUrl&&l.title?(0,a.jsx)("iframe",{src:l.srcUrl,className:P.s.wFull.hFull.$,onLoad:e=>t?.(e.target),title:l.title,allowFullScreen:!1,allow:"autoplay"}):null,e?(0,a.jsx)("div",{className:P.s.wFull.hFull.absolute.top0.left0.$}):null]})}function e2(){let{configData:e}=p();return e.url&&e.title?(0,a.jsx)("a",{className:P.s.wFull.hFull.cursorPointer.relative.$,style:{pointerEvents:"auto"},href:e.url,target:"_blank",rel:"noopener noreferrer",title:e.title,children:e.thumbnailUrl?(0,a.jsx)("img",{src:e.thumbnailUrl,alt:e.title,className:P.s.wFull.hFull.$,style:{objectFit:"cover"}}):null}):null}let e5={EditorFlapp:u(function(){let{configData:e,nodeId:t,setConfigData:l,isReadOnly:i}=p();return((0,s.useEffect)(()=>{i||e.srcUrl||e0(e.url).then(async e=>{if(!e)return;let a=(0,n.getActiveTSSceneGraph)().get(t);if(a&&(j.l7.system("initializing-youtube",()=>{(0,eJ.r)(()=>{a.resizeWithConstraints(e.width,e.height),a.proportionsConstrained=!0;let t=a.relativeTransform;t.m02=a.relativeTransform.m02-e.width/2,t.m12=a.relativeTransform.m12-e.height/2,a.relativeTransform=t,l("srcUrl",e.srcUrl),l("title",e.title),e.url&&l("url",e.url),e.thumbnailUrl&&l("thumbnailUrl",e.thumbnailUrl)})}),e.thumbnailImage))try{let t=new Uint8Array(e.thumbnailImage.data),l=await (0,eG.UD)(t,"image/png",e.title);j.l7.system("initializing-youtube-thumbnail",()=>{(0,eJ.r)(()=>{a.insertImageInFillPaint(l)})})}catch(e){}})},[e.url,e.srcUrl,t,l,i]),e.url&&!e.srcUrl)?(0,a.jsx)("div",{className:P.s.absolute.w48.h48.$,children:(0,a.jsx)(eY.kt,{size:"custom",className:P.s.w48.h48.$})}):(0,a.jsx)(e1,{disablePointerEvents:!0})}),ViewerFlapp:m(function(){let{nodeId:e,viewer:t}=p(),l=(0,s.useCallback)(l=>{t&&t.associateYoutubeWithNode(e,l)},[t,e]);return(0,s.useEffect)(()=>()=>{t&&t.disassociateYoutubeWithNode(e)},[t,e]),(0,a.jsx)(e1,{onIframeLoad:l})})},e4={EditorFlapp:u(e2),ViewerFlapp:m(e2)},e8={EMBED:el,POLL:eW,FACEPILE:ef,ALIGNMENT:Y,YOUTUBE:e5},e3={EMBED:ea,POLL:eW,FACEPILE:ef,ALIGNMENT:Y,YOUTUBE:e4},e6={EditorFlapp:()=>null,ViewerFlapp:()=>null};function e7(e){return null===e?e6:e8[e]||e6}function e9(e){return null===e?e6:e3[e]||e6}},719625:(e,t,l)=>{l.d(t,{_:()=>d,s:()=>o});var a=l(716976),s=l(266808),n=l(795033),i=l(74620);let r=(0,l(140948).bt)(e=>e.mirror.appModel.activeUserAction);function o(e){let t=(0,i.KH)(),l=t&&1===Object.keys(t).length&&t[e],a=(0,n.md)(r);return l&&a===s.QOV.DEFAULT}let p=(0,n.eU)(null);function d(e){let[t,l]=(0,n.fp)(p);return{isEmbedActive:t===e,setActiveEmbed:a.useCallback(()=>{l(e)},[e,l])}}},707779:(e,t,l)=>{l.d(t,{i:()=>n});var a=l(716976),s=l(104076);let n=(0,a.memo)(function(e){return(0,s.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,"data-fpl-icon-size":"24L",children:(0,s.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",fillRule:"evenodd",d:"M12.774 19.963c.32-.03.63.142.747.441.084.215-.028.476-.257.508a9 9 0 1 1 7.648-7.648c-.032.229-.293.34-.508.256a.72.72 0 0 1-.44-.747Q20 12.39 20 12a8 8 0 1 0-7.226 7.963M18 11.883c.007.342-.343.558-.662.433a.55.55 0 0 1-.34-.5 5 5 0 1 0-5.18 5.18c.218.01.418.138.498.342.125.319-.09.669-.433.662A6 6 0 1 1 18 11.882m-7.17 2.88c.224.095.423-.132.334-.359a3 3 0 0 1-.06-.167 2 2 0 0 0-.51-.814 2 2 0 1 1 2.828-2.829c.227.23.506.414.815.51q.084.026.168.06c.226.088.453-.11.358-.335a3 3 0 1 0-3.934 3.934m5.075 6.226a1.5 1.5 0 0 0 1.376-1.058l.624-2.027 2.026-.623a1.5 1.5 0 0 0 .108-2.83l-6-2.357a1.5 1.5 0 0 0-1.945 1.945l2.358 6a1.5 1.5 0 0 0 1.453.95m4.085-5.123a.5.5 0 0 1-.352.46l-2.533.778-.78 2.533a.5.5 0 0 1-.943.036l-2.357-6a.5.5 0 0 1 .648-.648l6 2.357a.5.5 0 0 1 .317.484",clipRule:"evenodd"})})})}}]);

//# debugId=2973f6b0-6683-573e-a68d-1cdeb466b4be

//# sourceMappingURL=https://admin.figma.com/admin/webpack-artifacts/f695da755526e966524d3a207f8e1d2f4d77a41b/1142-1f7cfe3b5b1ee4da.min.js.map