"use strict";
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="3244d1f8-9181-5b16-b402-4432939dff8a")}catch(e){}}();
(globalThis.webpackChunk_figma_web_bundler=globalThis.webpackChunk_figma_web_bundler||[]).push([[4374],{603172:(e,t,l)=>{l.d(t,{A7:()=>a,i4:()=>r,nt:()=>o});var s=l(599078),n=l(58814);let o=e=>e.library.localStyleSelection,r=(0,s.Mz)([o,(e,t)=>t],(e,t)=>e?.type===t?e:null),a=(0,s.Mz)([r,(e,t,l)=>l],(e,t)=>{if(!e)return null;let l=new Set,s=new Set;return e.folderNames.forEach(e=>{let o=t.find(t=>"STYLE_FOLDER"===t.type&&t.name===e);o&&((0,n.KU)(o).forEach(e=>{l.add(e.name)}),(0,n.dm)(o).forEach(e=>{s.add(e.node_id)}))}),{type:e.type,folderNames:l,styleIds:s}})},270351:(e,t,l)=>{l.d(t,{Q:()=>eH});var s=l(104076),n=l(716976),o=l(237420),r=l(951002),a=l(99723),i=l(88314),d=l(307829),c=l(387092),u=l(266808),y=l(170627),p=l(812714),m=l(324063),g=l(359166),h=l(776111),x=l(883765),k=l(434511),f=l(328341),b=l(641518),w=l(563276),_=l(836982),S=l(192075),C=l(147046),E=l(850701),j=l(239613),v=l(928818),T=l(197055),L=l(489175),N=l(354114),I=l(74620),R=l(211862),P=l(624155),D=l(567325),K=l(603172),M=l(564914),A=l(25870),O=l(589481),F=l(694896),B=l(737139),Y=l(684742),U=l(420680),V=l(736813),$=l(390579),X=l(536358),H=l(7718),W=l(120440),q=l(349311),z=l(674524),Q=l(511570),Z=l.n(Q),G=l(221586),J=l(404343);let ee="styles--contextMenu--C-hVT",et="styles--rowSelectedExpanded--MGvUV",el="styles--panelHeaderRow--Kxqgo styles--styleTypeSectionRow--wVTIO",es="styles--panelHeaderRowFaded--pfgKz styles--panelHeaderRow--Kxqgo styles--styleTypeSectionRow--wVTIO draggable_list--panelHeaderRowFaded--kETRR",en="styles--panelTitleText--v7gXm draggable_list--panelTitleText--SwKez";function eo({ariaDescription:e,ariaLabel:t,ariaLevel:l,ariaPosinset:o,childLeft:r,childRight:a,deleteSelectedItems:i,hideStylePreview:d,index:c,inspectStyleSelected:u,isCollapsed:y=!0,isDragging:p,isEditable:m,isFirstChildOfSelection:g=!1,isFocused:h,isFolder:x,isLastChildOfSelection:k=!1,isRenaming:f,level:b,name:w,nameRef:_,onBlur:S,onContextMenu:C,onCreateFolder:E,onDoubleClick:j,onKeyDown:v,onFocus:T,onHoverChange:L,onMouseDown:I,onMouseMove:R,recordingKey:P,role:D,rowRef:K,secondaryName:M,selected:A,selectedSecondary:F,stopRenamingItem:Y,tooltipData:U}){let[V,$]=n.useState(w),[X,H]=n.useState(!1),q=n.useCallback(e=>{e?.select()},[]);n.useEffect(()=>{$(w)},[w]);let Q=n.useCallback(e=>{""===e.trim()?(Y(c,w),$(w)):Y(c,e)},[c,w,Y]),ee=(0,z.AF)((0,z.Pt)(P,"text-input"),"change",n.useCallback(e=>{$(e.currentTarget.value)},[$])),el=(0,z.v_)((0,z.Pt)(P,"text-input"),"keydown",e=>{e.keyCode===G.Uz.ESCAPE?(Y(c,w),$(w)):e.keyCode===G.Uz.ENTER&&Q(e.currentTarget.value)},{recordMetadata:e=>({inputValue:e.currentTarget.value}),playbackMetadata:e=>({currentTarget:{value:e.inputValue}})}),es=(0,z.v_)(P,"keydown",e=>{m&&!f&&(e.keyCode===G.Uz.BACKSPACE||e.keyCode===G.Uz.DELETE)?i():m&&!f&&e.keyCode===G.Uz.G&&(0,G.Fo)(e)?(E(),e.preventDefault()):!f&&"Tab"!==e.key&&e.nativeEvent&&N.Y5.forwardKeyboardEvent(e.nativeEvent),v?.(e)}),en=n.useCallback(()=>{Q(V)},[Q,V]),eo=(0,z.rf)(P,"contextmenu",e=>{C(e)}),er=(0,z.rf)(P,"mousemove",e=>{R(e)},{recordMetadata:e=>({bounds:e.currentTarget.getBoundingClientRect(),pageX:e.pageX,pageY:e.pageY}),playbackMetadata:e=>({currentTarget:{getBoundingClientRect:()=>e.bounds},pageX:e.pageX,pageY:e.pageY})}),ei=(0,z.rf)(P,"mousedown",e=>{I(e),d()}),ed=(0,z.rf)(P,"mouseenter",n.useCallback(()=>{H(!0),L?.(!0)},[H,L])),ec=n.useCallback(()=>{H(!1),L?.(!1)},[H,L]),eu=(0,z.rf)(P,"dblclick",n.useCallback(e=>{j(e)},[j])),ey=Math.min((b-1)*3,18),ep=J.jNX-4-ey,em=(X||h)&&!f,eg=A||F,eh=Z()({[et]:!y&&eg,"styles--folderSecondarySelected--SL0JY":F||A&&!g}),ex=Z()({"styles--rowSelectedSecondaryLightBlue--S-zy- draggable_list--rowSelectedSecondary--yOI1g raw_components--rowSelectedSecondary---U7Us raw_components--rowSelected--M2Eip":eg,[et]:!k&&eg}),ek=Z()("styles--rowWithBorder--bphZ-",{[eh]:x,[ex]:!x}),ef="row"===D,eb=(0,n.createElement)("div",{role:ef?"gridcell":void 0,tabIndex:ef?-1:void 0,className:"x78zum5 x6s0dn4 xa9xkfk xh8yej3 xxdk85o",key:w,"data-renaming":f},f?(0,s.jsx)(B.ks,{autoCapitalize:"off",autoCorrect:"off",autoFocus:!0,className:"xuxw1ft xb3r6kr xlyipyv x1yjdb4r",innerRef:q,onBlur:en,onChange:ee,onKeyDown:el,spellCheck:!1,value:V}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"x193iq5w xb3r6kr xlyipyv xuxw1ft",ref:_,...U,children:w}),M&&(0,s.jsx)("div",{className:"xuxw1ft xt970qd x181xhy4 x1n0bwc9",children:M})]}));return(0,s.jsxs)(O.e6,{ref:K,"aria-description":e,"aria-expanded":!y,"aria-label":t,"aria-level":l,"aria-posinset":o,"aria-selected":A||F,className:ek,dragging:p,hideGrabber:!0,onBlur:S,onContextMenu:eo,onDoubleClick:eu,onFocus:T,onKeyDown:es,onMouseDown:ei,onMouseEnter:ed,onMouseLeave:ec,onMouseMove:er,role:D,selected:A,selectedSecondary:!1,tabIndex:0,children:[ey>0&&(0,s.jsx)("span",{style:{gridColumnEnd:`span ${ey}`}}),(0,s.jsxs)("div",{role:"none",...W.Ay.props(ea.childLeftContainer(`span ${(em||u?ep-7:ep)||3}`)),children:[r,eb]}),a]})}let er={kGNEyG:"x6s0dn4",k1xSpc:"x78zum5",kZKoxP:"x1xy3vng",kVAEAm:"x1n2onr6",kOIVth:"x1nfngrj",khm7nJ:"",k1C7PZ:"",$$css:!0},ea={childLeftContainer:e=>[er,{kWZpDQ:null!=e?"x5ha1vm":e,$$css:!0},{"--x-gridColumnEnd":null!=e?e:void 0}]};function ei({deleteSelectedItems:e,folder:t,folderNameToNestUnder:l,hideStylePreview:r,index:a,isCollapsed:i,isDragging:d,isEditable:c,isRenaming:u,isTemporarilyExpanded:y,isFirstChildOfSelection:p,level:m,onContextMenu:g,onCreateFolder:h,onMouseDown:x,onMouseMove:k,onRenameItem:f,recordingKey:w,selected:_,selectedSecondary:C,stopRenamingItem:E,temporarilyExpandFolder:j,toggleFolder:v}){let L=(0,o.wA)(),[N,I]=n.useState(!1),[R,P]=n.useState(!1),K=n.useRef(null),M=n.useRef(null),A=!u&&c,O=n.useCallback(()=>{v(!i)},[i,v]),F=n.useCallback(e=>{e.target!==M.current&&t.styleTypeSection&&f(t.name,!1,t.styleTypeSection)},[t.name,t.styleTypeSection,f]);n.useEffect(()=>{if(N&&d&&i){let e=setTimeout(()=>{j(t.name)},1e3);return()=>clearTimeout(e)}},[N,d,i,j,t]);let W=n.useCallback(e=>{let l=(0,H.Zk)(t.styleTypeSection),s=K.current?.getBoundingClientRect();l&&s&&(L(T.Zs({rowLeft:s.left,rowTop:s.top,styleType:t.styleTypeSection,styleNameInputPrefix:`${t.name}/`,inheritStyleKeyField:l})),e.stopPropagation(),e.preventDefault())},[K,t.name,t.styleTypeSection,L]),z=n.useCallback(e=>{e.target===K.current&&(" "===e.key||"Enter"===e.key)&&(O(),e.preventDefault(),e.stopPropagation())},[O]),Q=n.useCallback(e=>{(" "===e.key||"Enter"===e.key)&&e.stopPropagation()},[]);return(0,s.jsx)(eo,{ariaLevel:m,childLeft:(0,s.jsx)("div",{role:"gridcell","aria-expanded":!i,children:(0,s.jsx)(Y.E,{className:"xgcd1z6 x5yr21d x192jxwq x1a2a7pz x5hs570",onClick:O,"aria-label":(0,S.t)("design_systems.styles.toggle_folder"),"aria-expanded":!i,htmlAttributes:{onKeyDown:Q},ref:M,children:i&&!y?(0,s.jsx)(V.k,{"aria-hidden":!0,className:"xiecat3"}):(0,s.jsx)($.O,{"aria-hidden":!0,className:"xiecat3"})})}),childRight:A&&(0,s.jsx)(B.$4,{role:"gridcell",children:(0,s.jsx)("div",{className:"xg01cxk x1euntei xemxxvk","data-hover":N||void 0,children:(0,s.jsx)(U.K,{recordingKey:b.Pt(w,"addButton"),"aria-label":(0,S.t)("design_systems.styles.tooltips.create"),onClick:W,htmlAttributes:{"data-tooltip-type":q.Ib.TEXT,"data-tooltip":(0,S.t)("design_systems.styles.tooltips.create"),onKeyDown:Q},children:(0,s.jsx)(X.e,{})})})}),deleteSelectedItems:e,forceShowHoverBorder:l===t.name,hideStylePreview:r,index:a,isCollapsed:i,isDragging:d,isEditable:c,isFirstChildOfSelection:p,isFocused:R,isFolder:!0,isRenaming:u,level:m,name:(0,D.kH)(t.name),onBlur:()=>P(!1),onContextMenu:g,onCreateFolder:h,onDoubleClick:F,onFocus:()=>P(!0),onHoverChange:I,onKeyDown:z,onMouseDown:x,onMouseMove:k,onRenameItem:f,recordingKey:w,role:"row",rowRef:K,selected:_,selectedSecondary:C,stopRenamingItem:E})}var ed=l(454851),ec=l(101441),eu=l(983500),ey=l(258709),ep=l(563792),em=l(645249),eg=l(834812);function eh({ariaDescription:e,ariaLabel:t,deleteSelectedItems:l,dsStyle:r,hideStylePreview:a,index:i,isDragging:d,isEditable:c,isLastChildOfSelection:u,isRenaming:y,level:p,onContextMenu:m,onCreateFolder:g,onInspectStyle:h,onMouseDown:x,onMouseMove:k,onRenameItem:f,recordingKey:w,role:_,selected:C,selectedSecondary:j,stopRenamingItem:v,stylePreviewShown:N,updateContextMenuStyleRef:I,updateSelection:R,updateFocusRowRef:P}){let[K,M]=n.useState(!1),[A,O]=n.useState(!1),F=(0,o.wA)(),Y=n.useRef(null),U=n.useRef(null),V=n.useCallback(()=>{O(!0)},[]),$=n.useCallback(e=>{e.currentTarget.contains(e.relatedTarget)||O(!1)},[]),X=n.useCallback(()=>{c&&f(r.node_id,!0,r.style_type)},[f,r.node_id,r.style_type,c]),H=N.isShown&&!N.isCreating&&N.style.node_id===r.node_id&&(0,ey.EF)(N.style,r),W=(K||A)&&!y||H,z=n.useCallback(function(){let e=U.current;if(e){let t=e.getBoundingClientRect();H?F(T.sw()):(F(T.rk({style:r,rowTop:t.top,rowLeft:t.left})),h(r),R({type:r.style_type,folderNames:new Set,styleIds:new Set(r.node_id)}))}F(E.XE())},[F,h,R,r,H]),Q=n.useCallback(e=>{(2===e.button||e.ctrlKey)&&I(U.current),x(e),H&&z()},[z,x,H,I]),Z=Y.current,G=!!Z&&Z.offsetWidth<Z.scrollWidth,ee=n.useMemo(()=>!d&&r.description&&G?{"data-tooltip-type":q.Ib.SPECIAL,"data-tooltip":eg.Z,"data-tooltip-style-name":(0,D.kH)(r.name),"data-tooltip-style-description":r.description,"data-tooltip-max-width":J.jNX*(0,eu.hG)(J.dGl)}:null,[G,d,r.name,r.description]),et="TEXT"===r.style_type&&r.meta?.style_thumbnail?r.meta.style_thumbnail:null;return(0,s.jsx)(eo,{ariaDescription:e,ariaLabel:t,childLeft:(0,s.jsxs)("div",{role:"gridcell",className:"xjp7ctv",children:[(0,s.jsx)(em.zi,{dsStyle:r,disableTooltip:!0}),C&&"FILL"===r.style_type&&(0,s.jsx)("div",{className:"x10l6tqk x13vifvy x1ey2m1c xu96u03 x3m8u43 x16rqkct xkwerj4 x19zslgr x1vn0f74"})]}),childRight:W&&(0,s.jsxs)(B.$4,{role:"gridcell",children:[(0,s.jsx)("div",{className:"x1orquvw"}),(0,s.jsx)(ed.d,{recordingKey:b.Pt(w,"customButton"),"aria-expanded":H,onClick:z,htmlAttributes:{"data-tooltip-type":q.Ib.TEXT,"data-tooltip":c?(0,S.t)("design_systems.styles.edit_style"):(0,S.t)("design_systems.styles.view_style"),onMouseDown:L.dG,tabIndex:0,onKeyDown:e=>{("Enter"===e.key||"Space"===e.key)&&(e.preventDefault(),z())}},children:(0,s.jsx)(ec.P,{}),"aria-label":c?(0,S.t)("design_systems.styles.edit_style"):(0,S.t)("design_systems.styles.view_style")})]}),deleteSelectedItems:l,hideStylePreview:a,index:i,inspectStyleSelected:H,isDragging:d,isEditable:c,isFocused:A,isFolder:!1,isLastChildOfSelection:u,isRenaming:y,level:p,name:(0,D.kH)(r.name),nameRef:Y,onBlur:$,onContextMenu:m,onCreateFolder:g,onDoubleClick:X,onFocus:V,onHoverChange:M,onMouseDown:Q,onMouseMove:k,onRenameItem:f,recordingKey:w,role:_,rowRef:e=>{e&&(P?.(e),U.current=e)},secondaryName:et&&(0,ep.P$)(et),selected:C,selectedSecondary:j,stopRenamingItem:v,tooltipData:ee})}function ex({styleType:e,setDefaultToolOnCreateStyle:t,children:l}){let n=!(0,I.p8)("isReadOnly");return(0,s.jsxs)("div",{className:"styles--styleTypeSection--jPjTq component_tiles--section--qMua7",children:[n?(0,s.jsx)(ek,{styleType:e,recordingKey:`style-section-header-${e}`,setDefaultToolOnCreateStyle:t}):(0,s.jsx)("div",{className:"styles--styleTypeSectionHeader--224lA component_tiles--sectionHeader--eEC6d raw_components--panelTitle--VAQQA",children:(0,P.QT)(e)}),l]})}function ek({styleType:e,setDefaultToolOnCreateStyle:t,recordingKey:l}){let[r,a]=n.useState(!1),i=(0,o.wA)(),d=n.useRef(null),c=n.useCallback(()=>{t&&N.Y5.triggerAction("set-tool-default");let l=(0,H.Zk)(e),s=d.current?.getBoundingClientRect();l&&s&&i(T.Zs({rowLeft:s.left,rowTop:s.top,styleType:e,inheritStyleKeyField:l}))},[t,e,i]);return(0,s.jsxs)("div",{className:"styles--styleTypeSectionRow--wVTIO",onMouseEnter:()=>a(!0),onMouseLeave:()=>a(!1),onFocusCapture:()=>a(!0),onBlur:()=>a(!1),ref:d,children:[(0,s.jsx)("h3",{className:"styles--styleTypeSectionRowLabel--PrKm-",children:(0,P.QT)(e)}),(0,s.jsx)("div",{style:{opacity:r?1:0},children:(0,s.jsx)(U.K,{recordingKey:b.Pt(l,"addButton"),"aria-label":(0,S.t)("design_systems.styles.tooltips.create_style_from_section",{kind:(0,P.XV)(e).toLowerCase()}),onClick:c,htmlAttributes:{"data-tooltip-type":q.Ib.TEXT,"data-tooltip":(0,S.t)("design_systems.styles.tooltips.create_style_from_section",{kind:(0,P.XV)(e).toLowerCase()})},children:(0,s.jsx)(X.e,{})})})]})}ex.displayName="StyleTypeSection";var ef=l(665261),eb=l(506192),ew=l(58814);let e_=ef.ms,eS=ef.c$,eC=ef.wv,eE="styles-by-type-context-menu",ej=.75*(0,eu.hG)(J.uj0);function ev({manager:e,styleRowRef:t,onEditStyle:l,onRenameItem:r,onCreateFolder:a,onDeleteItems:i,onCutItems:c,onCopyItems:y,onDuplicateItems:p,onPasteItems:m,styleType:g,styleList:h}){let x=(0,o.wA)(),k=(0,o.d4)(e=>e.library.localStyleSelection),f=n.useMemo(()=>k&&k.type===g?(0,ew.QA)(k,h):[],[k,h,g]),b=n.useMemo(()=>(0,ew.Ug)(f).map(e=>e.node_id),[f]).length;n.useEffect(()=>(u.glU?.computePastableStyleCount(),()=>{u.glU?.clearPastableStyleCount()}),[]);let w=(0,o.d4)(e=>e.mirror.appModel.pastableStyleCount),_=!!R.q5()?.canEdit,C=n.useCallback(()=>{if(!f.length||f[0].type!==M.PW.STYLE)return;let e=f[0];if(t){let l=t.getBoundingClientRect();x(T.rk({style:e,rowTop:l.top,rowLeft:l.left})),x(E.XE())}l(e)},[x,f,l,t]),j=n.useCallback(()=>{if(!f.length||f[0].type===M.PW.STYLE)return;let e=f[0];setTimeout(()=>{r(e.name,!1,e.styleTypeSection)},0)},[r,f]);if(-1===w)return(0,s.jsx)("div",{});if(!_)return b>1?(0,s.jsx)("div",{}):(0,s.jsx)(d.bL,{manager:e,children:(0,s.jsx)(d.mc,{children:(0,s.jsx)(d.q7,{recordingKey:"edit-style-option",onClick:C,children:(0,S.tx)("design_systems.styles.view_style")})})});let v=1===b&&f[0].type===M.PW.STYLE?(0,s.jsx)(d.q7,{recordingKey:"edit-style-option",onClick:C,children:(0,S.tx)("design_systems.styles.edit_style")}):(0,s.jsx)(d.q7,{recordingKey:"rename-folder-option",onClick:j,children:(0,S.tx)("design_systems.styles.rename_folder")});return(0,s.jsx)(d.bL,{manager:e,children:(0,s.jsxs)(d.mc,{children:[(0,s.jsx)(d.q7,{recordingKey:"create-folder-option",onClick:a,children:(0,S.tx)("design_systems.styles.add_new_folder")}),v,(0,s.jsx)(d.q7,{recordingKey:"delete-style-option",onClick:i,children:(0,S.tx)("design_systems.styles.delete_styles",{numStyles:b})}),(0,s.jsx)(d.wv,{}),(0,s.jsx)(d.q7,{recordingKey:"cut-style-option",onClick:c,children:(0,S.tx)("design_systems.styles.cut_styles",{numStyles:b})}),(0,s.jsx)(d.q7,{recordingKey:"copy-style-option",onClick:y,children:(0,S.tx)("design_systems.styles.copy_styles",{numStyles:b})}),(0,s.jsx)(d.q7,{recordingKey:"duplicate-style-option",onClick:p,children:(0,S.tx)("design_systems.styles.duplicate_styles",{numStyles:b})}),!!w&&(0,s.jsx)(d.q7,{recordingKey:"paste-style-option",onClick:m,children:(0,S.tx)("design_systems.styles.paste_styles",{numStyles:w})})]})})}function eT({styleRowRef:e,onEditStyle:t,onRenameItem:l,onCreateFolder:r,onDeleteItems:a,onCutItems:i,onCopyItems:d,onDuplicateItems:c,onPasteItems:u,styleType:y}){let p=(0,eb.Um)(),m=(0,o.d4)(e=>e.library.localStyleSelection),g=n.useMemo(()=>m&&m.type===y&&p?.type===eE?(0,ew.QA)(m,p.data.uiList):[],[m,p,y]),h=n.useMemo(()=>(0,ew.Ug)(g).map(e=>e.node_id),[g]),x=h.length;return p&&h.length?(0,s.jsx)(eL,{dropdownShown:p,numStyles:x,onCopyItems:d,onCreateFolder:r,onCutItems:i,onDeleteItems:a,onDuplicateItems:c,onEditStyle:t,onPasteItems:u,onRenameItem:l,selectedItems:g,styleRowRef:e}):(0,s.jsx)("div",{})}function eL({styleRowRef:e,selectedItems:t,numStyles:l,dropdownShown:r,onEditStyle:a,onRenameItem:i,onCreateFolder:d,onDeleteItems:c,onCutItems:y,onCopyItems:p,onDuplicateItems:m,onPasteItems:g}){let h=(0,o.wA)();n.useEffect(()=>(u.glU?.computePastableStyleCount(),()=>{u.glU?.clearPastableStyleCount()}),[]);let x=(0,o.d4)(e=>e.mirror.appModel.pastableStyleCount),k=!!R.q5()?.canEdit,f=n.useCallback(()=>{if(!t.length||t[0].type!==M.PW.STYLE)return;let l=t[0];if(e){let t=e.getBoundingClientRect();h(T.rk({style:l,rowTop:t.top,rowLeft:t.left})),h(E.XE())}a(l)},[h,t,a,e]),b=n.useCallback(()=>{if(!t.length||t[0].type===M.PW.STYLE)return;let e=t[0];i(e.name,!1,e.styleTypeSection)},[i,t]);if(-1===x)return(0,s.jsx)("div",{});if(!k)return l>1?(0,s.jsx)("div",{}):(0,s.jsx)(e_,{style:r.data.position,className:ee,children:(0,s.jsx)(eS,{recordingKey:"edit-style-option",onClick:f,children:(0,S.tx)("design_systems.styles.view_style")})});let w=1===l&&t[0].type===M.PW.STYLE?(0,s.jsx)(eS,{recordingKey:"edit-style-option",onClick:f,children:(0,S.tx)("design_systems.styles.edit_style")}):(0,s.jsx)(eS,{recordingKey:"rename-folder-option",onClick:b,children:(0,S.tx)("design_systems.styles.rename_folder")});return(0,s.jsxs)(e_,{style:r.data.position,className:ee,children:[(0,s.jsx)(eS,{recordingKey:"create-folder-option",onClick:d,children:(0,S.tx)("design_systems.styles.add_new_folder")}),w,(0,s.jsx)(eS,{recordingKey:"delete-style-option",onClick:c,children:(0,S.tx)("design_systems.styles.delete_styles",{numStyles:l})}),(0,s.jsx)(eC,{}),(0,s.jsx)(eS,{recordingKey:"cut-style-option",onClick:y,children:(0,S.tx)("design_systems.styles.cut_styles",{numStyles:l})}),(0,s.jsx)(eS,{recordingKey:"copy-style-option",onClick:p,children:(0,S.tx)("design_systems.styles.copy_styles",{numStyles:l})}),(0,s.jsx)(eS,{recordingKey:"duplicate-style-option",onClick:m,children:(0,S.tx)("design_systems.styles.duplicate_styles",{numStyles:l})}),!!x&&(0,s.jsx)(eS,{recordingKey:"paste-style-option",onClick:g,children:(0,S.tx)("design_systems.styles.paste_styles",{numStyles:x})})]})}var eN=l(180),eI=l(227601),eR=l(843457),eP=l(984282),eD=l(876070),eK=l(565526),eM=l(215853),eA=l(825911),eO=l(501883);let eF="local-style-creation-dropdown";function eB({setDefaultToolOnCreateStyle:e}){return(0,p.kc)().eu_fpl_styles_header_menu?(0,s.jsx)(eV,{setDefaultToolOnCreateStyle:e}):(0,s.jsx)(eY,{setDefaultToolOnCreateStyle:e})}function eY({setDefaultToolOnCreateStyle:e}){let t=(0,o.wA)(),l=(0,n.useContext)(eA.lk),r=!(0,I.p8)("isReadOnly"),a=n.useRef(null),i=n.useRef(null),d=a.current,c=(0,eb.Um)(),u=c?.type===eF,y=c?.data?.targetRect,p="localStyleHeader",m=0===(0,F.Bs)().length,g=(0,o.d4)(e=>e.stylePreviewShown.isShown&&e.stylePreviewShown.isCreating),h=n.useMemo(()=>y||(u&&d?d.getBoundingClientRect():null),[y,d,u]),k=()=>{t(C.oB())},f=()=>{t(C.j7({type:eF}))},w=e=>{e.stopPropagation(),t(T.YG());let l=a.current;u?k():l&&((0,x.sx)("editor-local-styles-dropdown-show"),f())},_=t=>{e&&N.Y5.triggerAction("set-tool-default"),k();let s=(0,H.Zk)(t),n=i.current?.getBoundingClientRect();s&&n&&l({styleType:t,inheritStyleKeyField:s,rowLeft:n.left,rowTop:n.top})},E=m&&!u&&!g;return(0,s.jsxs)(B.fI,{className:E?es:el,ref:i,children:[(0,s.jsx)(eO.xZ,{className:en,onMouseDown:e=>E&&w(e),onClick:e=>e.stopPropagation(),children:(0,S.tx)("design_systems.styles.local_styles")}),r&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(B.K0,{ref:a,onMouseDown:w,onClick:e=>e.stopPropagation(),className:u?"styles--stylesHeaderButtonHighlight--WTeWy raw_components--iconButtonSelected--bJibL raw_components--_iconButton---ybo6":"styles--stylesHeaderButton--jhpA5 draggable_list--addButton--D0q--","data-tooltip-type":q.Ib.TEXT,"data-tooltip":(0,S.t)("design_systems.create_style.create_style"),recordingKey:b.Pt(p,"addButton"),children:(0,s.jsx)(eN.$,{})}),u&&h&&(0,s.jsx)(eM.Cf,{targetRect:h,minWidth:128,disableDropdownScrollContainer:!0,propagateCloseClick:!0,children:P.og.map(e=>{let{icon:t,label:l}=eU(e),n=t=>{t.stopPropagation(),_(e)};return(0,s.jsxs)(ef.c$,{className:"styles--createStyleDropdownRow--7iCXQ",onClick:n,onPointerUp:n,recordingKey:b.Pt(p,`dropdown-option-${e}`),children:[(0,s.jsx)(eK.Nu,{children:t}),l]},e)})})]})]})}function eU(e){switch(e){case"TEXT":return{icon:(0,s.jsx)(eI.B,{}),label:(0,S.t)("design_systems.styles.dropdown.text")};case"FILL":return{icon:(0,s.jsx)(eR.j,{}),label:(0,S.t)("design_systems.styles.dropdown.fill")};case"GRID":return{icon:(0,s.jsx)(eP.E,{}),label:(0,S.t)("design_systems.styles.dropdown.guide")};case"EFFECT":return{icon:(0,s.jsx)(eD.A,{}),label:(0,S.t)("design_systems.styles.dropdown.effect")};default:throw(0,r.j)(e),Error(`Invalid style type: ${e}`)}}function eV({setDefaultToolOnCreateStyle:e}){let t=n.useRef(null),l=(0,n.useContext)(eA.lk),{getTriggerProps:r,manager:a}=d.b(),{onClick:i,...c}=r(),u=!(0,I.p8)("isReadOnly"),y=0===(0,F.Bs)().length,p=(0,o.d4)(e=>e.stylePreviewShown.isShown&&e.stylePreviewShown.isCreating),m=y&&!a.isOpen&&!p,g=n.useCallback(()=>{m&&(a.setOpen(!0),(0,x.sx)("editor-local-styles-dropdown-show"))},[a,m]),h=n.useCallback(e=>{a.isOpen||(0,x.sx)("editor-local-styles-dropdown-show"),i(e)},[a.isOpen,i]),k=n.useCallback(s=>{e&&N.Y5.triggerAction("set-tool-default");let n=(0,H.Zk)(s),o=t.current?.getBoundingClientRect();n&&o&&l({styleType:s,inheritStyleKeyField:n,rowLeft:o.left,rowTop:o.top})},[l,e,t]);return(0,s.jsxs)(B.fI,{className:m?es:el,ref:t,children:[(0,s.jsx)(eO.xZ,{className:en,onMouseDown:g,onClick:e=>e.stopPropagation(),children:(0,S.tx)("design_systems.styles.local_styles")}),u&&(0,s.jsx)(e$,{manager:a,triggerProps:{...c,onClick:h},onMenuItemClick:k,recordingKey:"localStyleHeader"})]})}function e$({manager:e,triggerProps:t,onMenuItemClick:l,recordingKey:n}){return(0,s.jsxs)(d.bL,{manager:e,children:[(0,s.jsx)(ed.d,{"aria-label":(0,S.t)("design_systems.create_style.create_style"),recordingKey:b.Pt(n,"addButton"),...t,children:(0,s.jsx)(eN.$,{})}),(0,s.jsx)(d.mc,{children:P.og.map(e=>{let{icon:t,label:o}=eU(e);return(0,s.jsxs)(d.q7,{onClick:()=>l(e),recordingKey:b.Pt(n,`menu-item-${e}`),children:[(0,s.jsx)(d.Q$,{children:t}),o]},e)})})]})}let eX="collapsed-style-folders",eH=(0,k.j)(function({scrollContainer:e,setDefaultToolOnCreateStyle:t,recordingKey:l}){let n=(0,F.Bs)(),o=(0,I.p8)("isReadOnly");return 0===n.length&&o?null:(0,s.jsx)(_.k,{name:"local_styles_panel",children:(0,s.jsx)(B.Zk,{children:(0,s.jsx)(eW,{scrollContainer:e,setDefaultToolOnCreateStyle:t,recordingKey:l})})})},"LocalStylesPanel");function eW({scrollContainer:e,setDefaultToolOnCreateStyle:t,recordingKey:l}){let a=(0,o.wA)(),i=(0,o.d4)(e=>e.stylePreviewShown),d=(0,o.d4)(e=>e.mirror.appModel.activeCanvasEditModeType),p=(0,o.d4)(e=>e.mirror.appModel.currentTool),m=n.useRef(null),g=(0,F.Bs)(),h=(0,o.d4)(e=>e.library.localStyleSelection),[k,f]=n.useState(null),[w,_]=n.useState(null),S=n.useRef(null),[E,v]=n.useState(!1),I=d===u.m1T.GRADIENT||d===u.m1T.RASTER||p===u.NLJ.DROPPER_COLOR;n.useEffect(()=>{let e=()=>{!I&&(a(j.Bn(null)),i.isShown&&(a(T.sw()),u.glU?.selectStyle(c.n3.INVALID,c.IA.INVALID)))},t=(0,L.ft)();return t?window.addEventListener("pointerdown",e):window.addEventListener("mousedown",e),()=>{t?window.removeEventListener("pointerdown",e):window.removeEventListener("mousedown",e)}},[a,i.isShown,I]);let{stylesByType:R,foldersAndStylesByType:K}=n.useMemo(()=>{let e=(0,P.Kw)(g),t=new Map;return P.og.map(l=>{let s=e.get(l);if(s){(0,P.LX)(s);let e=(0,ew.lM)(s,l),n=(0,ew.l0)(e);t.set(l,n)}}),{stylesByType:e,foldersAndStylesByType:t}},[g]),A=n.useCallback(e=>{u.glU&&((0,r.KF)(null!=e.content_hash,"style does not have a hash"),u.glU.selectStyleByGuid(e.node_id),a(j.ay({isRenaming:!1})),(0,x.sx)("Style Inspected",{styleType:e.style_type,from:"styleListClick"}))},[a]),O=n.useCallback((e,t,l)=>{f(t?e:null),_(t?null:{name:e,styleTypeSection:l})},[]),B=n.useCallback(e=>{if(!e){a(j.Bn(null));return}let t=new Set;e.styleIds.forEach(l=>{let s=g.find(e=>e.type===M.PW.STYLE&&e.node_id===l);if(!s)return;let n=(0,D.In)(s.name);e.folderNames.has(n)||t.add(l)});let l={type:e.type,folderNames:e.folderNames,styleIds:t};a(j.Bn(l))},[a,g]),Y=n.useCallback((e,t,l)=>{if(!h)return;let s=e[t],n=(e,t)=>{let s=(0,D.ke)(e.name),n=null!=t?t:s.length-1;s[n]=l;let o=(0,ew.Pc)(s.join("/"));y.l7.user("rename-style",()=>u.glU?.renameNode(e.node_id,o))};if(s.name!==l){if(s.type===M.PW.STYLE)n(s);else{(0,ew.mx)(t,e).forEach(t=>{let l=e[t];l.type===M.PW.STYLE&&n(l,s.level-1)});let o=new Set(h.folderNames);o.delete(s.name);let r=(0,D.In)(s.name)+"/"+l;o.add(r),B({type:h.type,folderNames:o,styleIds:h.styleIds})}}N.Y5.triggerAction("commit"),f(null),_(null)},[h,B]),U=n.useCallback((e,t)=>{t.preventDefault(),t.stopPropagation(),a(C.j7({type:eE,data:{uiList:e,position:{top:t.clientY,left:Math.min(t.clientX,window.innerWidth-ej)}}}))},[a]),V=n.useCallback(e=>{S.current=e},[]),$=n.useCallback(()=>{v(!0)},[]),X=n.useCallback(()=>{v(!1)},[]);return(0,s.jsxs)("div",{className:"styles--localStylesPanel--T4Gqs",ref:m,children:[(0,s.jsx)(eB,{setDefaultToolOnCreateStyle:t}),P.og.map(n=>{let o=R.get(n);if(!o)return;let r=K.get(n);if(r)return(0,s.jsx)(eq,{isDragging:E,onContextMenu:U,onDragEnd:X,onDragStart:$,onEditStyle:A,onInspectStyle:A,onRenameItem:O,recordingKey:b.Pt(l,`style-section-${n}`),renamingFolder:w,renamingStyleID:k,scrollContainer:e,setDefaultToolOnCreateStyle:t,stopRenamingItem:Y,storedStyleList:o,styleList:r,styleRowRef:S.current,styleType:n,updateContextMenuStyleRef:V,updateSelection:B},n)})]})}function eq({styleType:e,storedStyleList:t,styleList:l,renamingStyleID:r,renamingFolder:x,onRenameItem:k,stopRenamingItem:_,onDragStart:C,onDragEnd:j,onInspectStyle:L,onContextMenu:P,updateContextMenuStyleRef:O,updateSelection:F,styleRowRef:B,scrollContainer:Y,setDefaultToolOnCreateStyle:U,recordingKey:V}){let $=(0,R.q5)(),X=!(0,I.p8)("isReadOnly"),H=(0,o.wA)(),W=(0,o.d4)(e=>e.stylePreviewShown),q=(0,o.d4)(t=>(0,K.i4)(t,e)),z=(0,o.d4)(t=>(0,K.A7)(t,e,l)),[Q,Z]=n.useState(()=>{if(g.x4&&$){let t=JSON.parse(g.x4.getItem(eX)||"{}");if($.key in t){let l=t[$.key];if(e in l)return new Set(l[e])}else t[$.key]={},g.x4.setItem(eX,JSON.stringify(t))}return new Set(l.filter(e=>"STYLE_FOLDER"===e.type).map(e=>e.name))}),[G,J]=n.useState([]),[ee,et]=n.useState(null),[el,es]=n.useState(null),en=n.useMemo(()=>(0,a.s)(()=>{H(v.GT({styleType:e}))},200),[H,e]);n.useEffect(()=>{(0,h.nl)()||en()},[en,l]);let eo=(0,f.ZC)(Q);n.useEffect(()=>{if(!eo||!g.x4||!$||(0,w._f)(eo,Q))return;let t=JSON.parse(g.x4.getItem(eX)||"{}"),l=t[$.key];l&&(l[e]=[...Q],g.x4.setItem(eX,JSON.stringify(t)))},[Q,$,eo,e]);let er=n.useCallback(e=>!!e&&"STYLE_FOLDER"===e.type,[]),ea=n.useCallback((e,t)=>{let s=new Set(e),n=[];l.forEach((e,t)=>{if(s.has(e)&&(n.push(t),"STYLE_FOLDER"===e.type)){let e=(0,ew.mx)(t,l);n.push(...e)}});let o=new Set(n),r=t?l.indexOf(t):l.length,a=[...(0,i.y1)(r).filter(e=>!o.has(e)),...n,...(0,i.y1)(r,l.length).filter(e=>!o.has(e))],d=new Map;return a.forEach((e,t)=>{e!==t&&d.set(e,t)}),d},[l]),ed=n.useCallback(()=>{u.glU&&W.isShown&&(H(T.sw()),H(E.XE()),u.glU.selectStyle(c.n3.INVALID,c.IA.INVALID))},[H,W.isShown]),ec=n.useMemo(()=>{if(!ee)return null;if("in"===ee.type){let e=l[ee.index];return e?{folderNameToNestUnder:e.name,dividerStyles:{display:"none"}}:null}if(null==ee.index||null==el||!q)return null;let e=null,t=null;return 0===ee.index?t=l[ee.index]:ee.index===l.length?e=l[ee.index-1]:(e=l[ee.index-1],t=l[ee.index]),(0,ew.g5)({prevItem:e,nextItem:t,localStyleSelection:q,styleList:l,collapsedFolders:Q,temporarilyExpandedFolders:G,horizontalDragAmount:el})},[Q,el,q,ee,l,G]),eu=n.useCallback((s,n,o,r)=>{if(!t||!n&&!o||!ec)return;let a=ec.folderNameToNestUnder;if(null===a)return;let i=[],d=[];s.forEach(e=>{(0,ew.Md)(n,e,o,a)&&("STYLE_FOLDER"===e.type?d.push(e):i.push(e))});let c=i.concat(d);if(!c.length)return;let u=y.l7.user("reorder-styles",()=>(0,ew.VB)(c,n,o,a,l,t,r||!1)),p=new Set,m=new Set;c.forEach(e=>{let t=(0,ew.t_)(e),l=u?.get(t);l&&("STYLE_FOLDER"===e.type?p.add(l):m.add(t))}),F({type:e,folderNames:p,styleIds:m});let g=new Set;return Q.forEach(e=>{if(a.startsWith(e))return;let t=u?.get(e);t?g.add(t):g.add(e)}),Z(g),ed(),r||N.Y5.triggerAction("commit"),ea(c,o)},[F,Q,ec,ea,ed,t,l,e]),ey=n.useCallback((e,t)=>{if("STYLE_FOLDER"!==t.type)return;let s=l.indexOf(t),n=(0,ew.dm)(t).filter(e=>(0,D.In)(e.name)===t.name);if(!n.length)return eu(e,t,l[s+1]);{let t=n[n.length-1],s=l.indexOf(t);return eu(e,t,l[s+1])}},[eu,l]),ep=(0,m.xx)((e,t)=>{let s=new Map,n=t.map(e=>e.type===M.PW.STYLE?e.node_id:e.name);return e.forEach(e=>{let o=n.indexOf(e);-1!==o&&(0,ew.mx)(o,l).forEach(e=>{let l=t[e],n="STYLE_FOLDER"===l.type?l.name:l.node_id,o=s.get(n);o||(o=0),s.set(n,o+1)})}),s}),em=n.useCallback(()=>{if(!q)return;let t=(0,ew.QA)(q,l);if(0===t.length)return;let{prevItem:s,nextItem:n}=(0,ew.j3)(t,l);eu(t,s,n,!0);let o=(0,D.In)(t[0]?.name||""),r=(0,S.t)("design_systems.create_style.new_folder");o&&(r=`${o}/${r}`);let a=(e,t)=>{if(e.type===M.PW.STYLE){let l=r+"/"+t+(0,D.kH)(e.name);y.l7.user("rename-style",()=>{u.glU.renameNode(e.node_id,l)})}else{let l=t+(0,D.kH)(e.name)+"/";e.styles.forEach(e=>{a(e,l)}),e.subfolders.forEach(e=>{a(e,l)})}};t.forEach(e=>{a(e,"")}),F({type:e,folderNames:new Set([r]),styleIds:new Set}),k(r,!1,e)},[F,eu,q,k,l,e]),eg=n.useCallback((e,t)=>{let s=l[e];"STYLE_FOLDER"===s.type&&Z(e=>{let l=new Set(e);return t?l.add(s.name):l.delete(s.name),l})},[l]),ek=n.useCallback((e,t)=>{Z(s=>{let n=new Set(s),o=l[e];if("STYLE_FOLDER"===o.type){let e=(0,D.In)(o.name),l=""===e?t:e+"/"+t;Q.has(o.name)&&(Q.delete(o.name),Q.add(l)),(0,ew.KU)(o).forEach(e=>{if(Q.has(e.name)){let t=e.name.replace(o.name,"");Q.add(l+t),Q.delete(e.name)}})}return n}),_(l,e,t)},[_,Q,l]),{manager:ef,getContextMenuTriggerProps:eb}=d.b(),e_=(0,p.kc)().fpl_migrate_style_row_context_menu,eS=n.useCallback(e=>{P(l,e)},[P,l]),eC=n.useMemo(()=>e_?eb():{onContextMenu:eS},[e_,eb,eS]),eE=n.useCallback((e,t,l)=>{let s=t>.5?1:Math.round(1e3*t)/1e3;et({index:e,type:l?"in":"before"}),es(s)},[]),ej=n.useCallback(()=>{Z(e=>y.l7.user("delete-styles",()=>{let t=new Set(e);return(q?(0,ew.QA)(q,l):[]).forEach(e=>{"STYLE_FOLDER"===e.type?((0,ew.a2)(e,$?.key||null),Q.delete(e.name),(0,ew.KU)(e).forEach(e=>Q.delete(e.name))):(0,ew.Nr)(e,$?.key||null)}),t})),N.Y5.triggerAction("commit"),W.isShown&&(H(T.sw()),H(E.XE()),u.glU.selectStyle(c.n3.INVALID,c.IA.INVALID)),F(null)},[W.isShown,F,q,l,$?.key,Q,H]),eL=n.useMemo(()=>{let e=q?(0,ew.QA)(q,l):[];return(0,ew.Ug)(e).map(e=>e.node_id)},[q,l]),eN=n.useCallback(()=>{y.l7.user("cut-styles",()=>u.glU&&u.glU.cutStyles(eL))},[eL]),eI=n.useCallback(()=>{y.l7.user("copy-styles",()=>u.glU&&u.glU.copyStyles(eL))},[eL]),eR=n.useCallback(()=>{y.l7.user("duplicate-styles",()=>u.glU&&u.glU.duplicateStyles(eL))},[eL]),eP=n.useCallback(()=>{y.l7.user("paste-styles",()=>u.glU&&u.glU.pasteStyles())},[]);!function({cutSelectedItems:e,copySelectedItems:t,localStyleSelection:l,onPaste:s}){n.useEffect(()=>{if(!l)return;let n=(e,t)=>{e.target&&("INPUT"===e.target.tagName||"TEXTAREA"===e.target.tagName)||(t(),e.stopPropagation())},o=t=>{n(t,e)},r=e=>{n(e,s)},a=e=>{n(e,t)};return document.addEventListener("cut",o),document.addEventListener("paste",r),document.addEventListener("copy",a),()=>{document.removeEventListener("cut",o),document.removeEventListener("paste",r),document.removeEventListener("copy",a)}},[e,s,t,l])}({cutSelectedItems:eN,onPaste:eP,copySelectedItems:eI,localStyleSelection:q});let eD=n.useCallback(e=>{J(t=>[...t,e])},[]),eK=n.useCallback(()=>{C()},[C]),eM=b.rf(V,"ondragend",n.useCallback(()=>{et(null),es(null),J([]),j()},[j])),eA=(0,f.ZC)(q);n.useEffect(()=>{eA!==q&&q&&Z(e=>{let l=new Set(e);for(let e of q.styleIds.values()){let s=t.find(t=>t.node_id===e);if(!s)continue;let n=(0,D.ke)(s.name);for(let e=0;e<n.length;e++){let t=n.slice(0,e).join("/");l.delete(t)}}return l})},[q,eA,t]);let eO=n.useRef(null),eF=n.useCallback(e=>{eO.current=e},[eO]),eB=n.useMemo(()=>q?(0,ew.h$)(q,l):[],[q,l]),eY=n.useMemo(()=>z?(0,ew.h$)(z,l):[],[z,l]),eU=n.useMemo(()=>[...eB,...eY].sort((e,t)=>e-t),[eB,eY]),eV=n.useCallback((e,t,n,o,a,i)=>{let d="STYLE_FOLDER"===e.type?e.name:e.node_id,c=!1,u=!1;for(let t of G)if("STYLE_FOLDER"===e.type){if(e.name===t){u=!0;break}e.name.startsWith(t)&&(c=!0)}else if((0,D.In)(e.name)===t){c=!0;break}if(!u&&!c&&ep(Q,l).has(d))return null;let y=eU&&eU[eU.length-1]===t,p=eU&&eU[0]===t;if(e.type===M.PW.STYLE){let l=(0,ew.rM)(e),d=null!=r&&r===e.node_id,c=z?.styleIds.has(e.node_id)||!1;return(0,s.jsx)(eh,{deleteSelectedItems:ej,dsStyle:e,hideStylePreview:ed,index:t,isDragging:o,isEditable:X,isLastChildOfSelection:y,isRenaming:d,level:l,...eC,"aria-selected":n||c,onCreateFolder:em,onInspectStyle:L,onMouseDown:a,onMouseMove:i,onRenameItem:k,recordingKey:`style-row-${t}`,role:"row",selected:n,selectedSecondary:c,stopRenamingItem:ek,stylePreviewShown:W,updateContextMenuStyleRef:O,updateFocusRowRef:n?eF:null,updateSelection:F},e.node_id)}{let l=null!=x&&x.name===e.name&&x.styleTypeSection===e.styleTypeSection,r=ec?.folderNameToNestUnder||null;return(0,s.jsx)(ei,{deleteSelectedItems:ej,folder:e,folderNameToNestUnder:r,hideStylePreview:ed,index:t,isCollapsed:Q.has(e.name),isDragging:o,isEditable:X,isFirstChildOfSelection:p,isRenaming:l,isTemporarilyExpanded:u,level:e.level,...eC,onCreateFolder:em,onMouseDown:a,onMouseMove:i,onRenameItem:k,recordingKey:`folder-section-${e.styleTypeSection}-row-${t}`,selected:n,selectedSecondary:z?.folderNames.has(e.name)||!1,stopRenamingItem:ek,temporarilyExpandFolder:eD,toggleFolder:e=>eg(t,e)},t)}},[F,eU,Q,ej,ec?.folderNameToNestUnder,ep,ed,em,L,k,x,r,z?.folderNames,z?.styleIds,ek,l,W,eD,G,eg,O,X,eF,eC]),e$=n.useCallback(t=>{let s=new Set,n=new Set;t.forEach(e=>{let t=l[e];"STYLE_FOLDER"===t.type?s.add(t.name):n.add(t.node_id)}),F({type:e,folderNames:s,styleIds:n})},[F,l,e]),eH=n.useRef(),eW=n.useRef();return n.useEffect(()=>{eH.current&&eB.length?(eH.current(),eO.current&&!eO.current.contains(document.activeElement)&&eO.current.focus()):eW.current&&!eB.length&&(eW.current(),eO.current=null)},[eH,eB,eO]),(0,s.jsx)(A.vL,{name:"StyleDraggableList",focusFunctionRef:eH,blurFunctionRef:eW,children:(0,s.jsxs)(ex,{styleType:e,setDefaultToolOnCreateStyle:U,children:[(0,s.jsx)(ez,{ariaMultiselectable:!0,canInsertItemsIn:er,insertDividerStyle:ec?.dividerStyles,isDragDisabled:!X,listItems:l,onDrag:eE,onDragEnd:eM,onDragStart:eK,onInsertItemsBetweenValues:eu,onInsertItemsIn:ey,recordingKey:"style-draggable-list",renderListItem:eV,role:"treegrid",scrollContainer:Y,selectedIndices:eB,updateSelection:e$}),e_?(0,s.jsx)(ev,{manager:ef,onCopyItems:eI,onCreateFolder:em,onCutItems:eN,onDeleteItems:ej,onDuplicateItems:eR,onEditStyle:L,onPasteItems:eP,onRenameItem:k,styleList:l,styleRowRef:B,styleType:e}):(0,s.jsx)(eT,{onCopyItems:eI,onCreateFolder:em,onCutItems:eN,onDeleteItems:ej,onDuplicateItems:eR,onEditStyle:L,onPasteItems:eP,onRenameItem:k,styleRowRef:B,styleType:e})]})})}let ez=O.m6},685040:(e,t,l)=>{l.d(t,{v:()=>Y});var s=l(104076),n=l(716976),o=l(237420),r=l(276800),a=l(989941),i=l(452981),d=l(12866),c=l(812714),u=l(228172),y=l(883765),p=l(641518),m=l(836982),g=l(361170),h=l(192075),x=l(850701),k=l(197055),f=l(278491),b=l(354114),w=l(553065),_=l(754446),S=l(805384),C=l(349311),E=l(386958),j=l(350205),v=l(471798),T=l(221586);let L="mixed_checkbox--mixed--xYUsQ";class N extends n.PureComponent{constructor(e){super(e),this.documentKeyDown=e=>{e.keyCode===T.Uz.TAB&&this.setState({showFocus:!0})},this.documentMouseDown=e=>{this.setState({showFocus:!1})},this.onFocus=e=>{this.state.showFocus||e.target.blur()},this.state={showFocus:!1}}componentDidMount(){document.addEventListener("keydown",this.documentKeyDown),document.addEventListener("mousedown",this.documentMouseDown)}componentWillUnmount(){document.removeEventListener("keydown",this.documentKeyDown),document.removeEventListener("mousedown",this.documentMouseDown)}classNameForInput(){let{someChecked:e}=this.props,t="mixed_checkbox--checkboxInput--aoLHh";return e&&(t+=` ${L}`),this.props.inputClassName&&(t+=` ${this.props.inputClassName}`),t}classNameForCheckmark(){let{someChecked:e}=this.props,t="mixed_checkbox--checkmark--B6ca7";return e?t+=` ${L}`:t+=" mixed_checkbox--checked--w0eLb",this.props.disabled&&(t+=" mixed_checkbox--disabled--NP7v9"),this.props.checkmarkClassName&&(t+=` ${this.props.checkmarkClassName}`),t}render(){let{allChecked:e,someChecked:t}=this.props;return(0,s.jsxs)("label",{className:["mixed_checkbox--checkboxHitbox--QsCWQ",this.props.className].filter(e=>!!e).join(" "),children:[(0,s.jsx)("input",{id:this.props.id,"data-testid":this.props["data-testid"],"data-onboarding-key":this.props["data-onboarding-key"],type:"checkbox",onFocus:this.onFocus,checked:e,className:this.classNameForInput(),onChange:this.props.onChange,disabled:this.props.disabled}),(t||e)&&(0,s.jsx)("div",{className:this.classNameForCheckmark(),children:e?(0,s.jsx)(j.l,{}):(0,s.jsx)(v.w,{})})]})}}N.displayName="MixedCheckbox";class I extends p.o6{constructor(e){super(e),this.onChange=p.Z7(this,"change",e=>{this.props.onChange?.(e.target.checked)})}render(){let e=(0,w.hS)(this.props.property)&&!!(0,w.E7)(this.props.property),t=(0,w.gl)(this.props.property);return(0,s.jsx)(N,{className:["checkbox--checkboxHitbox--HBFVf mixed_checkbox--checkboxHitbox--QsCWQ",this.props.className].filter(e=>!!e).join(" "),inputClassName:"checkbox--checkboxInput--IHKak mixed_checkbox--checkboxInput--aoLHh",checkmarkClassName:"checkbox--checkmark--pzYni mixed_checkbox--checkmark--B6ca7",allChecked:e,someChecked:t,disabled:this.props.disabled,id:this.props.id,"data-testid":this.props["data-testid"],onChange:this.onChange})}}I.displayName="Checkbox";var R=l(964182),P=l(691967),D=l(501883),K=l(737139),M=l(315876),A=l(659159),O=l(7087),F=l(211251),B=l(167151);function Y(e){let t=(0,n.useRef)(null),l=(0,d.DP)(),j=(0,o.wA)(),v=(0,B.cJ)(),{backgroundColor:T,backgroundEnabled:L,backgroundOpacity:N,exportBackgroundDisabled:P}=(0,_.zj)("backgroundColor","backgroundEnabled","backgroundOpacity","exportBackgroundDisabled"),Y=e=>b.Y5.updateSelectionProperties({backgroundEnabled:e}),V=e=>{b.Y5.updateSelectionProperties({exportBackgroundDisabled:!e})},$=n.useMemo(()=>{let e=(0,w.E7)(T),t=(0,w.E7)(N);return null!=e&&null!=t?{...e,a:t}:T||w.oV},[T,N]),X=n.useMemo(()=>(0,w.hS)(N)&&"number"==typeof N&&isNaN(N)?0:N,[N]),H=()=>{if(e.setDefaultToolOnPickerOpen&&b.Y5.triggerAction("set-tool-default"),e.pickerShown&&e.pickerShown.id===f.k8)j(x.XE());else{(0,c.kc)().ce_properties_panel_tracking&&(0,y.sx)("editor-background-panel-color-picker-show");let e=t.current?(0,E.cn)(t.current):{x:0,y:0};j(x.u1({id:f.k8,initialX:e.x,initialY:e.y})),j(k.sw())}},W=()=>(0,s.jsx)(U,{backgroundColor:T,backgroundEnabled:L,backgroundOpacity:N,pickerShown:e.pickerShown,chitRowRef:t,recordingKey:e.recordingKey,toggleColorPicker:H}),q=()=>({color:(0,w.E7)(T)??void 0,opacity:(0,w.E7)(X)??void 0,type:"SOLID",blendMode:"NORMAL",visible:(0,w.E7)(L)??void 0}),z=()=>(0,s.jsx)(F.a,{...e,ref:t,dragging:!1,hasFocus:!1,neverInList:!0,onPreviewClick:H,onRowFocus:r.lQ,paint:q(),previewActive:!1,secondIconButton:Q(),selected:e.pickerShown?.id===f.k8,singletonRow:!0}),Q=()=>void 0===L?void 0:(0,s.jsx)("span",{className:"background_panel--visible--2-4Ns",children:(0,s.jsx)(A.B,{visible:L,onChange:Y,recordingKey:p.Pt(e,"visibleToggle")})});return(0,s.jsx)(m.k,{name:"background_panel",children:(0,s.jsxs)(K.Zk,{children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)(K.fI,{className:"background_panel--panelTitleRow--uNINf",children:[(0,s.jsx)(D.xw,{children:v?(0,h.tx)("fullscreen.properties_panel.background"):(0,h.tx)("fullscreen.properties_panel.page")}),(0,s.jsx)(O.M,{showLibrarySets:!0,recordingKey:"pageLevel"})]}),"ui2"===l.version?(0,s.jsxs)(K.fI,{ref:t,children:[W(),Q()]}):(0,s.jsx)(S.Q.Consumer,{children:e=>e.useLargePreviewRows?z():(0,s.jsx)(u.DE,{ref:t,label:null,input:W(),icon:Q()})})]}),e.hasExports?"ui3"===l.version?(0,s.jsx)(u.Ad,{label:(0,s.jsx)(s.Fragment,{}),input:(0,s.jsx)(a.S,{muted:!0,mixed:P===w.oV,checked:!1===P,onChange:V,recordingKey:p.Pt(e,"exportDisableCheckbox"),label:(0,s.jsx)(i.J,{htmlAttributes:{"data-tooltip":(0,h.t)("fullscreen.properties_panel.include_the_canvas_or_group_background_in_exports"),"data-tooltip-type":C.Ib.TEXT},children:(0,h.tx)("fullscreen.properties_panel.show_in_exports")}),htmlAttributes:{"data-tooltip":(0,h.t)("fullscreen.properties_panel.include_the_canvas_or_group_background_in_exports"),"data-tooltip-type":C.Ib.TEXT}})}):(0,s.jsxs)(K.fI,{className:"background_panel--checkboxLabelRow--r-hmK",children:[(0,s.jsx)(I,{className:"background_panel--checkbox--6U3j-",id:"export-background-disabled",property:P===w.oV?w.oV:!P,onChange:V,recordingKey:p.Pt(e,"exportDisableCheckbox")}),(0,s.jsx)(K.JU,{className:"background_panel--checkboxLabel--ITthj",htmlFor:"export-background-disabled","data-tooltip-type":C.Ib.TEXT,"data-tooltip":(0,h.t)("fullscreen.properties_panel.include_the_canvas_or_group_background_in_exports"),children:(0,h.tx)("fullscreen.properties_panel.show_in_exports")})]}):void 0,e.pickerShown?.id===f.k8&&(0,s.jsx)(R.h,{disabledVariableIds:new Set,initialPosition:new g.Mi(e.pickerShown.initialX,e.pickerShown.initialY),color:(0,w.hS)($)?(0,w.E7)($):{r:1,g:1,b:1,a:1},boundVariable:null,onChange:(e,t)=>{let l=e.a;e.a=1,b.Y5.updateSelectionProperties({backgroundColor:e,backgroundOpacity:l,backgroundEnabled:!0},{shouldCommit:t})},recordingKey:p.Pt(e,"colorPicker")}),(0,s.jsx)(M.w,{showExplicitOnly:!0,recordingKey:"backgroundPanel-variableModeEntries"})]})})}function U(e){let t=n.useMemo(()=>{let t=(0,w.E7)(e.backgroundColor),l=(0,w.E7)(e.backgroundOpacity);return null!=t&&null!=l?{...t,a:l}:e.backgroundColor||w.oV},[e.backgroundColor,e.backgroundOpacity]),l=n.useMemo(()=>(0,w.hS)(e.backgroundOpacity)&&"number"==typeof e.backgroundOpacity&&isNaN(e.backgroundOpacity)?0:e.backgroundOpacity,[e.backgroundOpacity]),r=(0,w.E7)(e.backgroundColor),a=(0,w.E7)(e.backgroundEnabled),i={color:r??void 0,opacity:(0,w.E7)(l)??void 0,type:"SOLID",blendMode:"NORMAL",visible:a??void 0};return(0,s.jsx)("div",{className:"background_panel--colorValueContainer---lsls paint_panels--colorValueContainer--DGeSP raw_components--borderFocusWithin--BaipZ paint_panels--_baseColorValueContainer--t-UIV raw_components--base--T7G0z raw_components--singleRowHeight--dKM4t",children:(0,s.jsx)(P.y,{recordingKey:e.recordingKey,togglePicker:e.toggleColorPicker,chitOverride:{color:t,opacity:l},paint:i,onChange:(t,l)=>{let s=!(0,o.bN)(t.color,e.backgroundColor),n=t.opacity!==e.backgroundOpacity;b.Y5.updateSelectionProperties({backgroundColor:s&&t?.color?{...t.color,a:1}:void 0,backgroundOpacity:n?t.opacity:void 0,backgroundEnabled:0!==t.opacity},{shouldCommit:l})},shouldAutoComplete:!1})})}}}]);

//# debugId=3244d1f8-9181-5b16-b402-4432939dff8a

//# sourceMappingURL=https://admin.figma.com/admin/webpack-artifacts/f695da755526e966524d3a207f8e1d2f4d77a41b/4374-8ad6f521478eec95.min.js.map