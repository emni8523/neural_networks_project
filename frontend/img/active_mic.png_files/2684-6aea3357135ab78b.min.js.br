"use strict";
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="029e8806-f58f-5101-a57b-55223e721ec9")}catch(e){}}();
(globalThis.webpackChunk_figma_web_bundler=globalThis.webpackChunk_figma_web_bundler||[]).push([[2684,8046],{601757:(e,t,n)=>{n.d(t,{DP:()=>l,SO:()=>r,nR:()=>d,nU:()=>o,qz:()=>i,t7:()=>s,un:()=>a});let i="cooper_search--modalSearchBarContainer--yASPt",s="cooper_search--modalSearchBar--iCnsL",a="cooper_search--modalSearchBarIcon--5Q4Hx",r="cooper_search--leftRailSearchBarContainer--KdlgB",l="cooper_search--leftRailSearchBar--GhE2N",o="cooper_search--leftRailSearchBarBorder--0qc57",d="cooper_search--leftRailSearchBarClearSearchContainer---iBmh"},421334:(e,t,n)=>{n.d(t,{DD:()=>l,HV:()=>p,KB:()=>r,O:()=>o,Q$:()=>s,QF:()=>c,Vh:()=>m,b:()=>u,g4:()=>d,gn:()=>i,jI:()=>a});let i="component_browser_window--titleContainer--NLx3R",s="component_browser_window--titleBarRight--UKlFA",a="component_browser_window--gitHubSettingsButton--Kydpi",r="component_browser_window--footerPossibleMatches---kxuT",l="component_browser_window--title--UxCyv",o="component_browser_window--componentsListContainer--bhjOJ",d="component_browser_window--loadingContainer--P52rw",c="component_browser_window--breadcrumb--pNDmI",u="component_browser_window--breadcrumbText--v3nme",p="component_browser_window--last--7xYos",m="component_browser_window--breadcrumbSeparator--l24-h"},144638:(e,t,n)=>{n.d(t,{DD:()=>a,HS:()=>o,Jm:()=>l,N$:()=>c,P_:()=>r,Ps:()=>d,UD:()=>i,XQ:()=>m,XV:()=>p,u1:()=>u,zr:()=>s});let i="blocking_modal--buttonContainer--HB2rf",s="blocking_modal--secondaryButton--cteqp",a="blocking_modal--title--3q8JO text--fontPos20--Bcz97 text--_fontBase--QdLsd",r="blocking_modal--textContent--MSbvo text--fontPos13--xW8hS text--_fontBase--QdLsd",l="blocking_modal--buttonLabel--92cjn",o="blocking_modal--adminText--0BndN",d="blocking_modal--teamName--wZ8Ft",c="blocking_modal--upsellListItem--d8NVb text--fontPos13--xW8hS text--_fontBase--QdLsd",u="blocking_modal--spinner--9vJT2",p="blocking_modal--topBar--xhJxw",m="blocking_modal--devHandoffIcon--PFq6G"},680675:(e,t,n)=>{n.d(t,{$s:()=>o,IP:()=>a,Lx:()=>c,R9:()=>l,RL:()=>r,UD:()=>d,ZS:()=>s,hQ:()=>i,xn:()=>u});let i="figjam_onboarding_make_something--contentContainer--gVph-",s="figjam_onboarding_make_something--imageContainer--RoSk9",a="figjam_onboarding_make_something--bodyContainer--GVc2Q text--fontPos12Whyte---tkNx text--_fontBaseWhyte--efAjI",r="figjam_onboarding_make_something--tooltipBodyXSmall--sONX7",l="figjam_onboarding_make_something--tooltipBodySmall--7yA9-",o="figjam_onboarding_make_something--tooltipBodyLarge--jkc-5",d="figjam_onboarding_make_something--buttonContainer--78iSl",c="figjam_onboarding_make_something--skipButtonPosition--Rzzb8",u="figjam_onboarding_make_something--standaloneModal--Ksh8z"},522215:(e,t,n)=>{n.d(t,{AX:()=>E,D6:()=>R,Dw:()=>T,Fn:()=>d,G$:()=>a,Gu:()=>I,HR:()=>y,Jo:()=>b,N6:()=>B,Nf:()=>O,PP:()=>l,QF:()=>N,Rt:()=>i,S:()=>W,Sq:()=>c,T:()=>L,V3:()=>f,VQ:()=>A,Vz:()=>z,Wv:()=>o,Xt:()=>_,Z9:()=>u,_E:()=>G,_M:()=>C,_P:()=>v,bB:()=>h,c1:()=>P,du:()=>k,dz:()=>q,eO:()=>K,ei:()=>p,fp:()=>F,fz:()=>M,hY:()=>w,hs:()=>H,kQ:()=>U,of:()=>D,qp:()=>j,r9:()=>x,rB:()=>V,rX:()=>S,sb:()=>m,tI:()=>s,v9:()=>r,wH:()=>g});let i="canvas_search--searchInput--aCP6B canvas_search--input--aPqLZ",s="canvas_search--searchInputSingleLine--DUHFr",a="canvas_search--searchSidebarContainer--1tcxd",r="canvas_search--icon32--bmz-L",l="canvas_search--searchBarContainer--rxvLi",o="canvas_search--searchBarRow--9aFwa",d="canvas_search--leftRailSearchBarRow--hC5z6",c="canvas_search--leftRailReplaceRow--hjGAr",u="canvas_search--searchIconAndInput--3tdWb",p="canvas_search--searchIconPlaceholderFill--MohCt",m="canvas_search--resultsContainer--b0olz",h="canvas_search--resultsList--Hciv7",f="canvas_search--layerIcon--RpNZF",g="canvas_search--selected--Ng41y",x="canvas_search--disabled--dMwG7",_="canvas_search--indirectlySelected--2E-TI",y="canvas_search--symbol--614fP",v="canvas_search--layerIconContainer--IuQxq",b="canvas_search--resultInfoHeader--GM1gm",C="canvas_search--resultInfo--PKQiZ",j="canvas_search--resultsText--ubMAu",k="canvas_search--resultsFooterText--rPxEh",w="canvas_search--dotDivider--zvIFp",E="canvas_search--resultRow--xX8wI",T="canvas_search--isHoverSelecting--LlQSE",S="canvas_search--singletonHoverSelected--pCLSM",I="canvas_search--resultSubheading--XCt-Z",N="canvas_search--offlineIconContainer--qVbhY",A="canvas_search--offlineIcon--F0sbc",L="canvas_search--hoverSelectedTop--mA-fk canvas_search--_hoverSelectedBase--JOTSs",M="canvas_search--hoverSelectedMiddle--OBw7k canvas_search--_hoverSelectedBase--JOTSs",O="canvas_search--hoverSelectedBottom--zH7Va canvas_search--_hoverSelectedBase--JOTSs",R="canvas_search--resultText--RXqeC",P="canvas_search--multiline--1gb-l",D="canvas_search--strikethrough--0xsma",F="canvas_search--otherResults--G94fM",z="canvas_search--searchScopeButton--Grrvz",B="canvas_search--replaceInput--TmEDS canvas_search--searchBarRow--9aFwa canvas_search--input--aPqLZ",G="canvas_search--replaceButtons--1sbwP",U="canvas_search--collapsableHeaderToggle--kHXh8",V="canvas_search--collapsableHeaderName---qij5",H="canvas_search--collapsableHeaderCount---NL3l",K="canvas_search--expandIcon--6eieV",W="canvas_search--loadingSpinner--Y5hDC",q="canvas_search--loadingSpinnerDelay--Rk3MX"},771855:(e,t,n)=>{n.d(t,{H9:()=>s,JE:()=>d,VS:()=>l,WP:()=>c,_0:()=>u,ed:()=>a,oZ:()=>o,t1:()=>r,wV:()=>i});let i="canvas_search_settings--optionRow--KS01b",s="canvas_search_settings--optionIcon---0QYX",a="canvas_search_settings--optionLabel--Ygpmi",r="canvas_search_settings--optionCount--BzzTP",l="canvas_search_settings--filterPills--tbdih",o="canvas_search_settings--filterPillsLeftRail--xtS-2",d="canvas_search_settings--filterPillsShort--GX-Rn",c="canvas_search_settings--filterPillFpl--qqnVV canvas_search_settings--filterPill--hjIaF",u="canvas_search_settings--pillRemoveFpl--Q6M31"},429056:(e,t,n)=>{n.d(t,{F3:()=>i,WA:()=>a,e:()=>r,r:()=>s});let i="asset_panel_recents--bottomPadding--9BTkl",s="asset_panel_recents--buffer--URYGQ",a="asset_panel_recents--resultsWrapper--k79Vy",r="asset_panel_recents--resultsWrapperList--peuzW"},58178:(e,t,n)=>{n.d(t,{Bm:()=>a,Gr:()=>h,HR:()=>g,K2:()=>o,Md:()=>i,NP:()=>c,OW:()=>u,QT:()=>m,QX:()=>x,Rm:()=>s,UU:()=>r,Vw:()=>f,iE:()=>l,u2:()=>_,wi:()=>d,x6:()=>p});let i="asset_panel_tile--fileName--Skyao ellipsis--ellipsis--Tjyfa",s="asset_panel_tile--secondary--6CWeS",a="asset_panel_tile--nameWrapper--6O-iS",r="asset_panel_tile--name--FG9hg ellipsis--ellipsis--Tjyfa",l="asset_panel_tile--wrapper--8uDli asset_panel_tile--_wrapperBase--ngLpF library_item_tile--_variantHover--xfLPt",o="asset_panel_tile--gridWrapper--tUJe5 asset_panel_tile--wrapper--8uDli asset_panel_tile--_wrapperBase--ngLpF library_item_tile--_variantHover--xfLPt",d="asset_panel_tile--thumbWrapper--bNG-Y",c="asset_panel_tile--visualAssetsGridWrapper--zA9N1 asset_panel_tile--wrapper--8uDli asset_panel_tile--_wrapperBase--ngLpF library_item_tile--_variantHover--xfLPt",u="asset_panel_tile--caret--x-Vya asset_panel_tile--_caretBase--IZ44d",p="asset_panel_tile--button--oNPUz",m="asset_panel_tile--focusableElementWrapper--YzHK7",h="asset_panel_tile--shownInFlyout--7Luo3",f="asset_panel_tile--transparentBackground--ht3B-",g="asset_panel_tile--selectedFlyoutFocus--GGV8E",x="asset_panel_tile--tileWrapper--7OwtG asset_panel_tile--_tileWrapperBase--OAJqM",_="asset_panel_tile--tileWrapperList--VMlzj asset_panel_tile--_tileWrapperBase--OAJqM"},794981:(e,t,n)=>{n.d(t,{OS:()=>a,c:()=>s,wt:()=>i});let i="asset_panel_virtualization--virtualRow--TxsS-",s="asset_panel_virtualization--virtualRowFirst--mdR2j asset_panel_virtualization--virtualRow--TxsS-",a="asset_panel_virtualization--virtualRowList--COnhA"},120276:(e,t,n)=>{n.d(t,{CR:()=>i});let i="cursor_bot--fullscreenEventBlocker--jPF73"},683075:(e,t,n)=>{n.d(t,{Bj:()=>y,DE:()=>v,Dy:()=>l,Lo:()=>h,Lw:()=>s,PT:()=>a,Rt:()=>b,S8:()=>u,VW:()=>c,W7:()=>r,bu:()=>x,hD:()=>C,iU:()=>m,iY:()=>g,or:()=>o,p:()=>_,u0:()=>d,vD:()=>f,z8:()=>p,zr:()=>i});let i="multiplayer_cursors--root---KzSU",s="multiplayer_cursors--overlay--cltnZ",a="multiplayer_cursors--multiplayerCursorsContainer--blD-f",r="multiplayer_cursors--multiplayerCursorsHiddenForVoting--54--r multiplayer_cursors--multiplayerCursorsContainer--blD-f",l="multiplayer_cursors--cursor--n8aPY",o="multiplayer_cursors--cursorPointer--ya3cR",d="multiplayer_cursors--cursorImage--hYFE4",c="multiplayer_cursors--nameContainer--O1WsV",u="multiplayer_cursors--nameContainerCloserToCursor--8L8SW",p="multiplayer_cursors--isPointingRight--eOPEm",m="multiplayer_cursors--message--1NMSI multiplayer_cursors--nameContainer--O1WsV",h="multiplayer_cursors--messageText--jI1cQ",f="multiplayer_cursors--topMessageLine--uwXou",g="multiplayer_cursors--cursorName--i776D",x="multiplayer_cursors--cursorNameSmall--Cy-9n",_="multiplayer_cursors--multiplayerHighFiveCenteringContainer--knxoP",y="multiplayer_cursors--multiplayerPointerForHighFive--hpa2g",v="multiplayer_cursors--multiplayerPointerForHighFiveHidden--V-bo-",b="multiplayer_cursors--chatBoxUI3--bDeVY",C="multiplayer_cursors--chatBackground--hGJJf"},48251:(e,t,n)=>{n.d(t,{$U:()=>w,Fo:()=>k,K3:()=>d,PE:()=>f,Pq:()=>y,Q:()=>h,Rj:()=>a,T_:()=>i,U2:()=>g,VW:()=>o,WV:()=>m,Zk:()=>u,ed:()=>c,g1:()=>C,hs:()=>v,iM:()=>b,jk:()=>s,oX:()=>r,r2:()=>j,r9:()=>x,rF:()=>E,so:()=>p,uR:()=>_,z$:()=>l});let i="on_canvas_name_editor--containerOnLight--6zUKs",s="on_canvas_name_editor--measurer--KTnSp",a="on_canvas_name_editor--frameNameInput--VpLPf sf_pro--uiFontWithSFProFallback--m-p9V",r="on_canvas_name_editor--canvasGridRowNameInput--NtMKm on_canvas_name_editor--frameNameInput--VpLPf sf_pro--uiFontWithSFProFallback--m-p9V",l="on_canvas_name_editor--varWidthSizeInput--34tdd sf_pro--uiFontWithSFProFallback--m-p9V",o="on_canvas_name_editor--flowStartingPointNameContainer--JdVwd",d="on_canvas_name_editor--flowStartingPointNameInput--lLEZF",c="on_canvas_name_editor--sectionNameContainer--D8aez",u="on_canvas_name_editor--sectionNameInput--MgIUi",p="on_canvas_name_editor--sectionMeasurer--kfBij",m="on_canvas_name_editor--varWidthSizeContainer--GP30J",h="on_canvas_name_editor--measurementFreeTextInput--gJle8 sf_pro--uiFontWithSFProFallback--m-p9V",f="on_canvas_name_editor--gridTrackSizeInput--TX2Zz sf_pro--uiFontWithSFProFallback--m-p9V",g="on_canvas_name_editor--gridTrackSizeComboboxInput--BR3nH sf_pro--uiFontWithSFProFallback--m-p9V",x="on_canvas_name_editor--disabled--nB1l2",_="on_canvas_name_editor--gridTrackSizeComboboxTrigger--x3YF2",y="on_canvas_name_editor--gridTrackSizeComboboxTriggerDS--wb3e3",v="on_canvas_name_editor--gridTrackSizeComboboxContainer--XhG0G",b="on_canvas_name_editor--gridTrackSizeComboboxContainerDS--umpQa",C="on_canvas_name_editor--gridTrackSizeComboboxPopupList--VszDC",j="on_canvas_name_editor--gridTrackSizeComboboxOption--txB7m",k="on_canvas_name_editor--gridTrackSizeComboboxOptionInner--hHnK8",w="on_canvas_name_editor--gridTrackSizeComboboxOptionInnerActive--iBPBQ",E="on_canvas_name_editor--gridTrackSizeComboboxOptionCheck--HHUoo"},961125:(e,t,n)=>{n.d(t,{$A:()=>i,kL:()=>s,to:()=>a});let i="40px",s="header_container--container--aPIhG",a="header_container--withShadow---XYxm"},639853:(e,t,n)=>{n.d(t,{As:()=>p,Dq:()=>c,KE:()=>_,Nr:()=>E,Nz:()=>g,Pl:()=>h,R:()=>x,Sp:()=>i,VC:()=>v,VQ:()=>T,YW:()=>y,aY:()=>a,ge:()=>j,hi:()=>b,iB:()=>u,jE:()=>w,jG:()=>C,l$:()=>s,mB:()=>k,n6:()=>r,oG:()=>o,q8:()=>S,sR:()=>f,sl:()=>m,vu:()=>l,wH:()=>d});let i="legacy_pages_panel--pageChangesCount--ZvU4X",s="legacy_pages_panel--pagesList--20gAo",a="legacy_pages_panel--pendingPagesList--Kqq9Y legacy_pages_panel--pagesList--20gAo",r="legacy_pages_panel--pageIcon--2SeMV",l="legacy_pages_panel--active--4gxmS",o="legacy_pages_panel--pageRow--RXLs9 legacy_pages_panel--pageRowBase--2BLqh",d="legacy_pages_panel--selected--ZWcge",c="legacy_pages_panel--hoverByMouse--QLchE",u="legacy_pages_panel--hoverState--Jq0dh",p="legacy_pages_panel--pageRowButton--ZYdDc",m="legacy_pages_panel--pageRowActive--wbZe-",h="legacy_pages_panel--activePageBrand--X-F3Y",f="legacy_pages_panel--pageRowActiveUI2--Lwdqd",g="legacy_pages_panel--renameableNode--JPw8y",x="legacy_pages_panel--renameableNodeWithMoreActions--DgAAZ legacy_pages_panel--renameableNode--JPw8y",_="legacy_pages_panel--renameableNodeText--eA3aT ellipsis--ellipsis--Tjyfa",y="legacy_pages_panel--disabledNodeText--2HBBi legacy_pages_panel--renameableNodeText--eA3aT ellipsis--ellipsis--Tjyfa",v="legacy_pages_panel--renameableNodeTextEnd--iOsDL legacy_pages_panel--renameableNodeText--eA3aT ellipsis--ellipsis--Tjyfa",b="legacy_pages_panel--renameableNodeTextEndDisabled--fFOaW legacy_pages_panel--renameableNodeTextEnd--iOsDL legacy_pages_panel--renameableNodeText--eA3aT ellipsis--ellipsis--Tjyfa",C="legacy_pages_panel--scrollContainer--YR8Lw",j="legacy_pages_panel--leftPanelWidth--fUkeU",k="legacy_pages_panel--pageRowDividerContainer--eWfpW legacy_pages_panel--pageRowBase--2BLqh",w="legacy_pages_panel--pageRowDivider--0c9dh",E="legacy_pages_panel--offlineContainer--zrR3y",T="legacy_pages_panel--offlineIcon--sLbbs",S="legacy_pages_panel--pageRowRight--N3-uE"},629592:(e,t,n)=>{n.d(t,{Co:()=>l,II:()=>s,Rm:()=>i,W:()=>r,dK:()=>a});let i="ui3_header_row--toggleButton--hYOqV",s="ui3_header_row--pageExpandToggle--jZKwE",a="ui3_header_row--isHidden--IIOWY",r="ui3_header_row--pageTitle--N3-To ellipsis--ellipsis--Tjyfa",l="ui3_header_row--searchButtonContainer--U--jv"},787010:(e,t,n)=>{n.d(t,{D6:()=>s,kF:()=>i});let i="asset_description_lexical_editor--contentEditableReadOnly--BlHWQ asset_description_lexical_editor--contentEditableBase--nTcyo",s="asset_description_lexical_editor--contentEditableCollapsed--H601A asset_description_lexical_editor--contentEditableReadOnly--BlHWQ asset_description_lexical_editor--contentEditableBase--nTcyo"},699745:(e,t,n)=>{n.d(t,{BK:()=>C,C7:()=>r,EI:()=>a,Ge:()=>p,K$:()=>d,Km:()=>v,MT:()=>w,Vr:()=>b,XE:()=>u,_L:()=>l,ai:()=>j,hg:()=>y,me:()=>g,qb:()=>c,r9:()=>s,rR:()=>i,wH:()=>h,ws:()=>o,yo:()=>f,yx:()=>m,zK:()=>k,zW:()=>x,zk:()=>_});let i="multiplayer_view--onboardingTarget--Ja9Ak",s="multiplayer_view--disabled--K9QcN",a="multiplayer_view--usersContainer--bzaNI",r="multiplayer_view--userIconView--XlLWC",l="multiplayer_view--userIconViewHorizontal--CRVT- multiplayer_view--userIconView--XlLWC",o="multiplayer_view--userIconAvatar--qt4Vz",d="multiplayer_view--userIconAvatarLoading--s5PPI",c="multiplayer_view--normal--xHQOT",u="multiplayer_view--avatarWithCollaborationToolsContainer--7lq5U",p="multiplayer_view--fullHeightSidebarAvatarWithToolsOverrides--Z5S16",m="multiplayer_view--fullHeightSidebarAvatarWithToolsOverridesWithOverflow--hExNS multiplayer_view--fullHeightSidebarAvatarWithToolsOverrides--Z5S16",h="multiplayer_view--selected--PrEy3",f="multiplayer_view--hovered--X1V8M",g="multiplayer_view--separator--d7XC2",x="multiplayer_view--separatorContainer--3NXhc",_="multiplayer_view--multiplayerUserCount--VN79F",y="multiplayer_view--fileSeenStateSubtitle--xTYdr",v="multiplayer_view--avatarWithGroupActionsTightened---blv6",b="multiplayer_view--groupActions--C2jLX",C="multiplayer_view--presenterButtonAction--7CCnt",j="multiplayer_view--chevron--Vn-C1",k="multiplayer_view--ui3SearchContainerNew--brZ7S",w="multiplayer_view--searchContainer--q6zE8"},370420:(e,t,n)=>{n.d(t,{H6:()=>l,a0:()=>r,bV:()=>a,jy:()=>s,sk:()=>d,xC:()=>i,xO:()=>o});let i="browse_explore_list--widgetTilesGridContainer--k7aKh browse_widgets_view--widgetTilesGridContainer--t5-lL",s="browse_explore_list--seeAll--8L87Q text--fontPos13--xW8hS text--_fontBase--QdLsd",a="browse_explore_list--sectionHeader--vkmM0 text--fontPos13--xW8hS text--_fontBase--QdLsd",r="browse_explore_list--categorySectionHeaderContainer--WiX1N",l="browse_explore_list--categorySectionHeaderCard--z5F9B browse_explore_list--categorySectionHeaderContainer--WiX1N",o="browse_explore_list--pluginCategorySectionHeaderPadding--hW6gC",d="browse_explore_list--resourcesGrid--BGQAu"},480143:(e,t,n)=>{n.d(t,{$I:()=>g,D5:()=>u,EQ:()=>C,KF:()=>a,MY:()=>v,Mm:()=>b,Mo:()=>o,ON:()=>s,X6:()=>d,Y:()=>j,hW:()=>i,jE:()=>r,n_:()=>_,pz:()=>l,rb:()=>m,sk:()=>x,tN:()=>y,vC:()=>c,w0:()=>f,wP:()=>p,xQ:()=>h});let i="browse_templates_modal--figjamModalAnimated--DZYbi",s="browse_templates_modal--searchBar--XLS5K",a="browse_templates_modal--searchInputContainer--Dl7vE",r="browse_templates_modal--modalContent--xJKzJ",l="browse_templates_modal--sidebar--Ay4f5",o="browse_templates_modal--unselectedSidebarItem--8k5Hx browse_templates_modal--sidebarItem--kyE1B browse_templates_modal--sidebarText--lcSPj text--fontPos13--xW8hS text--_fontBase--QdLsd",d="browse_templates_modal--selectedSidebarItem--riSyU browse_templates_modal--sidebarItem--kyE1B browse_templates_modal--sidebarText--lcSPj text--fontPos13--xW8hS text--_fontBase--QdLsd",c="browse_templates_modal--figmaCuratedHeading--NrYwZ browse_templates_modal--sidebarItem--kyE1B browse_templates_modal--sidebarText--lcSPj text--fontPos13--xW8hS text--_fontBase--QdLsd",u="browse_templates_modal--communitySidebarContainer--otHCt",p="browse_templates_modal--linkIcon--DOZfF",m="browse_templates_modal--mainContent---sUBI",h="browse_templates_modal--categoryPreviewRow--wRxQO",f="browse_templates_modal--categoryPreviewHeader---gWg3",g="browse_templates_modal--categoryPreviewTitle--xg13c text--fontPos13--xW8hS text--_fontBase--QdLsd",x="browse_templates_modal--resourcesGrid--Y-fVk",_="browse_templates_modal--hoverOverlay--sFj3y",y="browse_templates_modal--hoverOverlayFocusBorder--Z6C-1",v="browse_templates_modal--teamTemplatesHeaderButton--n6rDU",b="browse_templates_modal--bgLoading--Sz6so",C="browse_templates_modal--bgLoadingLight--Yl6dc",j="browse_templates_modal--bgLoadingLightest--9ceKP"},770158:(e,t,n)=>{n.d(t,{Cb:()=>s,M4:()=>r,Q$:()=>a,Q0:()=>d,_d:()=>u,iZ:()=>o,k9:()=>l,mT:()=>c,qW:()=>i});let i="inline_preview_device_frames--previewDeviceContainer--fNvYG",s="inline_preview_device_frames--fillGapsBetweenDeviceAndIframe--DuNNK",a="inline_preview_device_frames--hideCornersForOverlyRoundedDevice--Rn1BM",r="inline_preview_device_frames--previewDeviceImage--pSzed",l="inline_preview_device_frames--previewDeviceHeader--KHpCv",o="inline_preview_device_frames--deviceFrameHitTargetSvg--w7930",d="inline_preview_device_frames--rotatedHorizontal--5yjwl",c="inline_preview_device_frames--positionRotatedHorizontalDeviceFrame--mPJzu",u="inline_preview_device_frames--positionRotatedHorizontalDeviceFrameHitTarget--zmylC"},560823:(e,t,n)=>{n.d(t,{AL:()=>C,BI:()=>m,Cu:()=>x,DL:()=>d,FH:()=>b,Fp:()=>i,G7:()=>f,Hl:()=>s,L8:()=>k,LH:()=>_,Lk:()=>E,MO:()=>p,Nn:()=>j,TV:()=>c,UD:()=>g,Xg:()=>S,YM:()=>v,e6:()=>u,ev:()=>y,fJ:()=>I,j7:()=>a,ko:()=>l,nP:()=>r,tE:()=>T,vO:()=>o,yH:()=>h,zO:()=>w});let i="voice_users--voiceParticipantAvatar--7mhMG",s="voice_users--overflowRow--dyDR2",a="voice_users--nameAndSuffixContainer--GGoKj",r="voice_users--flexContainer--bWLmT",l="voice_users--flexLeftContainer--EVDRS",o="voice_users--flexRightContainer--Su6EL",d="voice_users--voiceParticipantName--MPxav text--fontPos11--2LvXf text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa",c="voice_users--voiceParticipantNameGreyedOut--4zNHd text--fontPos11--2LvXf text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa",u="voice_users--participantStatus--cnVtZ",p="voice_users--participantRow--D4Yar",m="voice_users--hoverable--tq5aE",h="voice_users--containsCursor--Wx6C4",f="voice_users--secondaryMenuIconButtonContainer--aAh8o",g="voice_users--showSecondaryDropdownOnHover--AWGE6",x="voice_users--currentUserHeaderRow--Jiv6z",_="voice_users--multiplayerUserView--7nAcD",y="voice_users--voiceUsersWrapper--83FhS",v="voice_users--voiceUsersOverflowScrollingContainer--KXSUW",b="voice_users--userSuffixNew--husrg text--fontPos11--2LvXf text--_fontBase--QdLsd",C="voice_users--voiceUserHeadphonesIcon--wLuPW",j="voice_users--mutedContainer--JL7uZ",k="voice_users--cardButton--xv6Tg",w="voice_users--userSuffixNewShowOnHover--awrl4",E="voice_users--cardRootWithHover--EMdKA text--fontPos11--2LvXf text--_fontBase--QdLsd",T="voice_users--cardRootActive--Jw4N- text--fontPos11--2LvXf text--_fontBase--QdLsd",S="voice_users--secondaryActionsMenuButtonNew--M2k36",I="voice_users--showSecondaryMenuButton--W3cqq"},623355:(e,t,n)=>{n.d(t,{QH:()=>o,R3:()=>r,Te:()=>i,WF:()=>d,Wh:()=>l,XF:()=>m,iG:()=>s,iw:()=>p,sl:()=>c,tL:()=>u,zc:()=>a});let i="voice_toolbar--audioButtonInDropdown--lmLzR",s="voice_toolbar--centeredContainer--h6AK-",a="voice_toolbar--iconContainer--LjNP5 voice_toolbar--centeredContainer--h6AK-",r="voice_toolbar--avatarWrapper--t-5vS",l="voice_toolbar--volumeIcon--U-TCI",o="voice_toolbar--audioIconNotJoined---DG1Y",d="voice_toolbar--audioIconUnavailableSpan--H1YdE",c="voice_toolbar--audioIconDisabled--gCpOC",u="voice_toolbar--audioIconMenu--trTHP",p="voice_toolbar--audioIcon--XaW03 voice_toolbar--centeredContainer--h6AK-",m="voice_toolbar--avatarObserveClickTarget--QALFw"},930658:(e,t,n)=>{n.d(t,{EF:()=>l,Rc:()=>r,Vc:()=>o,Wp:()=>i,f1:()=>s,zm:()=>a});let i="styles-module--accessibilityDropdown--vl6Sz",s="styles-module--tagInput--CYaw2",a="styles-module--iconVisibleOnHover--W-hXx",r="styles-module--sideText--SWbNy",l="styles-module--optionSideText--5YYIC styles-module--sideText--SWbNy",o="styles-module--ui3ComboBoxInput--0X3PS ellipsis--ellipsis--Tjyfa"},223928:(e,t,n)=>{n.d(t,{A_:()=>m,C6:()=>r,ET:()=>u,G9:()=>d,I9:()=>l,Kz:()=>x,L1:()=>f,P3:()=>i,RN:()=>_,Ub:()=>h,W8:()=>a,WH:()=>s,WX:()=>g,hQ:()=>c,qd:()=>p,yl:()=>o});let i="sites_full_page_preview--fullPagePreview--Xz3JG",s="sites_full_page_preview--previewBounds--V0iWO",a="sites_full_page_preview--horizontalResizeContainer--adzo-",r="sites_full_page_preview--bottomResizeHandle--4AoWF sites_full_page_preview--resizeHandle--plr3i",l="sites_full_page_preview--leftRightResizeHandle--gT2Nq sites_full_page_preview--resizeHandle--plr3i",o="sites_full_page_preview--previewHeader--zWVOh",d="sites_full_page_preview--progressBarContainer--3iafs",c="sites_full_page_preview--contentContainer--rhvCv",u="sites_full_page_preview--resizeContainer--Ax-Sh",p="sites_full_page_preview--headerTitle---5-ip",m="sites_full_page_preview--pageSelectDropdownContainer--T56hQ",h="sites_full_page_preview--leftControlGroup--tfTiF sites_full_page_preview--controlGroup--vHfcT",f="sites_full_page_preview--rightControlGroup--x3yAk sites_full_page_preview--controlGroup--vHfcT",g="sites_full_page_preview--leftControls--nbIXH",x="sites_full_page_preview--centerControls--EyX7N",_="sites_full_page_preview--rightControls--boJ0z"},107560:(e,t,n)=>{n.d(t,{$y:()=>u,C9:()=>a,I8:()=>f,JB:()=>C,S:()=>v,VY:()=>m,XD:()=>h,_P:()=>r,a3:()=>_,cb:()=>o,e4:()=>g,gx:()=>d,iH:()=>b,ln:()=>i,mf:()=>l,n_:()=>y,pz:()=>x,uP:()=>s,y5:()=>c,zs:()=>p});let i="slides_template_tile--tileFocusable--MRUA5",s="slides_template_tile--tileImage--xQ9Rj",a="slides_template_tile--templateCoverCardMediumSize--dZ4FH",r="slides_template_tile--templateCoverCardLargeSize--lWeyZ",l="slides_template_tile--templateCoverCardLargeSizeV2--3rutG",o="slides_template_tile--templateCoverCardExtraLargeSize---WVL9",d="slides_template_tile--templateCoverBottomRowMedium--jnOVs",c="slides_template_tile--templateCoverBottomRowLarge--jYVZ6",u="slides_template_tile--templateCoverCardMedium--D1xOJ slides_template_tile--_templateCoverCard--owOUm slides_template_tile--templateCoverCardMediumSize--dZ4FH",p="slides_template_tile--templateCoverCardLarge--aUi8S slides_template_tile--_templateCoverCard--owOUm slides_template_tile--templateCoverCardLargeSize--lWeyZ",m="slides_template_tile--templateCoverCardExtraLarge--9llOJ slides_template_tile--_templateCoverCard--owOUm slides_template_tile--templateCoverCardExtraLargeSize---WVL9",h="slides_template_tile--moduleCoverCardPickerSize--AAEPk",f="slides_template_tile--moduleCoverCardModalSize--1-jSe",g="slides_template_tile--moduleCoverCardPicker--IvByg slides_template_tile--_moduleCoverCard--6hqG0 slides_template_tile--moduleCoverCardPickerSize--AAEPk",x="slides_template_tile--moduleCoverCardModal--llMPw slides_template_tile--_moduleCoverCard--6hqG0 slides_template_tile--moduleCoverCardModalSize--1-jSe",_="slides_template_tile--gridViewHover--dEaa-",y="slides_template_tile--hoverOverlay--m7upM",v="slides_template_tile--loadingSpinner--i0gem",b="slides_template_tile--selectedTemplateTile---grt1",C="slides_template_tile--hoverableTemplateTile--meERX"},692769:(e,t,n)=>{n.d(t,{Fj:()=>d,GM:()=>u,HE:()=>r,ON:()=>s,Tn:()=>c,Vg:()=>o,eg:()=>m,ij:()=>i,m_:()=>p,me:()=>a,qr:()=>l});let i="slides_template_ui--pickerContainer--a3RMS",s="slides_template_ui--searchBar--jlYPZ",a="slides_template_ui--separator--ptcuN",r="slides_template_ui--headerSeparator--Q3-mT",l="slides_template_ui--footer--4g8kc",o="slides_template_ui--grid--FCSGf",d="slides_template_ui--fileTile--6wu1g",c="slides_template_ui--titleTextContainer--cH2zw",u="slides_template_ui--templateTitleText--lcuqy text--fontPos13--xW8hS text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa",p="slides_template_ui--publisherTitleText--9DQpU text--fontPos11--2LvXf text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa",m="slides_template_ui--tabButton--R1hl1"},784527:(e,t,n)=>{n.d(t,{BA:()=>r,Do:()=>o,ER:()=>g,FS:()=>p,FW:()=>i,KR:()=>d,PT:()=>s,TK:()=>m,Tt:()=>a,UP:()=>x,fg:()=>u,fh:()=>h,ij:()=>f,pl:()=>c,w0:()=>l});let i="section_preset_picker--headerIconButton--tDLql section_preset_picker--iconBase--HKG97",s="section_preset_picker--hover--GYcQi",a="section_preset_picker--shelfItemIcon--MASDu section_preset_picker--iconBase--HKG97",r="section_preset_picker--templateItemIcon--eWzYK section_preset_picker--iconBase--HKG97",l="section_preset_picker--headerItemContainer--0R5QO dropdown--_optionBase--z-REc text--fontNeg12--2PWcg text--_fontBase--QdLsd text--_negText--j9g-L",o="section_preset_picker--loadingSpinnerContainer--OM30n",d="section_preset_picker--chevronRight--hORsb",c="section_preset_picker--shelfItemContainer--KochN section_preset_picker--bodyItemContainer--Ani9M dropdown--option--JMVCh dropdown--_optionBase--z-REc text--fontNeg12--2PWcg text--_fontBase--QdLsd text--_negText--j9g-L",u="section_preset_picker--templateItemContainer--tCRxk section_preset_picker--bodyItemContainer--Ani9M dropdown--option--JMVCh dropdown--_optionBase--z-REc text--fontNeg12--2PWcg text--_fontBase--QdLsd text--_negText--j9g-L",p="section_preset_picker--textContainer--dyEMF text--fontNeg11--StdFq text--_fontBase--QdLsd text--_negText--j9g-L",m="section_preset_picker--headerText--XZRQV section_preset_picker--textContainer--dyEMF text--fontNeg11--StdFq text--_fontBase--QdLsd text--_negText--j9g-L text--fontNeg12--2PWcg text--_fontBase--QdLsd text--_negText--j9g-L",h="section_preset_picker--nameText--LS4BG",f="section_preset_picker--descriptionText--OCJkN",g="section_preset_picker--trailingIcon--X-run section_preset_picker--iconBase--HKG97",x="section_preset_picker--alertHeader--oa08R"},646011:(e,t,n)=>{n.d(t,{H:()=>i});let i="0.5s"},630332:(e,t,n)=>{n.d(t,{Kk:()=>i.Kk,nw:()=>c,G1:()=>i.G1,Om:()=>i.Om,qA:()=>i.qA,ru:()=>w,wc:()=>k,Si:()=>i.Si,yq:()=>i.yq,hM:()=>i.hM,FI:()=>i.FI,UK:()=>i.UK,Au:()=>y,fC:()=>I,pF:()=>i.pF,jl:()=>x,Cp:()=>_,KP:()=>o,VB:()=>i.VB,Og:()=>d,xs:()=>i.xs});var i=n(148024),s=n(980852),a=n(795033),r=n(246144),l=n(592948);let o=(0,a.Iz)(e=>(0,a.eU)(new Map)),d=(0,a.Iz)(e=>(0,a.eU)(new Map)),c=(0,a.Iz)(e=>(0,a.eU)(new Set)),u=(0,a.Iz)(e=>(0,a.eU)(null)),p=(0,a.Iz)(e=>(0,a.eU)(new Map)),m=(0,a.Iz)(e=>(0,a.eU)(new Map)),h=(0,a.Iz)(e=>(0,a.eU)(new Set)),f=(0,a.Iz)(e=>(0,a.eU)(null)),g=(0,a.Iz)(e=>(0,a.eU)(t=>{let n=t(u(e)),i=t(d(e));return n?{isGenerating:n.isGenerating,selectedVariantId:n.selectedVariantId,hasVariants:n.variants.length>0,variantStatuses:n.variants.map(e=>({id:e.id,status:e.status,hasError:!!e.error})),thumbnailStates:Array.from(i.entries()).map(([e,t])=>({id:e,isGenerating:t.isGenerating,hasUrl:!!t.thumbnailUrl}))}:null})),x=(0,a.Iz)(e=>(0,a.eU)(t=>{let n=t(c(e)),i=0;return n.forEach(e=>{let n=t(g(e));n&&(i+=n.isGenerating?1:0,i+=n.variantStatuses.length,i+=n.variantStatuses.filter(e=>"completed"===e.status).length,i+=n.thumbnailStates.filter(e=>e.isGenerating).length)}),i})),_=new class{getWorkspace(e){let t=u(e);return a.zl.get(t)}updateWorkspace(e,t){let n=u(e);a.zl.set(n,t)}setWorkspace(e,t){let n=u(e);a.zl.set(n,t)}getVariantNodes(e){let t=p(e);return a.zl.get(t)}setVariantNodes(e,t){let n=p(e);a.zl.set(n,new Map(t))}setVariantNode(e,t,n){let i=p(e);a.zl.set(i,e=>{let i=new Map(e);return i.set(t,n),i})}getResultNodes(e){let t=m(e);return a.zl.get(t)}setResultNode(e,t,n){let i=m(e);a.zl.set(i,e=>{let i=new Map(e);return i.set(t,n),i})}setResultNodes(e,t){let n=m(e);a.zl.set(n,new Map(t))}persistBackupManager(e,t){if(!t||!e){console.warn("[MultipleOutputs] Cannot persist BackupManager state: missing backupManager or clientLifecycleId");return}let n={backupNodeId:t.backupNode?.guid,activeNodeId:t.activeNode?.guid,parentNodeId:t.parent?.guid};if(!n.backupNodeId||!n.activeNodeId||!n.parentNodeId){(0,r.x1)("MultipleOutputs","Invalid BackupManager state:",{clientLifecycleId:e,state:n});return}let i=f(e);a.zl.set(i,n)}getBackupManager(e){if(!e)return console.warn("[MultipleOutputs] Cannot restore BackupManager: missing clientLifecycleId"),null;try{let t=f(e),n=a.zl.get(t);if(!n)return(0,r.x1)("MultipleOutputs","No BackupManager state found in atoms for clientLifecycleId:",{clientLifecycleId:e}),null;let i=(0,s.getActiveTSSceneGraph)(),o=i.get(n.backupNodeId),d=i.get(n.activeNodeId),c=i.get(n.parentNodeId);if(!o||!d||!c)return null;if(!l.IO)return(0,r.x1)("MultipleOutputs","BackupManager not available"),null;let u=Object.create(l.IO.prototype);return u.backupNode=o,u.activeNode=d,u.parent=c,u}catch(t){return(0,r.x1)("MultipleOutputs","Failed to restore BackupManager from state:",{clientLifecycleId:e,error:t instanceof Error?t.message:t}),null}}getBackupManagerState(e){let t=f(e);return a.zl.get(t)}clearBackupManagerState(e){let t=f(e);a.zl.set(t,null)}trackCreatedNode(e,t){let n=h(e);a.zl.set(n,e=>{let n=new Set(e);return n.add(t),n})}getTrackedNodes(e){let t=h(e);return a.zl.get(t)}clearTrackedNodes(e){let t=h(e);a.zl.set(t,new Set)}hasActiveWorkspace(e){return null!==this.getWorkspace(e)}cleanup(e){let t=u(e),n=p(e),i=m(e),s=f(e),r=d(e),l=h(e),c=o(e);a.zl.set(t,null),a.zl.set(n,new Map),a.zl.set(i,new Map),a.zl.set(s,null),a.zl.set(r,new Map),a.zl.set(l,new Set),a.zl.set(c,new Map)}};function y(e,t){let n=c(e);for(let e of a.zl.get(n)){let n=u(e),i=a.zl.get(n);if(i?.variants.some(e=>e.id===t))return e}return null}var v=n(913834),b=n(883765),C=n(383947),j=n(140948);let k=(0,a.Iz)(()=>(0,a.eU)((0,C.ux)())),w=(0,a.Iz)(e=>{let t=(0,a.eU)((0,C.Ok)());return(0,a.eU)(e=>e(t),(n,i,s)=>{let r=E.get(e);if(r&&(clearTimeout(r),E.delete(e)),i(t,s),(0,C.Mx)(s)){let s=Date.now(),r=setTimeout(()=>{(0,C.Mx)(n(t))&&(i(t,(0,C.uW)(Error("Restore timed out after 10 seconds"))),b.az.trackDefinedEvent("ai_assistant.restore_completed",{clientLifecycleId:e,success:!1,error:"timeout",duration:1e4})),E.delete(e)},1e4);E.set(e,r),function(e,t,n){let i=!1,s=a.zl.sub(T,()=>{let r=a.zl.get(t);if(!(0,C.Mx)(r)){s();return}let l=a.zl.get(T);if(l===v.kul.UNJOINED&&(i=!0),l===v.kul.JOINED&&i){let r=E.get(e);r&&(clearTimeout(r),E.delete(e)),i=!1,a.zl.set(t,(0,C.NY)({restoreVersionId:e})),n(),s()}})}(e,t,()=>{b.az.trackDefinedEvent("ai_assistant.restore_completed",{clientLifecycleId:e,success:!0,duration:Date.now()-s})})}(0,C.ok)(s)&&b.az.trackDefinedEvent("ai_assistant.restore_completed",{clientLifecycleId:e,success:!1,error:s.error.message||"unknown_error"})})}),E=new Map,T=(0,j.bt)(e=>e.mirror.appModel.multiplayerSessionState),S=(0,j.bt)(e=>e.versionHistory),I=(0,a.eU)(e=>{let t=e(S);return t.versions.length>0&&t.versions[0]?.id||null})},777083:(e,t,n)=>{n.d(t,{N:()=>r});var i=n(104076),s=n(716976);let a=s.lazy(()=>n.e(4345).then(n.bind(n,544345)));function r(){return(0,i.jsx)("div",{style:{flexShrink:0},children:(0,i.jsx)(s.Suspense,{fallback:null,children:(0,i.jsx)(a,{})})})}},481557:(e,t,n)=>{n.d(t,{Lb:()=>l,ct:()=>s,hT:()=>r,lq:()=>o,ye:()=>a});var i=n(795033);let s=(0,i.eU)(!1),a=(0,i.eU)(0),r=(0,i.eU)(0),l=(0,i.eU)(!1),o=(0,i.eU)("")},185568:(e,t,n)=>{n.d(t,{A:()=>tD,i:()=>tM});var i,s=n(104076),a=n(716976),r=n(237420),l=n(547115),o=n(242069),d=n(419759),c=n(59127),u=n(179408),p=n(685128);function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class h extends p.g{buildRequest({messages:e,serverSideChatParams:t}){return{messages:e,serverSideChatParams:t,configurationKey:this.configurationKey,globalOptions:this.globalOptions,serverOptionDebugOverrides:this.serverOptionDebugOverrides,serverOverridesOpaqueKey:this.serverOverridesOpaqueKey}}constructor({configurationKey:e,globalOptions:t,serverOptionDebugOverrides:n,serverOverridesOpaqueKey:i,...s}){super(s),m(this,"configurationKey",void 0),m(this,"globalOptions",void 0),m(this,"serverOptionDebugOverrides",void 0),m(this,"serverOverridesOpaqueKey",void 0),this.configurationKey=e,this.globalOptions=t,this.serverOptionDebugOverrides=n,this.serverOverridesOpaqueKey=i}}var f=n(60791),g=n(747618),x=n(998432),_=n(983252),y=n(663166),v=n(765560),b=n(638004),C=n(980852),j=n(812714),k=n(795033),w=n(188220),E=n(560809),T=n.n(E),S=n(403046),I=n.n(S),N=n(926899),A=n(989282),L=n(318648),M=n(520199),O=n(166887),R=n(513369),P=n(276800),D=n(743072),F=n(140490),z=n(550209),B=n(246144),G=n(225125),U=n(192075),V=n(126390),H=n(143163),K=n(315361),W=n(925699),q=n(819851),X=n(178623),Y=n(905885),Z=n(431222),J=n(809565),Q=n(354114),$=n(692042),ee=n(657878),et=n(592726),en=n(904017),ei=n(808242),es=n(176203),ea=n(415567),er=n(141330),el=n(592948),eo=n(32970),ed=n(233365);let ec=eo.z.object({fastShouldRouteToStandardForMultiSelect:eo.z.boolean()}),eu={fastShouldRouteToStandardForMultiSelect:!0};var ep=n(997477),em=n(11802);async function eh(e,t,n,i){let s=ec.safeParse(await (0,ep.w0)("make_edits_dynamic_routing_config")),a=s.success?s.data:eu,r=(0,em.b4)(e,t),l=(0,C.getActiveTSSceneGraph)(),o=function(e,t,n){let i=t.makeEditsFallbackConfigurationKey,s=t.makeEditsZTOConfigurationKey;if(s&&!(n.inferredContext.searchResultComponentGuids&&n.inferredContext.searchResultComponentGuids.length>0)){if(n.inferredContext.selectedNodeIds?.length===0)return{targetConfigKey:s,ztoReason:"EmptySelection"};let e=n.inferredContext.selectedNodeIds?.[0];if(e){let t=n.sceneGraph.get(e);if(t){let e=t?.containingCanvas;if(!e)return{targetConfigKey:s,ztoReason:"EmptySelection"};if((0,ed.Pg)(t))return{targetConfigKey:s,ztoReason:"EmptyFrame"};let i=n.sceneGraph.get(e);if(i&&0===i.childrenGuids.length)return{targetConfigKey:s,ztoReason:"EmptyPage"}}}}return i&&e.fastShouldRouteToStandardForMultiSelect&&n.inferredContext.selectedNodeIds&&(0,_.AR)(n.options,n.inferredContext.selectedNodeIds)?{targetConfigKey:i,fallbackReason:"fastShouldRouteToStandardForMultiSelect"}:null}(a,t,{inferredContext:i,options:r.options,sceneGraph:l});return o?(o.fallbackReason&&(n.fallbackReason=o.fallbackReason),o.ztoReason&&(n.ztoReason=o.ztoReason),(0,em.b4)(e,{makeEditsOpaqueConfigurationKey:o.targetConfigKey,makeEditsGlobalOptionOverrides:{}})):r}var ef=n(605862),eg=n(807289),ex=n(76578),e_=n(107799),ey=n(462416),ev=n(51656),eb=n(825543),eC=n(630332),ej=n(777083),ek=n(311272);let ew={WIDTH:256,HEIGHT:256,MAX_SCALE:10,TIMEOUT_MS:1e4,CLEAR_COLOR:"#FFFFFF",PADDING:8,TYPE:"PNG"};var eE=n(481557);function eT(){let e=[(0,U.t)("assistant.chat.status.loading"),(0,U.t)("ai_assistant.cursor.status.thinking_pondering"),(0,U.t)("ai_assistant.cursor.status.thinking_analyzing"),(0,U.t)("ai_assistant.cursor.status.thinking_considering"),(0,U.t)("ai_assistant.cursor.status.thinking_reflecting"),(0,U.t)("ai_assistant.cursor.status.thinking_contemplating"),(0,U.t)("ai_assistant.cursor.status.thinking_deliberating"),(0,U.t)("ai_assistant.cursor.status.thinking_reasoning"),(0,U.t)("ai_assistant.cursor.status.thinking_processing"),(0,U.t)("ai_assistant.cursor.status.thinking_evaluating"),(0,U.t)("ai_assistant.cursor.status.thinking_examining"),(0,U.t)("ai_assistant.cursor.status.thinking_assessing"),(0,U.t)("ai_assistant.cursor.status.thinking_reviewing"),(0,U.t)("ai_assistant.cursor.status.thinking_studying"),(0,U.t)("ai_assistant.cursor.status.thinking_investigating"),(0,U.t)("ai_assistant.cursor.status.thinking_exploring"),(0,U.t)("ai_assistant.cursor.status.thinking_calculating"),(0,U.t)("ai_assistant.cursor.status.thinking_computing"),(0,U.t)("ai_assistant.cursor.status.thinking_figuring_out"),(0,U.t)("ai_assistant.cursor.status.thinking_working_on_it"),(0,U.t)("ai_assistant.cursor.status.thinking_brainstorming"),(0,U.t)("ai_assistant.cursor.status.thinking_strategizing"),(0,U.t)("ai_assistant.cursor.status.thinking_planning"),(0,U.t)("ai_assistant.cursor.status.thinking_weighing_options"),(0,U.t)("ai_assistant.cursor.status.thinking_deep_diving"),(0,U.t)("ai_assistant.cursor.status.thinking_concentrating"),(0,U.t)("ai_assistant.cursor.status.thinking_focusing"),(0,U.t)("ai_assistant.cursor.status.thinking_speculating"),(0,U.t)("ai_assistant.cursor.status.thinking_hypothesizing"),(0,U.t)("ai_assistant.cursor.status.thinking_deducing"),(0,U.t)("ai_assistant.cursor.status.thinking_inferring"),(0,U.t)("ai_assistant.cursor.status.thinking_synthesizing"),(0,U.t)("ai_assistant.cursor.status.thinking_formulating"),(0,U.t)("ai_assistant.cursor.status.thinking_conceptualizing"),(0,U.t)("ai_assistant.cursor.status.thinking_theorizing"),(0,U.t)("ai_assistant.cursor.status.thinking_puzzling"),(0,U.t)("ai_assistant.cursor.status.thinking_deciphering"),(0,U.t)("ai_assistant.cursor.status.thinking_unpacking"),(0,U.t)("ai_assistant.cursor.status.thinking_dissecting"),(0,U.t)("ai_assistant.cursor.status.thinking_interpreting"),(0,U.t)("ai_assistant.cursor.status.thinking_understanding"),(0,U.t)("ai_assistant.cursor.status.thinking_comprehending"),(0,U.t)("ai_assistant.cursor.status.thinking_discerning")];return e[Math.floor(Math.random()*e.length)]??(0,U.t)("assistant.chat.status.loading")}function eS(e,t){let n=t.get(e);if(!n||!n.absoluteBoundingBox)return null;let i=n.absoluteBoundingBox;return{x:i.x+i.w/2,y:i.y+i.h/2}}let eI=(0,k.eU)(new class{constructor(){this.activeNodes=[],this.sceneGraphRef=null,this.cycleIntervalId=null,this.currentNodeIndex=0,this.lastTransitionTime=0}addNodes(e,t,n){if(0===e.length)return;let i=performance.now();this.sceneGraphRef=t;let s=Array.isArray(n)?n:e.map(()=>n||eT());e.forEach((e,t)=>{let n=s[t]||eT(),a=this.activeNodes.findIndex(t=>t.nodeId===e);if(-1!==a)this.activeNodes[a]={nodeId:e,message:n,addedAt:i};else{let s=this.currentNodeIndex+1+t;this.activeNodes.splice(s,0,{nodeId:e,message:n,addedAt:i})}}),this.startCyclingAt(e[0])}removeNodes(e){e.forEach(e=>{let t=this.activeNodes.find(t=>t.nodeId===e);if(!t)return;let n=performance.now()-t.addedAt;n>=5e3?this.deleteNode(e):setTimeout(()=>{this.deleteNode(e)},5e3-n)})}deleteNode(e){let t=this.activeNodes.findIndex(t=>t.nodeId===e);-1!==t&&this.activeNodes.splice(t,1),0===this.activeNodes.length&&this.onNoMoreNodes()}startCyclingAt(e){if(0!==this.activeNodes.length){if(1===this.activeNodes.length){this.restartCycleStartingWithNode(e);return}performance.now()-this.lastTransitionTime>=1e3&&this.restartCycleStartingWithNode(e)}}restartCycleStartingWithNode(e){if(0===this.activeNodes.length)return;this.lastTransitionTime=performance.now(),null!==this.cycleIntervalId&&(clearInterval(this.cycleIntervalId),this.cycleIntervalId=null);let t=this.activeNodes.findIndex(t=>t.nodeId===e);-1!==t&&(this.currentNodeIndex=t),k.zl.get(eE.ct)?this.animateToCurrentNode():(this.teleportToNode(e),k.zl.set(eE.ct,!0)),this.cycleIntervalId=setInterval(()=>{0!==this.activeNodes.length&&(this.currentNodeIndex=(this.currentNodeIndex+1)%this.activeNodes.length,this.animateToCurrentNode())},1e3)}teleportToNode(e){if(!this.sceneGraphRef||0===this.activeNodes.length||!this.sceneGraphRef.get(e))return;let t=eS(e,this.sceneGraphRef);t&&(k.zl.set(eE.Lb,!0),k.zl.set(eE.ye,t.x),k.zl.set(eE.hT,t.y))}animateToCurrentNode(){if(!this.sceneGraphRef||0===this.activeNodes.length)return;let e=this.activeNodes[this.currentNodeIndex%this.activeNodes.length];if(!e)return;let t=eS(e.nodeId,this.sceneGraphRef);t&&(k.zl.set(eE.lq,e.message),k.zl.set(eE.ye,t.x),k.zl.set(eE.hT,t.y))}onNoMoreNodes(){k.zl.set(eE.lq,eT())}stop(){null!==this.cycleIntervalId&&(clearInterval(this.cycleIntervalId),this.cycleIntervalId=null),this.activeNodes=[],this.currentNodeIndex=0,this.lastTransitionTime=0,k.zl.set(eE.ct,!1),k.zl.set(eE.Lb,!1),k.zl.set(eE.lq,"")}});var eN=n(500753),eA=n(590387),eL=n(237677),eM=n(523588),eO=n(720129);let eR=(0,a.memo)(function(e){return(0,s.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,"data-fpl-icon-size":"24L",children:(0,s.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",d:"M17.5 16a.5.5 0 0 1 .5.5V18h1.5a.5.5 0 0 1 0 1H18v1.5a.5.5 0 0 1-1 0V19h-1.5a.5.5 0 0 1 0-1H17v-1.5a.5.5 0 0 1 .5-.5M9.366 5.122c.565-1.496 2.718-1.496 3.283 0l.051.154 1.117 3.912 3.91 1.119c1.701.486 1.701 2.898 0 3.384l-3.91 1.118L12.7 18.72c-.486 1.702-2.898 1.702-3.384 0l-1.118-3.91-3.918-1.104c-1.704-.48-1.711-2.894-.01-3.385L8.198 9.19l1.119-3.913zm2.372.429c-.21-.735-1.251-.735-1.461 0l-1.27 4.446-4.46 1.286c-.734.212-.731 1.254.005 1.461L9.008 14l1.269 4.446c.196.69 1.125.732 1.413.13l.048-.13L13.008 14l4.444-1.27c.689-.198.732-1.125.13-1.414l-.13-.047-4.444-1.272zM17.5 3a2.5 2.5 0 1 1 0 5 2.5 2.5 0 0 1 0-5m0 1a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3"})})});var eP=n(736813),eD=n(120440),eF=n(883765);let ez=new Set;function eB({onPromptSelect:e,hasSelection:t,clientLifecycleId:n}){let i=function(){let e=new Date().getHours();return e>=5&&e<12?(0,U.t)("ai_assistant.empty_state.greeting.morning"):e>=12&&e<17?(0,U.t)("ai_assistant.empty_state.greeting.afternoon"):(0,U.t)("ai_assistant.empty_state.greeting.evening")}(),r=a.useMemo(()=>[{id:"start_new",icon:eN.k,title:(0,U.t)("ai_assistant.empty_state.blank.start_new.title"),description:(0,U.t)("ai_assistant.empty_state.blank.start_new.description"),prompts:[{pillText:(0,U.t)("ai_assistant.empty_state.blank.start_new.landing_page"),promptText:(0,U.t)("ai_assistant.empty_state.blank.start_new.landing_page_prompt")},{pillText:(0,U.t)("ai_assistant.empty_state.blank.start_new.details_card"),promptText:(0,U.t)("ai_assistant.empty_state.blank.start_new.details_card_prompt")}]},{id:"explore",icon:eA.h,title:(0,U.t)("ai_assistant.empty_state.blank.explore.title"),description:(0,U.t)("ai_assistant.empty_state.blank.explore.description"),prompts:[{pillText:(0,U.t)("ai_assistant.empty_state.blank.explore.layout_options"),promptText:(0,U.t)("ai_assistant.empty_state.blank.explore.layout_options_prompt")},{pillText:(0,U.t)("ai_assistant.empty_state.blank.explore.visual_styles"),promptText:(0,U.t)("ai_assistant.empty_state.blank.explore.visual_styles_prompt")}]},{id:"learn_figma",icon:eL.V,title:(0,U.t)("ai_assistant.empty_state.blank.learn_figma.title"),description:(0,U.t)("ai_assistant.empty_state.blank.learn_figma.description"),prompts:[{pillText:(0,U.t)("ai_assistant.empty_state.blank.learn_figma.feature_demo"),promptText:(0,U.t)("ai_assistant.empty_state.blank.learn_figma.feature_demo_prompt")},{pillText:(0,U.t)("ai_assistant.empty_state.blank.learn_figma.best_practices"),promptText:(0,U.t)("ai_assistant.empty_state.blank.learn_figma.best_practices_prompt")}]}],[]),l=a.useMemo(()=>[{id:"changes",icon:eM.J,title:(0,U.t)("ai_assistant.empty_state.selected.changes.title"),description:(0,U.t)("ai_assistant.empty_state.selected.changes.description"),prompts:[{pillText:(0,U.t)("ai_assistant.empty_state.selected.changes.dark_mode"),promptText:(0,U.t)("ai_assistant.empty_state.selected.changes.dark_mode_prompt")},{pillText:(0,U.t)("ai_assistant.empty_state.selected.changes.update_content"),promptText:(0,U.t)("ai_assistant.empty_state.selected.changes.update_content_prompt")}]},{id:"build",icon:eN.k,title:(0,U.t)("ai_assistant.empty_state.selected.build.title"),description:(0,U.t)("ai_assistant.empty_state.selected.build.description"),prompts:[{pillText:(0,U.t)("ai_assistant.empty_state.selected.build.next_screen"),promptText:(0,U.t)("ai_assistant.empty_state.selected.build.next_screen_prompt")},{pillText:(0,U.t)("ai_assistant.empty_state.selected.build.empty_state"),promptText:(0,U.t)("ai_assistant.empty_state.selected.build.empty_state_prompt")}]},{id:"explore",icon:eA.h,title:(0,U.t)("ai_assistant.empty_state.selected.explore.title"),description:(0,U.t)("ai_assistant.empty_state.selected.explore.description"),prompts:[{pillText:(0,U.t)("ai_assistant.empty_state.selected.explore.layout_variations"),promptText:(0,U.t)("ai_assistant.empty_state.selected.explore.layout_variations_prompt")},{pillText:(0,U.t)("ai_assistant.empty_state.selected.explore.style_variations"),promptText:(0,U.t)("ai_assistant.empty_state.selected.explore.style_variations_prompt")}]},{id:"feedback",icon:eO.f,title:(0,U.t)("ai_assistant.empty_state.selected.feedback.title"),description:(0,U.t)("ai_assistant.empty_state.selected.feedback.description"),prompts:[{pillText:(0,U.t)("ai_assistant.empty_state.selected.feedback.design_review"),promptText:(0,U.t)("ai_assistant.empty_state.selected.feedback.design_review_prompt")},{pillText:(0,U.t)("ai_assistant.empty_state.selected.feedback.edge_cases"),promptText:(0,U.t)("ai_assistant.empty_state.selected.feedback.edge_cases_prompt")}]}],[]),o=t?l:r;a.useEffect(()=>{ez.clear()},[n]);let[d,c]=a.useState(()=>o.length>0?o[0].id:null);a.useEffect(()=>{d&&!o.some(e=>e.id===d)&&c(o.length>0?o[0].id:null)},[d,o]);let u=e=>{c(e)},p=t=>{e(t)};return(0,s.jsxs)("div",{className:"x78zum5 xdt5ytf x6s0dn4 x1iyjqo2 xi4r6k5 x9f619 xh8yej3",children:[(0,s.jsxs)("div",{className:"x78zum5 xdt5ytf x6s0dn4 xl56j7k x1i71x30 xvwx85",children:[(0,s.jsx)("div",{className:"x78zum5 x6s0dn4 xl56j7k xcr9a89 x1d36bvo x1vi7shn xp6roeo x8rdmch xctkrei x1aue78i",children:(0,s.jsx)(eR,{})}),(0,s.jsxs)("div",{className:"x78zum5 xdt5ytf x6s0dn4 x2b8uid",children:[(0,s.jsx)("h2",{className:"xor4psk x1ncjjhx xaoa4km x2i041 x14terfx x1akne3o",children:i}),(0,s.jsx)("p",{className:"xuzfeq1 x8yk33q x1e00guj x18zpg43 x22v61l x1n0bwc9",children:(0,U.t)("ai_assistant.empty_state.subheading")})]})]}),(0,s.jsx)("div",{className:"x78zum5 xdt5ytf x1nfngrj xh8yej3",children:(0,s.jsx)("div",{className:"x78zum5 xdt5ytf x1yjdb4r xmkeg23 x1y0btm7 x7z60cl x1mxnbhz xb3r6kr",children:o.map((e,i)=>(0,s.jsx)(eG,{section:e,isExpanded:d===e.id,onToggle:()=>u(e.id),onPromptClick:p,isLast:i===o.length-1,clientLifecycleId:n,hasSelection:t,shownSectionsSet:ez},e.id))})})]})}function eG({section:e,isExpanded:t,onToggle:n,onPromptClick:i,isLast:r,clientLifecycleId:l,hasSelection:o,shownSectionsSet:d}){let c=e.icon,u=e.description,p=e.prompts,m=e.noLibrariesText;a.useEffect(()=>{if(t&&p&&p.length>0&&l){let t=`${e.id}-${o?"selected":"blank"}`;d.has(t)||(d.add(t),p.forEach((t,n)=>{eF.az.trackDefinedEvent("ai_assistant.empty_state_prompt_shown",{clientLifecycleId:l,sectionId:e.id,hasSelection:o,shortPrompt:t.pillText,fullPrompt:t.promptText,rank:n+1,totalPromptsShown:p.length})}))}},[t,p,l,e.id,o,d]);let h=a.useCallback((t,n)=>{l&&eF.az.trackDefinedEvent("ai_assistant.empty_state_prompt_chosen",{clientLifecycleId:l,sectionId:e.id,hasSelection:o,shortPrompt:t.pillText,fullPrompt:t.promptText,rank:n+1,totalPromptsShown:p?.length||0}),i(t.promptText)},[l,e.id,o,p?.length,i]);return(0,s.jsxs)("div",{...{0:{className:"x78zum5 xdt5ytf xso031l x1q0q8m5 xertd99"},1:{className:"x78zum5 xdt5ytf x1q0q8m5 xertd99 x1qhh985"}}[!!r<<0],children:[(0,s.jsxs)("button",{...{0:{className:"x78zum5 x6s0dn4 x1qughib xc7ga6q xc342km xh8yej3 xdpxx8g"},1:{className:"x78zum5 x6s0dn4 x1qughib xc7ga6q xc342km xh8yej3 xdpxx8g xp6roeo"}}[!!t<<0],onClick:n,type:"button","aria-expanded":t,children:[(0,s.jsxs)("div",{className:"x78zum5 x6s0dn4 x1nfngrj",children:[(0,s.jsx)(c,{}),(0,s.jsx)("span",{className:"xxrns5j x1q8tae1 x1vg90ec x1eab18d x1yyillh x1akne3o",children:e.title})]}),(0,s.jsx)("div",{...{0:{className:"x78zum5 x6s0dn4 xl56j7k x7p49u4 x11xpdln x13dflua x9lcvmn"},1:{className:"x78zum5 x6s0dn4 xl56j7k x11xpdln x13dflua x9lcvmn x1iffjtl"}}[!!t<<0],children:(0,s.jsx)(eP.k,{})})]}),t&&u&&(0,s.jsxs)("div",{className:"x78zum5 xdt5ytf x1nfngrj xexx8yu xsag5q8 xf18ygs xnuq7ks",children:[(0,s.jsx)("p",{className:"xrlp15q x1nmd3yn xm735u9 xkbmbem x3wk4up x1n0bwc9 xilkfi8",children:u}),m&&(0,s.jsx)("p",{className:"xrlp15q x1nmd3yn xm735u9 xkbmbem x3wk4up x1n0bwc9 xilkfi8",children:m}),p&&p.length>0&&(0,s.jsx)("div",{className:"x78zum5 x1a02dak x1nfngrj",children:p.map((e,t)=>(0,s.jsx)("button",{className:"x78zum5 x6s0dn4 xl56j7k x1gskr33 x1ihwiht x8rdmch xctkrei xmkeg23 x1y0btm7 x7z60cl x1mxnbhz xjbqb8w xv2f06h x1277o0a xts7igz xx6bhzk x9lcvmn",onClick:()=>h(e,t),type:"button",children:(0,s.jsx)("span",{className:"xrlp15q x1nmd3yn xm735u9 xkbmbem x3wk4up x1n0bwc9",children:e.pillText})},t))})]})]})}var eU=n(170627);n(899766),n(238540),n(5885),n(523625);var eV=n(567164),eH=n(598369);let eK=()=>k.zl.get(J.J)||0,eW={MAX_VARIANTS:3,REQUIRED_TARGET_SELECTION:1,DEFAULT_SELECTED_VARIANT_ID:"original",RANDOM_TRIGGER_VARIANT_COUNT:2};async function eq({config:e,variants:t,basePrompt:n,trackingContext:i,updateVariantStatus:s,abortControllers:a=[],toolCallId:r}){let l=t.map(async(t,l)=>{try{s({variantId:t.id,status:"running",toolCallId:r});let o=a[l]||new AbortController,d={...await (0,el.nR)({params:{config:e,userInput:{userPrompt:n},inferredContext:{selectedNodeIds:[t.nodeId]},trackingContext:i,aiTrackingContext:i,setThinkingState:()=>{}},abortController:o}),originalVariantNodeId:t.nodeId};return s({variantId:t.id,status:"completed",result:d,toolCallId:r}),{variant:t,result:d}}catch(e){return(0,B.x1)("VariantMakeEdits",`Error in variant ${t.id}`,{variantId:t.id,error:e}),s({variantId:t.id,status:"failed",error:e,toolCallId:r}),{variant:t,error:e}}});try{await Promise.allSettled(l)}catch(e){(0,B.x1)("VariantMakeEdits","Error in parallel variant execution",{error:e})}}async function eX({args:e,toolCallId:t,selectedNodeIdsForLLM:n,updateVariantStatus:i,resolveInteractiveTool:s,generateThumbnail:a,fileKey:r,toolTrackingContext:l,includeExtraContext:o,abortControllers:d,trackDefinedEvent:c,aiDataSharingEnabled:u}){let p=l.clientLifecycleId,m=l.persistentEntityId;try{let s=e.selectedLayerIds??n,h=l.randomlyTriggered??!1,f=h?eW.RANDOM_TRIGGER_VARIANT_COUNT:e.variants?Math.min(e.variants,eW.MAX_VARIANTS):0,g=null!=e.variants&&e.variants>1;c&&c("ai_assistant.multiple_outputs_triggered",{persistentEntityId:m,clientLifecycleId:p,variantCount:f,selectedNodeIds:s,assistantTriggered:g,randomizedTriggered:h,sequenceNumber:eK(),aiDataSharingEnabled:u??!1});let x=(0,C.getActiveTSSceneGraph)(),_=function(e,t){if(!t)return!1;let n=(0,C.getActiveTSSceneGraph)(),i=e[0];if(!i)return!1;let s=n.get(i);return!!s?.containingCanvas}(s,o),y=x.get(s[0]||"");if(!y)throw Error("Original node not found");let v=x.getInternalCanvas();if(!v)throw Error("Internal canvas not found");let b=Array.from({length:f},(e,t)=>{let n=null;if(eU.l7.ai("multiple-outputs-variant-duplication",()=>{(n=y.clone())&&v.appendChild({guid:n})}),!n)throw Error(`Failed to create variant ${t+1}`);let i=`option_${t+1}`;return eC.Cp.trackCreatedNode(p,n),{id:i,nodeId:n,status:"pending"}});if(el.IO){let e=new el.IO(y);eC.Cp.persistBackupManager(p,e)}let j=new Map;b.forEach(e=>{j.set(e.id,e.nodeId)}),eC.Cp.setVariantNodes(p,j);let w={originalNodeId:y.guid,variants:b,selectedVariantId:eW.DEFAULT_SELECTED_VARIANT_ID,isGenerating:!0,clientLifecycleId:p,..._?{originalSelectedNodeIds:s}:{}};if(eC.Cp.setWorkspace(p,w),m){let e=(0,eC.nw)(m);k.zl.set(e,e=>new Set([...e,p]))}if(r)try{await a("original",y.guid,r,void 0,p)}catch(e){(0,B.x1)("MultipleOutputs","Failed to generate thumbnail for original node",{error:e})}e.config.options.previewIncrementalEdits=!1,e.config.options.isMultipleOutputsRequest=!0,await eq({config:e.config,variants:b,basePrompt:e.instructions||"",trackingContext:{clientLifecycleId:l.clientLifecycleId,persistentEntityId:l.persistentEntityId,featureEntrypoint:l.featureEntrypoint},updateVariantStatus:i,abortControllers:d,toolCallId:t})}catch(e){(0,B.x1)("MultipleOutputs","Failed to start multiple outputs generation",{error:e}),s(t,{success:!1,error:e instanceof Error?e.message:"Unknown error during variant generation"})}}function eY(e,t,n,i,s){if(e===eW.DEFAULT_SELECTED_VARIANT_ID){let e=n.restoreFromBackup();n.updateActiveNode(e),eC.Cp.persistBackupManager(t.clientLifecycleId,n),s(t=>t?{...t,originalNodeId:e.guid}:null)}else{let a=t.variants.find(t=>t.id===e),r=(0,C.getActiveTSSceneGraph)(),l=null;if(t.originalSelectedNodeIds){let t=i.get(e);t&&(l=r.get(t))}else{let t=a?.result?.nodeId?r.get(a.result.nodeId):null;if(t&&"CANVAS"!==t.type)l=t;else{let t=i.get(e);t&&(l=r.get(t))}}l&&eU.l7.ai("variant-swap",()=>{let e=r.get(t.originalNodeId);if(e?.parentNode){let i=n.originalParent,a=r.get(l.clone());if(a&&i){!function(e,t,n){let i=e.childrenGuids.findIndex(e=>e===t.guid);e.insertChild(n,i),n.size=t.size,n.relativeTransform=t.relativeTransform,n.stackPositioning=t.stackPositioning,n.verticalConstraint=t.verticalConstraint,n.horizontalConstraint=t.horizontalConstraint}(i,e,a),e.removeSelfAndChildren();let l=r.getCurrentPage();l&&l.setSelectionToSingleNode(a.guid),n.updateActiveNode(a),eC.Cp.persistBackupManager(t.clientLifecycleId,n),s(e=>e?{...e,originalNodeId:a.guid}:null)}}})}}function eZ(e){let{messageId:t,textContent:n,renderState:i,editDesignToolCall:s,messageIndex:a,createOptionSelectionHandler:r,sentAt64:l}=e,o=i.hasUI,d=i.optionsState.isGenerating||i.optionsState.options.length>0;if(o){let e=s?.toolCallId||`fallback-${a}`,o=!d&&(void 0===s||s.isPending);return i.optionsState&&Array.isArray(i.optionsState.options)?{content:[{type:"plan",plan:n,title:"Plan",id:`${t}-plan-${a}`,sentAt64:l},{type:"multipleOptions",options:i.optionsState.options.map(e=>({id:e.id,status:e.status,isLoading:"pending"===e.status||"thumbnail-generating"===e.status,isDisabled:"completed"!==e.status,thumbnailUrl:e.thumbnailUrl,isOriginal:e.isOriginal,alt:e.isOriginal?(0,U.t)("ai_assistant.multiple_options.original_design"):(0,U.t)("ai_assistant.multiple_options.option_alt",{optionId:e.id})})),selectedId:i.selectedVariantId,onSelectionChange:r?.(e),id:`${t}-options-${a}`,sentAt64:l}],shouldStartGeneration:o,toolCallIdForGeneration:o?s?.toolCallId:void 0}:(console.error("[MultipleOutputs] Invalid optionsState:",i.optionsState),{content:n?[{type:"plan",plan:n,title:"Plan",id:`${t}-plan-${a}`,sentAt64:l}]:[],shouldStartGeneration:o,toolCallIdForGeneration:o?s?.toolCallId:void 0})}return s?.isPending?{content:[],shouldStartGeneration:!0,toolCallIdForGeneration:s.toolCallId}:n?{content:[{type:"plan",plan:n,title:"Plan",id:`${t}-plan-${a}`,sentAt64:l}],shouldStartGeneration:!1}:{content:[],shouldStartGeneration:!1}}function eJ(e,t,n,i){if(!n||!i)return;let{toolData:s}=function(e,t){if(!t)return{isPending:!1,toolData:null};let n=(0,eC.KP)(t),i=k.zl.get(n).get(e);return{isPending:!!i&&i.args?.variants>1,toolData:i}}(e,t);s&&n(s.args,e,s.trackingContext,i)}var eQ=n(681958);let e$="ai_assistant_frame_thread_mapping";function e0(){try{let e=localStorage.getItem(e$);return e?JSON.parse(e):{}}catch(e){return console.warn("Failed to read frame-to-thread mapping from localStorage:",e),{}}}var e1=n(956492),e2=n(955513),e3=n(833290),e5=n(266606),e4=n(285626),e6=n(211862),e7=n(288747),e8=n(584709),e9=n(564914),te=n(816610),tt=n(621971);async function tn({orgId:e,query:t,openFileKey:n,enabledLibraryKeys:i,toolTrackingContext:s}){return 0===i.size?[]:[...await ti({orgId:e,query:t,openFileKey:n,enabledLibraryKeys:i,toolTrackingContext:s}),...await ts({query:t,enabledLibraryKeys:i})]}async function ti({orgId:e,query:t,openFileKey:n,enabledLibraryKeys:i,toolTrackingContext:s}){return(await te.D.recommendComponents({source:"make_edits_components",org_id:e,query:t,open_file_key:n,subscribed_library_keys:Array.from(i),used_product_components:[],query_id:s.toolCallId,persistent_entity_id:s.persistentEntityId,client_lifecycle_id:s.clientLifecycleId,feature_entrypoint:s.featureEntrypoint})).data.meta.components}async function ts({query:e,enabledLibraryKeys:t}){let n=await tt.$W.getAssetsFromCommunityLibraries({query:e,assetTypes:(0,tt.in)([e9.PW.COMPONENT,e9.PW.STATE_GROUP]).join(",")}),{communitySearchResults:i}=(0,e8.lR)({results:n.data.meta.results,subscribedLibraryKeys:t,usedAssetKeys:new Set});return i}var ta=n(754446),tr=n(532153),tl=n(594532),to=n(945437);let td={container:{kVAEAm:"x10l6tqk",k87sOh:"x13vifvy",kbCHJM:"xu96u03",kCIrl2:"x3m8u43",kLqNvP:null,kt4wiu:null,krVfgx:"x1ey2m1c",k1xSpc:"x78zum5",kGNEyG:"x6s0dn4",kjj79g:"xl56j7k",kWkggS:"x1wedvq4",kaIpWk:"x19y5rnk",krdFHd:null,kfmiAY:null,kVL7Gh:null,kT0f0o:null,kIxVMA:null,ksF3WI:null,kqGeR4:null,kYm2EN:null,kfzvcC:"x47corl",kKVMdj:"x1s8il3r",k44tkh:"xmg6eyc",kyAemX:"xa3vuyk",kWV6AL:"x10e4vud",$$css:!0},icon:{kzqmXN:"xh8yej3",kZKoxP:"x5yr21d",ku685b:"xdrobes",$$css:!0}};function tc(){return(0,s.jsx)("div",{...eD.xk(td.container),children:(0,s.jsx)(to.T,{...eD.xk(td.icon)})})}var tu=n(913834),tp=n(461509),tm=n(266808),th=n(946209),tf=n(744912);async function tg(e){return{jsx:(await n.e(7726).then(n.bind(n,747726))).serializeJSX(e,{includeIDs:!0,excludeVectorData:!0,includeNames:!0,ignoreFetchingComponentData:!0,includeNodeTypes:["RECTANGLE","ROUNDED_RECTANGLE","TEXT","FRAME","GROUP","INSTANCE"],fieldGroups:[],strict:!1,includeInstanceSublayers:!0,ignoreDeveloperFriendlyIds:!0,focusNodeId:e.guid,maxSerializeNodes:500}).jsxStr}}async function tx(e){let t=await e.loadImagesAndExport([{imageType:"PNG",constraint:{type:"CONTENT_SCALE",value:1},contentsOnly:!0}]);if(0===t.length)throw Error("No image bytes exported for node: "+e.guid);return t}async function t_({node:e,imageBase64:t,imageName:n,functionalDependencies:i}){if(!e.isAlive)return;let{decodeImage:s}=i,a=(0,tp.u)(t),r=await s(a,"image/png",n);e.isAlive&&eU.l7.ai("replace-image",()=>{let t=(0,tf.R1)(e),n=[...e.fills];e.insertImageInFillPaint(r);let i=e.fills[n.length];if(!i)throw new th.nK("Failed to get new image fill after replacing image");t&&(i.imageScaleMode=t.imageScaleMode)})}var ty=n(490005),tv=n(323187);async function tb({scenegraph:e,imageNode:t,functionalDependencies:n,additionalContext:i,abortController:s,trackingContext:a}){if(s?.signal.aborted)return;let r=(0,tv.g)(),{serverEndpoint:l,addOverlayToNode:o,removeOverlayToNode:d,reportError:c,trackImageFromContextEvent:u}=n,{clientLifecycleId:p,persistentEntityId:m}=a;u("start",{...a,clientGeneratedRequestUuid:r});let h=Date.now();o(t);try{let o=t.findContainingTopLevelFrameOrSelf(),d=e.get(o)??t;if(!d)throw new th._M("Top level frame or node not found");let{jsx:c}=await tg(d),f=new C.TSSceneGraph(tm.juq.AI_TOOLS);tu.MRD?.getOrCreateTemporaryScene();let g=tu.MRD?.copyNodeToTemporaryScene(d.guid),x=f.get(g??null);if(!x)throw new th._M("Top level frame not found in temporary scene");let{activeToTemporaryGuidsMap:_}=function(e,t){let n=new Map,i=new Map,s=[],a=[];if(!e||!t)return{activeToTemporaryGuidsMap:n,temporaryToActiveGuidsMap:i};if((0,eQ.hV)(e,e=>{s.push(e.guid)}),(0,eQ.hV)(t,e=>{a.push(e.guid)}),s.length!==a.length)throw Error("Cannot create temporary scene guid map because active and temporary guid arrays have different lengths");return s.forEach((e,t)=>{let s=a[t];s&&(n.set(e,s),i.set(s,e))}),{activeToTemporaryGuidsMap:n,temporaryToActiveGuidsMap:i}}(d,x),y=f.get(_.get(t.guid)??null);if(!y)throw new th._M("Image node not found in temporary scene");!function(e){if(e.fills){let t=e.fills.map(e=>"IMAGE"===e.type?{...e,visible:!1}:e);e.fills=t}}(y),function(e,t=3){let n=e.strokePaints?.data||[];e.strokePaints={data:[...n,{type:"SOLID",color:{r:1,g:0,b:0,a:1},visible:!0,opacity:1}],blobs:[]},e.strokeAlign="OUTSIDE",e.strokeWeight=t}(y);let v=await tx(x),b=(0,tp.K)(v),j=await l({request:{requests:[{width:t.size.x,height:t.size.y,imageNodeId:t.guid,jsx:c,imageScreenshot:b,userPrompt:i?.userPrompt}]},clientLifecycleId:p,clientGeneratedRequestUuid:r,persistentEntityId:m});if(!j||!j.responses||!j.responses[0]?.image)throw new th.lU("Replace image response is empty");let{image:k,imagePrompt:w,metrics:E}=j.responses[0],{llmRequestMs:T,imageRequestMs:S}=E;if(s?.signal.aborted){u("end",{...a,clientGeneratedRequestUuid:r,totalDurationMs:Date.now()-h,completionStatus:"canceled"});return}return await t_({node:t,imageBase64:k,imageName:w,functionalDependencies:n}),u("end",{...a,clientGeneratedRequestUuid:r,totalDurationMs:Date.now()-h,llmPromptStepDurationMs:T,imageGenerationStepDurationMs:S,completionStatus:"success"}),j}catch(e){throw console.error("Error running replace image",e),("reportToSentry"in e&&e.reportToSentry||e instanceof ty.G&&(!e.statusCode||e.statusCode>=500)||e instanceof x.G1&&(!e.data.statusCode||e.data.statusCode>=500))&&c(e),u("end",{...a,clientGeneratedRequestUuid:r,totalDurationMs:Date.now()-h,errorMessage:e.message,completionStatus:"error"}),e}finally{d(t)}}async function tC(e){let t=await tb(e);if(t)return{responses:t.responses.map(e=>({imageNodeId:e.imageNodeId,imagePrompt:e.imagePrompt}))}}!function(e){e.MAKE_EDITS="MAKE_EDITS",e.ASSISTANT_TOOL_CALL="ASSISTANT_TOOL_CALL"}(i||(i={}));var tj=n(20267),tk=n(260495);function tw(e,t){"start"===e?eF.az.trackDefinedEvent("expressive_ai.image_from_context_started",t):"end"===e?eF.az.trackDefinedEvent("expressive_ai.image_from_context_ended",t):console.warn("Unhandled event type:",e)}var tE=n(997629),tT=n(80341),tS=n(162738),tI=n(132672);let tN=(0,a.memo)(function(e){return(0,s.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,"data-fpl-icon-size":"24",children:(0,s.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",d:"M11.5 6a5.5 5.5 0 0 1 4.203 9.045.5.5 0 0 1 .15.101l3 3a.5.5 0 1 1-.707.707l-3-3a.5.5 0 0 1-.101-.15A5.5 5.5 0 1 1 11.5 6m0 1a4.5 4.5 0 1 0 0 9 4.5 4.5 0 0 0 0-9m-.485 2.44c.126-.505.844-.505.97 0l.315 1.26 1.26.315c.505.126.505.844 0 .97l-1.26.315-.315 1.26c-.126.505-.844.505-.97 0L10.7 12.3l-1.26-.315c-.505-.126-.505-.844 0-.97l1.26-.315z"})})});function tA(){return(0,s.jsx)("div",{...eD.xk(td.container),children:(0,s.jsx)(tN,{...eD.xk(td.icon)})})}let tL=(0,k.eU)(null);function tM(e){k.zl.set(tL,e)}let tO="scenegraph-fallback",tR=new Map;function tP({makeNodeGuid:e}){let t=(0,C.getActiveTSSceneGraph)().get(e);if(!t)return null;let n=(0,eb.hh)(t),i=n?.guid||e;return(0,s.jsx)(eg.H,{codeInstanceNode:t,codeInstanceNodeGuid:e,entryPointCodeFile:n,entryPointCodeFileGuid:i,featureType:o.lV.FIGMAKE_IN_DESIGN,forceReadOnly:!1,hideChatBox:!1,isResizingPanel:!1,newCodeLayerState:null,previewState:ex.Oy.EMPTY,setCodeInstanceNode:P.lQ,setEntryPointCodeFile:P.lQ})}function tD(e){return(0,s.jsx)(F.u,{label:"DesignLeftPanelAssistant",children:(0,s.jsx)(tF,{...e})})}function tF(e){let t=function(){let e=(0,K.uQ)(),t=(0,K.NM)();return a.useMemo(()=>{if(!e||(t?.length??0)>1)return null;let n=(0,C.getActiveTSSceneGraph)().get(e);return n&&(n.isCodeFile||n.isCodeComponent||n.isCodeInstance||n.isCodeLibrary)?n.guid:null},[e,t])}();return t&&(0,j.kc)().assistant_threading_prototype?(0,s.jsx)(tP,{makeNodeGuid:t}):(0,s.jsx)(tz,{...e})}function tz({assistantOptionOverrides:e}){let t=(0,j.kc)().ai_assistant_stop_button??!1,n=(0,j.kc)().ai_assistant_blobstore??!1,p=(0,et.iZ)(),m=(0,ee.Td)(),E=(0,q.lg)(),S=(0,O.hC)(),F=(0,K.uQ)(),eo=(0,K.NM)(),ed=(0,ea.Tv)(),ec=(0,k.md)(eC.pF),eu=(0,k.md)(Y.eb),ep=(0,k.md)(eC.yq),em=(0,k.md)(eC.UK),eg=(0,ei.Vc)(m),ex=(0,en.S2)(),{Sprig:eb}=(0,G.A)(),eE=a.useMemo(()=>e?I()(T()(em),e):em,[em,e]),eT=(0,r.wA)(),[eS,eN]=a.useState(!1),{pendingInteractiveTools:eA,showInteractiveTool:eL,showAutoResolvingTool:eM,resolveInteractiveTool:eO}=(0,e1.RG)(),{generateThumbnail:eR}=function(){let e=a.useRef(new Set),t=a.useCallback((e,t,n)=>{if(!n)return;let i=(0,eC.Og)(n);k.zl.set(i,n=>{let i=new Map(n),s={...i.get(e)||{isGenerating:!1},...t};return i.set(e,s),i})},[]);return{generateThumbnail:a.useCallback(async(n,i,s,a,r)=>{let l=(0,C.getActiveTSSceneGraph)(),o=l.get(i),d=i;if(!o){t(n,{isGenerating:!1,error:Error(`Node ${i} not found in scene graph`)},r);return}if(a&&a.has(n)){let e=a.get(n),t=l.get(e);t&&(o=t,d=e)}let c=o;c.visible||(c.visible=!0);let u=`${n}-${i}`;if(!e.current.has(u)){e.current.add(u);try{t(n,{isGenerating:!0,error:void 0},r);let e=new Promise((e,t)=>{(0,ek.WN)(d,!0,s,ew.WIDTH,ew.HEIGHT,{onSuccess:({dataUrl:t,metadata:n})=>{e(t)},onFailure:({reason:e,guid:n,fileKey:i})=>{t(Error(e))}},ew.MAX_SCALE,{type:ew.TYPE,clearColor:ew.CLEAR_COLOR,padding:ew.PADDING})}),i=new Promise((e,t)=>{setTimeout(()=>t(Error("Thumbnail generation timeout")),ew.TIMEOUT_MS)}),a=await Promise.race([e,i]);t(n,{thumbnailUrl:a,isGenerating:!1,error:void 0},r)}catch(i){let e=i instanceof Error?i:Error("Unknown thumbnail error");t(n,{isGenerating:!1,error:e},r),console.warn(`Failed to generate thumbnail for variant ${n}:`,e)}finally{e.current.delete(u)}}},[t])}}(),{updateVariantStatus:eP,cleanupVariantWorkspaceAndAtoms:eD}={updateVariantStatus:a.useCallback(({variantId:e,status:t,trackDefinedEvent:n,persistentEntityId:i,result:s,error:a,resolveInteractiveTool:r,toolCallId:l})=>{var o,d;let c=(0,eC.Au)(i,e);if(!c){console.warn(`Could not find clientLifecycleId for variant ${e}`);return}let u=eC.Cp.getWorkspace(c);if(!u)return;let p={...u,variants:u.variants.map(n=>n.id===e?{...n,status:t,result:s,error:a}:n),isGenerating:u.variants.some(n=>n.id===e?"running"===t:"running"===n.status)};if("completed"===t&&s?.originalVariantNodeId&&(eC.Cp.trackCreatedNode(c,s.originalVariantNodeId),eC.Cp.setResultNode(c,e,s.originalVariantNodeId)),"completed"===t){let t=function(e,t){if(t.selectedVariantId!==eW.DEFAULT_SELECTED_VARIANT_ID)return null;let n={...t,selectedVariantId:e},i=eC.Cp.getBackupManager(t.clientLifecycleId),s=eC.Cp.getVariantNodes(t.clientLifecycleId);return i?i&&s&&s.size>0&&eY(e,n,i,s,e=>{let t=e(n);t&&(n.originalNodeId=t.originalNodeId)}):console.warn("[MultipleOutputs] Failed to restore BackupManager - auto-selection will fail"),n}(e,p);t&&(p=t)}if(o=p,d=u.isGenerating,o.variants.every(e=>"completed"===e.status||"failed"===e.status)&&d&&r&&l&&((0,eC.VB)([]),r(l,{success:!0,autoResolved:!0,message:"Multiple design variants generated successfully"}),1)&&(p.isGenerating=!1),eC.Cp.updateWorkspace(c,()=>p),"completed"===t&&s?.originalVariantNodeId&&m&&eR(e,s.originalVariantNodeId,m,void 0,c),"completed"===t||"failed"===t){let s=p.variants.findIndex(t=>t.id===e),a=-1!==s?p.variants[s]:null;a&&n("ai_assistant.multiple_outputs_options_shown",{persistentEntityId:i,clientLifecycleId:c,optionId:s+1,selectedNodeIds:u.originalSelectedNodeIds||[u.originalNodeId],generatedNodeId:a.nodeId,generationStatus:t,sequenceNumber:k.zl.get(J.J)||0})}let h=eC.Cp.getWorkspace(c),f=h?.variants.filter(e=>"completed"===e.status)||[];"completed"===t&&0===f.length&&n("ai_assistant.multiple_outputs_option_selected",{persistentEntityId:i,clientLifecycleId:c,optionId:0,selectedNodeIds:u.originalSelectedNodeIds||[u.originalNodeId],generatedNodeId:u.originalNodeId,sequenceNumber:k.zl.get(J.J)||0})},[eR,m]),cleanupVariantWorkspaceAndAtoms:a.useCallback(e=>{!function(e){let t=(0,eC.nw)(e),n=k.zl.get(t);n.forEach(e=>{!function(e){let t=eC.Cp.getTrackedNodes(e);if(0===t.size)return;let n=(0,C.getActiveTSSceneGraph)();n.getInternalCanvas()&&eU.l7.ai("safe-variant-cleanup",()=>{let e=[];t.forEach(t=>{let i=n.get(t);if(i){if("CANVAS"===i.type){e.push(`CANVAS node: ${t}`);return}i.removeSelfAndChildren()}})})}(e)}),n.forEach(e=>{eC.Cp.cleanup(e)}),k.zl.set(t,new Set)}(e)},[])},eF=a.useMemo(()=>{if(F)return[F];if(eo&&eo.length>0)return eo;let e=(0,C.getActiveTSSceneGraph)().getCurrentPage();return ec.options.includeExtraContext&&e?[e.guid]:[]},[F,eo,ec]),[ez,eG]=a.useState(new Map),[eq,e8]=(0,k.fp)(eC.qA),[e9,te]=(0,k.fp)(tL),[tt,ti]=(0,k.fp)(eC.hM),ts=(0,k.md)(eC.G1),to=(0,k.Xr)(eC.G1),{appendPersistedMessagesForCurrentThread:td,setPersistedMessagesForCurrentThread:tu,getPersistedMessagesForCurrentThread:tp}=function(e){let[t,n]=a.useState(new Map),i=a.useCallback(()=>e?t.get(e)??[]:[],[e,t]),s=a.useCallback(t=>{e&&n(n=>{let i=new Map(n);return i.set(e,t),i})},[e]);return{appendPersistedMessagesForCurrentThread:a.useCallback(t=>{e&&n(n=>{let i=new Map(n),s=i.get(e)??[];return i.set(e,[...s,...t]),i})},[e]),setPersistedMessagesForCurrentThread:s,getPersistedMessagesForCurrentThread:i}}(ts),tm=a.useCallback(()=>ts?ez.get(ts)??[]:[],[ts,ez]),tf=a.useCallback(e=>{ts&&eG(t=>{let n=new Map(t);return n.set(ts,e),n})},[ts]),{threadId:tg,setThreadId:tx,isLoadingThreadId:t_}=(0,L.dJ)(m,tm().length,tu,tp,"idle"!==eq),ty=a.useRef(""),tv=tg||tO,tb=a.useCallback(e=>{k.zl.set((0,e_.mC)(tv),e)},[tv]),tN=eg.unwrapOr(null),tM=tm().length>0,tP=(0,eC.xs)().length>0,tD=tM||t_||tP||"loaded"!==eg.status||!tN,tF=t&&tP,tz=tN?.aiDataSharingEnabled?.status===R.tT.Loaded&&(tN.aiDataSharingEnabled.data??!1),{startMultipleOutputsGenerationCallback:tB,createOptionSelectionHandlerCallback:tG}=function({selectedNodeIdsForLLM:e,updateVariantStatus:t,resolveInteractiveTool:n,generateThumbnail:i,fileKey:s,includeExtraContext:r,persistentEntityId:l,trackDefinedEvent:o,aiDataSharingEnabled:d}){let c=a.useCallback(({variantId:e,status:i,result:s,error:a,toolCallId:r})=>t({variantId:e,status:i,trackDefinedEvent:o,persistentEntityId:l,result:s,error:a,resolveInteractiveTool:n,toolCallId:r}),[t,o,l,n]);return{startMultipleOutputsGenerationCallback:a.useCallback((t,a,l,u)=>{let p=Array(t.variants?Math.min(t.variants,eW.MAX_VARIANTS):0).fill(null).map(()=>new AbortController),m=k.zl.get((0,e_.Z3)(u));return m&&m.signal.addEventListener("abort",()=>{p.forEach(e=>{e.signal.aborted||e.abort()}),n(a,{success:!1})}),eX({args:t,toolCallId:a,selectedNodeIdsForLLM:e,updateVariantStatus:c,resolveInteractiveTool:n,generateThumbnail:i,fileKey:s,toolTrackingContext:l,includeExtraContext:r,abortControllers:p,trackDefinedEvent:o,aiDataSharingEnabled:d})},[e,c,n,i,s,r,o,d]),createOptionSelectionHandlerCallback:a.useCallback(e=>t=>new Promise((i,s)=>{try{let n=null,s=null;if(e&&l){let t=(0,eC.nw)(l),i=k.zl.get(t);for(let t of i){let i=(0,eC.KP)(t);if(k.zl.get(i).has(e)){s=t,n=eC.Cp.getWorkspace(s);break}}if(!s&&!n)for(let e of i){let t=eC.Cp.getWorkspace(e);if(t){s=e,n=t;break}}}if(!n||!s){(0,B.x1)("MultipleOutputs","Could not find workspace or clientLifecycleId:",{hasWorkspace:!!n,hasClientLifecycleId:!!s,toolCallId:e});return}let a={...n,selectedVariantId:t};eC.Cp.setWorkspace(s,a);let r=n.variants.findIndex(e=>e.id===t),d=-1!==r?n.variants[r]:null,c="original"===t?0:r+1;o("ai_assistant.multiple_outputs_option_selected",{persistentEntityId:l,clientLifecycleId:s,optionId:c,selectedNodeIds:n.originalSelectedNodeIds||[n.originalNodeId],generatedNodeId:"original"===t?n.originalNodeId:d?.nodeId,toolCallId:e,toolName:"edit_design",sequenceNumber:eK()});let u=eC.Cp.getBackupManager(s),p=eC.Cp.getVariantNodes(s);u||(0,B.x1)("MultipleOutputs","Failed to restore BackupManager from atoms - option selection will fail"),p&&0!==p.size||(0,B.x1)("MultipleOutputs","No variant nodes found in atoms - option selection may fail"),eY(t,a,u,p,e=>{let t=e(a);if(t&&s){let e={...a,originalNodeId:t.originalNodeId};eC.Cp.setWorkspace(s,e)}}),i()}catch(t){(0,B.x1)("MultipleOutputs","Error during option selection:",{error:t}),n(e,{success:!1,error:t instanceof Error?t.message:"Unknown error during option selection"}),s(t)}}),[l,o,n])}}({selectedNodeIdsForLLM:eF,updateVariantStatus:eP,resolveInteractiveTool:eO,generateThumbnail:eR,fileKey:m,includeExtraContext:ec.options.includeExtraContext??!1,persistentEntityId:tg??"",trackDefinedEvent:S,aiDataSharingEnabled:tz}),tU=function({fileKey:e,plan:t,threadId:n,setThreadId:i,newChatTrigger:s,setNewChatTrigger:r,trackDefinedEvent:l}){return a.useCallback(async()=>{let a="pendingCreation"===s;if(null!=n&&!a)return n;if(!e)throw new M.fC("No file key for creating thread");if(!t)throw new M.fC("No plan metadata for creating thread");let o=await (0,A.q)({context:"ai_assistant",fileKey:e,plan:t});if("error"===o.status)throw new M.fC(`Failed to create AiChatThread: ${o.error}`);let{status:d,threadId:c}=o;return"created"===d&&((0,M.pF)("AiChatThread created",{newThreadId:c}),l("ai_assistant.new_chat_created",{}),i(c),r("idle")),c},[e,n,s,i,r,t,l])}({fileKey:m,plan:tN,threadId:tg,setThreadId:tx,newChatTrigger:eq,setNewChatTrigger:e8,trackDefinedEvent:S}),{maybeAddTopKStylesToInternalCanvas:tV}=(0,V.S9)({enabled:ec.options.enableStyles??!1,k:ec.options.subscribedStyleCountPerType}),{maybeAddTopKVariablesToInternalCanvas:tH}=(0,H.p)({enabled:ec.options.enableVariables??!1,k:ec.options.subscribedVariableCountPerType}),{executeSearchClientSide:tK}=function({topK:e=3}){let t=(0,e7.dq)(),n=(0,e6.tS)(),i=(0,r.wA)(),{enabledLibraryKeys:s}=(0,e5.s)(),l=a.useCallback(t=>Promise.all(t.slice(0,e).map(e=>i((0,e4.YF)(e)))),[e,i]),o=a.useCallback(async(e,i)=>l(await tn({orgId:t,query:e.query,openFileKey:n,enabledLibraryKeys:s,toolTrackingContext:i})).then(t=>({query:e.query,rankedComponentGuids:t})),[l,t,s,n]);return a.useMemo(()=>({executeSearchClientSide:o}),[o])}({topK:eE.globalOptions.componentSearchMaxResults}),{executeReplaceImageClientSide:tW}=function(){let e=(0,C.getActiveTSSceneGraph)(),t=(0,K.uQ)(),n=a.useCallback(async(n,a,r,l)=>{let o=n?.imageNodeGuid??t,d=e.get(o),c=n?.userPrompt;return d?await tC({scenegraph:e,imageNode:d,functionalDependencies:{serverEndpoint:e=>{let{request:t,clientLifecycleId:n,clientGeneratedRequestUuid:i,persistentEntityId:s}=e;return X.Ay.shared.replaceImage(t,{...(0,tj.Ay)(),clientLifecycleId:n,clientGeneratedRequestUuid:i,persistentEntityId:s})},decodeImage:tk.UD,addOverlayToNode:e=>(0,eH.Vm)(e.guid,(0,s.jsx)(eV.A,{})),removeOverlayToNode:e=>(0,eH.ks)(e.guid),reportError:e=>(0,z.$D)(b.e.EXPRESSIVE_AI,e),trackImageFromContextEvent:tw},trackingContext:{source:i.ASSISTANT_TOOL_CALL,clientLifecycleId:r,persistentEntityId:l},additionalContext:{userPrompt:c},abortController:a})??{responses:[]}:((0,z.$D)(b.e.AI_ASSISTANT,new th._M("Image node not found for replace image tool from Assistant")),{responses:[]})},[e,t]);return a.useMemo(()=>({executeReplaceImageClientSide:n}),[n])}(),{executeSerializeNodesClientSide:tq}=function({serializerOptions:e,clientLifecycleId:t}){let n=a.useCallback(async n=>{let i=D.J.startUserFlow({name:"use_serialize_nodes__tool",team:b.e.AI_GENERATION,trackFps:!0}),a=(0,j.kc)().jsx_tracking?(0,f.DN)("use_serialize_nodes__tool",i,{clientLifecycleId:t}):void 0;try{let t=(0,C.getActiveTSSceneGraph)();if(!t)throw Error("No active scene graph");return await (0,g.YC)(n,{sceneGraph:t,serializerOptions:{...e,jsxTrackingContext:a},onNodesFocused:e=>{if((0,j.kc)().assistant_cursor_ui){let n=k.zl.get(eI),i=e.map(e=>{let n=t.get(e);return n?(0,U.t)("ai_assistant.cursor.status.looking_at_node",{nodeName:n.name||"node"}):(0,U.t)("ai_assistant.cursor.status.looking")});n.addNodes(e,t,i)}},onNodesUnfocused:e=>{(0,j.kc)().assistant_cursor_ui?k.zl.get(eI).removeNodes(e):e.forEach(e=>(function(e,t=1500){let n=`ai-search-${e}-${Date.now()}`;(0,eH.Vm)(e,(0,s.jsx)(tA,{}),{overlayId:n}),setTimeout(()=>{(0,eH.ks)(e,n)},t)})(e))}})}catch(e){throw(0,B.x1)("Failed to serialize nodes:",e),e}finally{i.end()}},[e,t]);return a.useMemo(()=>({executeSerializeNodesClientSide:n}),[n])}({serializerOptions:(0,f.DP)(eE.globalOptions),clientLifecycleId:eE.trackingContext?.clientLifecycleId}),{executeRenderNodeClientSide:tX}=function(){let e=a.useCallback(async e=>{try{let t=(0,C.getActiveTSSceneGraph)();if(!t)throw Error("No active scene graph");return await (0,g.VO)(e,{sceneGraph:t,renderImageDataEmbeddedUrl:tl.vr,onNodesRendering:e=>{if((0,j.kc)().assistant_cursor_ui){let n=k.zl.get(eI),i=e.map(e=>{let n=t.get(e);return(0,U.t)("ai_assistant.cursor.status.looking_at_node",{nodeName:n?.name||"node"})});n.addNodes(e,t,i)}},onNodesRendered:e=>{(0,j.kc)().assistant_cursor_ui?k.zl.get(eI).removeNodes(e):e.forEach(e=>(function(e,t=1500){let n=`ai-image-${e}-${Date.now()}`;(0,eH.Vm)(e,(0,s.jsx)(tc,{}),{overlayId:n}),setTimeout(()=>{(0,eH.ks)(e,n)},t)})(e))}})}catch(e){throw(0,B.x1)("Failed to render node(s):",e),e}},[]);return a.useMemo(()=>({executeRenderNodeClientSide:e}),[e])}(),{executeExportAssetsClientSide:tY}=function(){let e=(0,ta.Gt)("assets");return{executeExportAssetsClientSide:a.useCallback(t=>{if(!e)return{error:"No assets in current selection"};let n={},i=!1,s=t.assetTypes||g.IG;if(s.forEach(t=>{switch(t){case"ASSET_ICON":e.icons&&Object.keys(e.icons).length>0&&(n[t]=Object.keys(e.icons).length,i=!0);break;case"ASSET_ILLUSTRATION":e.illustrations&&Object.keys(e.illustrations).length>0&&(n[t]=Object.keys(e.illustrations).length,i=!0);break;case"ASSET_IMAGE":e.images&&Object.keys(e.images).length>0&&(n[t]=Object.keys(e.images).length,i=!0);break;case"ASSET_GIF":e.gifs&&Object.keys(e.gifs).length>0&&(n[t]=Object.keys(e.gifs).length,i=!0)}},[]),!i)return{error:"No assets in current selection"};let a=(0,tr.Y)({nodeId:t.layerId,assetTypes:s});return{numberOfAssetsFound:n,message:`To show the user an asset export dialog, reply with: ${a}`}},[e])}}(),{executeSearchCurrentDesignFileClientSide:tZ}=function({serializerOptions:e}){let t=(0,tI.iW)(),n=a.useMemo(()=>({searchLayerNames:!0,searchAnnotationTextContent:t,matchCase:!1,wholeWords:!1}),[t]),i=a.useCallback(async({query:t,page:i})=>{i||(i=0);let s=(0,C.getActiveTSSceneGraph)();if(!s)throw Error("No active scene graph");let a=s.getCurrentPage()?.guid;if(!a)throw Error("No active scene graph page");let{resultsByPage:r}=await tS.H1.search(t,n),l=r[a]||[],o=20*i,d=l.slice(o,o+20).map(async t=>{let n=s.get(t.guid);if(!n)return;let i=await (0,tE.oy)(n,{...e,maxSerializeNodes:1,excludeVectorData:!0,focusNodeId:t.guid}),a=i.incompleteNodeIds||[];return{id:t.guid,parentId:n.parentGuid,jsxPreview:i.jsxStr,isPreviewTruncated:a.length>0}});return{searchResults:(await Promise.all(d)).filter(tT.t),page:i,numberOfPagesAvailable:Math.min(Math.ceil(l.length/20),10)}},[n,e]);return a.useMemo(()=>({executeSearchCurrentDesignFileClientSide:i}),[i])}({serializerOptions:(0,f.DP)(eE.globalOptions)}),tJ=a.useCallback(async({userInput:e,clientLifecycleId:t},i)=>{tg&&eD(tg);let s=eF;if("canvas"===i&&e.selectedNodeIds&&e.selectedNodeIds.length&&(s=e.selectedNodeIds),!m){console.warn("No file key found");return}let a=await tU();if(!a)throw Error("Missing exchange thread ID");let r={fileKey:m,threadId:a,startFileSeqNum:String(k.zl.get(J.J)??0)};tb(""),tf([]);let p=new AbortController;k.zl.set((0,e_.Z3)(a??tO),p);let f=e.selectedNodeIds??s;(0,eC.VB)(f);let w=Q.Y5.getViewportInfo(),T=(0,$.qc)(w),I=(0,C.getActiveTSSceneGraph)(),A=await (0,u.J)({plainText:e.plainText,clientLifecycleId:t,context:{selectedNodeIds:e.selectedNodeIds,viewport:T},sceneGraph:I,globalOptions:eE.globalOptions}),L="ai_assistant",M={clientLifecycleId:t,persistentEntityId:a,featureEntrypoint:i};p.signal.addEventListener("abort",()=>{S("ai_assistant.aborted_request",{...M,reason:(0,y.xr)(p.signal.reason)})});let O=eE.globalOptions.multipleOutputs?g.JN:g.Ns,F=(0,N.x)(a,m),G=new h({configurationKey:eE.configurationKey,globalOptions:eE.globalOptions,serverOptionDebugOverrides:eE.serverOptionDebugOverrides,serverOverridesOpaqueKey:eE.serverOverridesOpaqueKey,trackingContext:M,tools:{[g.It.name]:(0,c.E7)({toolInterface:g.It,executeClientSide:(e,t)=>eL(e,t,"select_layers")}),[g.t9.name]:(0,c.E7)({toolInterface:g.t9,executeClientSide:tq}),[g.U_.name]:(0,c.E7)({toolInterface:g.U_,executeClientSide:tX}),[O.name]:(0,c.E7)({toolInterface:O,executeClientSide:async(e,n)=>{let i=e.selectedLayerIds?e.selectedLayerIds:s,r=(0,C.getActiveTSSceneGraph)(),l=r&&(0,_.nN)(r,i.map(e=>r.get(e)).filter(e=>null!==e));ec.options.allowMissingFonts&&l&&await eL({...e,missingFontsInfo:{hasMissingFonts:l}},n,"edit_design");let d={},c={selectedNodeIds:i,viewport:(0,$.qc)(Q.Y5.getViewportInfo()),searchResultComponentGuids:e.searchResultComponentGuids},u=await eh(eu,ep,d,c);u.options.jsxSerializerOverrides.editorType??=(0,es.y9)(E)??void 0;let h=ex.unwrapOr(null),f=h?.aiDataSharingEnabled?.status===R.tT.Loaded&&(h.aiDataSharingEnabled.data??!1),g=function({targetSelection:e,makeEditsOptions:t,selectedModelConfiguration:n,aiDataSharingEnabled:i}){if(e.length!==eW.REQUIRED_TARGET_SELECTION)return 0;let s=t.multipleOutputsRandomProbability;return void 0!==s&&!(s<=0)&&n.tags?.includes("1P")&&(i||(0,j.kc)().ai_assistant_multiple_options_no_data_share_check)&&Math.random()<=s?eW.RANDOM_TRIGGER_VARIANT_COUNT:0}({targetSelection:i,makeEditsOptions:u.options,selectedModelConfiguration:ep,aiDataSharingEnabled:f}),x=g>0?{...e,variants:g}:e,y=g>0?{...n,randomlyTriggered:!0}:n;if(function({args:e,targetSelection:t}){let n=e.variants&&e.variants>1,i=t.length===eW.REQUIRED_TARGET_SELECTION;return!!(n&&i)}({args:{...x,config:u},targetSelection:i}))return eM({...x,config:u},y,"edit_design");try{if((0,j.kc)().assistant_cursor_ui){let e=k.zl.get(eI);r&&e.addNodes(i,r,(0,U.t)("ai_assistant.cursor.status.making_edits"))}let s=await (0,el.nR)({params:{config:u,userInput:{userPrompt:e.instructions??""},inferredContext:c,contextPromise:void 0,setThinkingState:P.lQ,aiTrackingContext:{action:er.JT.MAKE_EDITS,source:o.lV.AI_ASSISTANT,quick_actions_session_id:"invalid",file_key:m,product_type:E,...n},trackingContext:n,debugContext:d},abortController:p});return(0,j.kc)().assistant_cursor_ui&&k.zl.get(eI).removeNodes(i),(0,j.kc)().ai_assistant_force_savepoints&&eT(W.Y({fileKey:m,clientLifecycleId:t,persistentEntityId:a})),{image:s.image,imageCaption:"This is what the layer looks like now with the edits applied:",message:s.message||void 0}}catch(e){if(e instanceof v.C){let t=Error(e.payload.friendlyErrorMessage);throw t.stack=e.stack,t}throw e}}}),[g.tE.name]:(0,c.E7)({toolInterface:g.tE,executeClientSide:tK}),[g.vb.name]:(0,c.E7)({toolInterface:g.vb,executeClientSide:async e=>await tW(e,p,t,a)}),[g.fm.name]:(0,c.E7)({toolInterface:g.fm,executeClientSide:async e=>await tY(e)}),[g.LA.name]:(0,c.E7)({toolInterface:g.LA,executeClientSide:tZ})},clientDependencies:{streamResponse:e=>X.Ay.shared.aiAssistantChat(e,{...(0,Z.sF)({clientLifecycleId:t}),persistentEntityId:a},{abortSignal:p.signal})},clientCallbacks:{trackEvent:e=>{let t={[d.LP.MESSAGE_SENT]:{modelSelection:JSON.stringify(ep),modelSelectionTags:JSON.stringify(ep.tags??[])}};S(`${L}.${e.name}`,{...M,...e.fields,...t[e.name]??{}})},handleError:e=>{(e instanceof x.G1&&"parse_request"===e.type||e instanceof x.G1&&"Not found"===e.message)&&(D.J.addAction("ai_assistant.outdated_client_error",b.e.AI_ASSISTANT,l.$b.ERROR,{clientLifecycleId:t}),k.zl.set((0,ev.QK)(tv),{error:Error(ev.T_.OUTDATED_CLIENT_ERROR),cortexClientGeneratedRequestUuid:t})),e instanceof x.G1&&"Aborted"===e.message||e instanceof v.C&&"omit"===e.payload.severity||(0,z.$D)(b.e.AI_ASSISTANT,e)},sloge:(e,t)=>(0,B.x1)(L,e,t),onUpdateThread:(e,t)=>{a&&(t?(a===tg&&td(e),eG(e=>{let t=new Map(e);return t.set(a,[]),t}),(0,eC.VB)([])):eG(t=>{let n=new Map(t);return n.set(a,[...e]),n}))},tryUploadToolResultToBlobStore:n?F:void 0},persistedMessages:[]});if(await tV(),await tH(),(0,j.kc)().assistant_cursor_ui){let e=k.zl.get(eI),t=(0,C.getActiveTSSceneGraph)();t&&s.length>0&&(e.addNodes(s,t,(0,U.t)("ai_assistant.cursor.status.getting_started")),e.removeNodes(s))}try{await G.sendMessage({newUserMessage:A,serverSideChatParams:r}),eb("track","ai_assistant_chat_message_sent",{featureEntrypoint:i,editorType:E})}finally{(0,eC.VB)([]),(0,j.kc)().assistant_cursor_ui&&k.zl.get(eI).stop()}},[td,eE,tv,eD,tU,E,m,eF,tf,tb,eL,eb,S,tV,tH,ec,eu,n,tK,tW,tq,tX,tY,tZ,ep,eT,tg,eM,ex]);a.useEffect(()=>{e9&&!t_&&"idle"===eq&&(tJ(e9,"canvas"),te(null))},[e9,t_,eq,tJ,te]),a.useEffect(()=>{let e="pendingCreation"===eq&&!t_&&null===tg;e9&&e&&(tJ(e9,"canvas"),te(null))},[e9,eq,t_,tg,tJ,te]);let tQ=e=>{switch(e.type){case"user":case"system":return e.id;case"assistant":return e.messages[e.messages.length-1]?.id??""}},t$=(0,k.md)((0,eC.jl)(tg||tO)),{messagesForRendering:t0,exchangeMessageIds:t1}=a.useMemo(()=>{let e={jsxVariants:{isGenerating:!1,options:[],originalNodeId:null},selectedOptionId:"original",createOptionSelectionHandler:tG,startMultipleOutputsGeneration:tB},t=(t,n)=>(function({user:e,messages:t,pendingInteractiveTools:n,resolveInteractiveTool:i,currentSelectedNodeIds:s,annotateClientLifecycleIdForTracking:a,multipleOutputsContext:r,chatAtomKey:l}){return(function(e){let t=[],n=[];for(let i of e)"user"===i.role&&i.clientId&&(t.push(n),n=[]),n.push(i);return t.push(n),t.filter(e=>e.length>0)})(t).flatMap((t,o)=>{let d=t[0];if(a&&(d?.role!=="user"||!d?.clientId))throw Error(`First message in a cook must be a user message with a clientId. Got a ${d?.role} message`);let c=d?.clientId??"unknown",u=d?.clientId||"",p=function(e){if(!e)return{optionsState:{isGenerating:!1,options:[],originalNodeId:null},workspace:null,hasUI:!1,selectedVariantId:"original"};let t=eC.Cp.getWorkspace(e),n=(0,eC.Og)(e),i=function(e,t){if(!e)return{isGenerating:!1,options:[],originalNodeId:null};let n=t.get("original"),i={id:"original",status:n?.isGenerating?"thumbnail-generating":"completed",nodeId:e.originalNodeId,thumbnailUrl:n?.thumbnailUrl,isOriginal:!0};return{isGenerating:e.isGenerating,options:[i,...e.variants.map(e=>{let n;let i=t.get(e.id);return n=i?.isGenerating?"thumbnail-generating":"running"===e.status?"pending":e.status||"completed",{id:e.id,status:n,nodeId:e.nodeId,error:e.error,thumbnailUrl:i?.thumbnailUrl,isOriginal:!1}})],originalNodeId:e.originalNodeId}}(t,k.zl.get(n)),s=i.options.length>0||i.isGenerating;return i&&Array.isArray(i.options)?{optionsState:i,workspace:t,hasUI:s,selectedVariantId:t?.selectedVariantId||"original"}:{optionsState:{isGenerating:!1,options:[],originalNodeId:null},workspace:null,hasUI:!1,selectedVariantId:"original"}}(u),m={current:!1};return t.flatMap((d,h)=>{let f=d.createdAtMs?.toString(),x=d.role,_=r?.createOptionSelectionHandler;switch(x){case"user":{let t=d.content.filter(e=>"text"===e.type).map(e=>e.text).join(""),n=d.content.filter(e=>"selected-node-ids"===e.type).flatMap(e=>e.selectedNodeIds);return[{type:"user",user:e,id:d.clientId??`converted-${h}-${o}`,plainText:t,imports:void 0,inspectedElement:void 0,selectedNodeIds:n,libraryKey:void 0,sentAt64:f}]}case"assistant":return function({message:e,pendingInteractiveTools:t,currentSelectedNodeIds:n,resolveInteractiveTool:i,sentAt64:s,index:a,cookIndex:r,multipleOutputsContext:l,chatAtomKey:o,multipleOutputsRenderState:d,clientLifecycleId:c,createMultipleOutputsSelectionHandler:u,multipleOutputsUIAdded:p,isLastMessageInCook:m,annotateClientLifecycleIdForTracking:h,firstMessageClientId:f}){let x=[],_=e.content.filter(e=>"reasoning"===e.type).map(e=>e.text).join("");_.length>0&&!e.content.filter(e=>"tool-call"===e.type).some(e=>(function(e,t){if("edit_design"!==e.toolName)return!1;let n=t.get(e.toolCallId);return n&&n.args.variants>1})(e,t))&&x.push({type:"reasoning",reasoning:_,id:`${f}-reasoning-${a}-${r}`,sentAt64:s});let y=e.content.filter(e=>"text"===e.type).map(e=>e.text).join(""),v=e.content.filter(e=>"tool-call"===e.type).find(e=>"select_layers"===e.toolName),b=e.content.filter(e=>"tool-call"===e.type).find(e=>"edit_design"===e.toolName),C=e.content.filter(e=>"tool-call"===e.type).find(e=>e.toolName===g.fm.name);if(v){let e=t.get(v.toolCallId)?{type:"selectionRequest",message:y,selectedNodeIds:n??void 0,onContinue:e=>{(0,eC.VB)(e),i(v.toolCallId,{selectedLayerIds:e,message:e.length>0?`User has selected ${e.length} layer(s): ${e.join(", ")}. Please proceed with the original request.`:"User clicked continue but no layers are currently selected."})},id:v.toolCallId,sentAt64:s}:null;e&&x.push(e)}else if(b){let e=t.get(b.toolCallId);if(e?.args.missingFontsInfo)x.push({type:"missingFontsResolution",message:y,onContinue:()=>{i(b.toolCallId,{success:!0,message:"User chose to continue with make edits despite missing fonts."})},id:b.toolCallId,sentAt64:s});else{let t=eZ({messageId:f,textContent:y,renderState:d,editDesignToolCall:{toolCallId:b.toolCallId,isPending:!!e},messageIndex:a,clientLifecycleId:c,createOptionSelectionHandler:u,sentAt64:s}),n=p?t.content.filter(e=>"multipleOptions"!==e.type):t.content;x.push(...n),t.content.some(e=>"multipleOptions"===e.type)&&(p.current=!0),t.shouldStartGeneration&&eJ(t.toolCallIdForGeneration||b.toolCallId,c,l?.startMultipleOutputsGeneration,o)}}else if(C){let e=function(e,t,n,i,s){let a=t.get(e.toolCallId);return a?{type:"exportAssets",id:e.toolCallId,message:n,onContinue:()=>{i(e.toolCallId,{message:"The user was shown an export dialog for their assets."})},sentAt64:s,...a.args}:null}(C,t,y,i,s);e&&x.push(e)}else if(y){let e=eZ({messageId:f,textContent:y,renderState:d,editDesignToolCall:void 0,messageIndex:a,clientLifecycleId:c,createOptionSelectionHandler:u,sentAt64:s}),t=p?e.content.filter(e=>"multipleOptions"!==e.type):e.content;if(x.push(...t),e.content.some(e=>"multipleOptions"===e.type)&&(p.current=!0),e.shouldStartGeneration){let t=e.toolCallIdForGeneration||function(e){if(!e)return;let t=(0,eC.KP)(e);for(let[e,n]of k.zl.get(t).entries())if("edit_design"===n.toolName&&n.args?.variants>1)return e}(c);t&&eJ(t,c,l?.startMultipleOutputsGeneration,o)}}return e.content.filter(e=>"tool-call"===e.type).forEach((e,n)=>{let i=t.get(e.toolCallId);i&&(0,e1.p$)(e.toolName,i.args)||x.push({type:"toolCall",name:e.toolName,id:`${f}-toolCall-${a}-${r}-${n}`,sentAt64:s})}),y&&0===x.length&&x.push({type:"plan",plan:y,title:"Plan",id:`${f}-plan-${a}-${r}`,sentAt64:s}),[{type:"assistant",messages:x,clientLifecycleId:m&&h?c:void 0,sentAt64:s}]}({message:d,pendingInteractiveTools:n,currentSelectedNodeIds:s,resolveInteractiveTool:i,sentAt64:f,index:h,cookIndex:o,multipleOutputsContext:r,chatAtomKey:l,multipleOutputsRenderState:p,clientLifecycleId:u,createMultipleOutputsSelectionHandler:_,multipleOutputsUIAdded:m,isLastMessageInCook:h===t.length-1,annotateClientLifecycleIdForTracking:a,firstMessageClientId:c});case"system":return[{type:"system",id:`${c}-converted-${h}-${o}`,systemMessageType:"generic",plainText:d.content.filter(e=>"text"===e.type).map(e=>e.text).join(""),title:void 0,sentAt64:f}];case"tool":return[];default:throw Error(`Unknown message role: ${x}`)}})})})({user:p,messages:t,pendingInteractiveTools:eA,resolveInteractiveTool:eO,currentSelectedNodeIds:ed,annotateClientLifecycleIdForTracking:n,multipleOutputsContext:e,chatAtomKey:tv}),n=t(tp()||[],!0),i=t(tm(),!1);return{messagesForRendering:[...n,...i],exchangeMessageIds:new Set(i.map(e=>tQ(e)))}},[p,tp,tm,ed,eA,eO,tG,tB,tv,t$]);a.useEffect(()=>{ty.current=(0,w.g)()},[ts]);let{FirstPartyExplanationPointer:t2}=(0,ef.i7)(!0,"code_chat_message_container");return a.useEffect(()=>{"shouldCreate"===eq&&(e8("pendingCreation"),eG(new Map),tb(""),ti(null))},[eq,e8,tb,ti]),a.useEffect(()=>{to(tg)},[tg,to]),a.useEffect(()=>{tt&&tt!==tg&&(tx(tt),tb(""),e8("idle"),ti(null))},[tt,tg,tx,tb,e8,ti]),!function({fileKey:e,selectedNodeIds:t,threadId:n,setThreadId:i,setInput:s,setNewChatTrigger:r}){let l=(0,j.kc)().assistant_threading_prototype??!1,[o,d]=a.useState(null);a.useEffect(()=>{if(!l||!e)return;let a=function(e){if(0===e.length)return"global";let t=(0,C.getActiveTSSceneGraph)();if(!t)return null;let n=new Set;for(let i of e){let e=(0,eQ.E6)(t,i);e&&n.add(e.guid)}return n.size>1?"global":1===n.size?Array.from(n)[0]??null:"global"}(t);if(!a)return;let o=e0(),c=`${e}:${a}`,u=o[c];u&&u!==n?(i(u),s(""),r("idle")):u||(d(c),r("shouldCreate"))},[l,e,t,n,i,s,r]),a.useEffect(()=>{if(!l||!n||!o)return;let e=e0();Object.entries(e).find(([e,t])=>t===n&&e!==o)||e[o]||function(e){try{localStorage.setItem(e$,JSON.stringify(e))}catch(e){console.warn("Failed to save frame-to-thread mapping to localStorage:",e)}}({...e,[o]:n}),d(null)},[l,n,o])}({fileKey:m,selectedNodeIds:eF,threadId:tg,setThreadId:tx,setInput:tb,setNewChatTrigger:e8}),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(ey.ry,{canCancelGeneration:tF,chatBoxLeftExtraContent:(0,j.kc)().ai_assistant_ds_library_selector?(0,s.jsx)(e2.V,{isOpen:eS,onOpenChange:eN},"library-dropdown"):null,chatBoxRightExtraContent:[(0,s.jsx)(e3.Y,{},"model-picker"),...(0,j.kc)().make_edits_debug?[(0,s.jsx)(ej.N,{},"debug-button")]:[]],chatMessagesNodeGuid:tv,clientLifecycleIdMap:tR,codeFileChanges:void 0,codeInstanceGuid:null,emptyState:(0,s.jsx)(eB,{onPromptSelect:tb,hasSelection:null!==ed&&ed.length>0,clientLifecycleId:ty.current}),exchangeMessageIds:t1,featureType:o.lV.AI_ASSISTANT,generationInProgress:t&&tP,messagesForRendering:t0,sendDisabled:tD,sendMessage:async e=>{let t=!(t0.length>0)&&ty.current||(0,w.g)();await tJ({userInput:e,clientLifecycleId:t},"left_panel")},setInput:tb,showCodeStreaming:!1}),(0,s.jsx)(t2,{})]})}},651116:(e,t,n)=>{n.d(t,{vb:()=>l,xL:()=>r});var i=n(812714),s=n(394549),a=n(819851);function r(){return(0,i.kc)().ai_assistant,(0,a.lg)(),(0,s.BE)(),!1}function l(){let e=r(),t=(0,i.kc)().ai_assistant_canvas_entrypoint||!1;return e&&t}n(944350)},266606:(e,t,n)=>{n.d(t,{s:()=>f});var i=n(716976),s=n(926653),a=n(795033),r=n(385446),l=n.n(r),o=n(198986),d=n.n(o),c=n(328341),u=n(630332),p=n(211862),m=n(680692),h=n(568383);function f(){let e=(0,m.$)(),t="loading"===e.status,n="errors"===e.status,r=i.useMemo(()=>e.data??[],[e.data]),o=i.useMemo(()=>new Set(r.map(e=>e.library_key)),[r]),[f,g]=(0,a.fp)(u.Om),x=(0,p.tS)()??"unknown",_=i.useMemo(()=>f?.[x??""]??{},[f,x]),y=i.useMemo(()=>new Set(Object.entries(_).filter(([e,t])=>t&&o.has((0,s.l)(e))).map(([e,t])=>(0,s.l)(e))),[_,o]),v=i.useCallback(e=>{g(t=>d()({},t,{[x]:{[e]:!0}}))},[x,g]),b=i.useCallback(e=>{g(t=>d()({},t,{[x]:{[e]:!1}}))},[x,g]),C=(0,c.ZC)(o),j=(0,a.md)(h.TG);return i.useEffect(()=>{let e={..._};for(let t of o)t in e||(e[t]=!j.has(t));l()(e,_)||g(t=>d()({},t,{[x]:e}))},[o,_,C,j,x,g]),i.useMemo(()=>({enabledLibraries:_,enabledLibraryKeys:y,enableLibrary:v,disableLibrary:b,subscribedLibraryKeys:o,subscribedLibraries:r,isLoading:t,hasError:n}),[_,y,v,b,o,r,t,n])}},126390:(e,t,n)=>{n.d(t,{S9:()=>y});var i=n(716976),s=n(237420),a=n(999083),r=n(382629),l=n(387092),o=n(812714),d=n(865840),c=n(285626),u=n(563792),p=n(305316),m=n(374794),h=n(504474),f=n(668485),g=n(266606);let x=["FILL","EFFECT","TEXT","GRID"],_=({k:e,styleType:t,libraryKeys:n})=>({library_keys:n,entity_type:"STYLE",entity_value_type:t,max_results_per_library:e});function y({k:e=20,enabled:t}){let n=(0,m.je)(),{enabledLibraryKeys:a}=(0,g.s)(),o=(0,d.wm)(()=>n.data?.filter(e=>a.has(e.libraryKey))??[],[a,n.data]);(0,p.Bh)(o);let{isLoading:h,styles:y}=function({k:e,enabled:t,enabledLibraryKeys:n}){let s=(0,d.wm)(()=>Array.from(n),[n]),a=(0,d.k9)(()=>x.map(t=>_({k:e,styleType:t,libraryKeys:s})),[e,s]),[l,o]=i.useState(()=>a.map(e=>(0,f.kk)(e).cachedValue)),c=l.every(r.Vq);return i.useEffect(function(){0!==s.length&&!c&&t&&Promise.all(a.map(f.kA)).then(e=>{o(e)})},[e,s,a,c,t]),(0,d.k9)(()=>({isLoading:!c&&t,styles:l.filter(r.Vq)}),[c,t,l])}({k:e,enabled:t,enabledLibraryKeys:a}),b=i.useMemo(()=>(function(e,t){let n=[],i=new Set;if(t)return n;for(let t of e)for(let[e,s]of t.entries())for(let e of s){let t=(0,l.n3)(e);i.has(t)||n.push(t),i.add(t)}return n})(y,h),[y,h]),C=v({styleType:"FILL",topKStyleKeys:b,k:e,enabledLibraries:o}),j=v({styleType:"EFFECT",topKStyleKeys:b,k:e,enabledLibraries:o}),k=v({styleType:"TEXT",topKStyleKeys:b,k:e,enabledLibraries:o}),w=v({styleType:"GRID",topKStyleKeys:b,k:e,enabledLibraries:o}),E=(0,d.k9)(()=>{let e=[C,j,k,w];return e.some(e=>"loading"===e.status)||!t?[]:e.map(e=>e.topKStyles).flat()},[C,j,k,w,t]);i.useEffect(function(){if(t)for(let e of E)u.Eo.getCanvas(e)},[t,E]);let T=(0,s.wA)(),S=i.useCallback(async()=>{!h&&t&&await Promise.all(E.map(e=>T((0,c.RT)(e))))},[T,t,h,E]);return i.useMemo(()=>({topKStyles:E,isLoading:h,maybeAddTopKStylesToInternalCanvas:S}),[h,S,E])}function v({styleType:e,topKStyleKeys:t,k:n,enabledLibraries:i}){let{status:s,stylesByFileKey:r}=(0,h.Zk)({styleType:e,initialSelectedSubscribedStyle:null,selectedLibraries:i}),l=function({allStyles:e,topKStyleKeys:t,k:n}){if(t.length>0){let i=Object.fromEntries(e.map(e=>[e.key,e])),s=t.map(e=>i[e]).filter(e=>!!e);if((0,o.kc)().ai_assistant_top_k_styles_fallback){let i=e.filter(e=>!t.includes(e.key));for(let e of((0,a.KQ)(i,"name"),i)){if(s.length>=n)break;s.push(e)}}return s}return(0,o.kc)().ai_assistant_top_k_styles_fallback?((0,a.KQ)(e,"name"),e.slice(0,n)):[]}({allStyles:Object.values(r).map(({styles:e})=>e).flat(),topKStyleKeys:t,k:n});return(0,d.k9)(()=>({status:s,stylesByFileKey:r,topKStyles:l}),[s,r,l])}},143163:(e,t,n)=>{n.d(t,{p:()=>y});var i=n(716976),s=n(237420),a=n(999083),r=n(382629),l=n(266808),o=n(795033),d=n(865840),c=n(285626),u=n(563792),p=n(24412),m=n(374794),h=n(668485),f=n(506347),g=n(266606);let x=["COLOR","FLOAT","STRING","BOOLEAN"],_=({k:e,resolvedType:t,libraryKeys:n})=>({library_keys:n,entity_type:"VARIABLE",entity_value_type:t,max_results_per_library:e});function y({k:e=20,enabled:t}){let n=(0,m.je)(),{enabledLibraryKeys:a,isLoading:o}=(0,g.s)(),p=(0,d.wm)(()=>n.data?.filter(e=>a.has(e.libraryKey))??[],[a,n.data]),{isLoading:f,variables:y}=function({k:e,enabled:t,enabledLibraryKeys:n}){let s=(0,d.wm)(()=>Array.from(n),[n]),a=(0,d.k9)(()=>x.map(t=>_({k:e,resolvedType:t,libraryKeys:s})),[e,s]),[l,o]=i.useState(()=>a.map(e=>(0,h.kk)(e).cachedValue)),c=l.every(r.Vq);return i.useEffect(function(){0!==s.length&&!c&&t&&Promise.all(a.map(h.kA)).then(e=>{o(e)})},[e,s,a,c,t]),(0,d.k9)(()=>({isLoading:!c&&t,variables:l.filter(r.Vq)}),[c,t,l])}({k:e,enabled:t,enabledLibraryKeys:a}),b=o||f,C=i.useMemo(()=>(function(e,t){let n=new Set;if(t)return n;for(let t of e)for(let[e,i]of t.entries())for(let e of i)n.add(e);return n})(y,b),[y,b]),j=v({resolvedType:l.rXF.FLOAT,topKVariableKeys:C,k:e,enabledLibraries:p}),k=v({resolvedType:l.rXF.COLOR,topKVariableKeys:C,k:e,enabledLibraries:p}),w=v({resolvedType:l.rXF.STRING,topKVariableKeys:C,k:e,enabledLibraries:p}),E=v({resolvedType:l.rXF.BOOLEAN,topKVariableKeys:C,k:e,enabledLibraries:p}),T=(0,d.k9)(()=>{let e=[j,k,w,E];return e.some(e=>"loading"===e.status)||!t?[]:e.map(e=>e.topKVariables).flat()},[j,k,w,E,t]);i.useEffect(function(){if(t)for(let e of T)u.Eo.getCanvas(e)},[t,T]);let S=(0,s.wA)(),I=i.useCallback(async()=>{!b&&t&&await Promise.all(T.map(e=>S((0,c.Oe)(e))))},[S,t,b,T]);return i.useMemo(()=>({topKVariables:T,isLoading:b,maybeAddTopKVariablesToInternalCanvas:I}),[b,I,T])}function v({resolvedType:e,topKVariableKeys:t,k:n,enabledLibraries:s}){let{status:r,variablesByLibraryKey:l}=function({resolvedType:e,selectedLibraries:t}){let n=i.useMemo(()=>t.map(e=>e.libraryKey).sort(),[t]),s=(0,o.md)((0,f.Ho)(n)),a={};if(Object.values(s).some(e=>"loaded"!==e.status))return{status:"loading",variablesByLibraryKey:a};for(let[t,n]of Object.entries(s))a[t]=(0,p.q0)(n,!1).filter(t=>t.resolvedType===e);return{status:"loaded",variablesByLibraryKey:a}}({resolvedType:e,selectedLibraries:s}),c=function(e,t,n){let i=Object.values(e).reduce((e,t)=>(e.push(...t),e),[]);if(!(t.size>0))return(0,a.KQ)(i,"name"),i.slice(0,n);{let e=i.filter(e=>t.has(e.key)),s=i.filter(e=>!t.has(e.key));for(let t of((0,a.KQ)(s,"name"),s)){if(e.length>=n)break;e.push(t)}return e}}(l,t,n);return(0,d.k9)(()=>({status:r,variablesByLibraryKey:l,topKVariables:c}),[r,l,c])}},956492:(e,t,n)=>{n.d(t,{RG:()=>o,p$:()=>l});var i=n(716976),s=n(747618),a=n(795033),r=n(630332);function l(e,t){return!!("select_layers"===e||e===s.fm.name||"edit_design"===e&&t?.missingFontsInfo)||!!("edit_design"===e&&t?.variants>1)}function o(){let[e,t]=i.useState(new Map);return{pendingInteractiveTools:e,showInteractiveTool:(e,n,i)=>{let s=n.clientLifecycleId,l=(0,r.KP)(s);return a.zl.set(l,t=>{let s=new Map(t);return s.set(n.toolCallId,{toolName:i||"unknown",args:e,trackingContext:n}),s}),new Promise(s=>{t(t=>new Map(t).set(n.toolCallId,{toolName:i||"unknown",args:e,resolve:s,trackingContext:n}))})},showAutoResolvingTool:(e,n,i)=>{let s=n.clientLifecycleId,l=(0,r.KP)(s);return a.zl.set(l,t=>{let s=new Map(t);return s.set(n.toolCallId,{toolName:i||"unknown",args:e,trackingContext:n}),s}),new Promise(s=>{t(t=>new Map(t).set(n.toolCallId,{toolName:i||"unknown",args:e,resolve:s,trackingContext:n,autoResolve:!0}))})},resolveInteractiveTool:(e,n)=>{t(t=>{let i=t.get(e);if(i){i.resolve(n);let s=new Map(t);s.delete(e);let l=i.trackingContext.clientLifecycleId;if(l){let t=(0,r.KP)(l);a.zl.set(t,t=>{let n=new Map(t);return n.delete(e),n})}return s}return t})},cancelInteractiveTool:e=>{t(t=>{let n=t.get(e);if(n){n.resolve({message:"Cancelled"});let i=new Map(t);return i.delete(e),i}return t})},getPersistedTools:i.useCallback(e=>{let t=(0,r.KP)(e);return a.zl.get(t)},[])}}},955513:(e,t,n)=>{n.d(t,{V:()=>R});var i=n(104076),s=n(716976),a=n(237420),r=n(454851),l=n(981872),o=n(694415),d=n(361170),c=n(192075),u=n(366535),p=n(266606),m=n(826220),h=n(268389),f=n(684742),g=n(436194),x=n(452981),_=n(419822),y=n(293422),v=n(475477),b=n(795033),C=n(120440),j=n(383698),k=n(564914),w=n(959834),E=n(288054),T=n(282794),S=n(568383);function I({library:e,isEnabled:t,onToggle:n}){let s=(0,b.md)(S.TG);return(0,i.jsxs)(f.E,{className:C.xW(O.libraryListItem),onClick:()=>n(e.library_key,!t),"aria-label":t?(0,c.t)("ai_assistant.library.disable",{libraryName:e.library_name}):(0,c.t)("ai_assistant.library.enable",{libraryName:e.library_name}),children:[(0,i.jsx)("div",{className:"x186iv6y",children:(0,i.jsx)(T.D,{thumbnailUrl:e.thumbnail_url,coverThumbnail:!1,name:e.library_name})}),(0,i.jsxs)("div",{className:"x78zum5 xdt5ytf x1iyjqo2 xeuugli",children:[(0,i.jsx)("span",{className:"xuzfeq1 x8yk33q x1e00guj x18zpg43 x22v61l x1akne3o xb3r6kr xlyipyv xuxw1ft x1vqgdyp",children:e.library_name}),(0,i.jsx)("span",{className:"xrlp15q x1nmd3yn xm735u9 xkbmbem x3wk4up x1n0bwc9 xb3r6kr xlyipyv xuxw1ft",children:"team"===e.library_type?e.team_name??e.workspace_name??null:s.has(e.library_key)?(0,c.t)("community.detail_view.ui_kit"):(0,c.t)("community.community")})]}),(0,i.jsx)(g.d,{checked:t,onChange:t=>n(e.library_key,t),label:(0,i.jsx)(x.h,{children:`Toggle ${e.library_name}`})})]},e.library_key)}function N(){return(0,i.jsx)("div",{className:"x78zum5 xl56j7k x6s0dn4 x1iyjqo2",children:(0,i.jsx)(_.k,{})})}function A({onReload:e}){return(0,i.jsxs)("div",{className:"x78zum5 xdt5ytf x6s0dn4 xl56j7k x1i71x30 xvwx85 x1dao9b2 x2b8uid x1iyjqo2",children:[(0,i.jsxs)("div",{className:"x78zum5 xdt5ytf xg2d0mh x6s0dn4",children:[(0,i.jsx)("div",{className:"xxrns5j x1q8tae1 x1vg90ec x1eab18d x1yyillh x1akne3o",children:(0,c.t)("ai_assistant.library.error_loading_libraries")}),(0,i.jsx)("div",{className:"xrlp15q x1nmd3yn xm735u9 xkbmbem x3wk4up x1n0bwc9",children:(0,c.t)("ai_assistant.library.error_body")})]}),(0,i.jsx)(y.$n,{variant:"secondary",onClick:e,children:(0,c.t)("ai_assistant.library.reload")})]})}function L({onExploreLibraries:e}){return(0,i.jsxs)("div",{className:"x78zum5 xdt5ytf x6s0dn4 xl56j7k x1i71x30 xvwx85 x1dao9b2 x2b8uid x1iyjqo2",children:[(0,i.jsx)("div",{className:"xon4yw5 xn0whsw x19y5rnk xeq5yr9",children:(0,i.jsx)(o.l,{})}),(0,i.jsxs)("div",{className:"x78zum5 xdt5ytf xg2d0mh x6s0dn4",children:[(0,i.jsx)("div",{className:"xxrns5j x1q8tae1 x1vg90ec x1eab18d x1yyillh x1akne3o",children:(0,c.tx)("design_systems.assets_panel.empty_state_title_ui3")}),(0,i.jsx)("div",{className:"xrlp15q x1nmd3yn xm735u9 xkbmbem x3wk4up x1n0bwc9",children:(0,c.tx)("design_systems.assets_panel.empty_state_subtitle_ui3")}),(0,i.jsx)(v.N,{newTab:!0,trusted:!0,href:"https://help.figma.com/hc/articles/360038662654",children:(0,c.tx)("design_systems.assets_panel.learn_more")})]}),(0,i.jsx)(y.$n,{onClick:e,children:(0,c.tx)("design_systems.assets_panel.empty_state_cta_ui3")})]})}let M=(0,w.Ju)(function(e){let{defaultPosition:t,onCloseCallback:n,onEnableLibrary:r,onDisableLibrary:l}=e,o=(0,a.wA)(),d=(0,a.d4)(e=>e.modalShown),{enabledLibraryKeys:f,enableLibrary:g,disableLibrary:x,subscribedLibraries:_,isLoading:y,hasError:v}=(0,p.s)(),{onToggleLibraryModal:b}=(0,j.u)({entrypoint:E.r6.QUICK_ACTION,modalType:"editor",initialTab:k.Wv.TEAM_LIBRARIES}),C=s.useCallback((e,t)=>{t?(g(e),r(e)):(x(e),l(e))},[g,x,r,l]),w=s.useCallback(()=>{n?.(),o((0,u.AS)())},[o,n]),T=s.useCallback(()=>{d&&(o((0,u.AS)()),setTimeout(()=>{o((0,u.to)({...d,type:{type:d.type}}))}))},[o,d]),S=s.useCallback(()=>{w(),b()},[w,b]);return(0,i.jsx)(m.bL,{defaultPosition:t,width:340,maxHeight:340,onClose:w,children:(0,i.jsxs)(h.vo,{children:[(0,i.jsx)(h.Y9,{children:(0,i.jsx)(h.hE,{children:(0,c.tx)("ai_assistant.library.title")})}),(0,i.jsx)(h.nB,{padding:0,children:(0,i.jsxs)("div",{className:"x78zum5 xdt5ytf x1nfngrj x1vd4hg5 xh8yej3 x9f619 xf7z5ut",children:[y&&(0,i.jsx)(N,{}),v&&(0,i.jsx)(A,{onReload:T}),!y&&!v&&(0,i.jsx)("div",{className:"x78zum5 xdt5ytf xg2d0mh x1iyjqo2",children:0===_.length?(0,i.jsx)(L,{onExploreLibraries:S}):_.map(e=>(0,i.jsx)(I,{library:e,isEnabled:!!f?.has(e.library_key),onToggle:C},e.library_key))})]})})]})})},"AIAssistantLibrarySelectorModal",w.ZU.YES),O={libraryListItem:{k1xSpc:"x78zum5",kGNEyG:"x6s0dn4",kOIVth:"x1i71x30",khm7nJ:null,k1C7PZ:null,kmVPX3:"xf7z5ut",kg3NbH:null,kuDDbn:null,kE3dHu:null,kP0aTx:null,kpe85a:null,k8WAf4:null,kLKAdn:null,kGO01o:null,kWkggS:"x1yjdb4r xv2f06h",kaIpWk:"x19y5rnk",krdFHd:null,kfmiAY:null,kVL7Gh:null,kT0f0o:null,kIxVMA:null,ksF3WI:null,kqGeR4:null,kYm2EN:null,kzqmXN:"xh8yej3",k7Eaqz:"xeuugli",kB7OPa:"x9f619",kkrTdU:"xt0e3qv",$$css:!0}};function R({isOpen:e,onOpenChange:t}){let n=s.useRef(null),m=(0,a.wA)(),{enabledLibraryKeys:h,enableLibrary:f,disableLibrary:g,subscribedLibraryKeys:x}=(0,p.s)(),_=x?.size>0,y=h?.size??!1,v=_&&y?l.r:o.l;return(0,i.jsx)("div",{ref:n,children:(0,i.jsx)(r.d,{"aria-label":(0,c.t)("sites.modal.select_library"),"aria-expanded":e,"aria-haspopup":"menu",onClick:()=>{let i=n.current;if(!i)return;if(e){m((0,u.AS)()),t(!1);return}let s=i.getBoundingClientRect(),a=new d.Mi(s.left,s.top);t(!0),m(u.to({type:M,data:{defaultPosition:{left:a.x,bottom:window.innerHeight-a.y+12},enabledLibraryKeys:h??new Set,onEnableLibrary:f,onDisableLibrary:g,onCloseCallback:()=>{t(!1)}}}))},children:(0,i.jsx)(v,{})})})}},833290:(e,t,n)=>{n.d(t,{Y:()=>E});var i=n(104076),s=n(716976),a=n(314220),r=n(766441),l=n(462730),o=n(4921),d=n(302727),c=n(848405);let u=(0,s.memo)(function(e){return(0,i.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,"data-fpl-icon-size":"24",children:(0,i.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",d:"M13.413 5a1.915 1.915 0 0 1 1.9 2.142 1.72 1.72 0 0 1 1.435.689l.253.337a1.77 1.77 0 0 1 .022 2.089 2.25 2.25 0 0 1 1.187 1.675l.1.709c.1.695-.255 1.337-.823 1.653.611.752.566 1.86-.134 2.56a1.9 1.9 0 0 1-1.463.554l-.018.058a2.245 2.245 0 0 1-3.872.701 2.245 2.245 0 0 1-3.872-.701l-.02-.058a1.9 1.9 0 0 1-1.462-.555c-.7-.7-.745-1.807-.134-2.56a1.63 1.63 0 0 1-.823-1.652l.1-.71a2.25 2.25 0 0 1 1.187-1.674 1.77 1.77 0 0 1 .022-2.089l.254-.337a1.72 1.72 0 0 1 1.434-.69A1.915 1.915 0 0 1 10.586 5c.56 0 1.064.242 1.414.626.35-.384.852-.626 1.413-.626m-2.827 1a.913.913 0 0 0-.847 1.252l.22.55q.04.097.04.202-.001.025-.005.05l-.005.046-.012.042-.016.051q-.011.022-.024.043l-.022.041q-.014.02-.029.036-.014.021-.033.04a.5.5 0 0 1-.264.138l-.029.003-.065.005-.036-.003q-.033-.002-.064-.008l-.021-.007-.068-.021-.024-.014a.5.5 0 0 1-.136-.092.726.726 0 0 0-1.095.078l-.252.336A.772.772 0 0 0 8.416 10H9a.5.5 0 0 1 0 1h-.584q-.06 0-.117-.005-.024.004-.05.005h-.232a1.25 1.25 0 0 0-1.237 1.073l-.102.708a.63.63 0 0 0 1.187.371l.187-.376a.5.5 0 0 1 .895.448l-.188.376c-.202.405-.56.7-.981.828l-.425.425a.915.915 0 0 0 1.293 1.293l.06-.06A1 1 0 0 0 9 15.379V15a.5.5 0 0 1 1 0v.379a2 2 0 0 1-.586 1.414l-.06.06a2 2 0 0 1-.296.242l.019.054a1.244 1.244 0 0 0 2.423-.392V6.913A.913.913 0 0 0 10.586 6m2.827 0a.914.914 0 0 0-.913.913v9.844a1.244 1.244 0 0 0 2.422.392l.018-.055a2 2 0 0 1-.294-.24l-.06-.061A2 2 0 0 1 14 15.379V15a.5.5 0 0 1 1 0v.379a1 1 0 0 0 .293.707l.06.06a.915.915 0 0 0 1.293-1.293l-.427-.426a1.63 1.63 0 0 1-.98-.827l-.187-.376a.5.5 0 0 1 .895-.448l.187.376a.63.63 0 0 0 1.187-.37l-.102-.709A1.25 1.25 0 0 0 15.982 11h-.232q-.026-.001-.05-.005l-.116.005H15a.5.5 0 0 1 0-1h.584a.771.771 0 0 0 .616-1.232l-.252-.336a.727.727 0 0 0-1.095-.078.5.5 0 0 1-.136.092l-.024.014a.5.5 0 0 1-.154.036l-.035.003-.066-.005q-.015 0-.028-.003l-.072-.02-.024-.007a.5.5 0 0 1-.23-.187l-.022-.04q-.013-.022-.023-.044-.009-.025-.016-.051L14.01 8.1a.5.5 0 0 1 .027-.29l.223-.558A.913.913 0 0 0 13.413 6"})})}),p=(0,s.memo)(function(e){return(0,i.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,"data-fpl-icon-size":"24",children:(0,i.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",d:"M12 5a2 2 0 0 1 2 2h.5l.18.005A3.5 3.5 0 0 1 14.5 14H14v1h1.5a2.5 2.5 0 0 1 2.5 2.5.5.5 0 0 1-1 0 1.5 1.5 0 0 0-1.5-1.5h-7A1.5 1.5 0 0 0 7 17.5a.5.5 0 0 1-1 0A2.5 2.5 0 0 1 8.5 15H10v-1h-.5a3.5 3.5 0 0 1-.18-6.995L9.5 7h.5a2 2 0 0 1 2-2m-1 10h2v-1h-2zM9.5 8a2.5 2.5 0 0 0 0 5h5a2.5 2.5 0 0 0 0-5zm0 1a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3m5 0a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3m-5 1a.5.5 0 1 0 0 1 .5.5 0 0 0 0-1m5 0a.5.5 0 1 0 0 1 .5.5 0 0 0 0-1M12 6a1 1 0 0 0-.995.897L11 7h2a1 1 0 0 0-1-1"})})});var m=n(390579),h=n(795033);n(120440);var f=n(166887),g=n(997477),x=n(192075),_=n(819851),y=n(905885),v=n(176203),b=n(630332);function C(e,t){return(0,x.Yd)(e,t)}let j={experiment:c.X,brain:u,robot:p};function k(e){if(!e.iconKey&&!e.iconKeyEmojiFallback)return null;if(e.iconKey&&e.iconKey in j){let t=j[e.iconKey];return(0,i.jsx)(t,{})}return e.iconKeyEmojiFallback?(0,i.jsx)("span",{style:{fontSize:"24px"},children:e.iconKeyEmojiFallback}):null}function w(e){let{isOpen:t}=l.WM();return(0,i.jsx)(l.l9,{id:"model-picker-trigger",className:"x1ypdohk x78zum5 x6s0dn4 xg2d0mh x192jxwq xjbqb8w xv2f06h x1n0bwc9 xmauxvm x1pshirs","aria-label":(0,x.t)("ai_assistant.model_picker.select_ai_model"),children:e.selectedIcon?(0,i.jsx)(o.f,{"aria-label":(0,x.t)("ai_assistant.model_picker.select_ai_model"),onIcon:e.selectedIcon,offIcon:e.selectedIcon,checked:t,variant:"highlighted"}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{className:"xilkfi8",children:e.selectedModelLabel}),(0,i.jsx)(m.O,{})]})})}function E(){let e=(0,_.E3)(),t=(0,h.Xr)(b.Si),n=(0,h.Xr)(y.eb),l=(0,h.md)(b.yq),o=(0,f.hC)(),c=s.useRef(l.productString);s.useEffect(()=>{c.current=l.productString},[l.productString]);let u=(0,g.gP)("make_edits_global_configuration"),p=(0,a._C)(u.value,e?(0,v.xq)(e):void 0);if(p.length<=1)return null;let m=l.productString,j=C(l.productString,l.productStringEnglishFallback),E=k(l);return(0,i.jsx)("div",{className:"x1n2onr6 x2lah0s",children:(0,i.jsxs)(d.Root,{value:m,onChange:e=>{let i=p.find(t=>t.productString===e);i&&(o("ai_assistant.model_selected",{selectedModel:i.productString,selectedModelLabel:C(i.productString,i.productStringEnglishFallback),previousModel:c.current,isDefault:i.default,featureEntrypoint:"left_panel"}),n(null),i.default?t(void 0):t({key:i.productString}))},placement:"bottom-start",customMiddleware:[(0,r.cY)({alignmentAxis:-8}),(0,r.UU)({padding:{top:12,bottom:12,left:8,right:8}}),(0,r.BN)({padding:{top:12,bottom:12,left:8,right:8}}),(0,r.Ej)({apply({rects:e,availableWidth:t,elements:n}){Object.assign(n.floating.style,{minWidth:`${e.reference.width+16}px`,maxWidth:`${t}px`})},padding:{top:12,bottom:12,left:8,right:8}})],children:[(0,i.jsx)(w,{selectedIcon:E,selectedModelLabel:j}),(0,i.jsx)(d.Container,{children:(0,i.jsx)(d.Group,{title:(0,i.jsx)(d.Title,{children:(0,x.t)("ai_assistant.model_picker.select_ai_model")}),children:p.map(e=>{let t=e.description||e.descriptionEnglishFallback?(0,x.Yd)(e.description,e.descriptionEnglishFallback||""):null;return(0,i.jsx)(d.Option,{value:e.productString,children:(0,i.jsxs)("div",{className:"x78zum5 x6s0dn4 xg2d0mh",children:[k(e),(0,i.jsxs)("div",{className:"x78zum5 xdt5ytf xg2d0mh",children:[(0,i.jsx)("div",{children:C(e.productString,e.productStringEnglishFallback)}),t&&(0,i.jsx)("div",{className:"xfifm61 x1n0bwc9 xo0entv",children:t})]})]})},e.productString)})})})]})})}},701856:(e,t,n)=>{n.d(t,{N:()=>g,e:()=>h});var i=n(104076),s=n(716976),a=n(420680),r=n(622345),l=n(662376),o=n(120440),d=n(511570),c=n.n(d),u=n(915459),p=n(192075),m=n(601757);function h({location:e,searchQuery:t,placeholder:n,onChange:s,clearSearch:a,onClose:r,onFocus:l,ariaLabel:o}){return"modal"===e?(0,i.jsx)(f,{searchQuery:t,clearSearch:a,placeholder:n,onChange:s,onClose:r,onFocus:l,ariaLabel:o}):(0,i.jsx)(g,{searchQuery:t,clearSearch:a,placeholder:n,onChange:s,onFocus:l,ariaLabel:o})}function f({searchQuery:e,placeholder:t,onChange:n,clearSearch:s,onClose:o,onFocus:d,ariaLabel:c}){return(0,i.jsxs)("div",{className:m.qz,children:[(0,i.jsx)(u.IW,{ariaLabel:c,className:m.t7,clearSearch:s,customClearSearchIcon:(0,i.jsx)(r.C,{style:{"--color-icon":"var(--color-icon-tertiary)"}}),focusOnMount:!0,iconClassName:m.un,onChange:n,onFocus:d,placeholder:t,query:e,withUI3Icon:!0}),null!=o&&(0,i.jsx)(a.K,{"aria-label":(0,p.t)("common.close"),onClick:o,children:(0,i.jsx)(l.A,{})})]})}function g({searchQuery:e,placeholder:t,onChange:n,clearSearch:a,onFocus:l,ariaLabel:d}){let[p,h]=s.useState(!1);return(0,i.jsx)("div",{className:m.SO,children:(0,i.jsx)(u.IW,{ariaLabel:d,className:c()(m.DP,p&&m.nU),clearSearch:a,customClearSearchContainerClassName:m.nR,customClearSearchIcon:(0,i.jsx)(r.C,{style:{"--color-icon":"var(--color-icon-tertiary)"}}),focusOnMount:!0,iconClassName:o.xW(!p&&x.searchIconUnFocused),onBlur:()=>h(!1),onChange:n,onFocus:()=>{h(!0),l?.()},placeholder:t,query:e,smallFont:!0,withUI3Icon:!0})})}let x={searchIconUnFocused:{"--color-icon":"x180r7m8",$$css:!0}}},180989:(e,t,n)=>{n.d(t,{$:()=>l,A:()=>a});var i=n(104076);n(120440);var s=n(36767);function a({paint:e}){let t=(0,s.e)(e);return e?(0,i.jsx)("div",{className:"xlup9mm x1kky2od x78zum5 xl56j7k x6s0dn4 x1n2onr6",children:(0,i.jsx)(s.v,{colors:t,paint:e,showTransparentBorder:!0})}):(0,i.jsx)(r,{})}function r(){return(0,i.jsx)("div",{className:"xlup9mm x1kky2od x78zum5 xl56j7k x6s0dn4 x1n2onr6",children:(0,i.jsx)("img",{src:n(630213),alt:"No fill icon",draggable:!1})})}function l(){return(0,i.jsx)("div",{className:"xlup9mm x1kky2od x78zum5 xl56j7k x6s0dn4 x1n2onr6",children:(0,i.jsx)("div",{className:"x6jxa94 x1v9usgg x9f619 xmkeg23 x1y0btm7 x158wl1f x1cum3z5 x78zum5 xl56j7k x6s0dn4",children:(0,i.jsx)("span",{className:"xjm9jq1 x1fsd2vl xdq5r5b x1158fpu"})})})}},255140:(e,t,n)=>{n.d(t,{W:()=>s});var i=n(104076);function s({maxColumns:e=3,children:t}){return(0,i.jsx)("div",{className:"xrvj5dj x883omv xmwckwh xe8ttls",style:{"--icon-button-grid-max-columns":e},children:t})}n(120440)},809828:(e,t,n)=>{n.d(t,{Em:()=>h,JE:()=>m,ar:()=>u});var i=n(104076),s=n(716976),a=n(684742),r=n(390579),l=n(120440),o=n(511570),d=n.n(o),c=n(349311);let u=s.forwardRef(function({children:e,showCaret:t,caretStyle:n={},isActive:s,tooltip:l,tooltipType:o,tooltipShowAbove:c=!0,...u},p){return(0,i.jsxs)(a.E,{ref:p,...u,className:d()("menu_button--iconButton--KPBE2 menu_button--baseIconButton--cJj85","menu_button--ghost--PZTUp",{"menu_button--wrapCaret--Gm-cK":!!t,"menu_button--active--AekuE":s}),htmlAttributes:{"data-tooltip":u["aria-disabled"]||u.disabled?void 0:l,"data-tooltip-type":o,"data-tooltip-show-above":!!c||void 0,"data-tooltip-show-below":!c||void 0,"data-tooltip-offset-y":c?-8:8},children:[(0,i.jsx)("span",{"aria-hidden":!0,className:"menu_button--icon--ZpZHz",children:e}),t&&(0,i.jsx)(r.O,{style:n,className:"x11yfylt"})]})}),p=s.forwardRef(function({children:e,iconPrefix:t,iconSuffix:n,styleXStyles:s,...r},o){let{noBorder:d,...c}=r;return(0,i.jsx)(a.E,{ref:o,...c,...l.Ay.props(f.container,g.focusableButton,s,r["aria-expanded"]?f.container_active:null,r.noBorder?f.container_noBorder:null,t?null:f.containerLeftPaddingWithoutIconPrefix,n?null:f.containerRightPaddingWithoutIconSuffix),children:(0,i.jsxs)("div",{className:"xz16r55 x78zum5 x6s0dn4",children:[t,e,n]})})}),m=s.forwardRef(function({tooltip:e,tooltipType:t=c.Ib.TEXT,tooltipShowAbove:n=!1,...s},a){return(0,i.jsx)(p,{ref:a,htmlAttributes:{"data-tooltip":s["aria-disabled"]||s.disabled?void 0:e,"data-tooltip-type":t,"data-tooltip-show-above":!!n||void 0,"data-tooltip-show-below":!n||void 0},...s,styleXStyles:[g.dialogTriggerButton,g.focusableButton]})}),h=s.forwardRef(function(e,t){return(0,i.jsx)(p,{ref:t,...e,styleXStyles:[x.dialogTriggerButton,g.focusableButton]})}),f={container:{kZKoxP:"xxk0z11",kaIpWk:"x19y5rnk",krdFHd:null,kfmiAY:null,kVL7Gh:null,kT0f0o:null,kIxVMA:null,ksF3WI:null,kqGeR4:null,kYm2EN:null,kMzoRj:"xmkeg23",kjGldf:null,k2ei4v:null,kZ1KPB:null,ke9TFa:null,kWqL5O:null,kLoX6v:null,kEafiO:null,kt9PQ7:null,ksu8eU:"x1y0btm7",kJRH4f:null,kVhnKS:null,k4WBpm:null,k8ry5P:null,kSWEuD:null,kDUl1X:null,kPef9Z:null,kfdmCh:null,$$css:!0},container_noBorder:{kMzoRj:"xc342km",kjGldf:null,k2ei4v:null,kZ1KPB:null,ke9TFa:null,kWqL5O:null,kLoX6v:null,kEafiO:null,kt9PQ7:null,ksu8eU:"xng3xce",kJRH4f:null,kVhnKS:null,k4WBpm:null,k8ry5P:null,kSWEuD:null,kDUl1X:null,kPef9Z:null,kfdmCh:null,$$css:!0},container_active:{kWkggS:"xu5wzci",kVAM5u:"x1fzvlhx",kzOINU:null,kGJrpR:null,kaZRDh:null,kBCPoo:null,k26BEO:null,k5QoK5:null,kLZC3w:null,kL6WhQ:null,$$css:!0},containerLeftPaddingWithoutIconPrefix:{kE3dHu:"x8rdmch",kZCmMZ:null,kwRFfy:null,$$css:!0},containerRightPaddingWithoutIconSuffix:{kpe85a:"xctkrei",kZCmMZ:null,kwRFfy:null,$$css:!0}},g={dialogTriggerButton:{kVAM5u:"x1co876m",kzOINU:null,kGJrpR:null,kaZRDh:null,kBCPoo:null,k26BEO:null,k5QoK5:null,kLZC3w:null,kL6WhQ:null,kWkggS:"xon4yw5 xv2f06h x1m5i512",$$css:!0},focusableButton:{kI3sdo:"x1ea3bqm x5hs570",kjBf7l:null,kInvED:null,k3XXqK:null,kMeerF:null,$$css:!0}},x={dialogTriggerButton:{kVAM5u:"x1fzvlhx",kzOINU:null,kGJrpR:null,kaZRDh:null,kBCPoo:null,k26BEO:null,k5QoK5:null,kLZC3w:null,kL6WhQ:null,kWkggS:"xu5wzci xazsp2l x1kqa1b1",$$css:!0}}},761500:(e,t,n)=>{n.d(t,{R:()=>s});var i=n(104076);let s=n(716976).forwardRef(function({margin:e,children:t},n){let s=`${e??4}px`;return(0,i.jsx)("div",{ref:n,className:"menu_control_wrapper--container--cxxo8",style:{marginLeft:s,marginRight:s},children:t})})},168544:(e,t,n)=>{n.d(t,{c:()=>a});var i=n(104076),s=n(965815);function a(){return(0,i.jsx)(s.wv,{margin:4})}},675847:(e,t,n)=>{n.d(t,{h:()=>m});var i=n(266808),s=n(795033),a=n(222714),r=n(466764),l=n(581133),o=n(816622),d=n(585481),c=n(968169),u=n(331497),p=n(463470);function m(){let{windowInnerWidth:e}=(0,a.l)(),t=p.C()?.bottomRightToolsNode,n=(0,s.md)(l.S),m=(0,c.dP)(),h=(0,o.Db)(),f=(0,o.tH)(),g=(0,r.B)(),x=(0,u.ut)(i.Ez5?.interopToolMode(),i.nQ7.SELF),_=(0,o.jw)(),[y]=(0,s.fp)(d.Lk),v=y===d.x.ASSETS&&_&&x===i.nQ7.SELF,b=x===i.nQ7.DESIGN,C=(0,c.qw)(),j=v?g:(f?h:m)+g,k=(0,u.ut)(i.Ez5?.uiState().showPropertiesPanel,!1),w=b&&k?C:0;if(t){let i=t.getBoundingClientRect(),s=e-j-w,a=n?.current?.getBoundingClientRect().width||207,r=j+(s-a)/2+a+12-i.left;r>0&&(w+=2*r)}return{leftOffset:j,rightOffset:w}}},21791:(e,t,n)=>{n.d(t,{rN:()=>B,q_:()=>K,VY:()=>G,$k:()=>U,R8:()=>V});var i=n(716976),s=n(237420),a=n(266808),r=n(980852),l=n(795033),o=n(686549),d=n(725837),c=n(703630),u=n(837975),p=n(276800),m=n(246144),h=n(192075),f=n(58212),g=n(638641),x=n(925658),_=n(621689),y=n(668242),v=n(172996),b=n(408825),C=n(171916);let j=b.z.object({key:b.z.string()}).extend({data:v._$}),k=(0,l.E2)("return-to-file-data",null,j.nullable()),w=(0,l.tx)(null),E=(0,l.eU)(e=>{let t=e(w),n=e(k);return n&&n.key===t?n.data:null},(e,t,n)=>{let i=(0,C.MZ)();return t(k,{data:n,key:i}),i});var T=n(470876),S=n(488355),I=n(249586),N=n(764973),A=n(407261),L=n(211862),M=n(248043),O=n(944350),R=n(104836),P=n(208740),D=n(112773),F=n(769887),z=n(382827);function B(e,t,n){let i=l.zl.get(R.Me),s=d.D.getState(),a=(0,N.Kl)(s);e(y.zE({state:a,from:n,editorType:O._Y.COOPER,team:i??void 0,openNewFileIn:P.ai.NEW_TAB,newFileDataLocalStorageKey:t}))}function G({openFile:e,fileVersion:t,returningToFile:n=!1}){if(null===e||null===t){let n="No openFile or file version";throw(0,m.x1)("storeFigmaContentForCooperCreation",n,{fileKey:e?.key,fileVersion:t},{reportAsSentryError:!0}),Error(n)}let i=(0,r.getActiveTSSceneGraph)().getDirectlySelectedNodes().length>0?a.Mpt?.getSelectedNodesToSend()??[]:a.Mpt?.getTopLevelFramesToSend()??[];if(0===i.length){let e="Empty target node ids";throw(0,m.x1)("storeFigmaContentForCooperCreation",e,{},{reportAsSentryError:!0}),Error(e)}return l.zl.set(n?E:v.Uf,{fileKey:e.key,fileVersion:t,sourceNodeIds:i})}function U(){let e=(0,s.wA)(),t=H();(0,u.R)(()=>{t&&l.zl.set(w,t)},[t],()=>!!t);let n=(0,l.Xr)(_.Tw),r=(0,l.md)(E),o=(0,l.md)(v.Uf),d=r??o,m=(0,L.tS)(),y=(0,z.EI)(),b=!!d,C=b&&!!m&&y,j=(0,l.Xr)(v.$K),k=(0,l.Xr)(w),N=(0,T.J3)(),A=(0,S.j)()&&(0,T.JU)(N),{openCooperPublishFlow:M}=(0,D.t)(),O=(0,x.l)(A);(0,i.useEffect)(()=>(A&&O&&e(f.F.dequeue({matchType:"send-to-buzz-from-design-success-maybe-publish"})),()=>{e(f.F.dequeue({matchType:"send-to-buzz-from-design-success-maybe-publish"}))}),[e,O,A]),(0,u.R)(()=>{n(!1),e(f.F.enqueue({message:(0,h.t)("buzz.send_from_design.copying"),type:"send-to-buzz-from-design-loading",icon:g.zX.SPINNER,timeoutOverride:3e5}))},[e],()=>b);let R=(0,c.H)(i.useCallback(t=>{A?e(f.F.enqueue({message:(0,h.t)("buzz.send_from_design.imported_x_assets_and_maybe_publish",{numAssets:t}),timeoutOverride:1/0,type:"send-to-buzz-from-design-success-maybe-publish",button:{text:(0,h.t)("community.publishing.publish"),action:()=>{M("send-to-buzz-from-design-success-bell"),(0,I.Cu)({trackingContext:"SendToBuzzFromDesignSuccessBell",text:(0,h.t)("community.publishing.publish")})}},onDismiss:p.lQ})):e(f.F.enqueue({message:(0,h.t)("buzz.send_from_design.imported_x_assets",{numAssets:t}),type:"send-to-buzz-from-design-success",timeoutOverride:3e3}))},[e,A,M]));(0,u.R)(()=>{(async()=>{a.glU?.applyNodesFromBuffer(await F.R({fileKey:d.fileKey,selectedGuids:d.sourceNodeIds}),d.fileKey,d.sourceNodeIds,!1);let t=d.sourceNodeIds.length;j(l.Ut),k(l.Ut),await W(),a.Ez5?.cooperFocusView().exitFocusedNodeView(),await W(),a.Ez5?.cooperFocusView().zoomToGridAndRecenter(.55),e(f.F.dequeue({matchType:"send-to-buzz-from-design-loading"})),R.current(t)})()},[e,d?.fileKey,d?.sourceNodeIds,R],()=>C)}function V(){let e=H(),t=(0,l.md)(v.Uf),n=(0,l.md)(E);return!!t||!!n||!!e}function H(){return(0,s.d4)(e=>{let t=e.selectedView;return"sendToBuzzLocalStorageKey"in t?t.sendToBuzzLocalStorageKey:void 0})}function K(e){try{let t=G({openFile:e.openFile,fileVersion:e.fileVersion,returningToFile:!0}),n=(0,M.jN)({file:{key:e.previousBuzzFileKey,editorType:O._Y.COOPER},allowDefaulting:!0}),i=(0,o.NQ)(n,"send-to-buzz-local-storage-key",t);return(0,A.nz)(i,e.previousBuzzFileKey,e.selectedView,e.dispatch),!0}catch(e){return!1}}async function W(){await new Promise(e=>requestAnimationFrame(()=>{e(!0)}))}},652149:(e,t,n)=>{n.d(t,{KB:()=>d,Tj:()=>r,W0:()=>l,yq:()=>o});var i=n(188220),s=n(920597),a=n(28754);function r(e,t,n,r,l,o){return t??=(0,i.g)(),(0,s.WB)().optimisticallyCreate({CollectionItemV2:{[t]:{stableId:t,collectionId:e.databaseId,position:r,status:"draft",createdAt:new Date,updatedAt:new Date,lastPublishedAt:null,statusUpdatedAt:null,contentUpdatedAt:new Date,contentUpdatedByUserId:o??null,createdByUserId:o??null,allFields:[]}}},a.hl.createItem({collection:e,itemId:t})).then(e=>(n(e.data.meta.id),e.data.meta),e=>{l(e)}),t}function l({collection:e,item:t,updatedItemAttributes:n}){(0,s.WB)().optimisticallyUpdate({CollectionItemV2:{[t.databaseId]:{collectionId:e.databaseId,position:n.position,status:n.status}}},a.hl.updateItem({collection:e,item:t,updatedItemAttributes:n}))}async function o({fieldId:e,shouldCreateField:t,fieldSchema:n,item:i,value:r,assetsForPublish:l,jobStatus:o}){var d,c;return t?await (0,s.WB)().optimisticallyCreate({CollectionItemField:{[e]:(d=i.databaseId,{itemId:d,fieldSchemaId:c=n.databaseId,value:r,jobStatus:null,version:"0",createdAt:new Date,updatedAt:new Date,assetsForPublish:null,fieldSchema:{stableId:c}})}},a.hl.updateSingleItemData({fieldId:e,item:i,fieldSchema:n,newValue:r,assetsForPublish:l,jobStatus:o})):await (0,s.WB)().optimisticallyUpdate({CollectionItemField:{[e]:{value:r}}},a.hl.updateSingleItemData({fieldId:e,item:i,fieldSchema:n,newValue:r,assetsForPublish:l,jobStatus:o})).then(e=>e.data.meta)}function d({collection:e,item:t}){(0,s.WB)().optimisticallyDelete({CollectionItemV2:{[t.databaseId]:null}},a.hl.deleteItem({collection:e,item:t})).then(e=>e.data.meta)}},919410:(e,t,n)=>{n.d(t,{WS:()=>p,ZX:()=>m,ut:()=>h});var i=n(188220),s=n(276800),a=n(511295),r=n(652149),l=n(859298),o=n(859804),d=n(239004),c=n(211862),u=n(592726);async function p(){let e=await navigator.clipboard.readText(),t=null;try{t=JSON.parse(e)}catch(e){return null}if(!t||!t.fileKey||!t.name||!t.fieldSchemas||!t.items)return null;for(let e of t.fieldSchemas)if(!e.name||!e.fieldType||!e.position)return null;for(let e of t.items)for(let t of e.fields)if(!t.fieldSchemaId)return null;return t}function m(){let e=(0,c.tS)();return async t=>{if(!e)return null;let n=await (0,l.X)({collectionStableId:t});if(null==n)return(0,d.AK)("items is collection",{collectionId:t}),null;let i=n.name,s=n.description,a=n.fieldSchemas.map(e=>({name:e.name,fieldType:e.fieldType,position:e.position,required:e.required,fieldSchemaId:e.id})),r=await (0,o.J)({collectionStableId:t});return null==r?((0,d.AK)("items is null",{collectionId:t}),null):JSON.stringify({name:i,description:s,fileKey:e,fieldSchemas:a,items:r.map(e=>{let t=[];for(let n of e.fields??[])t.push({fieldSchemaId:n.fieldSchemaId,value:n.value});return{position:e.position,fields:t}})})}}function h(){let e=(0,c.tS)(),t=(0,u.TA)();return async n=>{if(!e)return;let o=n.fieldSchemas.map(e=>({id:(0,i.g)(),name:e.name,fieldType:e.fieldType,required:!!e.required,position:e.position,properties:{},action:"create",version:"1"})),c=await (0,a.Qw)({id:null,name:n.name,description:n.description,fileKey:e,fields:o});if(null==c)return;let u=c.id,p=await (0,l.X)({collectionStableId:u});if(null==p){(0,d.AK)("newCollection is null",{newCollectionId:u});return}let m=p.fieldSchemas,h={};for(let e of m){let t=n.fieldSchemas.find(t=>t.name===e.name)?.fieldSchemaId;t&&(h[t]=e.id)}for(let e of n.items)(0,r.Tj)(p,void 0,t=>{for(let n of e.fields){let{value:e}=n;if(null==e){(0,d.AK)("Field value is null during import",{fieldSchemaId:n.fieldSchemaId});continue}let s=h[n.fieldSchemaId];if(null==s){(0,d.AK)("Field schema ID mapping not found during import",{fieldSchemaId:n.fieldSchemaId});continue}let a=p.fieldSchemas.find(e=>e.id===s);if(null==a){(0,d.AK)("Field schema not found during import",{newFieldSchemaId:s});continue}let l={databaseId:t};(0,r.yq)({fieldId:(0,i.g)(),shouldCreateField:!0,fieldSchema:a,item:l,value:e})}},e.position,s.lQ,t??void 0)}}},546001:(e,t,n)=>{n.d(t,{L:()=>s});var i=n(716976);function s(e,t,n){i.useEffect(()=>{let i=i=>{let s=i.target;n&&!s.isConnected||e.current?.contains(s)||t()};return document.addEventListener("click",i),()=>{document.removeEventListener("click",i)}})}},407012:(e,t,n)=>{n.d(t,{A:()=>V});var i=n(104076),s=n(716976),a=n(754245),r=n(237420),l=n(420680),o=n(821655),d=n(369729),c=n(302727),u=n(293422),p=n(475477),m=n(419822),h=n(225654),f=n(954068),g=n(812714),x=n(166887),_=n(755444),y=n(833805),v=n(140490),b=n(816565),C=n(192075),j=n(58212),k=n(407664),w=n(296217),E=n(346670),T=n(373547),S=n(243690),I=n(276800),N=n(546001),A=n(601167),L=n(3519),M=n(786069);function O({libraryKey:e,items:t,setItems:n}){let[a,r]=(0,s.useState)(!1),[l,o]=(0,s.useState)(0),d=(0,s.useRef)(null),c=(0,s.useRef)(null);(0,N.L)(d,()=>{r(!1),p("")},!0);let[u,p]=(0,s.useState)(""),{result:m,isLoading:h}=(0,M.F)({searchTerm:u,libraryKey:e}),f=s.useMemo(()=>m.filter(e=>!t.some(t=>t.value===e.subtitle)).map(e=>({title:e.subtitle})),[m,t]),g=(e,i)=>{t.find(t=>t.value===e.title)||(n(t=>[...t,{value:e.title}]),o(i),p(""))};return(0,i.jsxs)("div",{ref:d,className:"github_directory_multiselect--container--KB2cL",children:[(0,i.jsx)("div",{className:"github_directory_multiselect--inputContainer--GzF0K",children:(0,i.jsx)(A.i6,{items:t,maxItems:99,onAddItem:I.lQ,onClearItems:()=>n([]),onFocus:()=>r(!0),onKeyDown:e=>{if("ArrowDown"===e.key){if(l<f.length-1)return o(l+1),e.preventDefault(),!0}else if("ArrowUp"===e.key){if(l>0)return o(l-1),e.preventDefault(),!0}else if("Enter"===e.key)return g(f[l],l),e.preventDefault(),!0;else if("Escape"===e.key)return r(!1),o(0),e.currentTarget.blur(),e.preventDefault(),e.stopPropagation(),!0;return!1},onRemoveLastItem:e=>{n(t=>t.filter((t,n)=>n!==e))},onRequestPlaceholder:()=>"",onValueChange:e=>p(e),value:u})}),(0,i.jsx)(L.O,{ref:c,shouldBeVisible:a,isLoading:h,items:f,selectedIndex:l,onItemSelect:g})]})}let R="github_settings_modal--header--GcQVs",P="github_settings_modal--headerImage--rXjBx",D="github_settings_modal--pageTitle--xUQd9",F="github_settings_modal--label--s5yF6",z="github_settings_modal--checkbox--Uxs42",B="github_settings_modal--checkboxContainer--041f2",G="github_settings_modal--icon--3ULs9",U="github_settings_modal--inputContainer--aSQTw";function V({onClose:e,onBack:t,onSuccess:n,libraryKey:s,isDirectorySelection:r=!1}){return(0,i.jsx)(v.u,{label:"GitHubSettingsModalWithPortal",children:(0,a.createPortal)((0,i.jsx)("div",{className:"github_settings_modal--portal--XG8NU",children:(0,i.jsx)(H,{libraryKey:s,onClose:e,onBack:t,onSuccess:n,isDirectorySelection:r})}),document.body)})}function H({onClose:e,onBack:t,onSuccess:n,libraryKey:a,isDirectorySelection:r=!1}){let[c,u]=(0,s.useState)(r),p=(0,w.OG)(a),m="dark"===(0,T.DP)(),f=(0,S.B)(a).unwrapOr(null),x=m?(0,_.ck)("b43ae367a8626405bff148b565f27a2c216474d8"):(0,_.ck)("6cf2ccf30dc4e0aa87883c3f3b15eaf223418950"),y=p?.availableRepositories.length??0,v=p&&p.availableRepositories.length>=100,b=(0,s.useMemo)(()=>c?(0,i.jsx)(X,{onClose:()=>{u(!1),n?.()},libraryKey:a}):y>1?(0,i.jsx)(K,{onClose:e,onSelected:()=>{(0,g.kc)().dt_component_browser_directory_selection?u(!0):n?.()},libraryName:f??"",illustrationUrl:x,libraryKey:a,repositories:p}):1===y?(0,i.jsx)(q,{libraryName:f??"",illustrationUrl:x,libraryKey:a,repositories:p,onNext:()=>{(0,g.kc)().dt_component_browser_directory_selection?u(!0):n?.()}}):(0,i.jsx)(W,{illustrationUrl:x,onClose:e}),[x,c,p,a,f,e,n,y]);return(0,i.jsxs)("div",{className:"github_settings_modal--background--SRXbb",children:[(0,i.jsx)("div",{className:"github_settings_modal--closeButton--LuAer",children:(0,i.jsx)(l.K,{"aria-label":(0,C.t)("dev_handoff.component_browser_onboarding.close"),onClick:t,children:(0,i.jsx)(h.X,{})})}),(0,i.jsxs)("div",{className:"github_settings_modal--contentContainer--NstgO",children:[(0,i.jsx)("div",{className:"github_settings_modal--content--iP1MM",children:(0,i.jsx)("div",{className:"github_settings_modal--githubContent--XMc6S",children:b})}),v&&(0,i.jsx)("div",{children:(0,i.jsx)(o.Cs,{variant:"brand",children:(0,i.jsx)(d.Q,{title:(0,C.t)("dev_handoff.component_browser_onboarding.github_repo_limit_banner_title",{repo_max_count:100}),children:(0,C.t)("dev_handoff.component_browser_onboarding.github_repo_limit_banner_body")})})})]})]})}function K({libraryName:e,illustrationUrl:t,libraryKey:n,repositories:a,onClose:r,onSelected:l}){let o=(0,s.useMemo)(()=>a?.selectedRepositories??[],[a?.selectedRepositories]),[d,p]=(0,s.useState)(void 0);(0,s.useEffect)(()=>{o.length>0&&!d&&p(o[0]?.id)},[o,d]);let m=(0,y.n_)(E.XU),h=(0,s.useMemo)(()=>{let e=a?.availableRepositories.find(e=>e.id===d)?.name,t=o[0]?.name;return e??t??(0,C.t)("dev_handoff.component_browser_onboarding.github_select_repository")},[a?.availableRepositories,d,o]),x=async()=>{await m.mutate({libraryKey:n,repositoryIds:[d]}),l?.()};return(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:R,children:[(0,i.jsx)(b.oW,{src:t,alt:(0,C.t)("dev_handoff.component_browser_onboarding.connected_projects_icon"),className:P}),(0,i.jsx)("span",{className:D,children:(0,C.tx)("dev_handoff.component_browser_onboarding.github_repository_selection",{library_name:e??""})})]}),(0,i.jsxs)("div",{className:B,children:[(0,i.jsxs)("div",{className:z,children:[(0,i.jsx)("div",{className:G,children:(0,i.jsx)(f.g,{})}),(0,i.jsx)("span",{className:F,children:(0,C.t)("dev_handoff.component_browser_onboarding.github_can_revoke_access")})]}),(0,i.jsxs)("div",{className:z,children:[(0,i.jsx)("div",{className:G,children:(0,i.jsx)(f.g,{})}),(0,i.jsx)("span",{className:F,children:(0,C.t)("dev_handoff.component_browser_onboarding.github_issues_access")})]})]}),(0,i.jsxs)("div",{className:U,children:[(0,i.jsxs)(c.Root,{onChange:p,value:d,children:[(0,i.jsx)(c.ManuallyLabeledTrigger,{id:"github-repo-select",placeholder:(0,C.t)("dev_handoff.component_browser_onboarding.github_select_repository"),width:"fill",size:"lg",children:(0,i.jsx)("span",{className:"github_settings_modal--select--nzXW-",children:h})}),(0,i.jsx)(c.Container,{children:a?.availableRepositories?.map(e=>i.jsx(c.Option,{value:e.id,children:e.name},e.id))})]}),(0,i.jsx)(u.Pw,{variant:"primary",disabled:!d||m.isLoading,onClick:x,children:(0,g.kc)().dt_component_browser_directory_selection?(0,C.t)("dev_handoff.component_browser_onboarding.continue_button"):(0,C.t)("dev_handoff.component_browser_onboarding.github_connect_repository")}),(0,i.jsx)(u.$n,{variant:"link",onClick:r,children:(0,C.t)("dev_handoff.component_browser_onboarding.cancel")})]})]})}function W({illustrationUrl:e,onClose:t}){return(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:R,children:[(0,i.jsx)(b.oW,{src:e,alt:(0,C.t)("dev_handoff.component_browser_onboarding.connected_projects_icon"),className:P}),(0,i.jsx)("span",{className:D,children:(0,C.t)("dev_handoff.component_browser_onboarding.github_connected_no_repos_title")}),(0,i.jsx)("span",{className:"github_settings_modal--pageSubtitle--EzH30",children:(0,C.t)("dev_handoff.component_browser_onboarding.github_connected_no_repos_description")})]}),(0,i.jsx)("div",{className:"github_settings_modal--buttonSection---NZmo",children:(0,i.jsxs)("div",{className:U,children:[(0,i.jsx)(p.N.Button,{variant:"primary",size:"lg",width:"fill",href:"https://github.com/new",newTab:!0,onClick:t,children:(0,C.t)("dev_handoff.component_browser_onboarding.github_go_to_github")}),(0,i.jsx)(u.$n,{variant:"link",onClick:t,children:(0,C.t)("dev_handoff.component_browser_onboarding.cancel")})]})})]})}function q({libraryName:e,illustrationUrl:t,libraryKey:n,repositories:s,onNext:a}){let r=(0,y.n_)(E.XU),l=s?.availableRepositories[0];return(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:R,children:[(0,i.jsx)(b.oW,{src:t,alt:(0,C.t)("dev_handoff.component_browser_onboarding.connected_projects_icon"),className:P}),(0,i.jsx)("span",{className:D,children:(0,C.tx)("dev_handoff.component_browser_onboarding.github_connection_success",{library_name:e,repository_name:l?.name??"GitHub"})})]}),(0,i.jsxs)("div",{className:B,children:[(0,i.jsxs)("div",{className:z,children:[(0,i.jsx)("div",{className:G,children:(0,i.jsx)(f.g,{})}),(0,i.jsx)("span",{className:F,children:(0,C.t)("dev_handoff.component_browser_onboarding.github_can_revoke_access")})]}),(0,i.jsxs)("div",{className:z,children:[(0,i.jsx)("div",{className:G,children:(0,i.jsx)(f.g,{})}),(0,i.jsx)("span",{className:F,children:(0,C.t)("dev_handoff.component_browser_onboarding.github_issues_access")})]})]}),(0,i.jsx)("div",{className:U,children:(0,i.jsx)(u.Pw,{variant:"primary",onClick:()=>{r.mutate({libraryKey:n,repositoryIds:l?[l.id]:[]}),a?.()},children:(0,g.kc)().dt_component_browser_directory_selection?(0,C.t)("dev_handoff.component_browser_onboarding.continue_button"):(0,C.t)("dev_handoff.component_browser_onboarding.github_start_mapping")})})]})}function X({onClose:e,libraryKey:t}){let[n,a]=(0,s.useState)([]),[l,o]=(0,s.useState)(!1),d=(0,w.OG)(t),c=d?.selectedRepositories[0]?.id,p=(0,x.hC)(),{directories:h,isLoading:f,errors:_}=(0,k.v)({libraryKey:t,repositoryId:c||""},{enabled:!!c}),y=(0,r.wA)(),v=(0,s.useMemo)(()=>JSON.stringify(n)!==JSON.stringify(h.map(e=>({value:e}))),[n,h]);(0,s.useEffect)(()=>{_&&_.length>0&&y(j.F.enqueue({message:(0,C.t)("dev_handoff.component_browser_onboarding.directory_selection_error"),error:!0}))},[_,y]);let b=(0,k.L)();(0,s.useEffect)(()=>{h.length>0&&a(h.map(e=>({value:e})))},[h]);let E=async()=>{if(c)try{let i=n.map(e=>e.value);o(!0),await b({libraryKey:t,repositoryId:c,directories:i}),e()}catch(e){y(j.F.enqueue({message:e.message,error:!0}))}finally{o(!1)}};return(0,i.jsxs)("div",{className:"github_settings_modal--directoryContainer--1v0Lz",children:[(0,i.jsx)("h2",{className:D,children:(0,C.t)("dev_handoff.component_browser_onboarding.directory_selection_title")}),(0,i.jsxs)("div",{className:"github_settings_modal--directoryContent--V4Gc8",children:[(0,i.jsx)("p",{className:"github_settings_modal--directoryDescriptionText--KSX3I",children:(0,g.kc)().dt_mcp_include_codebase_context?(0,C.t)("dev_handoff.component_browser_onboarding.directory_selection_description_with_mcp"):(0,C.t)("dev_handoff.component_browser_onboarding.directory_selection_description")}),(0,i.jsx)("div",{className:"github_settings_modal--directoryInputSection---UnbK",children:f?(0,i.jsx)("div",{className:"github_settings_modal--directorySpinnerWrapper--nMcr6",children:(0,i.jsx)(m.k,{})}):(0,i.jsx)(O,{libraryKey:t,items:n,setItems:a})}),(0,i.jsxs)("div",{className:"github_settings_modal--directoryButtonContainer--6S9PF",children:[(0,i.jsx)(u.Pw,{variant:"primary",disabled:f||l||!v,onClick:E,children:h.length>0?(0,C.t)("dev_handoff.component_browser_onboarding.directory_selection_update"):(0,C.t)("dev_handoff.component_browser_onboarding.directory_selection_connect")}),(0,i.jsx)(u.Pw,{variant:"secondary",onClick:()=>{p("component_browser.directory_picker_skipped"),e()},disabled:l,children:(0,C.t)("dev_handoff.component_browser_onboarding.directory_selection_skip")})]})]})]})}},407664:(e,t,n)=>{n.d(t,{L:()=>r,v:()=>a});var i=n(833805),s=n(961457);function a({libraryKey:e,repositoryId:t},n){let a=!!(e&&t&&""!==t.trim()),r=(n?.enabled??!0)&&a,[l]=(0,i.IT)((0,s.iW)({libraryKey:e,repositoryId:t}),{enabled:r});return{directories:l.data?.directories??[],hasLoaded:"loaded"===l.status,isLoading:"loading"===l.status,errors:l.errors}}function r(){return(0,i.gY)(s.l_)}},68106:(e,t,n)=>{n.d(t,{AR:()=>g,Zh:()=>x});var i=n(716976),s=n(507699),a=n(833805),r=n(961457),l=n(899496),o=n(412431),d=n(564914),c=n(483663),u=n(315361),p=n(742549),m=n(643077),h=n(835307),f=n(910372);function g(){let e=(0,c.lR)(),{nodeIds:t,noSelection:n}=function(){let e=(0,p.hA)(),t=(0,u.Tv)(),n=(0,m.dh)(),i=!e&&!t?.length,a=e?[e]:t?.length?t:[n];return{noSelection:i,nodeIds:(0,h.Fk)((e,t)=>{if(!t?.length)return[];let n=[];return t.forEach(t=>{let i=e.get(t);if(i){let e=function(e){let t=e.parentNode;for(;t;){if("SYMBOL"===t.type||"INSTANCE"===t.type)return t;t=t.parentNode}return null}(i);if(e&&e.guid){n.push(e.guid);return}for(let e of(0,s.go)(i))n.push(e)}}),n},a)}}(),{assetKeysFromSelection:a,assetKeyToSourceGuid:r}=(0,i.useMemo)(()=>{let n=[],i={};return t.forEach(t=>{let s=e(t);s&&(n.push(s),i[s]||(i[s]=t))}),{assetKeysFromSelection:n,assetKeyToSourceGuid:i}},[t,e]);return{noSelection:n,assetKeys:[...new Set(a)],assetKeyToSourceGuid:r}}function x({componentKey:e,defaultFilter:t,entrypoint:n,libraryKey:s}){let c=(0,f.oA)(),{assetKeys:u,noSelection:p,assetKeyToSourceGuid:m}=g(),h=new Set(u),x=function({assetKeys:e,componentKey:t,defaultFilter:n,noSelection:s,assetKeyToSourceGuid:o,libraryKey:c}){let[u,p]=(0,a.IT)((0,r.GD)(e),{enabled:e.length>0}),m=(0,i.useMemo)(()=>u.data?function(e){let t=Object.keys(e.components||{}).map(t=>({...e.components[t],type:d.PW.COMPONENT,library_key:t.split(",")[0]})),n=Object.keys(e.state_groups||{}).map(t=>({...e.state_groups[t],type:d.PW.STATE_GROUP,library_key:t.split(",")[0]}));return(0,l.rI)(t,n)}(u.data):null,[u.data]);return{...(0,l.Hf)({libraryKey:c,componentKey:t,componentsAndStateGroups:m,defaultFilter:n,scope:"page",assetKeyToSourceGuid:o}),status:u.status,refetch:p.refetch,noSelection:s}}({libraryKey:s,assetKeys:(0,o.kf)(h,c),componentKey:e,defaultFilter:t,noSelection:p,assetKeyToSourceGuid:m});return{...(0,l.IN)({displayedComponent:x.displayedComponent,filteredComponents:x.filteredComponents,componentBrowserListRowData:x.componentBrowserListRowData,setComponentBrowserListRowData:x.setComponentBrowserListRowData,bulkSuggestions:x.bulkSuggestions,entrypoint:n}),...x,entrypoint:n}}},435219:(e,t,n)=>{n.d(t,{U:()=>o});var i=n(104076),s=n(716976),a=n(511570),r=n.n(a),l=n(762564);function o(e){let t=(0,s.useRef)(null),[n,a]=(0,s.useState)(0),[o,d]=(0,s.useState)(!1);(0,s.useEffect)(()=>{let e=t.current;if(!e)return;let n=new ResizeObserver(t=>{for(let n of t)n.target===e&&a(n.contentRect.height)});return n.observe(e),()=>{n.disconnect()}},[]);let c=Math.floor((n-18)/18),u=c-2,{section:p,...m}=e,h=(0,s.useMemo)(()=>{let e=[...p.lines];for(;e.length<c;)e.push({code:"",indent:0});return{...p,lines:e,collapseAfterIndex:p.lines.length>c?u:c}},[p,c,u]);return(0,i.jsx)("div",{ref:t,className:"code_panel_responsive--codePanelResponsiveOuterDiv--S14QB",children:(0,i.jsx)("div",{className:r()("code_panel_responsive--codePanelResponsiveInnerDiv--BE0YB",{"code_panel_responsive--codePanelResponsiveInnerDivExpanded--XPUQl":o}),children:u>0&&(0,i.jsx)(l.yT,{...m,section:h,onShowMore:()=>d(!0)})})})}},961457:(e,t,n)=>{n.d(t,{Mo:()=>m,Fq:()=>f,GD:()=>u,wP:()=>h,t2:()=>c,iW:()=>p,BR:()=>j,LO:()=>v,RL:()=>g,_E:()=>b,S6:()=>y,l_:()=>C,K5:()=>x,QA:()=>_}),n(716976),n(387092),n(681958);var i=n(812714);async function s(e){await new Promise(e=>setTimeout(e,500));let t={};return e.assets.forEach(e=>{t[e.key]=Array.from({length:5}).map((t,n)=>({codebase_component_id:`mock-component-id-${n+1}`,thumbnail_url:`https://example.com/thumbnail${n+1}.png`,name:`MockComponent${n+1}`,src_path:`src/components/MockComponent${n+1}.tsx`,scanned_at:new Date().toISOString(),confidence_level:0===n?"high":"low",score:.95-.1*n,tracking_query_id:`mock-tracking-query-id-${e.key}`}))}),{results:t}}n(833805),n(447247);var a=n(893393);n(904017),n(564914);var r=n(34927),l=n(621971),o=n(113139);let d=new class{constructor(){this.SearchCodeSuggestionsSchemaValidator=(0,o.vh)(),this.SearchBulkCodeSuggestionsSchemaValidator=(0,o.vh)()}searchCodeSuggestions(e){return this.SearchCodeSuggestionsSchemaValidator.validate(async({xr:t})=>await t.post("/api/search/code_suggestions",o.td.toAPIParameters(e)))}searchBulkCodeSuggestions(e){return this.SearchBulkCodeSuggestionsSchemaValidator.validate(async({xr:t})=>await t.post("/api/search/code_suggestions_bulk",o.td.toAPIParameters(e)))}},c=a.M4.Query({fetch:async e=>(await r.Q.getLibraryPublishedComponentsWithCodeConnect({libraryKey:e})).data.meta,key:"libraryPublishedComponentsCodeConnect"}),u=a.M4.Query({fetch:async e=>(await r.Q.getInContextPublishedComponents(e)).data.meta,key:"inContextPublishedComponentsCodeConnect"}),p=a.M4.Query({fetch:async e=>(await r.Q.getRepositoryDirectories(e)).data.meta,key:"repositoryDirectories"}),m=a.M4.Query({fetch:async e=>(0,i.kc)().dt_ccv2_dd?s(e):(await d.searchBulkCodeSuggestions(e)).data.meta,key:"bulkSuggestions"}),h=a.M4.Query({fetch:async e=>(await r.Q.getLibraryIngestionStatus({libraryKey:e})).data.meta,key:"libraryIngestionStatus"}),f=(a.M4.Query({fetch:async e=>(await l.$W.getCodeSuggestions(e)).data.meta.results}),a.M4.Query({fetch:async e=>(await r.Q.getGithubSourceFileContents(e)).data.meta})),g=a.M4.Mutation(e=>r.Q.createCodeConnectMap(e)),x=a.M4.Mutation(async e=>{await r.Q.updateCodeConnectMap(e)}),_=a.M4.Mutation(async e=>{await r.Q.updateCodeConnectUserRules(e)}),y=a.M4.Mutation(async e=>{await r.Q.deleteCodeConnectMap(e)}),v=a.M4.Mutation(e=>r.Q.createCodeConnectBulkMap(e)),b=a.M4.Mutation(async e=>{await r.Q.deleteCodeConnectBulkMap(e)}),C=a.M4.Mutation(async({libraryKey:e,repositoryId:t,directories:n},{query:i})=>{let s=await r.Q.setRepositoryDirectories({libraryKey:e,repositoryId:t,directories:n});return i.mutate(p({libraryKey:e,repositoryId:t}),()=>({directories:n})),s.data.meta}),j=a.M4.Query({fetch:async e=>(await r.Q.getCodeSnippet(e)).data.meta})},890229:(e,t,n)=>{function i(e){return"key"in e?e.key:"component_key"in e?e.component_key:null}n.d(t,{I:()=>i,W:()=>s});let s={all:{value:"all"},connected:{value:"connected"},notConnected:{value:"notConnected"},ignored:{value:"ignored"},suggestionsAvailable:{value:"suggestionsAvailable"}}},899496:(e,t,n)=>{n.d(t,{rI:()=>M,IN:()=>N,Hf:()=>A,WA:()=>L});var i=n(716976),s=n(237420),a=n(260425),r=n(812714),l=n(795033),o=n(166887),d=n(833805),c=n(225125),u=n(192075),p=n(58212),m=n(638641),h=n(296217),f=n(961457),g=n(117905),x=n(412431),_=n(447247),y=n(890229),v=n(693168),b=n(37495),C=n(301510),j=n(147046),k=n(211862),w=n(657878),E=n(592726),T=n(276347),S=n(910372),I=n(407664);function N({displayedComponent:e,filteredComponents:t,componentBrowserListRowData:n,setComponentBrowserListRowData:g,bulkSuggestions:x,entrypoint:_}){let C=(0,E.iZ)(),{Sprig:N}=(0,c.A)(),[A,L]=(0,i.useState)(-1),M=(0,i.useRef)([]),[O,R]=(0,i.useState)(null),P=(0,i.useCallback)(e=>{R(e)},[]);(0,i.useEffect)(()=>{M.current=M.current.slice(0,n.length)},[n.length]);let D=(0,w._6)(),F=(0,s.wA)(),z=(0,d.gY)(f.RL),B=(0,d.gY)(f.S6),G=(0,d.gY)(f.K5),U=(0,d.gY)(f.QA),V=(0,d.gY)(f.LO),H=(0,d.gY)(f._E),K=function(){let e=(0,k._G)(),t=(0,h.OG)(e),n=t?.selectedRepositories?.[0],{directories:s}=(0,I.v)({libraryKey:e,repositoryId:n?.id||""}),a=(0,o.hC)();return(0,i.useCallback)(({suggestions:t,path:n,componentName:i,trackingProps:r,libraryKey:l})=>{let o=!!t&&t.length>0,d=t?t.findIndex(e=>e.src_path===n&&e.name===i):-1,c=!!t&&-1===d&&t.some(e=>e.src_path===n),u=l===e&&s&&!s.some(e=>n.startsWith(e)),p=t?.[0]?.tracking_query_id;a("component_browser.code_connect_component_connected",{componentName:i,sourcePath:n,location:r.location,source:r.source,componentHasSuggestions:o,pickedSuggestionIndex:d,pickedSuggestionPathButWrongComponent:c,componentNotInSpecifiedDirectories:u,sessionId:r.sessionId,componentBrowserEntrypoint:r.entrypoint,queryId:p})},[s,e,a])}(),W=(0,l.Xr)(T.mO),q=(0,S.Fl)(),X=(0,o.hC)(),Y=(0,i.useCallback)(e=>{if(void 0!==e)for(let n=e+1;n<M.current.length;n++){let e=t[n],i=e?.component.code_connect_info.v1.state==="ignored";if(e&&!i&&(!e.selectedFile||!e.selectedComponent)){let e=M.current[n];if(e){e.focus();break}}}},[M,t]),Z=(0,i.useCallback)(e=>{let{codeConnectId:t,row:n}=e,i=n?.sourceIndex;if(n&&void 0!==i){let s={...n,component:{...n.component,code_connect_info:{...n.component.code_connect_info,v1:{...n.component.code_connect_info.v1,state:"not_connected",id:void 0}}},isSelectedFromSuggestion:!1};t?(g(e=>{let t=[...e];return t[i]={...s,isLoading:!0},t}),B({codeConnectId:t}).then(()=>{let t="connected"!==n.component.code_connect_info.v1.state,a=t?(0,u.t)("dev_handoff.component_browser.removed_ignore_message",{componentName:n.component.name}):(0,u.t)("dev_handoff.component_browser.disconnected_message",{componentName:n.component.name}),l=(0,y.I)(n.component);(0,r.kc)().dt_component_browser_optimistic_update_query?q({componentKey:l,status:"not_connected"}):l&&W(e=>e?{...e,status:{...e.status,[l]:"not_connected"}}:{status:{[l]:"not_connected"},loadingStatus:"loaded"}),X(t?"component_browser.code_connect_component_ignore_removed":"component_browser.code_connect_component_disconnected",{nodeId:n.component.node_id,location:e.trackingProps.location}),g(e=>{let t=[...e];return t[i]={...s,isLoading:!1},t}),F(p.F.enqueue({message:a,type:"Disconnect component"})),e.callback?.()}).catch(t=>{a.vF.error("Error deleting code connect map",t),g(e=>{let t=[...e];return t[i]={...n,isLoading:!1},t}),F(p.F.enqueue({message:t.message,type:"Disconnect component error",error:!0})),e.callback?.(t)})):g(e=>{let t=[...e];return t[i]={...s,isLoading:!1},t})}},[B,F,g,X,W,q]),J=(0,i.useCallback)(e=>{let{row:t,sourceIndex:n,trackingProps:i}=e,s=t.selectedFile,l=t.selectedComponent,o=s?.metadata?.path??"",d=t.component.node_id,c=s?.metadata,m=(0,y.I)(t.component);if((0,r.kc)().dt_component_browser_optimistic_update_query?q({componentKey:m,status:"connected"}):m&&W(e=>e?{...e,status:{...e.status,[m]:"connected"}}:{status:{[m]:"connected"},loadingStatus:"loaded"}),!s||!o)return;let h={...t,component:{...t.component,code_connect_info:{...t.component.code_connect_info,v1:{...t.component.code_connect_info.v1,author_name:C?.name,author_id:C?.id,state:"connected",type:"component_browser",figmadoc:JSON.stringify([{repository:c?.repository,name:l?.title}])}}},isSelectedFromSuggestion:!1,inputValue:""};g(e=>{let t=[...e];return t[n]={...h,isLoading:!0},t}),z({library_key:t.component.library_key,node_id:d,template:"",component_name:l?.title,source_path:o,status:"connected",repository:c?.repository,origin:i.location,entrypoint:i.entrypoint}).then(e=>{let s=e.data.meta.code_connect_id;g(e=>{let t=[...e];return t[n]={...h,isLoading:!1,component:{...h.component,code_connect_info:{...h.component.code_connect_info,v1:{...h.component.code_connect_info.v1,id:s,type:"component_browser",figmadoc:JSON.stringify([{repository:c?.repository,name:l?.title}])}}}},t}),F(p.F.enqueue({message:(0,u.t)("dev_handoff.component_browser.connected_message",{componentName:t.component.name}),type:"Connected component"})),K({suggestions:x[t.assetKey],path:o,componentName:l?.title??"",trackingProps:i,libraryKey:t.component.library_key}),N("track",v.I)}).catch(e=>{a.vF.error("Error creating code connect map",e),g(e=>{let i=[...e];return i[n]={...t,isLoading:!1},i}),F(p.F.enqueue({message:e.message,type:"Connect component error",error:!0}))})},[N,z,F,g,C,W,x,K,q]),Q=(0,i.useCallback)(e=>{let{sourceIndex:t,value:i}=e,s=n[t];s&&g(e=>{let n=[...e];return n[t]={...s,inputValue:i},n})},[n,g]),$=(0,i.useCallback)(e=>{let{row:t,sourceIndex:n,trackingProps:i,save:s=!0}=e,r=t.selectedFile,l=t.selectedComponent,o=r?.metadata?.path??"",d=t.component.node_id,c=t.component.code_connect_info.v1.id;if(!r||!o||(g(e=>{let i=[...e];return i[n]={...t,inputValue:""},i}),!s||!c))return;let m={...t,component:{...t.component,code_connect_info:{...t.component.code_connect_info,v1:{...t.component.code_connect_info.v1,author_name:C?.name,author_id:C?.id,state:"connected",type:"component_browser"}}},isLoading:!0,inputValue:""};g(e=>{let t=[...e];return t[n]={...m},t}),G({code_connect_id:c,library_key:t.component.library_key,node_id:d,template:"",component_name:l?.title,source_path:o,status:"connected"}).then(()=>{g(e=>{let t=[...e];return t[n]={...m,isLoading:!1,component:{...m.component,code_connect_info:{...m.component.code_connect_info,v1:{...m.component.code_connect_info.v1,id:c,type:"component_browser"}}}},t}),F(p.F.enqueue({message:(0,u.t)("dev_handoff.component_browser.updated_message",{componentName:t.component.name})})),X("component_browser.code_connect_component_updated",{componentName:l?.title??"",sourcePath:o,location:i.location,source:i.source,componentBrowserEntrypoint:i.entrypoint})}).catch(e=>{a.vF.error("Error updating code connect map",e),g(e=>{let i=[...e];return i[n]={...t,isLoading:!1},i}),F(p.F.enqueue({message:e.message,error:!0}))})},[G,F,g,X,C]),ee=(0,i.useCallback)(e=>{let{currentRowIndex:t,sourceIndex:i,selectedComponent:s,action:a,save:r=!0}=e,l=n[i];if(l){if("create"===a){let n={...l,selectedComponent:s,inputValue:"",isSelectedFromSuggestion:!1};X("component_browser.code_component_connection_data_entered",{nodeId:l?.component.node_id,field:"code_component",location:e.trackingProps.location,source:e.trackingProps.source,componentBrowserEntrypoint:e.trackingProps.entrypoint,value:e.selectedComponent?.title,sessionId:e.trackingProps.sessionId,queryId:e.trackingProps.queryId}),g(e=>{let t=[...e];return t[i]=n,t}),l.selectedFile&&r&&(l.component.code_connect_info.v1.id?$({row:{...l,selectedComponent:s},sourceIndex:i,trackingProps:e.trackingProps}):J({row:{...l,selectedComponent:s},sourceIndex:i,trackingProps:e.trackingProps}),void 0!==t&&Y(t))}else"delete"===a&&l&&$({save:r,sourceIndex:i,row:{...l,selectedComponent:null,inputValue:"",isSelectedFromSuggestion:!1},trackingProps:e.trackingProps})}},[n,J,$,g,X,Y]),et=(0,i.useCallback)(e=>{let{sourceIndex:t,selectedFile:i,currentRowIndex:s,save:a=!0}=e,r=n[t];if(X("component_browser.code_component_connection_data_entered",{nodeId:r?.component.node_id,field:"code_file",location:e.trackingProps.location,source:e.trackingProps.source,componentBrowserEntrypoint:e.trackingProps.entrypoint,value:e.selectedFile?.title,sessionId:e.trackingProps.sessionId,queryId:e.trackingProps.queryId}),r){if(i){if(g(e=>{let n=[...e];return n[t]={...r,inputValue:"",selectedFile:i,isLoading:!1,isSelectedFromSuggestion:!1},n}),!a)return;J({row:{...r,selectedFile:i},sourceIndex:t,trackingProps:e.trackingProps})}else Z({currentRowIndex:s,codeConnectId:r.component.code_connect_info.v1.id,row:{...r,inputValue:"",selectedFile:null,selectedComponent:null,isSelectedFromSuggestion:!1},trackingProps:e.trackingProps})}},[n,J,Z,X,g]),en=(0,i.useCallback)(e=>{let{row:t,sourceIndex:n,trackingProps:i,currentRowIndex:s}=e;t.selectedFile||t.selectedComponent?t.selectedFile&&!t.selectedComponent?ee({sourceIndex:n,selectedComponent:t.inputValue?{title:t.inputValue??""}:null,action:"create",trackingProps:i}):J({row:t,sourceIndex:n,trackingProps:i}):(et({sourceIndex:n,selectedFile:{title:t.inputValue??"",metadata:{path:t.inputValue??"",isCustomLink:!1,repository:{id:"",name:""}}},trackingProps:i}),Y(s)),Y(s)},[J,ee,et,Y]),ei=(0,i.useCallback)(e=>{let{selectedComponents:t,bulkSuggestions:n,trackingProps:i,ignore:s}=e,r=[];t.forEach(e=>{let t=e.component.code_connect_info?.v1?.state;if("connected"===t||"ignored"===t)return;let i=(n[e.assetKey]||[])[0];i&&r.push({component:e,asset:{library_key:e.component.library_key,node_id:e.component.node_id,component_name:i.name||"",source_path:i.src_path||"",status:s?"ignored":"connected"},bestSuggestion:i})});let l=[];g(e=>{let t=[...e];return l=r.map(({component:e})=>t[e.sourceIndex]??e),r.forEach(({component:e,bestSuggestion:n})=>{let i=e.sourceIndex;void 0!==i&&t[i]&&(t[i]={...t[i],isLoading:!0,selectedFile:n?{title:n.src_path,metadata:{path:n.src_path,isCustomLink:!1,repository:{id:"",name:""}}}:null,selectedComponent:n&&n.name?{title:n.name}:null,inputValue:"",component:{...t[i].component,code_connect_info:{...t[i].component.code_connect_info,v1:{...t[i].component.code_connect_info.v1,state:s?"ignored":"connected",author_name:C?.name,author_id:C?.id}}}})}),t});let o={current:l};V({assets_to_map:r.map(e=>e.asset)}).then(e=>{let{success_count:t,successful_asset_mappings:n}=e.data.meta;g(t=>{let n=[...t];return e.data.meta.successful_asset_mappings.forEach(e=>{let t=n.findIndex(t=>t.assetKey===e.asset_key);-1!==t&&n[t]&&(n[t]={...n[t],isLoading:!1,component:{...n[t].component,code_connect_info:{...n[t].component.code_connect_info,v1:{...n[t].component.code_connect_info.v1,id:e.code_connect_id}}}})}),n});let l=async()=>{g(e=>{let t=[...e];return o.current.forEach(e=>{let n=t.findIndex(t=>t.assetKey===e.assetKey);-1!==n&&(t[n]=e)}),t});let e=[];for(let t of n)try{let n=o.current.find(e=>e.assetKey===t.asset_key);n&&("not_connected"===n.component.code_connect_info.v1.state||!n.component.code_connect_info.v1.state)&&e.push(t.code_connect_id)}catch(e){a.vF.error("Error preparing for bulk undo",e)}if(e.length>0)try{await H({code_connect_ids:e})}catch(e){F(p.F.enqueue({message:s?(0,u.t)("dev_handoff.component_browser.bulk_mapping.selected_components_bell.error_undo_ignored"):(0,u.t)("dev_handoff.component_browser.bulk_mapping.selected_components_bell.error_undo_connected"),error:!0}))}};F(p.F.enqueue({message:s?(0,u.t)("dev_handoff.component_browser.bulk_mapping.selected_components_bell.confirmation_ignored",{count:t}):(0,u.t)("dev_handoff.component_browser.bulk_mapping.selected_components_bell.confirmation_connected",{count:t}),icon:m.zX.CHECK_WITH_CIRCLE,button:{text:(0,u.t)("general.undo"),action:()=>{l()}}})),X(s?"component_browser.code_connect_components_bulk_ignored":"component_browser.code_connect_components_bulk_connected",{componentCount:r.length,location:i.location,source:i.source})}).catch(e=>{a.vF.error("Error connecting/ignoring components",e),g(e=>{let t=[...e];return r.forEach(({component:e},n)=>{let i=e.sourceIndex;void 0!==i&&t[i]&&l[n]&&(t[i]=l[n])}),t}),F(p.F.enqueue({message:s?(0,u.t)("dev_handoff.component_browser.bulk_mapping.selected_components_bell.error_ignored"):(0,u.t)("dev_handoff.component_browser.bulk_mapping.selected_components_bell.error_connected"),error:!0}))})},[V,g,F,C,X,H]),es=(0,i.useCallback)(t=>{let n=t?.component;if(e?.assetKey!==t?.assetKey){if(L(-1),"componentBrowserLibrary"===D.view){let e={...D,componentKey:n&&(0,y.I)(n)||void 0};F(j.sf(e))}else if("fullscreen"===D.view){let e={...D,showDevModeComponentBrowser:!0,devModeComponentBrowserBackButtonTargetNodeId:n?.node_id,componentKey:n&&(0,y.I)(n)||void 0};F(j.sf(e))}}},[D,F,e?.assetKey]),ea=(0,i.useCallback)(()=>{if(!e){t[0]&&es(t[0]);return}let n=t.findIndex(t=>(0,y.I)(t.component)===(0,y.I)(e.component));if(-1===n){-1!==A&&t[A]?es(t[A]):t[0]&&es(t[0]);return}let i=t[n+1];i&&es(i)},[e,t,es,A]),er=(0,i.useCallback)(()=>{if(!e){let e=t[t.length-1];e&&es(e);return}let n=t.findIndex(t=>(0,y.I)(t.component)===(0,y.I)(e.component));if(-1===n){let e=t[A-1];-1!==A&&e?es(e):t[0]&&es(t[0]);return}let i=t[n-1];i&&es(i)},[e,t,es,A]),el=(0,i.useCallback)(({filepath:e,componentName:t,item:n,currentRowIndex:i,sourceIndex:s})=>{en({row:{...n,selectedFile:{title:e,metadata:{path:e,isCustomLink:!1,repository:{id:"",name:""}}},selectedComponent:t?{title:t}:null},currentRowIndex:i,sourceIndex:s,trackingProps:{location:"list_view",source:"ai_codebase_suggestion",entrypoint:_,sessionId:"todo"}})},[en,_]);return{onDeleteMapping:Z,onFileChanged:et,onComponentChanged:ee,onConnectMapping:e=>{let{currentRowIndex:t,row:n}=e,i=n.sourceIndex,s=n.component,r=n.selectedFile,l=r?.metadata?.path??"",o=n.selectedComponent,d=n.component.node_id,c=r?.metadata?.repository;if(r&&l){let m={...n,component:{...s,code_connect_info:{...s.code_connect_info,v1:{...s.code_connect_info.v1,state:"connected",author_name:C?.name,author_id:C?.id}}},selectedFile:r,selectedComponent:o,inputValue:""};g(e=>{let t=[...e];return t[i]={...m,isLoading:!0},t}),z({library_key:n.component.library_key,node_id:d,template:"",component_name:o?.title,source_path:l,status:"connected",origin:e.trackingProps.location,entrypoint:e.trackingProps.entrypoint,repository:c}).then(s=>{let a=s.data.meta.code_connect_id;g(e=>{let t=[...e];return t[i]={...m,isLoading:!1,component:{...m.component,code_connect_info:{...m.component.code_connect_info,v1:{...m.component.code_connect_info.v1,id:a,figmadoc:JSON.stringify([{repository:c,name:o?.title}])}}}},t}),F(p.F.enqueue({message:(0,u.t)("dev_handoff.component_browser.connected_message",{componentName:n.component.name}),type:"Connected component"})),X("component_browser.code_connect_component_connected",{componentName:o?.title??"",sourcePath:l,location:e.trackingProps.location,source:e.trackingProps.source,componentBrowserEntrypoint:e.trackingProps.entrypoint,sessionId:e.trackingProps.searchSessionId}),Y(t),e.callback?.()}).catch(t=>{a.vF.error("Error creating code connect map",t),g(e=>{let t=[...e];return t[i]={...n,isLoading:!1},t}),F(p.F.enqueue({message:t.message,type:"Connect component error",error:!0})),e.callback?.(t)})}},onIgnoreMapping:e=>{let{row:t}=e,n=t.sourceIndex,i=t.component.node_id,s={...t,component:{...t.component,code_connect_info:{...t.component.code_connect_info,v1:{...t.component.code_connect_info.v1,state:"ignored"}}},selectedComponent:null,selectedFile:null,inputValue:"",isSelectedFromSuggestion:!1};g(e=>{let t=[...e];return t[n]=s,t}),z({library_key:t.component.library_key,node_id:i,status:"ignored",origin:e.trackingProps.location,entrypoint:e.trackingProps.entrypoint}).then(i=>{let a=i.data.meta.code_connect_id,l=(0,y.I)(t.component);(0,r.kc)().dt_component_browser_optimistic_update_query?q({componentKey:l,status:"ignored"}):l&&W(e=>e?{...e,status:{...e.status,[l]:"ignored"}}:{status:{[l]:"ignored"},loadingStatus:"loaded"}),g(e=>{let t=[...e];return t[n]={...s,component:{...s.component,code_connect_info:{...s.component.code_connect_info,v1:{...s.component.code_connect_info.v1,id:a,author_name:C?.name,author_id:C?.id}}}},t}),X("component_browser.code_connect_component_ignored",{nodeId:t.component.node_id,location:e.trackingProps.location,componentBrowserEntrypoint:e.trackingProps.entrypoint}),F(p.F.enqueue({message:(0,u.t)("dev_handoff.component_browser.ignored_message",{componentName:t.component.name}),type:"Ignored component"})),e.callback?.()}).catch(i=>{a.vF.error("Error ignoring code connect map",i),g(e=>{let i=[...e];return i[n]=t,i}),F(p.F.enqueue({message:i.message,type:"Ignore component error",error:!0})),e.callback?.(i)})},onBulkConfirmSuggestions:ei,onDisplayedComponentChanged:es,onDisplayNextComponent:ea,onDisplayPreviousComponent:er,updateConnection:$,onConfirmConnection:en,onConfirmSuggestion:el,onValueChange:Q,onUpdateUserRules:(0,i.useCallback)(e=>{let{row:t,userRules:n}=e,i=t.component.code_connect_info.v1.id,s=t.sourceIndex;if(!i)return;let r=(0,b.y)(t.component.code_connect_info.v1.figmadoc),l={...t,component:{...t.component,code_connect_info:{...t.component.code_connect_info,v1:{...t.component.code_connect_info.v1,figmadoc:JSON.stringify([{...r,user_rules:n}])}}}};g(e=>{let t=[...e];return t[s]={...l,isLoading:!0},t}),U({code_connect_id:i,user_rules:n}).then(()=>{g(e=>{let t=[...e];return t[s]={...l,isLoading:!1},t}),F(p.F.enqueue({message:(0,u.t)("dev_handoff.component_browser.user_rules_updated")}))}).catch(e=>{a.vF.error("Error updating user rules",e),g(e=>{let n=[...e];return n[s]={...t,isLoading:!1},n}),F(p.F.enqueue({message:e.message,error:!0}))})},[U,F,g]),inputRefs:M,onActiveRowChange:P,activeRowKey:O}}function A({libraryKey:e,componentKey:t,componentsAndStateGroups:n,defaultFilter:s,scope:l,assetKeyToSourceGuid:o}){let c=(0,h.OG)(e),u=c?.selectedRepositories?.[0],p=(0,r.kc)().dt_component_browser_improved_suggestions,[m,v]=(0,i.useState)([]),[j,w]=(0,i.useState)(""),[E,T]=(0,i.useState)(s),[S,I]=(0,i.useState)("file"===l&&(0,r.kc)().dt_component_browser_sort_by_usage?"insertions":"alphabetically"),N=(0,i.useMemo)(()=>m.findIndex(e=>(0,y.I)(e.component)===t),[m,t]),A=(0,i.useMemo)(()=>m[N]??null,[m,N]),{bulkSuggestions:L,searchSessionId:M,isLoadingSuggestions:R}=function(e){let{planType:t,planId:n}=(0,g.jb)(),s=(0,i.useMemo)(()=>e?e.components.map(e=>(0,x.Av)(e)).join(","):"",[e]),a=(0,i.useMemo)(()=>e?e.components.map(e=>({type:e.type,key:(0,x.Av)(e),library_key:e.library_key})):[],[s]),l=(0,r.kc)().dt_component_browser_bulk_mapping||(0,r.kc)().dt_component_browser_inline_suggestions||(0,r.kc)().dt_component_browser_suggestions_debug,o=(0,i.useMemo)(()=>({assets:a,plan_parent_id:n,plan_parent_type:t,num_results_per_asset:5}),[s,n,t]),c=a.length>0&&l,u=(0,i.useMemo)(()=>c?(0,_.a)():"",[o,c]),[p]=(0,d.IT)((0,f.Mo)({...o,query_id:u,session_id:u}),{enabled:c});return{bulkSuggestions:(0,i.useMemo)(()=>p.data?.results??{},[p.data?.results]),searchSessionId:u,isLoadingSuggestions:"loading"===p.status}}(n),{filteredComponents:{all:P,connected:D,notConnected:F,ignored:z,suggestionsAvailable:B},componentCounts:G}=function({bulkSuggestions:e,componentBrowserListRowData:t}){let n=(0,r.kc)().dt_component_browser_improved_suggestions,[s,a,l,o,d]=(0,i.useMemo)(()=>{let e=[],n=[],i=[],s=[],a=[];return t.forEach(t=>{e.push(t),"connected"===t.component.code_connect_info.v1.state&&n.push(t),"not_connected"===t.component.code_connect_info.v1.state&&i.push(t),"ignored"===t.component.code_connect_info.v1.state&&s.push(t),t.isSelectedFromSuggestion&&a.push(t)}),[e,n,i,s,a]},[t]),c=(0,i.useMemo)(()=>n?d:l.filter(t=>t.assetKey in e),[e,d,n,l]),u=(0,i.useMemo)(()=>({all:s.length,connected:a.length,notConnected:l.length,ignored:o.length,suggestionsAvailable:c.length}),[s.length,a.length,l.length,o.length,c.length]);return{filteredComponents:{all:s,connected:a,notConnected:l,ignored:o,suggestionsAvailable:c},componentCounts:u}}({bulkSuggestions:L,componentBrowserListRowData:m}),U=(0,i.useMemo)(()=>{let e=[];return"all"===E?e=P:"connected"===E?e=D:"notConnected"===E?e=F:"ignored"===E?e=z:"suggestionsAvailable"===E&&(e=B),j&&(e=e.filter(e=>e.component.name.toLocaleLowerCase().includes(j.toLocaleLowerCase()))),[...e].sort((e,t)=>{if("alphabetically"===S){if(e.component.name<t.component.name)return -1;if(e.component.name>t.component.name)return 1}else if("insertions"===S){let n=e.component.insertions||0,i=t.component.insertions||0;if(n>i)return -1;if(n<i)return 1;if(e.component.name<t.component.name)return -1;if(e.component.name>t.component.name)return 1}return 0}).map((e,t)=>({...e,currentRowIndex:t}))},[E,j,S,P,D,F,z,B]),V=(0,C.w)(o);(0,i.useEffect)(()=>{if(!n)return;let{components:e}=n;v(t=>(function(e,t,n,i,s,r){let l=[],o=new Map;return r?.forEach(e=>{o.set(e.assetKey,e)}),e.forEach((e,r)=>{let d;let c=(0,x.Av)(e),u=n?.[c]??e.node_id,p=e.code_connect_info.v1.figmadoc;if(p)try{let t=(0,b.y)(p);d={component:e,assetKey:(0,x.Av)(e),sourceIndex:r,isLoading:!1,sourceGuid:u,selectedFile:t?.source?{title:t.source,metadata:{path:t.source,isCustomLink:!1,repository:{id:"",name:""}}}:null,selectedComponent:t?.component?{title:t.component}:null,inputValue:""}}catch(t){a.vF.error("Error parsing figmadoc",t),d=O(e,r,u)}else d=O(e,r,u);let m=o.get(c);m&&(m.selectedFile||m.selectedComponent||m.inputValue&&m.inputValue.length>0)?d={...d,selectedFile:m.selectedFile,selectedComponent:m.selectedComponent,inputValue:m.inputValue,isSelectedFromSuggestion:m.isSelectedFromSuggestion}:t&&i&&"not_connected"===e.code_connect_info.v1.state&&(d=function(e,t,n){let i=t[0];if(!i)return e;let s={title:i.src_path.split("/").pop()||"",subtitle:i.src_path,metadata:{path:i.src_path,isCustomLink:!1,repository:{id:i.github_repository_id??n?.id??"",name:i.github_repository_name??n?.name??""}}},a={title:i.name};return{...e,selectedFile:s,selectedComponent:a,isSelectedFromSuggestion:!0}}(d,i[c]??[],s)),l.push(d)}),l})(e,p??!1,V.current,L,u,t))},[u,V,n,L,v,p]);let H=(0,i.useCallback)(e=>m.findIndex(t=>(0,y.I)(t.component)===(0,y.I)(e)),[m]),K=(0,k._G)(),W=(0,i.useMemo)(()=>new Set(P.map(e=>e.component.library_key).filter(e=>e!==K)),[P,K]);return{paginationInfo:{notConnectedComponents:F.length,connectedComponents:D.length,ignoredComponents:z.length,suggestionsAvailableComponents:B.length},connectedComponents:D,notConnectedComponents:F,externalLibraryKeysInFile:W,ignoredComponents:z,suggestionsAvailableComponents:B,searchQuery:j,setSearchQuery:w,dropdownFilter:E,setDropdownFilter:T,sortBy:S,setSortBy:I,displayedComponent:A,displayedComponentIndex:N,filteredComponents:U,componentBrowserListRowData:m??[],setComponentBrowserListRowData:v,getIndexOfComponent:H,bulkSuggestions:L,searchSessionId:M,isLoadingSuggestions:R,componentCounts:G}}function L({libraryKey:e,componentKey:t,defaultFilter:n,entrypoint:s}){let a=function({libraryKey:e,componentKey:t,defaultFilter:n}){let[s,a]=(0,d.IT)((0,f.t2)(e),{enabled:!0});return{...A({libraryKey:e,componentKey:t,componentsAndStateGroups:(0,i.useMemo)(()=>{var e;return s.data?M((e=s.data).components||[],e.state_groups||[]):null},[s.data]),defaultFilter:n,scope:"file"}),status:s.status,refetch:a.refetch}}({libraryKey:e,componentKey:t,defaultFilter:n});return{...N({displayedComponent:a.displayedComponent,filteredComponents:a.filteredComponents,componentBrowserListRowData:a.componentBrowserListRowData,setComponentBrowserListRowData:a.setComponentBrowserListRowData,bulkSuggestions:a.bulkSuggestions,entrypoint:s}),...a}}function M(e,t){let n=[],i={},s={};return t.forEach(e=>{s[e.node_id]={...e,updated_at:e.updated_at||"",variants:[]},i[e.key]={...e,updated_at:e.updated_at||"",variants:[]}}),e.forEach(e=>{let t=e.containing_frame?.containingStateGroup?.nodeId,a=t&&s[t]?.key;a&&i[a]?i[a].variants.push(e):n.push(e)}),Object.values(i).forEach(e=>{n.push(e)}),{components:n}}function O(e,t,n){return{component:e,assetKey:(0,x.Av)(e),sourceIndex:t,isLoading:!1,sourceGuid:n,selectedFile:null,selectedComponent:null,inputValue:""}}},601167:(e,t,n)=>{n.d(t,{SN:()=>X,Q3:()=>Q,pK:()=>Y,$J:()=>Z,i6:()=>V});var i=n(104076),s=n(716976),a=n(276800),r=n(420680),l=n(684742),o=n(293422),d=n(736813),c=n(816689),u=n(160444),p=n(241019),m=n(988543),h=n(812714),f=n(511570),g=n.n(f),x=n(198464),_=n(192075),y=n(296217),v=n(349311);function b({tooltip:e}){return(0,i.jsx)("div",{"data-tooltip":e,"data-tooltip-show-above":!0,"data-tooltip-type":v.Ib.TEXT,className:"component_browser_hotkey_indicator--hotkeyIcon---Qb3S",children:"\u21B5"})}function C({shortcut:e,state:t,sourceIndex:n,isInputEmpty:s,selectedFile:a}){return"not_connected"!==t||void 0===n||!a&&s?null:(0,i.jsx)("div",{children:(0,i.jsx)(b,{tooltip:e})})}var j=n(833805),k=n(346670),w=n(412431),E=n(883765),T=n(3519),S=n(407012),I=n(243690);let N=(0,s.forwardRef)(({libraryKey:e,onClose:t},n)=>{let[a,r]=(0,s.useState)(!1),l=(0,I.B)(e).unwrapOr(null),d=(0,s.useCallback)(()=>{r(!0)},[]),c=(0,s.useCallback)(()=>{r(!1),t()},[t,r]);return l?(0,i.jsxs)("div",{tabIndex:0,className:"component_browser_input_github_dropdown--container--WQ5k5",ref:n,children:[(0,i.jsx)("div",{className:"component_browser_input_github_dropdown--header--uCNzg",children:(0,_.t)("dev_handoff.component_browser.github_repo_dropdown.header",{libraryName:l})}),(0,i.jsx)("div",{className:"component_browser_input_github_dropdown--description--GKHUI",children:(0,_.t)("dev_handoff.component_browser.github_repo_dropdown.description")}),(0,i.jsx)(o.$n,{variant:"primary",onClick:d,children:(0,_.t)("dev_handoff.component_browser.github_repo_dropdown.button")}),a&&(0,i.jsx)(S.A,{libraryKey:e,onClose:c,onBack:c})]}):null});var A=n(39687),L=n(786069);let M="component_browser_input--wrapper--VlXZo",O="component_browser_input--disabled--QH8GR",R="component_browser_input--readonly--m8lWF",P="component_browser_input--chip--TzaRn",D="component_browser_input--empty--wTZBe",F="component_browser_input--max--kTrPE",z="component_browser_input--chevron--gFXeX",B="component_browser_input--chipItem--sEXBb",G="component_browser_input--buttonContainer--nLuhN",U="component_browser_input--hidden--ffbn1",V=(0,s.forwardRef)((e,t)=>{let{items:n,readonly:s,disabled:r,onRemoveLastItem:l,isSuggestion:o,...d}=e;return(0,i.jsxs)("div",{className:g()(M,"component_browser_input--multiChipInput--TokgR"),children:[n.map((e,t)=>(0,i.jsx)(H,{parts:[e],maxItems:1,readonly:s,disabled:r,onClear:()=>l(t),isSuggestion:o},e.value)),!s&&(0,i.jsx)(K,{ref:t,items:[],maxItems:1,onRemoveLastItem:a.lQ,...d})]})});function H({parts:e,maxItems:t,readonly:n,disabled:a,onClear:l,isSuggestion:o}){return(0,i.jsxs)("div",{className:g()(P,"component_browser_input--items--97pb-",{[D]:0===e.length,"component_browser_input--incomplete--sIuCz":e.length<t&&!n,[O]:a,[R]:n}),...(0,w.f$)({filepath:e[0]?.value,componentName:e[1]?.value,isSuggestion:o??!1}),children:[e.map((a,r)=>{let l=r<e.length&&r<t-1&&!n||r<e.length-1&&n,o=0===r&&e&&e[0]&&"string"==typeof e[0].value&&e[0].value.length>10?65:0;return(0,i.jsxs)(s.Fragment,{children:[(0,i.jsx)("div",{className:B,style:{minWidth:o},children:a.value}),l&&(0,i.jsx)(d.k,{className:z})]},r)}),e.length===t&&!n&&(0,i.jsx)(r.K,{"aria-label":(0,_.t)("dev_handoff.component_browser.clear_input"),onClick:l,children:(0,i.jsx)(c.f,{})})]})}let K=(0,s.forwardRef)(({children:e,maxItems:t=1,disabled:n=!1,onAddItem:s,onRemoveLastItem:a,onClearItems:l,onMaxItemsReached:o,items:d,value:u,onValueChange:p,onRequestPlaceholder:m,onFocus:h,onBlur:f,onKeyDown:x,readonly:y=!1},v)=>{let b=d.length>0;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:g()(P,"component_browser_input--inputWrapper--4eKiy",{[D]:!b,[F]:d.length>=t,[O]:n}),children:[(0,i.jsx)("input",{ref:v,onFocus:h,onBlur:f,placeholder:m(d.length),className:g()("component_browser_input--input--VpMqX",{[D]:!b,[F]:d.length>=t||y}),type:"text",value:u,onChange:e=>{n||d.length>=t||p(e.target.value)},onKeyDown:e=>{if(!(n||x(e)))switch(e.key){case"Enter":if(d.length>=t){o?.();return}s({value:u},d.length),e.preventDefault();break;case"Backspace":0===u.length&&d.length>0&&(a(d.length-1),e.preventDefault())}}}),b&&d.length<t&&!y&&(0,i.jsx)(r.K,{"aria-label":(0,_.t)("dev_handoff.component_browser.clear_input"),onClick:()=>l(),children:(0,i.jsx)(c.f,{})})]}),(0,i.jsx)("div",{className:g()(G,{"component_browser_input--filled--3Hnhr":b}),children:e})]})}),W=(0,s.forwardRef)((e,t)=>{let{maxItems:n=1,disabled:s=!1,onClearItems:a,items:r,readonly:l=!1,isSuggestion:o}=e;return(0,i.jsxs)("div",{className:g()(M,{[O]:s,[R]:l}),children:[r.length>0&&(0,i.jsx)(H,{parts:r,maxItems:n,readonly:l,disabled:s,onClear:()=>a(),isSuggestion:o}),!l&&(0,i.jsx)(K,{ref:t,...e})]})});var q=(e=>(e.FILE="file",e.COMPONENT="component",e.CONFIRM="confirm",e))(q||{});function X({items:e,isSuggestion:t,onClick:n,tooltipProps:a}){let r=(0,i.jsxs)(i.Fragment,{children:[t&&(0,i.jsx)(u.C,{}),e.length>0?e.map((t,n)=>(0,i.jsxs)(s.Fragment,{children:[(0,i.jsx)("div",{className:B,children:t}),n!==e.length-1&&(0,i.jsx)("div",{className:z,children:(0,i.jsx)(d.k,{})})]},n)):(0,i.jsx)("div",{className:B,children:(0,_.t)("dev_handoff.component_browser.input_no_filepath")})]}),o={className:g()(P,R,{"component_browser_input--suggestion--RaUTH":t}),...a};return n?(0,i.jsx)(l.E,{...o,onClick:n,children:r}):(0,i.jsx)("div",{...o,children:r})}function Y({onConfirmConnection:e,showButton:t,disabled:n,children:s}){return(0,i.jsx)("div",{className:g()(G,{[U]:!t}),children:(0,i.jsx)(o.WW,{onClick:n?a.lQ:e,variant:"primary",children:s??(0,_.t)("dev_handoff.component_browser.connect")})})}function Z(){return(0,i.jsx)(Y,{showButton:!1,onConfirmConnection:a.lQ})}function J({onEdit:e,showButton:t,disabled:n}){return(0,i.jsx)("div",{className:g()(G,{[U]:!t}),children:(0,i.jsx)(o.$n,{onClick:e,"aria-disabled":n,variant:"secondary",children:(0,_.t)("dev_handoff.component_browser.edit")})})}function Q({item:e,isRowHovered:t,isLoading:n,sourceIndex:r,currentRowIndex:l,libraryKey:o,onComponentChanged:d,onFileChanged:c,onValueChange:u,onConfirmConnection:f,onDeleteMapping:v,value:b="",selectedFile:w,selectedComponent:S,suggestions:I,inputRef:M,onSetInputRef:O,readonly:R=!1,autosave:P=!0,location:D,entrypoint:F,onBlur:z,isRowActive:B,onActiveRowChange:G,isLoadingSuggestions:U,hasEditButton:V,onConfirmSuggestion:H}){let[K,q]=(0,s.useState)([]),X=(0,s.useRef)(null),Z=(0,s.useRef)(null),Q=(0,y.OG)(o),{result:$,isLoading:ee}=(0,L.I)({searchTerm:b,libraryKey:o,suggestions:I}),{results:et,isLoading:en}=function({libraryKey:e,selectedFile:t,searchTerm:n,suggestions:i}){let a=t?.metadata?.repository?.id,r=t?.metadata?.path,[l]=(0,j.IT)((0,k.rt)({libraryKey:e,repository:a??"",path:r??""}),{enabled:!!t&&!!e&&!!a&&!!r&&!t?.metadata?.isCustomLink,key:`repositoryComponentsQuery-${r}`}),o="loading"===l.status,d="loaded"===l.status,c=l.data,u=(0,s.useMemo)(()=>d&&c?c.components:[],[d,c]),p=(0,s.useMemo)(()=>i?i.filter(e=>e.src_path===r):[],[i,r]),m=(0,s.useMemo)(()=>Array.from(new Set([...p.map(e=>e.name),...u])),[u,p]);return{results:(0,s.useMemo)(()=>m.length?m.filter(e=>e.toLowerCase().includes(n.toLowerCase())).map((e,t)=>({title:e,subtitle:"",metadata:{index:t}})):[],[n,m]),isLoading:o,searchTerm:n}}({libraryKey:o,selectedFile:w,searchTerm:b,suggestions:I}),ei=function({data:e}){let{component:t,inputValue:n,selectedFile:i,selectedComponent:a,sourceIndex:r}=e,l=t.code_connect_info.v1.state,{shortcut:o}=(0,s.useMemo)(()=>i?i&&!a&&n&&0===n.length?{shortcut:(0,_.t)("dev_handoff.component_browser.confirm_connection_shortcut")}:!a&&n&&n.length>0?{shortcut:(0,_.t)("dev_handoff.component_browser.connect_component_shortcut")}:{shortcut:(0,_.t)("dev_handoff.component_browser.confirm_connection_shortcut")}:{shortcut:(0,_.t)("dev_handoff.component_browser.connect_file_shortcut")},[i,a,n]),d=(0,s.useMemo)(()=>i||n&&n.length>0||a&&i,[i,n,a]);return{selectedFile:i,selectedComponent:a,shortcut:o,state:l,sourceIndex:r,canConnect:d,isInputEmpty:n?.length===0}}({data:e}),es=(0,s.useMemo)(()=>{let e=0===K.length,t=1===K.length;return e?{results:$.map(e=>({title:e.title,subtitle:e.subtitle,icon:(0,i.jsx)(p.I,{})})),isLoading:ee}:t?{results:et.map(e=>({title:e.title,subtitle:e.subtitle,icon:(0,i.jsx)(m.P,{})})),isLoading:en}:{results:[],isLoading:!1}},[$,et,K.length,ee,en]),[ea,er]=(0,s.useState)({shouldBeVisible:!1,shouldShowGithubCTA:!1,selectedIndex:0,sessionId:"",lastItemsLength:0}),el=(0,s.useMemo)(()=>B&&ea.shouldBeVisible&&Q.status===y.w6.NeedsInfo&&Q.queryStatus===x.H.LOADED,[ea.shouldBeVisible,Q,B]);(0,s.useEffect)(()=>{let e=[];w&&e.push({value:w.subtitle??w.title}),S&&e.push({value:S.title}),q(e)},[w,S]),function({dropdownState:e,items:t,dropdownDataResultsLength:n,value:i,isRowActive:a,isLoadingSuggestions:r,isLoadingDropdownData:l,fileSearchResults:o,componentSearchResults:d,selectedFile:c,suggestions:u,location:p,entrypoint:m}){let h=(0,s.useRef)(null);(0,s.useEffect)(()=>{let s={sessionId:e.sessionId,itemsLength:t.length},f=h.current,g=e.shouldBeVisible&&n>0,x=!!e.sessionId,_=0===i.length,y=!f||f.sessionId!==e.sessionId||f.itemsLength!==t.length;if(g&&x&&_&&a&&y){let n,i;let{aiCodebaseSuggestionsCount:a,lexicalSearchResultsCount:f}=(n=0,i=0,0===t.length?o.forEach(e=>{u?.some(t=>t.src_path===e.metadata?.path)?n++:i++}):1===t.length&&d.forEach(e=>{u?.some(t=>t.src_path===c?.metadata?.path&&t.name===e.title)?n++:i++}),{aiCodebaseSuggestionsCount:n,lexicalSearchResultsCount:i});(0,E.sx)("component_browser.code_component_input_typeahead_displayed",{location:p,componentBrowserEntrypoint:m,sessionId:e.sessionId,aiCodebaseSuggestionsCount:a,lexicalSearchResultsCount:f,hasCodebaseSuggestionsLoaded:!r,hasLexicalSearchLoaded:!l,queryId:u?.[0]?.tracking_query_id}),h.current=s}},[e.shouldBeVisible,e.sessionId,n,a,t.length,o,d,c,u,p,m,r,l,i.length,t])}({dropdownState:{shouldBeVisible:ea.shouldBeVisible,sessionId:ea.sessionId},items:K,dropdownDataResultsLength:es.results.length,value:b,isRowActive:B,isLoadingSuggestions:U,isLoadingDropdownData:es.isLoading,fileSearchResults:$,componentSearchResults:et,selectedFile:w??null,suggestions:I,location:D,entrypoint:F});let eo=Q.status===y.w6.Connected,ed=I?.[0]?.tracking_query_id;(0,s.useEffect)(()=>{if(!ea.shouldBeVisible||!B)return;let e=e=>{let t=e.target;X.current&&t.contains(X.current)||er(e=>({...e,shouldBeVisible:!1,selectedIndex:0}))};return window.addEventListener("scroll",e,!0),()=>{window.removeEventListener("scroll",e,!0)}},[ea.shouldBeVisible,B]);let ec=(0,s.useCallback)(e=>{switch(e){case 0:return eo?(0,_.t)("dev_handoff.component_browser.input_placeholder_github_connected"):(0,_.t)("dev_handoff.component_browser.paste_code_link");case 1:return(0,_.t)("dev_handoff.component_browser.component_name")}},[eo]),eu=(0,s.useCallback)(()=>{f({row:e,sourceIndex:r,currentRowIndex:l,trackingProps:{location:D,source:"manual",entrypoint:F,sessionId:ea.sessionId||crypto.randomUUID(),queryId:ed}})},[f,e,r,l,D,F,ea.sessionId,ed]),ep=()=>{let t=w?.subtitle??w?.title;v?.({codeConnectId:e.component.code_connect_info.v1.id,row:e,trackingProps:{location:D,entrypoint:F}}),t&&u({sourceIndex:r,value:t}),er(e=>({...e,shouldBeVisible:!0,selectedIndex:0,lastItemsLength:0,sourceOfLastInput:void 0}))},em=()=>{er(e=>({...e,selectedIndex:0}))};function eh(t,n){let i=0===K.length,s=1===K.length;if(er(e=>({...e,selectedIndex:0})),i){let e=$[n];if(e){let t=-1!==(I?I.findIndex(t=>t.src_path===e.metadata?.path):-1)?"ai_codebase_suggestion":"lexical_search_result";er(e=>({...e,sourceOfLastInput:t})),c({save:P,sourceIndex:r,currentRowIndex:l,selectedFile:e,trackingProps:{location:D,source:t,entrypoint:F,sessionId:ea.sessionId||crypto.randomUUID(),queryId:ed}}),em()}}else if(s&&et[n]){let n=-1!==(I?I.findIndex(n=>n.src_path===e.selectedFile?.metadata?.path&&n.name===t.title):-1)?"ai_codebase_suggestion":"lexical_search_result";er(e=>({...e,sourceOfLastInput:n})),d({save:P,sourceIndex:r,currentRowIndex:l,selectedComponent:t,action:"create",trackingProps:{location:D,source:n,entrypoint:F,sessionId:ea.sessionId||crypto.randomUUID(),queryId:ed}}),em()}M?.focus()}let ef=(t||ei.canConnect)&&"connected"!==ei.state,eg=V&&"connected"===e.component.code_connect_info.v1.state,ex=(0,s.useCallback)(()=>{e.isSelectedFromSuggestion?H({filepath:e.selectedFile?.metadata?.path??"",componentName:e.selectedComponent?.title??"",item:e,currentRowIndex:l??0,sourceIndex:r}):f({row:e,sourceIndex:r,currentRowIndex:l,trackingProps:{location:D,source:ea.sourceOfLastInput||"manual",entrypoint:F,sessionId:ea.sessionId||crypto.randomUUID(),queryId:ed}})},[f,H,e,l,r,ea.sourceOfLastInput,ea.sessionId,F,D,ed]);return(0,i.jsxs)("div",{className:g()("component_browser_input--container---QBDC",{"component_browser_input--containerWithEditButton--jIBVr":eg}),onBlur:z,children:[(0,i.jsxs)("div",{className:"component_browser_input--inputContainer--3wDJt",children:[(0,i.jsx)(W,{ref:O,disabled:n,isSuggestion:e.isSelectedFromSuggestion??!1,items:K,maxItems:2,onAddItem:(e,t)=>{if(0===b.length&&w){eu?.();return}switch(t){case 0:c({save:P,sourceIndex:r,currentRowIndex:l,selectedFile:{title:e.value,subtitle:e.value,metadata:{isCustomLink:!1,repository:{id:"",name:""},path:e.value}},trackingProps:{location:D,source:"manual",entrypoint:F,sessionId:ea.sessionId||crypto.randomUUID(),queryId:ed}});break;case 1:d({save:P,sourceIndex:r,currentRowIndex:l,selectedComponent:{title:e.value,subtitle:e.value,metadata:{index:t}},action:"create",trackingProps:{location:D,source:"manual",entrypoint:F,sessionId:ea.sessionId||crypto.randomUUID(),queryId:ed}})}},onBlur:e=>{let t=e.relatedTarget;t&&X.current?.contains(t)||Z&&t&&Z.current?.contains(t)||er(e=>({...e,shouldBeVisible:!1,selectedIndex:0}))},onClearItems:()=>{c({save:P,sourceIndex:r,currentRowIndex:l,selectedFile:null,trackingProps:{location:D,source:"manual",entrypoint:F,sessionId:ea.sessionId||crypto.randomUUID(),queryId:ed}}),er(e=>({...e,shouldBeVisible:!1,selectedIndex:0,lastItemsLength:0,sourceOfLastInput:void 0}))},onFocus:()=>{G(e.component.node_id),er(e=>{let t=0===b.length&&0===K.length&&(e.lastItemsLength>0||!e.sessionId)?crypto.randomUUID():e.sessionId;return{...e,shouldBeVisible:!0,selectedIndex:0,sessionId:t,lastItemsLength:K.length}})},onKeyDown:e=>{if("ArrowDown"===e.key){if(ea.selectedIndex<es.results.length-1)return er(e=>({...e,selectedIndex:e.selectedIndex+1})),e.preventDefault(),!0}else if("ArrowUp"===e.key){if(ea.selectedIndex>0)return er(e=>({...e,selectedIndex:e.selectedIndex-1})),e.preventDefault(),!0}else if("Enter"===e.key){let t=es.results[ea.selectedIndex];if(t)return eh(t,ea.selectedIndex),e.preventDefault(),!0}else if("Escape"===e.key)return er(e=>({...e,shouldBeVisible:!1,selectedIndex:0})),e.currentTarget.blur(),e.preventDefault(),e.stopPropagation(),!0;return!1},onMaxItemsReached:eu,onRemoveLastItem:e=>{switch(e){case 0:c({save:P,sourceIndex:r,currentRowIndex:l,selectedFile:null,trackingProps:{location:D,source:"manual",entrypoint:F,sessionId:ea.sessionId||crypto.randomUUID(),queryId:ed}});break;case 1:d({save:P,sourceIndex:r,currentRowIndex:l,selectedComponent:null,action:"delete",trackingProps:{location:D,source:"manual",entrypoint:F,sessionId:ea.sessionId||crypto.randomUUID(),queryId:ed}})}},onRequestPlaceholder:ec,onValueChange:e=>{u({sourceIndex:r,value:e})},readonly:R,value:b,children:(0,i.jsx)(C,{...ei})}),el&&(0,i.jsx)(N,{libraryKey:o,ref:Z,onClose:()=>{er(e=>({...e,shouldBeVisible:!1,selectedIndex:0}))}}),(0,i.jsx)(T.O,{ref:X,shouldBeVisible:ea.shouldBeVisible&&B,isLoading:es.isLoading,items:es.results,selectedIndex:ea.selectedIndex,onItemSelect:eh,portal:!0,inputRef:M})]}),V&&ef?(0,i.jsx)(Y,{showButton:!!ef,disabled:!ei.canConnect,onConfirmConnection:ex}):!V&&(0,i.jsx)(Y,{showButton:!!ef,disabled:!ei.canConnect,onConfirmConnection:ex}),eg&&((0,h.kc)().dt_component_browser_more_actions_menu?(0,i.jsx)(A.a,{isCliGenerated:e?.component?.code_connect_info?.v1?.type==="figmadoc",onEdit:ep,onDelete:v??a.lQ,data:e,location:D,entrypoint:F}):(0,i.jsx)(J,{showButton:!!eg,disabled:!1,onEdit:ep}))]})}},3519:(e,t,n)=>{n.d(t,{O:()=>p});var i=n(104076),s=n(716976),a=n(754245),r=n(419822),l=n(684742),o=n(511570),d=n.n(o),c=n(278491);let u="component_browser_input_dropdown--inputText--ppFSj",p=(0,s.forwardRef)(function({shouldBeVisible:e,items:t,onItemSelect:n,selectedIndex:o,isLoading:p,portal:m=!1,inputRef:h},f){let g=(0,s.useRef)(null),[x,_]=(0,s.useState)(null);if((0,s.useEffect)(()=>{if(m&&e&&h){if(h){let e=h.getBoundingClientRect();_({top:e.bottom+window.scrollY+8,left:e.left+window.scrollX-4,width:e.width+8})}}else m||_(null)},[m,e,h]),(0,s.useEffect)(()=>{g.current&&f&&"object"==typeof f&&f.current&&g.current.scrollIntoView({block:"nearest",behavior:"smooth"})},[o,f]),!e||0===t.length&&!p)return null;let y=(0,i.jsx)("div",{className:d()("component_browser_input_dropdown--container--2FBO7",{"component_browser_input_dropdown--portalHidden--IVzT6":m&&!x,[c.Qx]:m}),style:m&&x?{position:"fixed",top:`${x.top}px`,left:`${x.left}px`,width:`${x.width}px`,zIndex:1e3}:void 0,children:p?(0,i.jsx)("li",{className:"component_browser_input_dropdown--loading--dViPC",children:(0,i.jsx)(r.k,{})}):(0,i.jsx)("ul",{ref:f,className:"component_browser_input_dropdown--list--m1Kui",children:t.map((e,t)=>(0,i.jsx)("li",{ref:t===o?g:null,children:(0,i.jsx)(l.E,{className:d()("component_browser_input_dropdown--item--7nu7x",{"component_browser_input_dropdown--selected--CWEgq":t===o}),onClick:()=>n(e,t),children:(0,i.jsxs)("div",{className:"component_browser_input_dropdown--content--eGCcQ",children:[(0,i.jsx)("div",{className:d()("component_browser_input_dropdown--title--LeadU",u),children:e.title}),e.subtitle&&(0,i.jsx)("div",{className:d()("component_browser_input_dropdown--subtitle--8GQKQ",u),children:e.subtitle})]})})},t))})});return m?(0,a.createPortal)(y,document.body):y})},39687:(e,t,n)=>{n.d(t,{a:()=>_});var i=n(104076),s=n(716976),a=n(307829),r=n(420680),l=n(721853),o=n(853943),d=n(994963),c=n(748836),u=n(840206),p=n(833805),m=n(276800),h=n(192075),f=n(346670),g=n(37495);function x({githubUrl:e,gitHubContents:t}){return e?(0,i.jsx)(a.N_,{href:e,newTab:!0,children:t}):(0,i.jsx)(a.q7,{disabled:!0,onClick:m.lQ,children:t})}function _({data:e,isCliGenerated:t,onEdit:n,onDelete:_,location:y,entrypoint:v}){let{getTriggerProps:b,manager:C}=a.b(),j=e.component.library_key,[k]=(0,p.IT)((0,f.sN)(j)),w=e.component.code_connect_info.v1.figmadoc,E=(0,s.useMemo)(()=>(0,g.y)(w),[w]),T=e.selectedFile?.metadata?.path,S=(0,s.useMemo)(()=>{if(!T)return null;if(T.includes("github.com"))return T;if(!k.data)return null;let e=E?.repository,t=k.data.selectedRepositories[0];if(e?.id&&t){let t=k.data.selectedRepositories.find(t=>t.id===e.id);if(t?.owner&&t?.name){let e=T.replace(/^\//,"");return`https://github.com/${t.owner}/${t.name}/blob/main/${e}`}}if(t?.owner&&t?.name){let e=T.replace(/^\//,"");return`https://github.com/${t.owner}/${t.name}/blob/main/${e}`}return null},[T,E,k.data]),I=_===m.lQ,N=(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(a.Q$,{children:(0,i.jsx)(l.z,{})}),(0,h.t)("dev_handoff.component_browser.more_actions_menu.open_in_github")]});return(0,i.jsxs)(a.bL,{manager:C,children:[(0,i.jsx)(r.K,{...b(),"aria-label":(0,h.t)("dev_handoff.component_browser.more_actions_menu.aria_label"),children:(0,i.jsx)(o.J,{})}),(0,i.jsxs)(a.mc,{children:[(0,i.jsxs)(a.YJ,{children:[(0,i.jsxs)(a.q7,{disabled:t,onClick:n,children:[(0,i.jsx)(a.Q$,{children:(0,i.jsx)(d.$,{})}),(0,h.t)("dev_handoff.component_browser.more_actions_menu.edit")]}),(0,i.jsxs)(a.q7,{disabled:I,onClick:()=>{_({codeConnectId:e.component.code_connect_info.v1.id,row:e,trackingProps:{location:y,entrypoint:v}})},children:[(0,i.jsx)(a.Q$,{children:(0,i.jsx)(c.G,{})}),(0,h.t)("dev_handoff.component_browser.more_actions_menu.disconnect")]}),t&&(0,i.jsx)(x,{githubUrl:S,gitHubContents:N})]}),!t&&(0,i.jsx)(x,{githubUrl:S,gitHubContents:N}),t&&(0,i.jsxs)("div",{className:"component_browser_more_actions_menu--info--x6BT0",children:[(0,i.jsx)("div",{className:"component_browser_more_actions_menu--infoIconWrapper--Ikxdl",children:(0,i.jsx)(u.M,{})}),(0,i.jsx)("div",{className:"component_browser_more_actions_menu--infoText--d6KIt",children:(0,h.t)("dev_handoff.component_browser.more_actions_menu.code_connect_cli_only_message")})]})]})]})}},786069:(e,t,n)=>{n.d(t,{F:()=>u,I:()=>c});var i=n(716976),s=n(936639),a=n(833805),r=n(296217),l=n(346670);function o(e,t,n,i){return""===t?e.sort((e,t)=>e.name.localeCompare(t.name)).slice(0,20).map(e=>({title:e.name,subtitle:e.path,metadata:i(e)})):(0,s.$P)(t,e,{keySelector:e=>[e.path,e.name],threshold:.6,limit:10,ignoreCase:!0,ignoreSymbols:!0}).map(e=>({title:e.name,subtitle:e.path,metadata:i(e)})).slice(0,20)}function d({searchTerm:e,libraryKey:t,filterToSelectedRepoDirectories:n}){let s=(0,r.OG)(t),o=s?.selectedRepositories?.[0],[d]=(0,a.IT)((0,l.Tp)({libraryKey:t,repository:o?.id??"",filterToSelectedRepoDirectories:n}),{enabled:!!t&&s?.status===r.w6.Connected,key:"repositorySourceFilesQuery"});return{sourceFilesQuery:d,filePathToSearch:(0,i.useMemo)(()=>(function(e){let t=e.match(/^https?:\/\/github\.com\/([a-zA-Z0-9-_.]+)\/([a-zA-Z0-9-_.]+)\/(?:blob|tree)\/([a-zA-Z0-9-_.]+)\/(.*)$/);if(t){let[,,,,e]=t;return e??""}let n=e.replace(/^https?:\/\//,"");return/^[a-zA-Z0-9\-_./\\]+$/.test(n)?n:""})(e),[e]),defaultRepository:o}}function c({searchTerm:e,libraryKey:t,suggestions:n}){let{sourceFilesQuery:s,filePathToSearch:a,defaultRepository:r}=d({searchTerm:e,libraryKey:t,filterToSelectedRepoDirectories:!0});return{result:(0,i.useMemo)(()=>{if(!s.data)return[];let t=o(s.data,a,r,e=>({isCustomLink:!1,repository:{id:r?.id??"",name:r?.name??""},path:e.path,name:e.name,sha:e.sha,type:e.type}));if(e||!n)return t;let i=new Set,l=[];return n.forEach(e=>{i.has(e.src_path)||(i.add(e.src_path),l.push({title:e.src_path.split("/").pop()||"",subtitle:e.src_path,metadata:{isCustomLink:!1,repository:{id:r?.id??"",name:r?.name??""},path:e.src_path}}))}),[...l,...t.filter(e=>!i.has(e.subtitle??""))]},[s.data,a,r,e,n]),isLoading:"loading"===s.status}}function u({searchTerm:e,libraryKey:t}){let{sourceFilesQuery:n,filePathToSearch:s,defaultRepository:a}=d({searchTerm:e,libraryKey:t});return{result:(0,i.useMemo)(()=>n.data?o(function(e){let t=new Set;return e.forEach(e=>{let n=e.path.split("/");for(let e=1;e<n.length;e++){let i=n.slice(0,e).join("/");t.add(i)}}),Array.from(t).map(e=>({path:e,name:e.split("/").pop()||e}))}(n.data),s,a,e=>({isCustomLink:!1,repository:{id:a?.id??"",name:a?.name??""},path:e.path,name:e.name,sha:"",type:"directory"})):[],[n.data,s,a]),isLoading:"loading"===n.status}}},693168:(e,t,n)=>{n.d(t,{I:()=>i,s:()=>s});let i="code_connect_library_created_connection",s="code_connect_library_loaded"},412431:(e,t,n)=>{n.d(t,{kf:()=>c,Av:()=>u,f$:()=>p});var i=n(104076),s=n(192075),a=n(560201);let r="component_browser_component_tooltip--label--UrsiF",l=(0,a.ex)("component_browser_component_tooltip",function(e){return(0,i.jsxs)("div",{className:"component_browser_component_tooltip--container--aXFSa",children:[e.componentName&&(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:r,children:e.isSuggestion?(0,s.t)("dev_handoff.component_browser.component_name_suggested_tooltip"):(0,s.t)("dev_handoff.component_browser.component_name_tooltip")}),(0,i.jsx)("div",{children:e.componentName})]}),e.filepath&&(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:r,children:(0,s.t)("dev_handoff.component_browser.component_filepath_tooltip")}),(0,i.jsx)("div",{children:e.filepath})]})]})},e=>({componentName:e.getAttribute("data-tooltip-componentName")||void 0,filepath:e.getAttribute("data-tooltip-filepath")||void 0,isSuggestion:"true"===e.getAttribute("data-tooltip-suggestion")}));var o=n(564914),d=n(349311);function c(e,t){let n=new Set;for(let i of e)t.has(i)&&n.add(i);return Array.from(n)}function u(e){return e.type===o.PW.COMPONENT?e.component_key:e.key}function p({componentName:e,filepath:t,isSuggestion:n}){return t||e?{"data-tooltip-type":d.Ib.SPECIAL,"data-tooltip":l,"data-tooltip-componentName":e,"data-tooltip-filepath":t,"data-tooltip-suggestion":n}:{}}},447247:(e,t,n)=>{n.d(t,{a:()=>s});var i=n(188220);function s(){return(0,i.g)()}},476949:(e,t,n)=>{n.d(t,{O:()=>c});var i=n(104076),s=n(716976),a=n(469243),r=n(140458),l=n(192075);let o="component_browser_progress_bar--iconWrapper--S6nHV",d=[{key:"connected",color:"var(--color-icon-component)",renderIcon:()=>(0,i.jsx)("div",{className:o,style:{backgroundColor:"var(--color-bg-component-tertiary)"},children:(0,i.jsx)(a.s,{style:{"--color-icon":"var(--color-icon-component)"}})})},{key:"notConnected",color:"var(--color-icon-tertiary)",renderIcon:()=>(0,i.jsx)("div",{className:o,children:(0,i.jsx)(a.s,{})})},{key:"ignored",color:"var(--color-border)",renderIcon:()=>(0,i.jsx)("div",{className:o,children:(0,i.jsx)(r.r,{})})}];function c({componentCounts:e,width:t=104}){let[n,a]=(0,s.useState)(!1),[r,o]=(0,s.useState)({x:0,y:0}),c=(0,s.useRef)(null),u=(0,s.useRef)(null),p=e.all;if(0===p)return null;let m=d.map(t=>({...t,count:e[t.key],percentage:e[t.key]/p*100}));return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{ref:c,className:"component_browser_progress_bar--progressBarWrapper--3OKXm",onMouseEnter:()=>{if(u.current&&(clearTimeout(u.current),u.current=null),c.current){let e=c.current.getBoundingClientRect();o({x:e.right-240,y:e.bottom+4})}a(!0)},onMouseLeave:()=>{u.current=setTimeout(()=>{a(!1)},100)},children:(0,i.jsx)("div",{className:"component_browser_progress_bar--progressBar--it3WJ",style:{width:`${t}px`},children:m.filter(e=>e.count>0).map((e,t)=>(0,i.jsx)("div",{className:"component_browser_progress_bar--progressSegment--GMeIk",style:{width:`${e.percentage}%`,backgroundColor:e.color,marginLeft:t>0?"1px":"0"}},e.key))})}),n&&(0,i.jsx)("div",{className:"component_browser_progress_bar--hoverWindow--GMG2v",style:{left:r.x,top:r.y,width:240},onMouseEnter:()=>{u.current&&(clearTimeout(u.current),u.current=null)},onMouseLeave:()=>{a(!1)},children:(0,i.jsxs)("div",{className:"component_browser_progress_bar--windowContent--qOOfC",children:[(0,i.jsx)("h2",{className:"component_browser_progress_bar--windowTitle--0a5dA",children:(0,l.t)("dev_handoff.component_browser.progress_bar.window_title")}),m.map(e=>(0,i.jsxs)("div",{className:"component_browser_progress_bar--statRow--6OVcm",children:[e.renderIcon(),(0,i.jsx)("div",{className:"component_browser_progress_bar--statLabel--dx8zX",children:function(e){switch(e.key){case"connected":return(0,l.t)("dev_handoff.component_browser.progress_bar.connected",{percentage:Math.round(e.percentage)});case"ignored":return(0,l.t)("dev_handoff.component_browser.progress_bar.skipped",{percentage:Math.round(e.percentage)});case"notConnected":return(0,l.t)("dev_handoff.component_browser.progress_bar.not_connected",{percentage:Math.round(e.percentage)});default:return""}}(e)})]},e.key))]})})]})}},892816:(e,t,n)=>{n.d(t,{w:()=>m6,O:()=>m8});var i=n(104076),s=n(716976),a=n(237420),r=n(266808),l=n(812714),o=n(795033),d=n(835531),c=n(883765),u=n(434511),p=n(192075),m=n(751464),h=n(744374),f=n(638004),g=n(1188),x=n(287211),_=n(76616),y=n(653899),v=n(772523),b=n(835307),C=n(964231),j=n(315361);function k({doReport:e}){let t=v.tw()?.getCopy(),{commentsActive:n,isNodeSelected:i}=(0,x.R)(e=>({commentsActive:e.mirror.appModel.currentTool===C.ec.tool,isNodeSelected:Object.keys(e.mirror.sceneGraphSelection).length>0})),a=(0,j.uQ)(),l=(0,b.Fk)((e,t)=>e?.get(t??"")?.isTopLevelFrame(),a);(0,y.h)(()=>{let t=_.sn.tryStop("switch_to_inspect_mode.right_panel_tti");e&&t&&(0,c.sx)("switch_to_inspect_mode.right_panel_tti",{elapsedMs:t,isNodeSelected:i},{forwardToDatadog:!0}),_.sn.tryStop("dev_handoff.select_node_tti")}),s.useEffect(()=>{a&&!n&&requestAnimationFrame(()=>{let n=_.sn.tryStop("dev_handoff.select_node_tti");if(e&&n){let e=null!=t?r._gJ[t]:void 0;(0,c.sx)("dev_handoff.select_node_tti",{elapsedMs:n,isTopLevelFrame:l,activeTab:e},{forwardToDatadog:!0})}})},[a,t,n,e,l])}var w=n(202913),E=n(549571),T=n(432777),S=n(111297),I=n(968169),N=n(802529),A=n(211862),L=n(6449),M=n(85598),O=n(844182),R=n(785751),P=n(419822),D=n(790009),F=n(980852),z=n(770522),B=n(449572),G=n(236631),U=n(659062),V=n(917360),H=n(755444),K=n(140490),W=n(244205),q=n(59849),X=n(19877),Y=n(760848),Z=n(144638);let J=(0,H.ck)("bd68de9e9483d946011f6721dc4d37bcf7cc3021");function Q(){return(0,i.jsx)(K.u,{label:"PendingModal",children:(0,i.jsx)($,{})})}function $(){let e=(0,X.U)("blocking_modal"),t=(0,A.tS)()??"",n=(0,B.bc)(q.D2i,{key:t}),a=(0,B.bc)(q.oBY,{key:t}),r=n.data?.file.status!=="error"&&n.data?.file.data?.hasPermission&&a.data?.file?.hasPermission===!1,l=(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(V.J,{className:Z.DD,children:r?(0,p.tx)("dev_handoff.paywall.pending_modal.grace_period_end.title"):(0,p.tx)("dev_handoff.paywall.pending_modal.no_grace_period.title")}),(0,i.jsx)("div",{className:Z.P_,children:r?(0,p.tx)("dev_handoff.paywall.pending_modal.grace_period.description"):(0,p.tx)("dev_handoff.paywall.pending_modal.no_grace_period.billing_remodel_description")})]}),o=(0,s.useCallback)(()=>{e("design")},[e]);return(0,i.jsx)(Y.I,{imgSrc:J,content:l,modalType:"request pending modal",primaryButtonProps:{label:(0,p.tx)("dev_handoff.paywall.blocking_modal.button.back_to_design"),onClick:o,trackingDescriptor:W.c.BACK_TO_DESIGN,type:"back to design"}})}let ee=(0,H.ck)("3d1d2d876c1adeb5d3e1256825cff2d5984d76fb");function et(){let e=(0,X.U)("blocking_modal"),t=(0,s.useCallback)(()=>{e("design")},[e]);return(0,i.jsx)(Y.I,{imgSrc:ee,content:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(V.J,{className:Z.DD,children:(0,p.tx)("dev_handoff.paywall.success_modal.youre_all_set")}),(0,i.jsx)("div",{className:Z.P_,children:(0,p.tx)("dev_handoff.paywall.success_modal.well_let_you_know_when")})]}),modalType:"request sent modal",primaryButtonProps:{label:(0,p.tx)("dev_handoff.paywall.blocking_modal.button.back_to_design"),onClick:t,trackingDescriptor:W.c.BACK_TO_DESIGN,type:"back to design"}})}var en=n(913772),ei=n(404898),es=n(944350),ea=n(853039),er=n(104836),el=n(382137),eo=n(946996),ed=n(655839),ec=n(514549),eu=n(219199),ep=n(58212),em=n(159836);let eh=(0,H.ck)("4d633d6262a8b5f838196a652d687dd1c9123fda");function ef({upgradeRequestId:e}){let t=(0,X.U)("blocking_modal"),n=(0,a.wA)(),r=(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:Z.DD,children:(0,p.tx)("dev_handoff.paywall.request_reminder_modal.title")}),(0,i.jsx)("div",{className:Z.P_,children:(0,p.tx)("dev_handoff.paywall.request_reminder_modal.description")})]}),l=()=>{n(ep.F.enqueue({message:(0,p.t)("admin_dashboard.requests.error_generic"),error:!0,button:{text:(0,p.t)("admin_dashboard.requests.error_reload"),action:()=>{eu.Ay.reload("Seat request reminder error")}}}))},o=(0,s.useCallback)(()=>{t("design")},[t]);return(0,i.jsx)(Y.I,{imgSrc:eh,modalType:"request reminder modal",content:r,primaryButtonProps:{label:(0,p.tx)("dev_handoff.paywall.request_reminder_modal.button.send_a_reminder"),onClick:()=>{em.w.nudgeRequest({request_id:e}).catch(()=>{l()})},trackingDescriptor:W.c.SEND_REMINDER,type:"send reminder"},secondaryButtonProps:{label:(0,p.tx)("dev_handoff.paywall.blocking_modal.button.back_to_design"),onClick:o,trackingDescriptor:W.c.BACK_TO_DESIGN,type:"back to design"}})}let eg=(0,H.ck)("9a55aebf20fd5e927f609cc0e256f6e782b20d78");function ex(){let e=(0,X.U)("blocking_modal"),t=(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:Z.DD,children:(0,p.tx)("dev_handoff.paywall.reminder_sent_modal.title")}),(0,i.jsx)("div",{className:Z.P_,children:(0,p.tx)("dev_handoff.paywall.reminder_sent_modal.description")})]}),n=(0,s.useCallback)(()=>{e("design")},[e]);return(0,i.jsx)(Y.I,{imgSrc:eg,content:t,modalType:"reminder sent modal",primaryButtonProps:{label:(0,p.tx)("dev_handoff.paywall.blocking_modal.button.back_to_design"),onClick:n,trackingDescriptor:W.c.BACK_TO_DESIGN,type:"back to design"}})}var e_=n(221669),ey=n(260745);let ev=(0,H.ck)("0cc1682e265ffe998009571ee821470ca30ed096");function eb(){let{primaryButtonProps:e,secondaryButtonProps:t}=(0,ei.BC)({entryPoint:ey.i$.BlockingModal}),n=!(0,e_.n)(),s=(0,i.jsxs)("div",{className:G.s.gap6.$,children:[(0,i.jsx)("div",{className:Z.DD,children:(0,p.tx)("dev_handoff.paywall.blocking_modal.title.locked")}),(0,i.jsx)("div",{className:Z.P_,children:n?(0,p.tx)("dev_handoff.paywall.blocking_modal.content.locked_upgrade"):(0,p.tx)("dev_handoff.paywall.blocking_modal.content.locked")})]});return(0,i.jsx)(Y.I,{content:s,hideImgBorder:!0,imgHeight:32,imgSrc:ev,imgWidth:32,modalType:"team locked modal",primaryButtonProps:{...e,type:n?"upgrade":"back to design"},secondaryButtonProps:n&&t?{...t,type:"back to design"}:void 0})}function eC(){!function(){let[e,t]=(0,o.fp)(R.t),n=(0,en.J)(),i=(0,A.tS)()??"",a=(0,ei.w_)(),r=(0,B.bc)(q.Pns,{key:i}),l=a.loading,d=a.hasPendingRequest,c=r.data?.file.status!=="error"&&!!r.data?.file.data?.hasPermission,u=(0,s.useRef)(!1);s.useEffect(()=>{if(!n)return;d&&!u.current&&(u.current=!0);let i=u.current;!l&&i&&!d&&c&&e===R.c.REQUESTED&&(t(R.c.DEFAULT),u.current=!1)},[e,c,d,l,n,t])}();let e=(0,o.md)(R.t),t=(0,en.J)(),n=(0,er.cD)(),r=(0,a.d4)(e=>(0,ea.oc)(n,e)),{getPendingRequest:l,getUpgradePathway:d,getIsUpgradeHandlerLoading:c}=(0,el.wH)(),u=l(es.G_.DEV_MODE),p=!!u&&d(es.G_.DEV_MODE)!==eo.J.AUTO_PATHWAY,{requestCanBeNudged:m,requestHasBeenNudged:h,upgradeRequestId:f}=u?(0,ed.qm)(u):{requestCanBeNudged:!1,requestHasBeenNudged:!1,upgradeRequestId:null};if(t&&c())return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(ek,{}),(0,i.jsx)(ej,{})]});if(r)return(0,i.jsx)(eb,{});if(f&&t&&p){if(h)return(0,i.jsx)(ex,{});if(m)return(0,i.jsx)(ef,{upgradeRequestId:f})}return t&&e===R.c.REQUESTED&&p?(0,i.jsx)(et,{}):t&&e===R.c.DEFAULT&&p?(0,i.jsx)(Q,{}):e===R.c.DEFAULT?(0,i.jsx)(ec.R,{}):(0,i.jsx)(ek,{})}function ej(){let e=(0,F.getActiveTSSceneGraph)().getCurrentPage(),t=(0,z.HD)(e?.backgroundColor??"");return(0,i.jsx)(D.J,{mode:t?"dark":"light",children:(0,i.jsx)("div",{"data-testid":"loading-spinner",className:Z.u1,children:(0,i.jsx)(P.k,{size:"lg"})})})}function ek(){return(0,i.jsx)("div",{className:G.s.fixed.top0.left0.right0.bottom0.wFull.hFull.zIndexModal.$,style:U.sx.add({backgroundColor:"var(--color-modalbackdrop)"}).$})}function ew(){let e=(0,F.getActiveTSSceneGraph)().getCurrentPage(),t=e?.backgroundColor?(0,z.YU)({...e.backgroundColor,a:.9}):"var(--color-modalbackdrop)";return(0,i.jsx)("div",{className:G.s.fixed.top0.right0.bottom0.left0.$,style:U.sx.add({backgroundColor:t}).$})}function eE(){return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(ew,{}),(0,i.jsx)(eC,{})]})}var eT=n(511570),eS=n.n(eT),eI=n(284467),eN=n(652539),eA=n(278491),eL=n(673267),eM=n(99160),eO=n(128396),eR=n(413535),eP=n(12811),eD=n(675476);let eF="left_panel--nodesPanel---qMcy dev_handoff_nodes_panel--nodesPanel--4Pea0";var ez=n(523860);let eB=[0,1,2,3,4];function eG(){return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(eR.d,{}),(0,i.jsx)("div",{className:"left_panel--panelTitle--Q4BOG dev_handoff_nodes_panel--panelTitle--wcEcM",children:(0,p.tx)("dev_handoff.tag.ready_for_development")}),(0,i.jsxs)("div",{className:"left_panel--loadingParentRow--9WZnv",children:[(0,i.jsx)(eN.B,{className:"left_panel--chevron--ApMP6",svg:ez.A}),(0,i.jsx)(eI.Wi,{animationType:eI.JR.NO_SHIMMER,primary:!0})]}),eB.map(e=>(0,i.jsxs)("div",{className:"left_panel--loadingThumbnailRow--PEBJC",children:[(0,i.jsx)(eI.Qp,{animationType:eI.JR.NO_SHIMMER,className:"left_panel--loadingThumbnail--gEHnl"}),(0,i.jsxs)("div",{className:"left_panel--loadingThumbnailTexts--VS9R6",children:[(0,i.jsx)(eI.Wi,{animationType:eI.JR.NO_SHIMMER,primary:!0}),(0,i.jsx)(eI.Wi,{animationType:eI.JR.NO_SHIMMER,primary:!0})]})]},e)),(0,i.jsx)("div",{className:"left_panel--transparentPanelScrim--axhW3"})]})}function eU(){return(0,i.jsx)(eD.Q,{children:(0,i.jsx)(eM.$,{width:240,disableResizing:!0,children:(0,i.jsxs)("div",{className:eS()(eA.Dm,eF),"data-testid":"dev-mode-paywall-left-panel",children:[(0,i.jsx)(eO._,{}),(0,i.jsx)(eP.n,{}),(0,i.jsx)(eG,{})]})})})}function eV(){let e=(0,M.nb)(),t=(0,M.sG)(),n=(0,eL.O5)(eL.LX.DEV_MODE,{});return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(M.ur,{canvasInteractions:n}),(0,i.jsx)(eD.Q,{...e,children:(0,i.jsx)(eM.$,{disableResizing:!0,...t,children:(0,i.jsx)("div",{className:eS()(eA.Dm,eF),"data-testid":"dev-mode-paywall-left-panel",children:(0,i.jsx)(eG,{})})})})]})}var eH=n(276800),eK=n(460586),eW=n(12866),eq=n(957581),eX=n(762564),eY=n(10055),eZ=n(684742),eJ=n(529906),eQ=n.n(eJ),e$=n(416381),e0=n(609668),e1=n(95523),e2=n(364031),e3=n(599441),e5=n(349311),e4=n(415567),e6=n(372677),e7=n(896058),e8=n(664320),e9=n(487375);let te="box_model--imageBox--XoIJh box_model--_border--PCElt box_model--_layoutFlex--pL0jp",tt="box_model--variableValueContainer--oxu-X box_model--_valueContainerBase--pMK2K",tn="box_model--rawValueContainer---osq- box_model--_valueContainerBase--pMK2K",ti="box_model--valueNonValid--H7q6F",ts="box_model--value--1jh75 ellipsis--ellipsis--Tjyfa",ta="box_model--innerSizeBoxValue--l-qDX ellipsis--ellipsis--Tjyfa",tr="box_model--variable--GK5G3",tl="box_model--innerSizeBoxVariable--Lw6dO",to="box_model--gapLine--BM-H0",td="box_model--gapVertical--t9aDg box_model--gap--YPdKC box_model--_layoutFlex--pL0jp",tc="box_model--gapHorizontal--gLY-T box_model--gap--YPdKC box_model--_layoutFlex--pL0jp",tu="box_model--gapValueContainer--GsVpn box_model--_layoutFlex--pL0jp",tp="box_model--gapValue--sE-2O",tm=s.createContext(!1),th=()=>s.useContext(tm);function tf({fillContainer:e=!1,loadingState:t=!1}){let n=(0,j.uQ)();if(!n)return null;let s=r.w3z?.getAssetInfo(n)?.type,a=!t&&(0,e0.fk)(s);return(0,i.jsx)(e6.VZ,{hideHeader:!0,noPadding:!0,noBorder:!0,recordingKey:"boxModel",children:(0,i.jsx)(tm.Provider,{value:t,children:(0,i.jsxs)(tg,{fillContainer:e,children:[(0,i.jsx)(tA,{}),(0,i.jsx)(tk,{side:e1.gP.TOP}),(0,i.jsx)(tA,{}),(0,i.jsx)(tk,{side:e1.gP.LEFT}),(0,i.jsxs)(tx,{children:[(0,i.jsx)(tT,{corner:e1.Ck.TOP_LEFT}),(0,i.jsxs)(tC,{children:[(0,i.jsx)(tj,{children:(0,i.jsx)(i.Fragment,{children:"Border"})}),(0,i.jsx)(tS,{side:e1.gP.TOP})]}),(0,i.jsx)(tT,{corner:e1.Ck.TOP_RIGHT}),(0,i.jsx)(tS,{side:e1.gP.LEFT}),a?(0,i.jsx)(t_,{assetType:s}):(0,i.jsxs)(tv,{children:[(0,i.jsx)(tA,{}),(0,i.jsxs)("div",{className:"box_model--paddingTopMiddle--GiNbR",children:[(0,i.jsx)("div",{className:"box_model--paddingLabel--MsGiF",children:(0,i.jsx)(tj,{children:(0,i.jsx)(i.Fragment,{children:"Padding"})})}),(0,i.jsx)(tI,{side:e1.gP.TOP})]}),(0,i.jsx)(tA,{}),(0,i.jsx)(tI,{side:e1.gP.LEFT}),(0,i.jsx)(tb,{}),(0,i.jsx)(tI,{side:e1.gP.RIGHT}),(0,i.jsx)(tA,{}),(0,i.jsx)(tI,{side:e1.gP.BOTTOM}),(0,i.jsx)(tA,{})]}),(0,i.jsx)(tS,{side:e1.gP.RIGHT}),(0,i.jsx)(tT,{corner:e1.Ck.BOTTOM_LEFT}),(0,i.jsx)(tS,{side:e1.gP.BOTTOM}),(0,i.jsx)(tT,{corner:e1.Ck.BOTTOM_RIGHT})]}),(0,i.jsx)(tk,{side:e1.gP.RIGHT}),(0,i.jsx)(tA,{}),(0,i.jsx)(tk,{side:e1.gP.BOTTOM}),(0,i.jsx)(tA,{}),(0,i.jsx)(tL,{})]})})})}function tg({children:e,fillContainer:t}){let n=(0,e1.$L)(e1.gP.TOP),s=(0,e1.$L)(e1.gP.BOTTOM),a=!th()&&(!n||!n.distance)&&(!s||!s.distance);return(0,i.jsx)("div",{className:eS()("box_model--gapBox--6aFgq common--well--J0WtH",a&&"box_model--gapBoxNoVertical--WqZQf",t&&"box_model--fillContainer--TZUSv"),role:"img","aria-label":(0,p.t)("dev_handoff.layers_panel.box_model.aria_label"),children:e})}function tx({children:e}){let t=(0,e1.W7)(),n=th();return(0,i.jsx)("div",{className:"box_model--borderBox--Ta011 box_model--_border--PCElt",style:n?{borderRadius:16}:(0,e1.F9)(t),children:e})}function t_({assetType:e}){let t=(0,e1.yV)(),n=(0,e1.jt)(),s=(0,e1.lK)();return s?(0,i.jsx)(ty,{image:s}):(0,i.jsx)("div",{className:te,children:(0,i.jsx)(e0.B7,{assetType:e,pxWidth:t,pxHeight:n,shouldShowTypeLabel:!0,dataTestId:"boxModelAssetDetails"})})}function ty({image:e}){let t=(0,o.md)(e0.Qm),n=(0,e7.x$)(e),s=(0,e7.W3)(e);return"VIDEO"!==e.type&&s&&t?.[s]&&(n=t[s]),(0,i.jsx)("div",{className:te,children:(0,i.jsx)(e7.iV,{image:e,children:(0,i.jsxs)("div",{className:"box_model--imageLabel--x4eRc box_model--_layoutFlex--pL0jp",children:[(0,i.jsxs)("span",{className:"box_model--imageFileName--uK9h5 ellipsis--ellipsis--Tjyfa",children:[(0,e7.Rh)(e),"."]}),(0,i.jsx)("span",{className:"box_model--imageFileType--SYUTK",children:n})]})})})}function tv({children:e}){let t=th();return(0,i.jsx)("div",{className:eS()("box_model--paddingBox--x3ddV box_model--_borderStrong--VLX4w",{"box_model--paddingBoxGrayscale--SAsVz":t}),children:e})}function tb(){let e=(0,e1.yV)(),t=(0,e1.jt)(),n=tO(tM(e)),s=tO(tM(t)),a=(0,e8.lC)("WIDTH"),r=(0,e8.lC)("HEIGHT"),l=(0,e4.Cj)(n),o=(0,e4.Cj)(s);if(th())return(0,i.jsx)("div",{className:"box_model--innerSizeBoxGrayscale--geDzo box_model--innerSizeBox--fFq-v box_model--_layoutFlex--pL0jp"});let d=tw(n,"WIDTH"),c=tw(s,"HEIGHT");return(0,i.jsxs)("div",{className:"box_model--innerSizeBox--fFq-v box_model--_layoutFlex--pL0jp",children:[(0,i.jsx)(eZ.E,{className:eS()(ta,{[tl]:!!a,[tr]:!!a||!!r}),onClick:l,htmlAttributes:{"data-testid":"layoutWidth","data-tooltip":a?.name,"data-tooltip-type":e5.Ib.TEXT},"aria-label":d,children:a?(0,i.jsx)(e9.wG,{isNarrow:!0,text:n.toString(),isNonInteractive:!0}):n}),(0,i.jsx)("span",{className:"box_model--innerSizeBoxX--pxeFw",children:"\xd7"}),(0,i.jsx)(eZ.E,{className:eS()(ta,{[tl]:!!r,[tr]:!!a||!!r}),onClick:o,htmlAttributes:{"data-testid":"layoutHeight","data-tooltip":r?.name,"data-tooltip-type":e5.Ib.TEXT},"aria-label":c,children:r?(0,i.jsx)(e9.wG,{isNarrow:!0,text:s.toString(),isNonInteractive:!0}):s})]})}function tC({children:e}){return(0,i.jsx)("div",{className:"box_model--labelAndValue--tkNzd",children:e})}function tj({children:e}){return(0,i.jsx)("div",{className:"box_model--label--A5RBK text--fontPos11--2LvXf text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa",children:e})}function tk({side:e}){let{distance:t,type:n}=(0,e1.$L)(e),s=tM(t),a=n??"distance",r=(0,e4.Cj)(s);if(th())return(0,i.jsxs)("div",{className:eS()({[td]:e===e1.gP.TOP||e===e1.gP.BOTTOM,[tc]:e===e1.gP.LEFT||e===e1.gP.RIGHT,"box_model--unrealGap--XhkPS":!0}),children:[(0,i.jsx)("div",{className:to}),(0,i.jsx)("div",{className:tu,children:(0,i.jsx)("span",{className:tp,children:"\xa0"})})]});if(!(0,e1.u9)(s))return(0,i.jsx)(tA,{});let l=function(e,t,n){if(n&&t)switch(t){case"distance":switch(e){case e1.gP.TOP:return(0,p.t)("dev_handoff.box_model.copy_distance_top",{value:n});case e1.gP.RIGHT:return(0,p.t)("dev_handoff.box_model.copy_distance_right",{value:n});case e1.gP.BOTTOM:return(0,p.t)("dev_handoff.box_model.copy_distance_bottom",{value:n});case e1.gP.LEFT:return(0,p.t)("dev_handoff.box_model.copy_distance_left",{value:n})}case"padding":switch(e){case e1.gP.TOP:return(0,p.t)("dev_handoff.box_model.copy_padding_top_to_parent",{value:n});case e1.gP.RIGHT:return(0,p.t)("dev_handoff.box_model.copy_padding_right_to_parent",{value:n});case e1.gP.BOTTOM:return(0,p.t)("dev_handoff.box_model.copy_padding_bottom_to_parent",{value:n});case e1.gP.LEFT:return(0,p.t)("dev_handoff.box_model.copy_padding_left_to_parent",{value:n})}case"spacing":switch(e){case e1.gP.LEFT:return(0,p.t)("dev_handoff.box_model.copy_gap_left",{value:n});case e1.gP.TOP:return(0,p.t)("dev_handoff.box_model.copy_gap_top",{value:n});case e1.gP.RIGHT:return(0,p.t)("dev_handoff.box_model.copy_gap_right",{value:n});case e1.gP.BOTTOM:return(0,p.t)("dev_handoff.box_model.copy_gap_bottom",{value:n})}}}(e,n,s);return(0,i.jsxs)("div",{className:eS()({[td]:e===e1.gP.TOP||e===e1.gP.BOTTOM,[tc]:e===e1.gP.LEFT||e===e1.gP.RIGHT,"box_model--paddingGap--Ca1Vq":"padding"===a,"box_model--spacingGap--PWtB6":"spacing"===a,"box_model--distanceGap--ophi6":"distance"===a}),children:[(0,i.jsx)("div",{className:to}),(0,i.jsx)(eZ.E,{className:tu,onClick:r,htmlAttributes:{"data-testid":`layoutGap${eQ()(e)}`},"aria-label":l,children:(0,i.jsx)("span",{className:tp,children:s})})]})}function tw(e,t){if(e)switch(t){case"STACK_PADDING_TOP":return(0,p.t)("dev_handoff.box_model.copy_padding_top",{value:e});case"STACK_PADDING_RIGHT":return(0,p.t)("dev_handoff.box_model.copy_padding_right",{value:e});case"STACK_PADDING_BOTTOM":return(0,p.t)("dev_handoff.box_model.copy_padding_bottom",{value:e});case"STACK_PADDING_LEFT":return(0,p.t)("dev_handoff.box_model.copy_padding_left",{value:e});case"BORDER_TOP_WEIGHT":return(0,p.t)("dev_handoff.box_model.copy_border_top",{value:e});case"BORDER_RIGHT_WEIGHT":return(0,p.t)("dev_handoff.box_model.copy_border_right",{value:e});case"BORDER_BOTTOM_WEIGHT":return(0,p.t)("dev_handoff.box_model.copy_border_bottom",{value:e});case"BORDER_LEFT_WEIGHT":return(0,p.t)("dev_handoff.box_model.copy_border_left",{value:e});case"RECTANGLE_TOP_LEFT_CORNER_RADIUS":return(0,p.t)("dev_handoff.box_model.copy_border_radius_top_left",{value:e});case"RECTANGLE_TOP_RIGHT_CORNER_RADIUS":return(0,p.t)("dev_handoff.box_model.copy_border_radius_top_right",{value:e});case"RECTANGLE_BOTTOM_RIGHT_CORNER_RADIUS":return(0,p.t)("dev_handoff.box_model.copy_border_radius_bottom_right",{value:e});case"RECTANGLE_BOTTOM_LEFT_CORNER_RADIUS":return(0,p.t)("dev_handoff.box_model.copy_border_radius_bottom_left",{value:e});case"WIDTH":return(0,p.t)("dev_handoff.box_model.copy_width",{value:e});case"HEIGHT":return(0,p.t)("dev_handoff.box_model.copy_height",{value:e});default:return}}function tE({value:e,variableConsumptionField:t}){let n=tM(e),s=(0,e1.u9)(n),a=(0,e8.lC)(t),r=(0,e4.Cj)(n),l=tw(s?n:void 0,t),o=n;return a&&n&&(o=(0,i.jsx)(e9.wG,{isNarrow:!0,text:s?n:"0",tooltip:a?.name,isNonInteractive:!0})),{isValid:s,valueElement:o,displayValue:n,copyValue:r,ariaLabel:l}}function tT({corner:e}){let t=(0,e1.Fr)(e),n=(0,e$.v4)(),a=(0,e3.QO)(n,t),r=s.useMemo(()=>{switch(e){case e1.Ck.TOP_LEFT:return"box_model--borderTopLeft--Yitgl";case e1.Ck.TOP_RIGHT:return"box_model--borderTopRight--Jtfzn";case e1.Ck.BOTTOM_LEFT:return"box_model--borderBottomLeft--aRpWV";case e1.Ck.BOTTOM_RIGHT:return"box_model--borderBottomRight--Rkq3s"}},[e]),l=s.useMemo(()=>{switch(e){case e1.Ck.TOP_LEFT:return"layoutBorderRadiusTopLeft";case e1.Ck.TOP_RIGHT:return"layoutBorderRadiusTopRight";case e1.Ck.BOTTOM_LEFT:return"layoutBorderRadiusBottomLeft";case e1.Ck.BOTTOM_RIGHT:return"layoutBorderRadiusBottomRight"}},[e]),{isValid:o,valueElement:d,displayValue:c,ariaLabel:u}=tE({value:t,variableConsumptionField:s.useMemo(()=>{switch(e){case e1.Ck.TOP_LEFT:return"RECTANGLE_TOP_LEFT_CORNER_RADIUS";case e1.Ck.TOP_RIGHT:return"RECTANGLE_TOP_RIGHT_CORNER_RADIUS";case e1.Ck.BOTTOM_LEFT:return"RECTANGLE_BOTTOM_LEFT_CORNER_RADIUS";case e1.Ck.BOTTOM_RIGHT:return"RECTANGLE_BOTTOM_RIGHT_CORNER_RADIUS"}},[e])}),p=th(),m=n.id===eY.uz||n.id===eY.MT?t:a,h=c?(0,e1.EN)(e,m):{},f=(0,e4.Cj)(m);if(p)return(0,i.jsx)(tA,{});if(!o)return(0,i.jsxs)("div",{className:eS()(tn,r),"data-testid":l,children:[(0,i.jsx)("span",{className:ti,children:d}),(0,i.jsx)("div",{className:"box_model--borderRadiusNonValid--qTtSU",style:h,"data-testid":`${l}Highlight`})]});let g=tr?tt:tn,x=Math.min(t??0,e1.Tk-4);return(0,i.jsxs)(eZ.E,{style:{"--temp-border-radius":`${x}px`},className:eS()(g,r),onClick:f,htmlAttributes:{"data-testid":l},"aria-label":u,children:[(0,i.jsx)("span",{className:eS()(ts,"box_model--borderRadiusValue--tDyKD ellipsis--ellipsis--Tjyfa"),children:d}),(0,i.jsx)("div",{className:"box_model--borderRadiusHighlight--bd9Sc",style:h,"data-testid":`${l}Highlight`})]})}function tS({side:e}){let t=(0,e1.Qz)(e),n=s.useMemo(()=>{switch(e){case e1.gP.TOP:return"BORDER_TOP_WEIGHT";case e1.gP.RIGHT:return"BORDER_RIGHT_WEIGHT";case e1.gP.BOTTOM:return"BORDER_BOTTOM_WEIGHT";case e1.gP.LEFT:return"BORDER_LEFT_WEIGHT"}},[e]);return th()?(0,i.jsx)(tA,{}):(0,i.jsx)(tN,{value:t,variableConsumptionField:n,dataTestId:`layoutBorder${eQ()(e)}`,isVertical:e===e1.gP.LEFT||e===e1.gP.RIGHT})}function tI({side:e}){let t=(0,e1.tr)(e),n=s.useMemo(()=>{switch(e){case e1.gP.TOP:return"STACK_PADDING_TOP";case e1.gP.RIGHT:return"STACK_PADDING_RIGHT";case e1.gP.BOTTOM:return"STACK_PADDING_BOTTOM";case e1.gP.LEFT:return"STACK_PADDING_LEFT"}},[e]);return th()?(0,i.jsx)(tA,{}):(0,i.jsx)(tN,{value:t,variableConsumptionField:n,dataTestId:`layoutPadding${eQ()(e)}`,isVertical:e===e1.gP.LEFT||e===e1.gP.RIGHT})}function tN({value:e,dataTestId:t,variableConsumptionField:n,isVertical:s}){let{isValid:a,valueElement:r,copyValue:l,ariaLabel:o}=tE({value:e,variableConsumptionField:n??"MISSING"}),d=tr?tt:s?"box_model--valueContainerVertical--AtQ8B box_model--rawValueContainer---osq- box_model--_valueContainerBase--pMK2K":"box_model--valueContainerHorizontal--BqOkd box_model--rawValueContainer---osq- box_model--_valueContainerBase--pMK2K";return a?(0,i.jsx)(eZ.E,{className:d,onClick:l,"aria-label":o,children:(0,i.jsx)("span",{className:ts,"data-testid":t,children:r})}):(0,i.jsx)("div",{className:d,children:(0,i.jsx)("span",{className:ti,"data-testid":t,children:r})})}function tA(){return(0,i.jsx)("div",{})}function tL(){let e=(0,e4.Cj)("box-sizing: border-box"),t=(0,e$.v4)(),[n]=(0,e2.$h)();return th()||t.id!==eY.uz||"code"!==n?null:(0,i.jsx)(eZ.E,{className:"box_model--borderBoxMessage--2jJc- text--fontPos11--2LvXf text--_fontBase--QdLsd",onClick:e,htmlAttributes:{"data-tooltip":(0,p.t)("dev_handoff.box_model.border-box-tooltip"),"data-tooltip-type":e5.Ib.TEXT,"data-tooltip-show-above":!0},children:(0,i.jsx)(i.Fragment,{children:"border-box"})})}function tM(e){let t=(0,e$.v4)(),n=(0,e3.QO)(t,e,e1.B5);return void 0===e?"-":n}function tO(e){return!e||e.startsWith("-")?"0":e}var tR=n(687111),tP=n(373547),tD=n(342053),tF=n(728233),tz=n(948311),tB=n(931863),tG=n(418204),tU=n(375e3),tV=n(6855);let tH="dev_mode_selection_actions_panel--mainContainer--NfPjW",tK="dev_mode_selection_actions_panel--headerContents--hHyhq",tW="dev_mode_selection_actions_panel--layerRowContainer--h5ujW",tq="dev_mode_selection_actions_panel--headerButtons--Mb3n4",tX="dev_mode_selection_actions_panel--layerName--90Imf ellipsis--ellipsis--Tjyfa",tY="dev_mode_selection_actions_panel--layerNameWrapper--Yk3rA",tZ="dev_mode_selection_actions_panel--copyableLayerName--9gGvN",tJ="dev_mode_selection_actions_panel--layerIcon--CoQjS dev_mode_selection_actions_panel--icon--uWKNW",tQ="dev_mode_selection_actions_panel--statusIcon--qjIh0 dev_mode_selection_actions_panel--icon--uWKNW",t$="dev_mode_selection_actions_panel--layerType--d2zDm ellipsis--ellipsis--Tjyfa",t0="dev_mode_selection_actions_panel--iconType--QEUXl";var t1=n(31686),t2=n(691201),t3=n(386358),t5=n(347080),t4=n(839808);let t6=[{prefix:"display:",width:35},{prefix:"height:",width:35},{prefix:"padding:",width:145},{prefix:"justify-content:",width:100},{prefix:"align-items:",width:47},{prefix:"gap:",width:47},{prefix:"flex:",width:47}];function t7(){return(0,i.jsx)("code",{className:"right_panel--generatedCode--4M5KP code_panel--generatedCode--XGoAV code_panels_shared--code--VPQ05",style:{minWidth:"100%",whiteSpace:"normal"},children:t6.map(({prefix:e,width:t},n)=>(0,i.jsxs)("div",{className:"right_panel--codeLine--YFK5t",children:[(0,i.jsx)("div",{children:e}),(0,i.jsx)(eI.Wi,{animationType:eI.JR.NO_SHIMMER,style:{width:t,height:10}})]},n))})}let t8=[{width:97,color:500},{width:80,color:400},{width:120,color:200}],t9=[{width:97},{width:80},{width:120}],ne={inspectionMode:"code",inspectionModes:["properties","code"],setInspectionMode:eH.lQ,supportsAlternativeUnits:!0,preferenceOptions:[],preferences:{},codeLanguageApi:{codeLanguage:{type:"first-party",id:eY.uz},onCodeLanguageChange:eH.lQ,activeCodegenPlugin:null,codeLanguageOptions:[],formatter:{format:e=>(0,p.t)("dev_handoff.code.lang_css")}}};function nt(){let e="dark"===(0,tP.DP)()?"dark":"light",t="ui3"===(0,eW.DP)().version;return(0,i.jsxs)("div",{className:eS()("right_panel--drillDownContainer--FTkvu",t2.Lp,t2.Ph),"data-testid":"dev-mode-paywall-right-panel",children:[(0,i.jsx)("div",{className:eS()(t2.ux,t2.Ph),children:(0,i.jsxs)("div",{className:eS()("right_panel--panelContainer--BwtVM dev_handoff_right_panel_container--panelContainer--XcbIk dev_handoff_right_panel_container--panelContainerBase--npHfL",t2.KE,eA.Dm,t2.Ph),children:[t&&(0,i.jsx)(tz.v2,{}),(0,i.jsxs)("div",{className:G.s.wFull.flex.flexRow.flexShrink0.itemsCenter.borderBox.bSolid.bb1.pr8.colorBorder.justifyBetween.colorBg.$,children:[(0,i.jsxs)(tD.y,{withBorder:!1,children:[(0,i.jsx)("div",{className:"right_panel--tabActive--X7gwU legacy_pages_panel--tabActive--hmo0j legacy_pages_panel--tab--inhND","data-label":(0,p.t)("dev_handoff.tab.inspect"),children:(0,p.tx)("dev_handoff.tab.inspect")}),(0,i.jsx)("div",{className:"right_panel--tab--qt6mo legacy_pages_panel--tab--inhND","data-label":(0,p.t)("dev_handoff.tab.plugins"),children:(0,p.tx)("dev_handoff.tab.plugins")})]}),t&&(0,i.jsx)(tU.H,{recordingKey:"propertiesPanel.zoomMenu"})]}),(0,i.jsxs)("div",{className:"right_panel--inspectPanelContainer--ZujXg inspect_panel--inspectPanelContainer--SZhfY",children:[(0,i.jsx)(tB.W,{selectionActionsButtons:(0,i.jsx)("div",{}),selectionName:(0,i.jsx)(tG.Y,{nodeCount:1,nodeType:"FRAME",nodeTypeString:(0,p.t)("dev_handoff.paywall.panel.button")}),children:(0,i.jsxs)("div",{className:G.s.flex.flexColumn.gap16.pl16.pr16.pt4.pb8.wFull.$,children:[(0,i.jsxs)("span",{className:G.s.flex.flexRow.gap8.itemsCenter.wFull.$,children:[(0,i.jsx)("span",{className:"right_panel--layerIcon--9-ijp",children:(0,i.jsx)(eq.t,{svg:t4.A})}),(0,i.jsx)(eI.Wi,{animationType:eI.JR.NO_SHIMMER,style:{width:97,height:8}})]}),(0,i.jsxs)("div",{className:G.s.flex.flexRow.gap8.itemsCenter.wFull.$,children:[(0,i.jsx)(eK.y,{className:t0}),(0,i.jsx)(eI.Wi,{animationType:eI.JR.NO_SHIMMER,style:{width:117,height:8}})]})]})}),(0,i.jsxs)(e6.VZ,{title:(0,p.t)("dev_handoff.layer_properties"),recordingKey:"code_panel",collapsiblePanelKey:"code",children:[(0,i.jsx)(tf,{loadingState:!0}),(0,i.jsx)(tR.n2,{preferencesApi:ne,inspectionModeLayout:"tabs"}),(0,i.jsx)(eX.ue,{header:(0,i.jsx)(eX.n2,{type:"default",title:(0,p.t)("inspect_panel.properties.layout"),actions:(0,i.jsx)("div",{})}),content:(0,i.jsx)(t7,{}),shouldShowMore:!1,showMoreLinesCount:0,onShowMore:eH.lQ,leftGutter:(0,eX.vl)(t6)}),(0,i.jsx)("div",{className:G.s.wFull.h12.$}),(0,i.jsx)(e6.VZ,{title:(0,p.t)("inspect_panel.colors.title"),isSubsection:!0,recordingKey:"colors",children:t8.map(({width:t,color:n},s)=>(0,i.jsx)(tF._p,{className:t1.vQ,disableDetailModalEntry:!0,children:(0,i.jsxs)(tV.Z,{isNonInteractive:!0,hasIcon:!0,className:eS()(t3.Io,t3.yQ,G.s.wFull.$),children:[(0,i.jsx)("div",{className:"right_panel--colorThumbnailUI3--r9Rcx",style:{backgroundColor:t5[`grey_${n}_${e}`]}}),(0,i.jsx)(eI.Wi,{animationType:eI.JR.NO_SHIMMER,style:{width:t}})]})},s))})]}),(0,i.jsx)(e6.VZ,{title:(0,p.t)("dev_handoff.assets"),recordingKey:"paywall-assets",collapsiblePanelKey:"assets",children:t9.map(({width:e},t)=>(0,i.jsxs)("div",{className:"right_panel--assetRow--mAxTq asset_panel--assetRow--0VUJr text--fontPos11--2LvXf text--_fontBase--QdLsd",children:[(0,i.jsx)(eI.Qp,{animationType:eI.JR.NO_SHIMMER,className:"right_panel--assetLoadingPreview--hjUOI"}),(0,i.jsxs)("div",{className:"right_panel--assetDetails--Q51H5 asset_panel--assetDetails--xfCbP",children:[(0,i.jsx)(eI.Wi,{animationType:eI.JR.NO_SHIMMER,style:{width:e,height:8}}),(0,i.jsx)(eI.Wi,{animationType:eI.JR.NO_SHIMMER,style:{width:60,height:8}})]})]},t))})]})]})}),(0,i.jsx)("div",{className:"right_panel--transparentPanelScrim--o6uwc"})]})}var nn=n(293422),ni=n(555013),ns=n(248043),na=n(186003);let nr="vscode_paywall--vscodePaywallBody--pUvWv text--fontPos13--xW8hS text--_fontBase--QdLsd";var nl=n(756305);let no=(0,H.ck)("vscode_intro_1200.mp4");function nd({fileKey:e,teamId:t,folderId:n,parentOrgId:a,canAccessDevModeEntryPoint:r}){let o=(0,ei.Gu)(),d=[(0,p.t)("dev_handoff.paywall.vscode.list1"),(0,p.t)("dev_handoff.paywall.vscode.list2"),(0,p.t)("dev_handoff.paywall.vscode.list3"),(0,p.t)("dev_handoff.paywall.vscode.list4")],u=s.useCallback(()=>{(0,c.sx)("Dev Mode Paywall clicked",{entryPoint:"vscode_paywall",type:"VS Code Upgrade CTAAAA",fileKey:e,fileTeamId:t,fileParentOrgId:a,containingFolderId:n},{forwardToDatadog:!0}),(0,na.Qn)((0,ns.jN)({file:{key:e},isDevHandoff:!0}))},[e,n,a,t]),m=s.useCallback(()=>{(0,c.sx)("Dev Mode Paywall clicked",{entryPoint:"vscode_paywall",type:"VS Code Open docs",fileKey:e,fileTeamId:t,fileParentOrgId:a,containingFolderId:n},{forwardToDatadog:!0}),(0,na.Qn)("https://help.figma.com/hc/articles/15023121296151-Figma-for-VS-Code")},[e,n,a,t]),h=s.useCallback(()=>{(0,c.sx)("Dev Mode Paywall clicked",{entryPoint:"vscode_paywall",type:"VS Code Play Video",fileKey:e,fileTeamId:t,fileParentOrgId:a,containingFolderId:n},{forwardToDatadog:!0})},[e,n,a,t]),f=s.useCallback(()=>{(0,c.sx)("Dev Mode Paywall clicked",{entryPoint:"vscode_paywall",type:"VS Code Finish Video",fileKey:e,fileTeamId:t,fileParentOrgId:a,containingFolderId:n},{forwardToDatadog:!0})},[e,n,a,t]);return(0,i.jsx)("div",{className:"vscode_paywall--wrapper--65Gba",children:(0,i.jsxs)("div",{className:G.s.flex.maxWFull.wFull.hFull.$,children:[(0,i.jsx)("div",{className:G.s.flex.flexGrow0.flexColumn.pl32.pt32.$,children:(0,i.jsx)(eN.B,{dataTestId:"logo",title:"logo",ariaLabel:"logo",svg:nl.A,useOriginalSrcFills_DEPRECATED:!0})}),(0,i.jsxs)("div",{className:G.s.flex.flexGrow1.flexColumn.justifyCenter.alignTop.pt32.pl20.pr32.pb32.$,children:[(0,i.jsx)("div",{className:"vscode_paywall--vscodePaywallTitle---OrBg text--fontPos24--YppUD text--_fontBase--QdLsd",children:(0,p.tx)("dev_handoff.paywall.vscode.title")}),(0,i.jsx)(ni.Kz,{direction:"y",multiple:1}),(0,i.jsx)("div",{className:nr,children:(0,p.tx)("dev_handoff.paywall.vscode.description")}),(0,i.jsx)(ni.Kz,{direction:"y",multiple:3}),(0,i.jsx)("ul",{className:"vscode_paywall--vscodePaywallList--egn63",children:d.map((e,t)=>(0,i.jsx)("li",{className:"vscode_paywall--vscodePaywallListItem--Es3mO text--fontPos11--2LvXf text--_fontBase--QdLsd",children:e},t))}),(0,i.jsx)(ni.Kz,{direction:"y",multiple:3}),(0,i.jsx)("div",{className:nr,children:r?(0,p.tx)("dev_handoff.paywall.vscode.need_access",{devMode:(0,i.jsx)("strong",{children:(0,p.tx)("dev_handoff.paywall.vscode.need_access_dev_mode")})}):(0,p.tx)("dev_handoff.paywall.vscode.no_access")}),(0,i.jsx)(ni.Kz,{direction:"y",multiple:3}),(0,i.jsxs)("div",{className:"vscode_paywall--vscodePaywallButtons--JWqPr",children:[r&&o?(0,i.jsx)(nn.$n,{variant:"signup",disabled:!0,children:(0,p.tx)("dev_handoff.paywall.request_pending")}):(0,i.jsx)(nn.$n,{variant:"signup",onClick:u,disabled:!r,children:(0,p.tx)("dev_handoff.paywall.get_dev_mode")}),(0,i.jsx)(nn.$n,{variant:"secondary",onClick:m,children:(0,p.tx)("dev_handoff.paywall.vscode.view_button")})]}),!(0,l.kc)().dt_vscode_ready_for_dev&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(ni.Kz,{direction:"y",multiple:5}),(0,i.jsx)("div",{className:"vscode_paywall--vscodeVideoDescription--b-s1K text--fontPos11--2LvXf text--_fontBase--QdLsd",children:(0,p.tx)("dev_handoff.paywall.vscode.video")}),(0,i.jsx)(ni.Kz,{direction:"y",multiple:1}),(0,i.jsx)("div",{className:"vscode_paywall--vscodeVideoContainer--VcPIA",children:(0,i.jsx)("video",{controls:!0,className:"vscode_paywall--vscodeVideo--sEOiZ",src:no,onPlay:h,onEnded:f})})]})]})]})})}function nc(){let e=(0,A.q5)(),t=(0,E.U4)();return(0,i.jsx)(L.M,{isShowing:!0,children:(0,i.jsx)(nd,{fileKey:e?.key||"",teamId:e?.teamId||"",parentOrgId:e?.parentOrgId||"",folderId:e?.folderId||"",canAccessDevModeEntryPoint:t})})}function nu(){let e=s.useMemo(()=>N.z4.getIsExtension(),[]),t=(0,T.W)(),n=(0,M.HY)();s.useEffect(()=>{(0,O.xT)(240,O.Yh,O.g_),(0,I.UK)().devHandoffInspectSplitPosition.set(320)},[]),k({doReport:!1});let[a,r]=(0,o.fp)(R.t);return(s.useEffect(()=>()=>r(R.c.DEFAULT),[r]),e)?(0,i.jsx)(nc,{}):(0,i.jsx)(g.tH,{boundaryKey:"DevModePaywall",fallback:g.H4.NONE_I_KNOW_WHAT_IM_DOING,sentryTags:{area:f.e.MONETIZATION_EXPANSION},children:(0,i.jsxs)(S.fu,{name:"Dev Mode Paywall",properties:t,enabled:t?.gracePeriod!==void 0,children:[(0,i.jsx)(w.OM,{}),(0,i.jsx)(eE,{}),n?(0,i.jsx)(eV,{}):(0,i.jsx)(eU,{}),(0,i.jsx)(nt,{})]})})}var np=n(598626),nm=n(4921),nh=n(350019),nf=n(139318),ng=n(557471),nx=n(383424),n_=n(662812),ny=n(286138);let nv=(0,s.createContext)(null),nb=(0,s.forwardRef)(({manager:e,htmlAttributes:t,...n},s)=>(0,i.jsx)(nv.Provider,{value:e,children:(0,i.jsx)(nx.P,{"data-fpl-component":"primitive",fill:!0,ref:e.scrollRef,children:(0,i.jsx)("table",{role:"treegrid",ref:s,...t,...n})})}));nb.displayName="TreeGridPrimitive.Root",(0,s.forwardRef)(({htmlAttributes:e,...t},n)=>(0,i.jsx)("thead",{"data-fpl-component":"primitive",ref:n,...e,...t})).displayName="TreeGridPrimitive.Header";let nC=(0,s.forwardRef)(({htmlAttributes:e,...t},n)=>(0,i.jsx)(ny.E,{as:"thead",ref:n,...e,...t}));nC.displayName="TreeGridPrimitive.HiddenHeader",(0,s.forwardRef)(({htmlAttributes:e,...t},n)=>(0,i.jsx)("tr",{"data-fpl-component":"primitive",ref:n,...e,...t})).displayName="TreeGridPrimitive.HeaderRow";let nj=(0,s.forwardRef)(({htmlAttributes:e,...t},n)=>(0,i.jsx)("th",{"data-fpl-component":"primitive",ref:n,...e,...t}));function nk({htmlAttributes:e,children:t},n){let{virtualizer:s,visibleEntries:a,collapseIndex:r,collapseManager:l,expandSubtree:o,collapseSubtree:d,selectedRows:c}=(0,ng.$)(nv,"TreeGrid.Body","TreeGrid.Root"),u=s.getVirtualItems();return(0,i.jsx)("tbody",{"data-fpl-component":"primitive",style:{height:`${s.getTotalSize()}px`,width:"100%",position:"relative"},ref:n,...e,children:u.map(({index:e,size:n,start:i})=>{let s=a[e];return t({data:{entry:s,index:e,selected:c.includes(e),collapse:()=>r(e),collapsed:s?.children?.length?l[s.id].children:void 0,expandSubtree:()=>o(e),collapseSubtree:()=>d(e)},props:{index:e,style:{position:"absolute",top:0,left:0,width:"100%",height:`${n}px`,transform:`translateY(${i}px)`}}})})})}nj.displayName="TreeGridPrimitive.HeaderCell",nk.displayName="TreeGridPrimitive.Body";let nw=(0,s.forwardRef)(nk);nw.displayName="TreeGridPrimitive.Body";let nE=(0,s.createContext)(0),nT=(0,s.forwardRef)(({children:e,index:t,htmlAttributes:n,...a},r)=>{let l=(0,nf.M)(r),{collapseManager:o,visibleEntries:d,activeIndex:c,selectedRows:u,setIndex:p,handleKeyDown:m,selectIndex:h}=(0,ng.$)(nv,"TreeGrid.Row","TreeGrid.Root"),f=d[t],g=o[f.id];(0,s.useEffect)(()=>{c.row===t&&l.current?.focus()},[c.row,t]);let x=-1===c.row&&0===t||c.row===t;return(0,i.jsx)(nE.Provider,{value:t,children:(0,i.jsx)("tr",{"data-fpl-component":"primitive",ref:l,...n,...a,tabIndex:x?0:-1,onFocus:()=>{-1===c.row&&p({row:t})},onClick:e=>{if(e.target.closest('button, [role="button"], a[href], input, select, textarea, label'))return;let n=e.shiftKey;h(t,e.ctrlKey||e.metaKey,n)},"data-fpl-selected":u.includes(t)?"true":void 0,"data-fpl-focused":c.row===t&&void 0===c.cell,"aria-expanded":g.children,"aria-level":f.depth,onKeyDown:m,"aria-setsize":f.setSize,"aria-posinset":f.positionInSet,children:e})})});nT.displayName="TreeGridPrimitive.Row";let nS=(0,s.forwardRef)(({htmlAttributes:e,column:t,...n},a)=>{let r=(0,nf.M)(a),{activeIndex:l}=(0,ng.$)(nv,"TreeGrid.Cell","TreeGrid.Root"),o=(0,ng.$)(nE,"TreeGrid.Cell","TreeGrid.Row")===l.row&&t===l.cell;return(0,s.useEffect)(()=>{o&&r.current?.focus()},[o]),(0,i.jsx)("td",{"data-fpl-component":"primitive",ref:r,"data-fpl-focused":o,role:"gridcell",...e,...n})});function nI({htmlAttributes:e,children:t,...n},s){let a=(0,nf.M)(s),{collapseManager:r,visibleEntries:l,collapseIndex:o,expandSubtree:d,collapseSubtree:c}=(0,ng.$)(nv,"TreeGrid.ToggleControl","TreeGrid.Root"),u=(0,ng.$)(nE,"TreeGrid.ToggleControl","TreeGrid.Row"),p=l[u],m=!!r[p.id].children,h=void 0!==p.children;return h?(0,i.jsx)(eZ.E,{"data-fpl-component":"primitive",...e,...n,ref:a,"aria-expanded":m,onClick:e=>{e.altKey?m?c(u):d(u):o(u)},children:t({isExpanded:m,isExpandable:void 0!==p.children})}):t({isExpandable:h,isExpanded:m})}nS.displayName="TreeGridPrimitive.Cell",nI.displayName="TreeGridPrimitive.ToggleControl",(0,s.forwardRef)(nI);var nN=n(390579),nA=n(736813),nL=n(674524),nM=n(359166),nO=n(859277),nR=n(849757),nP=n(74528),nD=n(114720),nF=n(332285),nz=n(371952),nB=n(852415),nG=n(34378);let nU="variables_side_panel--caretButton---gYek",nV="variables_side_panel--hovered---OfAh",nH="variables_side_panel--selected--v6nN1",nK="variables_side_panel--numVars--EMeTC",nW=[],nq=(0,o.eU)(0);function nX(){let e=(0,o.md)(nD.$),t=s.useMemo(()=>({entrypoint:e}),[e]);return(0,i.jsx)(nF.gs,{name:"full_table",trackingProps:t,skipOpenAndClose:!0,children:(0,i.jsx)(nZ,{})})}function nY({variableSets:e}){(0,nP.Yy)(e);let t=(0,nP.R6)(e),n=(0,nP.i_)(),a=s.useCallback(e=>{n(null,e)},[n]);return t?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(nJ,{currentVariableSet:t,setCurrentVariableSet:a}),(0,i.jsx)(n0,{variableSet:t})]}):null}function nZ(){let e=(0,nz.yp)(),t=(0,nP.zL)(),n=t&&e.length;return t&&n?(0,i.jsx)(nY,{variableSets:e}):(0,i.jsx)("div",{className:"variables_side_panel--emptyPanelBorder--M7UIx"})}function nJ({currentVariableSet:e,setCurrentVariableSet:t}){let n=(0,nz.yp)(),a="variable-sets-list",r=s.useRef(null),l=(0,nF.ON)(),[d,c]=s.useState(!0),[u,m]=(0,o.fp)(nq),h=s.useMemo(()=>Math.min(32*n.length,144),[n.length]);s.useEffect(()=>{0===u&&m(h)},[h,u,m]);let f=s.useCallback(()=>{l("toggle_collections",{type:d?"collapse":"expand"}),c(e=>!e)},[d,l]);return(0,i.jsxs)("div",{className:"variables_side_panel--variableSetsList--by7HP",children:[(0,i.jsxs)(eZ.E,{className:"variables_side_panel--header--fc-N2",onClick:f,"aria-label":d?(0,p.t)("dev_handoff.variables.table_collections_local_collapse_aria_label"):(0,p.t)("dev_handoff.variables.table_collections_local_expand_aria_label"),"aria-expanded":d,"aria-controls":a,children:[(0,i.jsx)("div",{className:eS()(nU,"variables_side_panel--headerCaret--cJljI"),children:d?(0,i.jsx)(nN.O,{}):(0,i.jsx)(nA.k,{})}),(0,i.jsx)("div",{className:"variables_side_panel--variableSetsHeader--xvYxN ellipsis--ellipsis--Tjyfa",children:(0,p.tx)("dev_handoff.variables.table_collections_local")})]}),d&&(0,i.jsx)("div",{id:a,ref:r,children:(0,i.jsx)(nB.w,{side:"bottom",size:u,defaultSize:h,onResize:m,className:G.s.relative.$,children:(0,i.jsx)(nR.P,{className:"variables_side_panel--variableSetsScrollContainer--qTzl5",children:n.map(n=>(0,i.jsx)(n$,{variableSet:n,isSelected:e.node_id===n.node_id,setCurrentVariableSet:t,panelRef:r},n.node_id))})})})]})}function nQ({label:e,number:t,isSelected:n,onClick:a,rowRef:r,indent:l,recordingKey:o,containerClassName:d}){let[c,u]=s.useState(!1);return(0,i.jsx)("div",{className:eS()("variables_side_panel--sidebarRow--ZJg5r",d),ref:r,onMouseEnter:()=>u(!0),onMouseLeave:()=>u(!1),children:(0,i.jsxs)(eZ.E,{className:eS()("variables_side_panel--button--nNls6",{[nH]:n,[nV]:c}),style:l?{paddingLeft:`${24*l}px`}:void 0,onClick:a,recordingKey:o?(0,nL.Pt)("dev_handoff.variables_table.sidebar_row",o):void 0,children:[(0,i.jsx)("div",{className:G.s.truncate.if(n,G.s.textBodyMediumStrong).$,children:e}),void 0!==t&&(0,i.jsx)("div",{className:eS()(G.s.truncate.textBodyMedium.colorTextSecondary.$,nK),"data-testid":o&&`dev_handoff.variables_table.count.${o}`,children:t})]})})}function n$({variableSet:e,setCurrentVariableSet:t,isSelected:n,panelRef:a}){let r=s.useRef(null),{numVariables:l}=n2(e),[d,c]=(0,o.fp)(nP.bE),u=(0,nP.i_)(),p=(0,nF.ON)();s.useEffect(()=>{if(n){let e=r.current?.getBoundingClientRect()?.top??9999,t=r.current?.getBoundingClientRect()?.bottom??0,n=a.current?.getBoundingClientRect()?.top??0,i=a.current?.getBoundingClientRect()?.bottom??9999;(e<n||t>i)&&r.current?.scrollIntoView({behavior:"smooth"})}},[n,a]);let m=s.useCallback(()=>{p("click_collection"),u(null,e.node_id),t(e.node_id),c(nP.eb)},[p,t,e.node_id,c,u]);return(0,i.jsx)(nQ,{label:e.name,number:l,isSelected:n,onClick:m,rowRef:r,recordingKey:`collection.${e.name}`})}function n0({variableSet:e}){let{numVariables:t,groups:n,variableGroupCounts:a}=n2(e),{manager:r}=function({items:e,rowHeightEstimate:t,columns:n,multiselect:i=!1,initialDepth:a=0,rowSelection:r}){let{entries:l,collapseManager:o}=(0,s.useMemo)(()=>(function e(t,n={initialDepth:0},i=0){let s=[],a=[],r={},l=t.length;for(let o=0;o<t.length;o++){let d=t[o],c=o+1;if(d.children?.length){let{entries:t,collapseManager:o,idList:u}=e(d.children,n,i+1),p=d.children.map(({id:e})=>e);a.push({...d,children:u,immediateChildren:p,depth:i,setSize:l,positionInSet:c}),a.push(...t),r={...r,...o,[d.id]:{self:i<=n.initialDepth,children:i+1<=n.initialDepth}},s.push(d.id,...u)}else a.push({...d,depth:i,children:void 0,setSize:l,positionInSet:c}),s.push(d.id),r[d.id]={self:i<=n.initialDepth}}return{entries:a,collapseManager:r,idList:s}})(e,{initialDepth:a},0),[a,e]),d=(0,s.useRef)(null),[c,u]=(0,s.useState)([]),p=(0,s.useRef)(null),[m,h]=(0,s.useState)(o),[f,g]=(0,s.useState)({row:-1}),x=(0,s.useMemo)(()=>l.filter(({id:e})=>m[e].self),[m,l]),_=x.length,y=(0,nh.Te)({count:_,getScrollElement:(0,s.useCallback)(()=>d.current,[d]),estimateSize:(0,s.useCallback)(()=>t,[t]),overscan:20});return(0,s.useEffect)(()=>{r&&r(c.map(e=>l[e]))},[c,l,r]),(0,s.useMemo)(()=>{function e(e){let t=x[e],n=m[t.id];if(!t||void 0===n.children)return;let i=n.children?t.children:t.immediateChildren;if(!i)return;let s=i.reduce((e,t)=>(e[t]={self:!n.children,children:!0!==n.children&&m[t].children},e),{});h(e=>({...e,...s,[t.id]:{self:n.self,children:!n.children}}))}return{manager:{virtualizer:y,scrollRef:d,collapseManager:m,activeIndex:f,selectedRows:c,selectIndex:function(e,t=!1,n=!1){let s=p.current;if(!t&&!n||!i){1===c.length&&c[0]===e?u([]):u([e]),p.current=e;return}if(n&&null!==s){let n=Math.min(s,e),i=Array.from({length:Math.max(s,e)-n+1},(e,t)=>n+t);t?u([...new Set([...c,...i])]):u(i);return}if(t){c.includes(e)?u(c.filter(t=>t!==e)):u([...c,e]),p.current=e;return}u([e]),p.current=e},entries:l,deselectIndex:function(e){p.current=null,u(t=>t.filter(t=>t!==e))},setIndex:g,visibleEntries:x,collapseRows:function(e){let t=l.reduce((t,{id:n,children:i})=>{if(!e.includes(n)||!i)return t;for(let e=0;e<i.length;e++)t[i[e]]={self:!1,children:!0};return t},{});h(e=>({...e,...t}))},handleKeyDown:function(t){let i=m[x[f.row].id];switch(t.code){case"Home":g(e=>(y.scrollToIndex(0),{...e,row:0})),(0,n_.Ju)(t);break;case"End":g(e=>(y.scrollToIndex(x.length-1),{...e,row:x.length-1})),(0,n_.Ju)(t);break;case"ArrowDown":g(e=>{if(e.row===x.length-1)return e;let t={...e,row:e.row+1};return y.scrollToIndex(t.row),t}),(0,n_.Ju)(t);break;case"ArrowUp":g(e=>{if(0===e.row)return e;let t={...e,row:e.row-1};return y.scrollToIndex(t.row),t}),(0,n_.Ju)(t);break;case"ArrowLeft":0===f.cell&&!0===i.children?(e(f.row),g({row:f.row,cell:void 0})):g(e=>0===e.cell?{...e,cell:void 0}:void 0!==e.cell?{...e,cell:e.cell-1}:e),(0,n_.Ju)(t);break;case"ArrowRight":void 0===f.cell&&!1===i.children?(e(f.row),g({row:f.row,cell:0})):g(e=>e.cell!==n-1&&void 0!==e.cell?{...e,cell:e.cell+1}:void 0===e.cell?{...e,cell:0}:e),(0,n_.Ju)(t)}},collapseAll:function(){h(l.reduce((e,{id:t,depth:n})=>(e[t]={self:0===n,children:!1},e),{}))},collapseIndex:e,expandAll:function(){h(l.reduce((e,{id:t})=>(e[t]={self:!0,children:!0},e),{}))},expandSubtree:function(e){let t=x[e];if(!t||!t.children)return;let n=t.children.reduce((e,t)=>(e[t]={self:!0,children:!0},e),{});h(e=>({...e,...n,[t.id]:{self:!0,children:!0}}))},collapseSubtree:function(e){let t=x[e];if(!t||!t.children)return;let n=t.children.reduce((e,t)=>(e[t]={self:!1,children:!1},e),{});h(e=>({...e,...n,[t.id]:{self:!0,children:!1}}))},rowHeightEstimate:t}}},[y,d,m,f,c,l,x,t,i,n])}({items:[s.useMemo(()=>n[0]&&(0,l.kc)().fpl_variables_tree_grid?function e(t){let n=t.name.endsWith("/")?t.name.slice(0,-1).split("/").pop()||"":t.name,i=t.variables.map(({node_id:e})=>e),s=[];for(let n of t.subgroups){let t=e(n);s.push(t),t.children&&(i=[...i,...t.variables])}let a={id:""===t.name?"ALL_VARIABLES":t.name.slice(0,-1),name:""===t.name?(0,p.t)("dev_handoff.variables.table_all_vars"):n,variableCount:i.length,variables:i,children:s};return s.length>0&&(a.children=s),a}(n[0]):{id:"",name:(0,p.t)("dev_handoff.variables.table_all_vars"),variableCount:0,variables:[]},[n])],rowHeightEstimate:24,initialDepth:1/0,columns:1,multiselect:!1,rowSelection:([e])=>{e&&(m("click_group"),u(e.id))}}),d=s.useMemo(()=>n.map(e=>e.name),[n]),[c,u]=(0,o.fp)(nP.bE),m=(0,nF.ON)(),h=(0,A.tS)(),[f,g]=(0,nM.Wz)(`dev_mode_variables_sidebar_collapsed_groups__${h}`,{}),x=f[e.node_id]??nW,_=s.useCallback((t,n)=>{n.stopPropagation();let i=""===t?nP.eb:t;g(t=>{let n=t[e.node_id]??nW,s=n.includes(i)?n.filter(e=>e!==i):[...n,i];return{...t,[e.node_id]:s}})},[g,e.node_id]),y=s.useCallback(e=>{m("click_group"),u(e)},[m,u]);return(s.useEffect(()=>{d.includes(c)||u(nP.eb)},[d,c,u]),0===t)?null:(0,l.kc)().fpl_variables_tree_grid?(0,i.jsxs)(nb,{manager:r,style:{width:"100%",height:"100%"},children:[(0,i.jsxs)(nC,{children:[(0,i.jsx)(nj,{children:(0,p.t)("dev_handoff.variables.table_column_visibility")}),(0,i.jsx)(nj,{children:(0,p.t)("dev_handoff.variables.table_column_name")}),(0,i.jsx)(nj,{children:(0,p.t)("dev_handoff.variables.table_column_variable_count")})]}),(0,i.jsx)(nw,{children:({data:e,props:{style:t,index:n}})=>(0,i.jsxs)(nT,{className:"variables_side_panel--fplTreeRow--mKgCw",index:n,style:{paddingLeft:`${1.5*e.entry.depth}rem`,...t},children:[(0,i.jsx)(nS,{column:0,children:e.entry.children?(0,i.jsx)(nm.f,{onIcon:(0,i.jsx)(nN.O,{}),offIcon:(0,i.jsx)(nA.k,{}),checked:e.collapsed,onChange:e.collapse,"aria-label":(0,p.t)("dev_handoff.variables.table_groups_expand_aria_label")}):null}),(0,i.jsx)(nS,{column:1,style:{minWidth:"3rem",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:e.entry.name}),(0,i.jsx)(nS,{column:2,style:{textAlign:"right"},children:e.entry.variableCount})]})})]}):(0,i.jsx)(nR.P,{className:"variables_side_panel--variableGroupsScrollContainer--B2ilG",children:n.map((e,t)=>(0,i.jsx)(n1,{canShowCaret:e.subgroups.length>0,collapsedGroupNames:x,containerClassName:t===n.length-1?"variables_side_panel--isLastRow--LyNKQ":void 0,label:e.name,onClickCaret:_,recordingKey:""===e.name?"group.all_variables":`group.${e.name}`,selectedGroup:c,setSelectedGroup:y,variableGroupCounts:a},e.name))})}function n1({label:e,variableGroupCounts:t,selectedGroup:n,setSelectedGroup:a,containerClassName:r,recordingKey:l,canShowCaret:o,onClickCaret:d,collapsedGroupNames:c}){let[u,m]=s.useState(!1),h=""===e,f=h?n===nP.eb:n===e,{labelToDisplay:g,number:x,indent:_,isCollapsed:y,isInCollapsedGroup:v}=(0,s.useMemo)(()=>{let n=e.split("/"),i=n.pop()??"",s=h?(0,p.t)("dev_handoff.variables.table_all_vars"):i,a=n.length,r=h?nP.eb:e,l=c.includes(r),o=c.some(e=>!h&&e===nP.eb||e!==r&&r.startsWith(`${e}/`));return{number:t[e],indent:a,labelToDisplay:s,isCollapsed:l,isInCollapsedGroup:o}},[h,c,e,t]),b=s.useCallback(()=>{a(h?nP.eb:e)},[a,h,e]);return v?null:(0,i.jsx)("div",{className:eS()("variables_side_panel--groupRow--bvXHW",r),onMouseEnter:()=>m(!0),onMouseLeave:()=>m(!1),children:(0,i.jsxs)(nO.D8,{className:eS()("variables_side_panel--groupButton--M6HtP",{[nH]:f,[nV]:u}),style:_?{paddingLeft:`${24*_}px`}:void 0,onClick:b,recordingKey:(0,nL.Pt)("dev_handoff.variables_table.sidebar_row",l),children:[o&&(0,i.jsx)(eZ.E,{onClick:t=>d(e,t),"aria-label":y?(0,p.t)("dev_handoff.variables.table_groups_expand_aria_label"):(0,p.t)("dev_handoff.variables.table_groups_collapse_aria_label"),className:eS()(nU,"variables_side_panel--rowCaret--MC8Fl"),children:y?(0,i.jsx)(nA.k,{}):(0,i.jsx)(nN.O,{})}),(0,i.jsxs)("div",{className:eS()("variables_side_panel--buttonContent--oy54B",{"variables_side_panel--noCaret--E9UAF":!o}),children:[(0,i.jsx)("div",{className:G.s.truncate.$,children:g}),x&&(0,i.jsx)("div",{className:eS()(G.s.truncate.textBodyMedium.colorTextSecondary.$,nK),"data-testid":l&&`dev_handoff.variables_table.count.${l}`,children:x})]})]})})}function n2(e){let t=(0,nP.vo)(e),n=t.find(e=>""===e.name),i=(0,nG.GC)(n).length,s={};return t.forEach(e=>{s[e.name]=(0,nG.GC)(e).length}),{numVariables:i,groups:t,variableGroupCounts:s}}var n3=n(443192),n5=n(435869),n4=n(344354),n6=n(76404),n7=n(867570),n8=n(83202),n9=n(508011),ie=n(74620),it=n(762783),ii=n(587277),is=n(592726),ia=n(174730),ir=n(737791),il=n(306728),io=n(167860),id=n(315515),ic=n(299117),iu=n(965685),ip=n(819851),im=n(90844),ih=n(422872),ig=n(381059),ix=n(143277),i_=n(381888),iy=n(61102),iv=n(205798),ib=n(643330),iC=n(441030),ij=n(826666);function ik(){let e=(0,o.md)(ig.mp),t=(0,ip.m0)(),n=(0,ie.aV)(),{uniqueId:a,show:l,isShowing:d,complete:c}=(0,ih.e)({overlay:iC.War,priority:ix.N.SECONDARY_MODAL},[e]),u=(0,s.useCallback)(()=>{!n&&t&&l({canShow:e=>(function(e){let t=Date.now();return e.getTime()<=t-12096e5})(e)})},[n,l,t]);(0,im.E)(a,(0,iv.wX)("dev"),()=>{u()});let m=(0,iu.uh)(),h=(0,i.jsx)("span",{style:{fontWeight:"bold",display:"contents"},children:m(r.NLJ.DROPPER_COLOR)});return(0,i.jsx)(iy.rq,{arrowPosition:ib.F_.BOTTOM,clickOutsideToHide:!0,description:(0,p.tx)("dev_handoff.eyedropper.onboarding_body",{shortcutText:h}),isShowing:d,media:(0,i.jsx)(i_.y,{src:(0,H.ck)("0b9e6e49a3c90f0d872b021c82a55b9d0bf71927"),alt:(0,p.t)("dev_handoff.eyedropper.onboarding_image_alt"),aspectRatio:1843/1037}),onClose:c,targetKey:ij.K,title:(0,p.tx)("dev_handoff.eyedropper.onboarding_title"),trackingContextName:"Eyedropper Tool In Dev Mode Onboarding",width:240})}var iw=n(661379),iE=n(993604),iT=n(81786),iS=n(804363),iI=n(822846),iN=n(910372),iA=n(929302),iL=n(950187),iM=n(268389),iO=n(420680),iR=n(649154),iP=n(336518),iD=n(225654),iF=n(166887),iz=n(235711);let iB="dev_handoff_seen_config_wizard",iG=(0,iz.Fu)(iB);var iU=n(476008),iV=n(270154),iH=n(70055),iK=n(45551),iW=n(462730),iq=n(475477),iX=n(620480),iY=n(188426),iZ=n(848561),iJ=n(339859),iQ=n(44821),i$=n(303327),i0=n(566866),i1=n(467179),i2=n(919242),i3=n(871374),i5=n(435049),i4=n(206187),i6=n(896327),i7=n(813371),i8=n(966990);let i9="configuration_wizard--step--9zx-B",se="configuration_wizard--buttonRow--2GlLI",st="configuration_wizard--spacer--LCRlq",sn="configuration_wizard--welcomeVideo--PNKpG",si="configuration_wizard--preferenceOptionsGroup--T5b2t",ss="configuration_wizard--unitOption--R7eMs configuration_wizard--preferenceOption--OkUN2",sa="configuration_wizard--integrationsCard--aup-J configuration_wizard--preferenceOptionCard--C3ZkW configuration_wizard--preferenceOption--OkUN2",sr="configuration_wizard--unitText--PiILT",sl="configuration_wizard--preferenceSubheader--orNpN text--fontPos11--2LvXf text--_fontBase--QdLsd",so="configuration_wizard--preferenceTitle--lA1Na text--fontPos13Whyte--VhWqH text--_fontBaseWhyte--efAjI",sd="configuration_wizard--unitRadioOption--YokOy",sc="configuration_wizard--stepHeading--b5Yv4 text--fontPos18Whyte--M40th text--_fontBaseWhyte--efAjI",su="configuration_wizard--stepDescription--uSn6A text--fontPos12Whyte---tkNx text--_fontBaseWhyte--efAjI",sp="configuration_wizard--option--I5GPA",sm="configuration_wizard--optionHeading--9e-1V text--fontPos12Whyte---tkNx text--_fontBaseWhyte--efAjI",sh="configuration_wizard--pluginListDivider--LeuxA",sf="configuration_wizard--pluginList---hNhu",sg="configuration_wizard--dividerListContainer--r4GxV",sx="configuration_wizard--pluginCta--WgsY- resource_tiles--cta--JU9XJ text--fontPos12--YsUAh text--_fontBase--QdLsd",s_="configuration_wizard--pluginTick--YbuJa",sy="configuration_wizard--spinnerContainer--2xXeT";var sv=n(191424),sb=n(386094),sC=n(145768),sj=n(117783),sk=n(8369);let sw="OTHER";function sE(){let e=(0,e$.v4)(),{codegenPlugins:t=[],loading:n}=(0,iJ.n)(),a=(0,iQ.gB)(),[l,o]=s.useState("first-party"===e.type?e.id:sw),[d,c]=s.useState(!1),u=!n&&t?.length>0,[m,h]=s.useState(u?sR(t[0]):void 0);return s.useEffect(()=>{if(!m&&!n&&t?.length>0){let e=sR(t[0]);h(e),a(e)}},[t,n,m,a]),(0,i.jsxs)("div",{className:i9,children:[(0,i.jsx)("h1",{className:sc,children:(0,p.tx)("dev_handoff.configuration_wizard.code_language_step.title")}),(0,i.jsx)("h2",{className:su,children:(0,p.tx)("dev_handoff.configuration_wizard.code_language_step.description")}),(0,i.jsx)(sT,{selectedOption:l,onSelect:e=>{o(e),e===eY.p?(0,I.UK)().colorFormat.set(r.NVY.UIColor):(0,I.UK)().colorFormat.set(r.NVY.HEX),e===eY.p?a({type:"first-party",id:d?eY.Ap:eY.p}):e===eY.LK?a({type:"first-party",id:d?eY.NU:eY.LK}):e!==sw?a({type:"first-party",id:e}):m&&a(m)}}),l===eY.p||l===eY.LK?(0,i.jsx)(sI,{selectedLanguage:l,shouldUseLegacyMobileCodegen:d,onFrameworkSelect:e=>{c(e),l===eY.p&&a({type:"first-party",id:e?eY.Ap:eY.p}),l===eY.LK&&a({type:"first-party",id:e?eY.NU:eY.LK})}}):null,l!==sw?(0,i.jsx)(sA,{}):(0,i.jsx)(sO,{onSelect:h,loading:n,codegenPlugins:t})]})}function sT({onSelect:e,selectedOption:t}){let n=(0,H.sL)()?[{key:eY.uz,title:(0,p.t)("dev_handoff.code.lang_css"),subheader:null,svgSrc:sk.A},{key:eY.p,title:(0,p.t)("dev_handoff.configuration_wizard.code_language_step.option_ios"),subheader:null,svgSrc:sC.A},{key:eY.LK,title:(0,p.t)("dev_handoff.configuration_wizard.code_language_step.option_android"),subheader:null,svgSrc:sb.A}]:[{key:eY.uz,title:(0,p.t)("dev_handoff.code.lang_css"),subheader:null,svgSrc:sk.A},{key:eY.p,title:(0,p.t)("dev_handoff.configuration_wizard.code_language_step.option_ios"),subheader:null,svgSrc:sC.A},{key:eY.LK,title:(0,p.t)("dev_handoff.configuration_wizard.code_language_step.option_android"),subheader:null,svgSrc:sb.A},{key:sw,title:(0,p.t)("dev_handoff.configuration_wizard.code_language_step.option_other"),subheader:null,svgSrc:sj.A}];return(0,i.jsxs)("div",{className:sp,children:[(0,i.jsx)("div",{className:sm,children:(0,p.tx)("dev_handoff.configuration_wizard.code_language_step.what_platform")}),(0,i.jsx)(iH.b,{value:String(t),onChange:e,className:si,children:n.map(({key:e,title:t,svgSrc:n})=>(0,i.jsxs)("div",{className:"configuration_wizard--preferenceOptionCard--C3ZkW configuration_wizard--preferenceOption--OkUN2",children:[(0,i.jsx)(eN.B,{svg:n,className:"configuration_wizard--platformIcon--F7N2s"}),(0,i.jsx)(iK.c,{value:e,id:e,className:"configuration_wizard--radioOption--Yfm0j"}),(0,i.jsx)("div",{className:"configuration_wizard--preferenceText--ZqN2L",children:(0,i.jsx)(sS,{htmlFor:e,title:t})})]},e))})]})}function sS({title:e,htmlFor:t}){let n=(0,i6.X)(e);return(0,i.jsx)("label",{className:eS()(so,"configuration_wizard--ellipsis--Y-LP0 ellipsis--ellipsis--Tjyfa"),htmlFor:t,...n,children:e})}function sI({selectedLanguage:e,shouldUseLegacyMobileCodegen:t,onFrameworkSelect:n}){let a=s.useMemo(()=>e===eY.p?[{key:!1,title:(0,p.t)("dev_handoff.code.lang_swiftui")},{key:!0,title:(0,p.t)("dev_handoff.code.lang_uikit")}]:[{key:!1,title:(0,p.t)("dev_handoff.code.lang_compose")},{key:!0,title:(0,p.t)("dev_handoff.code.lang_android_xml")}],[e]);return(0,i.jsxs)("div",{className:sp,children:[(0,i.jsx)("div",{className:sm,children:(0,p.tx)("dev_handoff.configuration_wizard.code_language_step.what_framework")}),(0,i.jsx)(iH.b,{value:String(t),onChange:e=>{n("true"===e)},className:si,children:a.map(({key:e,title:t})=>(0,i.jsx)("label",{className:ss,children:(0,i.jsxs)("div",{className:sr,children:[(0,i.jsx)("div",{className:so,children:t}),(0,i.jsx)(iK.c,{value:String(e),id:String(e),className:sd})]})},String(e)))})]})}let sN=new i5.KD({min:.1});function sA(){let e=(0,e$.v4)(),t=(0,e3.Em)(),n=(0,e3.RH)(),a=(0,e3.wQ)(),r=(0,e3.Bs)(),l=s.useCallback(t=>r(e,null,{unit:t}),[e,r]),o=(0,e3.gc)(e.id),d=s.useCallback(t=>{t&&r(e,null,{scaleFactor:t})},[e,r]),c=o?.scaleFactor??1,u="first-party"===e.type&&(e.id===eY.LK||e.id===eY.NU||e.id===eY.p||e.id===eY.Ap),m=s.useMemo(()=>new i$.Be(a),[a]),h=s.useMemo(()=>i0.zq.map(e=>({key:e,title:m.format(e)})),[m]);return t?(0,i.jsxs)("div",{className:sp,children:[(0,i.jsx)("div",{className:sm,children:(0,p.tx)("dev_handoff.configuration_wizard.code_language_step.what_units")}),(0,i.jsx)(iH.b,{value:String(n),onChange:e=>l(parseInt(e)),className:si,children:h.map(({key:e,title:t})=>(0,i.jsx)("label",{className:ss,children:(0,i.jsxs)("div",{className:sr,children:[(0,i.jsx)("div",{className:so,children:t}),(0,i.jsx)(iK.c,{value:String(e),id:String(e),className:sd})]})},e))}),n===i3.tK.SCALED&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"configuration_wizard--optionHeadingWithPadding--MnGm9 configuration_wizard--optionHeading--9e-1V text--fontPos12Whyte---tkNx text--_fontBaseWhyte--efAjI",children:(0,p.tx)("dev_handoff.alternative_units.inspection_scale_factor")}),u?(0,i.jsx)(i1.Rg,{scaleFactor:c,onChange:d,trigger:(0,i.jsxs)(iW.l9,{"aria-label":(0,p.t)("dev_handoff.alternative_units.scale_factor.select_label"),className:"configuration_wizard--scaleFactorDropdownInput--h8Jr2 text--fontPos13Whyte--VhWqH text--_fontBaseWhyte--efAjI",id:"ONBOARDING_SCALE_FACTOR_DROPDOWN",children:[(0,i2.r)(c),(0,i.jsx)(iX.r,{})]})}):(0,i.jsx)(i7.Q7,{className:"configuration_wizard--scaleFactorInput--ezaTA text--fontPos13Whyte--VhWqH text--_fontBaseWhyte--efAjI",property:c,formatter:sN,onChange:d,allowEmpty:!1,noBorderOnFocus:!0}),(0,i.jsx)("div",{className:sl,children:(0,i.jsx)(i1.LO,{codeLanguage:e})})]})]}):null}function sL(){return(0,i.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:(0,i.jsxs)("g",{id:"Frame 1321317093",children:[(0,i.jsx)("rect",{width:"24",height:"24",rx:"4.5",fill:"#2C2C2C"}),(0,i.jsx)("rect",{x:"4",y:"4",width:"10.5",height:"1.5",fill:"#D9D9D9"}),(0,i.jsx)("rect",{x:"7",y:"8",width:"12",height:"1.5",fill:"#E4A3D9"}),(0,i.jsx)("rect",{x:"9",y:"13",width:"12",height:"1.5",fill:"#97C1EF"}),(0,i.jsx)("rect",{x:"4",y:"17.5",width:"10.5",height:"1.5",fill:"#D9D9D9"})]})})}function sM(){return(0,i.jsxs)("div",{className:"configuration_wizard--customCodegenPromo--Sg78f",children:[(0,i.jsx)("div",{className:"configuration_wizard--customCodegenPromoIcon--ND7NT",children:(0,i.jsx)(sL,{})}),(0,i.jsxs)("div",{className:"configuration_wizard--customCodegenPromoWrapper--steEn",children:[(0,i.jsx)("div",{className:"configuration_wizard--customCodegenPromoTitle--31anH text--fontPos12--YsUAh text--_fontBase--QdLsd",children:(0,p.tx)("dev_handoff.configuration_wizard.code_language_step.custom_codegen_promo_title")}),(0,i.jsx)("div",{className:"configuration_wizard--customCodegenPromoBody--EsEFB text--fontPos11--2LvXf text--_fontBase--QdLsd",children:(0,p.tx)("dev_handoff.configuration_wizard.code_language_step.custom_codegen_promo_body")})]}),(0,i.jsx)("div",{className:"configuration_wizard--customCodegenPromoLink--0l-Sa",children:(0,i.jsxs)(iq.N,{newTab:!0,href:"https://www.figma.com/plugin-docs/api/figma-codegen/",children:[(0,p.tx)("dev_handoff.configuration_wizard.code_language_step.custom_codegen_promo_link"),(0,i.jsx)(iY.S,{style:{"--color-icon":"var(--color-icon-brand)"}})]})})]})}function sO({onSelect:e,loading:t,codegenPlugins:n}){let s=t?(0,i.jsx)("div",{className:sy,children:(0,i.jsx)(P.k,{})}):(0,i.jsxs)(iZ.dP,{children:[n.map((t,n)=>(0,i.jsx)(sP,{plugin:t,onSelect:e},`${t.id}_${n}`)),(0,i.jsx)(sM,{})]});return(0,i.jsxs)("div",{className:"configuration_wizard--otherLanguagesContainer--2J1b5",children:[(0,i.jsx)("h1",{className:"configuration_wizard--otherLanguagesListHeading--M2BwY text--fontPos12Whyte---tkNx text--_fontBaseWhyte--efAjI",children:(0,p.tx)("dev_handoff.configuration_wizard.code_language_step.other_title")}),(0,i.jsx)("h2",{className:"configuration_wizard--otherLanguagesListDescription--jeS2m text--fontPos12Whyte---tkNx text--_fontBaseWhyte--efAjI",children:(0,p.tx)("dev_handoff.configuration_wizard.code_language_step.other_description")}),(0,i.jsxs)("div",{className:sg,children:[(0,i.jsx)("div",{className:sh}),(0,i.jsx)("div",{className:sf,children:s})]})]})}function sR(e){return{type:"published-plugin",id:e.id,pluginLanguage:function(e){let t=e?.versions?.[e?.current_plugin_version_id??""];return i4.m(t)?.[0]?.value??""}(e)}}function sP({plugin:e,onSelect:t}){let n=(0,e$.v4)(),a=(0,iQ.gB)(),r="first-party"!==n.type&&n.id===e.id,l=s.useMemo(()=>sR(e),[e]),o=s.useCallback(()=>{a(l),t(l)},[l,a,t]),d=r?(0,i.jsxs)("div",{className:sx,children:[(0,i.jsx)(eN.B,{svg:sv.A,className:s_}),(0,p.tx)("community.plugins.selected")]}):(0,i.jsx)("div",{className:sx,children:(0,p.tx)("community.plugins.select")});return(0,i.jsx)(i8.Cg,{plugin:e,ctaButton:d,onClick:r?void 0:o})}var sD=n(851824);function sF(){let{inspectPlugins:e=[],loading:t}=(0,iJ.n)(),n=t?(0,i.jsx)("div",{className:sy,children:(0,i.jsx)(P.k,{})}):(0,i.jsx)(iZ.dP,{children:e.map((e,t)=>(0,i.jsx)(sz,{plugin:e},`${e.id}_${t}`))});return(0,i.jsxs)("div",{className:i9,children:[(0,i.jsx)("h1",{className:sc,children:(0,p.tx)("dev_handoff.configuration_wizard.inspect_plugins_step.title")}),(0,i.jsx)("h2",{className:su,children:(0,p.tx)("dev_handoff.configuration_wizard.inspect_plugins_step.description")}),(0,i.jsxs)("div",{className:sg,children:[(0,i.jsx)("div",{className:sh}),(0,i.jsx)("div",{className:sf,children:n})]})]})}function sz({plugin:e}){let{pinnedPlugins:t,pinPlugin:n,unpinPlugin:a}=(0,iV.VR)(),r=e.id,l=s.useMemo(()=>!!t.find(e=>e.plugin_id===r),[t,r]),[o,d]=s.useState(l);s.useEffect(()=>{d(l)},[l]);let c=(0,sD.A)(()=>{d(!0),n(r)},200),u=(0,sD.A)(()=>{d(!1),a(r)},200),m=o?(0,i.jsxs)("div",{className:sx,children:[(0,i.jsx)(eN.B,{svg:sv.A,className:s_}),(0,p.tx)("community.plugins.pinned")]}):(0,i.jsx)("div",{className:sx,children:(0,p.tx)("community.plugins.pin")});return(0,i.jsx)(i8.Cg,{plugin:e,ctaButton:m,onClick:o?u:c})}var sB=n(147046),sG=n(952460),sU=n(506192),sV=n(346886),sH=n(957897);function sK(){let e=(0,a.wA)(),t=(0,iF.am)();return(0,i.jsxs)("div",{className:i9,children:[(0,i.jsx)("h1",{className:sc,children:(0,p.tx)("dev_handoff.configuration_wizard.install_extensions_step.title")}),(0,i.jsx)("h2",{className:su,children:(0,p.tx)("dev_handoff.configuration_wizard.install_extensions_step.description")}),(0,i.jsxs)("div",{className:si,children:[(0,i.jsxs)("div",{className:sa,children:[(0,i.jsx)("img",{srcSet:"data:image/png;base64,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 2x",alt:""}),(0,i.jsx)("div",{className:so,children:(0,p.tx)("dev_handoff.configuration_wizard.install_extensions_step.figma_for_vscode")}),(0,i.jsx)("div",{className:sl,children:(0,p.tx)("dev_handoff.configuration_wizard.install_extensions_step.figma_for_vscode_description")}),(0,i.jsx)(nn.$n,{variant:"primary",onClick:()=>{t("vscode.install_extension_clicked"),e((0,sG.RK)({rawInput:"https://marketplace.visualstudio.com/items?itemName=figma.figma-vscode-extension"}))},children:(0,p.tx)("dev_handoff.configuration_wizard.install_extensions_step.figma_for_vscode_install")})]}),(0,i.jsxs)("div",{className:sa,children:[(0,i.jsx)("img",{srcSet:"data:image/png;base64,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 2x",alt:""}),(0,i.jsx)("div",{className:so,children:(0,p.tx)("dev_handoff.configuration_wizard.install_extensions_step.figma_for_messaging")}),(0,i.jsx)("div",{className:sl,children:(0,p.tx)("dev_handoff.configuration_wizard.install_extensions_step.figma_for_messaging_description")}),(0,i.jsx)(sW,{})]})]})]})}function sW({}){let e=(0,a.wA)(),t="install-messaging-dropdown",n=(0,sU.Um)(),r=s.useRef(null),l=n?.type===t,o=[{displayText:(0,p.t)("dev_handoff.configuration_wizard.install_extensions_step.figma_for_messaging_install.figma_for_slack"),callback:()=>{e((0,sG.RK)({rawInput:"https://figma.slack.com/apps/A01N2QYSA81-figma-and-figjam?tab=more_info"}))}},{displayText:(0,p.t)("dev_handoff.configuration_wizard.install_extensions_step.figma_for_messaging_install.figma_for_teams"),callback:()=>{e((0,sG.RK)({rawInput:"https://appsource.microsoft.com/en-us/product/office/WA200004521?exp=ubp8"}))}}];return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{ref:r,children:(0,i.jsx)(nn.$n,{variant:"primary",onClick:()=>{l?e(sB.oB()):e(sB.j7({type:t}))},children:(0,i.jsxs)("span",{className:"configuration_wizard--installButton--PPj7O",children:[(0,p.tx)("dev_handoff.configuration_wizard.install_extensions_step.figma_for_messaging_install"),(0,i.jsx)(eN.B,{svg:sH.A,className:"configuration_wizard--chevronDown--P7ECL"})]})})}),l&&r.current&&(0,i.jsx)(sV.j,{items:o,onSelectItem:t=>{t.callback&&t.callback("",null,e)},dispatch:e,parentRect:r.current.getBoundingClientRect(),showPoint:!1,lean:"right"})]})}var sq=n(816565);let sX=(0,H.ck)("a3450b8ad7656f9effceee031614fefae7cb4913");function sY(){return(0,i.jsxs)("div",{className:i9,children:[(0,i.jsx)("h1",{className:sc,children:(0,p.tx)("dev_handoff.configuration_wizard.mcp_server_step.title")}),(0,i.jsx)("h2",{className:su,children:(0,p.tx)("dev_handoff.configuration_wizard.mcp_server_step.description")}),(0,i.jsx)("div",{className:sn,children:(0,i.jsx)(sq.oW,{src:sX,alt:"MCP Server"})}),(0,i.jsx)("div",{className:st})]})}var sZ=n(116123);function sJ(){let e=(0,a.wA)(),t=(0,tP.am)(),n=[{theme:"system",title:(0,p.t)("fullscreen_actions.theme.system_theme"),ModeSvg:s0},{theme:"light",title:(0,p.t)("fullscreen_actions.theme.light"),ModeSvg:sQ},{theme:"dark",title:(0,p.t)("fullscreen_actions.theme.dark"),ModeSvg:s$}];return(0,i.jsxs)("div",{className:i9,children:[(0,i.jsx)("h1",{className:sc,children:(0,p.tx)("dev_handoff.configuration_wizard.theme_step.title")}),(0,i.jsx)("h2",{className:su,children:(0,p.tx)("dev_handoff.configuration_wizard.theme_step.description")}),(0,i.jsx)(iR.bL,{value:t,onChange:t=>e(sZ.Qh({theme:t,userInitiated:!0})),className:si,legend:(0,i.jsx)(iP.q,{children:(0,p.tx)("dev_handoff.configuration_wizard.theme_step.title")}),children:n.map(({theme:e,title:t,ModeSvg:n})=>(0,i.jsxs)(iR.c$,{className:"configuration_wizard--modeOptionCard--0rFq6 configuration_wizard--preferenceOption--OkUN2","aria-label":"",value:e,children:[(0,i.jsx)("div",{className:"configuration_wizard--modeImage--TZBtz",children:(0,i.jsx)(n,{})}),(0,i.jsx)("div",{className:so,children:t})]},e))})]})}function sQ(){return(0,i.jsx)("svg",{width:"120",height:"80",viewBox:"0 0 120 80",fill:"none",children:(0,i.jsxs)("g",{id:"Design",children:[(0,i.jsx)("rect",{width:"120",height:"80",fill:"#F5F5F5"}),(0,i.jsx)("rect",{id:"Rectangle 47",width:"120",height:"80",fill:"#E5E5E5"}),(0,i.jsxs)("g",{id:"Group 14125",children:[(0,i.jsxs)("g",{id:"Group 14124",children:[(0,i.jsx)("rect",{id:"Rectangle 52",x:"48.3502",y:"24.3512",width:"24.9782",height:"39.8305",fill:"white",stroke:"#0D99FF",strokeWidth:"0.67509"}),(0,i.jsx)("ellipse",{id:"Ellipse 278",cx:"53.7509",cy:"30.7661",rx:"3.37544",ry:"3.37547",fill:"black",fillOpacity:"0.3"}),(0,i.jsx)("rect",{id:"Rectangle 53",x:"59.489",y:"29.414",width:"11.4765",height:"2.70037",rx:"0.506318",fill:"#D9D9D9"}),(0,i.jsx)("rect",{id:"Rectangle 59",x:"50.7129",y:"56.7539",width:"20.2526",height:"4.72565",rx:"0.506318",fill:"#0D99FF"}),(0,i.jsx)("rect",{id:"Rectangle 55",x:"50.7129",y:"37.8555",width:"18.2274",height:"2.70037",rx:"0.506318",fill:"#D9D9D9"}),(0,i.jsx)("rect",{id:"Rectangle 57",x:"50.7131",y:"42.5762",width:"14.8519",height:"2.70037",rx:"0.506318",fill:"#D9D9D9"}),(0,i.jsx)("rect",{id:"Rectangle 60",x:"50.7129",y:"47.3047",width:"17.2147",height:"2.70037",rx:"0.506318",fill:"#D9D9D9"})]}),(0,i.jsx)("rect",{id:"Rectangle 2154",x:"47.3375",y:"23.3375",width:"2.02526",height:"2.02528",fill:"white",stroke:"#0D99FF",strokeWidth:"0.67509"}),(0,i.jsx)("rect",{id:"Rectangle 2155",x:"72.3158",y:"23.3378",width:"2.02526",height:"2.02528",fill:"white",stroke:"#0D99FF",strokeWidth:"0.67509"}),(0,i.jsx)("rect",{id:"Rectangle 2156",x:"47.3375",y:"63.1696",width:"2.02526",height:"2.02528",fill:"white",stroke:"#0D99FF",strokeWidth:"0.67509"}),(0,i.jsx)("rect",{id:"Rectangle 2157",x:"72.3158",y:"63.1696",width:"2.02526",height:"2.02528",fill:"white",stroke:"#0D99FF",strokeWidth:"0.67509"})]}),(0,i.jsx)("rect",{id:"Rectangle 50",width:"26.0423",height:"80",fill:"white"}),(0,i.jsx)("rect",{id:"Rectangle 11539",x:"3",y:"11",width:"18",height:"2",rx:"1",fill:"#EEEEEE"}),(0,i.jsx)("rect",{id:"Rectangle 11548",x:"3",y:"26",width:"18",height:"2",rx:"1",fill:"#EEEEEE"}),(0,i.jsx)("rect",{id:"Rectangle 11547",x:"3",y:"21",width:"14",height:"2",rx:"1",fill:"#EEEEEE"}),(0,i.jsx)("rect",{id:"Rectangle 11549",x:"3",y:"31",width:"15",height:"2",rx:"1",fill:"#EEEEEE"}),(0,i.jsx)("rect",{id:"Rectangle 11550",x:"3",y:"36",width:"14",height:"2",rx:"1",fill:"#EEEEEE"}),(0,i.jsx)("rect",{id:"Rectangle 11546",x:"3",y:"16",width:"19",height:"2",rx:"1",fill:"#EEEEEE"}),(0,i.jsx)("rect",{id:"Rectangle 51",x:"92",width:"28",height:"80",fill:"white"}),(0,i.jsx)("rect",{id:"Rectangle 11534",x:"96",y:"12",width:"6",height:"2",rx:"1",fill:"#CE7012"}),(0,i.jsx)("rect",{id:"Rectangle 11553",x:"96",y:"17",width:"14",height:"2",rx:"1",fill:"#8638E5"}),(0,i.jsx)("rect",{id:"Rectangle 11554",x:"104",y:"22",width:"10",height:"2",rx:"1",fill:"#EA10AC"}),(0,i.jsx)("rect",{id:"Rectangle 11536",x:"96",y:"22",width:"6",height:"2",rx:"1",fill:"#8638E5"}),(0,i.jsx)("rect",{id:"Rectangle 11537",x:"96",y:"27",width:"21",height:"2",rx:"1",fill:"#007BE5"}),(0,i.jsx)("rect",{id:"Rectangle 11552",x:"103",y:"32",width:"13",height:"2",rx:"1",fill:"#009951"}),(0,i.jsx)("rect",{id:"Rectangle 11538",x:"96",y:"32",width:"5",height:"2",rx:"1",fill:"#CE7012"}),(0,i.jsx)("rect",{id:"Rectangle 49",width:"120",height:"8",fill:"#1E1E1E"}),(0,i.jsx)("rect",{id:"Rectangle 48",x:"8",width:"8",height:"8",fill:"#14AE5C"})]})})}function s$(){return(0,i.jsx)("svg",{width:"120",height:"80",viewBox:"0 0 120 80",fill:"none",children:(0,i.jsxs)("g",{id:"Design",children:[(0,i.jsx)("rect",{width:"120",height:"80",fill:"#383838"}),(0,i.jsx)("rect",{id:"Rectangle 47",width:"120",height:"80",fill:"black"}),(0,i.jsxs)("g",{id:"Group 14125",children:[(0,i.jsxs)("g",{id:"Group 14124",children:[(0,i.jsx)("rect",{id:"Rectangle 52",x:"48.35",y:"24.3512",width:"24.9782",height:"39.8305",fill:"#3E3E3E",stroke:"#0C8CE9",strokeWidth:"0.67509"}),(0,i.jsx)("ellipse",{id:"Ellipse 278",cx:"53.7507",cy:"30.7661",rx:"3.37544",ry:"3.37547",fill:"#B2B2B2"}),(0,i.jsx)("rect",{id:"Rectangle 53",x:"59.4888",y:"29.414",width:"11.4765",height:"2.70037",rx:"0.506318",fill:"#8B8B8B"}),(0,i.jsx)("rect",{id:"Rectangle 59",x:"50.7126",y:"56.7539",width:"20.2526",height:"4.72565",rx:"0.506318",fill:"#0C8CE9"}),(0,i.jsx)("rect",{id:"Rectangle 55",x:"50.7126",y:"37.8555",width:"18.2274",height:"2.70037",rx:"0.506318",fill:"#8B8B8B"}),(0,i.jsx)("rect",{id:"Rectangle 57",x:"50.7129",y:"42.5762",width:"14.8519",height:"2.70037",rx:"0.506318",fill:"#8B8B8B"}),(0,i.jsx)("rect",{id:"Rectangle 60",x:"50.7126",y:"47.3047",width:"17.2147",height:"2.70037",rx:"0.506318",fill:"#8B8B8B"})]}),(0,i.jsx)("rect",{id:"Rectangle 2154",x:"47.3375",y:"23.3375",width:"2.02526",height:"2.02528",fill:"white",stroke:"#0C8CE9",strokeWidth:"0.67509"}),(0,i.jsx)("rect",{id:"Rectangle 2155",x:"72.3158",y:"23.3378",width:"2.02526",height:"2.02528",fill:"white",stroke:"#0C8CE9",strokeWidth:"0.67509"}),(0,i.jsx)("rect",{id:"Rectangle 2156",x:"47.3375",y:"63.1696",width:"2.02526",height:"2.02528",fill:"white",stroke:"#0C8CE9",strokeWidth:"0.67509"}),(0,i.jsx)("rect",{id:"Rectangle 2157",x:"72.3158",y:"63.1696",width:"2.02526",height:"2.02528",fill:"white",stroke:"#0C8CE9",strokeWidth:"0.67509"})]}),(0,i.jsx)("rect",{id:"Rectangle 50",width:"26.0423",height:"80",fill:"#1E1E1E"}),(0,i.jsx)("rect",{id:"Rectangle 11539",x:"3",y:"11",width:"18",height:"2",rx:"1",fill:"#565656"}),(0,i.jsx)("rect",{id:"Rectangle 11548",x:"3",y:"26",width:"18",height:"2",rx:"1",fill:"#565656"}),(0,i.jsx)("rect",{id:"Rectangle 11547",x:"3",y:"21",width:"14",height:"2",rx:"1",fill:"#565656"}),(0,i.jsx)("rect",{id:"Rectangle 11549",x:"3",y:"31",width:"15",height:"2",rx:"1",fill:"#565656"}),(0,i.jsx)("rect",{id:"Rectangle 11550",x:"3",y:"36",width:"14",height:"2",rx:"1",fill:"#565656"}),(0,i.jsx)("rect",{id:"Rectangle 11546",x:"3",y:"16",width:"19",height:"2",rx:"1",fill:"#565656"}),(0,i.jsx)("rect",{id:"Rectangle 51",x:"92",width:"28",height:"80",fill:"#1E1E1E"}),(0,i.jsx)("rect",{id:"Rectangle 49",width:"120",height:"8",fill:"#1E1E1E"}),(0,i.jsx)("rect",{id:"Rectangle 48",x:"8",width:"8",height:"8",fill:"#198F51"}),(0,i.jsx)("rect",{id:"Rectangle 11534",x:"96",y:"12",width:"6",height:"2",rx:"1",fill:"#FCB34A"}),(0,i.jsx)("rect",{id:"Rectangle 11553",x:"96",y:"17",width:"14",height:"2",rx:"1",fill:"#D1A8FF"}),(0,i.jsx)("rect",{id:"Rectangle 11554",x:"104",y:"22",width:"10",height:"2",rx:"1",fill:"#FC9CE0"}),(0,i.jsx)("rect",{id:"Rectangle 11536",x:"96",y:"22",width:"6",height:"2",rx:"1",fill:"#D1A8FF"}),(0,i.jsx)("rect",{id:"Rectangle 11537",x:"96",y:"27",width:"21",height:"2",rx:"1",fill:"#7CC4F8"}),(0,i.jsx)("rect",{id:"Rectangle 11552",x:"103",y:"32",width:"13",height:"2",rx:"1",fill:"#79D297"}),(0,i.jsx)("rect",{id:"Rectangle 11538",x:"96",y:"32",width:"5",height:"2",rx:"1",fill:"#FCB34A"})]})})}function s0(){return(0,i.jsxs)("svg",{width:"120",height:"80",viewBox:"0 0 120 80",fill:"none",children:[(0,i.jsx)("rect",{width:"120",height:"80",fill:"black"}),(0,i.jsx)("rect",{width:"120",height:"80",fill:"black"}),(0,i.jsx)("rect",{x:"48.35",y:"24.3512",width:"24.9782",height:"39.8305",fill:"#3E3E3E",stroke:"#0C8CE9",strokeWidth:"0.67509"}),(0,i.jsx)("ellipse",{cx:"53.7507",cy:"30.7661",rx:"3.37544",ry:"3.37547",fill:"#B2B2B2"}),(0,i.jsx)("rect",{x:"59.4888",y:"29.414",width:"11.4765",height:"2.70037",rx:"0.506318",fill:"#8B8B8B"}),(0,i.jsx)("rect",{x:"50.7126",y:"56.7539",width:"20.2526",height:"4.72565",rx:"0.506318",fill:"#0C8CE9"}),(0,i.jsx)("rect",{x:"50.7126",y:"37.8555",width:"18.2274",height:"2.70037",rx:"0.506318",fill:"#8B8B8B"}),(0,i.jsx)("rect",{x:"50.7129",y:"42.5762",width:"14.8519",height:"2.70037",rx:"0.506318",fill:"#8B8B8B"}),(0,i.jsx)("rect",{x:"50.7126",y:"47.3047",width:"17.2147",height:"2.70037",rx:"0.506318",fill:"#8B8B8B"}),(0,i.jsx)("rect",{x:"47.3375",y:"23.3375",width:"2.02526",height:"2.02528",fill:"white",stroke:"#0C8CE9",strokeWidth:"0.67509"}),(0,i.jsx)("rect",{x:"72.3158",y:"23.3378",width:"2.02526",height:"2.02528",fill:"white",stroke:"#0C8CE9",strokeWidth:"0.67509"}),(0,i.jsx)("rect",{x:"47.3375",y:"63.1696",width:"2.02526",height:"2.02528",fill:"white",stroke:"#0C8CE9",strokeWidth:"0.67509"}),(0,i.jsx)("rect",{x:"72.3158",y:"63.1696",width:"2.02526",height:"2.02528",fill:"white",stroke:"#0C8CE9",strokeWidth:"0.67509"}),(0,i.jsx)("rect",{width:"26.0423",height:"80",fill:"#1E1E1E"}),(0,i.jsx)("rect",{x:"3",y:"11",width:"18",height:"2",rx:"1",fill:"#565656"}),(0,i.jsx)("rect",{x:"3",y:"26",width:"18",height:"2",rx:"1",fill:"#565656"}),(0,i.jsx)("rect",{x:"3",y:"21",width:"14",height:"2",rx:"1",fill:"#565656"}),(0,i.jsx)("rect",{x:"3",y:"31",width:"15",height:"2",rx:"1",fill:"#565656"}),(0,i.jsx)("rect",{x:"3",y:"36",width:"14",height:"2",rx:"1",fill:"#565656"}),(0,i.jsx)("rect",{x:"3",y:"16",width:"19",height:"2",rx:"1",fill:"#565656"}),(0,i.jsx)("rect",{x:"92",width:"28",height:"80",fill:"#1E1E1E"}),(0,i.jsx)("rect",{width:"120",height:"8",fill:"#1E1E1E"}),(0,i.jsx)("rect",{x:"8",width:"8",height:"8",fill:"#198F51"}),(0,i.jsx)("rect",{x:"96",y:"12",width:"6",height:"2",rx:"1",fill:"#FCB34A"}),(0,i.jsx)("rect",{x:"96",y:"42",width:"6",height:"2",rx:"1",fill:"#FCB34A"}),(0,i.jsx)("rect",{x:"96",y:"17",width:"14",height:"2",rx:"1",fill:"#D1A8FF"}),(0,i.jsx)("rect",{x:"104",y:"42",width:"13",height:"2",rx:"1",fill:"#009951"}),(0,i.jsx)("rect",{x:"104",y:"22",width:"10",height:"2",rx:"1",fill:"#FC9CE0"}),(0,i.jsx)("rect",{x:"96",y:"37",width:"16",height:"2",rx:"1",fill:"#FC9CE0"}),(0,i.jsx)("rect",{x:"96",y:"22",width:"6",height:"2",rx:"1",fill:"#D1A8FF"}),(0,i.jsx)("rect",{x:"96",y:"27",width:"21",height:"2",rx:"1",fill:"#7CC4F8"}),(0,i.jsx)("rect",{x:"103",y:"32",width:"13",height:"2",rx:"1",fill:"#79D297"}),(0,i.jsx)("rect",{x:"96",y:"32",width:"5",height:"2",rx:"1",fill:"#FCB34A"}),(0,i.jsx)("mask",{id:"mask0_3979_274036",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"0",y:"8",width:"120",height:"72",children:(0,i.jsx)("path",{d:"M120 8V80H0L120 8Z",fill:"#C4C4C4"})}),(0,i.jsxs)("g",{mask:"url(#mask0_3979_274036)",children:[(0,i.jsx)("rect",{width:"120",height:"80",fill:"#F5F5F5"}),(0,i.jsx)("rect",{width:"120",height:"80",fill:"#E5E5E5"}),(0,i.jsx)("rect",{x:"48.3502",y:"24.3512",width:"24.9782",height:"39.8305",fill:"white",stroke:"#0D99FF",strokeWidth:"0.67509"}),(0,i.jsx)("ellipse",{cx:"53.7509",cy:"30.7661",rx:"3.37544",ry:"3.37547",fill:"black",fillOpacity:"0.3"}),(0,i.jsx)("rect",{x:"59.489",y:"29.414",width:"11.4765",height:"2.70037",rx:"0.506318",fill:"#D9D9D9"}),(0,i.jsx)("rect",{x:"50.7129",y:"56.7539",width:"20.2526",height:"4.72565",rx:"0.506318",fill:"#0D99FF"}),(0,i.jsx)("rect",{x:"50.7129",y:"37.8555",width:"18.2274",height:"2.70037",rx:"0.506318",fill:"#D9D9D9"}),(0,i.jsx)("rect",{x:"50.7131",y:"42.5762",width:"14.8519",height:"2.70037",rx:"0.506318",fill:"#D9D9D9"}),(0,i.jsx)("rect",{x:"50.7129",y:"47.3047",width:"17.2147",height:"2.70037",rx:"0.506318",fill:"#D9D9D9"}),(0,i.jsx)("rect",{x:"47.3375",y:"23.3375",width:"2.02526",height:"2.02528",fill:"white",stroke:"#0D99FF",strokeWidth:"0.67509"}),(0,i.jsx)("rect",{x:"72.3158",y:"23.3378",width:"2.02526",height:"2.02528",fill:"white",stroke:"#0D99FF",strokeWidth:"0.67509"}),(0,i.jsx)("rect",{x:"47.3375",y:"63.1696",width:"2.02526",height:"2.02528",fill:"white",stroke:"#0D99FF",strokeWidth:"0.67509"}),(0,i.jsx)("rect",{x:"72.3158",y:"63.1696",width:"2.02526",height:"2.02528",fill:"white",stroke:"#0D99FF",strokeWidth:"0.67509"}),(0,i.jsx)("rect",{width:"26.0423",height:"80",fill:"white"}),(0,i.jsx)("rect",{x:"3",y:"11",width:"18",height:"2",rx:"1",fill:"#EEEEEE"}),(0,i.jsx)("rect",{x:"3",y:"26",width:"18",height:"2",rx:"1",fill:"#EEEEEE"}),(0,i.jsx)("rect",{x:"3",y:"21",width:"14",height:"2",rx:"1",fill:"#EEEEEE"}),(0,i.jsx)("rect",{x:"3",y:"31",width:"15",height:"2",rx:"1",fill:"#EEEEEE"}),(0,i.jsx)("rect",{x:"3",y:"36",width:"14",height:"2",rx:"1",fill:"#EEEEEE"}),(0,i.jsx)("rect",{x:"3",y:"16",width:"19",height:"2",rx:"1",fill:"#EEEEEE"}),(0,i.jsx)("rect",{x:"92",width:"28",height:"80",fill:"white"}),(0,i.jsx)("rect",{x:"96",y:"12",width:"6",height:"2",rx:"1",fill:"#CE7012"}),(0,i.jsx)("rect",{x:"96",y:"17",width:"14",height:"2",rx:"1",fill:"#8638E5"}),(0,i.jsx)("rect",{x:"104",y:"22",width:"10",height:"2",rx:"1",fill:"#EA10AC"}),(0,i.jsx)("rect",{x:"96",y:"22",width:"6",height:"2",rx:"1",fill:"#8638E5"}),(0,i.jsx)("rect",{x:"96",y:"27",width:"21",height:"2",rx:"1",fill:"#007BE5"}),(0,i.jsx)("rect",{x:"103",y:"32",width:"13",height:"2",rx:"1",fill:"#009951"}),(0,i.jsx)("rect",{x:"96",y:"32",width:"5",height:"2",rx:"1",fill:"#CE7012"})]})]})}var s1=n(920712);let s2=(0,H.ck)("9e00290dc31e72e920d6e541d625759566d6c91f");function s3(){let e=(0,en.J)(),{getHasProvisionalAccess:t}=(0,el.wH)(),n=t(es.G_.DEV_MODE);return e&&n?(0,i.jsx)("h2",{className:"configuration_wizard--gracePeriodWelcome--16eIy text--fontPos13--xW8hS text--_fontBase--QdLsd",children:(0,p.tx)("dev_handoff.configuration_wizard.welcome_step.description_one_click")}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("h1",{className:sc,children:(0,p.tx)("dev_handoff.configuration_wizard.welcome_step.title")}),(0,i.jsx)("h2",{className:su,children:(0,p.tx)("dev_handoff.configuration_wizard.welcome_step.description")})]})}function s5(){return(0,i.jsxs)("div",{className:i9,children:[(0,i.jsx)(s3,{}),(0,i.jsx)("div",{className:sn,children:(0,i.jsx)(s1.GV,{src:s2,width:444,height:278})}),(0,i.jsx)("div",{className:st})]})}var s4=(e=>(e[e.WELCOME=0]="WELCOME",e[e.CODE_LANGUAGE_N_UNIT=1]="CODE_LANGUAGE_N_UNIT",e[e.THEME=2]="THEME",e[e.MCP_SERVER=3]="MCP_SERVER",e[e.INSPECT_PLUGINS=4]="INSPECT_PLUGINS",e[e.INSTALL_INTEGRATIONS=5]="INSTALL_INTEGRATIONS",e))(s4||{});let s6={0:"welcome_step",1:"code_language_step",2:"theme_step",3:"mcp_server_step",4:"inspect_plugins_step",5:"install_extensions_step"},s7=(0,H.sL)()?[1,2]:[1,2,3,4,5];function s8(){let e=(0,o.md)(iG),t=(0,a.wA)(),{isShowing:n,uniqueId:s,show:r,complete:l}=(0,ih.e)({overlay:iC.tb3,priority:ix.N.HIGH_PRIORITY_MODAL},[e]),d=iA.hS({open:n,preventUserClose:!0,onClose:eH.lQ});return(0,y.h)(()=>{r({canShow:e=>!e})}),(0,im.E)(s,"Reset Onboarding",()=>{t(n3.b({[iB]:!1})),r()}),(0,i.jsx)(L.M,{isShowing:n,testId:"dev_handoff_config_wizard",dataFullscreenIntercept:!1,children:(0,i.jsx)(S.fu,{name:"Dev Mode Configuration Wizard",children:(0,i.jsx)(iL.bL,{manager:d,width:800,children:(0,i.jsx)(iM.vo,{children:(0,i.jsx)(ae,{dismissModal:l})})})})})}let s9=()=>{let{pinnedPlugins:e}=(0,iV.VR)();return e.length>0};function ae({dismissModal:e}){let t=(0,iF.U)(),[n,r]=(0,s.useState)(0),l=(0,a.wA)(),o=s9(),d=s.useRef(null),c=s.useRef(null),u=s.useCallback(()=>{e(),l(n3.b({[iB]:!0})),o&&l(n3.b({[iU.xb]:!0}))},[l,o,e]),m=s.useCallback(()=>{r(n+1)},[n]),h=s.useCallback(()=>{r(n-1)},[r,n]);(0,s.useEffect)(()=>{c.current?.focus()},[n]);let f=0===n,g=n===s7[s7.length-1];return(0,i.jsxs)("div",{className:eS()("configuration_wizard--wizardContainer--gss4b",eA.Dm),tabIndex:-1,ref:d,children:[(0,i.jsx)("div",{className:"configuration_wizard--closeButton--pv-0K",children:(0,i.jsx)(iO.K,{onClick:function(){u(),t("dev_handoff.config_wizard.closed",{step:n,stepName:s6[n]})},"aria-label":(0,p.t)("general.close"),children:(0,i.jsx)(iD.X,{})})}),(0,i.jsxs)("div",{className:"configuration_wizard--sidebar--g-2b8",children:[(0,i.jsx)("h1",{className:"configuration_wizard--sidebarHeading--xnYnE text--fontPos32WhyteInktrap--BG9sC text--_fontBaseWhyteInktrap--YiiGP",children:(0,p.tx)("dev_handoff.configuration_wizard.title")}),(0,i.jsx)("h2",{className:"configuration_wizard--sidebarSubheading--ta8gQ text--fontPos12Whyte---tkNx text--_fontBaseWhyte--efAjI",children:(0,p.tx)("dev_handoff.configuration_wizard.subtitle")}),(0,i.jsx)("div",{className:st}),(0,i.jsx)(an,{step:n,setStep:r,disabled:0===n})]}),(0,i.jsxs)("div",{ref:c,className:"configuration_wizard--content--hktpZ",tabIndex:-1,children:[0===n&&(0,i.jsx)(s5,{}),1===n&&(0,i.jsx)(sE,{}),2===n&&(0,i.jsx)(sJ,{}),3===n&&(0,i.jsx)(sY,{}),4===n&&(0,i.jsx)(sF,{}),5===n&&(0,i.jsx)(sK,{})]}),(0,i.jsx)("div",{className:"configuration_wizard--footer--YjGGh",children:f?(0,i.jsxs)("div",{className:se,children:[(0,i.jsx)("div",{className:st}),(0,i.jsx)(nn.$n,{onClick:m,variant:"primary",children:(0,p.tx)(`dev_handoff.configuration_wizard.${s6[n]}.next_text`)})]}):g?(0,i.jsxs)("div",{className:se,children:[(0,i.jsx)("div",{className:st}),(0,i.jsx)(nn.$n,{variant:"secondary",onClick:h,children:(0,p.tx)("general.back")}),(0,i.jsx)(nn.$n,{variant:"primary",onClick:function(){u(),t("dev_handoff.config_wizard.done",{step:n,stepName:s6[n]})},children:(0,p.tx)("general.done")})]}):(0,i.jsxs)("div",{className:se,children:[(0,i.jsx)("div",{className:st}),(0,i.jsx)(nn.$n,{variant:"secondary",onClick:h,children:(0,p.tx)("general.back")}),(0,i.jsx)(nn.$n,{variant:"primary",onClick:m,children:(0,p.tx)(`dev_handoff.configuration_wizard.${s6[n]}.next_text`)})]})})]})}function at(){return(0,l.kc)().dt_mcp_remove_beta_tags?null:(0,i.jsx)("div",{className:"configuration_wizard--badgeContainer--QcjzY",children:(0,i.jsx)("span",{className:"configuration_wizard--customBetaBadge--gHoKz",children:(0,p.t)("dev_handoff.mcp.beta")})})}function an({step:e,setStep:t,disabled:n}){return(0,i.jsx)(iR.bL,{value:String(e),onChange:e=>{n||t(Number.parseInt(e,10))},className:eS()("configuration_wizard--stepPicker--Ffab-",n&&"configuration_wizard--disabledStepPicker--Ib2IX"),legend:(0,i.jsx)(iP.q,{children:(0,p.tx)("dev_handoff.configuration_wizard.step_picker_legend")}),htmlAttributes:{disabled:n},children:s7.map(e=>(0,i.jsxs)(iR.c$,{className:eS()("configuration_wizard--stepPickerOption--5Iqtt",n&&"configuration_wizard--disabledStepPickerOption--9tTeN"),"aria-label":"",value:String(e),children:[(0,i.jsx)("div",{className:"configuration_wizard--stepPickerOptionNumber--3GVYZ text--fontPos18Whyte--M40th text--_fontBaseWhyte--efAjI",children:`0${e}`}),(0,i.jsx)("div",{className:"configuration_wizard--stepPickerOptionText--KmSjp text--fontPos12Whyte---tkNx text--_fontBaseWhyte--efAjI",children:(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[(0,i.jsx)("span",{children:(0,p.tx)(`dev_handoff.configuration_wizard.${s6[e]}.picker_title`)}),"mcp_server_step"===s6[e]&&(0,i.jsx)(at,{})]})})]},e))})}var ai=n(680909),as=n(733811);let aa=(0,s.memo)(function(e){return(0,i.jsx)("svg",{width:"16",height:"16",fill:"none",viewBox:"0 0 16 16",...e,"data-fpl-icon-size":"16",children:(0,i.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",d:"M8.557 4.268a.5.5 0 0 1 .924.37l-2 7a.5.5 0 0 1-.96-.276l1.998-7zM4.724 5.582a.5.5 0 0 1 .694.693l-.065.078L3.707 8l1.646 1.646a.5.5 0 0 1-.707.707l-2-2a.5.5 0 0 1-.064-.629l.064-.078 2-2zm5.922.064a.5.5 0 0 1 .707 0l2 2a.5.5 0 0 1 .063.631l-.063.076-2 2-.078.064a.501.501 0 0 1-.693-.694l.064-.078L12.292 8l-1.646-1.647a.5.5 0 0 1 0-.707"})})});var ar=n(264993),al=n(942541),ao=n(357524),ad=n(983500),ac=n(190028),au=n(876621);let ap={top:"ns-resize",bottom:"ns-resize",left:"ew-resize",right:"ew-resize"};function am(e){let{onSizeChanged:t,onStateChanged:n,edge:a}=e,r=s.useRef({isResizing:!1,lastX:0,lastY:0}),l=s.useCallback(e=>{e.preventDefault(),n?.(!0),r.current.isResizing=!0,r.current.lastX=e.clientX,r.current.lastY=e.clientY,document.body.style.pointerEvents="none",document.documentElement.style.cursor=ap[a]},[n,a]),o=s.useCallback(e=>{r.current.isResizing&&(t({x:e.clientX-r.current.lastX,y:e.clientY-r.current.lastY}),r.current.lastX=e.clientX,r.current.lastY=e.clientY)},[t]),d=s.useCallback(e=>{r.current.isResizing&&(n?.(!1),r.current.isResizing=!1,document.body.style.pointerEvents="auto",document.documentElement.style.cursor="auto")},[n]);return s.useEffect(()=>(document.addEventListener("mousemove",o),document.addEventListener("mouseup",d),()=>{document.removeEventListener("mousemove",o),document.removeEventListener("mouseup",d)}),[o,d]),(0,i.jsxs)("div",{className:eS()("resizable--panelContainer--35Ay7",eA.Dm),style:{width:e.size.width,minWidth:e.size.width,height:e.size.height,minHeight:e.size.height},ref:e.forwardedRef,children:[(0,i.jsx)(au.V,{className:"resizable--content--gsGWd",children:e.children}),(0,i.jsx)("div",{className:eS()({"resizable--edgeDisabled--K1j0X":e.disabled,"resizable--edgeTop--vG5Ad resizable--edge--H5-yq":"top"===e.edge,"resizable--edgeBottom--bN-R0 resizable--edge--H5-yq":"bottom"===e.edge,"resizable--edgeLeft--nRRyA resizable--edge--H5-yq":"left"===e.edge,"resizable--edgeRight--ZGbad resizable--edge--H5-yq":"right"===e.edge}),onMouseDown:l,onDoubleClick:e.onReset})]})}var ah=n(223850),af=n(354114),ag=n(222357),ax=n(331497),a_=n(271899),ay=n(92088),av=n(944380),ab=n(296525),aC=n(328341),aj=n(558720),ak=n(453373),aw=n(201250),aE=n(404343);let aT=(0,ad.jz)(aE.KAq),aS=(0,ad.jz)(aE.tUy);function aI(e,t,n){let i=[],s=[t];for(;s.length>0;){let a=s.pop(),r=e.get(a);if(r&&(a===t||n(r)))for(let e of(i.push(a),r?.childrenGuids??[]))s.push(e)}return i}function aN(e){return!!e&&e.isAlive&&"INSTANCE"!==e.type&&!(0,aw.vY)(r.w3z?.getAssetInfo(e.guid),!0)}let aA=(0,o.eU)([]);function aL({inspectableRootNodeId:e,page:t,didSelectRow:n,hideHeader:l=!1}){let d=(0,a.wA)(),c=(0,ie.eY)(),u=(0,j.uQ)(),p=(0,j.NM)(),m=e||t,[h,f]=s.useState(()=>0===r.glU.nodeStatusesOnPage(t).length||l),[g,x]=(0,o.fp)(aA);s.useEffect(()=>{f(0===r.glU.nodeStatusesOnPage(t).length)},[t]);let _=s.useCallback(()=>{x(()=>[m])},[x,m]),y=s.useCallback(e=>{x(t=>[...t,...aI(c,e,aN)])},[c,x]),v=s.useCallback((e,t)=>x(n=>n.includes(t)?n.filter(e=>e!==t):e.altKey?[...n,t,...aI(c,t,aN)]:[...n,t]),[c,x]),b=s.useCallback(e=>g.includes(e),[g]),C=function(e,t){let n=(0,ie.eY)();return s.useMemo(()=>{let i=[];if(t){let s=n.get(t)?.parentGuid;for(;s&&s!==e;)i.push(s),s=n.get(s)?.parentGuid}return i.push(e),i},[n,e,t])}(m,u??"");s.useEffect(()=>{x(e=>[...e,...C])},[C,x]);let k=s.useCallback((e,t)=>{e.stopPropagation(),e.preventDefault();let{clientX:n,clientY:i}=e;d(sB.j7({type:eA.i,data:{clientX:n,clientY:i,guid:t,expandElement:()=>y(t)}}))},[d,y]),w=(0,ie.KH)(),E=s.useMemo(()=>{let t=l?[]:["header"];return h||e||p?[...t,...function e(t,n,i,s,a,l,o,d){let c=n.get(t);if(!c)return[];let u=t in i,p=d?void 0:r.w3z?.getAssetInfo(t),m=(0,aw.vY)(p,!0),h={nodeId:t,indentation:a,isSelected:u,isAncestorSelected:l,isAncestorAsset:d,isRoot:o,assetInfo:m?p:void 0};if(!s(t))return[h];let f="CANVAS"===c.type,g=c.childrenGuids.flatMap(t=>e(t,n,i,s,a+(f?0:1),l||u,!1,d||m));return f?g:[h,...g]}(m,c,w,b,0,!1,!0)]:t},[e,b,h,m,c,w,p,l]),T=s.useRef(null),S=(0,nh.Te)({count:E.length,getScrollElement:()=>T.current,estimateSize:e=>0!==e||l?aT:aS,overscan:10}),I=(0,aC.ZC)(u);return s.useEffect(()=>{if(I===u)return;let e=E.findIndex(e=>e.nodeId===u);e&&(S.range.startIndex>e||S.range.endIndex<e)&&S.scrollToIndex(e)},[E,u,S,I]),(0,i.jsx)("div",{ref:T,style:{height:"100%",overflowY:"auto",overflowX:"hidden"},"data-testid":"devHandoffLayersPanel",children:(0,i.jsx)("div",{style:{height:`${S.getTotalSize()}px`,width:"100%",position:"relative"},children:S.getVirtualItems().map(t=>{let s=E[t.index];return(0,i.jsx)("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:`${t.size}px`,transform:`translateY(${t.start}px)`},children:"header"===s?(0,i.jsx)(aM,{forceExpanded:!!e||!!p,isExpanded:h,setIsExpanded:f,collapseAllLayers:_}):(0,i.jsx)(aw.O5,{assetInfo:s?.assetInfo,didSelectRow:n,guid:s.nodeId,indentation:s.indentation,isAncestorAsset:s?.isAncestorAsset,isAncestorSelected:s.isAncestorSelected,isExpanded:b,isRoot:s.isRoot,isSelected:s.isSelected,openContextMenu:k,toggleExpanded:v},s.nodeId)},t.key)})})})}function aM({isExpanded:e,forceExpanded:t,setIsExpanded:n,collapseAllLayers:s}){let a=[{displayText:(0,p.t)("dev_handoff.layers.collapse_all_layers"),callback:()=>s()}],r=`devHandoffNodesPanel.caret.${t?"forcedExpanded":e?"expanded":"collapsed"}`;return(0,i.jsxs)("div",{className:"dev_handoff_layers_panel--layersListHeader--gQFn- text--fontPos11--2LvXf text--_fontBase--QdLsd",children:[(0,i.jsx)(eZ.E,{className:"dev_handoff_layers_panel--layersListHeaderButton--MlUHF",onClick:()=>!t&&n(!e),actionOnPointerDown:!0,children:(0,i.jsxs)("div",{className:"dev_handoff_layers_panel--layersListHeaderButtonContent--qRCB5",children:[(0,i.jsx)("span",{className:t?"dev_handoff_layers_panel--hideCaret--JgPdQ":void 0,"data-testid":r,children:(0,i.jsx)(ak.g,{isExpanded:e})}),(0,i.jsx)("div",{className:"dev_handoff_layers_panel--layersTitle--sU99L ellipsis--ellipsis--Tjyfa",children:(0,p.tx)("dev_handoff.tag.layers")})]})}),(e||t)&&(0,i.jsx)(aj.U,{dropdownItems:a})]})}var aO=n(373550),aR=n(742549);let aP="dev_handoff_nodes_panel--item--FYINO",aD="dev_handoff_nodes_panel--itemSelectedReadySections--Wladq dev_handoff_nodes_panel--item--FYINO",aF="dev_handoff_nodes_panel--timestamp--5sWkT ellipsis--ellipsis--Tjyfa",az="dev_handoff_nodes_panel--readySectionsEmptyStateRow--3qQXK",aB="dev_handoff_nodes_panel--readySectionsIcon--gNtWg",aG="dev_handoff_nodes_panel--readySectionsContent--3ilof";var aU=n(85206),aV=n(237839);let aH=(0,ad.jz)(aE.LDP),aK=(0,ad.jz)(aE.Rv9),aW=(0,ad.jz)(aE.tUy),aq=(0,o.eU)([]);function aX({state:e,backgroundState:t}){return(0,i.jsxs)("div",{className:"dev_handoff_nodes_panel--historyIconContainer--QkDx6",children:[(0,i.jsx)(eq.t,{className:"dev_handoff_nodes_panel--historyIcon--dprKz",svg:aV.A}),e===ao.Uy.RECENTLY_EDITED&&(0,i.jsx)("div",{className:eS()("dev_handoff_nodes_panel--editedDot--8NIiF",{"dev_handoff_nodes_panel--editedDotSelected--95Nsq":"selected"===t,"dev_handoff_nodes_panel--editedDotHover--P8nA3":"hovered"===t})})]})}function aY(e){let{guid:t,hasChildren:n,isExpanded:l,toggleExpand:o,isSelected:d,nameOverride:c,hideSectionIcon:u}=e,p=(0,ax.J2)((0,I.UK)().showGuids),m=(0,b.Fk)((e,t)=>{let n=e.get(t);return n?{guid:n.guid,name:n.name,isStateGroup:n.isStateGroup}:null},t),h=m?.name,f=c??h,g=m?.guid,x=m?.isStateGroup,_=(0,nL.rf)(`devHandoffNodesPanel-targetIcon-${h}`,"click",e=>{(0,ii.S)("sections_frames_list"),r.w3z.selectAndFocusOnNode(t,!0)}),y=(0,nL.rf)(`devHandoffNodesPanel-${h}`,"click",e=>{e.stopPropagation(),o?.()}),v=(0,a.wA)(),C=s.useCallback(e=>{e.stopPropagation(),e.preventDefault();let{clientX:t,clientY:n}=e;g&&v(sB.j7({type:eA.i,data:{clientX:t,clientY:n,guid:g}}))},[v,g]);if(!g)return null;let j=eS()("dev_handoff_nodes_panel--expandCaret--EdbSv",{"dev_handoff_nodes_panel--expandCaretNoIcon--VTPwj":u});return(0,i.jsxs)("div",{className:eS()("dev_handoff_nodes_panel--sectionHeader--qDUGd",d?aD:aP),onMouseDown:_,onContextMenu:C,role:"button",tabIndex:0,"data-fullscreen-intercept":!0,children:[n?(0,i.jsx)(eN.B,{className:j,svg:l?ez.A:aU.A,onMouseDown:y}):(0,i.jsx)("div",{className:j}),!u&&(0,i.jsx)(a_.Bf,{className:eS()("dev_handoff_nodes_panel--layerIcon--aZvoO",{"dev_handoff_nodes_panel--symbolLayerIcon--D0Mch dev_handoff_nodes_panel--layerIcon--aZvoO":x}),guid:g}),(0,i.jsx)("div",{className:eS()("dev_handoff_nodes_panel--sectionName--qx-3z ellipsis--ellipsis--Tjyfa",{"dev_handoff_nodes_panel--symbolName--IoUUt dev_handoff_nodes_panel--sectionName--qx-3z ellipsis--ellipsis--Tjyfa":x}),children:p?`${f} (${t})`:f})]})}let aZ=s.memo(function(e){let{guid:t,isSelected:n,onClick:l}=e,d=(0,ax.J2)((0,I.UK)().showGuids),[c,u]=s.useState(!1),m=function(e){(0,j.uQ)();let t=(0,x.R)(e=>!(0,ay.M)(e));return n=>(0,v.Uc)(n&&t?e:"")}(t),h=(0,o.md)(aO.d),f=aJ(t),g=(0,ao.E1)(),_=(0,ao.ei)(t),y=(0,ao.L)(t,g,h),b=s.useMemo(()=>_?(0,ac.A)(_.lastEditedAt).fromNow():"",[_]),C=(0,ax.J2)(r.Ez5.devHandoffState().focusAnimationIsRunning),{width:k=0,height:w=0}=f??{},E=k>2.5*w,T=w>2.5*k,S=k<1||w<1?{width:0,height:0}:E?{height:80,width:k/w*80}:T?{width:48,height:w/k*48}:{width:48,height:80},N=(0,ag.yh)({nodeId:t,width:2*S.width,height:2*S.height,version:_?.lastEditedAt??"-",reason:"dev_handoff_nodes_panel.thumbnail",shouldSkip:C,regenerateAfterImagesLoaded:!0}),A=(0,nL.rf)(`devHandoffNodesPanel-${f?.name??""}`,"click",e=>{(0,ii.S)("sections_frames_list"),r.w3z.selectAndFocusOnNode(t,!0),e?.currentTarget?.blur(),l?.(e)}),L=(0,a.wA)(),M=s.useCallback(e=>{e.stopPropagation(),e.preventDefault();let{clientX:n,clientY:i}=e;L(sB.j7({type:eA.i,data:{clientX:n,clientY:i,guid:t}}))},[L,t]);if(!f)return null;let O=e=>{u(e),m(e)},R=_?.lastEditedAt,P=N?{backgroundColor:e.thumbnailBackgroundColor}:void 0;return(0,i.jsxs)(eZ.E,{className:eS()(n?aD:aP,"dev_handoff_nodes_panel--itemWithThumbnail--t0s4E"),onClick:A,htmlAttributes:{onContextMenu:M,onMouseEnter:()=>O(!0),onMouseLeave:()=>O(!1),"data-fullscreen-intercept":!0},children:[(0,i.jsx)("div",{className:"dev_handoff_nodes_panel--thumbnailContainer--y8uEp",style:P,children:N&&(0,i.jsx)("img",{src:N.src,className:eS()("dev_handoff_nodes_panel--thumbnailImg--yRcCn",E&&"dev_handoff_nodes_panel--thumbnailImgLong--5eP8l",T&&"dev_handoff_nodes_panel--thumbnailImgTall--iJO4k"),alt:(0,p.t)("dev_handoff.nodes_panel.thumbnail_alt_text")})}),(0,i.jsx)(ny.E,{children:"\xa0"}),(0,i.jsx)("div",{className:"dev_handoff_nodes_panel--nodeNameAndTimestampContainer--egq48",children:(0,i.jsxs)("div",{className:"dev_handoff_nodes_panel--nodeNameAndTimestamp--HcL87",children:[(0,i.jsx)("div",{className:"dev_handoff_nodes_panel--nodeName--5SQVr ellipsis--ellipsis--Tjyfa",children:d?`${f.name} (${t})`:f.name}),R?(0,i.jsxs)("div",{className:"dev_handoff_nodes_panel--tlfPanelTimestampContainer---u-Ju",children:[(0,i.jsx)(aX,{state:y,backgroundState:n?"selected":c?"hovered":null}),(0,i.jsx)("div",{className:"dev_handoff_nodes_panel--editedTimestamp--nShNo",children:_?.createdAt&&(y===ao.Uy.RECENTLY_CREATED||_.createdAt===_.lastEditedAt)?(0,i.jsx)("span",{className:aF,children:(0,p.tx)("dev_handoff.nodes_panel.created",{at:b})}):(0,i.jsx)("span",{className:aF,children:(0,p.tx)("dev_handoff.nodes_panel.edited",{at:b})})})]}):f.isSymbol&&(0,i.jsxs)("div",{className:"dev_handoff_nodes_panel--timestampContainer--dGH49",children:[(0,i.jsx)(a_.Bf,{className:"dev_handoff_nodes_panel--layerIconSymbol--pO1lI dev_mode_selection_actions_panel--layerIconSymbol--uNRli dev_mode_selection_actions_panel--icon--uWKNW",guid:t}),(0,i.jsx)("span",{className:"dev_handoff_nodes_panel--layerTypeSymbol--BuyoH ellipsis--ellipsis--Tjyfa",children:f.type})]})]})})]})}),aJ=e=>(0,b.$y)((e,t)=>{let n=(0,j.Zl)(e,t);if(!n)return null;let i=n.isState?n.parentNode:null,s=i?.name||n.name;return{id:n.guid,name:s,width:n.size.x,height:n.size.y,type:n.isStateGroup?(0,p.t)("inspect_panel.node_type.main_component_set"):n.isState?(0,p.t)("inspect_panel.node_type.main_variant"):"SYMBOL"===n.type?(0,p.t)("inspect_panel.node_type.main_component"):"INSTANCE"===n.type?(0,p.t)("inspect_panel.node_type.instance"):void 0,isSymbol:n.isStateGroup||"SYMBOL"===n.type||"INSTANCE"===n.type}},e);function aQ({items:e,selectedNodeId:t,inReadySectionTopLevelNodeId:n,onRowClick:a}){let r=s.useRef(null),l=e.length>0,[d,c]=(0,o.fp)(aq),u=function(){let{currentPage:e}=(0,x.R)(e=>({currentPage:e.mirror.appModel.currentPage})),t=(0,b.Fk)((e,t)=>e.get(t)?.backgroundColor,e);return t?ah.F.format(t):"var(--color-bg)"}(),[m,h]=s.useState(!0),f=s.useMemo(()=>Math.min(e.length*aH,400)+7,[e.length]),[g,_]=(0,nM.Vc)("ready-panel-height-storage-key",f),y=l?`calc(max(${aH}px, min(60%, ${g}px)))`:"fit-content";s.useEffect(()=>{if(!t)return;let n=e.find(e=>e.childNodeIds.includes(t))?.guid;n&&c(e=>e.includes(n)?e.filter(e=>e!==n):e)},[e,t,c]);let v=s.useMemo(()=>{let t=!1;return[...e.flatMap(e=>{if(e.isSection){let n=d.includes(e.guid);return n||(t=!0),[{type:"section",sectionId:e.guid,displayName:e.sectionNames.fill("...",1,-1).join(" / "),hasChildren:e.childNodeIds.length>0},...n?[]:e.childNodeIds.map(e=>({type:"node",nodeId:e}))]}return t?(t=!1,[{type:"divider"},{type:"node",nodeId:e.guid}]):{type:"node",nodeId:e.guid}})]},[d,e]),C=s.useMemo(()=>{let e=[];return v.forEach((t,n)=>{"section"===t.type&&e.push(n)}),e},[v]),j=s.useRef(),k=e=>j.current===e,w=s.useRef(null),E=(0,nh.Te)({count:v.length,estimateSize:e=>{let t=v[e].type;return"node"===t?aH:"header"===t?aW:"divider"===t?16:aK},getScrollElement:()=>w.current,overscan:10,rangeExtractor:s.useCallback(e=>(j.current=[...C].reverse().find(t=>e.startIndex>=t),j.current)?[...new Set([j.current,...(0,al.vp)(e)])].sort((e,t)=>e-t):(0,al.vp)(e),[C])}),T=(0,i.jsx)("div",{className:"dev_handoff_nodes_panel--panelTitle--wcEcM",style:{padding:0},children:(0,p.tx)("dev_handoff.tag.ready_for_development")});s.useEffect(()=>{let e=v.findIndex(e=>"node"===e.type&&n===e.nodeId);-1!==e&&E.scrollToIndex(e)},[v,n,E]);let S=s.useCallback(e=>_(t=>t+e.y),[_]),I=s.useCallback(()=>_(r.current.clientHeight),[_]),N=s.useCallback(()=>_(f),[_,f]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(ai.bL,{isOpen:m,toggle:()=>h(e=>!e),height:"hug",children:(0,i.jsx)(ai.Y9,{variant:"leftPanel",size:"lg",children:(0,i.jsx)(ai.JU,{children:(0,p.tx)("dev_handoff.tag.ready_for_development")})})}),(0,i.jsx)(am,{edge:"bottom",size:{height:m?y:0},onSizeChanged:S,onStateChanged:I,onReset:N,forwardedRef:r,disabled:!l,children:m&&(0,i.jsx)("div",{"data-testid":"devHandoffNodesPanel.readyList",style:{height:"100%",overflow:"auto"},ref:w,children:l?(0,i.jsx)("div",{style:{height:`${E.getTotalSize()}px`,width:"100%",position:"relative"},children:E.getVirtualItems().map(e=>{let s;let r=v[e.index];return s="header"===r.type?T:"divider"===r.type?(0,i.jsx)("div",{className:"dev_handoff_nodes_panel--readyNodesDivider--QAmcF"}):"section"===r.type?(0,i.jsx)(aY,{guid:r.sectionId,hideSectionIcon:!0,hasChildren:r.hasChildren,isExpanded:!d.includes(r.sectionId),toggleExpand:()=>{c(e=>e.includes(r.sectionId)?e.filter(e=>e!==r.sectionId):[...e,r.sectionId])},isSelected:t===r.sectionId,nameOverride:r.displayName}):(0,i.jsx)(aZ,{guid:r.nodeId,thumbnailBackgroundColor:u,isSelected:n===r.nodeId,onClick:a}),(0,i.jsx)("div",{style:{..."section"===r.type?{zIndex:1}:{},...k(e.index)?{position:"sticky"}:{position:"absolute",transform:`translateY(${e.start}px)`},top:0,left:0,width:"100%",height:`${e.size}px`},children:s},e.key)})}):(0,i.jsx)(a0,{})})})]})}function a$(){return(0,ab.s)()?(0,i.jsx)(nn.$n,{variant:"secondary",iconPrefix:(0,i.jsx)(as.l,{}),onClick:()=>af.Y5.triggerAction("add-selection-ready-status"),children:(0,p.tx)("fullscreen_actions.ready-status-add")}):null}function a0(){let e=(0,ie.p8)("isSceneReadOnly"),t=(0,ab.s)();return e?(0,i.jsxs)("div",{className:az,children:[(0,i.jsx)(aa,{className:aB}),(0,i.jsx)("div",{className:aG,children:(0,p.tx)("dev_handoff.tag.ready_for_development.content_view_only")})]}):(0,i.jsx)("div",{className:az,children:t?(0,i.jsx)(a$,{}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(aa,{className:aB}),(0,i.jsx)("div",{className:aG,children:(0,p.tx)("dev_handoff.status.ready_for_development.content")})]})})}function a1(e,t){let n=s.useRef(!1),i=s.useCallback(e=>{e!==t&&(n.current=!0)},[t]),{inspectableRootNodeId:a}=a2(e,t),r=s.useRef(null),l=s.useMemo(()=>t&&n.current?(n.current=!1,r.current):a,[t]);return r.current=l,{inspectableRootNodeId:l,didSelectRow:i}}function a2(e,t){let n=s.useMemo(()=>{let e=t?r.w3z.getInReadySectionTopLevelNodeId(t):null;return e&&e!==ar.AD?e:null},[t]),i=(0,b.Fk)((e,t,n)=>{let i=null;if(n?i=n:t===ar.AD||r.w3z.isNodePanelSection(t)||(i=t),i){let t=e.get(i);(!t||aw.q1.includes(t.type))&&(i=null)}return i},e,n),a=(0,aR.hA)();return a?{inspectableRootNodeId:a,inReadySectionTopLevelNodeId:null}:{inspectableRootNodeId:i,inReadySectionTopLevelNodeId:n}}function a3({onRowClick:e,inspectableRootNodeId:t,didSelectRow:n}){let s=(0,ax.J2)(r.Ez5.devHandoffState().currentNodeId),a=(0,j.uQ)(),l=(0,ax.J2)(r.Ez5.devHandoffState().readySectionItems),{currentPage:o}=(0,x.R)(e=>({currentPage:e.mirror.appModel.currentPage})),{inReadySectionTopLevelNodeId:d}=a2(s,a);return(0,i.jsxs)("div",{className:"dev_handoff_nodes_panel--nodesListPanels--ceR3Z","data-testid":"devHandoffNodesList",children:[(0,i.jsx)(aQ,{items:l||[],selectedNodeId:a,inReadySectionTopLevelNodeId:d,onRowClick:e}),(0,i.jsx)(aL,{inspectableRootNodeId:t,didSelectRow:n,page:o})]})}let a5=s.memo(()=>{let e=(0,ax.J2)(r.Ez5.devHandoffState().currentNodeId),t=(0,aR.l7)(),n=!!(0,aR.hA)()&&!t,{inspectableRootNodeId:s,didSelectRow:l}=a1(e,(0,j.uQ)()),o=(0,a.d4)(e=>Object.keys(e.mirror.sceneGraphSelection).length>0);return(0,y.h)(()=>{let e=_.sn.tryStop("switch_to_inspect_mode.left_panel_tti");e&&(0,c.sx)("switch_to_inspect_mode.left_panel_tti",{elapsedMs:e,isNodeSelected:o},{forwardToDatadog:!0})}),(0,i.jsxs)("div",{className:eS()(eA.Dm,"dev_handoff_nodes_panel--nodesPanel--4Pea0"),children:[!n&&(0,i.jsx)(av.o,{}),!t&&(0,i.jsx)(a3,{inspectableRootNodeId:s,didSelectRow:l})]})});var a4=n(322530),a6=n(550209),a7=n(911990),a8=n(171660),a9=n(468650);function re(){return(0,i.jsx)("div",{className:G.s.flex.flexRow.m16.$,children:(0,i.jsx)("div",{className:G.s.font11.$,children:(0,p.tx)("fullscreen.properties_panel.this_file_s_editor_has_disabled_exporting_copying_and_sharing.seat_rename")})})}var rt=n(315910),rn=n(937505),ri=n(830178),rs=n(649038),ra=n(416317),rr=n(92063),rl=n(436648),ro=n(597175),rd=n(213233),rc=n(518710);function ru(){let{setCurrentView:e,currentPluginView:t}=function(){let e=(0,o.Xr)(rc.hO),[t,n]=(0,o.fp)(rc.HT),i=(0,o.AY)(rc.HT),a=s.useCallback(()=>{e(t)},[t,e]),r=s.useCallback(({newView:e})=>{e&&t!==e&&(a(),n(e))},[t,n,a]);return s.useEffect(()=>{a()},[a]),s.useEffect(()=>()=>{i()},[i]),s.useMemo(()=>({currentPluginView:t,setCurrentView:r}),[t,r])}(),n=(0,a.wA)(),r=s.useMemo(()=>({activeTab:rl.sk.PLUGIN,viewResource:e=>{n(rr.IN({fdPreviewResource:e}))},closeResource:()=>{n(rr.IN({fdPreviewResource:void 0}))},setCurrentViewOrTab:e,currentView:t,closeModal:()=>{},pinModal:()=>{},defaultExtensions:{type:"suggested"}}),[n,e,t]);return(0,i.jsx)(a7.Y,{direction:"vertical",spacing:0,height:"fill-parent",children:(0,i.jsx)(rd.B0.Provider,{value:r,children:(0,i.jsx)(ro.z,{})})})}function rp(){let e=(0,a.d4)(e=>e.mirror.appModel.currentTool===C.ec.tool),t=(0,rn.h)(),n=(0,I.UX)(),l=(0,o.md)(ri.d4),d="LOADING"===l,c="RUNNING"===l,u=(0,ax.ut)((0,v.tw)(),r._gJ.PRIMARY)===r._gJ.PLUGIN&&!e,p=(0,a.wA)();s.useEffect(()=>p(rt.aq()),[p]),s.useEffect(()=>{let e=ra.mN.getInstance();c&&e&&(u?e.hideProgress():e.showProgress({isBackground:!0}))},[c,u]);let m=(0,I.D)(),h=c&&u?m?{height:"100%"}:{height:"calc(100% - 80px)",paddingBottom:80}:{display:"none"};return(0,i.jsx)("div",{className:G.s.hFull.wFull.if(u,G.s.block,G.s.hidden).$,"data-testid":"devHandoffPluginPanel",children:t?(0,i.jsx)(re,{}):(0,i.jsxs)(i.Fragment,{children:[d&&(0,i.jsx)(rh,{}),(0,i.jsx)("div",{style:h,"data-testid":"pluginPanelContainer",children:(0,i.jsx)(rs.jv,{iframeId:rs.Wh.INSPECT,width:n,fillParent:!0})}),!d&&!c&&(0,i.jsx)(ru,{})]})})}let rm=s.memo(function(e){return(0,i.jsx)(a4.t.TabPanel,{...e.tabProps,forceMount:!0,height:"fill",children:(0,i.jsx)(rp,{})})});function rh(){let e=(0,o.md)(ri.be);return e?(0,i.jsx)(a7.Y,{direction:"vertical",verticalAlignItems:"center",horizontalAlignItems:"center",children:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{style:U.sx.add({boxSizing:"content-box",margin:"-20px auto",opacity:"0.3"}).$,children:(0,i.jsx)(a9.y$,{})}),(0,i.jsx)("div",{className:G.s.pt16.px32.alignCenter.$,children:(0,i.jsx)(a8.E,{fontSize:12,color:"secondary",children:(0,p.tx)("dev_handoff.loading_plugin",{pluginName:e?.name})})})]})}):null}function rf({side:e}){let t=(0,ax.J2)((0,I.UK)().renderRulers),n=(0,E._I)(),s=(0,aR.l7)(),a=!!(0,aR.hA)()&&n;return t||s||a?null:(0,i.jsx)("div",{className:eS()("panel_background_gradient--gradient--xXM2u",{"panel_background_gradient--left--MwVhL":"left"===e,"panel_background_gradient--right--h-8ut":"right"===e})})}var rg=n(375627),rx=n(641518),r_=n(327439),ry=n(423683),rv=n(832832);let rb={[r._gJ.PRIMARY]:"primary",[r._gJ.PLUGIN]:"plugin",[r._gJ.STRING_MANAGEMENT]:"string_management",[r._gJ.PROPERTIES]:"properties",[r._gJ.COMPONENT]:"component",[r._gJ.DEV_RESOURCES]:"dev_resources",[r._gJ.ASSETS]:"assets"},rC={primary:r._gJ.PRIMARY,plugin:r._gJ.PLUGIN,string_management:r._gJ.STRING_MANAGEMENT,properties:r._gJ.PROPERTIES,component:r._gJ.COMPONENT,dev_resources:r._gJ.DEV_RESOURCES,assets:r._gJ.ASSETS};function rj({plugin:e}){let t=(0,o.md)(ri.vT);return(0,i.jsx)("div",{children:(0,i.jsxs)(a7.Y,{width:"fill-parent",horizontalAlignItems:"space-between",verticalAlignItems:"center",padding:{left:16,right:8,top:4,bottom:4},children:[(0,i.jsx)("div",{className:G.s.minW0.$,children:(0,i.jsxs)(a7.Y,{direction:"horizontal",verticalAlignItems:"center",spacing:8,children:[(0,i.jsx)(ry.d,{plugin:e}),(0,i.jsx)(a8.E,{fontWeight:"bold",truncate:!0,showTooltipWhenTruncated:!0,children:e.name})]})}),(0,i.jsx)(iO.K,{"aria-label":(0,p.t)("dev_handoff.plugin_panel.close_plugin"),onClick:()=>{(function(e){switch(e){case"related-link-click":case"related-link-auth":case"codegen":case"related-link-preview":case"auto-run":return!0;default:return!1}})(t)&&(0,v.ax)(r._gJ.PRIMARY),(0,il.wY)()},children:(0,i.jsx)(iD.X,{})})]})})}function rk({text:e,isActive:t,onClick:n,recordingKey:s,isSingle:a}){return(0,i.jsx)(eZ.E,{recordingKey:rx.Pt(s,"tab"),onClick:n,actionOnPointerDown:!0,className:a?"dev_handoff_panel_tab_group--tabsHeaderSingle--G5OnU dev_handoff_panel_tab_group--tabFocus--f8Y7h":t?"dev_handoff_panel_tab_group--tabActive--Ex7NX legacy_pages_panel--tabActive--hmo0j legacy_pages_panel--tab--inhND dev_handoff_panel_tab_group--tabFocus--f8Y7h":"dev_handoff_panel_tab_group--tab--Y0iYX legacy_pages_panel--tab--inhND dev_handoff_panel_tab_group--tabFocus--f8Y7h",htmlAttributes:{"data-label":e},children:e})}function rw(e){return(0,i.jsx)("div",{className:G.s.wFull.bb1.bSolid.colorBorder.pl8.pb8.$,children:(0,i.jsx)(a4.t.TabStrip,{manager:e.tabProps.manager,children:(0,i.jsx)(a4.t.Tab,{...e.tabProps,children:(0,p.t)("dev_handoff.tab.comment")})})})}function rE(e){let{tabManager:t,tabPropsMap:n}=e;return(0,i.jsxs)("div",{className:t2.A7,children:[(0,i.jsx)("div",{className:t2.tq,children:(0,i.jsxs)(a4.t.TabStrip,{manager:t,children:[(0,i.jsx)(a4.t.Tab,{...n[rb[r._gJ.PRIMARY]],children:(0,p.t)("dev_handoff.tab.inspect")}),(0,i.jsx)(a4.t.Tab,{...n[rb[r._gJ.STRING_MANAGEMENT]],onboardingKey:rv.iA.STRINGS_TAB,children:(0,p.t)("dev_handoff.tab.string_management")}),(0,i.jsx)(a4.t.Tab,{...n[rb[r._gJ.PLUGIN]],children:(0,p.t)("dev_handoff.tab.plugins")})]})}),(0,i.jsxs)("div",{className:G.s.flex.$,children:[(0,i.jsx)("div",{className:"dev_handoff_panel_tab_group--pluginsContainer--V7X6w",children:(0,i.jsx)(r_.qs,{})}),(0,i.jsx)("div",{className:t2.wR,children:(0,i.jsx)(tU.H,{recordingKey:"propertiesPanel.zoomMenu"})})]})]})}function rT(e){let t=(0,o.md)(ri.be),n=(0,ax.ut)((0,v.tw)(),r._gJ.PRIMARY),{commentsActive:s,versionHistoryActive:a}=(0,x.R)(e=>({commentsActive:e.mirror.appModel.currentTool===C.ec.tool,versionHistoryActive:e.mirror.appModel.activeCanvasEditModeType===r.m1T.DEV_HANDOFF_HISTORY}));if(a)return null;if(s)return(0,i.jsx)(rw,{tabProps:e.commentTabProps});let l=t&&rb[n]===rb[r._gJ.PLUGIN]?(0,i.jsx)(rj,{plugin:t}):null;return(0,i.jsxs)("div",{children:[(0,i.jsx)(rE,{tabPropsMap:e.generalTabPropsMap,tabManager:e.generalTabManager}),l]})}var rS=n(451837);function rI(e){let t=(0,a.d4)(e=>e.mirror.appModel.showUi),n=(0,rS.lz)(),[r,d]=(0,o.fp)(rS.XI),c=(0,ax.J2)((0,I.UK)().renderRulers),u=!!(0,aR.hA)(),p=(0,n8.T)(),m=(0,n8.q)()&&!u,{isPropertiesPanelCollapsed:h}=(0,rg.iT)();h=h&&!u,(0,rS.qn)();let f=s.useCallback(()=>{d(!0)},[d]),g=s.useCallback(e=>{if(r){let t=(0,rS.gY)(window.innerWidth-e.clientX);t!==n&&(0,rS.xT)(t)}},[r,n]),x=s.useCallback(()=>{r&&d(!1)},[r,d]);s.useEffect(()=>(document.addEventListener("mousemove",g),document.addEventListener("mouseup",x),()=>{document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",x)}));let _=(0,l.kc)().properties_panel_resize_lag_fix,y=!h,v=_?"dev_handoff_right_panel_container--drillDownContainer--vat3B properties_panel--drillDownContainer--VaNDa":t2.Lp;return(0,i.jsxs)(au.V,{className:eS()(v,{[t2.dn]:h,[t2.Ph]:!m}),style:_?void 0:{width:n},children:[y&&(0,i.jsx)(rf,{side:"right"}),(0,i.jsxs)(nB.w,{"data-testid":"dev-handoff-right-panel",className:eS()(t2.ux,eA.Dm,{[t2.ew]:c&&!u,[t2.Ph]:!m,[t2.Jq]:!p}),size:_?void 0:n,onResize:f,side:"left",children:[h&&(0,i.jsx)("div",{className:eS()(t2.KE,t2.tM),children:(0,i.jsx)(tz.v2,{})}),(0,i.jsxs)("div",{className:eS()(t2.KE,{"dev_handoff_right_panel_container--panelContainerResizing--sfFQd dev_handoff_right_panel_container--panelContainerResizingBase--OZRr- dev_handoff_right_panel_container--panelContainer--XcbIk dev_handoff_right_panel_container--panelContainerBase--npHfL":r,"dev_handoff_right_panel_container--panelContainer--XcbIk dev_handoff_right_panel_container--panelContainerBase--npHfL":t,"dev_handoff_right_panel_container--panelContainerHidden--7-A2P dev_handoff_right_panel_container--panelContainer--XcbIk dev_handoff_right_panel_container--panelContainerBase--npHfL":!t||h,[t2.Ph]:!m}),children:[!h&&(0,i.jsx)(tz.v2,{}),(0,i.jsx)(rT,{...e.tabInfo}),(0,i.jsx)("div",{className:"dev_handoff_right_panel_container--content--HcUHi",children:e.children})]})]})]})}var rN=n(498349),rA=n(7718),rL=n(821655),rM=n(369729),rO=n(417528),rR=n(550527),rP=n.n(rR),rD=n(198986),rF=n.n(rD),rz=n(505626);function rB({plugin:e}){return"first-party"!==(0,e$.v4)().type?null:(0,i.jsx)(rU,{plugin:e,buttonText:(0,p.t)("dev_handoff.inspect_panel.close_plugin")})}function rG({plugin:e}){return"first-party"===(0,e$.v4)().type?null:(0,i.jsx)(rU,{plugin:e,buttonText:(0,p.t)("dev_handoff.inspect_panel.generate_code")})}function rU({plugin:e,buttonText:t}){return e?(0,i.jsx)(e6.VZ,{noPadding:!0,recordingKey:"pluginProgressPanel",children:(0,i.jsxs)(a7.Y,{direction:"vertical",horizontalAlignItems:"center",padding:{top:12,bottom:12,left:16,right:16},spacing:8,width:"fill-parent",children:[(0,i.jsxs)(a7.Y,{direction:"horizontal",verticalAlignItems:"start",horizontalAlignItems:"center",spacing:4,children:[(0,i.jsx)("div",{style:U.sx.add({marginTop:"-3px"}).$,children:(0,i.jsx)(ry.d,{plugin:e})}),(0,i.jsx)(a8.E,{fontFamily:"primary",children:(0,p.tx)("fullscreen.plugins.background",{plugin:(0,i.jsx)(a8.E,{fontWeight:"bold",children:e.name})})})]}),(0,i.jsx)(nn.IK,{variant:"secondary",onClick:()=>{(0,il.wY)()},recordingKey:"generateCodeButton",children:t})]})}):null}var rV=n(980400),rH=n(996397),rK=n(466345),rW=n(12754);let rq="code_extension_section--errorMessage--k0nfC",rX="code_extension_section--sections--NwtSI",rY="code_extension_section--hideBorder--wBeyb",rZ="code_extension_section--paddedSections--qdAYL";function rJ({localCodeLanguage:e,overrideNodeId:t,hideLayoutCode:n,hideColorCode:a,hideHints:r,sectionClassName:l,emptyStateMessage:d,hideBorder:c,padded:u,dataTestId:m}){let h=(0,rn.AF)(),f=(0,e$.v4)(),g=e??f,x=s.useMemo(()=>g.id===eY.uz&&"first-party"===g.type?{id:n7.qZ.CSS,type:"first-party"}:g,[g]),_=(0,o.md)(ri.GR),y=(0,o.md)(ri.vT);return h?_&&"codegen"!==y&&"first-party"!==x.type?(0,i.jsx)(rG,{plugin:_}):(0,i.jsx)(rQ,{overrideNodeId:t,hideLayoutCode:n,hideColorCode:a,codegenPluginLanguage:x,sectionClassName:l,emptyStateMessage:d,hideBorder:c,padded:u,dataTestId:m,children:(e,t,n)=>(0,i.jsx)(eX.yT,{code:e,section:t,index:n,hideHints:r})}):(0,i.jsx)("div",{className:rq,children:(0,i.jsx)(rL.cV,{children:(0,i.jsx)(rM.Q,{children:(0,p.tx)("fullscreen.properties_panel.this_file_s_editor_has_disabled_exporting_copying_and_sharing.seat_rename")})})})}function rQ({codegenPluginLanguage:e,children:t,overrideNodeId:n,hideLayoutCode:r,hideColorCode:l,sectionClassName:o,emptyStateMessage:d,hideBorder:c,padded:u,dataTestId:m}){let h=(0,e3.ie)(),f=(0,e3.fb)(),g=(0,a.d4)(e=>Object.keys(e.mirror.sceneGraphSelection)[0]),x=(0,iF.U)(),[_,y]=s.useState(!1),v=n??g,b=s.useCallback(t=>{x("Dev Mode Code Section Clicked",{codeSection:t,languageType:e.type,languageId:e.id,unit:h,scaleFactor:f})},[e.id,e.type,f,x,h]),C=(0,e3.gc)()||{},j=(0,e$.QN)(),k="first-party"===e.type,{code:w,error:E,isLoading:T,hasRun:S}=(0,rW.K)({selectedNodeID:v,extensionLanguage:e,preferences:rF()(C,k?{customSettings:{hideLayout:r?"true":"false",hideColor:l?"true":"false"}}:{}),plugin:j}),I=!!n,N=s.useMemo(()=>rP()(rV.c,500),[]),A=s.useCallback(({id:e,regenerateCode:t})=>{e===v&&(n7.px().nodeCache?.invalidate(e),t?(N(),y(!1)):y(!0))},[v,N]);s.useEffect(()=>((0,rK.BT)(A),()=>{(0,rK.q$)(A)}),[A]),s.useEffect(()=>{I||y(!1)},[I,v]);let L=s.useCallback(()=>{y(!1),(0,n7.px)().rebuildNodeCache(),(0,rV.c)()},[]),M=function(e,t){let[n,i]=s.useState(e);return s.useEffect(()=>{let t=null;return e?t=setTimeout(()=>{i(!0)},200):i(!1),()=>{null!=t&&clearTimeout(t)}},[e,200]),n}(T,200),O=s.useRef(null);if(s.useEffect(()=>{let e=e=>{let t=window.getSelection(),n=t?.toString(),i=t?.anchorNode;n&&i&&O.current?.contains(i)&&e.clipboardData&&(e.preventDefault(),e.clipboardData.setData("text/plain",n))};return document.addEventListener("copy",e),()=>{document.removeEventListener("copy",e)}},[]),s.useEffect(()=>{E&&console.error(E)},[E]),!v)return null;let R=(0,i.jsx)("div",{className:rq,"data-testid":"dev-handoff-code-update-prompt",children:(0,i.jsxs)(rL.cV,{children:[(0,i.jsx)(rM.Q,{title:(0,p.tx)("dev_handoff.code.update_prompt_title"),children:(0,p.tx)("dev_handoff.code.update_prompt")}),(0,i.jsx)(nn.$n,{variant:"secondary",onClick:L,children:(0,p.tx)("dev_handoff.code.update_prompt_action")})]})});return!M&&S&&E?j?(0,i.jsx)("div",{className:rq,"data-testid":"codegen-error-message",children:(0,i.jsxs)(rL.cV,{children:[(0,i.jsx)(rM.Q,{title:(0,p.tx)("inspect_panel.code.error",{plugin:j.name??(0,p.t)("inspect_panel.code.error_this_plugin")}),children:(0,p.tx)("inspect_panel.code.error_details")}),(0,i.jsx)(rO.N,{newTab:!0,trusted:!0,href:(0,rH.ab)(j.plugin_id),children:(0,p.tx)("inspect_panel.code.error_link")})]})}):null:M?(0,i.jsx)("div",{className:eS()(rX,c&&rY,u&&rZ),children:(0,i.jsx)(a7.Y,{verticalAlignItems:"center",horizontalAlignItems:"center",padding:{top:16,left:16,right:16,bottom:4},dataTestId:"codegen-spinner",children:(0,i.jsx)(P.k,{})})}):0!==w.length&&w.some(e=>e.lines.length>0)?(0,i.jsxs)("div",{className:eS()(rX,c&&rY,u&&rZ),ref:O,"data-testid":m,children:[_&&R,w.map((n,s)=>n.lines.length>0&&(!r||"Layout"!==n.name)?(0,i.jsx)(rz.c,{className:eS()("code_extension_section--sectionsContainer--vZzFZ",o),"data-testid":`code-panel-${n.name}`,"data-fullscreen-intercept":!0,onClick:()=>b(n.name),children:t(w,n,s)},`${e}-${n.name}-${s}`):null)]}):d&&S?(0,i.jsx)("div",{className:eS()(rX,c&&rY,u&&rZ),children:(0,i.jsx)("div",{className:"code_extension_section--emptyMessage--wSX0u",children:d})}):null}var r$=n(962856),r0=n(307829),r1=n(853943),r2=n(115989),r3=n(80341),r5=n(654200);let r4="interactive-inspection-onboarding-key",r6=(0,iz.Fu)("dev_mode_has_seen_interactive_inspection_onboarding"),r7=(0,iz.Fu)("dev_mode_has_seen_focus_view_onboarding"),r8={title:(0,p.tx)("dev_handoff.focus_view.interactive_onboarding_title"),description:(0,p.tx)("dev_handoff.focus_view.interactive_onboarding_description"),trackingContextName:"Dev Mode Interactive Inspection Onboarding",targetKey:r4,disableHighlight:!0};function r9(e){let t=(0,a.wA)();return s.useCallback(()=>{t(n3.b({dev_mode_has_seen_interactive_inspection_onboarding:!0})),e()},[e,t])}function le(){let e=(0,aR.hA)(),t=(0,e8.m5)(!1,e8.Jo.FOCUS_NODE);return(0,b.wA)((e,t)=>{let n=e?.get(t);if(!n||n.isSection||n.isStateGroup)return!1;let i=n.stackHorizontalLayoutSize!==r.mKm.HUG_CONTENT,s=n.stackVerticalLayoutSize!==r.mKm.HUG_CONTENT;return i||s},e)||t}function lt(){let e=(0,o.md)(r6),t=(0,o.md)(r7),n=le(),{show:a,isShowing:r,complete:l}=(0,ih.e)({overlay:iC.Iu5,priority:ix.N.HIGH_PRIORITY_MODAL},[e,t]);s.useEffect(()=>{n&&a({canShow:(e,t)=>!e&&!!t})},[n,a]);let d=r9(l);return(0,i.jsx)(iy.rq,{...r8,arrowPosition:r5.F_.TOP,isShowing:r,emphasized:!1,onClose:d,primaryCta:{label:(0,p.tx)("general.got_it"),type:"button",onClick:d,ctaTrackingDescriptor:W.c.GOT_IT}})}var ln=n(153515);let li="Dev Mode Focus View Onboarding",ls="focus_view_title_onboarding_key",la="focus_view_completed_onboarding_key",lr="focus_view_versions_onboarding_key",ll="focus_view_back_onboarding_key";function lo(){let{show:e,isShowing:t,complete:n}=(0,ih.e)({overlay:iC.FtN,priority:ix.N.DEFAULT_MODAL}),a=le(),r=r9(n);(0,y.h)(()=>{e()});let l=s.useCallback(()=>{a?r():n()},[a,n,r]),o=(0,s.useMemo)(()=>({label:(0,p.tx)("dev_handoff.workflows.focus_view.onboarding.secondary_cta_label"),type:"button",onClick:l,ctaTrackingDescriptor:W.c.CANCEL}),[l]),d=[{title:(0,p.tx)("dev_handoff.workflows.focus_view.onboarding.viewing.title"),description:(0,p.tx)("dev_handoff.workflows.focus_view.onboarding.viewing.description"),trackingContextName:`${li} Viewing`,targetKey:ls,emphasized:!0,secondaryCta:o,disableHighlight:!0},a?{...r8,trackingContextName:`${li} Interactive`,secondaryCta:o,emphasized:!0}:null,{title:(0,p.tx)("dev_handoff.workflows.focus_view.onboarding.versions.title"),description:(0,p.tx)("dev_handoff.workflows.focus_view.onboarding.versions.description"),trackingContextName:`${li} Versions`,targetKey:lr,emphasized:!0,arrowPosition:r5.F_.RIGHT_BODY,secondaryCta:o,onStepShow:()=>v.wr(),disableHighlight:!0},{title:(0,p.tx)("dev_handoff.workflows.focus_view.onboarding.completed.title"),description:(0,p.tx)("dev_handoff.workflows.focus_view.onboarding.completed.description"),trackingContextName:`${li} Completed`,targetKey:la,emphasized:!0,secondaryCta:o,disableHighlight:!0},{title:(0,p.tx)("dev_handoff.workflows.focus_view.onboarding.back.title"),description:(0,p.tx)("dev_handoff.workflows.focus_view.onboarding.back.description"),trackingContextName:`${li} Back`,targetKey:ll,emphasized:!0,primaryCtaLabel:(0,p.tx)("dev_handoff.workflows.focus_view.onboarding.last_primary_cta_label"),disableHighlight:!0}].filter(r3.t);return(0,i.jsx)(ln.WZ,{steps:d,isShowing:t,onComplete:l})}var ld=n(850701),lc=n(366535),lu=n(863154),lp=n(657878),lm=n(363153),lh=n(208740),lf=n(68191),lg=n(837500),lx=n(444034),l_=n(312387),ly=n(300429),lv=n(954068);let lb="dev_handoff_activity_panel--versionIconContainer--i7OVd",lC="dev_handoff_activity_panel--editedIcon--V-4-N dev_handoff_activity_panel--_versionIcon--9Io2B",lj="dev_handoff_activity_panel--activityDisplayText--4O-Dk",lk="dev_handoff_activity_panel--activityTime--pCZ9l";function lw({activity:e,isLatest:t}){let n=lE(e),s=(0,r2.Ak)(e.timestamp);return(0,i.jsx)("h3",{className:lj,children:t?(0,p.tx)("dev_handoff.workflows.focus_view.activity.activity_row_with_latest",{versionText:n,activityTime:(0,i.jsx)("span",{className:lk,children:s}),latest:(0,i.jsx)("span",{className:lk,children:(0,p.tx)("dev_handoff.workflows.focus_view.activity.activity_row_latest_part")})}):(0,p.tx)("dev_handoff.workflows.focus_view.activity.activity_row",{versionText:n,activityTime:(0,i.jsx)("span",{className:lk,children:s})})})}function lE(e){switch(e.metadata?.status){case es.zI.BUILD:return(0,p.t)("dev_handoff.workflows.focus_view.activity_status_ready");case es.zI.COMPLETED:return(0,p.t)("dev_handoff.workflows.focus_view.activity_status_completed");case es.zI.NONE:return(0,p.t)("dev_handoff.workflows.focus_view.activity_status_removed");default:return null}}function lT({activity:e,line:t,isGreen:n}){switch(e.metadata?.status){case es.zI.BUILD:return(0,i.jsxs)("div",{"aria-hidden":!0,className:lb,"data-testid":"devModeActivity.readyIcon",children:[t,(0,i.jsx)(as.l,{className:n?"dev_handoff_activity_panel--readyIconGreen--qdkvg dev_handoff_activity_panel--_versionIcon--9Io2B":"dev_handoff_activity_panel--readyIcon--zbH-1 dev_handoff_activity_panel--_versionIcon--9Io2B"})]});case es.zI.COMPLETED:return(0,i.jsxs)("div",{"aria-hidden":!0,className:lb,"data-testid":"devModeActivity.completedIcon",children:[t,(0,i.jsx)(lv.g,{className:"dev_handoff_activity_panel--completedIcon--3i2u3 dev_handoff_activity_panel--_versionIcon--9Io2B"})]});default:return null}}function lS(){let e=(0,a.wA)();return()=>{e((0,lm.Eg)())}}function lI(){return(0,a.d4)(e=>e.versionHistory.activeId===lm.V_)}function lN(e,t){return e.metadata?.status!==es.zI.NONE?n=>(0,i.jsx)(lT,{line:n,activity:e,isGreen:t}):void 0}function lA(){let e=(0,a.wA)();return t=>{e((0,lm.Eg)()),r.w3z.focusOnNode(t,!1)}}function lL({latestReadyForDevVersionId:e,lastEditedAt:t,hasEdits:n,status:s,isActive:l,onSelect:o,showCompareChanges:d,focusNodeId:c}){let u=(0,a.wA)(),m=(0,iF.U)(),h=(0,r2.Ak)((t??0)*1e3),f=(0,aR.hA)();return(0,i.jsx)(lg.jP,{dispatch:u,displayText:(0,i.jsxs)("div",{className:"dev_handoff_activity_panel--activityDisplayTextContainer--80BG-",children:[(0,i.jsxs)("div",{className:lj,children:[(0,i.jsx)("span",{className:"dev_handoff_activity_panel--latestVersion--ukUVR",children:f?(0,p.tx)("dev_handoff.workflows.focus_view.activity.latest"):(0,p.tx)("collaboration.feedback.current_version")}),!!t&&(0,i.jsx)("span",{className:lk,children:h})]}),l&&d&&(0,i.jsx)("div",{className:"dev_handoff_activity_panel--viewDiffButtonEdited--j3Wzx",children:(0,p.tx)("dev_handoff.workflows.focus_view.activity.compare_previous")})]}),editorType:es._Y.DESIGN,first:!0,hideActiveMenu:!0,iconOverride:n?e=>(0,i.jsxs)("div",{className:lb,children:[e,s?.status===r.zIx.COMPLETED?(0,i.jsx)(lv.g,{className:lC}):(0,i.jsx)(as.l,{className:lC})]}):void 0,isActive:l,isAllowedToChangeVersion:()=>!l,label:"latest-change-row",last:!1,onClick:l&&d?function(){m("Dev Mode Activity Compare Changes",{source:"compare_previous"}),(0,l_.L$)(e,u,!0,c)}:void 0,onSelect:l?void 0:o,userUrl:null,versionId:lm.V_,view:null})}var lM=n(21031);function lO(){let e=(0,aR.hA)(),t=(0,lf.Os)(e??""),n=(0,lf.jh)(e??void 0),l=lI(),d=lA(),c=(0,o.md)(lM.pc),u=(0,a.wA)(),m=(0,a.d4)(e=>e.versionHistory),h=m.versions.length>0||m.loading;if(s.useEffect(()=>{!h&&e&&u((0,lm.bg)())},[u,h,e]),"loading"===t||t&&0===t.length&&c)return(0,i.jsx)("div",{"data-onboarding-key":lr,className:"dev_handoff_activity_panel--loading--kM0Yf",children:(0,i.jsx)(P.k,{})});if(!t||0===t.length||!e)return(0,i.jsx)("div",{"data-onboarding-key":lr});let f=new F.TSSceneGraph(r.juq.LIVE_FILE).get(e??""),g=t[0],x=!!f?.editInfo?.lastEditedAt&&g.timestamp.getTime()<1e3*f.editInfo.lastEditedAt;return(0,i.jsx)(e6.VZ,{title:(0,p.t)("dev_handoff.workflows.focus_view.activity.versions"),recordingKey:"activityLog",headerOnboardingKey:lr,collapsiblePanelKey:"activity_log",collapsedHeaders:g?(0,i.jsx)(lR,{latest:x?(f?.editInfo?.lastEditedAt??0)*1e3:g.timestamp}):void 0,children:(0,i.jsxs)("ol",{className:"dev_handoff_activity_panel--activityEvents--9uFul",children:[x&&(0,i.jsx)(lL,{lastEditedAt:f?.editInfo?.lastEditedAt,latestReadyForDevVersionId:g.id,hasEdits:!0,status:f?.getStatusInfo(),isActive:l,onSelect:()=>d(e),showCompareChanges:!0,focusNodeId:e}),c&&(0,i.jsx)("li",{className:"dev_handoff_activity_panel--loadingInline--WHTg6",children:(0,i.jsx)(P.k,{})}),t.map((s,a)=>{let r=a===t.length-1;return(0,i.jsx)(lP,{activity:s,prevActivity:r?null:t[a+1],isOldest:r,isLatest:0===a&&!x,versions:n.versions,focusNodeId:e,versionIndex:a,versionCount:t.length},a)})]})})}function lR({latest:e}){let t=(0,r2.Ak)(e);return(0,i.jsx)(r$.E,{variant:"inactiveOutline",children:(0,p.t)("dev_handoff.workflows.focus_view.activity.collapsed",{activityTime:t})})}function lP({activity:e,prevActivity:t,isOldest:n,isLatest:l,versions:d,focusNodeId:c,versionIndex:u,versionCount:m}){let h=(0,a.wA)(),f=(0,lp._6)(),g=(0,a.d4)(e=>e.versionHistory),x=e.version?.id??void 0,_=lI(),y=(0,o.md)(lu.wg),v=(0,iF.U)(),b=s.useId(),C=s.useId(),j=_&&l||x===g.activeId,k=function(e,t,n){let i=(0,aR.hA)(),l=(0,a.wA)(),o=(0,lp._6)(),d=lS(),c=(0,iF.U)();return s.useCallback((s,a)=>{if(t&&!s){if(n){d();return}c("Dev Mode Activity Load Version",{entrypoint:a}),l(sB.sf({...o,versionId:t})),l(ld.Y6({mode:r.Oin.KEEP_UI,type:lh.lF.SPINNER})),requestAnimationFrame(()=>{l((0,lm.Nb)({id:t,nodeId:i??void 0,eventType:"LOAD_NEW_VERSION",versions:e}))})}},[t,n,e,i,l,o,d,c])}(d,x,l),w=()=>{v("Dev Mode Activity Compare Changes",{source:l?"compare_previous":"compare_to_latest"});let e=l&&t?.version?.id||x;(0,l_.L$)(e,h,!0,c)},E=lS(),T=e.metadata?.status===es.zI.BUILD&&null!==t,S=!!x&&x!==g.activeId,{getTriggerProps:I,manager:N}=r0.b(),A=x?(0,i.jsxs)(r0.bL,{manager:N,children:[(0,i.jsx)(ny.E,{id:b,children:(0,p.t)("dev_handoff.workflows.focus_view.version_position",{position:u+1,count:m})}),(0,i.jsx)(ny.E,{id:C,children:(0,p.t)("collaboration.feedback.more_options")}),(0,i.jsx)(iO.K,{...I(),"aria-label":(0,p.t)("collaboration.feedback.more_options"),"aria-labelledby":`${C} ${b}`,children:(0,i.jsx)(r1.J,{})}),(0,i.jsxs)(r0.mc,{children:[!l&&(j?(0,i.jsx)(r0.q7,{onClick:E,children:(0,p.tx)("dev_handoff.workflows.focus_view.back_to_current")}):(0,i.jsx)(r0.q7,{onClick:()=>k(j,"dropdown_option"),children:(0,p.tx)("dev_handoff.workflows.focus_view.inspect_version")})),(!l||T)&&(0,i.jsx)(r0.q7,{onClick:w,children:l?(0,p.tx)("dev_handoff.workflows.focus_view.compare_previous_menu_item"):(0,p.tx)("dev_handoff.workflows.focus_view.compare_latest")}),(0,i.jsx)(r0.q7,{onClick:()=>{v("Dev Mode Activity Copy Link To Version"),(0,lx.S)(h,f,x)},children:(0,p.tx)("dev_handoff.workflows.focus_view.copy_link_to_version")}),y&&(0,i.jsx)(r0.q7,{onClick:()=>{if(!y)return;let t=e.version;t&&h(lc.to({type:ly.S,data:{label:lE(e),description:t.description,savepointID:t.id}}))},children:(0,p.tx)("collaboration.feedback.context_menu.edit_version_info")})]})]}):null;return(0,i.jsx)(lg.jP,{description:e.version?.description??void 0,dispatch:h,displayText:(0,i.jsx)(lw,{activity:e,isLatest:l}),editorType:es._Y.DESIGN,first:l,hideActiveMenu:!0,hoverMenu:A,iconOverride:lN(e,n||j),isActive:j&&!l,isAllowedToChangeVersion:()=>S,label:"activity-row",last:n,onClick:l&&T?w:void 0,onSelect:S?()=>k(j,"row"):void 0,rowBodyFooter:l&&T?(0,i.jsx)("div",{className:"dev_handoff_activity_panel--viewDiffButtonReady--mGQg4",children:(0,p.tx)("dev_handoff.workflows.focus_view.activity.compare_previous")}):void 0,user:e.user.name||"",userUrl:e.user.imgUrl,versionId:x||"NO_VERSION",view:null})}var lD=n(370020),lF=n(174773),lz=n(240803),lB=n(751309),lG=n(76618),lU=n(350205),lV=n(546258),lH=n(681958),lK=n(83734),lW=n(818820),lq=n(457374),lX=n(988543),lY=n(483663),lZ=n(454273),lJ=n(46805),lQ=n(932709),l$=n(188665);function l0(e){let t;let n=(0,lZ.lA)(),l=(0,h.wS)(),o=(0,a.d4)(A.sS),d=(0,j.uQ)(),c=function(){let e=(0,lZ.RI)(),t=(0,b.Fk)((e,t,n)=>{if(!t||n)return null;let i=e?.get(t);return i?.sourceLibraryKey},e?.nodeId,e?.isDetachedScene),n=(0,s.useMemo)(()=>{if(!e?.isDetachedScene||!e?.nodeId)return null;let t=(0,h.x9)(e.nodeId);return t?.sourceLibraryKey},[e?.nodeId,e?.isDetachedScene]);return(0,s.useMemo)(()=>e?.isDetachedScene?n:t,[n,e?.isDetachedScene,t])}(),u=(0,lQ.bj)(c?[c]:[]),m=u.data[0];m&&("hub_file_id"in m?t=m.hub_file_id:"library_file_key"in m&&(t=m.library_file_key)),e?.current===!1&&u&&"loading"===u.status&&(e.current=!0);let f=(0,iF.U)(),g="loaded"===l.status?l.result:void 0,x=g&&g.isExternal?g.fileKey:t&&t!==o?t:o,_=x!==o,y=g?g.nodeId:_?n?.publishID:n?.guid,v=(0,lY.dI)({trackingFunction:()=>{f("Dev Mode Navigated To Main Component",{selectedNodeId:d,external:_,detached:!!g})}}),C=(0,lJ.wJ)(x??""),k=!1;return _?l&&(k="loading"===l.status||"errors"===l.status):k=r.Egt?.nodeIsSoftDeleted(y??"")??!1,s.useMemo(()=>y&&v&&x&&u?.status!=="loading"?{type:l$.ZU.CUSTOM_ACTION,customActionType:l$.Wg.STANDARD_BUTTON,onClick:v,icon:C?(0,i.jsx)(lW.c,{}):_?(0,i.jsx)(lq.l,{}):(0,i.jsx)(lX.P,{}),getTitle:()=>C?(0,p.t)("design_systems.instance_panel.view_library_in_community"):(0,p.t)("dev_handoff.instance_navigation.go_to_main_component"),disabled:k,recordingKey:"devHandoffNavigateInstanceButton"}:null,[x,y,k,C,_,u?.status,v])}function l1(){let e=s.useRef(!1),t=l0(e);return t?(0,i.jsx)("div",{className:eS()({"instance_navigation--instanceNavigationButton--0FYi6":e.current}),children:(0,i.jsx)(iO.K,{"aria-label":t.getTitle(),onClick:t.onClick,disabled:t.disabled,recordingKey:t.recordingKey,children:t.icon})}):null}var l2=n(630615);let l3=(0,o.eU)({});function l5(){return!!(0,a.d4)(e=>e.mirror.appModel.activeCanvasEditModeType===r.m1T.DEV_HANDOFF_HISTORY&&e.versionHistory.activeId&&"current_version"!==e.versionHistory.activeId)}var l4=n(845644),l6=n(390036),l7=n(330489),l8=n(459125),l9=n(472088),oe=n(787010);function ot({description:e,emptyStateText:t,shouldUseUiFont:n=!1,shouldUseBottomPadding:a=!1}){let r=s.useRef(null),l=s.useRef(void 0),[o,d]=s.useState(!0);if(s.useLayoutEffect(()=>{let t=l.current;l.current=e,r.current&&t!==e&&d(r.current.scrollHeight>96)},[e]),!e&&!t)return null;let c=!!e&&o;return(0,i.jsxs)("div",{className:eS()("asset_documentation_panel--documentationSection--Uiw1f",{"asset_documentation_panel--uiFont--8lX52":n,"asset_documentation_panel--bottomPadding--CisYZ":a}),children:[e?(0,i.jsxs)("div",{className:"asset_documentation_panel--documentationRt--dqAKD",children:[(0,i.jsx)(l8.C,{value:e,valueFormat:(0,l7.j_)(e),namespace:"asset-documentation-panel-lexical-editor-readonly",lexicalContentClassName:o?oe.D6:oe.kF,innerRef:r}),o&&(0,i.jsx)("div",{className:"asset_documentation_panel--lexicalCollapsedOverlay--V-AKj"})]}):t?(0,i.jsx)("div",{className:"asset_documentation_panel--documentationDescriptionDefault--vxlbl asset_documentation_panel--documentationDescription--la2iI text--fontPos11--2LvXf text--_fontBase--QdLsd",dir:"auto",ref:r,children:t}):null,c&&(0,i.jsx)("div",{className:"asset_documentation_panel--showMoreButtonContainer--ZkHWJ",children:(0,i.jsx)(l9.d,{label:(0,p.t)("dev_handoff.docs.show_full"),onClick:()=>d(!1)})})]})}var on=n(700411),oi=n(989111),os=n(764898),oa=n(50536),or=n(303986),ol=n(983764);n(320541);var oo=n(886710),od=n(4033),oc=n(915584),ou=n(912610),op=n(29236),om=n(525972),oh=n(437761),of=n(461818),og=n(725837),ox=n(245758);let o_=class{async generateLinkPreview({plugin:e,link:t}){try{let n=await om.R.instance.enqueue(this.createEnqueueArgs({command:"linkpreview",plugin:e,onStart:()=>(0,oc.se)({name:t.linkName,url:t.linkUrl,isInherited:t.isInherited,nodeId:t.nodeId})}));if(n?.type==="PLAIN_TEXT")(0,ox.n7)({link:t,linkPreviewJson:n});else if(n?.type==="AUTH_REQUIRED"){let n=o.zl.get(l3),i=n[e.plugin_id]?.links??[];o.zl.set(l3,n=>({...n,[e.plugin_id]:{plugin:e,links:[...i,t]}}))}return n??null}catch(e){console.error(e)}return null}async runAuth({plugin:e,links:t}){(0,v.ax)(r._gJ.PLUGIN);try{return await om.R.instance.enqueue(this.createEnqueueArgs({command:"auth",plugin:e,onStart:()=>(0,oc.Ut)(t)}))??null}catch(e){console.error(e)}return null}createEnqueueArgs({command:e,plugin:t,onStart:n}){return{runPluginArgs:{plugin:t,command:"linkpreview",queryMode:!1,runMode:"linkpreview"===e?"linkpreview":"auth",triggeredFrom:"linkpreview"===e?"related-link-preview":"related-link-auth",openFileKey:og.D.getState().openFile?.key||"",isWidget:!1},onStart:n,mode:"run-and-terminate"}}};o_.instance=new o_;let oy=(0,or.Up)();function ov(e,t){if((0,oh.ZQ)(t)&&!(0,l.kc)().plugins_related_links_local||!oy.has(t.plugin_id))return!1;let n=t.manifest.relatedLinkDomains||t.manifest.devResourceDomains;if(!n)return!1;for(let t of n){let n=(0,ou.tk)(t);if(!n)continue;let i=e.split("?")[0];if(n.exec(i))return!0}if((0,or.P8)(t.plugin_id)){if(ob(e)&&e.match(/selectedIssue=[A-Z]+-[0-9]+/))return!0;ob(e)&&e.match(/[A-Z]+-[0-9]+/)&&(0,c.sx)("Jira Issue Url Not Matched",{url:e})}return!1}function ob(e){return!!e.match(/https?:\/\/[a-zA-Z0-9-]+\.(atlassian\.net|jira\.com)/)}var oC=(e=>(e.OPEN="open",e.PREVIEW="preview",e))(oC||{});function oj(e){let t=function(e){let t=(0,od.$1)(),n=(0,od.cW)(),i=(0,a.d4)(e=>e.mirror.appModel.useLocalRelatedLinkPlugin),r=s.useMemo(()=>0===oy.size?null:Object.values(t).find(t=>!!ov(e,t)),[e,t]),l=s.useMemo(()=>0===oy.size?null:Object.values(n).map(e=>(0,ou.uF)(e)).find(t=>!!ov(e,t)),[e,n]),o=s.useMemo(()=>Array.from(oy),[]),d=(0,od.uf)(o,{enabled:!l}),c=s.useMemo(()=>d.find(t=>!!ov(e,t))??null,[e,d]);return i&&r?r:l||c||null}(e),n=(0,od.YN)();return t&&n(t)?t:null}function ok(e){let t=oj(e),n=(0,o.md)(l3);if(!t||!t.manifest.capabilities?.includes("linkpreview"))return null;if(n[t.plugin_id]?.links.some(t=>t.linkUrl===e))return;let i=async({link:e})=>{await o_.instance.generateLinkPreview({plugin:t,link:e})};return{plugin:t,genPreview:i}}var ow=n(43941);function oE(e,t,n){return!n||e?t:`${t} (${n})`}function oT({isEditable:e,link:t,onOpenDeleteModal:n,onOpenEditModal:l,appendLabel:o,hintInMenu:d,linkToFocus:c}){let u=(0,a.wA)(),m=!(0,ow.G)(t.linkUrl),h=(0,ie.eY)(),f=(0,lZ.Nf)()??"",g=h.get(f),x=t.isInherited||t.isVariant,_=(0,iF.U)(),y=(0,lY.dI)({navigateToStateGroupIfVariant:!t.isVariant}),b=s.useRef(null),C=s.useRef(null),j=s.useCallback(()=>{u(oa.lW({stringToCopy:t.linkUrl})),_("Dev Handoff Related Links Copy Hyperlink",{nodeId:f,nodeType:g?.type,source:"web"})},[u,f,t.linkUrl,g?.type,_]),k=m?t.linkUrl:new URL(t.linkUrl).host;k.startsWith("www.")&&(k=k.slice(4));let{Dropdown:w,toggleDropdown:E,dropdownTargetRef:T,isDropdownShown:S}=(0,ol.B)(t.id),I=function(e){let t=oj(e),n=(0,A.tS)(),i=(0,e$.v4)();if(!t||!n||!(0,ou.$u)(t.manifest.capabilities))return null;let s=async({link:e})=>{let s=(0,il.hw)();s?.plugin_id!==t.plugin_id&&(await of.d.instance.maybeTerminatePlugin(i),await (0,oo.yQ)());let a=(0,op.D)(),l=t.manifest.editorType?.includes(oh.FW.DEV)?"open-dev-resource":"open-related-link",o={mode:"run-forever",runPluginArgs:{plugin:t,command:l,queryMode:!1,openFileKey:n,isWidget:!1,runMode:"default",triggeredFrom:"related-link-click"}},d={url:e.linkUrl,name:e.linkName,isInherited:e.isInherited,nodeId:e.nodeId},c=om.R.instance.isCurrentlyRunning(o);return((0,v.ax)(r._gJ.PLUGIN),c&&(0,oc.Jc)())?om.R.instance.enqueue({...o,onStart:async()=>await (0,oc.xG)({devResource:d})}):om.R.instance.enqueue({...o,reuseExistingRunState:!1,onStart:async()=>((0,oc.r2)(5e3,{devResource:d}),(await a).triggerRunEvent({command:l,link:d}))})};return{plugin:t,callback:s}}(t.linkUrl),L=x?(0,p.t)("dev_handoff.developer_related_links.main_component_tooltip"):(0,p.t)("dev_handoff.developer_related_links.additional_options"),M=(0,i.jsx)("div",{ref:T,children:(0,i.jsx)(iO.K,{actionOnPointerDown:!0,onClick:e=>{E(),e.stopPropagation()},"aria-label":L,htmlAttributes:{"data-tooltip":L,"data-tooltip-type":e5.Ib.TEXT},children:x?(0,i.jsx)(lX.P,{}):(0,i.jsx)(r1.J,{})})}),O=[{displayText:(0,p.t)("dev_handoff.developer_related_links.copy_link"),callback:()=>j()}];I&&O.unshift({displayText:(0,p.t)("dev_handoff.developer_related_links.open_in_new_tab"),callback:()=>{W()}}),x&&y&&O.unshift({displayText:(0,p.t)("dev_handoff.developer_related_links.go_to_main_component"),callback:()=>{y()}}),t.isNested&&O.push({displayText:(0,p.t)("dev_handoff.developer_related_links.select_layer"),callback:()=>{r.w3z.selectAndFocusOnNode(t.nodeId,!0)}}),O.push({displayText:(0,p.t)("dev_handoff.developer_related_links.edit_link"),callback:()=>l(t),disabled:!e},{displayText:(0,p.t)("dev_handoff.developer_related_links.delete_link"),callback:()=>n(t.id,t.linkUrl),disabled:!e}),d&&(O.push({separator:!0,displayText:""}),O.push({render:()=>(0,i.jsxs)("div",{className:"developer_related_link_row--hintInMenu--a8pp2 text--fontNeg12--2PWcg text--_fontBase--QdLsd text--_negText--j9g-L",children:[(0,i.jsx)(lB.B,{}),d]}),optionHeight:40,displayText:d}));let[R,P]=s.useState(!1),[D,F]=s.useState(!1),z=t.linkPreview,B=z&&"PLAIN_TEXT"===z.type&&z.text,G=B&&!t.isUserOverride&&I,U=I&&(0,or.Zl)(I.plugin.plugin_id,N.z4.getIsExtension()),V=N.z4.getIsExtension()||U;s.useLayoutEffect(()=>{c===t.linkUrl&&(V||C.current?.focus())},[V,t.linkUrl,c]);let H=s.useCallback(()=>{_("Dev Handoff Related Links Open Hyperlink",{nodeId:f,nodeType:g?.type,source:"web"})},[f,g?.type,_]),K=s.useCallback(()=>{let e={action:oC.OPEN,link:t};if(U){t.isNested&&r.w3z?.selectAndFocusOnNode(t.nodeId,!0),I.callback(e),_("Dev Handoff Related Links Run Plugin From Hyperlink",{nodeId:f,nodeType:g?.type,source:"web",pluginId:I.plugin.plugin_id}),u(n3.b({[iU.xb]:!0}));return}N.z4.getIsExtension()&&(0,na.mz)(t.linkUrl)},[f,g?.type,_,t,U,I,u]),W=()=>{(0,oi.e)(t.linkUrl)||u((0,sG.RK)({rawInput:t.linkUrl})),_("Dev Handoff Related Links Open Hyperlink",{nodeId:f,nodeType:g?.type,source:"web"})},q=(0,i.jsx)(oS,{name:oE(R,t.linkName,o),url:I?I.plugin.name:k,isHovering:R,showExternalIcon:!I}),X=G&&I?(0,i.jsx)(oS,{name:oE(R,B,o),url:I.plugin.name,isHovering:R}):null,Y=(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"developer_related_link_row--favicon--ZrNbB",children:(0,i.jsx)(os.v,{url:t.linkUrl,fallback:(0,i.jsx)(lV.W,{className:"developer_related_link_row--fallbackIcon---i867"})})}),X??q]}),Z=(0,nL.Pt)("developerRelatedLinkRow",t.id),J=(0,ow.H)(t.linkUrl)?t.linkUrl:"about:blank";return(0,i.jsxs)("div",{className:"developer_related_link_row--link--fvcCC ellipsis--ellipsis--Tjyfa","data-testid":"developer-related-link-row",onMouseEnter:()=>P(!0),onMouseLeave:()=>P(!1),children:[V?(0,i.jsx)(eZ.E,{className:"developer_related_link_row--linkInfo--214Y7 developer_related_link_row--linkContentsLayout--mVoUm",onClick:K,recordingKey:(0,nL.Pt)(Z,"button"),"aria-label":t.linkName,ref:b,children:Y}):(0,i.jsx)("div",{className:"developer_related_link_row--linkWrapper--uGIaN",children:(0,i.jsx)(on._,{href:J,className:"developer_related_link_row--linkButton--u-AQo","aria-label":t.linkName,onClick:H,recordingKey:(0,nL.Pt)(Z,"button"),newTab:!0,ref:C,children:(0,i.jsx)("div",{className:"developer_related_link_row--linkContentsLayout--mVoUm",children:Y})})}),(0,i.jsxs)("div",{className:eS()("developer_related_link_row--additionalButtons--tKT0M",{"developer_related_link_row--visible--6oViL":R||D||x||S}),children:[M,S&&(0,i.jsx)("div",{onMouseEnter:()=>F(!1),children:(0,i.jsx)(w,{items:O,showPoint:!1})})]})]})}function oS({name:e,url:t,isHovering:n,showExternalIcon:s}){return(0,i.jsxs)("div",{className:"developer_related_link_row--linkAndLabelWrapper--O1sXy",children:[(0,i.jsx)("p",{className:eS()("developer_related_link_row--linkName--p0e0K ellipsis--ellipsis--Tjyfa",{"developer_related_link_row--shortName--n5sCM":n}),children:e}),n&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("p",{className:"developer_related_link_row--linkDivider--20WA5",children:"\xb7"}),(0,i.jsx)("p",{className:"developer_related_link_row--linkURL--eaX2b ellipsis--ellipsis--Tjyfa blue_link--blueLink--9rlnd",children:t}),s&&(0,i.jsx)("div",{className:"developer_related_link_row--externalIcon--0hwtg",children:(0,i.jsx)(iY.S,{})})]})]})}var oI=n(920764),oN=n(886083);function oA(){(0,e4.jY)();let e=(0,lZ.lA)(),[t,n]=(0,h.g$)(),i=(0,oI.AK)(t,n),a=e?.isState?e?.parentNode:null,{backingSymbolDescription:r,parentDescription:l}=(0,h.iX)(e?.description,a?.description),o=r&&l?l+"\n\n"+r:r||l;return s.useMemo(()=>({links:i,description:o}),[i,o])}function oL({link:e,appendLabel:t}){let n=(0,l4.Gw)(e.uri),s=n?(0,l6.Zr)(n):(0,p.t)("dev_handoff.docs.links_default"),a={id:e.uri,nodeId:"",fileKey:"",linkName:s,linkUrl:e.uri,linkPreviewJson:"",isUserOverride:!1,isInherited:!1,linkPreview:null};return(0,i.jsx)(oT,{link:a,isEditable:!1,hintInMenu:(0,p.t)("dev_handoff.developer_related_links.cant_edit_component_doc_link"),onOpenDeleteModal:eH.lQ,onOpenEditModal:eH.lQ,appendLabel:t})}function oM(){let{description:e}=oA();return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(ot,{description:e,shouldUseUiFont:!0,shouldUseBottomPadding:!0}),(0,i.jsx)(oN.m,{})]})}var oO=n(564914),oR=n(532096),oP=n(260309),oD=n(452981),oF=n(368422),oz=n(737139);function oB({onCancel:e,onSuccess:t,existingUrls:n}){let r=(0,a.wA)(),[l,o]=s.useState(""),[d,c]=s.useState(!1),u=(0,lZ.Nf)()??"",m=(0,b.Fk)((e,t)=>e?.get(t)?.type,u),h=(0,A.tS)(),f=ok(l),g=s.useRef(null),x=s.useCallback(async()=>{let e=l;if(!(0,ow.G)(e)||!(0,ow.H)(e)){if(e="http://"+e,!(0,l4.FB)(e)||!(0,ow.G)(e)){r(ep.F.enqueue({message:(0,p.t)("dev_handoff.developer_related_links.invalid_link"),error:!0,timeoutOverride:2e3}));return}o(e)}if(n.includes(e)){r(ep.F.enqueue({message:(0,p.t)("dev_handoff.developer_related_links.duplicate_link_error"),error:!0,timeoutOverride:2e3}));return}c(!0);let i=(0,ox.DY)({fileKey:h,nodeId:u,url:e,onPost:()=>t(e),nodeType:m,source:"web",pluginId:f?.plugin.plugin_id});try{let e=await i;c(!1);let t=ox.Rb.safeParse(e.data);if(!t.success||!f)return;let n=t.data.meta;f.genPreview({link:{id:n.id,linkUrl:n.link_url,linkName:n.link_name,linkPreview:null,linkPreviewJson:"",nodeId:n.node_id,fileKey:n.file_key,isUserOverride:n.is_user_override,isInherited:!1}})}catch(e){console.error(e),r(ep.F.enqueue({message:(0,p.t)("dev_handoff.developer_related_links.link_error",{errorMessage:e.message}),error:!0,timeoutOverride:2e3}))}finally{c(!1)}},[l,n,h,u,t,r,m,f]),_=async t=>{"Enter"===t.key&&!t.shiftKey&&l?await x():"Escape"===t.key&&e()};if(s.useEffect(()=>{let t=t=>{g.current&&!g.current.contains(t.target)&&(l&&""!==l?x():e())};return document.addEventListener("mousedown",t),()=>document.removeEventListener("mousedown",t)},[e,g,x,l]),d){let e=new URL(l).host;return e.startsWith("www.")&&(e=e.slice(4)),(0,i.jsxs)(oz.fI,{className:"add_developer_related_link_row--inputRowSubmitting--11rHh add_developer_related_link_row--inputRow--0rB-c",children:[(0,i.jsx)(P.k,{size:"md"}),(0,i.jsx)(oD.J,{variant:"secondary",children:e})]})}return(0,i.jsxs)(oz.fI,{className:"add_developer_related_link_row--inputRow--0rB-c",children:[(0,i.jsx)(lV.W,{className:"add_developer_related_link_row--icon--mFkf4"}),(0,i.jsxs)(oF.p.Root,{children:[(0,i.jsx)(oF.p,{"aria-label":(0,p.t)("dev_handoff.developer_related_links.add_link_button"),autoFocus:!0,onChange:o,onKeyDown:_,placeholder:(0,p.t)("dev_handoff.developer_related_links.link_placeholder"),recordingKey:"devRelatedLinkUrlInput",ref:g,value:l}),(0,i.jsx)(eZ.E,{"aria-label":(0,p.t)("dev_handoff.developer_related_links.add_link_submit"),className:"add_developer_related_link_row--iconButton--qajl7",htmlAttributes:{"data-tooltip":(0,p.t)("dev_handoff.developer_related_links.add_link_submit"),"data-tooltip-type":e5.Ib.TEXT,onKeyDown:_},onClick:x,children:(0,i.jsx)(lv.g,{})})]})]})}var oG=n(824570),oU=n(408825);let oV=oU.z.object({type:oU.z.literal("PLAIN_TEXT"),text:oU.z.string()}),oH=oU.z.union([oV,oU.z.null()]),oK=oU.z.object({type:oU.z.literal("AUTH_REQUIRED")}),oW=(oU.z.union([oK,oV,oU.z.null()]),oU.z.object({type:oU.z.literal("AUTH_SUCCESS")}));function oq(e){if(!e)return null;try{let t=JSON.parse(e),n=oH.safeParse(t);if(!n.success)return null;return n.data}catch(t){return(0,a6.$D)(f.e.CODE_CONNECT,t,{extra:{previewJson:e}}),null}}oU.z.union([oW,oU.z.null()]);var oX=n(20940);function oY(){let e=l5(),t=(0,A.q5)(),n=t?.repo,i=!!(t&&n&&(0,oX.Ns)(t,n))||!n,s=(0,E.xo)();return!e&&i&&!s}function oZ(e){let t=(0,B.bc)(q.jJU,{fileKey:e});return(0,oG.k9)(()=>"loaded"===t.status&&t.data.file?.developerRelatedLinks?[t.data.file.developerRelatedLinks.map(e=>({...e,linkPreview:oq(e.linkPreviewJson)})),"loaded"]:[[],t.status],[t])}function oJ(e,t){let n=(0,B.bc)(q.Ssd,{fileKey:e,nodeId:t});return(0,oG.k9)(()=>"loaded"===n.status&&n.data.file?.developerRelatedLinksForNode?[n.data.file.developerRelatedLinksForNode.map(e=>({...e,linkPreview:oq(e.linkPreviewJson)})),"loaded"]:[[],n.status],[n])}var oQ=n(959834),o$=n(354174);let o0=(0,oQ.Ju)(function(e){let t=e.linkId,n=(0,lZ.Nf)()??"",s=(0,A.tS)(),r=(0,ie.eY)().get(n),l=(0,a.wA)(),o=async()=>{if(!s||!n)return;let e=(0,ox.Tz)({fileKey:s,linkId:t,nodeId:n,nodeType:r?.type,source:"web"});l(lc.Ce());try{await e}catch(e){console.error(e),l(ep.F.enqueue({message:`Could not delete link: ${e.message}`,error:!0,timeoutOverride:2e3}))}};return(0,i.jsx)(o$.yX,{destructive:!0,confirmationTitle:(0,p.tx)("dev_handoff.developer_related_links.delete_link"),confirmText:(0,p.tx)("dev_handoff.developer_related_links.delete_link"),onConfirm:o,children:(0,i.jsx)("p",{children:(0,p.tx)("dev_handoff.developer_related_links.delete_link_text_body")})})},"DeveloperRelatedLinksDeleteModal");var o1=n(10778),o2=n(221586);let o3="developer_related_links_edit_modal--formRow--laYXB",o5="developer_related_links_edit_modal--labelCell--MSiaw",o4="developer_related_links_edit_modal--fieldCell--3YNrL",o6="developer_related_links_edit_modal--label--cxfFD",o7=(0,oQ.Ju)(function({initialLink:e,...t}){let n=(0,s.useRef)(null),r=(0,s.useRef)(null),l=(0,o1.X)(r),o=iA.hS(t),{id:d,linkName:c,linkUrl:u}=e,[m,h]=s.useState(u),f=e.linkPreview?.text,[g,x]=s.useState(!e.isUserOverride&&f?"":c),[_,y]=s.useState(!1),v=(0,lZ.Nf)()??"",b=(0,A.tS)(),C=(0,ie.eY)().get(v),j=(0,a.wA)(),k=ok(m),w=async()=>{let t;if(!v||!b)return;let n=m;if((!(0,ow.G)(n)||!(0,ow.H)(n))&&(n="http://"+n,!(0,ow.G)(n))){j(ep.F.enqueue({message:(0,p.t)("dev_handoff.developer_related_links.invalid_link"),error:!0,timeoutOverride:2e3}));return}y(!0);let i=g;g&&""!==g||(i=await (0,ox.yf)(n)),m!==u&&g!==c?t=!0:m!==u?k&&(t=!1):g!==c&&(t=!!g||!e.linkPreview);let s=(0,ox.Cq)({fileKey:b,nodeId:v,linkId:d,name:i,url:n,isUserOverride:t,clearLinkPreview:m!==u,nodeType:C?.type,source:"web",pluginId:k?.plugin.plugin_id});k&&!t&&k.genPreview({link:{...e,linkUrl:m,linkName:g,isUserOverride:!1}}),j(lc.Ce());try{await s}catch(e){console.error(e),j(ep.F.enqueue({message:`Could not edit link: ${e.message}`,error:!0,timeoutOverride:2e3}))}},E=_||!m||c===g&&u===m,T=e=>{e.keyCode===o2.Uz.ENTER&&!e.shiftKey&&g&&m?w():e.keyCode===o2.Uz.ESCAPE&&j(lc.Ce())},S=e=>{e.current&&e.current.select()};return(0,i.jsx)(iL.bL,{manager:o,width:"md",children:(0,i.jsxs)(iM.vo,{children:[(0,i.jsx)(iM.Y9,{children:(0,i.jsx)(iM.hE,{children:(0,p.tx)("dev_handoff.developer_related_links.edit_link_title")})}),(0,i.jsx)(iM.nB,{children:(0,i.jsxs)("div",{className:"developer_related_links_edit_modal--formContainer--qItRI",children:[(0,i.jsxs)("div",{className:o3,children:[(0,i.jsx)("div",{className:o5,children:(0,i.jsx)(oD.J,{htmlFor:"devRelatedLinkUrlInput",className:o6,children:(0,p.tx)("dev_handoff.developer_related_links.link")})}),(0,i.jsx)("div",{className:o4,children:(0,i.jsx)(oF.p.Lazy,{ref:l,"aria-label":(0,p.t)("dev_handoff.developer_related_links.link"),autoFocus:!0,disabled:_,htmlAttributes:{onFocus:()=>S(r)},id:"devRelatedLinkUrlInput",onChange:h,onKeyDown:T,recordingKey:"devRelatedLinkUrlInput",value:m})})]}),(0,i.jsxs)("div",{className:o3,children:[(0,i.jsx)("div",{className:o5,children:(0,i.jsx)(oD.J,{htmlFor:"devRelatedLinkNameInput",className:o6,children:(0,p.tx)("dev_handoff.developer_related_links.name")})}),(0,i.jsx)("div",{className:o4,children:(0,i.jsxs)(oF.p.Root,{children:[(0,i.jsx)("div",{className:"developer_related_links_edit_modal--favicon--aNxtZ",children:(0,i.jsx)(os.v,{url:u})}),(0,i.jsx)(oF.p.Lazy,{ref:n,"aria-label":(0,p.t)("dev_handoff.developer_related_links.name"),disabled:_,htmlAttributes:{onFocus:()=>S(n)},id:"devRelatedLinkNameInput",onChange:x,onKeyDown:T,placeholder:f,recordingKey:"devRelatedLinkNameInput",value:g})]})})]})]})}),(0,i.jsx)(iM.wi,{children:(0,i.jsxs)(iM.jk,{children:[(0,i.jsx)(nn.$n,{variant:"secondary",onClick:()=>j(lc.Ce()),children:(0,p.tx)("dev_handoff.developer_related_links.cancel")}),(0,i.jsx)(nn.$n,{onClick:w,disabled:E,type:"submit",children:(0,p.tx)("dev_handoff.developer_related_links.save_link")})]})})]})})},"DeveloperRelatedLinksEditModal"),o8=(0,o.eU)(!1);function o9({link:e,isVariant:t}){return(0,i.jsx)(oT,{isEditable:!1,link:{...e,isInherited:!0,isVariant:t},onOpenDeleteModal:eH.lQ,onOpenEditModal:eH.lQ})}let de=(0,o.eU)(!1),dt=(0,o.eU)(null);function dn(e=null){let t=(0,lZ.Nf)()??"",n=(0,ie.eY)(),i=(0,lZ.lU)(),r=(0,a.d4)(e=>e.mirror.appModel.currentPage),l=n.get(i??r),d=(0,o.Xr)(de),c=(0,o.Xr)(dt),u=(0,iF.U)();return s.useCallback(n=>{n?.stopPropagation(),l?.isAlive&&(d(!0),c(e),u("Dev Handoff Related Links Click Plus Icon",{nodeId:t,nodeType:l?.type,source:"web"}))},[u,d,t,l,e,c])}function di({documentationDataLinks:e,links:t,linksLoaded:n,inheritedLinksForStateGroup:a,inheritedLinksStatusForStateGroup:r,inheritedLinks:l,inheritedLinksStatus:o,isVariant:d,userCanEditLink:c,onOpenDeleteModal:u,onOpenEditModal:m,newLinkRowVisible:h,newLinkJustAdded:f,newestLink:g}){let x=s.useMemo(()=>n&&"loaded"===o&&"loaded"===r?[...e.map(e=>({...e,type:"documentation"})),...l.map(e=>({...e,type:"inherited"})),...a.map(e=>({...e,type:"inherited-state-group"})),...t.map(e=>({...e,type:"not-inherited"}))]:[],[e,l,a,t,n,o,r]),{visibleItems:_,showMoreButton:y}=(0,l2.y)({items:x,pageSize:2,shouldResetOnSelectionChange:!0,showAll:h||f});return(0,i.jsxs)(i.Fragment,{children:[_.map(e=>"documentation"===e.type?(0,i.jsx)(oL,{link:e,appendLabel:(0,p.t)("dev_handoff.docs.documentation_link_label")},e.uri):"inherited"===e.type?(0,i.jsx)(o9,{link:e,isVariant:!1},e.linkUrl):"inherited-state-group"===e.type?(0,i.jsx)(o9,{link:e,isVariant:d},e.linkUrl):"not-inherited"===e.type?(0,i.jsx)(oT,{isEditable:c,link:{...e,isInherited:!1},linkToFocus:g,onOpenDeleteModal:u,onOpenEditModal:m},e.linkUrl):void 0),(0,i.jsx)(da,{links:_.filter(e=>"documentation"!==e.type)}),y]})}function ds(){let e=(0,a.wA)(),t=(0,lZ.Nf)()??"",n=(0,A.uL)()??"",l=(0,ie.eY)(),d=(0,lZ.lU)(),c=(0,a.d4)(e=>e.mirror.appModel.currentPage),u=l.get(d??c),p=(0,h.wS)(),m=(0,oR.An)(),f=oY(),g=l5(),[x,_]=oZ(n),{links:y=[]}=oA(),v=s.useMemo(()=>x.filter(e=>e.nodeId===t)??[],[x,t]),{singleBackingSymbol:b,singleBackingStateGroup:C}=(0,oP.$)([u?.guid??""]),{backingSymbol:j,backingStateGroup:k}=(0,h.Bv)(b,C),w="loaded"===p.status,E=u?.type==="INSTANCE"||w,T=(0,lQ.bj)(j?.sourceLibraryKey?[j?.sourceLibraryKey]:[]),S=T.data[0],I=null;S&&((0,oO.ZA)(S)&&(0,oO.xA)(S)?I=S.hub_file_id:"library_file_key"in S&&(I=S.library_file_key));let[N,L]=oJ(I??"",j?.publishID??""),[M,O]=oJ(I??"",k?.publishID??""),R=!!I&&I!==n,P=j?.guid;E&&P&&!R&&(N=x.filter(e=>e.nodeId===P)??[],L=_),E&&k&&!R&&(M=x.filter(e=>e.nodeId===k.guid)??[],O=_);let[D,F]=(0,o.fp)(de),z=dn(),[B,G]=(0,o.fp)(o8);s.useEffect(()=>{B&&(z(),G(!1))},[B,z,G]);let U=s.useMemo(()=>x&&function(e,t,n){let i=new Map,s=new Map;return e.forEach(e=>{if(r.glU.getPageIdFromNode(e.nodeId)!==n)return;let a=t.get(e.nodeId);for(;a;){let t=s.get(a.guid);if(t){i.get(t)?.push(e);return}let n=a.parentNode;if(!n||"SECTION"===a.type||"CANVAS"===a.type)return;if("FRAME"===a.type&&!a.isStateGroup&&!a.resizeToFit&&(n?.type==="SECTION"||n?.type==="CANVAS")){i.get(a.guid)?i.get(a.guid)?.push(e):i.set(a.guid,[e]),s.set(e.nodeId,a.guid);return}a=n}}),i}(x,l,c),[x,t,c]),[V,H]=s.useState(!1),[K,W]=s.useState(""),q=(0,o.md)(dt),X=s.useCallback(()=>{F(!1),q?.current?.focus?.()},[q,F]),Y=s.useCallback(e=>{F(!1),H(!0),W(e)},[F]);if(0===v.length&&g)return null;let Z=u?.type==="SECTION"&&U&&function(e,t){let n=new Map;for(let i of t.childrenNodes){let t="FRAME"===i.type&&e.get(i.guid);t&&n.set(i.guid,t)}return n}(U,u),J=v.length>0||y.length>0||D||N.length>0||M.length>0||!m&&U&&U.size>0||Z&&Z.size>0,Q="loaded"===T.status&&"loaded"===_&&"loaded"===L&&"loaded"===O;return(0,i.jsx)(e6.VZ,{recordingKey:"developerLinks",bodyIsEmpty:!J,hideHeader:!0,noBorder:!0,noPadding:!0,children:(0,i.jsxs)("div",{className:eS()("developer_related_links_panel--rowsContainer--qh1Un","developer_related_links_panel--gap--nJGut"),children:[(0,i.jsx)(di,{documentationDataLinks:y,inheritedLinks:N&&E?N:[],inheritedLinksForStateGroup:k&&E?M:[],inheritedLinksStatus:L,inheritedLinksStatusForStateGroup:O,isVariant:null!==k,links:v,linksLoaded:Q,newLinkJustAdded:V,newLinkRowVisible:D,newestLink:K,onOpenDeleteModal:(t,n)=>{e((0,lc.to)({type:o0,data:{linkId:t,initialLinkUrl:n}}))},onOpenEditModal:t=>{e((0,lc.to)({type:o7,data:{initialLink:t}}))},userCanEditLink:f}),D&&(0,i.jsx)(oB,{onCancel:X,onSuccess:Y,existingUrls:v.map(e=>e.linkUrl)})]})})}function da({links:e}){let[t,n]=(0,o.fp)(l3),a=s.useMemo(()=>{let n=new Set(e.map(e=>e.linkUrl));return Object.values(t).filter(e=>!!e&&e.links.some(e=>n.has(e.linkUrl)))},[e,t]);async function r({links:e,plugin:t}){if(await o_.instance.runAuth({plugin:t,links:e.map(e=>({url:e.linkUrl,name:e.linkName,isInherited:e.isInherited,nodeId:e.nodeId}))})){n(e=>{let n={...e};return delete n[t.plugin_id],n});try{await Promise.all(e.map(e=>o_.instance.generateLinkPreview({plugin:t,link:e})))}catch(e){console.error(e)}}}return a&&0!==a.length?(0,i.jsx)(a7.Y,{spacing:4,direction:"vertical",width:"fill-parent",horizontalAlignItems:"start",padding:{top:4,left:16},children:Array.from(a).map((e,t)=>(0,i.jsx)(a8.E,{children:(0,p.tx)("dev_handoff.related_links.plugin.auth_required",{button:(0,i.jsx)("button",{className:G.s.colorTextBrand.bgTransparent.$,onClick:()=>r({links:e.links,plugin:e.plugin}),children:(0,i.jsx)(a8.E,{children:(0,p.tx)("dev_handoff.related_links.plugin.connect_to",{pluginName:e.plugin.name})})})})},t))}):null}var dr=n(752064),dl=n(130353),dd=n(619070),dc=n(553065),du=n(643077),dp=n(754446),dm=n(303106),dh=n(677885),df=n(787995),dg=n(924519),dx=n(350081),d_=n(959091),dy=n(66414),dv=n(919853),db=n(337726),dC=n(826220),dj=n(222714);let dk="view_generated_snippets_button--buttonWrapper--mIQTK",dw=(0,s.lazy)(()=>Promise.all([n.e(9691),n.e(6600)]).then(n.bind(n,276600)).then(e=>({default:e.CodeSnippetEvalsContainer})));function dE(){let[e,t]=(0,s.useState)(!1),{windowInnerWidth:n,windowInnerHeight:a}=(0,dj.l)();return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:dk,children:(0,i.jsx)(nn.IK,{onClick:()=>t(!0),children:"View Code Snippet Evals"})}),e&&(0,i.jsx)(dC._L,{onClose:()=>t(!1),defaultWidth:n-80,defaultHeight:a-80,defaultPosition:{x:40,y:40},children:(0,i.jsxs)(iM.vo,{children:[(0,i.jsx)(iM.Y9,{children:(0,i.jsx)(iM.hE,{children:"Code Snippet Evals"})}),(0,i.jsx)(iM.nB,{padding:0,children:(0,i.jsx)(dw,{})})]})})]})}let dT=(0,s.lazy)(()=>n.e(2933).then(n.bind(n,222933)).then(e=>({default:e.GeneratedSnippetsContainer})));function dS(){let[e,t]=(0,s.useState)(!1),{windowInnerWidth:n,windowInnerHeight:a}=(0,dj.l)();return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:dk,children:(0,i.jsx)(nn.IK,{onClick:()=>t(!0),children:"View Generated Snippets"})}),e&&(0,i.jsx)(dC._L,{onClose:()=>t(!1),defaultWidth:n-80,defaultHeight:a-80,defaultPosition:{x:40,y:40},children:(0,i.jsxs)(iM.vo,{children:[(0,i.jsx)(iM.Y9,{children:(0,i.jsx)(iM.hE,{children:"Generated Snippets"})}),(0,i.jsx)(iM.nB,{padding:0,children:(0,i.jsx)(dT,{})})]})})]})}var dI=n(170907);function dN(){let e=(0,e4.rb)(),t=(0,s.useCallback)(()=>{af.Y5.triggerAction("edit-make-from-design")},[]);if(!(0,l.kc)().bake_canvas)return null;if((0,l.kc)().bake_canvas_code_layer){if("CODE_INSTANCE"!==e)return null}else if("RESPONSIVE_SET"!==e)return null;return(0,i.jsx)(dI.z,{onClick:t,children:(0,p.t)("inspect_panel.open_make_in_dev_mode")})}let dA=e=>e.includes("prototype")||e.includes("user")||e.includes("prop")?null:e.includes("stroke")||e.includes("border")||e.includes("corner")?"border":e.includes("fill")||e.includes("background")?"color":e.includes("text")||e.includes("font")||e.includes("paragraph")||e.includes("ot-features")||"letter-spacing"===e||"line-height"===e?"text":e.includes("effect")?"effect":e.includes("size")||e.includes("stack")?"layout":"count"===e||e.includes("vector")?"shape":"opacity"===e||"visible"===e||"blend-mode"===e?"style":null;function dL(e,t){return dM.indexOf(e)-dM.indexOf(t)}let dM=["color","border","text","effect","layout","shape","style"];var dO=n(687849);let dR=(0,oQ.Ju)(function(){return(0,i.jsx)(o$.yX,{destructive:!0,confirmationTitle:(0,p.tx)("inspect_panel.detached_component.remove_attachment"),confirmText:(0,p.tx)("dev_handoff.detached_component.remove_attachment_confirm"),onConfirm:()=>{dO.VU.get("remove-detached-symbol-id","menu")()},children:(0,i.jsx)("p",{children:(0,p.tx)("dev_handoff.detached_component.remove_attachment_text_body")})})},"RemoveDetachmentStatusModal");var dP=n(623841);function dD({frameId:e,compareVersions:t,compareDetachedComponent:n,compareOverrides:a,overridesText:r}){let l=(0,lK.dU)(e,"cc_versions"),d=(0,lK.xY)("cc_dropdown_detached_component"),c=function(){let e=(0,dp.kl)("overrides");return e&&!(0,dc.gl)(e)?e.instanceGuid:null}(),u=(0,lK.Xn)(c),m=(0,o.Xr)(dh.go),{manager:h,getTriggerProps:f}=r0.b(),g=n||a,x=t&&!g||!t&&g,_=function({compareVersions:e,compareDetachedComponent:t,compareOverrides:n}){return s.useMemo(()=>e?(0,p.tx)("dev_handoff.compare_changes.entrypoint.compare_versions"):t||n?(0,p.tx)("dev_handoff.compare_changes.entrypoint.compare_main_component"):(0,p.tx)("inspect_panel.history.compare_changes"),[t,e,n])}({compareVersions:t,compareDetachedComponent:n,compareOverrides:a}),y=s.useCallback(()=>{m(!0),t?l():n?d():a&&u()},[n,a,t,d,u,l,m]);return x?(0,i.jsx)(nn.$n,{htmlAttributes:{"data-onboarding-key":db.Ov,"data-testid":"compare-changes-entry-with-dropdown"},onClick:y,recordingKey:"compareChanges.entrypoint",variant:"secondary",children:_}):(0,i.jsxs)(r0.bL,{manager:h,children:[(0,i.jsx)(nn.$n,{htmlAttributes:{"data-testid":"compare-changes-entry-with-dropdown","data-onboarding-key":db.Ov},recordingKey:"compareChanges.entrypoint",variant:"secondary",...f({onClick:()=>m(!0)}),children:(0,i.jsxs)("div",{className:"dev_mode_selection_actions_panel--dropdownContainer--3ZGTW",children:[!!r&&(0,i.jsx)("div",{className:"dev_mode_selection_actions_panel--overridesDot--G2M6I",children:(0,i.jsx)(eN.B,{svg:dP.A})}),(0,p.tx)("inspect_panel.history.compare_changes"),(0,i.jsx)(iX.r,{})]})}),(0,i.jsxs)(r0.mc,{children:[(0,i.jsx)(r0.q7,{htmlAttributes:{"data-testid":"menu-option-cc-version"},onClick:l,recordingKey:"compareChanges.entrypoint.dropdown.compareVersions",children:(0,p.tx)("dev_handoff.compare_changes.entrypoint.compare_versions")}),n&&(0,i.jsx)(r0.q7,{htmlAttributes:{"data-testid":"menu-option-cc-detached"},onClick:d,recordingKey:"compareChanges.entrypoint.dropdown.compareDetachedComponent",children:(0,p.tx)("dev_handoff.compare_changes.entrypoint.compare_main_component")}),a&&(0,i.jsx)(r0.q7,{htmlAttributes:{"data-testid":"menu-option-cc-overrides"},onClick:u,recordingKey:"compareChanges.entrypoint.dropdown.compareOverrides",children:(0,p.tx)("dev_handoff.compare_changes.entrypoint.compare_main_component")})]})]})}function dF(){let e=is.iZ()?.id,t=(0,e4.Tv)(),n=(0,A.tS)(),s=(0,a.wA)();if(t?.length!==2)return null;let r=t[1],l=t[0];return(0,i.jsx)(nn.$n,{variant:"secondary",onClick:()=>{(0,c.sx)("Diff Modal Compare Changes Clicked",{userId:e,fileKey:n,nodeId:r,otherNodeId:l,entrypoint:"lego_layer",origin:"cc_nodes"}),_.sn.reset("dev_handoff.view_history",r),_.sn.start("dev_handoff.view_history",{key:r}),s(lc.to({type:l_.ku,data:{changeNodeId:r,basisNodeId:l}}))},recordingKey:"compareChanges.entrypoint.nodes",children:(0,p.tx)("inspect_panel.history.compare_changes_selected_items")})}function dz(){let e=(0,h.wS)(),t=(0,j.uQ)(),n=(0,b.Fk)((e,t)=>{let n=e?.get(t??"");return n?.type==="SYMBOL"||n?.type==="INSTANCE"},t);return"loaded"===e.status&&!n}function dB({showDoneWithChangesPopover:e}={}){let t=(0,iF.U)(),n=(0,A.q5)(),i=(0,j.uQ)(),d=(0,b.Fk)((e,t)=>{let n=e?.get(t??"");return n?.type==="SYMBOL"||n?.isStateGroup},i),c=dz(),u=(0,E.xo)(),h=(0,dv.Td)(),f=(0,m.D)(),g=(0,b.Fk)((e,t)=>{let n=e?.get(t??"");return f&&!!n?.hasBeenEditedSinceLastStatusChange},i),x=(0,a.wA)(),_=dn((0,o.md)(dy.lO)),y=function(){let e=(0,lZ.Nf)()??"",t=(0,A.uL)()??"",n=oY(),[i]=oZ(t),a=s.useMemo(()=>i.filter(t=>t.nodeId===e)??[],[i,e]),r=n&&a.length<10,l=(0,o.md)(de);return!r||l}(),v=s.useCallback(()=>x(lc.to({type:dR})),[x]),C=s.useCallback(()=>{n&&i&&(window.location.href=`vscode://figma.figma-vscode-extension/open/${n.key}/${n.name}/${i}`)},[n,i]),[,k]=(0,o.fp)(dl.wz),w=(0,m.D)(),T=(0,du.dh)(),S=(0,aR.hA)(),{canShowOnCanvasStatusButton:I,hasStatus:L,isReadyForDev:M,isCompleted:O}=(0,b.Fk)((e,t)=>{let n=e?.get(t??"");return n?{canShowOnCanvasStatusButton:n.canHaveStatus&&!n.isInstance,hasStatus:n.getStatusInfo().status!==r.zIx.NONE,isReadyForDev:n.hasReadyStatus,isCompleted:n.hasCompletedStatus}:{canShowOnCanvasStatusButton:!1,hasStatus:!1,isReadyForDev:!1,isCompleted:!1}},i),R=w&&!N.z4.getIsExtension()&&I,P=(0,dr.VW)(i??"",T,!1),D=s.useCallback(()=>{t("Dev Mode Canvas Focus Entry Clicked",{nodeId:i}),k("dev_mode_properties_panel"),x(sB.sf(P))},[x,P,t,i,k]),F=s.useCallback(()=>{if(!S&&!i||!n)return;let e=(0,ns.jN)({file:n,nodeId:T,isDevHandoff:!0,devModeFocusId:S??i??""});x(dd.S({fileKey:n.key,url:e,source:dm.d.STATUS_DROPDOWN_MENU}))},[T,x,n,S,i]),z=s.useCallback(()=>{i&&N.z4.setNodesCompleted([i],"canvas")},[i]),B=s.useCallback(()=>{i&&N.z4.setNodesReady(!0,[i],"canvas",null)},[i]),G=s.useCallback(()=>{i&&N.z4.setNodesReady(!1,[i],"canvas",null)},[i]);return s.useMemo(()=>{let t=[];return t.push([{type:l$.ZU.CUSTOM_ACTION,customActionType:l$.Wg.STANDARD_BUTTON,onClick:C,getTitle:()=>(0,p.t)("dev_handoff.inspect_panel.open_in_vs_code.link"),disabled:u,preventHoisting:!0,recordingKey:"openIsVsCode"}]),t.push([{type:l$.ZU.CUSTOM_ACTION,customActionType:l$.Wg.STANDARD_BUTTON,onClick:_,getTitle:()=>(0,p.t)("dev_handoff.developer_related_links.add_link_button"),getSubText:d?()=>(0,p.t)("dev_handoff.developer_related_links.component_inherited_links_desc"):void 0,disabled:y,preventHoisting:!0,recordingKey:"addDevRelatedLink"}]),c&&t.push([{type:l$.ZU.CUSTOM_ACTION,customActionType:l$.Wg.STANDARD_BUTTON,onClick:v,getTitle:()=>(0,p.t)("dev_handoff.detached_component.unlink_from_main_component"),disabled:h,preventHoisting:!0,recordingKey:"unlinkFromMainComponent"}]),(0,l.kc)().dt_interactive_inspection_m2&&R&&t.push([S?void 0:{type:l$.ZU.CUSTOM_ACTION,customActionType:l$.Wg.STANDARD_BUTTON,onClick:D,getTitle:()=>(0,p.t)("dev_handoff.status.show_in_focus"),preventHoisting:!0,recordingKey:"enterFocusView"},{type:l$.ZU.CUSTOM_ACTION,customActionType:l$.Wg.STANDARD_BUTTON,onClick:F,getTitle:()=>(0,p.t)("dev_handoff.status.copy_focus_link"),preventHoisting:!0,recordingKey:"copyFocusLink"}]),(0,l.kc)().dt_interactive_inspection_m2&&I&&t.push([L?void 0:{type:l$.ZU.CUSTOM_ACTION,customActionType:l$.Wg.STANDARD_BUTTON,onClick:B,getTitle:()=>(0,p.t)("dev_handoff.status.mark_as_ready_for_first_time"),disabled:u,preventHoisting:!0,recordingKey:"markAsReady"},M&&!g?{type:l$.ZU.CUSTOM_ACTION,customActionType:l$.Wg.STANDARD_BUTTON,onClick:z,getTitle:()=>(0,p.t)("dev_handoff.status.mark_as_completed"),disabled:u,preventHoisting:!0,recordingKey:"markAsCompleted"}:void 0,O&&!g?{type:l$.ZU.CUSTOM_ACTION,customActionType:l$.Wg.STANDARD_BUTTON,onClick:B,getTitle:()=>(0,p.t)("dev_handoff.status.mark_as_ready"),disabled:u,preventHoisting:!0,recordingKey:"markAsIncomplete"}:void 0,g&&L&&e?{type:l$.ZU.CUSTOM_ACTION,customActionType:l$.Wg.STANDARD_BUTTON,onClick:e,getTitle:()=>(0,p.t)("dev_handoff.status.mark_as_ready_edited"),disabled:u,preventHoisting:!0,recordingKey:"showDoneWithChangesPopover"}:void 0,L?{type:l$.ZU.CUSTOM_ACTION,customActionType:l$.Wg.STANDARD_BUTTON,onClick:G,getTitle:()=>(0,p.t)("dev_handoff.status.remove"),disabled:u,preventHoisting:!0,recordingKey:"removeStatus"}:void 0]),t},[y,I,R,F,v,D,S,L,O,d,c,g,M,u,h,z,B,_,C,G,e])}function dG({id:e}){let t=(0,ie.eY)().get(e);return(0,i.jsxs)("div",{className:eS()(tW,"dev_mode_selection_actions_panel--list--vucFi"),children:[(0,i.jsx)(a_.Bf,{className:"dev_mode_selection_actions_panel--layerIconList--dpuvV dev_mode_selection_actions_panel--icon--uWKNW",guid:e}),(0,i.jsxs)("span",{className:"dev_mode_selection_actions_panel--layerNameList--j19Bh",children:[" ",t?.name," "]})]})}function dU({id1:e,id2:t}){return(0,i.jsxs)("div",{className:"dev_mode_selection_actions_panel--layerList--TNV5y",children:[(0,i.jsx)(dG,{id:e},e),(0,i.jsx)(dG,{id:t},t),(0,i.jsx)(dF,{})]})}function dV(){let e=(0,j.uQ)(),t=dz(),n=(0,ao.ei)(e??void 0),{versions:s,versionsQueryLoaded:a}=(0,lf.DS)(e??void 0),r=!a||0===s.length||!n,l=(0,ab.i)(),o=function(){let e;let t=(0,dp.kl)("overrides");if(!t||(0,dc.gl)(t))return null;let n=t.isPrimary,i=t.overriddenProperties,s=new Set;if(i.forEach(e=>{let t=dA(e);t&&s.add(t)}),0===s.size)return null;let a=Array.from(s).sort(dL).map(e=>{switch(e){case"color":return(0,p.t)("dev_handoff.overrides.color");case"border":return(0,p.t)("dev_handoff.overrides.border");case"text":return(0,p.t)("dev_handoff.overrides.text");case"effect":return(0,p.t)("dev_handoff.overrides.effect");case"layout":return(0,p.t)("dev_handoff.overrides.layout");case"shape":return(0,p.t)("dev_handoff.overrides.shape");case"style":return(0,p.t)("dev_handoff.overrides.style")}}).filter(r3.t),r=n?(0,p.t)("dev_handoff.overrides.instance"):(0,p.t)("dev_handoff.overrides.layer");switch(a.length){case 1:return(0,p.t)("dev_handoff.overrides.hint_one",{property:a[0],layerType:r});case 2:e=(0,p.t)("dev_handoff.overrides.properties2",{prop1:a[0],prop2:a[1]});break;case 3:e=(0,p.t)("dev_handoff.overrides.properties3",{prop1:a[0],prop2:a[1],prop3:a[2]});break;default:e=(0,p.t)("dev_handoff.overrides.properties_more",{prop1:a[0],prop2:a[1],prop3:a[2],count:a.length-3})}return(0,p.t)("dev_handoff.overrides.hint",{layerType:r,properties:e})}(),d=!!n?.lastEditedAt&&(!r||r&&!!n?.createdAt),c=d?r?(0,p.t)("dev_handoff.nodes_panel.created",{at:(0,ac.A)(n?.createdAt).fromNow()}):(0,p.t)("dev_handoff.nodes_panel.edited",{at:(0,ac.A)(n?.lastEditedAt).fromNow()}):"-",u=(0,tF.sD)(c);if(!e||!l)return null;let m=d&&!r,h=t&&(0,p.t)("dev_handoff.inspect_panel.detached_layer_info")||null,f=!!o,g=o||h,x=t||!r||f;return m||g||x?(0,i.jsx)("div",{className:"dev_mode_selection_actions_panel--historyLinkContainer--2cUUB",children:(0,i.jsxs)("div",{className:"dev_mode_selection_actions_panel--timestampContainerVertical--b52DX ellipsis--ellipsis--Tjyfa",children:[m&&(0,i.jsxs)("div",{className:"dev_mode_selection_actions_panel--timeAndIconContainer--u8t99",children:[(0,i.jsx)(eK.y,{className:t0}),(0,i.jsx)("span",{ref:u,children:c})]}),g&&(0,i.jsxs)("div",{className:"dev_mode_selection_actions_panel--overridesContainer--xOO4k",children:[!m&&(0,i.jsx)(lB.B,{className:t0}),(0,i.jsx)("span",{children:g})]}),x&&(0,i.jsx)(dD,{frameId:e,compareVersions:!r,compareDetachedComponent:t,compareOverrides:f})]})}):null}function dH({hasCodeConnect:e}){let t=(0,j.uQ)(),n=dz(),a=(0,h.wS)(),r=function(){let e=(0,j.uQ)(),t=dz(),{type:n,isAutoLayout:i,isComponentSet:a,isVariant:r,booleanOperation:l,resizeToFit:o}=(0,b.Fk)((e,t)=>{let n=e?.get(t??"");return n?{type:(0,lH.GI)(n)?"STAMP":n.type,booleanOperation:n.booleanOperation,isAutoLayout:"HORIZONTAL"===n.stackMode||"VERTICAL"===n.stackMode,isVariant:n.isState||n.parentNode?.isStateGroup,isComponentSet:n.isStateGroup,resizeToFit:n.resizeToFit}:{}},e),d=function(){let e=(0,dg.Yj)(),t=e?.data?.libraryKeyToFile,n=(0,dg.kt)(),i=(0,s.useMemo)(()=>n||!t?void 0:(0,dg.xA)(t)?t.hubFile?.currentHubFileVersion?.name:t.file?.name,[t,n]);if(n||!e||"loaded"===e.status)return i}();if(!n)return null;if(t&&"SYMBOL"!==n&&"INSTANCE"!==n)return(0,p.t)("inspect_panel.node_type.detached_component");if("BOOLEAN_OPERATION"===n)switch(l){case"UNION":return(0,p.t)("inspect_panel.node_type.union");case"INTERSECT":return(0,p.t)("inspect_panel.node_type.intersect");case"SUBTRACT":return(0,p.t)("inspect_panel.node_type.subtract");case"XOR":return(0,p.t)("inspect_panel.node_type.exclude")}switch(n){case"VECTOR":return(0,p.t)("inspect_panel.node_type.vector");case"STAR":return(0,p.t)("inspect_panel.node_type.star");case"LINE":return(0,p.t)("inspect_panel.node_type.line");case"ELLIPSE":return(0,p.t)("inspect_panel.node_type.ellipse");case"RECTANGLE":case"ROUNDED_RECTANGLE":return(0,p.t)("inspect_panel.node_type.rectangle");case"REGULAR_POLYGON":return(0,p.t)("inspect_panel.node_type.polygon");case"TEXT":return(0,p.t)("inspect_panel.node_type.text");case"SLICE":return(0,p.t)("inspect_panel.node_type.slice");case"GROUP":case"FRAME":if(a)return(0,p.t)("inspect_panel.node_type.main_component_set");if(i)return(0,p.t)("inspect_panel.node_type.frame_auto_layout");if(o)return(0,p.t)("inspect_panel.node_type.group");return(0,p.t)("inspect_panel.node_type.frame");case"SYMBOL":return r?(0,p.t)("inspect_panel.node_type.main_variant"):(0,p.t)("inspect_panel.node_type.main_component");case"INSTANCE":if(d)return(0,p.t)("inspect_panel.node_type.instance_with_attribution",{libraryName:d});return(0,p.t)("inspect_panel.node_type.instance");case"STICKY":case"SHAPE_WITH_TEXT":case"CONNECTOR":case"STAMP":return(0,p.t)("inspect_panel.node_type.figjam");case"SECTION":return(0,p.t)("inspect_panel.node_type.section");case"WIDGET":return(0,p.t)("inspect_panel.node_type.widget");case"CANVAS":return(0,p.t)("inspect_panel.node_type.page");case"TABLE":return(0,p.t)("inspect_panel.node_type.table");case"CODE_INSTANCE":return(0,p.t)("inspect_panel.node_type.code_instance")}return null}(),{isReadyForDev:l,isCompleted:o,isSymbol:d}=(0,b.Fk)((e,t)=>{let n=e?.get(t??"");return{isReadyForDev:n?.hasReadyStatus,isCompleted:n?.hasCompletedStatus,isSymbol:n?.type==="SYMBOL"||n?.type==="INSTANCE"||n?.isStateGroup}},t),c=(0,x.R)(e=>e.mirror.appModel.activeCanvasEditModeType);if(!t)return null;if(l)return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(lG.O,{className:tQ}),(0,i.jsx)("span",{className:t$,children:(0,p.tx)("dev_handoff.status.ready_for_dev")})]});if(o)return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(lU.l,{className:tQ}),(0,i.jsx)("span",{className:t$,children:(0,p.tx)("dev_handoff.status.completed")})]});let u=d||n,m=n&&!d?(0,p.t)("inspect_panel.node_type_tooltip.detached_component"):void 0;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(a_.Bf,{className:u?"dev_mode_selection_actions_panel--layerIconSymbol--uNRli dev_mode_selection_actions_panel--icon--uWKNW":tJ,guid:t,editModeType:c,detachedInfo:a,isCodeConnected:e}),(0,i.jsx)("span",{className:u?"dev_mode_selection_actions_panel--layerTypeSymbol--cOvYd dev_mode_selection_actions_panel--layerType--d2zDm ellipsis--ellipsis--Tjyfa":t$,"data-tooltip-type":e5.Ib.TEXT,"data-tooltip":m,children:r})]})}function dK(){let e=(0,j.uQ)(),{name:t,showNameAsQuotedText:n}=(0,b.Fk)((e,t)=>{let n=e?.get(t??""),i=n?.isState?n?.parentNode:null;return{name:(i?.name||n?.name)?.trim(),showNameAsQuotedText:n?.type==="TEXT"&&n?.name===n?.characters}},e),s=(0,e4.Cj)(t);if(!e)return null;let a=t||(0,p.t)("fullscreen.layer_panel.layer");return(0,i.jsx)(eZ.E,{className:eS()(tX,{[tZ]:!!t}),actionOnPointerDown:!0,onClick:s,"aria-label":(0,p.t)("dev_handoff.inspect_panel.copy_layer_name_aria",{layerName:a}),htmlAttributes:{"data-tooltip":(0,p.t)("dev_handoff.inspect_panel.copy_layer_name_aria",{layerName:a}),"data-tooltip-type":e5.Ib.TEXT},children:(0,i.jsx)("span",{className:n?"dev_mode_selection_actions_panel--quotedLayerNameWrapper--l35cK":tY,children:a})})}function dW(){let e=(0,j.uQ)(),t=(0,du.dh)(),n=(0,b.Fk)((e,t)=>e.get(t)?.name?.trim(),t),s=(0,e4.Cj)(n);if(e)return null;let a=n||(0,p.t)("inspect_panel.node_type.page");return(0,i.jsx)(eZ.E,{className:eS()(tX,{[tZ]:!!n}),actionOnPointerDown:!0,onClick:s,"aria-label":(0,p.t)("dev_handoff.inspect_panel.copy_page_name_aria",{pageName:a}),htmlAttributes:{"data-tooltip":(0,p.t)("dev_handoff.inspect_panel.copy_page_name_aria",{pageName:a}),"data-tooltip-type":e5.Ib.TEXT},children:(0,i.jsx)("span",{className:tY,children:a})})}function dq(){let e=(0,du.dh)(),t=(0,x.R)(e=>e.mirror.appModel.activeCanvasEditModeType);return(0,i.jsx)(a_.Bf,{className:tJ,guid:e,editModeType:t})}function dX(){let e=(0,j.uQ)(),t=(0,b.Fk)((e,t)=>{let n=e?.get(t??"");return n?.hyperlink&&"mixed"!==n.hyperlink&&n?.hyperlink?.type==="URL"?n.hyperlink.value:void 0},e),n=(0,e4.Cj)(t);return t?(0,i.jsx)("div",{className:"dev_mode_selection_actions_panel--linkButtonContainer--fnCAD ellipsis--ellipsis--Tjyfa",children:(0,i.jsx)(nn.$n,{variant:"ghost",onClick:n,iconPrefix:(0,i.jsx)("div",{className:"dev_mode_selection_actions_panel--linkIconContainer--C9M-6",children:(0,i.jsx)(lV.W,{})}),"aria-label":(0,p.t)("dev_handoff.link.copy_aria_label",{link:t}),htmlAttributes:{"data-tooltip":(0,p.t)("dev_handoff.link.copy_tooltip"),"data-tooltip-type":e5.Ib.TEXT},children:t})}):null}function dY({hideDropdown:e}){let t=l0(),{getMaybeEnabledItem:n}=(0,dx.n)(),[a,r]=s.useState(!1),l=s.useCallback(e=>{r(e)},[r]),d=s.useCallback(()=>{setTimeout(()=>r(!0),100)},[r]),{manager:c,getTriggerProps:u}=lF.x1({isOpen:a,setOpen:l}),{ref:m}=u(),h=(0,o.md)(dy.lO);s.useEffect(()=>{h?.current&&m(h.current)},[m,h]);let f=dB({showDoneWithChangesPopover:d}),g=s.useMemo(()=>{let i=[];return t&&i.push([t]),i.push((0,C.Te)().filter(n)),e||i.push(...f),i},[t,n,e,f]),x=(0,j.uQ)(),_=s.useCallback(e=>{x&&(N.z4.setNodesReady(!0,[x],"canvas",e??null),r(!1))},[x,r]);return(0,i.jsx)("div",{className:tq,children:(0,i.jsxs)(lz.o,{eventListeners:["onMouseUpCapture","onPointerUpCapture"],children:[(0,i.jsx)(d_.P,{actions:g,overflowTooltip:(0,p.t)("dev_handoff.layer_options")}),(0,i.jsx)(lF.mc,{manager:c,children:(0,i.jsxs)(iM.vo,{children:[(0,i.jsxs)(iM.Y9,{children:[(0,i.jsx)(iM.hE,{children:(0,p.tx)("dev_handoff.status.popover_title_add_a_note")}),(0,i.jsx)(iM.Jn,{})]}),(0,i.jsx)(iM.nB,{padding:8,children:(0,i.jsx)(df.A,{onResult:_})})]})})]})})}function dZ({hideDropdown:e}){let t=dB();return e?(0,i.jsx)("div",{}):(0,i.jsx)("div",{className:tq,children:(0,i.jsx)(lz.o,{eventListeners:["onMouseUpCapture","onPointerUpCapture"],children:(0,i.jsx)(d_.P,{actions:t})})})}function dJ(e){let t=(0,j.NM)(),n=(0,j.uQ)();return t?(0,i.jsx)(tB.W,{selectionName:(0,i.jsx)(tG.Y,{nodeCount:t.length,nodeType:"MIXED",nodeTypeString:(0,p.t)("inspect_panel.property.selected",{numberOfItems:t.length})}),selectionActionsButtons:(0,i.jsx)("div",{}),children:2===t.length&&!!t[0]&&!!t[1]&&(0,i.jsx)(dU,{id1:t[0],id2:t[1]})}):n?(0,i.jsx)(tB.W,{selectionName:(0,i.jsx)(dK,{}),selectionActionsButtons:(0,i.jsx)(dY,{hideDropdown:e.hideDropdown}),children:(0,i.jsxs)("div",{className:tH,children:[(0,i.jsxs)("div",{className:tK,children:[(0,i.jsx)("div",{className:tW,children:(0,i.jsx)(dH,{hasCodeConnect:!!e.hasCodeConnect})}),(0,i.jsx)(dX,{})]}),(0,l.kc)().dt_generated_snippets_exploration&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(dS,{}),(0,i.jsx)(dE,{})]}),(0,i.jsx)(dV,{}),(0,i.jsx)(dN,{}),(0,i.jsx)(ds,{})]})}):(0,i.jsx)(tB.W,{selectionName:(0,i.jsx)(dW,{}),selectionActionsButtons:(0,i.jsx)(dZ,{hideDropdown:e.hideDropdown}),children:(0,i.jsxs)("div",{className:tH,children:[(0,i.jsx)("div",{className:tK,children:(0,i.jsxs)("div",{className:tW,children:[(0,i.jsx)(dq,{}),(0,i.jsx)("span",{className:t$,children:(0,p.tx)("inspect_panel.node_type.page")})]})}),(0,i.jsx)(ds,{}),(0,l.kc)().dt_generated_snippets_exploration&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(dS,{}),(0,i.jsx)(dE,{})]})]})})}function dQ(e){return(0,i.jsx)(K.u,{label:"Header",children:(0,i.jsx)(e6.VZ,{recordingKey:"layerName",hideHeader:!0,noPadding:!0,children:(0,i.jsx)(dJ,{...e})})})}var d$=n(838167),d0=n(288747),d1=n(176203),d2=n(434923);function d3(){let{selectionProperties:e}=(0,x.R)(e=>({selectionProperties:e.mirror.selectionProperties})),t=(0,od.nl)(),n=(0,od.cW)(),s=(0,od.Be)(),r=(0,d0.dq)(),l=(0,a.wA)(),o=(0,A.tS)();return(0,i.jsx)(d2.Q,{allSavedPlugins:s.plugins,collapsible:!0,currentOrgId:r,dispatch:l,editorType:d1.nT.DevHandoff,isDevHandoff:!0,localPlugins:t,numSelected:e.numSelected??0,openFileKey:o,pluginRelaunchData:e.pluginRelaunchData,publishedPlugins:n,recordingKey:"devHandoffPluginPanel",title:(0,p.t)("dev_handoff.plugin_panel.title")},"plugin")}var d5=n(130161);let d4=(0,s.memo)(function(e){return(0,i.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,"data-fpl-icon-size":"24",children:(0,i.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",d:"M11.117 6.741A2 2 0 0 1 13 6.805l3 1.731.113.071A2 2 0 0 1 17 10.268v3.464a2 2 0 0 1-.887 1.662l-.113.07-3 1.733a2 2 0 0 1-1.883.063L11 17.197l-3-1.732a2 2 0 0 1-1-1.733v-3.464a2 2 0 0 1 1-1.732l3-1.731zm1.383.93a1 1 0 0 0-1 0l-3 1.731-.11.074a1 1 0 0 0-.39.792v3.464l.009.133a1 1 0 0 0 .491.733l3 1.733a1 1 0 0 0 .88.059l.12-.06 3-1.732a1 1 0 0 0 .491-.733l.009-.133v-3.464a1 1 0 0 0-.39-.792l-.11-.074zM12 10a2 2 0 1 1 0 4 2 2 0 0 1 0-4m0 1a1 1 0 1 0 0 2 1 1 0 0 0 0-2"})})});var d6=n(890257),d7=n(603261);function d8(){let e=(0,d7.j)({entryPoint:d6.Nh.InspectNoSelection}),t=(0,s.useCallback)(()=>{e()},[e]),n=(0,nL.Pt)("fullVarsTable","panelEntry");return(0,i.jsx)(g.tH,{boundaryKey:"varsTable_inspectEntry",fallback:g.H4.NONE_I_KNOW_WHAT_IM_DOING,team:f.e.DEV_MODE,sentryTags:{area:f.e.DEV_MODE},children:(0,i.jsx)(e6.VZ,{title:(0,p.t)("variables.authoring_modal.title"),recordingKey:"fullVarsTable",collapsiblePanelKey:"variables",children:(0,i.jsxs)("div",{className:"variables_table_entry_point--innerPanelContainer--fMHQK text--fontPos11--2LvXf text--_fontBase--QdLsd",children:[(0,p.tx)("variables.inspection_panel_entry_point.description"),(0,i.jsx)(nn.IK,{variant:"secondary",onClick:t,recordingKey:n,"aria-label":(0,p.t)("variables.local_variables_panel.open_variables_button_tooltip"),children:(0,i.jsxs)("div",{className:"variables_table_entry_point--buttonInnerWrapper--Jgybm",children:[(0,i.jsx)(d4,{}),(0,p.tx)("variables.inspection_panel_entry_point.button")]})})]})})})}var d9=n(373235),ce=n(563554),ct=n(546547),cn=n(3041),ci=n(849368),cs=n(645626),ca=n(586320),cr=n(566796),cl=n(359379),co=n(238241),cd=n(225686),cc=n(525037),cu=n(3185),cp=n(302727),cm=n(721853),ch=n(540864),cf=n(460418),cg=n(524065);function cx(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}var c_=n(833805),cy=n(68106),cv=n(346670),cb=n(117905),cC=n(283838),cj=n(34927);function ck({relativePath:e,repositoryUrl:t}){if(!t)return null;let n=t;return t.includes("github.com")&&(n=t.replace(/\/$/,"")+"/blob/main/"+e.replace(/^\//,"")),(0,i.jsx)(iq.N,{href:n,trusted:!0,newTab:!0,"aria-label":(0,p.t)("dev_handoff.usage_examples.open_in_github"),children:(0,i.jsx)(iO.K,{htmlAttributes:{"data-tooltip":(0,p.t)("dev_handoff.usage_examples.open_in_github"),"data-tooltip-type":e5.Ib.TEXT},"aria-label":(0,p.t)("dev_handoff.usage_examples.open_in_github"),children:(0,i.jsx)(cm.z,{})})})}function cw(e){let t=Math.floor((e.match(/^ */)?.[0].length??0)/2);return{code:e.trimStart()||"",indent:t}}function cE(){let e=(0,j.uQ)(),t=(0,ie.eY)(),n=(0,a.d4)(ch.C1),{usageExamples:r,repositoryUrl:o,loading:d,error:c}=function(e,t){let[n,i]=s.useState({usageExamples:[],repositoryUrl:null,loading:!1,error:null}),a=(0,cb.jI)(),r=(0,A._G)(),{assetKeys:l}=(0,cy.AR)(),o=s.useMemo(()=>l.join(","),[l]),{backingLibraryKey:d,backingNodeId:c}=s.useMemo(()=>e?(0,cC.K)(e,t,r):{backingLibraryKey:null,backingNodeId:null},[e,t,r]),[u]=(0,c_.IT)((0,cv.sN)(d),{enabled:!!d}),[p]=(0,c_.IT)((0,cv.Uo)({planType:a?.type,planParentId:a?.parentId}),{enabled:!!a&&!!a.type&&!!a.parentId&&!!u.data});return s.useEffect(()=>{if(!e||!t||""===o){i({usageExamples:[],repositoryUrl:null,loading:!1,error:null});return}(async()=>{i(e=>({...e,loading:!0,error:null}));try{let t=await cj.Q.getInContextPublishedComponents(o.split(",")),n=t.data.meta?.components?Object.values(t.data.meta.components):[],s=t.data.meta?.state_groups?Object.values(t.data.meta.state_groups):[],a=c||e,r=n.find(e=>e.node_id===a),l=s.find(e=>e.node_id===a),d=r||l;if(!d||!d.code_connect_info?.codebase_context){i({usageExamples:[],repositoryUrl:null,loading:!1,error:null});return}let m=d.code_connect_info.codebase_context,h=m[0];if(0===m.length||!h||!h.usages||0===h.usages.length){i({usageExamples:[],repositoryUrl:null,loading:!1,error:null});return}let f=h.usages.map(e=>({relativePath:e.relative_path,sourceCode:e.source_code,interface:h.interface})),g=null;if(u.data&&p.data){let e=u.data.selectedRepositories[0];if(e&&e.owner){let t=p.data.repositories.find(t=>t.name===e.name&&t.owner===e.owner);t?.full_name&&(g=`https://github.com/${t.full_name}`)}}i({usageExamples:f,repositoryUrl:g,loading:!1,error:null})}catch(e){i({usageExamples:[],repositoryUrl:null,loading:!1,error:e instanceof Error?e:Error("Unknown error")})}})()},[e,t,o,u.data,p.data,c]),n}(e,t),u=s.useMemo(()=>{if(!e||!t||!n)return r;let i=function(e,t,n){let i=t.get(e);if(!i||"INSTANCE"!==i.type)return null;let s={},a={},r=n[e];if(!r||!r.backingSymbol)return{propertyValues:s,variantValues:a};let l=r.backingSymbol,o=[],d=[];try{o=(0,cf.hk)(l,[l],n),d=(0,cg.Jm)(l,n)}catch(e){console.warn("Could not fetch component props for backing symbol:",l,e)}if(r.assignments&&Object.entries(r.assignments).forEach(([e,t])=>{let n=o.find(t=>t.explicitDefID===e);if(n){let e="value"in t?t.value:null;s[n.name]=e}}),"INSTANCE"===i.type)try{let e=i.variantProperties();d.length>0?d.forEach(t=>{let n=e[t.name];void 0!==n&&(a[t.name]=String(n))}):Object.entries(e).forEach(([e,t])=>{void 0!==t&&(a[e]=String(t))})}catch(e){}return{propertyValues:s,variantValues:a}}(e,t,n);return i?r.map(e=>({example:e,score:function(e,t){if(!t)return 0;let n=0,i=e.sourceCode;return Object.entries(t.propertyValues).forEach(([e,t])=>{if(null==t)return;let s="string"==typeof t?t:JSON.stringify(t);!(s.length>50)&&[RegExp(`\\b${cx(e)}\\s*=\\s*{\\s*${cx(s)}\\s*}`,"i"),RegExp(`\\b${cx(e)}\\s*=\\s*["']${cx(s)}["']`,"i"),RegExp(`\\b${cx(e)}\\s*=\\s*{["']${cx(s)}["']}`,"i"),...!0===t||"true"===s?[RegExp(`\\b${cx(e)}\\b(?!\\s*=)`,"i")]:[]].some(e=>e.test(i))&&(n+=1)}),Object.entries(t.variantValues).forEach(([e,t])=>{t&&[RegExp(`\\b${cx(e)}\\s*=\\s*{\\s*["']${cx(t)}["']\\s*}`,"i"),RegExp(`\\b${cx(e)}\\s*=\\s*["']${cx(t)}["']`,"i")].some(e=>e.test(i))&&(n+=2)}),n}(e,i)})).sort((e,t)=>t.score-e.score).map(e=>e.example):r},[r,e,t,n]),[m,h]=s.useState(0),f=s.useRef(e);if(s.useEffect(()=>{f.current!==e&&(h(0),f.current=e)},[e]),!(0,l.kc)().dt_inspect_panel_usage_examples)return null;if(d||0===u.length)return(0,i.jsx)(e6.VZ,{title:(0,p.t)("dev_handoff.usage_examples.title"),collapsiblePanelKey:"usage_examples",recordingKey:"usage_examples_panel",children:(0,i.jsx)("div",{className:"usage_examples_panel--fixedHeightContainer--fsbCV",children:d?(0,i.jsx)(P.k,{}):(0,i.jsx)("div",{className:"usage_examples_panel--emptyState--uHJ3-",children:c?(0,p.t)("dev_handoff.usage_examples.error"):(0,p.t)("dev_handoff.usage_examples.no_examples")})})});let g=u[m]||u[0],x=function(e){let t=e.map(e=>{let t=e.relativePath.split("/");return t[t.length-1]||e.relativePath}),n=new Map;return t.map(e=>{let t=n.get(e)||0;return n.set(e,t+1),0===t?e:`${e} (${t})`})}(u),_={lines:g.sourceCode.split("\n").map(cw),name:g.relativePath,language:"tsx",pills:{}};return(0,i.jsx)(e6.VZ,{title:(0,p.t)("dev_handoff.usage_examples.title"),collapsiblePanelKey:"usage_examples",recordingKey:"usage_examples_panel",children:(0,i.jsxs)("div",{className:"usage_examples_panel--usageExamplesContainer--nVxPx",children:[(0,i.jsxs)("div",{className:"usage_examples_panel--dropdownRow--biFhi",children:[u.length>1?(0,i.jsx)("div",{className:"usage_examples_panel--dropdownWrapper--lQdXO",children:(0,i.jsxs)(cp.Root,{value:m,onChange:e=>h(e),children:[(0,i.jsx)(cp.Trigger,{label:(0,i.jsx)(oD.h,{children:x[m]||x[0]})}),(0,i.jsx)(cp.Container,{children:x.map((e,t)=>(0,i.jsx)(cp.Option,{value:t,children:e},t))})]})}):(0,i.jsx)("div",{}),o&&(0,i.jsx)("div",{className:"usage_examples_panel--githubButtonWrapper--3-rQ-",children:(0,i.jsx)(ck,{relativePath:g.relativePath,repositoryUrl:o})})]}),(0,i.jsx)("div",{className:"usage_examples_panel--codeScrollContainer--0JMOc",children:(0,i.jsx)(eX.yT,{code:[_],section:_,collapseLongSections:!1,copyAllActionEnabled:!1,hideHeader:!0,includeMargin:!0,type:"connected"})})]})})}function cT(){return(0,i.jsx)(g.tH,{boundaryKey:"Figmadoc",fallback:g.H4.NONE_I_KNOW_WHAT_IM_DOING,children:(0,i.jsx)(cu.Qd,{})})}function cS(){let{description:e}=oA(),t=s.useMemo(()=>e?(0,cd.$J)(e):void 0,[e]);return(0,i.jsx)(e6.VZ,{title:(0,p.t)("inspect_panel.component_information"),recordingKey:"componentPanel",collapsiblePanelKey:"info",collapsedHeaders:t?(0,i.jsx)(cc.G,{text:t}):void 0,children:(0,i.jsx)(oM,{})})}function cI(){return(0,lZ.ro)()?(0,i.jsx)(cS,{}):null}var cN=n(9058),cA=n(996741),cL=n(763286),cM=n(559185);let cO="typography_preview--measureContainer--D1G5R",cR="typography_preview--measure---sPO7",cP="typography_preview--dash--2HzKr",cD="typography_preview--value--v5BEy text--fontPos11--2LvXf text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa",cF=(0,ad.jz)(aE.WPY);function cz({fillContainer:e=!1}){let t=(0,j.uQ)(),n=(0,a.d4)(e=>e.mirror.selectionProperties.selectedFonts);return!t||!n||n?.fonts.length<1?null:(0,i.jsx)(e6.VZ,{hideHeader:!0,noPadding:!0,noBorder:!0,recordingKey:"typographyPreview",children:(0,i.jsx)(cB,{nodeId:t,containerClassName:e?"typography_preview--previewContainerFill--QUwgr":"typography_preview--previewContainerBoxed--yWT-0 typography_preview--previewContainer--zDKlk text--fontPos11--2LvXf text--_fontBase--QdLsd common--well--J0WtH",numberOfFonts:n.fonts.length})})}function cB({nodeId:e,containerClassName:t="typography_preview--previewContainerFullWidth--61D4v typography_preview--previewContainer--zDKlk text--fontPos11--2LvXf text--_fontBase--QdLsd common--sectionWithBottomSeparator--N54QE",numberOfFonts:n=1,localCodeLanguage:a}){let l=function(e){let t=(0,tP.DP)(),n=(0,rS.rL)()-32,[i,a]=s.useState({...cW,loading:!0}),{family:l,style:o}=(0,b.Fk)(t=>{let n=t.get(e),{family:i,style:s}=n?.fontName||{};return{family:i,style:s}}),d=s.useCallback(()=>{a(e=>({...e,imageLoading:!1}))},[]);return s.useEffect(()=>{let t=e=>{a(t=>{cK(t?.url);let n=!!e.url&&(t.fontFamily!==e.fontFamily||t.fontStyle!==e.fontStyle);return{...t,...e,imageLoading:n,loading:!1,error:!e.url&&e.error}})},n=()=>{t({...cW,url:void 0,error:!0})};(async()=>{if(!l||!o)return;if(r.vXe.fontsAreLoading()){let e=0;await new Promise((t,n)=>{let i=setInterval(()=>{r.vXe.fontsAreLoading()||(t(),clearInterval(i)),e>10&&n(),e++},100)})}if(!r.vXe.fontIsLoaded(l,o)){n();return}let i=r.w3z.getTypographyPreview(e);if(i&&i.thumbnail?.byteLength>0){let{thumbnail:e,...n}=i,s=URL.createObjectURL(new Blob([e]));t({...n,url:s})}else n()})().catch(()=>{n()})},[e,n,l,o,t]),s.useEffect(()=>()=>cK(i?.url),[i?.url]),{...i,onImageLoaded:d}}(e),{fontName:o,inheritedTextStyle:d}=(0,b.Fk)((e,t)=>{let n=e.get(t);return{fontName:n?.fontName,inheritedTextStyle:n?.inheritedTextStyle}},e);return(0,i.jsx)("div",{className:t,children:l.loading?(0,i.jsx)(cA.e,{}):(0,i.jsx)(cG,{data:l,font:o,styleId:d,numberOfFonts:n,localCodeLanguage:a})})}function cG({data:e,font:t,styleId:n,numberOfFonts:s,localCodeLanguage:a}){let r=(0,e3.qM)(a,e.lineHeightInPx,cH,{isTextProperty:!0}),l=(0,e3.qM)(a,e.fontSizeInPx,cH,{isTextProperty:!0}),o=e.textStyleNodeId||(0,cM.f$)(n),{styleName:d,styleDescription:c}=(0,b.wA)((e,t)=>{if(!t||0===t.length)return{};let n=t[0];if(!n)return{};let i=e.get(n);return{styleName:i?.name,styleDescription:i?.description}},[o]),u=(0,e4.Cj)(r),m=(0,e4.Cj)(l),h=(0,e4.Cj)(d),f=cF-16-((0,ar.fn)((0,ar.sH)(e.textStyleNodeId))||s>1?40:0),g=e.fullSize.y>f?e.fullSize.y/f:1,x=e.fullSize.y/g,_=e.fullSize.x/g,y=x+1,v=e.capPosition/g,C=e.baselinePosition/g,j=e.bottomPosition/g,k=`calc((100% - ${_}px) / 2)`,w=s>1?(0,i.jsx)("div",{className:"typography_preview--label--pJ-5L typography_preview--labelBase--mlEgn ellipsis--ellipsis--Tjyfa text--fontPos11--2LvXf text--_fontBase--QdLsd",children:(0,p.tx)("dev_handoff.typography_preview_multiple_styles")}):d?(0,i.jsx)(eZ.E,{className:"typography_preview--styleName--tA801 typography_preview--labelBase--mlEgn ellipsis--ellipsis--Tjyfa text--fontPos11--2LvXf text--_fontBase--QdLsd",onClick:h,"aria-label":(0,p.t)("inspect_panel.code.style"),htmlAttributes:{"data-tooltip-type":e5.Ib.TEXT,"data-tooltip":c,"data-tooltip-show-above":!0},children:d}):null;return(0,i.jsxs)("div",{className:eS()("typography_preview--previewHighlights--zrIw3",e.imageLoading?"typography_preview--hidden--pKo8l":"typography_preview--shown--6sBFE"),role:"img","aria-label":(0,p.t)("dev_handoff.layers_panel.typography_preview.aria_label"),children:[e.error?(0,i.jsx)(cV,{font:t}):(0,i.jsxs)("div",{className:"typography_preview--centredRow--3-Ofp",style:{marginTop:(f+16-y)/2,height:y},children:[(0,i.jsx)("div",{className:cO,style:{marginTop:v,marginBottom:x-j},children:(0,i.jsxs)("div",{className:eS()(cR,"typography_preview--left--wzNxs"),children:[(0,i.jsx)(eZ.E,{className:cD,onClick:m,"aria-label":l?(0,p.t)("inspect_panel.code.font_size_value",{value:l}):(0,p.t)("inspect_panel.code.font_size"),htmlAttributes:{"data-tooltip-type":e5.Ib.TEXT,"data-tooltip":(0,p.t)("inspect_panel.code.font_size"),"data-tooltip-show-above":!0},children:l}),(0,i.jsx)("div",{className:cP,"aria-hidden":!0})]})}),(0,i.jsxs)("div",{className:"typography_preview--measurementLines--U03DM",style:{width:_,height:x,left:k,right:k},"aria-hidden":!0,children:[(0,i.jsx)(cU,{position:v}),(0,i.jsx)(cU,{position:C}),(0,i.jsx)(cU,{position:j})]}),(0,i.jsx)(cL.J,{className:"typography_preview--borderedPreview--wYbvY",style:{width:_,height:x},src:e.url,onLoad:e.onImageLoaded,"aria-label":t?(0,p.t)("dev_handoff.typography_preview_aria_label",{fontFamily:t.family,fontStyle:t.style}):(0,p.t)("dev_handoff.typography_preview_empty_aria_label"),"data-tooltip-type":e5.Ib.TEXT,"data-tooltip":t?`${t.family} ${t.style}`:void 0,"data-tooltip-show-above":!0}),(0,i.jsx)("div",{className:cO,children:(0,i.jsxs)("div",{className:eS()(cR,"typography_preview--right--QhAIw"),children:[(0,i.jsx)(eZ.E,{className:cD,onClick:u,"aria-label":r?(0,p.t)("inspect_panel.typography.line_height_value",{value:r}):(0,p.t)("inspect_panel.typography.line_height"),htmlAttributes:{"data-tooltip-type":e5.Ib.TEXT,"data-tooltip":(0,p.t)("inspect_panel.typography.line_height"),"data-tooltip-show-above":!0},children:r}),(0,i.jsx)("div",{className:cP,"aria-hidden":!0})]})})]}),w]})}function cU({position:e}){return(0,i.jsx)("div",{className:"typography_preview--measurementLine---lBL5",style:{top:e}})}function cV({font:e}){let t=e?.family,n=e?.style??"",s=t&&!r.vXe.fontIsLoaded(t,n)&&t?(0,p.t)("dev_handoff.typography_preview_missing_font",{fontFamily:t,fontStyle:n}):void 0;return(0,i.jsx)("div",{className:"typography_preview--previewError--Kwn7m",children:(0,i.jsx)("span",{"data-tooltip-type":e5.Ib.TEXT,"data-tooltip":s,children:(0,p.tx)("dev_handoff.typography_preview_not_available")})})}let cH=e=>e.toLocaleString("en",{maximumFractionDigits:3,useGrouping:!1}),cK=e=>{e&&URL.revokeObjectURL(e)},cW={url:void 0,fullSize:{x:0,y:0},capPosition:0,baselinePosition:0,bottomPosition:0,fontSizeInPx:0,lineHeightInPx:0,fontFamily:"",fontStyle:"",textStyleNodeId:""};function cq({fillContainer:e=!1}){return!function(){let e=(0,j.uQ)();return(0,b.Fk)((e,t)=>e?.get(t??"")?.type==="TEXT",e)}()?(0,i.jsx)(tf,{fillContainer:e}):(0,i.jsx)(cz,{fillContainer:e})}var cX=n(989941),cY=n(550012),cZ=n(237677),cJ=n(453026),cQ=n(643651),c$=n(171971),c0=n(633065),c1=n(997477),c2=n(719097),c3=n(368041),c5=n(311654);let c4=(0,iz.Fu)("dev_mode_seen_mcp_copy_nudge"),c6=(0,iz.Fu)("seen_mcp_blocking_modal");function c7({containerRef:e,onTry:t,setupClicked:n}){let a=(0,o.md)(c4),r=(0,o.md)(c6),l=(0,o.md)(c5.zS),d=(0,c3.nM)(),c=(0,iF.Lb)(),{show:u,isShowing:m,complete:h}=(0,ih.e)({overlay:iC.hDR,priority:ix.N.DEFAULT_MODAL},[a,r]);s.useEffect(()=>{m&&n&&h()},[h,m,n]),s.useEffect(()=>{u({canShow:(e,t)=>d&&!n&&!e&&l>=c5.dM&&(!t||t.createdAt.getTime()<Date.now()-1728e5),onShow:()=>e?.current?.scrollIntoView({behavior:"smooth",block:"nearest"})})},[l,e,d,u,n]),s.useEffect(()=>{m&&c("mcp.copy_nudge.shown")},[m,c]);let f=s.useCallback(()=>{h(),c("mcp.copy_nudge.tryit"),t()},[h,t,c]),g=s.useCallback(()=>{h(),c("mcp.copy_nudge.cancel")},[h,c]);return(0,i.jsx)(iy.rq,{arrowPosition:r5.F_.RIGHT_BODY,description:(0,p.tx)("dev_handoff.mcp.copy_nudge_body"),isShowing:m,media:(0,i.jsx)(sq.oW,{src:(0,H.ck)("6b8d976f4809f5830a91df9d66feb69776c7f6f1"),alt:(0,p.t)("dev_handoff.mcp.copy_nudge_img_alt"),width:240,height:135}),onClose:g,pointToLeftEdge:!0,primaryCta:{label:(0,p.tx)("dev_handoff.mcp.copy_nudge_cta"),onClick:f,type:"button",ctaTrackingDescriptor:W.c.TRY_IT},targetKey:"enable-mcp-button-container",title:(0,p.tx)("dev_handoff.mcp.copy_nudge_title"),trackingContextName:"McpCopyNudge",userFlagOnShow:"dev_mode_seen_mcp_copy_nudge"})}var c8=n(544373);n(120440);var c9=n(352630);function ue(){let e=(0,c0.y3)(),t=(0,iz.r1)(e?"dev_mode_mcp_has_seen_mcp_enable_button_callout":"dev_mode_mcp_has_seen_mcp_enable_button_callout_browser"),n=(0,o.md)(t),i=e?iC.ma5:iC.W_3,{show:s,isShowing:a,complete:r,uniqueId:l}=(0,ih.e)({overlay:i,priority:ix.N.SECONDARY_MODAL},[n]),{manager:d,getTriggerProps:c}=c8.gR({isOpen:a,onOpenChange:e=>!e&&r(),placement:"left-start"});return{show:s,complete:r,isShowing:a,uniqueId:l,manager:d,getTriggerProps:c}}function ut(e){let t=(0,E._I)(),n=(0,c0.y3)(),s=(0,ia.f)("dev_mode_has_enabled_mcp_server"),a=t&&!(n&&s);return(0,im.E)(e.uniqueId,"variables_table.opened",()=>{e.isShowing&&e.complete()}),(0,y.h)(()=>{a&&e.show()}),(0,i.jsx)(c8.bL,{manager:e.manager,variant:"primary",children:(0,i.jsx)(S.fu,{name:"McpEnableUpsell",children:(0,i.jsxs)(iM.Wk,{className:"x1cvmir6",children:[(0,i.jsx)(c8.Y9,{children:(0,i.jsx)(iM.hE,{autofocus:!0,children:(0,p.tx)("dev_handoff.mcp.upsell_title")})}),(0,i.jsxs)(iM.nB,{padding:0,children:[(0,i.jsx)(i_.y,{src:(0,H.ck)("4bb5e2f4e74df0311d4dc6bd30129f787542af57"),alt:"Animation showing MCP server functionality",aspectRatio:16/9}),(0,i.jsx)("div",{className:"x8rdmch xctkrei x1w4f5ud x1vamu9a",children:(0,p.tx)("dev_handoff.mcp.upsell_description")})]}),(0,i.jsx)(c8.wi,{children:(0,i.jsx)(iM.jk,{children:(0,i.jsx)(c9.$z,{variant:"primary",onClick:e.complete,trackingProperties:{trackingDescriptor:W.c.GOT_IT},children:(0,p.tx)("dev_handoff.mcp.upsell_confirmation")})})})]})})})}function un(){return(0,i.jsxs)("svg",{width:16,height:16,viewBox:"0 0 180 180",fill:"none",children:[(0,i.jsxs)("g",{clipPath:"url(#clip0_19_13)",children:[(0,i.jsx)("path",{d:"M18 84.8528L85.8822 16.9706C95.2548 7.59798 110.451 7.59798 119.823 16.9706V16.9706C129.196 26.3431 129.196 41.5391 119.823 50.9117L68.5581 102.177",style:{stroke:"var(--color-icon)"},strokeWidth:"12",strokeLinecap:"round"}),(0,i.jsx)("path",{d:"M69.2652 101.47L119.823 50.9117C129.196 41.5391 144.392 41.5391 153.765 50.9117L154.118 51.2652C163.491 60.6378 163.491 75.8338 154.118 85.2063L92.7248 146.6C89.6006 149.724 89.6006 154.789 92.7248 157.913L105.331 170.52",style:{stroke:"var(--color-icon)"},strokeWidth:"12",strokeLinecap:"round"}),(0,i.jsx)("path",{d:"M102.853 33.9411L52.6482 84.1457C43.2756 93.5183 43.2756 108.714 52.6482 118.087V118.087C62.0208 127.459 77.2167 127.459 86.5893 118.087L136.794 67.8822",style:{stroke:"var(--color-icon)"},strokeWidth:"12",strokeLinecap:"round"})]}),(0,i.jsx)("defs",{children:(0,i.jsx)("clipPath",{id:"clip0_19_13",children:(0,i.jsx)("rect",{width:"180",height:"180",fill:"white"})})})]})}var ui=n(536358);let us="mcp_panel--container--l5vzW text--fontPos11--2LvXf text--_fontBase--QdLsd",ua="mcp_panel--settingRow--cDyRD",ur="mcp_panel--settingLabel--evanf",ul="mcp_panel--settingsContainer--8E7WY",uo="mcp_panel--headerContent--DnihT",ud="mcp_panel--bannerDescription--80ohH",uc="mcp_panel--helpModalTitle--V-2qE",uu="mcp_panel--helpModalDescription--GeCZc",up="mcp_panel--examplePromptLink--00t5c ellipsis--ellipsis--Tjyfa",um="https://form.asana.com/?k=jMdFq_1SBUOyh8_k3q76QA&d=10497086658021";function uh(){let e=(0,l.kc)().dt_mcp_remove_beta_tags?(0,p.tx)("dev_handoff.mcp.give_feedback"):(0,p.tx)("dev_handoff.mcp.beta_feedback");return(0,i.jsx)(iq.N,{trusted:!0,newTab:!0,href:um,"data-tooltip-show-above":!0,"data-tooltip-type":e5.Ib.TEXT,"data-tooltip":(0,p.t)("dev_handoff.mcp.beta_feedback_tooltip"),onClick:e=>e.stopPropagation(),children:(0,i.jsxs)("div",{className:"mcp_panel--betaFeedbackButton--RzKNW",children:[(0,i.jsx)("div",{className:"mcp_panel--betaFeedbackIcon--KyMbo",children:(0,i.jsx)(iY.S,{})}),(0,i.jsx)("span",{children:e})]})})}var uf=n(77789),ug=n(662376),ux=n(7720),u_=n(203357);function uy({visualType:e,recordingKey:t,onClick:n}){let r=(0,c3.iY)(e),l=(0,a.wA)(),o=(0,iF.am)(),d=(0,c0.y3)()?"desktop":"web",c=s.useCallback(()=>{l(n3.b({mcp_visual_non_selection_dismissed:!0})),o("dev_mode.mcp_visual_non_selection_dismissed",{platform:d})},[l,o,d]),u=s.useCallback(()=>{o("dev_mode.mcp_visual_non_selection_set_up",{platform:d}),n()},[o,n,d]);return((0,u_.h)(()=>{o("dev_mode.mcp_visual_non_selection_upsell_shown",{platform:d})}),r)?(0,i.jsxs)(e6.VZ,{title:r.title,recordingKey:t,additionalHeaders:(0,i.jsx)(iO.K,{"aria-label":(0,p.t)("common.close"),onClick:c,children:(0,i.jsx)(ug.A,{})}),noActionControlsPadding:!0,children:[(0,i.jsx)(sq.oW,{src:(0,H.ck)(r.assetPath),alt:r.altText,width:320,height:206}),(0,i.jsx)("div",{className:"mcp_set_up_panel_with_visual--description--W-3Xb",children:r.description}),(0,i.jsx)("div",{className:"mcp_set_up_panel_with_visual--setUpButton--5u1Ly",children:(0,i.jsx)(nn.IK,{variant:"primary",onClick:u,htmlAttributes:{"data-testid":"set_up_figma_mcp_button"},children:(0,i.jsxs)("div",{className:"mcp_set_up_panel_with_visual--setUpButtonContainer--Vi3Dz",children:[(0,i.jsx)(ux.K,{"aria-hidden":!0,className:"mcp_set_up_panel_with_visual--icon---AoaF"}),(0,p.t)("dev_handoff.mcp.set_up_figma_mcp")]})})})]}):null}var uv=n(733200),ub=n(246144);let uC=(0,H.Gz)();function uj({clients:e}){let t=Array.from(new Set(e.map(e=>e.clientName))).join(", ");return(0,i.jsx)("div",{className:"mcp_oauth_clients_panel--clientsList--9sL-W",title:t,children:t})}function uk(){return(0,l.kc)().dt_mcp_remove_beta_tags?null:(0,i.jsx)("div",{className:"mcp_oauth_clients_panel--betaBadge--PjbaT",children:(0,i.jsx)(r$.E,{variant:"inactiveOutline",size:"md",children:(0,p.t)("dev_handoff.mcp.beta")})})}function uw(){return(0,i.jsx)("div",{className:"mcp_oauth_clients_panel--headerContent--r0cmL",children:(0,i.jsx)(iq.N,{trusted:!0,newTab:!0,href:uC,children:(0,i.jsx)(cZ.V,{})})})}function uE(){let e=(0,a.wA)(),{getTriggerProps:t,...n}=ue(),r=s.useRef(null),[l,o]=s.useState(!1),d=(0,ia.f)("mcp_visual_non_selection_dismissed"),c=(0,c3.ND)(),u=s.useCallback(()=>{o(!0),e((0,lc.to)({type:uf.nq}))},[e]);return c===c3.qd.None||d?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(e6.VZ,{title:(0,p.t)("dev_handoff.mcp.panel_title"),recordingKey:"mcp",collapsiblePanelKey:"mcp",collapsedHeaders:(0,i.jsx)(i.Fragment,{}),additionalHeaders:(0,i.jsx)(uw,{}),headerRef:r,titleAccessory:(0,i.jsx)(uk,{}),children:[(0,i.jsx)(ut,{...n}),(0,i.jsx)("div",{className:"mcp_oauth_clients_panel--mcpContainer--8sww7 text--fontPos11--2LvXf text--_fontBase--QdLsd",children:(0,i.jsx)("p",{children:(0,p.tx)("dev_handoff.mcp.setup_client_description",{learnMoreLink:(0,i.jsx)("span",{className:"mcp_oauth_clients_panel--bannerLink--zpfnO",children:(0,i.jsx)(iq.N,{trusted:!0,newTab:!0,href:uC,children:(0,p.t)("dev_handoff.mcp.learn_more")})})})})}),(0,i.jsx)("div",{className:"mcp_oauth_clients_panel--newUserContainer--9wOfC","data-onboarding-key":"enable-mcp-button-container",children:(0,i.jsx)(nn.IK,{variant:"secondary",onClick:u,recordingKey:"setupMcpClient","aria-label":(0,p.t)("dev_handoff.mcp.setup_client_button"),htmlAttributes:{"data-onboarding-key":"enable-mcp-button","data-testid":"setup-mcp-client-button"},...t(),children:(0,i.jsxs)("div",{className:"mcp_oauth_clients_panel--newUserButtonContainer--FaU-d",children:[(0,i.jsx)(un,{}),(0,p.t)("dev_handoff.mcp.setup_client_button")]})})})]}),(0,i.jsx)(c7,{containerRef:r,onTry:u,setupClicked:l})]}):(0,i.jsx)(uy,{visualType:c,recordingKey:"visualMcpUpsellBrowser",onClick:u})}function uT(){let{clients:e}=function(){let e=(0,B.Rs)((0,q.JZp)({}));if("loading"===e.status)return{clients:[]};if("errors"===e.status)return(0,ub.x1)("MCP OAuth Clients","LiveGraph query failed",{errors:e.errors}),{clients:[]};let t=e.data,n=(0,uv.oA)(t.oauthConnection);return n&&0!==n.length?{clients:n.filter(e=>e.scope?.includes("mcp:connect")).map(e=>{let t="Unknown Client";return e.oauthApp?.approvedOauthAppVersion?.name?t=e.oauthApp.approvedOauthAppVersion.name:e.oauthApp?.draftOauthAppVersion?.name?t=e.oauthApp.draftOauthAppVersion.name:e.dynamicOauthClient?.name&&(t=e.dynamicOauthClient.name),{clientName:t}})}:{clients:[]}}(),t=(0,a.wA)();return 0===e.length?(0,i.jsx)(uE,{}):(0,i.jsx)(e6.VZ,{title:(0,p.t)("dev_handoff.mcp.panel_title"),recordingKey:"mcp",collapsiblePanelKey:"mcp",collapsedHeaders:(0,i.jsx)(i.Fragment,{}),additionalHeaders:(0,i.jsx)(uw,{}),titleAccessory:(0,i.jsx)(uk,{}),children:(0,i.jsxs)("div",{className:"mcp_oauth_clients_panel--content--RcxMP",children:[(0,i.jsxs)("div",{className:"mcp_oauth_clients_panel--clientsRow---ziiw",children:[(0,i.jsx)("div",{className:"mcp_oauth_clients_panel--sectionTitle--qcrFV",children:(0,p.t)("mcp.oauth_clients.clients")}),(0,i.jsx)("div",{className:"mcp_oauth_clients_panel--clientsSection--hqmJJ",children:(0,i.jsx)(uj,{clients:e})}),(0,i.jsx)("div",{className:"mcp_oauth_clients_panel--addButton--BLxi5",children:(0,i.jsx)(iO.K,{onClick:()=>{t((0,lc.to)({type:uf.nq}))},"aria-label":(0,p.t)("dev_handoff.mcp.setup_client_button"),children:(0,i.jsx)(ui.e,{})})})]}),(0,i.jsx)("div",{className:"mcp_oauth_clients_panel--footer--ergOQ",children:(0,i.jsx)(uh,{})})]})})}let uS=(0,H.Gz)();function uI(){let e=(0,ax.J2)((0,I.UK)().enableCodegenMcpServer);return(0,i.jsx)(r$.E,{variant:e?"successOutline":"inactiveOutline",size:"md",children:e?(0,p.t)("dev_handoff.mcp.enabled"):(0,p.t)("dev_handoff.mcp.disabled")})}function uN(){return(0,l.kc)().dt_mcp_remove_beta_tags?null:(0,i.jsx)("div",{className:"mcp_panel--badgeContainer--iqiyq",children:(0,i.jsx)(r$.E,{variant:"inactiveOutline",size:"md",children:(0,p.t)("dev_handoff.mcp.beta")})})}function uA(){let e=(0,l.kc)();return e.mcp_remote_server||e.pixie_mcp_remote_user_alpha?(0,i.jsx)(uT,{}):(0,i.jsx)(uL,{})}function uL(){return(0,i.jsx)(e6.VZ,{title:(0,p.t)("dev_handoff.mcp.panel_title"),recordingKey:"mcp",collapsiblePanelKey:"mcp",defaultCollapsed:!0,children:(0,i.jsx)("div",{className:us,children:(0,i.jsx)("p",{children:(0,p.tx)("dev_handoff.mcp.requires_desktop_app_2",{learnMoreLink:(0,i.jsx)(iq.N,{trusted:!0,newTab:!0,href:uS,children:(0,p.tx)("dev_handoff.mcp.learn_more")})})})})})}function uM(){let e=(0,c3.vQ)(),t=(0,ax.J2)((0,I.UK)().enableCodegenMcpServer),n=(0,j.Tv)().length>0,a=(0,ia.f)("remote_mcp_onboarded"),l=(0,ia.f)("mcp_visual_non_selection_dismissed"),o=(0,c3.ND)(),{getTriggerProps:d,...c}=ue(),u=s.useRef(null),[m,h]=s.useState(!1),f=()=>{h(!0),af.Y5.triggerActionEnum(r.rcl.TOGGLE_ENABLE_CODGEN_MCP_SERVER)};return e?t?null:o===c3.qd.None||l?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(e6.VZ,{title:(0,p.t)("dev_handoff.mcp.panel_title"),recordingKey:"disabledMcp",collapsiblePanelKey:"mcp",collapsedHeaders:(0,i.jsx)(uI,{}),headerRef:u,titleAccessory:(0,i.jsx)(uN,{}),children:[(0,i.jsx)(ut,{...c}),(0,i.jsxs)("div",{className:"mcp_panel--newUserContainer--w34Q3",children:[(0,i.jsx)("div",{className:ud,children:(0,p.t)("dev_handoff.mcp.new_user_banner_description")}),(0,i.jsx)("div",{className:"mcp_panel--setupLocalButtonContainer--OwWWj","data-onboarding-key":"enable-mcp-button-container",children:(0,i.jsx)(nn.IK,{variant:"secondary",onClick:f,recordingKey:"newUserEnableMcp","aria-label":(0,p.t)("dev_handoff.mcp.enable_button"),htmlAttributes:{"data-onboarding-key":"enable-mcp-button"},...d(),children:(0,i.jsxs)("div",{className:"mcp_panel--newUserButtonContainer--F96sM",children:[(0,i.jsx)(un,{}),(0,p.tx)("dev_handoff.mcp.enable_button")]})})})]})]}),(0,i.jsx)(c7,{containerRef:u,onTry:f,setupClicked:m})]}):(0,i.jsx)(uy,{visualType:o,recordingKey:"visualMcpUpsellDesktop",onClick:f}):!n||(0,c0.y3)()||a?null:(0,i.jsx)(uE,{})}function uO(){let e=(0,c$.$k)(),t=(0,ax.J2)((0,I.UK)().enableCodegenMcpServer),n=(0,c1.gP)("dt_mcp_eligible_for_new_ui_date").get("date",null),s=(0,o.md)(c2.mp),a=!!n&&!!s&&new Date(n)<=new Date(s);return e?null:(0,c0.y3)()?c0.eD?.hasFeature("addCodegenMCPStartupBinding")?t?(0,i.jsx)(e6.VZ,{title:(0,p.t)("dev_handoff.mcp.panel_title"),recordingKey:"mcp",collapsiblePanelKey:"mcp",collapsedHeaders:(0,i.jsx)(uI,{}),additionalHeaders:(0,i.jsx)(uB,{}),titleAccessory:(0,i.jsx)(uN,{}),children:(0,i.jsx)("div",{className:us,children:(0,i.jsxs)("div",{className:ul,children:[a&&(0,i.jsx)(uD,{}),(0,i.jsx)(uF,{}),(0,i.jsx)(uP,{}),(0,i.jsx)(uR,{}),(0,i.jsx)(uh,{})]})})}):(0,i.jsx)(uM,{}):null:(0,i.jsx)(uA,{})}function uR(){let e="internal-path-for-image-writes-to-disk",[t,n]=(0,o.fp)(cJ.f),s=(0,o.md)(cJ.pe);return(0,c$.As)()&&(0,l.kc)().dt_my_cool_plugin_internal&&"write-to-disk"===s?(0,i.jsxs)("div",{className:ua,children:[(0,i.jsx)(oD.J,{className:ur,htmlFor:e,children:(0,p.tx)("dev_handoff.mcp.image_source.write_to_disk_path")}),(0,i.jsx)(oF.p,{id:e,value:t,onChange:n})]}):null}function uP(){let e="image-source",[t,n]=(0,o.fp)(cJ.pe),[s,a]=(0,o.fp)(cJ.Pq);return c0.eD?.hasFeature("addMcpImageSupport")?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:ua,children:[(0,i.jsx)(oD.J,{className:ur,htmlFor:e,children:(0,p.tx)("dev_handoff.mcp.image_source")}),(0,i.jsxs)(cp.Root,{value:t,onChange:e=>n(e),children:[(0,i.jsx)(cp.ManuallyLabeledTrigger,{id:e}),(0,i.jsxs)(cp.Container,{children:[(0,i.jsx)(cp.Option,{value:"local",children:(0,p.tx)("dev_handoff.mcp.image_source.local")}),(0,i.jsx)(cp.Option,{value:"placeholder-svg",children:(0,p.tx)("dev_handoff.mcp.image_source.placeholder")}),(0,c$.As)()&&(0,i.jsx)(cp.Option,{value:"write-to-disk",children:(0,p.tx)("dev_handoff.mcp.image_source.write_to_disk")})]})]})]}),"write-to-disk"===o.zl.get(cJ.pe)&&(0,i.jsx)("div",{className:ua,children:(0,i.jsx)(cX.S,{checked:!s,onChange:()=>a(e=>!e),label:(0,i.jsx)(oD.J,{children:(0,p.t)("fullscreen_actions.mcp-allow-overwriting-files")})})})]}):null}function uD(){let e=(0,ia.f)("dev_mode_mcp_has_dismissed_client_setup_banner"),t=(0,ia.f)("dev_mode_mcp_has_used_a_tool"),n=(0,ia.f)("remote_mcp_onboarded"),s=(0,a.wA)();return e||t||n?null:(0,i.jsx)("div",{className:ua,children:(0,i.jsx)(rL.cV,{variant:"default",onDismiss:()=>s(n3.b({dev_mode_mcp_has_dismissed_client_setup_banner:!0})),children:(0,i.jsx)(rM.Q,{title:(0,p.t)("dev_handoff.mcp.find_instructions_title"),children:(0,i.jsx)("span",{className:ud,children:(0,p.tx)("dev_handoff.mcp.find_instructions_sub_title",{hereWithHyperlink:(0,i.jsx)("button",{className:"mcp_panel--bannerLink--hSoWc",onClick:()=>{s((0,lc.to)({type:uf.nq}))},style:{background:"none",border:"none",padding:0,textDecoration:"underline",cursor:"pointer",color:"inherit"},children:(0,p.tx)("dev_handoff.mcp.find_instructions_sub_title_here")})})})})})})}function uF(){let e=(0,ax.J2)((0,I.UK)().enableCodegenMcpServer);return(0,i.jsxs)("div",{className:ua,children:[(0,i.jsx)(oD.J,{className:ur,children:(0,p.tx)("dev_handoff.mcp.status")}),(0,i.jsxs)("div",{"data-tooltip":(0,p.t)("dev_handoff.mcp.to_disable_tooltip"),"data-tooltip-type":e5.Ib.TEXT,className:"mcp_panel--statusDisplay--SL0ss",children:[(0,i.jsx)("div",{className:"mcp_panel--statusIcon--9wmDn",style:{backgroundColor:e?"var(--color-icon-handoff)":"var(--color-icon-tertiary)"}}),(0,i.jsx)("span",{children:e?(0,p.t)("dev_handoff.mcp.enabled"):(0,p.t)("dev_handoff.mcp.disabled")})]})]})}function uz(){let{getTriggerProps:e,manager:t}=r0.b(),[n,a]=(0,o.fp)(cJ.tz),[r,d]=(0,o.fp)(cJ.pe),[c,u]=(0,o.fp)(cJ.Pq),[m,h]=(0,o.fp)(cJ.cP),f=(0,cQ.Fc)(),g=(0,ax.J2)((0,I.UK)().enableCodegenMcpServer),x=[{visible:!0,element:(0,i.jsx)(r0.hE,{children:(0,p.tx)("dev_handoff.mcp.settings")})},{visible:f,element:(0,i.jsx)(cY.H_,{checked:n,onChange:a,children:(0,p.tx)("fullscreen_actions.mcp-enable-code-connect")})},{visible:!!(c0.eD?.hasFeature("addMcpImageSupport")&&"write-to-disk"===r),element:(0,i.jsx)(cY.H_,{checked:!c,onChange:()=>u(e=>!e),children:(0,p.t)("fullscreen_actions.mcp-allow-overwriting-files")})},{visible:!!(0,l.kc)().dt_mcp_enable_in_context_mapping,element:(0,i.jsx)(cY.H_,{checked:!!m,onChange:()=>h(e=>!e),children:(0,p.t)("mcp.panel.allow_in_context_code_connect")})},{visible:!0,element:(0,i.jsx)(r0.wv,{})},{visible:g,element:(0,i.jsx)(r0.q7,{onClick:()=>{af.Y5.triggerAction("toggle-enable-codegen-mcp-server")},children:g?(0,p.t)("dev_handoff.mcp.disable_option"):(0,p.t)("dev_handoff.mcp.enable_button")})}].filter(e=>e.visible);return 0===x.length?null:(0,i.jsxs)(r0.bL,{manager:t,children:[(0,i.jsx)(iO.K,{...e(),"aria-label":(0,p.t)("dev_handoff.mcp.configure"),children:(0,i.jsx)(r1.J,{})}),(0,i.jsx)(r0.mc,{children:x.map((e,t)=>(0,i.jsx)(s.Fragment,{children:e.element},t))})]})}function uB(){return(0,i.jsxs)("div",{className:uo,children:[(0,i.jsx)(on._,{href:uS,children:(0,i.jsx)(cZ.V,{})}),(0,i.jsx)(uz,{})]})}var uG=n(353323),uU=n(454851),uV=n(234191),uH=n(101441),uK=n(833737),uW=n(385446),uq=n.n(uW),uX=n(236158);function uY({noBorder:e}){let t=(0,c$.$k)(),n=(0,ia.f)("remote_mcp_onboarded"),s=(0,ax.J2)((0,I.UK)().enableCodegenMcpServer),a=(0,c3.XR)(),r=(0,c3.$q)(),l=(0,A.q5)();if(t)return null;let o=!0;return n||(a||(o=!1),s||(o=!1)),(0,i.jsxs)(i.Fragment,{children:[o?(0,i.jsx)(e6.VZ,{title:(0,p.t)("dev_handoff.mcp.panel_title"),recordingKey:"mcp_selection_panel",collapsiblePanelKey:"mcp_selection_panel",collapsedHeaders:(n?a&&s:a)?(0,i.jsx)(uI,{}):(0,i.jsx)(i.Fragment,{}),additionalHeaders:(0,i.jsx)(u0,{}),titleAccessory:(0,i.jsx)(uN,{}),noBorder:e,children:(0,i.jsxs)("div",{className:us,children:[(0,i.jsxs)("div",{className:ul,children:[(0,i.jsx)(u1,{}),(0,i.jsx)(u2,{})]}),r&&!!l&&(0,i.jsx)(u3,{openFile:l})]})}):(0,i.jsx)(uM,{}),(0,i.jsx)(u$,{})]})}function uZ(){let[e,t]=(0,s.useState)(!1),n=(0,s.useRef)({right:0,top:0}),a=(0,rS.lz)();return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(uU.d,{"aria-label":(0,p.t)("dev_handoff.mcp.panel.help_button_aria_label"),"aria-expanded":e,onClick:function(i){let{y:s}=i.currentTarget.getBoundingClientRect();n.current={right:a+4,top:s-10},t(!e)},children:(0,i.jsx)(cZ.V,{})}),e&&(0,i.jsx)(dC.bL,{width:"sm",onClose:()=>t(!1),defaultPosition:n.current,children:(0,i.jsxs)(iM.vo,{children:[(0,i.jsx)(iM.Y9,{children:(0,i.jsx)(iM.hE,{children:(0,p.t)("dev_handoff.mcp.panel.help_modal.title")})}),(0,i.jsxs)(iM.nB,{children:[(0,i.jsxs)("div",{className:"mcp_panel--helpModalContent--QvliI",children:[(0,i.jsx)("div",{className:uc,children:(0,p.t)("dev_handoff.mcp.panel.help_modal.session_activity_label")}),(0,i.jsx)("div",{className:uu,children:(0,p.t)("dev_handoff.mcp.panel.help_modal.session_activity_description")}),(0,i.jsx)("div",{className:uc,children:(0,p.t)("dev_handoff.mcp.panel.help_modal.estimated_tokens_label")}),(0,i.jsx)("div",{className:uu,children:(0,p.t)("dev_handoff.mcp.panel.help_modal.estimated_tokens_description")})]}),(0,i.jsx)(iq.N.Button,{variant:"secondary",width:"fill",newTab:!0,trusted:!0,href:"https://help.figma.com/hc/articles/32132100833559-Guide-to-the-Dev-Mode-MCP-Server#h_01K25F7RCDRH0C6M004GG3KMB7",children:(0,i.jsxs)("span",{className:"mcp_panel--helpModalButtonContent--bdJ7L",children:[(0,i.jsx)(cZ.V,{}),(0,i.jsx)("span",{children:(0,p.t)("dev_handoff.mcp.panel.help_modal.help_center_button")})]})})]})]})})]})}let uJ=(0,o.eU)(null);function uQ(){let[e,t]=(0,o.fp)(uJ),n=(0,rS.lz)();return(0,c0.y3)()?(0,i.jsx)(uU.d,{"aria-label":(0,p.t)("dev_handoff.mcp.panel.settings_button_aria_label"),"aria-expanded":null!==e,onClick:function(e){let{y:i}=e.currentTarget.getBoundingClientRect();t({right:n+4,top:i-10})},children:(0,i.jsx)(uH.P,{})}):null}function u$(){let[e,t]=(0,o.fp)(uJ),n=(0,ax.J2)((0,I.UK)().enableCodegenMcpServer),s=(0,l.kc)().dt_mcp_remove_beta_tags?(0,p.t)("dev_handoff.mcp.give_feedback"):(0,p.t)("dev_handoff.mcp.beta_feedback");return e&&(0,i.jsx)(dC.bL,{onClose:()=>t(null),defaultPosition:e,children:(0,i.jsxs)(iM.vo,{children:[(0,i.jsx)(iM.Y9,{children:(0,i.jsx)(iM.hE,{children:(0,p.t)("dev_handoff.mcp.panel.desktop_mcp_settings_modal.title")})}),(0,i.jsxs)(iM.nB,{children:[(0,i.jsxs)("div",{className:"mcp_panel--settingModalContent--yG8b8",children:[(0,i.jsxs)("div",{className:ua,children:[(0,i.jsx)(oD.J,{className:ur,htmlFor:"mcp-selection-panel-server-status",children:(0,p.t)("dev_handoff.mcp.panel.settings_modal.server_status")}),(0,i.jsx)("div",{children:(0,i.jsx)(uV.v,{id:"mcp-selection-panel-server-status",checked:n,onChange:()=>af.Y5.triggerAction("toggle-enable-codegen-mcp-server")})})]}),(0,i.jsx)(uP,{})]}),(0,i.jsx)(iq.N.Button,{variant:"secondary",width:"fill",href:um,newTab:!0,children:(0,i.jsxs)("span",{className:"mcp_panel--settingsModalButtonContent--ncRHd",children:[(0,i.jsx)(iY.S,{}),(0,i.jsx)("span",{children:s})]})})]})]})})}function u0(){return(0,i.jsxs)("div",{className:uo,children:[(0,i.jsx)(uZ,{}),(0,i.jsx)(uQ,{})]})}function u1(){let e;let t=(0,lp.Td)(),n=(0,j.Tv)(),s=(0,uX.V)(n),a=(0,o.md)(uX.B),r=(0,B.Rs)((0,q.zR7)({fileKey:t||"",nodeIds:s}),{enabled:!!t&&n.length>0}).unwrapOr(null),l=r?.mcpRemoteActivity.status==="loaded"?r?.mcpRemoteActivity.data:null,d=n.length>0&&t?a[t]?.[s]:null,c=l?.activityStatus==="STARTED"?"pending":l?.updatedAt||null;return e=d&&c?"pending"===d?d:"pending"===c?c:d>c?d:c:d||c,(0,i.jsxs)("div",{className:ua,children:[(0,i.jsx)(oD.J,{className:ur,children:(0,p.t)("dev_handoff.mcp.panel.session_activity_label")}),(0,i.jsx)("div",{className:"mcp_panel--settingsSessionActivityValue--Jz7oH",children:e?"pending"===e?(0,p.t)("dev_handoff.mcp.panel.session_activity_sending"):(0,p.tx)("dev_handoff.mcp.panel.session_activity_from_now",{timeFromNow:(0,i.jsx)(r2.h1,{date:e})}):(0,p.t)("dev_handoff.mcp.panel.session_activity_not_sent")})]})}function u2(){let e=(0,j.Tv)(),t=(0,s.useDeferredValue)(e),n=!uq()(e,t),a=(0,b.Fk)((e,t)=>{let n=0;return t.forEach(t=>{let i=e.get(t);i&&(n+=(0,uG.$w)(i))}),(0,uG.Z)(n)},t);return(0,i.jsxs)("div",{className:ua,children:[(0,i.jsx)(oD.J,{className:ur,children:(0,p.t)("dev_handoff.mcp.panel.context_size_label")}),(0,i.jsxs)("div",{className:eS()("mcp_panel--settingsContextSizeValue--s6ve0",n&&"mcp_panel--isStale--u-GdZ"),children:[(0,i.jsx)("span",{children:(0,l6.$M)(a)})," ",a>uG.E4&&(0,i.jsx)("span",{"data-tooltip-type":e5.Ib.TEXT,"data-tooltip":(0,l.kc)().dt_mcp_get_code_returns_metadata?(0,p.t)("dev_handoff.mcp.panel.context_size_swap_warning"):(0,p.t)("dev_handoff.mcp.panel.context_size_warning"),children:(0,i.jsx)(uK.R,{})})]})]})}function u3({openFile:e}){let t=(0,j.Tv)(),n=s.useMemo(()=>t.map(t=>`@${(0,ns.jN)({file:e,nodeId:t,isDevHandoff:!0,isReadOnly:!0,isFigJam:!1,attributionContext:null})}`),[t,e]),a=(0,p.t)("dev_handoff.mcp.prompt_example",{count:t.length}),r=a+"\n"+n.join("\n"),l=(0,iF.am)(),o=(0,e4.Cj)(r,()=>l("dev_mode.mcp_prompt_copy",{layerCount:t.length}),(0,p.t)("dev_handoff.mcp.prompt_example_copy_success"));return(0,i.jsxs)("div",{className:"mcp_panel--examplePromptContainer--2Mqxp",children:[(0,i.jsxs)(eZ.E,{className:"mcp_panel--examplePromptWell---3QqF","aria-label":r,onClick:o,children:[(0,i.jsx)("span",{className:"mcp_panel--examplePromptText--Qvemu","data-testid":"mcp_example_prompt_text",children:a}),(0,i.jsx)("span",{className:up,"data-testid":"mcp_example_prompt_link",children:n[0]}),n.length>=2&&(0,i.jsx)("span",{className:up,"data-testid":"mcp_example_prompt_link",children:n[1]}),n.length>=3&&(0,i.jsx)("span",{className:up,"data-testid":"mcp_example_prompt_link",children:n[2]}),n.length>=4&&(0,i.jsx)("span",{className:"mcp_panel--examplePromptOverflow--C9PIC","data-testid":"mcp_example_prompt_overflow"})]}),(0,i.jsx)(nn.IK,{variant:"secondary",onClick:o,htmlAttributes:{"data-testid":"mcp_copy_example_prompt_button"},children:(0,p.tx)("dev_handoff.mcp.prompt_example_copy")})]})}var u5=n(552001);function u4(){return(0,ca.VX)(rA.s4.FILL),(0,ca.VX)(rA.s4.STROKE),(0,ca.VX)(rA.s4.TEXT),(0,ca.VX)(rA.s4.EFFECT),null}function u6({children:e}){return(0,i.jsx)(e6.VZ,{title:(0,p.t)("dev_handoff.layer_properties"),collapsiblePanelKey:"code",recordingKey:"code_panel",collapsedHeaders:(0,i.jsx)(co.E,{}),children:e})}function u7(e){return(0,i.jsx)(K.u,{label:"InspectPanel",children:(0,i.jsx)(u8,{...e})})}function u8(e){let t=(0,d9.q)(),n=(0,oR.An)(),a=(0,lZ.ro)(),r=(0,j.uQ)(),{isSection:d,isCodeInstance:c}=(0,b.Fk)((e,t)=>{let n=e?.get(t??""),i=(0,l.kc)(),s=i.bake_canvas&&(i.bake_canvas_code_layer?n?.type==="CODE_INSTANCE":n?.type==="RESPONSIVE_SET");return{isSection:n?.type==="SECTION",isCodeInstance:s}},r),u=(0,j.NM)(),p=(0,e2.sQ)(),m=(0,sU.Um)(),h=s.useRef(null),f=(0,ie.eY)(),g=N.z4.getIsExtension(),x=(0,o.md)(ri.be),_=(0,cr.mr)(r??"",f),y=(0,A.q5)(),v=(0,lD.CQ)(y),C=(0,l.kc)().dt_inspect_panel_usage_examples;return(0,i.jsx)(a4.t.TabPanel,{...e.tabProps,height:"fill",children:(0,i.jsxs)("div",{className:"inspect_panel--inspectPanelContainer--SZhfY",children:[(0,i.jsx)(rB,{plugin:x??null}),(0,i.jsx)(u4,{}),(0,i.jsx)("div",{style:{position:"relative",width:"100%",height:"100%"},children:(0,i.jsx)(nR.P,{ref:h,className:"inspect_panel--scrollContainer--wwC0l properties_panel--scrollContainer--o2LxW",onContextMenu:eH.lQ,scrollingDisabled:!!m,enableOverscroll:!0,containerId:ay.Y,children:(0,i.jsx)(S.fu,{name:ce.e0.CODE_PANEL,children:(0,i.jsx)(rN.i,{children:(0,i.jsx)("div",{className:g?"inspect_panel--inspectPanelContentsBottomAligned--MOK20":"inspect_panel--inspectPanelContents--iYf8P",children:(0,i.jsxs)(d5.L,{children:[n?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(dQ,{lastViewTimestamp:e.lastViewTimestamp,hasCodeConnect:_,hideDropdown:c}),t&&(0,i.jsx)(ct.Mw,{panelName:ct.ON.HANDOFF}),(0,i.jsx)(uY,{noBorder:c}),a&&(0,i.jsx)(cI,{}),c?null:d?(0,i.jsxs)(i.Fragment,{children:[v&&(0,i.jsx)(cT,{}),C&&v&&a&&(0,i.jsx)(cE,{}),(0,i.jsx)(u6,{children:(0,i.jsx)(d$.Fe,{})})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(cT,{}),C&&a&&(0,i.jsx)(cE,{}),(0,i.jsxs)(u6,{children:[(0,i.jsx)("div",{className:eS()("inspect_panel--layerPreview--hxLhR",N.z4.getIsExtension()&&"inspect_panel--isInExtension--kzn7u"),children:(0,i.jsx)(cq,{})}),(0,i.jsx)(tR.pm,{inspectionModeLayout:"segmented"}),p?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(rJ,{hideBorder:!0,padded:!0}),(0,i.jsx)(d$.r_,{}),(0,i.jsx)(cn.t,{isSubsection:!0})]}):(0,i.jsx)(d$.Fe,{})]})]}),(0,i.jsx)(cl.LE,{}),(0,i.jsx)(cN.G,{}),(0,i.jsx)(d3,{}),!c&&(0,i.jsx)(ci.L,{})]}):u?(0,i.jsxs)(i.Fragment,{children:[!g&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(dQ,{}),t&&(0,i.jsx)(ct.Mw,{panelName:ct.ON.HANDOFF})]}),(0,i.jsx)(uY,{}),v&&(0,i.jsx)(cT,{}),(0,i.jsx)(u5.V,{}),(0,i.jsx)(cl.LE,{}),(0,i.jsx)(ci.L,{})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(dQ,{}),t&&(0,i.jsx)(ct.Mw,{panelName:ct.ON.HANDOFF}),(0,i.jsx)(i$.$b,{}),(0,i.jsx)(uO,{}),v&&(0,i.jsx)(cT,{}),(0,i.jsx)(d8,{}),(0,i.jsx)(cs.A,{}),(0,i.jsx)(lO,{})]}),(0,i.jsx)("div",{})]})})})})})})]})})}var u9=n(459973);let pe=()=>{af.Y5.triggerAction("deselect-all")};function pt({version:e}){let t=(0,a.wA)(),n=(0,aR.hA)(),s=function(e,t){if(!t.dev_mode_activity||0===t.dev_mode_activity.length)return;let n=e?t.dev_mode_activity.find(t=>t.node_id===e):t.dev_mode_activity[0];if(n)return{id:n.id,activityType:n.activity_type,timestamp:new Date(n.timestamp),version:{id:t.id,description:t.description??null},user:{id:t.user.id,name:t.user.handle,imgUrl:t.user.img_url},metadata:n.metadata}}(n,e),r=n&&s?(0,i.jsx)(lw,{activity:s}):(0,i.jsx)(lg.YL,{item:e});return(0,i.jsx)(lg.jP,{description:e.description,dispatch:t,displayText:r,editorType:es._Y.DESIGN,first:!1,iconOverride:s?lN(s,!0):void 0,isActive:!0,isAllowedToChangeVersion:()=>!1,label:"activity-row",last:!0,onSelect:eH.lQ,time:n?void 0:e.edited_at,user:e.user.handle,userUrl:e.user.img_url,versionId:e.id,view:null})}function pn({versions:e}){let t=lI(),{activeId:n}=(0,a.d4)(e=>e.versionHistory),s=(0,A.q5)(),l=s?.canEdit,o=(0,a.wA)(),d=(0,aR.hA)(),c=lA(),u=lS(),m=t?e[0]:e.find(e=>e.id===n),h=new F.TSSceneGraph(r.juq.LIVE_FILE).get(d??""),f=h?.editInfo?.lastEditedAt;return m?(0,i.jsxs)("div",{className:G.s.flex.flexColumn.borderBox.bSolid.bb1.colorBorder.$,children:[d?null:(0,i.jsx)(lg.s3,{onClose:u,addSavepoint:()=>{o((0,lc.to)({type:ly.y,data:{}})),pe()},isViewOnly:!l}),(0,i.jsxs)("ol",{children:[(0,i.jsx)(lL,{lastEditedAt:f,hasEdits:!1,isActive:t,onSelect:()=>{d?c(d):(o(u9.Fm({id:lm.V_})),pe())},focusNodeId:d}),!t&&(0,i.jsx)(pt,{version:m})]}),(0,i.jsx)("div",{className:G.s.flex.pt12.pb12.pl16.pr16.itemsCenter.$,children:(0,i.jsx)(nn.$n,{variant:"link",onClick:pe,children:(0,p.tx)("dev_handoff.version_history.view_all_versions")})})]}):null}var pi=n(122010),ps=n(530091),pa=n(25870),pr=n(897024),pl=n(811157);function po(e){return(0,i.jsx)(a4.t.TabPanel,{...e.tabProps,children:(0,i.jsx)("div",{className:"dev_handoff_comments_panel--devHandoffCommentsPanel--1Lqo9",children:(0,i.jsx)(pl.B,{stackHeader:!1,hideResolve:!1})})})}let pd=(0,u.j)(s.memo(function(){let{commentsActive:e,isNodeSelected:t,versionHistoryActive:n}=(0,x.R)(e=>({commentsActive:e.mirror.appModel.currentTool===C.ec.tool,isNodeSelected:Object.keys(e.mirror.sceneGraphSelection).length>0,versionHistoryActive:e.mirror.appModel.activeCanvasEditModeType===r.m1T.DEV_HANDOFF_HISTORY})),[s,l]=a4.t.useTabs({comment:!0}),o=(0,aR.hA)(),d=(0,a.wA)(),c=(0,ax.ut)((0,v.tw)(),r._gJ.PRIMARY),u=new Set((0,v.NI)().map(e=>rb[e]).filter(e=>null!=e)),m={};Object.values(rb).forEach(e=>{m[e]=u.has(e)});let[h,g,_]=a4.t.useManagedTabs(m,rb[c]??rb[r._gJ.PRIMARY],e=>{let t=rC[e];if(null==t){(0,a6.$D)(f.e.DEV_MODE,Error(`DevHandoffRightPanel: Unknown tabId '${e}' passed to onSetTab`));return}(0,v.ax)(t),e===rb[r._gJ.PLUGIN]&&d(n3.b({[iU.xb]:!0}))},{recordingKey:"devHandoffPanelTabs"}),y=(0,ao.E1)(),b=(0,lf.jh)(o??void 0);k({doReport:!0});let j=n&&!t&&!o,w=c===r._gJ.PRIMARY&&!e&&!j,E=c===r._gJ.STRING_MANAGEMENT,T=(0,i.jsx)(pa.vL,{name:"rightPanels",focusOnMount:!0,handleKeyDown:eH.lQ,children:(0,i.jsx)("div",{id:"dev-handoff-inspect-panel",children:(0,i.jsxs)(rI,{tabInfo:{commentTabProps:s.comment,generalTabPropsMap:h,generalTabManager:_},children:[j&&(0,i.jsx)(lg.yU,{fileHasCMSData:!1}),n&&t&&(0,i.jsx)(pn,{versions:b.versions}),e&&(0,i.jsx)(po,{tabProps:l.comment}),w&&(0,i.jsx)(u7,{lastViewTimestamp:y,tabProps:g[rb[r._gJ.PRIMARY]]}),E&&(0,i.jsx)(pr.V_,{}),(0,i.jsx)(rm,{tabProps:g[rb[r._gJ.PLUGIN]]})]})})});return(0,i.jsx)(ps.x,{children:(0,i.jsx)(pi.m,{role:"region","aria-label":(0,p.t)("dev_handoff.right_panel.accessible_label"),children:T})})}),"DevHandoffRightPanel");var pc=n(382629),pu=n(258719),pp=n(70690);let pm="dev-handoff-breadcrumbs-dropdown",ph="dev-handoff-collapsed-breadcrumb-dropdown";function pf(e){return!!e}function pg(){let e=s.useRef(null),[t,n]=s.useState(null),i=s.useCallback(()=>{n(e?.current?.getBoundingClientRect()||null)},[e]);return s.useEffect(()=>(i(),pu._.addListener(i),window.addEventListener("resize",i),()=>{pu._.removeListener(i),window.removeEventListener("resize",i)}),[i]),[e,t,i]}function px({selectedNode:e,targetRect:t}){let n=(0,a.wA)(),s=(e=>{let t=e.parentNode;return t?.childrenNodes??[e]})(e).map(t=>{let n=t?function({children:e}){return e.map(e=>({displayText:e.name,onMouseEnter:()=>v.Uc(e.guid),onMouseExit:()=>v.Uc(""),icon:(0,i.jsx)(a_.Bf,{guid:e.guid,isMenuIcon:!0}),callback:()=>v.tJ([e.guid])})).filter(pf)}({children:t.childrenNodes}):void 0;return t?{displayText:t?.name??"",isChecked:t.guid===e.guid,onMouseEnter:()=>v.Uc(t.guid),onMouseExit:()=>v.Uc(""),icon:(0,i.jsx)(a_.Bf,{guid:t?.guid??"",isMenuIcon:!0}),callback:()=>v.tJ([t.guid]),children:n&&n.length>0?n:void 0,callbackOnClickWithChildren:!0}:null}).filter(pf);return(0,i.jsx)(sV.j,{showPoint:!1,items:s,onSelectItem:e=>{e.callback&&e.callback("",null,n)},parentRect:t,dispatch:n,displayAboveTarget:!0})}function p_({nodeID:e}){let t=(0,a.wA)(),[n,s,r]=pg(),l=(0,sU.Um)(),o=(0,ie.eY)().get(e);if(!o)return null;let d=l?.type===pm,c="INSTANCE"===o.type||"SYMBOL"===o.type;return(0,i.jsxs)(i.Fragment,{children:[d&&s&&(0,i.jsx)(px,{selectedNode:o,targetRect:s}),(0,i.jsxs)("button",{className:"dev_handoff_breadcrumbs--pathElementSelected--w9aeS dev_handoff_breadcrumbs--pathElement--AKgt0",onClick:function(){r(),d||t(sB.j7({type:pm,data:{hasOwnEscKeyHandler:!1}}))},ref:n,title:o.name,children:[(0,i.jsx)(a_.Bf,{guid:o.guid,className:c?"dev_handoff_breadcrumbs--layerIconPurple--Qit6B":"dev_handoff_breadcrumbs--layerIcon--jR8ti"}),o.name]})]})}function py({nodeID:e}){let t=(0,ie.eY)().get(e);return t?(0,i.jsx)("button",{title:t.name,className:"dev_handoff_breadcrumbs--pathElement--AKgt0",onClick:()=>v.tJ([t.guid]),onMouseEnter:()=>v.Uc(t.guid),onMouseLeave:()=>v.Uc(""),children:t.name}):null}function pv({nodeIDs:e}){let t=(0,a.wA)(),[n,s,r]=pg(),l=(0,sU.Um)(),o=l?.type===ph,d=(0,ie.eY)(),c=e.map(d.get).filter(pc.Vq),u=c.map(e=>({displayText:e.name,onMouseEnter:()=>v.Uc(e.guid),onMouseExit:()=>v.Uc(""),icon:(0,i.jsx)(a_.Bf,{guid:e.guid,isMenuIcon:!0}),callback:()=>v.tJ([e.guid])}));return(0,i.jsxs)(i.Fragment,{children:[o&&s&&(0,i.jsx)(sV.j,{showPoint:!1,items:u,onSelectItem:e=>{e.callback&&e.callback("",null,t)},parentRect:s,dispatch:t,displayAboveTarget:!0}),(0,i.jsx)("button",{ref:n,className:"dev_handoff_breadcrumbs--pathElementCollapsed--uY2eU dev_handoff_breadcrumbs--pathElement--AKgt0",onClick:function(){r(),o||t(sB.j7({type:ph,data:{hasOwnEscKeyHandler:!1}}))},title:(0,p.t)("dev_handoff.breadcrumbs.hidden_nodes",{count:c.length}),children:(0,p.t)("dev_handoff.breadcrumbs.ellipsis")})]})}let pb=s.memo(()=>{let{selectedNodeID:e}=(0,x.R)(e=>({selectedNodeID:Object.keys(e.mirror.sceneGraphSelection)[0]})),t=(0,ax.J2)(r.Ez5.devHandoffState().currentNodeId),n=(0,b.Gj)((e,t,n)=>{let i=e.get(t);return i?function(e){return e.length<=4?e:[e[0],e.slice(1,-2),e[e.length-2],e[e.length-1]]}([...function e(t,n){if(n.guid===t)return[];let i=n.parentNode;return i?[...e(t,i),i]:[]}(n,i),i]):[]},e,t),a=(0,F.getActiveTSSceneGraph)().get(e);return 0!==n.length&&a?(0,i.jsx)("div",{className:"dev_handoff_breadcrumbs--container--BoCAA",children:n.map((e,t)=>{let a=t===n.length-1,r=(0,i.jsx)(eN.B,{svg:pp.A,className:a?"dev_handoff_breadcrumbs--chevronIconSelected--NrpAP dev_handoff_breadcrumbs--chevronIcon--MAw4y":"dev_handoff_breadcrumbs--chevronIcon--MAw4y",height:"3px",width:"6px"});return Array.isArray(e)?(0,i.jsxs)(s.Fragment,{children:[r," ",(0,i.jsx)(pv,{nodeIDs:e.map(e=>e.guid)})]},e.map(e=>e.guid).join("-")):a?(0,i.jsxs)(s.Fragment,{children:[r," ",(0,i.jsx)(p_,{nodeID:e.guid})]},e.guid):(0,i.jsxs)(s.Fragment,{children:[r," ",(0,i.jsx)(py,{nodeID:e.guid})]},e.guid)})}):null});var pC=n(140458),pj=n(180),pk=n(46999),pw=n(54092),pE=n(962212),pT=n(973228);let pS="dev_handoff_index_view_zoom_control--zoomButton--l1ZDl",pI="dev_handoff_index_view_zoom_control--buttonDisabled--krwH2";var pN=n(364616);function pA(){let{Dropdown:e,toggleDropdown:t,dropdownTargetRef:n}=(0,ol.B)("DEV_HANDOFF_INDEX_VIEW_ZOOM_DROPDOWN"),s=(0,aR.hA)(),a=(0,pw.Zr)("zoom-out"),o=(0,pw.Zr)("zoom-in"),d=Math.round(100*(0,ax.J2)((0,pk.d)().activeCanvasCurrentZoom)).toString(),c=[{displayText:(0,p.t)("dev_handoff.vscode.zoom_control.zoom_options_actual_size"),callback:()=>r.glU.setCanvasZoomScale(1)},{displayText:(0,p.t)("dev_handoff.vscode.zoom_control.zoom_options_fit_to_screen"),callback:()=>r.w3z.setFocusZoomLevel(r.i1K.FIT_TO_SCREEN)},{displayText:(0,p.t)("dev_handoff.vscode.zoom_control.zoom_options_fit_to_width"),callback:()=>r.w3z.setFocusZoomLevel(r.i1K.FIT_TO_WIDTH)},{displayText:(0,p.t)("dev_handoff.vscode.zoom_control.zoom_options_fill_screen"),callback:()=>r.w3z.setFocusZoomLevel(r.i1K.FILL_SCREEN)}],u=[{displayText:(0,p.t)("fullscreen_actions.zoom-reset"),callback:()=>r.glU.setCanvasZoomScale(1)},{displayText:(0,p.t)("fullscreen_actions.zoom-to-fit"),callback:()=>af.Y5.triggerAction("zoom-to-fit",{source:"zoom-menu"})}];return(0,i.jsxs)("div",{className:"dev_handoff_index_view_zoom_control--container--oBEBg",ref:n,style:(0,pE.T)()&&(0,l.kc)().dt_vscode_ready_for_dev?{height:"32px",paddingLeft:"10px",paddingRight:"10px"}:void 0,children:[(0,i.jsx)(eZ.E,{className:eS()(pS,pT.NB,{[pT.pq]:a}),onClick:()=>af.Y5.triggerAction("zoom-out",{source:"vscode-zoom-menu"}),disabled:!a,"aria-label":(0,p.t)("dev_handoff.vscode.zoom_control.zoom_out_button"),htmlAttributes:{"data-tooltip-type":e5.Ib.TEXT,"data-tooltip":(0,p.t)("dev_handoff.vscode.zoom_control.zoom_out_button")},children:(0,i.jsx)(pC.r,{className:eS()({[pI]:!a})})}),(0,i.jsxs)("button",{className:"dev_handoff_index_view_zoom_control--zoomLevel--uI6yg text--fontPos11--2LvXf text--_fontBase--QdLsd",style:{width:`${Math.max(d.length,4)}em`},onClick:t,children:[d,"% ",(0,i.jsx)(eN.B,{svg:pN.A})]}),(0,i.jsx)(eZ.E,{className:eS()(pS,pT.NB,{[pT.pq]:o}),onClick:()=>af.Y5.triggerAction("zoom-in",{source:"vscode-zoom-menu"}),disabled:!o,"aria-label":(0,p.t)("dev_handoff.vscode.zoom_control.zoom_in_button"),htmlAttributes:{"data-tooltip-type":e5.Ib.TEXT,"data-tooltip":(0,p.t)("dev_handoff.vscode.zoom_control.zoom_in_button")},children:(0,i.jsx)(pj.$,{className:eS()({[pI]:!o})})}),(0,i.jsx)(e,{items:s||!(0,l.kc)().dt_vscode_ready_for_dev?c:u,showPoint:!0,displayAboveTarget:!0})]})}var pL=n(618133),pM=n(546001),pO=n(215853),pR=n(639108);function pP({isToolbarOpen:e}){let[t,n]=s.useState(!1),a=s.useRef(null),l=s.useRef(null),o=s.useRef(null),[d,c]=s.useState(null),u=(0,ax.J2)(r.Ez5.devHandoffState().currentNodeId),m=(0,j.uQ)(),{inspectableRootNodeId:h,didSelectRow:f}=a1(u,m);s.useEffect(()=>n(!1),[m]),(0,pM.L)(l,()=>{t&&n(!1)},!0);let g=s.useCallback(()=>{n(!1)},[n]);return(0,i.jsxs)("div",{ref:l,className:"frame_picker--container--tkwaQ",children:[(0,i.jsx)("button",{className:"frame_picker--trigger--ZPMqZ",ref:a,onClick:function(){if(t)n(!1);else{let e=a.current?.getBoundingClientRect();e&&(c(e),n(!0))}},"data-tooltip":(0,p.t)("dev_handoff.tag.layers"),"data-tooltip-type":e5.Ib.TEXT,"data-tooltip-show-above":!0,children:(0,i.jsx)(eN.B,{svg:pR.A})}),d&&(0,i.jsx)(pO.Cf,{className:t?void 0:"frame_picker--closedDropdown--ynVzU",targetRect:d,displayAboveTarget:!0,type:pO.it.MATCH_BACKGROUND,disableDropdownScrollContainer:!0,propagateCloseClick:!0,children:(0,i.jsx)("div",{ref:o,className:eS()("frame_picker--frames--vobWI",e&&"frame_picker--isToolbarOpen--i2EBR"),children:(0,i.jsx)(a3,{onRowClick:g,didSelectRow:f,inspectableRootNodeId:h})})})]})}var pD=n(754245),pF=n(314838),pz=n(704600),pB=n(322839),pG=n(923495),pU=n(285030),pV=n(805733),pH=n(243690),pK=n(346260),pW=n(405210),pq=n(109456),pX=n(77417),pY=n(913014);let pZ="style_details_modal--library--38bPp variable_details_view--library--Z5UXI",pJ="style_details_modal--styleProperties--2XDQz";function pQ({data:e}){let{position:t,styleId:n,styleNodeId:r,styleType:l}=e,o=(0,a.wA)(),d=s.useCallback(()=>{o(lc.Ce())},[o]);!function(e=eH.lQ){let t=(0,j.uQ)(),n=(0,aC.ZC)(t);s.useEffect(()=>{n&&t!==n&&e()},[e,n,t])}(d);let c=s.useMemo(()=>{switch(l){case"FILL":case"STROKE":return(0,p.t)("dev_handoff.selection_colors.style_details");case"EFFECT":return(0,p.t)("dev_handoff.selection_effect_style_details");case"TEXT":return(0,p.t)("dev_handoff.selection_text_style_details")}},[l]);return s.useEffect(()=>{r||d()},[r,d]),(0,i.jsx)(S.fu,{name:"Selection styles details modal",properties:{resourceType:l},children:(0,i.jsx)(dC.bL,{width:d6.b6,maxHeight:d6.xX+120,onClose:d,defaultPosition:t,recordingKey:"style_details_modal",draggable:"header",children:(0,i.jsxs)(iM.vo,{children:[(0,i.jsx)(iM.Y9,{children:(0,i.jsx)(iM.hE,{children:c})}),(0,i.jsx)(iM.nB,{padding:0,style:{width:d6.b6},children:(0,i.jsx)(p$,{styleId:n,styleNodeId:r,styleType:l})})]})})})}function p$({styleId:e,styleNodeId:t,styleType:n,inlineCloseButton:l,onClose:o,canOpenLibrary:d=!0}){let c=(0,pB.Fj)(e),{name:u,description:m,isDeleted:h}=(0,b.Fk)((e,t)=>{if(!t)return{};let n=e.get(t);return n?{name:n.name,description:n.description,isDeleted:n.isSoftDeleted}:{}},t),f=(0,a.d4)(e=>e.mirror.selectedStyleProperties),g=s.useMemo(()=>"FILL"===n||"STROKE"===n?p5:"TEXT"===n?p6:p4,[n]);s.useEffect(()=>()=>r.glU?.selectStyleByGuid(ar.AD),[]);let x="TEXT"===n?(0,i.jsx)(cB,{nodeId:t}):(0,i.jsx)(pY.we,{selectedStyleProperties:f,snug:!0});return(0,i.jsxs)(e6.VZ,{hideHeader:!0,noPadding:!0,noBorder:!0,recordingKey:"styleDetails",children:[(0,i.jsxs)("div",{className:"style_details_modal--sticky--Ib6F7",children:[x,(0,i.jsxs)("div",{className:"style_details_modal--header--eJQK2 variable_details_view--titlelessPanel--RzeQe",children:[l?(0,i.jsxs)("div",{className:"style_details_modal--nameAndCloseButton--E2ffO variable_details_view--nameAndCloseButton--Gc1CO",children:[(0,i.jsx)(p0,{name:u,isDeleted:h}),(0,i.jsx)(iO.K,{onClick:o,"aria-label":(0,p.t)("dev_handoff.styles.details_button_close_aria_label"),children:(0,i.jsx)(ug.A,{})})]}):(0,i.jsx)(p0,{name:u,isDeleted:h}),(0,i.jsx)(p1,{libraryKey:c?.library_key,isLocal:c?.isLocal,canOpenLibrary:d}),(0,i.jsx)(pz.X,{description:m,containerClassName:"style_details_modal--description--qHmv4 variable_details_view--description--T0GsG",dataTestId:"style_details_description"})]})]}),(0,i.jsx)(p2,{guid:t,styleType:n}),(0,i.jsx)(g,{guid:t})]})}function p0({name:e,isDeleted:t}){let n=(0,e4.Cj)(e),{ref:s,...a}=(0,i6.X)(e),r=t?{"data-tooltip":(0,p.t)("variables.variable_was_deleted"),"data-tooltip-type":e5.Ib.TEXT}:void 0;return e?(0,i.jsxs)(eZ.E,{className:"style_details_modal--nameContainer--lptg- variable_details_view--variableNameContainer--9iRtJ",onClick:n,htmlAttributes:a??r,children:[t&&(0,i.jsx)(e9.B3,{}),(0,i.jsx)("span",{className:"style_details_modal--name--UzPbB variable_details_view--variableName--wKD6I ellipsis--ellipsis--Tjyfa",ref:s,"data-testid":"style_details_name",children:e})]}):null}function p1({libraryKey:e,isLocal:t,canOpenLibrary:n}){let s=(0,pV.b)({libraryKey:e,isDevHandoff:!0,isDevModeOverview:!1,isDevModeVarsTable:!1,devModeFocusId:void 0}),a=(0,pH.B)(e||"",{enabled:!!e});return t||e?t||"loaded"===s.status&&"loaded"===a.status?n?(0,i.jsx)(pG.J,{libraryName:a?.data,containerClassName:pZ,link:s.data,isLocal:t,localFallback:(0,p.t)("dev_handoff.variables.details_local"),dataTestId:"style_details_library",recordingKey:"style_name"}):(0,i.jsx)(pG.J,{libraryName:a?.data,containerClassName:pZ,isLocal:t,dataTestId:"style_details_library"}):(0,i.jsx)(pG.J,{containerClassName:pZ,loading:!0}):null}function p2({guid:e,styleType:t}){let{codeLanguageApi:n}=(0,pU.Q)(),s=(0,rn.AF)(),a=(0,e$.AC)(n?.codeLanguage),r=(0,e$.Pt)(a),l=!!p3(e)?.length;return n&&s?(0,i.jsx)(S.fu,{name:"Style code",properties:{type:n.codeLanguage.type,pluginId:n.codeLanguage.id,resourceType:t},children:(0,i.jsx)(rJ,{overrideNodeId:e,hideLayoutCode:!0,hideColorCode:"TEXT"===t||"EFFECT"===t,hideHints:!0,sectionClassName:"style_details_modal--styleCodeSection--e75tR",localCodeLanguage:n.codeLanguage,emptyStateMessage:(0,p.t)("dev_handoff.code.unsupported",{language:r.format(n.codeLanguage)}),dataTestId:"style_details_code",hideBorder:"FILL"===t&&!l})}):null}function p3(e){let t=(0,b.Fk)((e,t)=>{let n=e.get(t);if(n&&n.isAlive)return n.fills},e);return t?.filter(pX.e0)}function p5({guid:e}){let t=p3(e),n=(0,I.Ku)(),a=(0,pX.Ig)(),r=s.useCallback(e=>(0,pX.dc)(e,a),[a]),l=s.useMemo(()=>t?.map(r),[t,r]);return l&&0!==l.length?(0,i.jsx)(S.fu,{name:"Style properties",properties:{resourceType:"COLOR",count:t?.length},children:(0,i.jsx)("div",{className:pJ,"data-testid":"style_details_color_fills",children:l.map((e,t)=>(0,i.jsx)(pK.DP,{formattableColor:e,format:n,disableDetailModalEntry:!0},t))})}):null}function p4({guid:e}){let t=(0,b.Fk)((e,t)=>{let n=e.get(t);if(n&&n.isAlive)return n.effects.reverse()},e),n=(0,pW.d7)(t??[]);return n&&0!==n.length?(0,i.jsx)(S.fu,{name:"Style properties",properties:{resourceType:"EFFECT",count:t?.length},children:(0,i.jsx)("div",{className:pJ,children:n.map((t,n)=>(0,i.jsx)(pW.rK,{...t,disableDetailModalEntry:!0},`${e}-${n}`))})}):null}function p6({guid:e}){let{isNodeInvalid:t,variableConsumptionMap:n}=(0,b.Fk)((e,t)=>{let n=e.get(t);return n&&n.isAlive?{isNodeInvalid:!1,variableConsumptionMap:n?.getVariableConsumptionMap()}:{isNodeInvalid:!0}},e);return t?null:(0,i.jsx)(S.fu,{name:"Style properties",properties:{resourceType:"TEXT"},children:(0,i.jsx)("div",{className:pJ,children:(0,i.jsx)(pq.R,{nodeId:e,variableConsumptionMap:n,disableSuggestions:!0,disableDetailModalEntry:!0})})})}(0,oQ.Ju)(function(){let e=(0,a.d4)(e=>e.modalShown);return e&&e.type===d6.vl&&e.data.styleNodeId?(0,i.jsx)(pQ,{...e}):null},d6.vl);var p7=n(621159),p8=n(374794),p9=n(884828);let me="inspect_tabs--column--6BLEt",mt="inspect_tabs--settingImage--VEeXo",mn="inspect_tabs--codeContainer--G3I2n",mi="inspect_tabs--codeContent--HOypb",ms="inspect_tabs--codeBoxModelInline--o-8PU",ma="inspect_tabs--codeBoxModelSide--4N2rL";var mr=n(757731);let ml="DEV_HANDOFF_DEV_RESOURCE_DROPDOWN";function mo(e){return(0,i.jsxs)("div",{className:"inspect_tabs--setting--OTZN3",children:[(0,i.jsxs)("div",{className:"inspect_tabs--settingRow--qP9rB",children:[(0,i.jsx)("div",{className:"inspect_tabs--settingLabel--Fr85N",children:e.label}),(0,i.jsx)("button",{className:"inspect_tabs--settingLink--YT0SJ",onClick:e.onClick,children:(0,p.tx)("dev_handoff.inspect_panel.open_setting")})]}),(0,i.jsx)("div",{className:"inspect_tabs--settingDescription--Fxbgh",children:e.description})]})}function md(){let e=(0,lp._6)(),t=(0,a.wA)();return s.useCallback(()=>{"fullscreen"===e.view&&t(sB.sf({...e,styleForDetailsPanel:void 0,variableIdForDetailsPanel:void 0}))},[t,e])}function mc({variableId:e}){let t=md(),n=(0,d7.j)({onShow:t,entryPoint:d6.Nh.VariableDetailsModal});return(0,i.jsx)(p7.ae,{variableId:e,isDetailsModal:!0,inlineCloseButton:!0,onClose:t,surface:"modal",entryPoint:d6.E6.CodeWell,canOpenLibrary:!1,showVariablesTable:n})}function mu({styleId:e,styleNodeId:t,styleType:n}){let s=md();return(0,i.jsx)(p$,{styleId:e,styleNodeId:t,styleType:n,inlineCloseButton:!0,onClose:s,canOpenLibrary:!1})}let mp="(max-width: 550px)";function mm({forSmallScreen:e,children:t,containerClassName:n}){let r=function(){let[e,t]=s.useState(()=>window.matchMedia(mp).matches);return s.useEffect(()=>{let e=window.matchMedia(mp),n=e=>{t(e.matches)};return e.addEventListener("change",n),()=>{e.removeEventListener("change",n)}},[]),e}(),{renderVariableDetails:l,variableIdForDetailsPanel:o}=function(){let e=(0,a.d4)(e=>e.selectedView.variableIdForDetailsPanel);return{renderVariableDetails:(0,p7.up)({variableId:e,isDetailsModal:!1}),variableIdForDetailsPanel:e}}(),{styleId:d,styleNodeId:c,styleType:u}=(0,a.d4)(e=>e.selectedView?.styleForDetailsPanel)??{};if(e!==r)return(0,i.jsx)("div",{className:n,children:t});let p=l&&o,m=!!d&&!!c&&!!u;return(0,i.jsxs)(i.Fragment,{children:[p?(0,i.jsx)("div",{className:n,children:(0,i.jsx)(mc,{variableId:o})}):m?(0,i.jsx)("div",{className:n,children:(0,i.jsx)(nR.P,{children:(0,i.jsx)(mu,{styleId:d,styleNodeId:c,styleType:u})})}):null,(0,i.jsx)("div",{className:n,style:{display:p||m?"none":"initial"},children:t})]})}function mh(){let e=(0,j.uQ)();return(0,rn.h)()?(0,i.jsx)(re,{}):e?(0,i.jsxs)("div",{className:mn,children:[(0,i.jsxs)(mm,{forSmallScreen:!0,containerClassName:mi,children:[(0,i.jsx)(g.tH,{boundaryKey:"Figmadoc",fallback:g.H4.NONE_I_KNOW_WHAT_IM_DOING,children:(0,i.jsx)(cu.Qd,{})}),(0,i.jsx)(p9.J,{}),(0,i.jsx)(rJ,{}),(0,i.jsx)(cN.G,{}),(0,i.jsx)(cn.t,{}),(0,i.jsx)(d$.r_,{}),(0,i.jsx)("div",{className:ms,children:(0,i.jsx)(cq,{})})]}),(0,i.jsx)(mm,{forSmallScreen:!1,containerClassName:ma,children:(0,i.jsx)(cq,{fillContainer:!0})})]}):(0,i.jsx)(mf,{})}function mf(){return(0,i.jsxs)("div",{className:"inspect_tabs--codeEmpty--B2DYX",children:[(0,i.jsxs)("div",{className:me,children:[(0,i.jsx)("img",{alt:"",className:mt,src:(0,H.ck)("90580516d4d39519d44b86a2e591f4e576475013"),onDragStart:e=>e.preventDefault()}),(0,i.jsx)(mo,{label:(0,p.t)("dev_handoff.inspect_panel.property_suggestions.title"),description:(0,p.t)("dev_handoff.inspect_panel.property_suggestions.body"),onClick:na.KQ})]}),(0,i.jsxs)("div",{className:me,children:[(0,i.jsx)("img",{alt:"",className:mt,src:(0,H.ck)("4b9430b030179277555a6fe2114ceffc0f49ed61"),onDragStart:e=>e.preventDefault()}),(0,i.jsx)(mo,{label:(0,p.t)("dev_handoff.inspect_panel.block_suggestions.title"),description:(0,p.t)("dev_handoff.inspect_panel.block_suggestions.body"),onClick:na.lk})]})]})}function mg(){return(0,i.jsxs)("div",{className:mn,children:[(0,i.jsxs)(mm,{forSmallScreen:!0,containerClassName:mi,children:[(0,i.jsx)(p9.J,{}),(0,i.jsx)(d$.Fe,{}),(0,i.jsx)(cN.G,{}),(0,i.jsx)(cn.t,{}),(0,i.jsx)("div",{className:ms,children:(0,i.jsx)(cq,{})})]}),(0,i.jsx)(mm,{forSmallScreen:!1,containerClassName:ma,children:(0,i.jsx)(cq,{fillContainer:!0})})]})}function mx(){return(0,i.jsxs)("div",{className:"inspect_tabs--assetsContainer--ETjja",children:[(0,i.jsx)(cl.LE,{}),(0,i.jsx)(ci.L,{})]})}function m_(){return(0,i.jsxs)("div",{className:"inspect_tabs--componentsContainer--ERYGT",children:[(0,i.jsx)("div",{className:"inspect_tabs--componentsContent--qXnwd",children:(0,i.jsx)(oM,{})}),(0,i.jsx)("div",{className:"inspect_tabs--componentsPreview--79zEW",children:(0,i.jsx)(pF.ul,{})})]})}function my({setActiveTabId:e}){let t=(0,a.wA)(),n=(0,sU.Um)(),l=s.useRef(null),[d,c]=(0,o.fp)(o8),u=(0,iF.U)(),m=(0,lZ.Nf)()??"",h=(0,ie.eY)().get(m),f=document.getElementById("dev-handoff-inspect-panel"),g=n?.type===ml;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{ref:l,children:(0,i.jsx)(uU.d,{onClick:function(){g?t(sB.oB()):t(sB.j7({type:ml}))},"aria-expanded":g,htmlAttributes:{"data-tooltip":(0,p.t)("dev_handoff.add_dev_resource"),"data-tooltip-type":e5.Ib.TEXT},"aria-label":(0,p.t)("dev_handoff.add_dev_resource"),children:(0,i.jsx)(eN.B,{svg:mr.A})})}),g&&l.current&&f&&(0,pD.createPortal)((0,i.jsx)(sV.j,{items:[{displayText:"Add link to code file...",action:"add_file_link"},{displayText:"Add link to dev resource... ",action:"add_link"}],onSelectItem:t=>{switch(t.action){case"add_file_link":e(r._gJ.DEV_RESOURCES),u("Dev Handoff Related Links Click Code File Link",{nodeId:m,nodeType:h?.type,source:"web"}),(0,na.qE)();break;case"add_link":e(r._gJ.DEV_RESOURCES),c(!0)}},dispatch:t,parentRect:l.current.getBoundingClientRect(),showPoint:!1}),f)]})}function mv(){return(0,i.jsx)(K.u,{label:"Tabs",children:(0,i.jsx)(mb,{})})}function mb(){let e=(0,ax.ut)((0,v.tw)(),r._gJ.PRIMARY),t=(0,oR.An)(),n=(0,j.NM)(),l=(0,lZ.ro)(),d=(0,o.md)(ri.be);!function(e){let t=(0,a.wA)();s.useEffect(()=>{let e=og.D.getState().selectedView;e.variableIdForDetailsPanel&&t(sB.sf({...e,variableIdForDetailsPanel:void 0}))},[t,e])}([e,(0,j.uQ)()]);let c=n?[{id:r._gJ.ASSETS,title:(0,p.t)("dev_handoff.assets"),Component:mx,recordingKey:"extensionAssetsTab"}]:[{id:r._gJ.PRIMARY,title:(0,p.t)("inspect_panel.code.code"),Component:mh,recordingKey:"extensionCodeTab"}];return t&&(c.push({id:r._gJ.PROPERTIES,title:(0,p.t)("fullscreen.properties_panel.properties"),Component:mg,recordingKey:"extensionPropertiesTab"}),l&&c.push({id:r._gJ.COMPONENT,title:(0,p.t)("dev_handoff.inspect_panel.component"),Component:m_,recordingKey:"extensionComponentTab"}),c.push({id:r._gJ.DEV_RESOURCES,title:(0,p.t)("dev_handoff.developer_related_links"),Component:ds,recordingKey:"extensionRelatedLinksTab"}),c.push({id:r._gJ.ASSETS,title:(0,p.t)("dev_handoff.assets"),Component:mx,recordingKey:"extensionAssetsTab"})),c.push({id:r._gJ.PLUGIN,title:(0,p.t)("dev_handoff.tab.plugins"),Component:rp,recordingKey:"extensionPluginsTab"}),s.useEffect(()=>{c.find(t=>t.id===e)||(0,v.ax)(r._gJ.PRIMARY)},[e,t]),(0,i.jsxs)(p8.zN,{children:[(0,i.jsxs)("div",{className:"inspect_tabs--tabsBar--nbu1a",children:[(0,i.jsx)(nR.P,{innerClassName:"inspect_tabs--tabs--w8XOI",minContentWidth:100,children:c.map(t=>(0,i.jsx)(rk,{text:t.title,isActive:e===t.id,recordingKey:t.recordingKey,onClick:()=>{var e;return e=t.id,void(0,v.ax)(e)},isSingle:1===c.length},t.title))}),(0,i.jsxs)("div",{className:"inspect_tabs--rightButtons--HeXhW",children:[d&&(0,i.jsx)(iO.K,{htmlAttributes:{"data-tooltip-type":e5.Ib.TEXT,"data-tooltip":(0,p.t)("dev_handoff.inspect_panel.close_plugin")},"aria-label":(0,p.t)("dev_handoff.inspect_panel.close_plugin"),onClick:()=>{(0,il.wY)()},children:(0,i.jsx)(iD.X,{})}),(0,i.jsx)(l1,{}),(0,i.jsx)(my,{setActiveTabId:v.ax})]})]}),c.map(t=>(0,i.jsx)("div",{className:"inspect_tabs--activeTabContainer--LBYjQ",style:{display:e===t.id?void 0:"none"},children:(0,i.jsx)(t.Component,{})},t.title))]})}var mC=n(454921),mj=n(220638);let mk=(0,ad.jz)(aE.YI7),mw=()=>.75*window.innerHeight,mE=(0,ad.jz)(aE.Qhc);function mT(){let[e,t]=(0,nM.Vc)("extension_bottom_panel_expanded",!0),[n,a]=(0,o.fp)(pL.g),[d,c]=s.useState(!1),u=(0,j.uQ)(),m=(0,ax.J2)(r.Ez5.devHandoffState().focusMode),h=(0,ax.J2)((0,I.UK)().devHandoffInspectSplitPosition);s.useEffect(()=>{let t;t=e?n:mk,(0,I.UK)().devHandoffInspectSplitPosition.set(t)},[e]);let f=s.useCallback(()=>{c(!0)},[]),g=s.useCallback(e=>{if(d){var t;let n=(t=window.innerHeight-e.clientY,Math.max(mk,Math.min(mw(),t||0)));n!==h&&((0,I.UK)().devHandoffInspectSplitPosition.set(n),a(n))}},[d,h,a]),x=s.useCallback(()=>{c(!1)},[]);return s.useEffect(()=>(document.addEventListener("mousemove",g),document.addEventListener("mouseup",x),()=>{document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",x)})),(0,i.jsxs)("div",{id:"dev-handoff-inspect-panel",className:eS()("vscode","extension_bottom_panel--container--zaRdX",eA.Dm,e&&"extension_bottom_panel--isOpen--m5UfA"),style:{height:`${h}px`},children:[(m||(0,l.kc)().dt_vscode_ready_for_dev)&&(0,i.jsx)("div",{className:eS()("extension_bottom_panel--buttons--itG9x","extension_bottom_panel--buttonsNewUx--qjtmo"),children:(0,i.jsx)(pA,{})}),(0,i.jsxs)("div",{className:"extension_bottom_panel--header--ZmzTG",children:[e&&(0,i.jsx)("div",{className:"extension_bottom_panel--edge--cuoAZ",onMouseDown:f,onDoubleClick:()=>{(0,I.UK)().devHandoffInspectSplitPosition.set(mE+mk),a(mE+mk)}}),(0,i.jsx)(pP,{isToolbarOpen:e}),u&&(0,i.jsx)(pb,{}),(0,i.jsxs)("div",{className:eS()("extension_bottom_panel--headerRightButtons--qVDj-",G.s.pt4.$),children:[(0,i.jsx)(tR.pm,{}),(0,i.jsx)("button",{onClick:function(){t(!e)},style:{width:"32px"},children:(0,i.jsx)(eN.B,{"data-tooltip-type":e5.Ib.TEXT,"data-tooltip-show-above":!0,"data-tooltip":e?(0,p.t)("dev_handoff.vscode.inspect_panel.hide_inspect_tooltip"):(0,p.t)("dev_handoff.vscode.inspect_panel.show_inspect_tooltip"),svg:e?mj.A:mC.A,autosize:!0})})]})]}),(0,i.jsx)("div",{className:"extension_bottom_panel--transitionContainer--5UlLL",style:{maxHeight:`${h-mk}px`},children:(0,i.jsx)(mv,{})})]})}var mS=n(106612),mI=n(146434),mN=n(232120),mA=n(116450);let mL=(0,iz.Fu)("dev_mode_has_enabled_mcp_server");function mM(){let e=(0,c3.a4)(),t=(0,c3.F0)(e),n=(0,o.md)(iG),l=(0,o.md)(mL),d=(0,a.wA)(),{show:c,isShowing:u,complete:m}=(0,ih.e)({overlay:iC.JTm,priority:ix.N.DEFAULT_MODAL},[n,l]);s.useEffect(()=>{e!==c3.qd.None&&t&&c({canShow:(e,t)=>!!e&&e.createdAt.getTime()<Date.now()-432e6&&!t})},[e,t,c]);let h=s.useCallback(()=>{m(),(0,c0.y3)()?af.Y5.triggerActionEnum(r.rcl.TOGGLE_ENABLE_CODGEN_MCP_SERVER):d((0,lc.to)({type:uf.nq}))},[m,d]);if(!t)return null;let f=(0,H.Gz)();return(0,i.jsx)(mA._l,{closeButtonColor:"light",description:t.description,isShowing:u,media:(0,i.jsx)(mA.B$,{src:(0,H.ck)(t.assetPath),alt:t.altText,width:700,aspectRatio:700/294}),onClose:m,orientation:"landscape",primaryCta:{type:"button",label:(0,p.tx)("dev_handoff.mcp.set_up_mcp"),onClick:h,ctaTrackingDescriptor:W.c.GET_STARTED},secondaryCta:{type:"link",label:(0,i.jsxs)("div",{className:"mcp_blocking_modal--learnMoreLink--vy6-s",children:[(0,i.jsx)(mN.V,{}),(0,p.tx)("dev_handoff.mcp.learn_more")]}),href:f,ctaTrackingDescriptor:W.c.LEARN_MORE},title:t.title,trackingContextName:"dev_mode.mcp_blocking_modal",userFlagOnShow:"seen_mcp_blocking_modal",width:700})}var mO=n(274351),mR=n(739713),mP=n(29611),mD=n(728145),mF=n(225125),mz=n(777387),mB=n(228227),mG=n(554311),mU=n(469229),mV=n(7087),mH=n(703678);let mK="floating_layers_panel--isSymbol--3KTvH",mW="floating_layers_panel--layerName--LBYru";function mq(){let e=(0,ax.J2)((0,I.UK)().showGuids),t=(0,j.Tv)(),n=(0,b.Gj)((e,t)=>t&&e.get(t),t[0]||null),l=!!n&&["SYMBOL","INSTANCE"].includes(n.type),{inspectableRootNodeId:d,didSelectRow:c}=a1((0,ax.J2)(r.Ez5.devHandoffState().currentNodeId),t[0]||null),u=(0,a.d4)(e=>e.mirror.appModel.currentPage),m=d||u,h=(0,o.Xr)(aA),f=[{displayText:(0,p.t)("dev_handoff.layers.collapse_all_layers"),callback:()=>h([m])}],g=s.useMemo(()=>t.length>0&&t[0]?r.w3z?.getAssetInfo(t[0]):null,[t]);return 0!==t.length&&n?(0,i.jsx)(mH.P,{title:t.length>1?(0,i.jsx)("div",{className:mW,children:(0,p.tx)("dev_handoff.workflows.focus_view.multiple_layers_selected",{count:t.length})}):(0,i.jsxs)("div",{className:eS()(mW,{[mK]:l}),children:[n.name,e?` (${n.guid})`:""]}),selectedLayerName:n.name,nodeIcon:(0,i.jsx)("div",{className:eS()("floating_layers_panel--layersIcon--q0eoA",{[mK]:l}),children:(0,i.jsx)(aw.rI,{node:n,showIcons:!0,assetInfo:g})}),panelActions:(0,i.jsx)(aj.U,{dropdownItems:f}),children:(0,i.jsx)(aL,{inspectableRootNodeId:d,didSelectRow:c,page:u,hideHeader:!0})}):null}var mX=n(170627),mY=n(933688),mZ=n(882243),mJ=n(950241),mQ=n(567253),m$=n(235764),m0=n(758052);let m1=s.memo(function(e){let{value:t,setValue:n,hasHug:a,isSection:o,isComponentSet:d}=function(e,t){let{Sprig:n}=(0,mF.A)(),i=(0,ie.eY)(),{pxValue:a,hasHug:l,isSection:o,isComponentSet:d}=(0,b.wA)((e,t,n)=>{let i=e.get(t);return i?{pxValue:"width"===n?i.size.x:i?.size.y,hasHug:"width"===n?i.stackHorizontalLayoutSize===r.mKm.HUG_CONTENT:i.stackVerticalLayoutSize===r.mKm.HUG_CONTENT,isSection:i.isSection,isComponentSet:i.isStateGroup}:{value:0,hasHug:!1}},e,t),c=(0,e3.QO)(void 0,a),u=(0,e3.$Q)(),p=(0,iF.hC)();return{value:c,setValue:s.useCallback((s,a)=>{(0,m$.N)(()=>{mX.l7.user("focus-view-size-input",()=>{let l=i.get(e),o=u(s)??s;l&&(0,mZ.n)(()=>{r.glU?.setNodeIdSizeWithAnchor(l.id,o.toString(),"width"===t?r._0v.X:r._0v.Y,r.eVK.MIDDLE_CENTER)&&a&&(p("dev_mode.focus_view.resizing",{node_id:l.id,node_type:l.type,dimension:t,source:"top bar"}),n("track","interactive_inspection_action"),r.glU?.commit())})})})},[i,e,u,t,p,n]),hasHug:l,isSection:o,isComponentSet:d}}((0,aR.hA)(),e.dimension),c=(0,mQ.KG)({key:e.dimension,setValue:n}),u=o?(0,p.t)("dev_handoff.workflows.focus_view.resizing_disabled_section"):d?(0,p.t)("dev_handoff.workflows.focus_view.resizing_disabled_component_set"):a?(0,p.t)("dev_handoff.focus_view.resize_disabled_hugged_element"):"";return(0,i.jsx)(mY.E,{name:`focus_view_${e.dimension}_input`,children:(0,i.jsx)(mJ.$j,{disabled:o||d||a,inputClassName:m0.hF,isTokenizable:!0,value:t??0,...c,"data-tooltip":u,"data-tooltip-type":e5.Ib.TEXT,min:(0,l.kc)().editor_zero_width_input?eA.ak:void 0,noBorderOnHover:!0,onBlur:e.onBlur,onFocus:e.onFocus,recordingKey:`focus_view_${e.dimension}_input`,children:(0,i.jsx)("span",{className:`focus_view_size_input--sizeContrainedLabel--uOo68 ${m0.QK} svg`,children:"width"===e.dimension?(0,p.t)("fullscreen.properties_panel.transform_panel.w"):(0,p.t)("fullscreen.properties_panel.transform_panel.h")})})})}),m2="focus_canvas_ui--sideSection--s-sMs";function m3(){!function(){let{Sprig:e}=(0,mF.A)(),t=(0,ax.ut)(r.w3z?.focusViewInteractiveInspectionState().isResizing,!1);s.useEffect(()=>{t&&e("track","interactive_inspection_action")},[t,e])}();let e=(0,iF.hC)(),t=(0,aR.hA)(),n=(0,b.Fk)((e,t)=>{let n=e.get(t);return n?.isSection},t),{selectFocusNodeForInteractiveInspection:l,doneChangingFocusNodeForInteractiveInspection:d}=function(){let e=(0,j.Tv)(),t=(0,a.d4)(e=>e.mirror.appModel.hoveredNode),[n,i]=(0,o.fp)(mz.hn),r=s.useCallback(()=>{i(mz.xX.STARTED)},[i]),l=s.useCallback(()=>{i(mz.xX.STOPPED)},[i]);s.useEffect(()=>{i(function(e,t){let n="-1:-1"!==t;return e!==mz.xX.STOPPED||n?e===mz.xX.HOVERED_NOTHING_AFTER_STOPPED&&n?mz.xX.IDLE:e:mz.xX.HOVERED_NOTHING_AFTER_STOPPED}(n,t))},[t,n,i]),s.useEffect(()=>()=>i(mz.xX.IDLE),[i]);let d=(0,aC.ZC)(e),c=d!==e;return s.useEffect(()=>{c&&n!==mz.xX.STARTED&&i(mz.xX.IDLE)},[c,d,i,n]),{selectFocusNodeForInteractiveInspection:r,doneChangingFocusNodeForInteractiveInspection:l}}(),c=(0,mB.Kv)();return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"focus_canvas_ui--interactiveInspectionTools--k17Pz","data-onboarding-key":r4,children:[(0,i.jsxs)("div",{className:"focus_canvas_ui--inputContainer--mjxzu",children:[(0,i.jsx)(m1,{dimension:"width",onFocus:l,onBlur:d}),(0,i.jsx)(m1,{dimension:"height",onFocus:l,onBlur:d})]}),(0,i.jsx)(mV.M,{consumptionTarget:e8.Jo.FOCUS_NODE,showLibrarySets:!1,onModalWillOpen:l,onModalDidClose:d,displayModeDropdown:!0}),(0,i.jsx)(eZ.E,{"aria-label":(0,p.t)("dev_handoff.workflows.focus_view.reset_button_tooltip"),onClick:()=>{r.w3z?.resetFocusViewInteractiveInspection(),e("dev_mode.focus_view.reset_changes",{node_id:t,node_type:n?"SECTION":"FRAME"})},disabled:!c,recordingKey:"focus_view_reset_button",className:"focus_canvas_ui--resetButton--5fiNB",children:(0,i.jsx)("span",{"aria-hidden":!0,children:(0,i.jsx)(mO.r,{})})})]}),(0,i.jsx)(lt,{})]})}function m5(){let e=(0,a.wA)(),t=(0,a.d4)(e=>e.versionHistory),{Dropdown:n,toggleDropdown:s,dropdownTargetRef:o,isDropdownShown:d}=(0,ol.B)("FOCUS_MODE_NAME_DROPDOWN"),c=(0,A.q5)(),u=(0,j.uQ)(),m=(0,aR.hA)(),h=(0,lp._6)(),f=(0,oR.$A)(h)?h.focusViewBackNavigation:void 0,g=(0,dr.TP)(f?.toEditorType),x=(0,X.U)("focus_view_show_on_page"),_=(0,dr.TQ)(f?.toEditorType),y=(0,b.Fk)((e,t)=>{let n=e.get(t);return n?.canHaveStatus&&n?.hasStatus},m),v=[{displayText:(0,p.t)("dev_handoff.workflows.focus_view.show_canvas"),recordingKey:"dev_handoff.focus.show_on_page",callback:function(){"editorType"in g&&g.editorType===d1.nT.Design&&x("design"),t.activeId&&t.activeId!==lm.V_&&e((0,lm.Eg)()),_("Dev Mode Focus View Go To Canvas Clicked",m)}},{displayText:(0,p.t)("dev_handoff.workflows.focus_view.copy_link"),recordingKey:"dev_handoff.focus.copy_link",callback:()=>{e(oa.lW({stringToCopy:(0,ns.jN)({file:c,nodeId:u,isDevHandoff:!0,devModeFocusId:m,isReadOnly:!0,isFigJam:!1,attributionContext:null})}))}},...(0,l.kc)().dt_interactive_inspection_m2&&y?[{displayText:"",separator:!0},{action:"remove-status-in-focus-view",displayText:(0,p.t)("fullscreen_actions.remove-status-in-focus-view"),recordingKey:"dev_handoff.focus.remove_status",callback:()=>{af.Y5.triggerActionEnum(r.rcl.REMOVE_STATUS_IN_FOCUS_VIEW)}}]:[]];return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{ref:o,children:(0,i.jsx)(uU.d,{"aria-expanded":d,recordingKey:"dev_handoff.focus.options",onClick:s,"aria-label":(0,p.t)("dev_handoff.workflows.more_actions_tooltip"),htmlAttributes:{"data-tooltip-type":e5.Ib.TEXT,"data-tooltip":(0,p.t)("dev_handoff.workflows.more_actions_tooltip")},children:(0,i.jsx)(r1.J,{})})}),(0,i.jsx)(n,{items:v,showPoint:!0})]})}function m4(){let e=(0,a.wA)(),t=(0,I.UX)(),n=(0,aR.hA)(),{isSection:d,focusNodeName:c}=(0,b.Fk)((e,t)=>{let n=e.get(t);return{isSection:n?.isSection,focusNodeName:n?.name}},n),u=(0,b.Fk)(e=>e.getCurrentPage()?.name),m=(0,a.d4)(e=>e.versionHistory),h=(0,iF.U)(),f=(0,X.U)("focus_view_back"),g=(0,ax.ut)((0,v.aY)(),r.FAf.DESIGN),[,x]=(0,o.fp)(dl._o),[_]=(0,o.fp)(dl.wz),C=(0,E.xo)(),j=s.useRef(null),k=(0,a.d4)(e=>(0,oR.$A)(e.selectedView)?{...e.selectedView,editorType:e.selectedView.focusViewBackNavigation?.toEditorType??e.selectedView.editorType,showOverview:e.selectedView.focusViewBackNavigation?.toOverview??!0,focusViewBackNavigation:void 0,devModeFocusId:void 0}:e.selectedView),w=(0,a.d4)(e=>(0,mU.Np)(e,k)),T=k.showOverview?(0,p.t)("dev_handoff.workflows.focus_view.back_to_rfd_tooltip"):(0,p.t)("dev_handoff.workflows.focus_view.back_to_page_tooltip");if((0,y.h)(()=>{j.current?.focus(),n&&r.w3z.focusOnNode(n,!1),g===r.FAf.PROTOTYPE&&(0,v.NT)(r.FAf.DESIGN),h("Dev Mode Focus View Shown",{source:_||"init",node_id:n,node_type:d?"SECTION":"FRAME"},{forwardToDatadog:!0})}),!n)return null;let S=m.activeId&&m.activeId!==lm.V_;return(0,i.jsxs)("div",{ref:j,className:"focus_canvas_ui--container--YwKdJ",style:(0,pE.T)()&&(0,l.kc)().dt_vscode_ready_for_dev?{paddingTop:"0px",paddingBottom:"0px"}:{paddingRight:t},tabIndex:-1,children:[(0,i.jsx)("div",{className:"focus_canvas_ui--background--jKiDi"}),(0,i.jsxs)("div",{className:"focus_canvas_ui--header--gxex-",style:(0,pE.T)()&&(0,l.kc)().dt_vscode_ready_for_dev?{margin:"0px",border:"none"}:void 0,children:[(0,i.jsxs)("div",{className:m2,children:[(0,i.jsx)(nO.lt,{className:"focus_canvas_ui--backLink--oBW-6","data-onboarding-key":ll,onClick:function(t){t.preventDefault();let n="editorType"in k&&k.editorType===d1.nT.Design;!("showOverview"in k&&k.showOverview)&&n&&f("design"),e(sB.sf(k)),m.activeId&&m.activeId!==lm.V_&&e((0,lm.Eg)());let i="unknown";"fullscreen"===k.view&&(i=k.showOverview?"overview":k.editorType===d1.nT.Design?"design_canvas":"dev_mode_canvas"),x("focus_close_clicked"),h("Dev Mode Focus View Close Clicked",{target:i})},href:w,recordingKey:"dev_handoff.workflows.focus.back_link","aria-label":T,"data-tooltip":T,"data-tooltip-type":e5.Ib.TEXT,children:(0,i.jsx)(mR.C,{})}),(0,i.jsx)("div",{className:"focus_canvas_ui--pageBreadcrumb--ZLVL8",children:(0,i.jsx)("span",{className:"focus_canvas_ui--pageBreadcrumbLabel--BPMXr",children:u})}),(0,i.jsx)("span",{className:"focus_canvas_ui--breadCrumbSeparator--tkhRI",children:"/"}),(0,i.jsxs)("div",{className:"focus_canvas_ui--nodeName--kuQ54","data-onboarding-key":ls,children:[d?(0,i.jsx)(mP.P,{}):(0,i.jsx)(mD.v,{})," ",(0,i.jsx)("span",{className:"focus_canvas_ui--nodeNameLabel--f7DnW",children:c})]})]}),(0,i.jsx)("div",{className:"focus_canvas_ui--middleSection--zKEBR",children:(0,i.jsx)(m3,{})}),(0,i.jsxs)("div",{className:eS()(m2,"focus_canvas_ui--right--HaugW"),children:[(0,i.jsx)(m5,{}),!S&&(0,i.jsx)(mG.p,{nodeId:n,sourceForLogging:"focus-ui",onboardingKey:la})]})]}),(0,i.jsx)("div",{className:"focus_canvas_ui--viewportContainer--E-aVJ",style:(0,pE.T)()&&(0,l.kc)().dt_vscode_ready_for_dev?{margin:"0px"}:void 0}),!(0,pE.T)()&&(0,i.jsx)(mq,{}),!(0,pE.T)()&&!C&&(0,i.jsx)(lo,{})]})}function m6(){let e=(0,E._I)(),t=(0,ie.aV)(),n=(0,a.d4)(e=>e.mirror.appModel.showUi),l=(0,is.iZ)(),d=(0,a.wA)(),c=(0,it.I)();(0,io.X_)(),(0,ii.z)({topLevelMode:r.lyf.DEV_HANDOFF,eventName:"Dev Handoff Selection Changed"});let u=(0,A.tS)()??"";return((0,s.useEffect)(()=>{let e=()=>{(0,il.wY)().then(()=>{(0,ir.s2)({userID:l?.id??"",openFileKey:u})})};return e(),e},[e,u,l?.id]),(0,s.useEffect)(()=>{let e;return c||(e=setTimeout(()=>{id.sr.enrollUserInStatusChange({fileKey:u})?.then(e=>{let t=o.zl.get(n4.D);e.data?.meta?.newEnrollment&&!t&&d(n5.jK({userId:l?.id??"",fileKey:u}))})},5e3)),()=>{e&&clearTimeout(e)}},[u,l?.id,d,c]),t||!n)?null:c?(0,i.jsx)(nu,{}):(0,i.jsx)(hn,{})}function m7(){return(0,iT.O)(),null}let m8=(0,u.j)(function(){let e=(0,aR.l7)(),t=(0,aR.hA)(),n=!!(0,l.kc)().ai_assistant_dev_mode,s=(0,E._I)(),a=(0,n8.T)(),r=(0,O.Ye)(),o=(0,M.HY)(),d=(0,M.nb)(),c=(0,M.sG)(),u=(0,eL.O5)(eL.LX.DEV_MODE,{isAIAssistantEnabled:n});return!t&&(s||e)?(0,i.jsxs)("div",{className:"devHandoffLeftPanel displayContents",children:[o&&(0,i.jsx)(M.ur,{canvasInteractions:u}),(0,i.jsx)(eD.Q,{ignoreRulers:e,shouldAnimate:!a,...d,children:r?(0,i.jsx)(eO.s,{}):(0,i.jsx)(eM.$,{...c,children:o?(0,i.jsx)(ht,{}):(0,i.jsx)(he,{})})})]}):null},"DevModeLeftPanel");function m9(){let e=(0,aR.X0)(),t=(0,np.e)(),n=(0,aR.l7)();return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(eR.d,{shouldUseBottomBorder:!e&&!t}),n?(0,i.jsx)(hs,{}):t?(0,i.jsx)(nX,{}):(0,i.jsx)(hi,{})]})}function he(){return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(eO.s,{}),(0,i.jsx)(eP.n,{}),(0,i.jsx)(m9,{})]})}function ht(){let[e,t]=(0,iS.fF)(),n=s.useCallback(()=>{c.az.trackDefinedEvent("ui3_platform.canvas_interaction_tab_close",{name:(0,eL.p2)(e),editorType:"dev_handoff"}),t(iS.NA.FILE)},[e,t]),a=(0,O.GQ)(),l={configurationKey:"devmode.assistant-release-0",globalOptions:{editorType:r._YF.DEV_HANDOFF}},o=s.useCallback(()=>e!==iS.NA.FILE&&(n(),!0),[n,e]);switch((0,n6.O1)(o,n6.KD.NON_DEFAULT_LEFT_RAIL_VIEW),e){case iS.NA.SEARCH:return(0,i.jsx)(d.Zf,{canvasActionName:(0,p.t)("design.navbar.find"),onClose:n,children:(0,i.jsx)(iw.EA.Provider,{value:!1,children:(0,i.jsx)(iE.f,{showFilter:!0})})});case iS.NA.CHAT:return(0,i.jsx)(iI.x,{width:a,handleClose:n,assistantOptionOverrides:l});default:return(0,i.jsx)(m9,{})}}let hn=s.memo(function(){s.useEffect(()=>mI.K,[]);let e=s.useMemo(()=>N.z4.getIsExtension(),[]),t=(0,aR.l7)(),n=(0,np.e)(),r=(0,m.D)(),o=!!(0,aR.hA)()&&r&&!t&&!n,d=(0,E.xo)();return(0,iN.uj)(),(0,iN.vy)(),s.useEffect(()=>{(0,n7.px)().prepareVmIfNeeded()},[]),(0,mS.W)(1700),!function(){let e=(0,m.D)(),t=(0,ia.f)("dev_mode_notified_of_approved_org_request"),n=(0,a.wA)();s.useEffect(()=>{e&&!t&&n(n3.b({dev_mode_notified_of_approved_org_request:!0}))},[n,e,t])}(),(0,i.jsxs)(h.si,{children:[e?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(mT,{}),(0,l.kc)().dt_vscode_ready_for_dev&&(0,i.jsx)(m4,{})]}):(0,i.jsxs)(i.Fragment,{children:[o&&(0,i.jsx)(m4,{}),!t&&!n&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(pd,{}),!d&&(0,i.jsx)(ic.p,{children:(0,i.jsx)(s8,{})}),!d&&(0,i.jsx)(ic.p,{children:(0,i.jsx)(ik,{})}),!d&&(0,i.jsx)(ic.p,{children:(0,i.jsx)(mM,{})}),(0,i.jsx)(m7,{})," "]})]}),(0,i.jsx)(w.uL,{})]})});function hi(){let e=(0,n9.L3)();return(0,i.jsx)(i.Fragment,{children:e?(0,i.jsx)(iw.EA.Provider,{value:!1,children:(0,i.jsx)(iE.f,{showFilter:!0})}):(0,i.jsx)(a5,{})})}function hs(){return(0,i.jsx)(a5,{})}},944380:(e,t,n)=>{n.d(t,{o:()=>S});var i=n(104076),s=n(716976),a=n(237420),r=n(266808),l=n(725837),o=n(409019),d=n(472088),c=n(192075),u=n(549571),p=n(249586),m=n(643077),h=n(962212),f=n(211862),g=n(629560),x=n(85598),_=n(844182),y=n(65554),v=n(90453),b=n(137783),C=n(748672),j=n(502047),k=n(481836),w=n(118752),E=n(742549),T=n(691952);function S(){let e=(0,E.l7)(),t=(0,o.F)(e),n=(0,_.n0)(),S=(0,j.K)(),I=(0,f.tS)(),{height:N,setHeight:A,isOpen:L,setIsOpen:M,devHandoffShowAllPages:O,setDevHandoffShowAllPages:R}=(0,k.d)({defaultIsOpen:n.length>1}),P=(0,o.F)(L);(0,s.useLayoutEffect)(()=>{e&&M(!0)},[e,M]);let D=(0,a.Pj)(),F=s.useCallback(()=>{if(t.current)return;let e=!P.current;(0,p.ds)("pages_panel_open_toggle",I,D.getState(),{isPagesOpen:e},{forwardToDatadog:!0}),M(e)},[I,P,M,t,D]),{pagesToDisplay:z,showAllButton:B}=function({pagesList:e,showAll:t,setShowAll:n}){let s=(0,u._I)(),a=(0,m.dh)();if(!s)return{pagesToDisplay:e};let l=!1,o=e.filter(e=>{let t=r.glU.nodeStatusesOnPage(e.nodeId).length>0;return t&&(l=!0),t||e.nodeId===a});return l&&o.length!==e.length?t?{pagesToDisplay:e,showAllButton:(0,i.jsx)(d.d,{label:(0,c.t)("dev_handoff.pages.hide_other"),onClick:()=>n(!1)})}:{pagesToDisplay:o,showAllButton:(0,i.jsx)(d.d,{label:(0,c.t)("dev_handoff.pages.show_all"),onClick:()=>n(!0)})}:{pagesToDisplay:e}}({pagesList:n,showAll:O,setShowAll:R}),G=!(0,h.T)(),U=e?y.uF:y.uF+72+32,V=(0,_._4)(),H=(0,a.wA)(),K=(0,s.useCallback)(()=>{(0,w._$)(H,l.D.getState().selectedView,"overview_search_clicked"),V()},[H,V]),W=(0,x.HY)();return(0,i.jsxs)(v.A,{isFullHeight:!1,children:[(0,i.jsx)(T.$,{devFocusedOnboarding:!0}),I&&(0,i.jsx)(g.QU,{fileKey:I}),(0,i.jsx)(C.R,{extraControls:(0,i.jsx)("div",{className:"dev_handoff_page_selector--showMoreContainer--d2XTe",children:B}),filterState:O?b.m.ALL:b.m.FILTERED,height:N,isOpen:L,isReadOnly:!0,onCanvasSearch:W?void 0:K,onHeightChange:A,onPageContextMenu:S,onToggle:F,pages:z,panelHeadersHeight:U,shouldHighlightActivePage:!e,showHeader:G})]})}},359379:(e,t,n)=>{n.d(t,{LE:()=>eF,$1:()=>ek,SG:()=>eO,aX:()=>eA,IP:()=>eM,p0:()=>eL,tR:()=>eN});var i=n(104076),s=n(716976),a=n(237420),r=n(638004),l=n(307829),o=n(684742),d=n(420680),c=n(419822),u=n(826220),p=n(268389),m=n(989941),h=n(452981),f=n(820400),g=n(620480),x=n(853943),_=n(266808),y=n(795033),v=n(776111),b=n(511570),C=n.n(b),j=n(9378),k=n.n(j),w=n(316520),E=n.n(w),T=n(883765),S=n(983500),I=n(449572),N=n(641518),A=n(550209),L=n(630615),M=n(192075),O=n(58212),R=n(638641),P=n(146434),D=n(609668),F=n(315361),z=n(663355),B=n(968169),G=n(802529),U=n(772523),V=n(643077),H=n(176836),K=n(754446),W=n(506192),q=n(74620),X=n(211862),Y=n(746005),Z=n(59849),J=n(331497),Q=n(706964),$=n(835307),ee=n(71553),et=n(863995),en=n(349311),ei=n(386958);let es=new class{async getZip(e,t,n){let i=JSON.stringify({sha1s:t,names:n});try{let t=await fetch(`/file/${e}/image/batch_download`,{method:"POST",body:i,headers:{"Content-Type":"application/json","Content-Length":`${i.length}`,Accept:"application/zip"}});if(!t.ok||200!==t.status)return{error:!0};let n=await t.blob();return{imagesZip:await n.arrayBuffer(),error:!1}}catch(e){return{error:!0}}}},ea=new class{async getExtensions(e,t,n){let i=JSON.stringify({sha1s:t});await fetch(`/file/${e}/image/file_extensions`,{method:"POST",body:i,headers:{"Content-Type":"application/json","Content-Length":`${i.length}`,Accept:"application/json"}}).then(e=>{e.json().then(e=>{let t=e?.meta?.extensions;t&&Object.keys(t).length>0&&n(t)})}).catch(()=>{n({})})}};var er=n(763286),el=n(896327),eo=n(372677),ed=n(896058),ec=n(861671),eu=n(946300),ep=n(347080);let em="asset_panel--addPadding--rCBwV",eh="asset_panel--exportDropdown--Vh-cX",ef="asset_panel--exportMeta--C-dRt",eg="asset_panel--dot--dR7Yw",ex="asset_panel--sourceName--uwyAu ellipsis--ellipsis--Tjyfa",e_=4*(0,S.jz)(ep.devHandoffAssetPreviewMaxWidth),ey=4*(0,S.jz)(ep.devHandoffAssetPreviewMaxHeight),ev=(0,y.E3)("asset_panel_export_list",{[et.PW.ASSET_ICON]:[eC("SVG")],[et.PW.ASSET_ILLUSTRATION]:[eC("SVG")],[et.PW.ASSET_IMAGE]:[eC("PNG")],[et.PW.ASSET_GIF]:void 0}),eb=(0,y.E3)("asset_panel_img_include_source",!0);function eC(e){let t=(0,ec.jj)([]);return"JPEG"===e||"PDF"===e?{...t,imageType:e,quality:1}:"SVG"===e?{...t,imageType:e,svgOutlineText:!1,svgIDMode:"IF_NEEDED",svgForceStrokeMasks:!1}:{...t,imageType:e}}let ej={format:e=>{switch(e){case"PNG":return"PNG";case"JPEG":return"JPG";case"SVG":return"SVG";case"PDF":return"PDF"}return e}},ek=s.memo(({assetInfo:e,media:t=[],addPadding:n=!0})=>{let r=(0,v.nl)(),c=(0,X.tS)(),[u,p]=(0,y.fp)(D.g6),m=!eS()||u,h=(0,a.d4)(e=>e.saveAsState),x=(0,J.J2)((0,B.UK)().showGuids),{assetId:b,assetName:j,thumbnailVersion:k}=e,w=e.instancesGUIDs?.[0]??e.duplicateGUIDs?.[0]??b,E=(0,P.O)({assetId:w,thumbnailVersion:k,width:e_,height:ey,scale:4}),S=function(e,t){let n=(0,y.md)(ev),i=t&~et.PW.ASSET_COMPONENT,s=[eC(i&(et.PW.ASSET_ICON|et.PW.ASSET_ILLUSTRATION)?"SVG":"PNG")];return void 0===i||i===et.PW.NOT_ASSET||i===et.PW.ASSET_VIDEO||i===et.PW.ASSET_GIF?[]:n?.[i]||s}(0,e.type),I=e.type&(et.PW.ASSET_ICON|et.PW.ASSET_ILLUSTRATION)?"SVG":"PNG",N=S?.[0]?.imageType,A=s.useMemo(()=>S?.length&&N?S.every(e=>e.imageType===N)?(0,M.t)("dev_handoff.assets.files_same_format",{count:S.length,format:N}):(0,M.t)("dev_handoff.assets.files",{count:S.length}):I,[S,N,I]),L=(0,a.wA)(),{getTriggerProps:O,manager:R}=l.b(),{getTriggerProps:F,manager:G}=l.b(),V=s.useCallback(async e=>{m||(e.stopPropagation(),(0,T.sx)("Asset Panel Export Clicked"),p(!0),await (0,Q.Dc)(Q.hV.Export,h,L,"export-assets-handoff",[w],"export-assets-handoff",{guids:[w],exportSettings:S?.length?S:[eC(I)]}),L(z.rg()),R.isOpen&&R.setOpen(!1),p(!1))},[w,I,m,L,S,R,h,p]),H=e?.instancesGUIDs?.[0]??b,K=s.useCallback(()=>{U.tJ([H]),L((0,D.vI)(H))},[L,H]),W=s.useMemo(()=>[...e?.instancesGUIDs??[],...e?.duplicateGUIDs??[],b],[b,e?.duplicateGUIDs,e?.instancesGUIDs]),q=!!(e.type&et.PW.ASSET_ICON),Y=!!(e.type&et.PW.ASSET_IMAGE),Z=!!(e.type&et.PW.ASSET_GIF),$=!!(e.type&et.PW.ASSET_VIDEO),ee=Z||$,ei=!!(e.type&et.PW.ASSET_ILLUSTRATION),es=(q||Y)&&!ee,ea=t?.length>0&&!!c;return(0,i.jsx)("div",{className:C()("asset_panel--assetContainer----LF9",{[em]:n}),onMouseEnter:()=>_.Ez5?.canvasViewState().temporarilyHoveredNodes.set(W),onMouseLeave:()=>_.Ez5?.canvasViewState().temporarilyHoveredNodes.set([]),children:(0,i.jsxs)("div",{className:C()("asset_panel--assetRow--0VUJr text--fontPos11--2LvXf text--_fontBase--QdLsd",{"asset_panel--forceHovered--GZMWo":R.isOpen||r,[em]:n}),children:[(0,i.jsx)(o.E,{className:"asset_panel--assetPreview--nTOgs",style:E.backgroundStyle,onClick:K,"data-tooltip-type":en.Ib.TEXT,"data-tooltip":(0,M.t)("inspect_panel.interactions.select_layer"),children:E&&(0,i.jsx)(er.J,{src:E.url,style:E.imgStyle})}),(0,i.jsxs)("div",{className:"asset_panel--assetDetails--xfCbP",children:[(0,i.jsx)("div",{className:"asset_panel--assetName--exM4m ellipsis--ellipsis--Tjyfa",children:x?`${j} (${b})`:j}),(0,i.jsx)("div",{className:"asset_panel--assetType--hIg9Q ellipsis--ellipsis--Tjyfa text--fontPos11--2LvXf text--_fontBase--QdLsd",children:(0,i.jsx)(D.$R,{assetInfo:e,media:es?t:[],dataTestId:"assetPanel",hideDot:!0})})]}),(0,i.jsxs)("div",{className:"asset_panel--buttons--QytN9",children:[(es||ei)&&(0,i.jsx)("div",{className:"asset_panel--exportIcon--aQQXS",children:ea?(0,i.jsxs)(l.bL,{manager:R,children:[(0,i.jsxs)(o.E,{"aria-label":m?(0,M.t)("fullscreen.properties_panel.export_disabled"):(0,M.t)("fullscreen.export.export"),htmlAttributes:{"data-tooltip":m?(0,M.t)("fullscreen.properties_panel.export_disabled"):(0,M.t)("fullscreen.export.export"),"data-tooltip-type":en.Ib.TEXT},disabled:m,className:eh,recordingKey:`export-${b}`,...O(),children:[(0,i.jsx)(f.W,{}),(0,i.jsx)(g.r,{})]}),(0,i.jsxs)(l.mc,{children:[t.map(e=>(0,i.jsx)(ew,{asset:e,onClose:()=>R.setOpen(!1)},e.hash)),(0,i.jsx)(l.q7,{onClick:V,recordingKey:"asset-export-layer",children:(0,i.jsxs)("div",{children:[(0,M.t)("fullscreen.export.layer_export"),(0,i.jsx)(l.ME,{children:(0,i.jsxs)("div",{className:ef,children:[(0,i.jsx)(D.$R,{assetInfo:e,dataTestId:"assetPanel",hideDot:!0}),(0,i.jsx)("div",{className:eg,children:"\xb7"}),(0,i.jsx)("div",{className:ex,children:ej.format(A)})]})})]})})]})]}):(0,i.jsx)(d.K,{onClick:V,"aria-label":m?(0,M.t)("fullscreen.properties_panel.export_disabled"):(0,M.t)("fullscreen.export.export"),disabled:m,htmlAttributes:{"data-tooltip":m?(0,M.t)("fullscreen.properties_panel.export_disabled"):(0,M.t)("fullscreen.export.export"),"data-tooltip-type":en.Ib.TEXT},recordingKey:`export-${b}`,children:(0,i.jsx)(f.W,{})})}),ee&&(0,i.jsx)(i.Fragment,{children:m?(0,i.jsx)(d.K,{"aria-label":(0,M.t)("fullscreen.properties_panel.export_disabled"),disabled:!0,htmlAttributes:{"data-tooltip":(0,M.t)("fullscreen.properties_panel.export_disabled"),"data-tooltip-type":en.Ib.TEXT},children:(0,i.jsx)(f.W,{})}):t.length>1?(0,i.jsxs)(l.bL,{manager:G,children:[(0,i.jsxs)(o.E,{"aria-label":(0,M.t)("fullscreen.export.export"),htmlAttributes:{"data-tooltip":(0,M.t)("fullscreen.export.export"),"data-tooltip-type":en.Ib.TEXT},className:eh,recordingKey:`export-${b}`,...F(),children:[(0,i.jsx)(f.W,{}),(0,i.jsx)(g.r,{})]}),(0,i.jsx)(l.mc,{children:t.map(e=>(0,i.jsx)(ew,{asset:e,onClose:()=>G.setOpen(!1)},e.hash))})]}):(0,i.jsx)(eE,{assetInfo:e})})]})]})})});function ew({asset:e,onClose:t}){let n=(0,X.tS)()??"",r=(0,a.wA)(),{ref:o,...d}=(0,el.X)(e.name),{name:c,extension:u}=e,p=s.useCallback(e=>{e.stopPropagation(),t(),r(z.aK())},[r,t]);return(0,i.jsx)(l.N_,{href:(0,ed.Me)(n,e.hash),download:e.name,onClick:p,htmlAttributes:d,recordingKey:"asset-export-source",children:(0,i.jsxs)("div",{children:[(0,M.t)("fullscreen.export.source"),(0,i.jsx)(l.ME,{children:(0,i.jsxs)("div",{className:ef,children:[(0,i.jsx)(D.yP,{pxWidth:e.width,pxHeight:e.height,dataTestId:"assetPanel"}),(0,i.jsx)("div",{className:eg,children:"\xb7"}),(0,i.jsx)("div",{className:ex,"data-content-start":c,"data-content-end":u?`.${u}`:void 0,ref:o})]})})]})})}function eE({assetInfo:e}){let t=(0,$.Fk)((e,t)=>{if(!t)return null;let n=e.get(t);return n?H.N9(n?.fills)?.filter(e=>e.opacity>0&&e.visible):null},e?.assetId);return((0,D.p2)(e)||(0,D.cZ)(e))&&t&&t.length&&t[0]?(0,i.jsx)(ed.iV,{image:t[0],loadingChildren:(0,i.jsx)(c.k,{}),variant:"icon",children:(0,i.jsx)(f.W,{})}):null}function eT({asset:e,assetId:t}){let{thumbnailVersion:n}=e??{},s=(0,P.O)({assetId:t,thumbnailVersion:n,width:64,height:64,scale:4});return(0,i.jsx)("div",{className:"asset_panel--assetIcon--UkKSP",style:s.backgroundStyle,children:(0,i.jsx)(er.J,{className:"asset_panel--assetIconImg--gWZof",src:s.url})})}function eS(){let e=(0,X.tS)()??"",t=(0,I.bc)(Z.nlH,{key:e});return!!(0,v.nl)()||t.data?.file&&"error"!==t.data.file.status&&t.data?.file?.data?.hasPermission}function eI({chits:e,totalItems:t}){return(0,i.jsxs)("span",{className:"asset_panel--assetIconRow--O43sG",children:[e.map(e=>(0,i.jsx)(eT,{asset:e,assetId:e?.instancesGUIDs?.[0]??e?.duplicateGUIDs?.[0]??e.assetId},e.assetId)),t>3&&(0,i.jsxs)("span",{children:["+",t-3]})]})}function eN(){let e=(0,X.tS)()??"",t=(0,y.md)(ee.O),[n,i]=(0,y.fp)(D.Qm);return s.useEffect(()=>{if(!t)return;let s=new Set(Object.keys(n)),a=Object.values(t).filter(e=>"video"!==e.type&&!s.has(e.hash)).map(e=>e.hash);a.length>0&&e&&ea.getExtensions(e,a,e=>i(t=>({...t,...e})))},[t,e,n,i]),s.useMemo(()=>{let e={};if(!t)return e;let i=new Set(Object.keys(n));for(let s of Object.values(t))if("video"!==s.type&&s.guids){let t=i.has(s.hash)?n?.[s.hash]:void 0;for(let n of s.guids){let i={...s,extension:t};e[n]=[...e[n]??[],i]}}return e},[n,t])}function eA(e){switch(e){case et.PW.ASSET_ICON:return(0,M.t)("dev_handoff.assets.icons_download");case et.PW.ASSET_ILLUSTRATION:return(0,M.t)("dev_handoff.assets.illustrations_download");case et.PW.ASSET_IMAGE:return(0,M.t)("dev_handoff.assets.images_download");case et.PW.ASSET_GIF:return(0,M.t)("dev_handoff.assets.gifs_download");default:return(0,M.t)("fullscreen.export.export")}}function eL({assetType:e,assets:t,mediaByGuid:n}){let[i,l]=(0,y.fp)(D.g6),[o,d]=s.useState(!1),c=!eS()||i||o,u=(0,X.q5)(),p=(0,a.d4)(e=>e.saveAsState),m=(0,a.wA)(),h=(0,y.md)(ev)[e],f=(0,y.md)(eb),g=(0,F.uQ)(),x=(0,V.dh)(),v=g??x,b=!h||0===h.length,C=s.useMemo(()=>e!==et.PW.ASSET_GIF&&(e===et.PW.ASSET_IMAGE?b&&!f:b),[b,f,e]),j=E()(Object.values(n??{})).filter(t=>t.type===(e===et.PW.ASSET_GIF?"gif":"image")),w=s.useMemo(()=>(e===et.PW.ASSET_GIF||e===et.PW.ASSET_IMAGE&&!!f)&&j.length>20,[e,f,j.length]);return{onExportAll:s.useCallback(async n=>{let i=e===et.PW.ASSET_GIF,s=e===et.PW.ASSET_IMAGE,a=Object.keys(t).map(e=>t[e]?.instancesGUIDs?.[0]??t[e]?.duplicateGUIDs?.[0]??e),o=(s&&f||i)&&!!j.length,g=!!a.length,x=!!h?.length;if(c||!(g&&x||o)||!_.w3z||!u)return;n.stopPropagation(),d(!0),l(!0),(0,T.sx)("Asset Panel Export Clicked");let y=a.length*(h?.length??0);m(O.F.enqueue({message:o?(0,M.t)("dev_handoff.assets.preparing_time",{count:(x?y:0)+j.length}):(0,M.t)("dev_handoff.assets.preparing",{count:y}),icon:R.zX.SPINNER,preventDismissal:!0,type:"dev-mode-all-asset-download"}));let b=!1;try{let t=o&&x&&!i,n=[];if(o){let e=await es.getZip(u.key,j.map(e=>e.hash),j.map(e=>e.name||e.hash));if(e.error)m(O.F.enqueue({message:(0,M.t)("dev_handoff.assets.too_many_image_sources"),icon:R.zX.EXCLAMATION,timeoutOverride:1/0,error:!0}));else{let{imagesZip:s}=e;if(t){let e=new(k())().load(new Uint8Array(s));for(let t of Object.keys(e.files)){if(!e.files[t])continue;let s=e.files[t].asUint8Array(),a=i?"gif":t.includes("jp")?"jpg":"png";n.push({filename:`source/${t}`,jsBuffer:s,mimeType:`image/${a}`,error:""})}}else(0,ed.PE)(new Blob([s]),`${u.name}_${i?"gif":"img"}.zip`);m(z.aK()),b=!0}}t&&n.length&&_.w3z.prepareSourceImagesForZip(n),!i&&h?.length&&(await (0,Q.Dc)(Q.hV.Export,p,m,"export-assets-handoff",[v],"export-assets-handoff",{guids:a,exportSettings:h,assetType:(0,D.Vx)(e),withSourceImages:t&&!!n.length}),m(z.rg()))}catch(e){(0,A.$D)(r.e.DEV_MODE,e),o&&j.length>1&&!b&&m(O.F.enqueue({message:(0,M.t)("dev_handoff.assets.too_many_image_sources"),icon:R.zX.EXCLAMATION,timeoutOverride:1/0,error:!0}))}finally{m(O.F.dequeue({matchType:"dev-mode-all-asset-download"})),d(!1),l(!1)}},[j,t,e,c,m,h,f,u,v,p,l]),isLocalExporting:o,nothingToExport:C,tooManyMediaToExport:w}}function eM(e){switch(e){case et.PW.ASSET_ICON:return(0,M.t)("dev_handoff.assets.icons_open_settings");case et.PW.ASSET_ILLUSTRATION:return(0,M.t)("dev_handoff.assets.illustrations_open_settings");case et.PW.ASSET_IMAGE:return(0,M.t)("dev_handoff.assets.images_open_settings");default:return(0,M.t)("general.open")}}function eO({assetType:e,rowRef:t,onClose:n,pickerPosition:r}){r=t.current?r||(0,ei.cn)(t.current,248):void 0;let[l,o]=(0,y.fp)(ev),[d,c]=(0,y.fp)(eb),f=(0,a.wA)(),g=(0,W.Um)(),x=(0,Y.Xo)(),v=(0,X.q5)(),b=(0,q.p8)("currentSelectedProperty"),C=l?.[e],j=s.useCallback(t=>{o({...l,[e]:t})},[e,l,o]),k=s.useCallback(()=>{let e=C||[],t=(0,ec.jj)(e);j(e.concat([t]))},[C,j]),w=s.useCallback(e=>{let t=C||[],n=(0,ec.jj)(t);if("PNG"===e){j(t.concat([n]));return}(0,ec.MU)(n,e,()=>j(t.concat([n])))},[C,j]),E=function(e){switch(e){case et.PW.ASSET_ICON:return(0,M.t)("dev_handoff.assets.icons_settings");case et.PW.ASSET_ILLUSTRATION:return(0,M.t)("dev_handoff.assets.illustrations_settings");case et.PW.ASSET_IMAGE:return(0,M.t)("dev_handoff.assets.images_settings");default:return(0,M.t)("general.settings")}}(e);return(0,i.jsx)(u.bL,{onClose:n,defaultPosition:r,width:"sm",children:(0,i.jsxs)(p.vo,{children:[(0,i.jsx)(p.Y9,{children:(0,i.jsx)(p.hE,{children:E})}),(0,i.jsxs)(p.nB,{padding:0,children:[(0,i.jsx)(ec.df,{addProperty:k,currentSelectedProperty:b,dispatch:f,dropdownShown:g,entrypointMenu:(0,i.jsx)(eu.n3,{addExportOfType:w}),idPrefix:`assetType${e}-`,onChange:j,openFile:v,pickerShown:x,propertyList:C,recordingKey:N.Pt("assets",e,"exportList"),selectedPropertyType:_.rrT.ASSET_ALL_EXPORT}),(0,i.jsx)("div",{className:"asset_panel--settingsModalRow--MxPJl",children:e===et.PW.ASSET_IMAGE&&(0,i.jsx)(m.S,{checked:d,onChange:c,label:(0,i.jsx)(h.J,{children:(0,M.tx)("dev_handoff.assets.images_include_source")})})})]})]})})}function eR({assetType:e,assets:t,mediaByGuid:n,rowRef:a}){let{getTriggerProps:r,manager:o}=l.b(),c=(0,y.md)(D.g6),[u,p]=s.useState(!1),{onExportAll:m,isLocalExporting:h,nothingToExport:f,tooManyMediaToExport:g}=eL({assetType:e,assets:t,mediaByGuid:n}),_=!eS()||c||h,v=function(e){switch(e){case et.PW.ASSET_ICON:return(0,M.t)("dev_handoff.assets.icons_download_menu");case et.PW.ASSET_ILLUSTRATION:return(0,M.t)("dev_handoff.assets.illustrations_download_menu");case et.PW.ASSET_IMAGE:return(0,M.t)("dev_handoff.assets.images_download_menu");case et.PW.ASSET_GIF:return(0,M.t)("dev_handoff.assets.gifs_download_menu");default:return(0,M.t)("dev_handoff.assets")}}(e),b=eM(e),C=eA(e);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(l.bL,{manager:o,children:[(0,i.jsx)(d.K,{"aria-label":_?(0,M.t)("fullscreen.properties_panel.export_disabled"):v,htmlAttributes:{"data-tooltip":_?(0,M.t)("fullscreen.properties_panel.export_disabled"):v,"data-tooltip-type":en.Ib.TEXT},disabled:_,recordingKey:`assets-download-menu-${eP(e)}`,...r(),children:(0,i.jsx)(x.J,{})}),(0,i.jsxs)(l.mc,{children:[(0,i.jsx)(l.q7,{onClick:m,disabled:g||f,recordingKey:`assets-download-all-${eP(e)}`,children:(0,i.jsxs)("div",{className:"asset_panel--downloadAllMenuItem--8NlXq",children:[C,g?(0,i.jsx)(l.ME,{children:(0,M.tx)("dev_handoff.assets.too_many_image_sources_disabled")}):f?(0,i.jsx)(l.ME,{children:(0,M.tx)("dev_handoff.assets.nothing_to_export")}):null]})}),e!==et.PW.ASSET_GIF&&(0,i.jsx)(l.q7,{onClick:()=>p(!0),recordingKey:`assets-download-open-settings-${eP(e)}`,children:b})]})]}),u&&(0,i.jsx)(eO,{assetType:e,rowRef:a,onClose:()=>p(!1)})]})}function eP(e){switch(e){case et.PW.ASSET_ICON:return"icons";case et.PW.ASSET_ILLUSTRATION:return"illustrations";case et.PW.ASSET_IMAGE:return"images";case et.PW.ASSET_GIF:return"gifs";case et.PW.ASSET_VIDEO:return"videos";default:return"assets"}}function eD({items:e,mediaByGuid:t,assetType:n}){let a=s.useMemo(()=>Object.keys(e??{}),[e]),{visibleItems:r,showMoreButton:l,totalItems:o}=(0,L.y)({items:a,pageSize:3,shouldResetOnSelectionChange:!0}),d=s.useRef(null);if(0===o||!e)return null;let c=n!==et.PW.ASSET_VIDEO;return(0,i.jsxs)(eo.VZ,{title:function(e){switch(e){case et.PW.ASSET_ICON:return(0,M.t)("dev_handoff.assets.icons");case et.PW.ASSET_ILLUSTRATION:return(0,M.t)("dev_handoff.assets.illustrations");case et.PW.ASSET_IMAGE:return(0,M.t)("dev_handoff.assets.images");case et.PW.ASSET_GIF:return(0,M.t)("dev_handoff.assets.gifs");case et.PW.ASSET_VIDEO:return(0,M.t)("dev_handoff.assets.videos");default:return(0,M.t)("dev_handoff.assets")}}(n),recordingKey:eP(n),isSubsection:!0,noBorder:!0,additionalHeaders:c?(0,i.jsx)(eR,{assetType:n,assets:e,mediaByGuid:t,rowRef:d}):void 0,headerRef:d,children:[r.map(n=>e[n]?(0,i.jsx)(ek,{assetInfo:e[n],media:t?.[n]},n):null),l]})}function eF(){let e=(0,K.Gt)("assets"),t=eN();if(!e)return null;let{totalAssets:n=0,chits:s,icons:a,illustrations:r,images:l,gifs:o,videos:d}=e;return 0===n?null:(0,i.jsx)(i.Fragment,{children:n>0&&(0,i.jsxs)(eo.VZ,{hideHeader:G.z4.getIsExtension(),title:(0,M.t)("dev_handoff.assets"),recordingKey:"assets",collapsiblePanelKey:"assets",collapsedHeaders:(0,i.jsx)(eI,{chits:Object.values(s??{}),totalItems:n}),children:[(0,i.jsx)(eD,{items:a,assetType:et.PW.ASSET_ICON}),(0,i.jsx)(eD,{items:r,assetType:et.PW.ASSET_ILLUSTRATION}),(0,i.jsx)(eD,{items:l,assetType:et.PW.ASSET_IMAGE,mediaByGuid:t}),(0,i.jsx)(eD,{items:o,assetType:et.PW.ASSET_GIF,mediaByGuid:t}),(0,i.jsx)(eD,{items:d,assetType:et.PW.ASSET_VIDEO})]})})}},83734:(e,t,n)=>{n.d(t,{Xn:()=>b,dU:()=>j,xY:()=>C});var i=n(716976),s=n(237420),a=n(795033),r=n(357524),l=n(883765),o=n(76616),d=n(166887),c=n(744374),u=n(315361),p=n(373550),m=n(366535),h=n(553065),f=n(74620),g=n(211862),x=n(592726),_=n(835307),y=n(312387),v=n(260309);function b(e){let t=(0,u.uQ)(),{backingSymbolGUID:n}=(0,v.$)([e??""]),a=i.useMemo(()=>null===n||(0,h.gl)(n)?null:n,[n]),r=(0,s.wA)();return i.useCallback(()=>{e&&a&&(o.sn.reset("dev_handoff.view_history",e),o.sn.start("dev_handoff.view_history",{key:e}),(0,l.sx)("Diff Modal Compare Changes Clicked",{nodeId:e,mainComponentNodeId:a,origin:"cc_overrides"}),r(m.to({type:y.ku,data:{changeNodeId:e,basisNodeId:a,initialSelectedNodeId:t&&t!==e?t:void 0,isComparingOverrides:!0}})))},[r,t,e,a])}function C(e){let t=(0,c.wS)(),n=(0,u.uQ)(),a=(0,s.wA)(),r=(0,d.U)();return i.useCallback(()=>{n&&"loaded"===t.status&&(r("Diff Modal Compare Changes Clicked",{nodeId:n,origin:"cc_detached_component"}),o.sn.reset("dev_handoff.view_history",n),o.sn.start("dev_handoff.view_history",{key:n}),a(m.to({type:y.jo,data:{nodeId:n,detachedInfoStatus:t,origin:e}})))},[n,t,r,a,e])}function j(e,t){let n=x.iZ()?.id,d=(0,u.uQ)(),c=(0,_.Fk)((e,t)=>e?.get(t??"")?.name.trim(),d),h=(0,g.tS)(),v=(0,s.wA)(),b=(0,a.md)(p.d),C=(0,f.eY)();return i.useCallback(()=>{if(o.sn.reset("dev_handoff.view_history",e||void 0),o.sn.start("dev_handoff.view_history",{key:e||void 0}),(0,l.sx)("Diff Modal Compare Changes Clicked",{userId:n,fileKey:h,frameId:e,entrypoint:"lego_layer",analyticsEventOrigin:t}),e){let t=(0,r.BJ)(C,e,!0);if(t){let n=t.lastEditedAt;b[e]=new Date(n),a.zl.set(p.d,{...b})}}v(m.to({type:y.EH,data:{nodeId:e,layerName:c}}))},[t,v,h,e,c,C,b,n])}},314838:(e,t,n)=>{n.d(t,{ul:()=>_});var i=n(104076),s=n(716976),a=n(266808),r=n(264993),l=n(511570),o=n.n(l),d=n(983500),c=n(192075),u=n(451837),p=n(165505),m=n(744374),h=n(454273),f=n(763286),g=n(347080);let x=(0,d.jz)(g.devHandoffComponentPreviewMaxHeight);function _({overPropTable:e,overPlaygroundButton:t}){let n=(0,u.rL)(),l=(0,h.ro)(),d=n-64,g=function(e,t=x){let n=(0,m.wS)(),i=(0,h.lA)(),l="loaded"===n.status&&n.result.dataComponentId?n.result.dataComponentId:i?.guid,o=(0,p.c6)(l),d="loaded"===n.status&&"temp-scene"===n.result.dataLocation,c=4*e,u=4*t;return s.useMemo(()=>{if(!l)return;let e=a.glU.getDefaultStateForLocalStateGroup(l)||l;if(!(0,r.fn)((0,r.sH)(e)))return;let[t,n]=a.Vzr.generateThumbnailForNode(e,c,u,4,{forceContentsOnly:!0,inDetachedComponentsScene:d});if(!n||0===n.length||!t)return;let{width:i,height:s}=t;return{url:URL.createObjectURL(new Blob([n])),backgroundStyle:o,renderWidth:i/4,renderHeight:s/4}},[o,d,l,u,c])}(d);if(!l)return null;let _=g?.renderWidth??d,y=g?.renderHeight??x;return(0,i.jsx)("div",{className:o()("component_preview_panel--componentPreviewContainer--aKLR0 common--well--J0WtH",{"component_preview_panel--overPropTable--c8HQR":e,"component_preview_panel--overPlaygroundButton--cn0Sd":t&&!e}),style:g?.backgroundStyle,children:g?.url&&(0,i.jsx)(f.J,{className:"component_preview_panel--componentPreviewImage--AZj5d",src:g.url,style:{maxWidth:_,maxHeight:y},alt:(0,c.t)("dev_handoff.component_preview.alt_text")})})}},886083:(e,t,n)=>{n.d(t,{g:()=>D,m:()=>F});var i=n(104076),s=n(716976),a=n(237420),r=n(684742),l=n(293422),o=n(141509),d=n(324416),c=n(153730),u=n(247985),p=n(887953),m=n(266808),h=n(511570),f=n.n(h),g=n(883765),x=n(630615),_=n(192075),y=n(454273),v=n(121974),b=n(366535),C=n(802529),j=n(553065),k=n(371952),w=n(76365),E=n(349311),T=n(739710),S=n(564236),I=n(896327),N=n(728233),A=n(664320),L=n(314838);let M="component_props_list--propertyValueTypeBool--9q87D";function O(){return(0,i.jsx)("span",{className:"component_props_list--propertyNameSpacer--FdkL0"})}function R(e){let t=(0,N.Cm)(`${e.name}: ${e.value}`,e.name),[n,a]=s.useState(!1),l=(0,I.X)(e.name),h=(0,I.X)(e.value),g={[m.J0O.BOOL]:M,[m.J0O.VARIANT]:void 0,[m.J0O.TEXT]:void 0,[m.J0O.INSTANCE_SWAP]:void 0,[m.J0O.NUMBER]:M,[m.J0O.IMAGE]:M,[m.J0O.SLOT]:void 0,[m.J0O.NONE]:void 0},x={[m.J0O.BOOL]:o.X,[m.J0O.VARIANT]:d.y,[m.J0O.TEXT]:c.I,[m.J0O.INSTANCE_SWAP]:u.M,[m.J0O.NUMBER]:o.X,[m.J0O.IMAGE]:o.X,[m.J0O.SLOT]:p.R,[m.J0O.NONE]:d.y}[e.type],y=(0,i.jsx)(x,{"data-tooltip-type":E.Ib.TEXT,"data-tooltip":(0,_.t)("design_systems.component_properties.property_icon_tooltip",{propertyType:(0,T.xb)(e.type===m.J0O.NONE?m.J0O.VARIANT:e.type)})}),v=f()("component_props_list--propertyValue--eu4vE ellipsis--ellipsis--Tjyfa",g[e.type]);return(0,i.jsx)("div",{className:"component_props_list--copyableRow--N-YSu ellipsis--ellipsis--Tjyfa",onMouseEnter:()=>{a(!0)},onMouseLeave:()=>{a(!1)},children:(0,i.jsx)(r.E,{className:"component_props_list--propertyRowButton--biwBU",onClick:t,htmlAttributes:{"data-testid":"inspectionPropertyRow"},children:(0,i.jsxs)("div",{className:"component_props_list--propertyRow--lpbBb",children:[e.name?(0,i.jsx)("span",{className:"component_props_list--propertyName--o49U9 ellipsis--ellipsis--Tjyfa","data-testid":"inspectionPropertyName",...l,"data-tooltip-tip-align-left":!0,children:e.name}):(0,i.jsx)(O,{}),(0,i.jsxs)("span",{className:v,"data-testid":"inspectionPropertyValue",...h,"data-tooltip-tip-align-left":!0,children:[y,(0,i.jsx)(N.lN,{valueProps:{...e,copyValue:e.value},isHovered:n})]})]})})})}function P(){let e=(0,a.wA)(),t=(0,y.M4)(),n=s.useCallback(()=>{e(b.to({type:v.u,data:{guid:t?.guid}})),(0,g.sx)("Playground opened")},[e,t?.guid]);return(0,i.jsx)("div",{className:"component_props_list--playgroundButtonContainer--q6-lJ","data-test-id":"openInPlaygroundButton",children:(0,i.jsx)(l.IK,{variant:"secondary",onClick:n,recordingKey:"openInPlayground",children:(0,_.tx)("dev_handoff.playground.explore_component_behavior")})})}function D(e){let t=e.variables&&e.variables.value[e.name],n=t&&t.type===m.Z_n.ALIAS?t.value:void 0,s=(0,k.u)(n);return(0,i.jsx)(R,{type:e.type,name:e.name,value:e.value,variable:s?.name})}function F(){let e=(0,a.d4)(w.Sh),t=s.useMemo(S.z4,[]),{consumedVariable:n}=(0,A.u3)(["VARIANT_PROPERTIES"]),r=function(e){if(!e||(0,j.gl)(e)||e.type!==m.Z_n.EXPRESSION||e.value.expressionFunction!==m.JTp.RESOLVE_VARIANT)return null;let t=e.value.expressionArguments[0];return t?.type!==m.Z_n.MAP?null:t}(n),l=(0,a.d4)(n=>t(n,e)),o=Object.entries((0,A.kN)()).filter(([e,t])=>t.modeOptions.length>1),{visibleItems:d,showMoreButton:c}=(0,x.y)({items:l,pageSize:3,shouldResetOnSelectionChange:!0}),u=l.length>0,p=u||o.length>0;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(L.ul,{overPropTable:u,overPlaygroundButton:p}),u&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"component_props_list--propsList--VRadV",children:d.map(({name:e,value:t,type:n})=>(0,i.jsx)(D,{type:n,name:e,value:t,variables:r??null},e))}),c]}),!C.z4.getIsExtension()&&p&&(0,i.jsx)(P,{})]})}},3185:(e,t,n)=>{n.d(t,{Qd:()=>eD});var i=n(104076),s=n(716976),a=n(237420),r=n(507699),l=n(276800),o=n(638004),d=n(475477),c=n(17933),u=n(962856),p=n(684742),m=n(293422),h=n(839793),f=n(790009),g=n(266808),x=n(926653),_=n(812714),y=n(795033),v=n(359166),b=n(511570),C=n.n(b),j=n(883765),k=n(171971),w=n(755444),E=n(550209),T=n(943568),S=n(192075),I=n(442130),N=n(762564),A=n(416381),L=n(435219),M=n(370020),O=n(166887),R=n(68106),P=n(412431),D=n(476949),F=n(742549);function z({children:e,componentCounts:t,entrypoint:n}){let a=(0,O.hC)(),r=(0,s.useRef)(null),l=(0,F.ju)();return(0,i.jsx)(m.IK,{ref:r,variant:"secondary",onClick:()=>{a("component_browser.in_context.window_opened",{all:t.all,connected:t.connected,ignored:t.ignored,notConnected:t.notConnected,componentBrowserEntrypoint:n}),l({componentBrowserEntrypoint:n,componentBrowserScope:"page_or_selection"})},children:e})}var B=n(315361),G=n(301510),U=n(835307),V=n(372677),H=n(276347),K=n(910372);let W="component_browser_in_context_mapping_section--container--1v9i-",q="component_browser_in_context_mapping_section--description--Eam3J",X="component_browser_in_context_mapping_section--badgeContainer---Gej6";function Y({numComponents:e,componentCounts:t,isLoading:n,hasNoSelection:s,isSelectedNodeSectionOrFrame:a}){let r=t.connected+t.ignored;return(0,i.jsxs)("div",{className:"component_browser_in_context_mapping_section--panelAccessoryContainer--gzKmc",children:[(0,i.jsx)("div",{className:"component_browser_in_context_mapping_section--alphaTag--pyFLA",children:!(0,_.kc)().dt_component_browser_beta_badge_hidden&&(0,i.jsx)(u.E,{variant:"inactiveOutline",size:"md",children:(0,S.tx)("dev_handoff.component_browser.beta")})}),s&&t.connected>=1&&!n&&(0,i.jsx)("div",{className:"component_browser_in_context_mapping_section--progressBarContainer--pl7jn",children:(0,i.jsx)(D.O,{componentCounts:t,width:68})}),s&&0===t.connected&&!n&&(0,i.jsx)("div",{className:X,children:(0,i.jsx)(u.E,{variant:"inactiveOutline",size:"md",children:(0,S.tx)("dev_handoff.component_browser.in_context_no_components")})}),a&&(0,i.jsxs)(i.Fragment,{children:[0===e&&(0,i.jsx)("div",{className:X,children:(0,i.jsx)(u.E,{variant:"inactiveOutline",size:"md",children:(0,S.tx)("dev_handoff.component_browser.in_context_no_components")})}),e>=1&&!n&&(0,i.jsx)("div",{className:X,children:t.ignored===e?(0,i.jsx)(u.E,{variant:"inactiveOutline",children:(0,S.t)("dev_handoff.figmadocs.skipped")}):r===e?(0,i.jsx)(u.E,{variant:"componentOutline",size:"md",children:(0,S.tx)("dev_handoff.component_browser.in_context_num_connected",{number:t.connected})}):(0,i.jsx)(u.E,{variant:"inactiveOutline",size:"md",children:(0,S.tx)("dev_handoff.component_browser.in_context_num_not_connected",{number:t.notConnected})})})]})]})}function Z(){let e=(0,O.hC)(),t=(0,y.md)(H.mO),n=(0,K.oA)(),{assetKeys:a}=(0,R.AR)(),r=new Set(a),l=function(e,t){if(!t||0===Object.keys(t.status).length)return{connected:0,ignored:0,notConnected:e.length,all:e.length,suggestionsAvailable:0};let n=e.map(e=>({assetKey:e})),i=0,s=0,a=0;return(n||[]).forEach(e=>{if(t.status[e.assetKey]){let n=t.status[e.assetKey];n&&("connected"===n?i++:"ignored"===n?s++:"not_connected"===n&&a++)}}),{connected:i,ignored:s,notConnected:a,all:i+s+a,suggestionsAvailable:0}}((0,P.kf)(r,n),t),{numComponents:o,totalWithStatus:c}=function(e){let t=Math.round(e.connected/e.all*100),n=Math.round(e.ignored/e.all*100),i=Math.round((e.ignored+e.connected)/e.all*100);return{numComponents:e.all,totalConnected:e.connected,totalWithStatus:e.connected+e.ignored,connectedPercentage:t,ignoredPercentage:n,connectedAndIgnoredPercentage:i,notConnectedPercentage:100-t-n}}(l),u=(0,s.useRef)(null),p=function(){let e=(0,B.uQ)();return(0,U.Fk)((e,t)=>{let n=e?.get(t??"");return n?.type==="TEXT"},e)}(),m=function(){let e=(0,B.uQ)();return(0,U.Fk)((e,t)=>{let n=e?.get(t??"");return n?.type==="SECTION"||n?.type==="FRAME"},e)}(),h=!(0,B.uQ)(),f=t?.loadingStatus==="loading",g=(0,G.w)(l);return((0,s.useEffect)(()=>{p||f||e("component_browser.in_context.inspect_panel_item_seen",g.current)},[e,p,f,g]),!p&&(m||h))?(0,i.jsxs)(V.VZ,{title:(0,S.t)("dev_handoff.component_browser.in_context_section_title"),recordingKey:"in_context_code_connect",collapsiblePanelKey:0===o?void 0:"in_context_code_connect",titleAccessory:(0,i.jsx)(Y,{numComponents:o,componentCounts:l,isLoading:f,hasNoSelection:h,isSelectedNodeSectionOrFrame:m}),children:[h&&o>0&&(0,i.jsxs)("div",{ref:u,className:W,children:[(0,i.jsx)("div",{className:q,children:(0,S.tx)("dev_handoff.component_browser.in_context_section_body_description",{value:(0,i.jsx)(d.N,{newTab:!0,href:"https://developers.figma.com/docs/code-connect/code-connect-ui-setup",children:(0,S.tx)("dev_handoff.component_browser.in_context_section_learn_more")})})}),(0,i.jsx)(z,{componentCounts:l,entrypoint:"inspect_panel",children:!t||f?(0,S.t)("dev_handoff.component_browser.in_context_section_map_components_button"):(0,S.t)("dev_handoff.component_browser.in_context_connect_components")})]}),m&&o>0&&(0,i.jsx)("div",{ref:u,className:W,children:(0,i.jsx)("div",{className:"component_browser_in_context_mapping_section--buttonContainer--BFRvn",children:(0,i.jsx)(z,{componentCounts:l,entrypoint:"inspect_panel",children:!t||f?(0,S.t)("dev_handoff.component_browser.in_context_section_map_components_button"):c===o?(0,S.t)("dev_handoff.component_browser.in_context_section_view_connections_button"):(0,S.t)("dev_handoff.component_browser.in_context_connect_components")})})}),0===o&&(0,i.jsx)("div",{className:W,children:(0,i.jsx)("div",{className:q,children:(0,S.tx)("dev_handoff.component_browser.in_context_section_body_description_no_components",{value:(0,i.jsx)(d.N,{newTab:!0,href:"https://help.figma.com/hc/articles/360025508373-Publish-a-library",children:(0,S.tx)("dev_handoff.component_browser.in_context_section_learn_more")})})})})]}):null}var J=n(283838),Q=n(483663),$=n(653899),ee=n(328341),et=n(601887),en=n(280817),ei=n(772523),es=n(962212),ea=n(506192),er=n(74620),el=n(211862),eo=n(592726),ed=n(932709),ec=n(564914),eu=n(415567),ep=n(954741),em=n(337726),eh=n(9109);let ef=new(n(722458)).b({name:"code-connect",dependencies:[],routeHints:[],exports:{"./code_connect_atoms":"./code_connect_atoms.ts","./figmadoc":"./figmadoc.ts","./figmadoc_preview":"./figmadoc_preview.ts","./typings":"./typings.ts","./code_connect_view":"./code_connect_view.ts","./preload_code_connect":"./preload_code_connect.ts","./format_code":"./format_code.ts"},friendFiles:[],eslint:{rules:{"@typescript-eslint/no-explicit-any":"off"}}}).createLazyComponent(()=>n.e(9993).then(n.bind(n,462629)).then(e=>e.CodeConnectSection),{loading:()=>null,error:eh.H4.NONE,componentName:"CodeConnectSection"});var eg=n(566796),ex=n(10055),e_=n(58212),ey=n(638641);let ev="component_info_table--componentsValue--2EDta";function eb({rows:e}){let t=(0,a.wA)(),n=s.useCallback(async(e,n)=>{try{await navigator.clipboard.writeText(e)}catch{let t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)}t(e_.F.enqueue({type:"component-browser-copy-success",message:"component"===n?(0,S.t)("dev_handoff.component_browser_mapping_panel.componentNameCopied"):(0,S.t)("dev_handoff.component_browser_mapping_panel.sourceUrlCopied"),icon:ey.zX.CHECK}))},[t]),r=s.useCallback((e,t)=>{n("string"==typeof e?e:"",t?.includes("component")?"component":"source")},[n]);return(0,i.jsx)("div",{className:"component_info_table--container--0Rbv3",children:e.map((e,t)=>(0,i.jsxs)("div",{className:"component_info_table--componentsRow--Tb-K4",children:[(0,i.jsx)("div",{className:"component_info_table--componentsLabel---zHgA",children:e.label}),e.copyable?(0,i.jsx)("div",{className:ev,children:(0,i.jsx)(p.E,{className:`${ev} component_info_table--copyButton--0JVzQ`,onClick:()=>r(e.value,e.copyAriaLabel),"aria-label":e.copyAriaLabel,style:e.rtl?{direction:"rtl"}:{direction:"ltr"},children:e.value})}):(0,i.jsx)("div",{className:ev,style:e.rtl?{direction:"rtl"}:{direction:"ltr"},children:e.value})]},t))})}function eC({doc:e}){let t=(0,Q.Au)(),n=[...e.component?[{label:(0,S.t)("dev_handoff.component_browser.in_context_component_name"),value:"string"==typeof e.component?e.component:"",copyable:!0,copyAriaLabel:(0,S.t)("dev_handoff.component_browser_mapping_panel.copyComponentNameAriaLabel"),rtl:!1}]:[],{label:(0,S.t)("dev_handoff.component_browser.in_context_component_file"),value:"string"==typeof e.source?e.source:"",copyable:!0,copyAriaLabel:(0,S.t)("dev_handoff.component_browser_mapping_panel.copySourceUrlAriaLabel"),rtl:!0}];return(0,i.jsxs)("div",{className:"component_browser_mapping_panel--container--qcOm5",children:[(0,i.jsx)(eb,{rows:n}),(0,i.jsx)("div",{className:"component_browser_mapping_panel--buttonContainer---fyIW",children:(0,i.jsx)(m.IK,{variant:"secondary",onClick:t?()=>t({componentBrowserEntrypoint:"inspect_panel",componentBrowserScope:"page_or_selection"}):void 0,children:(0,S.t)("dev_handoff.component_browser_mapping_panel.viewConnectionButton")})})]})}var ej=n(663128);function ek({notConnected:e,skipped:t}){let n=(0,i.jsx)(d.N,{href:"https://www.figma.com/code-connect-docs/","aria-label":(0,S.t)("dev_handoff.figmadocs.learn_more"),trusted:!0,newTab:!0,children:(0,S.tx)("dev_handoff.figmadocs.learn_more")});return(0,i.jsx)(f.J,{brand:"dev-handoff",mode:"dark",children:(0,i.jsx)("div",{className:"figmadocs--ccBadgeTooltip--XMB48",children:e?(0,S.tx)("dev_handoff.figmadocs.not_connected_tooltip",{learnMore:n}):t?(0,S.tx)("dev_handoff.figmadocs.skipped_tooltip",{learnMore:n}):(0,S.tx)("dev_handoff.figmadocs.connected_tooltip",{learnMore:n})})})}let ew={boxShadow:"var(--elevation-500)",borderRadius:"var(--radius-medium)",backgroundColor:"var(--color-bg-tooltip)","--color-bg":"var(--color-bg-tooltip)"},eE={type:"dialog",openOnHover:!0,placement:"bottom-end",softDismiss:!0};function eT({hideTooltip:e}){let[t,n]=s.useState(!1),{getTriggerProps:a,getContainerProps:r,getArrowProps:l}=c.fP({isOpen:t,onOpenChange:n,...eE});return e?(0,i.jsx)(u.E,{variant:"componentOutline",children:(0,S.tx)("dev_handoff.figmadocs.connected")}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(p.E,{"aria-label":(0,S.t)("dev_handoff.figmadocs.connected"),...a(),children:(0,i.jsx)(u.E,{variant:"componentOutline",children:(0,S.tx)("dev_handoff.figmadocs.connected")})}),(0,i.jsxs)(c.mc,{...r({style:ew}),children:[(0,i.jsx)(c.i3,{...l()}),(0,i.jsx)(ek,{})]})]})}function eS({doc:e,additionalHeaderActions:t,instanceFigmadocs:n,isPlayground:a,onInstancePillClick:d,copyButtonContainer:c,availableLabels:u,setSelectedLabel:p,dropdownShown:m,dispatch:h,dropdownIdToUse:f,showCodeOnly:y}){let v=(0,eo.iZ)(),b=(0,el.q5)(),k=(0,B.uQ)(),A=(0,er.eY)(),{backingNodeId:M,backingComponentKey:O,backingStateGroupKey:R,backingLibraryKey:P}=(0,eg.HX)(k??"",A,null),D=(0,er.T3)();a&&(A=D);let F=(0,I.Ur)(e.template,n,a),z=(0,x.l)(P??""),G=function(e){let t=(0,ed.bj)([e]).data[0],n=null;return t&&((0,ec.ZA)(t)&&(0,ec.xA)(t)?n=t.hub_file_id:"library_file_key"in t&&(n=t.library_file_key)),n}(z),U=function(e){let t=ed.bj([e])?.data?.[0];return!!t&&(0,ec.ZA)(t)&&(0,ec.xA)(t)}(z);!function({backingLibraryKey:e,result:t,backingComponentKey:n,backingStateGroupKey:i}){let a=(0,et.X)(e?(0,x.l)(e):null);(0,$.h)(()=>{j.az.trackDefinedEvent("code_connect.code_connect_rendered",{partnerType:a,componentKey:n,stateGroupKey:i})});let r=t?.result==="ERROR"&&t?.data?.error?t.data.error.type:null,l=(0,ee.ZC)(r);s.useEffect(()=>{r!==l&&r&&j.az.trackDefinedEvent("code_connect.code_connect_error",{partnerType:a,errorType:r,componentKey:n,stateGroupKey:i})},[r,l,a,n,i])}({backingLibraryKey:P,result:F,backingComponentKey:O,backingStateGroupKey:R});let H=s.useCallback(e=>{d?d(e):g.w3z.selectAndPanToNode(e)},[d]),K=s.useCallback(()=>{(0,j.sx)("code_connect_clicked",{user_id:v?.id,is_playground:a,node_id:M,file_key:G,...b?.key===G?{file_team_id:b?.teamId,file_org_id:b?.parentOrgId}:{},label:e.label,component_key:O,state_group_key:R,library_key:P})},[v?.id,a,M,b?.key,b?.teamId,b?.parentOrgId,e.label,O,R,P,G]);if(!F)return null;if(F?.result==="SUCCESS"){let{code:s,language:o,pills:d}=(0,r.AH)({output:F,sceneGraph:A}),g=e.source;"custom"===o&&(o=e.language);let x=new Set([...e.templateData?.imports??[],...Object.entries(n).map(([e,t])=>t.map(e=>RegExp(`\\b${e.component}\\b`).test(s)?e?.templateData?.imports??[]:[]).flat()).flat()]),_=s;if(x.size>0){if("html"===o){let e=[],t=[];x.forEach(n=>{n.startsWith("<script")?e.push(n):t.push(n)}),e.length>0&&(_=e.join("\n")+"\n\n"+_),t.length>0&&(_=`<script>${t.join("\n")}</script>

`+_)}else _=Array.from(x).join("\n")+"\n\n"+s}return(0,i.jsx)(ef,{code:_,language:o,pills:d,fallback:null,errorFallback:null,reformatOnInstanceChange:a,noFadeAnimation:!a,onboardingKey:em.uI,showCodeOnly:y,children:n=>{if(!n)return null;let s={key:n.name,additionalHeaderActions:t,collapseLongSections:!1,copyAllActionEnabled:!1,copyButtonContainer:c,hideHeader:!0,includeMargin:!y,onInstancePillClick:H,type:"connected",code:[n],section:n},a=(0,i.jsx)(ep.l6,{ariaLabel:(0,S.t)("dev_handoff.code.language"),className:C()("figmadocs--labelSelect--C-SIX",{"figmadocs--labelSelectNoPadding--6LtYM":y}),dispatch:h,dropdownAlignment:"right",dropdownShown:m,dropdownWidth:"140px",formatter:eP,id:f,onChange:e=>p(e),onDropdownHidden:l.lQ,property:e.label,children:u.map(e=>(0,i.jsx)(ep.c$,{value:e},e))});return y?(0,i.jsx)("div",{className:"figmadocs--codeOnlyContainer--GEVCt",children:(0,i.jsx)(L.U,{...s})}):(0,i.jsx)(V.VZ,{hideHeader:!0,noBorder:!0,recordingKey:"figmadoc",noPadding:!0,onClick:K,titleAccessory:(0,i.jsx)(eT,{hideTooltip:U}),children:(0,i.jsxs)("div",{className:"figmadocs--figmadocWrapper--4SMJB",children:[(0,i.jsx)("div",{className:"figmadocs--componentInfoTableContainer--u8MdT",children:(0,i.jsx)(eb,{rows:[...e.component?[{label:(0,S.t)("dev_handoff.component_browser.in_context_component_name"),value:e.component,copyable:!0,copyAriaLabel:(0,S.t)("dev_handoff.component_browser_mapping_panel.copyComponentNameAriaLabel"),rtl:!1}]:[],...g?[{label:(0,S.t)("dev_handoff.component_browser.in_context_component_file"),value:g,copyable:!0,copyAriaLabel:(0,S.t)("dev_handoff.component_browser_mapping_panel.copySourceUrlAriaLabel"),rtl:!0}]:[]]})}),(0,i.jsxs)("div",{className:"figmadocs--dropdownContainer--P9xZl",children:[a,(0,i.jsx)("div",{ref:c,className:"figmadocs--copyButtonContainer--UsqKq",children:!c?.current&&(0,i.jsx)(N.zM,{})})]}),(0,i.jsx)(N.yT,{...s})]})})}})}{(0,w.b5)()&&console.error("Error evaluating Code Connect template",F);let e=F?.data.error,t=(0,S.t)("dev_handoff.figmadocs.error_unknown");return e?.type==="PROPERTY_NOT_FOUND"?t=(0,S.t)("dev_handoff.figmadocs.error_property_not_found",{propertyName:e.propertyName}):e?.type==="PROPERTY_TYPE_MISMATCH"?t=(0,S.t)("dev_handoff.figmadocs.error_property_type_mismatch",{propertyName:e.propertyName,propertyType:e.expectedType??"unknown"}):e?.type==="CHILD_LAYER_NOT_FOUND"?t=(0,S.t)("dev_handoff.figmadocs.error_child_layer_not_found",{layerName:e.layerName}):(0,_.kc)().dt_code_connect_id_error&&e?.type==="CHILD_LAYER_ID_NOT_FOUND"?t=(0,S.t)("dev_handoff.figmadocs.error_child_layer_id_not_found",{codeConnectId:e.codeConnectId}):e?.type==="MISSING_CODE_CONNECT_ID"?t=F?.data.message:(0,E.$D)(o.e.CODE_CONNECT,Error("Error evaluating Code Connect template"),{extra:{error:F?.data.error}}),(0,i.jsx)("div",{className:"figmadocs--errorBannerWrapper--eemEO",children:(0,i.jsx)(T.z,{variant:"danger",title:(0,S.t)("dev_handoff.figmadocs.error_title"),orientation:"vertical",iconSrc:ej.A,children:t})})}}function eI({parent:e}){return(0,i.jsx)("div",{className:"figmadocs--goToParentButtonWrapper--ZAPci",children:(0,i.jsx)(m.WW,{variant:"secondary",onClick:()=>ei.tJ([e.guid??""]),iconPrefix:(0,i.jsx)(h.r,{}),children:(0,S.tx)("dev_handoff.code_connect.go_to_parent_button",{name:e.name||""})})})}function eN(){return(0,_.kc)().dt_component_browser_beta_badge_hidden?null:(0,i.jsx)("div",{className:"figmadocs--alphaTag--0MzvX",children:(0,i.jsx)(u.E,{variant:"defaultOutline",size:"md",children:(0,S.tx)("dev_handoff.component_browser.beta")})})}function eA(){return(0,i.jsx)(u.E,{variant:"componentOutline",children:(0,S.t)("dev_handoff.component_browser.connected")})}function eL(){return(0,i.jsx)(u.E,{variant:"inactiveOutline",children:(0,S.t)("dev_handoff.component_browser.in_context_not_connected_badge")})}function eM(){return(0,i.jsx)(u.E,{variant:"inactiveOutline",children:(0,S.t)("dev_handoff.figmadocs.skipped")})}function eO({additionalBadge:e,hideAlphaBetaBadge:t}){let n=!t&&!(0,_.kc)().dt_component_browser_beta_badge_hidden;return(0,i.jsxs)("div",{className:C()("figmadocs--panelAccessoryContainer--sZqjj",{"figmadocs--alphaBetaBadge--IeLBU":n}),children:[!t&&(0,i.jsx)(eN,{}),(0,i.jsxs)("div",{className:"figmadocs--badgeContainer--9Tez4",children:["connected"===e&&(0,i.jsx)(eA,{}),"not-connected"===e&&(0,i.jsx)(eL,{}),"ignored"===e&&(0,i.jsx)(eM,{})]})]})}function eR({buttonText:e}){let t=(0,Q.Au)();return(0,i.jsx)("div",{className:"figmadocs--buttonContainer---kUuz",children:(0,i.jsx)(m.IK,{variant:"secondary",onClick:()=>t({componentBrowserEntrypoint:"inspect_panel",componentBrowserScope:"page_or_selection"}),children:e})})}let eP={format:e=>e};function eD({playgroundGUID:e,onInstancePillClick:t,showCodeOnly:n}){let r=(0,el.q5)(),l=(0,M.CQ)(r),o=l?(0,S.t)("dev_handoff.component_browser.in_context_section_title"):(0,S.t)("dev_handoff.figmadocs.section_title"),d=(0,er.eY)(),c=(0,er.T3)(),{selectedLabel:u,setSelectedLabel:p}=function(e){let t=(0,ex.yT)(e.id),[n,i]=(0,v.Vc)("code-connect-selected-language-storage-key",t);return{selectedLabel:n,setSelectedLabel:i}}((0,A.v4)()),m=(0,k.$k)(),h=(0,B.uQ)(),f=null,g=d;e&&(h=(0,en.n)(e,c,d)??h,f=c.get(e),g=c,h=e);let{doc:_,instanceFigmadocs:b,availableLabels:C,loaded:j,willHaveCodeConnect:w,isComponentBrowserMapping:E,disabled:T}=(0,eg._3)(h,g,u,f),I=(0,a.wA)(),N=(0,ea.Um)(),L=!!e,O=function({isPlayground:e,doc:t,willHaveCodeConnect:n,loaded:i,node:s,isComponentBrowserMapping:a,disabled:r,isDevModeMcpDisabledForOrg:l}){let o=function(e,t,n,i,s,a){let r=(0,er.eY)(),l=(0,y.md)(el._S),o=(0,y.md)(H.mO);if(!e||!["INSTANCE","SYMBOL"].includes(e.type)||s)return"unknown";if(t)return"status"in t&&"ignored"===t.status?"ignored":"connected";if(o?.status){let{backingComponentKey:t,backingStateGroupKey:n}=(0,J.K)(e.guid,r,l?(0,x.l)(l):null),i=n||t;if(i&&"ignored"===o.status[i])return"ignored"}return!a&&i?"unknown":a&&!t?"not_connected":"unknown"}(s||null,t,0,n??!1,r,i),d=(0,el.q5)(),c=function({isPlayground:e,doc:t,willHaveCodeConnect:n,loaded:i,node:s,connectionStatus:a,isComponentBrowserEnabled:r,isComponentBrowserMapping:l,isDevModeMcpDisabledForOrg:o}){if(!s||["FRAME","SECTION"].includes(s.type))return!o&&r?{view:"page-frame-or-section"}:{view:"none"};if(["INSTANCE","SYMBOL"].includes(s.type)){let s=!t||t&&"type"in t&&"snippet"===t.type;if(e)return s?{view:"none"}:{view:"component-doc",doc:t};if(r){if("connected"===a)return l?{view:"component-browser-mapping",doc:t}:{view:"component-doc",doc:t};if("ignored"===a)return{view:"ignored"};if("not_connected"===a)return{view:"not-connected"}}return s?(0,es.T)()?{view:"none"}:n||!i?{view:"inspect-loading"}:{view:"none"}:{view:"component-doc",doc:t}}return{view:"check-parent"}}({isPlayground:!!e,doc:t,willHaveCodeConnect:!!n,loaded:i,node:s,connectionStatus:o,isComponentBrowserEnabled:(0,M.CQ)(d),isComponentBrowserMapping:a,isDevModeMcpDisabledForOrg:l}),u=function(e=!0){let t=(0,y.md)(el._S),n=(0,er.eY)(),i=(0,eu.Vr)(),s=[],a=i;for(;a;)(a?.type==="INSTANCE"||a?.type==="SYMBOL")&&s.push(a),a=a.parentNode;let r=s.map(e=>{let{backingNodeId:i,backingLibraryKey:s}=(0,eg.HX)(e.guid,n,t);return{backingNodeId:i,nodeGuid:e.guid,nodeName:e.isState?e.parentNode?.name:e.name,backingLibraryKey:s}}),{status:l,nodesWithCodeConnect:o}=(0,K.QU)(r.map(e=>(0,eg.zi)(e.backingLibraryKey,e.backingNodeId)),e),d="loaded"===l?o:(0,K.bf)()??new Set,{backingNodeId:c,backingLibraryKey:u}=(0,eg.HX)(i?.guid??"",n,t);if(d.has((0,eg.zi)(u,c)))return null;for(let{nodeName:e,nodeGuid:t,backingNodeId:n,backingLibraryKey:i}of r)if(d.has((0,eg.zi)(i,n)))return{name:e,guid:t};return null}("check-parent"===c.view);return"check-parent"===c.view?u?{view:"inspect-parent",parent:u}:{view:"none"}:c}({isPlayground:L,loaded:j,doc:_,willHaveCodeConnect:w,node:f||(h?d.get(h):null),hasRenderedCodeConnectOnce:!1,isComponentBrowserMapping:E,disabled:T,isDevModeMcpDisabledForOrg:m}),R="figmadoc-label-select";e&&(R+="-playground");let P=s.useRef(null);if(!O||!O.view)return null;let D={recordingKey:"code_connect",headerOnboardingKey:em.uI,title:o,collapsiblePanelKey:e?void 0:"code_connect"};switch(O.view){case"page-frame-or-section":return(0,i.jsx)(Z,{});case"component-browser-mapping":if(!_||!("component"in _))return null;return(0,i.jsx)(V.VZ,{...D,titleAccessory:(0,i.jsx)(eO,{additionalBadge:"connected"}),children:(0,i.jsx)(eC,{doc:_})});case"component-doc":if(!("doc"in O)||!O.doc)return null;let F=(0,i.jsx)(eS,{availableLabels:C,copyButtonContainer:P,dispatch:I,doc:O.doc,dropdownIdToUse:R,dropdownShown:N,instanceFigmadocs:b,isPlayground:!!e,onInstancePillClick:t,setSelectedLabel:p,showCodeOnly:n});if(n)return F;return(0,i.jsx)(V.VZ,{...D,titleAccessory:(0,i.jsx)(eO,{additionalBadge:"connected",hideAlphaBetaBadge:!0}),children:(0,i.jsxs)("div",{className:"figmadocs--fullDocsContainer--mrXBq",children:[F,!L&&l&&(0,i.jsx)(eR,{buttonText:(0,S.t)("dev_handoff.component_browser_mapping_panel.viewConnectionButton")})]})});case"not-connected":return(0,i.jsx)(V.VZ,{...D,titleAccessory:(0,i.jsx)(eO,{additionalBadge:"not-connected"}),children:(0,i.jsx)(eR,{buttonText:(0,S.t)("dev_handoff.component_browser.in_context_connect_component")})});case"ignored":return(0,i.jsx)(V.VZ,{...D,titleAccessory:(0,i.jsx)(eO,{additionalBadge:"ignored"}),children:(0,i.jsx)(eR,{buttonText:(0,S.t)("dev_handoff.component_browser_mapping_panel.viewConnectionButton")})});case"inspect-loading":return(0,i.jsx)(V.VZ,{...D,bodyIsEmpty:!0});case"inspect-parent":return(0,i.jsx)(V.VZ,{...D,children:(0,i.jsx)(eI,{parent:O.parent})});default:return null}}},283838:(e,t,n)=>{n.d(t,{K:()=>r});var i=n(553065),s=n(9781),a=n(566796);function r(e,t,n){let r=t.get(e);if(!r)return{backingLibraryKey:null,backingNodeId:null};let{backingSymbolGUID:l,backingStateGroupGUID:o}=(0,s.nD)(new Set([(r?.type==="INSTANCE"?r?.symbolId:r?.guid)??""]),t),d=null,c=null;if((0,i.gl)(l)||null===l||(d=t.get(l)),(0,i.gl)(o)||null===o||(c=t.get(o)),"INSTANCE"===r.type&&r.symbolId){let e=t.get(r.symbolId);if(e?.isState){let e=c?.sourceLibraryKey;return{backingNodeId:(0,a.te)(c),backingComponentKey:d?.assetKeyForPublish??void 0,backingStateGroupKey:c?.stateGroupKey??c?.assetKeyForPublish??void 0,backingLibraryKey:""!==e?e:n}}{let e=d?.sourceLibraryKey;return{backingNodeId:(0,a.te)(d),backingComponentKey:d?.assetKeyForPublish??void 0,backingLibraryKey:""!==e?e:n}}}return"SYMBOL"===r.type?r.isState?{backingNodeId:(0,a.te)(r.parentNode),backingComponentKey:r.parentNode?.assetKeyForPublish??void 0,backingLibraryKey:r.parentNode?.sourceLibraryKey&&r.parentNode?.sourceLibraryKey!==""?r.parentNode?.sourceLibraryKey:n}:{backingNodeId:(0,a.te)(r),backingComponentKey:r.assetKeyForPublish??void 0,backingLibraryKey:""!==r.sourceLibraryKey?r.sourceLibraryKey:n}:r.isStateGroup?{backingNodeId:(0,a.te)(r),backingComponentKey:r.assetKeyForPublish??void 0,backingLibraryKey:""!==r.sourceLibraryKey?r.sourceLibraryKey:n}:{backingLibraryKey:null,backingNodeId:null}}},744374:(e,t,n)=>{n.d(t,{Bv:()=>E,g$:()=>I,iX:()=>S,si:()=>k,wS:()=>w,x9:()=>T});var i=n(104076),s=n(716976),a=n(237420),r=n(387092),l=n(266808),o=n(264993),d=n(980852),c=n(833805);n(192075);var u=n(563792);n(553065);var p=n(74620),m=n(211862),h=n(893393),f=n(835307),g=n(887680),x=n(739710);n(998619);var _=n(540864);n(524065);var y=n(920764);n(520266);var v=n(315361);let b=h.M4.Query({fetch:async({componentKey:e})=>{try{let t=await g.Z.getLibraryComponentV2Destination({componentKey:e});if(!t||!t.data||!t.data.meta)return null;return{nodeId:t.data.meta.node_id,fileKey:t.data.meta.file_key,component:t.data.meta.component,componentSet:t.data.meta.component_set}}catch(e){return null}},enabled:e=>e.enabled}),C=h.M4.Query({fetch:async({statusResult:e})=>{if(!e||!e.componentKey||!e.canvasUrl)return{};let t=e.isVariant?e.dataStateGroupId:e.dataComponentId,n=e.dataStateGroupId??null,i=e.dataStorageKey,s=await u.Eo.getCanvas({canvas_url:e.canvasUrl});if(!s)return{};let a=l.glU.loadDetachedComponent(t??"",i,s,n);return a?{result:{...e,dataLocation:"temp-scene",dataComponentId:a}}:{}},enabled:e=>e.enabled}),j=s.createContext({status:"loading"});function k({children:e}){let t=function(e){let t=(0,a.d4)(m.sS),n=(0,m._G)(),i=(0,f.Fk)((e,t)=>{let n=e?.get(t??"");return n?.type==="SYMBOL"||n?.type==="INSTANCE"?void 0:n?.detachedInfo},e),d=!!i,u=!!i?.componentKey,p=u?{componentKey:(0,r.sg)(i.componentKey),enabled:!0}:{componentKey:(0,r.sg)(""),enabled:!1},[h]=(0,c.IT)(b(p)),g=h?.data,x=d&&u&&"loaded"===h.status&&g&&g.component,_=g?.nodeId??o.AD,y=g?.fileKey??"",v=y!==t,j=g?.component,k=g?.componentSet,w=j?.component_key??i?.componentKey??"",E=k?.key??w??"",T=!!i?.isVariant||!!g?.componentSet,S=v?l.w3z.getGuidByComponentKey(E,w):{nodeId:g?.nodeId,parentId:k?k.node_id??o.AD:o.AD,inDetachedComponentsScene:!1},I=x&&v&&S?.nodeId===o.AD,N={nodeId:_,fileKey:y,libraryKey:j?.library_key,componentKey:w,isVariant:T,isExternal:v,thumbnailUrl:j?.thumbnail_url,descriptionComponent:j?.description_rt??j?.description,descriptionStateGroup:k?.description_rt??k?.description,dataLocation:I||S?.inDetachedComponentsScene?"temp-scene":"scene",dataComponentId:I?j?.node_id??"":S.nodeId??"",dataStateGroupId:I?k?.node_id:S.parentId,dataStorageKey:E,canvasUrl:T?k?.canvas_url:j?.canvas_url},A=I&&N&&N.canvasUrl?{statusResult:N,enabled:!0}:{enabled:!1},[L]=(0,c.IT)(C(A));return s.useMemo(()=>d?u?"errors"===h.status||I&&"errors"===L.status?{status:"errors"}:x?{status:I?"downloading":"loaded",result:N}:"loaded"!==h.status||g&&g.component?{status:"loading"}:{status:"disabled"}:{status:"loaded",result:{nodeId:i.symbolId,fileKey:t||"",libraryKey:n,isVariant:T,dataLocation:"scene",dataComponentId:i.symbolId,dataStorageKey:"",isExternal:!1,componentKey:i.componentKey}}:{status:"disabled"},[d,i?.symbolId,i?.componentKey,T,t,u,h.status,I,L.status,g,x])}((0,v.uQ)());return(0,i.jsx)(j.Provider,{value:t,children:e})}function w(){return s.useContext(j)||{status:"errors"}}function E(e,t){let n=w();return function(e,t){if("loaded"===t.status){let n="temp-scene"===t.result.dataLocation,i=t.result.dataComponentId??"",s=n?t.result.dataStateGroupId:(0,x.Yi)([i],e)??(0,_.nM)(e,[i]),a=n?T(i):e.get(i);return t.result.isVariant&&s?{backingSymbol:a,backingStateGroup:n?T(s):e.get(s)}:{backingSymbol:a,backingStateGroup:null}}}((0,p.eY)(),n)||{backingSymbol:e,backingStateGroup:t}}function T(e){return new d.TSSceneGraph(l.juq.DETACHED_COMPONENTS).get(e)}function S(e,t){let n=w();return{backingSymbolDescription:("loaded"===n.status&&n.result.isExternal&&n.result.descriptionComponent?n.result.descriptionComponent:void 0)??e,parentDescription:("loaded"===n.status&&n.result.isExternal&&n.result.descriptionStateGroup?n.result.descriptionStateGroup:void 0)??t}}function I(){let e=(0,p.eY)(),t=w(),[n,i]=(0,y.Bx)();if("loaded"===t.status){let n=t.result.dataComponentId,i=t.result.dataStateGroupId;return"temp-scene"===t.result.dataLocation?[T(n),i?T(i):null]:[e.get(n),i?e.get(i):null]}return[n,i]}},483663:(e,t,n)=>{n.d(t,{Au:()=>v,dI:()=>_,lR:()=>y});var i=n(716976),s=n(237420),a=n(266808),r=n(192075),l=n(58212),o=n(111679),d=n(283838),c=n(742549),u=n(805733),p=n(74620),m=n(211862),h=n(260309),f=n(744374),g=n(315361),x=n(454273);function _({navigateToStateGroupIfVariant:e=!1,trackingFunction:t,assetGuid:n}){let r=(0,g.uQ)(),{singleBackingSymbol:l,singleBackingStateGroup:d}=(0,h.$)([n??r??""]),{backingSymbol:c,backingStateGroup:p}=(0,f.Bv)(l,d),_=(0,f.wS)(),y=(0,x.M4)(),v=(0,m._G)(),b=(0,s.wA)(),C="loaded"===_.status?_.result:void 0,j=i.useMemo(()=>C&&C.isExternal?C.libraryKey:c?.sourceLibraryKey?c?.sourceLibraryKey:v,[C,c?.sourceLibraryKey,v]),k=y?.guid,w=j!==v,E=e&&p?p:c,T=C?C.nodeId:w?E?.publishID:E?.guid,S=(0,u.b)({libraryKey:j,nodeId:T??void 0,mainComponent:!0}),I=!!r&&k!==T;return T&&I&&j&&(!w||S.data?.link)?()=>{if(t&&t(),w){let e=S.data?.link;e&&b(o.V3({url:e}))}else a.glU.goToSymbolOrStateGroupById(T,!0)}:null}function y(){let e=(0,p.eY)(),t=(0,m._G)();return i.useCallback(n=>{let{backingComponentKey:i,backingStateGroupKey:s}=(0,d.K)(n,e,t);return s||i},[t,e])}function v(){let e=(0,s.wA)(),t=(0,p.eY)(),n=y(),i=(0,g.uQ)(),a=(0,m._G)(),o=(0,c.ju)(),{backingLibraryKey:h,backingNodeId:f}=(0,d.K)(i||"",t,a),x=h!==a,_=n(i||""),v=(0,u.b)({libraryKey:h,nodeId:f??void 0,isDevHandoff:!0,isDevModeComponentBrowser:!0,componentKey:_});return({componentBrowserScope:t,componentBrowserEntrypoint:n})=>{let i=v.data?.link;if(x&&!i){e(l.F.enqueue({message:(0,r.t)("bindings.no_file_access"),type:"NAVIGATE_FILE_FAILED",error:!0}));return}o({showDevModeComponentBrowser:!0,componentKey:_,componentBrowserEntrypoint:n,componentBrowserScope:t})}}},454273:(e,t,n)=>{n.d(t,{M4:()=>m,Nf:()=>f,RI:()=>u,lA:()=>p,lU:()=>h,ro:()=>g});var i=n(237420),s=n(742549),a=n(74620),r=n(835307),l=n(76365),o=n(415567),d=n(744374),c=n(315361);function u(){let e=(0,d.wS)(),t=(0,i.d4)(e=>e.mirror.selectionProperties.symbolGUIDsBackingSelectionContainer),n=(0,i.d4)(e=>e.mirror.selectionProperties.numSelected);return"loaded"===e.status&&e.result.dataComponentId?{nodeId:e.result.dataComponentId,isDetachedScene:"temp-scene"===e.result.dataLocation&&!!e.result.componentKey}:1===n&&t?{nodeId:Object.keys(t)[0]}:null}function p(){let e=(0,o.jY)(),t=u();return t&&t?.nodeId?t.isDetachedScene?(0,d.x9)(t.nodeId):(0,c.Zl)(e,t.nodeId):null}function m(){return function e(t,n){let i=(0,c.Zl)(t,n);return i?"SYMBOL"===i.type||"INSTANCE"===i.type||i.isStateGroup||i.detachedInfo?i:i.parentGuid?e(t,i.parentGuid):null:null}((0,o.jY)(),(0,i.d4)(l.vD))}function h(){let e=(0,c.uQ)(),t=(0,s.hA)();return e??t}function f(){let e=function(){let e=h();return(0,a.eY)().get(e??"")}(),t=(0,i.d4)(e=>e.mirror.appModel.currentPage),n=(0,a.eY)();return e?.guid?n.developerFriendlyIdFromGuid(e?.guid):t}function g({includeStateGroups:e=!0}={}){let t=(0,c.uQ)(),n=(0,r.Fk)((t,n)=>{let i=t?.get(n??"");return i?.type==="SYMBOL"||i?.type==="INSTANCE"||e&&i?.isStateGroup},t,e),i=(0,d.wS)(),s=i&&("loaded"===i.status||"loading"===i.status||"downloading"===i.status);return n||s}},301510:(e,t,n)=>{n.d(t,{w:()=>s});var i=n(716976);function s(e){let t=(0,i.useRef)(e);return(0,i.useEffect)(()=>{t.current=e},[e]),t}},406790:(e,t,n)=>{n.d(t,{S:()=>I,z:()=>T});var i=n(104076),s=n(716976),a=n(795033);n(120440);var r=n(755444),l=n(248518),o=n(140490),d=n(192075),c=n(202913),u=n(549571),p=n(913772),m=n(244205),h=n(90844),f=n(422872),g=n(863154),x=n(381059),_=n(472955),y=n(74620),v=n(143277),b=n(381888),C=n(61102),j=n(19877),k=n(643330),w=n(337726),E=n(441030);let T="https://help.figma.com/hc/articles/15023124644247-Guide-to-Dev-Mode",S=(0,r.ck)("31fafead8c196706e91abf57cbdece011da1a199");function I(){return(0,i.jsx)(o.u,{label:"DevModeOnboardingTooltip",children:(0,i.jsx)(N,{})})}function N(){let e=(0,a.md)(g.LZ),t=(0,y.aV)(),n=(0,u._I)(),r=(0,a.md)(c.Pt),o=(0,a.md)(c.xJ),I=(0,u.U4)(),N=(0,a.md)(x.NT),A=(0,a.md)(x.mp),L=(0,p.J)(),M=w.oR,O=(0,j.U)("upsell"),{show:R,complete:P,isShowing:D,uniqueId:F}=(0,f.e)({overlay:E.dvJ,priority:v.N.DEFAULT_MODAL},[N,A,r,o]);return(0,s.useEffect)(()=>{R({canShow:(i,s,a,r)=>{let o="developer"===(0,l.HB)(i);return!n&&!a&&!r&&!t&&s>new Date("2024-09-25")&&I&&(L&&e||!L&&!e&&o)&&o},onShow:()=>{(0,_.o9)()}})},[n,I,e,t,N,L,r,A,o,R]),(0,h.E)(F,"Enter Inspect Mode",()=>{D&&P()}),(0,i.jsx)(C.rq,{description:(0,d.tx)("dev_mode.onboarding_callout.switch_into_dev_mode"),isShowing:D,media:(0,i.jsx)(b.y,{alt:"design displaying spacing in dev mode",src:S,aspectRatio:240/136}),onClose:P,primaryCta:{label:(0,d.tx)("dev_mode.onboarding_callout.explore_now"),onClick:()=>{O("handoff"),P()},ctaTrackingDescriptor:m.c.EXPLORE_NOW,type:"button"},secondaryCta:{label:(0,d.tx)("dev_mode.onboarding_callout.read_the_guide"),type:"link",href:T,ctaTrackingDescriptor:m.c.LEARN_MORE},shouldCenterArrow:k.EL.BEST_EFFORT,targetKey:M,testId:"dev-mode-onboarding-tooltip",title:(0,i.jsx)("span",{className:"xt0e3qv",children:(0,d.tx)("dev_mode.onboarding_callout.find_what_you_need_in_dev_mode")}),trackingContextName:"Dev Mode Onboarding Tooltip"})}},514549:(e,t,n)=>{n.d(t,{L:()=>k,R:()=>E});var i=n(104076),s=n(917360),a=n(795033),r=n(755444),l=n(140490),o=n(236631),d=n(192075),c=n(221669),u=n(404898),p=n(260745),m=n(211862),h=n(944350),f=n(382137),g=n(946996),x=n(619707),_=n(760848),y=n(144638);let v=(0,r.ck)("6d5e9cb0e9ec7fd5dd58425c5527dc8a78143a19");function b(){let e;let t=(0,c.M)(),n=(0,a.md)(x.R);return e=t?(0,d.tx)("dev_handoff.paywall.blocking_modal.title.starter"):n?(0,d.tx)("dev_handoff.paywall.blocking_modal.title.direct_link"):(0,d.tx)("dev_handoff.paywall.blocking_modal.title.dev_onboarding"),(0,i.jsx)(s.J,{className:y.DD,children:e})}function C(){let e=[(0,d.tx)("dev_handoff.paywall.blocking_modal.content.copy_code"),(0,d.tx)("dev_handoff.paywall.blocking_modal.content.track_design_changes"),(0,d.tx)("dev_handoff.paywall.blocking_modal.content.customize_plugins")];return(0,i.jsx)("ul",{children:e.map((e,t)=>(0,i.jsx)("li",{className:y.N$,children:e},t))})}function j(){let e=(0,c.n)(),t=(0,m.q5)(),n=t?.teamLimitedInfo?.name||"";return e?(0,i.jsx)("div",{className:y.HS,children:(0,d.tx)("dev_handoff.paywall.blocking_modal.content.ask_admin",{teamName:(0,i.jsx)("span",{className:y.Ps,children:n})})}):(0,i.jsx)(w,{})}function k(){return{imgSrc:v,modalContent:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(b,{}),(0,i.jsx)(C,{}),(0,i.jsx)(j,{})]})}}function w(){let{getUpgradePathway:e,getPlanAndPlanUser:t}=(0,f.wH)(),n=e(h.G_.DEV_MODE),{plan:s}=t(h.G_.DEV_MODE);return[g.J.ADMIN_AUTO_PATHWAY,g.J.AUTO_PATHWAY].includes(n)?(0,i.jsx)("div",{className:o.s.alignCenter.colorTextSecondary.mt16.$,children:(0,i.jsx)("span",{children:(0,d.tx)("auto_upgrade_confirmation.dev_mode.body",{planName:s?.name})})}):null}function E(){return(0,i.jsx)(l.u,{label:"BlockingModal",children:(0,i.jsx)(T,{})})}function T(){let{primaryButtonProps:e,secondaryButtonProps:t}=(0,u.BC)({entryPoint:p.i$.BlockingModal}),{imgSrc:n,modalContent:s}=k();return(0,i.jsx)(_.I,{imgSrc:n,content:s,modalType:"blocking modal",primaryButtonProps:{...e,type:"upgrade"},secondaryButtonProps:t?{...t,type:"back to design"}:void 0})}},760848:(e,t,n)=>{n.d(t,{I:()=>S,E:()=>T});var i=n(104076),s=n(276800),a=n(929302),r=n(950187),l=n(268389);n(120440);var o=n(390036),d=n(12866),c=n(511570),u=n.n(c),p=n(236631),m=n(352630),h=n(659062),f=n(373547),g=n(763286),x=n(144638);function _({imgSrc:e,imgWidth:t=328,imgHeight:n=150,hideImgBorder:s=!1,content:a,primaryButtonLabel:r,primaryButtonOnClick:l,primaryButtonTrackingProperties:o,secondaryButtonLabel:c,secondaryButtonOnClick:m,secondaryButtonTrackingProperties:_}){let b="light"===(0,f.DP)(),C="ui3"===(0,d.DP)().version;return(0,i.jsxs)("div",{className:p.s.py24.px16.cursorDefault.selectNone.flex.flexColumn.gap24.$,"data-testid":"paywall-modal",children:[(0,i.jsx)("div",{className:p.s.bRadius4.overflowHidden.if(b&&!s,p.s.b1.colorBorder).$,style:h.sx.add({height:`${n}px`}).$,children:(0,i.jsx)(g.J,{src:e,alt:"",width:t})}),(0,i.jsx)("div",{className:p.s.flex.flexColumn.gap6.$,children:a}),(0,i.jsxs)("div",{className:u()(p.s.flex.flexColumn.gap8.$,x.UD),children:[r&&l&&(0,i.jsx)(y,{label:r,onClick:l,trackingProperties:o}),c&&m&&(0,i.jsx)(v,{label:c,onClick:m,trackingProperties:_,isUI3:C})]})]})}function y({label:e,onClick:t,trackingProperties:n={}}){return(0,i.jsx)("span",{className:p.s.cursorPointer.$,children:(0,i.jsx)(m.lR,{variant:"primary",onClick:t,trackingProperties:n,htmlAttributes:{"data-testid":"primary-button"},children:(0,i.jsx)("span",{className:x.Jm,"data-testid":"primary-button-label",children:e})})})}function v({label:e,isUI3:t,onClick:n,trackingProperties:s={}}){return t?(0,i.jsx)("div",{className:x.zr,children:(0,i.jsx)(m.lR,{variant:"secondary",onClick:n,trackingProperties:s,htmlAttributes:{"data-testid":"secondary-button"},children:(0,i.jsx)("span",{className:x.Jm,"data-testid":"secondary-button-label",children:e})})}):(0,i.jsx)(m.e6,{className:u()(p.s.flex.justifyCenter.alignCenter.py8.px32.h40.maxWFull.cursorPointer.$,x.zr),onClick:n,htmlAttributes:{"data-testid":"secondary-button"},trackingProperties:s,children:(0,i.jsx)("div",{className:x.Jm,"data-testid":"secondary-button-label",children:e})})}var b=n(432777),C=n(111297),j=n(649693),k=n(944350),w=n(904017),E=n(132034);function T({imgSrc:e,imgWidth:t=328,imgHeight:n=150,hideImgBorder:s=!1,content:a,modalType:r,primaryButtonProps:l,secondaryButtonProps:o}){let d=(0,b.W)(),c={type:r,text:l?.type,trackingDescriptor:l?.trackingDescriptor,...d},u={type:r,text:o?.type,trackingDescriptor:o?.trackingDescriptor,...d};return(0,i.jsx)(_,{content:a,hideImgBorder:s,imgHeight:n,imgSrc:e,imgWidth:t,primaryButtonLabel:l?.label,primaryButtonOnClick:l?.onClick,primaryButtonTrackingProperties:c,secondaryButtonLabel:o?.label,secondaryButtonOnClick:o?.onClick,secondaryButtonTrackingProperties:u})}function S({imgSrc:e,imgWidth:t,imgHeight:n,hideImgBorder:d,content:c,modalType:u,primaryButtonProps:p,secondaryButtonProps:m}){let h=(0,b.W)(),f=a.hS({open:!0,onClose:s.lQ,preventUserClose:!0,recordingKey:"dev-mode-paywall-modal"}),g=function(){let e=(0,w.S2)(),t=(0,w.px)();return"loaded"!==e.status||"loaded"!==t.status?null:{planParentId:e.data.key.parentId,planType:e.data.key.type,planTier:e.data.tier,isOrgGuest:(0,w.Ty)(t.data)}}(),x="blocking modal"===u;return(0,i.jsx)(C.fu,{name:(0,o.Zr)(u),properties:{...h,primaryCtaTrackingDescriptor:p?.trackingDescriptor,secondaryCtaTrackingDescriptor:m?.trackingDescriptor},enabled:h?.gracePeriod!==void 0,children:(0,i.jsxs)(r.bL,{width:392,manager:f,children:[(0,i.jsx)(l.vo,{children:(0,i.jsx)(l.nB,{children:(0,i.jsx)(T,{content:c,hideImgBorder:d,imgHeight:n,imgSrc:e,imgWidth:t,modalType:u,primaryButtonProps:p,secondaryButtonProps:m})})}),x&&(0,i.jsx)(l.vo,{className:"x1xmf6yo xh8yej3",children:(0,i.jsx)(l.nB,{padding:0,children:null!==g?(0,i.jsx)(E.w,{seatType:j.ud.DEVELOPER,licenseType:k.G_.DEV_MODE,entryPoint:"dev-mode-blocking-modal",planData:g}):null})})]})})}},221669:(e,t,n)=>{n.d(t,{M:()=>a,n:()=>r});var i=n(211862),s=n(944350);function a(){let e=(0,i.q5)();return e?.plan?.tier===s.Ag.STARTER}function r(){let e=a(),t=(0,i.q5)();return e&&!t?.team?.canEdit}},404898:(e,t,n)=>{n.d(t,{BC:()=>G,Gu:()=>H,w_:()=>V});var i=n(716976),s=n(237420),a=n(287211),r=n(795033),l=n(219199),o=n(166887),d=n(208882),c=n(350819),u=n(192075),p=n(58212),m=n(428147),h=n(549571),f=n(742549),g=n(147046),x=n(366535),_=n(483200),y=n(260745),v=n(244205),b=n(249445),C=n(745529),j=n(211862),k=n(944350),w=n(853039),E=n(904017),T=n(570079),S=n(104836),I=n(382137),N=n(295253),A=n(176203),L=n(946996),M=n(956359),O=n(619707),R=n(19877),P=n(373224),D=n(406790),F=n(785751),z=n(221669),B=n(913772);function G({entryPoint:e,dismissModal:t,onRequestAccess:n}={}){let D=function(){let e=(0,h._I)(),t=(0,j.q5)(),n=(0,E.D6)("useUpgradeForDevMode").unwrapOr(null),a=n?.key.type===T.h4.TEAM_USER&&n?.planKey.parentId===t?.teamId,u=n?.key.type===T.h4.ORG_USER&&n?.planKey.parentId===t?.parentOrgId,f=(0,S.ol)(),g=(0,w.w5)(f)&&!f?.org_id,v=(0,o.U)(),A=(0,s.wA)(),O=(0,B.J)(),[R,D]=(0,r.fp)(F.t),z=i.useCallback(()=>{O&&D(F.c.UPGRADING)},[O,D]),{handleUpgrade:G,getUpgradeEligibility:U}=(0,I.wH)();return(0,i.useCallback)((n=y.i$.DevMode,i)=>{if(t&&!e)try{if(t.parentOrgId&&u||g&&a)z(),U(k.G_.DEV_MODE,!1)===L.q.CAN_UPGRADE&&G({licenseType:k.G_.DEV_MODE,editorType:t.editorType,upgradeReason:P.i.DEV_MODE,afterUpgradeCallback:i,entryPoint:n})({});else if(t.parentOrgId)z(),A(d.Ts({origin:"dev_mode",formState:c.qB.JOIN_ORG,redirectUrl:l.Ay.location.pathname})),A(x.to({type:M.x,data:{}}));else if(g)A(p.F.enqueue({message:"No team user"}));else{v("Dev Mode Paywall clicked",{type:"Starter Tier Upgrade",entryPoint:n},{forwardToDatadog:!0});let e=f?.id;n!==y.i$.DowngradeEmail&&e?A(_.WX({teamId:e,openInNewTab:!0,entryPoint:(0,C.c)(b.C6.DEV_MODE_MODAL)})):(z(),A(x.to({type:m.V,data:{teamId:e??void 0,upsellSource:N.b.DEV_MODE_UPSELL,entrypoint:b.C6.DEV_MODE_MODAL,openCheckoutInNewTab:!0,onDone:()=>D(F.c.DEFAULT)}})))}}catch(e){O&&D(F.c.DEFAULT),A(p.F.enqueue({message:e.message||e.data.message}))}},[t,e,g,A,f?.id,z,u,U,G,a,v,D,O])}(),{getUpgradePathway:V}=(0,I.wH)(),H=[L.J.AUTO_PATHWAY,L.J.ADMIN_AUTO_PATHWAY].includes(V(k.G_.DEV_MODE)),K=(0,z.n)(),W=(0,S.cD)(),q=(0,s.d4)(e=>(0,w.oc)(W,e)),X=(0,B.J)(),Y=i.useCallback(()=>{t?.(),D(e,n)},[t,n,D,e]),Z=function(e){let t=!!(0,f.hA)(),n=(0,r.md)(O.R),l=(0,R.U)("blocking_modal"),o=(0,s.wA)(),d=(0,a.R)(e=>({...e.selectedView,editorType:A.nT.Design,showOverview:!0,focusViewBackNavigation:void 0,devModeFocusId:void 0})),c=i.useCallback(()=>{l("design")},[l]),p=i.useCallback(()=>{o(g.sf(d))},[d,o]);return e?{label:(0,u.tx)("dev_handoff.paywall.blocking_modal.button.not_now"),onClick:e,trackingDescriptor:v.c.NOT_NOW}:t?{label:(0,u.tx)("dev_handoff.paywall.blocking_modal.button.back_to_summary"),onClick:p,trackingDescriptor:v.c.BACK_TO_SUMMARY}:n?{label:(0,u.tx)("dev_handoff.paywall.blocking_modal.button.not_now"),onClick:c,trackingDescriptor:v.c.NOT_NOW}:{label:(0,u.tx)("dev_handoff.paywall.blocking_modal.button.back_to_design"),onClick:c,trackingDescriptor:v.c.BACK_TO_DESIGN}}(t);return X?{primaryButtonProps:{label:H?(0,u.tx)("auto_upgrade_confirmation.dev_mode.cta_text"):(0,u.tx)("dev_handoff.paywall.blocking_modal.button.request_access"),onClick:Y,trackingDescriptor:H?v.c.GET_DEV_MODE:v.c.REQUEST_ACCESS},secondaryButtonProps:Z}:K?q?{primaryButtonProps:Z,secondaryButtonProps:void 0}:{primaryButtonProps:{label:(0,u.tx)("dev_handoff.paywall.blocking_modal.button.learn_more"),onClick:U,trackingDescriptor:v.c.LEARN_MORE},secondaryButtonProps:Z}:{primaryButtonProps:{label:q?(0,u.tx)("dev_handoff.paywall.blocking_modal.button.locked.reactivate"):(0,u.tx)("payments_modal.upgrade_to_professional"),onClick:Y,trackingDescriptor:q?v.c.REACTIVATE_YOUR_PROFESSIONAL_PLAN:v.c.UPGRADE_TO_PROFESSIONAL},secondaryButtonProps:Z}}function U(){l.Ay.unsafeRedirect(D.z,"_blank")}function V(){let{hasPendingRequest:e,getIsUpgradeHandlerLoading:t}=(0,I.wH)();return{loading:t(),hasPendingRequest:e(k.G_.DEV_MODE)}}function H(){let e=(0,j.q5)();return e?.currentPartialOrgUser?.designAccountTypeRequest?.status==="pending"||e?.currentPartialOrgUser?.devModeAccountTypeRequest?.status==="pending"||e?.currentTeamUser?.designAccountTypeRequest?.status==="pending"}},349951:(e,t,n)=>{n.d(t,{DK:()=>k,HC:()=>N,MO:()=>S,d8:()=>E,oD:()=>I,q9:()=>w});var i=n(716976),s=n(237420),a=n(638004),r=n(266808),l=n(795033),o=n(886710),d=n(883765),c=n(550209),u=n(361170),p=n(192075),m=n(744374),h=n(563792),f=n(260495),g=n(769410),x=n(848125),_=n(156774),y=n(211862),v=n(330308),b=n(76365),C=n(564914),j=(e=>(e.GENERIC="GENERIC",e.OFFLINE="OFFLINE",e.THUMBNAIL_TIMEOUT="THUMBNAIL_TIMEOUT",e))(j||{});function k(e){switch(e){case"GENERIC":return(0,p.t)("design_systems.playground.unable_to_load");case"OFFLINE":return(0,p.t)("design_systems.playground.unable_to_load_while_offline");case"THUMBNAIL_TIMEOUT":return(0,p.t)("design_systems.playground.unable_to_load_thumbnail")}}function w(e){switch(e){case"GENERIC":return(0,p.t)("design_systems.playground.unable_to_load_help_text");case"OFFLINE":return(0,p.t)("design_systems.playground.unable_to_load_while_offline_help_text");case"THUMBNAIL_TIMEOUT":return(0,p.t)("design_systems.playground.unable_to_load_thumbnail_help_hext")}}let E=(0,l.eU)(!1);function T(e){let[t,n]=i.useState(),[s,a]=i.useState(),[o,d]=i.useState(!1),[c,p]=i.useState(!1),[m,h]=i.useState(!1),[f,g]=(0,l.fp)(E),y=i.useCallback(()=>{let t=r.glU.generatePlaygroundThumbnail(e??null),i=r.glU.getPlaygroundNodeData();t.pixels?.length>0?(n({src:(0,_.Pv)(t.pixels,new u.Mi(t.width,t.height)),width:t.width/t.scale,height:t.height/t.scale}),a(i),p(!1),g(!0)):p(!0)},[g,e]),v=i.useCallback(e=>{d(e),h(!0)},[h]),{onSetPercentImagesLoaded:b,onResetTracker:C}=function(e){let[t,n]=i.useState(0),[s,a]=i.useState(0),[r,l]=i.useState(null),o=i.useCallback(()=>{n(0),a(0),l(null)},[]);return i.useEffect(()=>{function n(n,i){if(t>n&&t<i&&s<=n){let n=Date.now();(null===r||n-r>1e3)&&(l(n),a(t),e())}}n(.25,.5),n(.5,.75),n(.75,1)},[s,r,e,t]),i.useEffect(()=>{1===t&&(e(),a(1))},[e,t]),i.useMemo(()=>({onSetPercentImagesLoaded:n,onResetTracker:o}),[n,o])}(y);return i.useEffect(()=>(0,x.k)(v),[v]),i.useEffect(()=>()=>r.glU.clearPlaygroundScene(),[]),i.useEffect(()=>{m&&setTimeout(()=>{y(),h(!1)},0)},[m,h,y]),i.useMemo(()=>({setPlaygroundNodeData:a,onSetPercentImagesLoaded:b,onResetTracker:C,thumbnailData:t,playgroundNodeData:s,hasChangesToReset:o,hasThumbnailErrors:c,setHasChangesToReset:d}),[a,b,C,t,s,o,c,d])}function S({canViewPlaygroundQueryResult:e,canvasAsset:t,onLoaded:n,onError:s,thumbnailOptions:l}){let[u,p]=i.useState(t),{setPlaygroundNodeData:m,onSetPercentImagesLoaded:g,onResetTracker:x,thumbnailData:_,playgroundNodeData:b,hasChangesToReset:j,hasThumbnailErrors:k,setHasChangesToReset:w}=T(l),E=(0,y.tS)(),S=u!==t||!b||"loading"===e.status,[I,N]=i.useState(null),A=i.useCallback(()=>{r.glU.clearPlaygroundScene(),m(void 0)},[m]),L=i.useCallback(async(e=!0)=>{let n;if(t.type!==C.PW.COMPONENT&&t.type!==C.PW.STATE_GROUP&&t.type!==C.PW.MODULE){A();return}let i=Date.now();if(N(null),t.isLocal)n=null;else try{let e=h.Eo.getCanvas({canvas_url:t.canvas_url});await Promise.race([e,(0,o.fm)(100)])||(p(t),m(void 0),w(!1)),n=await e}catch(e){0===e.status?N("OFFLINE"):N("GENERIC"),A(),p(t),(0,c.$D)(a.e.DESIGN_SYSTEMS_ECOSYSTEM,e,{tags:{openFileKey:E,libraryKey:t.library_key,type:t.type}});return}let s=t.type!==C.PW.STATE_GROUP||t.isLocal?null:t.default_state_key;if(n?r.glU.setPlaygroundSceneFromBuffer(t.node_id,n,e,s,t.library_key):r.glU.setPlaygroundSceneFromLocalAsset(t.node_id)){w(!1),m(r.glU.getPlaygroundNodeData()),p(t),d.az.trackDefinedEvent("playground.set_scene",{duration:Date.now()-i,assetType:t.type,isLocal:t.isLocal??!1,assetKey:(0,v.u2)(t)}),x(),(0,f.Jr)().loadAllImagesUnder(["0:0"],r.MoD.NON_ANIMATED_ONLY,"playground.initialLoad",(e,t)=>{g((t-e)/t)},r.glU.getPlaygroundScene());return}if(e){p(t),m(void 0),w(!1),setTimeout(()=>{L(!1)},50);return}N("GENERIC"),A()},[E,A,x,g,t,m,w]),M=e.unwrapOr(null);return i.useEffect(()=>{null!==M&&(M?L():p(t))},[M,m,t,A,L]),i.useMemo(()=>{let e=k?"THUMBNAIL_TIMEOUT":I;return!e&&S?{state:"LOADING",previousAssetData:{thumbnailData:_,hasChangesToReset:j,refetchAndResetScene:L,nodeData:b,asset:u}}:(n(),e)?(s(),{state:"ERROR",errorType:e,previousAssetData:{thumbnailData:_,hasChangesToReset:j,refetchAndResetScene:L,nodeData:b,asset:u}}):{state:"LOADED",currentAssetData:{hasChangesToReset:j,refetchAndResetScene:L,nodeData:b,thumbnailData:_,asset:u}}},[S,n,k,I,b,_,s,j,L,u])}function I(){let e=(0,s.d4)(b.AF),t=e?.guid,n=(0,m.wS)(),a="loaded"===n.status?n.result:void 0,{setPlaygroundNodeData:l,thumbnailData:o,playgroundNodeData:d,hasChangesToReset:c}=T(),u=i.useCallback(()=>{let e=!1;a?e=r.glU.setPlaygroundSceneFromDetachedInfo(a.dataComponentId,"temp-scene"===a.dataLocation):t&&(e=r.glU.setPlaygroundSceneFromSelection()),e||(r.glU.clearPlaygroundScene(),l(void 0))},[t,a,l]);return i.useEffect(()=>{setTimeout(()=>{u()})},[u]),i.useMemo(()=>d&&o?{hasChangesToReset:c,refetchAndResetScene:u,nodeData:d,thumbnailData:o}:null,[d,o,c,u])}function N(e,t=!1){let{setPlaygroundNodeData:n,thumbnailData:s,playgroundNodeData:a,hasChangesToReset:l}=T();return i.useEffect(()=>{let i=!0,s=()=>{i&&r.glU&&!r.glU.setPlaygroundSceneFromGuid(e)&&n(void 0)};return t?(0,g.Tj)(new Set([e]),r.dPJ.PLAYGROUND_NODE_LOAD).then(s):s(),()=>{i=!1,r.glU&&r.glU.clearPlaygroundScene(),n(void 0)}},[e,t,n]),i.useMemo(()=>({hasChangesToReset:l,nodeData:a,resetNodedata:()=>{r.glU&&r.glU.setPlaygroundSceneFromGuid(e),n(void 0)},thumbnailData:s}),[l,a,s,e,n])}},121974:(e,t,n)=>{n.d(t,{u:()=>el,I:()=>ei});var i=n(104076),s=n(716976),a=n(237420),r=n(929302),l=n(420680),o=n(950187),d=n(492737),c=n(268389),u=n(419822),p=n(338590),m=n(220199),h=n(775301),f=n(320750),g=n(790009),x=n(266808),_=n(980852),y=n(795033),v=n(883765),b=n(140490),C=n(1188),j=n(943568),k=n(849757),w=n(352630),E=n(192075),T=n(3185),S=n(165505),I=n(744374),N=n(12606),A=n(443192),L=n(111297),M=n(74620),O=n(76365),R=n(349311),P=n(959834),D=n(739710),F=n(581993),z=n(349951),B=n(457374),G=n(111679),U=n(454273),V=n(366535),H=n(805733),K=n(211862),W=n(932709);function q(){let e=(0,U.lA)();return(0,i.jsx)(X,{backingSymbol:e})}function X({backingSymbol:e}){let t=(0,a.wA)(),n=(0,K._G)(),r=(0,H.b)({libraryKey:e?.sourceLibraryKey,nodeId:e?.publishID??void 0,mainComponent:!0}),o=(0,W.bj)(e?.sourceLibraryKey?[e?.sourceLibraryKey]:[]).data[0],d=o?.library_key??null,c=!!d&&d!==n,u=s.useMemo(()=>!!e&&x.Egt.nodeIsSoftDeleted(e.guid),[e]),p=s.useCallback(()=>{e&&(c?!!r.data?.link&&r.data?.type!=="community"&&t(G.V3({url:r.data.link})):(t(V.AS()),x.glU.goToSymbolOrStateGroupById(e.guid,!1)))},[e,t,c,r.data]);return!e||u||c&&(!r.data?.link||r.data?.type==="community")?null:(0,i.jsx)(l.K,{onClick:p,"aria-label":e.isState?(0,E.t)("design_systems.playground.open_variant_in_library"):(0,E.t)("design_systems.playground.open_component_in_library"),htmlAttributes:{"data-tooltip":e.isState?(0,E.t)("design_systems.playground.open_variant_in_library"):(0,E.t)("design_systems.playground.open_component_in_library"),"data-tooltip-type":R.Ib.TEXT},children:(0,i.jsx)(B.l,{})})}var Y=n(402776),Z=n(455788),J=n(280817);let Q="playground_modal--container--oiCFH",$="playground_modal--thumbnailContainer--ZaF9V",ee="playground_modal--thumbnail--JPv2M",et="playground_modal--propsContainer--CAA9y";var en=n(230645);function ei(e){let t=(0,S.IO)(e,!0),n=s.useRef(t()),[i,a]=s.useState(n.current),[r,l]=s.useState(0),[o,d]=(0,y.fp)(z.d8),[c,u]=s.useState(!0),p=s.useCallback(()=>{let e=t();return n.current=e,e},[t]);return s.useLayoutEffect(()=>{o&&c&&(a(e=>{let t=n.current,i=p();return"light"===t&&"dark"===i||"dark"===t&&"light"===i?"light"===e?"dark":"light":e}),d(!1))},[c,p,d,a,o]),{theme:i??n.current,invertTheme:()=>{u(!1),a(e=>"light"===e?"dark":"light"),l(e=>e+1)},callbackCount:r}}let es=s.memo(({guid:e,...t})=>(0,i.jsx)(b.u,{label:"PlaygroundModalWrapper",children:(0,i.jsx)(I.si,{children:(0,i.jsx)(ea,{guid:e,...t})})})),ea=s.memo(({guid:e,...t})=>{let n;let u=s.useRef(null);s.useEffect(()=>{e&&y.zl.set(J.J,[e])},[e]);let b=(0,a.wA)(),P=(0,a.d4)(O.AF),B=(0,I.wS)(),G="loaded"===B.status&&"temp-scene"===B.result.dataLocation?B.result:void 0,U=(0,z.oD)(),V=s.useCallback(()=>{b((0,N.vq)())},[b]),H=r.hS({...t,onClose:()=>{V(),(0,v.sx)("Playground closed"),t.onClose()}}),K=s.useMemo(()=>new _.TSSceneGraph(G?x.juq.DETACHED_COMPONENTS:x.juq.PLAYGROUND),[G]),W=(0,M.eY)(),X=s.useMemo(()=>{if(!U)return"";if("loaded"===B.status)return B.result.isVariant?B.result.dataStateGroupId??B.result.dataComponentId:B.result.dataComponentId;let e=U.nodeData?.playgroundGUID;return e?((0,D.Yi)([e],K)||(0,D.k4)([e],K))??"":""},[U,K,B]),es=s.useMemo(()=>K.get(X)?.name??"",[X,K]),{theme:ea,invertTheme:el,callbackCount:eo}=ei(e??X),ed=(0,a.d4)(e=>e.userFlags.dismissed_playground_banner),ec=s.useCallback(()=>{b(A.b({dismissed_playground_banner:!0}))},[b]),eu=s.useCallback(()=>{U?.refetchAndResetScene()},[U]),ep=s.useCallback(e=>{let t=(0,J.n)(e,K,W),n=y.zl.get(J.J);y.zl.set(J.J,[...n,t]),x.glU.setPlaygroundSceneFromGuid(t??"")},[W,K]);if(!U||!P)return(0,i.jsx)(er,{manager:H,theme:ea});let{thumbnailData:em,nodeData:eh}=U;if(!eh)return(0,i.jsx)(er,{manager:H,theme:ea});let{playgroundGUID:ef,componentProps:eg,modeData:ex}=eh,e_=K.get(ef);if(!em)return(0,i.jsx)(er,{manager:H,theme:ea});let ey=y.zl.get(J.J);return ey.length>1&&(n=(0,i.jsx)(l.K,{onClick:()=>{let e=ey[ey.length-2];x.glU.setPlaygroundSceneFromGuid(e);let t=ey.slice(0,-1);y.zl.set(J.J,t)},"aria-label":(0,E.t)("dev_handoff.playground.select_parent_instance"),htmlAttributes:{"data-tooltip":(0,E.t)("dev_handoff.playground.select_parent_instance"),"data-tooltip-type":R.Ib.TEXT},children:(0,i.jsx)(p.v,{})})),(0,i.jsx)(L.fu,{name:"Dev Mode Component Playground",children:(0,i.jsx)(o.bL,{manager:H,width:"fit-content",children:(0,i.jsx)(d.y7,{container:u,children:(0,i.jsxs)(c.vo,{children:[(0,i.jsx)(c.Y9,{children:(0,i.jsx)(c.hE,{children:(0,E.tx)("design_systems.playground.component_playground")})}),(0,i.jsx)(c.nB,{ref:u,children:(0,i.jsxs)("div",{className:Q,children:[(0,i.jsxs)("div",{className:$,style:(0,S.CU)(ea),children:[(0,i.jsx)("img",{src:em.src,className:ee,width:em.width,height:em.height,alt:(0,E.t)("design_systems.playground.thumbnail_alt"),"data-testid":"playground-thumbnail"}),(0,i.jsx)(g.J,{mode:ea,children:(0,i.jsx)("div",{className:"playground_modal--themeButton---BLzd",children:(0,i.jsx)(w.fX,{checked:"light"===ea,onIcon:(0,i.jsx)(m.c,{}),offIcon:(0,i.jsx)(h.G,{}),"aria-label":(0,E.t)("design_systems.playground.change_background"),htmlAttributes:{"data-tooltip":(0,E.t)("design_systems.playground.change_background"),"data-tooltip-type":R.Ib.TEXT},trackingProperties:{type:"Background toggle",color:ea,index:eo},onChange:el})})})]}),(0,i.jsxs)("div",{className:et,children:[(0,i.jsxs)("div",{className:"playground_modal--propsContainerHeader--oGDtk",children:[(0,i.jsxs)("div",{className:"playground_modal--propsContainerName--ZCWzH",children:[n,(0,i.jsx)("div",{className:"playground_modal--productComponentName--NaHb9 ellipsis--ellipsis--Tjyfa",children:es})]}),(0,i.jsxs)("div",{className:"playground_modal--propsContainerHeaderButtons--MPFZ-",children:["INSTANCE"===P.type&&(0,i.jsx)(q,{}),(0,i.jsx)(l.K,{onClick:eu,"aria-label":(0,E.t)("design_systems.playground.reset_properties"),disabled:!U.hasChangesToReset,recordingKey:"resetPlaygroundProps",htmlAttributes:{"data-tooltip":(0,E.t)("design_systems.playground.reset_properties"),"data-tooltip-type":R.Ib.TEXT},children:(0,i.jsx)(f.m,{})})]})]}),(0,i.jsxs)(k.P,{className:"playground_modal--scrollContainerWrapper--04qBs",children:[!ed&&(0,i.jsx)("div",{className:"playground_modal--bannerContainer--rQy3f",children:(0,i.jsx)(j.z,{orientation:"vertical",iconSrc:en.A,variant:"dev",title:(0,E.t)("design_systems.playground.banner_header"),onClose:ec,children:(0,E.tx)("design_systems.playground.banner_content")})}),(0,i.jsxs)(M.q0.Provider,{value:K,children:[(0,i.jsx)("div",{className:"playground_modal--propsSectionContainer--3xF-J",children:(0,i.jsx)(Z.x,{containerWidth:D.O2.UNBOUNDED,componentProps:eg,playgroundGUID:ef,productComponentGUID:X,sceneGraph:K,viewOnlyMode:e_?.isState?F.BK.VARIANT_PROPS:void 0,recordingKey:"playgroundPicker"})}),(0,i.jsx)("div",{className:"playground_modal--modesSectionContainer--NaZ-S",children:(0,i.jsx)(Y.b,{modes:ex||{}})})]}),(0,i.jsx)(C.tH,{boundaryKey:"Figmadoc",fallback:C.H4.NONE_I_KNOW_WHAT_IM_DOING,children:(0,i.jsx)(T.Qd,{playgroundGUID:ef,onInstancePillClick:ep})})]})]})]})})]})})})})});function er({manager:e,theme:t}){return(0,i.jsx)(L.fu,{name:"Dev Mode Component Playground",children:(0,i.jsx)(o.bL,{manager:e,width:"fit-content",children:(0,i.jsxs)(c.vo,{children:[(0,i.jsx)(c.Y9,{children:(0,i.jsx)(c.hE,{children:(0,E.tx)("design_systems.playground.component_playground")})}),(0,i.jsx)(c.nB,{children:(0,i.jsxs)("div",{className:Q,children:[(0,i.jsx)("div",{className:$,style:(0,S.CU)(t),children:(0,i.jsx)("div",{className:ee})}),(0,i.jsx)("div",{className:et,children:(0,i.jsx)("div",{className:"playground_modal--propsContainerLoading--XO18-",children:(0,i.jsx)(u.k,{})})})]})})]})})})}let el=(0,P.Ju)(es,"PlaygroundModal")},402776:(e,t,n)=>{n.d(t,{b:()=>m});var i=n(104076),s=n(667693),a=n(387092),r=n(266808),l=n(641518),o=n(192075),d=n(968169),c=n(331497),u=n(315876),p=n(664320);function m({modes:e,recordingKey:t,onChange:n}){let m=(0,c.J2)((0,d.UK)().showGuids),h=(0,p.cd)(r.ZiZ.PLAYGROUND_SCENE),f=Object.entries(e).map(([e,t])=>({...t,setKey:e})).filter(e=>e.modeOptions.length>1).sort((e,t)=>e.collectionName.toLocaleLowerCase().localeCompare(t.collectionName.toLocaleLowerCase()));return 0===f.length?null:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"playground_modes_section--title--wPRzF text--fontPos11--2LvXf text--_fontBase--QdLsd",children:(0,o.tx)("design_systems.playground.variable_modes_title")}),f.map(e=>(0,i.jsx)(u.y,{explicitModeID:e.explicitMode,hideRemoveButton:!0,inheritedModeID:e.inheritMode,isShowingGuids:m,modeOptions:e.modeOptions,onChange:t=>{t!==p.Mo&&t!==p.Yn&&((0,s.c2)(e.explicitMode,t)||(t===p.Ws||t===p.UE?r.glU?.setVariableModeForPlayground(e.setKey,t,null):h(t,(0,a.yG)(e.setKey),()=>{r.glU?.setVariableModeForPlayground(e.setKey,t.guid,t.extendedCollectionId),n?.(e,t.guid)})))},recordingKey:l.Pt(t,`mode-${e.setKey}`),showExplicitOnly:!1,variableSetKey:e.setKey,variableSetName:e.collectionName},e.setKey))]})}},455788:(e,t,n)=>{n.d(t,{x:()=>x});var i=n(104076),s=n(716976),a=n(680909),r=n(943568),l=n(74620),o=n(739710),d=n(460418),c=n(581993),u=n(136580),p=n(406483),m=n(349951);let h="playground_props_section--divider--I23uK";var f=n(230645);function g({componentProps:e,bubbledComponentId:t,productComponentGUID:n,sceneGraph:s,instanceSwapPickerInitialHeight:r,instanceSwapPickerInitialPosition:m,recordingKey:h,containerWidth:f,onSelectedPropertyValueHistoryChange:g,onTypedPropChange:x}){let _=(0,l.T3)(),{typedPropDefsExcludingHidden:y,variantPropDefs:v,assignmentValuesByDefId:b,allStateVariantProps:C,backingStateVariantProps:j,statePropertyValues:k}=(0,d.nj)(t,e,n,_);return y.length||v.length?(0,i.jsxs)(a.bL,{defaultOpen:y.length<c.qC,children:[(0,i.jsx)(a.Y9,{width:"fill",variant:"leftPanel",children:(0,i.jsx)(a.JU,{children:(0,i.jsx)(u.iN,{canCollapse:!0,shouldHideButtons:!0,isInComponentPlayground:!0,instanceAndSublayerGUIDs:[t],containerWide:f===o.O2.WIDE,recordingKey:h,instanceNameDisplayOverride:u.NA.NAME_ONLY})})}),(0,i.jsx)(a.UC,{children:(0,i.jsx)(c.tO,{allStateVariantProps:C,assignmentValues:b,backingStateVariantProps:j,containerWidth:f,entrypointForInstanceSwapPicker:p.S.InstancePickerEntrypoint.INSTANCE_SWAP_PROP_PLAYGROUND_BUBBLED,forBubbledProps:!0,guids:[t],hideIcon:!0,inPlayground:!0,instanceSwapPickerInitialHeight:r,instanceSwapPickerInitialPosition:m,onSelectedPropertyValueHistoryChange:g,onTypedPropChange:x,productComponentGUID:n,propDimension:o.OE.ASSIGNMENT,recordingKey:h,sceneGraph:s,splitVariantAndTypedProps:!1,statePropertyValues:k,typedPropDefs:y,variantPropDefs:v})})]}):null}function x({componentProps:e,label:t,playgroundGUID:n,productComponentGUID:a,sceneGraph:u,viewOnlyMode:x,instanceSwapPickerInitialHeight:_,instanceSwapPickerInitialPosition:y,recordingKey:v,containerWidth:b,errorData:C,shouldShowDividerAboveProps:j,onSelectedPropertyValueHistoryChange:k,onTypedPropChange:w}){let E=(0,l.T3)(),T=n&&e,{typedPropDefsExcludingHidden:S,variantPropDefs:I,assignmentValuesByDefId:N,allStateVariantProps:A,backingStateVariantProps:L,statePropertyValues:M}=(0,d.nj)(n??"",e??{},a,E),O=s.useMemo(()=>T&&e[n]?.bubbledNestedInstanceGUIDs||[],[e,T,n]);return C?C.shouldHideError?null:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:h}),(0,i.jsx)("div",{className:"playground_props_section--errorBannerContainer--d3nQO",children:(0,i.jsx)(r.z,{orientation:"vertical",iconSrc:f.A,onClose:()=>C.setShouldHideError(!0),variant:"warning",title:(0,m.DK)(C.errorType),children:(0,m.q9)(C.errorType)})})]}):T&&(S.length||I.length||O.length)?(0,i.jsxs)(i.Fragment,{children:[j&&(0,i.jsx)("div",{className:h}),t,(0,i.jsx)(c.tO,{allStateVariantProps:A,assignmentValues:N,backingStateVariantProps:L,containerWidth:b,entrypointForInstanceSwapPicker:p.S.InstancePickerEntrypoint.INSTANCE_SWAP_PROP_PLAYGROUND,forBubbledProps:!1,guids:[n],hideIcon:!0,inPlayground:!0,instanceSwapPickerInitialHeight:_,instanceSwapPickerInitialPosition:y,onSelectedPropertyValueHistoryChange:k,onTypedPropChange:w,productComponentGUID:a,propDimension:o.OE.ASSIGNMENT,recordingKey:v,sceneGraph:u,splitVariantAndTypedProps:!!x,statePropertyValues:M,typedPropDefs:S,variantPropDefs:I,viewOnlyMode:x}),O.map(t=>{let n=e[t]?.backingSymbol||"",s=e[n]?.containingStateGroupGUID||n;return s?(0,i.jsx)(g,{bubbledComponentId:t,componentProps:e,containerWidth:b,instanceSwapPickerInitialHeight:_,instanceSwapPickerInitialPosition:y,onSelectedPropertyValueHistoryChange:k,onTypedPropChange:w,productComponentGUID:s,recordingKey:v,sceneGraph:u},t):null})]}):null}},280817:(e,t,n)=>{n.d(t,{J:()=>i,n:()=>s});let i=(0,n(795033).eU)([]);function s(e,t,n){let i=t.get(e),s=t.get(i?.symbolId??"");if(s?.componentKey){let e=n.getInternalCanvas();for(let t of e?.childrenNodes??[]){if(t.componentKey===s?.componentKey)return t.guid;if(t.isStateGroup){for(let e of t.childrenNodes)if(e.componentKey===s?.componentKey)return e.guid}}}return s?.publishID}},373550:(e,t,n)=>{n.d(t,{d:()=>i});let i=(0,n(795033).eU)({})},565797:(e,t,n)=>{n.d(t,{f:()=>w});var i=n(104076),s=n(716976),a=n(684742),r=n(652539),l=n(192075),o=n(211862),d=n(248043),c=n(186003),u=n(237420),p=n(76618),m=n(140490),h=n(546001),f=n(944380),g=n(349311),x=n(722887);let _="vscode_extension_page_picker--pagePickerButtonContent--JXaX-";var y=n(391812),v=n(769773);function b(){return(0,i.jsx)("div",{className:"vscode_extension_page_picker--floatingContainer--HgY6-",children:(0,i.jsx)(f.o,{})})}function C(e){return(0,i.jsx)(m.u,{label:"VscodeExtensionPagePicker",children:(0,i.jsx)(j,{...e})})}function j({additionalPages:e,onClickAdditionalPage:t,selectedAdditionalPageId:n,isOnReadyForDevPage:a}){let[o,d]=s.useState(!1),c=s.useRef(null),m=(0,u.d4)(e=>e.mirror.appModel.pagesList),f=(0,u.d4)(e=>e.mirror.appModel.currentPage),C=m.find(e=>e.nodeId===f);return((0,h.L)(c,()=>{o&&d(!1)}),m)?(0,i.jsxs)("div",{className:"vscode_extension_page_picker--pagePicker--AFcyx",ref:c,children:[(0,i.jsxs)("button",{className:"vscode_extension_page_picker--pagePickerButton--xunuS",onClick:()=>d(!o),"data-tooltip":(0,l.t)("dev_handoff.pages_list"),"data-tooltip-type":g.Ib.TEXT,children:[a?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(p.O,{className:"vscode_extension_page_picker--readyIcon--MjlB1"}),(0,i.jsx)("span",{className:_,children:(0,l.t)("dev_handoff.workflows.overview.title")})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(x.v,{pageGuid:f,margin:"marginRight",fallback:(0,i.jsx)(r.B,{svg:y.A,className:"vscode_extension_page_picker--pagePickerIcon--miPBV"})}),(0,i.jsx)("span",{className:_,children:C?.name||""})]}),(0,i.jsx)(r.B,{svg:v.A,className:"vscode_extension_page_picker--pagePickerButtonChevron--MpjMi"})]}),o&&(0,i.jsx)(b,{})]}):null}var k=n(322086);function w({children:e,isOnReadyForDevPage:t}){let n=(0,o.tS)(),u=s.useCallback(()=>{let e=(0,d.jN)({file:{key:n},isDevHandoff:!0});(0,c.Qn)(e)},[n]);return(0,i.jsxs)("div",{className:"vscode_extension_header--vscodeExtensionHeader--1-R98",children:[(0,i.jsx)(C,{isOnReadyForDevPage:t}),(0,i.jsxs)("div",{className:"vscode_extension_header--children--sHtI3",children:[(0,i.jsx)(a.E,{onClick:u,"aria-label":(0,l.t)("dev_handoff.overview_mode.open_in_figma"),className:"vscode_extension_header--focusVisible--NjfH0",children:(0,i.jsxs)("div",{className:"vscode_extension_header--openFigmaText--e2tMf",children:[(0,l.t)("dev_handoff.overview_mode.open_in_figma"),(0,i.jsx)(r.B,{svg:k.A,className:"vscode_extension_header--openFigmaSVG--02Jd3"})]})}),e]})]})}},554311:(e,t,n)=>{n.d(t,{p:()=>y});var i=n(104076),s=n(716976),a=n(420680),r=n(293422),l=n(437481),o=n(877384),d=n(149503),c=n(812714),u=n(192075),p=n(549571),m=n(751464),h=n(802529),f=n(692042),g=n(592726),x=n(835307),_=n(349311);function y({nodeId:e,sourceForLogging:t,onboardingKey:n,isMinimal:y}){let v=(0,g.TA)(),b=(0,m.D)(),C=(0,p._I)(),j=(0,p.xo)(),k=(0,f.QU)({subscribeToUpdates_expensive:!0}),{hasReadyStatus:w,hasCompletedStatus:E,hasStatus:T,canHaveStatus:S,nestedLayerPreventsStatus:I,lastStatusChangeUserId:N}=(0,x.Fk)((e,t)=>{let n=e?.get(t??""),i=n?.canHaveStatus,s=n?.canHaveStatusBasedOnType;return{hasReadyStatus:n?.hasReadyStatus,hasCompletedStatus:n?.hasCompletedStatus,hasStatus:n?.hasStatus,canHaveStatus:i,nestedLayerPreventsStatus:!i&&s,lastStatusChangeUserId:n?.getStatusInfo()?.userId}},e),A=b&&C&&!j&&(!(0,c.kc)().dt_interactive_inspection_m2||S),L=s.useRef(T),[M,O]=s.useState(!1);s.useEffect(()=>{(0,c.kc)().dt_interactive_inspection_m2&&(T&&O(!1),L.current&&!T&&N!==v&&O(!0))},[T,N,v]);let R=s.useCallback(()=>{A&&e&&h.z4.setNodesCompleted([e],`${t}-complete-button`)},[A,e,t]),P=s.useCallback(()=>{A&&e&&h.z4.setNodesReady(!0,[e],`${t}-complete-button`,null)},[A,e,t]),D=(0,c.kc)().dt_interactive_inspection_m2&&!E&&!w&&!M,F=s.useMemo(()=>w?R:E||D?P:void 0,[E,w,R,P,D]),z=s.useMemo(()=>E?(0,u.tx)("dev_handoff.status.completed"):D?(0,u.tx)("dev_handoff.status.mark_as_ready_for_first_time"):(0,u.tx)("dev_handoff.status.mark_completed"),[E,D]),B=s.useMemo(()=>E?(0,i.jsx)(l.g,{"data-testid":"filled-icon"}):T||!(0,c.kc)().dt_interactive_inspection_m2?(0,i.jsx)(o.W,{"data-testid":"empty-icon"}):(0,i.jsx)(d.l,{"data-testid":"rfd-icon"}),[E,T]),G=s.useMemo(()=>w?(0,u.t)("dev_handoff.status.mark_as_completed"):E?(0,u.t)("dev_handoff.status.mark_as_ready"):D?(0,u.t)("dev_handoff.status.mark_as_ready_for_first_time"):(0,u.t)("dev_handoff.workflows.focus_view.complete_button.status_removed"),[E,w,D]),U=s.useMemo(()=>I?(0,u.t)("dev_handoff.overview_mode.tooltip.design_structure_prevents_status"):(0,c.kc)().dt_interactive_inspection_m2&&!S?(0,u.t)("dev_handoff.overview_mode.tooltip.layer_cannot_have_status"):w?(0,u.t)("dev_handoff.overview_mode.tooltip.upgrade_mark_completed"):E?(0,u.t)("dev_handoff.overview_mode.tooltip.upgrade_mark_incomplete"):D?(0,u.t)("dev_handoff.overview_mode.tooltip.upgrade_mark_ready"):(0,u.t)("dev_handoff.workflows.focus_view.complete_button.status_removed"),[E,w,D,I,S]);if(!e)return null;if(y)return w||E?(0,i.jsx)(a.K,{onClick:F,disabled:!A,"aria-label":G,htmlAttributes:{"data-tooltip-type":_.Ib.TEXT,"data-tooltip":A?G:U,"data-testid":"change-status-icon-button"},children:B}):null;let V=(0,c.kc)().dt_interactive_inspection_m2?M:!w&&!E,H=!A||V;return k<700?(0,i.jsx)(a.K,{onClick:F,disabled:H,"aria-label":G,htmlAttributes:{"data-tooltip-type":_.Ib.TEXT,"data-tooltip":H?U:G,"data-testid":"change-status-button"},children:B}):(0,i.jsx)(r.$n,{variant:"secondary",onClick:F,disabled:H,"aria-label":G,htmlAttributes:{"data-tooltip-type":_.Ib.TEXT,"data-tooltip":H?U:void 0,"data-tooltip-text-left":!0,"data-onboarding-key":n,"data-testid":"change-status-button"},iconPrefix:B,children:z})}},752064:(e,t,n)=>{n.d(t,{TP:()=>m,TQ:()=>x,VW:()=>h,ZJ:()=>f,bh:()=>g});var i=n(716976),s=n(237420),a=n(266808),r=n(166887),l=n(147046),o=n(657878),d=n(176203),c=n(844182),u=n(569565),p=n(118752);function m(e,t){let n=(0,o._6)();return"fullscreen"===n.view?{...n,editorType:e??n.editorType,focusViewBackNavigation:void 0,devModeFocusId:void 0,showOverview:!1,overviewBackButtonTargetNodeId:void 0,...t?{nodeId:t}:{}}:n}function h(e,t,n=!0){let i=(0,o._6)();return"fullscreen"===i.view?{...i,editorType:d.nT.DevHandoff,focusViewBackNavigation:{toEditorType:i.editorType,toOverview:n},showOverview:!1,devModeFocusId:e,...t?{nodeId:t}:{}}:i}function f(){let e=(0,s.wA)(),t=(0,o._6)();return(0,i.useCallback)(n=>{(0,p._$)(e,t,n)},[e,t])}function g(){let e=(0,s.wA)(),t=(0,o._6)();return(0,i.useCallback)(()=>{(0,p.Ep)(e,t)},[e,t])}function x(e){let t=m(e),n=(0,s.wA)(),i=(0,r.U)(),o=(0,c.n0)(),p=(0,u.VS)({pagesList:o,isComparingChanges:!1});return async(e,s,r)=>{r&&await p(r),n(l.sf(t));let o="unknown";"fullscreen"===t.view&&(a.w3z.addToSelectionNoAnimation([s]),a.glU.panToNode(s,!1),o=t.editorType===d.nT.Design?"design_canvas":"dev_mode_canvas"),i(e,{target:o,nodeId:s})}}},691952:(e,t,n)=>{n.d(t,{s:()=>F,$:()=>z});var i=n(104076),s=n(716976),a=n(237420),r=n(544373),l=n(962856),o=n(700411),d=n(76618),c=n(795033),u=n(511570),p=n.n(u),m=n(140490),h=n(192075),f=n(549571),g=n(21031),x=n(268389),_=n(653899),y=n(352630),v=n(259161),b=n(742549),C=n(244205),j=n(111297),k=n(59975);function w({devFocusedOnboarding:e,manager:t,show:n,complete:s}){let l=(0,b.l7)(),o=(0,a.wA)(),d=(0,c.md)(g.d),u=(0,c.md)(g.cR),p=c.md(g.hv)?.data;return(0,_.h)(()=>{l&&!p&&(0,k.nT)(o),!l&&!p&&(d||u)&&n()}),(0,i.jsx)(r.bL,{manager:t,variant:"primary",children:(0,i.jsx)(j.fu,{name:"Dev Mode Overview Onboarding",children:(0,i.jsxs)(x.vo,{children:[(0,i.jsx)(r.Y9,{children:(0,i.jsx)(x.hE,{autofocus:!0,children:d?(0,h.tx)("dev_handoff.workflows.overview.onboarding.first_rfd.title"):(0,h.tx)("dev_handoff.workflows.overview.onboarding.has_rfd.title")})}),(0,i.jsx)(x.nB,{children:d?(0,h.tx)("dev_handoff.workflows.overview.onboarding.first_rfd.description"):e?(0,h.tx)("dev_handoff.workflows.overview.onboarding.has_rfd.dev_mode.description"):(0,h.tx)("dev_handoff.workflows.overview.onboarding.has_rfd.design.description")}),(0,i.jsx)(r.wi,{children:(0,i.jsxs)(x.jk,{children:[(0,i.jsx)(v.pW,{href:"https://help.figma.com/hc/articles/23918228264855",variant:"secondary",trackingProperties:{trackingDescriptor:C.c.LEARN_MORE},children:(0,h.tx)("dev_handoff.workflows.overview.onboarding.secondary_cta")}),(0,i.jsx)(y.$z,{variant:"primary",onClick:s,trackingProperties:{trackingDescriptor:C.c.GOT_IT},children:(0,h.tx)("dev_handoff.workflows.overview.onboarding.primary_cta")})]})})]})})})}var E=n(147046),T=n(278491),S=n(819851),I=n(422872),N=n(589046),A=n(469229),L=n(143277),M=n(349311),O=n(299117),R=n(342053),P=n(441030);let D="overview_entry--isSelected--E6mSl";function F({count:e,isInTab:t,isActive:n}){return(0,i.jsx)("span",{className:p()("overview_entry--badgeWrapper--TjyNb",t&&"overview_entry--isInTab--J7wAV"),children:(0,i.jsx)(l.E,{variant:n?"defaultOutline":"inactiveOutline","aria-label":(0,h.t)("dev_handoff.workflows.overview.tab_count",{count:e}),children:e})})}function z(e){return(0,i.jsx)(m.u,{label:"OverviewEntry",children:(0,i.jsx)(B,{...e})})}function B({devFocusedOnboarding:e}){let t=(0,b.X0)(),n=!(0,f.U4)(),l=(0,a.wA)(),u=(0,b.U0)(),m=(0,a.d4)(e=>n?void 0:(0,A.Np)(e,u)),x=(0,b.l7)(),_=(0,b.ZI)(),y=c.md(g.hv)?.data,[v,C]=(0,c.fp)(g.cR),j=(0,f.xo)(),z=(0,c.md)(g.d),B=(0,S.ow)(),G=(0,N.n)(),U=(0,b.Xd)(),V=(0,s.useCallback)(e=>{if(e.stopPropagation(),e.preventDefault(),n)return;let{clientX:t,clientY:i}=e;l((0,E.j7)({type:T.bx,data:{clientX:t,clientY:i}}))},[n,l]),H=!j&&!G,{getTriggerProps:K,...W}=function(){let{show:e,isShowing:t,complete:n}=(0,I.e)({overlay:P.xjb,priority:L.N.DEFAULT_MODAL}),{manager:i,getTriggerProps:s}=r.gR({isOpen:t,onOpenChange:e=>!e&&n(),placement:"right"});return{show:e,complete:n,manager:i,getTriggerProps:s}}();return!t||B?null:0===_?null:(x||y||v||z||C(!0),(0,i.jsxs)(R.y,{autoHeight:!0,withBorder:!0,children:[(0,i.jsx)(o._,{className:p()("overview_entry--entryRow--l-Ofr",x&&D,n&&"overview_entry--isDisabled--OAHeM"),onClick:function(e){e.preventDefault(),U()},href:m??"#",htmlAttributes:{onContextMenu:V,"data-tooltip":n?(0,h.t)("dev_handoff.paywall.org_not_member_hint"):void 0,"data-tooltip-type":M.Ib.TEXT,"data-tooltip-text-left":!0,"data-onboarding-key":k.o5},"aria-current":x?"page":void 0,recordingKey:"dev_handoff.workflows.overview_entry",children:(0,i.jsxs)("div",{className:p()("overview_entry--entryRowInner--fPECV",x&&D),children:[(0,i.jsxs)("div",{className:"overview_entry--leftSide--0zNy- text--fontPos11--2LvXf text--_fontBase--QdLsd",children:[(0,i.jsx)(d.O,{className:"overview_entry--readyIcon--QwDeG"}),(0,h.tx)("dev_handoff.workflows.overview.title")]}),(0,i.jsx)("div",{"data-onboarding-key":k.o5,...H?K():{},children:(0,i.jsx)(F,{count:_})})]})}),H&&(0,i.jsx)(O.p,{children:(0,i.jsx)(w,{devFocusedOnboarding:e,...W})})]}))}},925699:(e,t,n)=>{n.d(t,{L:()=>m,Y:()=>p});var i=n(795033),s=n(883765),a=n(383947),r=n(192075),l=n(58212),o=n(630332),d=n(936663),c=n(381640),u=n(619070);let p=(0,c.nF)(async(e,{fileKey:t,clientLifecycleId:n,persistentEntityId:l})=>{let c;i.zl.set((0,o.wc)(n),(0,a.ux)());try{if((c=await d.J(t,(0,r.t)("ai_assistant.restore.version_label"),(0,r.t)("ai_assistant.restore.version_description"),e.dispatch,!0))&&c.id)i.zl.set((0,o.wc)(n),(0,a.NY)({restoreVersionId:c.id})),s.az.trackDefinedEvent("ai_assistant.created_savepoint",{persistentEntityId:l,clientLifecycleId:n,restoreVersionId:c.id,success:!0});else throw Error("No savepoint ID returned")}catch(e){console.error("Error creating savepoint for AI assistant",e.message),i.zl.set((0,o.wc)(n),(0,a.uW)(e)),s.az.trackDefinedEvent("ai_assistant.created_savepoint",{persistentEntityId:l,clientLifecycleId:n,success:!1,error:e.message})}}),m=(0,c.nF)((e,t)=>{let{fileKey:n,restoreVersionId:d,trackingContext:c}=t;s.az.trackDefinedEvent("ai_assistant.restore_initiated",{...c,restoreVersionId:d}),e.dispatch(l.F.enqueue({message:(0,r.t)("ai_assistant.restore.in_progress")})),i.zl.set((0,o.ru)(t.trackingContext.clientLifecycleId),(0,a.ux)());try{e.dispatch((0,u.PF)({fileKey:n,versionId:d,source:u.C0.AI_ASSISTANT_CHAT}))}catch(e){console.error("Error restoring version from assistant chat",e),i.zl.set((0,o.ru)(c.clientLifecycleId),(0,a.uW)(e))}})},550594:(e,t,n)=>{n.d(t,{Z5:()=>o,i$:()=>a,uw:()=>l});var i=n(716976),s=n(812714);let a={minZoomPercentage:76,zoomScaleOverlap:64,clusterClickResultViewportPercentage:35,rebuildClustersZoomDelay:50,disableSidebar:!1},r=new Set;function l(e){if(!(0,s.kc)().internal_only_debug_tools)return;let t="function"==typeof e?e({...a}):e;a={...a,...t},requestAnimationFrame(()=>{r.forEach(e=>e(a))})}function o(){let[e,t]=i.useState(a);return i.useEffect(()=>{let e=e=>{t(e)};return r.add(e),()=>{r.delete(e)}},[t]),e}},750371:(e,t,n)=>{n.d(t,{p:()=>l});var i=n(104076),s=n(361170),a=n(692042),r=n(964498);function l(e){let t=(0,a.Cj)(),n=s.Mi.scale(-1,t);return(0,i.jsx)("div",{className:r.M,style:{top:t.y,left:t.x,height:t.height,width:t.width},onScroll:e.forceNoScroll?e=>{e.currentTarget.scrollLeft=0,e.currentTarget.scrollTop=0}:void 0,children:(0,i.jsx)("div",{className:r.W,style:{top:n.y,left:n.x},children:e.children})})}},55029:(e,t,n)=>{n.d(t,{FQ:()=>j,LO:()=>C,Oo:()=>b});var i,s=n(716976),a=n(237420),r=n(492737),l=n(582789),o=n(795033),d=n(824570),c=n(983500),u=n(690824),p=n(88314);function m(e,t,n,i){let s=[h(e,t,n),h(e,t,i),h(n,i,e),h(n,i,t)];return s[0]!==s[1]&&s[2]!==s[3]||s.every(e=>"COLLINEAR"===e)&&f(e.x,t.x,n.x,i.x)&&f(e.y,t.y,n.y,i.y)}function h(e,t,n){let i=(t.y-e.y)*(n.x-t.x)-(n.y-t.y)*(t.x-e.x);return 0===i?"COLLINEAR":i>0?"CLOCKWISE":"COUNTERCLOCKWISE"}function f(e,t,n,i){let s=Math.min(e,t),a=Math.max(e,t),r=Math.min(n,i);return s<=Math.max(n,i)&&a>=r}!function(e){e.CLOCKWISE="CLOCKWISE",e.COUNTERCLOCKWISE="COUNTERCLOCKWISE",e.COLLINEAR="COLLINEAR"}(i||(i={}));var g=n(724744),x=(e=>(e.TOP="TOP",e.RIGHT="RIGHT",e.BOTTOM="BOTTOM",e.LEFT="LEFT",e.UNKNOWN="UNKNONWN",e))(x||{}),_=(e=>(e.TOP_LEFT="TOP_LEFT",e.TOP="TOP",e.TOP_RIGHT="TOP_RIGHT",e.RIGHT="RIGHT",e.BOTTOM_RIGHT="BOTTOM_RIGHT",e.BOTTOM="BOTTOM",e.BOTTOM_LEFT="BOTTOM_LEFT",e.LEFT="LEFT",e.OVERLAP="OVERLAP",e))(_||{}),y=n(968169);n(331497);var v=n(347080);function b(){return(0,o.md)(u.uc)}function C(){let e=(0,a.d4)(({mirror:{appModel:e}})=>e.showUi),t=0;return(0,y.lK)()&&e&&(t+=(0,c.jz)(v.ui3RulerMargin)),(0,s.useMemo)(()=>({left:t,right:0}),[t,0])}function j(e,t=20){let n=function(e,t){let[n,i]=(0,s.useState)([]),a=(0,r.PU)(),o=(0,d.wm)(()=>t?a.filter(e=>e!==t&&!e.contains(t)&&!t.contains(e)):a,[a,t]),c=(0,s.useCallback)(t=>{i(t.map(t=>{let{x:n,y:i,width:s,height:a}=t.getBoundingClientRect();return 0===s||0===a?l.r.fromOriginAndSize(n,i,s,a):k(n,i,s,a,e)}))},[i,e]);(0,s.useLayoutEffect)(()=>{c(o)},[c,o]),(0,s.useLayoutEffect)(()=>{let e=()=>{c(o)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[c,o]);let u=(0,s.useCallback)(t=>{let n=t.map(t=>{let n=o.findIndex(e=>e===t.target);if(-1!==n){let{x:i,y:s,width:a,height:r}=t.target.getBoundingClientRect();return[n,0===a||0===r?l.r.fromOriginAndSize(i,s,a,r):k(i,s,a,r,e)]}}).filter(e=>!!e);i(e=>{let t=[...e];return n.forEach(([e,n])=>{t[e]=n}),t})},[o,e]);return(0,s.useLayoutEffect)(()=>{let e=new ResizeObserver(u);return o.forEach(t=>{e.observe(t)}),()=>e.disconnect()},[o,u]),(0,s.useLayoutEffect)(()=>{if(!("IntersectionObserver"in window))return()=>{};let e=new IntersectionObserver(e=>{u(e)},{root:null,rootMargin:"0px",threshold:1});return o.forEach(t=>{e.observe(t)}),()=>e.disconnect()},[o,u]),(0,s.useMemo)(()=>n.filter(e=>!e.isEmpty()),[n])}(t,e.current??void 0);return(0,s.useCallback)((e,i,s)=>(function(e,t,n,i){let s=function(e,t){if(t.containsIncludingBoundary(e))return e;let n=e.width()<=t.width()?(0,p.qE)(e.left(),t.left(),t.right()-e.width()):e.left(),i=e.height()<=t.height()?(0,p.qE)(e.top(),t.top(),t.bottom()-e.height()):e.top();return new l.r(new g.M(n,i),e.size)}(e,t),a=(()=>{if(i)return i;let n=l.r.fromCenterSize(t.center(),e.size);return[n.left(),n.top()]})();return[...n,...n].reduce((e,t)=>e.hasIntersectionWith(t)?function({target:e,obstacle:t,targetPreviousXY:n}){let[i,s]=n,a=new l.r(new g.M(i,s),e.size);switch(function(e,t,n){switch(function(e,t){let n=e.right()<=t.left(),i=e.left()>=t.right(),s=e.bottom()<=t.top(),a=e.top()>=t.bottom();if(n&&s)return"TOP_LEFT";if(i&&s)return"TOP_RIGHT";if(i&&a)return"BOTTOM_RIGHT";if(n&&a)return"BOTTOM_LEFT";if(s)return"TOP";if(i)return"RIGHT";if(a)return"BOTTOM";else if(n)return"LEFT";else return"OVERLAP"}(t,n)){case"TOP":return"TOP";case"RIGHT":return"RIGHT";case"BOTTOM":return"BOTTOM";case"LEFT":return"LEFT";case"TOP_LEFT":return m(t.bottomRight(),e.bottomRight(),n.topLeft(),n.topRight())?"TOP":"LEFT";case"TOP_RIGHT":return m(t.bottomLeft(),e.bottomLeft(),n.topLeft(),n.topRight())?"TOP":"RIGHT";case"BOTTOM_RIGHT":return m(t.topLeft(),e.topLeft(),n.bottomLeft(),n.bottomRight())?"BOTTOM":"RIGHT";case"BOTTOM_LEFT":return m(t.topRight(),e.topRight(),n.bottomLeft(),n.bottomRight())?"BOTTOM":"LEFT";default:return"UNKNONWN"}}(e,a,t)){case"TOP":return new l.r(new g.M(e.left(),t.top()-e.height()),e.size);case"BOTTOM":return new l.r(new g.M(e.left(),t.bottom()),e.size);case"LEFT":return new l.r(new g.M(t.left()-e.width(),e.top()),e.size);case"RIGHT":return new l.r(new g.M(t.right(),e.top()),e.size);default:return e}}({target:e,obstacle:t,targetPreviousXY:a}):e,s)})(e,i.expand(-t),n,s),[n,t])}function k(e,t,n,i,s){return l.r.fromOriginAndSize(e-s,t-s,n+2*s,i+2*s)}},188264:(e,t,n)=>{n.d(t,{d:()=>c});var i=n(983500),s=n(607804),a=n(675847),r=n(375627),l=n(968169),o=n(844182),d=n(404343);function c(){let e=(0,l.qw)(),{isPropertiesPanelCollapsed:t}=(0,r.iT)(),n=(0,o.Ye)(),c=(0,l.dP)(),u=(0,l.Bv)(),p=(n?0:c)+((0,l.lK)()?(0,i.jz)(d.T_r):0)+u,m=(0,s.to)(),{leftOffset:h,rightOffset:f}=(0,a.h)();return m?[h,f]:[p,t?0:e]}},164131:(e,t,n)=>{n.d(t,{h:()=>p});var i=n(716976),s=n(237420),a=n(315910),r=n(514359),l=n(4033),o=n(288747),d=n(944350),c=n(904017),u=n(912610);function p(e){let t=(0,o.dq)(),n=(0,c.X$)("useOrgPrivateExtensions").unwrapOr(null),p=n?.key.type===d.OL.ORG,m=(0,l.cW)(),h=(0,l.ZT)(),f="plugin"===e?m:h,g=(0,s.wA)(),x=(0,r.Cb)(),_=(0,u.K$)(),y="plugin"===e?a.Xt:a.gI;return i.useEffect(()=>{p&&!x&&g(y())},[g,p,x,y]),(0,i.useMemo)(()=>{if(!p||x)return[];let e=(0,u.Qt)((0,u.i8)(Object.values(f)),t||"");return _&&(e=(0,u._w)(e,_)),Object.values(e).map(e=>(0,u.uF)(e))},[_,x,p,f,t])}},527433:(e,t,n)=>{n.d(t,{x:()=>d});var i=n(716976),s=n(795033),a=n(489175);let r=(0,s.eU)(null),l=(0,s.eU)(null),o=0;function d({subscribeToUpdates_EXPENSIVE:e}){let t=(0,a.ft)(!0)?"pointermove":"mousemove",n=(0,s.Xr)(r);return(0,s.md)(e?r:l),(0,i.useEffect)(()=>{let e=({clientX:e,clientY:t})=>{n({x:e,y:t})};return 1==++o&&document.addEventListener(t,e),()=>{0==--o&&document.removeEventListener(t,e)}},[t,n]),s.zl.get(r)}},895651:(e,t,n)=>{n.d(t,{K:()=>r});var i=n(716976),s=n(692042),a=n(527433);function r(){let e=(0,a.x)({subscribeToUpdates_EXPENSIVE:!0}),t=(0,s._X)({subscribeToUpdates_expensive:!0});return(0,i.useMemo)(()=>!!(e&&e.y>=t.y&&e.x>=t.x&&e.x<=t.x+t.width),[e,t])}},583072:(e,t,n)=>{n.d(t,{C:()=>m});var i=n(716976),s=n(795033),a=n(380494),r=n(449572),l=n(211862),o=n(592726),d=n(944350),c=n(59849),u=n(904017),p=n(568383);function m(e){let t=(0,u.px)(),n=(0,l.q5)(),m=(0,o.TA)(),h=(0,r.bc)((0,c.dHY)({}));return(0,i.useMemo)(()=>a.Qw.transformAll([t,h],(t,i)=>!!n&&!!m&&(!!(t.key.type===d.h4.ORG_USER||t.seatTypeLicenseTypes?.includes(d.G_.DESIGN))||!!i.currentUser.inStudentPlan||s.zl.get(p.TG).has(e))),[t,n,m,h,e])}},407738:(e,t,n)=>{n.d(t,{f:()=>U});var i=n(657913),s=n(266808),a=n(170627),r=n(681958),l=n(980852),o=n(812714),d=n(770522),c=n(997629),u=n(246144),p=n(638871),m=n(291507),h=n(636208),f=n(954231),g=n(950836),x=n(393470),_=n(775428),y=n(260776),v=n(920498),b=n(883765),C=n(431222),j=n(583516),k=n(947153),w=n(159520),E=n(275947);function T(e,t,n){let i=s.XJn.getCustomizableVariableName(n.guid,e);if(!i)return;let a=(0,E.tm)(i);if(a)return t[a]}let S={bottomLeftRadius:"rectangleBottomLeftCornerRadius",bottomRightRadius:"rectangleBottomRightCornerRadius",topLeftRadius:"rectangleTopLeftCornerRadius",topRightRadius:"rectangleTopRightCornerRadius"};function I(e,t){a.l7.ai("first-draft-override-radius",()=>{e.setBoundVariable(t,null)})}let N={itemSpacing:"stackSpacing",paddingTop:"stackTopPadding",paddingBottom:"stackBottomPadding",paddingLeft:"stackLeftPadding",paddingRight:"stackRightPadding"};function A(e,t){a.l7.ai("first-draft-override-spacing",()=>{e.setBoundVariable(t,null)})}function L(e){a.l7.ai("first-draft-set-font-name",()=>{e.setRangeBoundVariable(0,e.characters.length,"fontFamily",null),e.setRangeBoundVariable(0,e.characters.length,"fontStyle",null),e.setRangeBoundVariable(0,e.characters.length,"fontWeight",null)})}async function M(e,t,n){let i=s.XJn.inheritedTextStyleGuid(e.guid);if(null===i){L(e);return}let r=(0,l.getActiveTSSceneGraph)().get(i);if(!r||!n||!n.variableMaps?.fontVariableMap){L(e);return}if(!("fontFamily"in r.boundVariablesForStyle))return;let o=r.boundVariablesForStyle.fontFamily,d=function(e,t,n){let i=s.XJn.getCustomizableVariableName(t.guid,e);if(!i)return null;let a=(0,E.tm)(i);return a?n[a]??null:null}(o.id,e,n.variableMaps.fontVariableMap);if(!d){L(e);return}try{await (0,v.uW)(d.fontName),a.l7.ai("first-draft-set-font-name",()=>{e.fontName=d.fontName,d.letterSpacing&&(e.letterSpacing=d.letterSpacing)}),t[o.id]=d.fontName.family}catch(n){L(e);let t=void 0===n?"undefined":n instanceof Error?n.message:JSON.stringify(n);b.az.trackDefinedEvent("ai_generation.first_draft_font_error",{error:t,family:d.fontName.family,style:d.fontName.style,location:"override-variables"})}}async function O(e){await Promise.all(e.node.childrenNodes.map(t=>R({...e,node:t}))),(0,k.V5)(e.node)}async function R(e){var t;let{node:n,variableOverrideMap:i,theme:r,colorOptions:l}=e;!function(e,t){if("HORIZONTAL"===e.stackMode||"VERTICAL"===e.stackMode)for(let[n,i]of Object.entries(N)){let s=e.boundVariables&&e.boundVariables[n];if(!s)continue;if(!t||!t.variableMaps){A(e,n);continue}let r=T(s.id,t.variableMaps.numberVariableMap,e)??void 0;if(void 0===r){A(e,n);continue}a.l7.ai("first-draft-override-spacing",()=>{let t=e[i],n=(0,j.o$)(t);e[i]=(0,j.nV)({value:t,rangeSize:n},r,1)})}}(n,r),function(e,t,n){if(e.boundVariables)for(let[i,s]of Object.entries(S)){let r=e.boundVariables&&e.boundVariables[i];if(!r)continue;if(!n||!n.variableMaps){I(e,i);continue}let l=T(r.id,n.variableMaps.numberVariableMap,e)??void 0;if(void 0===l){I(e,i);continue}a.l7.ai("first-draft-override-radius",()=>{let n=(0,j.UO)(e,e[s],l,1);e[s]=n,t[r.id]=n})}}(n,i,r),"TEXT"===n.type&&await M(n,i,r);let o=n.fills.some(e=>"IMAGE"===e.type),d=!o&&l.modeChanged;if(t={node:n,getNewColor:(e,t)=>{let i=t.varId&&r?function(e,t,n){if(!t.variableMaps)return;let i=s.XJn.getCustomizableVariableName(n.guid,e);if(!i)return;let a=(0,E.tm)(i);if(a)return t.variableMaps.colorVariableMap[a]}(t.varId,r,n):void 0;return(0,y.Jv)(e,{...t,brandColor:i})},variableOverrideMap:i,options:{...l,modeChanged:d,role:(0,_.Dk)(n)}},a.l7.ai("first-draft-override-paints",()=>{(0,y.oR)(t)}),n.childCount){let e=(0,y.gU)(n.fills,o?void 0:l.parentFillColor);await O({node:n,variableOverrideMap:i,theme:r,colorOptions:{...l,modeChanged:d,parentFillColor:e}})}}async function P(e,t,n){await R({node:e,variableOverrideMap:t,theme:n,colorOptions:{mode:n&&n.darkMode?_.lH.DARK:_.lH.LIGHT,modeChanged:!!n?.darkMode}})}async function D(e){for(let t of(0,C._F)(e,["INSTANCE","FRAME"],{sharedPluginData:{namespace:"jsx",keys:["theme"]}})){(0,f.xF)(t.guid);let e=t.getSharedPluginData("jsx","theme");if(e)try{let n=JSON.parse(e),i=(0,w.Vx)(n);await P(t,{},i)}catch(t){(0,u.x1)("First Draft theming","Failed to parse theme",{themeStr:e,e:t})}}}var F=n(306184);async function z(e,t,n){let s=(0,h.D)({enableNativeJsx:!0});s.skipInvisibleInstanceChildren=!0;let a=(0,l.getActiveTSSceneGraph)(),r=null;if((0,o.kc)().first_draft_share_jsx){let s=await (0,i._1)(e,n,{showUnhandled:!!(0,o.kc)().first_draft_debug,headless:!1});if(!(r=s.node))throw Error("Could not find new node");t&&(t.trackComponentLookupSuccess(s.stats?.componentLookupSuccesses??0),t.trackComponentLookupFailure(s.stats?.componentLookupFailures??0))}else{let t=await s.createNodeFromJSXAsync(e);r=a.get(t.id)}return r.localOpacity=0,r}async function B(e,t,n){let i=(0,F.uP)(e,{ignoreOpacity:!0}),s=(0,F.rO)(e,i);a.l7.ai("first-draft-override-paints",()=>{let n=t.darkMode?_.lH.DARK:_.lH.LIGHT;n!==(0,x.P)(e)&&(0,x.t)(e,n);let i=(0,d.tK)(t.brandColor);if(i){let t=(0,y.gU)(e.fills);t&&e.childrenNodes.forEach(e=>{(0,g.l9)(e,i,n,{},"",t)})}}),a.l7.ai("first-draft-remove-fill",()=>{e.fills=[]}),await (0,F.jR)(e,(0,F.k5)({fontFamilies:s.fontFamilies},{fontFamilies:t.fontFamilies}),n)}async function G(e,t,n){let i={};for(let s of e){if(a.l7.ai("first-draft-set-plugin-data",()=>{if(n.frameName&&s.name!==n.frameName&&(s.name=n.frameName),t&&s.setSharedPluginData(p.SV,"jsx",t),n.theme&&s.setSharedPluginData(p.SV,"theme",JSON.stringify(n.theme)),n.sharedPluginData)for(let[e,t]of Object.entries(n.sharedPluginData))s.setSharedPluginData(p.SV,e,t)}),n.addWireframeBorder&&a.l7.ai("first-draft-set-wireframe-border",()=>{(0,f._Y)(s)}),(0,f.jZ)(s,n.dsKitKey,n.clientLifecycleId),n.directGeneration&&(0,o.kc)().first_draft_direct_gen_layout_heuristics?(0,f.WY)(s):n.autoFillParent&&s&&(0,f.tG)(s),await P(s,i,n.theme),n.themeProperties){if(!n.deviceType)throw Error("deviceType must be provided if themeProperties is provided");await B(s,n.themeProperties,n.deviceType)}n.isEval&&await D(s),(0,f.Zu)(s)}return{themeOverrideMap:i}}async function U({jsxStr:e,jsxElement:t,prevExpandedJsx:n,customJsxElementRegistry:d,options:p},g){let x=(0,l.getActiveTSSceneGraph)(),_=(0,h.D)({enableNativeJsx:!0});if(_.skipInvisibleInstanceChildren=!0,!p.prevNodeId){let n=await z(t,g,d.getShareJsxComponentInfoByJSXName());if(!n)throw Error("Could not find new node");a.l7.ai("first-draft-insert-jsx",()=>{if(p.parentNodeId){let e=x.get(p.parentNodeId);if(!e)throw(0,u.x1)("first-draft","Could not find parent node with parentNodeId",{parentNodeId:p.parentNodeId}),Error("Could not find parent node with parentNodeId");let t=[n];for(let n of(t.reverse(),t))p.insertAtIndex?p.insertAtIndex===e.childCount?e.appendChild(n):e.insertChild(n,p.insertAtIndex):e.appendChild(n)}}),n.fullyUpdateSymbolInstances();let i=await G([n],e,p);return await (0,f.U_)(n,p),n.removeLocalOpacity(),{insertNodeIds:[n.guid],customizationResult:i}}let y=x.get(p.prevNodeId);if(!y)throw(0,u.x1)("first-draft","Could not find node with prevNodeId",{prevNodeId:p.prevNodeId}),Error("Could not find node with prevNodeId");let v=(0,i.JF)(n),b=null;if((0,o.kc)().first_draft_share_jsx){let e=await (0,c.m)({node:y,jsxElement:t,oldJSXElement:v,options:{...i.RP,transformUnhandledNodes:!!(0,o.kc)().first_draft_debug,componentInfoByJSXName:d.getShareJsxComponentInfoByJSXName()}});b=e.node,g&&(g.trackComponentLookupSuccess(e.stats?.componentLookupSuccesses??0),g.trackComponentLookupFailure(e.stats?.componentLookupFailures??0))}else{let e=await _.reconcileNodeFromJSXAsync({id:y.guid},v,t);b=x.get(e.id)}if(!b)throw Error("Could not find updated node");b.fullyUpdateSymbolInstances();let C=await G([b],e,p);return p.shouldAnimateLoading&&p.doneTextLayerIds&&function(e,t,n){let i=[];for(let e of((0,r.hV)(t,e=>{"TEXT"===e.type&&i.push(e)}),i))n.has(e.guid)||((0,f.us)(e)?(s.zuo.cancelAllAnimationsForNode(e.guid),n.add(e.guid)):s.zuo.isAnimating(e.guid)||e.setOpacityWithAnimation(1,m._E.forOpacityOscillation(45,.25,.8,60),"first-draft-text-layer-opacity"))}(0,b,p.doneTextLayerIds),b.guid!==p.prevNodeId&&await (0,f.U_)(b,p),{insertNodeIds:[b.guid],customizationResult:C}}},950836:(e,t,n)=>{n.d(t,{N_:()=>c,l9:()=>u,tb:()=>d});var i=n(88314),s=n(58599),a=n(770522),r=n(775428),l=n(260776);function o(e){let t=new Set,n=new Set;return e.forEach(e=>{7===e.length?t.add(e):n.add(e)}),[Array.from(t),Array.from(n)]}function d(e,t){let{bg:n,content:d}=t,c=(0,a.HD)(e)?r.lH.DARK:r.lH.LIGHT,u=(0,a.F_)(e),p=(0,s.oB)(e),m=n.filter(e=>e!==u),[h,f]=o(m),g=function(e){let t={};return e.forEach(e=>{t[e]=(t[e]||0)+1}),t}(m),x=h.sort((e,t)=>g[t]-g[e]),_=x.find(e=>{let t=(0,a.tK)(e);if(!t)return!1;let n=(0,s.oB)(t);return(0,l.x)(n.l,c)&&!(0,i.xN)(n.l,p.l,.12)});if(_)return _;let[y,v]=o(d),b=y.find(e=>{let t=(0,a.tK)(e);return t&&(0,r.Yx)((0,s.oB)(t).l,r.lg.CONTENT)});if(b)return b;if((0,l.x)(p.l,c)&&!(0,l.c4)(p.l))return u;let C=f.sort((e,t)=>g[t]-g[e]).find(e=>{let t=(0,a.tK)(e);if(!t)return!1;let n=(0,s.oB)(t);return(0,l.x)(n.l,c)});return C?C:v.find(e=>{let t=(0,a.tK)(e);return t&&(0,r.Yx)((0,s.oB)(t).l,r.lg.CONTENT)})||(x.length?x[0]:y.length?y[0]:u)}function c(e){let t={};if(!e)return t;let n=[e];for(;n.length>0;){let e=n.pop();if(e){if(e.fills.length>0){let n=(0,l.gU)(e.fills);if(n){let i=(0,s.oB)(n);t[e.guid]={s:i.s,l:i.l}}}else if(e.strokePaints.data.length>0){let n=(0,l.gU)(e.strokePaints.data);if(n){let i=(0,s.oB)(n);t[e.guid]={s:i.s,l:i.l}}}"childrenNodes"in e&&n.push(...e.childrenNodes)}}return t}function u(e,t,n,i,s,a){e&&function e(t,n,i,s){if(t.name.toLowerCase().includes("swatch"))return;let a=i[t.guid];if((0,l.oR)({node:t,getNewColor:n,options:{...s,modeChanged:!1,role:(0,r.Dk)(t),originalSL:a}}),t.childCount){let a=t.fills.some(e=>"IMAGE"===e.type),r=(0,l.gU)(t.fills,a?void 0:s.parentFillColor);t.childrenNodes.forEach(t=>{e(t,n,i,{...s,parentFillColor:r})})}}(e,(e,n)=>(0,l.Jv)(e,{...n,brandColor:t}),i,{mode:n,currentBrandHex:s,parentFillColor:a})}},393470:(e,t,n)=>{n.d(t,{P:()=>r,t:()=>l});var i=n(770522),s=n(775428),a=n(260776);function r(e){let t=(0,a.X6)(e);if(t)return(0,i.HD)(t)?s.lH.DARK:s.lH.LIGHT}function l(e,t,n){e&&function e(t,n,i){let r=t.fills.some(e=>"IMAGE"===e.type),l=!r&&i.modeChanged;if((0,a.oR)({node:t,getNewColor:n,options:{...i,modeChanged:l,role:(0,s.Dk)(t)}}),t.childrenNodes){let s=(0,a.gU)(t.fills,r?void 0:i.parentFillColor);t.childrenNodes.forEach(t=>{e(t,n,{...i,modeChanged:l,parentFillColor:s})})}}(e,(e,t)=>(0,a.Jv)(e,{...t,brandColor:void 0}),{mode:t,modeChanged:!0,currentBrandHex:n})}},159520:(e,t,n)=>{n.d(t,{t_:()=>m,Vx:()=>p});var i=n(638004),s=n(770522),a=n(550209),r=n(376314),l=n(556230),o=n(775428),d=n(260776);let c={[r.GS.DEFAULT]:[{"font/title/bold":{fontName:{family:"Plus Jakarta Sans",style:"Bold"},letterSpacing:{units:"PERCENT",value:-2}},"font/title/regular":{fontName:{family:"Plus Jakarta Sans",style:"Regular"},letterSpacing:{units:"PERCENT",value:-2}},"font/body/bold":{fontName:{family:"Plus Jakarta Sans",style:"Bold"},letterSpacing:{units:"PERCENT",value:0}},"font/body/medium":{fontName:{family:"Plus Jakarta Sans",style:"SemiBold"},letterSpacing:{units:"PERCENT",value:0}},"font/body/regular":{fontName:{family:"Plus Jakarta Sans",style:"Regular"},letterSpacing:{units:"PERCENT",value:0}},"font/label/medium":{fontName:{family:"Plus Jakarta Sans",style:"Medium"},letterSpacing:{units:"PERCENT",value:0}},"font/label/regular":{fontName:{family:"Plus Jakarta Sans",style:"Medium"},letterSpacing:{units:"PERCENT",value:0}}},{"font/title/bold":{fontName:{family:"Outfit",style:"SemiBold"},letterSpacing:{units:"PERCENT",value:0}},"font/title/regular":{fontName:{family:"Outfit",style:"Regular"},letterSpacing:{units:"PERCENT",value:0}},"font/body/bold":{fontName:{family:"Outfit",style:"SemiBold"},letterSpacing:{units:"PERCENT",value:0}},"font/body/medium":{fontName:{family:"Outfit",style:"Medium"},letterSpacing:{units:"PERCENT",value:0}},"font/body/regular":{fontName:{family:"Outfit",style:"Regular"},letterSpacing:{units:"PERCENT",value:0}},"font/label/medium":{fontName:{family:"Outfit",style:"Medium"},letterSpacing:{units:"PERCENT",value:0}},"font/label/regular":{fontName:{family:"Outfit",style:"Regular"},letterSpacing:{units:"PERCENT",value:0}}},{"font/title/bold":{fontName:{family:"Inter",style:"Semi Bold"},letterSpacing:{units:"PERCENT",value:-2.5}},"font/title/regular":{fontName:{family:"Inter",style:"Regular"},letterSpacing:{units:"PERCENT",value:-2.5}},"font/body/bold":{fontName:{family:"Inter",style:"Semi Bold"},letterSpacing:{units:"PERCENT",value:-.5}},"font/body/medium":{fontName:{family:"Inter",style:"Medium"},letterSpacing:{units:"PERCENT",value:-.5}},"font/body/regular":{fontName:{family:"Inter",style:"Regular"},letterSpacing:{units:"PERCENT",value:-.5}},"font/label/medium":{fontName:{family:"Inter",style:"Medium"},letterSpacing:{units:"PERCENT",value:0}},"font/label/regular":{fontName:{family:"Inter",style:"Regular"},letterSpacing:{units:"PERCENT",value:0}}},{"font/title/bold":{fontName:{family:"Public Sans",style:"Bold"},letterSpacing:{units:"PERCENT",value:-2}},"font/title/regular":{fontName:{family:"Public Sans",style:"Regular"},letterSpacing:{units:"PERCENT",value:-2}},"font/body/bold":{fontName:{family:"Public Sans",style:"Bold"},letterSpacing:{units:"PERCENT",value:-.5}},"font/body/medium":{fontName:{family:"Public Sans",style:"SemiBold"},letterSpacing:{units:"PERCENT",value:-.5}},"font/body/regular":{fontName:{family:"Public Sans",style:"Regular"},letterSpacing:{units:"PERCENT",value:-.5}},"font/label/medium":{fontName:{family:"Public Sans",style:"Medium"},letterSpacing:{units:"PERCENT",value:0}},"font/label/regular":{fontName:{family:"Public Sans",style:"Regular"},letterSpacing:{units:"PERCENT",value:0}}}],[r.GS.SERIF]:[{"font/title/bold":{fontName:{family:"Domine",style:"Bold"},letterSpacing:{units:"PERCENT",value:-2}},"font/title/regular":{fontName:{family:"Domine",style:"Regular"},letterSpacing:{units:"PERCENT",value:-2}},"font/body/bold":{fontName:{family:"Outfit",style:"SemiBold"},letterSpacing:{units:"PERCENT",value:0}},"font/body/medium":{fontName:{family:"Outfit",style:"Medium"},letterSpacing:{units:"PERCENT",value:0}},"font/body/regular":{fontName:{family:"Outfit",style:"Regular"},letterSpacing:{units:"PERCENT",value:0}},"font/label/medium":{fontName:{family:"Outfit",style:"Medium"},letterSpacing:{units:"PERCENT",value:0}},"font/label/regular":{fontName:{family:"Outfit",style:"Regular"},letterSpacing:{units:"PERCENT",value:0}}},{"font/title/bold":{fontName:{family:"Roboto Serif",style:"Bold"},letterSpacing:{units:"PERCENT",value:-2}},"font/title/regular":{fontName:{family:"Roboto Serif",style:"Regular"},letterSpacing:{units:"PERCENT",value:-2}},"font/body/bold":{fontName:{family:"Public Sans",style:"Bold"},letterSpacing:{units:"PERCENT",value:-.5}},"font/body/medium":{fontName:{family:"Public Sans",style:"SemiBold"},letterSpacing:{units:"PERCENT",value:0}},"font/body/regular":{fontName:{family:"Public Sans",style:"Regular"},letterSpacing:{units:"PERCENT",value:-.5}},"font/label/medium":{fontName:{family:"Public Sans",style:"Medium"},letterSpacing:{units:"PERCENT",value:0}},"font/label/regular":{fontName:{family:"Public Sans",style:"Regular"},letterSpacing:{units:"PERCENT",value:0}}}]};function u(e){return e[Math.floor(Math.random()*e.length)]}function p(e){let t={numberVariableMap:{},colorVariableMap:{}},n="true"===e[r.u7.DARK_MODE];for(let[i,a]of Object.entries(e||{}))switch(i.split("/")[0]){case r.u7.COLOR:let e=(0,s.tK)(a);if(!e)continue;t.colorVariableMap[i]=(0,d.qO)(e,n?o.lH.DARK:o.lH.LIGHT);break;case r.u7.CORNER_RADIUS:case r.u7.SPACING:let p=parseFloat(a);!isNaN(p)&&p>=l.Xy&&p<=l.Ne&&(t.numberVariableMap[i]=p);break;case r.u7.FONT:switch(a){case r.GS.SERIF:case r.GS.DEFAULT:t.fontVariableMap=u(c[a]);break;default:t.fontVariableMap=u(c[r.GS.DEFAULT])}}return{darkMode:n,variableMaps:t}}function m(e,t){try{return p(e)}catch(n){return n instanceof Error&&(0,a.$D)(i.e.AI_GENERATION,Error(`[First Draft theme] Error parsing theme from output: ${n.message}`),{extra:{...t,theme:JSON.stringify(e),error:n}}),{}}}},289798:(e,t,n)=>{n.d(t,{fv:()=>h,pK:()=>x});var i=n(430301),s=n(199959),a=n(638004),r=n(266808),l=n(980852),o=n(725837),d=n(550209),c=n(432099),u=n(469229),p=n(338052),m=n(638871);function h(e){let t=new Set([]),n=[...e];for(;n.length;){let e=n.pop();if(e){for(let a of(e.type.startsWith(i.COMPONENT_PREFIX)&&t.add(e.type),e.children))(0,s.id)(a)&&n.push(a);for(let t of Object.values(e.props))if("string"!=typeof t){if((0,s.id)(t))n.push(t);else if(Array.isArray(t))for(let e of t)(0,s.id)(e)&&n.push(e)}}}return t}async function f(e,t,n){if(t?.type==="LOCAL")throw Error("Can only insert library components");if(!n)return(0,d.$D)(a.e.AI_GENERATION,Error("[First Draft] Attempted to insert component without kitContents")),{status:"error"};let s=function(e,t){let n=t.toLowerCase();if(e.components[n]){let t=e.components[n];return{assetType:"component",key:t.key,version:t.version}}if(e.state_groups[n]){let t=e.state_groups[n];return{assetType:"state_group",key:t.key,version:t.version}}return null}(n,e);if(!s)return{status:"error"};let{assetType:u,key:p,version:m}=s;if("component"===u){let t=r.XJn.getComponentByKeyAndVersion(p,m);if(t)return{status:"success",key:p,version:m,jsxName:(0,i.getComponentJSXName)(e),guid:t}}if("state_group"===u){let t=r.XJn.getStateGroupByKeyAndVersion(p,m);if(t)return{status:"success",key:p,version:m,jsxName:(0,i.getComponentJSXName)(e),guid:t}}try{let e=o.D?.getState().fileVersion||0,t=await (0,c.GD)(`/api/file_proxy/${u}/${p}/version/${m}/canvas`,{fv:e.toString()},{responseType:"arraybuffer"}),n=new Uint8Array(t.response),s=r.NfO.deserializeProductComponentFromBuffer(p,n),a=(0,l.getActiveTSSceneGraph)().get(s);if(!a)throw Error("Deserialized component not found in scene graph");return{status:"success",key:p,version:m,jsxName:(0,i.getComponentJSXName)(a.name),guid:s}}catch(e){if(e instanceof c.Dr&&e.status>=400)return{status:"error"};throw e}}let g=(0,p.n)(async function(e,t){let n=(0,u.U2)(o.D?.getState().selectedView),i=await c.Ay.post(`/api/first_draft/kit_contents/${e.key}`,{jsx_names:t,file_key:n});return i?.data?.meta??null});async function x({dsKitKey:e,jsxJSON:t,componentNameToInsertResult:n}){if("LOCAL"===e.type)return;let i=h(t),s=new Set;for(let e of i)e in n||s.add(e);if(0===s.size)return;let a=await g(e,Array.from(s)),r=a?.components??{},l=(0,m.Q$)(r),o=a?.state_groups??{},d={components:l,state_groups:(0,m.Q$)(o)};await Promise.all(Array.from(s).map(async t=>{let i=await f(t,e,d);return"success"===i.status&&(n[i.jsxName]=i),i}))}},731930:(e,t,n)=>{n.d(t,{C2:()=>b,Vh:()=>j});var i=n(104076),s=n(716976),a=n(657913),r=n(998432),l=n(638004),o=n(266808),d=n(980852),c=n(812714),u=n(851824),p=n(770366),m=n(743072),h=n(550209),f=n(246144),g=n(407738),x=n(954231),_=n(289798),y=n(638871),v=n(598369);function b(e){return new a.yT({dsKitKey:e.dsKitKey,publishedComponentToInsertResult:e.componentNameToInsertResult??{},componentInfoByName:e.componentNameToInfo??{},options:{enableTsArrays:!!(0,c.kc)().first_draft_ts_arrays,shareJSX:!!(0,c.kc)().first_draft_share_jsx,useAllComponents:!!(0,c.kc)().first_draft_publish_all_components,onError:(e,t)=>{(0,h.$D)(l.e.AI_GENERATION,e,t)}}})}async function C(e,t,n={}){let i;let s=(0,a.eb)(e.jsxStr),r=s&&""!==s?s:e.jsxStr;if((n.prevJsxStr??"")===r)return{};if(!n.prevNodeId&&n.prevJsxJSON&&n.prevJsxJSON.length>0)throw Error("prevJsxJSON should be null");let o=await (0,a.Kf)(r);if(!o)return{};await n.onBeforeInsertJSX?.(o);let d={prevNodeId:n.prevNodeId,isIncomplete:!function(e){let t=e.match(/<([^\/\s>]+)[^>]*>/),n=e.match(/<\/([^>]+)>/g)?.pop();return!!t&&!!n&&t[1]===n.replace("</","").replace(">","")}(r),autoFillParent:!0,insertBehavior:"viewport-ease",shouldGenerateImages:!0,...e.options},u=b(d);t.resetComponentStats();let p=await (0,a.BW)(o,u,t,{directGen:!!d.directGeneration,showUnhandled:!!(0,c.kc)().first_draft_debug,useShareJSX:!!(0,c.kc)().first_draft_share_jsx});if(0===p.length)return{};try{i=(0,a.JF)(p)}catch(t){let e={elements:p.length};return(0,h.$D)(l.e.AI_GENERATION,t,e),{}}let{insertNodeIds:m,customizationResult:f}=await (0,g.f)({jsxStr:r,jsxElement:i,prevExpandedJsx:n.prevExpandedJsx??[],customJsxElementRegistry:u,options:d},t);return{insertNodeIds:m,customizationResult:f,jsxStr:r,jsxJSON:o,expandedJsx:p}}function j({onAfterInsertPartialJsx:e,onReset:t,onImageProgress:n,shouldContinueStream:g,clientLifecycleId:b,insertType:j}){let k=(0,s.useRef)({}),w=(0,s.useRef)(null),E=(0,s.useRef)({}),T=(0,s.useRef)({}),S=(0,s.useRef)({}),I=(0,s.useRef)(new a.sw(j||"generate",p.rI)),N=(0,s.useRef)(null);(0,s.useEffect)(()=>{N.current=m.J.startUserFlow({name:"first_draft_generate",team:l.e.AI_GENERATION})},[]);let A=(0,s.useCallback)(async t=>{try{let n=N.current?.startDuration("first_draft_insert_jsx");k.current.isRunning=!0,k.current.donePromise=(async()=>{try{let e={jsxStrLength:t.jsxStr?.length,options:{parentNodeId:t.options.parentNodeId,isIncomplete:t.options.isIncomplete,prevNodeId:t.options.prevNodeId},clientLifecycleId:b},s={...e,jsxStr:t.jsxStr};(0,f.ED)("first-draft","Inserting Streamed JSX Updates",e,{createSentryBreadcrumb:!0,logToConsole:h.NU.NEVER}),(0,f.ED)("first-draft","Inserting Streamed JSX Updates",s,{createSentryBreadcrumb:!1}),k.current.doneTextLayerIds=k.current.doneTextLayerIds||new Set,k.current.componentNameToInfo={...k.current.componentNameToInfo,...t.options.componentNameToInfo},k.current.componentNameToInsertResult=k.current.componentNameToInsertResult||{};let{insertNodeIds:a,customizationResult:r,jsxJSON:l,jsxStr:o,expandedJsx:d}=await C({...t,options:{...t.options,componentNameToInsertResult:k.current.componentNameToInsertResult,componentNameToInfo:k.current.componentNameToInfo,shouldAnimateLoading:(0,c.kc)().first_draft_animations,doneTextLayerIds:k.current.doneTextLayerIds,clientLifecycleId:b}},I.current,{prevNodeId:w.current,prevJsxStr:k.current.jsxStr,prevJsxJSON:k.current.jsxJSON,prevExpandedJsx:k.current.expandedJsx,onBeforeInsertJSX:async e=>{await (0,_.pK)({jsxJSON:e,dsKitKey:t.options.dsKitKey,componentNameToInsertResult:k.current.componentNameToInsertResult??{}})}});if(n?.addContext({hasJson:void 0!==l,insertNodeIdsLength:a?.length}),n?.stop(),!a){if(void 0===l)return;throw Error("Failed to insert any nodes")}if(a.length>1)throw Error("Expected at most one node to be inserted");(0,x.OJ)(a[0]),w.current!==a[0]&&(w.current&&(0,v.ks)(w.current),(0,v.Vm)(a[0],(0,i.jsx)(i.Fragment,{}),{overflowHidden:!0})),w.current=a[0],E.current={...E.current,...r?.themeOverrideMap??{}},k.current.jsxStr=o,k.current.jsxJSON=l,k.current.expandedJsx=d,k.current.queuedEffects=k.current.queuedEffects||{}}catch(e){(0,h.$D)(l.e.AI_GENERATION,e instanceof Error?e:Error(e)),w.current&&!(0,d.getActiveTSSceneGraph)().get(w.current)&&(w.current=null,k.current.jsxStr=void 0,k.current.jsxJSON=void 0,k.current.expandedJsx=void 0)}try{if(w.current){if(t.options?.shouldGenerateImages){if(t.options.imageArgs)(0,x.Ms)({containingNodeId:w.current,queuedEffects:k.current.queuedEffects,shouldContinueStream:g,imagesTrace:S.current,jsxJSON:k.current.jsxJSON,initialUserPrompt:t.options.imageArgs?.initialUserPrompt||"",clientLifecycleId:b,instrumentationRef:I});else throw Error("Tried to generate images without image args")}(0,x.D9)(w.current,k.current.queuedEffects,t.options),(0,c.kc)().first_draft_direct_gen||(0,x.fE)({containingNodeId:w.current}),e?.(w.current)}}catch(e){(0,h.$D)(l.e.AI_GENERATION,e instanceof Error?e:Error(e))}})(),await k.current.donePromise,k.current.insertAgainWhenDone&&((0,f.ED)("first-draft","Re-Inserting JSX Updates (Immediate)",{jsxStrLength:k.current.lastArgs?.jsxStr?.length,options:{parentNodeId:k.current.lastArgs?.options.parentNodeId,isIncomplete:k.current.lastArgs?.options.isIncomplete,prevNodeId:k.current.lastArgs?.options.prevNodeId}}),k.current.insertAgainWhenDone=!1,await A(k.current.lastArgs))}finally{k.current.isRunning=!1}},[e,g,b]),L=(0,u.A)(A,500,{leading:!0,maxWait:1e3}),M=(0,s.useCallback)(async()=>{await N.current?.measureDurationAsync("flushPending",async()=>{for(L.isPending()&&await L.flush();k.current.isRunning;)k.current.donePromise&&await k.current.donePromise,await y.Mb(10);let e=k.current.queuedEffects??{};(await Promise.allSettled(Array.from(Object.values(e)))).forEach(e=>{"rejected"!==e.status||e.reason instanceof r.G1&&500>r.Iu(e.reason)||h.$D(l.e.AI_GENERATION,e.reason)})})},[L]),O=(0,s.useCallback)(async()=>{try{await M()}finally{if(t?.(),w.current&&((0,v.ks)(w.current),(0,x.RY)(w.current)),k.current.lastArgs){let e=Object.keys(E.current).length>0;await (0,x.oT)(k.current.lastArgs.options?.dsKitKey,w.current,o.oVz.CURRENT,{detachVariables:e})}w.current=null,k.current={},T.current={},S.current={}}},[M,t]),R=(0,s.useCallback)(e=>(k.current.lastArgs=e,k.current.isRunning)?(k.current.insertAgainWhenDone=!0,Promise.resolve()):L?.(e)||Promise.resolve(),[L]);return(0,s.useEffect)(()=>{let e=I.current;if(!n)return;let t=()=>n(e.instrumentationData.imageSuccesses,e.instrumentationData.numImages);return e.imageProgressEmitter.on("statusChanged",t),()=>{e.imageProgressEmitter.removeListener("statusChanged",t)}},[I,n]),{insertJSX:R,resetAsync:O,flushPending:M,nodeIdRef:w,imagesTraceRef:S,themeOverrideMapRef:E,userFlowRef:N,instrumentationRef:I}}},127123:(e,t,n)=>{n.d(t,{Dp:()=>w,WX:()=>E,TM:()=>T});var i=n(716976),s=n(657913),a=n(382629),r=n(638004),l=n(266808),o=n(170627),d=n(980852),c=n(550209),u=n(246144),p=n(443044),m=n(159520),h=n(484005),f=n(354114),g=n(772523),x=n(211862),_=n(587277),y=n(384851),v=n(167151),b=n(731930),C=n(638871);async function j(e={}){let{sleepTime:t=100}=e;await new Promise(e=>setTimeout(e,t))}async function*k(e,t={}){let{chunksPerYield:n=20,useWords:i=!0}=t;if(i){let i=e.split(" "),s=[];for(let e=0;e<i.length;e+=n)s.push(...i.slice(e,e+n)),await j(t),yield s.join(" ")}else{let i=e.split(""),s=[];for(let e=0;e<i.length;e+=n)s.push(...i.slice(e,e+n)),await j(t),yield s.join("")}}function w(){return{loadingComponentType:"ComponentLoading",shouldGenerateImages:!0}}function E(e){return e?.metadata.direct_generation||e?.dsKitKey?.type==="USER_LIBRARY"||e?.dsKitKey?.type==="LOCAL"}function T({mockStreamOptions:e,onInsertJSXDone:t,onAfterInsertPartialJsx:n,shouldContinueStream:T,clientLifecycleId:I,insertType:N}){let A=(0,x.tS)(),L=(0,v.cJ)(),M=(0,i.useRef)(null),O=(0,i.useRef)(void 0),R=(0,i.useRef)(void 0),P=(0,i.useRef)(null),D=(0,i.useRef)(null),[F,z]=(0,i.useState)({loaded:0,total:0}),{insertJSX:B,resetAsync:G,flushPending:U,nodeIdRef:V,imagesTraceRef:H,instrumentationRef:K,userFlowRef:W,themeOverrideMapRef:q}=(0,b.Vh)({onAfterInsertPartialJsx:e=>{if(L&&e){let t=(0,d.getActiveTSSceneGraph)().get(e);t?.isResponsiveSetBreakpoint&&(t?.parentNode?.childrenNodes??[]).length>1&&(o.l7.ai("first-draft-sites-page-remove",()=>{t.parentNode?.childrenNodes.filter(e=>e.guid!==t.guid).forEach(e=>e.removeSelfAndChildren())}),setTimeout(()=>{l.glU.triggerAction("goto-layer",{args:{nodeId:e}})},200))}n?.(e)},onReset:()=>{O.current=void 0,z({loaded:0,total:0})},onImageProgress:(e,t)=>{z({loaded:e,total:t})},shouldContinueStream:T,clientLifecycleId:I,insertType:N}),{isRunning:X,runPrompt:Y,runPromptMocked:Z}=function({onPromptOutput:e,onBeforeRunPrompt:t,onRunPromptSuccess:n,onRunPromptError:s,shouldContinueStream:a,mockStreamOptions:r,clientLifecycleId:l}){let[o,d]=(0,i.useState)(!1),c=(0,i.useRef)({}),u=(0,i.useCallback)(async(i,r)=>{if(!o)try{c.current={},d(!0),t?.(r),await i(t=>{e?.(t,r),c.current=t},a),await n?.(c.current,r)}catch(e){throw await s?.(e,c.current,r),e}finally{d(!1)}},[o,t,e,s,n,a]);return{isRunning:o,runPrompt:(0,i.useCallback)(async(e,t)=>await u(async(t,n)=>{await (0,C._J)(e,t,n,l)},t),[l,u]),runPromptMocked:(0,i.useCallback)(async(e,t)=>await u(async t=>{if(await j(r),!e.dsKit)throw Error("dsKit is required in mockedResponse");let n=e.dsKit,i=e.theme??{},s=e.jsx??"";for await(let e of(t({theme:i}),await j(r),k(s,r)))t({dsKit:n,theme:i,jsx:e});t({dsKit:n,theme:i,jsx:s})},t),[u,r])}}({mockStreamOptions:e,shouldContinueStream:T,clientLifecycleId:I,onBeforeRunPrompt:e=>{if(e.analyticsOptions){let{dsKitType:t,isLocal:n,kitKey:i}=S(null,e.insertJSXOptions);K.current.start(),W.current?.addContext({file_key:A,generateId:I,clientLifecycleId:I,dsKitType:t,isLocal:n,kitKey:i,kitIdentifier:D.current?.metadata.identifier??null}),W.current?.trackEvent("First Draft: Layout Generation Started",{forwardToDatadog:!0,batchRequest:!0,mlEvent:!0})}},onRunPromptSuccess:async(e,n)=>{if(K.current.trackLastStreamByteReceived(),await U(),e.trace){let t={...M.current,...e.trace,children:[...M.current?.children??[],...e.trace.children,...Object.values(H.current)]};M.current=t}if(T()){let n=(0,s.eb)(e.jsx??"");if(!e.dsKit&&!V.current)throw Error("No dsKit in prompt output");if(n&&!V.current)throw Error("JSX was present in the prompt output but no node was inserted");try{await t?.(V.current,q.current,P.current,R.current??[])}catch(e){(0,c.$D)(r.e.AI_GENERATION,e,{extra:{nodeId:V.current,themeOverrideMap:q.current,dsKitKey:P.current,presets:R.current}})}}if(n.analyticsOptions){let{dsKitType:t,isLocal:i,kitKey:s}=S(e,n.insertJSXOptions);W.current?.addContext({promptOutput:JSON.stringify({dsKit:e.dsKit,theme:e.theme,presets:e.presets}),timeElapsedMs:Date.now()-n.analyticsOptions.startTime,dsKitType:t,isLocal:i,kitKey:s,file_key:A,generateId:I,clientLifecycleId:I,kitIdentifier:D.current?.metadata.identifier??null}),T()?V.current?(K.current.trackFinished("success"),W.current?.addContext({nodeId:V.current,status:"completed",instrumentationData:JSON.stringify(K.current.instrumentationData)})):(K.current.trackFinished("failure"),W.current?.addContext({status:"failed",reason:"empty generation",instrumentationData:JSON.stringify(K.current.instrumentationData)})):(K.current.trackFinished("stopped"),W.current?.addContext({nodeId:V.current,status:"failed",reason:"stopped",instrumentationData:JSON.stringify(K.current.instrumentationData)})),W.current?.end(),W.current?.trackEvent("First Draft: Layout Generation Ended",{forwardToDatadog:!0,batchRequest:!0,mlEvent:!0})}},onRunPromptError:(e,t,n)=>{K.current.trackFinished("failure"),t.trace&&(M.current={...M.current,...t.trace});let{dsKitType:i,isLocal:s,kitKey:a}=S(t,n.insertJSXOptions),l={promptOutput:JSON.stringify({dsKit:t.dsKit??{},jsx:t.jsx??"",theme:t.theme??{}}),error:e.toString(),timeElapsedMs:Date.now()-(n.analyticsOptions?.startTime??0),dsKitType:i,isLocal:s,kitKey:a,file_key:A,clientLifecycleId:I,kitIdentifier:D.current?.metadata.identifier??null},o=(0,c.$D)(r.e.AI_GENERATION,e,{extra:l});W.current?.addContext({...l,status:"failed",reason:"error",nodeId:V.current,sentryEventId:o}),W.current?.trackEvent("First Draft: Layout Generation Ended",{forwardToDatadog:!0,batchRequest:!0,mlEvent:!0})},onPromptOutput:(e,t)=>{if(K.current.trackFirstByteReceived(),e.dsKit){if(e.dsKit.isLocal){let e=t.insertJSXOptions.dsKitKey;P.current={type:"LOCAL",pageId:e.pageId}}else e.dsKit.isDirectGenLibrary?P.current={type:"USER_LIBRARY",key:e.dsKit.kitKey}:P.current={type:"1P_LIBRARY",key:e.dsKit.kitKey};if(!O.current&&e.theme&&(O.current=(0,m.t_)(e.theme,{generateId:I})),!R.current&&e.presets&&(R.current=e.presets),e.jsx)return B({jsxStr:e.jsx,options:{...t.insertJSXOptions,theme:O.current,dsKitKey:P.current}})}}}),J=(0,h.B)(),Q=(0,i.useCallback)(async e=>{"LOCAL"===e.dsKitKey.type&&A&&await (0,p.p4)(A,e,J)},[A,J]),$=(0,i.useCallback)(async(e,t,n)=>{let i;let s=e.prompt;if(X)return{nodeId:null,success:!0};await G();let{designSystem:p}=t;D.current=p;try{p&&await Q(p)}catch(e){return(0,c.$D)(r.e.AI_GENERATION,e),{nodeId:null,success:!1,error:e}}let m=function(e,t){if(!t)return{userPrompt:e};if("LOCAL"!==t.dsKitKey.type)return{userPrompt:e,kitKey:t.dsKitKey.key,isLocal:!1,isDirectGenerationCompatible:t.metadata?.direct_generation};let n=l.XJn.getKitKey(t.dsKitKey.pageId);if(!n)throw Error("Failed to get a kitKey for local kit");return{userPrompt:e,kitKey:n,isLocal:!0,isDirectGenerationCompatible:t.metadata?.direct_generation}}(s,p),h=null;if(t.selectedNodeIds&&t.selectedNodeThumbnailsCache&&t.selectedNodeIds.length>0){let n=t.selectedNodeIds.map(e=>(0,d.getActiveTSSceneGraph)().get(e)).filter(a.Vq);n.length!==t.selectedNodeIds.length&&(0,u.xi)("first-draft","Some selected nodes were not found",{selectedNodeIds:t.selectedNodeIds,selectedNodes:n}),h=(0,y.ce)(n),m.extraMessagesFigmateOnly=await (0,y.yh)(n,t.selectedNodeThumbnailsCache,e.attachmentMetadata)}let x={};if(L){let e=(0,d.getActiveTSSceneGraph)().getCurrentPage();if(e){let t=1===e.childCount&&e.childrenNodes[0].isResponsiveSet&&1===e.childrenNodes[0].childCount&&e.childrenNodes[0].childrenNodes[0].isResponsiveSetBreakpoint&&0===e.childrenNodes[0].childrenNodes[0].childCount,n=null;t?(g.wr(),(0,_.S)("panel"),g.Dh([e.childrenGuids[0]])):o.l7.ai("first-draft-sites-page-create",()=>{l.glU?.createWebpage(null)}),n=(0,d.getActiveTSSceneGraph)().get(l.glU.getFirstSelectedNodeIdForCurrentPage()),x.parentNodeId=n?.guid,x.createNewSitesWebpage=!0,x.frameName="Primary"}}try{K.current.start(),await Y(m,{insertJSXOptions:{frameName:s,imageArgs:{initialUserPrompt:s},...w(),...n,...h?{componentNameToInfo:{...h,...n.componentNameToInfo}}:{},...x,sharedPluginData:{userPrompt:s,...n.sharedPluginData},dsKitKey:p?.dsKitKey,directGeneration:E(p)},analyticsOptions:{startTime:K.current.startTime,clientLifecycleId:I}})}catch(e){i=e}let v=V.current;if(await G(),v&&!(0,d.getActiveTSSceneGraph)().get(v))throw Error("Failed to insert node");return f.Y5.commit(),{nodeId:v,success:!i,error:i}},[X,G,Y,V,I,Q,L,K]);return{submitPromptMocked:(0,i.useCallback)(async(e,t)=>{if(X)return{nodeId:null,success:!0};await G(),await Z(e,{insertJSXOptions:{...w(),...t,imageArgs:{initialUserPrompt:"website"}},analyticsOptions:null});let n=V.current;return await G(),{nodeId:n,success:!0}},[X,G,Z,V]),submitPrompt:$,isRunning:X,executionTrace:M.current,imageProgress:F}}function S(e,t){let n=t.dsKitKey,i=n?.type??"AUTO",s=n?.type==="LOCAL"||e?.dsKit?.isLocal,a=n?"key"in n?n.key:n.pageId:e?.dsKit?.kitKey??null;return{dsKitOption:n,dsKitType:i,isLocal:s,kitKey:a}}},701038:(e,t,n)=>{n.d(t,{iK:()=>y,wP:()=>v});var i=n(716976),s=n(716736),a=n(170627),r=n(980852),l=n(769183),o=n.n(l),d=n(178623),c=n(400475),u=n(233990),p=n(967987),m=n(638871),h=n(431222),f=n(354114);function g(e){return!!("SYMBOL"===e.type||e.isStateGroup||(0,p.Gs)(e))}async function x({components:e,clientLifecycleId:t}){let n=await Promise.all(e.map(async e=>{let t=await (0,m.gC)(e);return{imageB64:t.base64,jsx:t.jsx,isStateGroup:e.isStateGroup}}));return(await d.Ay.design.firstDraftSuggestProps({requests:n},(0,h.sF)({clientLifecycleId:t}))).responses.map((t,n)=>{let i=e[n];return t&&i?{component:i,componentName:t.componentName,componentDescription:t.componentDescription,nodeIdsToPropertyNames:t.nodeIdsToPropertyNames.reduce((e,t)=>(e[t.id]=t.propertyName,e),{})}:null})}function _(e){let t=e.component;if(g(t)){if(t.name=e.componentName,(0,p.Gs)(t)){let n={componentPropertyDefinitions:[],componentPropertyReferences:{}};for(let[t,i]of Object.entries(e.nodeIdsToPropertyNames)){let e=(0,r.getActiveTSSceneGraph)().guidFromDeveloperFriendlyId(t),s=(0,r.getActiveTSSceneGraph)().get(e);s&&"TEXT"===s.type&&(n.componentPropertyDefinitions.push({name:i,type:"TEXT"}),n.componentPropertyReferences[t]={characters:i})}(0,p.p0)(t,n),(0,p.aj)(t,e.componentDescription)}else for(let n of(t.description||(t.description=e.componentDescription),Object.keys(e.nodeIdsToPropertyNames))){let i=(0,r.getActiveTSSceneGraph)().get(n);if(!i||"TEXT"!==i.type||i.isInstanceSublayer)continue;let s=t.componentPropertyDefinitions(),a=i.componentPropertyReferences();if(a?.characters)continue;let l=e.nodeIdsToPropertyNames[n],o=function(e,t){for(let n in e)if("VARIANT"!==e[n].type){let e=n.split("#");if(e.slice(0,e.length-1).join("#")===t)return n}else if(n===t)return n;return null}(s,l);o&&s[o]?.type==="TEXT"||(o=t.addComponentPropertyDefinition(l,"TEXT",i.characters,void 0)),i.setComponentPropertyReferences({...i.componentPropertyReferences(),characters:o})}}}function y(){let[e,t]=i.useState({loaded:0,total:0}),n=i.useContext(u.x),l=n?.getSuggestedProps;return{submit:i.useCallback(async(e,n,i)=>{let d=r.getActiveTSSceneGraph().getCurrentPage()?.childrenNodes.find(e=>"SECTION"===e.type&&e.name===c.vh),u=r.getActiveTSSceneGraph().getCurrentPage()?.childrenNodes.find(e=>"SECTION"===e.type&&"Atoms"===e.name);if(0===(i=i??[...d?.childrenNodes??[],...u?.childrenNodes??[]]).length)return;let p=i.filter(g);for(let i of(t({loaded:1,total:p.length}),o()(p,30))){let r=await (0,s.Z)(l?l(i):x({components:i,clientLifecycleId:e}),n);if(n.aborted)return;a.l7.user("apply-suggested-props",()=>{for(let e of r)e&&_(e)}),t(e=>({loaded:Math.min(e.loaded+i.length,e.total),total:e.total}))}f.Y5.commit()},[l]),progress:e}}function v(){return{submit:i.useCallback(x,[]),apply:i.useCallback(e=>{_(e),f.Y5.commit()},[])}}},233990:(e,t,n)=>{n.d(t,{x:()=>i});let i=n(716976).createContext(void 0)},638871:(e,t,n)=>{n.d(t,{Mb:()=>c,Q$:()=>p,SV:()=>d,_J:()=>u,gC:()=>m});var i=n(948351),s=n(178623),a=n(978354),r=n(431222),l=n(391293),o=n(338052);let d="plugin_playground";async function c(e){await new Promise(t=>{setTimeout(()=>{t()},e)})}let u=(0,o.n)(async function(e,t,n=()=>!0,i){let a=(await s.Ay.design.firstDraftGenerateV2Stream(e,(0,r.sF)({clientLifecycleId:i}))).getReader(),l={};try{for(;;){let e=a.read(),{done:i,value:s}=await e;if(i||(s.theme&&(l.theme=s.theme??{}),s.dsKit&&(l.dsKit=s.dsKit),s.jsx&&(l.jsx+=s.jsx),s.trace&&(l.trace=s.trace),s.presets&&(l.presets=s.presets),!n()))break;t(l)}}finally{a.releaseLock()}});function p(e){return Object.keys(e).reduce((t,n)=>(t[n.toLowerCase()]=e[n],t),{})}async function m(e){let t=await e.loadImagesAndExport([{imageType:"PNG",constraint:{type:"CONTENT_WIDTH",value:Math.min(e.size.x,function(e,t=1024){return e.size.y>e.size.x?Math.floor(t*e.size.x/e.size.y):t}(e))},contentsOnly:!0,useAbsoluteBounds:!1,colorProfile:"DOCUMENT"}]),n=`data:image/png;base64,${(0,i.lF)(t)}`,s=(0,a.YJ)({nodeIds:[e.guid],options:{skipNodeIds:!1,includeName:!0,detachInstances:!0,componentUsageOrDefinition:"DEFINITION",autoLayoutTagName:"div",frameTagName:"div"}});if(!s.jsxStr)throw Error(`Could not get node JSX for node ID: ${e.guid}`);return{base64:n,jsx:s.jsxStr}}(0,o.n)(async function(e){return(await l.Gh.postFirstDraftMatchPresetModes({kit_key:e.kitKey,is_local:e.isLocal,user_prompt:e.userPrompt})).data.meta})},882243:(e,t,n)=>{n.d(t,{n:()=>s});var i=n(266808);function s(e){let t=i.f1$?.openWriteInReadonlyScope();try{return e()}finally{null!=t&&i.f1$?.closeWriteInReadonlyScope(t)}}},841e3:(e,t,n)=>{n.d(t,{M:()=>c});var i=n(104076),s=n(754245),a=n(511570),r=n.n(a),l=n(816565),o=n(380388),d=n(222525);function c(e){if(!e.dragState?.dragPosition||!e.dragState?.dragOffset)return null;let t=e.dragState.dragPosition.subtract(e.dragState.dragOffset),n=(0,o.AE)(e.dragState.draggingResource);return(0,s.createPortal)(void 0!==e.icon?(0,i.jsx)("div",{className:r()(d.Az,{[d.Yg]:e.dragState.isDraggingOverCanvas}),style:{left:t.x,top:t.y,width:e.dragState.draggingThumbSize?.x,height:e.dragState.draggingThumbSize?.y},children:e.icon}):(0,i.jsx)(l.oW,{src:n,alt:"",className:r()(d._D,{[d.Yg]:e.dragState.isDraggingOverCanvas}),style:{left:t.x,top:t.y,width:e.dragState.draggingThumbSize?.x,height:e.dragState.draggingThumbSize?.y},draggable:!1}),document.getElementById("fullscreen-root"))}},380388:(e,t,n)=>{n.d(t,{AE:()=>h,E:()=>f,Ik:()=>g});var i=n(951002),s=n(755444),a=n(606613),r=n(641518),l=n(192075),o=n(819851),d=n(436648),c=n(226697),u=n(664326),p=n(433802),m=n(285226);function h(e){switch(e){case"Table":return(0,s.ck)("ac41ded88c50f0359c02ec3927394b7b33e210b6");case"CodeBlock":return(0,s.ck)("8a035152916712353b045f442c2c6c5879ef3e17");case"MindMap":return(0,s.ck)("1dd4c6f9e1fbf269895ee58e7be79d9f9ee79b9e");default:return""}}function f(e){switch(e){case"Table":return(0,l.t)("whiteboard.inserts.table_title");case"CodeBlock":return(0,l.t)("whiteboard.inserts.code_block_title");case"MindMap":return(0,l.t)("whiteboard.inserts.mind_map_title");case"Text":return(0,l.t)("whiteboard.inserts.text_title");case"Section":return(0,l.t)("whiteboard.inserts.section_title");default:(0,i.xb)(e)}}function g(e){let t="whiteboard"===(0,o.lg)(),n=(0,c.F5)(),i=(0,m.V7)(e.resource),s=async s=>(e.insertAction(s),t&&(0,c.oM)({type:d.pL.MORE,id:i,source:e.triggeredFrom,options:{...n,query:e.searchQuery}}),await Promise.resolve());return(0,u.t)({resource:e.resource,draggingThumbMaxDimensions:e.draggingThumbMaxDimensions,onDragStart:e.onDragStart,isDraggingDisabled:e.isDraggingDisabled,recomputeCancelRectsOnPointerUp:e.recomputeCancelRectsOnPointerUp,clickToInsert_DEPRECATED:e.clickToInsert_DEPRECATED,afterSuccessfulInsert:e.afterSuccessfulInsert},{insertAction:s,dragPreviewPointerPosition:p.N.CENTERED,getDragPreviewSrc:e.icon?()=>"data:image/svg+xml;utf8,"+(0,a.F)(e.icon):()=>h(e.resource),recordingKey:r.Pt(e.triggeredFrom,"whiteboardResource",i)})}},520054:(e,t,n)=>{n.d(t,{Bc:()=>c,Hm:()=>p,V6:()=>u,pe:()=>f,rF:()=>h});var i=n(104076),s=n(322028),a=n(371843),r=n(208740),l=n(141330),o=n(412267);let d=(e,t,n)=>({flags:["design","dev_handoff"],callback:(i,s,a)=>{(0,o.C)({type:e,newFileFrom:n,dispatch:a,entryPoint:t})}}),c={action:l.i0,tags:[a.$.AI],iconType:(0,i.jsx)(s.s,{}),searchSynonyms:["send to make","export to make","create make file","figma make","figmake"],...d("send-to-make-from-design","AI Quick Actions V2",r.f6.SEND_TO_MAKE_FROM_DESIGN_QA_V2_MENU)},u={name:"send-to-make-from-design",...d("send-to-make-from-design","SelectionContextMenu",r.f6.SEND_TO_MAKE_FROM_DESIGN_CONTEXT_MENU)},p={name:"send-to-make-from-design",...d("send-to-make-from-devmode","SelectionContextMenu",r.f6.SEND_TO_MAKE_FROM_DEVMODE_CONTEXT_MENU)},m=(e,t)=>({flags:["edit","whiteboard"],callback:(n,i,s)=>{(0,o.C)({type:"send-to-make-from-figjam",newFileFrom:t,dispatch:s,entryPoint:e})}}),h={action:l.Ax,tags:[a.$.AI],iconType:(0,i.jsx)(s.s,{}),searchSynonyms:["send to make","export to make","create make file","figma make","figmake","create a prototype with figma make"],...m("AI Quick Actions V2",r.f6.SEND_TO_MAKE_FROM_FIGJAM_QA_V2_MENU)},f={name:"send-to-make-from-figjam",...m("SelectionContextMenu",r.f6.SEND_TO_MAKE_FROM_FIGJAM_CONTEXT_MENU)}},571737:(e,t,n)=>{n.d(t,{D:()=>l,W:()=>r});var i=n(812714),s=n(178623),a=n(431222);function r(e,t,n){return(0,i.kc)().make_text_to_prompt?s.Ay.shared.textToPrompt({contents:e,options:{from:t}},(0,a.sF)({clientLifecycleId:n})):s.Ay.internal.textToPrompt({contents:e,options:{from:t}})}function l(e){return e.comments.map(e=>e.message_meta.map(e=>e.t??"").join("\n"))}},689016:(e,t,n)=>{n.d(t,{U:()=>c,c:()=>u});var i=n(716976),s=n(819851),a=n(470876),r=n(488355),l=n(944350),o=n(904017),d=n(395556);function c({queryType:e,pageSize:t,revalidateOnMount:n,enabled:i,...c}){let u=(0,o.S2)(),p=u.data?.key.parentId,m=(0,r.j)()&&!!p,h=u.data?.tier===l.Ag.ENTERPRISE,f=m&&"org"===e&&u.data?.type===l.OL.ORG,g=m&&"team"===e,x=(0,s.lg)(),{teamTemplates:_,isLoading:y,requestLoadMoreForOrg:v}=(0,a.e2)({orgId:p??"",areWorkspacesEnabled:h,editorType:x,pageSize:t,revalidateOnMount:n,filterByIds:"filterByIds"in c?c.filterByIds:null,includeMyTeamsOnly:"includeMyTeamsOnly"in c&&c.includeMyTeamsOnly,numTemplatesPerTeam:"numTemplatesPerTeam"in c?c.numTemplatesPerTeam:10,enabled:i&&f}),{templatesByTeam:b,isLoading:C,requestLoadMoreForTeam:j}=(0,a.li)({teamId:"teamId"in c?c.teamId:p??"",editorType:x,pageSize:t,enabled:i&&g});return f?{templatesByTeam:_??[],isLoading:y,requestLoadMoreTemplates:v}:g&&"teamId"in c?{templatesByTeam:[{templates:b?.templates.map(e=>({type:d.n.TeamTemplateLg,template:e}))??[],teamId:c.teamId,teamName:b?.teamName??"",workspaceName:null,workspaceId:null,totalTemplatesByTeam:b?.totalTemplatesByTeam??0}],isLoading:C,requestLoadMoreTemplates:j}:{templatesByTeam:void 0,isLoading:!1,requestLoadMoreTemplates:()=>{}}}function u({templateSize:e,teamSize:t}){let n=(0,o.S2)(),s=n.data?.key.parentId,a=n.data?.type===l.OL.ORG,r=n.data?.type===l.OL.TEAM,[d,u]=(0,i.useState)([]),[p,m]=(0,i.useState)(null),[h,f]=(0,i.useState)([]),[g,x]=(0,i.useState)({}),{templatesByTeam:_,isLoading:y,requestLoadMoreTemplates:v}=c({queryType:"team",teamId:s??"",pageSize:e,enabled:r}),{templatesByTeam:b,isLoading:C,requestLoadMoreTemplates:j}=c({queryType:"org",pageSize:t,numTemplatesPerTeam:e,filterByIds:null,includeMyTeamsOnly:!1,enabled:a}),{templatesByTeam:k,isLoading:w,requestLoadMoreTemplates:E}=c({queryType:"team",teamId:p??"",pageSize:e,enabled:!!p}),T=(0,i.useCallback)(e=>{let t=g[e];if(void 0!==t)return d[t]},[d,g]),S=(0,i.useMemo)(()=>{if(r)return[];let e=new Set,t=[];return d.forEach(({teamId:n,totalTemplatesByTeam:i})=>{if(e.has(n)||h.includes(n))return;let s=T(n);(s?.templates.length??0)<i&&(e.add(n),t.push(n))}),t},[h,T,r,d]);(0,i.useEffect)(()=>{if(b)for(let e of b??[])T(e.teamId)||(u(t=>[...t,e]),x(t=>({...t,[e.teamId]:d.length})))},[T,b,d]),(0,i.useEffect)(()=>{let{teamId:e,templates:t}=k?.[0]??{};if(!e||!t||w)return;let n=T(e);u(e=>n&&t.length>n.templates.length?(n.templates=t,[...e]):e),n&&n.templates.length>=n.totalTemplatesByTeam&&(m(null),f(t=>[...t,e]))},[T,w,b,k,d]);let I=(0,i.useCallback)(()=>{0===S.length?j():p?E():S.length&&m(S[0]??null)},[S,p,j,E]);return r?{templatesByTeam:_,isLoading:y,requestLoadMoreTemplates:v}:{templatesByTeam:d,isLoading:C,requestLoadMoreTemplates:I}}},459496:(e,t,n)=>{n.d(t,{OS:()=>u,_2:()=>d,w$:()=>c});var i=n(104076),s=n(883765),a=n(158965),r=n(192075),l=n(211862),o=n(286132);let d="audio-paywall-key",c=(()=>{let e=!0,t=!1;return n=>{t||setTimeout(()=>{n>0&&e?(e=!1,(0,s.sx)("Context Viewed",{name:"join-call-with-others"})):e||0!==n||(t=!0,(0,s.sx)("Context Viewed",{name:"should-close-open-audio-nux"}))},200)}})();function u(){let e;let t=(0,l.q5)(),{userIdsInCall:n}=(0,o.W5)(t?.key||null),s=(0,o.bF)(n,t?.key||null).map(e=>e.name);e=s.length>3?[...s.slice(0,2),(0,r.t)("collaboration.voice.n_others",{numUsers:s.length-2})]:s;let d=(0,i.jsx)(a.T,{children:e});return(0,r.tx)("collaboration.voice.are_talking_in_this_file",{numVoiceUsers:e.length,voiceUserNames:d,joinText:(0,i.jsx)("b",{children:(0,r.tx)("collaboration.voice.join_lower")})})}},765846:(e,t,n)=>{n.d(t,{Em:()=>a,TI:()=>r,Wl:()=>s,mt:()=>l});var i=n(716976);function s(e,t){let[n,s]=(0,i.useState)(null),[a,r]=(0,i.useState)(!1);return((0,i.useEffect)(()=>{if(t&&!a){let n=function(t){s(t[e]||null)};return t.volumeLevelsStore.subscribe(n),r(!0),()=>{t.volumeLevelsStore.unsubscribe(n),r(!1)}}},[t]),t)?n:null}function a(e,t,n){let i=t=>{n(t[e]||null)};return t&&t.volumeLevelsStore.subscribe(i),{unsubscribe:()=>t?.volumeLevelsStore.unsubscribe(i)}}function r(e,t){let[n,s]=(0,i.useState)(),[a,r]=(0,i.useState)(!1);if((0,i.useEffect)(()=>{if(t&&!a){let n=function(t){s(t[e]?.isMuted)};return t.volumeLevelsStore.subscribe(n),r(!0),()=>{t.volumeLevelsStore.unsubscribe(n),r(!1)}}},[t]),t)return n}function l(e){let[t,n]=(0,i.useState)(null),[s,a]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{if(e&&!s){let t=function(e){n(e)};return e.recentlySpokeIdStore.subscribe(t),a(!0),()=>{e.recentlySpokeIdStore.unsubscribe(t),a(!1)}}},[e]),t}},28754:(e,t,n)=>{n.d(t,{hl:()=>c});var i=n(408825),s=n(113139),a=n(869450);let r=i.z.object({id:i.z.string().uuid(),collectionId:i.z.string().uuid(),position:i.z.string(),status:i.z.string(),createdAt:i.z.string(),updatedAt:i.z.string(),lastPublishedAt:i.z.string().nullable(),statusUpdatedAt:i.z.string().nullable()}),l=i.z.object({id:i.z.string().uuid(),itemId:i.z.string().uuid(),fieldSchemaId:i.z.string().uuid(),value:i.z.string(),version:i.z.number(),createdAt:i.z.string(),updatedAt:i.z.string(),assetsForPublish:i.z.array(i.z.object({type:i.z.string(),hash:i.z.string(),height:i.z.number(),width:i.z.number()})).nullable().optional().transform(e=>e??[])}),o=i.z.object({valid:i.z.boolean(),failure_info:i.z.object({errors:i.z.array(i.z.string()),i18n_keys:i.z.array(i.z.string())}).optional()}),d=i.z.object({success:i.z.boolean(),error:i.z.string().nullable(),errorType:i.z.string().nullable()}),c=new class{constructor(){this.CollectionItemResponseSchemaValidator=(0,s.YV)("CollectionItemResponseSchemaValidator",(0,a.D)(r),null),this.BulkImportResponseSchemaValidator=(0,s.YV)("BulkImportResponseSchemaValidator",(0,a.D)(i.z.object({count:i.z.number()})),null),this.CollectionFieldResponseSchemaValidator=(0,s.YV)("CollectionFieldResponseSchemaValidator",(0,a.D)(l),null),this.ItemValidateResponseSchemaValidator=(0,s.YV)("ItemValidateResponseSchemaValidator",o,null),this.CsvValidationResponseValidator=(0,s.YV)("CsvValidationResponseValidator",(0,a.D)(d),null)}createItem({collection:e,itemId:t}){return this.CollectionItemResponseSchemaValidator.validate(async({xr:n})=>await n.post(`/api/collections/${e.databaseId}/items`,{item_id:t}))}importItems({collection:e,items:t}){return this.BulkImportResponseSchemaValidator.validate(async({xr:n})=>await n.post(`/api/collections/${e.databaseId}/items/import`,{items:(t??[]).map(e=>({fields:e.fields.map(e=>({field_schema_id:e.fieldSchemaId,value:e.value}))}))}))}updateItem({collection:e,item:t,updatedItemAttributes:n}){return this.CollectionItemResponseSchemaValidator.validate(async({xr:i})=>await i.put(`/api/collections/${e.databaseId}/items/${t.databaseId}`,{index:n.position,status:n.status}))}updateSingleItemData({fieldId:e,fieldSchema:t,item:n,newValue:i,assetsForPublish:s,jobStatus:a}){return this.CollectionFieldResponseSchemaValidator.validate(async({xr:r})=>{let l={value:i,uuid:e};return void 0!==s&&(l.assets_for_publish=s),void 0!==a&&(l.job_status=a),await r.put(`/api/items/${n.databaseId}/fields/${t.databaseId}`,l)})}deleteItem({collection:e,item:t}){return this.CollectionItemResponseSchemaValidator.validate(async({xr:n})=>await n.del(`/api/collections/${e.databaseId}/items/${t.databaseId}`))}validateItemData({fieldSchema:e,item:t,newValue:n}){return this.ItemValidateResponseSchemaValidator.validate(async({xr:i})=>await i.put(`/api/items/${t.databaseId}/fields/${e.databaseId}/validate`,{value:n}))}validateCsv({fileKey:e,itemsData:t}){return this.CsvValidationResponseValidator.validate(async({xr:n})=>await n.post("/api/collections/validate_cms_csv",{file_key:e,items_data:t.map(e=>({fields:e.fields.map(e=>({field_schema_id:e.fieldSchemaId,value:e.value}))}))}))}}},932567:(e,t,n)=>{n.d(t,{p:()=>f});var i=n(408825),s=n(113139),a=n(432099);let r=i.z.object({id:i.z.string(),name:i.z.string(),url:i.z.string(),logo_url:i.z.string().optional(),transport:i.z.enum(["http","sse"]),user_id:i.z.string(),is_public:i.z.boolean(),tagline:i.z.string().optional(),description:i.z.string().optional()}).transform(e=>({id:e.id,name:e.name,url:e.url,transport:e.transport,logoUrl:e.logo_url,userId:e.user_id,isPublic:e.is_public,tagline:e.tagline,description:e.description})),l=i.z.object({id:i.z.string(),mcp_server_id:i.z.string(),user_id:i.z.string()}).transform(e=>({id:e.id,mcpServerId:e.mcp_server_id,userId:e.user_id})),o=i.z.object({id:i.z.string(),mcp_server_id:i.z.string(),user_id:i.z.string(),server:r}).transform(e=>({id:e.id,mcpServerId:e.mcp_server_id,userId:e.user_id,server:e.server})),d=i.z.object({clients:i.z.array(o)}),c=i.z.object({servers:i.z.array(r)}),u=i.z.object({server:r}),p=i.z.object({client:l}),m=i.z.object({client:l}),h=i.z.object({success:i.z.boolean()}),f=new class{constructor(){this.GetMcpServersSchemaValidator=(0,s.YV)("GetMcpServersSchemaValidator",c,null),this.GetMcpServerSchemaValidator=(0,s.YV)("GetMcpServerSchemaValidator",u,null),this.GetMcpClientsSchemaValidator=(0,s.YV)("GetMcpClientsSchemaValidator",d,null),this.CreateMcpClientSchemaValidator=(0,s.YV)("CreateMcpClientSchemaValidator",p,null),this.DeleteMcpClientSchemaValidator=(0,s.YV)("DeleteMcpClientSchemaValidator",m,null),this.McpOauthCallbackSchemaValidator=(0,s.YV)("McpOauthCallbackSchemaValidator",h,null)}getMcpServers(e){return this.GetMcpServersSchemaValidator.validate(async({xr:t})=>await t.get("/api/mcp/servers",{file_key:e}))}getMcpServer(e,t){return this.GetMcpServerSchemaValidator.validate(async({xr:n})=>await n.get(`/api/mcp/servers/${e}`,{file_key:t}))}getMcpClients(e){return this.GetMcpClientsSchemaValidator.validate(async({xr:t})=>await t.get("/api/mcp/clients",{file_key:e}))}createMcpClient(e){return this.CreateMcpClientSchemaValidator.validate(async({xr:t})=>await t.post("/api/mcp/clients",s.td.toAPIParameters(e)))}deleteMcpClient(e){let{id:t,fileKey:n}=e;return this.DeleteMcpClientSchemaValidator.validate(async({xr:e})=>await e.del(`/api/mcp/clients/${t}`,{file_key:n}))}mcpOauthCallback(e,t){let n={...a.Ay.defaults.headers};return t&&(n["X-Figma-User-ID"]=t),this.McpOauthCallbackSchemaValidator.validate(async({xr:t})=>await t.post(`/api/mcp/servers/${e.serverId}/oauth_callback`,s.td.toAPIParameters(e),{headers:n}))}}},131003:(e,t,n)=>{n.d(t,{A:()=>oa});var i=n(104076),s=n(716976),a=n(812714),r=n(776111),l=n(681398),o=n(17140),d=n(715858),c=n(549571),u=n(742549),p=n(237420),m=n(443192),h=n(111297),f=n(422872),g=n(143277),x=n(563554),_=n(6449),y=n(441030),v=n(420680),b=n(475477),C=n(293422),j=n(225654);let k=(0,s.memo)(function(e){return(0,i.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,"data-fpl-icon-size":"24L",children:(0,i.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",fillRule:"evenodd",d:"M6.015 3.441 5.7 4.701l-1.26.315c-.505.126-.505.844 0 .97l1.26.315.315 1.26c.126.505.844.505.97 0L7.3 6.3l1.26-.315c.505-.126.505-.844 0-.97L7.3 4.7l-.315-1.26c-.126-.505-.844-.505-.97 0m0 12L5.7 16.7l-1.26.315c-.505.126-.505.844 0 .97l1.26.315.315 1.26c.126.505.844.505.97 0L7.3 18.3l1.26-.315c.505-.126.505-.844 0-.97L7.3 16.7l-.315-1.26c-.126-.505-.844-.505-.97 0M5.7 10.7l.315-1.26c.126-.505.844-.505.97 0L7.3 10.7l1.26.315c.505.126.505.844 0 .97L7.3 12.3l-.315 1.26c-.126.505-.844.505-.97 0L5.7 12.3l-1.26-.315c-.505-.126-.505-.844 0-.97zM10.5 5a.5.5 0 0 0 0 1h9a.5.5 0 0 0 0-1zm0 6a.5.5 0 1 0 0 1h9a.5.5 0 0 0 0-1zm0 6a.5.5 0 1 0 0 1h9a.5.5 0 0 0 0-1z",clipRule:"evenodd"})})});var w=n(266808),E=n(582789),T=n(795033),S=n(236631),I=n(192075),N=n(55029),A=n(772523),L=n(692042),M=n(349311),O=n(964549),R=n(4521),P=n(827651),D=n(55650),F=n(570756),z=n(980852),B=n(792794);let G=(e,t)=>e.filter(e=>t.get(e));var U=(e=>(e.DismissImmediately="dismiss-immediately",e.NoAutoDismiss="no-auto-dismiss",e.StartAutoDismissTimer="start-auto-dismiss-timer",e.noop="no-op",e))(U||{}),V=n(571267);function H(e){return s.useMemo(()=>{if(!e)return!0;let{data:t}=(0,V.b7)((0,z.getActiveTSSceneGraph)());return JSON.stringify(t.map(e=>({t:e.t,id:e.id,type:e.type,stamps:e.stamps}))).length>12e3},[e])}var K=n(851824);function W(e=2e3){let t=(0,p.d4)(e=>e.mirror.selectionProperties.whiteboardNumSelected),[n,i]=s.useState({hasDebounceSettled:!1,numNodesSelected:void 0}),a=(0,K.A)(e=>{i({hasDebounceSettled:!0,numNodesSelected:e})},e);s.useEffect(()=>{i({hasDebounceSettled:!1,numNodesSelected:t}),a(t??0)},[a,t]);let r=n.numNodesSelected!==t;return n.hasDebounceSettled&&!r}var q=n(169640);function X({onClose:e,onSummarize:t,onAutoDismiss:n}){let a;let r=W(500),l=H(r),{lastSummarizableSelection:o}=function({onAutoDismiss:e,selectionIsStable:t}){let n=(0,B.cF)(),[i,a]=(0,s.useState)(0),r=(0,p.d4)(e=>e.mirror.sceneGraphSelection),l=s.useMemo(()=>Object.entries(r).filter(([e,t])=>t).map(([e,t])=>e),[r]),[o,d]=(0,s.useState)([]),c=(0,z.getActiveTSSceneGraph)(),u=0===l.length&&o.length>0&&!G(o,c).length;return(0,s.useEffect)(()=>{switch(function({currentAutoDismissTimeoutId:e,stickySummarizationEnabledForSelection:t,lastSummarizableSelectionHasBeenDeleted:n,selectionSize:i,canRecomputeAutoDismissAction:s}){if(0===i&&n)return"dismiss-immediately";if(s){if(t)return"no-auto-dismiss";if(!e)return"start-auto-dismiss-timer"}return"no-op"}({currentAutoDismissTimeoutId:i,stickySummarizationEnabledForSelection:n,lastSummarizableSelectionHasBeenDeleted:u,selectionSize:l.length,canRecomputeAutoDismissAction:t})){case U.DismissImmediately:window.clearTimeout(i),a(0),e();break;case U.NoAutoDismiss:d(l),window.clearTimeout(i),a(0);break;case U.StartAutoDismissTimer:a(window.setTimeout(()=>{e()},1e4))}},[l.length,l,n,u,i,t,e]),{lastSummarizableSelection:o}}({onAutoDismiss:n,selectionIsStable:r});(0,s.useEffect)(()=>{T.zl.set(q.EH,e=>e+1),T.zl.set(q.ji,()=>new Date().toISOString())},[]);let{summarizeCanvasSelection:d}=(0,R.ss)(w.cfv.ABOVE,!1,"DISCOVERY_NUDGE"),c=(0,F.Cb)(),u=(0,T.Xr)(P.v),m=r&&l;m&&(a=(0,I.t)("whiteboard.ai_summary.nudge.too_many_tokens"));let h=(0,s.useRef)(null),f=(0,L.ni)(),g=(0,N.FQ)(h,8);return(0,s.useLayoutEffect)(()=>{let e=h.current;if(!e)return;let t=f.y-8,n=E.r.fromOriginAndSize(f.x,t,f.width,f.height),i=e.getBoundingClientRect(),s=g(E.r.fromOriginAndSize(n.right()-i.width-12,n.top()+20,i.width,i.height),n);if(i.x<0||i.y<0){let t=new Animation(new KeyframeEffect(e,[{transform:`translateX(${s.left()}px) translateY(-250px)`},{transform:`translateX(${s.left()}px) translateY(${s.top()}px)`}],{duration:600}));t.onfinish=()=>{e.style.transform=`translateX(${s.left()}px) translateY(${s.top()}px)`},t.play()}else e.style.transform=`translateX(${s.left()}px) translateY(${s.top()}px)`},[h,-250,f,g]),(0,i.jsxs)("div",{ref:h,className:"ai_summary_nudge--container--Xt3Ld",children:[(0,i.jsxs)("div",{className:"ai_summary_nudge--topContent--EYXY0",children:[(0,i.jsxs)("div",{className:"ai_summary_nudge--topBar--3FRaK",children:[(0,i.jsx)("span",{className:S.s.textHeadingMedium.$,children:(0,I.tx)("whiteboard.ai_summary.nudge.title")}),(0,i.jsx)("div",{className:"ai_summary_nudge--closeButton--2Lr8q",children:(0,i.jsx)(v.K,{onClick:e,"aria-label":(0,I.t)("general.close"),htmlAttributes:{"data-testid":"close-button"},children:(0,i.jsx)(j.X,{})})})]}),(0,i.jsx)("div",{className:S.s.textBodyLarge.colorTextSecondary.$,children:(0,I.tx)("whiteboard.ai_summary.nudge.subtitle")}),(0,i.jsxs)("div",{className:"ai_summary_nudge--numberContainer--JqUxZ",children:[(0,i.jsx)(Z,{num:1}),(0,i.jsx)(Z,{num:2})]}),(0,i.jsx)(Y,{disabled:m,disabledTooltip:a,"data-testid":"summarize-button",onClick:()=>{A.wr(),A.Dh(o),d(),t(),c&&u(!0)},trackingProperties:{text:"summarize"}})]}),(0,i.jsx)("div",{className:"ai_summary_nudge--middlePerforation--z5eDN"}),(0,i.jsx)("div",{className:"ai_summary_nudge--bottomContent--EiPHE",children:(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:S.s.textBodyMedium.colorTextSecondary.mr2.$,children:(0,I.tx)("whiteboard.ai_summary.nudge.disclaimer")}),(0,i.jsx)(b.N,{href:D.nG,newTab:!0,trusted:!0,children:(0,I.t)("whiteboard.inline_menu.ai_quick_actions_dropdown_disclaimer_cta")})]})}),(0,i.jsx)("div",{className:"ai_summary_nudge--bottomPerforation---VeRC"})]})}let Y=(0,h.tf)(function({onClick:e,disabled:t,disabledTooltip:n}){return(0,i.jsx)(h.fu,{name:"AI Summary Nudge CTA",properties:{disabled:t},children:(0,i.jsx)(C.Pw,{onClick:e,variant:"primary",htmlAttributes:{"data-testid":"summarize-button","data-tooltip":t?n:"","data-tooltip-type":M.Ib.TEXT},disabled:t,children:(0,i.jsxs)("div",{className:"ai_summary_nudge--buttonContents--oUSGP",children:[(0,i.jsx)("span",{className:"ai_summary_nudge--buttonIcon--X-QPt",children:(0,i.jsx)(k,{})}),(0,I.tx)("whiteboard.ai_summary.nudge.cta"),(0,i.jsx)("div",{className:"ai_summary_nudge--badgeWrapper--QRaRq",children:(0,i.jsx)(O.v,{location:t?"SUMMARIZE_NUDGE_DISABLED":"SUMMARIZE_NUDGE",overrideText:""})})]})})})});function Z({num:e}){let t=184/e;return(0,i.jsxs)("div",{className:"ai_summary_nudge--numberGraphic--CnM2r","aria-hidden":"true",children:[(0,i.jsx)("span",{className:"ai_summary_nudge--numberText--G7GwJ",children:e}),(0,i.jsx)("div",{className:"ai_summary_nudge--textPlaceholder--tx2Yp",style:{width:`${t}px`}})]})}function J(){let e=(0,p.d4)(e=>e.mirror.selectionProperties.whiteboardSelectionCanShowAiSummaryNudge),t=W(),n=H(t);return t&&e&&!n}var Q=n(513369),$=n(651453);function ee(){let e=(0,p.wA)(),{isShowing:t,complete:n}=function(){let e=function(){let e=function(){let e=(0,T.md)($.Bl),t=(0,T.md)(q.xo),n=(0,T.md)(q.MC),i=(0,T.md)(q.ji),a=(0,T.md)(q.EH);return s.useMemo(()=>{if("loaded"!==t.status||"loaded"!==n.status||"loaded"!==e.status||e.data)return(0,Q.gB)({isEligibleToShowUser:!1});let s=new Date(i).getTime()>Date.now()-864e5;return a>=3||t.data||n.data||s?(0,Q.gB)({isEligibleToShowUser:!1}):(0,Q.gB)({isEligibleToShowUser:!0})},[e,t,n,a,i])}(),t=J();return(0,Q.gB)({shouldShowNudge:!!(e.data.isEligibleToShowUser&&t)})}(),{show:t,isShowing:n,complete:i}=(0,f.e)({overlay:y.RSb,priority:g.N.SECONDARY_MODAL},[e]),a=J(),r=(0,p.d4)(e=>e.mirror.selectionProperties.numSelectedByType);return s.useEffect(()=>{t({canShow:e=>e.shouldShowNudge})},[t,e,r,a]),{isShowing:n,complete:i}}();return(0,i.jsx)(_.M,{isShowing:t,children:t&&(0,i.jsx)(h.fu,{name:x.e0.AI_SUMMARY_TOPBAR_NUDGE,children:(0,i.jsx)(X,{onClose:()=>{e(m.b({[q.l0]:!0})),n()},onSummarize:()=>{e(m.b({[q.zp]:!0})),e(m.b({[q.l0]:!0})),n()},onAutoDismiss:()=>{n()}})})})}var et=n(835258),en=n(802529),ei=n(211862),es=n(762783),ea=n(589046),er=n(176203),el=n(190028),eo=n(719097),ed=n(174730);let ec=(0,T.eU)(!1);var eu=n(58212),ep=n(249586),em=n(281599),eh=n(598272),ef=n(141325);let eg="slides_visual_bell_entrypoint_dismissed_user_flag",ex="slide-conversion-visual-bell";function e_(){return!function(){let e=(0,p.wA)(),t=(0,em.d)(),n=(0,ed.f)(eg),a=(0,eh.$)(),r=(0,eh.N)(),[l,o]=s.useState(!1),[d,c]=s.useState(!1),u=s.useCallback(()=>{e(eu.F.enqueue({type:ex,content:(0,i.jsx)(ef.dB,{}),timeoutOverride:1e4,onDismiss:()=>{o(!0),e(m.b({[eg]:!0})),(0,ep.Cu)({trackingContext:"Slides conversion visual bell entrypoint",name:"slides_conversion_visual_bell_entrypoint_dismissed"}),e(eu.F.enqueue({message:(0,I.t)("slides.visual_bell.we_wont_ask_you_again")}))}}))},[e]);s.useEffect(()=>{r.size||e(eu.F.dequeue({matchType:ex}))},[e,r]),s.useEffect(()=>{n?.createdAt||l||!t||d||!(a>=3)||(u(),c(!0))},[u,n,l,d,a,t])}(),null}var ey=n(755444),ev=n(428147),eb=n(366535),eC=n(459494),ej=n(244205),ek=n(90844),ew=n(381059),eE=n(235711),eT=n(295253),eS=n(961307),eI=n(227504),eN=n(381888),eA=n(226492),eL=n(909342);let eM=(0,eE.r1)(eI.IR);function eO(){let e=(0,T.md)(ew.mp),t=(0,T.md)(ew.t),n=(0,T.md)(eM),s=(0,T.md)(ei.yV),a=(0,p.wA)(),{uniqueId:r,isShowing:l,show:o,complete:d}=(0,f.e)({overlay:y.B14,priority:g.N.SECONDARY_MODAL},[e,t,n]),c=(0,eC.hn)();return(0,ek.E)(r,"properties-panel-select-tab",e=>{e.properties?.tab==="prototype"&&o({canShow:(e,t,n)=>(function(e){let t=Date.now();return e.getTime()<=t-2592e6})(e)&&t&&c()&&!n})}),(0,i.jsx)(eA.X,{description:(0,I.tx)("upsell.advanced_prototyping.description"),isShowing:l,media:(0,i.jsx)(eN.w,{src:(0,ey.ck)("30507591ad5cd385aaf75d4a16ef140b74ec821b"),aspectRatio:1.75}),onClose:d,position:eL.Q.BOTTOM_RIGHT,primaryCta:{label:(0,I.tx)("upsell.advanced_prototyping.see_plans"),type:"button",onClick:()=>{a(eb.to({type:ev.V,data:{upsellSource:eT.b.ADVANCED_PROTOTYPING_UPSELL,teamId:s?.team?.id,openCheckoutInNewTab:!0,featureList:(0,eS.xp)(eS.Q1.filter(e=>e!==eS.Xj.AUDIO_CONVERSATIONS),eS.Xj.ADVANCED_PROTOTYPING)}})),d()},ctaTrackingDescriptor:ej.c.SEE_PLANS},secondaryCta:{label:(0,I.tx)("general.learn_more"),type:"link",href:"https://help.figma.com/hc/articles/14506587589399-Use-variables-in-prototypes",ctaTrackingDescriptor:ej.c.LEARN_MORE},title:(0,I.tx)("upsell.advanced_prototyping.title"),trackingContextName:"Advanced Prototype Upsell Popup",userFlagOnShow:eI.IR})}var eR=n(459496),eP=n(61102);let eD="seen_audio_nux",eF=(0,eE.r1)(eD);function ez(){let e=(0,T.md)(eF),t=(0,f.e)({overlay:y.y4J,priority:g.N.SECONDARY_MODAL},[e]);return(0,ek.E)(t.uniqueId,"Context Viewed",e=>{let n=e.properties?.name;"join-call-with-others"===n?t.show({canShow:e=>!e}):"should-close-open-audio-nux"===n&&t.isShowing&&t.complete()}),(0,ek.E)(t.uniqueId,"Lost DOM Target",()=>{t.isShowing&&t.complete()}),(0,i.jsx)(eP.rq,{isShowing:t.isShowing,userFlagOnShow:eD,emphasized:!0,title:(0,I.tx)("collaboration.voice.join_the_conversation"),description:(0,i.jsx)("div",{style:{display:"inline"},children:(0,i.jsx)(eR.OS,{})}),targetKey:"audio-nux-key",onClose:t.complete,trackingContextName:"audio_nux_pointer"})}var eB=n(74620),eG=n(477536),eU=n(319063),eV=n(905523),eH=n(856520),eK=n(739801),eW=n(274200),eq=n(191321),eX=n(971922),eY=n(337726),eZ=n(10411),eJ=n(81014),eQ=n(145132),e$=n(4033),e0=n(432511),e1=(e=>(e[e.DONT_SHOW=0]="DONT_SHOW",e[e.DEFAULT_TO_SRGB=1]="DEFAULT_TO_SRGB",e[e.DEFAULT_TO_DISPLAY_P3=2]="DEFAULT_TO_DISPLAY_P3",e))(e1||{});let e2={"Export PNG with Color Profile":"867977941678289774"};function e3(){let{plugins:e}=(0,e$.wH)(),t=Object.fromEntries(Object.entries(e2).filter(([t,n])=>Object.values(e).some(e=>e.manifest.id===n)));return Object.keys(t).length>0?t:null}function e5(){let e=(0,e0.Av)();return(0,e0.tK)(e)}let e4=(0,T.eU)(null),e6="color_management_default_to_p3_modal--onboardingFooter--VSeAU",e7="color_management_default_to_p3_modal--content--FzYUr",e8="seen_color_management_default_to_p3_modal",e9=eY.tO,te=eq.O0,tt="color_management_default_to_p3_modal";function tn(){let e=(0,f.e)({overlay:y.t_E,priority:g.N.SURVEY}),{currentStep:t,next:n,back:a}=(0,eG.A)({numSteps:2,onComplete:e.complete}),r=(0,ed.f)(e8),[l]=(0,eJ.jJ)(),o=e5(),d=e3(),[c,u]=(0,T.fp)(e4),p=(0,eU.jK)(),[m,h]=(0,s.useState)(!1),[x]=(0,T.fp)(eX.n$),_=(0,eU.C$)();return s.useEffect(()=>{r||null!=c||p.colorProfilePreference!==eV.M.DEFAULT||(u(eV.M.DISPLAY_P3),_(eV.M.DISPLAY_P3,{canSeeP3:o,desktopSetting:l,p3Plugins:d}),e.show())},[o,c,l,r,e,d,u,_,p.colorProfilePreference]),(0,ek.E)(e.uniqueId,eW.kF,()=>{e.isShowing&&0===t&&e.complete()}),(0,ek.E)(e.uniqueId,eq.nu,()=>{e.isShowing&&1===t&&e.complete()}),(0,ek.E)(e.uniqueId,eW.kL,()=>{m||e.isShowing||0!==t||x||(n(),e.show())}),(0,ek.E)(e.uniqueId,eX.E1,()=>{m||e.isShowing||0!==t||(n(),e.show())}),(0,i.jsxs)(eH.U,{currentStep:t,isShowing:e.isShowing,children:[(0,i.jsx)(eK.h,{ctaText:(0,I.tx)("general.next"),element:ti,isShowing:e.isShowing,modalType:eZ.q3.ANNOUNCEMENT_POINTER,onClickPrimaryCta:n,onClose:e.complete,onManualDismiss:()=>{e.complete(),h(!0)},onboardingKey:e9,stepCounter:(0,i.jsx)("span",{className:e6,children:(0,I.tx)("fullscreen.color_management.curator.step_1of2")}),title:(0,i.jsx)(i.Fragment,{children:(0,I.tx)("fullscreen.color_management.curator.default_to_p3.user_color_profile.title")}),trackingContextName:tt,userFlagOnShow:e8,width:300}),(0,i.jsx)(eK.h,{ctaText:(0,I.tx)("general.got_it"),element:ts,isShowing:e.isShowing,modalType:eZ.q3.ANNOUNCEMENT_POINTER,onClickPrimaryCta:()=>{e.complete(),h(!0)},onClose:e.complete,onManualDismiss:()=>{e.complete(),h(!0)},onboardingKey:te,preventDismissOnClickSecondaryCta:!0,secondaryCtaText:(0,i.jsx)("div",{onClick:a,children:(0,I.tx)("general.previous")}),stepCounter:(0,i.jsx)("span",{className:e6,children:(0,I.tx)("fullscreen.color_management.curator.step_2of2")}),title:(0,i.jsx)(i.Fragment,{children:(0,I.tx)("fullscreen.color_management.curator.change_document_color_profile.title")}),trackingContextName:tt,userFlagOnShow:e8,width:300})]})}function ti(){return(0,i.jsxs)("p",{className:e7,children:[(0,I.tx)("fullscreen.color_management.curator.default_to_p3.user_color_profile.content",{colorProfileSetting:(0,i.jsx)("strong",{children:(0,I.tx)("fullscreen.color_management.curator.color_profile_setting")})})," ",(0,i.jsx)(b.N,{newTab:!0,href:eQ.s,children:(0,I.tx)("rcs.rcs_shared.learn_more")})]})}function ts(){return(0,i.jsxs)("p",{className:e7,children:[(0,I.tx)("fullscreen.color_management.curator.change_document_color_profile.content",{fileColorProfile:(0,i.jsx)("strong",{children:(0,I.tx)("fullscreen.color_management.curator.file_color_profile")})})," ",(0,i.jsx)(b.N,{newTab:!0,href:eQ.s,children:(0,I.tx)("rcs.rcs_shared.learn_more")})]})}function ta(){let[e]=(0,eJ.jJ)(),t=e5(),n=e3(),[i,a]=(0,T.fp)(e4),r=(0,eU.jK)(),l=(0,eU.C$)();return s.useEffect(()=>{null==i&&r.colorProfilePreference===eV.M.DEFAULT&&(a(eV.M.SRGB),l(eV.M.SRGB,{canSeeP3:t,desktopSetting:e,p3Plugins:n}))},[t,i,e,n,a,l,r.colorProfilePreference]),null}function tr(){let e=function(){let e=(0,eU.jK)().colorProfilePreference!==eV.M.DEFAULT,t=function(){let[e]=(0,eJ.jJ)(),t=e5(),n=e3();return t&&n&&["unmanaged","default",null].includes(e)?eV.M.DISPLAY_P3:eV.M.SRGB}(),[n]=(0,T.fp)(e4);return e&&null===n?0:t===eV.M.SRGB?1:t===eV.M.DISPLAY_P3?2:0}();if(!function(e){let t=(0,eB.aV)(),[n,i]=function(e){let[t,n]=s.useState(!1),[i,a]=s.useState(!1);return s.useEffect(()=>{let e;return i&&(e=setTimeout(()=>{n(!t),a(!1)},2e3)),()=>clearTimeout(e)},[i,t,2e3]),[t,s.useCallback(()=>a(!0),[])]}(2e3);return s.useEffect(()=>{t||i()},[t,i]),n}(0))return null;switch(e){case e1.DONT_SHOW:return null;case e1.DEFAULT_TO_SRGB:return(0,i.jsx)(ta,{});case e1.DEFAULT_TO_DISPLAY_P3:return(0,i.jsx)(tn,{})}}var tl=n(470876),to=n(643077),td=n(835307),tc=n(883058),tu=n(191047);function tp(){let e=(0,f.e)({overlay:y.qnr,priority:g.N.DEFAULT_MODAL}),t=(0,p.wA)(),n=(0,p.Pj)(),a=(0,td.Fk)((e,t)=>(0,to.zC)(e,t),n.getState().mirror.appModel.currentPage),r=(0,tl.JU)((0,tl.J3)()),l=!!ei.q5()?.template,o=(0,eB.aV)(),d=!!(0,ed.f)("seen_custom_template_publish_nudge"),c=ed.f("figjam_editor_onboarded")?.updatedAt?.getTime(),u=!!c&&c<Date.now()-12096e5,h=!o&&!d&&r&&!a&&!l&&u;return((0,s.useEffect)(()=>{h&&setTimeout(()=>{e.show(),t(m.b({seen_custom_template_publish_nudge:!0}))},1e3)},[t,e,h]),e.isShowing)?(0,i.jsx)(tc.i,{step:{modalType:eZ.q3.DRAGGABLE,element:tu.ZH,trackingContextName:"custom_template_publish_nudge",onboardingKey:eY.v4,title:(0,i.jsx)("div",{className:S.s.font13.fontMedium.pl8.pt16.pb16.$,children:(0,I.tx)("whiteboard.inserts.custom_templates_header")}),width:300,disableFooter:!0,hideStepCounter:!0,disableHighlight:!0},onClickPrimaryCta:e.complete,onClose:e.complete,dismissModal:e.complete,dispatch:t}):null}var tm=n(883765),th=n(633065),tf=n(219199),tg=n(653899);let tx=(0,eE.r1)("seen_desktop_download_modal_prompt"),t_=(0,eE.r1)("seen_desktop_download_modal_prompt_v2"),ty=(0,ew.tH)("used_desktop_app");function tv(){let e=(0,T.md)(tx),t=(0,T.md)(t_),n=(0,T.md)(ew.mp),s=(0,T.md)(ty),r=(0,a.kc)().desktop_show_download_prompt,{isShowing:o,show:d,complete:c}=(0,f.e)({overlay:y.kmj,priority:g.N.DEFAULT_MODAL},[t,e,n]);if((0,tg.h)(()=>{th.eD||s||!r||d({canShow:(e,t,n)=>(function(e){let t=Date.now();return e.getTime()<=t-12096e5})(n)&&!t})}),!o)return null;let u=()=>{c()};return(0,i.jsx)(eA.X,{description:(0,I.tx)("desktop_download_modal_prompt.level_up_your_workflow_with_tabs"),isShowing:o,media:(0,i.jsx)(eN.y,{aspectRatio:1.75,alt:"A graphic showing the desktop app with tabs",src:(0,ey.ck)("cedfb41ea4da3cb80d5d062e5b648aa1d6a5cf1b")}),onClose:u,position:eL.Q.BOTTOM_RIGHT,primaryCta:{label:(0,I.tx)("desktop_download_modal_prompt.get_the_desktop_app"),type:"button",onClick:()=>{(0,tm.sx)("desktop_modal_download_prompt_cta_clicked_v2"),u(),tf.Ay.redirect(`/download/desktop/${l.Ay.mac?"mac":"win"}`,"_blank")},ctaTrackingDescriptor:ej.c.DESKTOP_APP_DOWNLOAD},secondaryCta:{label:(0,I.tx)("desktop_download_modal_prompt.learn_more"),type:"link",href:"https://help.figma.com/hc/articles/5601429983767-Guide-to-the-Figma-desktop-app",ctaTrackingDescriptor:ej.c.LEARN_MORE},title:(0,I.tx)("desktop_download_modal_prompt.download_the_figma_desktop_app"),trackingContextName:"Desktop Download Modal Prompt",userFlagOnShow:"seen_desktop_download_modal_prompt_v2"})}var tb=n(315361),tC=n(819851),tj=n(654200);function tk(){let{show:e,isShowing:t,complete:n,uniqueId:a}=(0,f.e)({overlay:y.Fwr,priority:g.N.DEFAULT_MODAL}),r=!!(0,u.hA)(),l=(0,tC.m0)(),o=(0,tb.uQ)();return(s.useEffect(()=>{t&&!o&&n()},[t,o,n]),(0,ek.E)(a,"focus_view_entry_point_onboarding_event",()=>{e()}),l&&!r&&o)?(0,i.jsx)(eP.rq,{arrowPosition:tj.F_.LEFT_TITLE,description:(0,I.tx)("dev_handoff.focus_view_entry_point_onboarding.description"),isCanvasNode:!0,isShowing:t,media:(0,i.jsx)(eN.y,{src:(0,ey.ck)("f5d721aeb450c7b47d78312d00881a9ed3044463"),alt:(0,I.t)("dev_handoff.focus_view_entry_point_onboarding.image"),aspectRatio:16/9}),onClose:n,onTargetLost:n,pointToTopEdge:!0,primaryCta:{label:(0,I.tx)("general.got_it"),onClick:n,type:"button",ctaTrackingDescriptor:ej.c.GOT_IT},targetKey:o,title:(0,I.tx)("dev_handoff.focus_view_entry_point_onboarding.title"),trackingContextName:"Focus view entry point onboarding overlay"}):null}var tw=n(803276),tE=n(187429),tT=n(461546),tS=n(514275),tI=n(92063),tN=n(863154),tA=n(822764),tL=n(484495),tM=n(592726),tO=n(579436),tR=n(334992),tP=n(848974);function tD(e){let{viewedSidebar:t,setViewedSidebar:n}=e,a=(0,p.wA)(),r=(0,tL.w)({rolesToDefaultToOther:["education"]}),l=(0,tR.j)(r);return s.useMemo(()=>{t||(n(!0),a(tI.En({initialX:0,initialY:0,pinned:tO.t.PINNED_AND_DOCKED_LEFT,initialSelectedCategory:l})))},[a,l,t,n]),(0,i.jsx)(i.Fragment,{})}function tF(){let e=(0,tM.TA)(),t=(0,ei.q5)(),n=(0,p.d4)(e=>e.mirror.appModel.currentPage),a=(0,td.Fk)((e,t)=>(0,to.zC)(e,t),n),r=(0,p.d4)(e=>!(0,tP.zP)(e.mirror.appModel.currentTool)),l=(0,tP.Uj)(t,e||""),o=(0,eE.Fu)("interacted_figjam_whats_new_v2_cta"),d=(0,T.md)(o),c=(0,T.md)(tN.wg),[u,m]=s.useState(!1),h=(0,f.e)({overlay:y.hsL,priority:g.N.HIGH_PRIORITY_MODAL},[d]);(0,tg.h)(()=>{h.show({canShow:e=>(0,tP.SS)(e)&&c&&(0,tP.ZQ)(t)&&a&&!r&&l})});let x=(0,tA.LR)(),_=()=>{x(),h.complete()};return(0,i.jsx)(eK.h,{isShowing:h.isShowing,modalType:eZ.q3.SELF_CONTAINED,trackingContextName:"FigJam Templates",element:()=>(0,i.jsx)(tD,{viewedSidebar:u,setViewedSidebar:m}),testId:"figjam_templates_whats_new_overlay",onClickPrimaryCta:h.complete,onClose:_,onManualDismiss:_})}var tz=n(589849),tB=n(847282),tG=n(514223),tU=n(539526),tV=n(101880),tH=n(352630),tK=n(472436),tW=n(184641),tq=n(534477);let tX="figjam_try_confirm_save_steps--descriptionBold--ou7xj";function tY({dismissModal:e}){let t=(0,p.wA)(),n=(0,ei.tS)(),a=(0,eB.aV)(),r=(0,p.d4)(e=>e.user?.email_validated_at),l=(0,tq.E)(n??void 0),[o,d]=s.useState(!1),c=(0,p.d4)(e=>n?e.loadingState[tK.Q.loadingKeyForPayload({file_key:n})]:null),u=(0,p.d4)(e=>n?e.loadingState[tW.D.loadingKeyForPayload({fileKey:n})]:null),m=(0,tz.s)(),h=c===tG.r.LOADING||"loading"===m.status||u===tG.r.LOADING,f=c===tG.r.SUCCESS||u===tG.r.SUCCESS;(0,s.useEffect)(()=>{f&&e()},[f,e]);let g=(0,ey.Ay)().mermaid_content;if((0,s.useEffect)(()=>{n&&(!g||o||a||(d(!0),l.onClaim(),e()))},[n,g,l,e,o,a]),!n||!r||a||g)return null;let x=(0,el.A)(r).isAfter((0,el.A)().subtract(5,"minutes"));return(0,i.jsx)("div",{className:"figjam_try_confirm_save_steps--modalContent--DezcS",children:(0,i.jsxs)("div",{className:"figjam_try_confirm_save_steps--textContent--9da6-",children:[(0,i.jsx)("h1",{className:"figjam_try_confirm_save_steps--headline--RRPzl text--fontPos20--Bcz97 text--_fontBase--QdLsd",children:(0,I.tx)("figjam_try.save_modal.headline")}),(0,i.jsx)(tU.k,{multiple:1}),(0,i.jsx)("p",{className:"figjam_try_confirm_save_steps--description--bpGw9 text--fontPos13--xW8hS text--_fontBase--QdLsd",children:x?(0,I.tx)("figjam_try.save_modal.new_team"):(0,I.tx)("figjam_try.save_modal.save_one_team",{share:(0,i.jsx)("p",{className:tX,children:(0,I.tx)("figjam_try.save_modal.share")}),file_duplicate:(0,i.jsx)("p",{className:tX,children:(0,I.tx)("figjam_try.save_modal.file_duplicates")})})}),(0,i.jsx)(tU.k,{multiple:3}),(0,i.jsx)(tH.lR,{onClick:()=>{"loaded"===m.status&&(0,Q.oA)(m.data?.deviceTryFile)?t(tW.D({fileKey:n})):t(tK.Q({file_key:n}))},disabled:h,trackingProperties:{buttonContext:"Let\u2019s jam"},children:(0,i.jsx)(tV.x,{isLoading:h,children:()=>(0,I.tx)("figjam_try.save_modal.cta")})})]})})}function tZ(){let{show:e,complete:t,isShowing:n}=(0,f.e)({overlay:y.JGK,priority:g.N.HIGH_PRIORITY_MODAL}),a=(0,T.md)(ei.yV),r=(0,tM.TA)(),l=a?.isTryFile,o=(0,tz.s)(),[d,c]=s.useState(!1);return(0,s.useEffect)(()=>{n&&!l&&t()},[l,n,t]),(0,s.useEffect)(()=>{let t=(0,tB.QL)(eY.ao.key)===eY.ao.value,n="loaded"===o.status&&!!(0,Q.oA)(o.data?.deviceTryFile);(0,ey.Ay)().mermaid_content_claimable&&!d?(e(),c(!0)):t&&n&&!d?(e(),c(!0)):t&&l&&!n&&e()},[e,l,o,d,r]),(0,i.jsx)(eK.h,{isShowing:n,trackingContextName:"Figjam Try Confirm Save Modal",modalType:eZ.q3.WELCOME,element:({dismissModal:e})=>(0,i.jsx)(tY,{dismissModal:e}),onClickPrimaryCta:t,onClose:t,onManualDismiss:t})}var tJ=n(929302),tQ=n(950187),t$=n(268389),t0=n(164981);let t1="figjam_try_confirm_save--textContainer--9YaF4";function t2(){let[e,t]=s.useState(!1),{show:n,isShowing:a,complete:r}=(0,f.e)({overlay:y.XAb,priority:g.N.HIGH_PRIORITY_MODAL}),l=(0,T.md)(ei.yV),o=l?.isTryFile,d=(0,tz.s)(),c=(0,tB.QL)(eY.ao.key)===eY.ao.value,u=(0,T.md)(t0.N);return(0,s.useEffect)(()=>{!e&&c&&!o&&"loaded"===d.status&&Q.oA(d.data?.deviceTryFile)?.claimedAt&&Q.oA(d.data?.deviceTryFile)?.claimedByUserId!==u.data&&n()},[e,o,c,d,n,u]),(0,i.jsx)(_.M,{isShowing:a,children:(0,i.jsx)(t3,{onClose:()=>{r(),t(!0)},open:a})})}function t3(e){let t=tJ.hS({...e,preventUserClose:!0});return(0,i.jsx)(h.fu,{name:"figjam_try_device_already_claimed_overlay",children:(0,i.jsx)(tQ.bL,{manager:t,width:420,height:"fixed",children:(0,i.jsx)(t$.vo,{children:(0,i.jsxs)(t$.nB,{padding:32,children:[(0,i.jsx)("div",{className:t1,children:(0,i.jsx)("h1",{className:"figjam_try_confirm_save--googleTryDeviceAlreadyClaimedHeader--vNLRA text--fontPos20--Bcz97 text--_fontBase--QdLsd",children:(0,I.tx)("figjam_try.already_claimed_modal.header")})}),(0,i.jsx)(tU.k,{multiple:1}),(0,i.jsx)("div",{className:t1,children:(0,i.jsx)("div",{className:"figjam_try_confirm_save--googleTryDeviceAlreadyClaimedDescription--WXdx- text--fontPos13--xW8hS text--_fontBase--QdLsd",children:(0,I.tx)("figjam_try.already_claimed_modal.description",{file_duplicate:(0,i.jsx)("p",{className:"figjam_try_confirm_save--googleTryDeviceAlreadyClaimedDescriptionBold--CZgl4",children:(0,I.tx)("figjam_try.already_claimed_modal.file_duplicate")})})})}),(0,i.jsx)(tU.k,{multiple:3}),(0,i.jsx)(tH.lR,{onClick:e.onClose,children:(0,I.tx)("figjam_try.already_claimed_modal.continue")})]})})})})}var t5=n(22508),t4=n(475961),t6=n(927919),t7=n(693356);let t8=(0,eE.r1)(t5.USER_FLAG_V2),t9=(0,ew.tH)("last_figjam_at"),ne=(0,eE.r1)("dont_show_figjam_updates_in_figma_design");function nt(){let e=(0,T.md)(ne),t=(0,T.md)(tN.wg),n=(0,T.md)(ew.mp),s=(0,T.md)(t9),a=(0,T.md)(t8),r=(0,T.md)(ew.Ot),l=(0,t4.jO)(),o=(0,f.e)({overlay:y.Ttn,priority:g.N.DEFAULT_MODAL},[e,n,a,r]);return(0,tg.h)(()=>{o.show({canShow:(e,n,i,a)=>{if(e||a)return!1;let r=(0,t7.f)({userCreatedAt:n,lastUsedFigjamDate:s,hasSeenOverlayV2:i});return(!t||l)&&r}})}),(0,i.jsx)(t6.xZ,{context:"editor",isShowing:o.isShowing,onClose:o.complete})}var nn=n(140464),ni=n(618316),ns=n(997477),na=n(850701),nr=n(249445);function nl(){let e=(0,p.wA)(),t=(0,p.d4)(e=>e.currentTeamId),n=(0,p.Pj)(),a=(0,T.md)(ew.t),r=(0,T.md)(tN.NZ),l=(0,t4.jO)(),o=(0,T.md)(tN.wg),{getConfig:d}=(0,ns.I7)("exp_library_upsells_v2"),{isShowing:c,show:u,complete:m,uniqueId:h}=(0,f.e)({overlay:y.BrS,priority:g.N.DEFAULT_MODAL,experiment:{check:()=>d().get("show_library_upsell",!1),predicate:e=>e,postCheck:e=>!0}},[a]);(0,s.useEffect)(()=>{if(!c)return;let t=n.getState().leftPanel.activeTab;return e(na.FP({tab:w.xae.ASSETS})),()=>{e(na.FP({tab:t}))}},[e,n,c]);let x=(0,s.useCallback)(e=>{e.properties?.action==="copy_paste_from_different_file"&&o&&u({canShow:e=>e&&r&&l})},[o,u,r,l]),_=(0,s.useCallback)(()=>{c&&m()},[c,m]);return(0,ek.E)(h,"component_instance_inserted",x),(0,i.jsx)(eP.rq,{arrowPosition:tj.F_.LEFT_TITLE,description:(0,I.tx)("rcs.upsell_libraries.quickly_access_components"),emphasized:!0,isShowing:c,onClose:_,onTargetLost:_,primaryCta:{label:(0,I.tx)("rcs.upsell_libraries.see_plans"),type:"button",onClick:()=>{e(eb.to({type:ev.V,data:{teamId:t??void 0,upsellSource:eT.b.UPSELL_LIBRARIES_REUSE_COMPONENTS_OVERLAY,entrypoint:nr.C6.PLAN_COMPARISON_MODAL,openCheckoutInNewTab:!0}})),_()},ctaTrackingDescriptor:ej.c.GOT_IT},secondaryCta:{label:(0,I.tx)("rcs.upsell_libraries.not_now"),type:"button",onClick:_,ctaTrackingDescriptor:ej.c.GOT_IT},targetKey:g.D,title:(0,I.tx)("rcs.upsell_libraries.reuse_components_across_all_files"),trackingContextName:"Upsell Libraries Reuse Components Overlay"})}var no=n(124125),nd=n(659062),nc=n(219971);let nu="seen_link_shortcut_overlay",np=(0,eE.r1)(nu);function nm(){let e=(0,p.wA)(),t=(0,T.md)(np),{show:n,isShowing:a,complete:r,uniqueId:l}=(0,f.e)({overlay:y.v75,priority:g.N.DEFAULT_MODAL},[t]),o=nc.y.isApple(),d=s.useMemo(()=>(0,i.jsx)(no.S,{shortcut:o?"\u2318K":"Ctrl+K"}),[o]),c=s.useMemo(()=>(0,i.jsx)(no.S,{shortcut:o?"\u21E7\u2318U":"Shift+Ctrl+U"}),[o]);return(0,ek.E)(l,["show_link_shortcuts_overlay"],()=>{n({canShow:t=>(e(m.b({seen_link_shortcut_overlay:!0})),!t)})}),(0,i.jsx)(eA.X,{description:(0,i.jsxs)("div",{children:[(0,I.tx)("fullscreen.link_shortcuts_onboarding.description"),(0,i.jsxs)("ul",{className:S.s.py8.$,style:nd.sx.add({listStyle:"disc inside"}).$,children:[(0,i.jsx)("li",{children:(0,I.tx)("fullscreen.link_shortcuts_onboarding.show_actions_updated",{actionsKeyCommand:(0,i.jsx)("strong",{children:d})})}),(0,i.jsx)("li",{children:(0,I.tx)("fullscreen.link_shortcuts_onboarding.show_links_updated",{link:(0,i.jsx)("strong",{children:(0,I.tx)("fullscreen.link_shortcuts_onboarding.create_link")}),linkKeyCommand:c})})]})]}),isShowing:a,onClose:r,position:eL.Q.BOTTOM_RIGHT,primaryCta:{label:(0,I.tx)("fullscreen.link_shortcuts_onboarding.got_it"),type:"button",onClick:r,ctaTrackingDescriptor:ej.c.GOT_IT},testId:"linkShortcutOverlay",title:(0,I.tx)("fullscreen.link_shortcuts_onboarding.title"),trackingContextName:"Link Shortcuts Preference Onboarding Modal",userFlagOnShow:nu,width:350})}var nh=n(511570),nf=n.n(nh),ng=n(769109),nx=n(495896),n_=n(195975);let ny="dismissed_local_component_asset_panel_pointer",nv=(0,eE.r1)(ny);function nb(){let e=(0,p.wA)(),t=(0,tM.TA)(),n=(0,T.md)(tN.wg),a=(0,T.md)(nv),r=(0,T.md)(tN.NZ),l=(0,T.md)(tN.pQ),o=(0,T.md)(ew.t),d=(0,t4.jO)(),c=ei.q5()?.teamId==null,{isShowing:u,show:h,complete:x,uniqueId:_}=(0,f.e)({overlay:y.Smd,priority:g.N.SECONDARY_MODAL,experiment:{check:()=>(0,nx.Hz)(t??void 0),predicate:e=>e,postCheck:e=>!e}},[a,o,l]),v=(0,s.useCallback)(()=>{n&&h({canShow:(e,t,n)=>d&&t&&(n||r)})},[d,n,r,h]),b=(0,s.useCallback)(()=>{u&&(x(),e(m.b({[ny]:!0})))},[e,x,u]);return(0,ek.E)(_,"action_create_symbol",v),(0,ek.E)(_,"component_instance_inserted",b),(0,i.jsx)(eP.rq,{isShowing:u,targetKey:eY.Qr,description:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:S.s.pt6.mr36.$,children:c?(0,I.tx)("design_systems.assets_panel.drag_drop_component_draft"):(0,I.tx)("design_systems.assets_panel.drag_drop_component")}),(0,i.jsx)(ng.Jn,{onClick:b,innerText:(0,I.t)("general.close"),"aria-label":(0,I.t)("general.close"),className:nf()(n_.Rf,S.s.absolute.top0.right0.mr8.mt10.$)})]}),primaryCta:{label:(0,I.tx)("design_systems.assets_panel.got_it"),type:"button",onClick:b,ctaTrackingDescriptor:ej.c.GOT_IT},onClose:b,trackingContextName:"Local Component Asset Panel Pointer",arrowPosition:tj.F_.LEFT_TITLE,emphasized:!0,hideCloseButton:!0})}var nC=n(432099),nj=n(310317);let nk=(0,eE.r1)("seen_mobile_comment_download_modal_prompt");function nw(){let e=(0,p.wA)(),t=(0,T.md)(nk),n=(0,p.d4)(e=>e.userAnalyticsData?.is_active_mobile_user),r=(0,p.d4)(e=>e.user?.created_at),l=(0,el.A)(r).add(14,"day").isSameOrAfter((0,el.A)()),{isShowing:o,show:d,complete:c,uniqueId:u}=(0,f.e)({overlay:y.H2x,priority:g.N.DEFAULT_MODAL},[t]);if((0,ek.E)(u,nj.w,(0,s.useCallback)(()=>{d({canShow:e=>!!(0,a.kc)().mobile_download_modal_prompts&&!e&&!l&&!n})},[d,n,l])),!o)return null;let m=()=>{nC.Ay.post("/api/send_mobile_download_email",{type:"comment"}),(0,tm.sx)("post_comment_mobile_app_download_prompt_email_me_cta_clicked"),c(),e(eu.F.enqueue({message:(0,I.t)("rcs.mobile_comment_reply_upsell.email_sent")}))};return(0,i.jsx)(eA.X,{description:(0,I.tx)("mobile_download_prompts.scan_the_qr_code"),isShowing:o,media:(0,i.jsx)(eN.y,{aspectRatio:1.75,alt:"A graphic show mobile comments with a qr code",src:(0,ey.ck)("6c270bb31fb5af03393425b7f0a6462ec59d04ab")}),onClose:()=>{c()},position:eL.Q.BOTTOM_RIGHT,primaryCta:{label:(0,I.tx)("mobile_download_prompts.email_me"),type:"button",onClick:()=>m(),ctaTrackingDescriptor:ej.c.MOBILE_APP_DOWNLOAD_COMMENT_PROMPT_CLICKED},secondaryCta:{label:(0,I.tx)("mobile_download_prompts.learn_more"),type:"link",href:"https://help.figma.com/hc/articles/1500007537281-Guide-to-the-Figma-mobile-app",ctaTrackingDescriptor:ej.c.LEARN_MORE},title:(0,I.tx)("mobile_download_prompts.never_miss_a_comment"),trackingContextName:"Mobile Comment Download Modal Prompt",userFlagOnShow:"seen_mobile_comment_download_modal_prompt"})}var nE=n(124923),nT=n(599043),nS=n(70177),nI=n(700795),nN=n(915316),nA=n(450259),nL=n(276800),nM=n(967782);function nO(e){return(0,i.jsx)("div",{className:"connector_modal_wrapper--connectorModalWrapper--uCUjA",children:e.children})}var nR=n(132078),nP=n(80852),nD=n(354114),nF=n(255768),nz=n(5047);let nB="onboard_figjam_viewer--contentContainer--t9zim",nG="onboard_figjam_viewer--imageContainer--rvqD8",nU="onboard_figjam_viewer--image--ZdwAA",nV="onboard_figjam_viewer--mainContent--8TgvP text--fontPos12Whyte---tkNx text--_fontBaseWhyte--efAjI",nH="onboard_figjam_viewer--normal--HjE2J",nK="onboard_figjam_viewer--bold--kC3mV";class nW extends s.PureComponent{render(){let e=(0,i.jsxs)(i.Fragment,{children:[this.props.buttonText,!this.props.buttonText&&this.props.steps&&this.props.steps.current===this.props.steps.total&&(0,I.tx)("rcs.rcs_shared.done"),!this.props.buttonText&&this.props.steps&&this.props.steps.current<this.props.steps.total&&(0,I.tx)("rcs.figjam_onboarding.next")]});return(0,i.jsxs)("div",{className:nB,children:[(0,i.jsxs)("div",{style:nd.sx.add({width:`${this.props.imgContainerWidth}px`}).$,className:nG,children:[(0,i.jsx)("span",{className:"onboard_figjam_viewer--imgHelper--SJXYZ","aria-hidden":"true"}),(0,i.jsx)("img",{className:nU,src:this.props.imgSrc,alt:""})]}),(0,i.jsxs)("div",{className:nf()({[nV]:!0,[nH]:!this.props.isBold,[nK]:!!this.props.isBold}),children:[this.props.titleText&&(0,i.jsx)("div",{className:"onboard_figjam_viewer--title--k1Gpk",children:this.props.titleText}),(0,i.jsx)("div",{className:"onboard_figjam_viewer--text--xkcTB",children:this.props.bodyText}),(0,i.jsxs)("div",{className:"onboard_figjam_viewer--bottomContentRow--PgTeU",children:[(0,i.jsx)("div",{className:nf()({"onboard_figjam_viewer--secondaryText--THVcI":!0,[nH]:!this.props.isBold,[nK]:!!this.props.isBold}),children:this.props.steps?(0,I.tx)("rcs.rcs_shared.step_counter",{currentStepNum:this.props.steps.current,totalNumSteps:this.props.steps.total}):(0,i.jsx)(i.Fragment,{})}),this.props.isBold?(0,i.jsx)(nz.J,{onClick:this.props.onNext,autoFocus:!0,children:e}):(0,i.jsx)(tH.$z,{onClick:this.props.onNext,children:e})]})]}),(0,i.jsx)("div",{className:"onboard_figjam_viewer--closeButton--hm43f",children:(0,i.jsx)(v.K,{onClick:this.props.onDismiss,"aria-label":(0,I.t)("modal.close"),children:(0,i.jsx)(j.X,{className:this.props.isBold?nK:void 0})})})]})}}nW.displayName="FigJamOnboardingModal";var nq=n(991522);let nX=(0,ey.ck)("07ff49c75c8933ea70ff2e4776503291c31a35ef");function nY(e){let t=(0,nF.O)();(0,s.useEffect)(()=>(nD.Y5.triggerAction("set-tool-hand",null),()=>nD.Y5.triggerAction("set-tool-default",null)),[]),(0,s.useEffect)(()=>(t({eventName:"hand_tooltip_shown"}),()=>t({eventName:"pan_zoom_completed"})),[t]);let n=(0,nx.Un)();return(0,i.jsx)(nO,{children:(0,i.jsx)(nR.Dv,{targetType:"dom",targetKey:nq.N,topPadding:-6,hasShadow:e.hasShadow,children:(0,i.jsx)(nW,{bodyText:(0,i.jsx)("span",{children:(0,I.tx)("rcs.figjam_onboarding.use_the_hand_tool_and_drag_to_move_around_hold_space_to_activate_it_anytime",{spaceKey:(0,i.jsx)("b",{children:(0,I.tx)("rcs.figjam_onboarding.space")})})}),onNext:e.onClickPrimaryCta,steps:{current:2,total:n?2:3},onDismiss:()=>{e.dismissModal(),t({eventName:"hand_tooltip_dismissed"})},imgSrc:nX})})})}var nZ=n(497461);let nJ=(0,ey.ck)("4e36d3bbbf8633fef1b86238f66bb1bf54f54d2a");function nQ(e){let t=l.Ay.mac?(0,I.t)("rcs.figjam_onboarding.cmd"):(0,I.t)("rcs.figjam_onboarding.ctrl"),n=(0,nZ.k)()?-10:-3,a=(0,nx.Un)(),r=(0,nF.O)();return(0,s.useEffect)(()=>{r({eventName:"zoom_tooltip_shown"})},[r]),(0,i.jsx)(nO,{children:(0,i.jsx)(nR.Dv,{targetType:"dom",topPadding:n,targetKey:nq.q,hasShadow:e.hasShadow,children:(0,i.jsx)(nW,{bodyText:(0,i.jsx)("span",{children:(0,I.tx)("rcs.figjam_onboarding.pinch_to_zoom_on_a_trackpad_hold_command_while_scrolling_or_use",{commandKey:(0,i.jsx)("b",{children:t}),plusOrMinusKeys:(0,i.jsx)("b",{children:(0,I.tx)("rcs.figjam_onboarding.plus_or_minus")})})}),onNext:e.onClickPrimaryCta,steps:{current:1,total:a?2:3},onDismiss:()=>{e.dismissModal(),r({eventName:"zoom_tooltip_dismissed"})},imgSrc:nJ})})})}function n$(e){return(0,i.jsx)(eK.h,{testId:e.testId?e.testId:"ZoomConnectorOverlay",modalType:eZ.q3.SELF_CONTAINED,trackingContextName:"FigJam Editor Onboarding - Zoom",element:nQ,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function n0(e){let t=(0,nx.Un)();return(0,i.jsx)(eK.h,{testId:e.testId?e.testId:"HandToolConnectorOverlay",modalType:eZ.q3.SELF_CONTAINED,trackingContextName:"FigJam Editor Onboarding - Hand Tool",userFlagOnShow:t?"figjam_editor_onboarded":void 0,element:nY,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}let n1=(0,ey.ck)("8f3066fc3906f11f2601a390725f2b7af58e01a1"),n2=[n$,n0,function(e){return(0,i.jsx)(eK.h,{testId:e.testId?e.testId:"ShareConnectorOverlay",modalType:eZ.q3.SELF_CONTAINED,trackingContextName:"FigJam Editor Onboarding - Share",userFlagOnShow:"figjam_editor_onboarded",element:e=>(0,i.jsx)(nO,{children:(0,i.jsx)(nR.Dv,{targetType:"dom",targetKey:eY.v4,topPadding:-6,children:(0,i.jsx)(nW,{bodyText:(0,i.jsx)("span",{children:(0,I.tx)("rcs.figjam_onboarding.invite_others_or_share_this_file_with_a_link_to_jam_with_your_team")}),onNext:e.onClickPrimaryCta,steps:{current:3,total:3},onDismiss:e.dismissModal,imgSrc:n1})})}),isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}];var n3=n(140490),n5=n(225417),n4=n(93605),n6=n(68351),n7=n(380494),n8=n(449572),n9=n(944350),ie=n(59849);function it({skipAccountCreationDateCheck:e=!1}){let t=(0,eB.aV)(),n=(0,tC.lg)(),i=(0,ei.q5)(),a=(0,T.md)(ew.mp),r=(0,n8.bc)(ie.KMT,{currentOrgId:i?.parentOrgId||null});return s.useMemo(()=>n7.Qw.all([a,r]).transform(i=>{let[s,a]=i,r=function(e){let t=Date.now();return e.getTime()<=t-12096e5}(s),l=!!a.org?.k12GoogleOrg||(0,n6.aA)(a.currentUser.profile?.jobTitle||"");return!t&&n===n9._Y.WHITEBOARD&&(e||r)&&l}),[a,r,n,t,e])}let ii=(0,ey.ck)("db6976747d085e1350d443cd04b08e7ba979b86b");function is({isShowing:e,onPrimaryCtaClick:t,onClose:n}){return(0,i.jsx)(_.M,{isShowing:e,children:(0,i.jsx)(h.fu,{name:"Share to Google Classroom New User Onboarding",children:(0,i.jsx)(nR.Dv,{targetType:"dom",targetKey:"share",isBold:!0,topPadding:-6,autoWidth:!0,children:(0,i.jsx)(nW,{isBold:!0,titleText:(0,I.tx)("whiteboard.google_classroom.onboarding.new_user.header"),bodyText:(0,I.tx)("whiteboard.google_classroom.onboarding.new_user.body"),buttonText:(0,I.tx)("whiteboard.google_classroom.onboarding.show_me"),onNext:t,onDismiss:n,imgSrc:ii,imgContainerWidth:105})})})})}function ia({isShowing:e,onClose:t}){return(0,i.jsx)(eP.rq,{arrowPosition:tj.F_.LEFT_TITLE,clickOutsideToHide:!0,description:(0,i.jsx)("div",{children:(0,I.tx)("whiteboard.google_classroom.pointer.body")}),disableHighlight:!0,emphasized:!0,isShowing:e,onClose:t,onTargetLost:t,targetKey:n6.pb,trackingContextName:"Share to Google Classroom Share Option Pointer",zIndex:eL.R.MODAL})}let ir="seen_figjam_share_to_google_classroom_existing_user_onboarding",il=(0,eE.r1)(ir),io="seen_figjam_share_to_google_classroom_new_user_onboarding",id=(0,eE.r1)(io),ic=(0,eE.r1)("has_shared_to_google_classroom"),iu=(0,eE.r1)("figjam_editor_onboarded"),ip="start_share_to_classroom_new_user_onboarding";function im(){return(0,i.jsx)(n3.u,{label:"ShareToGoogleClassroomNewUserOnboarding",children:(0,i.jsx)(ih,{})})}function ih(){let e=(0,p.wA)(),t=it({skipAccountCreationDateCheck:!0}),n=(0,T.md)(il),a=(0,T.md)(id),r=(0,T.md)(ic),l=(0,T.md)(n6.Ij),{show:o,isShowing:d,complete:c,uniqueId:u}=(0,f.e)({overlay:y.DKg,priority:g.N.OVERRIDING_MODAL},[a,n,r,t]);(0,ek.E)(u,ip,()=>{o({onShow:()=>{e(m.b({[io]:!0}))},canShow:(e,t,n,i)=>!e&&!t&&!n&&i})}),s.useEffect(()=>{n.data&&c()},[n,c]);let{currentStep:h,next:x}=(0,eG.A)({numSteps:2,onComplete:c}),_=function({isShowing:e,next:t,complete:n}){let s=(0,p.wA)(),a=(0,ei.q5)();return[(0,i.jsx)(is,{isShowing:e,onPrimaryCtaClick:()=>{if(!a){n();return}s((0,eb.to)({type:n4.g_,data:{fileKey:a.key,source:n5.nk.shareToGoogleClassroomOnboarding}})),t()},onClose:n},"share-to-google-classroom-new-user-callout"),(0,i.jsx)(ia,{isShowing:e,onClose:n},"share-to-google-classroom-share-option-pointer")]}({isShowing:d,next:x,complete:c});return s.useEffect(()=>{l&&d&&0===h&&x()},[h,d,l,x]),(0,i.jsx)(eH.U,{currentStep:h,isShowing:d,children:_})}function ig(e){let t=(0,p.wA)();return()=>{t(m.b({figjam_editor_onboarded:!0})),e()}}function ix({overlayUniqueId:e,afterReset:t}){let n=(0,p.wA)();(0,ek.E)(e,"Reset Onboarding",()=>{n(m.b({figjam_editor_onboarded:!1,figjam_browse_templates_modal_onboarded:!1,figjam_browse_templates_modal_onboarding_item_selected:!1})),t&&t()})}function i_({steps:e,onComplete:t,isShowing:n,overlayUniqueId:a}){let{currentStep:r,next:l,reset:o}=(0,eG.A)({numSteps:e.length,onComplete:t});return ix({overlayUniqueId:a,afterReset:o}),(0,i.jsx)(eH.U,{currentStep:r,isShowing:n,children:s.useMemo(()=>e.map((e,i)=>s.createElement(e,{onClickPrimaryCta:l,onClose:nL.lQ,onManualDismiss:t,isShowing:n,key:i})),[l,t,n,e])})}var iy=n(122559),iv=n(122010),ib=n(917360),iC=n(498349),ij=n(649154),ik=n(336518),iw=n(296430),iE=n(328341),iT=n(652539),iS=n(638641),iI=n(482996),iN=n(562086),iA=n(668242),iL=n(141773),iM=n(956592),iO=n(631370),iR=n(615782),iP=n(395556),iD=n(792028),iF=n(94107),iz=n(208740),iB=n(894981),iG=n(502756),iU=n(295114),iV=n(582154),iH=n(643330),iK=n(338052),iW=n(211261),iq=n(99723),iX=n(463470);function iY({onClickPrimaryCta:e,useCase:t}){let n=(0,ei.q5)(),i=(0,p.wA)(),a=(0,nF.O)();return{onNext:(0,s.useCallback)(()=>{n&&(i((0,eb.to)({type:n4.g_,data:{fileKey:n.key,source:n5.nk.expFigJamOnboardingShareVariant}})),(0,nM.YQ)({id:"open share modal"}),a({eventName:"share_board_clicked",useCase:t})),e()},[n,i,e,a,t])}}let iZ="make_something_assets--svg--hgXqn",iJ="make_something_assets--svgHovered--3XZdi",iQ="make_something_assets--transformable--Ku46s",i$="make_something_assets--transformLeftBrainstorm--To6dH",i0="make_something_assets--transformRightBrainstorm--DH4Yj",i1="make_something_assets--transformLeftUpdates--HVSJ5",i2="make_something_assets--transformRightUpdates--jOJJ-",i3="make_something_assets--transformLeftPlanning--6tBWf",i5="make_something_assets--transformRightPlanning--H2U0C",i4="make_something_assets--transformRightDiagramming--2ff-F";function i6(e){return(0,i.jsxs)("svg",{width:"136",viewBox:"0 0 196 136",fill:"none",className:nf()(iZ,{[iJ]:e.hovered}),children:[(0,i.jsx)("rect",{x:"27.1868",y:"27.8497",width:"141.626",height:"142.374",fill:"#E5F4FF",stroke:"black",strokeWidth:"0.373684"}),(0,i.jsx)("rect",{x:"27.1868",y:"3.18684",width:"141.626",height:"19.8053",fill:"#0D99FF",stroke:"black",strokeWidth:"0.373684"}),(0,i.jsxs)("g",{filter:"url(#filter0_d_351_43460)",children:[(0,i.jsx)("rect",{x:"37.4653",y:"38.1284",width:"34.3789",height:"34.3789",fill:"#FFD45B"}),(0,i.jsx)("rect",{x:"37.6522",y:"38.3153",width:"34.0053",height:"34.0053",stroke:"black",strokeWidth:"0.373684"})]}),(0,i.jsxs)("g",{filter:"url(#filter1_d_351_43460)",children:[(0,i.jsx)("rect",{x:"124.157",y:"81",width:"34.3789",height:"34.3789",fill:"#FFD45B"}),(0,i.jsx)("rect",{x:"124.344",y:"81.1868",width:"34.0053",height:"34.0053",stroke:"black",strokeWidth:"0.373684"})]}),(0,i.jsxs)("g",{filter:"url(#filter2_d_351_43460)",children:[(0,i.jsx)("rect",{x:"81",y:"38",width:"34.3789",height:"34.3789",fill:"#80CAFF"}),(0,i.jsx)("rect",{x:"81.1868",y:"38.1868",width:"34.0053",height:"34.0053",stroke:"black",strokeWidth:"0.373684"})]}),(0,i.jsxs)("g",{filter:"url(#filter3_d_351_43460)",children:[(0,i.jsx)("rect",{x:"80.8096",y:"123.326",width:"34.3789",height:"34.3789",fill:"#80CAFF"}),(0,i.jsx)("rect",{x:"80.9964",y:"123.513",width:"34.0053",height:"34.0053",stroke:"black",strokeWidth:"0.373684"})]}),(0,i.jsx)("rect",{x:"84.9214",y:"128.181",width:"24.2895",height:"4.48421",fill:"black",fillOpacity:"0.2"}),(0,i.jsx)("rect",{x:"40.8262",y:"42.2361",width:"24.2895",height:"4.48421",fill:"black",fillOpacity:"0.2"}),(0,i.jsx)("rect",{x:"129.021",y:"85.1079",width:"24.2895",height:"4.48421",fill:"black",fillOpacity:"0.2"}),(0,i.jsx)("rect",{x:"129.021",y:"100.057",width:"24.2895",height:"4.48421",fill:"black",fillOpacity:"0.2"}),(0,i.jsx)("rect",{x:"40.8262",y:"49.7126",width:"18.3105",height:"4.48421",fill:"black",fillOpacity:"0.2"}),(0,i.jsx)("rect",{x:"129.021",y:"92.584",width:"20.9263",height:"4.48421",fill:"black",fillOpacity:"0.2"}),(0,i.jsx)("path",{d:"M87.4033 45.8193C88.2079 46.4289 88.9008 47.0959 89.6122 47.8073",stroke:"black",strokeWidth:"1.49474",strokeLinecap:"round"}),(0,i.jsx)("path",{d:"M97.5591 43.8335V48.0303",stroke:"black",strokeWidth:"1.49474",strokeLinecap:"round"}),(0,i.jsx)("path",{d:"M103.975 49.5765C106.065 48.776 108.231 47.9817 110.38 47.3677",stroke:"black",strokeWidth:"1.49474",strokeLinecap:"round"}),(0,i.jsx)("path",{d:"M103.748 57.5273H109.491",stroke:"black",strokeWidth:"1.49474",strokeLinecap:"round"}),(0,i.jsx)("path",{d:"M98.8926 62.6094V67.4688",stroke:"black",strokeWidth:"1.49474",strokeLinecap:"round"}),(0,i.jsx)("path",{d:"M90.1268 58.5264C89.2081 59.2528 88.1169 59.8811 87.2876 60.7104",stroke:"black",strokeWidth:"1.49474",strokeLinecap:"round"}),(0,i.jsxs)("g",{filter:"url(#filter4_d_351_43460)",children:[(0,i.jsx)("rect",{x:"81",y:"80.7251",width:"34.3789",height:"34.3789",fill:"#FFD45B"}),(0,i.jsx)("rect",{x:"81.1868",y:"80.9119",width:"34.0053",height:"34.0053",stroke:"black",strokeWidth:"0.373684"})]}),(0,i.jsx)("path",{d:"M108.795 102.748L108.954 102.837L109.047 102.681L109.454 101.997C109.755 101.492 110.248 101.121 110.825 100.966C111.402 100.812 112.014 100.886 112.527 101.173C113.039 101.459 113.41 101.933 113.559 102.489C113.708 103.046 113.625 103.642 113.324 104.146L113.324 104.146L112.957 104.763L112.957 104.763L110.552 108.797L105.825 106.155C105.313 105.869 104.942 105.395 104.793 104.839C104.644 104.282 104.728 103.687 105.028 103.183C105.329 102.678 105.821 102.308 106.398 102.153C106.975 101.998 107.587 102.073 108.1 102.36L108.795 102.748Z",fill:"#F24E1E",stroke:"black",strokeWidth:"0.373684"}),(0,i.jsx)("path",{d:"M116.865 94.0866L116.958 94.2427L117.116 94.154L117.811 93.7653C118.324 93.4788 118.936 93.4037 119.513 93.5582C120.09 93.7127 120.583 94.0836 120.884 94.5878C121.185 95.0918 121.269 95.6876 121.12 96.2442C120.971 96.8009 120.6 97.2749 120.088 97.5613L120.088 97.5614L119.461 97.9124L119.461 97.9125L115.362 100.203L112.589 95.5518C112.288 95.0478 112.204 94.4522 112.353 93.8958C112.502 93.3393 112.873 92.8655 113.385 92.5793C113.897 92.293 114.51 92.2181 115.087 92.3727C115.664 92.5273 116.156 92.8982 116.457 93.4024L116.865 94.0866Z",fill:"#F24E1E",stroke:"black",strokeWidth:"0.373684"}),(0,i.jsxs)("g",{filter:"url(#filter5_d_351_43460)",className:nf()(iQ,i0),children:[(0,i.jsx)("rect",{x:"124",y:"37.761",width:"34.3789",height:"34.3789",fill:"#FFD45B"}),(0,i.jsx)("rect",{x:"124.187",y:"37.9478",width:"34.0053",height:"34.0053",stroke:"black",strokeWidth:"0.373684"})]}),(0,i.jsx)("path",{d:"M131.262 57.6483C132.364 58.2951 133.535 59.063 134.814 59.2976C138.578 59.9876 139.728 56.6784 139.99 53.525C140.181 51.2338 140.49 47.2706 137.707 46.3822C135.469 45.668 135.63 48.5222 135.525 50.0614C135.198 54.8126 139.249 59.0839 144.177 57.7244C145.893 57.251 147.804 55.2775 148.694 53.7787C149.217 52.8971 149.432 51.8588 149.988 51.0257",stroke:"black",strokeWidth:"1.49474",strokeLinecap:"round",className:nf()(iQ,i0)}),(0,i.jsx)("circle",{cx:"150.532",cy:"37.7597",r:"3.92368",fill:"#A259FF",stroke:"black",strokeWidth:"0.373684",className:nf()(iQ,i0)}),(0,i.jsxs)("g",{filter:"url(#filter6_d_351_43460)",className:nf()(iQ,i$),children:[(0,i.jsx)("rect",{x:"37",y:"81.208",width:"34.3789",height:"34.3789",fill:"#80CAFF"}),(0,i.jsx)("rect",{x:"37.1868",y:"81.3948",width:"34.0053",height:"34.0053",stroke:"black",strokeWidth:"0.373684"})]}),(0,i.jsx)("rect",{className:nf()(iQ,i$),x:"41.8633",y:"87.5618",width:"24.2895",height:"4.48421",fill:"black",fillOpacity:"0.2"}),(0,i.jsx)("circle",{className:nf()(iQ,i$),cx:"70.6325",cy:"98.0258",r:"3.92368",fill:"#A259FF",stroke:"black",strokeWidth:"0.373684"}),(0,i.jsx)("circle",{className:nf()(iQ,i$),cx:"61.2902",cy:"106.617",r:"3.92368",fill:"#A259FF",stroke:"black",strokeWidth:"0.373684"}),(0,i.jsxs)("defs",{children:[(0,i.jsxs)("filter",{id:"filter0_d_351_43460",x:"37.4653",y:"38.1284",width:"35.1263",height:"35.1263",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,i.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,i.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,i.jsx)("feOffset",{dx:"0.747368",dy:"0.747368"}),(0,i.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,i.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),(0,i.jsx)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_351_43460"}),(0,i.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_351_43460",result:"shape"})]}),(0,i.jsxs)("filter",{id:"filter1_d_351_43460",x:"124.157",y:"81",width:"35.1263",height:"35.1263",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,i.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,i.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,i.jsx)("feOffset",{dx:"0.747368",dy:"0.747368"}),(0,i.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,i.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),(0,i.jsx)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_351_43460"}),(0,i.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_351_43460",result:"shape"})]}),(0,i.jsxs)("filter",{id:"filter2_d_351_43460",x:"81",y:"38",width:"35.1263",height:"35.1263",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,i.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,i.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,i.jsx)("feOffset",{dx:"0.747368",dy:"0.747368"}),(0,i.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,i.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),(0,i.jsx)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_351_43460"}),(0,i.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_351_43460",result:"shape"})]}),(0,i.jsxs)("filter",{id:"filter3_d_351_43460",x:"80.8096",y:"123.326",width:"35.1263",height:"35.1263",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,i.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,i.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,i.jsx)("feOffset",{dx:"0.747368",dy:"0.747368"}),(0,i.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,i.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),(0,i.jsx)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_351_43460"}),(0,i.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_351_43460",result:"shape"})]}),(0,i.jsxs)("filter",{id:"filter4_d_351_43460",x:"81",y:"80.7251",width:"35.1263",height:"35.1263",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,i.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,i.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,i.jsx)("feOffset",{dx:"0.747368",dy:"0.747368"}),(0,i.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,i.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),(0,i.jsx)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_351_43460"}),(0,i.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_351_43460",result:"shape"})]}),(0,i.jsxs)("filter",{id:"filter5_d_351_43460",x:"124",y:"37.761",width:"35.1263",height:"35.1263",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,i.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,i.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,i.jsx)("feOffset",{dx:"0.747368",dy:"0.747368"}),(0,i.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,i.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),(0,i.jsx)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_351_43460"}),(0,i.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_351_43460",result:"shape"})]}),(0,i.jsxs)("filter",{id:"filter6_d_351_43460",x:"37",y:"81.208",width:"35.1263",height:"35.1263",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,i.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,i.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,i.jsx)("feOffset",{dx:"0.747368",dy:"0.747368"}),(0,i.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,i.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),(0,i.jsx)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_351_43460"}),(0,i.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_351_43460",result:"shape"})]})]})]})}function i7(e){return(0,i.jsxs)("svg",{width:"136",viewBox:"0 0 196 136",fill:"none",className:nf()(iZ,{[iJ]:e.hovered}),children:[(0,i.jsx)("rect",{width:"196",height:"121.761",fill:"white"}),(0,i.jsx)("rect",{x:"27.183",y:"49.6627",width:"43.186",height:"23.7889",rx:"2.01291",fill:"#FFE8A3",stroke:"black",strokeWidth:"0.365983"}),(0,i.jsx)("rect",{x:"31.7598",y:"59.3601",width:"17.9332",height:"4.3918",fill:"black",fillOpacity:"0.2"}),(0,i.jsx)("circle",{cx:"58.6556",cy:"61.7423",r:"5.48975",fill:"white",stroke:"black",strokeWidth:"0.365983"}),(0,i.jsx)("rect",{x:"76.5885",y:"49.6627",width:"42.82",height:"23.7889",rx:"2.01291",fill:"#FFE8A3",stroke:"black",strokeWidth:"0.365983"}),(0,i.jsx)("rect",{x:"80.7957",y:"59.3601",width:"17.9332",height:"4.3918",fill:"black",fillOpacity:"0.2"}),(0,i.jsx)("circle",{cx:"109.161",cy:"61.7423",r:"5.48975",fill:"white",stroke:"black",strokeWidth:"0.365983"}),(0,i.jsx)("rect",{x:"76.5888",y:"3.18299",width:"42.82",height:"23.7889",rx:"2.01291",fill:"#FFCD29",stroke:"black",strokeWidth:"0.365983"}),(0,i.jsx)("rect",{x:"80.7959",y:"12.8804",width:"17.9332",height:"4.3918",fill:"black",fillOpacity:"0.2"}),(0,i.jsx)("circle",{cx:"110.261",cy:"15.2623",r:"5.48975",fill:"white",stroke:"black",strokeWidth:"0.365983"}),(0,i.jsx)("rect",{x:"125.631",y:"130.178",width:"43.0186",height:"23.7889",rx:"2.01291",fill:"#FFE8A3",stroke:"black",strokeWidth:"0.365983"}),(0,i.jsx)("rect",{x:"27.183",y:"89.9188",width:"43.186",height:"23.7889",rx:"2.01291",fill:"#FFE8A3",stroke:"black",strokeWidth:"0.365983"}),(0,i.jsx)("rect",{x:"33.5896",y:"99.6157",width:"17.9332",height:"4.3918",fill:"black",fillOpacity:"0.2"}),(0,i.jsx)("circle",{cx:"60.4899",cy:"101.998",r:"5.48975",fill:"white",stroke:"black",strokeWidth:"0.365983"}),(0,i.jsxs)("g",{clipPath:"url(#clip0_351_43276)",children:[(0,i.jsx)("path",{d:"M61.0894 105.123C60.3396 105.1 59.722 104.946 59.1311 104.674C58.9431 104.588 58.7461 104.522 58.5542 104.448C58.3001 104.35 58.0777 104.2 57.9633 103.952C57.7015 103.384 57.427 102.818 57.2237 102.227C57.0344 101.676 57.1513 101.125 57.4918 100.655C57.7562 100.29 57.9163 99.8986 58.0319 99.4665C58.1742 98.9366 58.5669 98.643 59.1006 98.5287C59.3459 98.4766 59.5785 98.4931 59.8123 98.5833C60.0296 98.6672 60.2545 98.6812 60.482 98.6189C60.9039 98.5032 61.2889 98.6227 61.6663 98.8044C61.843 98.8883 62.0234 98.9772 62.2128 99.0192C62.8367 99.1564 63.157 99.5669 63.2421 100.164C63.284 100.46 63.2599 100.769 63.2383 101.07C63.2192 101.333 63.2472 101.582 63.331 101.83C63.5483 102.473 63.5153 103.102 63.2179 103.716C63.0362 104.092 62.7389 104.346 62.378 104.541C62.1251 104.677 61.8735 104.816 61.6282 104.966C61.43 105.087 61.2177 105.129 61.0894 105.123ZM61.083 104.886C61.2787 104.889 61.4274 104.827 61.6269 104.673C61.7616 104.57 61.9218 104.499 62.0704 104.415C62.2458 104.317 62.4517 104.251 62.594 104.118C63.1989 103.548 63.3361 102.819 63.1328 102.055C63.0019 101.562 62.9625 101.089 63.0197 100.591C63.0934 99.9405 62.7376 99.4512 62.1136 99.2784C61.8976 99.2187 61.6905 99.117 61.4872 99.0192C61.2266 98.8946 60.9585 98.7866 60.6713 98.8553C60.2977 98.9442 59.9419 98.9163 59.5835 98.7955C59.4666 98.7561 59.3345 98.7206 59.215 98.7345C58.7347 98.7904 58.3979 99.0738 58.2772 99.5237C58.1463 100.013 57.9264 100.439 57.6545 100.859C57.3724 101.296 57.2974 101.795 57.4982 102.297C57.6964 102.793 57.9125 103.284 58.126 103.774C58.2314 104.018 58.417 104.181 58.6673 104.274C58.9037 104.362 59.1426 104.444 59.3726 104.547C59.8796 104.772 60.4172 104.848 61.083 104.886Z",fill:"black"}),(0,i.jsx)("path",{d:"M60.5404 103.175C60.0016 103.198 59.5072 103.112 59.1222 102.711C59.0561 102.642 58.9938 102.566 58.9544 102.481C58.9354 102.441 58.9189 102.367 58.9926 102.326C59.0383 102.3 59.0968 102.327 59.1336 102.355C59.2264 102.424 59.3039 102.514 59.3979 102.583C59.8402 102.909 60.3294 103.011 60.8593 102.856C61.1275 102.778 61.3143 102.581 61.4795 102.365C61.5405 102.286 61.6078 102.167 61.7184 102.25C61.8289 102.333 61.7298 102.435 61.6726 102.511C61.3842 102.895 61.036 103.177 60.5404 103.175Z",fill:"black"}),(0,i.jsx)("path",{d:"M62.2294 101.088C62.2281 101.243 62.1099 101.367 61.9701 101.365C61.8253 101.362 61.7045 101.234 61.7083 101.088C61.7122 100.928 61.824 100.801 61.96 100.803C62.1124 100.805 62.2319 100.93 62.2294 101.088Z",fill:"black"}),(0,i.jsx)("path",{d:"M58.9061 101.294C58.9048 101.449 58.7867 101.573 58.6469 101.571C58.502 101.568 58.3813 101.44 58.3851 101.294C58.3889 101.134 58.5007 101.007 58.6367 101.009C58.7879 101.01 58.9074 101.136 58.9061 101.294Z",fill:"black"})]}),(0,i.jsx)("path",{d:"M96.5399 30.8149C96.5399 30.6128 96.7037 30.449 96.9058 30.449C97.108 30.449 97.2718 30.6128 97.2718 30.8149H96.5399ZM147.121 45.7131C146.978 45.856 146.747 45.856 146.604 45.7131L144.275 43.384C144.132 43.241 144.132 43.0093 144.275 42.8664C144.418 42.7234 144.649 42.7234 144.792 42.8664L146.863 44.9367L148.933 42.8664C149.076 42.7234 149.308 42.7234 149.45 42.8664C149.593 43.0093 149.593 43.241 149.45 43.384L147.121 45.7131ZM97.2718 30.8149V33.1938H96.5399V30.8149H97.2718ZM101.298 37.2196H142.471V37.9516H101.298V37.2196ZM147.229 41.9774V45.4543H146.497V41.9774H147.229ZM142.471 37.2196C145.098 37.2196 147.229 39.3498 147.229 41.9774H146.497C146.497 39.754 144.694 37.9516 142.471 37.9516V37.2196ZM97.2718 33.1938C97.2718 35.4172 99.0742 37.2196 101.298 37.2196V37.9516C98.67 37.9516 96.5399 35.8215 96.5399 33.1938H97.2718Z",fill:"black"}),(0,i.jsx)("path",{d:"M97.2684 30.8149C97.2684 30.6128 97.1045 30.449 96.9024 30.449C96.7002 30.449 96.5364 30.6128 96.5364 30.8149H97.2684ZM46.5039 45.7131C46.6468 45.856 46.8786 45.856 47.0215 45.7131L49.3506 43.384C49.4935 43.241 49.4935 43.0093 49.3506 42.8664C49.2077 42.7234 48.9759 42.7234 48.833 42.8664L46.7627 44.9367L44.6924 42.8664C44.5495 42.7234 44.3177 42.7234 44.1748 42.8664C44.0319 43.0093 44.0319 43.241 44.1748 43.384L46.5039 45.7131ZM96.5364 30.8149V33.1938H97.2684V30.8149H96.5364ZM92.5106 37.2196H51.1545V37.9516H92.5106V37.2196ZM46.3967 41.9774V45.4543H47.1287V41.9774H46.3967ZM51.1545 37.2196C48.5268 37.2196 46.3967 39.3498 46.3967 41.9774H47.1287C47.1287 39.754 48.9311 37.9516 51.1545 37.9516V37.2196ZM96.5364 33.1938C96.5364 35.4172 94.734 37.2196 92.5106 37.2196V37.9516C95.1382 37.9516 97.2684 35.8215 97.2684 33.1938H96.5364Z",fill:"black"}),(0,i.jsx)("path",{d:"M97.2686 30.6304C97.2686 30.4282 97.1047 30.2644 96.9026 30.2644C96.7005 30.2644 96.5366 30.4282 96.5366 30.6304H97.2686ZM96.6438 46.0775C96.7867 46.2204 97.0185 46.2204 97.1614 46.0775L99.4905 43.7484C99.6334 43.6054 99.6334 43.3737 99.4905 43.2308C99.3476 43.0879 99.1158 43.0879 98.9729 43.2308L96.9026 45.3011L94.8323 43.2308C94.6894 43.0879 94.4576 43.0879 94.3147 43.2308C94.1718 43.3737 94.1718 43.6054 94.3147 43.7484L96.6438 46.0775ZM96.5366 30.6304V45.8187H97.2686V30.6304H96.5366Z",fill:"black"}),(0,i.jsxs)("g",{clipPath:"url(#clip1_351_43276)",children:[(0,i.jsx)("path",{d:"M58.8788 58.1369C59.7645 58.1496 60.4813 58.5105 61.1522 59.0925C62.5348 60.2921 62.6352 63.1971 60.4584 64.5085C58.9563 65.4133 56.9612 64.9838 55.998 63.3356C54.9331 61.5146 55.7781 59.0887 57.7364 58.3465C58.1036 58.2068 58.4836 58.133 58.8788 58.1369ZM61.8321 61.2731C61.8524 60.625 61.5258 59.874 60.9565 59.2831C60.2271 58.527 59.2867 58.2677 58.2511 58.5079C56.3449 58.9476 55.3105 61.1016 56.1263 62.9023C56.7032 64.1756 58.0592 64.8885 59.3554 64.6C60.8155 64.2747 61.8384 62.9874 61.8321 61.2731Z",fill:"black"}),(0,i.jsx)("path",{d:"M61.0418 62.2874C60.6491 63.2747 59.9489 63.8517 58.8903 63.8644C57.983 63.8746 57.3159 63.426 56.9105 62.5885C56.8851 62.6 56.8546 62.6152 56.8253 62.6254C56.7834 62.6406 56.7593 62.6508 56.7211 62.6025C56.7033 62.5796 56.6754 62.539 56.7275 62.497C56.8558 62.3916 56.9943 62.3001 57.1341 62.2124C57.1557 62.1984 57.2066 62.1971 57.2358 62.2416C57.2676 62.2912 57.2472 62.3229 57.2282 62.3484C57.1926 62.3954 57.1418 62.431 57.0909 62.4754C57.5764 63.2188 58.2232 63.6661 59.1483 63.5734C59.9641 63.492 60.5716 62.8872 60.794 62.1743C60.8041 62.1425 60.7685 62.1196 60.7342 62.0777C60.6771 62.0103 60.6377 61.9989 60.7025 61.8909C60.7495 61.8235 60.8219 61.8629 60.8639 61.8845C60.9973 61.9544 61.1294 62.0319 61.2464 62.126C61.2921 62.1628 61.376 62.2175 61.3213 62.3153C61.2705 62.4144 61.2006 62.3496 61.118 62.3255C61.0951 62.3153 61.0723 62.3013 61.0418 62.2874Z",fill:"black"}),(0,i.jsx)("path",{d:"M57.3933 60.2757C57.4657 60.1588 57.5445 60.066 57.6881 60.0953C57.8254 60.1232 57.8813 60.2427 57.8825 60.3532C57.8864 60.5718 57.8825 60.7967 57.8343 61.009C57.7847 61.2275 57.683 61.4359 57.5928 61.6431C57.5293 61.7892 57.4289 61.8184 57.3196 61.7117C56.9689 61.3661 56.7566 60.9518 56.7795 60.446C56.7859 60.3024 56.8634 60.1842 57.007 60.1359C57.162 60.0838 57.2815 60.155 57.3933 60.2757ZM57.6754 60.2999C57.6754 60.2999 57.6475 60.2592 57.6004 60.2732C57.5649 60.2706 57.5255 60.4219 57.5026 60.5019C57.481 60.5769 57.4848 60.6315 57.4314 60.6404C57.3463 60.6481 57.3526 60.5756 57.3171 60.54C57.3005 60.5223 57.2205 60.2961 57.1061 60.338C57.0324 60.3647 57.0286 60.4727 57.0324 60.5375C57.0502 60.8666 57.2001 61.1487 57.378 61.4512C57.5407 61.0611 57.7834 60.5375 57.6754 60.2999Z",fill:"black"}),(0,i.jsx)("path",{d:"M60.2957 60.1701C60.3885 60.118 60.4761 60.0736 60.5626 60.0914C60.6909 60.118 60.7163 60.2527 60.7278 60.3697C60.7646 60.742 60.6032 61.0571 60.4291 61.3672C60.3897 61.4371 60.3338 61.4981 60.297 61.5705C60.1915 61.7764 60.0098 61.7383 59.9094 61.5616C59.6997 61.1893 59.5802 60.7801 59.6184 60.3442C59.6323 60.1778 59.6946 60.0189 59.8789 59.9757C60.0644 59.93 60.2258 60.0469 60.2957 60.1701ZM60.067 61.3837C60.086 61.474 60.1051 61.4041 60.1229 61.3863C60.2499 61.1957 60.3783 61.005 60.4533 60.7954C60.5117 60.6314 60.6655 60.2159 60.5041 60.2578C60.4647 60.2604 60.424 60.3811 60.3897 60.4421C60.3618 60.4904 60.3046 60.5679 60.2804 60.5717C60.1877 60.5742 60.1991 60.4904 60.1813 60.4421C60.1394 60.3328 60.1432 60.1612 59.9869 60.1816C59.8319 60.2019 59.8497 60.3735 59.87 60.4853C59.9234 60.7865 59.9996 61.0851 60.067 61.3837Z",fill:"black"})]}),(0,i.jsxs)("g",{clipPath:"url(#clip2_351_43276)",children:[(0,i.jsx)("path",{d:"M106.15 61.4002C106.19 60.3696 106.623 59.3517 107.641 58.6439C107.894 58.4685 108.194 58.3541 108.485 58.2436C110.078 57.6387 112.02 58.7328 112.438 60.7102C112.736 62.1156 112.387 63.3546 111.281 64.3014C109.773 65.5912 107.534 65.1172 106.591 63.3432C106.3 62.7917 106.153 62.2046 106.15 61.4002ZM109.218 64.6076C109.862 64.6089 110.388 64.4424 110.809 64.1489C112.465 62.9912 112.596 60.3836 111.064 59.062C110.367 58.4596 109.556 58.302 108.681 58.4965C108.409 58.5575 108.146 58.715 107.913 58.879C106.537 59.8511 106.176 61.8602 107.116 63.3127C107.638 64.1209 108.377 64.5784 109.218 64.6076Z",fill:"black"}),(0,i.jsx)("path",{d:"M108.781 63.6393C108.761 63.6736 108.735 63.708 108.716 63.7384C108.668 63.816 108.644 63.8439 108.552 63.8122C108.484 63.7728 108.498 63.6863 108.515 63.6393C108.564 63.5072 108.627 63.3801 108.701 63.2594C108.73 63.2111 108.787 63.1247 108.847 63.1526C108.893 63.1806 108.927 63.1971 108.888 63.3305C108.88 63.3559 108.871 63.3864 108.858 63.4271C109.174 63.586 109.496 63.6037 109.829 63.5237C110.313 63.4068 110.757 63.0421 111.012 62.5935C111.119 62.4054 111.164 62.225 111.222 61.9975C111.235 61.9505 111.269 61.8717 111.247 61.8577C111.218 61.8399 111.183 61.817 111.141 61.7992C111.059 61.7662 111.067 61.7052 111.084 61.6658C111.111 61.5972 111.165 61.5896 111.198 61.5985C111.387 61.6468 111.574 61.7078 111.758 61.7713C111.784 61.7802 111.818 61.8081 111.805 61.8691C111.791 61.9327 111.749 61.9441 111.713 61.9505C111.655 61.9606 111.593 61.9454 111.517 61.939C111.493 62.042 111.471 62.15 111.441 62.2542C111.208 63.0649 110.709 63.6139 109.876 63.8274C109.542 63.9125 109.203 63.8477 108.781 63.6393Z",fill:"black"}),(0,i.jsx)("path",{d:"M110.475 60.4918C110.475 60.3914 110.46 60.2859 110.481 60.1906C110.495 60.1296 110.527 60.0368 110.611 60.0381C110.692 60.0394 110.753 60.0991 110.772 60.1525C110.894 60.4994 110.944 60.859 110.894 61.2237C110.89 61.3216 110.795 61.38 110.752 61.38C110.674 61.38 110.597 61.3279 110.575 61.2377C110.517 60.9937 110.464 60.493 110.475 60.4918Z",fill:"black"}),(0,i.jsx)("path",{d:"M107.785 60.4853C107.791 60.4243 107.829 60.3175 107.921 60.2997C108.017 60.2743 108.052 60.39 108.063 60.4408C108.118 60.6848 108.104 60.639 108.132 60.9809C108.134 61.005 108.143 61.4129 108.133 61.5235C108.123 61.6404 108.059 61.6989 108.002 61.7014C107.894 61.7078 107.86 61.6353 107.836 61.5502C107.761 61.2909 107.725 61.0279 107.785 60.4853Z",fill:"black"})]}),(0,i.jsxs)("g",{clipPath:"url(#clip3_351_43276)",children:[(0,i.jsx)("path",{d:"M111.595 18.3869C110.845 18.364 110.227 18.2102 109.637 17.9383C109.448 17.8519 109.251 17.7858 109.06 17.7121C108.805 17.6142 108.583 17.4643 108.469 17.2165C108.207 16.6485 107.932 16.0817 107.729 15.4908C107.54 14.9405 107.657 14.389 107.997 13.9188C108.262 13.5541 108.422 13.1627 108.537 12.7307C108.68 12.2007 109.072 11.9072 109.606 11.7928C109.851 11.7407 110.084 11.7572 110.318 11.8475C110.535 11.9313 110.76 11.9453 110.987 11.883C111.409 11.7674 111.794 11.8869 112.172 12.0686C112.348 12.1525 112.529 12.2414 112.718 12.2833C113.342 12.4206 113.662 12.831 113.747 13.4283C113.789 13.7244 113.765 14.0332 113.744 14.3344C113.725 14.5974 113.753 14.8465 113.836 15.0943C114.054 15.7373 114.021 16.3663 113.723 16.9801C113.542 17.3563 113.244 17.6104 112.883 17.8049C112.63 17.9408 112.379 18.0806 112.134 18.2306C111.935 18.3513 111.723 18.3932 111.595 18.3869ZM111.588 18.1505C111.784 18.1531 111.933 18.0908 112.132 17.937C112.267 17.8341 112.427 17.7629 112.576 17.6791C112.751 17.5812 112.957 17.5151 113.099 17.3817C113.704 16.8124 113.842 16.083 113.638 15.3192C113.507 14.8262 113.468 14.3534 113.525 13.8553C113.599 13.2047 113.243 12.7154 112.619 12.5426C112.403 12.4829 112.196 12.3812 111.993 12.2833C111.732 12.1588 111.464 12.0508 111.177 12.1194C110.803 12.2084 110.447 12.1804 110.089 12.0597C109.972 12.0203 109.84 11.9847 109.72 11.9987C109.24 12.0546 108.903 12.338 108.783 12.7878C108.652 13.2771 108.432 13.7028 108.16 14.1234C107.878 14.5606 107.803 15.0587 108.004 15.5607C108.202 16.0575 108.418 16.5481 108.631 17.0386C108.737 17.2826 108.922 17.4452 109.173 17.538C109.409 17.6257 109.648 17.7083 109.878 17.8112C110.385 18.0361 110.923 18.1124 111.588 18.1505Z",fill:"black"}),(0,i.jsx)("path",{d:"M111.046 16.4389C110.507 16.4618 110.013 16.3766 109.628 15.975C109.561 15.9064 109.499 15.8302 109.46 15.745C109.441 15.7056 109.424 15.6307 109.498 15.59C109.544 15.5646 109.602 15.5913 109.639 15.6192C109.732 15.6878 109.809 15.7781 109.903 15.8467C110.346 16.1733 110.835 16.2749 111.365 16.1199C111.633 16.0424 111.82 15.8454 111.985 15.6294C112.046 15.5506 112.113 15.4312 112.224 15.5138C112.334 15.5976 112.235 15.6993 112.178 15.7755C111.89 16.1593 111.541 16.4414 111.046 16.4389Z",fill:"black"}),(0,i.jsx)("path",{d:"M112.735 14.3521C112.733 14.5071 112.615 14.6316 112.475 14.6291C112.331 14.6266 112.21 14.4982 112.214 14.3521C112.218 14.192 112.329 14.0649 112.465 14.0674C112.618 14.0687 112.737 14.1945 112.735 14.3521Z",fill:"black"}),(0,i.jsx)("path",{d:"M109.411 14.5579C109.41 14.7129 109.292 14.8375 109.152 14.8349C109.007 14.8324 108.887 14.704 108.89 14.5579C108.894 14.3978 109.006 14.2707 109.142 14.2732C109.293 14.2745 109.413 14.4003 109.411 14.5579Z",fill:"black"})]}),(0,i.jsx)("path",{d:"M48.5913 77.6602C48.5913 77.458 48.4275 77.2942 48.2253 77.2942C48.0232 77.2942 47.8594 77.458 47.8594 77.6602H48.5913ZM47.9666 85.6046C48.1095 85.7475 48.3412 85.7475 48.4841 85.6046L50.8132 83.2755C50.9562 83.1326 50.9562 82.9008 50.8132 82.7579C50.6703 82.615 50.4386 82.615 50.2957 82.7579L48.2253 84.8282L46.155 82.7579C46.0121 82.615 45.7804 82.615 45.6375 82.7579C45.4945 82.9008 45.4945 83.1326 45.6375 83.2755L47.9666 85.6046ZM47.8594 77.6602V85.3458H48.5913V77.6602H47.8594Z",fill:"black"}),(0,i.jsx)("rect",{x:"125.264",y:"50.1747",width:"43.186",height:"23.7889",rx:"2.01291",fill:"#FFE8A3",stroke:"black",strokeWidth:"0.365983",className:nf()(iQ,i4)}),(0,i.jsx)("rect",{x:"131.664",y:"59.8726",width:"17.9332",height:"4.3918",fill:"black",fillOpacity:"0.2",className:nf()(iQ,i4)}),(0,i.jsx)("circle",{cx:"158.567",cy:"62.2545",r:"5.48975",fill:"white",stroke:"black",strokeWidth:"0.365983",className:nf()(iQ,i4)}),(0,i.jsxs)("g",{clipPath:"url(#clip4_351_43276)",className:nf()(iQ,i4),children:[(0,i.jsx)("path",{d:"M156.152 60.7639C156.525 60.325 156.935 59.9056 157.388 59.5486C157.703 59.3 157.811 59.2875 157.985 59.2403C158.032 59.2278 158.074 59.1986 158.114 59.1695C159.805 57.9764 161.959 58.8222 162.375 60.9278C162.652 62.325 161.939 63.7125 160.714 64.2792C160.695 64.2889 160.666 64.2917 160.656 64.307C160.413 64.6875 159.918 64.8347 159.617 64.9097C159.556 64.932 159.509 64.9958 159.453 65.0375C159.41 65.0695 159.367 65.1042 159.318 65.1264C157.725 65.8653 156.013 64.8764 155.638 63.2403C155.585 63.0097 155.353 61.6181 156.152 60.7639ZM159.47 64.1903C160.038 64.1875 160.409 64.0945 160.741 63.9125C162.338 63.0361 162.577 60.6556 161.171 59.4931C160.366 58.8278 159.335 58.7153 158.43 59.3528C157.353 60.1097 156.963 61.6611 157.566 62.8333C157.999 63.6764 158.686 64.1417 159.47 64.1903ZM160.013 64.55C160.082 64.525 160.092 64.507 160.081 64.4986C160.081 64.4986 160.052 64.4986 160.003 64.5C158.753 64.5945 157.813 64.0972 157.256 62.9764C156.711 61.882 156.843 60.807 157.486 59.7778C157.435 59.8028 157.393 59.8333 157.356 59.8681C156.489 60.6528 156.234 61.982 156.734 63.1181C157.195 64.1667 158.163 64.7889 159.252 64.7111C159.507 64.6931 159.759 64.6056 160.013 64.55ZM156.342 60.9472C156.343 60.907 156.306 60.957 156.3 60.9639C156.281 60.9903 156.261 61.0181 156.245 61.0458C156.016 61.432 155.873 61.85 155.853 62.2986C155.807 63.3208 156.166 64.1681 157.031 64.7458C157.606 65.1306 158.245 65.2097 158.913 65.0014C157.936 64.9028 157.175 64.45 156.661 63.6139C156.148 62.7806 156.066 61.8861 156.342 60.9472Z",fill:"black"}),(0,i.jsx)("path",{d:"M160.525 61.8376C160.717 61.8445 160.78 61.9445 160.717 62.1251C160.561 62.5695 160.124 62.7862 159.678 62.6307C159.414 62.5376 159.207 62.3682 159.064 62.1265C158.955 61.9404 159.003 61.8334 159.218 61.8195C159.443 61.8043 160.316 61.8293 160.525 61.8376ZM160.482 62.0543C160.099 62.0543 159.725 62.0543 159.348 62.0543C159.731 62.5001 160.298 62.5084 160.482 62.0543Z",fill:"black"}),(0,i.jsx)("path",{d:"M158.963 61.0499C158.964 61.2666 158.756 61.4638 158.528 61.4624C158.33 61.461 158.191 61.2819 158.189 61.0916C158.186 60.9013 158.381 60.7138 158.595 60.7082C158.8 60.7013 158.963 60.8513 158.963 61.0499ZM158.546 60.9124C158.443 60.9291 158.411 61.0263 158.42 61.0999C158.431 61.2069 158.511 61.2332 158.561 61.2346C158.609 61.236 158.702 61.1888 158.721 61.0971C158.746 61.0041 158.693 60.8777 158.546 60.9124Z",fill:"black"}),(0,i.jsx)("path",{d:"M161.617 61.1082C161.614 61.318 161.466 61.4721 161.267 61.4707C161.053 61.4694 160.899 61.2957 160.906 61.0638C160.912 60.8624 161.062 60.7069 161.248 60.711C161.441 60.7166 161.62 60.9082 161.617 61.1082ZM161.425 61.1027C161.425 60.9957 161.368 60.9235 161.28 60.9235C161.225 60.9235 161.134 60.9652 161.134 61.0791C161.134 61.2777 161.28 61.2666 161.28 61.2666C161.357 61.2638 161.425 61.2319 161.425 61.1027Z",fill:"black"})]}),(0,i.jsx)("rect",{x:"125.259",y:"90.4347",width:"43.186",height:"23.7889",rx:"2.01291",fill:"#FFE8A3",stroke:"black",strokeWidth:"0.365983"}),(0,i.jsx)("rect",{x:"131.662",y:"100.132",width:"17.9332",height:"4.3918",fill:"black",fillOpacity:"0.2"}),(0,i.jsx)("circle",{cx:"158.562",cy:"102.514",r:"5.48975",fill:"white",stroke:"black",strokeWidth:"0.365983"}),(0,i.jsxs)("g",{clipPath:"url(#clip5_351_43276)",children:[(0,i.jsx)("path",{d:"M155.773 101.196C156.115 100.794 156.49 100.41 156.904 100.084C157.192 99.8563 157.291 99.8449 157.45 99.8017C157.493 99.7903 157.532 99.7636 157.568 99.7369C159.115 98.6453 161.086 99.4192 161.467 101.346C161.72 102.624 161.068 103.894 159.947 104.412C159.93 104.421 159.903 104.424 159.894 104.437C159.672 104.786 159.219 104.92 158.943 104.989C158.887 105.009 158.844 105.068 158.793 105.106C158.754 105.135 158.715 105.167 158.67 105.187C157.213 105.863 155.646 104.958 155.303 103.462C155.254 103.251 155.042 101.977 155.773 101.196ZM158.809 104.331C159.328 104.328 159.668 104.243 159.971 104.077C161.433 103.275 161.651 101.097 160.365 100.033C159.628 99.4243 158.685 99.3213 157.857 99.9046C156.872 100.597 156.515 102.017 157.066 103.089C157.463 103.861 158.092 104.286 158.809 104.331ZM159.306 104.66C159.369 104.637 159.378 104.62 159.368 104.613C159.368 104.613 159.341 104.613 159.297 104.614C158.153 104.701 157.293 104.246 156.783 103.22C156.285 102.219 156.406 101.235 156.994 100.293C156.947 100.316 156.909 100.344 156.875 100.376C156.082 101.094 155.848 102.31 156.305 103.35C156.727 104.309 157.613 104.878 158.609 104.807C158.843 104.791 159.073 104.711 159.306 104.66ZM155.947 101.363C155.948 101.327 155.914 101.372 155.909 101.379C155.891 101.403 155.873 101.428 155.858 101.454C155.648 101.807 155.517 102.189 155.5 102.6C155.458 103.535 155.786 104.31 156.577 104.839C157.103 105.191 157.688 105.263 158.299 105.073C157.406 104.983 156.709 104.568 156.239 103.803C155.769 103.041 155.694 102.223 155.947 101.363Z",fill:"black"}),(0,i.jsx)("path",{d:"M159.774 102.178C159.95 102.185 160.007 102.276 159.95 102.441C159.808 102.848 159.407 103.046 158.999 102.904C158.758 102.819 158.568 102.664 158.438 102.442C158.337 102.272 158.382 102.174 158.579 102.162C158.785 102.148 159.583 102.171 159.774 102.178ZM159.735 102.376C159.384 102.376 159.042 102.376 158.697 102.376C159.048 102.784 159.566 102.792 159.735 102.376Z",fill:"black"}),(0,i.jsx)("path",{d:"M158.345 101.458C158.346 101.656 158.155 101.836 157.947 101.835C157.765 101.834 157.638 101.67 157.637 101.496C157.634 101.322 157.812 101.15 158.008 101.145C158.196 101.139 158.345 101.276 158.345 101.458ZM157.964 101.332C157.87 101.347 157.84 101.436 157.848 101.503C157.858 101.601 157.932 101.625 157.978 101.627C158.021 101.628 158.106 101.585 158.124 101.501C158.147 101.416 158.098 101.3 157.964 101.332Z",fill:"black"}),(0,i.jsx)("path",{d:"M160.773 101.511C160.771 101.703 160.635 101.844 160.453 101.843C160.257 101.841 160.116 101.683 160.123 101.47C160.128 101.286 160.265 101.144 160.435 101.148C160.612 101.153 160.776 101.328 160.773 101.511ZM160.598 101.506C160.598 101.408 160.546 101.342 160.465 101.342C160.415 101.342 160.331 101.38 160.331 101.484C160.331 101.666 160.465 101.656 160.465 101.656C160.536 101.653 160.598 101.624 160.598 101.506Z",fill:"black"})]}),(0,i.jsx)("path",{className:nf()(iQ,i4),d:"M147.77 78.1765C147.77 77.9744 147.606 77.8105 147.404 77.8105C147.202 77.8105 147.038 77.9744 147.038 78.1765H147.77ZM147.145 86.1209C147.288 86.2639 147.52 86.2639 147.663 86.1209L149.992 83.7918C150.135 83.6489 150.135 83.4172 149.992 83.2743C149.849 83.1313 149.617 83.1313 149.474 83.2743L147.404 85.3446L145.333 83.2743C145.191 83.1313 144.959 83.1313 144.816 83.2743C144.673 83.4172 144.673 83.6489 144.816 83.7918L147.145 86.1209ZM147.038 78.1765V85.8622H147.77V78.1765H147.038Z",fill:"black"}),(0,i.jsx)("path",{d:"M147.77 118.432C147.77 118.23 147.606 118.066 147.404 118.066C147.202 118.066 147.038 118.23 147.038 118.432H147.77ZM147.145 126.376C147.288 126.519 147.52 126.519 147.663 126.376L149.992 124.047C150.135 123.904 150.135 123.673 149.992 123.53C149.849 123.387 149.617 123.387 149.474 123.53L147.404 125.6L145.333 123.53C145.191 123.387 144.959 123.387 144.816 123.53C144.673 123.673 144.673 123.904 144.816 124.047L147.145 126.376ZM147.038 118.432V126.118H147.77V118.432H147.038Z",fill:"black"}),(0,i.jsxs)("defs",{children:[(0,i.jsx)("clipPath",{id:"clip0_351_43276",children:(0,i.jsx)("rect",{width:"7.31966",height:"7.31966",fill:"white",transform:"translate(56.6428 98.1511)"})}),(0,i.jsx)("clipPath",{id:"clip1_351_43276",children:(0,i.jsx)("rect",{width:"7.31966",height:"7.31966",fill:"white",transform:"translate(55.1821 57.8955)"})}),(0,i.jsx)("clipPath",{id:"clip2_351_43276",children:(0,i.jsx)("rect",{width:"7.31966",height:"7.31966",fill:"white",transform:"translate(105.685 57.8955)"})}),(0,i.jsx)("clipPath",{id:"clip3_351_43276",children:(0,i.jsx)("rect",{width:"7.31966",height:"7.31966",fill:"white",transform:"translate(107.148 11.4153)"})}),(0,i.jsx)("clipPath",{id:"clip4_351_43276",children:(0,i.jsx)("rect",{width:"8",height:"8",fill:"white",transform:"translate(155 58)"})}),(0,i.jsx)("clipPath",{id:"clip5_351_43276",children:(0,i.jsx)("rect",{width:"7.31966",height:"7.31966",fill:"white",transform:"translate(154.719 98.6667)"})})]})]})}function i8(e){return(0,i.jsxs)("svg",{width:"136",viewBox:"0 0 196 122",fill:"none",className:nf()(iZ,{[iJ]:e.hovered}),children:[(0,i.jsx)("rect",{x:"27.1929",y:"3.19293",width:"69.0706",height:"15.0489",fill:"black",stroke:"black",strokeWidth:"0.38587"}),(0,i.jsx)("rect",{x:"99.7337",y:"3.19293",width:"69.0706",height:"15.0489",fill:"black",stroke:"black",strokeWidth:"0.38587"}),(0,i.jsx)("rect",{x:"99.7337",y:"23.2581",width:"69.0706",height:"15.0489",rx:"2.12228",fill:"#BDE3FF",stroke:"black",strokeWidth:"0.38587"}),(0,i.jsx)("rect",{x:"27.1929",y:"43.3228",width:"99.1685",height:"15.0489",rx:"2.12228",fill:"#E4CCFF",stroke:"black",strokeWidth:"0.38587"}),(0,i.jsx)("rect",{x:"27.1929",y:"103.518",width:"99.1685",height:"15.0489",rx:"2.12228",fill:"#FFE8A3",stroke:"black",strokeWidth:"0.38587"}),(0,i.jsx)("rect",{x:"76.5833",y:"63.3882",width:"92.2228",height:"15.0489",rx:"2.12228",fill:"#BDE3FF",stroke:"black",strokeWidth:"0.38587"}),(0,i.jsx)("rect",{x:"83.3374",y:"68.5977",width:"25.8533",height:"4.63043",fill:"black",fillOpacity:"0.2"}),(0,i.jsx)("rect",{x:"32.7886",y:"108.728",width:"32.0272",height:"4.63043",fill:"black",fillOpacity:"0.2"}),(0,i.jsx)("rect",{x:"33.561",y:"48.5325",width:"31.2554",height:"4.63043",fill:"black",fillOpacity:"0.2"}),(0,i.jsx)("rect",{x:"104.947",y:"28.4675",width:"21.6087",height:"4.63043",fill:"black",fillOpacity:"0.2"}),(0,i.jsx)("path",{d:"M161.035 74.752C160.165 74.7255 159.449 74.5471 158.764 74.2317C158.546 74.1315 158.317 74.0549 158.095 73.9694C157.8 73.8559 157.542 73.682 157.409 73.3946C157.106 72.7358 156.787 72.0785 156.552 71.3932C156.332 70.755 156.468 70.1154 156.863 69.5701C157.169 69.1471 157.355 68.6932 157.489 68.1921C157.654 67.5775 158.109 67.237 158.728 67.1044C159.013 67.044 159.283 67.0631 159.554 67.1678C159.806 67.2651 160.067 67.2813 160.33 67.209C160.82 67.0749 161.266 67.2135 161.704 67.4242C161.909 67.5215 162.118 67.6247 162.338 67.6733C163.061 67.8325 163.433 68.3085 163.532 69.0012C163.58 69.3446 163.552 69.7027 163.527 70.052C163.505 70.3571 163.537 70.646 163.635 70.9334C163.887 71.6791 163.848 72.4086 163.504 73.1205C163.293 73.5567 162.948 73.8515 162.529 74.077C162.236 74.2347 161.944 74.3968 161.66 74.5707C161.43 74.7107 161.184 74.7594 161.035 74.752ZM161.028 74.4779C161.255 74.4808 161.427 74.4086 161.658 74.2303C161.815 74.1109 162 74.0284 162.173 73.9311C162.376 73.8176 162.615 73.741 162.78 73.5862C163.481 72.9259 163.641 72.08 163.405 71.1942C163.253 70.6224 163.207 70.0741 163.274 69.4964C163.359 68.7418 162.946 68.1744 162.223 67.974C161.972 67.9047 161.732 67.7868 161.496 67.6733C161.194 67.5289 160.883 67.4036 160.55 67.4832C160.117 67.5863 159.704 67.5539 159.288 67.4139C159.153 67.3682 159 67.327 158.861 67.3432C158.304 67.408 157.913 67.7367 157.773 68.2584C157.622 68.8258 157.367 69.3195 157.051 69.8074C156.724 70.3144 156.637 70.8921 156.87 71.4742C157.1 72.0505 157.35 72.6194 157.598 73.1883C157.72 73.4713 157.936 73.6599 158.226 73.7675C158.5 73.8692 158.777 73.965 159.044 74.0844C159.632 74.3452 160.255 74.4337 161.028 74.4779Z",fill:"black"}),(0,i.jsx)("path",{d:"M160.398 72.4923C159.773 72.5188 159.2 72.4201 158.753 71.9543C158.677 71.8747 158.605 71.7863 158.559 71.6876C158.537 71.6419 158.518 71.5549 158.603 71.5078C158.656 71.4783 158.724 71.5092 158.767 71.5417C158.874 71.6212 158.964 71.7259 159.073 71.8055C159.586 72.1842 160.154 72.3021 160.768 72.1223C161.079 72.0324 161.296 71.804 161.487 71.5535C161.558 71.4621 161.636 71.3235 161.764 71.4193C161.893 71.5166 161.778 71.6345 161.711 71.7229C161.377 72.168 160.973 72.4952 160.398 72.4923Z",fill:"black"}),(0,i.jsx)("path",{d:"M162.357 70.0724C162.355 70.2522 162.218 70.3966 162.056 70.3937C161.888 70.3907 161.748 70.2419 161.753 70.0724C161.757 69.8867 161.887 69.7393 162.044 69.7422C162.221 69.7437 162.36 69.8896 162.357 70.0724Z",fill:"black"}),(0,i.jsx)("path",{d:"M158.503 70.3111C158.501 70.4909 158.364 70.6354 158.202 70.6324C158.034 70.6295 157.894 70.4806 157.899 70.3111C157.903 70.1254 158.033 69.9781 158.19 69.981C158.366 69.9825 158.504 70.1284 158.503 70.3111Z",fill:"black"}),(0,i.jsxs)("g",{clipPath:"url(#clip0_351_42930)",children:[(0,i.jsx)("path",{d:"M160.653 34.6219C159.783 34.5953 159.067 34.417 158.381 34.1016C158.163 34.0014 157.935 33.9248 157.712 33.8393C157.418 33.7258 157.16 33.5519 157.027 33.2645C156.723 32.6057 156.405 31.9484 156.169 31.2631C155.95 30.6249 156.085 29.9853 156.48 29.44C156.787 29.017 156.973 28.563 157.107 28.0619C157.272 27.4474 157.727 27.1069 158.346 26.9743C158.631 26.9139 158.9 26.933 159.171 27.0377C159.423 27.1349 159.684 27.1511 159.948 27.0789C160.437 26.9448 160.884 27.0833 161.322 27.2941C161.527 27.3914 161.736 27.4945 161.955 27.5432C162.679 27.7023 163.051 28.1784 163.149 28.8711C163.198 29.2145 163.17 29.5726 163.145 29.9219C163.123 30.227 163.155 30.5158 163.252 30.8032C163.504 31.549 163.466 32.2785 163.121 32.9904C162.91 33.4266 162.566 33.7214 162.147 33.9469C161.854 34.1046 161.562 34.2667 161.278 34.4406C161.048 34.5806 160.801 34.6292 160.653 34.6219ZM160.645 34.3477C160.872 34.3507 161.045 34.2785 161.276 34.1001C161.432 33.9808 161.618 33.8982 161.79 33.801C161.994 33.6875 162.233 33.6108 162.398 33.4561C163.099 32.7958 163.258 31.9499 163.023 31.0641C162.871 30.4923 162.825 29.944 162.891 29.3663C162.977 28.6117 162.564 28.0443 161.841 27.8438C161.59 27.7746 161.35 27.6567 161.114 27.5432C160.812 27.3987 160.501 27.2735 160.168 27.353C159.734 27.4562 159.322 27.4238 158.906 27.2838C158.771 27.2381 158.617 27.1968 158.479 27.213C157.922 27.2779 157.531 27.6065 157.391 28.1283C157.239 28.6957 156.984 29.1894 156.669 29.6772C156.342 30.1842 156.255 30.762 156.488 31.3441C156.718 31.9204 156.968 32.4893 157.216 33.0582C157.338 33.3411 157.553 33.5298 157.844 33.6374C158.118 33.7391 158.395 33.8349 158.662 33.9542C159.25 34.2151 159.873 34.3035 160.645 34.3477Z",fill:"black"}),(0,i.jsx)("path",{d:"M160.016 32.3624C159.391 32.3889 158.818 32.2902 158.371 31.8244C158.294 31.7449 158.222 31.6564 158.177 31.5577C158.154 31.512 158.135 31.425 158.221 31.3779C158.274 31.3484 158.342 31.3794 158.384 31.4118C158.492 31.4914 158.582 31.596 158.691 31.6756C159.204 32.0544 159.771 32.1723 160.386 31.9925C160.697 31.9026 160.913 31.6741 161.105 31.4236C161.176 31.3322 161.254 31.1937 161.382 31.2895C161.51 31.3867 161.395 31.5046 161.329 31.5931C160.994 32.0381 160.591 32.3653 160.016 32.3624Z",fill:"black"}),(0,i.jsx)("path",{d:"M161.974 29.9422C161.973 30.122 161.836 30.2665 161.674 30.2635C161.506 30.2606 161.366 30.1117 161.37 29.9422C161.375 29.7565 161.504 29.6092 161.662 29.6121C161.839 29.6136 161.977 29.7595 161.974 29.9422Z",fill:"black"}),(0,i.jsx)("path",{d:"M158.12 30.181C158.119 30.3608 157.982 30.5052 157.82 30.5023C157.652 30.4993 157.512 30.3505 157.516 30.181C157.521 29.9953 157.65 29.8479 157.808 29.8509C157.983 29.8523 158.122 29.9983 158.12 30.181Z",fill:"black"})]}),(0,i.jsxs)("g",{clipPath:"url(#clip1_351_42930)",children:[(0,i.jsx)("path",{d:"M114.675 114.329C114.278 114.328 114.256 114.309 114.215 113.917C114.185 113.631 114.162 113.343 114.154 113.056C114.112 111.501 114.087 109.946 114.039 108.393C114.025 107.893 114.025 107.893 114.462 107.849C114.934 107.802 115.45 107.815 115.924 107.803C117.613 107.764 119.304 107.73 120.993 107.694C121.058 107.693 121.127 107.697 121.183 107.703C121.305 107.716 121.319 107.809 121.321 107.868C121.332 108.088 121.311 108.309 121.311 108.53C121.308 110.144 121.308 111.758 121.307 113.371C121.307 113.565 121.302 113.759 121.301 113.952C121.298 114.281 121.192 114.39 120.854 114.388C120.221 114.387 119.587 114.381 118.953 114.378C118.542 114.377 115.69 114.332 114.675 114.329ZM120.946 108.032L114.356 108.123C114.336 108.123 114.319 108.141 114.321 108.16C114.384 110.116 114.446 112.049 114.51 114.007C114.51 114.026 114.526 114.042 114.545 114.042H120.952C120.977 114.042 120.996 114.021 120.996 113.998V108.082C120.996 108.054 120.974 108.032 120.946 108.032Z",fill:"black"}),(0,i.jsx)("path",{d:"M117.683 112.39C117.071 112.373 116.501 112.219 116.016 111.83C115.935 111.765 115.826 111.613 115.852 111.563C115.929 111.42 116.057 111.56 116.151 111.608C117.205 112.155 118.252 112.161 119.295 111.585C119.361 111.548 119.432 111.519 119.504 111.499C119.535 111.492 119.577 111.488 119.607 111.536C119.628 111.567 119.616 111.617 119.599 111.645C119.568 111.692 119.522 111.734 119.476 111.769C118.953 112.188 118.358 112.403 117.683 112.39Z",fill:"black"}),(0,i.jsx)("path",{d:"M117.349 109.66C117.133 110.082 116.915 110.502 116.696 110.922C116.68 110.953 116.576 111.096 116.462 111.038C116.421 111.018 116.384 110.978 116.384 110.884C116.384 110.836 116.405 110.78 116.427 110.735C116.627 110.338 116.829 109.942 117.034 109.548C117.063 109.492 117.102 109.433 117.152 109.398C117.193 109.369 117.267 109.354 117.311 109.37C117.469 109.426 117.373 109.615 117.349 109.66Z",fill:"black"}),(0,i.jsx)("path",{d:"M119.47 109.498C119.606 109.477 119.652 109.594 119.618 109.695C119.59 109.784 119.551 109.871 119.507 109.952C119.342 110.248 119.174 110.543 119.003 110.835C118.953 110.922 118.885 111.016 118.766 110.959C118.632 110.894 118.682 110.776 118.73 110.686C118.915 110.341 119.103 109.998 119.299 109.659C119.339 109.589 119.401 109.498 119.47 109.498Z",fill:"black"})]}),(0,i.jsx)("path",{d:"M66.4764 69.1441C66.5074 69.1087 66.5118 69.0557 66.4853 69.0159C66.2111 68.6622 65.9414 68.3306 65.6894 67.9857C65.4064 67.5966 65.4816 67.2959 65.9459 67.2031C67.2679 66.9334 68.5899 66.646 69.9296 66.4912C70.8138 66.394 70.9819 66.4205 70.8802 67.464C70.7608 68.6975 70.6105 69.6924 70.4336 70.9171C70.1727 72.7033 70.1064 72.92 69.7704 72.7431C69.6908 72.6989 69.4653 72.5795 69.3017 72.4381C69.1072 72.27 68.8728 72.1064 68.7623 71.9871C68.0902 72.973 67.5597 73.5478 66.7771 74.2729C65.4241 75.8028 62.873 76.0327 60.9187 74.3393C60.2953 73.7999 59.694 73.2383 59.0838 72.6857C58.1067 71.8014 56.9704 71.6289 55.7987 72.1418C54.9675 72.5044 54.2026 73.0261 53.4332 73.5125C52.0626 74.3791 50.6168 74.8787 48.9809 74.5161C48.6271 74.4365 48.2823 74.2818 47.9507 74.1226C47.4466 73.8794 47.2123 73.4727 47.2079 72.8935C47.2034 71.6289 47.1239 70.36 47.146 69.0955C47.1636 68.1449 47.3847 67.9945 48.3265 68.1625C50.1967 68.4897 51.9565 68.136 53.6631 67.3623C54.8039 66.845 55.9844 66.478 57.2445 66.3365C59.0175 66.2039 61.1486 66.8715 62.5856 68.4499C63.178 69.0999 63.9651 69.5553 64.8361 69.6879C65.4595 69.7719 65.8972 69.7321 66.4764 69.1441ZM66.4013 67.8265C66.64 68.1714 66.9009 68.4853 67.0777 68.839C67.1706 69.0291 67.3209 69.206 67.1131 69.5155C66.5737 70.3114 65.3888 70.8552 64.4381 70.5545C63.912 70.3909 63.4035 70.1124 62.9525 69.794C62.1876 69.2635 61.5112 68.6003 60.7286 68.1095C60.1626 67.7513 59.5038 67.4816 58.8495 67.3446C57.4832 67.0572 56.148 67.3578 54.879 67.8751C52.6993 68.7683 50.5283 69.6437 47.986 68.9142C47.986 70.1124 47.9949 71.2399 47.9816 72.3629C47.9728 73.3666 47.8357 73.2472 48.8349 73.5611C48.9853 73.6097 49.14 73.6495 49.2948 73.6716C50.6831 73.8794 51.8813 73.4019 53.022 72.6635C53.756 72.186 54.4899 71.682 55.2814 71.315C56.9969 70.5192 58.5134 70.8685 59.8443 72.2037C60.4146 72.7741 61.0292 73.3091 61.6836 73.7822C62.8022 74.5913 64.0225 75.1617 65.5037 74.3304C66.7284 73.5169 67.6304 72.6812 68.2317 71.3504C68.4837 70.7933 68.5368 70.8198 68.9613 71.2708C69.0983 71.4167 69.0983 71.4167 69.3592 71.6643C69.5537 71.9031 69.5626 71.6687 69.5758 71.483C69.7925 70.0151 69.9517 68.6489 70.1772 67.1235C68.8773 67.3623 67.6702 67.5878 66.4013 67.8265Z",fill:"black"}),(0,i.jsx)("rect",{x:"27.1929",y:"23.2581",width:"69.0706",height:"15.0489",rx:"2.12228",fill:"#E4CCFF",stroke:"black",strokeWidth:"0.38587",className:nf()(iQ,i3)}),(0,i.jsx)("rect",{x:"33.561",y:"29.2361",width:"21.6087",height:"4.63043",fill:"black",fillOpacity:"0.2",className:nf()(iQ,i3)}),(0,i.jsxs)("g",{clipPath:"url(#clip2_351_42930)",className:nf()(iQ,i3),children:[(0,i.jsx)("path",{d:"M83.8767 30.6015C83.9224 29.4063 84.425 28.2258 85.6055 27.4048C85.8988 27.2015 86.2466 27.0688 86.5841 26.9406C88.4322 26.2391 90.6842 27.508 91.1691 29.8013C91.514 31.4313 91.1102 32.8682 89.8265 33.9662C88.0785 35.4621 85.4817 34.9124 84.3881 32.855C84.0506 32.2153 83.8797 31.5344 83.8767 30.6015ZM87.4345 34.3214C88.1817 34.3229 88.7919 34.1298 89.2797 33.7894C91.2001 32.4467 91.3519 29.4225 89.5759 27.8897C88.7668 27.1911 87.8265 27.0084 86.8111 27.2339C86.4957 27.3046 86.1906 27.4874 85.9209 27.6775C84.3247 28.805 83.9062 31.135 84.9968 32.8196C85.6025 33.7569 86.4588 34.2875 87.4345 34.3214Z",fill:"black"}),(0,i.jsx)("path",{d:"M86.9275 33.1983C86.9039 33.2381 86.8744 33.2779 86.8523 33.3133C86.7963 33.4032 86.7683 33.4356 86.6622 33.3987C86.5826 33.3531 86.5988 33.2528 86.6194 33.1983C86.6754 33.045 86.7491 32.8976 86.8346 32.7576C86.8685 32.7016 86.9348 32.6014 87.0041 32.6338C87.0572 32.6663 87.097 32.6854 87.0513 32.8402C87.0424 32.8696 87.0321 32.905 87.0174 32.9522C87.3829 33.1364 87.7572 33.157 88.1434 33.0642C88.7049 32.9286 89.2192 32.5056 89.5155 31.9854C89.6393 31.7672 89.6909 31.558 89.7586 31.2941C89.7734 31.2396 89.8132 31.1482 89.7881 31.132C89.7542 31.1114 89.713 31.0849 89.6643 31.0642C89.57 31.0259 89.5788 30.9552 89.598 30.9095C89.6304 30.8299 89.6923 30.8211 89.7306 30.8314C89.9502 30.8874 90.1669 30.9581 90.3806 31.0318C90.4101 31.0421 90.4499 31.0745 90.4351 31.1453C90.4189 31.219 90.3703 31.2322 90.3275 31.2396C90.2612 31.2514 90.189 31.2337 90.1006 31.2263C90.0726 31.3457 90.0475 31.471 90.0121 31.5919C89.7424 32.5321 89.1632 33.1688 88.1979 33.4164C87.8103 33.5152 87.4168 33.44 86.9275 33.1983Z",fill:"black"}),(0,i.jsx)("path",{d:"M88.892 29.5476C88.892 29.4312 88.8744 29.3089 88.8994 29.1984C88.9156 29.1276 88.9525 29.02 89.0497 29.0215C89.1441 29.023 89.2148 29.0922 89.2369 29.1541C89.3784 29.5565 89.4359 29.9736 89.3784 30.3966C89.374 30.51 89.2634 30.5778 89.2133 30.5778C89.1234 30.5778 89.0335 30.5174 89.0085 30.4128C88.9407 30.1298 88.8788 29.5491 88.892 29.5476Z",fill:"black"}),(0,i.jsx)("path",{d:"M85.772 29.5404C85.7793 29.4697 85.8235 29.3459 85.9296 29.3252C86.0417 29.2957 86.0815 29.4299 86.0947 29.4888C86.1581 29.7718 86.1419 29.7187 86.1743 30.1152C86.1772 30.1432 86.1876 30.6163 86.1758 30.7445C86.164 30.8801 86.0903 30.9479 86.024 30.9508C85.8987 30.9582 85.8589 30.8742 85.8309 30.7754C85.7439 30.4748 85.7027 30.1697 85.772 29.5404Z",fill:"black"})]}),(0,i.jsx)("rect",{x:"106.08",y:"83.0787",width:"62.5109",height:"15.0489",rx:"2.12228",fill:"#AFF4C6",stroke:"black",strokeWidth:"0.38587",className:nf()(iQ,i5)}),(0,i.jsx)("rect",{x:"112.062",y:"88.2883",width:"22.7663",height:"4.63043",fill:"black",fillOpacity:"0.2",className:nf()(iQ,i5)}),(0,i.jsxs)("defs",{children:[(0,i.jsx)("clipPath",{id:"clip0_351_42930",children:(0,i.jsx)("rect",{width:"8.48913",height:"8.48913",fill:"white",transform:"translate(155.496 26.5366)"})}),(0,i.jsx)("clipPath",{id:"clip1_351_42930",children:(0,i.jsx)("rect",{width:"8.48913",height:"8.48913",fill:"white",transform:"translate(113.435 106.797)"})}),(0,i.jsx)("clipPath",{id:"clip2_351_42930",children:(0,i.jsx)("rect",{width:"8.48913",height:"8.48913",fill:"white",transform:"translate(83.3374 26.5366)"})})]})]})}function i9(e){return(0,i.jsxs)("svg",{width:"136",viewBox:"0 0 196 136",fill:"none",className:nf()(iZ,{[iJ]:e.hovered}),children:[(0,i.jsx)("rect",{x:"27.172",y:"7.98674",width:"141.765",height:"41.2909",fill:"#E4CCFF"}),(0,i.jsxs)("g",{filter:"url(#filter0_d_351_120552)",children:[(0,i.jsx)("rect",{x:"63.4768",y:"13.321",width:"30.6241",height:"30.6241",fill:"#FFD45B"}),(0,i.jsx)("rect",{x:"63.6489",y:"13.4931",width:"30.28",height:"30.28",stroke:"black",strokeWidth:"0.344091"})]}),(0,i.jsx)("rect",{x:"67.6057",y:"17.4517",width:"22.0218",height:"4.12909",fill:"black",fillOpacity:"0.2"}),(0,i.jsx)("rect",{x:"67.6057",y:"23.3",width:"19.2691",height:"4.12909",fill:"black",fillOpacity:"0.2"}),(0,i.jsxs)("g",{filter:"url(#filter1_d_351_120552)",children:[(0,i.jsx)("rect",{x:"98.2268",y:"13.321",width:"30.6241",height:"30.6241",fill:"#FFD45B"}),(0,i.jsx)("rect",{x:"98.3989",y:"13.4931",width:"30.28",height:"30.28",stroke:"black",strokeWidth:"0.344091"})]}),(0,i.jsx)("rect",{x:"102.355",y:"17.4517",width:"22.0218",height:"4.12909",fill:"black",fillOpacity:"0.2"}),(0,i.jsx)("rect",{x:"102.355",y:"23.3",width:"19.2691",height:"4.12909",fill:"black",fillOpacity:"0.2"}),(0,i.jsxs)("g",{filter:"url(#filter2_d_351_120552)",children:[(0,i.jsx)("rect",{x:"132.977",y:"13.321",width:"30.6241",height:"30.6241",fill:"#FFD45B"}),(0,i.jsx)("rect",{x:"133.149",y:"13.4931",width:"30.28",height:"30.28",stroke:"black",strokeWidth:"0.344091"})]}),(0,i.jsx)("rect",{x:"137.109",y:"17.4517",width:"22.0218",height:"4.12909",fill:"black",fillOpacity:"0.2"}),(0,i.jsx)("rect",{x:"137.109",y:"23.3",width:"19.2691",height:"4.12909",fill:"black",fillOpacity:"0.2"}),(0,i.jsx)("rect",{x:"27.172",y:"7.98674",width:"141.765",height:"41.2909",stroke:"black",strokeWidth:"0.344091"}),(0,i.jsx)("rect",{x:"27.172",y:"55.1305",width:"141.765",height:"41.2909",fill:"#BDE3FF"}),(0,i.jsxs)("g",{filter:"url(#filter3_d_351_120552)",children:[(0,i.jsx)("rect",{x:"32.5081",y:"60.4646",width:"26.8391",height:"30.6241",fill:"white"}),(0,i.jsx)("rect",{x:"32.6801",y:"60.6366",width:"26.495",height:"30.28",stroke:"black",strokeWidth:"0.344091"})]}),(0,i.jsx)("rect",{x:"35.4333",y:"63.0461",width:"20.9895",height:"18.5809",fill:"#F5F5F5",stroke:"black",strokeWidth:"0.344091"}),(0,i.jsxs)("g",{filter:"url(#filter4_d_351_120552)",children:[(0,i.jsx)("rect",{x:"63.4768",y:"60.4646",width:"30.6241",height:"30.6241",fill:"#FFD45B"}),(0,i.jsx)("rect",{x:"63.6489",y:"60.6366",width:"30.28",height:"30.28",stroke:"black",strokeWidth:"0.344091"})]}),(0,i.jsx)("rect",{x:"67.6057",y:"64.5955",width:"22.0218",height:"4.12909",fill:"black",fillOpacity:"0.2"}),(0,i.jsx)("rect",{x:"67.6057",y:"70.4438",width:"19.2691",height:"4.12909",fill:"black",fillOpacity:"0.2"}),(0,i.jsxs)("g",{filter:"url(#filter5_d_351_120552)",children:[(0,i.jsx)("rect",{x:"98.2268",y:"60.4646",width:"30.6241",height:"30.6241",fill:"#FFD45B"}),(0,i.jsx)("rect",{x:"98.3989",y:"60.6366",width:"30.28",height:"30.28",stroke:"black",strokeWidth:"0.344091"})]}),(0,i.jsx)("rect",{x:"102.355",y:"64.5955",width:"22.0218",height:"4.12909",fill:"black",fillOpacity:"0.2"}),(0,i.jsx)("rect",{x:"102.355",y:"70.4438",width:"19.2691",height:"4.12909",fill:"black",fillOpacity:"0.2"}),(0,i.jsxs)("g",{clipPath:"url(#clip0_351_120552)",children:[(0,i.jsx)("path",{d:"M52.4628 72.139C52.4653 75.5713 50.0667 78.5645 46.8075 79.1817C46.4186 79.2545 45.9344 79.3649 45.4652 79.3423C43.9397 79.2746 42.7856 78.9007 41.6465 77.9398C40.0834 76.6175 39.3433 74.8813 39.3884 72.8616C39.4461 70.2497 40.5727 68.1497 42.8057 66.7597C44.8831 65.4651 47.0785 65.3396 49.2663 66.5113C51.2635 67.5801 52.4603 69.7429 52.4628 72.139ZM51.8631 72.2494C51.8631 72.1992 51.8606 72.149 51.8556 72.0988C51.8105 71.7074 51.7804 71.3135 51.7101 70.9297C51.1732 67.9741 48.4785 65.9945 45.558 66.3959C41.215 66.993 38.6809 72.1214 40.816 75.9527C41.9451 77.9774 44.5018 79.0864 46.4563 78.705C49.5423 78.1029 51.7879 75.3906 51.8631 72.2494Z",fill:"black"}),(0,i.jsx)("path",{d:"M42.6576 74.7006C44.424 75.9777 47.5 76.2537 49.0179 74.3719C49.038 74.3468 49.0581 74.3268 49.0506 74.3217C48.9778 74.1812 48.7495 74.0081 48.9276 73.8551C49.1108 73.697 49.2563 73.8952 49.3767 74.0156C49.5524 74.1913 49.7305 74.3694 49.876 74.5701C49.9362 74.6554 50.0767 74.7934 49.9362 74.9139C49.8158 75.0318 49.7054 74.9716 49.5624 74.8637C49.5047 74.821 49.442 74.7658 49.4018 74.7332C49.2061 74.9139 49.033 75.0895 48.8448 75.2501C47.7384 76.196 46.4387 76.4067 45.0512 76.1884C44.0827 76.0354 43.1895 75.6741 42.4092 75.0594C42.3867 75.0418 42.3089 74.959 42.2738 74.9565C42.2035 74.9515 42.1859 74.9992 42.0931 75.0318C42.0279 75.0544 41.9902 75.1221 41.8598 74.9841C41.7519 74.8737 41.8272 74.7583 41.8773 74.7182C42.1408 74.5074 42.4193 74.3142 42.7053 74.1336C42.758 74.101 42.8784 74.0734 42.9386 74.1787C43.0039 74.2916 42.9437 74.3518 42.9035 74.4146C42.8433 74.5074 42.7505 74.5827 42.6551 74.6755C42.6526 74.6855 42.6526 74.6956 42.6576 74.7006Z",fill:"black"}),(0,i.jsx)("path",{d:"M49.5523 72.5779C49.5824 72.5804 49.6151 72.5729 49.6427 72.5603C49.8384 72.4575 49.8308 72.1639 49.8308 71.9858C49.8283 71.6094 49.7832 71.2958 49.7807 70.9345C49.7807 70.7865 49.7731 70.6284 49.8133 70.4904C49.8384 70.4051 49.9488 70.2972 50.0265 70.2922C50.1043 70.2872 50.2247 70.3223 50.2624 70.4603C50.4054 71.0549 50.4104 71.8403 50.3025 72.3496C50.2122 72.7786 49.8308 72.9894 49.5047 72.9919C49.1509 72.9944 48.762 72.7385 48.6566 72.3044C48.5437 71.8377 48.5362 71.3435 48.486 70.8617C48.4835 70.8341 48.4835 70.7438 48.486 70.7162C48.5061 70.5481 48.5663 70.4528 48.7821 70.4653C48.9401 70.4703 48.9853 70.6962 49.0154 70.8266C49.0681 71.0574 49.0505 71.3033 49.0907 71.5392C49.1534 71.898 49.191 72.5528 49.5523 72.5779Z",fill:"black"}),(0,i.jsx)("path",{d:"M42.7832 70.9848C42.7983 70.8819 42.7807 70.7339 42.989 70.7013C43.1721 70.6737 43.2549 70.8593 43.2625 70.9471C43.3051 71.4414 43.3528 71.9407 43.3126 72.4325C43.275 72.8891 42.866 73.273 42.4972 73.3181C42.0732 73.3708 41.604 73.1124 41.4635 72.6257C41.333 72.1765 41.2778 71.6396 41.2804 71.2206C41.2804 71.1504 41.3029 71.0174 41.4309 70.9973C41.594 70.9622 41.6316 71.1077 41.6542 71.1855C41.7495 71.4991 41.7972 71.8253 41.8951 72.1389C41.9528 72.3246 42.0456 72.5128 42.1685 72.6583C42.3693 72.8941 42.6327 72.849 42.713 72.5529C42.7908 72.2619 42.7506 71.198 42.7832 70.9848Z",fill:"black"})]}),(0,i.jsx)("path",{d:"M97.2147 88.2858L97.2147 88.2858L95.4155 90.1223L95.8404 92.7175C95.8404 92.7175 95.8404 92.7175 95.8404 92.7175C95.9069 93.1235 95.4922 93.4743 95.107 93.2618L92.891 92.0416L90.675 93.2618L90.6749 93.2619L97.2147 88.2858ZM97.2147 88.2858C97.5016 87.9928 97.3551 87.4674 96.9341 87.4033L97.2147 88.2858ZM90.3664 90.1223L89.9415 92.7175L92.4384 84.6696L92.4383 84.6698C92.4383 84.6698 92.4383 84.6698 92.4382 84.6699L91.3279 87.0259L88.8479 87.4033C88.8479 87.4033 88.8479 87.4033 88.8479 87.4033C88.4269 87.4674 88.2803 87.9928 88.5673 88.2858L88.5673 88.2858L90.3664 90.1223Z",fill:"#FFC700",stroke:"black",strokeWidth:"0.344091"}),(0,i.jsx)("rect",{x:"27.172",y:"55.1305",width:"141.765",height:"41.2909",stroke:"black",strokeWidth:"0.344091"}),(0,i.jsx)("rect",{x:"27.172",y:"103.172",width:"141.765",height:"41.2909",fill:"#93E396"}),(0,i.jsxs)("g",{filter:"url(#filter6_d_351_120552)",children:[(0,i.jsx)("rect",{x:"32.5081",y:"108.506",width:"26.8391",height:"30.6241",fill:"white"}),(0,i.jsx)("rect",{x:"32.6801",y:"108.678",width:"26.495",height:"30.28",stroke:"black",strokeWidth:"0.344091"})]}),(0,i.jsx)("rect",{x:"35.4333",y:"111.088",width:"20.9895",height:"18.5809",fill:"#F5F5F5",stroke:"black",strokeWidth:"0.344091"}),(0,i.jsxs)("g",{clipPath:"url(#clip1_351_120552)",children:[(0,i.jsx)("path",{d:"M45.5755 113.495C47.3906 113.521 48.8594 114.261 50.2344 115.453C53.0677 117.912 53.2735 123.865 48.8125 126.552C45.7344 128.406 41.6458 127.526 39.6719 124.149C37.4896 120.417 39.2214 115.445 43.2344 113.925C43.987 113.638 44.7656 113.487 45.5755 113.495ZM51.6276 119.922C51.6693 118.594 51 117.055 49.8333 115.844C48.3386 114.294 46.4115 113.763 44.2891 114.255C40.3828 115.156 38.263 119.57 39.9349 123.261C41.1172 125.87 43.8958 127.331 46.5521 126.74C49.5443 126.073 51.6406 123.435 51.6276 119.922Z",fill:"black"}),(0,i.jsx)("path",{d:"M50.0078 122C49.2031 124.023 47.7682 125.206 45.5989 125.232C43.7396 125.253 42.3724 124.333 41.5417 122.617C41.4896 122.641 41.4271 122.672 41.3672 122.693C41.2812 122.724 41.2318 122.745 41.1536 122.646C41.1172 122.599 41.0599 122.516 41.1667 122.43C41.4297 122.213 41.7135 122.026 42 121.846C42.0443 121.818 42.1484 121.815 42.2083 121.906C42.2734 122.008 42.2318 122.073 42.1927 122.125C42.1198 122.221 42.0156 122.294 41.9114 122.385C42.9062 123.909 44.2318 124.825 46.1276 124.635C47.7995 124.469 49.0443 123.229 49.5 121.768C49.5208 121.703 49.4479 121.656 49.3776 121.57C49.2604 121.432 49.1797 121.409 49.3125 121.187C49.4088 121.049 49.5573 121.13 49.6432 121.174C49.9167 121.318 50.1875 121.476 50.4271 121.669C50.5208 121.745 50.6927 121.857 50.5807 122.057C50.4766 122.26 50.3333 122.128 50.1641 122.078C50.1172 122.057 50.0703 122.029 50.0078 122Z",fill:"black"}),(0,i.jsx)("path",{d:"M42.5313 117.878C42.6797 117.638 42.8412 117.448 43.1354 117.508C43.4167 117.565 43.5313 117.81 43.5339 118.036C43.5417 118.484 43.5339 118.945 43.4349 119.38C43.3334 119.828 43.125 120.255 42.9401 120.68C42.8099 120.979 42.6042 121.039 42.3802 120.82C41.6615 120.112 41.2266 119.263 41.2735 118.226C41.2865 117.932 41.4453 117.69 41.7396 117.591C42.0573 117.484 42.3021 117.63 42.5313 117.878ZM43.1094 117.927C43.1094 117.927 43.0521 117.844 42.9558 117.872C42.8828 117.867 42.8021 118.177 42.7552 118.341C42.711 118.495 42.7188 118.607 42.6094 118.625C42.4349 118.641 42.4479 118.492 42.375 118.419C42.3412 118.383 42.1771 117.919 41.9427 118.005C41.7917 118.06 41.7839 118.281 41.7917 118.414C41.8282 119.088 42.1354 119.667 42.5 120.286C42.8334 119.487 43.3308 118.414 43.1094 117.927Z",fill:"black"}),(0,i.jsx)("path",{d:"M48.4791 117.661C48.6692 117.555 48.8489 117.463 49.026 117.5C49.289 117.555 49.3411 117.831 49.3645 118.07C49.44 118.833 49.1093 119.479 48.7525 120.115C48.6718 120.258 48.5572 120.383 48.4817 120.531C48.2656 120.953 47.8932 120.875 47.6874 120.513C47.2578 119.75 47.013 118.911 47.0911 118.018C47.1197 117.677 47.2473 117.352 47.6249 117.263C48.0052 117.169 48.3359 117.409 48.4791 117.661ZM48.0104 120.148C48.0494 120.333 48.0885 120.19 48.1249 120.154C48.3854 119.763 48.6484 119.372 48.802 118.943C48.9218 118.607 49.2369 117.755 48.9062 117.841C48.8255 117.846 48.7421 118.094 48.6718 118.219C48.6145 118.318 48.4973 118.476 48.4479 118.484C48.2578 118.49 48.2812 118.318 48.2447 118.219C48.1588 117.995 48.1666 117.643 47.8463 117.685C47.5286 117.726 47.565 118.078 47.6067 118.307C47.7161 118.924 47.8723 119.536 48.0104 120.148Z",fill:"black"})]}),(0,i.jsxs)("g",{filter:"url(#filter7_d_351_120552)",children:[(0,i.jsx)("rect",{x:"63.4768",y:"108.506",width:"30.6241",height:"30.6241",fill:"#FFD45B"}),(0,i.jsx)("rect",{x:"63.6489",y:"108.678",width:"30.28",height:"30.28",stroke:"black",strokeWidth:"0.344091"})]}),(0,i.jsx)("rect",{x:"67.6057",y:"112.637",width:"22.0218",height:"4.12909",fill:"black",fillOpacity:"0.2"}),(0,i.jsx)("rect",{x:"67.6057",y:"118.485",width:"19.2691",height:"4.12909",fill:"black",fillOpacity:"0.2"}),(0,i.jsxs)("g",{filter:"url(#filter8_d_351_120552)",children:[(0,i.jsx)("rect",{x:"98.2268",y:"108.506",width:"30.6241",height:"30.6241",fill:"#FFD45B"}),(0,i.jsx)("rect",{x:"98.3989",y:"108.678",width:"30.28",height:"30.28",stroke:"black",strokeWidth:"0.344091"})]}),(0,i.jsx)("rect",{x:"102.355",y:"112.637",width:"22.0218",height:"4.12909",fill:"black",fillOpacity:"0.2"}),(0,i.jsx)("rect",{x:"102.355",y:"118.485",width:"19.2691",height:"4.12909",fill:"black",fillOpacity:"0.2"}),(0,i.jsxs)("g",{filter:"url(#filter9_d_351_120552)",children:[(0,i.jsx)("rect",{x:"134",y:"108.506",width:"30.6241",height:"30.6241",fill:"#FFD45B"}),(0,i.jsx)("rect",{x:"134.172",y:"108.678",width:"30.28",height:"30.28",stroke:"black",strokeWidth:"0.344091"})]}),(0,i.jsx)("rect",{x:"138.129",y:"112.637",width:"22.0218",height:"4.12909",fill:"black",fillOpacity:"0.2"}),(0,i.jsx)("rect",{x:"138.129",y:"118.485",width:"19.2691",height:"4.12909",fill:"black",fillOpacity:"0.2"}),(0,i.jsx)("rect",{x:"27.172",y:"103.172",width:"141.765",height:"41.2909",stroke:"black",strokeWidth:"0.344091"}),(0,i.jsx)("path",{d:"M163.058 5.32444L163.144 5.46819L163.29 5.38648L163.93 5.02854C164.401 4.76472 164.965 4.6956 165.497 4.83787C166.028 4.98013 166.482 5.32166 166.759 5.78594C167.036 6.25002 167.113 6.7986 166.976 7.31116C166.839 7.82371 166.498 8.26021 166.026 8.52392L166.026 8.52399L165.449 8.84723L165.449 8.84732L161.674 10.9565L159.121 6.67356C158.844 6.20954 158.767 5.66108 158.904 5.1487C159.041 4.63631 159.382 4.20002 159.854 3.93649C160.326 3.67286 160.889 3.60389 161.421 3.74625C161.952 3.8886 162.406 4.23014 162.682 4.69436L163.058 5.32444Z",fill:"#F24E1E",stroke:"black",strokeWidth:"0.344091"}),(0,i.jsxs)("g",{clipPath:"url(#clip2_351_120552)",children:[(0,i.jsx)("path",{d:"M50.4871 107.641C48.8069 109.488 47.7973 109.61 46.2305 108.164C44.1148 111.157 42.1849 111.774 39.8514 110.153C39.3857 111.079 38.7655 112.239 37.5921 112.305C36.4645 112.372 35.5675 111.561 35.5655 111.477C35.4727 112.106 34.6737 113.559 33.4639 113.686C32.2099 113.819 31.2714 113.252 30.5935 112.255C29.723 110.962 29.5512 109.451 29.3703 107.956C29.191 106.467 29.0468 104.962 28.982 103.463C28.9502 102.678 29.0635 101.875 29.1937 101.087C29.2925 100.431 29.6597 99.9338 30.3896 99.8121C31.1194 99.6905 31.6381 100.065 31.9285 100.641C32.3488 101.47 32.6502 102.369 32.9353 103.077C33.2923 102.692 33.636 101.824 34.3226 101.609C35.0214 101.392 35.4604 101.455 36.3429 102.413C36.466 102.004 36.5602 101.635 36.6897 101.277C36.8358 100.882 36.9849 100.473 37.1984 100.113C37.8619 99.0194 38.6917 99.0087 39.483 100.068C41.3417 97.8755 42.7542 97.6508 45.017 99.1989C45.1976 98.6844 45.3353 98.1548 45.5664 97.6599C45.9532 96.8325 46.466 96.1419 47.5332 96.2202C48.4276 96.284 49.1693 96.9204 49.4516 97.9734C49.6358 98.6678 49.71 99.3903 49.8425 100.137C50.3717 99.6633 50.906 99.2599 51.6015 99.843C51.9154 98.8326 52.1853 97.879 52.518 96.9418C52.6775 96.4977 52.9121 96.067 53.1866 95.691C53.8238 94.8256 54.8328 94.8797 55.2722 95.86C55.5988 96.6025 55.8035 97.4282 55.8874 98.2393C56.1186 100.567 56.1084 102.892 55.4407 105.164C55.1061 106.296 54.4433 107.24 53.5059 107.974C52.1712 109.011 51.4815 108.934 50.4871 107.641ZM39.1546 101.785C39.0891 101.528 38.9628 100.247 38.431 100.253C38.0747 100.207 37.9209 100.878 37.8281 101.226C37.5065 102.512 37.3242 103.834 36.9597 105.104C36.8457 105.497 36.6329 105.708 36.3764 105.748C36.1323 105.836 36.0697 105.286 36.0118 105.034C35.8691 104.375 35.8318 103.695 35.6418 103.054C35.5686 102.793 35.455 102.425 34.9767 102.437C34.7887 102.44 34.5019 102.539 34.3083 102.901C34.0965 103.293 33.9031 103.707 33.7862 104.14C33.5734 104.91 33.4662 105.712 33.2259 106.475C33.1403 106.751 33.0228 107.08 32.747 107.222C32.492 107.268 32.2728 107.149 32.1872 106.305C32.1341 105.818 32.0887 105.335 32.0157 104.847C31.8459 103.7 31.6608 102.544 31.3612 101.424C31.2831 101.119 31.078 100.495 30.4631 100.684C29.8482 100.874 29.9096 101.47 29.9595 101.945C29.9644 101.989 29.9784 102.044 29.9848 102.095C30.134 103.39 30.2893 104.683 30.4324 105.98C30.6126 107.625 30.698 109.282 30.9957 110.903C31.2384 112.233 32.1254 112.904 33.1276 112.829C34.0977 112.757 34.5588 112.118 34.7112 110.629C34.7807 109.935 34.8013 109.227 34.9106 108.536C34.9416 108.326 35.0266 107.947 35.3415 107.957C35.6613 108.012 35.7028 108.352 35.753 108.574C35.8707 109.136 35.8113 109.743 36.0098 110.264C36.1478 110.626 36.541 110.993 36.9117 111.146C37.3912 111.342 37.9451 111.194 38.2282 110.698C38.5189 110.182 38.8062 109.627 38.9192 109.052C39.3781 106.599 39.4945 104.13 39.1546 101.785ZM50.8522 100.321C50.6149 100.258 50.3557 100.923 50.2715 101.178C50.0578 101.792 49.9284 102.43 49.7147 103.044C49.647 103.237 49.5064 103.527 49.2543 103.533C48.9942 103.482 48.9645 103.366 48.8893 103.021C48.8485 102.837 48.8275 102.628 48.8218 102.427C48.7926 101.55 48.8153 100.673 48.7357 99.8021C48.6756 99.1606 48.5757 98.4902 48.3279 97.9031C48.1793 97.5509 47.7245 97.1208 47.3882 97.1028C47.0656 97.0877 46.6017 97.4861 46.4018 97.8234C46.0823 98.38 45.9086 99.0228 45.7102 99.6459C45.6547 99.8358 45.6715 100.105 45.7672 100.275C46.8416 102.238 46.9952 104.339 46.6722 106.483C46.563 107.2 46.9941 107.487 47.413 107.803C47.8581 108.144 48.4053 108.147 48.8005 107.76C49.2155 107.348 49.5459 106.834 49.8595 106.331C50.0246 106.061 50.0502 105.703 50.206 105.423C50.2847 105.273 50.5023 105.107 50.6476 105.115C50.7592 105.119 50.9256 105.362 50.9616 105.529C51.0227 105.793 50.986 106.082 51.0211 106.346C51.1198 107.062 51.2231 107.517 51.6431 107.735C51.8624 107.881 52.5903 107.395 52.9417 107.091C54.0901 106.088 54.7064 104.76 54.7639 103.255C54.8461 101.237 54.8412 99.2094 54.7797 97.1893C54.7667 96.7568 54.7833 95.881 54.1461 95.9074C53.7619 95.8041 53.4068 96.5518 53.3005 96.9498C52.8868 98.4345 52.594 99.9599 52.2232 101.46C52.1499 101.758 52.0432 102.358 51.7501 102.433C51.4493 102.477 51.3007 102.405 51.1703 101.488C51.1212 101.169 51.1439 100.292 50.8522 100.321ZM45.4285 102.079C45.2305 101.635 45.0085 100.996 44.6721 100.419C43.5398 98.484 41.2245 98.5104 40.1057 100.468C39.9544 100.741 39.8878 101.142 39.9537 101.45C40.4517 103.651 40.4271 105.869 40.2406 108.089C40.1474 109.225 40.646 109.852 41.8126 109.938C43.2636 110.041 44.5426 109.168 45.2218 107.602C45.9719 105.856 45.931 103.407 45.4285 102.079Z",fill:"black"}),(0,i.jsx)("path",{d:"M59.6396 92.9477C59.6565 93.5223 59.7124 95.0885 59.7076 96.163C59.6942 97.6363 59.661 99.1083 59.5957 100.582C59.5728 101.154 59.472 101.726 59.3543 102.283C59.2411 102.806 58.8621 103.105 58.3303 103.111C57.7603 103.12 57.3065 102.872 57.0987 102.313C57.001 102.059 56.917 101.781 56.9124 101.509C56.9306 98.9612 57.0382 96.5596 57.0869 94.004C57.0898 93.6845 57.1071 93.2183 57.1818 92.9C57.328 92.2512 57.6344 91.8216 58.4066 91.8907C59.0794 91.9528 59.6227 92.3732 59.6396 92.9477ZM58.2221 102.332C58.2955 102.339 58.3705 102.352 58.4373 102.283C58.5789 102.175 58.5611 102.004 58.5634 101.861C58.6363 98.9672 58.7107 96.0798 58.7514 93.1879C58.7564 92.9785 58.7327 92.5553 58.3965 92.5632C57.9562 92.5458 58.0021 93.3861 57.9966 93.7713C57.9589 96.3956 57.9427 99.0275 57.9433 101.649C57.9446 101.882 57.9833 102.263 58.2221 102.332Z",fill:"black"}),(0,i.jsx)("path",{d:"M59.9054 105.251C60.1529 106.345 59.539 107.276 58.6658 107.474C57.8782 107.649 57.0496 107.055 56.8431 106.171C56.6145 105.176 57.0259 104.394 57.9922 104.179C58.8348 103.99 59.7065 104.372 59.9054 105.251ZM57.6513 105.847C57.8325 106.555 58.3501 106.468 58.4661 106.438C58.8092 106.305 59.0463 106.062 58.7828 105.388C58.71 105.205 58.5347 105.003 58.249 105.031C57.696 105.081 57.5609 105.519 57.6513 105.847Z",fill:"black"}),(0,i.jsx)("path",{d:"M42.9659 102.547C42.9771 102.921 43.0739 105.537 43.0732 107.085C43.0759 107.299 42.9866 107.738 42.5969 107.74C42.2333 107.768 42.0919 107.343 42.0754 107.126C41.9862 105.607 41.9396 104.078 41.9404 102.555C41.9392 102.322 42.0882 101.913 42.4165 101.848C42.8885 101.812 42.9547 102.172 42.9659 102.547Z",fill:"black"})]}),(0,i.jsxs)("g",{filter:"url(#filter10_d_351_120552)",className:nf()(iQ,i2),children:[(0,i.jsx)("rect",{x:"132.649",y:"60.1077",width:"30.6241",height:"30.6241",fill:"#FFD45B"}),(0,i.jsx)("rect",{x:"132.821",y:"60.2797",width:"30.28",height:"30.28",stroke:"black",strokeWidth:"0.344091"})]}),(0,i.jsx)("rect",{x:"136.782",y:"64.2385",width:"22.0218",height:"4.12909",fill:"black",fillOpacity:"0.2",className:nf()(iQ,i2)}),(0,i.jsx)("rect",{x:"136.782",y:"70.0869",width:"19.2691",height:"4.12909",fill:"black",fillOpacity:"0.2",className:nf()(iQ,i2)}),(0,i.jsxs)("g",{filter:"url(#filter11_d_351_120552)",className:nf()(iQ,i1),children:[(0,i.jsx)("rect",{x:"32.7107",y:"12.5178",width:"26.8391",height:"30.6241",fill:"white"}),(0,i.jsx)("rect",{x:"32.8827",y:"12.6899",width:"26.495",height:"30.28",stroke:"black",strokeWidth:"0.344091"})]}),(0,i.jsx)("rect",{x:"35.6359",y:"15.0993",width:"20.9895",height:"18.5809",fill:"#F5F5F5",stroke:"black",strokeWidth:"0.344091",className:nf()(iQ,i1)}),(0,i.jsx)("path",{className:nf()(iQ,i1),d:"M40.2485 22.3512C41.0198 21.4451 41.8657 20.5791 42.8005 19.8422C43.4514 19.3289 43.6751 19.3031 44.0335 19.2056C44.131 19.1798 44.217 19.1196 44.3002 19.0594C47.7898 16.5963 52.2372 18.3425 53.0974 22.6896C53.668 25.5742 52.1971 28.4387 49.668 29.6086C49.6278 29.6287 49.5676 29.6345 49.5476 29.666C49.0458 30.4517 48.025 30.7556 47.4027 30.9105C47.2766 30.9563 47.1791 31.0882 47.0644 31.1743C46.9755 31.2402 46.8866 31.3119 46.7862 31.3578C43.4973 32.8832 39.9618 30.8416 39.1876 27.4638C39.0786 26.9878 38.5997 24.1147 40.2485 22.3512ZM47.0988 29.4251C48.2716 29.4194 49.0372 29.2273 49.7225 28.8516C53.02 27.0423 53.5132 22.1275 50.6114 19.7275C48.9483 18.354 46.8206 18.1217 44.9511 19.4379C42.7288 21.0006 41.9231 24.2036 43.1675 26.6237C44.0622 28.3642 45.4816 29.3248 47.0988 29.4251ZM48.2199 30.1678C48.3633 30.1162 48.3834 30.0789 48.3604 30.0617C48.3604 30.0617 48.3002 30.0617 48.1999 30.0646C45.6192 30.2596 43.6779 29.233 42.5281 26.919C41.4041 24.6595 41.6765 22.4401 43.0041 20.3153C42.898 20.3669 42.812 20.43 42.7346 20.5017C40.9453 22.1218 40.4177 24.8659 41.45 27.2115C42.4019 29.3764 44.4005 30.661 46.6486 30.5004C47.1762 30.4631 47.6952 30.2825 48.2199 30.1678ZM40.6413 22.7297C40.6442 22.6465 40.5668 22.7498 40.5553 22.7641C40.5152 22.8186 40.475 22.8759 40.4406 22.9333C39.9675 23.7304 39.6722 24.5935 39.632 25.5197C39.5374 27.6301 40.2772 29.3793 42.0636 30.5721C43.2507 31.3664 44.5697 31.5298 45.9489 31.0997C43.9331 30.8961 42.3618 29.9613 41.3009 28.2352C40.2399 26.5147 40.0707 24.6681 40.6413 22.7297Z",fill:"black"}),(0,i.jsx)("path",{className:nf()(iQ,i1),d:"M49.2781 24.5675C49.6738 24.5819 49.8028 24.7883 49.6738 25.1611C49.3526 26.0787 48.4494 26.526 47.529 26.2048C46.9841 26.0127 46.5569 25.6629 46.2616 25.164C46.035 24.7797 46.1354 24.5589 46.5798 24.5303C47.0444 24.4987 48.8451 24.5503 49.2781 24.5675ZM49.1892 25.0149C48.3978 25.0149 47.6265 25.0149 46.8465 25.0149C47.6379 25.9353 48.8078 25.9525 49.1892 25.0149Z",fill:"black"}),(0,i.jsx)("path",{className:nf()(iQ,i1),d:"M46.0523 22.9417C46.0552 23.389 45.625 23.7962 45.1548 23.7933C44.7447 23.7905 44.458 23.4206 44.4551 23.0277C44.4494 22.6349 44.8508 22.2478 45.2924 22.2363C45.7168 22.222 46.0523 22.5317 46.0523 22.9417ZM45.1921 22.6578C44.9799 22.6922 44.9139 22.893 44.9311 23.0449C44.9541 23.2657 45.1204 23.3202 45.2236 23.3231C45.3211 23.3259 45.5132 23.2284 45.5534 23.0392C45.605 22.8471 45.496 22.5861 45.1921 22.6578Z",fill:"black"}),(0,i.jsx)("path",{className:nf()(iQ,i1),d:"M51.5318 23.0622C51.5261 23.4952 51.2193 23.8135 50.8092 23.8106C50.3676 23.8077 50.0494 23.4493 50.0637 22.9704C50.0752 22.5547 50.3848 22.2335 50.7691 22.2421C51.1677 22.2536 51.5376 22.6493 51.5318 23.0622ZM51.1361 23.0507C51.1361 22.8299 51.0185 22.6808 50.835 22.6808C50.7232 22.6808 50.534 22.7669 50.534 23.002C50.534 23.412 50.835 23.3891 50.835 23.3891C50.9956 23.3833 51.1361 23.3174 51.1361 23.0507Z",fill:"black"}),(0,i.jsxs)("defs",{children:[(0,i.jsxs)("filter",{id:"filter0_d_351_120552",x:"63.4768",y:"13.321",width:"31.3122",height:"31.3122",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,i.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,i.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,i.jsx)("feOffset",{dx:"0.688182",dy:"0.688182"}),(0,i.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,i.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),(0,i.jsx)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_351_120552"}),(0,i.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_351_120552",result:"shape"})]}),(0,i.jsxs)("filter",{id:"filter1_d_351_120552",x:"98.2268",y:"13.321",width:"31.3122",height:"31.3122",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,i.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,i.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,i.jsx)("feOffset",{dx:"0.688182",dy:"0.688182"}),(0,i.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,i.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),(0,i.jsx)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_351_120552"}),(0,i.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_351_120552",result:"shape"})]}),(0,i.jsxs)("filter",{id:"filter2_d_351_120552",x:"132.977",y:"13.321",width:"31.3122",height:"31.3122",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,i.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,i.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,i.jsx)("feOffset",{dx:"0.688182",dy:"0.688182"}),(0,i.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,i.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),(0,i.jsx)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_351_120552"}),(0,i.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_351_120552",result:"shape"})]}),(0,i.jsxs)("filter",{id:"filter3_d_351_120552",x:"32.5081",y:"60.4646",width:"27.5273",height:"31.3122",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,i.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,i.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,i.jsx)("feOffset",{dx:"0.688182",dy:"0.688182"}),(0,i.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,i.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),(0,i.jsx)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_351_120552"}),(0,i.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_351_120552",result:"shape"})]}),(0,i.jsxs)("filter",{id:"filter4_d_351_120552",x:"63.4768",y:"60.4646",width:"31.3122",height:"31.3122",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,i.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,i.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,i.jsx)("feOffset",{dx:"0.688182",dy:"0.688182"}),(0,i.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,i.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),(0,i.jsx)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_351_120552"}),(0,i.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_351_120552",result:"shape"})]}),(0,i.jsxs)("filter",{id:"filter5_d_351_120552",x:"98.2268",y:"60.4646",width:"31.3122",height:"31.3122",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,i.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,i.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,i.jsx)("feOffset",{dx:"0.688182",dy:"0.688182"}),(0,i.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,i.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),(0,i.jsx)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_351_120552"}),(0,i.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_351_120552",result:"shape"})]}),(0,i.jsxs)("filter",{id:"filter6_d_351_120552",x:"32.5081",y:"108.506",width:"27.5273",height:"31.3122",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,i.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,i.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,i.jsx)("feOffset",{dx:"0.688182",dy:"0.688182"}),(0,i.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,i.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),(0,i.jsx)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_351_120552"}),(0,i.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_351_120552",result:"shape"})]}),(0,i.jsxs)("filter",{id:"filter7_d_351_120552",x:"63.4768",y:"108.506",width:"31.3122",height:"31.3122",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,i.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,i.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,i.jsx)("feOffset",{dx:"0.688182",dy:"0.688182"}),(0,i.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,i.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),(0,i.jsx)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_351_120552"}),(0,i.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_351_120552",result:"shape"})]}),(0,i.jsxs)("filter",{id:"filter8_d_351_120552",x:"98.2268",y:"108.506",width:"31.3122",height:"31.3122",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,i.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,i.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,i.jsx)("feOffset",{dx:"0.688182",dy:"0.688182"}),(0,i.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,i.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),(0,i.jsx)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_351_120552"}),(0,i.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_351_120552",result:"shape"})]}),(0,i.jsxs)("filter",{id:"filter9_d_351_120552",x:"134",y:"108.506",width:"31.3122",height:"31.3122",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,i.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,i.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,i.jsx)("feOffset",{dx:"0.688182",dy:"0.688182"}),(0,i.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,i.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),(0,i.jsx)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_351_120552"}),(0,i.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_351_120552",result:"shape"})]}),(0,i.jsxs)("filter",{id:"filter10_d_351_120552",x:"132.649",y:"60.1077",width:"31.3122",height:"31.3122",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,i.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,i.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,i.jsx)("feOffset",{dx:"0.688182",dy:"0.688182"}),(0,i.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,i.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),(0,i.jsx)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_351_120552"}),(0,i.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_351_120552",result:"shape"})]}),(0,i.jsxs)("filter",{id:"filter11_d_351_120552",x:"32.7107",y:"12.5178",width:"27.5273",height:"31.3122",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,i.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,i.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,i.jsx)("feOffset",{dx:"0.688182",dy:"0.688182"}),(0,i.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,i.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),(0,i.jsx)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_351_120552"}),(0,i.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_351_120552",result:"shape"})]}),(0,i.jsx)("clipPath",{id:"clip0_351_120552",children:(0,i.jsx)("rect",{width:"14.4518",height:"14.4518",fill:"white",transform:"translate(38.6985 65.2793)"})}),(0,i.jsx)("clipPath",{id:"clip1_351_120552",children:(0,i.jsx)("rect",{width:"15",height:"15",fill:"white",transform:"translate(38 113)"})}),(0,i.jsx)("clipPath",{id:"clip2_351_120552",children:(0,i.jsx)("rect",{width:"36.296",height:"36.296",fill:"white",transform:"translate(23 89.9951) rotate(-14.3491)"})})]})]})}let se="Make Something Modal",st="Make something modal V2 dismissal interacted";var sn=(e=>(e.BRAINSTORM_TEMPLATE_BUTTON_INTERACTED="Make something modal V2 brainstorm template interacted",e.TEAM_UPDATES_TEMPLATE_BUTTON_INTERACTED="Make something modal V2 team updates template interacted",e.TEAM_CHART_TEMPLATE_BUTTON_INTERACTED="Make something modal V2 team chart template interacted",e.PLANNING_AHEAD_TEMPLATE_BUTTON_INTERACTED="Make something modal V2 planning ahead template interacted",e))(sn||{}),si=n(680675);let ss="browse_templates_make_something_onboarding--faded--UuXrP";var sa=n(536283),sr=n(430011),sl=n(519128),so=n(221042);let sd="loadingMakeSomethingTemplate",sc=e=>{let t=(0,T.Xr)(iy.w),{name:n}=(0,h.j6)(),a=(0,p.wA)(),[r,l]=(0,s.useState)(iF.f.NONE),o=(0,s.useCallback)(e=>{a(iN.Ji({isActive:e}))},[a]);(0,s.useEffect)(()=>(o(!0),()=>{o(!1)}),[o]);let d=(0,iM.g)();(0,s.useEffect)(()=>(d&&w.gw5?.setFigjamStarterKitEnabled(!0),()=>{w.gw5?.setFigjamStarterKitEnabled(!1)}),[d]);let c=(0,T.Xr)(iW.Qs);(0,s.useEffect)(()=>{c({type:"CLOSE"})},[c]);let u=(0,nF.O)(),f=(0,s.useRef)(Date.now()),g=e.onHideModal,x=(0,s.useCallback)(()=>{g(),(0,nM.YQ)({id:st}),a(m.b({figjam_browse_templates_modal_onboarding_item_selected:!0})),a(eb.Ce()),t(iy.tX.COMPLETED)},[g,a,t]),_=t=>{(!e.shouldAcceptClickUseCaseTile||e.shouldAcceptClickUseCaseTile())&&((0,ep.Cu)({trackingContext:n,text:`${t} tile clicked`},"CTA Clicked"),e.onClickUseCaseTile(t))};function y(t,i){(0,ep.Cu)({trackingContext:n,text:`${t} tile hovered`},"CTA Hovered"),l(t),e.onUseCasePreview?.(t,i)}let v=[{headerText:(0,I.t)("figjam_onboarding_make_something.templates_modal.button_title.brainstorm"),headerIcon:sa.A,previewSvg:e=>(0,i.jsx)(i6,{hovered:e}),useCase:iF.f.BRAINSTORM,previewType:w.KpW.MAKE_SOMETHING_BRAINSTORM},{headerText:(0,I.t)("figjam_onboarding_make_something.templates_modal.button_title.team_updates"),headerIcon:so.A,previewSvg:e=>(0,i.jsx)(i9,{hovered:e}),useCase:iF.f.UPDATES,previewType:w.KpW.MAKE_SOMETHING_TEAM_UPDATES},{headerText:(0,I.t)("figjam_onboarding_make_something.templates_modal.button_title.planning_ahead"),headerIcon:sr.A,previewSvg:e=>(0,i.jsx)(i8,{hovered:e}),useCase:iF.f.PLAN,previewType:w.KpW.MAKE_SOMETHING_PLANNING},{headerText:(0,I.t)("figjam_onboarding_make_something.templates_modal.button_title.team_chart"),headerIcon:sl.A,previewSvg:e=>(0,i.jsx)(i7,{hovered:e}),useCase:iF.f.TEAM,previewType:w.KpW.MAKE_SOMETHING_TEAM_CHART}];function b(e,t){let n=v.findIndex(t=>t.useCase===e)+t;return n>v.length-1?n=0:n<0&&(n=v.length-1),n}return{hoveredUseCase:r,setHoveredUseCase:l,onClickCloseButton:()=>{e.onHideModal(),(0,nM.YQ)({id:st}),t(iy.tX.COMPLETED);let n=Math.round((Date.now()-f.current)/1e3);u({eventName:"msv2_dismissed",style:e.style,secondsAfterShown:n})},onClickMoreTemplatesButton:()=>{a(eb.$O({type:iG.PH.type,data:{templateInsertionLocation:e.templateInsertionLocation,triggeredFrom:"makeSomething",onTemplateInsertedCurrentFile:x,onTemplateInsertedNewFile:x}})),u({eventName:"more_templates_clicked",style:e.style})},onClickUseCaseTile:_,onUseCasePreview:y,useCaseTiles:v,onRadioGroupKeyDown:function(e){let t;if("Enter"===e.key){r!==iF.f.NONE&&v.find(({useCase:e})=>e===r)&&_(r);return}if("Home"===e.key)t=0;else if("End"===e.key)t=v.length-1;else if(["ArrowUp","ArrowLeft"].includes(e.key))t=b(r,-1);else{if(!["ArrowDown","ArrowRight"].includes(e.key))return;t=b(r,1)}let n=v[t];n&&(l(n.useCase),y(n.useCase,n.previewType))}}},su={[iF.f.BRAINSTORM]:sn.BRAINSTORM_TEMPLATE_BUTTON_INTERACTED,[iF.f.PLAN]:sn.PLANNING_AHEAD_TEMPLATE_BUTTON_INTERACTED,[iF.f.UPDATES]:sn.TEAM_UPDATES_TEMPLATE_BUTTON_INTERACTED,[iF.f.TEAM]:sn.TEAM_CHART_TEMPLATE_BUTTON_INTERACTED},sp=(0,iK.n)(({onSuccess:e}={})=>{let t=(0,T.Xr)(iy.w),n=(0,p.wA)(),i=(0,eB.aV)(),a=(0,iM.g)(),r=(0,p.d4)(e=>e.mirror.appModel.multiplayerSessionState===w.kul.JOINED),{hubFiles:l,templates:o,categoryIds:d,isLoading:c}=(0,iV.bg)({templatesShelfType:iD.cS.FIGJAM_SIMPLE_TEMPLATES_PICKER,source:"make-something-v2",isCmtyShelvesV2Enabled:(0,iI.Sm)()}),{insertTemplate:u}=(0,iL.Fz)(),h=(0,s.useMemo)(()=>{let e={};return Object.keys(l).filter(e=>d.some(t=>o[t]?.includes(e))).reduce((e,t)=>{let n=l[t];return n&&(e[(0,iR.a6)(n).name.toUpperCase()]=n),e},e),e},[l,o,d]),f=a&&!c&&!i&&r;return{insert:(0,s.useCallback)(i=>{if(!f)return;if(i===iF.f.NONE){e?.();return}let s=h[i],a=su[i];s&&u({template:{template:s,type:iP.n.HubFile},onSuccess:()=>{e?.(),n(eu.F.dequeue({matchType:sd})),(0,nM.YQ)({id:a}),n(m.b({figjam_browse_templates_modal_onboarding_item_selected:!0})),t(iy.tX.USE_CASE_STEPS),i===iF.f.PLAN?w.glU.setCanvasZoomScale(.8):i===iF.f.TEAM&&w.glU.setCanvasZoomScale(1.2)},triggeredFrom:"browse-templates-make-something",selectTemplateAfterInsertion:!1}),n(eu.F.enqueue({message:(0,I.t)("figjam_onboarding_make_something.visual_bell.loading_template"),icon:iS.zX.SPINNER,type:sd}))},[n,e,u,t,h,f]),canInsert:f}});function sm(e){let t=(0,p.d4)(e=>{let t=e?.mirror?.appModel?.currentPage,n=e?.mirror?.sceneGraph,i=n?.get(t);return!i||!i.childCount||i.childrenAreAllGhosts}),n=(0,nx.Un)(),a=(0,nF.O)(),r=!n||t,l=r?"banner":"popup",o=()=>{e.hideModal?.()},d=e=>{a({eventName:"use_case_hovered",useCase:e,style:l})},c=e=>{a({eventName:"use_case_clicked",useCase:e,style:l})};function u(e,t){if("Escape"===e.key){t(),e.preventDefault(),e.stopPropagation();return}}return function(e){let t=(0,nF.O)(),n=(0,iE.ZC)(e);(0,s.useEffect)(()=>{if(!n){t({eventName:"msv2_shown",style:e});return}if(n!==e){t({eventName:"msv2_style_changed",style:e,prevStyle:n});return}},[n,e,t])}(l),r?(0,i.jsx)(sh,{onHideModal:o,trackUseCaseHover:d,trackUseCaseClick:c,onEscapeDown:u}):(0,i.jsx)(sf,{onHideModal:o,trackUseCaseHover:d,trackUseCaseClick:c,onEscapeDown:u})}function sh(e){let{onHideModal:t,trackUseCaseHover:n,trackUseCaseClick:a}=e,[r,l]=(0,s.useState)(!1),o=(0,s.useRef)(!1),{insert:d,canInsert:c}=sp({onSuccess:()=>{o.current=!1}}),{hoveredUseCase:u,setHoveredUseCase:p,onClickCloseButton:m,onClickMoreTemplatesButton:h,onClickUseCaseTile:f,onUseCasePreview:g,useCaseTiles:x,onRadioGroupKeyDown:_}=sc({templateInsertionLocation:iR.RD.CURRENT_FILE,onHideModal:t,onClickUseCaseTile(e){o.current=!0,d(e),t(),a(e)},onUseCasePreview(e,t){w.gw5.clearFigjamStarterKitPreview(),w.gw5.rotateFigjamStarterKitStrings(),w.gw5.showFigjamStarterKitPreview(t),n(e)},shouldAcceptClickUseCaseTile:()=>!o.current,style:"banner"});function y(){l(!1),w.gw5.clearFigjamStarterKitPreview(),p(iF.f.NONE)}return c?(0,i.jsx)("div",{className:S.s.flex.justifyCenter.$,children:(0,i.jsx)(ib.b,{className:"browse_templates_make_something_onboarding--modalContainer--tYRC4",htmlAttributes:{onKeyDown(t){e.onEscapeDown(t,m)}},children:(0,i.jsxs)(iC.i,{children:[(0,i.jsx)("div",{className:nf()("browse_templates_make_something_onboarding--closeHeader--tGUaS",{[ss]:r}),children:(0,i.jsx)(tH.Me,{onClick:m,"aria-label":(0,I.t)("general.close"),trackingEventName:"modal closed",htmlAttributes:{"data-testid":"MakeSomethingCloseButton"},children:(0,i.jsx)(j.X,{})})}),(0,i.jsxs)("div",{className:"browse_templates_make_something_onboarding--makeSomethingContainer--rxr6G",children:[(0,i.jsxs)("div",{className:nf()("browse_templates_make_something_onboarding--titleContainer--41-OQ",{[ss]:r}),children:[(0,i.jsx)("div",{className:"browse_templates_make_something_onboarding--title--OqmHP text--fontPos20Whyte--o3mBO text--_fontBaseWhyte--efAjI",children:(0,I.tx)("figjam_onboarding_make_something.templates_modal.main_title")}),(0,i.jsx)("div",{className:"browse_templates_make_something_onboarding--subtitle--T-kBc text--fontPos14Whyte--pEiDq text--_fontBaseWhyte--efAjI",children:(0,I.tx)("figjam_onboarding_make_something.templates_modal.main_subtitle")}),(0,i.jsx)("div",{className:"browse_templates_make_something_onboarding--templateButtonContainer--ey3hb",children:(0,i.jsx)("div",{className:"browse_templates_make_something_onboarding--templateButtonShadow--PGxmP",children:(0,i.jsx)(tH.c,{variant:"secondary",onClick:h,iconPrefix:(0,i.jsx)(iw.X,{}),trackingEventName:"more templates click",htmlAttributes:{onFocus:y},autoFocus:!1,children:(0,I.tx)("figjam_onboarding_make_something.templates_modal.button_title.templates_button")})})})]}),(0,i.jsx)(ij.bL,{legend:(0,i.jsx)(ik.q,{children:(0,I.t)("figjam_onboarding_make_something.use_case_listbox.aria_label")}),onChange:nL.lQ,htmlAttributes:{onMouseEnter:()=>l(!0),onMouseLeave:y,onKeyDown:_,tabIndex:0},className:"browse_templates_make_something_onboarding--listItems--57vh3",children:x.map(({headerIcon:e,headerText:t,useCase:n,previewSvg:s,previewType:a})=>(0,i.jsxs)(ij.c$,{value:n,"aria-label":t,className:nf()("browse_templates_make_something_onboarding--useCaseContainer--nnBm-",{[ss]:![iF.f.NONE,n].includes(u)}),htmlAttributes:{onFocus:()=>g(n,a),onMouseEnter:()=>g(n,a),onClick:()=>f(n),tabIndex:-1},children:[(0,i.jsxs)("div",{className:"browse_templates_make_something_onboarding--useCaseHeader--0ad0i text--fontPos11Whyte--wZDnv text--_fontBaseWhyte--efAjI","aria-hidden":"true",children:[(0,i.jsx)(iT.B,{svg:e,height:"28px",width:"28px",autosize:!0,className:"browse_templates_make_something_onboarding--useCaseIcon--0Dqvb",useOriginalSrcFills_DEPRECATED:!0}),t]}),(0,i.jsxs)("div",{className:"browse_templates_make_something_onboarding--previewContainer--lohmG","aria-hidden":"true",children:[(0,i.jsx)("div",{className:"browse_templates_make_something_onboarding--gradientOverlay--PmGRF"}),(0,i.jsx)("div",{children:s(u===n)})]})]},n))})]})]})})}):null}function sf(e){let{onHideModal:t,trackUseCaseHover:n,trackUseCaseClick:a}=e,{shiftPopupUp:r,popupRef:l}=function(){let e=iX.C()?.whiteboardToolbeltContainerNode,t=(0,s.useRef)(null),[n,i]=(0,s.useState)(!1);return(0,s.useLayoutEffect)(()=>{let n=(0,iq.s)(()=>{let n=t.current?.getBoundingClientRect(),s=e?.getBoundingClientRect();n&&s&&i(s.left-n.right<24)},100);return n(),window.addEventListener("resize",n),()=>window.removeEventListener("resize",n)},[e]),{popupRef:t,shiftPopupUp:n}}(),o=(0,p.wA)(),d=(0,iO.B)(),{hoveredUseCase:c,setHoveredUseCase:u,onClickCloseButton:m,onClickMoreTemplatesButton:h,onClickUseCaseTile:f,onUseCasePreview:g,useCaseTiles:x,onRadioGroupKeyDown:_}=sc({templateInsertionLocation:iR.RD.NEW_FILE,onHideModal:t,onClickUseCaseTile(e){o(iA.zE({state:d,from:iz.f6.FIGJAM_MAKE_SOMETHING_POPUP,editorType:n9._Y.WHITEBOARD,team:void 0,openNewFileIn:iz.ai.NEW_TAB,figjamMakeSomethingUseCase:e})),a(e)},onUseCasePreview(e){n(e)},style:"popup"});return(0,i.jsx)("div",{className:nf()("browse_templates_make_something_onboarding--popupBackground--qUE9z",{"browse_templates_make_something_onboarding--popupBackgroundAboveDlt--3VTFo":r}),children:(0,i.jsx)(ib.b,{className:"browse_templates_make_something_onboarding--popupModal--y2117",ref:l,htmlAttributes:{onKeyDown(t){e.onEscapeDown(t,m)}},children:(0,i.jsxs)(iC.i,{children:[(0,i.jsxs)("div",{className:"browse_templates_make_something_onboarding--popupHeader--gqTTZ",children:[(0,i.jsx)("h2",{className:"browse_templates_make_something_onboarding--popupTitle--qSiMo text--fontPos14Whyte--pEiDq text--_fontBaseWhyte--efAjI",children:(0,I.tx)("figjam_onboarding_make_something.popup.title")}),(0,i.jsx)(tH.Me,{onClick:m,"aria-label":(0,I.t)("general.close"),trackingEventName:"modal closed",htmlAttributes:{"data-testid":"MakeSomethingCloseButton"},children:(0,i.jsx)(j.X,{})})]}),(0,i.jsxs)("div",{className:S.s.pt8.pr12.pb12.pl12.$,children:[(0,i.jsx)(ij.bL,{legend:(0,i.jsx)(ik.q,{children:(0,I.t)("figjam_onboarding_make_something.use_case_listbox.aria_label")}),onChange:nL.lQ,htmlAttributes:{onKeyDown:_,tabIndex:0},className:"browse_templates_make_something_onboarding--popupUseCasesContainer--U5E6f",children:x.map(({headerIcon:e,headerText:t,useCase:n})=>(0,i.jsxs)(ij.c$,{value:n,"aria-label":t,className:nf()("browse_templates_make_something_onboarding--popupButton--r5tGZ text--fontPos12Whyte---tkNx text--_fontBaseWhyte--efAjI",{"browse_templates_make_something_onboarding--popupButtonActive--EbHMe":c===n}),htmlAttributes:{onBlur:()=>u(iF.f.NONE),onClick:()=>f(n),onFocus:()=>g(n),onMouseEnter:()=>g(n),onMouseLeave:()=>u(iF.f.NONE),tabIndex:-1},children:[(0,i.jsx)(iT.B,{className:nf()({"browse_templates_make_something_onboarding--brainstormIcon--O0mh5":n===iF.f.BRAINSTORM}),svg:e,height:n===iF.f.BRAINSTORM?"16px":"20px",width:n===iF.f.BRAINSTORM?"16px":"20px",autosize:!0,useOriginalSrcFills_DEPRECATED:!0,ariaHidden:!0}),(0,i.jsx)("span",{"aria-hidden":"true",children:t})]},n))}),(0,i.jsx)(tH.lR,{trackingEventName:"more templates click",onClick:h,variant:"ghost",htmlAttributes:{onFocus:()=>u(iF.f.NONE),onMouseEnter:()=>u(iF.f.NONE)},children:(0,I.tx)("figjam_onboarding_make_something.templates_modal.button_title.templates_button")})]})]})})})}function sg(){let{insert:e,canInsert:t}=sp(),[n,i]=(0,T.fp)(iy.l5),a=(0,s.useRef)(!1);return(0,s.useEffect)(()=>{t&&n!==iF.f.NONE&&!a.current&&(e(n),a.current=!0)},[n,e,t]),(0,s.useEffect)(()=>()=>i(iF.f.NONE),[i]),null}eZ.q3.SELF_CONTAINED,e=>(0,i.jsx)(sm,{hideModal:e.dismissModal});let sx=`${se} Templates Toolbar Connector Tooltip`,s_=`${se} Templates Toolbar Onboarding Finished Connector Tooltip`;function sy(e){return(0,i.jsx)(nR.Dv,{targetType:"dom",targetKey:iU.G,topPadding:-6,autoWidth:!0,isBold:!0,arrowPosition:iH.F_.BOTTOM,children:(0,i.jsx)(iB.mI,{bodyText:(0,i.jsx)("span",{className:si.RL,children:(0,I.tx)("figjam_onboarding_make_something.templates_toolbar_connector.body_text",{boldText:(0,i.jsx)("b",{children:(0,I.tx)("figjam_onboarding_make_something.templates_toolbar_connector.body_text_bold")})})}),buttonText:(0,I.tx)("figjam_onboarding_make_something.templates_toolbar_connector.done_button"),onButtonClick:e.onClickPrimaryCta})})}function sv(e){return(0,i.jsx)(nR.Dv,{targetType:"dom",targetKey:iU.G,topPadding:-6,autoWidth:!0,isBold:!0,arrowPosition:iH.F_.BOTTOM,children:(0,i.jsx)(iB.mI,{titleText:(0,i.jsx)("span",{className:"browse_templates_make_something_onboarding--tooltipTitle--EmYZQ",children:(0,I.tx)("figjam_onboarding_make_something.templates_toolbar_onboarding_finished_connector.title_want_to_try_something_else")}),bodyText:(0,i.jsx)("span",{className:si.$s,children:(0,I.tx)("figjam_onboarding_make_something.templates_toolbar_onboarding_finished_connector.body_text",{boldText:(0,i.jsx)("b",{children:(0,I.tx)("figjam_onboarding_make_something.templates_toolbar_onboarding_finished_connector.body_text_bold")})})}),buttonText:(0,I.tx)("figjam_onboarding_make_something.templates_toolbar_connector.done_button"),onButtonClick:e.onClickPrimaryCta})})}function sb(e){let t=(0,T.Xr)(iy.w);return(0,tg.h)(()=>{t(iy.tX.MODAL_SHOWING)}),(0,i.jsx)(eK.h,{testId:e.testId?e.testId:"MakeSomethingOnboardingOverlay",modalType:eZ.q3.SELF_CONTAINED,trackingContextName:"Make Something Modal Onboarding",element:s.useCallback(e=>(0,i.jsx)(iv.m,{role:"region","aria-label":(0,I.t)("figjam_onboarding_make_something.accessible_area.aria_label"),children:(0,i.jsx)(sm,{hideModal:e.dismissModal})}),[]),isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}eZ.q3.SELF_CONTAINED,eZ.q3.SELF_CONTAINED;let sC="figjam_unified_onboarding_product",sj="figjam_unified_onboarding_pz";function sk(e){(0,nM.YQ)({id:e===nx.jg.PRODUCT_THEN_PZ?sC:sj})}let sw=[n$,n0];function sE(){let e=(0,T.md)(nx.Am),{show:t,uniqueId:n,isShowing:a,complete:r}=(0,f.e)({overlay:y.wRI,priority:g.N.OVERRIDING_MODAL}),l=ig((0,s.useCallback)(()=>{r(),e===nx.jg.PZ_THEN_PRODUCT&&(0,nM.YQ)({id:sC}),e===nx.jg.PRODUCT_THEN_PZ&&(0,nM.YQ)({id:ip})},[r,e]));return(0,ek.E)(n,sj,()=>{t()}),(0,i.jsx)(i_,{steps:sw,onComplete:l,isShowing:a,overlayUniqueId:n})}function sT(){let e=(0,T.md)(nx.Am),t=(0,T.md)(iy.w),{show:n,uniqueId:a,isShowing:r,complete:l}=(0,f.e)({overlay:y.Kze,priority:g.N.OVERRIDING_MODAL}),o=ig(l);return(0,ek.E)(a,sC,()=>{n()}),(0,s.useEffect)(()=>{t===iy.tX.COMPLETED&&e===nx.jg.PRODUCT_THEN_PZ&&(0,nM.YQ)({id:sj}),t===iy.tX.COMPLETED&&e===nx.jg.PZ_THEN_PRODUCT&&(0,nM.YQ)({id:ip})},[t,e]),(0,i.jsx)(sb,{onClickPrimaryCta:o,onClose:nL.lQ,onManualDismiss:o,isShowing:r})}var sS=n(359166),sI=n(152469),sN=n(550209),sA=n(504307),sL=n(920597),sM=n(151720),sO=n(893393),sR=n(904017),sP=n(919853),sD=n(419822),sF=n(111679);let sz=(0,ey.ck)("964c3ddf18b0f2712b664efde991dfc4f2c58eb8"),sB=(0,iK.D)((e,t)=>{t(sF.V3({url:e}))});function sG(e){let t=(0,p.wA)();return(0,i.jsx)("div",{className:"onboard_figjam_viewer--openTutorialModalContainer--O1ld1",children:(0,i.jsx)("div",{className:"onboard_figjam_viewer--openTutorialModalShadow--HF-Gb onboard_figjam_viewer--openTutorialModalBase--vDoVP",children:(0,i.jsx)("div",{className:"onboard_figjam_viewer--openTutorialModal--3j-H4 onboard_figjam_viewer--openTutorialModalBase--vDoVP",children:(0,i.jsxs)("div",{className:nB,children:[(0,i.jsx)("div",{className:nG,children:(0,i.jsx)("img",{className:nU,src:sz,alt:""})}),(0,i.jsxs)("div",{className:nf()(nV,nH),children:[(0,i.jsx)("div",{className:"onboard_figjam_viewer--openTutorialModalText--9oABQ onboard_figjam_viewer--text--xkcTB",children:(0,I.tx)("rcs.figjam_onboarding.for_more_tips_and_tricks_here_s_a_2_minute_hands_on_tutorial")}),(0,i.jsxs)("div",{className:"onboard_figjam_viewer--openTutorialBottomContentRow--rVWqG onboard_figjam_viewer--bottomContentRow--PgTeU",children:[(0,i.jsx)(C.$n,{variant:"ghost",onClick:e.dismissModal,children:(0,I.tx)("rcs.figjam_onboarding.maybe_later")}),(0,i.jsx)("div",{className:"onboard_figjam_viewer--openTutorialButton--4AqFo",children:(0,i.jsx)(tH.$z,{onClick:()=>{if("loaded"!==e.figJamTemplateFileResult.status||null==e.figJamTemplateFileResult.data||e.figJamTemplateFileResult.data.length<1)return;let n=e.figJamTemplateFileResult.data?.[0]??null;n&&sB(n.url,t),e.dismissModal()},disabled:"loading"===e.figJamTemplateFileResult.status,variant:"primary",children:"loading"===e.figJamTemplateFileResult.status||null==e.figJamTemplateFileResult.data?(0,i.jsx)(sD.k,{htmlAttributes:{"data-testid":"loading-spinner"}}):(0,I.tx)("rcs.figjam_onboarding.open_tutorial")})})]})]})]})})})})}async function sU(e){let t=(await e).data;if(!t)return!1;let n=(0,sM.kd)(t),i=(0,sM.mW)(n,"figjam_editor_onboarded");return!i&&!i&&!(()=>{let e=(0,sS.DN)();try{return!!e.get(sI.Xk)}catch(e){}return!1})()}function sV({openFile:e}){return!!(e&&e.trackTags?.isTemplate&&e.editorType===n9._Y.WHITEBOARD)}function sH(e,t){(0,sN.kF)("type",e),(0,sN.kF)("source",t),(0,sN.us)("FigJam onboarding - Failed to load starter files; we did not render open tutorial overlay")}function sK(e){return(0,i.jsx)(n3.u,{label:"OpenFigJamTutorialOverlay",children:(0,i.jsx)(sW,{...e})})}function sW(e){let t=(0,sR.S2)().unwrapOr(null),n=t?.key?.type,a=t?.key?.parentId,[r]=(0,sO.IT)(sA.XZ({currentOrgId:n===n9.OL.ORG?a:void 0,currentTeamId:n===n9.OL.TEAM?a:void 0,fileTags:["figjam_template"],shouldRecreate:!0}),{enabled:e.isShowing&&null!==t});return s.useEffect(()=>{"errors"===r.status&&sH("failure","curator")},[r.status]),s.useEffect(()=>{let e=setTimeout(()=>{"loading"===r.status&&sH("timeout","curator")},5e3);return()=>clearTimeout(e)},[r.status]),(0,i.jsx)(eK.h,{testId:e.testId?e.testId:"OpenFigJamTutorialOverlay",modalType:eZ.q3.SELF_CONTAINED,trackingContextName:"FigJam Editor Onboarding - Open Tutorial",userFlagOnShow:"figjam_editor_onboarded",element:e=>(0,i.jsx)(sG,{...e,figJamTemplateFileResult:r}),isShowing:e.isShowing&&"loaded"===r.status,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function sq(){return(0,i.jsx)(n3.u,{label:"OnboardFigJamViewerOverlay",children:(0,i.jsx)(sX,{})})}function sX(){let e=(0,p.wA)(),t=(0,ei.MY)(),{show:n,uniqueId:a,complete:r,isShowing:l}=(0,f.e)({overlay:y.MJs,priority:g.N.OVERRIDING_MODAL},[t]),o=function(e,t){let n=(0,s.useRef)(),i=(0,s.useRef)(),a=(0,s.useRef)();return((0,s.useEffect)(()=>()=>{n.current?.()},[]),i.current)?i.current:null==n.current||null==a.current?(i.current=new Promise(s=>{n.current?.(),n.current=(0,sL.WB)().subscribe(e,t,e=>{("loaded"===e.status||e.errors)&&(a.current=e,s(a.current),i.current=void 0)})}),i.current):Promise.resolve(a.current)}(ie.Tej,{}),d=(0,T.md)(ei.yV),c=(0,sP.Td)(),u=!sV({openFile:d}),h=(0,s.useRef)(!1);(0,s.useEffect)(()=>{sU(o).then(e=>{e&&!h.current&&n({canShow:e=>{let t=e?.editorType===n9._Y.WHITEBOARD&&!e?.canEdit;return t&&(h.current=!0),t}})})},[n,o]);let{currentStep:x,next:_,reset:v}=(0,eG.A)({numSteps:u?4:3,onComplete:r});(0,ek.E)(a,"Reset Onboarding",()=>{e(m.b({figjam_editor_onboarded:!1})),c&&(v(),n())});let b=ig(r),C=s.useMemo(()=>{let e=n2.map(e=>(0,i.jsx)(e,{isShowing:l,onClickPrimaryCta:_,onClose:nL.lQ,onManualDismiss:b},e.name));return u&&e.push((0,i.jsx)(sK,{isShowing:l,onClickPrimaryCta:_,onClose:nL.lQ,onManualDismiss:b,testId:"open_figjam_tutorial_overlay"},"OpenFigJamTutorialOverlay")),e},[_,b,l,u]);return(0,i.jsx)(eH.U,{currentStep:x,isShowing:l,children:C})}var sY=n(913105),sZ=n(118740);let sJ=(0,iK.D)(()=>{let e=(0,sS.DN)();try{return!!e.get(sI.Xk)}catch(e){}return!1});function sQ({isTemplateFile:e,isTryFile:t,canvasEmpty:n,onboardedToFigJam:i,cameFromWhatsNew:s}){if(i||sJ())return[];let a=(0,nP.O)()?[]:n2;if(e)return a;let r=[...a,sK];return s||t||!n?r:[sb]}function s$({openFile:e}){let t=(0,T.md)(iy.l5),n=(0,T.md)(tN.zo),s=(0,T.md)(nx.Am);return t!==iF.f.NONE?null:("loaded"!==n.status||n.data)&&!s?(0,i.jsx)(s2,{openFile:e}):(0,i.jsx)(s1,{openFile:e})}let s0=(e,t)=>{let n=(0,ei.MY)(),i=(0,T.Xr)(nx.Am),a=(0,T.Xr)(iy.w),r=(0,T.md)(tN.zo),l=(0,eB.aV)(),o=(0,T.md)(sY.dO).status===sZ.c.LOADING;ix({overlayUniqueId:e,afterReset:()=>{i(null),a(iy.tX.NOT_STARTED)}});let d=(0,s.useRef)(!1);(0,s.useEffect)(()=>{!d.current&&"loaded"===r.status&&!l&&!o&&n.data?.canEdit&&n.data?.editorType==="whiteboard"&&(d.current=!0,t())},[t,r.status,l,o,n])};function s1({openFile:e}){let t=(0,p.d4)(e=>e.mirror.appModel.currentPage),n=(0,td.Fk)((e,t)=>(0,to.zC)(e,t),t),a=(0,T.md)(tN.zo),r=(0,eE.Fu)("interacted_figjam_whats_new_v2_cta"),l=(0,T.md)(r),o=(0,T.Xr)(nx.Am),{getConfig:d}=(0,ns.XV)("exposed_exp_figjam_unified_onboarding","figjam_unified_onboarding"),c=(0,s.useCallback)(()=>{let e=d().get("sequence",nx.jg.DEFAULT);return o(e),e},[d,o]),[u,m]=(0,s.useState)(!1),[h,x]=(0,s.useState)([]),{show:_,uniqueId:v,isShowing:b,complete:C,experimentResult:j}=(0,f.e)({overlay:y.zoI,priority:g.N.OVERRIDING_MODAL,experiment:{check:c,predicate:e=>e!==nx.jg.DEFAULT,postCheck:e=>(e||sJ()||m(!0),!1)}},[a,l]),k=(0,s.useRef)(n);(0,s.useEffect)(()=>{k.current=n},[n]);let{show:w,isShowing:E,complete:S}=(0,f.e)({overlay:y.lLk,priority:g.N.OVERRIDING_MODAL,experiment:{check:c,predicate:e=>e===nx.jg.DEFAULT,postCheck:(t,n)=>{let i=sQ({isTemplateFile:sV({openFile:e}),isTryFile:e.isTryFile,canvasEmpty:k.current,onboardedToFigJam:t,cameFromWhatsNew:(0,tP.SS)(n)}),s=i.length>0;return s&&x(i),s}}},[a,l]),I=j||nx.jg.DEFAULT,N=I===nx.jg.DEFAULT?E:b,A=I===nx.jg.DEFAULT?S:C,L=(0,s.useMemo)(()=>I===nx.jg.DEFAULT?h:[],[I,h]);s0(v,(0,s.useCallback)(()=>{_(),w()},[_,w]));let M=ig(A),O=(0,s.useCallback)(()=>{I===nx.jg.DEFAULT?M():u&&(A(),sk(I))},[M,A,u,I]);return((0,s.useEffect)(()=>{0===L.length&&u&&I!==nx.jg.DEFAULT&&sk(I)},[u,L,I]),j&&N&&0!==L.length)?(0,i.jsx)(i_,{steps:L,onComplete:O,isShowing:N,overlayUniqueId:v}):null}function s2({openFile:e}){let t=(0,p.d4)(e=>e.mirror.appModel.currentPage),n=(0,td.Fk)((e,t)=>(0,to.zC)(e,t),t),a=(0,T.md)(tN.zo),r=(0,eE.Fu)("interacted_figjam_whats_new_v2_cta"),l=(0,T.md)(r),{show:o,uniqueId:d,isShowing:c,complete:u}=(0,f.e)({overlay:y.lLk,priority:g.N.OVERRIDING_MODAL},[a,l]),[m,h]=(0,s.useState)([]);s0(d,(0,s.useCallback)(()=>{o({canShow:(t,i)=>{let s=sQ({isTemplateFile:sV({openFile:e}),isTryFile:e.isTryFile,canvasEmpty:n,onboardedToFigJam:t,cameFromWhatsNew:(0,tP.SS)(i)}),a=s.length>0;return a&&h(s),a}})},[o,h,n,e]));let x=ig(u);return c&&0!==m.length?(0,i.jsx)(i_,{steps:m,onComplete:x,isShowing:c,overlayUniqueId:d}):null}function s3({openFile:e}){return(0,i.jsx)(s$,{openFile:e})}let s5=(0,T.eU)(async()=>{if(document.fonts&&FontFace){let e=new FontFace("Whyte",`url(${(0,ey.CZ)("webfont/1/Whyte-Regular.woff")})`);document.fonts.add(e)}await document.fonts.ready}),s4=(0,T.Rq)(s5);function s6(e){return(0,i.jsx)(eK.h,{testId:e.testId,modalType:eZ.q3.SELF_CONTAINED,trackingContextName:sx,userFlagOnShow:"figjam_browse_templates_modal_onboarded",element:sy,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function s7(e){return(0,i.jsx)(eK.h,{testId:e.testId,modalType:eZ.q3.SELF_CONTAINED,trackingContextName:s_,userFlagOnShow:"figjam_browse_templates_modal_onboarded",element:sv,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function s8(){let e=(0,eE.r1)("figjam_browse_templates_modal_onboarded"),t=(0,T.md)(e),n=(0,T.md)(s4),[a,r]=(0,s.useState)(!1),l=(0,nx.Un)(),{show:o,isShowing:d,uniqueId:c,complete:u}=(0,f.e)({overlay:y.kp0,priority:g.N.OVERRIDING_MODAL},[t,n]);return(0,ek.E)(c,st,()=>{r(!0),o({canShow:e=>!e&&!l})}),(0,ek.E)(c,eY.P7,()=>{o({canShow:e=>!e&&!l})}),a?(0,i.jsx)(s6,{isShowing:d,onClickPrimaryCta:u,onClose:u,onManualDismiss:u}):(0,i.jsx)(s7,{isShowing:d,onClickPrimaryCta:u,onClose:u,onManualDismiss:u})}var s9=n(669341),ae=n(877690),at=n(880820),an=n(488922),ai=n(831214);let as={};function aa(e){return as[e]??""}function ar(e){return(0,i.jsx)(iB.vX,{onSkipClick:e.dismissModal,useCase:iF.f.BRAINSTORM,children:(0,i.jsx)(iB.wV,{bodyText:(0,i.jsx)("span",{className:si.R9,children:(0,I.tx)("figjam_onboarding_make_something.brainstorm.fig_jam_s_great_for_brainstorming",{boldText:(0,i.jsx)("b",{children:(0,I.tx)("figjam_onboarding_make_something.brainstorm.fig_jam_s_great_for_brainstorming_prefix")})})}),buttonText:(0,I.tx)("figjam_onboarding_make_something.brainstorm.go_on"),onButtonClick:e.onClickPrimaryCta,svg:sa.A})})}function al(e){let{onClickPrimaryCta:t,dismissModal:n}=e;s.useEffect(()=>{function e(e){var n;t(),n=e.nodeId,as.createdSticky=n}return nD.Y5.fromFullscreen.on("createdSticky",e),()=>{nD.Y5.fromFullscreen.removeListener("createdSticky",e)}},[t]);let a=(0,ai.L)();return(0,i.jsx)(iB.vX,{onSkipClick:n,useCase:iF.f.BRAINSTORM,children:(0,i.jsx)(nR.Dv,{targetType:"dom",targetKey:an.s2,topPadding:a?-4:-22,autoWidth:!0,isBold:!0,children:(0,i.jsx)(iB.mI,{bodyText:(0,i.jsx)("span",{children:(0,I.tx)("figjam_onboarding_make_something.brainstorm.sticky_notes_let_you_share_ideas_go_ahead_drag_one_into_the_blue_box_above",{boldText:(0,i.jsx)("b",{children:(0,I.tx)("figjam_onboarding_make_something.brainstorm.sticky_notes_let_you_share_ideas_go_ahead_drag_one_into_the_blue_box_above_bold_text")})})})})})})}function ao(e){let[t]=s.useState(()=>aa("createdSticky")),{handleTargetLost:n}=(0,nR.Du)({shouldSkipConnectorModalAtom:iy.aG,skipConnectorModal:e.onClickPrimaryCta});return(0,i.jsx)(iB.vX,{onSkipClick:e.dismissModal,useCase:iF.f.BRAINSTORM,children:(0,i.jsx)(nR.Dv,{targetType:"canvas",targetKey:t,topPadding:-4,isBold:!0,autoWidth:!0,arrowPosition:iH.F_.LEFT_TITLE,onTargetLost:n,children:(0,i.jsx)(iB.mI,{bodyText:(0,i.jsx)("span",{children:(0,I.tx)("figjam_onboarding_make_something.brainstorm.just_like_that_keep_it_to_one_idea_per_sticky_next_let_s_check_out_stamps",{boldText:(0,i.jsx)("b",{children:(0,I.tx)("figjam_onboarding_make_something.brainstorm.just_like_that_keep_it_to_one_idea_per_sticky_next_let_s_check_out_stamps_bold_text")})})}),buttonText:(0,I.tx)("figjam_onboarding_make_something.brainstorm.next"),onButtonClick:e.onClickPrimaryCta})})})}function ad(e){let{onClickPrimaryCta:t,dismissModal:n}=e,{handleTargetLost:a}=(0,nR.Du)({shouldSkipConnectorModalAtom:iy.aG,skipConnectorModal:e.onClickPrimaryCta});s.useEffect(()=>{function e(e){var n;t(),n=e.nodeId,as.createdStamp=n}return nD.Y5.fromFullscreen.on("createdStamp",e),()=>{nD.Y5.fromFullscreen.removeListener("createdStamp",e)}},[t]);let r=(0,ai.L)();return(0,i.jsx)(iB.vX,{onSkipClick:n,useCase:iF.f.BRAINSTORM,children:(0,i.jsx)(nR.Dv,{targetType:"dom",targetKey:an.E$,topPadding:r?-6:-27,isBold:!0,autoWidth:!0,onTargetLost:a,children:(0,i.jsx)(iB.mI,{bodyText:(0,i.jsx)("span",{children:(0,I.tx)("figjam_onboarding_make_something.brainstorm.stamps_are_here_or_press_e_they_re_good_for_voting_go_ahead_stamp_something",{boldText:(0,i.jsx)("b",{children:(0,I.tx)("figjam_onboarding_make_something.brainstorm.stamps_are_here_or_press_e_they_re_good_for_voting_go_ahead_stamp_something_bold_text")})})})})})})}function ac(e){let[t]=s.useState(()=>aa("createdStamp")),{handleTargetLost:n}=(0,nR.Du)({shouldSkipConnectorModalAtom:iy.aG,skipConnectorModal:e.onClickPrimaryCta});return(0,i.jsx)(iB.vX,{onSkipClick:e.dismissModal,useCase:iF.f.BRAINSTORM,children:(0,i.jsx)(nR.Dv,{targetType:"canvas",targetKey:t,topPadding:-4,isBold:!0,autoWidth:!0,arrowPosition:iH.F_.TOP,onTargetLost:n,children:(0,i.jsx)(iB.mI,{bodyText:(0,i.jsx)("span",{children:(0,I.tx)("figjam_onboarding_make_something.brainstorm.lovely_just_one_more_thing",{boldText:(0,i.jsx)("b",{children:(0,I.tx)("figjam_onboarding_make_something.brainstorm.lovely_just_one_more_thing_bold_text")})})}),buttonText:(0,I.tx)("figjam_onboarding_make_something.brainstorm.next"),onButtonClick:e.onClickPrimaryCta})})})}function au(e){let t=(0,p.wA)(),n=(0,at.MR)(),a=(0,at.qU)(),[r,l]=s.useState("invalid"),{handleTargetLost:o}=(0,nR.Du)({shouldSkipConnectorModalAtom:iy.aG,skipConnectorModal:e.onClickPrimaryCta});return s.useEffect(()=>(n({source:at.OO.MAKE_SOMETHING_V2_ONBOARDING}),t(s9.lu({state:"open",userInitiated:!1})),l(ae.Hm),()=>{a({source:at.OO.MAKE_SOMETHING_V2_ONBOARDING}),t(s9.lu({state:"closed",userInitiated:!1}))}),[a,t,n]),(0,i.jsx)(iB.vX,{onSkipClick:e.dismissModal,useCase:iF.f.BRAINSTORM,children:(0,i.jsx)(nR.Dv,{targetType:"dom",targetKey:r,topPadding:-4,isBold:!0,autoWidth:!0,onTargetLost:o,children:(0,i.jsx)(iB.mI,{bodyText:(0,i.jsx)("span",{children:(0,I.tx)("figjam_onboarding_make_something.brainstorm.use_the_timer_to_keep_things_moving",{boldText:(0,i.jsx)("b",{children:(0,I.tx)("figjam_onboarding_make_something.brainstorm.use_the_timer_to_keep_things_moving_bold_text")})})}),buttonText:(0,I.tx)("figjam_onboarding_make_something.brainstorm.next"),onButtonClick:e.onClickPrimaryCta})})})}function ap(e){let{onNext:t}=iY({...e,useCase:iF.f.BRAINSTORM});return(0,i.jsx)(nR.Dv,{targetType:"dom",targetKey:eY.v4,topPadding:-4,isBold:!0,hasShadow:!0,children:(0,i.jsx)(nW,{titleText:(0,I.tx)("figjam_onboarding_make_something.brainstorm.when_you_re_ready"),bodyText:(0,I.tx)("figjam_onboarding_make_something.brainstorm.start_a_brainstorm_by_inviting_a_few_people_here_that_s_it"),buttonText:(0,I.tx)("figjam_onboarding_make_something.brainstorm.share_board"),onNext:t,onDismiss:e.dismissModal,imgSrc:iB.mN,isBold:!0})})}function am(e){return(0,iB.rL)({useCase:iF.f.BRAINSTORM,stepName:"Intro",stepNum:1}),(0,i.jsx)(eK.h,{testId:e.testId,modalType:eZ.q3.SELF_CONTAINED,trackingContextName:`${iB.CM} - Brainstorm - Intro`,userFlagOnShow:"figjam_editor_onboarded",element:ar,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function ah(e){return(0,iB.rL)({useCase:iF.f.BRAINSTORM,stepName:"Sticky Prompt",stepNum:2}),(0,i.jsx)(eK.h,{testId:e.testId,modalType:eZ.q3.SELF_CONTAINED,trackingContextName:`${iB.CM} - Brainstorm - Sticky Prompt`,userFlagOnShow:"figjam_editor_onboarded",element:al,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function af(e){return(0,iB.rL)({useCase:iF.f.BRAINSTORM,stepName:"Sticky Reaction",stepNum:3}),(0,i.jsx)(eK.h,{testId:e.testId,modalType:eZ.q3.SELF_CONTAINED,trackingContextName:`${iB.CM} - Brainstorm - Sticky Reaction`,userFlagOnShow:"figjam_editor_onboarded",element:ao,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function ag(e){return(0,iB.rL)({useCase:iF.f.BRAINSTORM,stepName:"Stamp Prompt",stepNum:4}),(0,i.jsx)(eK.h,{testId:e.testId,modalType:eZ.q3.SELF_CONTAINED,trackingContextName:`${iB.CM} - Brainstorm - Stamp Prompt`,userFlagOnShow:"figjam_editor_onboarded",element:ad,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function ax(e){return(0,iB.rL)({useCase:iF.f.BRAINSTORM,stepName:"Stamp Reaction",stepNum:5}),(0,i.jsx)(eK.h,{testId:e.testId,modalType:eZ.q3.SELF_CONTAINED,trackingContextName:`${iB.CM} - Brainstorm - Stamp Reaction`,userFlagOnShow:"figjam_editor_onboarded",element:ac,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function a_(e){return(0,iB.rL)({useCase:iF.f.BRAINSTORM,stepName:"Timer",stepNum:6}),(0,i.jsx)(eK.h,{testId:e.testId,modalType:eZ.q3.SELF_CONTAINED,trackingContextName:`${iB.CM} - Brainstorm - Timer`,userFlagOnShow:"figjam_editor_onboarded",element:au,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function ay(e){let t=(0,nF.O)();return(0,iB.rL)({useCase:iF.f.BRAINSTORM,stepName:"Share",stepNum:7}),(0,i.jsx)(eK.h,{testId:e.testId,modalType:eZ.q3.SELF_CONTAINED,trackingContextName:`${iB.CM} - Brainstorm - Share`,userFlagOnShow:"figjam_editor_onboarded",element:ap,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:()=>{t({eventName:"msv2_completed",useCase:iF.f.BRAINSTORM}),e.onClose()},onManualDismiss:e.onManualDismiss})}function av(e){return s.useEffect(()=>{!function(){let e=(0,z.getActiveTSSceneGraph)().getCurrentPage();if(e&&e.childCount>=1){var t,n,i;let s=e.childrenNodes[0];if(s?.type==="SECTION"&&s.childCount>=1){let e=s.childrenNodes[0];e?.type==="SHAPE_WITH_TEXT"&&(t=e.guid,as.planningAheadInitialNode=t)}if(s?.type==="SECTION"&&s.childCount>=9){let e=s.childrenNodes[8];e?.type==="TEXT"&&(n=e.guid,as.planningAheadPerson=n)}if(s?.type==="SECTION"&&s.childCount>=4){let e=s.childrenNodes[3];e?.type==="SHAPE_WITH_TEXT"&&(i=e.guid,as.planningAheadProject=i)}}}()},[]),(0,i.jsx)(iB.vX,{onSkipClick:e.dismissModal,useCase:iF.f.PLAN,children:(0,i.jsx)(iB.wV,{bodyText:(0,i.jsx)("span",{className:si.R9,children:(0,I.tx)("figjam_onboarding_make_something.planning_ahead.fig_jam_s_great_for_planning_ahead_here_s_how_it_s_done",{boldText:(0,i.jsx)("b",{children:(0,I.tx)("figjam_onboarding_make_something.planning_ahead.fig_jam_s_great_for_planning_ahead_here_s_how_it_s_done_bold_text")})})}),buttonText:(0,I.tx)("figjam_onboarding_make_something.brainstorm.go_on"),onButtonClick:e.onClickPrimaryCta,svg:sr.A})})}function ab(e){let[t]=s.useState(()=>aa("planningAheadInitialNode")),{handleTargetLost:n}=(0,nR.Du)({shouldSkipConnectorModalAtom:iy.aG,skipConnectorModal:e.onClickPrimaryCta});return(0,i.jsx)(iB.vX,{onSkipClick:e.dismissModal,useCase:iF.f.PLAN,children:(0,i.jsx)(nR.Dv,{targetType:"canvas",targetKey:t,topPadding:-7,isBold:!0,autoWidth:!0,arrowPosition:iH.F_.BOTTOM,onTargetLost:n,children:(0,i.jsx)(iB.mI,{bodyText:(0,i.jsx)("span",{children:(0,I.tx)("figjam_onboarding_make_something.planning_ahead.start_with_a_simple_timeline_with_a_row_for_each_member_of_your_team")}),buttonText:(0,I.tx)("figjam_onboarding_make_something.brainstorm.next"),onButtonClick:e.onClickPrimaryCta})})})}function aC(e){let{onClickPrimaryCta:t,dismissModal:n}=e,[a]=s.useState(()=>aa("planningAheadPerson")),{handleTargetLost:r}=(0,nR.Du)({shouldSkipConnectorModalAtom:iy.aG,skipConnectorModal:e.onClickPrimaryCta});return s.useEffect(()=>{function e(){t()}return nD.Y5.fromFullscreen.on("finishedEditingText",e),()=>{nD.Y5.fromFullscreen.removeListener("finishedEditingText",e)}},[t]),(0,i.jsx)(iB.vX,{onSkipClick:n,useCase:iF.f.PLAN,children:(0,i.jsx)(nR.Dv,{targetType:"canvas",targetKey:a,topPadding:2,isBold:!0,autoWidth:!0,arrowPosition:iH.F_.LEFT_TITLE,onTargetLost:r,children:(0,i.jsx)(iB.mI,{bodyText:(0,i.jsx)("span",{children:(0,I.tx)("figjam_onboarding_make_something.planning_ahead.type_your_name_here_right_at_the_top",{boldText:(0,i.jsx)("b",{children:(0,I.tx)("figjam_onboarding_make_something.planning_ahead.type_your_name_here_right_at_the_top_bold_text")})})})})})})}function aj(e){let{onClickPrimaryCta:t,dismissModal:n}=e,[a]=s.useState(()=>aa("planningAheadProject")),{handleTargetLost:r}=(0,nR.Du)({shouldSkipConnectorModalAtom:iy.aG,skipConnectorModal:e.onClickPrimaryCta});return s.useEffect(()=>{function e(){t()}return nD.Y5.fromFullscreen.on("finishedEditingShapeWithText",e),()=>{nD.Y5.fromFullscreen.removeListener("finishedEditingShapeWithText",e)}},[t]),(0,i.jsx)(iB.vX,{onSkipClick:n,useCase:iF.f.PLAN,children:(0,i.jsx)(nR.Dv,{targetType:"canvas",targetKey:a,topPadding:-6,isBold:!0,autoWidth:!0,arrowPosition:iH.F_.BOTTOM,onTargetLost:r,children:(0,i.jsx)(iB.mI,{bodyText:(0,i.jsx)("span",{children:(0,I.tx)("figjam_onboarding_make_something.planning_ahead.what_are_you_working_on_this_month_rename_this_block_to_your_current_project",{boldText:(0,i.jsx)("b",{children:(0,I.tx)("figjam_onboarding_make_something.planning_ahead.what_are_you_working_on_this_month_rename_this_block_to_your_current_project_bold_text")})})})})})})}function ak(e){let[t]=s.useState(()=>aa("planningAheadProject")),{handleTargetLost:n}=(0,nR.Du)({shouldSkipConnectorModalAtom:iy.aG,skipConnectorModal:e.onClickPrimaryCta});return(0,i.jsx)(iB.vX,{onSkipClick:e.dismissModal,useCase:iF.f.PLAN,children:(0,i.jsx)(nR.Dv,{targetType:"canvas",targetKey:t,topPadding:-4,isBold:!0,autoWidth:!0,arrowPosition:iH.F_.LEFT_TITLE,onTargetLost:n,children:(0,i.jsx)(iB.mI,{bodyText:(0,I.tx)("figjam_onboarding_make_something.planning_ahead.you_can_resize_blocks_by_dragging_their_ends"),buttonText:(0,I.tx)("figjam_onboarding_make_something.brainstorm.next"),onButtonClick:e.onClickPrimaryCta})})})}function aw(e){let{handleTargetLost:t}=(0,nR.Du)({shouldSkipConnectorModalAtom:iy.aG,skipConnectorModal:e.onClickPrimaryCta}),n=(0,ai.L)();return(0,i.jsx)(iB.vX,{onSkipClick:e.dismissModal,useCase:iF.f.PLAN,children:(0,i.jsx)(nR.Dv,{targetType:"dom",targetKey:n?an.WB:an.BC,topPadding:n?2:-23,isBold:!0,autoWidth:!0,onTargetLost:t,children:(0,i.jsx)(iB.mI,{bodyText:(0,I.tx)("figjam_onboarding_make_something.planning_ahead.and_grab_more_shapes_as_needed_from_your_toolbar"),buttonText:(0,I.tx)("figjam_onboarding_make_something.brainstorm.next"),onButtonClick:e.onClickPrimaryCta})})})}function aE(e){let{onNext:t}=iY({...e,useCase:iF.f.PLAN});return(0,i.jsx)(nR.Dv,{targetType:"dom",targetKey:eY.v4,topPadding:-4,isBold:!0,autoWidth:!0,hasShadow:!0,children:(0,i.jsx)(nW,{titleText:(0,I.tx)("figjam_onboarding_make_something.planning_ahead.try_it_with_your_team"),bodyText:(0,I.tx)("figjam_onboarding_make_something.planning_ahead.share_this_board_and_your_whole_team_can_contribute"),buttonText:(0,I.tx)("figjam_onboarding_make_something.brainstorm.share_board"),onNext:t,onDismiss:e.dismissModal,imgSrc:iB.mN,isBold:!0})})}function aT(e){return(0,iB.rL)({useCase:iF.f.PLAN,stepName:"Intro",stepNum:1}),(0,i.jsx)(eK.h,{testId:e.testId,modalType:eZ.q3.SELF_CONTAINED,trackingContextName:`${iB.CM} - Planning Ahead - Intro`,userFlagOnShow:"figjam_editor_onboarded",element:av,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function aS(e){return(0,iB.rL)({useCase:iF.f.PLAN,stepName:"Section",stepNum:2}),(0,i.jsx)(eK.h,{testId:e.testId,modalType:eZ.q3.SELF_CONTAINED,trackingContextName:`${iB.CM} - Planning Ahead - Section`,userFlagOnShow:"figjam_editor_onboarded",element:ab,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function aI(e){return(0,iB.rL)({useCase:iF.f.PLAN,stepName:"Person",stepNum:3}),(0,i.jsx)(eK.h,{testId:e.testId,modalType:eZ.q3.SELF_CONTAINED,trackingContextName:`${iB.CM} - Planning Ahead - Person`,userFlagOnShow:"figjam_editor_onboarded",element:aC,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function aN(e){return(0,iB.rL)({useCase:iF.f.PLAN,stepName:"Project Name",stepNum:4}),(0,i.jsx)(eK.h,{testId:e.testId,modalType:eZ.q3.SELF_CONTAINED,trackingContextName:`${iB.CM} - Planning Ahead - Project Name`,userFlagOnShow:"figjam_editor_onboarded",element:aj,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function aA(e){return(0,iB.rL)({useCase:iF.f.PLAN,stepName:"Project Block",stepNum:5}),(0,i.jsx)(eK.h,{testId:e.testId,modalType:eZ.q3.SELF_CONTAINED,trackingContextName:`${iB.CM} - Planning Ahead - Project Block`,userFlagOnShow:"figjam_editor_onboarded",element:ak,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function aL(e){return(0,iB.rL)({useCase:iF.f.PLAN,stepName:"Shape",stepNum:6}),(0,i.jsx)(eK.h,{testId:e.testId,modalType:eZ.q3.SELF_CONTAINED,trackingContextName:`${iB.CM} - Planning Ahead - Shape`,userFlagOnShow:"figjam_editor_onboarded",element:aw,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function aM(e){let t=(0,nF.O)();return(0,iB.rL)({useCase:iF.f.PLAN,stepName:"Share",stepNum:7}),(0,i.jsx)(eK.h,{testId:e.testId,modalType:eZ.q3.SELF_CONTAINED,trackingContextName:`${iB.CM} - Planning Ahead - Share`,userFlagOnShow:"figjam_editor_onboarded",element:aE,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:()=>{t({eventName:"msv2_completed",useCase:iF.f.PLAN}),e.onClose()},onManualDismiss:e.onManualDismiss})}function aO(e){return s.useEffect(()=>{!function(){var e,t,n;let i=(0,z.getActiveTSSceneGraph)().getCurrentPage();if(i){if(i.childCount>=1){let t=i.childrenNodes[0];t?.type==="SHAPE_WITH_TEXT"&&(e=t.guid,as.teamChartName=e)}if(i.childCount>=2){let e=i.childrenNodes[1];e?.type==="ROUNDED_RECTANGLE"&&(t=e.guid,as.teamChartImage=t)}if(i.childCount>=5){let e=i.childrenNodes[4];e?.type==="SHAPE_WITH_TEXT"&&(n=e.guid,as.teamChartQuickCreate=n)}}}()},[]),(0,i.jsx)(iB.vX,{onSkipClick:e.dismissModal,useCase:iF.f.TEAM,children:(0,i.jsx)(iB.wV,{bodyText:(0,i.jsx)("span",{className:si.R9,children:(0,I.tx)("figjam_onboarding_make_something.team_chart.in_fig_jam_you_can_diagram_all_sorts_of_things_here_s_an_example",{boldText:(0,i.jsx)("b",{children:(0,I.tx)("figjam_onboarding_make_something.team_chart.in_fig_jam_you_can_diagram_all_sorts_of_things_here_s_an_example_bold_text")})})}),buttonText:(0,I.tx)("figjam_onboarding_make_something.brainstorm.go_on"),onButtonClick:e.onClickPrimaryCta,svg:sl.A})})}function aR(e){let{onClickPrimaryCta:t,dismissModal:n}=e,[a]=s.useState(()=>aa("teamChartName")),{handleTargetLost:r}=(0,nR.Du)({shouldSkipConnectorModalAtom:iy.aG,skipConnectorModal:e.onClickPrimaryCta});return s.useEffect(()=>{function e(){t()}return nD.Y5.fromFullscreen.on("finishedEditingShapeWithText",e),()=>{nD.Y5.fromFullscreen.removeListener("finishedEditingShapeWithText",e)}},[t]),(0,i.jsx)(iB.vX,{onSkipClick:n,useCase:iF.f.TEAM,children:(0,i.jsx)(nR.Dv,{targetType:"canvas",targetKey:a,topPadding:-6,isBold:!0,autoWidth:!0,arrowPosition:iH.F_.BOTTOM,onTargetLost:r,children:(0,i.jsx)(iB.mI,{bodyText:(0,i.jsx)("span",{children:(0,I.tx)("figjam_onboarding_make_something.team_chart.double_click_this_text_to_type_in_the_manager_s_name_go_ahead_try_it",{boldText:(0,i.jsx)("b",{children:(0,I.tx)("figjam_onboarding_make_something.team_chart.double_click_this_text_to_type_in_the_manager_s_name_go_ahead_try_it_bold_text")})})})})})})}function aP(e){let[t]=s.useState(()=>aa("teamChartImage")),{handleTargetLost:n}=(0,nR.Du)({shouldSkipConnectorModalAtom:iy.aG,skipConnectorModal:e.onClickPrimaryCta});return(0,i.jsx)(iB.vX,{onSkipClick:e.dismissModal,useCase:iF.f.TEAM,children:(0,i.jsx)(nR.Dv,{targetType:"canvas",targetKey:t,topPadding:-4,isBold:!0,autoWidth:!0,arrowPosition:iH.F_.LEFT_TITLE,onTargetLost:n,children:(0,i.jsx)(iB.mI,{bodyText:(0,i.jsx)("span",{children:(0,I.tx)("figjam_onboarding_make_something.team_chart.you_can_add_images_by_simply_dragging_them_into_fig_jam")}),buttonText:(0,I.tx)("figjam_onboarding_make_something.brainstorm.next"),onButtonClick:e.onClickPrimaryCta})})})}function aD(e){let{onClickPrimaryCta:t,dismissModal:n}=e,[a]=s.useState(()=>aa("teamChartQuickCreate")),{handleTargetLost:r}=(0,nR.Du)({shouldSkipConnectorModalAtom:iy.aG,skipConnectorModal:e.onClickPrimaryCta});return s.useEffect(()=>{function e(){t()}return nD.Y5.fromFullscreen.on("quickCreate",e),()=>{nD.Y5.fromFullscreen.removeListener("quickCreate",e)}},[t]),(0,i.jsx)(iB.vX,{onSkipClick:n,useCase:iF.f.TEAM,children:(0,i.jsx)(nR.Dv,{targetType:"canvas",targetKey:a,topPadding:-4,isBold:!0,autoWidth:!0,arrowPosition:iH.F_.RIGHT_TITLE,onTargetLost:r,children:(0,i.jsx)(iB.mI,{bodyText:(0,i.jsx)("span",{children:(0,I.tx)("figjam_onboarding_make_something.team_chart.adding_to_a_diagram_is_simple_hover_over_a_shape_and_click_this_button_try_it",{boldText:(0,i.jsx)("b",{children:(0,I.tx)("figjam_onboarding_make_something.team_chart.adding_to_a_diagram_is_simple_hover_over_a_shape_and_click_this_button_try_it_bold_text")})})})})})})}function aF(e){let{handleTargetLost:t}=(0,nR.Du)({shouldSkipConnectorModalAtom:iy.aG,skipConnectorModal:e.onClickPrimaryCta}),n=(0,ai.L)();return(0,i.jsx)(iB.vX,{onSkipClick:e.dismissModal,useCase:iF.f.TEAM,children:(0,i.jsx)(nR.Dv,{targetType:"dom",targetKey:n?an.WB:an.BC,topPadding:n?2:-23,isBold:!0,autoWidth:!0,onTargetLost:t,children:(0,i.jsx)(iB.mI,{bodyText:(0,i.jsx)("span",{children:(0,I.tx)("figjam_onboarding_make_something.team_chart.you_can_also_grab_more_shapes_from_here")}),buttonText:(0,I.tx)("figjam_onboarding_make_something.brainstorm.next"),onButtonClick:e.onClickPrimaryCta})})})}function az(e){let{handleTargetLost:t}=(0,nR.Du)({shouldSkipConnectorModalAtom:iy.aG,skipConnectorModal:e.onClickPrimaryCta}),n=(0,ai.L)();return(0,i.jsx)(iB.vX,{onSkipClick:e.dismissModal,useCase:iF.f.TEAM,children:(0,i.jsx)(nR.Dv,{targetType:"dom",targetKey:an.Nr,topPadding:n?-1:void 0,isBold:!0,autoWidth:!0,onTargetLost:t,children:(0,i.jsx)(iB.mI,{bodyText:(0,i.jsx)("span",{children:(0,I.tx)("figjam_onboarding_make_something.team_chart.and_use_the_connector_tool_to_connect_any_two_things_together")}),buttonText:(0,I.tx)("figjam_onboarding_make_something.brainstorm.next"),onButtonClick:e.onClickPrimaryCta})})})}function aB(e){let{onNext:t}=iY({...e,useCase:iF.f.TEAM});return(0,i.jsx)(nR.Dv,{targetType:"dom",targetKey:eY.v4,topPadding:-4,isBold:!0,autoWidth:!0,hasShadow:!0,children:(0,i.jsx)(nW,{titleText:(0,I.tx)("figjam_onboarding_make_something.team_chart.diagram_together"),bodyText:(0,i.jsx)("span",{children:(0,I.tx)("figjam_onboarding_make_something.team_chart.share_this_board_and_your_whole_team_can_pitch_in")}),buttonText:(0,I.tx)("figjam_onboarding_make_something.brainstorm.share_board"),onNext:t,onDismiss:e.dismissModal,imgSrc:iB.mN,isBold:!0})})}function aG(e){return(0,iB.rL)({useCase:iF.f.TEAM,stepName:"Intro",stepNum:1}),(0,i.jsx)(eK.h,{testId:e.testId,modalType:eZ.q3.SELF_CONTAINED,trackingContextName:`${iB.CM} - Team Chart - Intro`,userFlagOnShow:"figjam_editor_onboarded",element:aO,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function aU(e){return(0,iB.rL)({useCase:iF.f.TEAM,stepName:"Name",stepNum:2}),(0,i.jsx)(eK.h,{testId:e.testId,modalType:eZ.q3.SELF_CONTAINED,trackingContextName:`${iB.CM} - Team Chart - Name`,userFlagOnShow:"figjam_editor_onboarded",element:aR,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function aV(e){return(0,iB.rL)({useCase:iF.f.TEAM,stepName:"Image",stepNum:3}),(0,i.jsx)(eK.h,{testId:e.testId,modalType:eZ.q3.SELF_CONTAINED,trackingContextName:`${iB.CM} - Team Chart - Image`,userFlagOnShow:"figjam_editor_onboarded",element:aP,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function aH(e){return(0,iB.rL)({useCase:iF.f.TEAM,stepName:"Quick Create",stepNum:4}),(0,i.jsx)(eK.h,{testId:e.testId,modalType:eZ.q3.SELF_CONTAINED,trackingContextName:`${iB.CM} - Team Chart - Quick Create`,userFlagOnShow:"figjam_editor_onboarded",element:aD,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function aK(e){return(0,iB.rL)({useCase:iF.f.TEAM,stepName:"Shape",stepNum:5}),(0,i.jsx)(eK.h,{testId:e.testId,modalType:eZ.q3.SELF_CONTAINED,trackingContextName:`${iB.CM} - Team Chart - Shape`,userFlagOnShow:"figjam_editor_onboarded",element:aF,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function aW(e){return(0,iB.rL)({useCase:iF.f.TEAM,stepName:"Connector",stepNum:6}),(0,i.jsx)(eK.h,{testId:e.testId,modalType:eZ.q3.SELF_CONTAINED,trackingContextName:`${iB.CM} - Team Chart - Connector`,userFlagOnShow:"figjam_editor_onboarded",element:az,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function aq(e){let t=(0,nF.O)();return(0,iB.rL)({useCase:iF.f.TEAM,stepName:"Share",stepNum:7}),(0,i.jsx)(eK.h,{testId:e.testId,modalType:eZ.q3.SELF_CONTAINED,trackingContextName:`${iB.CM} - Team Chart - Share`,userFlagOnShow:"figjam_editor_onboarded",element:aB,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:()=>{t({eventName:"msv2_completed",useCase:iF.f.TEAM}),e.onClose()},onManualDismiss:e.onManualDismiss})}function aX(e){return s.useEffect(()=>{!function(){var e,t,n,i,s;let a=(0,z.getActiveTSSceneGraph)().getCurrentPage();if(a){if(a.childCount>=1){let t=a.childrenNodes[0];t?.type==="SECTION"&&(e=t.guid,as.teamUpdatesSection=e)}if(a.childCount>=6){let e=a.childrenNodes[5];e?.type==="WIDGET"&&(t=e.guid,as.teamUpdatesPhotoBooth=t)}if(a.childCount>=4){let e=a.childrenNodes[3];e?.type==="TEXT"&&(n=e.guid,as.teamUpdatesUpdates=n)}if(a.childCount>=5){let e=a.childrenNodes[4];e?.type==="TEXT"&&(i=e.guid,as.teamUpdatesImportantDates=i)}if(a.childCount>=1){let e=a.childrenNodes[0];if(e?.type==="SECTION"&&e.childCount>=2){let t=e.childrenNodes[1];t?.type==="STICKY"&&(s=t.guid,as.teamUpdatesSticky=s)}}}}()},[]),(0,i.jsx)(iB.vX,{onSkipClick:e.dismissModal,useCase:iF.f.UPDATES,children:(0,i.jsx)(iB.wV,{bodyText:(0,i.jsx)("span",{className:si.R9,children:(0,I.tx)("figjam_onboarding_make_something.team_updates.fig_jam_s_great_for_team_syncs_here_s_how_it_works",{boldText:(0,i.jsx)("b",{children:(0,I.tx)("figjam_onboarding_make_something.team_updates.fig_jam_s_great_for_team_syncs_here_s_how_it_works_bold_text")})})}),buttonText:(0,I.tx)("figjam_onboarding_make_something.brainstorm.go_on"),onButtonClick:e.onClickPrimaryCta,svg:so.A})})}function aY(e){let[t]=s.useState(()=>aa("teamUpdatesSection")),{handleTargetLost:n}=(0,nR.Du)({shouldSkipConnectorModalAtom:iy.aG,skipConnectorModal:e.onClickPrimaryCta});return(0,i.jsx)(iB.vX,{onSkipClick:e.dismissModal,useCase:iF.f.UPDATES,children:(0,i.jsx)(nR.Dv,{targetType:"canvas",targetKey:t,topPadding:-6,isBold:!0,autoWidth:!0,arrowPosition:iH.F_.BOTTOM,onTargetLost:n,children:(0,i.jsx)(iB.mI,{bodyText:(0,i.jsx)("span",{children:(0,I.tx)("figjam_onboarding_make_something.team_updates.each_person_gets_a_row_of_their_own_for_sharing_updates_and_priorities")}),buttonText:(0,I.tx)("figjam_onboarding_make_something.brainstorm.next"),onButtonClick:e.onClickPrimaryCta})})})}function aZ(e){let[t]=s.useState(()=>aa("teamUpdatesPhotoBooth")),{handleTargetLost:n}=(0,nR.Du)({shouldSkipConnectorModalAtom:iy.aG,skipConnectorModal:e.onClickPrimaryCta});return(0,i.jsx)(iB.vX,{onSkipClick:e.dismissModal,useCase:iF.f.UPDATES,children:(0,i.jsx)(nR.Dv,{targetType:"canvas",targetKey:t,topPadding:-6,isBold:!0,autoWidth:!0,arrowPosition:iH.F_.BOTTOM,onTargetLost:n,children:(0,i.jsx)(iB.mI,{bodyText:(0,i.jsx)("span",{children:(0,I.tx)("figjam_onboarding_make_something.team_updates.take_a_selfie_then_drag_it_into_whichever_row_you_d_like_try_and_click_the_red_dot",{boldText:(0,i.jsx)("b",{children:(0,I.tx)("figjam_onboarding_make_something.team_updates.take_a_selfie_then_drag_it_into_whichever_row_you_d_like_try_and_click_the_red_dot_bold_text")})})}),buttonText:(0,I.tx)("figjam_onboarding_make_something.brainstorm.next"),onButtonClick:e.onClickPrimaryCta})})})}function aJ(e){let[t]=s.useState(()=>aa("teamUpdatesUpdates")),{handleTargetLost:n}=(0,nR.Du)({shouldSkipConnectorModalAtom:iy.aG,skipConnectorModal:e.onClickPrimaryCta});return(0,i.jsx)(iB.vX,{onSkipClick:e.dismissModal,useCase:iF.f.UPDATES,children:(0,i.jsx)(nR.Dv,{targetType:"canvas",targetKey:t,topPadding:-5,isBold:!0,autoWidth:!0,arrowPosition:iH.F_.BOTTOM,onTargetLost:n,children:(0,i.jsx)(iB.mI,{bodyText:(0,i.jsx)("span",{children:(0,I.tx)("figjam_onboarding_make_something.team_updates.your_whole_team_can_share_updates_here")}),buttonText:(0,I.tx)("figjam_onboarding_make_something.brainstorm.next"),onButtonClick:e.onClickPrimaryCta})})})}function aQ(e){let[t]=s.useState(()=>aa("teamUpdatesImportantDates")),{handleTargetLost:n}=(0,nR.Du)({shouldSkipConnectorModalAtom:iy.aG,skipConnectorModal:e.onClickPrimaryCta});return(0,i.jsx)(iB.vX,{onSkipClick:e.dismissModal,useCase:iF.f.UPDATES,children:(0,i.jsx)(nR.Dv,{targetType:"canvas",targetKey:t,topPadding:-5,isBold:!0,autoWidth:!0,arrowPosition:iH.F_.BOTTOM,onTargetLost:n,children:(0,i.jsx)(iB.mI,{bodyText:(0,i.jsx)("span",{children:(0,I.tx)("figjam_onboarding_make_something.team_updates.and_can_add_important_dates_to_the_calendar_over_here")}),buttonText:(0,I.tx)("figjam_onboarding_make_something.brainstorm.next"),onButtonClick:e.onClickPrimaryCta})})})}function a$(e){let{onClickPrimaryCta:t,dismissModal:n}=e,[a]=s.useState(()=>aa("teamUpdatesSticky")),{handleTargetLost:r}=(0,nR.Du)({shouldSkipConnectorModalAtom:iy.aG,skipConnectorModal:e.onClickPrimaryCta});return s.useEffect(()=>{function e(){t()}return nD.Y5.fromFullscreen.on("finishedEditingSticky",e),()=>{nD.Y5.fromFullscreen.removeListener("finishedEditingSticky",e)}},[t]),(0,i.jsx)(iB.vX,{onSkipClick:n,useCase:iF.f.UPDATES,children:(0,i.jsx)(nR.Dv,{targetType:"canvas",targetKey:a,topPadding:-16,isBold:!0,autoWidth:!0,arrowPosition:iH.F_.TOP,onTargetLost:r,children:(0,i.jsx)(iB.mI,{bodyText:(0,i.jsx)("span",{children:(0,I.tx)("figjam_onboarding_make_something.team_updates.give_it_a_go_try_typing_your_priorities_in_this_sticky_note",{boldText:(0,i.jsx)("b",{children:(0,I.tx)("figjam_onboarding_make_something.team_updates.give_it_a_go_try_typing_your_priorities_in_this_sticky_note_bold_text")})})})})})})}function a0(e){let{onNext:t}=iY({...e,useCase:iF.f.UPDATES});return(0,i.jsx)(nR.Dv,{targetType:"dom",targetKey:eY.v4,topPadding:-4,isBold:!0,autoWidth:!0,hasShadow:!0,children:(0,i.jsx)(nW,{titleText:(0,I.tx)("figjam_onboarding_make_something.brainstorm.when_you_re_ready"),bodyText:(0,I.tx)("figjam_onboarding_make_something.team_updates.invite_your_teammates_and_run_a_quick_team_check_in"),buttonText:(0,I.tx)("figjam_onboarding_make_something.brainstorm.share_board"),onNext:t,onDismiss:e.dismissModal,imgSrc:iB.mN,isBold:!0})})}function a1(e){return(0,iB.rL)({useCase:iF.f.UPDATES,stepName:"Intro",stepNum:1}),(0,i.jsx)(eK.h,{testId:e.testId,modalType:eZ.q3.SELF_CONTAINED,trackingContextName:`${iB.CM} - Team Updates - Intro`,userFlagOnShow:"figjam_editor_onboarded",element:aX,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function a2(e){return(0,iB.rL)({useCase:iF.f.UPDATES,stepName:"Section",stepNum:2}),(0,i.jsx)(eK.h,{testId:e.testId,modalType:eZ.q3.SELF_CONTAINED,trackingContextName:`${iB.CM} - Team Updates - Section`,userFlagOnShow:"figjam_editor_onboarded",element:aY,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function a3(e){return(0,iB.rL)({useCase:iF.f.UPDATES,stepName:"Photo Booth",stepNum:3}),(0,i.jsx)(eK.h,{testId:e.testId,modalType:eZ.q3.SELF_CONTAINED,trackingContextName:`${iB.CM} - Team Updates - Photo Booth`,userFlagOnShow:"figjam_editor_onboarded",element:aZ,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function a5(e){return(0,iB.rL)({useCase:iF.f.UPDATES,stepName:"Updates",stepNum:4}),(0,i.jsx)(eK.h,{testId:e.testId,modalType:eZ.q3.SELF_CONTAINED,trackingContextName:`${iB.CM} - Team Updates - Updates`,userFlagOnShow:"figjam_editor_onboarded",element:aJ,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function a4(e){return(0,iB.rL)({useCase:iF.f.UPDATES,stepName:"Important Dates",stepNum:5}),(0,i.jsx)(eK.h,{testId:e.testId,modalType:eZ.q3.SELF_CONTAINED,trackingContextName:`${iB.CM} - Team Updates - Important Dates`,userFlagOnShow:"figjam_editor_onboarded",element:aQ,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function a6(e){return(0,iB.rL)({useCase:iF.f.UPDATES,stepName:"Sticky",stepNum:6}),(0,i.jsx)(eK.h,{testId:e.testId,modalType:eZ.q3.SELF_CONTAINED,trackingContextName:`${iB.CM} - Team Updates - Sticky`,userFlagOnShow:"figjam_editor_onboarded",element:a$,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function a7(e){let t=(0,nF.O)();return(0,iB.rL)({useCase:iF.f.UPDATES,stepName:"Share",stepNum:7}),(0,i.jsx)(eK.h,{testId:e.testId,modalType:eZ.q3.SELF_CONTAINED,trackingContextName:`${iB.CM} - Team Updates - Share`,userFlagOnShow:"figjam_editor_onboarded",element:a0,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:()=>{t({eventName:"msv2_completed",useCase:iF.f.UPDATES}),e.onClose()},onManualDismiss:e.onManualDismiss})}function a8(e){switch(e){case sn.BRAINSTORM_TEMPLATE_BUTTON_INTERACTED:return[am,ah,af,ag,ax,a_,ay,a9];case sn.TEAM_UPDATES_TEMPLATE_BUTTON_INTERACTED:return[a1,a2,a3,a5,a4,a6,a7,a9];case sn.PLANNING_AHEAD_TEMPLATE_BUTTON_INTERACTED:return[aT,aS,aI,aN,aA,aL,aM,a9];case sn.TEAM_CHART_TEMPLATE_BUTTON_INTERACTED:return[aG,aU,aV,aH,aK,aW,aq,a9];default:return[]}}function a9({onClickPrimaryCta:e}){let t=(0,p.d4)(e=>e.modalShown),n=(0,s.useRef)(t);return(0,s.useEffect)(()=>{!t&&n.current&&(e(),(0,nM.YQ)({id:eY.P7}))},[e,t]),(0,i.jsx)(i.Fragment,{})}function re(){let[e,t]=s.useState([]),n=(0,T.Xr)(iy.w),{complete:a,uniqueId:r,show:l,isShowing:o}=(0,f.e)({overlay:y.Njd,priority:g.N.OVERRIDING_MODAL}),d=s.useCallback(()=>{a(),n(iy.tX.COMPLETED)},[a,n]);return((0,ek.E)(r,sn.BRAINSTORM_TEMPLATE_BUTTON_INTERACTED,()=>{t(a8(sn.BRAINSTORM_TEMPLATE_BUTTON_INTERACTED)),n(iy.tX.USE_CASE_STEPS),l()}),(0,ek.E)(r,sn.TEAM_UPDATES_TEMPLATE_BUTTON_INTERACTED,()=>{t(a8(sn.TEAM_UPDATES_TEMPLATE_BUTTON_INTERACTED)),n(iy.tX.USE_CASE_STEPS),l()}),(0,ek.E)(r,sn.PLANNING_AHEAD_TEMPLATE_BUTTON_INTERACTED,()=>{t(a8(sn.PLANNING_AHEAD_TEMPLATE_BUTTON_INTERACTED)),n(iy.tX.USE_CASE_STEPS),l()}),(0,ek.E)(r,sn.TEAM_CHART_TEMPLATE_BUTTON_INTERACTED,()=>{t(a8(sn.TEAM_CHART_TEMPLATE_BUTTON_INTERACTED)),n(iy.tX.USE_CASE_STEPS),l()}),ix({overlayUniqueId:r,afterReset:a}),0===e.length)?null:(0,i.jsx)(i_,{steps:e,onComplete:d,isShowing:o,overlayUniqueId:r})}var rt=n(430243),rn=n(310725),ri=n(630540),rs=n(911990),ra=n(906356),rr=n(454967),rl=n(483200),ro=n(745529),rd=n(959834),rc=n(354174);function ru(){return(0,i.jsxs)("svg",{width:"146",height:"191",viewBox:"0 0 146 191",fill:"none",children:[(0,i.jsx)("path",{d:"M35 153H3C1.34315 153 0 154.343 0 156V188C0 189.657 1.34315 191 3 191H35C36.6569 191 38 189.657 38 188V156C38 154.343 36.6569 153 35 153Z",fill:"#007BE5"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M23.875 166.25C22.4943 166.25 21.375 167.369 21.375 168.75C21.375 170.131 22.4943 171.25 23.875 171.25C25.2557 171.25 26.375 170.131 26.375 168.75C26.375 167.369 25.2557 166.25 23.875 166.25ZM19.875 168.75C19.875 166.541 21.6659 164.75 23.875 164.75C26.0841 164.75 27.875 166.541 27.875 168.75C27.875 170.3 26.9937 171.644 25.7049 172.308C28.337 173.03 30.3125 175.271 30.3125 178.012V179.312V180.062H29.5625H20.5625H19.8125H18.1875H8.4375H7.6875V179.312V178.012C7.6875 175.271 9.663 173.03 12.2951 172.308C11.0063 171.644 10.125 170.3 10.125 168.75C10.125 166.541 11.9159 164.75 14.125 164.75C16.3341 164.75 18.125 166.541 18.125 168.75C18.125 170.3 17.2437 171.644 15.9549 172.308C17.1449 172.634 18.2008 173.271 19.0005 174.125C19.7985 173.271 20.8514 172.633 22.0433 172.307C20.7555 171.642 19.875 170.299 19.875 168.75ZM9.1875 178.012C9.1875 175.617 11.3334 173.562 14.125 173.562C16.9166 173.562 19.0625 175.617 19.0625 178.012V178.562H18.1875H9.1875V178.012ZM20.5625 178.562H28.8125V178.012C28.8125 175.617 26.6666 173.562 23.875 173.562C22.2296 173.562 20.7911 174.286 19.8997 175.374C20.323 176.164 20.5625 177.058 20.5625 178.012V178.562ZM11.625 168.75C11.625 167.369 12.7443 166.25 14.125 166.25C15.5057 166.25 16.625 167.369 16.625 168.75C16.625 170.131 15.5057 171.25 14.125 171.25C12.7443 171.25 11.625 170.131 11.625 168.75Z",fill:"white"}),(0,i.jsx)("path",{d:"M89 153H57C55.3431 153 54 154.343 54 156V188C54 189.657 55.3431 191 57 191H89C90.6569 191 92 189.657 92 188V156C92 154.343 90.6569 153 89 153Z",fill:"#9747FF"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M77.875 166.25C76.4943 166.25 75.375 167.369 75.375 168.75C75.375 170.131 76.4943 171.25 77.875 171.25C79.2557 171.25 80.375 170.131 80.375 168.75C80.375 167.369 79.2557 166.25 77.875 166.25ZM73.875 168.75C73.875 166.541 75.6659 164.75 77.875 164.75C80.0841 164.75 81.875 166.541 81.875 168.75C81.875 170.3 80.9937 171.644 79.7049 172.308C82.337 173.03 84.3125 175.271 84.3125 178.012V179.312V180.062H83.5625H74.5625H73.8125H72.1875H62.4375H61.6875V179.312V178.012C61.6875 175.271 63.663 173.03 66.2951 172.308C65.0063 171.644 64.125 170.3 64.125 168.75C64.125 166.541 65.9159 164.75 68.125 164.75C70.3341 164.75 72.125 166.541 72.125 168.75C72.125 170.3 71.2437 171.644 69.9549 172.308C71.1449 172.634 72.2008 173.271 73.0005 174.125C73.7985 173.271 74.8514 172.633 76.0433 172.307C74.7555 171.642 73.875 170.299 73.875 168.75ZM63.1875 178.012C63.1875 175.617 65.3334 173.562 68.125 173.562C70.9166 173.562 73.0625 175.617 73.0625 178.012V178.562H72.1875H63.1875V178.012ZM74.5625 178.562H82.8125V178.012C82.8125 175.617 80.6666 173.562 77.875 173.562C76.2296 173.562 74.7911 174.286 73.8997 175.374C74.323 176.164 74.5625 177.058 74.5625 178.012V178.562ZM65.625 168.75C65.625 167.369 66.7443 166.25 68.125 166.25C69.5057 166.25 70.625 167.369 70.625 168.75C70.625 170.131 69.5057 171.25 68.125 171.25C66.7443 171.25 65.625 170.131 65.625 168.75Z",fill:"white"}),(0,i.jsx)("path",{d:"M143 153H111C109.343 153 108 154.343 108 156V188C108 189.657 109.343 191 111 191H143C144.657 191 146 189.657 146 188V156C146 154.343 144.657 153 143 153Z",fill:"#FFCD29"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M131.875 166.25C130.494 166.25 129.375 167.369 129.375 168.75C129.375 170.131 130.494 171.25 131.875 171.25C133.256 171.25 134.375 170.131 134.375 168.75C134.375 167.369 133.256 166.25 131.875 166.25ZM127.875 168.75C127.875 166.541 129.666 164.75 131.875 164.75C134.084 164.75 135.875 166.541 135.875 168.75C135.875 170.3 134.994 171.644 133.705 172.308C136.337 173.03 138.312 175.271 138.312 178.012V179.312V180.062H137.562H128.562H127.812H126.188H116.438H115.688V179.312V178.012C115.688 175.271 117.663 173.03 120.295 172.308C119.006 171.644 118.125 170.3 118.125 168.75C118.125 166.541 119.916 164.75 122.125 164.75C124.334 164.75 126.125 166.541 126.125 168.75C126.125 170.3 125.244 171.644 123.955 172.308C125.145 172.634 126.201 173.271 127 174.125C127.799 173.271 128.851 172.633 130.043 172.307C128.755 171.642 127.875 170.299 127.875 168.75ZM117.188 178.012C117.188 175.617 119.333 173.562 122.125 173.562C124.917 173.562 127.062 175.617 127.062 178.012V178.562H126.188H117.188V178.012ZM128.562 178.562H136.812V178.012C136.812 175.617 134.667 173.562 131.875 173.562C130.23 173.562 128.791 174.286 127.9 175.374C128.323 176.164 128.562 177.058 128.562 178.012V178.562ZM119.625 168.75C119.625 167.369 120.744 166.25 122.125 166.25C123.506 166.25 124.625 167.369 124.625 168.75C124.625 170.131 123.506 171.25 122.125 171.25C120.744 171.25 119.625 170.131 119.625 168.75Z",fill:"white"}),(0,i.jsx)("path",{d:"M112.581 1L125 13.7668V113H20V1H112.581Z",fill:"white"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19.5 0.5H112.792L125.5 13.5637V113.5H19.5V0.5ZM20.5 1.5V112.5H124.5V14.2668H112.081V1.5H20.5ZM113.081 2.23108L123.816 13.2668H113.081V2.23108Z",fill:"black",fillOpacity:"0.8"}),(0,i.jsx)("path",{d:"M38 71C41.866 71 45 67.866 45 64C45 60.134 41.866 57 38 57C34.134 57 31 60.134 31 64C31 67.866 34.134 71 38 71Z",fill:"#56CCF2",fillOpacity:"0.8"}),(0,i.jsx)("path",{d:"M60 71C63.866 71 67 67.866 67 64C67 60.134 63.866 57 60 57C56.134 57 53 60.134 53 64C53 67.866 56.134 71 60 71Z",fill:"#EB5757"}),(0,i.jsx)("path",{d:"M82 71C85.866 71 89 67.866 89 64C89 60.134 85.866 57 82 57C78.134 57 75 60.134 75 64C75 67.866 78.134 71 82 71Z",fill:"#F2994A"}),(0,i.jsx)("path",{d:"M104 71C107.866 71 111 67.866 111 64C111 60.134 107.866 57 104 57C100.134 57 97 60.134 97 64C97 67.866 100.134 71 104 71Z",fill:"#F2C94C"}),(0,i.jsx)("path",{d:"M38 49C41.866 49 45 45.866 45 42C45 38.134 41.866 35 38 35C34.134 35 31 38.134 31 42C31 45.866 34.134 49 38 49Z",fill:"#333333"}),(0,i.jsx)("path",{d:"M60 49C63.866 49 67 45.866 67 42C67 38.134 63.866 35 60 35C56.134 35 53 38.134 53 42C53 45.866 56.134 49 60 49Z",fill:"#4F4F4F"}),(0,i.jsx)("path",{d:"M82 49C85.866 49 89 45.866 89 42C89 38.134 85.866 35 82 35C78.134 35 75 38.134 75 42C75 45.866 78.134 49 82 49Z",fill:"#828282"}),(0,i.jsx)("path",{d:"M104 49C107.866 49 111 45.866 111 42C111 38.134 107.866 35 104 35C100.134 35 97 38.134 97 42C97 45.866 100.134 49 104 49Z",fill:"#E0E0E0"}),(0,i.jsx)("path",{d:"M36.66 20L36.1 18.36H33.26L32.68 20H31.05L33.72 13H35.69L38.34 20H36.66ZM33.7 17.1H35.67L35.15 15.58C34.99 15.11 34.97 14.59 34.96 13.85H34.42C34.41 14.59 34.4 15.11 34.23 15.59L33.7 17.1ZM39.9023 21.95C38.9523 21.95 38.6523 21.49 38.6523 21.01C38.6523 20.61 38.9823 20.32 39.3423 20.21V19.75C39.0223 19.66 38.7723 19.44 38.7723 19.08C38.7723 18.54 39.1623 18.28 39.5923 18.14V17.69C39.2423 17.44 39.0223 17.16 39.0223 16.65C39.0223 15.6 39.9323 14.85 41.1023 14.85C41.9223 14.85 42.6723 15.17 42.9323 15.9H43.3623C43.4423 15.17 43.6723 15 44.1523 15H44.4123V16.08H43.8623C43.5523 16.08 43.4723 16.15 43.4123 16.66L43.4023 16.75C43.2823 17.83 42.4123 18.49 41.2423 18.49C40.8723 18.49 40.5023 18.45 40.2023 18.32C39.9223 18.4 39.8223 18.51 39.8223 18.67C39.8223 18.89 40.0323 18.89 40.3223 18.89H42.4723C43.5423 18.89 44.2123 19.59 44.2123 20.4C44.2123 21.41 43.4523 21.95 42.4723 21.95H39.9023ZM41.2323 17.56C41.7623 17.56 42.1123 17.22 42.1123 16.71C42.1123 16.19 41.7623 15.81 41.2323 15.81C40.7023 15.81 40.3523 16.19 40.3523 16.71C40.3523 17.22 40.7023 17.56 41.2323 17.56ZM40.2423 20.92H42.1923C42.6623 20.92 42.8123 20.73 42.8123 20.45C42.8123 20.22 42.6623 20 42.1923 20H40.0023C39.8823 20.07 39.7423 20.25 39.7423 20.45C39.7423 20.77 39.9723 20.92 40.2423 20.92Z",fill:"black",fillOpacity:"0.8"}),(0,i.jsx)("path",{d:"M54.62 20L53.97 18.15H50.89L50.23 20H49.15L51.78 13H53.16L55.74 20H54.62ZM51.22 17.23H53.64L52.97 15.33C52.77 14.75 52.66 14.35 52.65 13.7H52.23C52.21 14.35 52.11 14.76 51.9 15.33L51.22 17.23ZM57.4441 21.95C56.5441 21.95 56.2441 21.45 56.2441 21.05C56.2441 20.6 56.5041 20.27 56.9341 20.08V19.72C56.6641 19.63 56.4441 19.41 56.4441 19.11C56.4441 18.73 56.7041 18.43 57.1841 18.23V17.87C56.8741 17.62 56.6441 17.28 56.6441 16.64C56.6441 15.7 57.4141 14.9 58.5441 14.9C59.5941 14.9 60.0441 15.46 60.2141 15.87H60.5641C60.6041 15.4 60.8441 15.04 61.3241 15.04H61.6641V15.82H61.2541C60.8341 15.82 60.6741 15.92 60.6341 16.49L60.6141 16.73C60.5241 17.85 59.7541 18.57 58.6441 18.57C58.3041 18.57 57.9841 18.53 57.7041 18.38C57.4341 18.49 57.2641 18.67 57.2641 18.85C57.2641 19.02 57.3641 19.17 57.7041 19.17H59.8541C60.8241 19.17 61.4541 19.73 61.4541 20.56C61.4541 21.49 60.7341 21.95 59.8741 21.95H57.4441ZM58.6441 17.83C59.2941 17.83 59.7141 17.4 59.7141 16.74C59.7141 16.09 59.2941 15.64 58.6441 15.64C57.9941 15.64 57.5741 16.09 57.5741 16.74C57.5741 17.4 57.9941 17.83 58.6441 17.83ZM57.8241 21.15H59.7541C60.1541 21.15 60.5041 21.04 60.5041 20.57C60.5041 20.1 60.1541 20 59.7541 20H57.4341C57.2741 20.1 57.0741 20.32 57.0741 20.63C57.0741 21.03 57.3441 21.15 57.8241 21.15Z",fill:"black",fillOpacity:"0.8"}),(0,i.jsx)("path",{d:"M67.4862 20H66.2205L68.5249 13.4545H69.9886L72.2962 20H71.0305L69.2823 14.7969H69.2312L67.4862 20ZM67.5277 17.4336H70.9794V18.386H67.5277V17.4336ZM75.1377 21.9432C74.7222 21.9432 74.3653 21.8867 74.067 21.7738C73.7687 21.663 73.529 21.5138 73.3479 21.3263C73.1668 21.1388 73.0411 20.9311 72.9708 20.7031L74.0127 20.4506C74.0596 20.5465 74.1277 20.6413 74.2172 20.7351C74.3067 20.831 74.4271 20.9098 74.5784 20.9716C74.7318 21.0355 74.9246 21.0675 75.1569 21.0675C75.485 21.0675 75.7566 20.9876 75.9718 20.8278C76.187 20.6701 76.2946 20.4102 76.2946 20.0479V19.1179H76.2371C76.1775 19.2372 76.0901 19.3597 75.975 19.4854C75.8621 19.6112 75.7119 19.7166 75.5244 19.8018C75.339 19.8871 75.1057 19.9297 74.8245 19.9297C74.4473 19.9297 74.1054 19.8413 73.7986 19.6644C73.4939 19.4854 73.251 19.2191 73.0699 18.8654C72.8909 18.5096 72.8014 18.0643 72.8014 17.5295C72.8014 16.9904 72.8909 16.5355 73.0699 16.1648C73.251 15.7919 73.4949 15.5096 73.8017 15.3178C74.1086 15.1239 74.4505 15.027 74.8277 15.027C75.1153 15.027 75.3518 15.076 75.5372 15.174C75.7247 15.2699 75.8738 15.386 75.9846 15.5224C76.0954 15.6566 76.1796 15.7834 76.2371 15.9027H76.301V15.0909H77.442V20.0799C77.442 20.4996 77.3419 20.8469 77.1416 21.1218C76.9413 21.3967 76.6675 21.6023 76.3202 21.7386C75.9729 21.875 75.5787 21.9432 75.1377 21.9432ZM75.1473 19.022C75.3923 19.022 75.6011 18.9624 75.7737 18.843C75.9463 18.7237 76.0773 18.5522 76.1668 18.3285C76.2563 18.1048 76.301 17.8363 76.301 17.5231C76.301 17.2141 76.2563 16.9435 76.1668 16.7113C76.0794 16.479 75.9495 16.299 75.7769 16.1712C75.6064 16.0412 75.3966 15.9762 75.1473 15.9762C74.8895 15.9762 74.6743 16.0433 74.5017 16.1776C74.3291 16.3118 74.1991 16.4961 74.1118 16.7305C74.0244 16.9627 73.9807 17.2269 73.9807 17.5231C73.9807 17.8235 74.0244 18.0866 74.1118 18.3125C74.2013 18.5362 74.3323 18.7109 74.5049 18.8366C74.6796 18.9602 74.8937 19.022 75.1473 19.022Z",fill:"black",fillOpacity:"0.8"}),(0,i.jsx)("path",{d:"M84.0611 20H83.2301L85.6335 13.4545H86.4517L88.8551 20H88.0241L86.0682 14.4901H86.017L84.0611 20ZM84.3679 17.4432H87.7173V18.1463H84.3679V17.4432ZM91.7989 21.9432C91.4346 21.9432 91.1213 21.8963 90.8593 21.8026C90.5972 21.7109 90.3788 21.5895 90.2041 21.4382C90.0315 21.2891 89.8941 21.1293 89.7918 20.9588L90.3927 20.5369C90.4608 20.6264 90.5471 20.7287 90.6515 20.8438C90.7559 20.9609 90.8987 21.0621 91.0798 21.1474C91.263 21.2347 91.5027 21.2784 91.7989 21.2784C92.1952 21.2784 92.5223 21.1825 92.7801 20.9908C93.0379 20.799 93.1668 20.4986 93.1668 20.0895V19.0923H93.1029C93.0475 19.1818 92.9687 19.2926 92.8664 19.4247C92.7662 19.5547 92.6213 19.6708 92.4317 19.7731C92.2442 19.8732 91.9907 19.9233 91.6711 19.9233C91.2748 19.9233 90.9189 19.8295 90.6036 19.642C90.2904 19.4545 90.0422 19.1818 89.8589 18.8239C89.6778 18.4659 89.5873 18.0312 89.5873 17.5199C89.5873 17.017 89.6757 16.5792 89.8525 16.2063C90.0294 15.8313 90.2755 15.5415 90.5908 15.337C90.9062 15.1303 91.2705 15.027 91.6838 15.027C92.0035 15.027 92.257 15.0803 92.4445 15.1868C92.6341 15.2912 92.779 15.4105 92.8792 15.5447C92.9814 15.6768 93.0603 15.7855 93.1157 15.8707H93.1924V15.0909H93.9211V20.1406C93.9211 20.5625 93.8252 20.9055 93.6334 21.1697C93.4438 21.4361 93.1881 21.631 92.8664 21.7546C92.5468 21.8803 92.191 21.9432 91.7989 21.9432ZM91.7733 19.2457C92.0759 19.2457 92.3316 19.1765 92.5404 19.038C92.7492 18.8995 92.9079 18.7003 93.0166 18.4403C93.1253 18.1804 93.1796 17.8693 93.1796 17.5071C93.1796 17.1534 93.1263 16.8413 93.0198 16.5707C92.9133 16.3001 92.7556 16.0881 92.5468 15.9347C92.338 15.7812 92.0802 15.7045 91.7733 15.7045C91.4537 15.7045 91.1874 15.7855 90.9743 15.9474C90.7634 16.1094 90.6047 16.3267 90.4981 16.5994C90.3937 16.8722 90.3415 17.1747 90.3415 17.5071C90.3415 17.848 90.3948 18.1495 90.5013 18.4116C90.61 18.6715 90.7698 18.8761 90.9807 19.0252C91.1938 19.1722 91.458 19.2457 91.7733 19.2457Z",fill:"black",fillOpacity:"0.8"}),(0,i.jsx)("path",{d:"M75.8419 93V88.6364H77.4399C77.7496 88.6364 78.006 88.6875 78.2091 88.7898C78.4122 88.8906 78.5642 89.0277 78.6651 89.201C78.7659 89.3729 78.8163 89.5668 78.8163 89.7827C78.8163 89.9645 78.783 90.1179 78.7162 90.2429C78.6494 90.3665 78.5599 90.4659 78.4477 90.5412C78.3369 90.6151 78.2148 90.669 78.0813 90.7031V90.7457C78.2261 90.7528 78.3675 90.7997 78.5053 90.8864C78.6445 90.9716 78.7595 91.093 78.8504 91.2507C78.9413 91.4084 78.9868 91.6001 78.9868 91.826C78.9868 92.049 78.9342 92.2493 78.8291 92.4268C78.7254 92.603 78.5649 92.7429 78.3476 92.8466C78.1303 92.9489 77.8526 93 77.5145 93H75.8419ZM76.5003 92.4354H77.4506C77.7659 92.4354 77.9918 92.3743 78.1281 92.2521C78.2645 92.13 78.3327 91.9773 78.3327 91.794C78.3327 91.6562 78.2979 91.5298 78.2283 91.4148C78.1587 91.2997 78.0592 91.2081 77.93 91.1399C77.8021 91.0717 77.6501 91.0376 77.474 91.0376H76.5003V92.4354ZM76.5003 90.5241H77.3824C77.5301 90.5241 77.6629 90.4957 77.7808 90.4389C77.9001 90.3821 77.9946 90.3026 78.0642 90.2003C78.1352 90.0966 78.1707 89.9744 78.1707 89.8338C78.1707 89.6534 78.1075 89.5021 77.9811 89.38C77.8547 89.2578 77.6608 89.1967 77.3994 89.1967H76.5003V90.5241ZM81.8197 91.6428V89.7273H82.4589V93H81.8325V92.4332H81.7984C81.7231 92.608 81.6024 92.7536 81.4362 92.87C81.2714 92.9851 81.0662 93.0426 80.8204 93.0426C80.6102 93.0426 80.4241 92.9964 80.2622 92.9041C80.1017 92.8104 79.9752 92.6719 79.8829 92.4886C79.792 92.3054 79.7465 92.0788 79.7465 91.8089V89.7273H80.3836V91.7322C80.3836 91.9553 80.4454 92.1328 80.569 92.2649C80.6926 92.397 80.8531 92.4631 81.0505 92.4631C81.1698 92.4631 81.2885 92.4332 81.4063 92.3736C81.5257 92.3139 81.6244 92.2237 81.7025 92.103C81.7821 91.9822 81.8211 91.8288 81.8197 91.6428ZM84.8726 89.7273V90.2386H83.085V89.7273H84.8726ZM83.5644 88.9432H84.2014V92.0391C84.2014 92.1626 84.2199 92.2557 84.2568 92.3182C84.2938 92.3793 84.3414 92.4212 84.3996 92.4439C84.4593 92.4652 84.5239 92.4759 84.5935 92.4759C84.6446 92.4759 84.6894 92.4723 84.7277 92.4652C84.7661 92.4581 84.7959 92.4524 84.8172 92.4482L84.9323 92.9744C84.8953 92.9886 84.8428 93.0028 84.7746 93.017C84.7064 93.0327 84.6212 93.0412 84.5189 93.0426C84.3513 93.0455 84.195 93.0156 84.0502 92.9531C83.9053 92.8906 83.7881 92.794 83.6986 92.6634C83.6091 92.5327 83.5644 92.3686 83.5644 92.1712V88.9432ZM87.135 89.7273V90.2386H85.3474V89.7273H87.135ZM85.8268 88.9432H86.4639V92.0391C86.4639 92.1626 86.4823 92.2557 86.5193 92.3182C86.5562 92.3793 86.6038 92.4212 86.662 92.4439C86.7217 92.4652 86.7863 92.4759 86.8559 92.4759C86.907 92.4759 86.9518 92.4723 86.9901 92.4652C87.0285 92.4581 87.0583 92.4524 87.0796 92.4482L87.1947 92.9744C87.1578 92.9886 87.1052 93.0028 87.037 93.017C86.9688 93.0327 86.8836 93.0412 86.7813 93.0426C86.6137 93.0455 86.4575 93.0156 86.3126 92.9531C86.1677 92.8906 86.0505 92.794 85.961 92.6634C85.8715 92.5327 85.8268 92.3686 85.8268 92.1712V88.9432ZM89.2131 93.0661C88.9063 93.0661 88.6386 92.9957 88.4099 92.8551C88.1812 92.7145 88.0036 92.5178 87.8772 92.2649C87.7508 92.0121 87.6876 91.7166 87.6876 91.3786C87.6876 91.0391 87.7508 90.7422 87.8772 90.4879C88.0036 90.2337 88.1812 90.0362 88.4099 89.8956C88.6386 89.755 88.9063 89.6847 89.2131 89.6847C89.52 89.6847 89.7877 89.755 90.0164 89.8956C90.2451 90.0362 90.4227 90.2337 90.5491 90.4879C90.6755 90.7422 90.7387 91.0391 90.7387 91.3786C90.7387 91.7166 90.6755 92.0121 90.5491 92.2649C90.4227 92.5178 90.2451 92.7145 90.0164 92.8551C89.7877 92.9957 89.52 93.0661 89.2131 93.0661ZM89.2153 92.5312C89.4141 92.5312 89.5789 92.4787 89.7096 92.3736C89.8403 92.2685 89.9369 92.1286 89.9994 91.9538C90.0633 91.7791 90.0952 91.5866 90.0952 91.3764C90.0952 91.1676 90.0633 90.9759 89.9994 90.8011C89.9369 90.625 89.8403 90.4837 89.7096 90.3771C89.5789 90.2706 89.4141 90.2173 89.2153 90.2173C89.015 90.2173 88.8488 90.2706 88.7167 90.3771C88.586 90.4837 88.4887 90.625 88.4248 90.8011C88.3623 90.9759 88.331 91.1676 88.331 91.3764C88.331 91.5866 88.3623 91.7791 88.4248 91.9538C88.4887 92.1286 88.586 92.2685 88.7167 92.3736C88.8488 92.4787 89.015 92.5312 89.2153 92.5312ZM92.1169 91.0568V93H91.4798V89.7273H92.0913V90.2599H92.1318C92.2071 90.0866 92.325 89.9474 92.4855 89.8423C92.6474 89.7372 92.8513 89.6847 93.097 89.6847C93.32 89.6847 93.5153 89.7315 93.683 89.8253C93.8506 89.9176 93.9805 90.0554 94.0729 90.2386C94.1652 90.4219 94.2114 90.6484 94.2114 90.9183V93H93.5743V90.995C93.5743 90.7578 93.5125 90.5724 93.3889 90.4389C93.2653 90.304 93.0956 90.2365 92.8797 90.2365C92.732 90.2365 92.6006 90.2685 92.4855 90.3324C92.3719 90.3963 92.2817 90.4901 92.2149 90.6136C92.1496 90.7358 92.1169 90.8835 92.1169 91.0568Z",fill:"black",fillOpacity:"0.8"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M73 83C71.8954 83 71 83.8954 71 85V97C71 98.1046 71.8954 99 73 99H97C98.1046 99 99 98.1046 99 97V85C99 83.8954 98.1046 83 97 83H73ZM70 85C70 83.3431 71.3431 82 73 82H97C98.6569 82 100 83.3431 100 85V97C100 98.6569 98.6569 100 97 100H73C71.3431 100 70 98.6569 70 97V85Z",fill:"black",fillOpacity:"0.8"}),(0,i.jsx)("path",{d:"M58 82H34C32.3431 82 31 83.3431 31 85V97C31 98.6569 32.3431 100 34 100H58C59.6569 100 61 98.6569 61 97V85C61 83.3431 59.6569 82 58 82Z",fill:"#56CCF2",fillOpacity:"0.8"}),(0,i.jsx)("path",{d:"M36.7669 93V88.6364H38.3649C38.6746 88.6364 38.931 88.6875 39.1341 88.7898C39.3372 88.8906 39.4892 89.0277 39.5901 89.201C39.6909 89.3729 39.7413 89.5668 39.7413 89.7827C39.7413 89.9645 39.708 90.1179 39.6412 90.2429C39.5744 90.3665 39.4849 90.4659 39.3727 90.5412C39.2619 90.6151 39.1398 90.669 39.0063 90.7031V90.7457C39.1511 90.7528 39.2925 90.7997 39.4303 90.8864C39.5695 90.9716 39.6845 91.093 39.7754 91.2507C39.8663 91.4084 39.9118 91.6001 39.9118 91.826C39.9118 92.049 39.8592 92.2493 39.7541 92.4268C39.6504 92.603 39.4899 92.7429 39.2726 92.8466C39.0553 92.9489 38.7776 93 38.4395 93H36.7669ZM37.4253 92.4354H38.3756C38.6909 92.4354 38.9168 92.3743 39.0531 92.2521C39.1895 92.13 39.2577 91.9773 39.2577 91.794C39.2577 91.6562 39.2229 91.5298 39.1533 91.4148C39.0837 91.2997 38.9842 91.2081 38.855 91.1399C38.7271 91.0717 38.5751 91.0376 38.399 91.0376H37.4253V92.4354ZM37.4253 90.5241H38.3074C38.4551 90.5241 38.5879 90.4957 38.7058 90.4389C38.8251 90.3821 38.9196 90.3026 38.9892 90.2003C39.0602 90.0966 39.0957 89.9744 39.0957 89.8338C39.0957 89.6534 39.0325 89.5021 38.9061 89.38C38.7797 89.2578 38.5858 89.1967 38.3244 89.1967H37.4253V90.5241ZM42.7747 91.6428V89.7273H43.4139V93H42.7875V92.4332H42.7534C42.6781 92.608 42.5574 92.7536 42.3912 92.87C42.2264 92.9851 42.0212 93.0426 41.7754 93.0426C41.5652 93.0426 41.3791 92.9964 41.2172 92.9041C41.0567 92.8104 40.9302 92.6719 40.8379 92.4886C40.747 92.3054 40.7015 92.0788 40.7015 91.8089V89.7273H41.3386V91.7322C41.3386 91.9553 41.4004 92.1328 41.524 92.2649C41.6476 92.397 41.8081 92.4631 42.0055 92.4631C42.1248 92.4631 42.2435 92.4332 42.3613 92.3736C42.4807 92.3139 42.5794 92.2237 42.6575 92.103C42.7371 91.9822 42.7761 91.8288 42.7747 91.6428ZM45.8576 89.7273V90.2386H44.07V89.7273H45.8576ZM44.5494 88.9432H45.1864V92.0391C45.1864 92.1626 45.2049 92.2557 45.2418 92.3182C45.2788 92.3793 45.3264 92.4212 45.3846 92.4439C45.4443 92.4652 45.5089 92.4759 45.5785 92.4759C45.6296 92.4759 45.6744 92.4723 45.7127 92.4652C45.7511 92.4581 45.7809 92.4524 45.8022 92.4482L45.9173 92.9744C45.8803 92.9886 45.8278 93.0028 45.7596 93.017C45.6914 93.0327 45.6062 93.0412 45.5039 93.0426C45.3363 93.0455 45.18 93.0156 45.0352 92.9531C44.8903 92.8906 44.7731 92.794 44.6836 92.6634C44.5941 92.5327 44.5494 92.3686 44.5494 92.1712V88.9432ZM48.15 89.7273V90.2386H46.3624V89.7273H48.15ZM46.8418 88.9432H47.4789V92.0391C47.4789 92.1626 47.4973 92.2557 47.5343 92.3182C47.5712 92.3793 47.6188 92.4212 47.677 92.4439C47.7367 92.4652 47.8013 92.4759 47.8709 92.4759C47.922 92.4759 47.9668 92.4723 48.0051 92.4652C48.0435 92.4581 48.0733 92.4524 48.0946 92.4482L48.2097 92.9744C48.1728 92.9886 48.1202 93.0028 48.052 93.017C47.9838 93.0327 47.8986 93.0412 47.7963 93.0426C47.6287 93.0455 47.4725 93.0156 47.3276 92.9531C47.1827 92.8906 47.0655 92.794 46.976 92.6634C46.8865 92.5327 46.8418 92.3686 46.8418 92.1712V88.9432ZM50.2581 93.0661C49.9513 93.0661 49.6836 92.9957 49.4549 92.8551C49.2262 92.7145 49.0486 92.5178 48.9222 92.2649C48.7958 92.0121 48.7326 91.7166 48.7326 91.3786C48.7326 91.0391 48.7958 90.7422 48.9222 90.4879C49.0486 90.2337 49.2262 90.0362 49.4549 89.8956C49.6836 89.755 49.9513 89.6847 50.2581 89.6847C50.565 89.6847 50.8327 89.755 51.0614 89.8956C51.2901 90.0362 51.4677 90.2337 51.5941 90.4879C51.7205 90.7422 51.7837 91.0391 51.7837 91.3786C51.7837 91.7166 51.7205 92.0121 51.5941 92.2649C51.4677 92.5178 51.2901 92.7145 51.0614 92.8551C50.8327 92.9957 50.565 93.0661 50.2581 93.0661ZM50.2603 92.5312C50.4591 92.5312 50.6239 92.4787 50.7546 92.3736C50.8853 92.2685 50.9819 92.1286 51.0444 91.9538C51.1083 91.7791 51.1402 91.5866 51.1402 91.3764C51.1402 91.1676 51.1083 90.9759 51.0444 90.8011C50.9819 90.625 50.8853 90.4837 50.7546 90.3771C50.6239 90.2706 50.4591 90.2173 50.2603 90.2173C50.06 90.2173 49.8938 90.2706 49.7617 90.3771C49.631 90.4837 49.5337 90.625 49.4698 90.8011C49.4073 90.9759 49.376 91.1676 49.376 91.3764C49.376 91.5866 49.4073 91.7791 49.4698 91.9538C49.5337 92.1286 49.631 92.2685 49.7617 92.3736C49.8938 92.4787 50.06 92.5312 50.2603 92.5312ZM53.1919 91.0568V93H52.5548V89.7273H53.1663V90.2599H53.2068C53.2821 90.0866 53.4 89.9474 53.5605 89.8423C53.7224 89.7372 53.9263 89.6847 54.172 89.6847C54.395 89.6847 54.5903 89.7315 54.758 89.8253C54.9256 89.9176 55.0555 90.0554 55.1479 90.2386C55.2402 90.4219 55.2864 90.6484 55.2864 90.9183V93H54.6493V90.995C54.6493 90.7578 54.5875 90.5724 54.4639 90.4389C54.3403 90.304 54.1706 90.2365 53.9547 90.2365C53.807 90.2365 53.6756 90.2685 53.5605 90.3324C53.4469 90.3963 53.3567 90.4901 53.2899 90.6136C53.2246 90.7358 53.1919 90.8835 53.1919 91.0568Z",fill:"white"}),(0,i.jsx)("mask",{id:"mask0_1_30",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:"20",y:"121",width:"107",height:"22",children:(0,i.jsx)("path",{d:"M126.001 121H20.5566V143H126.001V121Z",fill:"white"})}),(0,i.jsxs)("g",{mask:"url(#mask0_1_30)",className:"oss_sales_upsell_modal--graphicLine--6Z-mU",children:[(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M73 143V121H74V143H73Z"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M40.5566 121.477L20.5566 143L19.8759 142.267L39.8759 120.745L40.5566 121.477Z"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M126 142.523L106 121L106.681 120.267L126.681 141.79L126 142.523Z"})]})]})}let rp=[{key:1,elem:(0,I.tx)("oss_sales_upsell_overlay.feature1")},{key:2,elem:(0,I.tx)("oss_sales_upsell_overlay.feature2")},{key:3,elem:(0,I.tx)("oss_sales_upsell_overlay.feature3")}],rm=(0,rd.Ju)(function({onDismiss:e}){let t=(0,T.md)(ei.yV),n=(0,p.wA)();return(0,i.jsxs)(rc.yX,{autoFocusCta:!1,cancelText:(0,I.tx)("oss_sales_upsell_overlay.secondary_cta"),className:"oss_sales_upsell_modal--modal--fdI6U",confirmText:(0,I.tx)("oss_sales_upsell_overlay.primary_cta"),confirmationTitle:(0,I.tx)("oss_sales_upsell_overlay.title"),hideOnCancel:!1,hideOnConfirm:!1,isLoading:!t?.teamId,onCancel:()=>{n((0,eb.to)({type:ra.lk,data:{source:rr.B.LIBRARY_DUPLICATE_OSS_SALES_UPSELL,overridePlaceholderText:(0,I.t)("oss_sales_upsell_overlay.contact_sales_form.text_placeholder")}}))},onCloseButtonClick:e,onConfirm:()=>{t?.teamId&&n(rl.Bq({openInNewTab:!0,upsellSource:eT.b.OSS_SALES_UPSELL_MODAL,entryPoint:(0,ro.c)(nr.C6.UNSPECIFIED)}))},overrideOnHide:e,titleClass:"oss_sales_upsell_modal--title--wpaS5",children:[(0,i.jsx)("div",{className:S.s.lh24.font13.pt24.pr0.pb32.pl0.$,children:(0,i.jsxs)(rs.Y,{spacing:"40px",children:[(0,i.jsxs)(rs.Y,{direction:"vertical",spacing:"12px",children:[(0,i.jsx)("p",{children:(0,I.tx)("oss_sales_upsell_overlay.body1")}),(0,i.jsxs)(rs.Y,{direction:"vertical",spacing:8,children:[(0,i.jsx)("p",{className:S.s.fontSemiBold.$,children:(0,I.tx)("oss_sales_upsell_overlay.body2")}),(0,i.jsx)(rs.Y,{direction:"vertical",spacing:8,children:rp.map(e=>(0,i.jsxs)(rs.Y,{spacing:8,horizontalAlignItems:"start",children:[(0,i.jsx)("p",{children:"\u2713"}),(0,i.jsx)("p",{children:e.elem})]},e.key))})]}),(0,i.jsx)("p",{className:S.s.pt4.$,children:(0,I.tx)("oss_sales_upsell_overlay.body3")})]}),(0,i.jsx)("div",{className:S.s.mr16.$,children:(0,i.jsx)(ru,{})})]})}),(0,i.jsx)("div",{className:S.s.bt1.colorBorder.bSolid.$})]})},"OssSalesUpsellModal");function rh(){return(0,i.jsx)(n3.u,{label:"OssSalesUpsellOverlay",children:(0,i.jsx)(rf,{})})}function rf(){let e=(0,T.md)(ei.As),t=(0,T.md)(ei.ze);return e&&t?(0,i.jsx)(rg,{teamId:e,fileKey:t}):null}function rg({teamId:e,fileKey:t}){let n=(0,p.wA)(),a=(0,T.md)(ew.M$),r=(0,n8.bc)(ie.TNJ,{id:e}),l=(0,f.e)({overlay:y.jRE,priority:g.N.DEFAULT_MODAL},[a,r]),o=ey.tl().user_data,d=o?.email,c=(0,rn.HS)(d);return(0,tg.h)(()=>{l.show({canShow:(e,n)=>!!(c&&(0,ri.nN)(t)&&!e&&n.team?.hasPermission)})}),(0,s.useEffect)(()=>{l.isShowing&&(0,ri.wj)()},[c,l.isShowing]),(0,i.jsx)(eK.h,{isShowing:l.isShowing,modalType:eZ.q3.FEATURE_UPDATE,element:function(e){return(0,tg.h)(()=>{n((0,eb.to)({type:rm,data:{onDismiss:e.dismissModal}}))}),(0,i.jsx)("div",{})},trackingContextName:"oss_sales_upsell_overlay",onClickPrimaryCta:nL.lQ,onClose:l.complete,onManualDismiss:l.complete,testId:"oss_sales_upsell_overlay_test_id"})}var rx=n(698835),r_=n(673540),ry=n(246144),rv=n(373235),rb=n(850582),rC=n(558805),rj=n(469715),rk=n(157921);let rw="seen_figjam_section_preset_picker_callout",rE=(0,eE.Fu)(rw),rT=e=>(0,p.d4)(t=>{if(!e)return!1;let n=Object.keys(t.mirror.sceneGraphSelection);return 1===n.length&&n[0]===e});function rS({sectionNodeId:e,isShowing:t,complete:n}){let s=(0,L._X)({subscribeToUpdates_expensive:!0}),a=(0,z.getActiveTSSceneGraph)().get(e);if(!a)return null;let r=a.sectionPresetPickerCalloutPosition;if(isNaN(r.x)||isNaN(r.y))return null;let l=(0,L.Z0)(s,r,!0),o=parseFloat(rk._1),d={top:l.y+s.y+o+2,left:l.x+s.x-150,pointerOffset:150-o,pointerPosition:tj.F_.TOP};return(0,i.jsx)(eP.rq,{clickOutsideToHide:!0,description:(0,I.tx)("whiteboard.section_presets_onboarding.picker_callout.description"),fixedPosition:!0,isShowing:t,location:d,onClose:n,primaryCta:{label:(0,I.tx)("rcs.got_it"),type:"button",onClick:n,ctaTrackingDescriptor:ej.c.GOT_IT},title:(0,I.tx)("whiteboard.section_presets_onboarding.picker_callout.title"),trackingContextName:"section_preset_picker_callout",userFlagOnShow:rw,width:300})}function rI(){let e=(0,rv.q)(),t=(0,T.md)(rC.w),n=(0,T.md)(rj.m5),a=(0,T.md)(rE),r=(0,s.useRef)({numShown:0,hasLoggedToSentry:!1}),[l,o]=(0,s.useState)(null),d=rT(l),{show:c,isShowing:u,complete:p}=(0,f.e)({overlay:y.Byv,priority:g.N.DEFAULT_MODAL},[n,a]);return((0,s.useEffect)(()=>{t&&l&&d&&e&&c({canShow:(e,t)=>!!e&&!t})},[c,e,t,l,d]),(0,s.useEffect)(()=>{if("loaded"===a.status&&!a.data&&"loaded"===n.status&&n.data)return(0,rb.H)(function(e){o(e)})},[a,n]),(0,s.useEffect)(()=>{u&&r.current.numShown++,r.current.numShown>1&&!r.current.hasLoggedToSentry&&(r.current.hasLoggedToSentry=!0,(0,ry.x1)("SectionPresetPickerCallout","Callout shown more than once, this should not happen. Please investigate.",void 0,{reportAsSentryError:!0}))},[u]),u&&l)?(0,i.jsx)(rS,{sectionNodeId:l,isShowing:u,complete:p}):null}let rN=(0,ey.ck)("90c10991400b728428a200de3b347bba3f6d1d1e");function rA({isShowing:e,onPrimaryCtaClick:t,onClose:n}){return(0,i.jsx)(eP.rq,{testId:"share-to-google-classroom-onboarding",isShowing:e,trackingContextName:"Share to Google Classroom Onboarding",targetKey:"share",title:(0,I.tx)("whiteboard.google_classroom.onboarding.header"),description:(0,I.tx)("whiteboard.google_classroom.onboarding.body"),media:(0,i.jsx)(eN.y,{src:rN,alt:(0,I.t)("whiteboard.google_classroom.onboarding.image_alt"),aspectRatio:300/169}),primaryCta:{label:(0,I.tx)("whiteboard.google_classroom.onboarding.show_me"),type:"button",onClick:t,ctaTrackingDescriptor:ej.c.SHOW_ME},onClose:n})}function rL(){return(0,i.jsx)(n3.u,{label:"ShareToGoogleClassroomExistingUserOnboarding",children:(0,i.jsx)(rM,{})})}function rM(){let e=(0,p.wA)(),t=it({}),n=(0,T.md)(il),a=(0,T.md)(id),r=(0,T.md)(ic),l=(0,T.md)(iu),o=(0,T.md)(n6.Ij),{show:d,isShowing:c,complete:u}=(0,f.e)({overlay:y.Y2_,priority:g.N.DEFAULT_MODAL},[a,n,r,l,t]);s.useEffect(()=>{d({onShow:()=>{e(m.b({[ir]:!0}))},canShow:(e,t,n,i,s)=>!e&&!t&&!n&&i&&s})},[t,e,d]),s.useEffect(()=>{a.data&&u()},[a,u]);let{currentStep:h,next:x}=(0,eG.A)({numSteps:2,onComplete:u}),_=function({isShowing:e,next:t,complete:n}){let s=(0,p.wA)(),a=(0,ei.q5)();return[(0,i.jsx)(rA,{onPrimaryCtaClick:()=>{if(!a){n();return}s((0,eb.to)({type:n4.g_,data:{fileKey:a.key,source:n5.nk.shareToGoogleClassroomOnboarding}})),t()},onClose:n,isShowing:e},"share-to-google-classroom-existing-user-callout"),(0,i.jsx)(ia,{isShowing:e,onClose:n},"share-to-google-classroom-share-option-pointer")]}({isShowing:c,next:x,complete:u});return s.useEffect(()=>{o&&c&&0===h&&x()},[h,c,o,x]),(0,i.jsx)(eH.U,{currentStep:h,isShowing:c,children:_})}var rO=n(598626),rR=n(205798),rP=n(147718),rD=n(842909),rF=n(233420),rz=n(59975),rB=n(854284),rG=n(888760);let rU="has_onboarded_ai",rV=(0,T.eU)(!1);var rH=n(116450),rK=n(288971);let rW=g.N.HIGH_PRIORITY_MODAL+3;function rq(e,t){(0,tg.h)(()=>{e(m.b({[t]:!0}))})}let rX=(0,i.jsx)(rH.Jm,{src:(0,ey.ck)("b89b812ff4935b239f91bd78df370ad6dd947e0b"),aspectRatio:240/135,width:240});function rY({onClose:e,isShowing:t,onTargetLost:n}){let s=(0,p.wA)();return rq(s,rz.jx),rq(s,rU),(0,i.jsx)(eP.rq,{arrowPosition:tj.F_.BOTTOM,description:(0,I.tx)("ui3_and_ai_tour.ai_callout.description"),highlightBlue:!0,isShowing:t,media:rX,onClose:e,onTargetLost:n,primaryCta:{type:"button",label:(0,I.tx)("ui3_and_ai_tour.ai_callout.show_me"),onClick:()=>{(0,rK.$I)({trackingData:{source:"onboarding_ai_callout_component"}}),e()},ctaTrackingDescriptor:ej.c.SHOW_ME},secondaryCta:{type:"link",label:(0,I.tx)("ui3_and_ai_tour.ai_callout.playground_link"),href:"https://www.figma.com/community/file/1375505114072192161",ctaTrackingDescriptor:ej.c.AI_PLAYGROUND},targetKey:rz.Ij,testId:rz.T4,title:(0,I.tx)("ui3_and_ai_tour.ai_callout.title"),trackingContextName:"UI3/AI Onboarding > AI"})}var rZ=n(38119);function rJ({onClose:e,isShowing:t,onTargetLost:n}){return rq((0,p.wA)(),rz.af),(0,i.jsx)(eP.rq,{arrowPosition:tj.F_.BOTTOM,description:(0,a.kc)().hub_file_fragments?(0,I.tx)("ui3_and_ai_callouts.community_fragment_search.description"):(0,I.tx)("ui3_and_ai_callouts.fragment_search.description"),highlightBlue:!0,isShowing:t,onClose:()=>e(),onTargetLost:n,primaryCta:{type:"button",label:(0,I.tx)("ui3_and_ai_callouts.fragment_search.cta"),onClick:()=>{(0,rZ.Bd)(),e()},ctaTrackingDescriptor:ej.c.TRY_IT_OUT},targetKey:rz.Ij,testId:"fragmentSearchCallout",title:(0,I.tx)("ui3_and_ai_callouts.fragment_search.title"),trackingContextName:"Fragment Search Callout"})}function rQ(){return(0,i.jsx)(n3.u,{label:"AIOnboardingTour",children:(0,i.jsx)(r$,{})})}function r$(){let e=function(){let e=(0,ed.f)(rz.$9),t=(0,ed.f)(rz.af),n=(0,eB.p8)("showUi"),i=(0,s.useMemo)(()=>e,[n]),a=(0,s.useMemo)(()=>t,[n]),r=(0,tC.m0)(),l=(0,tC.Em)(),o=(0,rD.PE)(),d=function(){let e=(0,rB.LC)();return(0,rG.C7)()&&e}(),c=[];return!r&&l&&o&&!i&&c.push(rY),0===c.length&&!r&&l&&d&&!a&&c.push(rJ),c}(),t=(0,eE.r1)(rU),n=(0,T.md)(t),a=(0,eE.r1)("did_sign_up_as_ui3_user"),r=(0,T.md)(a),l=(0,eE.r1)(rz.$9),o=(0,T.md)(l),d=(0,eE.r1)(rz.af),c=(0,T.md)(d),p=(0,tC.Em)(),m=(0,u.l7)(),h=(0,u.hA)(),g=(0,rO.e)(),x=(0,rP.bE)(),_=(0,eB.aV)(),v=(0,T.md)(rF.Bu),b=(0,T.md)(ew.Fy),{uniqueId:C,show:j,isShowing:k,complete:w}=(0,f.e)({overlay:y.KTt,priority:rW},[n,o,r,c]),[E,S]=(0,T.fp)(rV),N=(0,s.useCallback)(()=>{e.length>0&&S(!0),w()},[S,w,e.length]),{currentStep:A,next:L}=(0,eG.A)({numSteps:0===e.length?1:e.length,onComplete:()=>N});(0,ek.E)(C,[(0,rR.wX)("dev"),(0,rR.wX)("design")],()=>{M()});let M=(0,s.useCallback)(()=>{p&&!_&&0!==e.length&&b?.data&&!E&&j()},[p,_,e.length,b,j,E]);(0,s.useEffect)(()=>{_||v||M()},[_,M,v]);let O=(0,s.useCallback)(()=>{N()},[N]);(0,s.useEffect)(()=>{k&&v&&O()},[k,v,O]);let R=s.useMemo(()=>{let t={type:"button",label:(0,I.tx)("general.next"),onClick:L,ctaTrackingDescriptor:ej.c.NEXT},n={type:"button",label:(0,I.tx)("general.done"),onClick:N,ctaTrackingDescriptor:ej.c.DONE};return e.map((i,a)=>s.createElement(i,{primaryCta:a===e.length-1?n:t,onClose:N,stepNum:a+1,totalNumSteps:e.length,isShowing:k,onTargetLost:a===e.length-1?N:L}))},[L,N,e,k]);return((0,s.useEffect)(()=>{(!R||0===e.length||m||h||g||x)&&N()},[R,e.length,m,h,g,x,N]),k)?(0,i.jsx)(eH.U,{currentStep:A,isShowing:k,children:R}):null}var r0=n(471596);let r1="UI3 Reactivation Overlay";function r2(){let e=(0,eB.aV)(),t=(0,T.md)(r0.jH),{isShowing:n,complete:a}=(0,f.e)({overlay:y.HU3,priority:g.N.SECONDARY_MODAL}),{currentStep:r,next:l}=(0,eG.A)({numSteps:2,onComplete:a});return s.useEffect(()=>{n&&0===r&&!e&&l()},[n,r,e,l]),s.useEffect(()=>{n&&t&&a()},[n,t,a]),(0,i.jsxs)(eH.U,{currentStep:r,isShowing:n,children:[(0,i.jsx)(eP.rq,{arrowPosition:tj.F_.RIGHT_BODY,description:(0,I.tx)("ui3_reactivation_overlay.ui2_description"),disableHighlight:!0,isShowing:n,media:(0,i.jsx)(eN.w,{src:(0,ey.ck)("c24e9a3e1bb4e0babe4ebc86f9d58b79e44a1992"),aspectRatio:16/9}),onClose:e=>{"close_button_clicked"!==e&&(0,ep.Cu)({eventName:"Overlay Closed",trackingContext:`Onboarding Sequence > ${r1} Step 1`,overlayStep:1,closeReason:e}),a()},primaryCta:{type:"button",label:(0,I.tx)("ui3_reactivation_overlay.ui2_primary_cta"),onClick:l,ctaTrackingDescriptor:ej.c.SWITCH_TO_UI3},secondaryCta:{type:"link",label:(0,I.tx)("ui3_reactivation_overlay.secondary_cta"),href:"https://www.figma.com/blog/making-the-move-to-ui3-a-guide-to-figmas-next-chapter/",ctaTrackingDescriptor:ej.c.LEARN_MORE},targetKey:eY.J_,title:(0,I.tx)("ui3_reactivation_overlay.ui2_title"),trackingContextName:`${r1} Step 1`}),(0,i.jsx)(eP.rq,{arrowPosition:tj.F_.RIGHT_BODY,description:(0,I.tx)("ui3_reactivation_overlay.ui3_description"),disableHighlight:!0,isShowing:n,media:(0,i.jsx)(eN.y,{src:(0,ey.ck)("94d7810cc12859da29e6f4e32a5ffe858ce5445e"),alt:(0,I.t)("ui3_reactivation_overlay.ui3_media_alt"),aspectRatio:16/9}),onClose:e=>{"close_button_clicked"!==e&&(0,ep.Cu)({eventName:"Overlay Closed",trackingContext:`Onboarding Sequence > ${r1} Step 2`,overlayStep:2,closeReason:e}),a()},primaryCta:{type:"button",label:(0,I.tx)("ui3_reactivation_overlay.ui3_primary_cta"),onClick:l,ctaTrackingDescriptor:ej.c.GOT_IT},secondaryCta:{type:"link",label:(0,I.tx)("ui3_reactivation_overlay.secondary_cta"),href:"https://www.figma.com/blog/making-the-move-to-ui3-a-guide-to-figmas-next-chapter/",ctaTrackingDescriptor:ej.c.LEARN_MORE},targetKey:eY.J_,title:(0,I.tx)("ui3_reactivation_overlay.ui3_title"),trackingContextName:`${r1} Step 2`})]})}var r3=n(296831),r5=n(807427),r4=n(555013),r6=n(59297),r7=n(36600);function r8({trackingContextName:e,getTitle:t,getBody:n,width:s=268}){return{modalType:eZ.q3.POINTER,trackingContextName:e,width:s,onboardingKey:an.yl,shouldCenterArrow:iH.EL.FALLBACK,element:()=>(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r6.x,{target:an.yl}),(0,i.jsx)("div",{className:r7.Hj,children:t()}),n()]}),userFlag:"seen_figjam_widget_nudge_flag"}}function r9(e){let[t,n]=s.useState(!0),a=(0,p.wA)(),r=(0,T.md)(ei.yV);s.useEffect(()=>{setTimeout(()=>n(!1),1e3)});let l=()=>{a(m.b({explicitly_dismissed_create_component_pointer:!0})),e.dismissModal()};return t?null:(0,i.jsxs)(h.fu,{name:"library upsell create component pointer",properties:{fileKey:r?.key,teamId:r?.teamId},children:[(0,i.jsx)(r6.x,{target:"create-symbol"}),(0,i.jsxs)(nR.NJ,{dismissModal:l,width:244,targetKey:"create-symbol",shouldNotWrapInParagraphTag:!0,shouldCenterArrow:iH.EL.FALLBACK,children:[(0,i.jsx)("p",{children:(0,I.tx)("rcs.upsell_libraries.click_here_to_turn_into_component")}),(0,i.jsx)(r4.Kz,{multiple:2}),(0,i.jsx)("div",{className:rk.kP,children:(0,i.jsx)(tH.$z,{onClick:l,variant:"primary",children:(0,I.tx)("rcs.upsell_libraries.visual_bell.got_it")})})]})]})}eZ.q3.SELF_CONTAINED,r8({trackingContextName:"FigJam Widget Nudge Generic",getTitle:()=>(0,I.t)("rcs.figjam_widget_nudge.generic_title"),getBody:()=>(0,I.t)("rcs.figjam_widget_nudge.generic_body")}),r8({trackingContextName:"FigJam Widget Nudge Project Management",getTitle:()=>(0,I.t)("rcs.figjam_widget_nudge.pm_title"),getBody:()=>(0,I.t)("rcs.figjam_widget_nudge.pm_body"),width:240}),r8({trackingContextName:"FigJam Widget Nudge Alignment",getTitle:()=>(0,I.t)("rcs.figjam_widget_nudge.align_title"),getBody:()=>(0,I.t)("rcs.figjam_widget_nudge.align_body")}),r8({trackingContextName:"FigJam Widget Nudge Fun",getTitle:()=>(0,I.t)("rcs.figjam_widget_nudge.fun_title"),getBody:()=>(0,I.t)("rcs.figjam_widget_nudge.fun_body")});var le=n(942329),lt=n(254710),ln=n(663499),li=(e=>(e.AwaitIsShowing="AwaitIsShowing",e.AwaitPastedElementsSelected="AwaitPastedElementsSelected",e.AwaitOtherElementsSelected="AwaitOtherElementsSelected",e.Completed="Completed",e))(li||{}),ls=(e=>(e.OnShow="OnShowUpsellLibariesConsecutivePaste",e.SelectionChanged="Selection Changed",e))(ls||{});ln.R;let la=(0,le.Op)({initial:"AwaitIsShowing",states:[{id:"AwaitIsShowing",transitions:[(0,le.nr)("OnShowUpsellLibariesConsecutivePaste","AwaitPastedElementsSelected")]},{id:"AwaitPastedElementsSelected",transitions:[(0,le.nr)("Selection Changed","AwaitOtherElementsSelected",{condition:({event:e})=>!!e.properties.didSelectedNodeIdsChange})]},{id:"AwaitOtherElementsSelected",transitions:[(0,le.nr)("Selection Changed","Completed",{condition:({event:e})=>!!e.properties.didSelectedNodeIdsChange})]},{id:"Completed",terminal:!0}]}),lr=(0,lt.rn)("paste_deselected_machine",la),ll=(0,eE.r1)("explicitly_dismissed_create_component_pointer"),lo=(0,ew.tH)("first_component_created_date");function ld(){let e=(0,p.wA)(),t=(0,T.md)(ew.t),n=(0,T.md)(tN.NZ),s=(0,T.md)(tN.pQ),a=(0,t4.jO)(),r=(0,T.md)(lo),l=(0,T.md)(ll),o=(0,r3.zl)(lr),d=(0,f.e)({overlay:y.g4U,priority:g.N.SECONDARY_MODAL},[t,s,l]);return(0,ek.E)(d.uniqueId,r5.zb,()=>{null===r&&d.show({canShow:(e,t,i)=>e&&(t||n)&&a&&!i,onShow:()=>{(0,nM.YQ)({id:ls.OnShow})}})}),(0,ek.E)(d.uniqueId,"action_create_symbol",()=>{d.isShowing&&(e(m.b({explicitly_dismissed_create_component_pointer:!0})),d.complete())}),(0,r3.ST)(o,({to:e})=>{e===li.Completed&&(d.complete(),o.reset())}),(0,i.jsx)(lc,{isShowing:d.isShowing,onAbort:d.complete,children:(0,i.jsx)(eK.h,{isShowing:d.isShowing,modalType:eZ.q3.SELF_CONTAINED,trackingContextName:"Consecutive Paste Create Component Pointer",element:r9,onClickPrimaryCta:d.complete,onClose:d.complete,onManualDismiss:d.complete,testId:"upsell_libraries_consecutive_paste_overlay"})})}function lc(e){let[t,n]=s.useState(!1),i=ey.Ay().user_data?.id,{isShowing:a,onAbort:r}=e;return s.useEffect(()=>{!t&&a&&((0,nx.Hz)(i)?n(!0):r())},[n,t,a,r,i]),t?e.children:null}var lu=n(921540),lp=n(619070),lm=n(436648),lh=n(153515);let lf="seen_workflow_interop_diagram_onboarding",lg=(0,eE.r1)(lf),lx="FigJam Diagram Onboarding (Workflow Interop Experiment)",l_={connectors:`${lx} - Connectors`,shapes:`${lx} - Shapes`,templates:`${lx} - Templates`},ly=(0,ey.ck)("2655e9f0e4247dff3d5a46cf59f788473bffe0c6"),lv=(0,ey.ck)("0c9201d8164c2390cdcf3fb8d316b6bacdddb438"),lb=(0,ey.ck)("b8b42ba263794abd20364c3da0f3f4993fd4ed86");function lC(){!function(){let e=(0,eB.p8)("pagesList");(0,s.useMemo)(()=>{let t=(0,tB.QL)("preservePageIndex");if(t&&e.length>0){(0,tB.EM)("preservePageIndex");let n=parseInt(t);if(isNaN(n)||n<0||n>=e.length)return;e.forEach((e,t)=>{t!==n&&nD.Y5.triggerAction("page-delete",{args:{nodeId:e.nodeId,skipVisualBell:!0}})})}},[e])}(),function(){let{insertTemplate:e}=(0,iL.Fz)(),t=(0,p.wA)();(0,tg.h)(()=>{let n=(0,tB.QL)("templateId");null!=n&&((0,tB.EM)("templateId"),t(lu.ts({hubFileId:n,callback:t=>{e({template:{template:t,type:iP.n.HubFile},userTriggered:!1,templateInsertionDirection:w.hKj.ABOVE,triggeredFrom:"workflow-interop"})}})))})}();let e=(0,T.md)(lg),t=(0,f.e)({overlay:y.uPw,priority:g.N.OVERRIDING_MODAL},[e]),n=function(e){let t=(0,p.wA)();return s.useMemo(()=>[{title:(0,I.tx)("rcs.figjam_diagram_onboarding.connectors_title"),trackingContextName:l_.connectors,arrowPosition:tj.F_.BOTTOM,media:(0,i.jsx)(eN.y,{src:ly,aspectRatio:900/508,alt:(0,I.t)("rcs.figjam_diagram_onboarding.connectors_title")}),description:(0,I.tx)("rcs.figjam_diagram_onboarding.connectors"),targetKey:an.BC,onClose:nL.lQ},{title:(0,I.tx)("rcs.figjam_diagram_onboarding.shapes_title"),trackingContextName:l_.shapes,arrowPosition:tj.F_.BOTTOM,media:(0,i.jsx)(eN.y,{aspectRatio:900/507,src:lv,alt:(0,I.t)("rcs.figjam_diagram_onboarding.shapes_title")}),description:(0,I.tx)("rcs.figjam_diagram_onboarding.shapes"),targetKey:an.BC,onClose:nL.lQ},{title:(0,I.tx)("rcs.figjam_diagram_onboarding.templates_title"),trackingContextName:l_.templates,arrowPosition:tj.F_.BOTTOM,media:(0,i.jsx)(eN.y,{aspectRatio:900/505,src:lb,alt:(0,I.t)("rcs.figjam_diagram_onboarding.templates_title")}),description:(0,I.tx)("rcs.figjam_diagram_onboarding.templates"),targetKey:an.yl,secondaryCta:{type:"button",label:(0,I.tx)("rcs.figjam_diagram_onboarding.see_templates"),onClick:()=>{t(tI.En({initialX:0,initialY:0,initialTab:lm.pL.TEMPLATES})),e.complete()}},onClose:nL.lQ}],[t,e])}(t);return(0,tg.h)(()=>{(0,tB.QL)(lp.tX.key)===lp.tX.value&&t.show({canShow:e=>!e})}),(0,i.jsx)(lh.WZ,{testId:"workflow-interop-machine-overlay",userFlagOnShow:lf,isShowing:t.isShowing,onComplete:t.complete,steps:n})}var lj=n(920712);let lk="seen_figjam_workshop_onboarding",lw=(0,eE.r1)(lk);function lE(e){let t=(0,T.md)(tN.J1),n=(0,T.md)(lw),s=(0,T.md)(tN.zo),a=(0,T.md)(tN.PD),r=(0,f.e)({overlay:y.Fq3,priority:g.N.SECONDARY_MODAL},[t,n,s,a]);return(0,tg.h)(()=>{r.show({canShow:(e,t,n,i)=>e&&!t&&n&&!i})}),(0,i.jsx)(eK.h,{currentStepIndex:0,disableFooter:!0,element:lT,isShowing:r.isShowing,modalType:eZ.q3.DRAGGABLE,onClickPrimaryCta:r.complete,onClose:r.complete,onManualDismiss:r.complete,onboardingKey:eY.v4,title:()=>(0,I.t)("rcs.figjam_workshop.invite_the_world_to_your_workshop"),totalNumSteps:1,trackingContextName:"Fig Jam Workshop Onboarding",userFlagOnShow:lk,width:301})}function lT(e){return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(lj.Gv,{width:301,src:(0,ey.ck)("a97e76df2b43ae8b408127c1c63ea0b8485ba8ac")}),(0,i.jsx)(lj.ak,{children:(0,I.tx)("rcs.figjam_workshop.open_sessions_let_you_jam_with_anyone_even_people_who_don_t_have_a_figma_account")})]})}var lS=n(729926),lI=n(475593),lN=n(167809),lA=n(606151);function lL(e,t,n,i){let a=(0,p.wA)(),r=(0,ed.f)(n),l=s.useRef(!!r);(0,ek.E)(e,t,s.useCallback(()=>{!(i?.current||l?.current)&&(r||(l.current=!0,a(m.b({[n]:!0}))))},[i,a,r,n]))}var lM=n(603936),lO=n(525092),lR=n(997273);function lP(){let e=(0,f.e)({overlay:y.CVA,priority:g.N.OVERRIDING_MODAL}),t=(0,ed.f)("no_figma_basics_tooltips_design_panel_step"),n=(0,ed.f)("design_panel_step_shown"),a=(0,ed.f)("started_figma_basics_onboarding"),r=(0,p.wA)(),l=t&&!n&&!a;if((0,ek.E)(e.uniqueId,"create_frame",s.useCallback(()=>{l&&!e.isShowing&&e.show()},[e,l])),!e.isShowing)return null;let o=()=>{e.complete(),r(m.b({design_panel_step_shown:!0}))};return(0,i.jsx)(eP.rq,{arrowPosition:tj.F_.RIGHT_BODY,description:(0,I.tx)("tooltips_plus_onboarding.design_panel.description"),disableHighlight:!0,emphasized:!0,isShowing:e.isShowing,onClose:o,onTargetLost:o,targetKey:lO.W,title:(0,I.tx)("tooltips_plus_onboarding.change_properties_in_the_design_panel"),trackingContextName:"Tooltips+ > Reactive Follow Ups > Frame Formatting"})}function lD(){let e=(0,f.e)({overlay:y.IQ,priority:g.N.OVERRIDING_MODAL}),t=(0,ed.f)("no_figma_basics_tooltips_format_text_step"),n=(0,ed.f)("format_text_step_shown"),a=(0,ed.f)("started_figma_basics_onboarding"),r=(0,p.wA)(),l=!n&&t&&!a;if((0,ek.E)(e.uniqueId,"create_text",s.useCallback(()=>{l&&!e.isShowing&&e.show()},[e,l])),!e.isShowing)return null;let o=()=>{e.complete(),r(m.b({format_text_step_shown:!0}))};return(0,i.jsx)(eP.rq,{arrowPosition:tj.F_.RIGHT_BODY,description:(0,I.tx)("tooltips_plus_onboarding.text_formatting.description"),disableHighlight:!0,emphasized:!0,isShowing:e.isShowing,onClose:o,onTargetLost:o,targetKey:lR.B,title:(0,I.tx)("tooltips_plus_onboarding.text_formatting.title"),trackingContextName:"Tooltips+ > Reactive Follow Ups > Text Formatting"})}var lF=n(491821),lz=n(385446),lB=n.n(lz),lG=n(520561),lU=n(288747),lV=n(140948),lH=n(136896),lK=n(490279),lW=n(821058);function lq(e){let t;let{file:n,org:a,overlay:r}=e,l=(0,lG.B)(n,a.id),o=(0,s.useRef)(void 0),d=r.complete;if((0,s.useEffect)(()=>{l&&o.current&&!lB()(l.filePermissionsData,o.current?.filePermissionsData)&&d(),o.current=l},[l,d]),!l)return null;let c=l.isBranch,u=l.branchMatchesRepo,p=l.linkExpiresAt,m=(0,n5.Ch)(l.filePermissionsData,e.org),h=(0,lW.M3)((0,el.A)(p)),f=!u&&c?(0,I.tx)("link_expired_overlay.different_branch_permissions_header"):(0,I.tx)("link_expired_overlay.header");return t=u?(0,I.tx)("link_expired_overlay.same_branch_permissions_body",{formattedTimestamp:h,audience:m}):c?(0,I.tx)("link_expired_overlay.different_branch_permissions_body",{formattedTimestamp:h,audience:m}):(0,I.tx)("link_expired_overlay.body",{formattedTimestamp:h,audience:m}),(0,i.jsx)(eP.rq,{isShowing:r.isShowing,trackingContextName:"Link Expired Overlay",title:f,description:t,targetKey:eY.v4,onClose:r.complete})}let lX=(0,lV.bt)(e=>e.modalShown);function lY(e){return(0,i.jsx)(n3.u,{label:"LinkExpiredOverlay",children:(0,i.jsx)(lZ,{...e})})}function lZ(e){let t=(0,s.useRef)(null),n=(0,f.e)({overlay:y.K_h,priority:g.N.SECONDARY_MODAL}),a=(0,lU.sZ)(),r=(0,T.md)(ei.yV),l=T.md(lX)?.type===lK.j;return((0,ek.E)(n.uniqueId,[lH.q2],()=>{a&&r&&!n.isShowing&&!l&&n.show()}),(0,s.useEffect)(()=>(n.isShowing?t.current=setTimeout(()=>{t.current=null,n.complete()},45e3):t.current&&clearTimeout(t.current),()=>{t.current&&clearTimeout(t.current)}),[n]),a&&r)?(0,i.jsx)(lq,{overlay:n,org:a,file:r}):null}var lJ=n(5175),lQ=n(947035),l$=n(127082),l0=n(382827),l1=n(750488),l2=n(746818);function l3(){return(0,i.jsx)(n3.u,{label:"SlidesAiWelcome",children:(0,i.jsx)(l5,{})})}function l5(){let e=(0,p.wA)(),t=(0,rD.PE)(),n=(0,eE.r1)(l2.Kt),i=(0,T.md)(n),a=(0,eE.r1)(l2.wl),r=(0,T.md)(a),l=(0,l0.sO)(),o=(0,eB.aV)(),{show:d,isShowing:c,complete:u}=(0,f.e)({overlay:y.Fff,priority:rW},[i,r]),h=(0,s.useCallback)(()=>{l&&t&&(o||d({canShow:(e,t)=>e&&!t}))},[t,o,l,d]);return(0,s.useEffect)(()=>h(),[h]),(0,l1.i)({onClickPrimaryCta:u,onClickSecondaryCta:()=>{e(m.b({agreed_to_slides_ai_terms:!1}))},isShowing:c,isOnboarding:!1,totalSteps:1})}var l4=n(147046),l6=n(345477),l7=n(581372),l8=n(38473);function l9({openFile:e}){let t=(0,tl.Gi)(),n=(0,tl.J3)(),s=(0,tl.JU)(n);return e&&e.teamId&&t?.type==="team"&&s?(0,i.jsx)(oe,{teamId:e.teamId}):null}function oe({teamId:e}){let t=(0,p.wA)(),n=(0,eE.r1)(l2.Kt),a=(0,T.md)(n),r=(0,eE.r1)(l2.uM),l=(0,T.md)(r),o=(0,l6.hX)(`[data-onboarding-key="${eq.O0}"]`),d=(0,ei.q5)(),c=(0,T.md)(ew.Fy),u=(0,eB.aV)(),m=(0,T.md)((0,l7.U)({teamId:e,editorType:n9._Y.SLIDES})),{numSkippedSlides:h,numTotalSlides:x}=(0,l8.Nr)(),_=x-h,{show:v,isShowing:b,complete:C}=(0,f.e)({overlay:y.uTW,priority:g.N.SECONDARY_MODAL},[a,l,c,m]),j=(0,s.useCallback)(()=>{!u&&o&&d&&v({canShow:(e,t,n,i)=>_>1&&e&&!t&&0===i&&n})},[u,o,d,v,_]);return(0,s.useEffect)(()=>j(),[j]),(0,s.useEffect)(()=>{b&&t(l4.j7({type:eq.eg,data:{targetRect:o,activePathOnMount:[(0,I.t)("tile.dropdown.publish_as_template")]}}))},[t,o,b]),(0,i.jsx)(eP.rq,{arrowPadding:4,arrowPosition:tj.F_.LEFT_TITLE,clickOutsideToHide:!0,description:(0,I.tx)("slides.templates.pro_templates_announcement.description"),disableHighlight:!0,isShowing:b,onClose:C,onTargetLost:C,primaryCta:{label:(0,I.tx)("slides.templates.pro_templates_announcement.button.done"),type:"button",onClick:C,ctaTrackingDescriptor:ej.c.DONE},targetKey:l2.w1,title:(0,I.tx)("slides.templates.pro_templates_announcement.header"),trackingContextName:"Slides Pro Templates Announcement",userFlagOnShow:"seen_slides_pro_templates_announcement",zIndex:eL.R.MODAL})}var ot=n(897024),on=n(18029),oi=n(299117);function os(e){return{isDesignEditor:e===er.nT.Design,isFigjamEditor:e===er.nT.Whiteboard,isSlidesEditor:e===er.nT.Slides,isDevModeEditor:e===er.nT.DevHandoff,isCooperEditor:e===er.nT.Cooper,isSitesEditor:e===er.nT.Sites,isFigmakeEditor:e===er.nT.Figmake,isIllustrationEditor:e===er.nT.Illustration}}let oa=s.memo(function({editorType:e,openFile:t}){let{isDesignEditor:n,isDevModeEditor:a}=os(e),r=s.useRef(!n);s.useEffect(()=>{r.current=!n},[n]),function(e){let t=(0,T.md)(lS.a8),n=(0,p.d4)(e=>e.user?.created_at),i=!!n&&(0,el.A)("2023-05-01").isBefore(n);s.useEffect(()=>{if(!i){e.current=!0;return}e.current=e.current||(0,lI.XC)(t)},[e,t,i]),(0,lM.yE)("x",e),(0,lM.yE)("y",e),(0,lM.yE)("width",e),(0,lM.yE)("height",e),(0,lM.yE)("angle",e),(0,lM.yE)("cornerRadius",e),(0,lM.yE)("strokePaints",e),(0,lM.yE)("fillPaints",e),(0,lM.yE)("effects",e),(0,lM.yE)("fontSize",e),(0,lM.yE)("fontFamily",e),(0,lM.yE)("fontStyle",e),(0,lA.g)("has_zoomed_in_design_file",e),(0,lN.U)("has_panned_in_design_file",e);let a=(0,f.e)({overlay:y._5$,priority:0});lL(a.uniqueId,"action_set_tool_frame","has_selected_frame_tool",e),lL(a.uniqueId,"create_frame","has_created_frame",e),lL(a.uniqueId,"create_text","has_created_text",e),e.current}(r),function(e){let t=(0,p.wA)(),n=(0,T.md)(eo.mp),i=null!=n&&(0,el.A)("2023-10-31").isBefore(n),a=!!(0,ed.f)("has_opened_design_editor"),[r,l]=(0,T.fp)(ec);(0,s.useEffect)(()=>{i&&!a&&e&&(l(!0),t(m.b({has_opened_design_editor:!0})))},[t,a,e,l,i]),(0,s.useEffect)(()=>{r&&!e&&l(!1)},[r,e,l])}(n);let o=(0,ei.MY)(),d=(0,ea.n)(),c=(0,es.I)();return en.z4.getIsExtension()||"loaded"!==o.status||et.pb.isGoogleClassroomIntegration()||d||a&&c?null:(0,i.jsxs)(s.Suspense,{fallback:null,children:[(0,i.jsx)(or,{openFile:t,editorType:e}),!l.Ay.isIpadNative&&(0,i.jsx)(ol,{openFile:t,editorType:e})]})});function or({editorType:e}){let{isFigjamEditor:t}=os(e);return(0,i.jsx)(i.Fragment,{children:t&&(0,i.jsxs)(oi.p,{children:[(0,i.jsx)(tZ,{}),(0,i.jsx)(t2,{})]})})}function ol({editorType:e,openFile:t}){let{isFigjamEditor:n,isDesignEditor:s,isSlidesEditor:p,isDevModeEditor:m}=os(e),h=(0,on.tG)(),f=(0,o.q8)(),g=(0,c.xo)(),x=(0,l$.Oc)(),_=(0,u.hA)(),y=function(e){switch(e){case er.nT.Design:return lJ.C5.Design;case er.nT.Whiteboard:return lJ.C5.FigJam;case er.nT.Slides:return lJ.C5.Slides;case er.nT.DevHandoff:return lJ.C5.DevMode;case er.nT.Cooper:return lJ.C5.Cooper;case er.nT.Sites:return lJ.C5.Sites;case er.nT.Figmake:return lJ.C5.FigMake;case er.nT.Illustration:return lJ.C5.Illustration;default:return lJ.C5.Unknown}}(e);return g?(0,i.jsx)(oi.p,{children:(0,i.jsx)(nA.NuxOnboardingOverlay,{entryPoint:y})}):(0,i.jsxs)(i.Fragment,{children:[s&&!(0,r.nl)()&&(0,i.jsx)(oi.p,{children:(0,i.jsx)(tr,{})}),n&&!s&&(0,i.jsx)(lF.Q,{children:(0,i.jsx)(oi.p,{children:(0,i.jsx)(tp,{})})}),s&&(0,i.jsx)(oi.p,{children:(0,i.jsx)(nb,{})}),(0,i.jsx)(oi.p,{children:(0,i.jsx)(nE.A,{})}),(0,i.jsx)(oi.p,{children:(0,i.jsx)(nT.F,{})}),!x&&(0,i.jsx)(oi.p,{children:(0,i.jsx)(nS.w,{})}),!l.Xb&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(oi.p,{children:(0,i.jsx)(nn.P,{})}),(0,i.jsx)(oi.p,{children:(0,i.jsx)(tw.A,{})}),(0,i.jsx)(oi.p,{children:(0,i.jsx)(tE.Ay,{})}),(0,i.jsx)(oi.p,{children:(0,i.jsx)(r_.A,{})}),(0,i.jsx)(oi.p,{children:(0,i.jsx)(ni.A,{})}),(0,i.jsx)(oi.p,{children:s&&(0,i.jsx)(lQ.$,{})})]}),t?.canEditCanvas&&n&&!s&&(0,i.jsxs)(oi.p,{children:[(0,i.jsx)(s3,{openFile:t}),(0,i.jsx)(re,{}),(0,i.jsx)(sg,{}),(0,i.jsx)(s8,{}),(0,i.jsx)(sE,{}),(0,i.jsx)(sT,{})]}),!s&&!p&&!x&&(0,i.jsx)(oi.p,{children:(0,i.jsx)(nA.NuxOnboardingOverlay,{entryPoint:y})}),n&&(0,i.jsx)(oi.p,{children:(0,i.jsx)(sq,{})}),(0,i.jsx)(oi.p,{children:(0,i.jsx)(rt.KX,{})}),n&&(0,i.jsx)(oi.p,{children:(0,i.jsx)(lE,{})}),(0,i.jsx)(oi.p,{children:(0,i.jsx)(rx.Wk,{})}),n&&(0,i.jsx)(oi.p,{children:(0,i.jsx)(lC,{})}),(0,i.jsx)(oi.p,{children:(0,i.jsx)(lY,{})}),(0,i.jsx)(oi.p,{children:(0,i.jsx)(ez,{})}),n&&(0,i.jsx)(oi.p,{children:(0,i.jsx)(tF,{})}),s&&t?.canEdit&&(0,i.jsx)(oi.p,{children:(0,i.jsx)(ld,{})}),s&&t?.canEdit&&(0,i.jsx)(oi.p,{children:(0,i.jsx)(nl,{})}),s&&(0,i.jsx)(oi.p,{children:(0,i.jsx)(nt,{})}),(0,i.jsx)(oi.p,{children:(0,i.jsx)(tv,{})}),!l.Xb&&(0,i.jsx)(oi.p,{children:(0,i.jsx)(nw,{})}),(0,i.jsx)(oi.p,{children:(0,i.jsx)(nI.b,{})}),s&&(0,i.jsx)(oi.p,{children:(0,i.jsx)(rh,{})}),s&&(0,i.jsxs)(oi.p,{children:[(0,i.jsx)(lP,{}),(0,i.jsx)(lD,{})]}),n&&!f&&!(0,a.kc)().figjam_synthesize_handbrake&&(0,i.jsx)(oi.p,{children:(0,i.jsx)(ee,{})}),n&&!f&&!(0,a.kc)().figjam_synthesize_handbrake&&(0,i.jsx)(oi.p,{children:(0,i.jsx)(P.Cw,{})}),h&&(0,i.jsx)(oi.p,{children:n&&!(0,a.kc)().figjam_quick_actions_v2&&(0,i.jsx)(tS.vi,{})}),s&&(0,i.jsx)(oi.p,{children:(0,i.jsx)(eO,{})}),n&&(0,i.jsxs)(oi.p,{children:[(0,i.jsx)(rj.rj,{}),(0,i.jsx)(rI,{})]}),(0,i.jsx)(oi.p,{children:(0,i.jsx)(nm,{})}),n&&(0,i.jsxs)(oi.p,{children:[(0,i.jsx)(rL,{}),(0,i.jsx)(im,{})]}),t&&(0,i.jsx)(oi.p,{children:(0,i.jsx)(rQ,{})}),(0,i.jsx)(oi.p,{children:(0,i.jsx)(d.QI,{})}),(0,i.jsx)(oi.p,{children:(0,i.jsx)(l3,{})}),t?.canEditCanvas&&p&&(0,i.jsx)(oi.p,{children:(0,i.jsx)(l9,{openFile:t})}),(0,i.jsx)(oi.p,{children:(0,i.jsx)(e_,{})}),(0,i.jsx)(oi.p,{children:(0,i.jsx)(nN.C,{source:"editor"})}),(0,i.jsx)(oi.p,{children:(0,i.jsx)(r2,{})}),(0,i.jsx)(oi.p,{featureFlag:"figjam_ai_actions_callout",children:(0,i.jsx)(tT.sR,{})}),t?.canEditCanvas&&m?(0,i.jsxs)(oi.p,{featureFlag:"cheddar",children:[(0,i.jsx)(ot.oI,{}),(0,i.jsx)(ot.Te,{}),(0,i.jsx)(ot.Ug,{})]}):null,m&&!_&&(0,i.jsx)(oi.p,{featureFlag:"dt_interactive_inspection_m2",children:(0,i.jsx)(tk,{})})]})}},191047:(e,t,n)=>{n.d(t,{ZH:()=>j,$z:()=>C,IX:()=>b});var i=n(104076),s=n(237420),a=n(511570),r=n.n(a),l=n(755444),o=n(554609),d=n(236631),c=n(259161),u=n(192075),p=n(142914),m=n(134671),h=n(220411),f=n(211862),g=n(288747);let x="custom_template_publish_nudge_content--thumbnailInnerContainerMd--Emvtj",_="custom_template_publish_nudge_content--currFileThumbnail--Yo6Lb",y=(0,l.ck)("b13789723ab5e9138ab263193f7d82aff4c47674"),v=(0,l.ck)("f290b00b2b225be3eb5056cb4473d87953764837");var b=(e=>(e[e.LARGE=0]="LARGE",e[e.MEDIUM=1]="MEDIUM",e[e.SMALL=2]="SMALL",e))(b||{});function C({size:e=1,useCurrentFileAsThumbnail:t=!1}){let n=(0,g.dq)(),a=(0,s.d4)(e=>e.user),l=(0,f.tS)(),d=(0,h.ud)(),c={2:{modalGraphic:"custom_template_publish_nudge_content--modalGraphicSm--WcSGr custom_template_publish_nudge_content--modalGraphic--rfPmE",orgAvatar:"custom_template_publish_nudge_content--orgAvatarSm--koOYf custom_template_publish_nudge_content--orgAvatar--qPeJa custom_template_publish_nudge_content--avatarSm--Zxket custom_template_publish_nudge_content--avatar--abDDN",userAvatar:"custom_template_publish_nudge_content--userAvatarSm--B4Zex",exampleFileThumbnail:"custom_template_publish_nudge_content--exampleFileThumbnailSm--iH1ZK custom_template_publish_nudge_content--exampleFileThumbnail--jShwc",thumbnailContainer:"custom_template_publish_nudge_content--thumbnailContainerSm--gUImw custom_template_publish_nudge_content--thumbnailContainer--m9CYk",avatar:"custom_template_publish_nudge_content--avatarSm--Zxket custom_template_publish_nudge_content--avatar--abDDN",thumbnailInnerContainer:x},1:{modalGraphic:"custom_template_publish_nudge_content--modalGraphicMd--7iA69 custom_template_publish_nudge_content--modalGraphic--rfPmE",orgAvatar:"custom_template_publish_nudge_content--orgAvatarMd--oCgCy custom_template_publish_nudge_content--orgAvatar--qPeJa",userAvatar:"custom_template_publish_nudge_content--userAvatarMd--G2FtM",exampleFileThumbnail:"custom_template_publish_nudge_content--exampleFileThumbnailMd--dl3H9 custom_template_publish_nudge_content--exampleFileThumbnail--jShwc",thumbnailContainer:"custom_template_publish_nudge_content--thumbnailContainerMd--8TV1k custom_template_publish_nudge_content--thumbnailContainer--m9CYk",avatar:"custom_template_publish_nudge_content--avatarMd--D18sG custom_template_publish_nudge_content--avatar--abDDN",thumbnailInnerContainer:x},0:{modalGraphic:"custom_template_publish_nudge_content--modalGraphicLg--0mkdU custom_template_publish_nudge_content--modalGraphic--rfPmE",orgAvatar:"custom_template_publish_nudge_content--orgAvatarLg--PpLOy custom_template_publish_nudge_content--orgAvatar--qPeJa",userAvatar:"custom_template_publish_nudge_content--userAvatarLg--dDo-X",exampleFileThumbnail:"custom_template_publish_nudge_content--exampleFileThumbnailLg--9cUca custom_template_publish_nudge_content--exampleFileThumbnail--jShwc",thumbnailContainer:"custom_template_publish_nudge_content--thumbnailContainerLg--Mrew2 custom_template_publish_nudge_content--thumbnailContainer--m9CYk",avatar:"custom_template_publish_nudge_content--avatarLg--Xep7T custom_template_publish_nudge_content--avatar--abDDN",thumbnailInnerContainer:"custom_template_publish_nudge_content--thumbnailInnerContainer--2yUkJ"}}[e],u=(0,i.jsx)("img",{src:y,alt:"",className:_});if(null!=l&&t){let e=d[l]?.thumbnail_url;e&&(u=(0,i.jsx)("img",{src:e,alt:"",className:_}))}return(0,i.jsxs)("div",{className:c.modalGraphic,children:[(0,i.jsx)("img",{src:v,alt:"",className:c.exampleFileThumbnail}),a&&(0,i.jsx)(o.n,{className:r()(c.avatar,c.orgAvatar),userId:a.id,orgId:n,size:2===e?16:1===e?24:32}),a&&(0,i.jsx)("div",{className:r()(c.avatar,c.userAvatar),children:(0,i.jsx)(p.H8,{user:a,size:2===e?p.Pf.SMALL16:1===e?p.Pf.MEDIUM:p.Pf.LARGE})}),(0,i.jsx)("div",{className:c.thumbnailContainer,children:(0,i.jsx)("div",{className:c.thumbnailInnerContainer,children:u})})]})}function j(){return(0,i.jsxs)("div",{children:[(0,i.jsx)(C,{size:0,useCurrentFileAsThumbnail:!0}),(0,i.jsx)("div",{className:d.s.p16.font11.$,children:(0,u.tx)("whiteboard.inserts.custom_templates_description")}),(0,i.jsx)("div",{className:d.s.flex.justifyEnd.mx16.mb16.$,children:(0,i.jsx)(c.pW,{newTab:!0,href:m.A,children:(0,u.tx)("whiteboard.inserts.learn_more")})})]})}},461546:(e,t,n)=>{n.d(t,{D1:()=>b,FX:()=>v,n6:()=>y,sR:()=>C});var i=n(104076),s=n(716976),a=n(812714),r=n(795033),l=n(140490),o=n(17140),d=n(192075),c=n(819851),u=n(422872),p=n(863154),m=n(143277),h=n(61102),f=n(842909),g=n(654200),x=n(441030),_=n(733742);let y=(0,r.eU)(!1),v=(0,r.eU)(!1),b="figjam_ai_actions_callout";function C(){return(0,i.jsx)(l.u,{label:"FigJamAIActionsOverlay",children:(0,i.jsx)(j,{})})}function j(){let e=(0,r.md)((0,r.Rq)(p.Sb)),t=(0,_._)(),n=(0,r.md)(y),l=(0,r.md)(v),C=(0,f.PE)(),j=!(0,o.q8)(),k=(0,c.ow)(),w=C||(0,a.kc)().figjam_ai_menu_items_all_access&&k&&j,{show:E,isShowing:T,complete:S}=(0,u.e)({overlay:x.sP8,priority:m.N.SECONDARY_MODAL},[e]);return(0,s.useEffect)(()=>{n&&t&&(0,a.kc)().figjam_ai_actions_callout&&w&&E({canShow:e=>!e})},[w,n,t,E]),(0,s.useEffect)(()=>{T&&(!n||l)&&S()},[S,n,T,l]),(0,i.jsx)(h.rq,{arrowPosition:g.F_.BOTTOM,description:(0,d.tx)("figjam_ai.ai_actions_callout.description"),emphasized:!0,isShowing:T,onClose:S,shouldCenterArrow:g.EL.BEST_EFFORT,shouldDisableAnimation:!0,targetKey:b,testId:"figjam-ai-actions-overlay",title:(0,d.tx)("figjam_ai.ai_actions_callout.title"),trackingContextName:"FigJam Ai Actions callout"})}},514275:(e,t,n)=>{n.d(t,{AI:()=>b,bX:()=>v,i1:()=>I,vi:()=>S});var i=n(104076),s=n(716976),a=n(795033),r=n(653899),l=n(755444),o=n(192075),d=n(244205),c=n(422872),u=n(863154),p=n(235711),m=n(143277),h=n(563554),f=n(381888),g=n(61102),x=n(654200),_=n(441030),y=n(913105);let v="ai_generate_onboarding_key",b="ai_new_file_modal_v2_onboarding_key",C="has_seen_figjam_ai_modal_overlay",j="has_seen_figjam_ai_toolbar_tooltip",k=(0,p.r1)(y.W1),w=(0,p.r1)(C),E=(0,p.r1)(j),T=(0,p.r1)("figjam_editor_onboarded");function S(){let e=(0,a.md)(E),t=(0,a.md)(y.qe),n=(0,a.md)(y.rM),r=(0,c.e)({overlay:_.QLv,priority:m.N.HIGH_PRIORITY_MODAL},[e]);return(0,s.useEffect)(()=>{let e=setTimeout(()=>{r.show({canShow:e=>!e&&n&&t})},1e3);return()=>clearTimeout(e)},[t,n,r]),(0,i.jsx)(g.rq,{isShowing:r.isShowing,userFlagOnShow:j,targetKey:v,onClose:r.complete,trackingContextName:h.e0.AI_TOPBAR_TOOLTIP,title:(0,o.tx)("whiteboard.ai_onboarding.ai_templates_toolbar.title"),description:(0,o.tx)("whiteboard.ai_onboarding.ai_templates_toolbar.description"),emphasized:!0})}function I({targetKey:e}){let t=(0,a.md)((0,a.Rq)(u.Sb)),n=(0,a.md)(k),s=(0,a.md)(w),p=(0,a.md)(T),v=(0,a.Xr)(y.RC),b=(0,c.e)({overlay:_.xiH,priority:m.N.HIGH_PRIORITY_MODAL},[n,s,t,p]);(0,r.h)(()=>{b.show({canShow:(e,t,n,i)=>!e&&!t&&!n&&i})});let j=()=>{b.complete(),v(!0)};return(0,r.h)(()=>()=>{j()}),(0,i.jsx)(g.rq,{arrowPosition:x.F_.LEFT_TITLE,description:(0,o.tx)("whiteboard.ai_onboarding.new_file_modal.footer"),isShowing:b.isShowing,media:(0,i.jsx)(f.y,{src:(0,l.ck)("b306123ab827a626d46db70bcc5a74e9e76feacf"),alt:"",aspectRatio:301/154}),onClose:j,onTargetLost:j,primaryCta:{label:(0,o.tx)("rcs.got_it"),type:"button",onClick:j,ctaTrackingDescriptor:d.c.GOT_IT},targetKey:e,title:(0,o.tx)("whiteboard.ai_onboarding.new_file_modal.title"),trackingContextName:h.e0.AI_MODAL_ONBOARDING_TOOLTIP,userFlagOnShow:C})}},450259:(e,t,n)=>{n.d(t,{NuxOnboardingOverlay:()=>y});var i=n(104076),s=n(716976),a=n(795033),r=n(653899),l=n(140490),o=n(115033),d=n(422872),c=n(987224),u=n(381059),p=n(174730),m=n(143277),h=n(6449),f=n(155159),g=n(951824),x=n(708729),_=n(441030);function y(e){return(0,i.jsx)(l.u,{label:"NuxOnboardingOverlay",children:(0,i.jsx)(v,{...e})})}function v(e){let t=(0,a.md)(c.eS),n=!!(0,p.f)("not_gen_0"),l=(0,a.md)(u.NT),y=(0,a.md)(u.g5),v=(0,a.md)(x.pC),b=(0,a.md)(u.b3),{show:C,complete:j,isShowing:k}=(0,d.e)({overlay:_.j0N,priority:m.N.HIGH_PRIORITY_MODAL},[l,y,t,b]),w=s.useCallback(()=>{C({canShow:(e,t,n,i)=>!v&&function({jobTitle:e,emailValidatedAt:t,isK12SSOOrg:n,isSamlSsoOnly:i}){return n?!i&&!(e&&["student","educator"].includes(e)):!(0,g.d)({jobTitle:e,emailValidatedAt:t})}({jobTitle:e,emailValidatedAt:t,isK12SSOOrg:n,isSamlSsoOnly:i})})},[C,v]);if((0,r.h)(()=>{w()}),(0,o.Q)(k),!k)return null;let{trackingContextName:E,testId:T}=t.data?{trackingContextName:"K12 Org Job Title Modal",testId:"NuxOnboardingOverlay-K12"}:n?{trackingContextName:"Gen1 Welcome Modal",testId:"NuxOnboardingOverlay-Gen1"}:{trackingContextName:"Gen 0 NUX",testId:"NuxOnboardingOverlay-Gen0"};return(0,i.jsx)(h.M,{isShowing:k,userFlagOnShow:"welcome_onboarded",testId:T,children:(0,i.jsx)(f.b,{isGen1:n,trackingContextName:E,entryPoint:e.entryPoint,isShowing:k,dismissModal:j})})}},5047:(e,t,n)=>{n.d(t,{J:()=>o});var i=n(104076),s=n(511570),a=n.n(s),r=n(352630),l=n(689190);function o({onClick:e,autoFocus:t,children:n,trackingEventName:s,trackingProperties:o,large:d}){return(0,i.jsx)(r.e6,{className:a()({[l.HM]:!0,"connector_modal_cta_button--button--mhvSu text--fontPos12Whyte---tkNx text--_fontBaseWhyte--efAjI":!0,"connector_modal_cta_button--buttonLarge--4RXeh text--fontPos14Whyte--pEiDq text--_fontBaseWhyte--efAjI":d}),onClick:e,htmlAttributes:{autoFocus:t},trackingEventName:s,trackingProperties:o,children:n})}},255768:(e,t,n)=>{n.d(t,{O:()=>a});var i=n(716976),s=n(166887);function a(){let e=(0,s.U)();return(0,i.useCallback)(t=>{e("figjam_onboarding_event",t,{batchRequest:!1})},[e])}},894981:(e,t,n)=>{n.d(t,{CM:()=>g,mI:()=>x,mN:()=>_,rL:()=>b,vX:()=>y,wV:()=>v});var i=n(104076),s=n(716976),a=n(917360),r=n(755444),l=n(652539),o=n(967782),d=n(192075),c=n(902267),u=n(5047),p=n(255768),m=n(337726),h=n(680675),f=n(564866);let g="FigJam Editor Onboarding";function x(e){return(0,i.jsxs)("div",{className:h.hQ,children:[e.svg&&(0,i.jsx)("div",{className:h.ZS,children:(0,i.jsx)(l.B,{svg:e.svg,useOriginalSrcFills_DEPRECATED:!0})}),(0,i.jsxs)("div",{className:h.IP,children:[e.titleText?e.titleText:"",e.bodyText]}),e.buttonText&&e.onButtonClick&&(0,i.jsx)("div",{className:h.UD,children:(0,i.jsx)(u.J,{onClick:e.onButtonClick,children:e.buttonText})})]})}let _=(0,r.ck)("8f3066fc3906f11f2601a390725f2b7af58e01a1");function y(e){let t=(0,p.O)(),n=()=>{e.onSkipClick(),(0,o.YQ)({id:m.P7}),t({eventName:"msv2_skipped",useCase:e.useCase})},s=(0,c.D)();return(0,i.jsxs)(a.b,{htmlAttributes:{onKeyDown(e){if("Escape"===e.key){n(),e.preventDefault(),e.stopPropagation();return}}},children:[e.children,(0,i.jsx)("div",{className:h.Lx,style:{marginBottom:s+32},children:(0,i.jsxs)(u.J,{onClick:n,trackingProperties:{text:"Skip intro"},children:[(0,d.tx)("figjam_onboarding_make_something.all.skip_intro"),(0,i.jsx)(l.B,{svg:f.A})]})})]})}function v(e){return(0,i.jsx)("div",{className:h.xn,children:(0,i.jsx)(x,{bodyText:e.bodyText,buttonText:e.buttonText,onButtonClick:e.onButtonClick,svg:e.svg})})}function b(e){let{useCase:t,stepName:n,stepNum:i}=e,a=(0,p.O)();(0,s.useEffect)(()=>{a({eventName:"msv2_step_shown",useCase:t,stepName:n,stepNum:i})},[n,i,a,t])}},469715:(e,t,n)=>{n.d(t,{m5:()=>M,pN:()=>A,rj:()=>O});var i=n(104076),s=n(716976),a=n(237420),r=n(266808),l=n(795033),o=n(755444),d=n(192075),c=n(244205),u=n(422872),p=n(863154),m=n(381059),h=n(235711),f=n(373235),g=n(643077),x=n(835307),_=n(143277),y=n(381888),v=n(61102),b=n(919853),C=n(654200),j=n(441030),k=n(913105),w=n(118740),E=n(558805),T=n(733742),S=n(963307),I=n(27605),N=n(646011);let A="section_presets_announcement_key",L="seen_figjam_section_presets_announcement",M=(0,h.Fu)(L);function O(){let e=(0,l.md)(S.P)===I.iH.TRUE,t=(0,a.d4)(e=>e.mirror.appModel.currentPage),n=(0,x.Fk)((t,n)=>(0,g.zC)(t,n)||e&&(0,g.re)(t,n),t),h=(0,f.q)(),O=(0,l.md)((0,l.Rq)(p.Sb)),R=(0,l.md)(M),P=(0,l.md)(E.w),D=(0,T._)(),F=(0,b.Td)(),z=function(){let[e,t]=(0,s.useState)(!1),n=(0,a.d4)(e=>e.isMakeSomethingV2Active),i=(0,l.md)(k.rM);return(0,s.useEffect)(()=>{(n||i)&&t(!0)},[i,n]),e}(),B=(0,l.md)(k.dO),G=(0,l.md)(m.mp),U=B.status!==w.c.NONE,[V,H]=(0,s.useState)(!1),{show:K,isShowing:W,complete:q}=(0,u.e)({overlay:j.pjo,priority:_.N.SECONDARY_MODAL},[R,O,G]),X=1e3*parseFloat(N.H)+1e3;return(0,s.useEffect)(()=>{let e=setTimeout(()=>{H(!0)},X);return()=>{clearTimeout(e)}},[X]),(0,s.useEffect)(()=>{P&&!z&&!U&&n&&h&&D&&V&&!F&&K({canShow:(e,t,n)=>{let i=function(e){let t=Date.now();return e.getTime()<=t-12096e5}(n);return!e&&!t&&i}})},[K,n,h,P,D,V,U,z,F]),(0,i.jsx)(v.rq,{arrowPosition:C.F_.BOTTOM,description:(0,d.tx)("whiteboard.section_presets_onboarding.feature_announcement.description"),isShowing:W,media:(0,i.jsx)(y.w,{src:(0,o.ck)("0ccb9b0b677f719939bd9bacd937201dfea4e8c9"),aspectRatio:4/3}),onClose:q,primaryCta:{label:(0,d.tx)("rcs.got_it"),type:"button",onClick:q,ctaTrackingDescriptor:c.c.GOT_IT},secondaryCta:{label:(0,d.tx)("whiteboard.section_presets_onboarding.feature_announcement.secondary"),type:"button",onClick:()=>{e&&r.gw5.setFigjamStarterKitEnabled(!1),r.T4N.createSectionForOnboarding(),q()},ctaTrackingDescriptor:c.c.SECTION_PRESET_PICKER_SHOW_ME},targetKey:A,title:(0,d.tx)("whiteboard.section_presets_onboarding.feature_announcement.title"),trackingContextName:"section_preset_picker_dlt_announcement",userFlagOnShow:L})}},156816:(e,t,n)=>{n.d(t,{Ay:()=>k,BZ:()=>b,m4:()=>C});var i=n(104076),s=n(716976),a=n(237420),r=n(795033),l=n(755444),o=n(192075),d=n(244205),c=n(422872),u=n(381059),p=n(235711),m=n(643077),h=n(74620),f=n(835307),g=n(143277),x=n(381888),_=n(61102),y=n(654200),v=n(441030);let b="ui3-layers-horizontal-scroll-onboarding-key",C="ui2-layers-horizontal-scroll-onboarding-key",j=(0,p.r1)("seen_ui3_layers_horizontal_scroll_overlay");function k(){let e=(0,h.aV)(),t=(0,r.md)(u.Fy),n=(0,a.d4)(e=>e.mirror.appModel.currentPage),p=(0,f.Fk)((e,t)=>!(0,m.zC)(e,t),n),C=(0,r.md)(j),{show:k,isShowing:w,complete:E}=(0,c.e)({overlay:v.vlG,priority:g.N.SECONDARY_MODAL},[t,C]);return s.useEffect(()=>{k({canShow:(t,n)=>t&&!e&&p&&!n})},[k,e,p,t]),(0,i.jsx)(_.rq,{arrowPosition:y.F_.RIGHT_TITLE,description:(0,o.tx)("ui3_layers_horizontal_scroll_overlay.ui3_description"),disableHighlight:!0,isShowing:w,media:(0,i.jsx)(x.w,{src:(0,l.ck)("86193716c443398bbd6b55d19b65db2eaf0fe3c1"),aspectRatio:16/9}),onClose:E,primaryCta:{label:(0,o.tx)("general.got_it"),ctaTrackingDescriptor:d.c.GOT_IT,type:"button",onClick:E},targetKey:b,title:(0,o.tx)("ui3_layers_horizontal_scroll_overlay.ui3_title"),trackingContextName:"UI3 Layers Horizontal Scroll Overlay"})}},957128:(e,t,n)=>{n.d(t,{Bs:()=>a,a5:()=>s,bo:()=>d,fc:()=>l,fg:()=>i,io:()=>o,ko:()=>r});let i=-32,s="visual_asset_packs_tooltip",a="visual_assets_tooltip_onboarding_key",r="visual_assets_panel_tooltip_onboarding_key",l="visual_assets_panel_tooltip",o="visual_assets_tooltip_reset",d="visual_assets_intro_tooltip"},413358:(e,t,n)=>{n.d(t,{j:()=>r});var i=n(440819),s=n(441030);let a=(0,i.Op)({initial:"ready_to_show",states:[{id:"ready_to_show",transitions:[(0,i.nr)("curator_content_shown","no_figma_basics_onboarding_was_shown_in_current_session",{condition:({event:e})=>e.properties.shown===s.WD4.id})]},{id:"no_figma_basics_onboarding_was_shown_in_current_session",terminal:!0}]}),r=(0,i.rn)("track_no_figma_basics_onboarding_shown",a)},193317:(e,t,n)=>{n.d(t,{T:()=>j,g:()=>C});var i=n(104076),s=n(716976),a=n(237420),r=n(140490),l=n(192075),o=n(482996),d=n(443192),c=n(244205),u=n(90844),p=n(422872),m=n(211862),h=n(592726),f=n(174730),g=n(143277),x=n(61102),_=n(2972),y=n(643330),v=n(441030),b=n(957128);let C={[b.a5]:!1,[b.fc]:!1,[b.bo]:!1},j=(0,r._)(function(){let e=(0,m.MY)(),t=(0,m.q5)(),n=(0,a.wA)(),r=(0,h.iZ)(),{show:j,isShowing:k,complete:w,uniqueId:E}=(0,p.e)({overlay:v.TrJ,priority:g.N.SECONDARY_MODAL},[e]),T=(0,o.te)(),S=!!(0,f.f)(b.fc),I=t?.canEdit,{currentView:N,visualAssetsType:A}=(0,_.wV)();return(0,u.E)(E,["Reset Visual Assets Tooltips",b.io],()=>{r&&t&&n(d.b(C))}),(0,s.useEffect)(()=>{I&&T()&&!S&&A&&N===_.S5.VisualAssets&&j(),k&&N!==_.S5.VisualAssets&&w()},[j,w,k,I,T,S,A,N]),(0,i.jsx)(x.rq,{arrowPosition:y.F_.LEFT_TITLE,clickOutsideToHide:!0,description:(0,l.tx)("rcs.visual_assets.drag_visual_assets_description"),disableHighlight:!0,isShowing:k,onClose:w,pointToLeftEdge:!0,primaryCta:{label:(0,l.tx)("onboarding_pointers.got_it"),type:"button",onClick:w,ctaTrackingDescriptor:c.c.GOT_IT},targetKey:b.ko,title:(0,l.tx)("rcs.visual_assets.drag_visual_assets_title"),trackingContextName:"Visual Assets Search Tooltip",userFlagOnShow:b.fc})},"VisualAssetsPanelTooltip")},787995:(e,t,n)=>{n.d(t,{A:()=>h});var i=n(104076),s=n(716976),a=n(237420),r=n(790009),l=n(795033),o=n(221586),d=n(555013),c=n(352630),u=n(192075),p=n(532096);let m=(0,l.eU)("");function h({onResult:e,useDarkMode:t}){let[n,h]=(0,l.fp)(m),[f,g]=(0,s.useState)(!1),x=s.useRef(null),_=(0,s.useCallback)(e=>{h(e.target.value)},[h]),y=(0,a.d4)(e=>(0,p.$A)(e.selectedView)),v=(0,s.useCallback)(()=>{e(n),h("")},[n,e,h]),b=s.useCallback(e=>{switch(e.keyCode){case o.Uz.SPACE:case o.Uz.ENTER:v(),e.stopPropagation();return}},[v]);return(0,s.useEffect)(()=>{let e=x.current;if(e)return e.addEventListener("keydown",b),()=>{e.removeEventListener("keydown",b)}},[b]),(0,i.jsx)(r.J,{brand:y?"dev-handoff":"design",mode:t?"dark":void 0,children:(0,i.jsxs)("div",{className:"ready_status_menu_item--menuItemContainer--Uy01z",children:[(0,i.jsx)(d.ks,{autoFocus:!0,className:"ready_status_menu_item--textInput--iqTJf",maxLength:1e3,onChange:_,onCompositionEnd:()=>g(!1),onCompositionStart:()=>g(!0),onKeyDown:e=>{e.stopPropagation(),"Enter"!==e.key||e.shiftKey||f||v()},placeholder:(0,u.t)("dev_handoff.status.menu_note_placeholder"),type:"textarea",value:n}),(0,i.jsx)(c.Ih,{ref:x,variant:"primary",onClick:v,recordingKey:"markReady",children:(0,u.tx)("dev_handoff.status.menu_note_button")})]})})}},657317:(e,t,n)=>{n.d(t,{WC:()=>eo,Jc:()=>es,Y1:()=>el});var i=n(104076),s=n(716976),a=n(419822),r=n(684742),l=n(266808),o=n(812714),d=n(795033);n(120440);var c=n(983500),u=n(328341),p=n(192075),m=n(331497),h=n(374794),f=n(121969),g=n(62865),x=n(368680),_=n(70041),y=n(980852),v=n(188220),b=n(755444),C=n(246144),j=n(444878),k=n(211862),w=n(872769),E=n(849275),T=n(415567),S=n(834570),I=n(544603),N=n(725837),A=n(985416);let L={loadTimeMs:2e3,numSuggestions:4},M="mockAutoSuggestConfig";function O(){return(0,b.b5)()&&(0,o.kc)().anticipation_mock}O()?window.mockAutoSuggestConfig={get(){if(!O())return;let e=localStorage.getItem(M);return e?{...L,...JSON.parse(e)}:L},set(e){if(!O())return;let t={...this.get(),...e};localStorage.setItem(M,JSON.stringify(t))},reset(){O()&&localStorage.setItem(M,JSON.stringify(L))}}:localStorage.removeItem(M);let R=(0,A.rt)(new Map);async function P({targetNodeGuid:e}){if(!O())return{suggestions:[]};let t=window.mockAutoSuggestConfig?.get();if(!t)return{suggestions:[]};let n=d.zl.get(R),i=n.get(e);if(!i){let t=N.D.getState(),s=[...Object.values(t.library.publishedByLibraryKey.components).map(e=>Object.values(e).map(e=>Object.values(e))).flat(2),...Object.values(t.library.publishedByLibraryKey.stateGroups).map(e=>Object.values(e).map(e=>Object.values(e))).flat(2)];if(0===s.length)throw Error("MOCK: COULD NOT FIND ANY ASSETS - maybe they are still loading?");i=s.sort(()=>Math.random()-.5).map(e=>({...e,suggestionSource:_.Ou.RECENTS}));let a=new Map(n);a.set(e,i),d.zl.set(R,a)}return await new Promise(e=>{setTimeout(()=>{e({suggestions:i.slice(0,t.numSuggestions)})},t.loadTimeMs)})}var D=n(548947),F=n(214237);let z=e=>e?`${e.name} ${e.guid}`:"NO TARGET";async function B(e){return(0,o.kc)().anticipation_mock?await P({targetNodeGuid:e.targetNode.guid}):await (0,S.A)(e)}var G=n(95314),U=n(727954),V=n(6380),H=n(207116),K=n(83245),W=n(290834),q=n(2972),X=n(771255),Y=n(807474),Z=n(847538),J=n(347598),Q=n(837080),$=n(453373),ee=n(429056),et=n(961125);let en=q.S5.Libraries,ei=(0,c.jz)(et.$A),es=(0,d.eU)(0);function ea({suggestions:e,analyticsData:t,hasLibraries:n,subscribedLibraries:a}){let r=ed(),l=(0,d.Xr)(g.a),o=s.useCallback(()=>{(0,x.gb)(t,_.GG.RESULT_INSERTED,_.qd.ASSET_PANEL)},[t]),c=(0,X.O)(),u=s.useMemo(()=>{let e={};return a?.forEach(t=>{e[t.libraryKey]=t.name}),e},[a]),m=s.useMemo(()=>{let{props:t,numColumns:n}=(0,X.Z)(c,Y.$H.GRID,G.rp.NORMAL);return e.map((e,s)=>(0,i.jsx)(K.z,{asset:e,fileName:u?u[e.library_key]:"",sectionPosition:s,keyboardPosition:(0,H.pg)([U.ON.SUGGESTIONS],s,n),onSuccessfulAssetInsert:o,...t,sourceForTracking:x.tM},`${e.id}-${s}`))},[e,c,u,o]);s.useEffect(()=>{e.length>0&&t.queryId&&((0,x.gb)(t,_.GG.RESULTS_SHOWN,_.qd.ASSET_PANEL),l())},[e,t,l]);let h=(0,p.tx)("auto_suggest.asset_panel.no_libraries"),y=(0,p.tx)("auto_suggest.suggestion_shelf_no_suggestions"),v=(0,i.jsx)("div",{className:"xh8yej3 x1iyjqo2 x1r8uery x1l90r2v",children:(0,i.jsx)("div",{className:ee.WA,children:m})});return(0,f.NB)(),(0,i.jsx)("div",{className:"x78zum5 xdt5ytf x6s0dn4 xl56j7k",style:{minHeight:r},children:n?m.length>0?v:y:h})}function er(){let e;let{width:t}=(0,V.G)(),n=(0,h.He)().size>0,c=!n,u=(0,h.je)(),f=s.useRef(null),{suggestions:S,isLoading:N,analyticsData:A,debugString:L,isInitialized:M}=function(e=!1){let t=function(e){(0,b.Ay)().anticipation_config||((0,b.Ay)().anticipation_config=_.PV);let t=(0,b.Ay)().anticipation_config.dominantFrameConfig;return function({targetNodeGuid:e,disabled:t}){let[{suggestions:n,analyticsData:i},a]=(0,d.fp)(g.P),{isLoaded:r}=(0,E.y)(),o=function(){let{isLoaded:e}=(0,E.y)();return{isLoaded:e,assets:(0,j.g5)(w.$A.Design).productComponents.map(e=>({...e,suggestionSource:_.Ou.RECENTS}))}}(),c=s.useMemo(()=>r&&o.isLoaded,[r,o.isLoaded]),[u,p]=s.useState(c);s.useEffect(()=>{!u&&c&&(p(!0),0===n.length&&a({suggestions:o.assets,analyticsData:_.YQ}))},[c,o,u,n.length,a]);let{suggestions:m,analyticsData:f,isLoading:b,suggestionsNodeGuid:T,debugString:S}=function({targetNodeGuid:e,disabled:t}){let[n,i]=s.useState([]),[a,r]=s.useState(`${e} - INIT`),[o,d]=s.useState(_.YQ),[c,u]=s.useState(!1),[p,m]=s.useState(void 0),f=(0,k.tS)(),g=(0,h.He)(),b=(0,F.r8)();return s.useEffect(()=>{if(t||!b)return;let n=(0,y.getActiveTSSceneGraph)(),s=e?n.get(e):void 0,a=new AbortController;if(s&&f){if(s&&_.b4.includes(s.type)){u(!0),i([]),m(s.guid),r(z(s)+" - STARTED");let e={fileKey:f,queryId:(0,v.g)(),selectionId:s?.guid};d(e);let t=(0,F.k1)(),n=new x.O({analyticsData:e,config:t,entryPoint:_.qd.ASSET_PANEL}),{signal:o}=a,c=new I.I(l.otU.COMPONENTS,a);B({targetNode:s,openFileKey:f,signal:o,subscribedLibraryKeys:g,autoSuggestSession:c,logger:n,config:t}).then(({suggestions:e})=>{o.aborted||i(e)}).catch(e=>{if((0,C.x1)("auto_suggest","Error fetching suggestions",{error:e}),"AbortError"===e.name)return}).finally(()=>{o.aborted||(u(!1),r(z(s)+" - FINISHED"));try{c.destroy()}catch(e){}})}else s&&(u(!1),i([]),m(s.guid),r(z(s)+" - INVALID TARGET"))}else i([]),r(z(s)+" - NO TARGET/OPEN FILE"),u(!1),m(void 0),d(_.YQ);return()=>{a&&a.abort()}},[e,t,f,g,b]),{suggestions:n,isLoading:c,analyticsData:o,suggestionsNodeGuid:p,debugString:a}}({targetNodeGuid:e,disabled:t});s.useEffect(()=>{m.length>0&&a({suggestions:m,analyticsData:f})},[m,f,a]);let N=(0,F.r8)();return t||!N?{suggestions:[],analyticsData:_.YQ,isLoading:!1,isInitialized:!1,suggestionsNodeGuid:void 0,debugString:""}:{suggestions:n,analyticsData:i,isLoading:b,isInitialized:u||n.length>0,suggestionsNodeGuid:T,debugString:S}}({targetNodeGuid:function({selectedNode:e,config:t,disabled:n}){let i=!(0,o.kc)().anticipation,[a,r]=s.useState(void 0),{debouncedViewportInfo:l,viewportIsStable:d}=(0,D.pJ)(i),c=!!e&&_.b4.includes(e.type)&&(0,D.Mw)(e,l,.4),u=(0,D.pW)(l,n||i||c,t);return s.useEffect(()=>{if(d&&!i){if(c){r(e.findContainingFragmentOrSelf());return}r(u)}},[u,c,e,i,d]),a}({selectedNode:(0,T.Vr)(),config:t,disabled:e}),disabled:e})}(e);return e?{suggestions:[],analyticsData:_.YQ,isLoading:!1,isInitialized:!1,suggestionsNodeGuid:void 0,debugString:""}:t}(c),O=(0,d.Xr)(es),R=ed(),P=(0,m.ut)(l.Ez5?.editorPreferences().showAssetAutoSuggest,!0),[G,U]=s.useState(null),H=P&&S.length>0&&n&&M||!!G,K=s.useCallback(()=>{let e=!H;l.Ez5?.editorPreferences().showAssetAutoSuggest.set(e),U(e),(0,x.gb)(A,e?_.GG.PANEL_OPENED:_.GG.PANEL_CLOSED,_.qd.ASSET_PANEL)},[H,A]);s.useEffect(()=>{if(f.current?.clientHeight)O(f.current?.clientHeight);else{let e=ei+8;H&&(e+=R),(0,o.kc)().anticipation_trigger_debug&&(e+=16),O(e)}},[H,R,O]);let{currentView:W}=(0,q.wV)(),X=W===q.S5.Libraries?0:1,Y=(0,d.md)(g.a);return c||(!M||H&&N||H&&"loading"===u.status?e=(0,i.jsx)(a.k,{size:"md"}):H||(e=(0,i.jsx)("div",{...{0:{className:"xw4jnvo x1qx5ct2 xy3p2pi x78zum5 x6s0dn4 xl56j7k x16rqkct xcr9a89 x1fgql6j"},1:{className:"xw4jnvo x1qx5ct2 xy3p2pi x78zum5 x6s0dn4 xl56j7k x16rqkct x1v8gsql x1n0bwc9"}}[!!Y<<0],children:S.length}))),(0,i.jsxs)("div",{className:"xso031l x1q0q8m5 xertd99 x1e56ztr",ref:f,children:[(0,i.jsx)(J.B,{children:(0,i.jsxs)(Q.H,{children:[(0,i.jsxs)(r.E,{onClick:K,className:"x1iyjqo2",children:[(0,i.jsx)($.g,{isExpanded:H}),(0,p.tx)("auto_suggest.asset_panel.title")]}),(0,i.jsx)("div",{className:"x78zum5 x6s0dn4",children:e})]})}),H&&(0,i.jsxs)(Z.A,{index:X,width:t,children:[(0,i.jsx)("div",{children:(0,i.jsx)(ea,{suggestions:S,analyticsData:A,hasLibraries:n,subscribedLibraries:u.data})}),(0,i.jsx)("div",{})]}),(0,o.kc)().anticipation_trigger_debug&&(0,i.jsx)("div",{className:"xh8yej3 xlup9mm xw2csxc x10wlt62",children:L})]})}function el(){let e=(0,F.r8)(),{currentView:t}=(0,q.wV)();return e&&t===en}function eo(){let e=el();return(function(){let e=(0,d.md)(q.W9),t=(0,u.ZC)(e),{suggestions:n,analyticsData:i}=(0,d.md)(g.P),{currentView:a}=(0,q.wV)(),r=(0,u.ZC)(a);s.useEffect(()=>{!1===t&&!0===e&&n.length>0&&i.queryId&&r===en&&(0,x.gb)(i,_.GG.STARTED_SEARCH,_.qd.ASSET_PANEL)},[t,e,n,i,r])}(),e)?(0,i.jsx)(er,{}):null}function ed(){let e=(0,X.O)();return Math.max(s.useMemo(()=>{let t=e.numColumnsByLayout[G.rp.NORMAL];return Math.ceil(_.lS/t)*((0,W.Hw)(e.componentTilePropsByLayout[G.rp.NORMAL].thumbHeight,Y.$H.GRID,{showFileName:!0})+16)},[e]),150)}},9255:(e,t,n)=>{n.d(t,{P:()=>d,X:()=>o});var i=n(104076),s=n(716976),a=n(140490),r=n(211862),l=n(719426);let o=(0,s.createContext)(null);function d(e){return(0,i.jsx)(a.u,{label:"BranchCountProvider",children:(0,i.jsx)(c,{...e})})}function c({children:e}){let t=(0,r.q5)(),n=t?.fileRepoId,a=(0,l.Yj)(n??null),d=(0,s.useMemo)(()=>a&&"loaded"===a.status?a.data.activeBranches.length:null,[a]);return(0,i.jsx)(o.Provider,{value:d,children:e})}},661379:(e,t,n)=>{n.d(t,{A5:()=>z,CT:()=>B,EA:()=>D,H1:()=>J,II:()=>q,L4:()=>G,SK:()=>W,SQ:()=>U,VK:()=>Q,WB:()=>K,aH:()=>Z,bL:()=>Y,ih:()=>F,wd:()=>V});var i=n(104076),s=n(716976),a=n(237420),r=n(266808),l=n(264993),o=n(980852),d=n(795033),c=n(851824),u=n(76616),p=n(886584),m=n(166887),h=n(221586),f=n(586398),g=n(390036),x=n(440327),_=n(192075),y=n(828987),v=n(819851),b=n(308072),C=n(893178),j=n(867041),k=n(568590),w=n(772523),E=n(508011),T=n(74620),S=n(120074),I=n(944350),N=n(162738),A=n(723628),L=n(132672),M=n(167151),O=n(185245),R=n(304299),P=n(396376);let D=s.createContext(!1);function F({id:e,ariaActiveDescendant:t,onChange:n,query:s,focusedByButtons:a,innerRef:r,onKeyDown:l,onKeyUp:o,onPasteCapture:d,onFocus:c,editorType:u}){return(0,i.jsx)(R.H,{ariaActiveDescendant:t,ariaDescription:(0,_.t)("canvas_search.results_will_update_as_you_type"),dataTestId:"canvas-search-input",id:e,innerRef:r,onChange:n,onFocus:e=>{c&&c(e),!a.current&&e.target&&e.target.select(),a.current=!1},onKeyDown:e=>{e.keyCode===h.Uz.F?(0,h.Te)(e)?(e.currentTarget.select(),e.preventDefault()):(0,C.jr)(e,C.W0.NO,C.VA.NO)&&e.stopPropagation():l(e)},onKeyUp:o,onPasteCapture:d,placeholder:(0,_.t)("canvas_search.search_placeholder"),recordingKey:`${u}.canvas_search.search`,value:s})}function z(e,t,n){let i=(0,s.useCallback)(({direction:i,shouldSelectInput:s})=>{if(e&&!e.current?.matches(":focus")){let t=new IntersectionObserver(i=>{let[a]=i;s?e.current?.select():(n.current=!0,e.current?.focus()),a.isIntersecting&&t.disconnect()});return e.current&&t.observe(e.current),()=>t.disconnect()}i&&t(i,"keyboard")},[n,e,t]);(0,p.p)(b.r.FocusEvent,i)}function B(){let e=(0,s.useRef)(!1),[t,n]=(0,s.useState)(!0),{query:i}=(0,a.d4)(e=>e.canvasSearch),{total:r}=(0,d.md)(x.Fk);return{focusedByButtons:e,hidden:t,setHidden:n,inputRef:s.useRef(null),navDisabled:!i||r<=1,showUi:(0,T.p8)("showUi")}}function G(){let e=(0,k.Z)("canvas_search_navigate"),t=(0,a.d4)(e=>e.canvasSearch.scope);return(0,s.useCallback)((n,i)=>{e(r.YEY.setActiveResultAndGetViewportSettings(n,i),{additionalTrackEventParams:{searchScope:r.Lov[t]}})},[e,t])}function U(){let e=(0,k.Z)("canvas_search_navigate"),{query:t,scope:n,filters:i,mode:o}=(0,a.d4)(e=>e.canvasSearch),d=(0,a.wA)(),p=(0,s.useRef)(!1),h=(0,T.p8)("currentPage"),x=(0,E.L3)(),_=(0,T.p8)("pagesList"),[v,b]=(0,s.useState)(!1),[C,I]=(0,s.useState)(r.Ez5.uiState().isRecovery.getCopy()),[N,A]=(0,s.useState)(!1),L=H(),M=(0,m.am)(),O=(0,f.yZ)(),R=(0,s.useMemo)(()=>O&&(0,S.lH)(_),[O,_])||O&&r.h3O?.isValidatingIncremental(),P=(0,s.useMemo)(()=>!O&&(0,S.lH)(_),[O,_]);(0,s.useLayoutEffect)(()=>{n!==r.Lov.ALL_PAGES||N||!R&&C?r.YEY.setSearchScope(n):(A(!0),scheduler.postTask(async()=>{R&&await (0,j.q)(r._em.FIND_AND_REPLACE),r.YEY.setSearchScope(n),I(!0)},{priority:"user-blocking"}))},[C,_,n,N,R]);let D=(0,s.useCallback)(async(t,i=!0)=>{u.sn.start("canvas_search_time_to_results"),A(!0);let{nav:s,resultsByPage:a}=await L(t,i);Object.keys(a).filter(e=>e!==h&&e!==l.Xy).length?b(!0):b(!1),A(!1),i&&e(s,{additionalTrackEventParams:{searchScope:r.Lov[n]}});let o=u.sn.tryStop("canvas_search_time_to_results");o&&M("canvas_search_time_to_results",{timeElapsedMs:o,searchScope:r.Lov[n],resultCount:Object.values(a).reduce((e,t)=>e+=t.length,0)})},[h,e,n,L,M]),F=(0,c.A)(D,300),z=(0,s.useCallback)((e,t=!0)=>{d(y.NY(e)),A(!!e&&!(0,g.jN)(e)),F(e,t)},[d,F]);return(0,s.useEffect)(()=>{x&&t&&(n!==r.Lov.ALL_PAGES||!R&&C)&&D(t,!1)},[i,o,n,x,_,C,R]),{query:t,showSearch:x,resultsOnOtherPages:v,search:z,next:(0,s.useCallback)((t,n)=>{(0,w.Uc)(""),r.YEY.setHoveredResult(l.AD,-1);let i=!p.current;p.current=!1,e(r.YEY.setNextSearchResultAndGetViewportSettings(t,i),{additionalTrackEventParams:{source:n}})},[e]),exit:V(),setNavigateNearestOnce:function(){p.current=!0},mode:o,isLoading:N,allInstancesExpanded:C,missingResultsOnSomePages:P}}function V(){let e=(0,d.Xr)(O.Nl),t=(0,M.cJ)();return(0,s.useCallback)(()=>{t?e(void 0):r.YEY?.exitSearchMode(r.dNx.NONE)},[t,e])}function H(){let{scope:e,filters:t,mode:n}=(0,a.d4)(e=>e.canvasSearch),i=(0,T.p8)("currentPage"),o=(0,m.am)(),d=(0,v.lg)(),c=(0,a.d4)(e=>e.mirror.appModel.pagesList),u=(0,L.iW)();return(0,s.useCallback)(async(s,a=!0,p)=>{let m=p??i;if(!s||(0,g.jN)(s)){let{nav:e}=r.YEY.setSearchResultsAndGetViewportSettings([],m,"",{categories:[],mode:n});return{nav:e,resultsByPage:{}}}let h=!!t[A.kM.MatchCase],f=!!t[A.kM.WholeWords],{resultsByPage:x,metrics:_}=await N.H1.search(s,{searchLayerNames:[I._Y.DESIGN,I._Y.SLIDES,I._Y.SITES].includes(d),searchAnnotationTextContent:u,matchCase:h,wholeWords:f}),y=(0,P.kH)(t),v=e===r.Lov.ACTIVE_PAGE?x[m]?[{pageId:m,results:x[m]}]:[]:Object.keys(x).map(e=>({pageId:e,results:x[e]}));if(e===r.Lov.ACTIVE_PAGE&&x[l.Xy]){let e=x[l.Xy];e.length&&v.push({pageId:l.Xy,results:e})}if(1===s.length){let e=0,t=[],n=v.findIndex(e=>e.pageId===l.Xy);for(let i of(n>-1&&t.push(v[n]),c)){let n=v.findIndex(e=>e.pageId===i.nodeId);if(-1===n)continue;let s=v[n];if(s.results.length>1e3-e){t.push({results:s.results.slice(0,1e3-e),pageId:s.pageId});break}e+=s.results.length,t.push(s)}v=t}let{nav:b,...C}=r.YEY.setSearchResultsAndGetViewportSettings(v,m,s,{categories:y,mode:n}),j=y.map(e=>A.kM[e]);return o("canvas_search_results",{..._,...C,nodeTypes:j,searchScope:r.Lov[e],matchCase:h,wholeWords:f}),{nav:b,resultsByPage:x}},[i,d,t,n,c,e,u,o])}function K(){let e=(0,E.L3)(),t=r.YEY.hasDirtyPrimaryInstances(),n=(0,d.md)(x.Fk),i=(0,s.useRef)([]),a=t&&i.current.length,l=(0,s.useMemo)(()=>{if(!e||!n.total||a)return[];let t=r.YEY.getSearchResults(),s=[];return t.forEach(e=>{let t=e.results.map(e=>{let t=(0,o.getActiveTSSceneGraph)().get(e.guid);return t?{...e,textContent:t.textContent,name:t.name}:e});s.push({results:t,pageId:e.pageId})}),i.current=s,s},[n,e,a]);return a?i.current:l}function W(e){return!e.clientX&&!e.clientY||1===e.buttons}function q(){let{query:e,scope:t}=(0,a.d4)(e=>e.canvasSearch),n=H();return(0,s.useCallback)(i=>{let s=r.YEY.getActiveResult(),a=s.type===r.Z6A.CANVAS,l=i||a&&s.guid;return!!l&&((0,o.getActiveTSSceneGraph)().setCurrentPageAsync(l).then(()=>{t===r.Lov.ACTIVE_PAGE?n(e,!1,l):r.YEY.setActiveResultAndGetViewportSettings(l,0)}),!0)},[e,t,n])}let X=(0,d.eU)(null);function Y(){return(0,d.fp)(X)}function Z(){let e=(0,d.Xr)(X);return(0,s.useCallback)(t=>{W(t)||e(null)},[e])}function J(){let e=(0,d.Xr)(X);return(0,s.useCallback)(t=>{W(t)&&e(t.currentTarget)},[e])}function Q(){let[e,t]=Y();return(0,s.useCallback)(n=>{n&&e&&n?.id===e?.id&&(t(null),n?.focus())},[e,t])}},48469:(e,t,n)=>{n.d(t,{_:()=>c});var i=n(104076),s=n(716976),a=n(420680),r=n(285466),l=n(192075),o=n(349311),d=n(661379);function c({onClick:e}){let t=(0,d.H1)(),n=(0,d.VK)(),c=s.useCallback(n=>{t(n),e(n)},[e,t]);return(0,i.jsx)(a.K,{ref:n,onClick:c,recordingKey:"canvas_search.search_icon_button","aria-label":(0,l.t)("fullscreen_actions.find"),htmlAttributes:{id:"canvas-search-icon-button","data-onboarding-key":"canvas-search","data-tooltip":"canvas-search","data-tooltip-type":o.Ib.LOOKUP},children:(0,i.jsx)(r.W,{})})}},304299:(e,t,n)=>{n.d(t,{H:()=>p});var i=n(104076),s=n(716976),a=n(276800),r=n(511570),l=n.n(r),o=n(221586),d=n(681398),c=n(757381),u=n(522215);function p({id:e,ariaDescription:t,ariaActiveDescendant:n,innerRef:r,value:p,placeholder:m,onChange:h,onFocus:f,onKeyDown:g,onKeyUp:x,shiftEnterInsertsNewline:_,dataTestId:y,recordingKey:v,onPasteCapture:b}){let C=(0,s.useCallback)(e=>{r&&(r.current=e?.textarea??null)},[r]),j=p.includes("\n");return(0,i.jsx)(c.v,{ref:C,ariaActiveDescendant:n,ariaDescription:t,className:l()(u.Rt,{[u.tI]:!j}),dataTestId:y,disableBorderStyles:!0,focusOnMount:!0,id:e,onChange:e=>h(e.currentTarget.value),onEscape:a.lQ,onFocus:f,onKeyDown:e=>{switch(e.keyCode){case o.Uz.ENTER:if(e.preventDefault(),_&&(e.shiftKey||d.Ay.mac&&e.ctrlKey)){let{selectionStart:t,selectionEnd:n}=e.currentTarget;e.currentTarget.setRangeText("\n",t,n,"end"),e.currentTarget.scrollLeft=0,e.stopPropagation(),h(e.currentTarget.value);return}break;case o.Uz.UP_ARROW:case o.Uz.DOWN_ARROW:if(j)return}g(e)},onKeyUp:x,onPasteCapture:b,placeholder:m,recordingKey:v,role:"combobox",spellCheck:!1,value:p})}},351213:(e,t,n)=>{n.d(t,{a:()=>I});var i=n(104076),s=n(716976),a=n(237420),r=n(293422),l=n(671170),o=n(266808),d=n(170627),c=n(795033),u=n(511570),p=n.n(u),m=n(76616),h=n(166887),f=n(221586),g=n(641518),x=n(440327),_=n(271761),y=n(192075),v=n(58212),b=n(819851),C=n(893178),j=n(568590),k=n(737552),w=n(349311),E=n(85598),T=n(304299),S=n(522215);function I({query:e,value:t,onChange:n,onFocus:u,recordingKey:I,hasMultipleSelections:N}){let A=(0,a.wA)(),L=(0,k.aq)(),M=(0,j.Z)("canvas_search_navigate"),O=(0,a.d4)(e=>e.canvasSearch.scope),{total:R}=(0,c.md)(x.Fk),P="whiteboard"===(0,b.lg)(),[D,F]=(0,s.useState)(!1),z=(0,E.HY)(),B=(0,_.b)()||z,G=e.toLocaleLowerCase()!==t.toLocaleLowerCase(),U=(0,h.am)(),V=!e||!R,H=d.nc.user("canvas-search-replace",n=>{if(!o.YEY)return;if(N){let{numReplaced:i,timeMs:s}=o.YEY.replaceInMultipleResults(t,{preserveCase:G},o.rpt.ONLY_ACTIVE);U("canvas_search_multi_replace",{source:n,timeMs:s,numReplaced:i,replacementIncludesOriginal:t.toLocaleLowerCase().includes(e.toLocaleLowerCase())}),F(!0);return}let i=o.YEY.replaceInActiveResult(t,{preserveCase:G});i.wasSuccessful&&(F(!0),U("canvas_search_replace",{source:n,replacementIncludesOriginal:t.toLocaleLowerCase().includes(e.toLocaleLowerCase())}),A(v.F.enqueue({type:"canvas-search-replace-once",message:(0,y.t)(P?"canvas_search.replace_all_message_figjam":O===o.Lov.ACTIVE_PAGE?"canvas_search.replace_all_message":"canvas_search.replace_all_message_all_pages",{count:1})})),i.nav&&M(i.nav,{delay:300,additionalTrackEventParams:{searchScope:o.Lov[O]}}))}),K=d.nc.user("canvas-search-replace-all",()=>{m.sn.start("canvas_search_replace_all");let{numReplaced:n,timeMs:i}=o.YEY.replaceInMultipleResults(t,{preserveCase:G},o.rpt.ALL);n>0&&(F(!0),A(v.F.enqueue({type:"canvas-search-replace-all",message:(0,y.t)(P?"canvas_search.replace_all_message_figjam":O===o.Lov.ACTIVE_PAGE?"canvas_search.replace_all_message":"canvas_search.replace_all_message_all_pages",{count:n})}))),U("canvas_search_replace_all",{source:"button",timeMs:i,numReplaced:n,replacementIncludesOriginal:t.toLocaleLowerCase().includes(e.toLocaleLowerCase())}),m.sn.tryStop("canvas_search_replace_all")}),W=(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:p()(S.v9,{[S.ei]:""===t}),"aria-hidden":"true",children:(0,i.jsx)(l.H,{})}),(0,i.jsx)(T.H,{value:t,placeholder:(0,y.t)("canvas_search.replace_placeholder"),recordingKey:g.Pt(I,"replace_input"),onChange:n,onFocus:e=>{u?.(e,!L())},onKeyDown:e=>{e.keyCode===f.Uz.ENTER?(H("enter"),e.stopPropagation()):D&&(0,f.Fo)(e)&&(0,C.jr)(e,C.W0.YES)&&e.stopPropagation()},shiftEnterInsertsNewline:!0})]});return(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:p()(S.N6,B&&S.Sq),children:P?W:(0,i.jsx)("div",{className:S.Z9,children:W})}),(0,i.jsxs)("div",{className:S._E,children:[(0,i.jsx)(r.$n,{variant:"secondary",disabled:V,htmlAttributes:{"data-tooltip":(0,y.t)("canvas_search.replace_one"),"data-tooltip-type":w.Ib.TEXT},onClick:()=>H("button"),recordingKey:g.Pt(I,"replace_one"),children:(0,y.tx)("canvas_search.replace_one")}),(0,i.jsx)(r.$n,{disabled:V,variant:"secondary",onClick:K,recordingKey:g.Pt(I,"replace_all"),children:(0,y.tx)("canvas_search.replace_all")})]})]})}},550112:(e,t,n)=>{n.d(t,{I_:()=>M,Od:()=>O});var i=n(104076),s=n(716976),a=n(754245),r=n(237420),l=n(240803),o=n(454851),d=n(307829),c=n(550012),u=n(101441),p=n(266808),m=n(812714),h=n(795033),f=n(681398),g=n(641518),x=n(440327),_=n(665261),y=n(652539),v=n(192075),b=n(607804),C=n(828987),j=n(819851),k=n(506192),w=n(74620),E=n(723628),T=n(349311),S=n(215853),I=n(167151),N=n(396376),A=n(771855),L=n(7980),M=(e=>(e.LEFT="left",e.RIGHT="right",e.CENTER="center",e))(M||{});function O({lean:e,minWidth:t,shouldShowSearchCategories:n,recordingKey:s}){if(!(0,m.kc)().eu_fpl_migration_search_settings_menu)return(0,i.jsx)(R,{lean:e,minWidth:t,recordingKey:s});{let a=(e=>{switch(e){case"left":return"bottom-end";case"right":default:return"bottom-start";case"center":return"bottom"}})(e);return(0,i.jsx)(F,{minWidth:t,placement:a,shouldShowSearchCategories:n,recordingKey:s})}}function R({lean:e,minWidth:t,recordingKey:n}){let d=(0,r.wA)(),c=(0,k.BK)("CANVAS_SEARCH_FILTER_DROPDOWN"),m=s.useRef(null),y=(0,w.p8)("isReadOnly"),N=(0,h.md)(x.yo),A=(0,r.d4)(e=>e.canvasSearch.filters),M=(0,r.d4)(e=>e.canvasSearch.mode),O="whiteboard"===(0,j.lg)(),R=(0,I.cJ)(),F=(0,b.to)(),z=s.useMemo(()=>{let e=y?[]:[(0,i.jsx)(_.y0,{primaryText:(0,v.t)("canvas_search.search"),checked:M===p.EW4.FIND,onClick:()=>{d(C.sV(p.EW4.FIND)),c.hide()},recordingKey:g.Pt(n,"settings.find")},"find"),(0,i.jsx)(_.y0,{primaryText:(0,v.t)("canvas_search.replace"),checked:M===p.EW4.REPLACE,onClick:()=>{d(C.sV(p.EW4.REPLACE)),c.hide()},recordingKey:g.Pt(n,"settings","replace")},"replace"),(0,i.jsx)(_.wv,{},"sep1")],t=(t,s=!1)=>{let a=!!A[t];e.push((0,i.jsx)(P,{option:t,checked:a,counts:N,onClick:e=>{s||e.ctrlKey||f.Ay.mac&&e.metaKey?(d(C.DI(t)),s&&c.hide()):(d(C.zx(t)),c.hide())},recordingKey:n},t))};if(M===p.EW4.FIND&&!O&&!F){let s=!E.b4.some(e=>!!A[e]),a=Object.values(N).reduce((e,t)=>e+t,0);e.push((0,i.jsx)(D,{checked:s,icon:L.A,label:(0,v.t)("canvas_search.filter.all"),count:a,onClick:()=>{d(C.dY()),c.hide()},recordingKey:g.Pt(n,"settings","All")})),E.b4.forEach(e=>t(e)),e.push((0,i.jsx)(_.wv,{},"sep2"))}return E._V.forEach(e=>t(e,!0)),e},[d,c,A,O,F,y,M,N,n]);(0,s.useEffect)(()=>{y&&M===p.EW4.REPLACE&&d(C.sV(p.EW4.FIND))},[d,y,M]);let B=m.current&&(0,i.jsx)(S.Jz,{autofocusPrevElementOnEsc:!0,autofocusPrevElementOnSelect:!0,autofocusPrevElementOnTab:!1,hideDropdown:c.hide,lean:e,minWidth:t,options:z,propagateCloseClick:!0,recordingKey:g.Pt(n,"settings"),showPoint:!0,targetRect:m.current.getBoundingClientRect()});return(0,i.jsxs)(l.o,{eventListeners:["onClick","onMouseUp"],children:[(0,i.jsx)("div",{ref:m,children:(0,i.jsx)(o.d,{"aria-expanded":c.showing,onClick:()=>c.toggle(),actionOnPointerDown:!0,"aria-label":(0,v.t)("canvas_search.settings"),recordingKey:g.Pt(n,"settings"),htmlAttributes:{"data-tooltip-type":T.Ib.TEXT,"data-tooltip":(0,v.t)("canvas_search.settings")},children:(0,i.jsx)(u.P,{})})}),c.showing&&(R||F?a.createPortal(B,document.body):B)]})}function P(e){let t=e.counts[e.option],n=(0,N.sW)(e.option),s=(0,N.p9)(e.option);return(0,i.jsx)(D,{checked:e.checked,icon:n,label:s,count:t,onClick:e.onClick,buttonRef:e.buttonRef,recordingKey:g.Pt(e,"settings",E.kM[e.option])})}function D({checked:e,icon:t,label:n,count:s,onClick:a,buttonRef:r,recordingKey:l}){return(0,i.jsx)(_.MM,{checked:e,onClick:a,recordingKey:l,buttonRef:r,children:(0,i.jsxs)("div",{className:A.wV,children:[t&&(0,i.jsx)(y.B,{className:A.H9,svg:t}),(0,i.jsx)("span",{className:A.ed,children:n}),!!s&&(0,i.jsx)("span",{className:A.t1,children:s})]})})}function F({minWidth:e,placement:t,shouldShowSearchCategories:n,recordingKey:a}){let m=(0,r.wA)(),f=(0,w.p8)("isReadOnly"),_=(0,h.md)(x.yo),y=(0,r.d4)(e=>e.canvasSearch.filters),b=(0,r.d4)(e=>e.canvasSearch.mode),{manager:j,getTriggerProps:k}=d.b({initialPosition:t}),S=e=>{m(C.sV(e)),j.setOpen(!1)},I=(e,t)=>{e?.ctrlKey||e?.metaKey?m(C.DI(t)):m(C.zx(t))},A=e=>{m(C.DI(e))},M=b===p.EW4.FIND&&n;return(0,s.useEffect)(()=>{f&&b===p.EW4.REPLACE&&m(C.sV(p.EW4.FIND))},[m,f,b]),(0,i.jsx)(l.o,{eventListeners:["onClick","onMouseUp"],children:(0,i.jsxs)(d.bL,{manager:j,children:[(0,i.jsx)(o.d,{"aria-label":(0,v.t)("canvas_search.settings"),recordingKey:g.Pt(a,"settings"),htmlAttributes:{"data-tooltip-type":T.Ib.TEXT,"data-tooltip":(0,v.t)("canvas_search.settings")},...k(),children:(0,i.jsx)(u.P,{})}),(0,i.jsxs)(d.mc,{children:[!f&&(0,i.jsxs)(c.z6,{value:b.toString(),onChange:e=>S(parseInt(e)),title:null,recordingKey:g.Pt(a,"mode_change"),children:[(0,i.jsx)(c.CU,{value:p.EW4.FIND.toString(),children:(0,i.jsx)("span",{style:{display:"flex",alignItems:"center",width:"100%",...e?{minWidth:`${e}px`}:{}},children:(0,v.t)("canvas_search.search")})},"find"),(0,i.jsx)(c.CU,{value:p.EW4.REPLACE.toString(),children:(0,i.jsx)("span",{style:{display:"flex",alignItems:"center",width:"100%",...e?{minWidth:`${e}px`}:{}},children:(0,v.t)("canvas_search.replace")})},"replace")]}),M&&(0,i.jsxs)(d.YJ,{children:[(0,i.jsx)(z,{recordingKey:g.Pt(a,"settings","All"),checked:!E.b4.some(e=>!!y[e]),onChange:()=>{m(C.dY())},icon:L.A,label:(0,v.t)("canvas_search.filter.all"),count:Object.values(_).reduce((e,t)=>e+t,0),minWidth:e}),E.b4.map(t=>(0,i.jsx)(z,{recordingKey:g.Pt(a,"settings",E.kM[t]),checked:!!y[t],onChange:e=>I(e,t),icon:(0,N.sW)(t),label:(0,N.p9)(t),count:_[t],minWidth:e},t))]}),(0,i.jsx)(d.YJ,{children:E._V.map(e=>(0,i.jsx)(z,{recordingKey:g.Pt(a,"settings",E.kM[e]),checked:!!y[e],onChange:()=>A(e),icon:(0,N.sW)(e),label:(0,N.p9)(e)},e))})]})]})})}function z({checked:e,onChange:t,icon:n,label:s,count:a,recordingKey:r,minWidth:l}){return(0,i.jsx)(c.H_,{recordingKey:r,checked:e,onChange:(e,n)=>{t(n?.event)},children:(0,i.jsxs)("span",{style:{display:"flex",alignItems:"center",width:"100%",...l?{minWidth:`${l}px`}:{}},children:[n&&(0,i.jsx)(d.Q$,{children:(0,i.jsx)(y.B,{className:A.H9,svg:n})}),s,!!a&&(0,i.jsx)(d.Ov,{children:(0,i.jsx)(d.ME,{"data-testid":g.Pt(r,"count"),children:a})})]})})}},993604:(e,t,n)=>{n.d(t,{f:()=>eD});var i=n(104076),s=n(716976),a=n(237420),r=n(78439),l=n(420680),o=n(498349),d=n(684742),c=n(689161),u=n(286138),p=n(285466),m=n(225654),h=n(49795),f=n(911374),g=n(266808),x=n(264993),_=n(812714),y=n(795033),v=n(511570),b=n.n(v),C=n(434511),j=n(490698),k=n(221586),w=n(586398),E=n(681398),T=n(641518),S=n(859277),I=n(219972),N=n(390036),A=n(440327),L=n(915123),M=n(271761),O=n(679359),R=n(849757),P=n(652539),D=n(192075),F=n(58212),z=n(607804),B=n(828987),G=n(354114),U=n(308072),V=n(823736),H=n(568590),K=n(772523),W=n(74620),q=n(120074),X=n(456877),Y=n(349311),Z=n(307829),J=n(240803),Q=n(550012),$=n(390579),ee=n(506192),et=(e=>(e[e.NONE=0]="NONE",e[e.TOP=1]="TOP",e[e.MIDDLE=2]="MIDDLE",e[e.BOTTOM=3]="BOTTOM",e[e.ALL=4]="ALL",e))(et||{}),en=(e=>(e[e.NONE=0]="NONE",e[e.SINGLE=1]="SINGLE",e[e.MULTI=2]="MULTI",e))(en||{}),ei=n(522215);let es=(0,y.eU)(!1),ea=s.memo(function(e){let t=(0,y.Xr)(es),n=(0,a.wA)(),s=(0,a.d4)(e=>e.canvasSearch.scope),r=(0,a.d4)(e=>e.mirror.appModel.pagesList),{allInstancesExpanded:l}=e,{getTriggerProps:o,manager:c}=Z.b(),u=el(s);return(0,i.jsx)(J.o,{eventListeners:["onClick"],children:(0,i.jsxs)(Z.bL,{manager:c,children:[(0,i.jsxs)(d.E,{recordingKey:"figma_design_search_page_scope_dropdown",className:ei.Vz,"aria-label":(0,D.t)("canvas_search.scope_dropdown_aria_label",{scope:u}),"data-testid":"figma-design-search-scope-dropdown",...o(),children:[u,(0,i.jsx)($.O,{})]}),(0,i.jsxs)(Z.mc,{children:[(0,i.jsx)(er,{option:g.Lov.ACTIVE_PAGE,activeOption:s,onClickCallback:e=>{n(B.V2(e))}}),(0,i.jsx)(er,{option:g.Lov.ALL_PAGES,activeOption:s,onClickCallback:e=>{(0,q.lH)(r)||!l?(t(!0),requestAnimationFrame(()=>{n(B.V2(e)),t(!1)})):n(B.V2(e))}})]})]})})});function er({option:e,activeOption:t,onClickCallback:n}){let s=(0,ee.BK)("CANVAS_SEARCH_PAGE_SCOPE_DROPDOWN");return(0,i.jsx)(Q.H_,{recordingKey:`figma_design_search_page_scope.${e}`,checked:e===t,onChange:()=>{s.hide(),n(e)},children:el(e)},e)}let el=e=>{switch(e){case g.Lov.ACTIVE_PAGE:return(0,D.t)("canvas_search.this_page");case g.Lov.ALL_PAGES:return(0,D.t)("canvas_search.all_pages")}};var eo=n(999083),ed=n(144949);n(120440);var ec=n(723628),eu=n(85598),ep=n(396376);function em({short:e,options:t,recordingKey:n}){let r=(0,a.wA)(),l=(0,a.d4)(e=>e.canvasSearch.filters),o=(0,eu.HY)(),d=(0,M.b)()||o,c=s.useCallback(e=>{r(B.DI(e))},[r]),u=s.useMemo(()=>(0,eo.RP)(t,e=>l[e]?(0,i.jsx)(ed.v,{hasCloseButton:!0,onClose:()=>c(e),"aria-label":(0,D.t)("canvas_search.filter.remove_filter",{filter:(0,ep.p9)(e)}),recordingKey:T.Pt(n,ec.kM[e],"remove"),children:(0,ep.p9)(e)},`filter-chip-${e}`):null),[l,c,t,n]);return u.length?(0,i.jsx)("div",{"data-testid":"search-filter-chip-container",...{0:{className:"x78zum5 x1a02dak x1jnr06f xexx8yu xy13l1i x1ykpatu x163pfp"},2:{className:"x78zum5 x1a02dak x1jnr06f xexx8yu xyfqnmn xsag5q8 xnm25rq"},1:{className:"x78zum5 x1a02dak x1jnr06f xexx8yu xy13l1i x163pfp xjkvuk6"},3:{className:"x78zum5 x1a02dak x1jnr06f xexx8yu xyfqnmn xnm25rq xjkvuk6"}}[!!d<<1|!!e<<0],children:u}):null}var eh=n(816689),ef=n(771855);function eg({short:e,mode:t,recordingKey:n}){let s=(0,a.wA)(),r=(0,a.d4)(e=>e.canvasSearch.filters),l=t===g.EW4.FIND?ep.D4:ep.IM,o=(0,M.b)(),d=(0,eo.RP)(l,e=>r[e]?(0,i.jsx)(ex,{option:e,onClose:()=>{s(B.DI(e))},recordingKey:n},e):null);return 0===d.length?null:(0,i.jsx)("div",{className:b()(ef.VS,{[ef.JE]:e,[ef.oZ]:o}),children:d})}function ex({option:e,onClose:t,recordingKey:n}){return(0,i.jsxs)("div",{className:ef.WP,children:[(0,ep.p9)(e),(0,i.jsx)(d.E,{className:ef._0,onClick:t,"aria-label":(0,D.t)("canvas_search.filter.remove"),"aria-describedby":(0,ep.p9)(e),recordingKey:T.Pt(n,ec.kM[e],"remove"),children:(0,i.jsx)(eh.f,{})})]})}var e_=n(271899),ey=n(167151),ev=n(185245),eb=n(382827),eC=n(661379),ej=n(351213),ek=n(550112),ew=n(276800),eE=n(166887),eT=n(893178);function eS(e,t=!1){if(t||(0,eT.U5)(e,eT.W0.YES)){let t=(0,eT.f7)(e);return t&&e.stopPropagation(),t}return!1}function eI(e,t,n,i){let r=(0,eC.II)(),l=function(){let e=(0,H.Z)("canvas_search_navigate"),t=(0,a.d4)(e=>e.canvasSearch.scope),n=(0,eE.am)(),i=(0,s.useContext)(eC.EA),r=(0,s.useCallback)(()=>{n("canvas_search_multi_hierarchy",{order:"down"}),g.YEY&&e(g.YEY.moveActiveResultsDownOneLevelAndGetViewportSettings(),{additionalTrackEventParams:{searchScope:g.Lov[t]}})},[e,t,n]);return i?r:ew.lQ}(),o=function(){let e=(0,H.Z)("canvas_search_navigate"),t=(0,a.d4)(e=>e.canvasSearch.scope),n=(0,eE.am)(),i=(0,s.useContext)(eC.EA),r=(0,s.useCallback)(()=>{n("canvas_search_multi_hierarchy",{order:"up"}),g.YEY&&e(g.YEY.moveActiveResultsUpOneLevelAndGetViewportSettings(),{additionalTrackEventParams:{searchScope:g.Lov[t]}})},[e,t,n]);return i?r:ew.lQ}(),d=(0,s.useContext)(eC.EA);return(0,s.useCallback)(s=>{switch(d?(0,k.Fo)(s)&&!s.shiftKey?i(en.SINGLE):s.shiftKey?i(en.MULTI):i(en.NONE):i(en.NONE),s.keyCode){case k.Uz.P:case k.Uz.UP_ARROW:(s.keyCode!==k.Uz.P||E.Ay.mac&&(0,k.vN)(s,k.xH.CONTROL))&&(e(ep.OP.PREV,"keyboard"),s.stopPropagation(),s.preventDefault());break;case k.Uz.N:case k.Uz.DOWN_ARROW:(s.keyCode!==k.Uz.N||E.Ay.mac&&(0,k.vN)(s,k.xH.CONTROL))&&(e(ep.OP.NEXT,"keyboard"),s.stopPropagation(),s.preventDefault());break;case k.Uz.ENTER:if(g.YEY&&(0,k.Fo)(s)){g.YEY.exitSearchMode(g.dNx.SELECT_ACTIVE);break}if(r())break;s.shiftKey?t?o():e(ep.OP.PREV,"keyboard"):t?l():e(ep.OP.NEXT,"keyboard"),s.stopPropagation(),s.preventDefault();break;case k.Uz.ESCAPE:g.YEY&&g.YEY.exitSearchMode(g.dNx.NONE),s.preventDefault(),s.stopPropagation();break;default:n(s)}},[d,i,r,n,e,t,o,l])}function eN(e){return(0,s.useCallback)(t=>{if(t.keyCode===k.Uz.SHIFT){(!E.Ay.mac||t.metaKey)&&(E.Ay.mac||t.ctrlKey)||e(en.NONE);return}let n=E.Ay.mac&&"Meta"===t.key,i=!E.Ay.mac&&t.keyCode===k.Uz.CTRL;(n||i)&&!t.shiftKey&&e(en.NONE)},[e])}function eA(e){switch(e.keyCode){case k.Uz.DELETE:case k.Uz.BACKSPACE:if(g.YEY)return g.YEY.getNextResultForActiveResultRemoval();break;case k.Uz.X:if((0,k.Te)(e)&&g.YEY)return g.YEY.getNextResultForActiveResultRemoval();break;case k.Uz.H:case k.Uz.R:if((0,k.Fo)(e)&&e.shiftKey&&g.YEY)return g.YEY.getNextResultForActiveResultRemoval()}return x.AD}var eL=n(523860),eM=n(85206),eO=n(954206),eR=n(255111),eP=n(279162);let eD=(0,C.j)(s.memo(function({showFilter:e}){let{query:t,resultsOnOtherPages:n,next:a,exit:r,setNavigateNearestOnce:d,search:c,showSearch:u,mode:h,isLoading:f,allInstancesExpanded:v,missingResultsOnSomePages:C}=(0,eC.SQ)(),[j,w]=(0,s.useState)(""),{focusedByButtons:E,inputRef:T}=(0,eC.CT)(),S=(0,s.useRef)(null),I=(0,z.to)(),L=(0,H.Z)("canvas_search_navigate"),R=(0,y.md)(A.Wy),P=(0,y.md)(A.ml),F=(0,y.md)(A.Ch),B=(0,s.useContext)(eC.EA),U=(0,y.md)(es),[K,W]=(0,s.useState)(null),[q,Z]=(0,s.useState)(en.NONE),[J,Q]=(0,s.useState)(!1);(0,s.useLayoutEffect)(()=>{if(B){if(P.size>1||R.size>1){Q(!0);return}for(let e of R.values())e.size>1&&Q(!0)}},[R,B,P]);let $=(0,s.useCallback)((e,t)=>{Q(!1),a(e,t)},[a]),ee=function(e,t,n){if(!n)return!1;if(t.size>1||e.size>1)return!0;for(let t of e.values())return t.size>1;return!1}(R,P,B),et=function(e,t,n,i,a){let r=eI(e,n,e=>{let n=(e.keyCode===k.Uz.D||e.keyCode===k.Uz.F)&&(0,k.Fo)(e)&&e.shiftKey;eS(e)&&!n&&t.current?.focus()},a);return(0,s.useCallback)(e=>{let s=eA(e);switch(e.keyCode){case k.Uz.RIGHT_ARROW:case k.Uz.LEFT_ARROW:(0,k.Te)(e)||r(e);break;case k.Uz.C:case k.Uz.X:(0,k.Te)(e)&&window.getSelection&&!window.getSelection().toString()&&(G.Y5.triggerAction(e.keyCode===k.Uz.C?"copy":"cut"),e.preventDefault(),e.stopPropagation(),e.keyCode===k.Uz.X&&t.current?.focus());break;case k.Uz.V:case k.Uz.Z:break;default:r(e)}g.YEY&&!n&&s!==x.AD&&i(g.YEY.setActiveResultAndGetViewportSettings(s,0),{delay:300})},[n,r,t,i])}($,S,ee,L,Z),ea=eN(Z);(0,eC.A5)(T,a,E);let er=(0,eC.aH)(),el=(0,M.b)(),eo=(0,eu.HY)();if(!u)return null;let ed=(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:b()(ei.v9,{[ei.ei]:""===t}),children:(0,i.jsx)(p.W,{})}),(0,i.jsx)(eC.ih,{ariaActiveDescendant:eG(F),onChange:e=>{Q(!1),c(e)},query:t,focusedByButtons:E,onKeyDown:et,onKeyUp:ea,innerRef:T,onPasteCapture:e=>{(0,V.gk)(e)&&(G.Y5.triggerActionInUserEditScope("paste"),e.preventDefault(),S.current?.focus())},editorType:X._Y.DESIGN})]}),ec=(0,i.jsxs)("div",{"data-testid":"search-sidebar",className:ei.G$,onBlurCapture:e=>{e.relatedTarget&&!e.currentTarget.contains(e.relatedTarget)&&(g.YEY.setOverlayVisible(!1),d(),Z(en.NONE))},children:[(0,i.jsxs)("div",{className:ei.PP,children:[(0,i.jsxs)("div",{className:b()(ei.Wv,(el||eo)&&ei.Fn),children:[(0,i.jsx)("div",{className:ei.Z9,children:ed}),e&&(0,i.jsx)(ek.Od,{lean:ek.I_.RIGHT,shouldShowSearchCategories:!I,minWidth:(0,_.kc)().eu_fpl_migration_search_settings_menu?156:void 0,recordingKey:"figma_design_search"}),!eo&&(0,i.jsx)(l.K,{onClick:e=>{r(),er(e)},"aria-label":(0,D.t)("canvas_search.close"),recordingKey:"figma_design_search.close",htmlAttributes:{"data-tooltip-type":Y.Ib.TEXT,"data-tooltip":(0,D.t)("canvas_search.close")},children:(0,i.jsx)(m.X,{})})]}),(0,_.kc)().eu_fpl_search_result_chips&&(0,i.jsx)(em,{recordingKey:"figma_design_search.filterChips",options:h===g.EW4.FIND?ep.D4:ep.IM,short:h===g.EW4.REPLACE}),!(0,_.kc)().eu_fpl_search_result_chips&&(0,i.jsx)(eg,{mode:h,short:h===g.EW4.REPLACE,recordingKey:"figma_design_search.filterPills"}),h===g.EW4.REPLACE&&(0,i.jsx)(ej.a,{query:t,value:j,onChange:w,onFocus:(e,n)=>{!t&&n&&T.current?.focus()},hasMultipleSelections:ee,recordingKey:"figma_design_search"})]}),f||U?(0,i.jsx)("div",{className:b()(ei.S,ei.dz),children:(0,i.jsx)(O.dW,{size:"medium",testId:"canvas-search-loading-spinner"})}):t&&!(0,N.jN)(t)&&(0,i.jsx)(eF,{allInstancesExpanded:v,hasMultipleSelections:ee,hoverSelectMode:q,hoveredResult:K,isInMultiselectMode:J,missingResultsOnSomePages:C,navigate:L,onNext:$,replacement:h===g.EW4.REPLACE?j:void 0,resultInputHandlerRef:S,resultsOnOtherPages:n,setHoverSelectMode:Z,setHoveredResult:W,setIsInMultiselectMode:Q})]});return eo?ec:(0,i.jsx)(o.i,{children:ec})}),"FigmaSearchSidebar");function eF({onNext:e,navigate:t,replacement:n,resultsOnOtherPages:o,resultInputHandlerRef:c,hoveredResult:u,hasMultipleSelections:p,isInMultiselectMode:m,missingResultsOnSomePages:_,hoverSelectMode:v,setIsInMultiselectMode:C,setHoverSelectMode:w,setHoveredResult:E,allInstancesExpanded:T}){let I=(0,a.wA)(),N=(0,eC.WB)(),L=(0,eC.II)(),M=(0,W.p8)("currentPage"),P=(0,s.useRef)(null),F=(0,a.d4)(e=>e.canvasSearch.scope),z=g.YEY.hasDirtyPrimaryInstances(),U=(0,y.md)(A.Fk),V=(0,y.md)(A.Ch),K=(0,y.md)(A.Wy),q=(0,y.md)(A.ml),X=(0,y.md)(A.hw),Z=(0,s.useContext)(eC.EA),J=!m,Q=null==n,$=(0,eC.L4)(),ee=function(e,t){let n=(0,H.Z)("canvas_search_navigate"),i=(0,a.d4)(e=>e.canvasSearch.scope),r=(0,eE.am)(),l=(0,s.useContext)(eC.EA),o=(0,s.useCallback)(s=>{if(!g.YEY)return;let{nav:a,numNewNodes:l,numNewTextMatches:o}=g.YEY.addActiveResultsAndGetViewportSettings(s);e&&r("canvas_search_enter_multi_select",{numberOfNodes:l,numberOfTextMatches:o,source:"shift+click",mode:t?"find":"replace"}),n(a,{additionalTrackEventParams:{searchScope:g.Lov[i]}})},[t,n,i,r,e]);return l?o:ew.lQ}(J,Q),es=function(){let e=(0,H.Z)("canvas_search_navigate"),t=(0,a.d4)(e=>e.canvasSearch.scope),n=(0,s.useContext)(eC.EA),i=(0,s.useCallback)((n,i,s)=>{g.YEY&&e(g.YEY.removeActiveResultAndGetViewportSettings(n,i,s),{additionalTrackEventParams:{searchScope:g.Lov[t]}})},[e,t]);return n?i:ew.lQ}(),[ea,er]=function(...e){let[t,n]=(0,s.useState)(()=>e.reduce((e,t)=>(e[t]=!0,e),{}));return[t,(0,s.useCallback)((e,t=!0)=>{n(n=>n[e]!==t?{...n,[e]:t}:n)},[])]}(x.Xy,M),el=(0,s.useRef)({}),eo=(0,s.useMemo)(()=>{let e=[],t=N.find(e=>e.pageId===x.Xy),n=F===g.Lov.ALL_PAGES||!!t,i=N.find(e=>e.pageId===M),s=N;F===g.Lov.ACTIVE_PAGE&&(s=[],t&&s.push(t),i&&s.push(i));let a=0;for(let{pageId:t,results:i}of(el.current={},s)){if(0===i.length)continue;let s=!!ea[t];if(n&&(e.push({type:"header",data:{pageId:t,open:s,numResults:i.reduce((e,t)=>e+=t.textMatches.length,0)}}),++a),n&&!s)continue;el.current[t]=a;let r=0;for(let n of i){let{textMatches:i,...s}=n;i.forEach((n,i)=>{e.push({type:"result",data:{...s,matchIndex:i,textMatch:n,index:r,pageId:t}}),++r,++a})}}return e},[M,ea,F,N]);(0,s.useEffect)(()=>{null!=V&&er(V.pageId)},[V,er]);let ed=(0,r.z)({size:eo.length,parentRef:P,overscan:10}),ec=(0,s.useCallback)(e=>{if(null==V||null==V.index)return[];let t=el.current[V.pageId];if(null==t)return[];let n=t+V.index;if(n===e||eo[e]&&"header"===eo[e].type)return[];let i=[],s=Math.min(n,e),a=Math.max(n,e);for(let e=s;e<=a&&e<eo.length;e++){let t=eo[e];t&&"result"===t.type&&i.push(t.data)}return i},[V,eo]),eu=(0,s.useCallback)(e=>!!Z&&"header"!==e.type&&(!!m||v!==en.NONE)&&(e.data.textMatch.matchType===g.Ifi.TEXT_MATCH&&q.has(e.data.resultGuid)&&!K.has(e.data.resultGuid)||X.has(e.data.resultGuid)),[K,Z,q,v,X,m]),em=(0,s.useCallback)(e=>"header"!==e.type&&(Z?e.data.textMatch.matchType===g.Ifi.PAGE_MATCH?e.data.index===V?.index&&e.data.pageId===V?.pageId:e.data.textMatch.matchType===g.Ifi.LAYER_MATCH?q.has(e.data.resultGuid)&&!K.get(e.data.resultGuid):K.get(e.data.resultGuid)?.has(e.data.matchIndex)??!1:e.data.index===V?.index&&e.data.pageId===V?.pageId),[V?.index,V?.pageId,K,Z,q]),eh=(0,s.useCallback)((e,t,n)=>{let i=e+n,s=t+n,a=e=>"result"===e.type&&(em(e)||eu(e));for(;i>0&&i<=eo.length&&eo[i-1]&&a(eo[i-1]);)i-=1;for(;s<eo.length&&eo[s]&&a(eo[s]);)s+=1;return[i-n,s-n]},[eu,em,eo]),ef=(0,s.useCallback)((e,t)=>{if(e+t>=eo.length)return!1;let n=eo[e+t];return n&&!em(n)&&!eu(n)},[eu,em,eo]),eg=(0,s.useCallback)((e,t,n)=>{let i=!1;for(let s=e;s<=t&&!(s+n>=eo.length);s+=1){let e=eo[s+n];if(e&&!em(e)&&!eu(e)){i=!0;break}}return i},[eu,em,eo]),[ex,e_]=(0,s.useMemo)(()=>{let e=u?.nodeGuid??x.AD,t=V?.pageId!=null?el.current[V.pageId]:null;if(Z&&v!==en.NONE&&u&&e!==x.AD&&u.pageId===V?.pageId&&null!=t){let n=u.index,i=u.matchIndex;if((v===en.SINGLE||V?.index==null)&&ef(n,t))return[n,g.YEY.getSingleHoveredSelectionEndIndex(e,i)];if(v===en.MULTI&&V?.index!=null&&V.index!==u.index){let s=n>V.index?V.index:n;return eg(s,n>V.index?n:V.index,t)?eh(s,g.YEY.getMultiHoveredSelectionEndIndex(e,i),t):[null,null]}}return[null,null]},[V?.index,V?.pageId,Z,eh,v,u,eg,ef]),ey=(0,s.useCallback)(e=>!Z||null==ex||null==e_||e<ex||e>=e_?et.NONE:e===ex&&e===e_-1?et.ALL:e===ex?et.TOP:e===e_-1?et.BOTTOM:et.MIDDLE,[Z,ex,e_]),eb=(0,j.$)(V);(0,s.useEffect)(()=>{if(m||v!==en.NONE||null==V||null==V.index||0===eo.length||!eb)return;let e=el.current[V.pageId];if(null==e)return;let t=e+V.index,n=t>=ed.virtualItems[0].index&&t<=ed.virtualItems[ed.virtualItems.length-1].index,i=!1;if(n){let e=ed.virtualItems.find(e=>e.index===t);if(e){let{start:t,size:n}=e;i=function(e,t){if(!t)return!0;let n=t.scrollTop,i=n+t.clientHeight;return e.top>=n&&e.bottom<=i}({top:t,bottom:t+n},P.current)}}i||z||ed.scrollToIndex(t,{align:"center"})},[V,eb,c,m,eo,z,ed,v]);let ej=(0,s.useCallback)((e,t)=>{t?es(e.resultGuid,e.matchIndex,e.textMatch.matchType):ee([{nodeId:e.resultGuid,matchIndices:[e.matchIndex],searchResultType:e.textMatch.matchType}])},[ee,es]),ek=(0,s.useCallback)(e=>{let t=ec(e),n=[];t.forEach(e=>{let t=n.length?n[n.length-1]:void 0;t?.nodeId===e.resultGuid&&t?.searchResultType===g.Ifi.TEXT_MATCH?t.matchIndices.push(e.matchIndex):n.push({nodeId:e.resultGuid,matchIndices:[e.matchIndex],searchResultType:e.textMatch.matchType})}),ee(n)},[ee,ec]),eT=(0,s.useCallback)((e,t,n,i)=>{t.pageId===x.Xy?(L(t.guid),er(t.guid),C(!1)):Z&&t.pageId===V?.pageId?e.shiftKey&&V?.index==null?(i||ej(t,i),C(!0)):e.shiftKey?(ek(n),C(!0)):(0,k.Fo)(e)&&t.textMatch.matchType!==g.Ifi.PAGE_MATCH?(ej(t,i),C(!0)):($(t.resultGuid,t.matchIndex),C(!1)):($(t.resultGuid,t.matchIndex),C(!1))},[Z,V?.pageId,V?.index,L,er,C,$,ej,ek]),eL=function(e,t,n,i,r,l,o){let d=function(e,t){let n=(0,H.Z)("canvas_search_navigate"),i=(0,a.d4)(e=>e.canvasSearch.scope),r=(0,eE.am)(),l=(0,s.useContext)(eC.EA),o=(0,s.useCallback)(()=>{if(!g.YEY)return;let{nav:s,numNewNodes:a,numNewTextMatches:l}=g.YEY.setAllResultsAsActiveAndGetViewportSettings();e&&r("canvas_search_enter_multi_select",{numberOfNodes:a,numberOfTextMatches:l,source:"cmd/ctrl+A",mode:t?"find":"replace"}),n(s,{additionalTrackEventParams:{searchScope:g.Lov[i]}})},[t,n,i,r,e]);return l?o:ew.lQ}(n,i),c=(0,s.useContext)(eC.EA),u=eI(e,r,eS,l);return(0,s.useCallback)(e=>{let n=eA(e);switch(e.keyCode){case k.Uz.UP_ARROW:case k.Uz.DOWN_ARROW:case k.Uz.RIGHT_ARROW:case k.Uz.LEFT_ARROW:r?(!function(){let e=document.getElementById("fullscreen-root")?.getElementsByClassName("focus-target");if(null!=e&&0!==e.length){for(let t of e)if(t.hasAttribute("readonly")&&"application"===t.getAttribute("role")){t?.focus();break}}}(),eS(e,!0)):u(e);break;case k.Uz.A:if(c&&(0,k.Te)(e)){d(),o(!0),e.stopPropagation(),e.preventDefault();break}eS(e);break;case k.Uz.C:(0,k.Te)(e)?(G.Y5.triggerActionInUserEditScope("copy"),e.stopPropagation()):eS(e);break;case k.Uz.V:(0,k.Te)(e)?(G.Y5.triggerActionInUserEditScope("paste"),e.stopPropagation()):eS(e);break;case k.Uz.X:(0,k.Te)(e)?(G.Y5.triggerActionInUserEditScope("cut"),e.stopPropagation()):eS(e);break;case k.Uz.DELETE:case k.Uz.BACKSPACE:eS(e,!0);break;default:u(e)}g.YEY&&!r&&n!==x.AD&&t(g.YEY.setActiveResultAndGetViewportSettings(n,0),{delay:300})},[r,c,u,d,o,t])}(e,t,J,Q,p,w,C),eM=eN(w),eO=(0,y.Xr)(ev.Nl),eR=(0,s.useCallback)(()=>{eO(void 0),g.YEY&&g.YEY.exitSearchMode(g.dNx.SELECT_ACTIVE)},[eO]),eP=(0,s.useMemo)(()=>(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(S.D8,{style:{height:ed.totalSize,position:"relative"},tabIndex:0,role:"listbox","aria-multiselectable":"true",recordingKey:"figma_design_search.results_list",onKeyDown:eL,onKeyUp:eM,forwardedRef:c,"aria-label":(0,D.t)("search.search_results"),children:ed.virtualItems.map(e=>{let t=eo[e.index];if(!t)return null;let s=em(t),a="result"===t.type&&t.data.pageId===V?.pageId?ey(t.data.index):et.NONE;return(0,i.jsx)("div",{ref:e.measureRef,className:b()({[ei.T]:a===et.TOP,[ei.fz]:a===et.MIDDLE,[ei.Nf]:a===et.BOTTOM,[ei.HR]:(v===en.SINGLE||V?.index==null)&&u?.isPurple}),style:{position:"absolute",top:0,left:0,width:"100%",transform:`translateY(${e.start}px)`},children:"header"===t.type?(0,i.jsx)(eB,{...t.data,setOpen:e=>er(t.data.pageId,e)}):(0,i.jsx)(eU,{activePageId:V?.pageId,hasMultipleSelections:p,indirectlySelected:eu(t),isInHoveredSelectMode:v!==en.NONE&&!!u,isInMultiselectMode:m,onDoubleClick:eR,onSelect:n=>eT(n,t.data,e.index,s),replacement:n,result:t.data,resultInputHandlerRef:c,selected:s,setHoveredResult:E,singletonHoverSelected:a===et.ALL})},"header"===t.type?t.data.pageId:`${t.data.pageId}#${t.data.index}`)})}),z&&(0,i.jsx)("div",{className:ei.S,children:(0,i.jsx)(O.dW,{size:"medium"})}),o&&F===g.Lov.ACTIVE_PAGE&&(0,i.jsx)(d.E,{recordingKey:"figma_design_search.other_pages_button",className:b()(ei.fp,ei.AX),onClick:()=>{I(B.V2(g.Lov.ALL_PAGES))},children:(0,D.tx)("canvas_search.results_other_pages")}),_&&F===g.Lov.ALL_PAGES&&(0,i.jsx)("div",{className:ei.du,children:(0,D.tx)("canvas_search.results_unavailable_offline")})]}),[V?.index,V?.pageId,I,ey,eT,p,v,u,m,eu,em,eL,eM,_,eR,n,c,eo,o,F,E,er,z,ed.totalSize,ed.virtualItems]);return(0,i.jsxs)("div",{className:ei.sb,children:[(0,i.jsxs)("div",{className:ei.Jo,children:[(0,i.jsx)(ez,{totalOnActivePage:U.total,resultsOnOtherPages:o,allInstancesExpanded:T}),0!==eo.length&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(l.K,{onClick:t=>{e(ep.OP.PREV,"button")},"aria-label":(0,D.t)("canvas_search.previous"),recordingKey:"figma_design_search.previous",disabled:U.total<=1,htmlAttributes:{"data-tooltip-type":Y.Ib.TEXT,"data-tooltip":(0,D.t)("canvas_search.previous"),"data-tooltip-shortcut-key":"canvas-search-prev"},children:(0,i.jsx)(h.l,{})}),(0,i.jsx)(l.K,{onClick:t=>{e(ep.OP.NEXT,"button")},"aria-label":(0,D.t)("canvas_search.next"),recordingKey:"figma_design_search.next",disabled:U.total<=1,htmlAttributes:{"data-tooltip-type":Y.Ib.TEXT,"data-tooltip":(0,D.t)("canvas_search.next"),"data-tooltip-shortcut-key":"canvas-search-next"},children:(0,i.jsx)(f.k,{})})]})]}),(0,i.jsx)(R.P,{className:ei.bB,scrollContainerRef:P,children:eP})]})}function ez({totalOnActivePage:e,resultsOnOtherPages:t,allInstancesExpanded:n}){let s=(0,eb.sO)(),r=(0,ey.cJ)(),l=(0,z.to)(),o=(0,a.d4)(e=>e.mirror.appModel.pagesList),d="";d=0===e?(0,q.lH)(o)||!n?s?(0,D.t)("canvas_search.no_results_in_this_deck"):r?(0,D.t)("canvas_search.no_results_on_site"):l?(0,D.t)("canvas_search.no_results_in_buzz_file"):(0,D.t)("canvas_search.no_results_on_page"):t?(0,D.t)("canvas_search.no_results"):(0,D.t)("canvas_search.no_results_in_file"):(0,D.t)("canvas_search.results_count",{total:e});let u=(!s&&!r&&!l||(0,_.kc)().interop_pages)&&(e>0||t||(0,q.lH)(o)||!n);return(0,i.jsxs)("div",{className:ei._M,children:[(0,i.jsx)(c.T,{"data-testid":"canvas-search-info",className:ei.qp,role:e>0?"status":"alert",children:d}),u&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{className:ei.hY,children:"\xb7"}),(0,i.jsx)(ea,{allInstancesExpanded:n})]})]})}function eB({pageId:e,open:t,setOpen:n,numResults:s}){let a=(0,W.eY)().get(e),r=e===x.Xy?(0,D.t)("fullscreen.canvas_search.pages"):a.name;return(0,i.jsxs)(S.GG,{className:ei.kQ,onClick:()=>n(!t),children:[(0,i.jsx)(P.B,{className:ei.eO,svg:t?eL.A:eM.A}),(0,i.jsx)("span",{className:ei.rB,children:r}),(0,i.jsx)("span",{className:ei.hs,children:s})]})}function eG(e){return e&&null!==e.index?`search-result-option-page-${e.pageId}-index-${e.index}`:""}function eU({result:e,replacement:t,activePageId:n,resultInputHandlerRef:r,selected:l,indirectlySelected:o,singletonHoverSelected:d,onSelect:c,onDoubleClick:u,isInMultiselectMode:p,isInHoveredSelectMode:m,hasMultipleSelections:h,setHoveredResult:f}){let _=(0,W.eY)(),y=(0,W.p8)("currentPage"),v=e.textMatch.matchType===g.Ifi.TEXT_MATCH,C=null!=t&&v&&(_.get(e.guid)?.hasMissingFont||!1),j=!(0,w.yZ)(),k=(0,a.d4)(e=>e.mirror.appModel.pagesList),I=j&&e.textMatch.matchType===g.Ifi.PAGE_MATCH&&g.h3O.isIncrementalSession()&&(0,q.Fy)(k,e.resultGuid)!==g.xal.LOADED,N=(0,a.wA)(),A=b()(ei.V3,{[ei.HR]:e.isPurple,[ei.wH]:l,[ei.r9]:I}),L=(0,i.jsx)(e_.Bf,{className:A,guid:e.guid});C?L=(0,i.jsx)("div",{className:ei.v9+" "+A,children:(0,i.jsx)(P.B,{svg:eP.A})}):e.guid===y&&(L=(0,i.jsx)("div",{className:ei.v9+" "+A,children:(0,i.jsx)(P.B,{svg:eO.A})}));let M=(0,s.useCallback)(e=>{p||I||u(e)},[p,I,u]),O=(0,s.useMemo)(()=>({nodeGuid:e.resultGuid,pageId:e.pageId,index:e.index,matchIndex:e.matchIndex,isPurple:e.isPurple}),[e]);return(0,i.jsxs)(S.GG,{"aria-selected":l||e.guid===y,className:b()({[ei.AX]:!0,[ei.wH]:l,[ei.Xt]:!l&&o,[ei.rX]:d,[ei.Dw]:m,[ei.HR]:e.isPurple,[ei.r9]:I}),id:eG(e),onClick:t=>{I?N(F.F.enqueue({type:"offline-page-switch",message:(0,D.t)("fullscreen.pages_panel.unavailable_offline")})):(r.current?.focus(),p||!l||(E.Ay.mac?t.metaKey:t.ctrlKey)||e.textMatch.matchType===g.Ifi.PAGE_MATCH?c(t):!h&&g.YEY&&g.YEY.setOverlayVisible(!0)),t.preventDefault(),t.stopPropagation()},onDoubleClick:M,onMouseDown:e=>{e.preventDefault()},onMouseEnter:()=>{e.pageId===x.Xy||e.pageId!==n?f(null):f(O),v?g.YEY&&g.YEY.setHoveredResult(e.resultGuid,e.matchIndex):e.textMatch.matchType===g.Ifi.LAYER_MATCH&&(0,K.Uc)(e.resultGuid)},onMouseLeave:()=>{(0,K.Uc)(""),f(null),g.YEY&&g.YEY.setHoveredResult(x.AD,-1)},recordingKey:T.Pt("figma_design_search","result",e.pageId,e.index),role:"option",children:[(0,i.jsx)("div",{className:ei._P,children:L}),(0,i.jsx)("div",{className:b()(ei.D6,{[ei.c1]:v}),children:e.textContent&&v?(0,i.jsx)(eH,{text:e.textContent,match:e.textMatch,replacement:C?void 0:t,multiline:!0}):(0,i.jsx)(eV,{result:e})}),I&&(0,i.jsx)("div",{className:ei.QF,"data-tooltip-type":Y.Ib.TEXT,"data-tooltip":(0,D.t)("fullscreen.pages_panel.unavailable_offline"),"data-onboarding-key":"page-unavailable-offline",children:(0,i.jsx)(P.B,{className:ei.VQ,svg:eR.A})})]})}function eV({result:e}){let{query:t}=(0,a.d4)(e=>e.canvasSearch),n=e.name&&e.stateGroupName?(0,I.w)(e.name):e.name;if(!n)return null;let s=e.stateGroupName||e.containerName,r=-1;e.textContent&&(n=e.textContent,r=e.name?.toLowerCase().indexOf(t)??-1,s=e.name);let l=n.toLowerCase().indexOf(t)??-1;return(0,i.jsxs)("div",{children:[n&&l>-1?(0,i.jsx)(eH,{text:n,match:{start:l,end:l+t.length,matchType:g.Ifi.LAYER_MATCH},multiline:!0}):(0,i.jsx)(L.ph,{text:n}),s&&(0,i.jsx)("div",{className:ei.Gu,children:r>-1?(0,i.jsx)(eH,{text:s,match:{start:r,end:r+t.length,matchType:g.Ifi.LAYER_MATCH}}):(0,i.jsx)(L.ph,{text:s})})]})}function eH({text:e,match:t,replacement:n,multiline:a}){let[r,l]=(0,s.useState)(e),[o,d]=(0,s.useState)(!1);(0,s.useEffect)(()=>{l(e)},[e]),(0,s.useEffect)(()=>{if(!o||r!==e)return;let n=t.start,i=0;for(let t=n-1;t>=0;--t)if(/\s/.test(e[t])&&i++,3===i){n=t;break}i<3&&(n=0),l(e.slice(n))},[o,r,e,t.start]);let c=(0,s.useMemo)(()=>(0,i.jsx)(eK,{text:r,replacement:n,fullString:e,match:t}),[r,t,n,e]);return(0,i.jsx)(L.ph,{className:a?ei.c1:"",text:c,multiline:a,onTruncationChange:d})}function eK({text:e,replacement:t,fullString:n,match:s}){let a=0;n&&e!==n&&(a=n.length-e.length);let r=s.start-a,l=s.end-a,o=e.substring(0,r),d=e.substring(r,l),c=e.substring(l);if(t&&d.toLocaleLowerCase()!==t.toLocaleLowerCase()){let e=U.r.detectTextTransform(d);t=U.r.applyTextTransform(t,e)}return(0,i.jsxs)(i.Fragment,{children:[a?"\u2026":"",o,t?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(u.E,{children:(0,D.tx)("canvas_search.original_replace_value")}),(0,i.jsx)("span",{className:ei.of,children:(0,i.jsx)("s",{children:d})}),(0,i.jsx)(u.E,{children:(0,D.tx)("canvas_search.updated_replace_value")}),(0,i.jsx)("b",{children:t})]}):(0,i.jsx)("b",{children:d}),c]})}},455431:(e,t,n)=>{n.d(t,{W:()=>S,l:()=>T});var i=n(104076),s=n(716976),a=n(237420),r=n(999083),l=n(795033),o=n(192075),d=n(366535),c=n(562951),u=n(278491),p=n(571430),m=n(643077),h=n(74620),f=n(211862),g=n(944350),x=n(853039),_=n(295253),y=n(498726),v=n(278151),b=n(989034),C=n(670974),j=n(844182),k=n(103345),w=n(832885),E=n(516813);let T=(0,l.eU)(!1);function S({clientX:e,clientY:t,pageIds:n,selectedView:S,shouldShowDuplicateOption:I}){let N=(0,a.wA)(),A=(0,a.d4)(e=>e.mirror.appModel),L=(0,f.q5)(),M=(0,h.p8)("pagesList"),O=(0,m.HZ)(),R=p.F.useShouldHideStarterCtaForOpenFile(),P=(0,j.cT)(),D=(0,C.hZ)(),F=1===n.length&&void 0!==n[0]?function({pageId:e,openFile:t,pagesList:n,team:i,shouldShowDuplicateOption:s,shouldPaywallForDraftsPageLimitV1:a,dispatch:r,hideUpsellPlanCta:l,isFileReadOnly:u,isK12OrgStudent:m}){var h;let f=n.length,b=n.filter(e=>!e.isDivider).length,C=n.find(t=>t.nodeId===e),j=!!C&&C.isDivider,T=n=>(0,E.HZ)()&&C&&t&&t.editorType===g._Y.WHITEBOARD?[{separator:!0},{name:"create-slides-outline-from-figjam",callback:()=>(0,E.$t)({pageGuids:[e],dispatch:n,source:w.E.FJ_PAGE_MENU})}]:[];if(u||m)return[{action:"page-copy-link",args:{nodeId:e}},...T(r)];let S=s?(h=j?(0,o.t)("fullscreen_actions.divider-duplicate"):(0,o.t)("fullscreen_actions.page-duplicate"),t&&((0,x.J9)({openFile:t,pageCount:f})||a({openFile:t,pageCount:f}))?{name:"page-duplicate",callback:()=>{r((0,d.to)({type:k.DV,data:{team:i,resource:y.vL.PAGE,action:v.ZN.DUPLICATE_PAGE,editorType:t.editorType,currentPlan:p.F.Plan.STARTER,upsellPlan:p.F.Plan.PRO,hideUpsellPlanCta:l,upsellSource:_.b.CREATE_NEW_PAGE}}))},displayText:h}:{action:"page-duplicate",args:{nodeId:e},loadingIndicatorString:"Duplicating",displayText:h}):null;return j?[S,{action:"page-delete",args:{nodeIds:[e]},loadingIndicatorString:"Deleting",displayText:(0,o.t)("fullscreen_actions.divider-delete")}]:[{action:"page-copy-link",args:{nodeId:e}},{separator:!0},{action:"page-rename",args:{nodeId:e},displayText:(0,o.t)("fullscreen_actions.pages-rename",{pageCount:1})},S,{separator:!0},{action:"page-delete",callback:()=>r(c.PK({})),args:{nodeIds:[e]},loadingIndicatorString:"Deleting",disabled:1===b,displayText:(0,o.t)("fullscreen_actions.pages-delete",{pageCount:1})},...T(r)]}({pageId:n[0],team:L?L.team:null,shouldShowDuplicateOption:I,openFile:L,pagesList:M,shouldPaywallForDraftsPageLimitV1:O,dispatch:N,hideUpsellPlanCta:R,isFileReadOnly:P,isK12OrgStudent:D}):function({pageIds:e,pagesList:t,dispatch:n,isFileReadOnly:i,isK12OrgStudent:s}){if(i||s)return[];let a=new Set(t.filter(e=>!e.isDivider).map(e=>e.nodeId)),r=e.filter(e=>a.has(e)),d=r.length;return 0===d?[]:[{action:"batch-page-rename",args:{nodeIds:r},displayText:(0,o.t)("fullscreen_actions.pages-rename",{pageCount:d})},{separator:!0},{action:"page-delete",callback:()=>n(c.PK({})),args:{nodeIds:r},loadingIndicatorString:"Deleting",displayText:(0,o.t)("fullscreen_actions.pages-delete",{pageCount:d}),disabled:a.size<=d},...(t=>{if(!(0,E.HZ)())return[];let n=l.zl.get(f.yV);return n&&n.editorType===g._Y.WHITEBOARD?[{separator:!0},{name:"create-slides-outline-from-figjam",callback:()=>(0,E.$t)({pageGuids:Array.from(e),dispatch:t,source:w.E.FJ_PAGE_MENU})}]:[]})(n)]}({pageIds:n,pagesList:M,dispatch:N,isFileReadOnly:P,isK12OrgStudent:D});return(0,s.useEffect)(()=>(l.zl.set(T,!0),()=>{l.zl.set(T,!1)}),[]),(0,i.jsx)("div",{className:`${u.Dm}`,children:(0,i.jsx)(b.Q,{appModel:A,menuItems:(0,r.WI)(F),dispatch:N,selectedView:S,showPoint:!1,targetRect:{width:10,height:10,left:e+100,top:t,right:e+110,bottom:t-10},removeDisabledItems:!1,isLimitedDevMode:!1,recordingKey:"pageMenu"})})}},325721:(e,t,n)=>{n.d(t,{Dt:()=>x,EN:()=>m,OL:()=>h,bV:()=>y,lz:()=>f,sf:()=>v,td:()=>_});var i=n(716976),s=n(980852),a=n(795033),r=n(188220),l=n(550527),o=n.n(l),d=n(846696),c=n(185411),u=n(303647),p=n(847964);let m=3,h=1,f=3;function g(e,t){let n=new Map,i=null,s=null;for(let a of e)"LIST_SECTION_HEADER"===a.type?(i=a,s=null):"LIST_HIERARCHY_PATH"===a.type?s=a:"variable"===t&&"LIST"===a.type&&a.variable?n.set(a.variable.node_id,{sectionHeader:i,hierarchyPath:s}):"style"===t&&"TEXT_STYLE_LIST"===a.type&&a.style&&n.set(a.style.key.toString(),{sectionHeader:i,hierarchyPath:s});return n}function x({selectedFixes:e,cachedFixes:t,violatingDevId:n,type:l,scopes:o}){let p;let{localVariableSets:m,libraryVariableSets:h}=(0,a.md)(d.mn),{allVariableListItems:f,variableMap:x,localVariables:_,libraryVariables:y}=(0,a.md)((0,u.rb)({type:l,scopes:o})),v=(0,i.useMemo)(()=>n?(0,s.getActiveTSSceneGraph)().getFromDeveloperFriendlyId(n):null,[n]);if(v)try{p=(0,c.TW)({node:v,resolvedType:l,localVariables:_,libraryVariableSetIdToSet:h,libraryVariables:y})}catch(e){console.error("Failed to get resolved variables for node:",e),p={localVariables:{},libraryVariables:{}}}else p={localVariables:{},libraryVariables:{}};let b=(0,i.useMemo)(()=>(function({cachedFixes:e,variableMap:t,localVariableSetIdToSet:n,libraryVariableSetIdToSet:i,allVariableListItems:s,allResolvedVariables:a}){if(0===e.length)return[];let l=g(s,"variable"),o=null,d=null,c=[];for(let{variableId:s,resolvedValue:r}of e){let e=t[s];if(!e)continue;let u=e.variableSetId&&(n[e.variableSetId]??i[e.variableSetId]);if(!u)continue;let{hierarchyPath:p,sectionHeader:m}=l.get(s)??{};m&&o!==m&&(c.push(m),o=m),p&&d!==p&&(c.push(p),d=p);let h=r??a.libraryVariables[s]?.resolvedValue??a.localVariables[s]?.resolvedValue;c.push({id:s,variable:e,type:"LIST",variableSet:u,isSuggestion:!0,resolvedValue:h})}return c.length>0?[{id:(0,r.g)(),type:"SUGGESTED_HEADER"},...c,{id:(0,r.g)(),type:"LIST_SEPARATOR"}]:c})({cachedFixes:t,variableMap:x,localVariableSetIdToSet:m,libraryVariableSetIdToSet:h,allVariableListItems:f,allResolvedVariables:p}),[f,t,x,m,h,p]);return(0,i.useMemo)(()=>{if(!v)return{fixes:e,listItems:b,allResolvedVariables:p,variableMap:x};let{fixes:t,listItemsWithResolvedValues:n}=function({allVariableListItems:e,allResolvedVariables:t}){let n=[],i=[];for(let s of e){if("LIST"!==s.type){i.push(s);continue}let{node_id:e}=s.variable,a=t.libraryVariables[e]?.resolvedValue??t.localVariables[e]?.resolvedValue;a&&(i.push({...s,resolvedValue:a}),n.push({variableId:e,resolvedValue:a}))}return{fixes:n,listItemsWithResolvedValues:i}}({allVariableListItems:f,allResolvedVariables:p});return{fixes:0===e.length?t:[...e,...t],listItems:0===b.length?n:[...b,...n],allResolvedVariables:p,variableMap:x}},[e,b,p,x,v,f])}function _({selectedStyles:e,cachedStyles:t}){let{listItems:n,allStyles:s}=(0,a.md)(u.Ov),l=(0,i.useMemo)(()=>{let e={};for(let t of s)e[t.key.toString()]=t;return{styleKeyToStyle:e}},[s]);return(0,i.useMemo)(()=>{let{styleKeyToStyle:i}=l;if(0===t.length)return{listItems:n,allStyles:[...e,...s],styleKeyToStyle:i};let a=[],o=g(n,"style"),d=null,c=null;for(let e of t){let{hierarchyPath:t,sectionHeader:n}=o.get(e.key.toString())??{};n&&d!==n&&(a.push(n),d=n),t&&c!==t&&(a.push(t),c=t),a.push({id:e.key.toString(),type:"TEXT_STYLE_LIST",style:e,isSuggestion:!0}),i[e.key.toString()]=e}return{listItems:[{id:(0,r.g)(),type:"SUGGESTED_HEADER"},...a,{id:(0,r.g)(),type:"LIST_SEPARATOR"},...n],allStyles:0===e.length?s:[...e,...s],styleKeyToStyle:i}},[e,t,n,s,l])}function y(e,t){return(0,i.useMemo)(()=>{if(""===t)return e;let n=t.toLowerCase(),i=[],s=null,a=null;return e.forEach(e=>{"LIST_SECTION_HEADER"===e.type?(s=e,a=null):"LIST_HIERARCHY_PATH"===e.type?a=e:("LIST"===e.type||"TEXT_STYLE_LIST"===e.type)&&("LIST"===e.type&&!e.isSuggestion&&e.variable.name.toLowerCase().includes(n)||"TEXT_STYLE_LIST"===e.type&&!e.isSuggestion&&(e.style.name.toLowerCase().includes(n)||e.style.description?.toLowerCase().includes(n)))&&(s&&(i.push(s),s=null),a&&(i.push(a),a=null),i.push(e))}),i},[e,t])}function v(){let e=(0,a.Xr)(u.uw),t=(0,a.Xr)(u.aW),n=(0,a.Xr)(u.iO),s=(0,a.Xr)(u.rg),r=(0,a.Xr)(u.jV),l=(0,a.Xr)(u.Ue);return(0,i.useMemo)(()=>o()(()=>{(0,p.jD)(),e(null),t(!1),n(null),s(null),r(null),l(null)},100),[e,t,n,s,r,l])}},825947:(e,t,n)=>{n.d(t,{Ci:()=>U,Hl:()=>O,OI:()=>z,PM:()=>N,RD:()=>G,Vz:()=>B,Wo:()=>F,Y0:()=>M,_i:()=>L,bk:()=>P,l2:()=>R,mr:()=>E,rL:()=>D,sH:()=>A,vP:()=>S,xg:()=>T,zO:()=>I});var i=n(716976),s=n(754245),a=n(812714),r=n(795033),l=n(776111),o=n(513122),d=n(492210),c=n(846696),u=n(769845),p=n(18978),m=n(997477),h=n(928818),f=n(4033),g=n(371952),x=n(624155),_=n(61566),y=n(577875),v=n(668485),b=n(751831),C=n(325721),j=n(847964),k=n(315790),w=n(331264);function E(){let e=(0,r.Xr)(c.v4),t=(0,g.pN)(),n=t.data?.libraryVariables,s=t.data?.libraryVariableSets,a=(0,r.md)(c.Ut),o=(0,r.md)(c.ri);(0,i.useEffect)(()=>{if(!a){(0,l.PN)()&&e(e=>({...e,status:"loaded"}));return}if("errors"===t.status){e(e=>({...e,status:"error"}));return}if("loaded"!==t.status)return;let i=new AbortController,r=i.signal;return async function(){if(!s||!n)return;e(e=>({...e,status:"loading"}));let t=new Set,i=[];s.forEach(e=>{a?.has(e.library_key)&&(i.push(e),t.add(e.library_key))});for(let e=0;e<i.length;e+=2){if(r.aborted)return;let t=i.slice(e,e+2).map(e=>(0,h.RI)(e));await Promise.allSettled(t)}let l=i.reduce((e,t)=>(t.node_id&&(e[t.node_id]=t),e),{});Array.from(a??[]).filter(e=>{let t=o.keyToPublishedLibraryMap?.get?.(e);return t?.num_variables&&t.num_variables>0}).every(e=>t.has(e))&&e({libraryVariables:n,libraryVariableSetIdToSet:l,status:"loaded",libraryKeys:t})}(),()=>{i.abort()}},[t.status,s,n,o.keyToPublishedLibraryMap,a,e])}function T(){let e=(0,f.$1)(),t=(0,f.j8)(),n=(0,r.Xr)(c.Z4),s=(0,r.Xr)(c.d$),l=(0,i.useMemo)(()=>{if(!(0,a.kc)().aip_flower_garden_ext_rule)return new Map;let n=new Map;return Object.values(e).forEach(e=>{if(!e.manifest.lintRules?.length)return;let t=new Set;e.manifest.lintRules.forEach(e=>{t.add(e.key)});let i=e.localFileId?.toString()??e.plugin_id;n.set(i,t)}),Object.values(t).forEach(e=>{if(!e.manifest.lintRules?.length)return;let t=new Set;e.manifest.lintRules.forEach(e=>{t.add(e.key)}),n.set(e.plugin_id,t)}),n},[e,t]),o=(0,i.useMemo)(()=>{if(!(0,a.kc)().aip_flower_garden_ext_rule)return new Map;let n=new Map;return Object.entries(e).filter(([e,t])=>(t.manifest.lintRules?.length??0)>0).forEach(([e,t])=>{n.set(e,t)}),Object.entries(t).filter(([e,t])=>(t.manifest.lintRules?.length??0)>0).forEach(([e,t])=>{n.set(t.plugin_id,t)}),n},[e,t]);(0,i.useEffect)(()=>{s(o),n(l)},[l,n,s,o])}function S(){let e=(0,r.md)(c.Ut);(0,i.useEffect)(()=>{let t=[...e??new Set].map(e=>e.toString()),n={library_keys:t,entity_type:"STYLE",entity_value_type:"TEXT",max_results_per_library:o.Yk};(0,v.kA)(n),(0,m.w0)(u.yA).then(e=>{let n=e.get(u.tS,u.Iv);(0,v.kA)({library_keys:t,entity_type:"VARIABLE",entity_value_type:"COLOR",max_results_per_library:n})})},[e])}function I(){let e=(0,_.n)(),t=(0,x.eS)(x.aD.CURRENT),n=(0,r.Xr)(b._),s=(0,i.useMemo)(()=>{if((0,a.kc)().aip_flower_garden_component_update&&e)return(0,y.n)(t,e,x.aD.CURRENT)},[t,e]);(0,i.useEffect)(()=>{(0,a.kc)().aip_flower_garden_component_update&&s&&n({status:"loaded",checkpoints:r.zl.get(s)})},[s,n])}function N(){let e=(0,r.md)(k._M);return[p.FR.LANDING_PAGE_WELCOME,p.FR.LANDING_PAGE_NO_SELECTION,p.FR.LANDING_PAGE_LIMIT_EXCEEDED].includes(e)}function A(){let e=(0,r.md)(c.u2);return e===p.td.GROUPING_COMPLETE||e===p.td.RESPONDING_TO_CANVAS_CHANGE}function L(){return!A()}function M(){let e=(0,r.md)(c.u2),t=(0,r.md)(k.NM),n=(0,r.md)(k.Bd),s=F(),a=B(),l=(0,r.Xr)(k.nr);(0,i.useEffect)(()=>{if(e===p.td.GROUPING_COMPLETE&&!t&&n&&n.length>0){let e=n[0];e&&((0,j.JT)(e,"AUTO"),s(e.id),a(),l(e.id))}},[e,t,n,s,a,l])}function O(){let e=(0,r.Xr)(k._M),t=(0,C.sf)(),n=function(){let e=(0,r.Xr)(k.NM),t=(0,r.Xr)(k.JQ),n=B(),s=(0,r.Xr)(w.q6),a=(0,r.Xr)(k.xi);return(0,i.useCallback)(()=>{e(null),t(new Set),n(),s((0,w.J)()),a(null)},[n,s,a,e,t])}(),s=(0,o.am)();return(0,i.useCallback)(i=>{t(),s?.teardownLinter(),e(i),n()},[t,s,e,n])}function R(){return 0===(0,r.md)(c.Kk)}function P(){let e=(0,o.am)();return(0,i.useCallback)(async()=>{if(!e)throw Error("Linter is not initialized");try{await e.requestDetection()}catch(e){if(e instanceof d.yU){r.zl.set(k._M,p.FR.LANDING_PAGE_LIMIT_EXCEEDED);return}if(e instanceof d.F7){r.zl.set(k._M,p.FR.LANDING_PAGE_NO_SELECTION);return}console.error("Unexpected error when running linter detection:",e)}},[e])}function D(e){let t=(0,C.sf)(),n=(0,o.am)();return(0,i.useCallback)(()=>{t();let i=r.zl.get(k.IZ).map(e=>e.violationId);n?.ignoreAllViolationIds(i),e?.(!0),(0,j.eT)()},[t,e,n])}function F(){let e=(0,r.Xr)(k.NM),t=(0,r.Xr)(k.JQ);return(0,i.useCallback)(n=>{e(n),t(e=>new Set(e).add(n))},[e,t])}function z(){let e=(0,r.Xr)(k.xo);return(0,i.useCallback)(t=>{e(t)},[e])}function B(){let e=(0,r.Xr)(k.xo);return(0,i.useCallback)(()=>{e(null)},[e])}function G(){let e=(0,r.Xr)(k.nr);return(0,i.useCallback)(t=>{r.zl.get(k.nr)!==t&&((0,s.flushSync)(()=>{e(null)}),e(t))},[e])}function U(){let e=(0,r.Xr)(k.nr);return(0,i.useCallback)(t=>{e(e=>e===t?null:t)},[e])}},205917:(e,t,n)=>{n.d(t,{Dm:()=>h,KV:()=>m,_9:()=>p,fR:()=>c,p6:()=>u});var i=n(716976),s=n(795033),a=n(188220),r=n(825947),l=n(847964),o=n(947357),d=n(315790);function c(){let e=(0,s.md)(d.NM),t=(0,s.md)(d.xo),n=(0,s.md)(d.$C),{isReady:a,numSuccessfulFixes:r}=(0,i.useMemo)(()=>{let e=Array.from(n.values()),t=e.every(e=>e?.status!=="loading"),i=e.filter(e=>e?.status==="loaded").length;return{selectedFixes:e,isReady:t,numSuccessfulFixes:i}},[n]),o=(0,i.useRef)(null);(0,i.useEffect)(()=>{e&&(o.current=performance.now())},[e,t]),(0,i.useEffect)(()=>{if(a&&e&&o.current){let n=performance.now()-o.current;(0,l.OW)(e,t,r,n),o.current=null}},[e,t,a,r])}function u(){let e=(0,o.F)(),t=(0,s.md)(d.NM),n=(0,s.md)(d.xo),a=(0,i.useRef)(null);(0,i.useEffect)(()=>{if(!e&&t){a.current=performance.now();return}if(t&&a.current){let e=performance.now()-a.current;(0,l.sc)(t,n,e),a.current=null}},[e,t,n,a])}function p(){let e=(0,r._i)(),t=(0,r.l2)()&&!e,n=(0,i.useRef)(null);(0,i.useEffect)(()=>{if(e||null!==n.current||(n.current=performance.now()),t&&null!==n.current){let e=performance.now()-n.current;(0,l.A9)(e),n.current=null}},[e,t])}function m(e,t){(0,i.useEffect)(()=>{if(t){let t=(0,a.g)();(0,l.OX)({impressionId:t,source:e})}},[t,e])}function h({blockId:e,suggestionId:t,checkIsSelected:n,filteredItems:s,searchQuery:a}){let r=(0,i.useMemo)(()=>({selectedNodeIndex:n?s.findIndex(e=>n(e))??-1:-1,numberOfItems:s.filter(e=>"LIST"===e.type||"TEXT_STYLE_LIST"===e.type).length}),[n,s]);(0,i.useEffect)(()=>{e&&(0,l.A5)({blockId:e,suggestionId:t,searchQuery:a,hasOptionSelected:r.selectedNodeIndex>-1,numSuggestionsShown:r.numberOfItems})},[a,e,r,t])}},947357:(e,t,n)=>{n.d(t,{F:()=>f,K:()=>h});var i=n(716976),s=n(638004),a=n(795033),r=n(513122),l=n(492210),o=n(18978),d=n(550209),c=n(847964),u=n(840930),p=n(315790),m=n(892572);function h(){let e=(0,a.Xr)(p._M),t=(0,r.am)();return(0,i.useCallback)(async()=>{try{(0,c.il)(),(0,u._)(),await t?.refreshDetection()}catch(t){(0,d.$D)(s.e.DS_ENABLEMENT,t),t instanceof l.yU?e(o.FR.LANDING_PAGE_LIMIT_EXCEEDED):t instanceof l.F7&&e(o.FR.LANDING_PAGE_NO_SELECTION)}},[e,t])}function f(){return 0===(0,a.md)(m.QU).violationCount}},840930:(e,t,n)=>{n.d(t,{_:()=>u,a:()=>c});var i=n(582789),s=n(724744),a=n(795033),r=n(18978),l=n(354114),o=n(692042),d=n(315790);function c(){let e=a.zl.get(d.$H),t=a.zl.get(d.r4);if(!e||!t)return null;let n=l.Y5.getViewportInfo(),r=(0,o.Nd)(n,t),c=(0,o.Nd)(n,{x:t.x+e.x,y:t.y+e.y});return new i.r(new s.M(r.x,r.y),new s.M(c.x-r.x,c.y-r.y))}function u(){a.zl.set(d._M,r.FR.SELECTED_VISUAL_GROUP_VIEW)}},331264:(e,t,n)=>{n.d(t,{J:()=>x,Mr:()=>y,Uq:()=>f,Vr:()=>g,q6:()=>_});var i=n(716976),s=n(266808),a=n(980852),r=n(795033),l=n(357524),o=n(846696),d=n(769845),c=n(361170),u=n(958208),p=n(156774),m=n(764354),h=n(30520),f=(e=>(e.SIDEBAR="sidebar",e.PREVIEW="preview",e))(f||{}),g=(e=>(e.COLOR="color",e.IMAGE="image",e))(g||{});function x(){return{bg:"var(--color-loadingsecondary)",type:"color"}}let _=(0,r.eU)(x());function y(e,t){let n=(0,l.ei)(e),o=(0,h.wg)(n),[c,p]=(0,i.useState)(r.zl.get(_));return(0,i.useEffect)(()=>{let n=(0,a.getActiveTSSceneGraph)().get(e);if(!n)return;let i=n.parentNode;for(;i;){let e=i.guid,n=(0,d.kl)(i.fills).paint;if(n){let i=n.type;if("SOLID"===i){p(function(e){let t=e.color;if(!t)return x();let n=e.opacity??1,{hex:i}=(0,u.XF)(t),s=Math.floor(255*n).toString(16);return{bg:`#${i}${s}`,type:"color"}}(n));return}if("IMAGE"===i){p(v(e,"preview"===t?8:2,o));return}if("VIDEO"!==i&&"EMOJI"!==i){p(v(e,2,o));return}p(x());return}i=i.parentNode}let r=s.Egt?.getNodePageBackgroundColor(e);p(r?{bg:r,type:"color"}:x())},[o,e,t]),c}function v(e,t,n){let i=`${e}-${t}`,l=r.zl.get(o.g7),d=l.get(i),u=d?.lastEditedAtTime!==n;if(d&&!u)return{bg:d.src,type:"image"};let h=function(e,t){let n=s.mHF?.copyNodeToLinterScene(e);if(!n)return null;let i=new a.TSSceneGraph(s.juq.LINTER).get(n);if(!i)return null;for(let e of i.childrenNodes)e.removeSelfAndChildren();i.cornerRadius=0,i.effects=[];let r=(0,m.L6)(n,t);return r?(0,p.Pv)(r.image,new c.Mi(r.width,r.height)):null}(e,t);if(!h)return x();if(n>0){let e=new Map(l);e.set(i,{src:h,lastEditedAtTime:n}),r.zl.set(o.g7,e)}return{bg:h,type:"image"}}},405215:(e,t,n)=>{n.d(t,{G:()=>iY});var i=n(104076),s=n(716976),a=n(237420),r=n(667693),l=n(638004),o=n(266808),d=n(812714),c=n(633065),u=n(328341),p=n(1188),m=n(192075),h=n(98173),f=n(222714),g=n(370020),x=n(742549),_=n(752064),y=n(147046),v=n(111297),b=n(211862),C=n(657878),j=n(243690),k=n(377026),w=n(407012),E=n(58212),T=n(268389),S=n(419822),I=n(826220),N=n(74620),A=n(421334);let L=(0,s.lazy)(()=>n.e(5995).then(n.bind(n,332575)));function M(){return(0,i.jsx)(T.vo,{children:(0,i.jsx)(T.nB,{padding:0,className:A.g4,children:(0,i.jsx)(S.k,{})})})}function O({onClose:e,defaultPosition:t,windowDefaultWidth:n,windowDefaultHeight:a,manager:r,entrypoint:l,children:o,scope:d}){return(0,N.aV)()?null:(0,i.jsx)(I._L,{constraints:{minWidth:n,minHeight:a},manager:r,defaultWidth:n,defaultHeight:a,onClose:({source:t})=>{"outside"!==t&&e()},defaultPosition:t,draggable:"header",children:(0,i.jsx)(s.Suspense,{fallback:(0,i.jsx)(M,{}),children:o||(0,i.jsx)(L,{scope:d,entrypoint:l})})})}function R(){let e=h.ox(),t=(0,C._6)(),{windowInnerWidth:n,windowInnerHeight:r}=(0,f.l)(),l=s.useMemo(()=>({x:Math.max(0,(n-896)/2),y:Math.max(0,(r-600)/2)}),[n,r]),o=(0,b.q5)(),d=(0,g.IQ)(),c=(0,g.hm)(o)&&!d,u=(0,b._G)(),p="fullscreen"===t.view&&t.githubSettingsLibraryKey?t.githubSettingsLibraryKey:u,T=(0,x.RT)(),S=(0,a.wA)(),I=(0,j.B)(p??"",{enabled:!!p}).unwrapOr(null),N="fullscreen"===t.view&&t.githubRepositorySelectorMode===k.e6.DIRECTORY_SELECTOR,A=()=>{"fullscreen"===t.view&&S((0,y.sf)({...t,showDevModeComponentBrowser:!0,showComponentBrowserGitHubSettings:!1,githubSettingsLibraryKey:void 0}))},L=function(e,t){let n=(0,a.wA)();return()=>{t(),setTimeout(()=>{let t=e?(0,m.t)("dev_handoff.component_browser_onboarding.github_connection_success_toast",{library_name:e}):(0,m.t)("dev_handoff.component_browser_onboarding.github_connection_success_toast_no_library_name");n(E.F.enqueue({message:t,type:"GitHub connected"}))},300)}}(I,A),M=(0,x.yq)(),R=(0,_.bh)();return c?(0,i.jsxs)(i.Fragment,{children:[M&&(0,i.jsx)(v.fu,{name:"Component Browser",children:(0,i.jsx)(O,{onClose:R,defaultPosition:l,windowDefaultWidth:896,windowDefaultHeight:600,manager:e,entrypoint:t.componentBrowserEntrypoint||"filename_menu",scope:t.componentBrowserScope||"file"})}),T&&p&&(0,i.jsx)(v.fu,{name:"Component Browser GitHub Settings",children:(0,i.jsx)(w.A,{libraryKey:p,onClose:A,onBack:A,onSuccess:L,isDirectorySelection:N})})]}):null}var P=n(549571),D=n(751464),F=n(962212),z=n(19877),B=n(598626),G=n(999083),U=n(276800),V=n(420680),H=n(225654),K=n(350019),W=n(795033),q=n(511570),X=n.n(q),Y=n(983500),Z=n(140490),J=n(641518),Q=n(903282),$=n(772963),ee=n(236631),et=n(951002),en=n(684742),ei=n(550209),es=n(332285),ea=n(968169),er=n(371952),el=n(331497),eo=n(346260),ed=n(415567),ec=n(728233),eu=n(180674),ep=n(77417),em=n(13073),eh=n(487375),ef=n(993842);let eg=s.forwardRef(function({valueToCopy:e,isCopyable:t,children:n,valueTypeForTracking:a,variableTypeForTracking:r,recordingKey:l},o){let{isSelected:d}=(0,ef.e)(),c=(0,ed.Cj)(e),u=(0,es.ON)(),p=s.useCallback(e=>{e.stopPropagation(),c&&c(),u("cell_copied",{type:a,variableType:r})},[c,u,a,r]);return(0,i.jsx)(en.E,{ref:o,className:X()("variable_cell_content--copyButton--KwbAc ellipsis--ellipsis--Tjyfa",d&&"variable_cell_content--isOnSelected--UH9z4"),onClick:t?p:void 0,recordingKey:l,children:n})});function ex({variable:e,variableSetId:t,modeId:n,isCopyable:a,variableTypeForTracking:r}){let d=(0,er._t)(t),c=s.useMemo(()=>n&&d?{[d]:n}:void 0,[n,d]),u=(0,er.bL)(e.node_id,t,n),p=(0,er.BQ)(e.node_id,c),m=u??p,h=!m||!p||"MIXED"===p||"MIXED"===m;if(s.useEffect(()=>{if(h){let e=m&&p?"Variables table cell has mixed value":"Variables table cell has no value";(0,ei.$D)(l.e.DEV_MODE,Error(e))}},[h,m,p]),h)return null;switch(m.type){case o.Z_n.STRING:case o.Z_n.FLOAT:return(0,i.jsx)(e_,{value:m.value,isCopyable:a,recordingKey:`dev_handoff.variables_table.cell.copy-${e.name}-${n}`});case o.Z_n.BOOLEAN:return(0,i.jsx)(e_,{value:(0,em.Oi)(m),isCopyable:a,variableTypeForTracking:r});case o.Z_n.COLOR:return(0,i.jsx)(ey,{value:m,isCopyable:a});case o.Z_n.ALIAS:return(0,i.jsx)(ev,{value:m,resolvedValue:p,isCopyable:a,variableTypeForTracking:r});case o.Z_n.SYMBOL_ID:case o.Z_n.NODE_FIELD_ALIAS:case o.Z_n.EXPRESSION:case o.Z_n.FONT_STYLE:case o.Z_n.TEXT_DATA:case o.Z_n.MAP:case o.Z_n.MANAGED_STRING_ALIAS:case o.Z_n.CMS_ALIAS:case o.Z_n.JS_RUNTIME_ALIAS:case o.Z_n.IMAGE:case o.Z_n.LINK:case o.Z_n.SLOT_CONTENT_ID:case o.Z_n.DATE:case o.Z_n.KEYFRAME_TRACK_ID:return null;default:(0,et.xb)(m)}}function e_({value:e,isCopyable:t,variableTypeForTracking:n,recordingKey:s}){let a="number"==typeof e?(0,ec.nd)(e,""):e;return(0,i.jsx)(eg,{valueToCopy:a,isCopyable:t,valueTypeForTracking:"value",variableTypeForTracking:n,recordingKey:s,children:(0,i.jsx)("div",{className:ee.s.textBodyMedium.truncate.$,children:a})})}function ey({value:e,isCopyable:t,recordingKey:n}){let s=(0,ea.Ku)(),a=(0,ep.Ig)(),r=(0,eu.q)(e.value,s,a,{alphaInPercent:!0}).value,l=(0,i.jsx)(eo.rh,{color:e.value,value:r,disableHover:!t,pillClassName:"variable_cell_content--rawColorPillContainer--uuD03"});return(0,i.jsx)("div",{className:ee.s.flex.alignCenter.gap8.h16.minW0.itemsCenter.$,children:(0,i.jsx)(eg,{valueToCopy:r,isCopyable:t,valueTypeForTracking:"value",variableTypeForTracking:"COLOR",recordingKey:n,children:l})})}function ev({value:e,resolvedValue:t,isCopyable:n,variableTypeForTracking:a}){let r=(0,er.u)(e.value),l=(0,ed.Cj)(r?.name),d=(0,es.ON)(),c=s.useCallback(e=>{e.stopPropagation(),l&&l(),d("cell_copied",{type:"alias",variableType:a})},[l,d,a]);return t.resolvedType===o.rXF.COLOR?(0,i.jsx)(eo.np,{color:t.value,variable:r,label:r?.name??(0,m.t)("variables.missing_name"),onClick:r&&n?c:void 0,selected:n}):(0,i.jsx)("div",{className:X()("variable_cell_content--aliasWrapper--mHIWi",e.resolvedType===o.rXF.COLOR&&"variable_cell_content--shiftLeft--x6CPr"),children:(0,i.jsx)(eh.wG,{thumbnailValue:t,text:r?.name??(0,m.t)("variables.missing_name"),variableValue:e.value,onClick:r&&n?c:void 0,disableHover:!n,ui3Height:!0})})}function eb({name:e,variableId:t,isCopyable:n,isSelected:a=!1,variableTypeForTracking:r}){let l=(0,el.J2)((0,ea.UK)().showGuids)&&t?`${e} (${t})`:e,o=(0,ec.sD)(l);return s.useEffect(()=>{a&&o.current?.scrollIntoView({block:"nearest",behavior:"instant"})},[a,o]),(0,i.jsx)(eg,{ref:o,valueToCopy:e,isCopyable:n,variableTypeForTracking:r,recordingKey:`dev_handoff.variables_table.cell.copy-${e}`,children:l})}var eC=n(74528),ej=n(114720),ek=n(88314),ew=n(187714),eE=n(404343);let eT=(0,W.eU)({nameColumnWidth:void 0,valueColumnWidths:{}});function eS({modeID:e}){let[t,n]=(0,W.fp)(eT),a=s.useRef(null),r=s.useRef(0),[l,o]=(0,ew.i)({onBeforeDrag(){let n=e?t.valueColumnWidths[e]:t.nameColumnWidth,i=e?eE.Gyo:eE.Wsk;r.current=n??(0,Y.jz)(i)},onDrag(t){let i=(0,ek.qE)(r.current+t.delta.x,50,500);n(t=>e?{...t,valueColumnWidths:{...t.valueColumnWidths,[e]:i}}:{...t,nameColumnWidth:i})}}),d=s.useCallback(()=>{n(t=>{if(e){let{[e]:n,...i}=t.valueColumnWidths;return{...t,valueColumnWidths:i}}return{...t,nameColumnWidth:void 0}})},[e,n]);return(0,i.jsx)("div",{ref:a,"data-dragging":l||void 0,onDoubleClick:d,...o({className:"variables_table_resizing--resizingHandle--il1Ui"})})}var eI=n(915013),eN=n(592726),eA=n(176203),eL=n(349311),eM=n(859802),eO=n(819222),eR=n(72832),eP=n(34378),eD=n(480355),eF=n(53400);let ez="variables_table--background--bcZc8",eB="variables_table--row--dhAQa",eG="variables_table--cell--3uNjl",eU="variables_table--rightBorder--WzCBo",eV="variables_table--cellContents--sgYHU ellipsis--ellipsis--Tjyfa",eH="variables_table--ellipsis--PKOvw ellipsis--ellipsis--Tjyfa",eK=(0,Y.jz)(eE.a_Q),eW=(0,Y.jz)(eE.bTb);function eq({name:e}){let t=e.split("/"),n=t.slice(0,-1),s=t[t.length-1];return(0,i.jsxs)("div",{className:"variables_table--groupLabel--Mu-zB",children:[n.map((e,t)=>(0,i.jsx)($.G,{className:"variables_table--groupLabelParent--yYqmc",text:e},`${e}-${t}`)),(0,i.jsx)($.G,{className:"variables_table--groupLabelLast--zaKX-",text:s})]})}function eX(){return(0,i.jsx)(Z.u,{label:"DevModeVariablesTable",children:(0,i.jsx)(eY,{})})}function eY(){let e=(0,ea.dP)(),t=(0,s.useRef)(null),[n,a]=s.useState(!1),{currentVariableSet:r,variablesTableColumns:o,variablesTableData:d,selectedVariable:c,selectedRowIndex:u,setSelectedVariable:h}=function(){let e=performance.now(),t=(0,es.oy)(),n=(0,eC.A8)(),i=(0,eC.i_)(),a=(0,er.yp)(),r=(0,eC.R6)(a),l=function(e,t){let n=(0,eC.vo)(e);return s.useMemo(()=>{if(!e)return[];let i=n.filter(e=>!t||t===eC.eb||e.name===t||e.name.startsWith(`${t}/`));return(0,G.Bq)(i.map((t,n)=>{let i=[],s=t.variables.map(n=>{let i=e.modes.map(e=>({variable:n,modeId:e.id})),s=n.name.split("/"),a=n.name.includes("/")?s[s.length-1]:n.name,r=n?.resolvedType!==void 0?(0,em.Hr)(n.resolvedType):void 0;return{id:n.node_id,type:n.resolvedType,name:a,group:t.name,variableId:n.node_id,content:i,variableTypeForTracking:r}});return""!==t.name&&t.variables.length>0&&i.push({id:`group${n}`,isDividerRow:!0,content:t.name}),i.push(...s),i}))},[t,e,n])}(r,(0,W.md)(eC.bE)),o=s.useMemo(()=>l.findIndex(e=>e.variableId===n),[l,n]),d=s.useCallback(e=>{r&&i(e,r.node_id)},[i,r]),c=s.useMemo(()=>{let e=r?r.modes.map(e=>{let t=1===r.modes.length&&e.name===eP.nm?(0,m.t)("variables.create_modal.value_label"):e.name;return{id:e.id,label:t}}):[];return{currentVariableSet:r,variablesTableColumns:[{id:"name",label:(0,m.t)("dev_handoff.variables.table_column_name")},...e],variablesTableData:l,selectedRowIndex:o,selectedVariable:n,setSelectedVariable:d}},[r,l,o,n,d]);return t("table",performance.now()-e,{type:"data"}),c}(),f=s.useCallback(()=>{h(null)},[h]),g=(0,K.Te)({count:d.length,getScrollElement:()=>t.current,estimateSize:e=>d[e]&&eQ(d[e])?eW:eK,overscan:20,measureElement:e=>e.getBoundingClientRect().height+1});s.useEffect(()=>{!n&&u&&-1!==u&&(g.scrollToIndex(u,{align:"center"}),a(!0))},[n,u,g]);let x=function(){let e=(0,W.md)(eT);return e.nameColumnWidth?`${e.nameColumnWidth}px`:eE.Wsk}(),_=function(e){let t=(0,W.md)(eT),n=e?.length===1;if(!e)return"";if(n){let n=e[0],i=t.valueColumnWidths[n?.id||""]??eE.Gyo;return`minmax(${i}, auto)`}return e.map((n,i)=>{let s=t.valueColumnWidths[n.id],a=s?`${s}px`:eE.Gyo;return i===e.length-1?`${a} minmax(${eE.Gyo}, auto)`:a}).join(" ")}(r?.modes),y=(0,er.u)(c||void 0),v=(0,W.md)(ej.$),b=s.useMemo(()=>({numColumns:o?.length,numRows:d?.length,variableType:y?.resolvedType!==void 0?(0,em.Hr)(y.resolvedType):void 0,entrypoint:v}),[y?.resolvedType,o?.length,d?.length,v]);if(!(0,eC.zL)())return(0,i.jsx)("div",{className:ez,children:(0,i.jsx)("div",{className:"variables_table--loadingWrapper--WdL0z",style:{left:e},children:(0,i.jsx)(S.k,{size:"lg"})})});let C=!!r,j=0===d.length,k=r?.modes.length===1,w=`${x} ${_}`;return(0,i.jsx)(p.tH,{boundaryKey:"varTable",fallback:p.H4.DEFAULT_FULL_PAGE,team:l.e.DEV_MODE,sentryTags:{area:l.e.DEV_MODE},hasCustomWASMBuild:!1,children:(0,i.jsx)(es.gs,{name:"full_table",trackingProps:b,children:(0,i.jsx)("div",{className:ez,children:(0,i.jsxs)("div",{className:"variables_table--fullTableView--CVdEq",style:{left:e},children:[(0,i.jsx)(eJ,{title:r?.name}),(0,i.jsx)("div",{className:"variables_table--tableWrapper---mT7S",children:C?j?(0,i.jsx)(eD.fQ,{title:(0,m.t)("variables.authoring_modal.no_variables_in_collection"),text:(0,m.t)("dev_handoff.variables.table_collection_empty")}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"variables_table--scrollContainer--rlU7K",ref:t,children:(0,i.jsxs)(Q.Zu,{gridColumnSizes:w,style:{height:g.getTotalSize()+(0,Y.jz)(eE.wxr)},className:X()("variables_table--stickyTopOverride--A1TnP","variables_table--stickyLeftOverride--mSdpV"),stickyTop:!0,stickyLeft:!0,"aria-label":(0,m.t)("dev_handoff.variables.table_aria-label"),"aria-describedby":"dev_mode_variables_table_title","aria-rowcount":d.length,children:[(0,i.jsxs)(Q.$y,{className:eB,children:[o.map((e,t)=>{let n=0===t,s=t===o.length-1;return(0,i.jsxs)(Q.Jy,{className:X()(eG,{[eU]:t<o.length-1||!k,"variables_table--nameHeaderCell--TM9iU":n}),children:[(0,i.jsx)("div",{className:X()(eH,"variables_table--headerText--uHXN6"),children:e.label}),(!k||!s)&&(0,i.jsx)(eS,{modeID:n?void 0:e.id})]},e.id)}),(0,i.jsx)(Q.Jy,{})]}),(0,i.jsx)("tr",{style:{height:g.getVirtualItems()[0]?.start??0,marginTop:-1}}),g.getVirtualItems().map(e=>{let t=d[e.index],n=eQ(t),s=!n&&t.variableId===c;return(0,i.jsx)(ef.y,{isSelected:s,children:(0,i.jsx)(eZ,{isDivider:n,variableId:t.variableId??"",selectedVariableId:c,setSelectedVariable:h,variableTypeForTracking:t.variableTypeForTracking,children:n?(0,i.jsx)(Q.Jy,{className:X()(eG,"variables_table--groupDividerCell--DWXGW"),children:(0,i.jsx)("div",{className:X()("variables_table--itemPlainText--5KrPr","variables_table--groupDivider--4bKFP",eH),"data-testid":`dev_handoff.variables_table.header.${t.content}`,children:(0,i.jsx)(eq,{name:t.content})})}):(0,i.jsxs)(i.Fragment,{children:[!!t.name&&void 0!==t.type&&(0,i.jsxs)(Q.Jy,{className:X()(eG,"variables_table--nameCell--tM7zv",eU),children:[(0,i.jsx)(eR.i,{type:t.type}),(0,i.jsx)("div",{className:eV,children:(0,i.jsx)(eb,{name:t.name,variableId:t.variableId,isCopyable:s,isSelected:s,variableTypeForTracking:t.variableTypeForTracking})}),(0,i.jsx)(eS,{})]}),Array.isArray(t.content)&&t.content.map((e,n)=>{let a=n===t.content.length-1;return(0,i.jsxs)(Q.Jy,{className:X()(eG,!k&&eU),children:[(0,i.jsx)("div",{className:eV,children:(0,i.jsx)(ex,{variable:e.variable,variableSetId:r?.node_id,modeId:e.modeId,isCopyable:s,variableTypeForTracking:t.variableTypeForTracking})}),(!k||!a)&&(0,i.jsx)(eS,{modeID:e.modeId})]},`${e.variable.node_id}-${e.modeId}`)})]})})},t.id)})]})}),c&&(0,i.jsx)("div",{className:"variables_table--detailsSidePanelContainer--yLujF",children:(0,i.jsx)(eF.U,{selectedVariable:c,currentVariableSet:r?.node_id,onCloseDetailsSidePanel:f})})]}):(0,i.jsx)(eD.fQ,{title:(0,m.t)("variables.authoring_modal.no_variables_in_file"),text:(0,m.t)("dev_handoff.variables.table_empty")})})]})})})})}function eZ({isDivider:e,variableId:t,setSelectedVariable:n,selectedVariableId:a,variableTypeForTracking:r,children:l}){let o=(0,es.ON)(),d=s.useCallback(e=>{e.stopPropagation(),a||o("variable_clicked",{variableType:r}),n(a===t?null:t)},[a,n,o,t,r]),c=J.rf(`dev_handoff.variables_table.row-${t}`,"click",d),u=!e&&t===a;return(0,i.jsx)(Q.$y,{className:X()(eB,{"variables_table--divider--TKqZt":e,"variables_table--selected--rNRXH":u}),onMouseDown:c,children:l})}function eJ({title:e}){let t=(0,eI.Ww)(),n=(0,a.d4)(e=>e.multiplayer),r=(0,b.q5)(),l=(0,eN.iZ)(),o=(0,C._6)(),d=(0,a.wA)(),c=(0,a.d4)(e=>"devModeVariablesTableBackFocusId"in e.selectedView?e.selectedView.devModeVariablesTableBackFocusId:void 0),u=(0,W.Xr)(ej.$),p=s.useCallback(()=>{u(null),d(y.sf({...o,view:"fullscreen",editorType:eA.nT.DevHandoff,showDevModeVariablesTable:!1,devModeFocusId:c}))},[d,o,u,c]);return(0,i.jsxs)("div",{className:"variables_table--header--412jw",children:[(0,i.jsxs)("div",{className:ee.s.flex.itemsCenter.$,children:[(0,i.jsx)(V.K,{"aria-label":(0,m.t)("general.close"),htmlAttributes:{"data-tooltip-type":eL.Ib.TEXT,"data-tooltip":(0,m.t)("general.close")},onClick:p,recordingKey:"dev_handoff.variables_table.close",children:(0,i.jsx)(H.X,{})}),(0,i.jsx)("div",{className:"variables_table--title--16SxT","data-testid":"dev_handoff.variables_table.title",id:"dev_mode_variables_table_title",children:e})]}),(0,i.jsxs)("div",{className:ee.s.flex.itemsCenter.gap4.$,children:[t&&(0,i.jsx)(eM.v7,{multiplayer:n,currentUser:t,onUserClick:U.lQ}),r&&(0,i.jsx)(eO.ShareButton,{user:l,editingFile:r,isFileInWorkshop:!1,appendedClassname:"variables_table--shareButton--UM0c4"})]})]})}function eQ(e){return!0===e.isDividerRow&&"string"==typeof e.content}var e$=n(322530),e0=n(929302),e1=n(475477),e2=n(307829),e3=n(700411),e5=n(302727),e4=n(452981),e6=n(739713),e7=n(76618),e8=n(294778),e9=n(285466),te=n(662376),tt=n(758286),tn=n(123200),ti=n(853943),ts=n(888962),ta=n(790009),tr=n(408825),tl=n(357524),to=n(883765),td=n(166887),tc=n(653899),tu=n(859277),tp=n(2713),tm=n(225125),th=n(115989),tf=n(697157),tg=n(466764),tx=n(849757),t_=n(652539),ty=n(892816),tv=n(565797),tb=n(21031),tC=n(554311),tj=n(118752),tk=n(222357),tw=n(772523),tE=n(141524),tT=n(268175),tS=n(985416),tI=n(835307),tN=n(469229),tA=n(81786),tL=n(85598),tM=n(844182),tO=n(569565),tR=n(821655),tP=n(369729),tD=n(417528),tF=n(443192),tz=n(174730),tB=n(148470);function tG(){let e=(0,a.wA)();return(0,tz.f)("dismissed_dev_mode_overview_banner")||(0,F.T)()?null:(0,i.jsx)(v.fu,{name:"Dev Mode Overview Banner",properties:{severity:tB.c.EVENT},children:(0,i.jsxs)(tR.Yy,{variant:"success",onDismiss:()=>{e(tF.b({dismissed_dev_mode_overview_banner:!0}))},children:[(0,i.jsx)(tP.Q,{title:(0,m.t)("dev_handoff.workflows.overview.banner.title"),children:(0,m.tx)("dev_handoff.workflows.overview.banner.subtitle")}),(0,i.jsx)(tD.N,{href:"https://help.figma.com/hc/articles/23918228264855",newTab:!0,children:(0,m.tx)("dev_handoff.workflows.overview.banner.learn_more")})]})})}var tU=n(293422),tV=n(836658),tH=n(350205),tK=n(577357),tW=n(284467),tq=n(142914),tX=n(944350),tY=n(59849),tZ=n(312387),tJ=n(167262),tQ=n(748033);let t$="overview--background--LdDDC",t0="overview--overviewBase--8lImP",t1="overview--withInsetEditorEnabled--ktYXp",t2="overview--focusViewLink--PFEvh",t3="overview--overviewRecentActivityRow--uTKSo",t5="overview--overviewRecentActivity--JwGnv",t4="overview--editInfo--PHbLh",t6="overview--timestamp--EH-pe",t7="overview--avatarIcon--c711v",t8="overview--editedIcon--MhN1N";function t9({showDescription:e,previewUrl:t,onClick:n}){return(0,i.jsxs)(e3._,{className:X()(t5,t2),href:t,onClick:n,children:[(0,i.jsxs)("div",{className:t4,children:[(0,i.jsx)(tW.Qp,{className:"overview--avatarLoading--jMjJk",animationType:tW.JR.NO_SHIMMER}),(0,i.jsx)(tW.Qp,{className:"overview--editInfoRecentActivityLoading--w-QoB overview--editInfoRecentActivity---jsVr",animationType:tW.JR.NO_SHIMMER})]}),e&&(0,i.jsx)(tW.Qp,{className:"overview--editDescriptionLoading--hrI6B",animationType:tW.JR.NO_SHIMMER})]})}function ne({user:e,icon:t,editedString:n}){return(0,i.jsxs)("div",{className:t4,children:[(0,i.jsxs)("div",{className:"overview--avatarContainer--OD44p",children:[(0,i.jsx)(tq.H8,{user:e,size:24}),t]}),(0,i.jsx)("div",{className:"overview--editInfoRecentActivity---jsVr",children:(0,i.jsx)("span",{className:"overview--editInfoUser--P4GkS",children:n})})]})}function nt(e,t,n){if(!e||n)return null;switch(e.status){case o.zIx.BUILD:return(0,i.jsx)(tV.k,{className:X()(t?t8:"overview--readyIcon--A94uc",t7)});case o.zIx.COMPLETED:return(0,i.jsx)(tH.l,{className:X()(t?t8:"overview--completedIcon--9Nbjl",t7)})}return null}function nn({nodeId:e,user:t,previewUrl:n,isFallbackForLegacyStatus:s,onClick:a}){let r=(0,tI.Fk)(t=>t.get(e)?.getStatusInfo(),e),l=(0,tl.ei)(e),o=(0,th.Ak)(l?.lastEditedAt),d=(0,b.q5)(),c=(0,P._I)();if(!t)return(0,i.jsx)(t9,{previewUrl:n,onClick:a});let u=r&&d&&(0,tQ.y)(r,d);return(0,i.jsxs)("div",{className:t3,children:[(0,i.jsx)(e3._,{className:X()(t5,t2),href:n,onClick:a,children:(0,i.jsx)(ne,{user:t,icon:nt(r,!0,s),editedString:(0,m.tx)("dev_handoff.workflows.edit_info.edited",{user:t.handle,dateFromNow:(0,i.jsx)("span",{className:t6,children:o})})})}),u&&c&&(0,i.jsx)(ns,{nodeId:e,isEdited:!0})]})}function ni({nodeId:e,user:t,description:n,previewUrl:s,isFallbackForLegacyStatus:a,onClick:r}){let l=(0,tI.Fk)(t=>t.get(e)?.getStatusInfo(),e),d=l?.lastUpdateUnixTimestamp?1e3*l.lastUpdateUnixTimestamp:null,c=(0,th.Ak)(d),u=(0,b.q5)();if(!d)return(0,i.jsx)(nn,{nodeId:e,user:t,previewUrl:s,isFallbackForLegacyStatus:a,onClick:r});if(!l||!t)return(0,i.jsx)(t9,{showDescription:!!n,previewUrl:s,onClick:r});let p=tJ.TR(l.status,l.prevStatus)?.toLowerCase();if(!p)return(0,i.jsx)(nn,{nodeId:e,user:t,previewUrl:s,isFallbackForLegacyStatus:a,onClick:r});let h=l.status===o.zIx.BUILD&&(l.status===l.prevStatus||!!l.description),f=u&&(0,tQ.y)(l,u),g=h?(0,m.tx)("dev_handoff.workflows.edit_info.updated_design",{user:t.handle,dateFromNow:(0,i.jsx)("span",{className:t6,children:c})}):(0,m.tx)("dev_handoff.workflows.edit_info.marked",{user:t.handle,status:p,dateFromNow:(0,i.jsx)("span",{className:t6,children:c})});return(0,i.jsxs)("div",{className:t3,children:[(0,i.jsxs)(e3._,{className:X()(t5,t2),href:s,onClick:r,children:[(0,i.jsx)(ne,{user:t,icon:nt(l,!1,a),editedString:g}),!!n&&(0,i.jsx)("div",{className:"overview--editDescription--rb1Qn",children:n})]}),h&&f&&(0,i.jsx)(ns,{nodeId:e,isEdited:!1})]})}function ns({nodeId:e,isEdited:t}){let n=(0,a.wA)(),s=b.q5()?.key,r=(0,td.U)(),o=async()=>{let i,a=null;if(s&&(r("Dev Mode Activity Compare Changes",{source:"compare_previous_overview"}),"loaded"===(a=await (0,tK.Ek)(tY.WND,{fileKey:s,nodeId:e})).file.status&&a.file.data)){let s=a.file.data.devModeActivity.filter(e=>e.activityType===tX.o6.STATUS_CHANGE).sort((e,t)=>t.timestamp.getTime()-e.timestamp.getTime());if(i=t||1===s.length?s[0]:s[1],i?.version?.id){(0,tZ.L$)(i.version?.id,n,!0,e);return}}n(E.F.enqueue({message:(0,m.t)("dev_handoff.compare_changes.button.failed"),error:!0})),(0,ei.$D)(l.e.DEV_MODE,Error("Open compare changes button failed"),{extra:{fileKey:s,activityInfoStatus:a?.file.status,activityInfoStatusError:a?.file.status==="error"?a?.file.error:void 0,activitiesLength:a?.file.status==="loaded"&&a.file.data?.devModeActivity.length,prevActivityId:i?.id,prevActivityVersionId:i?.version?.id}})};return(0,i.jsx)(tU.$n,{variant:"secondary",onClick:o,children:(0,m.tx)("inspect_panel.history.compare_changes")})}var na=n(691952),nr=n(851824),nl=n(773999);let no=(0,tS.Wh)(()=>(0,W.eU)(""),{preserveValue:!1});var nd=n(698266);let nc="performance.dev_mode.workflows.overview.time_to_first_thumbnail",nu=new nd.jk(nc,{}),np=(0,tS.rt)(void 0),nm=(0,tS.rt)(!1);var nh=n(130353),nf=n(674356),ng=n(236983),nx=n(759863);let n_=2*(0,Y.jz)(eE.Evg),ny=n_/eE.RtY,nv=n_/8,nb=ny/8;function nC(e){let t=s.useMemo(()=>e.tabs.reduce((e,t)=>(e[t.key]=!0,e),{[nh.oz.ALL]:!1,[nh.oz.BUILD]:!1,[nh.oz.COMPLETED]:!1}),[e.tabs]),[n,a,r]=e$.t.useManagedTabs(t,e.selected,e.onTabSelected);return(0,i.jsx)(e$.t.TabStrip,{manager:r,children:e.tabs.map(t=>{let s=t.key===e.selected;return(0,i.jsxs)(e$.t.Tab,{...n[t.key],children:[t.label,void 0!==t.count&&(0,i.jsx)(na.s,{count:t.count,isInTab:!0,isActive:s})]},t.key)})})}let nj=(0,tS.Wh)(()=>(0,W.eU)(!1),{preserveValue:!1});function nk(){let e=(0,b.q5)(),t=(0,a.wA)(),n=(0,eN.iZ)(),r=(0,a.d4)(e=>e.multiplayer),l=s.useMemo(()=>r.allUsers.find(e=>e.sessionID===r.sessionID)||null,[r.allUsers,r.sessionID]),o=(0,eI.dR)(),d=(0,tp.B4)(),c=s.useCallback(e=>{(0,eM.Lx)(e,l?.sessionID,t,!1,r,o,d)},[l?.sessionID,t,r,o,d]);return(0,i.jsxs)("div",{className:"overview--toolbarRightItems--tjF72",children:[r&&e&&l&&(0,i.jsx)(eM.v7,{multiplayer:r,currentUser:l,onUserClick:c}),e&&(0,i.jsx)(eO.ShareButton,{user:n,editingFile:e,isFileInWorkshop:!1,appendedClassname:"overview--shareButton--5BlrF"})]})}let nw=(0,W.E2)("workflows_summary_tab",nh.oz.ALL,tr.z.nativeEnum(nh.oz)),nE=(0,tS.Wh)(()=>(0,W.eU)({}),{preserveValue:!0}),nT=(0,W.E2)("workflows_overview_sorted_by",nh._6.RECENT,tr.z.nativeEnum(nh._6));function nS(){let e=(0,a.d4)(e=>e.selectedView.overviewBackButtonTargetNodeId),t=(0,a.d4)(e=>e.mirror.appModel.pagesList[0]),n=function(){let e=(0,a.d4)(e=>e.mirror.appModel.pagesList),t=(0,el.J2)(o.Ez5.currentSceneState().numReadyNodesByPage),n=(0,el.J2)(o.Ez5.currentSceneState().numCompletedNodesByPage);return s.useMemo(()=>e.filter(e=>{let i=e.nodeId,s=t.has(i)?t.get(i)>0:o.glU.nodeStatusesOnPage(i).includes(o.zIx.BUILD),a=n.has(i)?n.get(i)>0:o.glU.nodeStatusesOnPage(i).includes(o.zIx.COMPLETED);return s||a}),[e,t,n])}()[0],r=e||n?.nodeId||t?.nodeId,l=(0,_.ZJ)(),d=(0,_.TP)(void 0,r),c=(0,a.d4)(e=>(0,tN.Np)(e,d)),u=(0,tM.n0)(),p=(0,tO.VS)({pagesList:u,isComparingChanges:!1});return r?(0,i.jsx)(tu.lt,{className:"overview--backLink--vAo8c",onClick:function(e){e.preventDefault(),r?p(r).then(()=>{l("overview_back_clicked")}):l("overview_back_clicked")},href:c,"data-testid":"dev_handoff.workflows.overview.back_button",recordingKey:"dev_handoff.workflows.overview.back_button","aria-label":(0,m.t)("dev_handoff.workflows.overview.back_to_page_tooltip"),"data-tooltip":(0,m.t)("dev_handoff.workflows.overview.back_to_page_tooltip"),"data-tooltip-type":eL.Ib.TEXT,children:(0,i.jsx)(e6.C,{})}):null}function nI(){return(0,i.jsx)(Z.u,{label:"DevModeOverview",children:(0,i.jsx)(nN,{})})}function nN(){let{Sprig:e}=(0,tm.A)(),t=(0,P._I)(),n=(0,ea.dP)(),r=(0,tL.HY)(),c=(0,tg.B)();(0,F.T)()&&(0,d.kc)().dt_vscode_ready_for_dev?n=0:r&&(n+=c);let u=(0,td.U)(),h=function(){let[e,t]=(0,W.fp)(np);return s.useCallback(n=>{e||(t({source:n}),nu.start())},[e,t])}(),f=(0,C._6)(),g=(0,a.wA)();(0,tA.O)();let _=(0,el.J2)(o.Ez5.currentSceneState().nodesWithStatusForFile),y=(0,s.useRef)(null),[v,b]=(0,W.fp)(tb.gk),[j,k]=(0,W.fp)(nT),w=s.useCallback(e=>{u("Dev Mode Overview Sort Changed",{sort:e}),k(e)},[k,u]),E=t?j:nh._6.PAGE,[I,A]=(0,W.fp)(nw),{setSearchString:L,searchString:M,searchFilter:O,searchActive:R}=function(){let[e,t]=(0,W.fp)(no),n=(0,td.U)(),i=(0,s.useMemo)(()=>(function(e){let t=e?new nl.Ax(e.toLowerCase()):null;return{filter:e=>{let n=t?t.matchAgainst(e):null;return!n||!!n.find(e=>e.score>0)}}})(e),[e]),a=(0,s.useCallback)(e=>i.filter([e.nodeName,e.pageName,e.description]),[i]),r=(0,nr.A)(()=>{n("Dev Mode Overview Search",{})},1e3);return{setSearchString:(0,s.useCallback)(e=>{t(e),r()},[t,r]),searchString:e,searchFilter:a,searchActive:e.length>0}}(),D=s.useMemo(()=>_.filter(e=>e.status===o.zIx.BUILD&&O(e)),[_,O]),z=s.useMemo(()=>_.filter(e=>e.status===o.zIx.COMPLETED&&O(e)),[_,O]),B=s.useMemo(()=>{switch(I){case nh.oz.ALL:return _.filter(O);case nh.oz.BUILD:return D;case nh.oz.COMPLETED:return z}},[_,I,O,D,z]),G=s.useMemo(()=>[{key:nh.oz.ALL,label:(0,m.t)("dev_handoff.workflows.overview.tab_all")},{key:nh.oz.BUILD,count:D.length,label:(0,m.t)("dev_handoff.workflows.overview.tab_ready")},{key:nh.oz.COMPLETED,count:z.length,label:(0,m.t)("dev_handoff.workflows.overview.tab_completed")}],[D.length,z.length]),V=s.useMemo(()=>{if(0===B.length)return[];switch(E){case nh._6.PAGE:let e={};return B.slice().sort((e,t)=>e.visualOrder-t.visualOrder).forEach(t=>{e[t.pageId]||(e[t.pageId]={key:t.pageId,pageId:t.pageId,pageName:t.pageName,sortedNodesWithStatusForFile:[]}),e[t.pageId].sortedNodesWithStatusForFile.push(t)}),Object.values(e);case nh._6.RECENT:return[{key:"recent",sortedNodesWithStatusForFile:B.slice().sort((e,t)=>t.updatedAt-e.updatedAt)}];case nh._6.ALPHABETICAL:return[{key:"alphabetical",sortedNodesWithStatusForFile:B.slice().sort((e,t)=>e.nodeName.localeCompare(t.nodeName))}]}},[B,E]),[H,K]=(0,W.fp)(nE);s.useEffect(()=>{K(e=>{let t={...e};return V.forEach(({pageId:e})=>{e&&void 0===t[e]&&(t[e]=!0)}),t})},[K,V]);let q=s.useCallback(e=>{K(t=>{let n={...t};return n[e]=!n[e],n})},[K]),{numSections:Y,numFrames:Z,numPages:J}=s.useMemo(()=>({numSections:_.filter(e=>e.isSection).length,numFrames:_.filter(e=>!e.isSection).length,numPages:new Set(_.map(e=>e.pageId)).size}),[_]),Q=(0,x.US)();!function({nodesWithStatusForFile:e,enabled:t}){let[n,i]=(0,W.fp)(nj),a=s.useRef(),r=(0,N.eY)();s.useEffect(()=>{if(!t)return;let s=0,l=0,o=performance.now();if(void 0===a.current&&(a.current=new Set),e.forEach(e=>{if(!a.current.has(e.nodeId)){s++;let t=performance.now();r.get(e.nodeId)?.fullyUpdateSymbolInstances();let n=performance.now()-t;n>l&&(l=n),a.current.add(e.nodeId)}}),!n){let e=performance.now()-o;(0,to.sx)("performance.dev_mode.workflows.overview.materialize_nodes",{nodeCount:s,worstNodeMs:l,elapsedMs:e},{forwardToDatadog:!0}),i(!0)}},[e,a,r,n,i,t])}({enabled:Q,nodesWithStatusForFile:_});let[$,et]=s.useState(!1),en=s.useCallback(()=>{et(!0),b(y.current?.scrollTop)},[b]),[ei]=(0,W.fp)(nh._o);(0,tc.h)(()=>{let n=ei||"init";u("Dev Mode Overview Shown",{type:t?"full":"lite",source:n},{forwardToDatadog:!0}),e("track","enter_ready_for_dev_view"),h(n),tw.wr()});let es=[...new Set(B.map(e=>e.userId).filter(e=>e))],er=(0,tE.zy)(es);(0,nh.c7)(B,I,E),(0,nh.zz)(es,er,B);let eo=s.useCallback(e=>{u("Dev Mode Overview Tab Clicked",{tab:e}),A(e)},[A,u]);s.useEffect(()=>{"fullscreen"===f.view&&f.commentThreadId&&(0,tj._$)(g,f,"overview_open_notification")},[g,f]);let ed=e0.hS({open:!0,onClose:U.lQ});if(!Q||$)return(0,i.jsx)("div",{className:t$,children:(0,i.jsx)("div",{className:X()(t0,"overview--overviewSpinner--zv-dq",t1),style:{left:n},children:(0,i.jsx)(S.k,{size:"lg"})})});let ec="";Y>0&&(ec+=(0,m.t)("dev_handoff.workflows.overview.sections_count",{count:Y})),Z>0&&(Y>0&&(ec+=", "),ec+=(0,m.t)("dev_handoff.workflows.overview.frames_count",{count:Z})),Y+Z>0&&(ec+=" "+(0,m.t)("dev_handoff.workflows.overview.pages_count",{count:J}));let eu=0===V.length,ep={left:n};return(0,F.T)()&&(0,d.kc)().dt_vscode_ready_for_dev&&(ep.margin="0px"),(0,i.jsxs)(e0.bL,{theme:{root:t$,contents:"overview--fullHeight--jSy-x"},manager:ed,children:[(0,i.jsx)(p.tH,{boundaryKey:"DevModeLeftPanel",fallback:p.H4.NONE_I_KNOW_WHAT_IM_DOING,sentryTags:{area:l.e.DEV_MODE},children:(0,i.jsx)(ty.O,{})}),(0,i.jsxs)("div",{className:X()(t0,t1),style:ep,children:[(0,d.kc)().dt_vscode_ready_for_dev&&(0,F.T)()?(0,i.jsx)(tv.f,{isOnReadyForDevPage:!0,children:t&&(0,i.jsx)(nL,{value:M,onChange:L})}):(0,i.jsxs)("div",{className:"overview--overviewHeader--BBr9p",children:[(0,i.jsx)(nS,{}),(0,i.jsxs)("div",{className:"overview--overviewTitle--gEd5D text--fontPos13--xW8hS text--_fontBase--QdLsd",children:[(0,i.jsx)("div",{className:"overview--overviewTitleIcon--NvF-4",children:(0,i.jsx)(e7.O,{})}),(0,i.jsx)(T.hE,{autofocus:!0,children:(0,i.jsx)("div",{className:"overview--overviewTitleWithEllipsis--annie ellipsis--ellipsis--Tjyfa",children:(0,m.tx)("dev_handoff.workflows.overview.title")})})]}),(0,i.jsx)("div",{className:"overview--overviewTitleInfo--3e2oX text--fontPos11--2LvXf text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa","data-tooltip":ec,"data-tooltip-type":eL.Ib.TEXT,children:ec}),(0,i.jsx)(nB,{}),(0,i.jsx)("div",{className:"overview--overviewHeaderSpacer--oRKTg"}),t&&(0,i.jsx)(nL,{value:M,onChange:L}),(0,i.jsx)(nk,{})]}),(0,i.jsx)("div",{className:"overview--bannerWrapper--D8N5z",children:(0,i.jsx)(tG,{})}),(0,i.jsxs)("div",{className:"overview--scrollAndEmptyMessage--3hOyM",children:[eu&&(0,i.jsx)("span",{className:"overview--emptyMessage--lyEC8",children:R?(0,m.tx)("dev_handoff.workflows.overview.empty_message_search"):(0,i.jsx)("div",{className:ee.s.preWrap.$,children:(0,m.tx)("dev_handoff.workflows.overview.no_designs",{status:function(e){switch(e){case nh.oz.BUILD:return(0,m.tx)("dev_handoff.workflows.overview.no_designs_ready");case nh.oz.COMPLETED:return(0,m.tx)("dev_handoff.workflows.overview.no_designs_completed");default:return(0,m.tx)("dev_handoff.workflows.overview.no_designs_ready")}}(I),link:(0,i.jsx)("span",{className:"overview--learnMoreLink--Yrujk",children:(0,i.jsx)(e1.N,{href:"https://help.figma.com/hc/articles/23918228264855",trusted:!0,newTab:!0,children:(0,m.tx)("dev_handoff.workflows.overview.learn_more")})})})})}),(0,i.jsx)(tx.P,{className:"overview--overviewNodesScrollContainer--uc1ey",scrollContainerRef:y,initialScrollTop:v,children:(0,i.jsxs)("div",{className:"overview--overviewNodesScrollContainerContents--fTO-e",children:[t&&(0,i.jsxs)("div",{className:"overview--overviewTabsContainer--sjuS-",children:[(0,i.jsx)(nC,{tabs:G,selected:I,onTabSelected:eo}),(0,i.jsx)(nz,{sortedBy:E,setSortedBy:w})]}),!eu&&(0,i.jsx)("div",{className:"overview--overviewNodesContainer--P3anz",children:(0,i.jsx)("div",{className:"overview--overviewSections--2H4Qw",children:V.map(({key:e,pageId:t,pageName:n,sortedNodesWithStatusForFile:s})=>{let a=!t||H[e];return(0,i.jsx)(nM,{isExpanded:a,pageId:t,pageName:n,overviewNodes:s,users:er,onExpandCollapseClicked:t?()=>q(t):void 0,onPreviewClick:en},e)})})})]})})]})]})]})}function nA({pageName:e,isExpanded:t,onExpandCollapseClicked:n}){return(0,i.jsx)(en.E,{className:"overview--pageHeader--dubsT",onClick:n,"aria-label":t?(0,m.t)("dev_handoff.workflows.overview.collapse_page",{pageName:e}):(0,m.t)("dev_handoff.workflows.overview.expand_page",{pageName:e}),children:(0,i.jsxs)("div",{className:"overview--pageHeaderContent--Bq-Ol text--fontPos13--xW8hS text--_fontBase--QdLsd",children:[(0,i.jsx)(t_.B,{svg:t?ng.A:nx.A,className:"overview--caretIcon--gssmY"}),(0,i.jsx)(e8.A,{className:"overview--pageIcon--w9-M7"}),(0,i.jsx)("span",{children:e})]})})}function nL({value:e,onChange:t}){return(0,i.jsx)(ta.J,{brand:"dev-handoff",children:(0,i.jsxs)("div",{className:"overview--searchBar--NX8cb",children:[(0,i.jsx)(e9.W,{}),(0,i.jsx)(tf.i,{placeholder:(0,m.t)("dev_handoff.workflows.overview.search_placeholder"),value:e,onChange:e=>{t(e.target.value)},className:"overview--searchInput--3X9vp text--fontPos11--2LvXf text--_fontBase--QdLsd",spellCheck:!1}),!!e&&(0,i.jsx)(V.K,{onClick:()=>t(""),"aria-label":(0,m.t)("dev_handoff.workflows.overview.clear_search"),htmlAttributes:{"data-tooltip":(0,m.t)("dev_handoff.workflows.overview.clear_search"),"data-tooltip-type":eL.Ib.TEXT},children:(0,i.jsx)(te.A,{})})]})})}function nM({pageName:e,overviewNodes:t,users:n,isExpanded:s,onExpandCollapseClicked:a,onPreviewClick:r}){return(0,i.jsxs)(i.Fragment,{children:[e&&(0,i.jsx)(nA,{pageName:e,isExpanded:s,onExpandCollapseClicked:a}),s&&(0,i.jsx)("div",{className:"overview--overviewNodesList--ipsOp",children:t.map(s=>(0,i.jsx)(nP,{overviewNode:s,onPreviewClick:r,renderPageName:!e,users:n,nodeCount:t.length},s.nodeId))})]})}function nO({overviewNode:e,onClick:t,renderPageName:n,showLastUpdated:r}){let{nodeId:l,isSection:d,updatedAt:c,pageName:u,nodeName:p,pageId:h}=e,f=(0,_.VW)(l,h),g=(0,a.d4)(e=>(0,tN.Np)(e,f)),x=(0,a.d4)(e=>(0,tN.xS)(e,f)),y=(0,ed.Cj)(x),v=(0,_.TQ)(),b=function(e,t){let n=(0,tI.Fk)(t=>t.get(e)?.getStatusInfo(),e),i=n?.lastUpdateUnixTimestamp?1e3*n.lastUpdateUnixTimestamp:null,s=(0,tl.ei)(e),a=t?s?.lastEditedAt:i,r=(0,th.Ak)(a);return a?r:null}(l,e.hasBeenEditedSinceLastStatusChange),C=s.useMemo(()=>e.hasBeenEditedSinceLastStatusChange?(0,m.tx)("dev_handoff.workflows.edit_info.changed"):e.status===o.zIx.COMPLETED?(0,m.tx)("dev_handoff.status.completed"):e.status===o.zIx.BUILD?e.description?(0,m.tx)("dev_handoff.workflows.edit_info.new version"):(0,m.tx)("dev_handoff.status.ready_for_dev"):(0,m.tx)("dev_handoff.workflows.edit_info.changed"),[e.description,e.hasBeenEditedSinceLastStatusChange,e.status]),{getTriggerProps:j,manager:k}=e2.b();return(0,i.jsxs)("div",{className:"overview--overviewNodeCardHeader--C-KTf",children:[(0,i.jsxs)(e3._,{className:X()("overview--overviewNodeCardHeaderLeft--jYCXL",t2),onClick:t,href:g,recordingKey:J.Pt("dev_handoff.workflows.overview.card",l),children:[(0,i.jsxs)("div",{className:"overview--headerTextWrapper--BdOAz",children:[n&&u&&(0,i.jsxs)("div",{className:"overview--pageNameAndChevron--5v8px",children:[(0,i.jsx)("span",{className:"overview--pageName--TURV8",children:u}),(0,i.jsx)("span",{className:"overview--breadCrumbSeparator--zcd8z",children:"/"})]}),(0,i.jsxs)("div",{className:"overview--nodeNameAndIcon--Tl3e-",children:[(0,i.jsx)("div",{children:d?(0,i.jsx)(tt.e,{}):(0,i.jsx)(tn.q,{})}),(0,i.jsx)("span",{className:"overview--nodeName--20NeF",children:p})]})]}),r&&c>1&&(0,i.jsx)("div",{className:"overview--updatedAtText--z05FL text--fontPos11--2LvXf text--_fontBase--QdLsd",children:(0,m.tx)("dev_handoff.overview_mode.design_status",{fromNow:b,status:C})})]}),(0,i.jsxs)("div",{className:"overview--overviewNodeCardHeaderRight--wRNMN",children:[(0,i.jsxs)(e2.bL,{manager:k,children:[(0,i.jsx)(V.K,{...j(),"aria-label":(0,m.t)("dev_handoff.workflows.more_actions_tooltip"),children:(0,i.jsx)(ti.J,{})}),(0,i.jsxs)(e2.mc,{children:[(0,i.jsx)(e2.q7,{onClick:()=>v("Dev Mode Overview Card Go To Canvas Clicked",l,h),children:(0,m.tx)("dev_handoff.workflows.overview.show_on_page_action")}),(0,i.jsx)(e2.q7,{onClick:()=>y?.(),children:(0,m.tx)("dev_handoff.status.copy_focus_link")})]})]}),(0,i.jsx)(tC.p,{nodeId:l,isMinimal:!0,sourceForLogging:"overview"})]})]})}function nR({overviewNode:e,onClick:t,user:n}){let{description:s,nodeId:r,hasBeenEditedSinceLastStatusChange:l}=e,o=(0,_.VW)(e.nodeId),d=(0,a.d4)(e=>(0,tN.Np)(e,o));return(0,i.jsx)("div",{className:"overview--overviewAvatarRowMediaQueryHeader--nigbr",children:(0,i.jsx)("div",{className:"overview--overviewRecentActivityHeader--sPkSZ",children:(0,i.jsx)("h2",{children:l?(0,i.jsx)(nn,{nodeId:r,user:n,previewUrl:d,isFallbackForLegacyStatus:e.isFallbackForLegacyStatus,onClick:t}):(0,i.jsx)(ni,{nodeId:r,user:n,description:s,previewUrl:d,isFallbackForLegacyStatus:e.isFallbackForLegacyStatus,onClick:t})})})})}function nP({overviewNode:e,onPreviewClick:t,renderPageName:n,users:s,nodeCount:r}){let l=(0,a.wA)(),o=(0,td.U)(),{nodeId:d,pageId:c,pageName:u,updatedAt:p,nodeName:h}=e,f=(0,_.VW)(d),g=(0,a.d4)(e=>(0,tN.Np)(e,f)),[x]=(0,W.fp)(nT),v=x===nh._6.RECENT&&p>1,[,b]=(0,W.fp)(nh.wz),C=s.usersById?.[e.userId],j=v&&(s.loading||C);function k(e){e.preventDefault(),o("Dev Mode Overview Card Clicked",{nodeId:d}),b("overview"),t(),l(y.sf(f))}let w=n&&u?`${u} / ${h}`:h,E=(0,m.t)("dev_handoff.workflows.overview.preview_alt_text",{imageDescription:w});return(0,i.jsxs)("article",{className:"overview--overviewNodeCard--NsmYU",children:[j&&(0,i.jsx)(nR,{overviewNode:e,onClick:k,user:C}),(0,i.jsxs)("div",{className:"overview--previewContainer--5NeGg",children:[(0,i.jsx)(nO,{overviewNode:e,onClick:k,renderPageName:n,showLastUpdated:!j}),(0,i.jsx)(nD,{nodeId:d,pageId:c,updatedAt:p,previewUrl:g,onClick:k,nodeCount:r,altText:E})]})]})}function nD({nodeId:e,pageId:t,updatedAt:n,previewUrl:a,onClick:r,nodeCount:l,altText:d}){let c=(0,tI.Fk)((e,t,n)=>(0,tj.S7)(e,t,n)||"var(--color-bg)",e,t),u=(0,tI.Fk)(t=>t.get(e)?.size),p=1+(5-5*Math.pow(Math.min(1,Math.max(0,Math.max(u?1-(nv-u.x)/nv:1,u?1-(nb-u.y)/nb:1))),.5)),h=u?{width:u.x*p,height:u.y*p}:{width:n_,height:ny},f=Math.min(1,Math.min(n_/h.width,ny/h.height)),g={width:Math.round(h.width*f),height:Math.round(h.height*f)},x=s.useRef(null),_=(0,tT.x)(x,"100%"),y=(0,tk.yh)({nodeId:e,width:g.width,height:g.height,shouldSkip:!_,version:n,reason:"workflows.overview.thumbnail",regenerateAfterImagesLoaded:!0,isDevModeBlendedSection:o.w3z.canBeBlendedSection(e)}),v=function(){let[e,t]=(0,W.fp)(nm),[n]=(0,W.fp)(np),i=(0,td.U)();return s.useCallback(s=>{if(!e&&n){t(!0);let e=nu.stop();i(nc,{nodeCount:s,source:n.source,elapsedMs:e},{forwardToDatadog:!0})}},[e,t,n,i])}();return s.useEffect(()=>{y&&v(l)},[y,v,l]),(0,i.jsxs)(e3._,{ref:x,className:X()("overview--previewThumbnail--zofC5",t2),style:{background:c},onClick:r,href:a,children:[y&&(0,i.jsx)("img",{src:y.src,style:{maxWidth:y.displaySize.x,maxHeight:y.displaySize.y},alt:d,"aria-label":d}),(0,i.jsx)(ta.J,{mode:"dark",children:(0,i.jsx)("div",{className:"overview--previewExpandIcon--nqhxn","data-tooltip":(0,m.t)("dev_handoff.workflows.overview.card_hover_expand_tooltip"),"data-tooltip-type":"text",children:(0,i.jsx)(ts.O,{})})})]})}let nF=new class{format(e){switch(e){case nh._6.PAGE:return(0,m.t)("dev_handoff.workflows.overview.sort_pages");case nh._6.RECENT:return(0,m.t)("dev_handoff.workflows.overview.sort_recent");case nh._6.ALPHABETICAL:return(0,m.t)("dev_handoff.workflows.overview.sort_alphabetical")}}};function nz({sortedBy:e,setSortedBy:t}){return(0,i.jsxs)(e5.Root,{value:e,onChange:t,children:[(0,i.jsx)(e5.Trigger,{label:(0,i.jsx)(e4.h,{children:(0,m.t)("dev_handoff.workflows.overview.sort_by")})}),(0,i.jsx)(e5.Container,{children:(0,i.jsx)(e5.Group,{title:(0,i.jsx)(e5.Title,{children:(0,m.t)("dev_handoff.workflows.overview.sort_by")}),children:Object.values(nh._6).map(e=>(0,i.jsx)(e5.Option,{value:e,children:nF.format(e)},e))})})]})}function nB(){return(0,i.jsx)(ta.J,{brand:"dev-handoff",children:(0,i.jsxs)(e3._,{href:"https://form.asana.com/?k=dyYqSpHdZqetESFQzNb8hQ&d=10497086658021",className:"overview--betaFeedbackBadge--PUv9s text--fontPos11--2LvXf text--_fontBase--QdLsd",newTab:!0,children:[(0,m.tx)("dev_handoff.workflows.overview.feedback"),(0,i.jsx)(t_.B,{className:"overview--badgeIcon--rKOUQ",svg:nf.A})]})})}var nG=n(458175),nU=n(608989),nV=n(819851),nH=n(470747),nK=n(249586),nW=n(764973),nq=n(354114),nX=n(261970),nY=n(413102),nZ=n(704452),nJ=n(537307),nQ=n(521255),n$=n(764425),n0=n(565854),n1=n(490499),n2=n(809483),n3=n(270154),n5=n(132672),n4=n(118409),n6=n(949832),n7=n(523532),n8=n(292688),n9=n(101441),ie=n(232120),it=n(29785),ii=n(988083),is=n(980852),ia=n(674524),ir=n(776111),il=n(755444),io=n(361170),id=n(315361),ic=n(329368),iu=n(337059),ip=n(568590),im=n(692042),ih=n(506192),ig=n(5072),ix=n(205088),i_=n(346886),iy=n(643330),iv=n(708560),ib=n(347105),iC=n(770158);let ij="hit-target-resize";function ik(e){return(0,i.jsx)(Z.u,{label:"DeviceFrameResizeTarget",children:(0,i.jsx)(iw,{...e})})}function iw(e){let t=iu.hY[e.devicePresetIdentifier].inlinePreviewInfo?.hitTargetSvgUrl,[n,a]=s.useState(null);(0,s.useEffect)(()=>{fetch(t).then(e=>e.text()).then(e=>a(e)).catch(()=>console.warn("Failed to fetch hit target SVG. Falling back to rectangular resize boundary."))},[t]);let r=s.useMemo(()=>n?(0,t_.V)(n):null,[n]);return null!==r?(0,i.jsx)(iE,{...e,hitTargetSvg:r}):(0,i.jsx)(ib.K,{...e})}function iE({resizeTo:e,getCurrentContainerBounds:t,lockAspectRatio:n,isResizing:a,setIsResizing:r,onResizeEnd:l,setResizeDirections:o,devicePresetIdentifier:d,isDeviceRotatedCCW:c,hitTargetSvg:u,hidden:p,recordingKey:m}){let h=s.useCallback(()=>{let e=t(),n=(16/((c?e.bottom-e.top:e.right-e.left)/iu.hY[d].imageSize.x)).toFixed(2);document.querySelectorAll(`[id^=${ij}]`).forEach(e=>e.setAttribute("stroke-width",`${n}`))},[d,c,t]);(0,s.useEffect)(()=>{h()},[h]);let f=s.useCallback(()=>{h(),l?.()},[l,h]),{startResizing:g}=(0,ib.Q)({resizeTo:e,getCurrentContainerBounds:t,isResizing:a,setIsResizing:r,setResizeDirections:o,onResizeEnd:f,lockAspectRatio:n,hidden:p,recordingKey:m}),x=s.useRef(null),_=s.useRef(null),y=s.useMemo(()=>(0,iu.qt)(d)===iu.bq.WATCH,[d]),v=s.useCallback(e=>{let t=e.currentTarget.getBoundingClientRect(),n=e.clientX-t.left,i=e.clientY-t.top;return y?iS({x:n,y:i},t):iT({x:n,y:i},t)},[y]),b=J.rf(m,"mousedown",s.useCallback(e=>{e.stopPropagation(),e.preventDefault(),g(v(e),{x:e.clientX,y:e.clientY})},[v,g]),{recordMetadata:e=>{let t=e.currentTarget;return{clientX:e.clientX,clientY:e.clientY,svgElementId:t.id}},playbackMetadata:e=>({currentTarget:document.querySelector(`#${e.svgElementId}`),clientX:e.clientX,clientY:e.clientY})}),C=J.rf(J.Pt(m,"deviceFrameResizeTarget"),"mousemove",s.useCallback(e=>{if(a)return J.aH;e.stopPropagation(),e.preventDefault();let t=v(e),n=e.currentTarget;_.current&&n.classList.remove(_.current);let i=(0,iv.as)(t);i&&n.classList.add(i),_.current=i},[v,a]),{recordMetadata:e=>{let t=e.currentTarget;return{clientX:e.clientX,clientY:e.clientY,svgElementId:t.id}},playbackMetadata:e=>({currentTarget:document.querySelector(`#${e.svgElementId}`),clientX:e.clientX,clientY:e.clientY})}),j=s.useCallback(e=>{e.onmousemove=C,e.onmousedown=b},[b,C]);return((0,s.useEffect)(()=>{document.querySelectorAll(`[id^=${ij}]`).forEach(e=>j(e))},[d,j]),p)?null:c?(()=>{let e=iu.hY[d].imageSize,t=e.x/e.y;return(0,i.jsx)("div",{children:(0,i.jsx)(t_.B,{svg:u,svgClassName:X()(iC.Q0,iC._d,iC.iZ),svgWidth:`${100*t}%`,ref:x,useOriginalSrcFills_DEPRECATED:!0})})})():(0,i.jsx)("div",{children:(0,i.jsx)(t_.B,{svg:u,svgClassName:iC.iZ,ref:x,useOriginalSrcFills_DEPRECATED:!0})})}let iT=(e,t)=>{let{x:n,y:i}=e,s=.1*Math.min(t.width,t.height),a=[];return i<s?a.push(iv.OP.TOP):i>t.height-s&&a.push(iv.OP.BOTTOM),n<s?a.push(iv.OP.LEFT):n>t.width-s&&a.push(iv.OP.RIGHT),a},iS=(e,t)=>{let{x:n,y:i}=e,s=.1*t.width;if(i<s)return[iv.OP.TOP];if(i>t.height-s)return[iv.OP.BOTTOM];if(n<s)return[iv.OP.LEFT];if(n>t.width-s)return[iv.OP.RIGHT];let a=[];return i<t.height/2?a.push(iv.OP.TOP):a.push(iv.OP.BOTTOM),n<t.width/2?a.push(iv.OP.LEFT):a.push(iv.OP.RIGHT),a};var iI=n(776975),iN=n(703375),iA=n(946408),iL=n(842771),iM=n(382827),iO=n(873016),iR=n(125616),iP=n(152783),iD=n(987836);let iF={x:600,y:600},iz="inlinePreviewModal",iB=()=>{let e=(0,d.kc)().make_iframe_in_figma_design_inline_preview,t=(0,id.uQ)(),n=(0,iL.vD)(t),i=(0,iI.rh)(n),a="CODE_INSTANCE"===(0,ed.rb)()&&e,[r,l]=s.useState(null);s.useEffect(()=>{a&&l(i)},[i,a]);let[o,c]=s.useState(!1),[u,p]=s.useState(!1);return s.useEffect(()=>{a&&!o&&c(!0),a||u||p(!0)},[a,o,u]),{codeSelectionToRender:a?i:r,passesMakeInlinePreviewFF:e,shouldShowMakeIframe:a,shouldMountMakeCodeInstanceIframeComponent:o,shouldMountDesignLayersNodeIframeComponent:u}},iG=()=>{let e=(0,im.MG)({subscribeToUpdates_expensive:!0}),t=(0,im.TZ)({subscribeToUpdates_expensive:!0});return(0,s.useMemo)(()=>new io.Mi(e+n4.wR,t+n4.wR),[e,t])},iU=s.memo(function({pageId:e,viewerControl:t}){let[{previewKeyForErrorBoundary:n},s]=(0,W.fp)(t.stateAtom);return(0,i.jsx)(p.tH,{boundaryKey:"InlinePreviewModal",fallback:p.H4.NONE_I_KNOW_WHAT_IM_DOING,onError:()=>{if((0,to.sx)("inline_preview_crashed",{},{forwardToDatadog:!0}),s({type:"HANDLE_PREVIEW_CRASHED"}),(0,ir.Lg)()||(0,ir.nl)()||(0,il.b5)())throw Error("Inline preview crashed")},children:(0,i.jsx)(iV,{pageId:e,viewerControl:t})},n)}),iV=s.memo(function({pageId:e,viewerControl:t}){let n=s.useRef(null),r=(0,b.tS)(),l=(0,s.useRef)(!1),d=s.useRef(null),[{currentPresentedNode:c,navigateBackwardEnabled:p,navigateForwardEnabled:m,modalStatus:h,sizeInfo:f,showDeviceFrameEnabled:g,scalingInfo:x},_]=(0,W.fp)(t.stateAtom),y=(0,a.wA)(),v=(0,N.eY)(),C=(0,s.useMemo)(()=>h===iP.bi.OPEN,[h]),j=f?.initialViewerSize??iF,k=(0,u.ZC)(j),w=iG(),[E,T]=s.useState(w),[S,I]=s.useState(j.x),[A,L]=s.useState(j.y+iv.uF),M=is.getActiveTSSceneGraph().getCurrentPage()?.prototypeDevice||null,O=M?.presetIdentifier,R=!!O&&(0,iu.L_)(O),P=C&&R&&g,{showing:D}=(0,ih.BK)(t.overflowDropdownType),F=(0,ip.Z)(),z=(0,el.ut)(o.Ez5?.singleSlideView().isInFocusedNodeView,!1),[B,G]=s.useState(!1),U=s.useCallback(()=>{G(!0),nq.Y5.triggerAction("inline-preview-iframe-focus-state-changed",{isFocused:!0})},[G]),V=(0,iM.sO)(),H=B||D?iD.cD:iD.Xt,K=s.useCallback(e=>{y((0,ix.Zh)({name:"prototype.close_inline_viewer",params:{source:e}})),_({type:"CLOSE_INLINE_PREVIEW"})},[y,_]),q=s.useCallback(()=>((0,et.vA)(!!A),(0,et.vA)(!!S),{x:S,y:A-iv.uF}),[A,S]),Z=s.useCallback(e=>{I(e.x),L(e.y+iv.uF)},[I,L]),J=s.useCallback(()=>{let e=q();if(!P)return e;(0,et.B1)(O,"devicePresetIdentifier must be set");let t=M.rotation,{framePresetSize:n,idealDeviceSize:i}=(0,iO.is)(O,t);return(0,iO.BX)(e,n,i)},[O,q,P,M?.rotation]);s.useEffect(()=>{l.current||T(w)},[w]),s.useEffect(()=>{_({type:"SET_CURRENT_VIEWER_SIZE_CALLBACK",payload:J})},[_,J]);let Q=s.useMemo(()=>f?.breakpoint?.type!==n4.l5.DEVICE,[f]),$=s.useCallback(e=>{if(!Q)return;let t=J();(0,et.vA)(!!c,"currentPresentedNode must be set");let n=v.get(c);(0,et.vA)(!!n,"expected selectedNode to exist");let i=(0,n4.HS)(v,n),s=(0,n4.hX)(t,n,i,v);(0,et.vA)(s.breakpoint.type!==n4.l5.DEVICE,"fit to aspect ratio not allowed for device"),Z(s.initialViewerSize),y((0,ix.Zh)({name:"prototype.resize_to_fit_aspect_ratio",params:{source:e}}))},[Q,J,c,v,Z,y]),ee=()=>{if(!c)return!1;let e=!1;if(P){let{idealDeviceSize:t}=(0,iO.is)(O,M.rotation);e=t.x>=n4.Fe&&t.y>=n4.Sq}else{let t=v.get(c);if(!t)return!1;let n=(0,n4.HS)(v,t),i=(0,n4.nw)(n,t);e=i.x>=n4.Fe&&i.y>=n4.Sq}return e},en=s.useCallback(e=>{_({type:"SET_PREVIEW_IS_RESPONSIVE",payload:e})},[_]),ei=s.useCallback(()=>{_({type:"RESIZE_MODAL",payload:{sceneGraph:v}})},[_,v]),es=s.useCallback(e=>{if(e){let t=(0,im.QZ)({nodeId:e,alwaysPan:!0,maxScale:.6});V?h===iP.bi.OPEN&&(F(t),z&&o.Ez5?.singleSlideView().focusNodeInFocusedNodeView(e,!0)):F(t)}},[F,V,z,h]);s.useEffect(()=>{_({type:"SET_SCROLL_CALLBACK",payload:es})},[_,es]);let ea=s.useCallback(e=>{Z({x:e.x,y:e.y+(0,Y.jz)(eE.m8f)})},[Z]),er=s.useMemo(()=>{if(P&&iu.hY[O]?.inlinePreviewInfo?.hitTargetSvgUrl)return function(e){let t=M.rotation===o.xOL.CCW_90;return(0,i.jsx)(ik,{...e,mirrorResizeHorizontally:!1,devicePresetIdentifier:O,isDeviceRotatedCCW:t})}},[P,O,M?.rotation]),eo=s.useCallback(e=>{(0,et.vA)(f?.breakpoint.type===n4.l5.DEVICE,"device must be set to toggle device frame"),(0,et.vA)(!!M,"prototypeDevice must be set to toggle device frame");let t=J();if(e){let e=M.presetIdentifier,{idealDeviceSize:n,framePresetSize:i}=(0,iO.is)(e,M.rotation);ea((0,iO.Ho)(t,i,n))}else Z(t)},[f?.breakpoint.type,M,J,Z,ea]);(0,et.vA)(!C||null!==f,"sizeInfo should always be set when open"),s.useLayoutEffect(()=>{if(k!==j){if(P){let{idealDeviceSize:e,framePresetSize:t}=(0,iO.is)(O,M.rotation);ea((0,iO.Ho)(j,t,e))}else Z(j)}},[j,k,O,P,M,ea,Z]),s.useEffect(()=>{O&&(0,iu.L_)(O)&&(0,iu.Gn)(O)},[O]);let ed=s.useCallback(()=>{let e=q(),{width:t,height:n}=nq.Y5.getViewportInfo(),i=e.x/t,s=e.y/n;y((0,ix.Zh)({name:"prototype.inline_preview_manually_resized",params:{isDeviceFrameShown:P,horizontalCoverage:i,verticalCoverage:s}}))},[y,q,P]),ec=(0,s.useMemo)(()=>{let e={height:"100%"};return P?e:{...e,borderBottomLeftRadius:"var(--radius-small)",borderBottomRightRadius:"var(--radius-small)"}},[P]),{codeSelectionToRender:eu,passesMakeInlinePreviewFF:ep,shouldShowMakeIframe:em,shouldMountMakeCodeInstanceIframeComponent:eh,shouldMountDesignLayersNodeIframeComponent:ef}=iB(),eg=t.ViewerComponent;if(h===iP.bi.NOT_LOADED)return null;let ex=X()(V?iD.CN:iD.aq,P?null:H),e_=X()(P?[H,iC.k9]:null,{[iD.FO]:V}),{x:ey,y:ev}=(0,n4.ut)((0,is.getActiveTSSceneGraph)(),!0),eb=!C||!f?.initialViewerSize;return(0,i.jsxs)(iy.od,{ResizeTargetComponent:er,allowPartialHeaderOnScreen:!0,allowResizeHeight:B&&!V,allowResizeWidth:B&&!V,alwaysEnsureHeaderModalOnScreen:!0,containerClassName:ex,containerFillsPage:V,containerRef:d,customButton:(0,i.jsx)(iH,{allowActualSizeReset:ee(),allowSizeReset:Q,closeInlinePreview:K,iframeRef:n,isDeviceSupportedForPreview:R,isPreviewFittedToAspectRatio:()=>{if(!c||!Q)return!1;let e=v.get(c);if(!e)return!1;let t=J(),n=(0,n4.HS)(v,e),i=(0,n4.hX)(t,e,n,v),s=t.x/t.y,a=i.initialViewerSize.x/i.initialViewerSize.y;return(0,ig.o)(s,a)},isPreviewResponsive:"responsive"===x.contentScalingMode,isPreviewShownAtActualSize:()=>{if(!c||!n.current)return!1;let e=v.get(c);if(!e||!f?.breakpoint)return!1;let t=P?(0,iO.is)(O,M.rotation).framePresetSize:(0,n4.nw)(f.breakpoint,e),i=J();return(0,ig.o)(t.x,i.x,1e-4)&&(0,ig.o)(t.y,i.y,1e-4)},isPrototypeDeviceSet:!!M&&M.type!==o.XQq.NONE,onToggleShowDeviceFrame:eo,openFileKey:r||void 0,resizeToActualSize:()=>{if(!ee())return;(0,et.vA)(!!c),(0,et.vA)(!!f);let e=v.get(c);(0,et.vA)(!!e),y((0,ix.Zh)({name:"prototype.resize_to_actual_size"}));let t=P?(0,iO.is)(O,M.rotation).idealDeviceSize:(0,n4.nw)(f.breakpoint,e),n=(e,t)=>{Z(e),T(new io.Mi(t.x,t.y))},i=q();(0,n4.UB)(t,y,()=>n(i,E)),Z(t)},resizeToFitAspectRatio:()=>$("overflow_menu"),scrollToNode:es,setPreviewIsResponsive:en,showFullscreenButton:V,showOverflow:!V,viewerControl:t,width:S}),disableDragging:V,dragHeaderOnly:!0,frameStyle:ec,headerClassName:e_,height:A,hidden:eb,ignoreCloseShortcut:!C,lockAspectRatio:f?.breakpoint?.type===n4.l5.DEVICE,makeContentPixelPerfect:!0,minHeight:ev,minWidth:ey,onClose:()=>{K("modal")},onDragStart:()=>l.current=!0,onEdgeDoubleClick:()=>$("double_click"),onFocus:e=>{(!d.current||e.target===d.current||e.target===n.current)&&(t.onFocus()||U())},onResize:ei,onResizeEnd:ed,position:E,preventKeyboardFocus:!0,recordingKey:iz,setHeight:L,setPosition:T,setWidth:I,tabIndex:0,title:(0,i.jsx)(iK,{navigateBackwardEnabled:p,navigateForwardEnabled:m,width:S,onBack:t.onBack,onForward:t.onForward,onRestart:t.onRestart}),transparentContentBackground:P,width:S,children:[ep&&eh&&(0,i.jsx)(iR.H,{initialViewerSize:j,isDeviceFrameShown:P,shouldHide:!em,children:(0,i.jsx)(iA.m,{chatNodeId:null,codeSelectionToRender:eu,useProgressBarWhenLoading:!0,isVisible:!0,sandbox:null,surface:iN.e.DesignInFloatingModalPreview})},"make-code-instance-iframe"),ef&&(0,i.jsx)(iR.H,{initialViewerSize:j,isDeviceFrameShown:P,shouldHide:em,children:(0,i.jsx)(eg,{closeInlinePreview:K,iframeFocused:B,isOpen:C,onIframeFocus:U,openFileKey:r||void 0,pageId:e,ref:n,setIframeFocused:G},e)},"design-layers-node-iframe")]})});function iH({allowSizeReset:e,allowActualSizeReset:t,isPrototypeDeviceSet:n,isDeviceSupportedForPreview:r,openFileKey:l,resizeToFitAspectRatio:d,scrollToNode:c,showOverflow:u,showFullscreenButton:p,iframeRef:h,resizeToActualSize:f,isPreviewShownAtActualSize:g,setPreviewIsResponsive:x,isPreviewResponsive:_,closeInlinePreview:y,onToggleShowDeviceFrame:v,width:b,isPreviewFittedToAspectRatio:C,viewerControl:j}){let k=(0,a.wA)(),w=s.useRef(null),[{currentPresentedNode:E,targetFrameFollowingEnabled:T,showDeviceFrameEnabled:S},I]=(0,W.fp)(j.stateAtom),{showing:N,toggle:A}=(0,ih.BK)(j.overflowDropdownType),L=s.useCallback(()=>{if(!l)throw Error("Expected openFileKey to exist");if(!E)throw Error("openPrototypeInNewTab called without currentPresentedNode");k(ic.F({fileKey:l,nodeId:E,startingPointNodeId:o.X3B?.getActivePrototypeStartingPointNodeIdOnCurrentPage()??"",source:"inline_viewer",scalingInfo:_?n?{contentScalingMode:"responsive",viewportScalingMode:"scale-down"}:{contentScalingMode:"responsive",viewportScalingMode:"contain"}:void 0})),y("open_in_new_tab")},[l,E,k,_,n,y]),M=s.useCallback(()=>{let e=!T;k((0,ix.Zh)({name:"prototype.toggle_follow_previewed_frame",params:{enabled:e}})),I({type:"TOGGLE_TARGET_FRAME_FOLLOWING"}),c(E)},[k,I,T,c,E]),O=s.useCallback(()=>{let e=!S;k((0,ix.Zh)({name:"prototype.toggle_show_device_frame",params:{enabled:e,location:"preview"}})),I({type:"TOGGLE_SHOW_DEVICE_FRAME"}),v(e)},[k,S,v,I]),R=s.useCallback(()=>{let s={displayText:(0,m.t)("inline_preview.overflow_menu.responsive"),name:"responsive",recordingKey:"responsiveButton",callback:()=>{x(!0)},isChecked:_,icon:(0,i.jsx)(n6.g,{}),unsetStrokeOnActiveOption:!0},a={displayText:r?(0,m.t)("inline_preview.overflow_menu.fixed"):(0,m.t)("inline_preview.overflow_menu.fit_width"),name:r?"fixed":"fit-width",isChecked:!_,recordingKey:"fixedButton",icon:r?(0,i.jsx)(n7.h,{}):(0,i.jsx)(n8.K,{}),callback:()=>{x(!1)},unsetStrokeOnActiveOption:!0},l={displayText:(0,m.t)("inline_preview.overflow_menu.follow_prototype"),name:"follow-active-frame",recordingKey:"followActiveFrame",callback:M,isChecked:T},o={displayText:r?(0,m.t)("inline_preview.overflow_menu.resize_device_100_percent"):(0,m.t)("inline_preview.overflow_menu.resize_window_100_percent"),name:"actual-size",recordingKey:"actualSizeButton",callback:f,disabled:!t,isChecked:g(),"data-onboarding-key":"resize-to-actual-size"},c={displayText:(0,m.t)("inline_preview.overflow_menu.reset_aspect_ratio"),name:"reset-size",recordingKey:"resetSizeButton",callback:d,isChecked:C(),disabled:!e,hidden:n},u={displayText:(0,m.t)("inline_preview.overflow_menu.show_device_frame"),name:"show-device-frame",recordingKey:"showDeviceFrame",callback:O,isChecked:S&&r,disabled:!r,hidden:!n};return[r?s:a,r?a:s,{separator:!0,displayText:""},l,o,c,u,{displayText:(0,m.t)("inline_preview.new_tab"),recordingKey:"openInNewTabButton",name:"open-in-new-tab",callback:L,hidden:b>n4.kl}]},[_,r,M,T,f,t,g,d,C,e,n,O,S,L,b,x]),P=s.useCallback(()=>{h.current&&h.current.requestFullscreen()},[h]);return(0,i.jsxs)(i.Fragment,{children:[u&&(0,i.jsx)("div",{ref:w,children:(0,i.jsx)(V.K,{"aria-label":(0,m.t)("inline_preview.overflow_menu"),htmlAttributes:{"data-tooltip-type":eL.Ib.TEXT,"data-tooltip":(0,m.t)("inline_preview.overflow_menu")},actionOnPointerDown:!0,onClick:e=>{e.stopPropagation(),A({})},recordingKey:(0,ia.Pt)(iz,"overflowMenuButton"),children:(0,i.jsx)(n9.P,{})})}),b>n4.kl&&(0,i.jsx)(V.K,{htmlAttributes:{"data-tooltip-type":eL.Ib.TEXT,"data-tooltip":(0,m.t)("inline_preview.new_tab"),"data-testid":"preview-open-in-presentation-view"},"aria-label":(0,m.t)("inline_preview.new_tab"),onClick:L,recordingKey:(0,ia.Pt)(iz,"openInNewTabButton"),children:(0,i.jsx)(ie.V,{})}),p&&(0,i.jsx)(V.K,{onClick:P,htmlAttributes:{"data-tooltip-type":eL.Ib.TEXT,"data-tooltip":(0,m.t)("inline_preview.open_fullscreen")},"aria-label":(0,m.t)("inline_preview.open_fullscreen"),children:(0,i.jsx)(ts.O,{})}),N&&w.current&&(0,i.jsx)(i_.j,{dispatch:k,items:R(),lean:"center",onDismissMenu:j.onDismissOverflow,onDropdownHidden:j.onDismissOverflow,onFocus:e=>{e.stopPropagation()},onSelectItem:e=>{e.callback&&e.callback()},parentRect:w.current.getBoundingClientRect(),recordingKey:(0,ia.Pt)(iz,"overflowMenu"),showPoint:!0})]})}function iK({navigateForwardEnabled:e,navigateBackwardEnabled:t,onRestart:n,width:s,onBack:r,onForward:l}){let o=(0,a.wA)();return(0,i.jsxs)("div",{className:iD.KW,children:[s<=n4.Ah?null:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(V.K,{htmlAttributes:{"data-testid":"preview-navigate-backward"},"aria-label":(0,m.t)("viewer.footer.previous_frame"),onClick:r,disabled:!t,recordingKey:(0,ia.Pt)(iz,"navigateBackwardButton"),children:(0,i.jsx)(e6.C,{})}),(0,i.jsx)(V.K,{"aria-label":(0,m.t)("viewer.footer.next_frame"),onClick:l,disabled:!e,recordingKey:(0,ia.Pt)(iz,"navigateForwardButton"),htmlAttributes:{"data-testid":"preview-navigate-forward"},children:(0,i.jsx)(it.e,{})})]}),s<=n4.kl?null:(0,i.jsx)(V.K,{"aria-label":(0,m.t)("inline_preview.restart"),htmlAttributes:{"data-tooltip-type":eL.Ib.TEXT,"data-tooltip":(0,m.t)("inline_preview.restart"),"data-testid":"preview-restart-prototype"},onClick:()=>{o((0,ix.Zh)({name:"prototype.replay_clicked",params:{source:"inline viewer"}})),n()},recordingKey:(0,ia.Pt)(iz,"restartButton"),children:(0,i.jsx)(ii.H,{})})]})}var iW=n(132833),iq=n(673267);function iX(){let e=(0,a.d4)(e=>e.selectedView),t=(0,b.tS)(),n=(0,a.d4)(e=>e.progressBarState.mode),i=(0,a.d4)(e=>(0,nK.pi)({editorType:nW.d1(e)?.editor_type})),l=n!==o.Oin.HIDE_UI&&n!==o.Oin.ON_AND_LOCKED,p=(0,b.q5)(),h=(0,iM.jY)(),f=(0,nQ.BI)(),g=(0,el.ut)(o.Ez5?.interopToolMode(),o.nQ7.SELF);(0,s.useEffect)(()=>(document.body.setAttribute("data-editor-theme",(0,n2.ju)(e,g)),()=>{document.body.removeAttribute("data-editor-theme")}),[e,g]),(0,nH.Ou)(),(0,nH.fq)(),(0,nG._)(),(0,nU.c)(),(0,iq.LP)(),(0,s.useEffect)(()=>{l&&t&&h&&nq.Y5.onReady().then(()=>{d.kc()?.fullscreen_send_client_rendered_message?o.h3O?.sendClientRendered(nZ.xK.getClientRenderedMetadata()):o.h3O?.sendSignal("client-rendered",""),window.requestAnimationFrame(()=>{c.eD?.addTabAnalyticsMetadata({reactFullscreenViewRenderTime:window.performance.now()}),nZ.xK.reactFullscreenViewIsRendered(),nZ.xK.report(t,i),d.kc()?.fullscreen_use_threaded_rendering||function(){let e=(0,nY.dX)("fullscreen");if(!e||o.PcT?.usingWebGPU())return;let t=(0,nX.ap)()?e.getContext("webgl2"):e.getContext("webgl");if(!t||!window.expectedWebGLContextAttributes)return;let n=t.getContextAttributes();if(!n)return;let i=o.CeL?.getGpuDeviceInfo()??{vendor:"",renderer:"",version:""},s={};for(let e of Object.keys(n))s[`actual_${e}`]=n[e];let a={},r=!0;for(let e of Object.keys(window.expectedWebGLContextAttributes))n[e]!==window.expectedWebGLContextAttributes[e]&&(r=!1),a[`expected_${e}`]=window.expectedWebGLContextAttributes[e];let l={...s,...a,...i,are_context_attributes_correct:r};(0,to.sx)("fullscreen_load_gpu_parameters",l)}()}),setTimeout(()=>{c.eD?.addTabAnalyticsMetadata({reactFullscreenViewRenderTimeSetTimeout:window.performance.now()}),nZ.xK.reactFullscreenViewIsRenderedSetTimeout()},0)})},[l,t,i,h]);let x=(0,a.d4)(e=>e.isFullscreenDocumentLoaded);(0,s.useEffect)(()=>{f?.handleCompleteInitialLoad&&x&&f.handleCompleteInitialLoad()},[f,x]);let[_,y]=(0,s.useState)(!1),v=(0,a.d4)(e=>e.mirror.appModel.isReadOnly);(0,s.useEffect)(()=>{f?.updateReadOnly&&x&&!_&&(y(!0),f.updateReadOnly(v))},[f,x,_,y,v]);let C=(0,u.ZC)(p),j=(0,a.d4)(e=>e.mirror.appModel.pagesList),k=(0,s.useMemo)(()=>j.map(e=>({id:e.nodeId,name:e.name,divider:e.isDivider})),[j]),w=(0,u.ZC)(k),E=(0,a.d4)(e=>e.mirror.appModel.currentPage),T=(0,u.ZC)(E);(0,s.useEffect)(()=>{f?.updatePages&&p&&(!C||p.key!==C.key||p.name!==C.name||p.editorType!==C.editorType||p.isTryFile!==C.isTryFile||!(0,r.c2)(k,w)||E!==T)&&f.updatePages({fileKey:p.key,fileName:p.name,editorType:p.editorType,isTryFile:p.isTryFile,pages:k.length>0?k:[{id:E,name:(0,m.t)("fullscreen.pages_panel.pages_placeholder"),divider:!1}],currentPageId:E})},[f,p,C,k,w,E,T]);let S=(0,n$.WC)();(0,s.useEffect)(()=>{f?.updateWebOverlaysShown&&f.updateWebOverlaysShown(S)},[f,S]);let I=(0,n1.o3)(n1.nt.customKeyboardShortcuts);(0,s.useEffect)(()=>{(0,d.kc)().ce_custom_keyboard_shortcuts&&o.glU?.reloadKeyboardShortcuts()},[I]);let N=(0,a.d4)(e=>e.multiplayer.allUsers),A=(0,a.d4)(e=>e.multiplayer.observingSessionID),L=(0,a.d4)(e=>e.multiplayer.presenterSessionID),M=(0,a.d4)(e=>e.multiplayer.deviceNameFilter),O=(0,a.d4)(e=>e.multiplayer.sessionID),R=(0,s.useMemo)(()=>{let{users:e}=(0,n0.Yp)(N,null,!1,1048576,{sessionID:O,observingSessionID:A,presenterSessionID:L,deviceNameFilter:M});return{sessionID:O,observingSessionID:-1!==A?A:null,presenterSessionID:-1!==L&&L||null,users:e}},[N,M,A,L,O]),B=(0,u.ZC)(R);return(0,s.useEffect)(()=>{f?.updateMultiplayerUserInfo&&!(0,r.c2)(B,R)&&f.updateMultiplayerUserInfo(R)},[f,R,B]),(0,n3.iA)(),!function(e,t){let n=(0,P.U4)(),i=(0,P._I)(),a=(0,P.xo)(),r=(0,D.D)(),l=(0,z.U)("permission",!0),d=e&&!i&&!n&&!(0,F.T)();(0,s.useEffect)(()=>{t||(o.w3z.setCanAccessDevMode(i),o.w3z.setCanEnterDevMode(n),o.w3z.setShowWorkflowsControls(r),o.w3z.setIsUsingDevModeDemoFile(a))},[i,n,r,t,a]),(0,s.useEffect)(()=>{d&&l("design")},[l,d])}((0,nV.m0)(),(0,nV.ow)()),(0,n5.J2)(),null}function iY({children:e}){let t=(0,a.d4)(n4.xY),n=(0,a.d4)(e=>e.mirror.appModel.currentPage),s=(0,x.l7)(),r=(0,B.e)(),o=(0,a.d4)(e=>e.isFullscreenDocumentLoaded);return(0,i.jsxs)(i.Fragment,{children:[e??null,(0,i.jsx)(iX,{}),t&&(0,i.jsx)(iU,{viewerControl:iW.e,pageId:n}),s&&(0,i.jsx)(p.tH,{boundaryKey:"DevModeOverview",fallback:p.H4.DEFAULT_FULL_PAGE,sentryTags:{area:l.e.DEV_MODE},hasCustomWASMBuild:nJ.y4,children:(0,i.jsx)(nI,{})}),(0,i.jsx)(p.tH,{boundaryKey:"ComponentBrowser",fallback:p.H4.DEFAULT_FULL_PAGE,sentryTags:{area:l.e.CODE_CONNECT},hasCustomWASMBuild:nJ.y4,children:(0,i.jsx)(R,{})}),r&&o&&(0,i.jsx)(p.tH,{boundaryKey:"DevModeVariablesTable",fallback:p.H4.DEFAULT_FULL_PAGE,sentryTags:{area:l.e.DEV_MODE},hasCustomWASMBuild:nJ.y4,children:(0,i.jsx)(eX,{})})]})}},200503:(e,t,n)=>{n.d(t,{n:()=>s});var i=n(266808);let s=(0,n(795033).um)(!1,(e,t)=>{switch(t.type){case"ACTIVATE_AND_MAXIMIZE":return i.glU?.setActiveEmbed(t.payload.embedNodeID),!0;case"MINIMIZE":return!1;default:return e}})},513833:(e,t,n)=>{n.d(t,{G:()=>M,b:()=>L});var i=n(104076),s=n(716976),a=n(237420),r=n(929302),l=n(266808),o=n(264993),d=n(812714),c=n(795033),u=n(511570),p=n.n(u),m=n(419278),h=n(265149),f=n(192075),g=n(683875),x=n(223837),_=n(692042),y=n(331497),v=n(349311),b=n(959834),C=n(200503),j=n(520447),k=n(769561),w=n(426984),E=n(965815),T=n(480057);function S(){let e=(0,c.Xr)(C.n),t=s.useCallback(()=>{e({type:"MINIMIZE"})},[e]);return(0,d.kc)().figjam_a11y_inline_toolbar?(0,i.jsx)(w.V,{variant:"button",tooltip:(0,f.t)("whiteboard.embeds.inline_menu.minimize"),ariaLabel:(0,f.t)("whiteboard.embeds.inline_menu.minimize"),onClick:t,recordingKey:"embedMinimizeControl",children:(0,i.jsx)(k.p,{})}):(0,i.jsx)(E.K0,{svg:T.A,active:"NONE",tooltip:(0,f.t)("whiteboard.embeds.inline_menu.minimize"),onClick:t,recordingKey:"embedMinimizeControl"})}var I=n(889958);function N(e){let t=e.mirror.sceneGraph,n=e.mirror.sceneGraphSelection;if(1!==Object.keys(n).length)return null;let i=t.get(Object.keys(n)[0]);return i&&"WIDGET"===i.type?i:null}function A(e){return e.mirror.sceneGraph.get(e.mirror.appModel.hoveredNode)}let L=s.memo(function(){let e=(0,a.d4)(A),t=e?.guid,[n,r]=s.useState(null),d=s.useMemo(()=>t&&t!==o.AD?l.glU.getEmbedTypeOfTooltipIcon(t):null,[t]);s.useEffect(()=>{if(!d||!t){r(null);return}let e=(0,x.EE)("embed-tooltip",[t],e=>{r(e?.position||null)});return r(e.currentNodePosition&&e.currentNodePosition[t]?.position||null),()=>{(0,x.lB)("embed-tooltip")}},[t,d]);let c=!!d&&!!n,u=(0,_._X)({subscribeToUpdates_expensive:c}),p=s.useMemo(()=>{if(!n)return{};let e=(0,_.Yb)(u,n),t=e.x+u.x,i=e.y+u.y;return{height:n.height,width:n.width,transformOrigin:"top left",position:"fixed",transform:`translate(${t}px, ${i}px) rotate(${n.angle}deg) scale(${u.zoomScale})`}},[u,n]);return c?(0,i.jsx)("div",{"data-tooltip-type":v.Ib.TEXT,"data-tooltip":"video"===d||"autoplayable_video"===d?(0,f.t)("whiteboard.embeds.tooltip_help_text.video"):"audio"===d||"autoplayable_audio"===d?(0,f.t)("whiteboard.embeds.tooltip_help_text.audio"):"file"===d||"figma"===d?(0,f.t)("whiteboard.embeds.tooltip_help_text.file"):(0,f.t)("whiteboard.embeds.tooltip_help_text.generic"),"data-tooltip-show-above":!0,"data-tooltip-max-width":160,"data-tooltip-timeout-delay":50,"data-tooltip-show-immediately":!0,style:p}):null}),M=s.memo(function(){let e=(0,y.J2)(l.Ez5.embedUiState().activeEmbedData),t=(0,a.d4)(e=>e.mirror.appModel.currentPage?e.mirror.appModel.currentPage:void 0),n=(0,a.d4)(N),s=(0,c.md)(C.n),r=!!e&&n?.guid===e.embedNodeId;return e&&e.embedNodeId&&e.embedThumbnailNodeId&&e.srcUrl&&e.containingCanvasId&&e.containingCanvasId===t?(0,d.kc)().figjam_embeds_allowlist&&!(0,m.Cy)(e.srcUrl)?(console.error("Could not play embed; domain not on allow-list:",e.srcUrl),null):(0,i.jsx)(O,{isEmbedMaximized:s,nodeSelected:r,embedThumbnailNodeId:e.embedThumbnailNodeId,srcUrl:e.srcUrl}):null}),O=s.memo(function(e){let{embedThumbnailNodeId:t,nodeSelected:n,srcUrl:a,isEmbedMaximized:o}=e,d=s.useRef(null),u=s.useRef(null),p=s.useRef(null),m=s.useRef(null),f=(0,_._X)({subscribeToUpdates_expensive:!0}),g=function(e,t){let[n,i]=s.useState(!1),[a,r]=s.useState(!1);return s.useEffect(()=>{!e&&a&&r(!1)},[e,a]),s.useEffect(()=>{function e(e){if(t.current){let n=t.current.getBoundingClientRect();e.clientX>n.left&&e.clientX<n.right&&e.clientY>n.top&&e.clientY<n.bottom&&i(!0)}}function s(e){if(t.current&&n){i(!1);let n=t.current.getBoundingClientRect();e.clientX>n.left&&e.clientX<n.right&&e.clientY>n.top&&e.clientY<n.bottom&&r(!0)}}return document.addEventListener("pointerdown",e),document.addEventListener("pointerup",s),()=>{document.removeEventListener("pointerdown",e),document.removeEventListener("pointerup",s)}},[n,t]),a||!n&&e}(n,u),y=(0,c.Xr)(C.n),v=r.hS({open:o,onClose:()=>y({type:"MINIMIZE"})}),b=(0,h.Wx)(p.current);return s.useEffect(()=>{let e=(0,x.EE)("active-embed",[t],e=>{if(!e.position){l.glU.setActiveEmbed("");return}m.current=e.position,D(u,f,m,b,o,g)}),n=e.currentNodePosition[t]?.position;return n?(m.current=n,D(u,f,m,b,o,g)):l.glU.setActiveEmbed(""),()=>{(0,x.lB)("active-embed")}},[t,o,g,f,b]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:o?"embed_overlay--maximizedIframePositioner--BvF7x":void 0,ref:u,children:(0,i.jsx)(P,{ref:d,srcUrl:a,autofocus:g},t+a)}),o&&(0,i.jsx)(R,{manager:v,modalTargetRef:p})]})});function R(e){let{manager:t,modalTargetRef:n}=e;return(0,i.jsxs)(r.bL,{manager:t,theme:{backdrop:"embed_overlay--embedModalBackdrop--GznWd",contents:"embed_overlay--embedModal--NmRO5",root:"embed_overlay--embedModalRoot--YSySR"},children:[(0,i.jsx)("div",{className:"embed_overlay--embedModalMenuBackground--xwJaH",children:(0,i.jsx)("div",{className:"embed_overlay--embedModalMenuContainer--03E8r",children:(0,i.jsxs)(E.W1,{testID:"embedMenu",children:[(0,i.jsx)(I.e,{inModal:!0}),(0,i.jsx)(S,{}),(0,i.jsx)(E.wv,{}),(0,i.jsx)(j.S,{inModal:!0})]})})}),(0,i.jsx)("div",{className:"embed_overlay--embedModalContentContainer--jP-31",children:(0,i.jsx)("div",{ref:n,className:"embed_overlay--embedModalTarget--hxGi-"})})]})}let P=s.forwardRef(function(e,t){let n=(0,a.wA)(),[r,o]=s.useState(!1),d=s.useRef(null),{srcUrl:c,autofocus:u}=e;return(0,i.jsxs)("div",{className:"embed_overlay--loadingIFrameContainer--FIfGE",children:[!r&&(0,i.jsx)("div",{className:"embed_overlay--iframeLoadingPlaceholder--uAVFk"}),(0,i.jsx)("iframe",{ref:t||d,allowFullScreen:!0,className:p()("embed_overlay--iframe--FcmB0",{"embed_overlay--iframeHidden--xwbj9":!r}),"data-embed-iframe":!0,frameBorder:"0",onLoad:()=>{let e=t&&t.current||d.current;e&&u&&e.focus(),o(!0)},onMouseOver:()=>{l.h3O?.sendChatMessage("",""),n(g.Ho())},src:c,title:(0,f.t)("whiteboard.embeds.embed_overlay_iframe_title")},c)]})});function D(e,t,n,i,s,a){if(!e.current||!t||!n.current)return;let r=e.current,l=n.current;if(s){if(!i)return;r.style.position="fixed",r.style.height=`${i.height}px`,r.style.width=`${i.width}px`,r.style.pointerEvents="all",r.style.transform="unset",r.style.transformOrigin="unset"}else{let e=(0,_.Yb)(t,l);r.style.position="fixed",r.style.height=`${l.height}px`,r.style.width=`${l.width}px`,r.style.transform=`translate(${e.x+t.x}px, ${e.y+t.y}px) rotate(${l.angle}deg) scale(${t.zoomScale})`,r.style.transformOrigin="top left",a?r.style.pointerEvents="all":r.style.pointerEvents="none"}}(0,b.Ju)(O,"EmbedMaximizedModal")},167809:(e,t,n)=>{n.d(t,{U:()=>u});var i=n(716976),s=n(237420),a=n(266808),r=n(443192),l=n(354114),o=n(956592),d=n(174730);let c=(0,n(338052).D)(()=>l.Y5.fromFullscreen);function u(e,t){let n=(0,s.wA)(),l=(0,d.f)(e),u=(0,o.g)();i.useEffect(()=>{t?.current||l||!u||a.glU?.setUsedPanAction(!1)},[u,l,t]),i.useEffect(()=>{if(!(l||t?.current))return c().on("panActionMessageForOnboarding",i),()=>{c().removeListener("panActionMessageForOnboarding",i)};function i(){n(r.b({[e]:!0}))}},[l,n,e,t])}},606151:(e,t,n)=>{n.d(t,{g:()=>u});var i=n(716976),s=n(237420),a=n(266808),r=n(443192),l=n(354114),o=n(956592),d=n(174730);let c=(0,n(338052).D)(()=>l.Y5.fromFullscreen);function u(e,t){let n=(0,s.wA)(),l=(0,d.f)(e),u=(0,o.g)();i.useEffect(()=>{t?.current||l||!u||a.glU?.setUsedZoomAction(!1)},[u,l,t]),i.useEffect(()=>{if(!(l||t?.current))return c().on("zoomActionMessageForOnboarding",i),()=>{c().removeListener("zoomActionMessageForOnboarding",i)};function i(){n(r.b({[e]:!0}))}},[l,n,e,t])}},977473:(e,t,n)=>{n.d(t,{Cj:()=>m,kz:()=>p});var i=n(104076),s=n(716976),a=n(795033),r=n(564914),l=n(34927),o=n(913664),d=n(368656);let c=(0,a.eU)([]),u=(0,a.eU)(new Map),p=(0,a.Iz)(e=>(0,a.eU)(t=>t(u).get(e)??[]));function m({children:e,testFetchFn:t}){let n=(0,s.useId)(),[r,l]=(0,a.fp)(c),o=n===r[0];return(0,s.useEffect)(()=>(l(e=>[...e,n]),()=>{l(e=>e.filter(e=>e!==n))}),[n,l]),(0,i.jsxs)(i.Fragment,{children:[o&&(0,i.jsx)(h,{testFetchFn:t}),e]})}function h({testFetchFn:e}){return e?.(),function(){let e=(0,d.z)(),t=(0,a.Xr)(u);(0,s.useEffect)(()=>{let n=g(e.localAssets),i=new Map;if(e.allLibrariesUnsorted.forEach((e,t)=>{if("design"===e.type){let n=g(e).map(e=>({...e,isCodeConnected:!1}));i.set(t,n)}}),0===n.length){let n=new Map(i);n.set(e.localAssets.libraryKey,[]),t(n)}else(function(e){if(0===e.length)return Promise.resolve({});let t=e.map(e=>{try{return f(e.component)}catch{return null}}).filter(e=>null!==e);return 0===t.length?Promise.resolve({}):l.Q.getInContextPublishedComponentsStatus(t).then(e=>e.data.meta.status).catch(e=>(console.error("Failed to fetch code connect statuses:",e),{}))})(n).then(s=>{let a=n.map(e=>{let t=f(e.component),n=t?s[t]:void 0;return{...e,isCodeConnected:"connected"===n}}),r=new Map(i);r.set(e.localAssets.libraryKey,a),t(r)}).catch(s=>{let a=n.map(e=>({...e,isCodeConnected:!1})),r=new Map(i);r.set(e.localAssets.libraryKey,a),t(r)})},[e,t])}(),null}function f(e){return e.type===r.PW.COMPONENT&&"component_key"in e?e.component_key||e.node_id||null:e.type===r.PW.STATE_GROUP&&"key"in e?e.key||e.node_id||null:e.node_id||null}function g(e){let t=[];return e.pages.forEach(e=>{if(e.components)for(let n of(0,o.r)(e.components))(n.type===r.PW.COMPONENT||n.type===r.PW.STATE_GROUP)&&t.push({component:n})}),t}},859689:(e,t,n)=>{n.d(t,{_:()=>r});var i=n(795033);n(374794);var s=n(406606),a=n(182019);function r(){let e=(0,i.md)(s.h3);return(0,a.q)()(e)}},616248:(e,t,n)=>{n.d(t,{W:()=>m,x:()=>p});var i=n(716976),s=n(237420),a=n(2713),r=n(192075),l=n(58212),o=n(915013),d=n(592726),c=n(813141),u=n(747003);function p(e){let t=(0,s.wA)(),n=(0,d.iZ)(),c=(0,o.dR)(),u=(0,a.B4)();(0,i.useEffect)(()=>{!e&&n&&c&&c.userID===n.id&&(u(),t(l.F.enqueue({message:(0,r.t)("left_rail.spotlight_session_ended_only_available"),type:"spotlight-ended-canvas-only-visual-bell"})))},[e,n,t,c,u])}function m(){let e=(0,c.G)(),t=(0,u.LF)();try{return!(0,u.AX)().isMultiplayer}catch{return e||t}}},989034:(e,t,n)=>{n.d(t,{Q:()=>O,e:()=>L});var i=n(104076),s=n(716976),a=n(754245),r=n(237420),l=n(266808),o=n(170627),d=n(324063),c=n(140490),u=n(641518),p=n(193350),m=n(549571),h=n(147046),f=n(278491),g=n(218329),x=n(330378),_=n(251537),y=n(111297),v=n(193460),b=n(687849),C=n(893178),j=n(176203),k=n(564941),w=n(563554),E=n(532096),T=n(346886),S=n(227665),I=n(717648);let N="preferences-menu";class A extends u.o6{constructor(){super(...arguments),this.multilevelDropdownRef=e=>{this.multilevelDropdown=e},this.onKeyDown=e=>{(0,C.jr)(e,C.W0.NO)},this.selectPreferencesMenu=()=>{this.multilevelDropdown&&this.multilevelDropdown.setActiveItemPath(this.getPathToPreferences())},this.getPathToPreferences=()=>[(0,x.A)(N)]}componentDidUpdate(e,t){if(super.componentDidUpdate(e,t),this.props.selectionToUpdate&&this.props.selectionToUpdate===l.m7W.PREFERENCES){let e=this.multilevelDropdown&&this.multilevelDropdown.getActiveItemAtDepth(0);!e||(0,g.k$)(e)||(0,g.gN)(e)||(0,g.id)(e)||!e.name||e.name!==N?(this.selectPreferencesMenu(),this.props.dispatch(h.ho({type:k.pi,data:{selectionToUpdate:null}}))):this.props.dispatch(h.oB())}}render(){let e=this.props.positionOnChevron&&this.props.chevronRef?.current?.getBoundingClientRect()||null,t=(0,i.jsx)("div",{className:`${f.Dm}`,children:(0,i.jsx)(O,{ref:this.multilevelDropdownRef,activatePathOnMount:this.props.dropdown.data.togglePreferences?this.getPathToPreferences():void 0,allowCodegenOptions:this.props.selectedView.editorType===j.nT.Design,alwaysShowCheckMarkOffset:!0,appModel:this.props.appModel,"aria-labelledby":this.props["aria-labelledby"],controlledByID:this.props.controlledByID,dispatch:this.props.dispatch,id:this.props.id,isLimitedDevMode:this.props.isLimitedDevMode,lean:"right",menuItems:this.props.menuItems,onKeyDown:this.onKeyDown,recordingKey:"mainMenu",selectedView:this.props.selectedView,showPoint:!1,targetRect:e??(this.props.appModel.showUi?this.props.dropdown.data.targetRect:{top:0,left:0})})});return a.createPortal(t,document.body)}}function L(e){return(0,i.jsx)(c.u,{label:"FullscreenMainMenu",children:(0,i.jsx)(M,{...e})})}function M(e){(0,_.n)();let t=(0,r.wA)(),n=(0,r.d4)(e=>e.mirror.appModel),s=(0,r.d4)(e=>e.selectedView),a=(0,r.d4)(e=>e.dropdownShown?.data?.selectionToUpdate),l=(0,r.d4)(e=>(0,E.$A)(e.selectedView)&&!(0,m.tn)(e)),o=(0,S.g)(),d=(0,v.d)({debugMenuItems:o});return(0,i.jsx)(A,{...e,dispatch:t,menuItems:d,appModel:n,selectedView:s,selectionToUpdate:a,isLimitedDevMode:l})}A.displayName="FullscreenMainMenu";class O extends s.Component{constructor(){super(...arguments),this.multilevelDropdownRef=e=>{this.multilevelDropdown=e},this.getActiveItemAtDepth=e=>this.multilevelDropdown?this.multilevelDropdown.getActiveItemAtDepth(e):null,this.setActiveItemPath=e=>{this.multilevelDropdown&&this.multilevelDropdown.setActiveItemPath(e)},this.onSelectItem=(e,t)=>{o.l7.user(`fullscreen-menu-${e.action??"non-action"}`,()=>{if(e.callback&&e.callback((0,g.Dz)(e),e.args,this.props.dispatch,t),e.action&&!e.input){let n=e.action;e.loadingIndicatorString?this.props.dispatch(p.n.set({message:e.loadingIndicatorString,callback:()=>{b.VU.get(n,e.source??"menu",e.args)(t)}})):b.VU.get(n,e.source??"menu",e.args)(t)}})},this.transformMenuItems=(0,d.xx)(e=>(0,I.jv)(e,{appModel:this.props.appModel,selectedView:this.props.selectedView,sceneGraph:this.props.sceneGraph,sceneGraphSelection:this.props.sceneGraphSelection,removeDisabledItems:this.props.removeDisabledItems,alwaysShowCheckMarkOffset:this.props.alwaysShowCheckMarkOffset,isLimitedDevMode:this.props.isLimitedDevMode}))}componentDidMount(){this.closeIfNoItems()}componentDidUpdate(){this.closeIfNoItems()}componentWillUnmount(){this.props.controlledByID&&document.getElementById(this.props.controlledByID)?.focus()}hasMenuValidItems(){let e=this.transformMenuItems(this.props.menuItems);return e.length>0&&e.some(e=>!e.separator&&(this.props.allowDisabledOnly||!e.disabled))}closeIfNoItems(){this.hasMenuValidItems()||this.props.dispatch(h.oB())}render(){let e=this.transformMenuItems(this.props.menuItems);return this.hasMenuValidItems()?(0,i.jsx)(y.fu,{name:w.e0.EDITOR_MENU,children:(0,i.jsx)(T.j,{ref:this.multilevelDropdownRef,activatePathOnMount:this.props.activatePathOnMount,allowCodegenOptions:this.props.allowCodegenOptions,alwaysShowCheckMarkOffset:this.props.alwaysShowCheckMarkOffset,"aria-labelledby":this.props["aria-labelledby"],dispatch:this.props.dispatch,id:this.props.id,items:e,lean:this.props.lean,minWidth:this.props.minWidth,onKeyDown:this.props.onKeyDown,onSelectItem:this.onSelectItem,parentRect:this.props.targetRect,recordingKey:this.props.recordingKey,showPoint:this.props.showPoint})}):null}}O.displayName="FullscreenMultilevelDropdown"},227665:(e,t,n)=>{n.d(t,{g:()=>X});var i=n(716976),s=n(237420),a=n(313447),r=n(2188),l=n(266808),o=n(980852),d=n(812714),c=n(883765),u=n(755444),p=n(967782),m=n(104076),h=n(795033),f=n(361170),g=n(442130),x=n(664299),_=n(366535),y=n(959834),v=n(643330),b=n(371237);let C=(0,y.Ju)(function(){let e=(0,s.wA)(),t=i.useCallback(()=>{e(_.AS())},[e]),[n,a]=(0,h.fp)(g.cH),[r,l]=i.useState(!1),[o,d]=(0,h.fp)(x.Oq);return(0,m.jsx)(v.Ao,{title:"Code Connect Debug Settings",headerSize:"small",initialPosition:new f.Mi(0,0),onClose:t,children:(0,m.jsxs)("div",{className:b.kL,children:[(0,m.jsxs)("div",{className:b.zN,children:[(0,m.jsx)("input",{type:"checkbox",onChange:e=>a(e.target.checked),checked:n}),(0,m.jsx)("span",{className:b.Pf,children:"Debugger break in template execution"})]}),(0,m.jsxs)("div",{className:b.zN,children:[(0,m.jsx)("input",{type:"checkbox",onChange:e=>l(e.target.checked),checked:r}),(0,m.jsx)("span",{className:b.Pf,children:"Log Code Connect document"})]}),(0,m.jsxs)("div",{className:b.zN,children:[(0,m.jsx)("input",{type:"checkbox",onChange:e=>d(e.target.checked),checked:o}),(0,m.jsx)("span",{className:b.Pf,children:"Log JS before execution"})]})]})})},"CodeConnectDebugModal");var j=n(443192),k=n(550594),w=n(553065),E=n(349311),T=n(950241),S=n(749909);function I(e){let[t,n]=i.useState(e.initialValue),a=i.useCallback(e=>{(0,w.gl)(e)||n(e.valueOf())},[n]),r=(0,s.wA)();return i.useEffect(()=>{(0,k.uw)({[e.configPropertyName]:t})},[t,e.configPropertyName]),(0,m.jsx)(T.Ht,{bigNudgeAmount:e.bigNudgeAmount,className:S.hF,"data-tooltip":e.propertyDescription,"data-tooltip-type":E.Ib.TEXT,dispatch:r,max:e.maxVal,min:e.minVal,onValueChange:a,smallNudgeAmount:e.smallNudgeAmount,value:t,children:(0,m.jsx)("span",{className:S.Pf,children:e.displayName})})}let N=(0,y.Ju)(function(){let e=(0,s.wA)(),t=i.useCallback(()=>{e(_.AS())},[e]);return(0,m.jsx)(v.Ao,{title:"Comments Debug Settings",headerSize:"small",initialPosition:new f.Mi(0,0),onClose:t,children:(0,m.jsxs)("div",{className:S.kL,onMouseDown:e=>{e.stopPropagation()},children:[(0,m.jsx)(I,{configPropertyName:"minZoomPercentage",initialValue:k.i$.minZoomPercentage,displayName:"Clustering Zoom Level Threshold",propertyDescription:"The zoom level threshold at which we will no longer apply clustering",minVal:1,maxVal:25600,bigNudgeAmount:5,smallNudgeAmount:.1}),(0,m.jsx)(I,{configPropertyName:"zoomScaleOverlap",initialValue:k.i$.zoomScaleOverlap,displayName:"Pin Overlap",propertyDescription:"The base number of pixels we check for overlapping pins when clustering, this value is multiplied by the current zoomScale to compute bounding box",minVal:1,maxVal:2e4,bigNudgeAmount:100,smallNudgeAmount:10}),(0,m.jsx)(I,{configPropertyName:"clusterClickResultViewportPercentage",initialValue:k.i$.clusterClickResultViewportPercentage,displayName:"Cluster Click Result Viewport Percentage",propertyDescription:"After a cluster click, one of the pins in the cluster will be positioned this percentage between the center of the viewport and the edge of the viewport. However, we will always zoom in far enough to break the cluster, even if one of the pins ends up being positioned farther away than this percentage.",minVal:1,maxVal:100,bigNudgeAmount:5,smallNudgeAmount:1}),(0,m.jsx)(I,{configPropertyName:"rebuildClustersZoomDelay",initialValue:k.i$.rebuildClustersZoomDelay,displayName:"Rebuild Cluster User Zoom Delay",propertyDescription:"Delay in ms that occurs between a zoomScale change and the clusters rebuilding",minVal:0,maxVal:1e4,bigNudgeAmount:100,smallNudgeAmount:10})]})})},"CommentDebugSettingsModal");var A=n(354114),L=n(260495),M=n(211862),O=n(174730),R=n(944350),P=n(957128);n(770522),n(106072),n(236631),n(231378),n(729926),n(351405),n(475593),n(683075),n(120276);var D=n(565911),F=n(432099),z=n(936663),B=n(432786),G=n(317096);class U extends Error{}async function V({dispatch:e,fileKey:t,log:n=()=>{}}){try{n("Generating file version...");let i=(await z.m(t,"Exported to ML account","",e,!0))?.id;if(void 0===i)throw Error("undefined versionId");n(`Exporting file version ${i}...`);let{meta:{run_key:s}}=(await F.Ay.post(`/api/ml/export/file_version/${i}`)).data;n(`Waiting for run ${s}...`);for(let e=30;e>=0;e--){await new Promise(e=>setTimeout(e,1e3));let{meta:{ready:t,s3_uri:i}}=(await (0,F.Ay)({url:`/api/ml/export/status/${encodeURIComponent(s)}`})).data;if(t){n(`Export manifest is ready at ${i}`);break}if(0===e){n("Timed out!");return}}n("Succeeded!")}catch(e){if(e instanceof U)return;n("Failed!"),n(`${e}`)}}let H=(0,y.Ju)(function(){let e=(0,s.wA)(),t=i.useCallback(()=>{e(_.AS())},[e]),[n,a]=i.useState([]),r=(0,M.tS)();return i.useEffect(()=>{let n=!1,i=e=>{if(n)throw new U;a(t=>t.concat([e]))};return null===r?i("No open file"):V({dispatch:e,fileKey:r,log:i}),()=>{n=!0,t()}},[t,e,r]),(0,m.jsx)(B.OJ,{title:"ML Export",headerSize:"large",minWidth:300,onClose:t,children:(0,m.jsx)("div",{className:G.k,children:n.join("\n")})})},"MLExportModal");var K=n(857995),W=n(418886),q=n(321039);let X=()=>{let e=(0,s.wA)(),t=(0,M.Cq)({useSinatraType:!0}),m=(0,O.f)("cursor_bot_v2_make_show_me_primary_cta");return(0,i.useMemo)(()=>{let i=[{name:"toggle-comments-debug-settings",callback:()=>{e((0,_.YK)({type:N,data:{}}))}},{name:"toggle-comments-debug-disable-sidebar",callback:()=>{(0,k.uw)(e=>({disableSidebar:!e.disableSidebar}))}},{name:"toggle-code-connect-debug-tools",callback:()=>{e((0,_.YK)({type:C,data:{}}))}}];return window.INITIAL_OPTIONS?.cluster_name==="local"&&i.push({name:"debug-ml-export",callback:()=>{e((0,_.YK)({type:H,data:{}}))}}),(0,d.kc)().cursor_bot&&t?.editor_type===R._Y.DESIGN&&i.push({name:"toggle-cursor-bot",callback:()=>{(0,p.YQ)({id:"cursor_bot_debug_menu_clicked"})}},{name:"toggle-cursor-bot-primary-cta",callback:()=>{e(j.b({cursor_bot_v2_make_show_me_primary_cta:!m}))}}),(0,d.kc)().bake_bulk_export_guidelines&&t?.editor_type===R._Y.FIGMAKE&&i.push({name:"figmake-export-code-library-guidelines",callback:async()=>{let{exportCodeLibraryGuidelines:e}=await Promise.resolve().then(n.bind(n,482911));e()}}),(0,d.kc)().bake_sb&&t?.editor_type===R._Y.FIGMAKE&&(K.D&&i.push({name:"supabase-menu",callback:()=>{A.Y5.dispatch((0,_.to)({type:K.D,data:{},showModalsBeneath:!0}))}}),W.O&&i.push({name:"foundry-menu",callback:()=>{W.O&&A.Y5.dispatch((0,_.to)({type:W.O,data:{},showModalsBeneath:!0}))}})),t?.editor_type===R._Y.FIGMAKE&&i.push({name:"generate-make-chat-history",callback:()=>{A.Y5.dispatch((0,_.to)({type:q.b,data:{},showModalsBeneath:!0}))}}),(0,u.b5)()&&t?.editor_type===R._Y.DESIGN&&(i.push({name:"toggle-tooltips-plus",callback:()=>{(0,p.YQ)({id:D.v})}}),i.push({name:"toggle-visual-asset-tooltips",callback:()=>{(0,p.YQ)({id:P.io})}})),i.push({name:"debug-paste-h2d-document",callback:async()=>{let e=await navigator.clipboard.readText(),n='{"type":"h2d-document","document":';if(!e.startsWith(n))return;let i=await (0,r.rS)(e.substring(n.length,e.length-1));await (0,a.N5)(i,{decodeImage:L.UD,scene:(0,o.getActiveTSSceneGraph)(),tracking:l.HzA.TRACK,trackDefinedEvent:c.az.trackDefinedEvent},{attachBuildDataToNodes:{enabled:!!(0,d.kc)().bake_m2d_roundtrip,fileKey:t?.key}})}}),i},[e,m,t?.editor_type,t?.key])}},896784:(e,t,n)=>{n.d(t,{c:()=>ni});var i=n(104076);n(50953);var s=n(716976),a=n(237420),r=n(126852),l=n(12866),o=n(287211),d=n(359166),c=n(341628),u=n(171971),p=n(508334),m=n(812714),h=n(221586),f=n(681398);let g=new Set(["-","="]),x=new Set(["-","=","f","o","p","r","s"]);function _(e){if(!x.has(e.key))return;let t=f.Ay.mac?h.xH.META:h.xH.CONTROL;(0,h.vN)(e,t)?e.target instanceof Element&&e.target.matches(".cm-content")||e.preventDefault():g.has(e.key)&&(t|=h.xH.SHIFT,(0,h.vN)(e,t)&&e.preventDefault())}var y=n(217487),v=n(997477),b=n(836982),C=n(1188),j=n(549571),k=n(486879),w=n(850701),E=n(475034),T=n(251864),S=n(861919),I=n(111297),N=n(481173),A=n(851824),L=n(883765),M=n(819851),O=n(704829),R=n(249586),P=n(58399),D=n(497588),F=n(239223),z=n(962427);n(501781);var B=n(203144),G=n(99723),U=n(633065),V=n(734061),H=n(866786),K=n(4033),W=n(164131),q=n(8828);let X=(0,G.s)((e,t)=>{U.eD.updateFullscreenMenuState({pluginMenuData:e,widgetMenuData:t})},250);var Y=n(537307),Z=n(444878),J=n(211862),Q=n(288747),$=n(592726),ee=n(985416),et=n(266808),en=n(416245),ei=n(192075),es=n(58212),ea=n(717466),er=n(443192),el=n(354114),eo=n(491246),ed=n(39769);let ec="keyboard-layout-preference",eu=(e,t,n)=>{t&&e(ea.FU({tab:t})),n||el.Y5.triggerAction("toggle-keyboard-shortcuts")},ep=(e,t,n,i)=>{e(er.b({keyboard_manual_supported_bell:!0})),e(es.F.enqueue({message:(0,ei.t)("keyboard_settings.new_keyboard_name_keyboard_shortcuts_are_available",{newKeyboardName:(0,en.As)(t)}),button:{text:(0,ei.t)("keyboard_settings.update_keyboard_shortcuts"),action:()=>eu(e,"layout",i)},type:ec,onDismiss:()=>{e(er.b({keyboard_manual_supported_bell:!0}))},timeoutOverride:2e4})),(0,en.CZ)({layout:n,detectedLayout:t,eventName:"manual_supported_keyboard_detected"})},em=(e,t,n)=>{e(er.b({keyboard_generic_supported_first_bell:!0})),e(es.F.enqueue({message:(0,ei.t)("keyboard_settings.new_keyboard_name_keyboard_shortcuts_are_now_available",{newKeyboardName:(0,en.As)(t)}),button:{text:(0,ei.t)("keyboard_settings.enable_and_show_new_shortcuts"),action:()=>{eu(e,"layout",n),(0,en.rd)({layout:t})}},type:ec,onDismiss:()=>{}})),(0,en.CZ)({layout:et.aTn.UNKNOWN,detectedLayout:t,eventName:"first_generic_detected_supported_keyboard"})};async function eh(e,t){if(!U.eD)return null;let n=await U.eD.getKeyboardLayout();if(!n)return null;if(t===n)return n;let i=(0,ed.pB)(n),s=(0,en.v7)();return i===s||e(i,s,n,null!=t),n}async function ef(e,t){if(!window.isSecureContext||window.top!==window.self)return null;let n=navigator.keyboard;if(!n||!n.getLayoutMap)return null;let i=await n.getLayoutMap();if(function(e,t){for(let[n,i]of e)if(t?.get(n)!==i)return!1;return!0}(i,t))return t;let{layoutJSON:s,detectedLayoutsWeb:a}=(0,eo.$$)(i),r=(0,eo.ZN)({layoutJSON:s,detectedLayouts:a,desktopLayout:null}),l=(0,en.v7)();return r===l||e(r,l,JSON.stringify(s),null!=t),i}var eg=n(764973),ex=n(220411),e_=n(530299),ey=n(685490),ev=n(374794),eb=n(10019),eC=n(9781),ej=n(297852),ek=n(893393),ew=n(525972),eE=n(342816),eT=n(806054),eS=n(114937),eI=n(176203),eN=n(563554),eA=n(950597),eL=n(795033),eM=n(972920),eO=n.n(eM),eR=(e=>(e.NOT_INITIALIZED="not_initialized",e.ACTIVE_FIRST_TIME="active_first_time",e.ACTIVE_AFTER_IDLE="active_after_idle",e.IDLE_DUE_TO_INACTIVITY="idle_due_to_inactivity",e.IDLE_DUE_TO_TAB_SWITCH="idle_due_to_tab_switch",e))(eR||{}),eP=n(140948);let eD=(0,eL.eU)(eR.NOT_INITIALIZED),eF=(0,eP.bt)(e=>({state:e,fileKey:e.openFile?.key})),ez=[eR.ACTIVE_AFTER_IDLE,eR.ACTIVE_FIRST_TIME],eB=(0,eL.eU)(null,(e,t,n)=>{let{state:i,fileKey:s}=e(eF),a=e(eD);if((a&&ez.includes(a)?"start":"end")!=(n&&ez.includes(n)?"start":"end")){let e="";switch(n){case eR.ACTIVE_AFTER_IDLE:case eR.ACTIVE_FIRST_TIME:e="active";break;case eR.IDLE_DUE_TO_INACTIVITY:case eR.IDLE_DUE_TO_TAB_SWITCH:e="inactive";break;default:e="non-initialized"}(0,R.ds)("active_time_spent_event",s,i,{currentState:e,activeState:n},{forwardToDatadog:!0,batchRequest:!1})}t(eD,n)}),eG=["mousemove","mousedown","keydown","touchstart","touchmove","wheel"];var eU=n(449572),eV=n(59849),eH=n(469229),eK=n(912565),eW=n(907915),eq=n(293422),eX=n(511570),eY=n.n(eX),eZ=n(140490),eJ=n(243886),eQ=n(236631),e$=n(280110),e0=n(219199),e1=n(208882),e2=n(350819),e3=n(239210),e5=n(918999),e4=n(403224),e6=n(990240);function e7(e){return(0,i.jsx)(eZ.u,{label:"RequestPermissionsAccountPicker",children:(0,i.jsx)(e8,{...e})})}function e8(e){let t=(0,a.wA)(),n=(0,a.d4)(e=>e.auth);return(0,s.useEffect)(()=>{t(e1.Ts({origin:"request_permissions_entry",redirectUrl:e0.Ay.location.pathname,formState:e2.qB.ACCOUNT_PICKER,accountPickerData:e.accountPickerData}))},[t,e.accountPickerData]),(0,i.jsxs)(e5.u,{useOriginalSrcFills:!0,onBackClick:()=>{n.formState===e2.qB.ACCOUNT_PICKER?e.closeAuth():t(e1.Ts({origin:"request_permissions_entry",redirectUrl:e0.Ay.location.pathname,formState:e2.qB.ACCOUNT_PICKER,accountPickerData:e.accountPickerData}))},children:[(0,i.jsx)("div",{className:"request_permissions_app--authViewContainer--1XJOG",children:(0,i.jsx)(e3.Ob,{id:"request-permissions-app",modal:!0,auth:n})}),(0,i.jsx)(e6.d,{children:(0,i.jsx)(e4.Ji,{})})]})}function e9(e){return(0,i.jsx)(eZ.u,{label:"MfaRequiredAppView",children:(0,i.jsx)(te,{...e})})}function te(e){let t=((0,a.d4)(e=>e.authedUsers)??{}).byId??{},n=e.authedUsers??Object.values(t),[r,l]=(0,s.useState)(!1);return(0,i.jsx)(eJ.w,{children:r?(0,i.jsx)(e7,{accountPickerData:{authed_users:n,authed_user_access_reason:{},destination_name:(0,ei.t)("mfa_required_modal.account_switcher.destination")},closeAuth:()=>{l(!1)}}):(0,i.jsx)(e$.H,{org:e.org,switchAccountsSection:(0,i.jsx)(function(){let e=(0,$.iZ)();return!e||U.eD?null:(0,i.jsx)("div",{className:eY()(eQ.s.mt24.$,"mfa_required--secondaryText--eCIsl"),children:(0,ei.tx)("mfa_required_modal.account_switcher.text",{userEmail:e.email,link:(0,i.jsx)(eq.$n.Link,{onClick:()=>{l(!0)},children:(0,ei.tx)("mfa_required_modal.account_switcher.switch_accounts")})})})},{}),fileKey:e.fileKey})})}var tt=n(788846),tn=n(328341),ti=n(755444),ts=n(472436),ta=n(366535),tr=n(152469),tl=n(244399),to=n(847282),td=n(226377),tc=n(342430),tu=n(956359),tp=n(420680),tm=n(44917),th=n(225654),tf=n(201019);function tg(e){let{onDismiss:t}=e;return(0,i.jsx)(I.fu,{name:"Workshop Expired File Banner",children:(0,i.jsxs)("div",{className:`workshop_expiry_footer--banner--ELf7G ${tf.yl}`,children:[(0,i.jsxs)("div",{className:"workshop_expiry_footer--bannerContent--w2Lw1",children:[(0,i.jsx)("div",{className:"workshop_expiry_footer--icon--mM-A8",children:(0,i.jsx)(tm.C,{})}),(0,i.jsx)("div",{className:"workshop_expiry_footer--textContent--TN7cv",children:(0,i.jsx)("span",{className:"workshop_expiry_footer--title--cmlOu text--fontPos13Whyte--VhWqH text--_fontBaseWhyte--efAjI",children:(0,ei.tx)("whiteboard.open_sessions.expiry_banner_title")})})]}),(0,i.jsx)(tp.K,{onClick:t,"aria-label":(0,ei.t)("general.close"),children:(0,i.jsx)(th.X,{})})]})})}var tx=n(785182),t_=n(561378);function ty(e){let{onWorkshopExpired:t}=e;!function(){let e=(0,a.wA)(),t=(0,$.iZ)(),n=!t,i=(0,tl.nF)(),r=i.enabled,l=i.enabled?i.id:null,o=(0,a.d4)(e=>e.mirror.appModel.multiplayerSessionState===et.kul.JOINED),c=(0,a.d4)(e=>e.progressBarState.mode),u=J.q5()?.isTryFile,p=(0,to.QL)("name");(0,s.useEffect)(()=>{n&&u&&l&&p&&o&&e((0,tr.cq)({name:p}))},[n,u,p,l,e,o]);let m=(0,s.useMemo)(()=>{if(!t||null==l)return!1;if(u)return!0;let e=(0,d.DN)();try{return e.get((0,t_.v6)(l)).includes(t.email)}catch(e){return!1}},[t,l,u]),h=t?.email;(0,s.useEffect)(()=>{h&&l&&u&&(0,t_.kO)(l,h)},[h,l,u]);let f=(0,J.MY)();(0,s.useEffect)(()=>{if(r&&!(0,td.T)(c)&&"loaded"===f.status&&!(0,ti.Ay)().mermaid_content){let t=localStorage.getItem((0,tc.K)(l));n?t?(0,tr.QA)(t):e(ta.$O({type:tx.e})):f.data?.canEdit||m||e(ta.$O({type:tx.e}))}},[e,n,r,l,c,m,f]);let g=(0,J.q5)(),x=g?.key,_=g?.name;(0,s.useEffect)(()=>{if(r&&!(0,td.T)(c)&&n&&u&&x&&_===(0,ei.t)("fullscreen.fullscreen_view_selector.untitled")){let t=localStorage.getItem((0,tc.K)(l));t&&e(ts.S({userName:t,file_key:x}))}},[r,c,l,n,u,x,_,e])}();let{showEditFileFooter:n,dismissEditFileFooter:r}=function(e){let[t,n]=(0,s.useState)(!1),i=(0,a.wA)(),r=(0,$.iZ)(),l=(0,J.q5)(),o=l?.name,d=!r,{userCanEditFile:c}=(0,s.useMemo)(()=>d?{userCanEditFile:!1,userCanSeeEditButton:!1}:l?{userCanEditFile:l.canEdit}:{userCanEditFile:!1,userCanSeeEditButton:!1},[d,l]),u=(0,tl.nF)(),p=u.enabled,m=(0,tn.ZC)(p),h=u.enabled?u.until.valueOf():null,f=(0,s.useRef)(null),g=(0,s.useCallback)(()=>{if(!(0,ti.Ay)().mermaid_content){if(!d){et.h3O?.reconnect(!1),c||n(!0);return}i(e1.Ts({origin:"logged_out_footer",formState:e2.qB.SIGN_UP,redirectUrl:e0.Ay.location.pathname})),i(ta.to({type:tu.x,data:{headerText:(0,ei.t)("whiteboard.open_sessions.expiry_modal_title",{file_name:o||""}),subtitle:(0,ei.t)("whiteboard.open_sessions.expiry_modal_subtext"),disableHiding:!0}})),e()}},[i,e,d,c,o]);return(0,s.useEffect)(()=>{if(p&&h){let e=Math.max(h-Date.now(),0);f.current=setTimeout(()=>{f.current=null,g()},e)}return()=>{f.current&&clearTimeout(f.current)}},[i,p,h,g]),(0,s.useEffect)(()=>{null!=m&&p!==m&&(p?et.h3O?.reconnect(!1):(f.current&&clearTimeout(f.current),g()))},[i,p,m,g]),{showEditFileFooter:t,dismissEditFileFooter:(0,s.useCallback)(()=>{n(!1)},[])}}(t);return n?(0,i.jsx)(tg,{onDismiss:r}):null}var tv=n(136896),tb=n(590268),tC=n(741050),tj=n(390036),tk=n(345477),tw=n(89782),tE=n(678375),tT=n(74620),tS=n(521255),tI=n(564941),tN=n(980852),tA=n(733200),tL=n(166887),tM=n(562951),tO=n(643077),tR=n(428827),tP=n(190772),tD=n(211261),tF=n(880820),tz=n(733742),tB=n(505968),tG=n(368933),tU=n(605712),tV=n(315115),tH=n(382827),tK=n(20226),tW=n(338052),tq=n(9255),tX=n(443208),tY=n(921540),tZ=n(217897),tJ=n(880233),tQ=n(285626),t$=n(724179),t0=n(956592),t1=n(997463),t2=n(40312),t3=n(790628),t5=n(842909),t4=n(854284),t6=n(495766),t7=n(446071);let t8=s.memo(e=>(0,i.jsx)(eZ.u,{label:"FullscreenViewGeneral",children:(0,i.jsx)(t9,{...e})})),t9=s.memo(({children:e})=>{let t=(0,a.d4)(e=>e.openFile),n=t?t.key:"",r=(0,s.useRef)(null),l=(0,a.wA)(),o=(0,eL.md)(t$.h),d=(0,a.d4)(e=>e.openFile?.canEdit??!1),c=(0,tT.p8)("isReadOnly"),u=(0,Q.dq)(),p=(0,M.E3)(),h=(0,tn.ZC)(p);p!==h&&h&&l(w.PQ([])),(0,t5.g8)(n),(0,t4.y1)(n),(0,t3.WR)(),tQ.nz(),(0,t0.N)(),(0,t6.Ky)(),(0,s.useEffect)(()=>{let e=()=>{window.scrollTo({left:document.body.scrollLeft,top:document.body.scrollTop,behavior:"smooth"})};window.scrollTo(0,0),f.XN&&document.addEventListener("focusout",e),document.documentElement.classList.add(t7.FC),document.body.classList.add(t7.Wc),l(tZ._J());let t=window.FigmaMobile;return t&&(t._get_memory_stats=()=>{let e=et.P2e?.getImageMemory(),t=et.P2e?.getHeapMemoryBreakdown();var n={coreJsBufferMemory:et.hMR?.getJsBufferMemory()||0,coreLocalMaxUsedHeapMemory:et.hMR?.getLocalMaxUsedHeapMemory()||0,coreMaxUsedHeapMemory:et.hMR?.getMaxUsedHeapMemory()||0,coreTotalUsedHeapMemory:et.hMR?.getTotalUsedHeapMemory()||0,fullscreenCompressedImages:e?.compressedImages??0,fullscreenUncompressedImagesArrayBuffers:e?.uncompressedArrayBuffer??0,fullscreenUncompressedImagesImageBitmap:e?.uncompressedImageBitmap??0};let i=et.hMR?.getMemStatsSummary()??void 0;if(i){let e=s(t?.mem_pool_current)||0,n=s(t?.font_files_current)||0,a=s(t?.unique_paths_current)||0,r=s(t?.vector_networks_current)||0;i.application={memPool:{total:e},fontFiles:{total:n},uniquePaths:{total:a},vectorNetworks:{total:r}}}function s(e){return"number"==typeof e?e:parseInt(e)}return{metadata:JSON.parse(JSON.stringify(n)),reservedWasmMemory:(0,t1.le)()||0,rendererGpuMemory:s(et.P2e?.getRendererGpuMemory())||0,rendererBreakdown:function(e){return{textures:s(e.textures),vertexBuffers:s(e.vertexBuffers),renderBuffers:s(e.renderBuffers),uniformBuffers:s(e.uniformBuffers)}}(et.P2e?.getRendererMemoryBreakdown())??void 0,memStats:i}}),()=>{f.XN&&document.removeEventListener("focusout",e),document.body.classList.remove(t7.Wc),document.documentElement.classList.remove(t7.FC)}},[l]),(0,s.useEffect)(()=>{t&&!r.current&&(l(tQ.Yx({})),t&&!c?t?.canEdit&&l(tY.rH({fileKey:t.key})):(0,m.kc)().ce_new_missing_fonts_logging&&(0,t2.DI)(),r.current=t)},[l,c,t]),(0,s.useEffect)(()=>{(0,t6.RS)(l,t?.key,u)},[l,u,t?.key,p]),(0,s.useEffect)(()=>{U.eD&&U.eD.setEditFilePermissions(d)},[d]);let g=(0,s.useRef)(null),x=(0,s.useRef)(null);return((0,s.useEffect)(()=>{t&&(null===g.current||!g.current)&&l((0,tJ.x4)()),t&&g.current&&t.key!==g.current&&l((0,tJ.x4)()),x.current&&p!==x.current&&l((0,tJ.x4)()),x.current=p,g.current=t?.key},[l,t,p]),"ok"!==o)?null:(0,i.jsx)(i.Fragment,{children:e})});var ne=n(923570),nt=n(968169);let nn=()=>{"hidden"===document.visibilityState&&(d.x4?.clear(),eA.L.cleanupSession())};function ni({children:e,loadedCommentsProvider:t=!0}){let n=(0,a.wA)(),o=(0,J.q5)();(0,j.lF)(o?.key??""),ek.M4.Folder.useValue(o?.folderId);let d=(0,a.d4)(e=>e.selectedView.editorType),[h,g]=(0,s.useState)(!1),x=(0,l.DP)(),C=(0,tH.sO)(),T=(0,j.xo)(),S=(0,s.useCallback)(()=>{(0,ne.jS)(),g(!0)},[]),I=function({onCanvasExpired:e}){let t=(0,a.d4)(e=>(0,eH.U2)(e.selectedView)),n=(0,$.TA)(),i=(0,Q.dq)(),[r,l]=s.useState(!1),o=(0,eK.K)(),d=(0,eU.bc)(eV.NSA,{fileKey:t??""},{enabled:!!t}),c="loaded"===d.status&&d.data.file?.canRead!==!0,u="loaded"===d.status&&d.data.file?.canRead===!0;return s.useLayoutEffect(()=>{o&&c&&(l(!0),e())},[o,c,e]),s.useEffect(()=>{o&&u&&L.az.trackDefinedEvent("mfa.file_access_without_restriction",{orgId:i??void 0,userId:n??void 0,fileKey:t??void 0})},[o,u,i,n,t]),!!(0,m.kc)().mfa_for_guests&&r}({onCanvasExpired:S}),O=(0,a.d4)(e=>e.mergingStatus);(0,u.G1)(o?.key||""),(0,s.useEffect)(()=>{if((0,m.kc)().ce_suppress_browser_keys)return document.addEventListener("keydown",_,!0),()=>void document.removeEventListener("keydown",_,!0)},[]),function(){let e=(0,s.useRef)(),t=(0,s.useRef)(),n=(0,a.wA)(),i=(0,a.d4)(e=>e.userFlags),r=(0,a.d4)(e=>!!e.user),l=function(e,t){let n=(0,a.d4)(e=>e.mirror.appModel.showKeyboardShortcuts),i=(0,a.d4)(e=>e.user?.created_at),r=(0,s.useMemo)(()=>{let e=new Date("2022-11-14").getTime();return null!=i&&new Date(i).getTime()>=e},[i]);return(0,s.useCallback)((i,s,a,l)=>{t.keyboard_user_first_detection||l||!r?i!==et.aTn.US_QWERTY||l||s!==et.aTn.UNKNOWN?i&&s!==et.aTn.UNKNOWN?t.keyboard_manual_supported_bell||ep(e,i,s,n):i&&s===et.aTn.UNKNOWN?t.keyboard_generic_supported_first_bell||em(e,i,n):(0,en.CZ)({layout:s,detectedLayoutStr:a??void 0,eventName:"keyboard_change_no_bell"}):(0,en.CZ)({layout:i,eventName:"ignore_us_qwerty"}):(e(er.b({keyboard_user_first_detection:!0})),i&&((0,en.rd)({layout:i}),(0,en.CZ)({layout:i,eventName:"auto_set_new_user_layout"})))},[e,t,n,r])}(n,i),o=(0,s.useCallback)(async()=>{if(r){if(U.eD){let t=await eh(l,e.current??null);e.current=t}else{let e=await ef(l,t.current??null);t.current=e}}},[l,r]);(0,s.useEffect)(()=>{el.Y5.isReady()?o():el.Y5.onReady().then(()=>setTimeout(o,500))},[])}(),(0,Z.XS)(),function(){let e=(0,a.Pj)(),t=(0,a.d4)(eg.d1),n=(0,a.d4)(ey.m0),i=(0,a.d4)(ey.No),r=(0,a.d4)(e=>e.library.publishedByLibraryKey),l=(0,J.q5)(),o=(0,a.d4)(e=>e.fileVersion),d=(0,a.d4)(e=>e.loadingState),c=(0,a.d4)(e=>e.library.local),u=(0,a.d4)(e=>e.library.assetsPanelSearch.shouldSearchDefaultLibraries),p=(0,ex.ud)(),m=(0,a.d4)(e=>e.folders),h=(0,ev.l6)(),f=(0,ev.He)(),g=(0,a.d4)(e=>e.library.assetsPanelSearch.query),x=(0,a.d4)(e=>e.library.assetsPanelSearch.searchOptions),_=(0,e_.D2)(d,(0,eC.yD)(l?.key||"")),y=(0,eb.M)();(0,s.useEffect)(()=>{t&&ej.YG.sourcesDidChange()},[t,n,i,r,c,u,p,m]),(0,s.useEffect)(()=>{(0,ej.Wg)(e.getState(),{ignoreLoadingState:y})&&ej.YG.queryDidChange(e)},[e,g,y]),(0,s.useEffect)(()=>{(0,ej.Wg)(e.getState(),{ignoreLoadingState:y})&&ej.YG.searchOptionsDidChange(e)},[e,x,y]),(0,s.useEffect)(()=>{(0,ej.Wg)(e.getState(),{ignoreLoadingState:y})&&ej.YG.subscriptionsDidChange(e,h,f)},[e,_,h,f,l,o,d,y])}(),(0,p.ji)(),(0,q.gN)(),U.eD&&function(){let e=(0,K.x)(),t=(0,K.V2)(),n=(0,K.QZ)(),i=(0,a.d4)(e=>e.mirror.appModel.isReadOnly),r=(0,a.d4)(e=>e.openFile),l=(0,a.d4)(e=>e.localPlugins),o=(0,M.E3)(),d=(0,K.op)(),c=(0,a.d4)(e=>e.installedPluginVersions.plugins),u=(0,a.d4)(e=>e.mirror.selectedStyleProperties?.selectedWidgetInfo),p=(0,a.d4)(e=>e.mirror.appModel.activeTextReviewPlugin),m=(0,a.d4)(e=>e.publishedPlugins),h=(0,a.d4)(e=>e.currentUserOrgId?e.orgById[e.currentUserOrgId]:null),f=(0,K.Be)(),g=f.orgPlugins,x=f.orgWidgets,_=(0,W.h)("plugin"),y=(0,W.h)("widget"),v=(0,K.NU)(),b=(0,K.qr)(),C=(0,K.ZT)(),j=null!=(0,q.SH)();s.useEffect(()=>{let s={isReadOnly:i,userCanViewPlugins:e,openFile:r,publishedPlugins:m,localExtensions:l,allSavedPlugins:c,recentlyUsedPlugins:d,org:h,editorType:o,widgetSelectionInfo:u,hideRecentsHeader:!0,activeTextReviewPlugin:p,orgSavedPlugins:g,orgSavedWidgets:x,orgPrivatePlugins:_,orgPrivateWidgets:y,savedWidgetVersions:v,recentlyUsedWidgets:b,publishedWidgets:C,userCanViewWidgets:n,userCanRunExtensions:t};X(V.$0(s),H.wX(s))},[i,e,r,m,c,d,l,h,o,u,p,f,g,x,_,y,v,b,C,j,n,t])}(),(0,ew.x)(),function(){let e=(0,M.E3)(),t=(0,s.useCallback)(()=>{(0,L.sx)("display_redline",{source:"keyboard_shortcut",mode:e})},[e]),n=(0,A.A)(t,1e3,{leading:!0,trailing:!1}),i=(0,a.d4)(e=>e.usedKeyboardShortcuts["measure-to-selection"]||0),r=(0,s.useRef)(i);(0,s.useEffect)(()=>{r.current!==i&&(r.current=i,n())},[i,n])}(),function(){let e=(0,nt.dP)(),t=(0,nt.qw)(),n=(0,nt.UX)(),i=document.documentElement.style;(0,s.useLayoutEffect)(()=>{i.setProperty("--left-panel-width",`${e}px`),(0,m.kc)().properties_panel_resize_lag_fix&&(i.setProperty("--properties-panel-width",`${t}px`),i.setProperty("--dev-handoff-panel-width",`${n}px`))},[e,t,n,i])}(),(0,v.I7)("exp_aa_test_fullscreen_view").getConfig(),function(){let e=(0,a.wA)(),t=(0,tz._)(),n=(0,tS.BI)(),[i,r]=(0,s.useState)(!1),l=(0,a.d4)(e=>e.multiplayer),[o,d]=(0,tw.yR)(),c=(0,a.d4)(e=>e.mirror.appModel.multiplayerSessionState===et.kul.JOINED);!function(){let e=(0,J.q5)(),t=window.FigmaMobile,n=(0,tO.rE)(),i=(0,tR.C3)(),r=(0,a.wA)(),l=(0,tL.am)(),o=i?(0,tA.oA)(i.pageNodeId):void 0;(0,s.useEffect)(()=>{t&&(t._select_page=async e=>{o===e&&r(tM.au({})),await (0,tN.getActiveTSSceneGraph)().setCurrentPageAsync(e)})},[r,t,o]),(0,s.useEffect)(()=>{t&&(t._rename_page=(t,n)=>{(0,tO.CQ)({openFile:e,pageId:t,newName:n,trackRenamePage:()=>l("page_commit_rename",{nodeId:t},{forwardToDatadog:!0})})})},[t,e,l]),(0,s.useEffect)(()=>{t&&(t._delete_page=e=>{el.Y5.triggerActionInUserEditScope("page-delete",{args:{nodeId:e}}),el.Y5.commit()})},[t]),(0,s.useEffect)(()=>{t&&(t._create_page=()=>{n(null)})},[t,n])}();let u=s.useCallback(t=>{et.h3O?.observeUser(t),l&&l.observingSessionID!==t&&l.sessionID!==t&&e(er.b({aware_of_observation_mode:!0}))},[l,e]);s.useEffect(()=>{t&&!i&&n?.shouldOptimizeForIpadApp&&c&&!et.Ez5?.defaultToolIsHandSelect()&&(r(!0),el.Y5.triggerAction("set-tool-hand",null))},[t,n,i,r,c]);let p=(0,a.d4)(({mirror:{appModel:e}})=>e.showUi);s.useEffect(()=>{n?.updateUIVisible&&n.updateUIVisible(p)},[n,p]);let m=(0,tS.m0)();s.useEffect(()=>{m&&(m._try_to_flush_autosave=async()=>{let e=(0,tE.ZG)();if(e){let t=e.session();t&&await t.tryToFlushAutosave()}})},[m]);let h=(0,tP.Kd)();s.useEffect(()=>{n?.updateSaveStatus&&(h?c?n.updateSaveStatus(tG.a.SAVING):n.updateSaveStatus(tG.a.PAUSED):n.updateSaveStatus(tG.a.SAVED))},[n,h,c]);let f=(0,a.d4)(e=>(0,tI.Yh)(e.mirror.appModel,"undo")),g=(0,a.d4)(e=>(0,tI.Yh)(e.mirror.appModel,"redo"));s.useEffect(()=>{if(n?.updateUndoEnabled&&n.updateUndoEnabled(f),n?.updateRedoEnabled&&n.updateRedoEnabled(g),m){let t=t=>{e(es.F.dequeue({matchType:"undo_redo_gesture"})),e(es.F.enqueue({message:t,type:"undo_redo_gesture",timeoutOverride:750}))};m._trigger_undo=()=>{f&&(el.Y5.triggerActionInUserEditScope("undo"),t((0,ei.t)("fullscreen_actions.undo")))},m._trigger_redo=()=>{g&&(el.Y5.triggerActionInUserEditScope("redo"),t((0,ei.t)("fullscreen_actions.redo")))}}},[n,e,f,g,m]);let x=(0,tS.pt)();s.useEffect(()=>{x&&(x._set_ui_visibility=e=>{e!==p&&el.Y5.triggerAction("toggle-ui")})},[x,p]);let _=(0,tk.Yk)();s.useEffect(()=>{n?.updateDLTHeight&&n.updateDLTHeight(_)},[_,n]);let y=(0,tT.dH)(),v=(0,tV.pK)(y),b=(0,tS.Ef)(),C=(0,a.d4)(e=>e.mirror?.appModel.isReadOnly);s.useEffect(()=>{v&&!C&&(b?.nativeToolbarUpdateActiveTool?.(v),b?.nativeToolbarUpdateMultiselectActive?.("MULTISELECT"===v))},[b,v,C]);let[j,k]=s.useState("ERASER"),[w,E]=s.useState("PENCIL");s.useEffect(()=>{!C&&v&&(0,tV.S0)(v)&&v!==j&&(E(j),k(v))},[v,j,k,E,C]),s.useEffect(()=>{x&&(x._switch_to_eraser=function(){if(C)return{success:!1,error:tU.lj.READ_ONLY_FILE,currentTool:"NONE"};if("ERASER"!==j)return(0,tV.Jm)("set-tool-eraser"),{success:!0,error:null,currentTool:"ERASER"};{let e=tV.Jh.get(w);return e&&(0,tV.Jm)(e),{success:!0,error:null,currentTool:w}}},x._switch_to_previous_drawing_tool=function(){if(C)return{success:!1,error:tU.lj.READ_ONLY_FILE,currentTool:"NONE"};let e=tV.Jh.get(w);return e&&(0,tV.Jm)(e),{success:!0,error:null,currentTool:w}})},[C,v,w,j,x]),s.useEffect(()=>{m&&(m._observe_user=e=>{u(e)})},[m,u]),m&&(m._update_context_menu_visibility=e=>{et.glU?.updateNativeContextMenuVisibility(e)},m._override_document_visibility_state=tB.R,m._set_allow_draw_with_touch=e=>{et.glU?.setAllowDrawWithTouch(e)},m._unlock_all_objects=()=>{el.Y5.triggerActionInUserEditScope("unlock-all")},m._zoom_reset=()=>{el.Y5.triggerActionInUserEditScope("zoom-reset")},m._zoom_to_fit=()=>{el.Y5.triggerActionInUserEditScope("zoom-to-fit")},m._present=()=>{et.h3O?.startPresenting()},m._find_in_file=()=>{el.Y5.triggerActionInUserEditScope("canvas-search")},m._copy=()=>{el.Y5.triggerActionInUserEditScope("copy")},m._cut=()=>{el.Y5.triggerActionInUserEditScope("cut")},m._paste=()=>{el.Y5.triggerActionInUserEditScope("paste")},m._add_media=e=>{let t=e.map(e=>{let{encoded_data:t,mime_type:n}=e;return new Blob([(0,tj.Vs)(t)],{type:n})}),n=el.Y5.fileArrayToString(t);et.glU?.handleOpenFromJsonString(n,tU.wu.MOBILE_NATIVE_NAVBAR)},m._get_zoom_scale=()=>et.glU?.getViewportZoomScale()??1),x&&(x._open_timer=()=>{eL.zl.set(tD.Qs,{type:"OPEN"}),(0,L.sx)(tF.Fn.OPEN,{source:tF.OO.IPAD_MENU})},x._close_timer=()=>{eL.zl.set(tD.Qs,{type:"CLOSE"})},x._activate_multiselect_mode=()=>{(0,tV.Jm)("set-tool-multiselect")},x._deactivate_multiselect_mode=()=>{(0,tV.Jm)("set-tool-default")}),s.useEffect(()=>{x&&(x._get_screen_reader_enabled=()=>o)},[x,o]),s.useEffect(()=>{x&&(x._update_screen_reader_enabled=e=>{d(e)})},[x,d])}(),(0,eE.a4)(),(0,c.fp)(),function(){let e=(0,a.wA)(),[t,n]=(0,tb.Wz)("nux_seat_selection_show_confirmation",null);(0,s.useEffect)(()=>{t&&("autoApproved"in t&&"seatType"in t&&e(ta.to({type:tC.u,data:{...t}})),n(null))},[t,e,n])}(),(0,P.i)(),s.useEffect(()=>ee.Bc,[]),(0,eS.DW)(),(0,z.Wo)(),s.useEffect(()=>(d===eI.nT.Whiteboard&&f.Ay.isMeetDevice&&"undefined"!=typeof document&&document.addEventListener("visibilitychange",nn),()=>{document.removeEventListener("visibilitychange",nn)}),[d]);let G=(0,N.o)();s.useEffect(()=>{if(G)return n(E.HQ({storeInRecentsKey:G})),d===eI.nT.Whiteboard&&(n(E.gr({storeInRecentsKey:G})),n(E.vZ({storeInRecentsKey:G}))),d!==eI.nT.DevHandoff&&n(E.aF({storeInRecentsKey:G})),window.addEventListener("storage",e,!1),()=>{window.removeEventListener("storage",e,!1)};function e(e){switch(e.key){case eT.vY:case eT.S7:case eT.a7:n(E.HQ({storeInRecentsKey:G}));break;case eT.YN:case eT.xk:n(E.aF({storeInRecentsKey:G}));break;case eT.SO:n(E.gr({storeInRecentsKey:G}));break;case eT.JG:n(E.vZ({storeInRecentsKey:G}))}}},[n,d,G]);let Y=(0,$.TA)();s.useEffect(()=>{Y&&n(k.oQ())},[n,Y]),s.useEffect(()=>{T&&(0,B.K7)()},[T]),function(){let e=(0,eL.Xr)(eB);(0,s.useEffect)(()=>{let t;let n=()=>{clearTimeout(t),t=setTimeout(()=>{e(eR.IDLE_DUE_TO_INACTIVITY)},6e4)},i=()=>{n(),e(eR.ACTIVE_AFTER_IDLE)},s=eO()(i,500,{trailing:!1,leading:!0}),a=()=>{try{"visible"===document.visibilityState?i():e(eR.IDLE_DUE_TO_TAB_SWITCH)}catch(e){throw console.error("Failed to update visibility state",e),e}};return e(eR.ACTIVE_FIRST_TIME),eG.forEach(e=>{document.addEventListener(e,s)}),document.addEventListener("visibilitychange",a),n(),()=>{eG.forEach(e=>{document.removeEventListener(e,s)}),document.removeEventListener("visibilitychange",a),clearTimeout(t)}},[e,6e4])}(),s.useEffect(()=>{let e=e=>{if(O===r.y.MERGING)return e.returnValue="A merge operation is in progress. Closing the window could result in data loss or corruption; please wait until the operation completes.",e.preventDefault(),n(w.sx({name:"Unload During Merge Warning Shown"})),!1},t=()=>{O===r.y.MERGING&&n(w.sx({name:"Page Closed During Merge"}))};return window.addEventListener("beforeunload",e),window.addEventListener("unload",t),()=>{window.removeEventListener("beforeunload",e),window.removeEventListener("unload",t)}},[O,n]);let ea=(0,s.useRef)(!1);s.useEffect(()=>{o?.key&&!ea.current&&(ea.current=!0,D.y.startTimer(o.key,(0,y.lM)()))},[o?.key]);let eo=(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(ns,{file:o,loadedCommentsProvider:t,onCanvasExpired:S,children:e})});return(0,i.jsx)(b.k,{name:"editor",alsoTrack:()=>({editorType:(0,eI.Bu)(d),productType:(0,R.Dc)(d),uiVersion:x.version,fileKey:o?.key||"",slideView:C?eL.zl.get(tK.v2)?"ssv":"grid":void 0}),trackImpressions:!1,children:(0,i.jsx)(F.wG,{children:(0,i.jsxs)(i.Fragment,{children:[!h&&eo,!h&&(0,i.jsx)(ty,{onWorkshopExpired:S}),I&&(0,i.jsx)(na,{file:o})]})})})}function ns({children:e,file:t,loadedCommentsProvider:n,onCanvasExpired:s}){let r=(0,a.d4)(e=>e.userStateLoaded),l=(0,a.d4)(e=>e.mirror.appModel.isInitialized),d=(0,o.R)(e=>e.comments),{anchorPositions:c,boundingBoxPositions:u,DEPRECATED_updateWatchedNodeIds:p,updateWatchedStablePaths:m}=(0,S.Cn)(),h=(0,S.e_)(),f=(0,$.TA)();(0,tv.ox)({file:t,onCanvasExpired:s}),(0,O.G)();let g=function(){let{error:e}=(0,C.Hb)();return!!(e instanceof Error&&e.message.includes("Out of memory"))}(),x=(0,i.jsx)(tX.R,{children:(0,i.jsx)(tq.P,{children:(0,i.jsx)(C.tH,{boundaryKey:"InAppPage",fallback:g?(0,i.jsx)(tt.PG,{}):C.H4.DEFAULT_FULL_PAGE,hasCustomWASMBuild:Y.y4,children:(0,i.jsx)(t8,{children:e})})})});return(0,I.T8)(n?(0,i.jsx)(T.NX,{userId:f,file:t,orgId:t?.parentOrgId??null,activeId:d.activeThread?.id||null,anchorPositions:c,boundingBoxPositions:u,DEPRECATED_updateWatchedNodeIds:p,updateWatchedStablePaths:m,getPageIdsForNodes:h,children:x}):x,eN.e0.EDITOR,null!=t?(0,R.oP)(t):{},null!=t&&r&&l)}function na({file:e}){let t=(0,Q.sZ)();return(0,a.d4)(e=>e.modalShown?.type===eW.M)||!t?null:(0,i.jsx)(e9,{org:t,fileKey:e?.key})}(0,tW.n)(()=>{})},536811:(e,t,n)=>{n.d(t,{sk:()=>r0});var i=n(104076);n(50953);var s=n(716976),a=n(237420),r=n(276800),l=n(266808),o=n(812714),d=n(287211),c=n(795033),u=n(434511),p=n(9109),m=n(449572),h=n(513369),f=n(719894),g=n(140490),x=n(681398),_=n(1188),y=n(192075),v=n(58212),b=n(511295),C=n(598626),j=n(565797),k=n(742549),w=n(23689),E=n(562951),T=n(176203);let S={showNotificationSettings:!1,disableCommentsWhenHandToolEnabled:!1,repositionViewportOnCommentSelection:!1,orphanedBy:"deleted_pages",filterBy:"hidden_sections"},I={showNotificationSettings:!1,disableCommentsWhenHandToolEnabled:!1,repositionViewportOnCommentSelection:!1,orphanedBy:"deleted_pages"};var N=n(422925),A=n(264993),L=n(980852),M=n(983500),O=n(193716),R=n(646767),P=n(227886),D=n(498360),F=n(968169),z=n(643077),B=n(331497),G=n(728977),U=n(38473),V=n(54928),H=n(404343);let K=(0,c.eU)(new Map),W=(0,M.jz)(H.LdP);function q({children:e}){let t=(0,B.ut)(l.Ez5?.cooperFocusView().isInFocusedNodeView,!1),n=(0,z.dh)(),a=s.useContext(G.kw),r=(0,B.ut)(l.Ez5?.cooperFocusView().focusedNodeId,""),o=(0,B.ut)(l.Ez5?.canvasGrid().canvasGridArray,[]),d=(0,U.rY)(o),u=s.useMemo(()=>d.reduce((e,t,n)=>(e.set(t,n),e),new Map),[d]),p=function(){let e=(0,R.wq)(),t=(0,c.Xr)(K),[n,i]=s.useState(new Map),[a,r]=s.useState(new Map);return s.useEffect(()=>{let s=new Set,l=new Map;"loaded"===e.status&&e.data.forEach(e=>{let t=e.canvasPosition,n=a.get(e.id),i={commentCount:e.comments.filter(e=>!e.resolved_at).length,threadIds:[],hasUnread:e.comments.some(e=>!e.resolved_at&&e.isUnread)};l.set(e.id,i),t&&(!n||t.x!==n.x&&t.y!==n.y)&&s.add(e)}),s.forEach(e=>{let t=e.comments[0]?.client_meta?.node_id;if(!t||!e.canvasPosition)return;let n=(0,L.getActiveTSSceneGraph)().get(t),s=n?.containingCooperFrameId()??A.AD;s!==A.AD&&e.canvasPosition&&(r(t=>new Map(t.set(e.id,e.canvasPosition))),i(t=>new Map(t.set(e.id,s))))});let o=new Map;n.forEach((e,t)=>{let n=l.get(t);if(!n)return;let{commentCount:i,hasUnread:s}=n,a=o.get(e),r={commentCount:(a?.commentCount??0)+i,threadIds:[...a?.threadIds??[],t],hasUnread:a?.hasUnread||s};o.set(e,r)}),t(o)},[t,a,n,e.data,e.status]),n}(),m=(0,F.qw)(),h=s.useCallback(e=>{let t=p.get(e.id);if(t)return t;let n=e.comments[0]?.client_meta?.node_id;if(!n)return A.AD;let i=(0,L.getActiveTSSceneGraph)().get(n);return i?.containingCooperFrameId()??A.AD},[p]),f=(0,V.R)(),g=s.useMemo(()=>{let e=[D.mW.RESOLVED,D.mW.YOURS];return t&&e.push(D.mW.CURRENT_ASSET),e},[t]),x=s.useMemo(()=>[D.qN.CREATION_DATE,D.qN.UNREAD,D.qN.ASSET],[]),_=(0,O.J)(),v=s.useCallback(e=>{let t=h(e),n=u.get(t);return void 0!==n&&t!==A.AD?(0,y.t)("comments.asset_number",{orderNum:n+1}):e.pageName},[h,u]),b=s.useMemo(()=>!!t,[t]),C=s.useCallback(e=>{if(!t)return()=>{};let n=h(e);return n!==A.AD?()=>{_(n)}:()=>{l.Ez5?.cooperFocusView().exitFocusedNodeView()}},[h,_,t]),j=s.useCallback(e=>{if(!t||!r)return!1;let i=e&&n?a.getCommentDestinationForCanvasPosition(e,n)?.nodeId:void 0;if(!i)return!1;let s=(0,L.getActiveTSSceneGraph)().get(i),l=s?s.containingCooperFrameId():A.AD;return l===A.AD||l!==r},[r,n,a,t]),k=s.useMemo(()=>({[D.qN.ASSET]:(e,t)=>{let n=1/0,i=h(e),s=h(t),a=u.get(i)??n,r=u.get(s)??n;return a!==r?a-r:Date.parse(t.comments[0].created_at)-Date.parse(e.comments[0].created_at)}}),[h,u]),w=s.useMemo(()=>{let e,t=0;return e=0+W,t+=m,{...P.Ey,maxHeightDelta:-e,minBottomMarginDelta:e,minRightMarginDelta:t}},[m,!0]),E=s.useMemo(()=>({paddingRight:m}),[m,!0]),T=s.useMemo(()=>({showNotificationSettings:!0,disableCommentsWhenHandToolEnabled:!0,repositionViewportOnCommentSelection:!0,disableZoomViewportOnCommentSelection:b,orphanedBy:"deleted_anchors",filterBy:t?"non_focused_node_anchors":"deleted_anchors",sidebarFilters:g,sidebarSorts:x,sidebarModesDisabled:!0,dockPositionAdjustment:f,getParentName:v,getOnCommentSelect:C,sortComparatorOverrides:k,commentPositionPaddingAdjustment:E,draggableModalBoundsAdjustment:w,isCommentingDisabledAtPosition:j,commentDisabledPositionBellMessage:(0,y.t)("comments.comments_can_only_be_placed_on_buzz_assets")}),[b,g,x,f,v,C,k,E,w,t,j]);return(0,i.jsx)(N.a.Provider,{value:T,children:e})}var X=n(375627),Y=n(650069),Z=n(579436),J=n(213233);function Q({children:e}){let t=(0,a.d4)(e=>e.universalInsertModal?.pinned===Z.t.PINNED_AND_DOCKED_LEFT),n=(0,Y.a)(),{isPropertiesPanelCollapsed:r}=(0,X.iT)(),l=(0,F.qw)();l=r?0:l;let o=s.useMemo(()=>[D.mW.RESOLVED,D.mW.YOURS,D.mW.CURRENT_PAGE],[]),d=s.useMemo(()=>[D.qN.CREATION_DATE,D.qN.UNREAD],[]),{xDelta:c,yDelta:u}=(0,V.R)(),p=s.useMemo(()=>{let e=(0,M.hG)(H.PXB),n=c;return t&&(n+=J.AN+e),{xDelta:n,yDelta:u}},[t,u,c]),m=s.useMemo(()=>{let e=(0,M.jz)(H.LdP),t=0,i=0;return n&&(t+=e,i+=l),{...P.Ey,minBottomMarginDelta:t,minRightMarginDelta:i}},[l,n]),h=s.useMemo(()=>{if(n)return{paddingRight:l}},[l,n]),f=s.useMemo(()=>({...V.y,sidebarFilters:o,sidebarSorts:d,dockPositionAdjustment:p,draggableModalBoundsAdjustment:m,commentPositionPaddingAdjustment:h}),[o,d,h,p,m]);return(0,i.jsx)(N.a.Provider,{value:f,children:e})}var $=n(681958);let ee={isDevHandoff:!0};function et({children:e}){let t=(0,Y.a)(),n=(0,k.hA)(),r=(0,a.d4)(e=>e.mirror.appModel.currentPage),l=s.useContext(G.kw),{isPropertiesPanelCollapsed:o}=(0,X.iT)(),d=(0,F.UX)();d=o?0:d;let c=(0,M.jz)(H.ZB$),u=s.useMemo(()=>[D.mW.RESOLVED,D.mW.YOURS,D.mW.CURRENT_PAGE],[]),p=s.useMemo(()=>[D.qN.CREATION_DATE,D.qN.UNREAD],[]),m=(0,V.R)(),h=s.useMemo(()=>{let e=0,n=0;return t&&(e+=c,n+=d),{...P.Ey,minBottomMarginDelta:e,minRightMarginDelta:n}},[c,d,t]),f=s.useMemo(()=>{if(t)return{paddingRight:d}},[d,t]),g=s.useCallback(e=>{if(!n)return!1;let t=e&&r?l.getCommentDestinationForCanvasPosition(e,r)?.nodeId:void 0;return!t||!(0,$.rV)((0,L.getActiveTSSceneGraph)(),n,t)},[r,l,n]),x=s.useMemo(()=>{let e={...V.y,sidebarFilters:u,sidebarSorts:p,dockPositionAdjustment:m,draggableModalBoundsAdjustment:h,commentPositionPaddingAdjustment:f,linkGenerationParams:ee,isCommentingDisabledAtPosition:g,commentDisabledPositionBellMessage:(0,y.t)("dev_handoff.workflows.focus_view.comments")};return n&&(e.filterBy="non_dev_mode_focus"),e},[u,p,m,h,f,g,n]);return(0,i.jsx)(N.a.Provider,{value:x,children:e})}var en=n(770522),ei=n(695692),es=n(921996),ea=n(226762);let er={isFigJam:!0};function el({children:e}){let t=(0,es.Vi)(),n=s.useMemo(()=>[D.mW.RESOLVED,D.mW.YOURS],[]),a=s.useMemo(()=>[D.qN.CREATION_DATE,D.qN.UNREAD],[]),r=(0,F.dP)(),l=(0,V.R)({leftSidePanelWidth:r}),o=s.useMemo(()=>208,[]),d=s.useMemo(()=>{let e=new Map;return e.set(ei.b.DOCK_STYLE,"dock--dock--A6jIs"),e.set(ei.b.ATTACHMENT_MODAL_BACKGROUND_COLOR,(0,en.Bx)("light")),e},[]),c=s.useMemo(()=>{let e;let n=(0,M.jz)(H.IuL),i=(0,M.jz)(H.rY4),s=0,a=0;return e=0-n,s+=n,t&&(a+=i),{...P.Ey,maxHeightDelta:e,minBottomMarginDelta:s,minRightMarginDelta:a}},[t]),u=s.useCallback(()=>{(0,ea.W)("left",()=>{})},[]),p=s.useMemo(()=>({showNotificationSettings:!0,disableCommentsWhenHandToolEnabled:!0,repositionViewportOnCommentSelection:!0,orphanedBy:"deleted_pages",filterBy:"hidden_sections",sidebarFilters:n,sidebarSorts:a,dockPositionAdjustment:l,draggableModalBoundsAdjustment:c,onDockSideEffect:u,sidebarBottomPaddingAdjustment:o,styleOverrideMap:d,linkGenerationParams:er}),[l,c,u,o,n,a,d]);return(0,i.jsx)(N.a.Provider,{value:p,children:e})}var eo=n(361170),ed=n(354515);function ec({children:e}){let t=(0,c.md)(ed.Wg),n=s.useMemo(()=>({...P.Ey,minTopMarginDelta:50,minLeftMarginDelta:-50,minRightMarginDelta:t}),[t]),a=s.useCallback(({viewportInfo:e})=>new eo.Mi(e.x+e.width,e.y),[]),r=s.useMemo(()=>[D.mW.RESOLVED,D.mW.YOURS],[]),l=s.useMemo(()=>({draggableModalBoundsAdjustment:n,showNotificationSettings:!0,disableCommentsWhenHandToolEnabled:!1,repositionViewportOnCommentSelection:!1,orphanedBy:"deleted_anchors",bringDetailsContainerToFront:!0,getCustomActiveThreadPosition:a,disableCommentPinsToggle:!0,sidebarFilters:r}),[a,n,r]);return(0,i.jsx)(N.a.Provider,{value:l,children:e})}var eu=n(130627);function ep({children:e}){let t=(0,a.d4)(e=>e.selectedView.editorType),n=s.useMemo(()=>{if(window.FigmaMobile)return t===T.nT.Whiteboard?function({children:e}){return(0,i.jsx)(N.a.Provider,{value:S,children:e})}:function({children:e}){return(0,i.jsx)(N.a.Provider,{value:I,children:e})};switch(t){case T.nT.Design:return Q;case T.nT.Whiteboard:return el;case T.nT.Slides:return eu.Yz;case T.nT.DevHandoff:return et;case T.nT.Cooper:return q;case T.nT.Figmake:return ec;default:return function({children:e}){return(0,i.jsx)(N.a.Provider,{value:V.y,children:e})}}},[t]);return(0,i.jsx)(n,{children:e})}var em=n(170627),eh=n(883765),ef=n(641518),eg=n(188154),ex=n(354114),e_=n(893178),ey=n(175100),ev=n(652539),eb=n(278491),eC=n(553065),ej=n(252677),ek=n(790621),ew=n(813141),eE=n(803155),eT=n(435789);function eS(e){let t=(0,ew.G)(),n=(0,ek.JI)();if(t||!n)return null;let s=(0,eC.E7)(n?.url)??"",a=null;if(""!==s){let{url:t,nodeIdInThisFile:n,versionId:i}=(0,ej.ih)(s,e.store);a=n&&!i?{type:"internal",id:n}:{type:"url",url:t}}let{x:r,y:o}=n,d=ex.Y5.getViewportInfo(),c=Math.min(Math.max(r,100),d.width-100);return(0,i.jsx)("div",{className:"sites_hyperlink_editor--container--67YMj",style:{left:Math.round(c+d.x),top:Math.round(o+d.y)},children:(0,i.jsxs)("div",{className:`sites_hyperlink_editor--popup--3kD7E _overlayBase--_overlayBase--Rkj8l ${eb.Dm}`,children:[a&&(0,i.jsx)(ev.B,{svg:eT.A,className:"sites_hyperlink_editor--breakIcon--LW2w0",onMouseDown:t=>{e.onClickTrash(t)},recordingKey:ef.Pt(e.recordingKey,"breakHyperlink")}),(0,i.jsx)(eE.MO,{id:"inline_editor",recordingKey:e.recordingKey,link:a,onLinkChange:t=>{let n;t?.type==="url"?n=t.url:t?.type==="internal"&&(n=ex.Y5.generateLinkToNode(t.id)),e.setUrl(n??""),l.glU?.hideHyperlinkEditor()},isHyperlinkEditor:!0})]})})}function eI(e){return e.startsWith("mailto:")?-1!==e.indexOf("?")?e:e.substring(7):e}function eN(e){let t=(0,a.wA)(),n=(0,a.Pj)().getState(),[o,d]=s.useState(eI(e.hyperlinkLocation.url)),c=s.useRef(!0),u=s.useRef(o);s.useEffect(()=>{u.current=o},[o]);let p=s.useCallback(t=>em.l7.user("set-hyperlink",()=>!!l.glU&&l.glU.setHyperlink(eI(t),e.hyperlinkLocation.nodeID,e.hyperlinkLocation.rangeStart,e.hyperlinkLocation.rangeEnd,null)),[e.hyperlinkLocation.nodeID,e.hyperlinkLocation.rangeEnd,e.hyperlinkLocation.rangeStart]);s.useEffect(()=>()=>{c.current&&(p(u.current),(0,eh.sx)("Hyperlink Editor Updated Link On Dismiss"))},[p]);let m=ef.AF(e.recordingKey,"change",e=>{d(e.target.value.trim())}),h=ef.v_(e.recordingKey,"keydown",n=>{if((0,e_.jr)(n,e_.W0.NO))return ef.aH;if("Escape"===n.key)n.preventDefault(),c.current=!1,(0,eh.sx)("Hyperlink Editor Cancelled On Escape"),l.glU.hideHyperlinkEditor();else if("Enter"===n.key){if(n.preventDefault(),c.current=!1,p(o)){if(""===o)(0,eh.sx)("Hyperlink Editor Deleted Link"),t(v.F.enqueue({message:(0,y.t)("hyperlink.link_deleted")}));else{let t={};if(o&&!o.startsWith("mailto:"))try{let n=new URL((0,eg.xT)(o)).hostname,i=e.editorType;t={domain:n,editorType:i}}catch(e){}(0,eh.sx)("Hyperlink Editor Updated Link On Enter",t)}}else(0,eh.sx)("Hyperlink Editor Invalid Link"),t(v.F.enqueue({message:(0,y.t)("hyperlink.invalid_link_plain")}));l.glU.hideHyperlinkEditor()}}),f=ef.rf(e.recordingKey,"click",n=>{c.current=!1,e.hyperlinkLocation&&em.l7.user("clear-hyperlink",()=>l.glU.setHyperlink("",e.hyperlinkLocation.nodeID,e.hyperlinkLocation.rangeStart,e.hyperlinkLocation.rangeEnd,null)),t(v.F.enqueue({message:(0,y.t)("hyperlink.link_deleted")})),l.glU.hideHyperlinkEditor(),n.stopPropagation()}),g=e.hyperlinkLocation.x,x=e.hyperlinkLocation.y,_=ex.Y5.getViewportInfo(),b=Math.round(Math.min(Math.max(g,100),_.width-100)+_.x),C=Math.round(x+_.y);return e.editorType===T.nT.Sites||e.editorType===T.nT.Figmake?(0,i.jsx)(eS,{recordingKey:"hyperlinkEditor",setUrl:d,onClickTrash:f,store:n}):(0,i.jsx)(ey.c,{url:o,location:new eo.Mi(b,C),onInputChange:m,onInputKeyDown:h,onBlur:r.lQ,onClickTrash:f})}var eA=n(246144),eL=n(261970),eM=n(45550),eO=n(636208),eR=n(413102);class eP{static getCanvasColorSpace(e={}){let t=(0,eR.dX)("fullscreen"),n=t?.getContext(eL.ap()?"webgl2":"webgl")?.drawingBufferColorSpace;if("srgb"===n);else if("display-p3"===n)return e.returnString?l.RYP[l.RYP.DISPLAY_P3]:l.RYP.DISPLAY_P3;return e.returnString?l.RYP[l.RYP.SRGB]:l.RYP.SRGB}static setCanvasColorSpace(e){let t=(0,eR.dX)("fullscreen"),n=t?.getContext(eL.ap()?"webgl2":"webgl");"drawingBufferColorSpace"in n&&(n.drawingBufferColorSpace=e)}static getDocumentColorProfile(e={}){if(void 0===l.H4l)throw Error("ColorManagementStateJs is not defined");return e.returnString?l.ywP[l.H4l.documentColorProfile().getCopy()]:l.H4l.documentColorProfile().getCopy()}static async debugImagesFromSelection(){async function e(e){for(let t of["image/png","image/jpeg","image/heic"])try{return await eM.EC.decodeAsync(e,t,0,0,!0)}catch(e){}return null}let t=(0,eO.D)();for(let n of t.currentPage.selection){for(let i=0;i<n.fills.length;i++){let s=n.fills[i];if("IMAGE"===s.type){let a=t.getImageByHash(s.imageHash);if(!a)continue;let r=await a.getBytesAsync(),o=await e(r);if(o){let e={id:n.id,type:"fill",index:i,imageHash:s.imageHash,colorProfile:l.RYP[o.colorProfile],bytes:r};(0,eA.ED)("ColorManagementDebug","images",e,{logToConsole:l.NUh.ALWAYS})}}}for(let i=0;i<n.strokes.length;i++){let s=n.strokes[i];if("IMAGE"===s.type){let a=t.getImageByHash(s.imageHash);if(!a)continue;let r=await a.getBytesAsync(),o=await e(r);if(o){let e={id:n.id,type:"stroke",index:i,imageHash:s.imageHash,colorProfile:l.RYP[o.colorProfile],bytes:r};(0,eA.ED)("ColorManagementDebug","images",e,{logToConsole:l.NUh.ALWAYS})}}}}}}function eD(){return s.useEffect(()=>((0,o.kc)().ee_color_management_debug&&(window.colorManagementDebug=eP),()=>{"colorManagementDebug"in window&&delete window.colorManagementDebug}),[]),null}var eF=n(962212),ez=n(813343),eB=n(592726),eG=n(944350),eU=n(59849),eV=n(530299),eH=n(904017),eK=n(835307),eW=n(225125),eq=n(113985),eX=n(72138),eY=n(220082),eZ=n(946847),eJ=n(233420);function eQ(){let{Sprig:e}=(0,eW.A)(),t=(0,c.md)(eJ.Lk),n=(0,eY.I)(),{loaded:i,query:a,sessionId:r}=function(){let[e,t]=(0,s.useState)(!1),{currentSearch:n}=(0,c.md)(eX.WP),i=(0,c.md)(eq.hO.currentSearchAtom),a=(0,c.md)(eJ.dd);(0,s.useEffect)(()=>{let e=n?.result.status==="loaded",s=i?.result.status==="loaded";e&&s&&t(!0)},[n?.result.status,i?.result.status]);let r="";return n?.input.type==="input-text"&&(r=n.input.query),{loaded:e,query:r,sessionId:a}}(),l=(0,s.useRef)(null),d=(0,s.useRef)(!1),u=(0,s.useCallback)(()=>{l.current&&(clearTimeout(l.current),l.current=null)},[]),p=(0,s.useCallback)(()=>{e("track","quick_actions_assets_tab_search",{query:a,sessionId:r}),d.current=!0},[e,a,r]);return(0,s.useEffect)(()=>{if((0,o.kc)().assets_tab_sprig_tracking&&!d.current)return t===eZ.Jc.ASSETS&&i&&(n?l.current=setTimeout(()=>{p()},3e4):(p(),u())),u},[t,u,i,n,p]),null}var e$=n(564941),e0=n(677092),e1=n(918830);function e2(){let e=(0,e0.X)();return(0,i.jsx)(e1.Y,{prioritizedBanners:e,location:"editor"})}var e3=n(132539);let e5=s.memo(function(){return(0,o.kc)().internal_only_debug_tools?(0,i.jsx)(e6,{}):null});s.memo(function(){return(0,o.kc)().internal_only_debug_tools?(0,i.jsx)(e7,{}):null});let e4={loading:()=>null,error:function(){return s.useEffect(()=>{console.error("Failed to load FigmaScope")},[]),null}},e6=e3.A.createLazyComponent(()=>Promise.all([n.e(3379),n.e(1211),n.e(895)]).then(n.bind(n,635283)).then(e=>e.EmbeddedFigmaScopeViewForEditorEnabled),{...e4,componentName:"EmbeddedFigmaScopeViewForEditorEnabled"}),e7=e3.A.createLazyComponent(()=>Promise.all([n.e(3379),n.e(1211),n.e(895)]).then(n.bind(n,635283)).then(e=>e.EmbeddedFigmaScopeViewForViewerEnabled),{...e4,componentName:"EmbeddedFigmaScopeViewForViewerEnabled"});var e8=n(919469),e9=n(460608),te=n(511570),tt=n.n(te),tn=n(124125),ti=n(219971);function ts(){let e=Array.from((0,B.ut)(l.Ez5?.uiState().autoLayoutShortcutHints,new Map).values()),t=(0,c.md)(eJ.Bu),n=ti.y.isApple(),s=e=>{switch(e){case l.oeV.IGNORE_AUTOLAYOUT:return{displayName:(0,y.t)("fullscreen.auto_layout_hints.ignore_auto_layout"),shortcutText:n?"\u2303 Ctrl":"S"};case l.oeV.PREVENT_NESTING:return{displayName:(0,y.t)("fullscreen.auto_layout_hints.prevent_nesting"),shortcutText:(0,y.t)("fullscreen.auto_layout_hints.space_key")};case l.oeV.FORCE_INSERTION:return{displayName:(0,y.t)("fullscreen.auto_layout_hints.force_insertion"),shortcutText:n?"\u2318":"Ctrl"}}},a=e=>e.isValid?e.isActive?"auto_layout_hints--activeShortcutWithTextContainer--dkT1S auto_layout_hints--shortcutWithTextContainer--uEquz":"auto_layout_hints--shortcutWithTextContainer--uEquz":"auto_layout_hints--invalidShortcutWithTextContainer--gvHLT auto_layout_hints--shortcutWithTextContainer--uEquz";return e?(0,i.jsx)("div",{className:tt()("auto_layout_hints--root--MJKU2",{"auto_layout_hints--rootAdjustedForQA--YZlbt":t}),children:(0,i.jsx)("div",{className:"auto_layout_hints--hintsBarContainer--3DyGD",children:e.sort((e,t)=>e.shortcut-t.shortcut).map((e,t)=>{let n=s(e.shortcut);return(0,i.jsxs)("div",{className:a(e),children:[(0,i.jsx)("div",{className:e.isActive&&e.isValid?"auto_layout_hints--activeShortcutContainer--bj0CD auto_layout_hints--shortcutContainer--mIecl":"auto_layout_hints--shortcutContainer--mIecl",children:n.shortcutText.length>0?(0,i.jsx)("div",{className:"auto_layout_hints--smallShortcutText--lHZ8Q",children:n.shortcutText}):(0,i.jsx)(tn.S,{shortcut:n.shortcutText})}),(0,i.jsx)("p",{children:n.displayName})]},t)})})}):null}var ta=n(826220),tr=n(268389),tl=n(452981),to=n(419541),td=n(684742),tc=n(293422),tu=n(989941),tp=n(264830),tm=n(849757),th=n(236631),tf=n(967782),tg=n(663355),tx=n(722039),t_=n(850701),ty=n(435049);let tv=0;class tb{constructor(){this.work=()=>{let e=this.jobs.shift();if(e)try{let t=e.callback();e.resolve(t)}catch(t){e.reject(t)}},this.jobs=[]}isDone(){return 0===this.numJobs()}numJobs(){return this.jobs.length}cancelJobs(e){this.jobs=this.jobs.filter(t=>-1===e.indexOf(t.jobId))}queueJob(e){let t,n;let i=new Promise((e,i)=>{t=e,n=i}),s=++tv;return this.jobs.push({jobId:s,resolve:t,reject:n,callback:e}),{promise:i,jobId:s}}}let tC={requestAnimationFrame:e=>requestAnimationFrame(e),computeElapsedTime:e=>{let t=Date.now();return e(),Date.now()-t}},tj=new class{constructor(e={}){this.tick=()=>{if(!this.isTickScheduled)throw Error("wat, how did tick() get called if we're not ticking?");let e=0,t=0;for(;t<this.msPerTick&&!this.queuedWorker.isDone();)t+=this.utils.computeElapsedTime(this.queuedWorker.work),e++;this.debug&&console.log(`did ${e} jobs in ${t} ms`),this.isTickScheduled=!1,this.queuedWorker.isDone()||this.requestTick()},this.requestTick=()=>{this.isTickScheduled||(this.isTickScheduled=!0,this.utils.requestAnimationFrame(this.tick))},this.numJobs=()=>this.queuedWorker.numJobs(),this.queueJob=e=>{let{promise:t,jobId:n}=this.queuedWorker.queueJob(e);return this.requestTick(),{promise:t,jobId:n}},this.queuedWorker=new tb,this.isTickScheduled=!1,this.msPerTick=e.msPerTick||6,this.utils=e.utils||tC,this.debug=!0===e.debug}cancelJobs(e){this.queuedWorker.cancelJobs(e)}}({debug:!1});var tk=n(685464),tw=n(239223),tE=n(925843),tT=n(945858),tS=n(736216),tI=n(260495),tN=n(156774),tA=n(211862),tL=n(643898),tM=n(706964),tO=n(349311),tR=n(141330),tP=n(290407),tD=n(5885),tF=n(523625),tz=n(714136),tB=n(578420),tG=n(643330);let tU="export_picker--header--Wz6np",tV="export_picker--labelWithoutCheckbox--3zcNc export_picker--label--43URE";var tH=n(443105);let tK=(0,M.hG)(H.zK5);function tW(){let e=(0,tA.q5)(),t=(0,a.d4)(e=>e.exportableItems),n=(0,a.d4)(e=>e.dropdownShown),r=!!e&&(0,tL.Pe)(e),l=(0,tp.Av)(),d=(0,a.d4)(e=>e.saveAsState),c=(0,a.d4)(e=>e.mirror.appModel.currentPage),u=(0,a.wA)(),p=()=>{u(t_.XE())},m=new eo.Mi(window.innerWidth-tK,l+12);s.useEffect(()=>{u((0,tE.HR)())},[u]);let h=(0,i.jsx)("div",{className:"export_picker--exportModalContainer---vmI7",children:(0,i.jsx)(tY,{exports:t,isCopyExportRestricted:r,width:tK,dispatch:u,dropdownShown:n,saveAsState:d,currentPage:c})});return(0,o.kc)().ce_tv_fpl_export_picker?(0,i.jsx)(ta.bL,{onClose:p,draggable:"header",defaultPosition:m,children:(0,i.jsxs)(tr.vo,{children:[(0,i.jsx)(tr.Y9,{children:(0,i.jsx)(tr.hE,{children:(0,y.t)("fullscreen.properties_panel.export")})}),(0,i.jsx)(tr.nB,{padding:0,children:h})]})}):(0,i.jsx)(tG.Ao,{title:(0,y.t)("fullscreen.properties_panel.export"),headerSize:"small",initialPosition:m,onClose:p,dragHeaderOnly:!0,headerClassName:"export_picker--modalHeader--f3fKx",children:h})}let tq=new ty.mz;function tX({nodeID:e,title:t,filename:n,exportSetting:a,colorProfile:r=l.RYP.SRGB,isBeingRenamed:o,...d}){let[c,u]=(0,s.useState)({size:"",warning:"",warningTooltip:""}),[p,m]=(0,s.useState)(""),h=(0,tS.A0)(l.uQ6.EXPORT_PICKER);(0,s.useEffect)(()=>{let i={guid:e,title:t,filename:n,exportSetting:a},s=l.glU.getExportWarningAndSize(i);if(s){let{size:e,warning:t,warningTooltip:n}=s;u({size:e,warning:t,warningTooltip:n})}else console.error("Failed to export",i);let o=!!a.contentsOnly,d=(0,eC.gl)(a)?r:(0,tk.A)([a],r),{jobId:c}=tj.queueJob(()=>{let t=tN._G(new eo.Mi(32,32),e,o),n="";t&&t.pixels&&t.pixelSize&&t.displaySize&&(n=tN.Pv(t.pixels,t.pixelSize,d)),m(n)});return()=>tj.cancelJobs([c])},[r,a,n,e,t]);let{onToggleChecked:f,isChecked:g,isDisabled:x}=d,{imageType:_}=a,v=d.warning??c.warning,b=d.warningTooltip??c.warningTooltip,C=(0,s.useId)(),j=`${C}-input`,k=`${C}-export-name`,w=`${C}-desc`,E=`${C}-title`;return(0,i.jsxs)("div",{className:"export_picker--row--lVRtp",children:[(0,i.jsx)(tl.h,{htmlFor:j,children:(0,y.t)("fullscreen.export.select_for_export")}),(0,i.jsx)(to.W,{id:j,checked:g,onChange:f,disabled:x,"aria-describedby":`${k} ${w}`}),(0,i.jsx)(td.E,{className:"export_picker--thumbContainer--xwXyl",onClick:t=>{t.preventDefault(),l.glU?.panToNode(e,!1)},htmlAttributes:{"data-tooltip-type":tO.Ib.TEXT,"data-tooltip":n},"aria-label":(0,y.t)("fullscreen.export.view_selection_on_canvas"),"aria-describedby":E,children:!!p&&(0,i.jsx)("img",{src:p,className:"export_picker--thumb--pKbcx",alt:""})}),(0,i.jsx)("div",{id:k,className:"export_picker--label--43URE",children:(0,i.jsxs)("div",{className:"export_picker--nameInfo--03piR export_picker--twoRows--PAHTA",children:[(0,i.jsx)("div",{className:tt()("export_picker--name--HuhHU ellipsis--ellipsis--Tjyfa",{"export_picker--nameRenaming--jTYjh":h&&o}),id:E,children:t}),v&&(0,i.jsxs)("div",{className:"export_picker--warningRow--PMwtO",children:[(0,i.jsx)(ev.B,{className:"export_picker--warningIcon--fgSRz",svg:tH.A,"data-tooltip-type":tO.Ib.TEXT,"data-tooltip":b}),(0,i.jsx)("span",{className:"export_picker--warning--qpraF ellipsis--ellipsis--Tjyfa",children:v})]})]})}),(0,i.jsxs)("div",{className:"export_picker--settingsInfo--H9DJ1 export_picker--twoRows--PAHTA",id:w,children:[(0,i.jsxs)("div",{children:[tq.format(a.constraint)," ",_]}),(0,i.jsx)("div",{children:c.size})]})]})}class tY extends s.PureComponent{constructor(){super(...arguments),this.state={renamingLayersRunning:!1,downloadStarted:!1,exportingStarted:!1,exportingProgress:0,exportingTotal:0,exportingJobIds:[]},this.onCancel=()=>{this.props.dispatch(t_.XE())},this.autoRenameFrameAndFile=async e=>{if(0===e.length)return;this.setState({renamingLayersRunning:!0}),this.props.exports.items.forEach(t=>{e.includes(t.nodeID)&&(t.isBeingRenamed=!0)}),c.zl.set(tz.zF,(0,tT.Tr)(l.uQ6.EXPORT_PICKER)),(0,tP.B3)(tR.JT.AUTO_RENAME_LAYERS),await (0,tP.Ag)(tR.JT.AUTO_RENAME_LAYERS,tT.Ay,{source:l.uQ6.EXPORT_PICKER,overwriteNames:!1,customNodeSelection:e,ignoreDescendants:!0});let t=(0,tP.pP)(tR.JT.AUTO_RENAME_LAYERS).state;t===tP.qy.DONE?this.props.exports.items.forEach(t=>{if(!e.includes(t.nodeID))return;let n=L.getActiveTSSceneGraph().get(t.nodeID)?.name;t.filename=t.filename.replace(t.title,n||t.title),t.title=n||t.title,t.isBeingRenamed=!1}):(t===tP.qy.ERROR||t===tP.qy.CANCELLED)&&this.props.exports.items.forEach(e=>{e.isBeingRenamed=!1}),this.setState({renamingLayersRunning:!1})},this.cancelAutoRename=()=>{let{aiTrackingContext:e}=(0,tP.pP)(tR.JT.AUTO_RENAME_LAYERS),t={...e,...(0,tD.LU)({shortcut:null,target:null}),interaction:tF.Ek.STOP};(0,tP.cT)(tR.JT.AUTO_RENAME_LAYERS),(0,tD.nP)(t)},this.onExport=e=>{if(this.props.isCopyExportRestricted||((0,eh.sx)("Export Picker Exported"),this.state.downloadStarted||this.state.exportingStarted||this.isExporting()||0===e.length))return;let t=[this.props.currentPage];tI.xY.includeOutsideContents(e.map(e=>e.exportSetting))||(t=e.map(e=>e.nodeID)),this.setState({downloadStarted:!0}),(0,tM.Dc)(tM.hV.Export,this.props.saveAsState,this.props.dispatch,()=>{this.setState({exportingStarted:!0,downloadStarted:!1}),this.exportItemsWithFullscreen(e)},t,"export-picker")},this.exportItemsWithFullscreen=e=>{let t=e.map(e=>({guid:e.nodeID,title:e.title,filename:e.filename,exportSetting:e.exportSetting})),n=0;l.glU.clearExportedItems();let i=t.map(e=>tj.queueJob(()=>l.glU.exportItem(e))),s=i.map(e=>e.promise);s.forEach(e=>e.then(()=>this.setState({exportingProgress:++n}))),this.setState({exportingProgress:0,exportingTotal:t.length,exportingJobIds:i.map(e=>e.jobId)}),Promise.all(s).then(()=>{this.setState({exportingJobIds:[]}),l.glU.saveExportedItems(),this.props.dispatch(t_.XE()),this.props.dispatch(tg.rg()),(0,tf.YQ)({id:"export_completed",properties:{from:"export_picker"}})})},this.setAllChecked=e=>{this.props.exports.items.forEach((t,n)=>{this.props.dispatch(tx.G({itemID:t.itemID,checked:e}))})},this.setChecked=(e,t)=>{this.props.dispatch(tx.G({itemID:e.itemID,checked:t}))},this.isChecked=e=>this.props.exports.checked[e.itemID],this.renderRenameLayersButton=e=>{let{detectedUnnamedLayers:t,exceedingLayerLimit:n,renamableNodeGuids:s}=(0,tS.Mc)(e.map(e=>e.nodeID),!0),a=this.state.renamingLayersRunning?this.cancelAutoRename:()=>this.autoRenameFrameAndFile(s),r=!(t&&!n)||this.state.downloadStarted||this.state.exportingStarted;return(0,i.jsx)(tc.Pw,{variant:"secondary",onClick:a,disabled:r,children:this.state.renamingLayersRunning?(0,y.tx)("fullscreen.export.cancel"):(0,i.jsxs)("div",{className:th.s.flex.flexRow.justifyCenter.gap8.$,children:[(0,y.tx)("fullscreen.context_menu.auto_rename_layers"),(0,i.jsx)(tB.yi,{helpUrlVariant:tR.JT.AUTO_RENAME_LAYERS})]})})}}isExporting(){return this.state.exportingJobIds&&this.state.exportingJobIds.length>0}componentWillUnmount(){this.isExporting()&&tj.cancelJobs(this.state.exportingJobIds)}getItemsToExport(){return this.props.exports.items?this.props.exports.items.filter(e=>this.isChecked(e)):[]}renderHeader(){if(this.isExporting())return(0,i.jsxs)("div",{className:tU,children:[(0,i.jsx)("label",{className:tV,children:(0,y.tx)("fullscreen.export.preparing_exporting_progress_of_exporting_total",{exportingProgress:this.state.exportingProgress,exportingTotal:this.state.exportingTotal})}),(0,i.jsx)(tc.$n,{variant:"secondary",onClick:this.onCancel,children:(0,y.tx)("fullscreen.export.cancel")})]});if(this.state.exportingStarted||!this.props.saveAsState.startTime&&this.state.downloadStarted)return(0,i.jsx)("div",{className:tU,children:(0,i.jsx)("label",{className:tV,children:(0,y.tx)("fullscreen.export.exporting")})});if(this.state.downloadStarted){if(!(this.props.saveAsState.totalImagesToDownload>0))return(0,i.jsx)("div",{className:tU,children:(0,i.jsx)("label",{className:tV,children:(0,y.tx)("fullscreen.export.downloading")})});{let e=Math.min(this.props.saveAsState.totalImagesToDownload,this.props.saveAsState.totalImagesToDownload-this.props.saveAsState.remainingImagesToDownload);return(0,i.jsxs)("div",{className:tU,children:[(0,i.jsx)("label",{className:tV,children:(0,y.tx)("fullscreen.export.downloading_progress",{downloadingProgress:e,downloadingTotal:this.props.saveAsState.totalImagesToDownload})}),(0,i.jsx)(tc.$n,{variant:"secondary",onClick:this.onCancel,children:(0,y.tx)("fullscreen.export.cancel")})]})}}{let e=this.props.exports.items||[],t=e.filter(this.isChecked).length,n=e.length,s=n===t;return(0,i.jsxs)("div",{className:tU,children:[(0,i.jsx)(tu.S,{checked:s,mixed:!s&&t>0,onChange:()=>this.setAllChecked(!s),label:(0,i.jsx)(tl.J,{children:(0,y.tx)("fullscreen.export.num_selected_of_total_selected",{numSelected:t,total:n})})}),(0,i.jsx)("span",{className:"export_picker--flexRight--PFS7g",children:(0,i.jsx)(tc.$n,{variant:"secondary",disabled:!t,onClick:()=>this.onExport(this.getItemsToExport()),autoFocus:!0,children:(0,y.tx)("fullscreen.export.export")})})]})}}render(){let e=this.props.exports.items&&this.props.exports.items.length>0,t=(0,tS.A0)(l.uQ6.EXPORT_PICKER);return(0,i.jsx)("div",{children:(0,i.jsxs)("div",{className:"export_picker--modal--FoIpV",children:[this.renderHeader(),(0,i.jsxs)(tm.P,{width:this.props.width,className:"export_picker--scrollContainer--F9sI6",children:[!e&&(0,i.jsx)("div",{className:"export_picker--emptyModal--x2aqt",children:(0,y.tx)("fullscreen.export.no_selected_layers_with_export")}),(0,i.jsx)(tw.ZH,{children:({documentExportColorProfile:n})=>e&&this.props.exports.items.map((e,s)=>(0,i.jsx)(tX,{colorProfile:n,isDisabled:this.isExporting(),isChecked:this.isChecked(e),onToggleChecked:()=>this.setChecked(e,!this.isChecked(e)),isBeingRenamed:t&&e.isBeingRenamed,...e},s))})]}),t&&(0,i.jsx)("div",{className:"export_picker--footer--a3gs1",children:this.renderRenameLayersButton(this.getItemsToExport())})]})})}}tY.displayName="ExportPicker";var tZ=n(398585),tJ=n(491488),tQ=n(55029),t$=n(819851),t0=n(508011),t1=n(692042),t2=n(624155),t3=n(564914),t5=n(844182),t4=n(506347);let t6=(0,M.jz)(H.ZAq);function t7({subscribeToUpdates__EXPENSIVE:e}){let t=(0,t1._X)({subscribeToUpdates_expensive:e}),n=(0,t$.ow)(),i=(0,t5.Ye)(),a=(0,tp.Pg)(),r=(0,t0._o)(),{left:l,right:o}=(0,tQ.LO)();return s.useCallback((e,s,d)=>{let c={top:r,left:i||n?0:l,right:t.x+t.width-(Math.max(n?0:o,d+12)+8),bottom:t.height-(a+t6+16)},u=12;e<c.left?u=c.left+12:e>c.right&&(u=-(d+4));let p=12;return s>c.bottom&&(p=Math.min(c.bottom+12-(s+8),-(a+24))),{x:u,y:p}},[n,t,i,a,r,l,o])}var t8=n(58599),t9=n(947892);let ne={type:"SOLID",opacity:1,visible:!0,blendMode:"NORMAL"};function nt({initialPosition:e,initialCreationColor:t,initialView:n,disableStyleModal:r,onClose:o}){let{VariableAndStyleCreateModalRoot:d}=s.useContext(t9.l)??{},c=(0,a.d4)(e=>e.pickerShown),u=(0,a.wA)();function p(){(t_.Ty(c?.id??null)||t_.kU(c?.id??null))&&u(t_.XE())}let m=s.useMemo(()=>({type:l.Z_n.COLOR,resolvedType:l.rXF.COLOR,value:t}),[t]);return e&&d?(0,i.jsx)(d,{disableStyleModal:r,inheritStyleKeyField:"inheritFillStyleKey",initialPosition:e,initialStyleCreationPaint:ne,initialVariableValue:m,initialView:n,onClose:o,onCreateStyle:function(e){em.l7.system("create-new-style-from-eyedropper",()=>{l.OmW.applyPaint((0,t8.oU)(t),null,e.node_id),p()})},onCreateVariable:function(e){let n=Object.values(e.modeValues)?Object.values(e.modeValues)[0]:null,i=(0,t8.oU)(n?.type===l.Z_n.COLOR?n.value:t);l.OmW?.applyPaint(i,e.node_id,null),p()},resolvedType:l.rXF.COLOR,shouldUseEyedropperStyleCreationFlow:!0}):null}var nn=n(427369),ni=n(549821),ns=n(359166),na=n(418853),nr=n(633065),nl=n(827259),no=n(638641),nd=n(416381),nc=n(863154),nu=n(709615),np=n(25870);let nm=(0,c.eU)(!1);var nh=n(473918),nf=n(391145),ng=n(355256),nx=n(77417),n_=n(645249),ny=n(754245),nv=n(674135),nb=n(862567);class nC extends s.Component{static getDerivedStateFromError(e){return{}}componentDidCatch(e,t){if((0,nv.isErrorCausedByWindowClose)(e))(0,eA.xi)("FloatingWindowErrorBoundary","Ignoring IPC error",{error:e,errorInfo:t},{reportAsSentryError:!1});else throw e}render(){return this.props.children}}function nj({children:e,initialWidth:t,initialHeight:n,initialMinHeight:i,initialExtraFeatures:a,onChangePosition:r,hidden:l}){if(!nr.eD||!nr.eD.isFloatingWindowAvailable())throw Error("DesktopFloatingWindow: rendered with unsupported desktop app version");let[o,d]=(0,s.useState)(null),c=(0,s.useRef)(o),u=(0,s.useRef)(t),p=(0,s.useRef)(n),m=(0,s.useRef)(i),h=(0,s.useRef)(a),f=(0,s.useRef)(r),g=(0,s.useRef)(null),x=(0,s.useCallback)(e=>{null!=g.current&&g.current.displayId!==e.displayId&&requestAnimationFrame(()=>{null!=c.current&&(0,nv.withFloatingWindowAPI)(c.current,e=>{e.readyToDisplay()})}),g.current=e,f.current?.(e)},[]),_=(0,s.useCallback)(()=>{let e=`width=${u.current},height=${p.current},floatingWindow=true`;null!=m.current&&(e+=`,minHeight=${m.current}`),null!=h.current&&(e+=`,${h.current}`);let t=window.open("about:blank","_blank",e);if(null==t)return(0,eA.x1)("DesktopFloatingWindow","Unable to open floating window"),null;t.document.body.style.overflow="hidden",function(e){let t=0,n=()=>{(t-=1)<=0&&e.requestAnimationFrame(()=>{(0,nv.withFloatingWindowAPI)(e,e=>{e.readyToDisplay()})})};for(let t of(e.document.body.classList.add(nb.xE),document.body.attributes))t.name.startsWith("data-")&&e.document.body.setAttribute(t.name,t.value);for(let i of(e.document.body.style.colorScheme=document.body.style.colorScheme,document.querySelectorAll("link[rel=stylesheet], style"))){let s=i.cloneNode(!0);"LINK"===s.tagName&&(t+=1,s.addEventListener("load",n),s.addEventListener("error",n)),e.document.head.appendChild(s)}0===t&&n()}(t),(0,nv.withFloatingWindowAPI)(t,e=>{e.onChangePosition(x)}),d(t),c.current=t,t.addEventListener("close",()=>{d(null),c.current=null})},[x]),y=!!e;return((0,s.useEffect)(()=>{y?_():d(null)},[y,_]),(0,s.useEffect)(()=>{if(null!=o)return()=>{(0,nv.suppressingErrorsCausedByWindowClose)(()=>{o.close()})}},[o]),(0,s.useEffect)(()=>{null!=o&&(0,nv.withFloatingWindowAPI)(o,e=>{l?e.hideWindow():e.showWindow()})},[o,l]),null!=o)?ny.createPortal(e,o.document.body):null}function nk(e){return(0,i.jsx)(nC,{children:(0,i.jsx)(nj,{...e})})}function nw({children:e,loupeWidth:t,loupeHeight:n,panelWidth:a,panelHeight:r,hidden:d,onClick:c}){let u=!!(0,o.kc)().desktop_floating_eyedropper_fake_cursor,p=(r+12+16)*2,m=(a+12+16)*2,[h,f]=(0,s.useState)(!1),[g,x]=(0,s.useState)(!1),[_,y]=(0,s.useState)(!0),[v,b]=(0,s.useState)(!1),C=h?16:16+a+24,j=g===_?16:16+r+24;_||(j=-j);let k=s.useRef(null),w=s.useRef(null),E=(0,s.useCallback)(e=>{ny.flushSync(()=>{b(!0),e()}),k.current?.getBoundingClientRect(),ny.flushSync(()=>{b(!1)})},[]),T=(0,s.useCallback)(e=>{let t=w.current;w.current=e;let n=t?.yZone===nv.FloatingWindowVerticalZone.NN||t?.yZone===nv.FloatingWindowVerticalZone.N,i=e.yZone===nv.FloatingWindowVerticalZone.NN||e.yZone===nv.FloatingWindowVerticalZone.N,s=()=>{y(!i),f(e.xZone===nv.FloatingWindowHorizontalZone.EE),x(e.yZone===nv.FloatingWindowVerticalZone.SS)};null==t||n!==i||t.displayId!==e.displayId?E(s):s()},[E]);return(0,nh.Gz)(u&&!d),(0,i.jsxs)(nk,{initialWidth:m,initialHeight:p,initialMinHeight:r+16,initialExtraFeatures:(0,o.kc)().desktop_global_eyedropper?`eyedropper=1,eyedropperWidth=${t},eyedropperHeight=${n}`:void 0,onChangePosition:T,hidden:d,children:[(0,i.jsx)("div",{onClick:c,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%"}}),u&&(0,i.jsx)("div",{style:{position:"absolute",left:m/2,bottom:p/2,transform:"translate(-50%, 50%)",pointerEvents:"none"},children:(0,i.jsx)(nh.fA,{currentToolForCursor:l.NLJ.DROPPER_COLOR})}),(0,i.jsx)("div",{ref:k,style:{position:"absolute",height:r,width:a,left:0,[_?"top":"bottom"]:0,transform:`translate(${C}px, ${j}px)`,transition:v?void 0:"transform 0.2s ease-in-out"},children:e})]})}var nE=n(725837),nT=n(249586);let nS=document.createElement("canvas"),nI=nS.getContext("2d"),nN=(e,t,n,i,s,a)=>{e.save();{let r=t/2;a?e.roundRect?e.roundRect(0,0,48,48,5):e.rect(0,0,48,48):e.arc(r,r,r-2,0,2*Math.PI,!1),e.clip();let{width:o,height:d,rgba:c,grid:u}=s;if(nI&&o&&d){let n=nI.createImageData(o,d,{colorSpace:s.colorProfile===l.RYP.DISPLAY_P3?"display-p3":"srgb"});n.data.set(c),nS.width=o,nS.height=d,nI.putImageData(n,0,0),e.imageSmoothingEnabled=!1,e.drawImage(nS,0,0,t,t)}if(u){e.beginPath();let s=a?1:0,r=a?-.5:.5;for(let a=1;a<i;a++)r+=n,e.moveTo(r,s),e.lineTo(r,t-s),e.moveTo(s,r),e.lineTo(t-s,r);e.strokeStyle=a?"rgba(0, 0, 0, 0.1)":"rgba(51, 51, 51, 0.2)",e.stroke()}}e.restore()},nA=(e,t,n,i)=>{i||(e.strokeStyle="white",e.strokeRect(t-n/2-.5,t-n/2-.5,n+2,n+2),e.strokeStyle="black",e.strokeRect(t-n/2+.5,t-n/2+.5,n,n))},nL=(e,t,n)=>{if(n){e.beginPath(),e.roundRect?e.roundRect(0,0,348,548,5):e.rect(0,0,348,548),e.strokeStyle="rgba(0, 0, 0, 0.1)",e.stroke();return}e.beginPath(),e.arc(t,t,t-1,0,2*Math.PI,!1),e.strokeStyle="white",e.stroke(),e.beginPath(),e.arc(t,t,t-2,0,2*Math.PI,!1),e.strokeStyle="black",e.stroke()};function nM(e,t,n){let i=n?7:17,s=n?7:10,a=n?48:i*s,r=e.getContext("2d");if(!r)return;let l=devicePixelRatio;e.width=a*l,e.height=a*l,r.scale(l,l),nN(r,a,s,i,t,n),nA(r,a/2,s,n),nL(r,a/2,n)}let nO="eyedropper_v2--text--dOiTx",nR="eyedropper_v2--rowContents--dv3nr",nP="eyedropper_v2--chit--1D1ND";function nD({eyedropper:e,onOpenCreationModal:t}){let n,r;let d=function(){let e=(0,a.d4)(e=>e.eyedropper),t=(0,a.d4)(e=>e.library.local.styles),n=(0,c.md)(t4.Cg),i=(0,a.d4)(e=>e.library.used__LIVEGRAPH.styles);if(!e)return null;let s=e.assetId,r={},o=e.variableSetModeId;if(""===s)return null;let d=null,u=null;if(tJ.PK.isValid(s)){if(d=tJ.PK.toGuidStrIfLocal(s)){if(d in t){let e={style:t[d]};return r[d]=e,e}}else if(u=tJ.PK.toRefIfSubscribed(s)){d=tJ.PK.fromRef(u);let e=(0,t2.yh)(u.key,i,{}),t=null;return e&&(t={style:e},r[d]=t),t}}else if(tJ.sD.isValid(s)){if((d=tJ.sD.toString(s))in n){let e={variable:n[d],variableModeId:o};return r[d]=e,e}let e=l.CWU.getSubscribedVariableInfo(d);if(e){let t={variable:(0,t3.ZI)(e),variableModeId:o};return r[d]=t,t}}return d&&d in r?r[d]:null}(),u=(0,a.wA)(),p=function(){let e=l.Ez5?.uiState().backgroundPickerOpen.getCopy(),t=(0,a.d4)(e=>e.mirror.appModel.prototypeBackgroundPickerOpen),n=(0,a.d4)(e=>e.variablePickerShown.isShown),i=(0,a.d4)(e=>e.mirror.appModel.currentSelectedProperty),s=(0,a.d4)(e=>e.mirror.selectionProperties.numSelected);return e||t||n||i.type!==l.rrT.NONE||0!==s}(),m=(0,t$.E3)(),h=(0,tw.Ep)(),f=(0,c.md)(nc.wg),g=(0,c.md)(nm),_=function(){let e=(0,c.md)(na.U),[t,n]=s.useState(!0);return s.useEffect(()=>{let e=()=>{n(!0)},t=()=>{n(!1)};return document.addEventListener("mouseenter",e),document.addEventListener("mouseleave",t),()=>{document.removeEventListener("mouseenter",e),document.removeEventListener("mouseleave",t)}},[]),t?null:e}(),[b,C]=(0,ns.Vc)("has_toggled_eyedropper_creation_mode",!1),[j,k]=s.useState(!1),[w,E]=s.useState(!1),S=s.useRef(null),I=s.useRef(null);s.useLayoutEffect(()=>{if(I.current){if(null!=_){let{width:t,height:n,rgba:i}=_,{grid:s}=e;nM(I.current,{width:t,height:n,rgba:i,grid:s,colorProfile:h},!0)}else{let{width:t,height:n,rgba:i,grid:s}=e;nM(I.current,{width:t,height:n,rgba:i,grid:s,colorProfile:h},!0)}}});let N=(0,nd.v4)(),A=(0,nx.Ig)(),L=(0,F.Ku)(),O=function(){let e=(0,F.Ku)();return s.useCallback(()=>{let t=Object.keys(l.NVY).length/2,n=(e+1)%(t-1),i=[l.NVY.CSS,l.NVY.UIColor];for(;i.includes(n);)n=(n+1)%(t-1);return(0,F.UK)().colorFormat.set(n),n},[e])}(),R=t7({subscribeToUpdates__EXPENSIVE:g||e?.dropperData?.isKeyboardNavigating}),P=(0,en.H0)(_?.color??e.color)??en.UE,D=(0,en.H0)(e.resolvedVariableColor)??en.UE,z=m===T.nT.Whiteboard,B=m===T.nT.DevHandoff,G=d?.style?d.style:void 0,U=d?.variable?d.variable:void 0,V=!z&&!B,K=V&&e.dropperData.creationFlow!==l._4o.NONE&&!G&&!U,W=!f||B||!p&&!K,q=A(P,{eyedropperFormat:!0})||"",X="",Y=[];G?(X=G.name,n=(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"eyedropper_v2--styleCircle--rLPqT"}),(0,i.jsx)(n_.zi,{dsStyle:G,disableOutline:!0,disableTooltip:!0})]}),r="eyedropper-v2-style",Y=[{key:"modifier-1",label:"shift"}]):U?(X=B?(0,nd.xv)(U,N.id)??U.name:U.name,n=(0,i.jsx)(nf.J,{className:nP,color:D,hideBorderShadow:!0}),r="eyedropper-v2-variable",Y=[{key:"modifier-1",label:"shift"}]):V&&b?(e.dropperData.creationFlow===l._4o.STYLES?(X=(0,y.t)("eyedropper.create_style"),n=(0,i.jsx)(nn.J,{}),r="eyedropper-v2-style-creation"):e.dropperData.creationFlow===l._4o.VARIABLES&&(X=(0,y.t)("eyedropper.create_variable"),n=(0,i.jsx)(nn.J,{}),r="eyedropper-v2-variable-creation"),Y=[{key:"modifier-1",label:"shift"},{key:"modifier-2",label:x.Ay.mac?"\u2318":"ctrl",isMetaKey:x.Ay.mac}]):(X=W?(0,y.t)("eyedropper.click_to_copy"):(0,y.t)("eyedropper.click_to_sample"),n=(0,i.jsx)(ni.S,{}));let Z=s.useCallback(()=>{if(!S.current)return null;t(P,e)},[t,P,e]),J=s.useCallback(()=>{if(!S.current||!W&&p)return!1;let t="",n="";return j&&(G?t="style name":U&&(t="variable name"),n=X),""===t&&(t=L===l.NVY.HEX?"hex":ng.F.format(L),n=q),(0,nl.Dk)(n),u(v.F.enqueue({message:(0,y.t)("visual_bell.copied_color_to_clipboard_figma_design",{colorType:t}),count:n,icon:no.zX.EYEDROPPER})),!function(e,t,n,i,s){let a,r;let l=nE.D.getState(),[o,d]=(a="raw",r=n,i&&"style name"===t?(a="style",r=i.node_id):s&&"variable name"===t&&(a="variable",r=s.node_id),[a,r]);(0,nT.ds)("eyedropper_copy",l.openFile?.key,l,{tracking_session_dropper_id:e,selection_type:o,copied_value:d,contains_style:!!i,contains_variable:!!s})}(e.dropperData.dropperId,t,n,G,U),!0},[L,u,e.dropperData,q,p,X,j,G,U,W]),Q=s.useCallback((e,t)=>{if(l.OmW?.toggleOffEyedropper(),K&&j){Z();return}J()||em.l7.system(e,()=>{l.OmW?.applyPaint(t8.oU(P),t?U?.node_id??null:null,t?G?.node_id??null:null)})},[J,K,P,Z,j,G?.node_id,U?.node_id]),$=s.useCallback(()=>{Q("apply-global-eyedropper-with-click",!1)},[Q]),ee=ef.fo("stylesAndVariablesEyedropper","keydown",s.useCallback(e=>{let{event:t}=e,n=x.Ay.mac?t.metaKey:t.ctrlKey,i="ArrowUp"===t.key||"ArrowDown"===t.key||"ArrowLeft"===t.key||"ArrowRight"===t.key;if("Tab"===t.key){let t=O();nu.Lj?.announceEyedropperColorFormatChanged(ng.F.format(t)),(0,o.kc)().ee_a11y_kb_eye_dropper||e.accept()}t.shiftKey&&(G||U||!n||C(!0),(K&&n||G||U)&&(k(!0),(0,o.kc)().ee_a11y_kb_eye_dropper||i||e.accept())),"Enter"===t.key&&S.current&&(Q("apply-eyedropper-with-keyboard",j),e.accept())},[Q,K,O,j,C,G,U])),et=s.useCallback(e=>{let t=x.Ay.mac?e.metaKey:e.ctrlKey;(e.shiftKey||"Shift"!==e.key)&&(!K||t||"Meta"!==e.key)||k(!1)},[K]),ei=s.useCallback(()=>{J()},[J]),es=s.useCallback(e=>{K&&j&&Z()},[K,j,Z]),ea=s.useCallback(()=>{E(!0)},[]);s.useEffect(()=>(window.addEventListener("keyup",et),window.addEventListener("pointerup",ei),window.addEventListener("mousedown",es),window.addEventListener("mousemove",ea,{once:!0}),()=>{window.removeEventListener("keyup",et),window.removeEventListener("pointerup",ei),window.removeEventListener("mousedown",es),window.removeEventListener("mousemove",ea)}));let er=(0,o.kc)().desktop_floating_eyedropper&&nr.eD?.isFloatingWindowAvailable(),el=(0,M.jz)(z?H.tXK:H.k22),eo=(()=>{let t;if(!g&&!_&&!e?.dropperData?.isKeyboardNavigating)return null;if(!er){let n=R(e.cursorPosition.x,e.cursorPosition.y,el);t={transform:`translate(${n.x}px, ${n.y}px)`}}return(0,i.jsxs)("div",{className:tt()("eyedropper_v2--eyedropperv2----W5m",w&&"eyedropper_v2--eyedropperv2Animation--AQ3Od"),style:t,ref:S,"data-testid":"eyedropper",children:[(0,i.jsx)("div",{className:"eyedropper_v2--loupeSamplingSquare--mt9xT"}),(0,i.jsx)("canvas",{ref:I}),!z&&(0,i.jsxs)("div",{children:[(0,i.jsx)(nF,{icon:(0,i.jsx)(nf.J,{className:nP,color:P,hideBorderShadow:!0}),text:q,keyBadges:[],isSelected:!j}),(0,i.jsx)(nF,{icon:n,text:X,keyBadges:Y,isSelected:j,dataTestId:r})]})]})})();return(0,i.jsxs)(i.Fragment,{children:[null!=eo&&(0,i.jsx)(np.vL,{focusOnMount:!0,name:"stylesAndVariablesEyedropper",handleKeyDown:ee}),er?(0,i.jsx)(nw,{loupeHeight:e.height,loupeWidth:e.width,panelHeight:(0,M.jz)(H.ZAq),panelWidth:el,hidden:null==eo,onClick:$,children:eo}):null!=eo&&(0,i.jsx)(nh.ix,{position:e.cursorPosition,currentToolForCursor:l.NLJ.DROPPER_COLOR,children:eo})]})}function nF({icon:e,text:t,keyBadges:n,isSelected:s,dataTestId:a}){return(0,i.jsxs)("div",{className:tt()("eyedropper_v2--menuRow--IGEss",s&&"eyedropper_v2--selectedRow--GlyoK",eb.Dm),"data-testid":a,children:[(0,i.jsxs)("div",{className:nR,children:[(0,i.jsx)("div",{className:"eyedropper_v2--iconContainer--TVZ5N",children:e}),(0,i.jsx)("div",{className:tt()("eyedropper_v2--menuOption--WK4oh",nO),children:t})]}),(0,i.jsx)("div",{className:nR,children:n&&n.map(e=>(0,i.jsx)("div",{children:(0,i.jsx)("div",{className:tt()(nO,e.isMetaKey?"eyedropper_v2--keyMetaBadge--S1g3y eyedropper_v2--keyBadge--9GITk":"eyedropper_v2--keyTextBadge--ERRPy eyedropper_v2--keyBadge--9GITk"),children:(0,i.jsx)(tn.S,{shortcut:e.label})})},e.key))})]})}function nz(){let e=(0,a.d4)(e=>e.eyedropper),t=s.useRef(),n=t7({subscribeToUpdates__EXPENSIVE:!!e}),[r,o]=s.useState(!1),[d,c]=s.useState(null),[u,p]=s.useState("createVariable"),[m,h]=s.useState(!1),f=s.useCallback((e,i)=>{o(!0),c(e),p(i.dropperData.creationFlow===l._4o.STYLES?"createStyle":"createVariable"),h(i.dropperData.canAcceptStyles);let s=n(i.cursorPosition.x,i.cursorPosition.y,tZ.i),a=new eo.Mi(s.x+i.cursorPosition.x,s.y+i.cursorPosition.y);t.current=a,l.OmW?.toggleOffEyedropper()},[n]),g=s.useCallback(()=>{o(!1)},[]),x=r&&d;return(0,i.jsxs)(i.Fragment,{children:[e&&(0,i.jsx)(nD,{eyedropper:e,onOpenCreationModal:f}),x&&(0,i.jsx)(nt,{initialPosition:t.current,initialCreationColor:d,initialView:u,disableStyleModal:!m,onClose:g})]})}var nB=n(147718),nG=n(919410),nU=n(989034);function nV({clientX:e,clientY:t,selectedView:n,deleteCollection:s,collectionId:r}){let l=(0,a.wA)(),c=(0,nG.ZX)(),{appModel:u,sceneGraph:p,sceneGraphSelection:m}=(0,d.R)(e=>({appModel:e.mirror.appModel,sceneGraph:e.mirror.sceneGraph,sceneGraphSelection:e.mirror.sceneGraphSelection})),h=[];return null!=s&&h.push({name:"dakota-delete-collection",callback:()=>{s()}}),(0,o.kc)().dakota_import_export&&h.push({name:"dakota-export-collection-internal",callback:async()=>{let e=await c(r);e||l(v.F.enqueue({message:"Could not export collection to clipboard"})),navigator.clipboard.writeText(e??""),l(v.F.enqueue({message:"Collection exported to clipboard"}))}}),(0,i.jsx)("div",{className:eb.Dm,children:(0,i.jsx)(nU.Q,{appModel:u,dispatch:l,menuItems:h,recordingKey:"dakotaCollectionContextMenu",removeDisabledItems:!0,sceneGraph:p,sceneGraphSelection:m,selectedView:n,showPoint:!1,targetRect:{width:10,height:10,left:e+100,top:t,right:e+110,bottom:t-10}})})}function nH({clientX:e,clientY:t,selectedView:n,deleteField:s,duplicateField:r}){let l=(0,a.wA)(),{appModel:o,sceneGraph:c,sceneGraphSelection:u}=(0,d.R)(e=>({appModel:e.mirror.appModel,sceneGraph:e.mirror.sceneGraph,sceneGraphSelection:e.mirror.sceneGraphSelection})),p=[];return p.push({name:"dakota-duplicate-field",callback:r},{separator:!0},{name:"dakota-delete-field",callback:s}),(0,i.jsx)("div",{className:eb.Dm,children:(0,i.jsx)(nU.Q,{appModel:o,dispatch:l,menuItems:p,recordingKey:"dakotaFieldContextMenu",removeDisabledItems:!0,sceneGraph:c,sceneGraphSelection:u,selectedView:n,showPoint:!1,targetRect:{width:10,height:10,left:e+100,top:t,right:e+110,bottom:t-10}})})}function nK({clientX:e,clientY:t,selectedView:n,deleteItemOrItems:s}){let r=(0,a.wA)(),{appModel:l,sceneGraph:o,sceneGraphSelection:c}=(0,d.R)(e=>({appModel:e.mirror.appModel,sceneGraph:e.mirror.sceneGraph,sceneGraphSelection:e.mirror.sceneGraphSelection})),u=[];return null!=s&&u.push({name:"dakota-delete-item",callback:()=>{s()}}),(0,i.jsx)("div",{className:eb.Dm,children:(0,i.jsx)(nU.Q,{appModel:l,dispatch:r,menuItems:u,recordingKey:"dakotaItemContextMenu",removeDisabledItems:!0,sceneGraph:o,sceneGraphSelection:c,selectedView:n,showPoint:!1,targetRect:{width:10,height:10,left:e+100,top:t,right:e+110,bottom:t-10}})})}var nW=n(638004),nq=n(550209);function nX(e){return{attachmentId:e.id,attachmentUploadedAt:e.uploadedAt.toString(),imageUrlPrefix:function(e){if(-1!==e.search("blob"))return"blob";let t=e.search("/images/");if(-1!==t)return e.substring(0,t)}(e.imageUrl)}}function nY(e){return(0,i.jsx)(g.u,{label:"CommentAttachmentContextMenu",children:(0,i.jsx)(nZ,{...e})})}function nZ(e){let t=(0,a.wA)(),n=(0,a.d4)(e=>e.mirror.appModel),s=e.clientX,r=e.clientY,l=async t=>{let n=await fetch(e.attachment.imageUrl,{mode:"cors"}),i=await n.blob();if(!t)return i;if("image/jpeg"===i.type||"image/gif"===i.type){let e=await createImageBitmap(i),t=document.createElement("canvas");t.width=e.width,t.height=e.height;let n=t.getContext("2d");return n?.drawImage(e,0,0),new Promise(e=>{t.toBlob(t=>{e(t)},"image/png")})}return i},o=[{name:"download-attachment",callback:async()=>{try{await l(!1).then(n=>{let i=URL.createObjectURL(n),s=document.createElement("a");s.href=i,s.download=(0,y.t)("comments.attachment_default_name",{fileExtension:n.type.split("/")[1]}),s.click(),URL.revokeObjectURL(i),(0,eh.sx)("Comment Attachment Download Success",nX(e.attachment)),t(v.F.enqueue({message:(0,y.t)("comments.download_attachment_success"),type:"attachment-download"}))})}catch(n){(0,eh.sx)("Comment Attachment Download Failure",nX(e.attachment)),(0,nq.$D)(nW.e.FEEDBACK,n),t(v.F.enqueue({message:(0,y.t)("comments.download_attachment_error"),type:"attachment-download",error:!0}))}}},{name:"copy-attachment",callback:async()=>{t(v.F.enqueue({message:(0,y.t)("comments.copying_attachment"),type:"copy-attachment",icon:no.zX.SPINNER}));try{await l(!0).then(async n=>{let i=new ClipboardItem({[n.type]:n});await navigator.clipboard.write([i]).then(()=>{(0,eh.sx)("Comment Attachment Copy Success",nX(e.attachment)),t(v.F.enqueue({message:(0,y.t)("comments.copy_attachment_success"),type:"copy-attachment"}))})})}catch(n){(0,eh.sx)("Comment Attachment Copy Failure",nX(e.attachment)),(0,nq.$D)(nW.e.FEEDBACK,n),t(v.F.enqueue({message:(0,y.t)("comments.copy_attachment_error"),type:"copy-attachment",error:!0}))}}}];return(0,i.jsx)(nU.Q,{appModel:n,menuItems:o,targetRect:{width:10,height:10,left:s+100,top:r,right:s+110,bottom:r-10},showPoint:!1,selectedView:e.selectedView,recordingKey:"comment-context-menu",dispatch:t})}var nJ=n(747284),nQ=n(4033),n$=n(549571),n0=n(166887),n1=n(878566),n2=n(111297),n3=n(104836),n5=n(19877),n4=n(478146);function n6({children:e,entryPoint:t}){let n=(0,tA.tS)(),a=(0,eB.iZ)(),r=(0,n3.ol)(),l=(0,n1.O)(),o=(0,n0.U)(),d=(0,n5.U)("upsell"),c=(0,s.useCallback)(()=>{o("Dev Mode Paywall clicked",{type:"Design Mode Upsell",entryPoint:t},{forwardToDatadog:!0}),d("handoff")},[t,d,o]);return(0,i.jsx)(n2.fu,{name:"Dev Mode Upsell In Design Mode",properties:{currentPlan:l,teamId:r?.id,userId:a?.id,fileKey:n,upsellSource:t},children:(0,i.jsxs)(td.E,{className:"context_menus_upsells--upsellItem--lBYll",onClick:c,children:[(0,i.jsx)(ev.B,{svg:n4.A}),(0,i.jsx)("span",{children:e})]})})}function n7(){return(0,i.jsx)(n6,{entryPoint:"design_section_status",children:(0,y.tx)("dev_handoff.paywall.ready_for_dev.upsell")})}function n8(){return(0,i.jsx)(g.u,{label:"DevModeCopyAsCodeUpsell",children:(0,i.jsx)(n6,{entryPoint:"design_copy_as_code",children:(0,y.tx)("dev_handoff.paywall.codegen.upsell")})})}function n9(){return(0,i.jsx)(n6,{entryPoint:"design_annotations",children:(0,y.tx)("dev_handoff.paywall.annotations.upsell")})}function ie(e){return(0,i.jsx)(g.u,{label:"AnnotationsButtonContextMenu",children:(0,i.jsx)(it,{...e})})}function it({targetInViewport:e,annotationsCount:t,selectedView:n}){var s;let r=(0,a.wA)(),l=(0,a.d4)(e=>e.mirror.appModel),o=(0,a.d4)(e=>e.mirror.sceneGraph),d=(0,n5.U)("annotations_button"),c=(0,t1.ni)(),u=(0,n$._I)(),p=(0,n$.U4)(),m=(s=()=>d("handoff"),u?[{name:"view-annotations",callback:s,flags:["design"]},{separator:!0},{render:()=>(0,i.jsxs)("div",{className:th.s.flex.itemsCenter.colorTextMenuSecondary.columnGap4.pl4.pb4.pr10.pt0.$,children:[(0,i.jsx)(ni.S,{style:{"--color-icon":"var(--color-text-menu-secondary)"}}),(0,y.tx)("dev_handoff.paywall.annotations.double_click_hint")]}),optionHeight:32}]:p?[{header:!0,name:(0,y.t)("dev_handoff.annotation.number_annotations",{count:t})},{separator:!0},{render:()=>(0,i.jsx)(n9,{}),optionHeight:32,flags:["design"]}]:[{header:!0,name:(0,y.t)("dev_handoff.annotation.number_annotations",{count:t})}]),h=e.origin.x+c.x,f=e.origin.y+c.y,g={left:h,top:f,right:h+e.size.x,bottom:f+e.size.y,width:e.size.x,height:e.size.y};return(0,i.jsx)("div",{className:eb.Dm,children:(0,i.jsx)(nU.Q,{allowDisabledOnly:!p,appModel:l,dispatch:r,menuItems:m,minWidth:50,recordingKey:"annotationsButtonMenu",removeDisabledItems:p,sceneGraph:o,selectedView:n,showPoint:!0,targetRect:g})})}var ii=n(139366),is=n(292308),ia=n(469229);function ir(e){let t=(0,a.wA)(),n=(0,R.I_)(),s=(0,a.d4)(e=>e.mirror.appModel);if(!(0,a.d4)(e=>(0,ia.U2)(e.selectedView)))return null;let{thread:r}=e,l=!!r.comments.find(e=>e.isUnread),o=!!r.isPendingFromSinatra,d=null,c=n.commentReceipts;c&&(d=l?{name:"mark-as-read",callback:()=>{t(ii.AY({receiptsAPI:c,thread:r}))}}:{name:"mark-as-unread",callback:()=>{t(ii.QY({receiptsAPI:c,comment:r.comments[0]}))}});let u=[];o||((0,is.m)(r.sidebarItemType)?u.push({name:"resolve",callback:()=>{t(ii.hx({thread:r,resolved:!0}))},disabled:null!=r.commentPin},d,{name:"copy-link",callback:()=>{e.copyLink(r.comments[0])}},{separator:!0}):u.push({name:"copy-link",callback:()=>{e.copyLink(r.comments[0])}},{separator:!0})),u.push({action:"toggle-show-comments",displayText:(0,y.t)("fullscreen.context_menu.hide_comments")});let p=u.filter(e=>e).map(e=>e),m={width:224,height:129,left:e.pinClientRect.x,top:e.pinClientRect.y,right:e.pinClientRect.x+e.pinClientRect.width,bottom:e.pinClientRect.y+e.pinClientRect.height};return(0,i.jsx)(nU.Q,{appModel:s,menuItems:p,targetRect:m,showPoint:!1,selectedView:e.selectedView,recordingKey:"comment-context-menu",dispatch:t})}var il=n(999083),io=n(615654),id=n(926653),ic=n(190028),iu=n(997477),ip=n(607804),im=n(21791),ih=n(80341),ig=n(975961),ix=n(977745),i_=n(193350),iy=n(896058);async function iv({paint:e,fileKey:t,dispatch:n}){if(!t||"VIDEO"!==e.type||!e.video||!e.video?.hash)return iC("Incorrect asset type"),null;n(i_.n.set({message:(0,y.t)("whiteboard.figjam_export.exporting"),showLoadingSpinner:!0,callback:()=>{}}));let i=await (0,iy.w6)({paint:e,fileKey:t});if(null===i)return iC("Error getting download url for asset"),null;ib(i)}let ib=e=>{let t=document.createElement("a");t.setAttribute("href",e),t.setAttribute("target","_blank"),document.body.appendChild(t),t.click(),document.body.removeChild(t)},iC=e=>{(0,nq.$D)(nW.e.FIGJAM,Error(`Error exporting video: ${e}`))};var ij=n(619070),ik=n(683875),iw=n(243397),iE=n(218329),iT=n(355136),iS=n(330378),iI=n(734061),iN=n(866786),iA=n(164131),iL=n(470876),iM=n(84463),iO=n(324109),iR=n(220411),iP=n(297869),iD=n(221479);function iF(e){return new URL(e).hostname.split(".").slice(-2).join(".")}var iz=n(167507),iB=n(772523),iG=n(666188),iU=n(851461),iV=n(248043),iH=n(303106),iK=n(520054),iW=n(912610),iq=n(402276),iX=n(319706),iY=n(792028),iZ=n(208740),iJ=n(437761),iQ=n(532096),i$=n(132672),i0=n(704422),i1=n(842909),i2=n(854284),i3=n(888760),i5=n(288971),i4=n(390452),i6=n(196486),i7=n(167037),i8=n(45754),i9=n(167151),se=n(237400),st=n(831104),sn=n(351231),si=n(625635);function ss(e,t){return{action:"slides-rewrite-text",flags:["slides"],callback:()=>(0,st.mD)(e,{source:"context_menu"}),disabled:!t}}function sa(e){return!c.zl.get(st.Tm)&&e}var sr=n(171396),sl=n(668242),so=n(172996),sd=n(764973),sc=n(929171),su=n(415567);function sp(){let e=(0,t$.Em)(),t=(0,sc.y)().transform(e=>e?.canCreateSitesFileWithReasons.result).unwrapOr(!1),n=(0,tA.Kf)(),i=(0,su.Vr)();if(!i||!i.isTopLevelFrame())return!1;let s=i.size.x;return!(s<1200)&&!(s>1600)&&!!e&&!!t&&!!n}let sm=(0,n(338052).n)((e,t)=>{(0,nT.Cu)({trackingContext:"SelectionContextMenu > DesignToSites",text:"Copy to Figma Sites",pageId:e,nodeId:t})}),sh={name:"copy-to-figma-sites",flags:["edit","design"],callback:(e,t,n)=>{let i=nE.D.getState(),s=(0,L.getActiveTSSceneGraph)(),a=function(e){let t;let n=0;for(let i of e){if(++n>1)return;t=i}return t}(s.getDirectlySelectedNodes().map(e=>e.guid)),r=i.openFile?.key,l=i.fileVersion,o=s.getCurrentPage()?.guid;if(!r||!l||!o||!a){(0,eA.x1)("designToSites","Unable to fetch required data to create a new Sites file",{fileKey:r,fileVersion:l,pageGuid:o,selectedNodeId:a},{reportAsSentryError:!0}),v.F.enqueue({message:(0,y.t)("selection_context_menu.error_creating_sites_file"),type:"design-to-sites-error",error:!0});return}let d=c.zl.set(so.me,{fileKey:r,fileVersion:l,pageGuid:o,selectedNodeId:a}),u=(0,sd.Kl)(i);sm(o,a),n((0,sl.zE)({state:u,from:iZ.f6.DESIGN_COPY_TO_SITES_ENTRYPOINT,editorType:eG._Y.SITES,team:void 0,openNewFileIn:iZ.ai.NEW_TAB,newFileDataLocalStorageKey:d}))}};var sf=n(930658);let sg=(0,M.hG)(H.tui);function sx(e){let t=(0,a.wA)(),n=e.clientX,s=e.clientY;return(0,i.jsx)("div",{className:`${eb.Dm}`,children:(0,i.jsx)(nU.Q,{allowCodegenOptions:e.selectedView.editorType===T.nT.Design,appModel:e.appModel,"aria-labelledby":e.ariaLabelledBy,dispatch:t,isLimitedDevMode:e.isLimitedDevMode,menuItems:(0,il.WI)((()=>{var n,i,s,a;let r=e.isPrototypeCanvasEditUiVisible&&!e.hasSelection?[{separator:!0},{action:"remove-interactions-on-page",flags:["edit"]}]:[],d=window.FigmaMobile,c=sT(e.appModel.showComments,e.selectedView,e.viewportInfo,e.clientX,e.clientY,t,d?.requestToAddDraftCommentPin),u=e.selectedView.editorType===T.nT.Whiteboard,p=e.selectedView.editorType===T.nT.Slides,m=e.selectedView.editorType===T.nT.Sites,h=e.selectedView.editorType===T.nT.Figmake,f=e.selectedView.editorType===T.nT.Cooper,g=(0,iQ.$A)(e.selectedView),_=x.Ay.windows?"Ctrl+":"\u2318",v={action:"paste-here",flags:["edit"],displayText:u?(0,y.t)("fullscreen_actions.paste"):void 0,shortcutText:u?`${_}V`:void 0},b=!x.Ay.safari||d?.readClipboardData?[v,u?{separator:!0}:null]:[],C={name:"start-chat",disabled:e.isJoinedToActiveVotingSession||e.isCursorChatDisabled,callback:(n,i,s,a)=>{l.glU?.triggerAction("set-tool-default",null),t(ik.F6({position:{x:a.clientX||e.clientX,y:(a.clientY||e.clientY)-sg},source:"canvas_context_menu"}))}},j=ss(t,(n=e.hasSlidesAiTextEnabled,i={x:e.clientX,y:e.clientY},s=e.slideId,a=e.viewportInfo,!!(s&&a&&(0,si.ih)(s,i,a))&&sa(n))),k=e.openFile,w=e.canPublishOrgTemplate&&k?(0,sr.we)({dispatch:t,file:{key:k.key,name:k.name,folder_id:k.folderId,team_id:k.teamId,editor_type:k.editorType,parent_org_id:k.parentOrgId},fileNeedsMovingBeforePublish:e.fileNeedsMovingBeforePublish,isPublished:e.isFilePublishedTemplate,source:"fullscreen-context-menu"}):null,E=u&&!(0,o.kc)().figjam_quick_actions_v2,S=[{action:"toggle-ui"},{action:"toggle-show-comments",displayText:(0,y.t)("fullscreen.context_menu.show_hide_comments")},...u||h?[]:[{separator:!0},C],E||h?null:{action:"toggle-menu",displayText:(0,i5.gn)()?(0,y.t)("fullscreen_actions.toggle-actions-menu"):(0,y.t)("fullscreen_actions.toggle-menu")},!e.userCanViewPlugins||m&&!(0,o.kc)().sites_plugin_api||f&&!(0,o.kc)().buzz_plugins||h?null:(0,iI.qz)({...e,isReadOnly:e.appModel.isReadOnly},"contextmenu"),e.appModel.isReadOnly||!e.userCanViewWidgets||g?null:(0,iN.Vd)(e,"contextmenu"),w,...r],I=[...c,...b,{action:"unlock-all",flags:["edit","whiteboard"]},{separator:!0},...u?[C,{separator:!0}]:[],...p?[{separator:!0},j]:[],...S];return sI(I,"canvas_context_menu"),I})()),recordingKey:"canvasMenu",removeDisabledItems:!0,selectedView:e.selectedView,showPoint:!1,targetRect:{width:10,height:10,left:n+100,top:s,right:n+110,bottom:s-10}})})}function s_(e){let t=(0,nQ.op)(),n=(0,nQ.$1)(),r=(0,nQ.cW)(),l=(0,nQ.Be)(),o=l.orgPlugins,d=l.orgWidgets,c=(0,iA.h)("plugin"),u=(0,iA.h)("widget"),p=(0,nQ.NU)(),m=(0,nQ.qr)(),h=(0,nQ.ZT)(),f=(0,i0.S)(),g=(0,n0.am)();s.useEffect(()=>{g("Canvas Right Click")},[g]);let x=(0,t1._X)({subscribeToUpdates_expensive:!0}),_=(0,iL.J3)(),y=(0,iL.JU)(_),v=_===iL.kN.FILE_IN_DRAFTS,b=!!(0,iL.kD)(),C=(0,a.d4)(e=>e.mirror.appModel.activeTextReviewPlugin),j=sS(),k=(0,st.Ne)(),w=(0,se.Jb)(),E=(0,a.d4)(tA.tB),T=(0,a.d4)(e=>e.selectedView.editorType),S=(0,a.d4)(e=>e.currentUserOrgId&&e.orgById[e.currentUserOrgId]||null),I=(0,a.d4)(e=>e.mirror.appModel),N=(0,a.d4)(iU.gR),A=(0,a.d4)(e=>Object.keys(e.mirror.sceneGraphSelection).length>0);return(0,i.jsx)(sx,{...e,activeTextReviewPlugin:C,allSavedPlugins:l.plugins,appModel:I,canPublishOrgTemplate:y,editorType:T,fileNeedsMovingBeforePublish:v,hasSelection:A,hasSlidesAiTextEnabled:k,isCursorChatDisabled:f,isFilePublishedTemplate:b,isJoinedToActiveVotingSession:N,isPrototypeCanvasEditUiVisible:j,localExtensions:n,openFile:E,org:S,orgPrivatePlugins:c,orgPrivateWidgets:u,orgSavedPlugins:o,orgSavedWidgets:d,publishedPlugins:r,publishedWidgets:h,recentlyUsedPlugins:t,recentlyUsedWidgets:m,savedWidgetVersions:p,slideId:w,viewportInfo:x})}let sy=(e,t)=>l.glU?l.glU.getObjectsListUnderCursor(e,t):[],sv=class e extends s.PureComponent{constructor(e){super(e),this.objectsListMouseEnter=e=>{iB.Uc(e)},this.objectsListMouseExit=()=>{iB.Uc("")},this.getSelectionGuid=()=>Object.keys(this.props.sceneGraphSelection)[0],this.getObjectsListMenu=(e,t)=>{let n=sy(e,t);if(null==n)return[];let i=[];for(let e of n){let t=e.nodeId;i.push({nodeId:t,args:{nodeId:t,name:e.name},action:"select-node",source:"canvas_context_menu",displayText:(0,y.t)("fullscreen_actions.select-node",{name:e.name??""}),onMouseEnter:()=>this.objectsListMouseEnter(t),onMouseExit:this.objectsListMouseExit})}return i},this.getNodeTypeForCopyLinkText=()=>{let e=this.getSelectionGuid();return e&&l.glU?l.glU.isPlatformShape(e)?l.Z6A.SHAPE_WITH_TEXT:l.glU.getNodeType(e):null},this.getPageListForMoveToMenu=()=>{let e=this.props.appModel.pagesList;if(!this.props.userCanEditFile||null==e||e.length<2)return[];let t=[];for(let n of e)n.nodeId!==this.props.appModel.currentPage&&(n.isDivider?t.push({separator:!0}):t.push({name:n.name,args:{nodeId:n.nodeId,name:n.name},action:"page-move-to",displayText:(0,y.t)("fullscreen_actions.page-move-to",{name:n.name??""})}));return t},this.state={pageItems:this.getPageListForMoveToMenu(),relatedComponentMenu:this.getRelatedComponentMenu(l.iCO.NONE),relatedStateMenu:this.getRelatedComponentMenu(l.iCO.STATE_INSTANCE),objectItems:this.getObjectsListMenu(this.props.clientX,this.props.clientY),nodeTypeForCopyLinkText:this.isFigjam()?this.getNodeTypeForCopyLinkText():null,hyperlink:this.isFigjam()?this.getHyperlinkUnderCursor():null}}getRelatedComponentMenu(e){let t;if(e!==l.iCO.NONE&&e!==l.iCO.STATE_INSTANCE)return null;let n={userId:this.props.user?.id,fileKey:this.props.openFile?.key,orgId:this.props.openFile?.parentOrgId??void 0,teamId:this.props.openFile?.teamId??void 0},i=(0,iX.SY)(this.props.masterSymbolGUID,this.props.dispatch,this.props.openFile?.key||"",(0,id.l)(this.props.openFile?.libraryKey??""),this.props.library,this.props.sceneGraph,this.props.sceneGraphSelection,this.props.isCooper,e,n,this.props.stateGroupSelectionInfo);if(0===i.length)return null;t=e===l.iCO.STATE_INSTANCE?"relatedComponentMenuSwapVariants":"relatedComponentMenu";let s=this.props.clientX,a=this.props.clientY;return{items:i,showPoint:!1,parentRect:{width:10,height:10,left:s+100,top:a,right:s+110,bottom:a-10},recordingKey:t,dispatch:this.props.dispatch,depth:0,onSelectItem:()=>{}}}getHyperlinkUnderCursor(){return l.glU?l.glU.getHyperlinkUnderCursor(this.props.clientX,this.props.clientY):null}selectLayerMenu(){return!this.props.isObjectsPanelMenu&&this.state.objectItems.length>1?this.state.objectItems:[]}textEditModeMenu(){let e=this.getCopyPasteMenu(),t=this.getCopyExportMenu(),n=this.props.spellCheckPreference,i=this.props.appModel.spellCheckSuggestions,s=i||!n?[{name:"spell-check-menu",flags:["design","whiteboard","slides","cooper"],children:(0,iG.aB)(this.props.dispatch)},...this.props.userCanViewPlugins?(0,iI.dL)(this.props,"contextmenu"):[]]:[];return[...n||this.props.appModel.activeTextReviewPlugin?(0,iG.Ax)(i,this.props.editorType):[],...s,{separator:!0},...this.getTableCellMenu(),{separator:!0},...e,{separator:!0},...this.isFigjam()?t:[]]}getFaviconMenu(e){return{name:e?"clear-favicon":"set-favicon",args:{label:e?(0,y.t)("fullscreen_actions.clear_favicon"):(0,y.t)("fullscreen_actions.set_as_favicon")},flags:["edit","!slides","sites"],featureFlags:["sites"],callback:()=>{let t=L.getActiveTSSceneGraph().getCurrentPage()?.guid;void 0!==t&&em.l7.user("set-web-settings",()=>{l.glU?.setWebMetadata({faviconID:e?"":this.getSelectionGuid()},[t]),ex.Y5.commit()})}}}getFileThumbnailMenu(e){return{name:(0,o.kc)().dse_library_pg_thumbnails?ex.Y5.getFileThumbnailMenuItemName():ex.Y5.getThumbnailMenuItemName(),args:(0,o.kc)().dse_library_pg_thumbnails?{label:e?(0,y.t)("fullscreen_actions.restore_default_file_thumbnail"):(0,y.t)("fullscreen_actions.set_as_file_thumbnail")}:{label:e?(0,y.t)("fullscreen_actions.restore_default_thumbnail"):(0,y.t)("fullscreen_actions.set_as_thumbnail")},flags:["edit","!slides"],callback:()=>{this.props.openFile&&this.props.dispatch(ij.$m({file_key:this.props.openFile.key,thumbnail_guid:e?null:this.getSelectionGuid()}))}}}getPageThumbnailMenu(){return{get name(){return ex.Y5.getPageThumbnailMenuItemName()},callback:()=>ex.Y5.handlePageThumbnailMenuItem(),get disabled(){return ex.Y5.disablePageThumbnailMenu()},flags:["edit","design"],featureFlags:["dse_library_pg_thumbnails"]}}selectedEmbedOrLinkPreviewHasValidUrl(){return this.props.widgetSelectionInfo?.pluginID===iz.k.EMBED_WIDGET&&this.props.embedData&&(this.props.embedData.url||this.props.embedData.srcUrl)||this.props.widgetSelectionInfo?.pluginID===iz.k.LINK_PREVIEW_WIDGET&&this.props.linkPreviewData&&this.props.linkPreviewData.url}isFigjam(){return"fullscreen"===this.props.selectedView.view&&this.props.selectedView.editorType===T.nT.Whiteboard}getCopyLinkMenu(){let e=this.selectedEmbedOrLinkPreviewHasValidUrl()?"FigJam":"";return{name:"copy-link",args:{label:(0,y.t)("fullscreen.context_menu.copy_link",{editorSpecifierString:e})},displayText:this.isFigjam()&&this.state.nodeTypeForCopyLinkText?function(e){switch(e){case l.Z6A.STICKY:return(0,y.t)("fullscreen_actions.copy-link-to-sticky");case l.Z6A.CONNECTOR:return(0,y.t)("fullscreen_actions.copy-link-to-connector");case l.Z6A.WIDGET:return(0,y.t)("fullscreen_actions.copy-link-to-widget");case l.Z6A.STAMP:return(0,y.t)("fullscreen_actions.copy-link-to-stamp");case l.Z6A.SECTION:return(0,y.t)("fullscreen_actions.copy-link-to-section");case l.Z6A.TEXT:return(0,y.t)("fullscreen_actions.copy-link-to-text");case l.Z6A.TABLE:return(0,y.t)("fullscreen_actions.copy-link-to-table");case l.Z6A.WASHI_TAPE:return(0,y.t)("fullscreen_actions.copy-link-to-washi-tape");case l.Z6A.SHAPE_WITH_TEXT:return(0,y.t)("fullscreen_actions.copy-link-to-shape");case l.Z6A.INSTANCE:return(0,y.t)("fullscreen_actions.copy-link-to-instance");default:return(0,y.t)("fullscreen_actions.copy-link-to-this")}}(this.state.nodeTypeForCopyLinkText):this.isSelectedElementASlide()?(0,y.t)("fullscreen_actions.copy_link_to_slide"):void 0,callback:()=>{let e;if(!this.props.openFile)return;let t=!(0,iQ.$A)(this.props.selectedView)&&this.props.attributionContextKey,n=(0,k.Wl)(this.props.selectedView),i=(0,k.s4)(this.props.selectedView),s=(0,sn.P)(this.props.selectedView),a=this.getSelectionGuid(),r=(0,iV.jN)({file:this.props.openFile,nodeId:this.getSelectionGuid(),isDevHandoff:(0,iQ.$A)(this.props.selectedView),isReadOnly:this.props.appModel.isReadOnly,isFigJam:this.isFigjam(),isDevModeOverview:n,devModeFocusId:i,attributionContext:t?(0,iH.b)(this.props.attributionContextKey,iH.d.FULLSCREEN_CONTEXT_MENU):null});if((0,o.kc)().ce_copy_labelled_links){let t=(0,L.getActiveTSSceneGraph)().get(this.getSelectionGuid());e=t?t.name:this.props.openFile.name}let d=(()=>{if(this.isFigjam()&&this.state.nodeTypeForCopyLinkText)return function(e){switch(e){case l.Z6A.STICKY:return(0,y.t)("visual_bell.copy_link_to_sticky");case l.Z6A.CONNECTOR:return(0,y.t)("visual_bell.copy_link_to_connector");case l.Z6A.WIDGET:return(0,y.t)("visual_bell.copy_link_to_widget");case l.Z6A.STAMP:return(0,y.t)("visual_bell.copy_link_to_stamp");case l.Z6A.SECTION:return(0,y.t)("visual_bell.copy_link_to_section");case l.Z6A.TEXT:return(0,y.t)("visual_bell.copy_link_to_text");case l.Z6A.TABLE:return(0,y.t)("visual_bell.copy_link_to_table");case l.Z6A.WASHI_TAPE:return(0,y.t)("visual_bell.copy_link_to_washi_tape");case l.Z6A.SHAPE_WITH_TEXT:return(0,y.t)("visual_bell.copy_link_to_shape");case l.Z6A.INSTANCE:return(0,y.t)("visual_bell.copy_link_to_instance");default:return(0,y.t)("visual_bell.copy_link")}}(this.state.nodeTypeForCopyLinkText);if(s&&a){let e=(0,L.getActiveTSSceneGraph)().get(a);if(e)return(0,y.t)("copy_to_clipboard.slides.link_to_slide_copied_to_clipboard",{name:e.name})}})();this.props.dispatch(ij.S({fileKey:this.props.openFile.key,url:r,label:e,source:iH.d.FULLSCREEN_CONTEXT_MENU,visualBellMessageOverride:d}))}}}getCopyHyperlinkMenu(){let e=(()=>{let e=this.state.hyperlink;if(!e||""===e)return null;if(e.startsWith("mailto:")){let t=e.substring(7);if(t)return{displayText:(0,y.t)("fullscreen_actions.copy-email",{email:t}),linkToCopy:t,visualBellText:(0,y.t)("visual_bell.copy_email",{email:t})}}else if(e.startsWith("tel:")){let t=e.substring(4);if(t)return{displayText:(0,y.t)("fullscreen_actions.copy-phone",{number:t}),linkToCopy:t,visualBellText:(0,y.t)("visual_bell.copy_phone",{number:t})}}else{let t=iF(e);if(t)return{displayText:(0,y.t)("fullscreen_actions.copy-hyperlink",{hyperlink:t}),linkToCopy:e,visualBellText:(0,y.t)("visual_bell.copy_hyperlink",{hyperlink:t})}}})();return e?{name:"copy-hyperlink",displayText:e.displayText,callback:()=>(0,ej.UA)(this.props.dispatch,e.linkToCopy,"ContextMenu",e.visualBellText)}:null}getImageToProfilePicture(){if(!this.props.user||!this.props.fillPaints||(0,eC.gl)(this.props.fillPaints))return null;let e=this.props.fillPaints.findIndex(e=>"IMAGE"===e.type);if(e<0)return null;let t=this.props.fillPaints[e];return{name:"set-image-as-profile-picture",args:{label:"Set image as profile picture"},flags:["view_restricted","whiteboard"],featureFlags:["figjam_canvas_image_to_avatar"],callback:()=>{(0,ig.V8)(t,this.props.user,this.props.dispatch)}}}getMaybeEmbedOrLinkPreviewWidgetMenu(){if(!this.selectedEmbedOrLinkPreviewHasValidUrl())return null;let e=this.props.embedData?.url||this.props.embedData?.srcUrl||this.props.linkPreviewData?.url,t=iF(decodeURIComponent(e));return{name:"labeled-menu-item",args:{label:(0,y.t)("fullscreen_actions.copy-hyperlink",{hyperlink:t})},callback:()=>{!function(e,t){let n=decodeURIComponent(t);(0,nl.Dk)(n),(0,iD.Rm)(iP.yc.COPY_LINK,n),e(v.F.enqueue({type:"copy-preview",message:(0,y.t)("visual_bell.copy_hyperlink",{hyperlink:iF(n)}),error:!1}))}(this.props.dispatch,e)}}}getMaybeEmbedDeactivateMenu(){return this.props.widgetSelectionInfo?.pluginID===iz.k.EMBED_WIDGET&&l.Ez5&&this.props.widgetSelectionInfo.widgetID===l.Ez5.embedUiState().activeEmbedData.getCopy().embedNodeId?{name:"labeled-menu-item",args:{label:"Deactivate preview"},callback:()=>{l.glU?.deactivateEmbed()}}:null}getExportVideo(){if(!this.props.fillPaints||(0,eC.gl)(this.props.fillPaints))return null;let e=this.props.fillPaints.find(e=>"VIDEO"===e.type);if(!e)return null;let t=this.props.openFile?.key;return{action:"export-selected-video",flags:["view_restricted","whiteboard","design"],platforms:["!ipad"],displayText:(0,y.t)("fullscreen.context_menu.export_selected_video"),callback:(n,i,s)=>{iv({paint:e,fileKey:t,dispatch:s})}}}getCombineVideoStack(){return{action:"combine-selected-video-stack",flags:["edit","design"],platforms:["!ipad"],displayText:(0,y.t)("fullscreen.context_menu.combine_selected_video_stack"),callback:async()=>{let e=Object.keys(this.props.sceneGraphSelection);if(1!==e.length||!e[0])return;let t=this.props.sceneGraph.get(e[0]);if(!t)return;let n=t.childrenNodes.map(e=>{let t=l.ruz?.getTopmostVideoIndex(e.id)??void 0;if(void 0!==t)return e.fills[t]?.video}).filter(e=>!!e),i=(await Promise.all(n.map(e=>(0,i7.f)(e)))).filter(e=>!!e),s=await (0,i7.M)(i);s&&em.l7.ai("combine-selected-video-stack",()=>{if(!l.ruz)return;let e=(0,L.getActiveTSSceneGraph)(),t=ex.Y5.getViewportInfo(),n=e.createNode("RECTANGLE");n.size={x:1280,y:720},n.x=t.offsetX-n.size.x/2,n.y=t.offsetY-n.size.y/2,l.ruz.insertVideoInNode(n.id,s,(0,y.t)("fullscreen.context_menu.combine_selected_video_stack")),ex.Y5.triggerAction("commit")})},featureFlags:["aip_mw_video"]}}selectedDefaultLibraryComponents(){let e=Object.keys(this.props.sceneGraphSelection);if(0===e.length)return!1;let t=this.props.sceneGraph.get(e[0])?.symbolId;if(!t)return!1;let n=this.props.sceneGraph.get(t)?.sourceLibraryKey;return!!n&&(0,t2.td)(this.props.library.defaultPublished,n)}getMoveToMenu(){return this.state.pageItems.length>=1?{action:"page-move-to-menu",flags:["edit"],children:this.state.pageItems,name:"page-move-to-menu"}:null}getFigJamRemovePluginActionsMenu(){if(this.props.selectedView.editorType===T.nT.Design)return null;let t=e=>this.props.dispatch(ix.af({id:e,resourceType:iY.bD.PLUGIN})),n=(0,iW.vA)(this.props.pluginRelaunchData,this.props.publishedPlugins,this.props.localExtensions,this.props.currentOrgId,this.props.numSelected||0,(n,i)=>e.refreshCache.debounceRefresh(n,()=>t(n),i),iJ.FW.FIGJAM),i=[],s=new Set;for(let e of n)s.has(e.pluginTypeAndID)||(i.push({name:e.plugin.name,plugin_id:e.plugin.plugin_id}),s.add(e.pluginTypeAndID));return 0===i.length?null:{name:"remove-plugin-actions",children:[...i.map(({name:e,plugin_id:t})=>({name:"plugins-menu-item",callback:()=>l.NfO?.removeRelaunchDataFromSelection(t),args:{extensionName:e}})),{separator:!0},{name:"remove-all-plugin-actions",callback:()=>i.map(({plugin_id:e})=>l.NfO?.removeRelaunchDataFromSelection(e))}]}}getMainComponentActionsMenu(){if(this.props.isLimitedDevMode)return null;let e=(0,e$.Yh)(this.props.appModel,"find-symbol")&&!this.selectedDefaultLibraryComponents(),t=(0,e$.Yh)(this.props.appModel,"push-changes-to-main"),n=(0,e$.Yh)(this.props.appModel,"restore-symbol-or-state-group"),i=(0,e$.Yh)(this.props.appModel,"add-variant"),s=(0,e$.Yh)(this.props.appModel,"publish-selection"),a=[e,t,n,i,s].filter(Boolean).length;if(0===a)return null;if(1===a){if(e)return{action:"find-symbol"};if(i)return{action:"add-variant",flags:["edit"]};if(s)return{action:"publish-selection",flags:["edit"]}}return{action:"main-component",children:[{action:"find-symbol"},{action:"push-changes-to-main",flags:["edit"]},{action:"restore-symbol-or-state-group",flags:["edit"]},{action:"publish-selection",flags:["edit"]},{action:"add-variant",flags:["edit"]}]}}getTableCellMenu(){let e=(0,e$.Yh)(this.props.appModel,"delete-table-contents"),t=(0,e$.Yh)(this.props.appModel,"delete-current-table-row")||(0,e$.Yh)(this.props.appModel,"delete-current-table-column");return[{action:"move-table-row-up",flags:["edit"]},{action:"move-table-row-down",flags:["edit"]},{action:"move-table-column-left",flags:["edit"]},{action:"move-table-column-right",flags:["edit"]},{separator:!0},{action:"add-table-column-before",flags:["edit"]},{action:"add-table-column-after",flags:["edit"]},{separator:!0},{action:"add-table-row-above",flags:["edit"]},{action:"add-table-row-below",flags:["edit"]},{separator:!0},{action:"delete-table-contents",flags:["edit"],shortcutText:e&&!t?"\u232B":void 0},{action:"delete-current-table-column",flags:["edit"],shortcutText:!e&&t?"\u232B":void 0},{action:"delete-current-table-row",flags:["edit"],shortcutText:!e&&t?"\u232B":void 0}]}getCopyPasteMenu(){let e;let t=window.FigmaMobile,n=!x.Ay.safari||!!t?.readClipboardData,s=!this.props.isObjectsPanelMenu&&!this.props.isSingleSlideViewCarousel&&!this.props.isBuzzCarousel&&n,a=this.props.isTextEditModeMenu,r=(0,i2.P5)(),l=(0,i3.C7)()&&this.props.hasFragmentSearchPermission,d=this.props.isEligibleForDesignToSites,c=this.props.shouldShowSendToMakeFromDesign??!1,u=this.props.shouldShowSendToMakeFromFigJam??!1,p=(0,e$.Yh)(this.props.appModel,"send-selection-to-buzz-from-design"),m=[d,c,p].filter(Boolean).length>1&&this.props.shouldConsolidateSendToEntryPoints(),h=[{action:"copy-text"},{action:"copy-as-code",children:[{action:"copy-as-css"},{action:"copy-as-css-recursive"},{action:"copy-as-ios"},{action:"copy-as-android"},...!this.props.canAccessDevMode&&this.props.canAccessDevModeEntryPoint?[{separator:!0},{render:()=>(0,i.jsx)(n8,{}),optionHeight:40}]:[]]},{action:"copy-as-svg"},{action:"copy-as-png"},...this.props.canCopyLink?[this.getCopyLinkMenu()]:[],{separator:!0},{action:"copy-properties",flags:["view_restricted"]},{action:"paste-properties",flags:["edit"]}],f=x.Ay.windows?"Ctrl+":"\u2318";switch(this.props.selectedView.editorType){case T.nT.Design:case T.nT.Illustration:case T.nT.Figmake:case T.nT.Sites:case T.nT.Slides:case T.nT.Cooper:{let t=[c?{...iK.V6,...m?{name:"figma-make",iconType:"figmake",alwaysShowCheckMarkOffset:!0}:{name:"send-to-make-from-design"}}:null,p?{...m?{name:"figma-buzz",iconType:"buzz",alwaysShowCheckMarkOffset:!0}:{action:"send-selection-to-buzz-from-design"},flags:["edit","design"],callback:(e,t,n)=>{(0,im.rN)(n,(0,im.VY)({openFile:this.props.openFile,fileVersion:this.props.fileVersion}),iZ.f6.SEND_SELECTION_TO_BUZZ_FROM_DESIGN_CONTEXT_MENU)}}:null,d?{...sh,...m?{name:"figma-sites",iconType:"sites",alwaysShowCheckMarkOffset:!0}:{name:"copy-to-figma-sites"}}:null];e=[navigator.clipboard&&navigator.clipboard.write?{action:"copy",shortcutText:`${f}C`}:null,s?{action:"paste-here",flags:["edit"],displayText:(0,y.t)("fullscreen_actions.paste-here"),shortcutText:a?`${f}V`:void 0}:this.props.isSingleSlideViewCarousel?{action:"paste",flags:["edit"],displayText:(0,y.t)("fullscreen_actions.paste"),shortcutText:`${f}V`}:null,n?{action:"paste-to-replace",flags:["edit"],displayText:a?(0,y.t)("fullscreen_actions.paste-and-match-style"):void 0,shortcutText:a?`${f}\u21E7V`:void 0}:null,{action:"copy-paste-menu",flags:["edit"],children:h},{action:"copy-as-menu",flags:["!edit"],children:h},{action:"duplicate-in-place",flags:["edit","slides","cooper"],displayText:(0,y.t)("fullscreen_actions.duplicate-in-place"),shortcutText:`${f}D`},...m?[{name:"send-to",children:(0,il.WI)(t)}]:t,r||l?{action:"find-inspiration",flags:["edit","!slides","!cooper"]}:null,(0,o.kc)().asset_suggestions_inspect_fragment?{action:"inspect-fragment",flags:["!slides","!cooper"]}:null];break}case T.nT.DevHandoff:e=[navigator.clipboard&&navigator.clipboard.write?{action:"copy",shortcutText:`${f}C`}:null,this.props.isLimitedDevMode?null:{action:"copy-text"},this.props.isLimitedDevMode?null:{action:"copy-as-svg"},this.props.isLimitedDevMode?null:{action:"copy-as-png"},this.props.isLimitedDevMode?null:{action:"copy-layer-name"},this.props.canCopyLink?this.getCopyLinkMenu():null,c?{...iK.Hm}:null];break;case T.nT.Whiteboard:e=[navigator.clipboard&&navigator.clipboard.write?{action:"copy",shortcutText:`${f}C`}:null,s?{action:"paste",flags:["edit"],displayText:(0,y.t)("fullscreen_actions.paste"),shortcutText:`${f}V`}:null,n?{action:"paste-to-replace",flags:["edit"],displayText:(0,y.t)("fullscreen_actions.paste-to-replace")}:null,u?{...iK.pe,action:"send-to-make-from-figjam"}:null];break;default:e=[navigator.clipboard&&navigator.clipboard.write?{action:"copy",shortcutText:`${f}C`}:null,s?{action:"paste",flags:["edit"],displayText:(0,y.t)("fullscreen_actions.paste"),shortcutText:`${f}V`}:null,n?{action:"paste-to-replace",flags:["edit"],displayText:(0,y.t)("fullscreen_actions.paste-to-replace")}:null]}return e}getCopyExportMenu(){return this.isFigjam()?[...this.props.canCopyLink?[this.getCopyLinkMenu(),this.getCopyHyperlinkMenu()]:[],this.getMaybeEmbedOrLinkPreviewWidgetMenu(),this.getMaybeEmbedDeactivateMenu(),{action:"copy-as-png"},{action:"export-selection-or-current-page",flags:["view_restricted","whiteboard"],displayText:(0,y.t)("fullscreen.context_menu.export_selection")},this.getExportVideo()]:(0,o.kc)().aip_mw_video?[this.getExportVideo()]:[]}rulerGuideMenu(e,t){let n="toggle-rulers",i=[e===l._0v.Y?{action:"remove-vertical-guides"}:{action:"remove-horizontal-guides"},{separator:!0},{action:n,displayText:(0,y.t)("fullscreen.ruler_guide_context_menu.hide_rulers"),shortcutText:(0,e$.c1)(this.props.appModel.keyboardShortcuts,n)},...this.getRulerUnitSubmenu()],s=[{action:"remove-guide"}];switch(t){case l.bQY.RULER:return i;case l.bQY.GUIDE:return s;case l.bQY.BOTH:return s.concat(...i);default:return[]}}getRulerUnitSubmenu(){let e=[{action:"toggle-ruler-unit-pixels",checked:(0,F.UK)().renderRulerUnitAsPixels.getCopy()},{action:"toggle-ruler-unit-inches",checked:(0,F.UK)().renderRulerUnitAsInches.getCopy()}];return[{action:"ruler-unit-menu",flags:["cooper"],children:(0,il.WI)(e),featureFlags:["buzz_print_export"]}]}singleSlideViewCarouselMenu(){return[...this.getCopyPasteMenu(),{separator:!0},{action:"delete-selection",flags:["slides"]},{separator:!0},{action:"create-slide",flags:["slides"]},{action:"create-row",flags:["slides"],featureFlags:["slide_chapters"]},{action:"select-all-slides",flags:["slides"]},...this.skipSlidesMenu()]}isSelectedElementASlide(){let e=this.getSelectionGuid();if(!e)return!1;let t=(0,L.getActiveTSSceneGraph)().get(e);return t?.type==="SLIDE"}skipSlidesMenu(){let e=(()=>{for(let e of Object.keys(this.props.sceneGraphSelection)){let t=(0,L.getActiveTSSceneGraph)().get(e);if(!(0,io.Y)(t))return!1}return!0})(),t=Object.keys(this.props.sceneGraphSelection).length>1;return e?[{separator:!0},(()=>{for(let e of Object.keys(this.props.sceneGraphSelection)){let t=(0,L.getActiveTSSceneGraph)().get(e);if(!(0,io.Y)(t)||!t.isSkippedSlide)return!1}return!0})()?{action:t?"unskip-slides":"unskip-slide",flags:["slides"]}:{action:t?"skip-slides":"skip-slide",flags:["slides"]}]:[]}slidesObjectAnimationMenu(){return(()=>{for(let e of Object.keys(this.props.sceneGraphSelection)){let t=(0,L.getActiveTSSceneGraph)().get(e);if(!t||!t.isInSlide)return!1}return!0})()?[{action:"add-slide-object-animation",flags:["edit","slides"]}]:[]}buzzCarouselMenu(){return[...this.getCopyPasteMenu(),{separator:!0},{action:"delete-selection",flags:["cooper"]}]}sitesSemanticTagMenu(){let e=this.props.accessibilityPanelConfig;return e.tagEditable?{name:"change-tag",children:e.tagOptions.map(t=>{if("divider"in t)return{separator:!0};let n=t.value,i=n.toLowerCase(),s=(0,i8.K3)(n),a=e.accessibleHTMLTag===i8._I.AUTO?e.tagDefaultValue===n:e.accessibleHTMLTag===n;return{name:i,displayText:s,sideText:i,sideTextClassname:sf.Rc,rightJustifySideText:!0,callback:()=>{e.setAccessibleHTMLTag(n)},checked:a}}),flags:["edit","sites"]}:null}contextMenu(){let{objectItems:e,relatedComponentMenu:t,relatedStateMenu:n}=this.state,s=this.props.appModel,a=this.props.selectedView.editorType===T.nT.Design,r=this.props.selectedView.editorType===T.nT.Slides,d=(0,i9.Vj)(this.props.selectedView),c=this.props.selectedView.editorType===T.nT.Figmake,u=this.props.selectedView.editorType===T.nT.Cooper,p=this.props.selectedView.editorType===T.nT.Illustration,m=(a||d||c||p)&&(0,e$.Yh)(this.props.appModel,"select-node-menu")&&!this.props.isObjectsPanelMenu&&e.length>1,h=this.props.isObjectsPanelMenu&&(0,e$.Yh)(this.props.appModel,"rename-selection"),f=h&&this.props.hasAIPermission&&(0,i3.Ii)(),g=window.FigmaMobile,x=sT(s.showComments,this.props.selectedView,this.props.viewportInfo,this.props.clientX,this.props.clientY,this.props.dispatch,g?.requestToAddDraftCommentPin),_=(0,e$.Yh)(this.props.appModel,"swap-to-related-symbol"),v=(0,e$.Yh)(this.props.appModel,"swap-to-related-state"),b=this.props.isPrototypeCanvasEditUiVisible?[{separator:!0},{action:"remove-interactions-on-selection",flags:["edit"]},{action:"add-prototype-starting-point",flags:["edit"]},{action:"delete-prototype-starting-point",flags:["edit"]}]:[],C=this.getCopyPasteMenu(),j=this.getCopyExportMenu(),k=[m?{action:"select-node-menu",children:e,name:"select-node-menu"}:null,this.getMoveToMenu(),{action:"move-to-file",flags:["edit"]}],w=!a&&!p,E=r||d&&!(0,o.kc)().sites_plugin_api||c||u?[]:[w?{separator:!0}:null,this.props.userCanViewPlugins?(0,iI.qz)(this.props,"contextmenu"):null,this.props.appModel.isReadOnly||!this.props.userCanViewWidgets?null:(0,iN.Vd)(this.props,"contextmenu")],S=(0,o.kc)().internal_only_debug_tools,I=S&&1===this.props.numSelected,N=this.props.spellCheckPreference,A=this.props.appModel.spellCheckSuggestions,L=sa(this.props.hasSlidesAiTextEnabled),M=ss(this.props.dispatch,L);return[...N||this.props.appModel.activeTextReviewPlugin?(0,iG.Ax)(A,this.props.editorType):[],{separator:!0},...this.getTableCellMenu(),{separator:!0},...x,...C,{separator:!0},{action:"delete-selection",flags:["whiteboard","slides"]},{separator:!0},M,{separator:!0},this.getCombineVideoStack(),{separator:!0},...j,{separator:!0},...k,{action:"bring-to-front",flags:["edit"]},{action:"bring-forward",flags:["edit","slides"]},{action:"send-backward",flags:["edit","slides"]},{action:"send-to-back",flags:["edit"]},{separator:!0},{action:"create-webpage",flags:["edit","sites"]},{action:"set-as-site-homepage",flags:["edit","sites"]},{action:"convert-responsive-set-to-webpage",flags:["edit","sites"]},{action:"create-responsive-node-set",featureFlags:["sts_responsive_node_sets"],flags:["edit","sites"]},{action:"replace-selected-frame-with-section",flags:["edit","!slides"]},{action:"replace-selected-section-with-frame",flags:["edit","!slides"]},{action:"group-selection",flags:["edit"]},{action:"frame-selection",flags:["edit"]},{action:"create-section-from-selection",flags:["edit","!slides"]},{action:"ungroup-selection",flags:["edit"],displayText:(0,y.t)("fullscreen.context_menu.ungroup")},h?{action:"rename-selection",flags:["edit"],displayText:(0,y.t)("fullscreen.context_menu.rename")}:null,f?{name:"auto-rename-layers",flags:["edit"],displayText:(0,y.t)("fullscreen.context_menu.auto_rename_layers"),rightIcon:(0,i.jsx)(tB.yi,{variant:i4.x.ON_MENU,helpUrlVariant:tR.JT.AUTO_RENAME_LAYERS}),callback:()=>{(0,i5.$I)({moduleToOpen:{type:"custom",module:(0,i.jsx)(i6.A,{source:l.uQ6.CONTEXT_MENU}),beforeModuleOpen:()=>{(0,tP.B3)(tR.JT.AUTO_RENAME_LAYERS),(0,tP.Ag)(tR.JT.AUTO_RENAME_LAYERS,tT.Ay,{source:l.uQ6.CONTEXT_MENU,overwriteNames:!1})},name:eZ.Sn.RENAME_LAYERS_TOAST},trackingData:{source:"selection_context_menu_rename_layers"}})}}:null,{action:"flatten-selection",flags:["edit"],displayText:(0,y.t)("fullscreen.context_menu.flatten")},p?{action:"break-vector-network-into-paths",flags:["edit"],displayText:(0,y.t)("fullscreen_actions.split_vector")}:null,p?{action:"add-transform-modifier-to-selection",flags:["edit"],displayText:(0,y.t)("fullscreen.context_menu.wrap_with_transform")}:null,{action:"outline-stroke",flags:["edit"],shortcutText:(0,e$.c1)(this.props.appModel.keyboardShortcuts,"outline-stroke")},{action:"mask-selection",flags:["edit"],get displayText(){let e=(0,iT.P)();return(0,iS.A)(e)}},p?{action:"create-brush-menu",flags:["edit"],displayText:(0,y.t)("fullscreen_actions.create-brush-menu"),children:[{action:"create-stretch-brush"},{action:"create-scatter-brush"}]}:null,{action:"set-as-primary-breakpoint",flags:["edit"],displayText:(0,y.t)("fullscreen_actions.set-as-primary-breakpoint")},this.props.canSetAsFavicon&&!this.props.appModel.isReadOnly?this.getFaviconMenu(this.getSelectionGuid()===this.props.sceneGraph.getCurrentPage()?.webMetadata?.faviconID):null,this.props.canSetAsFileThumbnail&&!this.props.appModel.isReadOnly?this.getFileThumbnailMenu(this.getSelectionGuid()===this.props.openFile?.thumbnailGuid):null,(0,o.kc)().dse_library_pg_thumbnails&&this.props.canSetAsPageThumbnail&&!this.props.appModel.isReadOnly?this.getPageThumbnailMenu():null,{separator:!0},{action:this.props.propertiesPanelShouldShowRemoveAutoLayout?"unstack-selection":"stack-selection",flags:["design","edit","slides"]},(0,iw.r)({msalEnabled:(0,e$.Yh)(this.props.appModel,"run-multi-stack-auto-layout")&&!this.props.propertiesPanelShouldShowRemoveAutoLayout,destroyAllALEnabled:(0,e$.Yh)(this.props.appModel,"destroy-all-auto-layout"),resizeToFitEnabled:(0,e$.Yh)(this.props.appModel,"resize-to-fit")}),{action:"create-symbol",flags:["edit"]},this.sitesSemanticTagMenu(),{action:"create-code-layer-from-design",flags:["edit","sites"]},{action:"create-make-from-design",flags:["edit","design"],featureFlags:["bake_canvas"],displayText:(0,y.t)("fullscreen_actions.create-make-prototype")},{action:"edit-code",flags:["edit","sites"]},{action:"restore-design-in-place-from-code",flags:["edit","sites"]},{action:"create-template",flags:["edit"],featureFlags:["dse_templates_proto"]},...(0,iO.D)()?[{action:"convert-to-slot",flags:["edit"]},{action:"convert-slot-to-frame",flags:["edit"]},{action:"group-selection-into-slot",flags:["edit"]}]:[],_&&t?{name:"swap-to-related-symbol",flags:["edit"],childDropdown:t}:null,v&&n?{name:"swap-to-related-state",flags:["edit"],childDropdown:n}:null,{action:"reset-symbol",flags:["edit"]},{action:"reset-fauxverride",flags:["edit","sites"]},{action:"reset-responsive-container-overrides",flags:["edit","sites"]},{action:"detach-instance",flags:["edit","design","sites","slides"]},this.getMainComponentActionsMenu(),{action:"link-to-component",flags:["edit"]},{displayText:(0,y.t)("dev_handoff.layers.add_annotation"),flags:["design","dev_handoff"],action:"add-annotation"},{action:"remove-annotations",flags:["dev_handoff","design"]},...w?[]:E,this.getFigJamRemovePluginActionsMenu(),{separator:!0},{action:"toggle-shown-for-selected-nodes",flags:["edit"],displayText:(0,y.t)("fullscreen.context_menu.show_hide")},{action:"toggle-locked-for-selected-nodes",flags:["edit"],displayText:(0,y.t)("fullscreen.context_menu.lock_unlock")},{action:"unlock-all",flags:["edit","whiteboard"]},{separator:!0},{action:"flip-horizontal",flags:["edit"]},{action:"flip-vertical",flags:["edit"]},{separator:!0},...w?E:[],{separator:!0},this.getImageToProfilePicture(),...b,...r?this.skipSlidesMenu():[],{separator:!0},...r?this.slidesObjectAnimationMenu():[],(0,o.kc)().dt_ccv2_on_canvas?{action:"find-codebase-suggestions",flags:[]}:null,I?{separator:!0}:null,I?{action:"debug-inspect-layer-figma-scope"}:null,S?{action:"debug-print-as-test-code"}:null]}getActionSource(){return this.props.isTextEditModeMenu?"canvas_context_menu":this.props.isObjectsPanelMenu?"panel":this.props.isRulerGuideMenu||this.props.isSelectLayerMenu?void 0:"canvas_context_menu"}render(){let e=this.props.clientX,t=this.props.clientY,n=(0,il.WI)(this.props.isTextEditModeMenu?this.textEditModeMenu():this.props.isSelectLayerMenu?this.selectLayerMenu():this.props.isRulerGuideMenu?this.rulerGuideMenu(this.props.axis,this.props.rulerGuideContextMenuType):this.props.isSingleSlideViewCarousel?this.singleSlideViewCarouselMenu():this.props.isBuzzCarousel?this.buzzCarouselMenu():this.contextMenu());return sI(n,this.getActionSource()),(0,i.jsx)("div",{className:`${eb.Dm}`,children:(0,i.jsx)(nU.Q,{appModel:this.props.appModel,dispatch:this.props.dispatch,isLimitedDevMode:this.props.isLimitedDevMode,menuItems:n,recordingKey:"layerMenu",removeDisabledItems:!0,sceneGraph:this.props.sceneGraph,sceneGraphSelection:this.props.sceneGraphSelection,selectedView:this.props.selectedView,showPoint:!1,targetRect:{width:10,height:10,left:e+100,top:t,right:e+110,bottom:t-10}})})}};function sb(e){let t=e.mirror.sceneGraph.getCurrentPage()?.guid;return e.library.publishableSymbols.some(e=>e.containingFrame.pageId===t)||e.library.publishableStateGroups.some(e=>e.containingFrame.pageId===t)}function sC(e){let t=(0,a.d4)(tA.tB),n=(0,nQ.Tg)(),s=(0,t1._X)({subscribeToUpdates_expensive:!0}),r=(0,iR.ud)(),l=(0,n$._I)(),o=(0,n$.U4)(),c=(0,a.d4)(e=>e.mirror.appModel.activeTextReviewPlugin),u=sS(),p=(0,a.wA)(),m=(0,nQ.Be)(),h=m.orgPlugins,f=(0,iA.h)("plugin"),g=(0,B.J2)((0,F.UK)().spellCheckPreference),x=(0,d.R)(e=>{let t=Object.keys(e.mirror.sceneGraphSelection),n=1===t.length?(0,L.getActiveTSSceneGraph)().get(t[0]):null,i=null!=n&&("FRAME"===n.type&&!n.resizeToFit||"SYMBOL"===n.type||"SECTION"===n.type||"RESPONSIVE_SET"===n.type||"WEBPAGE"===n.type),s=null!=n&&"FRAME"===n.type&&n.isTopLevelFrame(),a=e.selectedView.editorType,r=i&&!n?.isInstanceSublayer;return{appModel:e.mirror.appModel,publishedPlugins:e.publishedPlugins,publishedWidgets:e.publishedWidgets,localExtensions:e.localPlugins,userCanViewPlugins:(0,tL.Eh)(e),userCanViewWidgets:(0,nQ.BE)(e),userCanRunExtensions:(0,tL.cb)(e),sceneGraph:e.mirror.sceneGraph,sceneGraphSelection:e.mirror.sceneGraphSelection,library:e.library,masterSymbolGUID:e.mirror.selectionProperties.masterSymbolGUID,propertiesPanelShouldShowRemoveAutoLayout:e.mirror.selectionProperties.propertiesPanelShouldShowRemoveAutoLayout,currentOrgId:e.currentUserOrgId,org:e.currentUserOrgId?e.orgById[e.currentUserOrgId]:null,user:e.user,fillPaints:e.mirror.selectionProperties.fillPaints,canSetAsFavicon:s,canSetAsFileThumbnail:r,canSetAsPageThumbnail:r&&sb(e),canCopyLink:e.mirror.selectionProperties.canCopyLinkToSelection,fileVersion:e.fileVersion,stateGroupSelectionInfo:e.mirror.selectionProperties.stateGroupSelectionInfo,widgetSelectionInfo:e.mirror.selectionProperties.selectedWidgetInfo,publishedCanvasWidgetVersions:e.publishedCanvasWidgetVersions,embedData:e.mirror.selectionProperties.embedData,linkPreviewData:e.mirror.selectionProperties.linkPreviewData,pluginRelaunchData:e.mirror.selectionProperties.pluginRelaunchData,numSelected:e.mirror.selectionProperties.numSelected,attributionContextKey:e.sharingAttributionContextKey,editorType:a,isDevHandoff:a===T.nT.DevHandoff,isLimitedDevMode:(0,iQ.$A)(e.selectedView)&&!(0,n$.tn)(e)}}),_=(0,i1.PE)(),y=(0,st.Ne)(),v=(0,i2.LC)(),b=sp(),C=(0,iM.V)(),j=(0,iM.J)(),k=sN(),w=(0,ip.to)(),E=(0,i8.bo)();return(0,i.jsx)(sv,{...e,...x,accessibilityPanelConfig:E,activeTextReviewPlugin:c,allSavedPlugins:m.plugins,canAccessDevMode:l,canAccessDevModeEntryPoint:o,currentOrgId:x.currentOrgId,dispatch:p,editorType:x.editorType,fileByKey:r,hasAIPermission:_,hasFragmentSearchPermission:v,hasSlidesAiTextEnabled:y,isCooper:w,isEligibleForDesignToSites:b,isPrototypeCanvasEditUiVisible:u,openFile:t,orgPrivatePlugins:f,orgSavedPlugins:h,recentlyUsedPlugins:n,shouldConsolidateSendToEntryPoints:k,shouldShowSendToMakeFromDesign:C,shouldShowSendToMakeFromFigJam:j,spellCheckPreference:g,viewportInfo:s})}sv.displayName="SelectionContextMenu",sv.refreshCache=new iq.O(ic.A.duration(1,"day"));var sj=(e=>(e.SINGLE_SLIDE_VIEW="single_slide_view",e.COOPER_CAROUSEL="cooper_carousel",e))(sj||{});function sk(e){let t=(0,a.d4)(tA.tB),n=(0,nQ.Tg)(),s=(0,t1._X)({subscribeToUpdates_expensive:!0}),r=(0,iR.ud)(),l=(0,n$._I)(),o=(0,n$.U4)(),c=(0,a.d4)(e=>e.mirror.appModel.activeTextReviewPlugin),u=sS(),p=(0,a.wA)(),m=(0,nQ.Be)(),h=m.orgPlugins,f=(0,iA.h)("plugin"),g=(0,B.J2)((0,F.UK)().spellCheckPreference),x=(0,d.R)(e=>{let t=Object.keys(e.mirror.sceneGraphSelection),n=1===t.length?(0,L.getActiveTSSceneGraph)().get(t[0]):null,i=null!=n&&("FRAME"===n.type&&!n.resizeToFit||"SYMBOL"===n.type||"SECTION"===n.type),s=e.selectedView.editorType,a=i&&!n?.isInstanceSublayer;return{appModel:e.mirror.appModel,publishedPlugins:e.publishedPlugins,publishedWidgets:e.publishedWidgets,localExtensions:e.localPlugins,userCanViewPlugins:(0,tL.Eh)(e),userCanViewWidgets:(0,nQ.BE)(e),userCanRunExtensions:(0,tL.cb)(e),sceneGraph:e.mirror.sceneGraph,sceneGraphSelection:e.mirror.sceneGraphSelection,library:e.library,masterSymbolGUID:e.mirror.selectionProperties.masterSymbolGUID,propertiesPanelShouldShowRemoveAutoLayout:e.mirror.selectionProperties.propertiesPanelShouldShowRemoveAutoLayout,currentOrgId:e.currentUserOrgId,org:e.currentUserOrgId?e.orgById[e.currentUserOrgId]:null,user:e.user,fillPaints:e.mirror.selectionProperties.fillPaints,canSetAsFavicon:!1,canSetAsFileThumbnail:a,canSetAsPageThumbnail:a&&sb(e),canCopyLink:e.mirror.selectionProperties.canCopyLinkToSelection,fileVersion:e.fileVersion,stateGroupSelectionInfo:e.mirror.selectionProperties.stateGroupSelectionInfo,widgetSelectionInfo:e.mirror.selectionProperties.selectedWidgetInfo,publishedCanvasWidgetVersions:e.publishedCanvasWidgetVersions,embedData:e.mirror.selectionProperties.embedData,linkPreviewData:e.mirror.selectionProperties.linkPreviewData,pluginRelaunchData:e.mirror.selectionProperties.pluginRelaunchData,numSelected:e.mirror.selectionProperties.numSelected,attributionContextKey:e.sharingAttributionContextKey,editorType:s,isDevHandoff:s===T.nT.DevHandoff,isLimitedDevMode:(0,iQ.$A)(e.selectedView)&&!(0,n$.tn)(e)}}),_=(0,i1.PE)(),y=(0,st.Ne)()&&"single_slide_view"===e.carouselType,v=(0,i2.LC)(),b=sp(),C=sN(),j=(0,ip.to)(),k=(0,i8.bo)();return(0,i.jsx)(sv,{...e,...x,accessibilityPanelConfig:k,activeTextReviewPlugin:c,allSavedPlugins:m.plugins,canAccessDevMode:l,canAccessDevModeEntryPoint:o,dispatch:p,editorType:x.editorType,fileByKey:r,hasAIPermission:_,hasFragmentSearchPermission:v,hasSlidesAiTextEnabled:y,isBuzzCarousel:"cooper_carousel"===e.carouselType,isCooper:j,isEligibleForDesignToSites:b,isPrototypeCanvasEditUiVisible:u,isSingleSlideViewCarousel:"single_slide_view"===e.carouselType,openFile:t,orgPrivatePlugins:f,orgSavedPlugins:h,recentlyUsedPlugins:n,shouldConsolidateSendToEntryPoints:C,spellCheckPreference:g,viewportInfo:s})}function sw({expandElement:e,guid:t,...n}){let s=(0,a.d4)(e=>e.mirror.sceneGraphSelection),r=(0,a.d4)(e=>e.mirror.appModel),l=(0,a.d4)(e=>e.mirror.sceneGraph),o=(0,k.hA)()??void 0,d=(0,tA.q5)(),c=(0,a.d4)(e=>e.mirror.selectionProperties.canCopyLinkToSelection),u=(0,eK.Fk)((e,t)=>{let n=e.get(t);return n?n.canHaveAnnotation:null},t),p=(0,i$.s9)(),m=(0,a.wA)(),h=x.Ay.windows?"Ctrl+":"\u2318",f=[e?{name:"expand-element",callback:e}:null,{separator:!0},u&&p?{name:"add-annotation",action:"add-annotation"}:null,{separator:!0},navigator.clipboard&&navigator.clipboard.write?{action:"copy",shortcutText:`${h}C`}:null,{action:"copy-text"},{action:"copy-as-svg"},{action:"copy-as-png"},{action:"copy-layer-name"},c?{name:"copy-link",args:{label:(0,y.t)("fullscreen.context_menu.copy_link",{editorSpecifierString:""})},callback:()=>{if(!d)return;let e=(0,iV.jN)({file:d,nodeId:t,isDevHandoff:!0,devModeFocusId:o,isReadOnly:!0,isFigJam:!1,attributionContext:null});m(ij.S({fileKey:d.key,url:e,source:iH.d.FULLSCREEN_CONTEXT_MENU,visualBellMessageOverride:void 0}))}}:null],g=n.clientX,_=n.clientY;return(0,i.jsx)("div",{className:`${eb.Dm}`,children:(0,i.jsx)(nU.Q,{appModel:r,dispatch:m,menuItems:f.filter(ih.t),recordingKey:"codeMenu",removeDisabledItems:!0,sceneGraph:l,sceneGraphSelection:s,selectedView:n.selectedView,showPoint:!1,targetRect:{width:10,height:10,left:g+100,top:_,right:g+110,bottom:_-10}})})}function sE({...e}){let t=(0,a.d4)(e=>e.mirror.sceneGraphSelection),n=(0,a.d4)(e=>e.mirror.appModel),s=(0,a.d4)(e=>e.mirror.sceneGraph),r=(0,a.wA)(),l=x.Ay.windows?"Ctrl+":"\u2318",o=[];navigator.clipboard&&navigator.clipboard.write&&o.push({name:"copy",shortcutText:`${l}C`,callback:()=>{e.onCopyText()}});let d=e.clientX,c=e.clientY;return(0,i.jsx)("div",{className:`${eb.Dm}`,children:(0,i.jsx)(nU.Q,{appModel:n,dispatch:r,menuItems:o,recordingKey:"codeMenu",removeDisabledItems:!0,sceneGraph:s,sceneGraphSelection:t,selectedView:e.selectedView,showPoint:!1,targetRect:{width:10,height:10,left:d+100,top:c,right:d+110,bottom:c-10}})})}function sT(e,t,n,i,s,a,r){return e&&n&&t.commentsEnabled&&x.Ay.isIpadNative?[{name:"add-comment",callback:()=>{!function(e,t,n,i,s){if(!e)return;let a={x:t,y:n-sg};if(s)s({x:a.x,y:a.y,width:36.8,height:36.8});else{let t=(0,t1.$$)(e,a);i(ii.vV({anchorPosition:t})),i(ii.CX())}}(n,i,s,a,r)}},{separator:!0}]:[]}function sS(){return(0,B.ut)((0,iB.aY)(),l.FAf.DESIGN)===l.FAf.PROTOTYPE}function sI(e,t){t&&e.forEach(e=>{e&&((0,iE._o)(e)&&(e.source=t,"submenu"in e&&e.submenu&&sI(e.submenu,t)),(0,iE.TV)(e)&&e.children&&sI(e.children,t))})}function sN(){let{getConfig:e}=(0,iu.I7)("exp_send_to_new_products_consolidation");return s.useCallback(()=>e().get("enabled",!1,e=>"boolean"==typeof e),[e])}var sA=n(50536);function sL({clientX:e,clientY:t,selectedView:n}){let r=(0,a.wA)(),l=(0,a.d4)(e=>e.mirror.appModel),o=(0,tA.q5)(),d=s.useCallback(()=>{r(sA.lW({stringToCopy:(0,iV.jN)({file:o,isDevHandoff:!0,isDevModeOverview:!0,isReadOnly:!0,isFigJam:!1,attributionContext:null}),successText:(0,y.t)("permissions.copy_link_button.visual_bell.copy_summary_link")}))},[r,o]),c=[{name:"page-copy-link",displayText:(0,y.t)("dev_handoff.status.copy_summary_link"),callback:d}];return(0,i.jsx)("div",{className:`${eb.Dm}`,children:(0,i.jsx)(nU.Q,{appModel:l,menuItems:c,dispatch:r,selectedView:n,showPoint:!1,targetRect:{width:10,height:10,left:e+100,top:t,right:e+110,bottom:t-10},removeDisabledItems:!1,recordingKey:"overviewMenu"})})}function sM({pageId:e,clientX:t,clientY:n,selectedView:s}){let r=(0,a.wA)(),l=(0,a.d4)(e=>e.mirror.appModel),o=(0,eK.Fk)((e,t)=>e.get(t)?.isPageDivider,e),d=[{action:"page-copy-link",args:{nodeId:e},disabled:o}];return(0,i.jsx)("div",{className:`${eb.Dm}`,children:(0,i.jsx)(nU.Q,{appModel:l,menuItems:d,dispatch:r,selectedView:s,showPoint:!1,targetRect:{width:10,height:10,left:t+100,top:n,right:t+110,bottom:n-10},removeDisabledItems:!1,recordingKey:"pageMenu"})})}function sO(e){let t=(0,a.wA)(),n=(0,a.d4)(e=>e.mirror.appModel),s=e.clientX,r=e.clientY,l=[{name:"redistribute-gradient-stops",callback:e.redistributeStops},{separator:!0},{name:"delete-gradient-stop",callback:e.deleteStop}];return(0,i.jsx)("div",{className:`${eb.Dm}`,children:(0,i.jsx)(nU.Q,{appModel:n,menuItems:l,dispatch:t,selectedView:e.selectedView,showPoint:!1,targetRect:{width:10,height:10,left:s+100,top:r,right:s+110,bottom:r-10},removeDisabledItems:!1,recordingKey:"pageMenu"})})}var sR=n(120440),sP=n(147046),sD=n(790009),sF=n(352630);function sz({name:e,variant:t,recordingKey:n,onClick:s}){return(0,i.jsx)(sD.J,{brand:"design",mode:"dark",children:(0,i.jsx)("div",{className:"x12ulsxz xdqyycr",children:(0,i.jsx)(sF.Ih,{variant:t,recordingKey:n,onClick:s,children:e})})})}var sB=n(205917),sG=n(402767);function sU(e){return(0,i.jsx)(g.u,{label:"LinterContextMenu",children:(0,i.jsx)(sV,{...e})})}function sV({targetInViewport:e,selectedView:t}){let n=(0,a.wA)(),r=(0,a.d4)(e=>e.mirror.appModel),o=(0,L.getActiveTSSceneGraph)(),d=(0,t1.ni)(),c=(0,n$.xo)(),u=(0,s.useCallback)(()=>{(0,sG.u)({source:l.Qej.RFD_INITIAL_NUDGE}),n(sP.oB())},[n]);(0,sB.KV)(l.Qej.RFD_INITIAL_NUDGE,!0);let p=(0,s.useMemo)(()=>[{name:(0,y.t)("dev_handoff.linter.menu_title_header"),header:!0,displayTextClassName:sR.Ay.classNames(sH.title,sH.header)},{name:(0,y.t)("dev_handoff.linter.menu_title_subheader"),header:!0,displayTextClassName:sR.Ay.classNames(sH.title,sH.subheader)},{render:()=>(0,i.jsx)(sz,{name:(0,y.t)("fullscreen_actions.quick_actions.detect-violations"),variant:"primary",recordingKey:"linterDetectViolations",onClick:u}),preventDismissOnSelected:!0,preventSelectOnMouseEnter:!0,flags:["design","dev_handoff"],disabled:!!c},{render:()=>(0,i.jsx)(sz,{name:(0,y.t)("dev_handoff.linter.menu_skip_button"),variant:"secondary",recordingKey:"skipLinting",onClick:()=>n(sP.oB())}),preventDismissOnSelected:!0,preventSelectOnMouseEnter:!0,flags:["design","dev_handoff"],disabled:!!c}],[c,n,u]),m=e.origin.x+d.x,h=e.origin.y+d.y,f={left:m,top:h,right:m+e.size.x,bottom:h+e.size.y,width:e.size.x,height:e.size.y};return(0,i.jsx)("div",{className:eb.Dm,children:(0,i.jsx)(nU.Q,{appModel:r,dispatch:n,menuItems:p,minWidth:200,recordingKey:"linterMenu",removeDisabledItems:!c,sceneGraph:o,selectedView:t,showPoint:!0,targetRect:f})})}let sH={title:{ks0D6T:"xb3xe92",khDVqt:"xeaf4i8",kMwMTN:"xz16r55",$$css:!0},header:{kLKAdn:"x1iorvi4",kMv6JI:"xxrns5j",kGuDYH:"x1q8tae1",k63SB2:"x1vg90ec",kLWn49:"x1eab18d",kb6lSQ:"x1yyillh",$$css:!0},subheader:{kGO01o:"xjkvuk6",kMv6JI:"xrlp15q",kGuDYH:"x1nmd3yn",k63SB2:"xm735u9",kLWn49:"xkbmbem",kb6lSQ:"x3wk4up",$$css:!0}};var sK=n(455431),sW=n(201975),sq=n(4232),sX=n(506192),sY=n(346886);function sZ(){let e=(0,sX.Um)(),t=(0,a.wA)(),n=(0,sq.Gt)(e?.data.pluginId,e?.data.triggeredFrom),s=(0,sq.dR)(e?.data.pluginId,e?.data.triggeredFrom),r=(0,sW.t)(e?.data.pluginId,n,s);if(!e)return null;let l=e.data.target.height+e.data.target.width>0;return(0,i.jsx)(sY.j,{showPoint:l,items:r,onSelectItem:e=>{e.callback&&e.callback("",null,t)},parentRect:e.data.target,dispatch:t,lean:l?"left":"right"})}var sJ=n(846696),sQ=n(751464),s$=n(315361),s0=n(130353),s1=n(802529),s2=n(787995);let s3="status_context_menu--headerStrong--9G-Jb";function s5(e){return(0,i.jsx)(g.u,{label:"ReadyStatusContextMenu",children:(0,i.jsx)(s4,{...e})})}function s4({targetInViewport:e,nodeId:t,selectedView:n}){let r=(0,a.wA)(),u=(0,a.d4)(e=>e.mirror.appModel),p=(0,L.getActiveTSSceneGraph)(),m=(0,s$.mJ)(t),h=!!m?.hasReadyStatus,f=!!m?.hasCompletedStatus,g=h||f,x=(0,sQ.D)()&&!!m?.hasBeenEditedSinceLastStatusChange,_=(0,tA.q5)(),v=(0,n5.U)("status_label_menu"),b=(0,t1.ni)(),C=(0,n$._I)(),j=(0,n$.U4)(),k=(0,sQ.D)(),w=C&&k,E=(0,e$.Yh)(u,"set-selection-completed-status"),S=(0,e$.Yh)(u,"mark-incomplete"),I=(0,sJ.L4)(),N=(0,n0.U)(),A=(0,t$.E3)(),[,M]=(0,c.fp)(s0.wz),O=(0,z.dh)(),R=(0,tS.A0)(l.uQ6.READY_FOR_DEV),P=(0,n$.xo)(),D=(0,s.useMemo)(()=>l.w3z.isReadOnly(l.SES.NODE_STATUS),[]),F=l.w3z.canEditNodeStatus(),B=j&&D&&!C,G=(0,d.R)(e=>"fullscreen"===e.selectedView.view?{...e.selectedView,editorType:T.nT.DevHandoff,focusViewBackNavigation:{toEditorType:e.selectedView.editorType,toOverview:!1},devModeFocusId:t,overviewBackButtonTargetNodeId:O}:e.selectedView),U=(0,s.useMemo)(()=>{if(!_)return[];let e=S?{name:"status-mark-as-ready",callback:()=>{s1.z4.setNodesReady(!0,[t],"canvas",null),R&&(0,tS.R4)([t])},flags:["dev_handoff","design"],disabled:!!P}:null,s=E?{name:"status-mark-as-completed",callback:()=>{s1.z4.setNodesCompleted([t],"canvas")},flags:["dev_handoff","design"],disabled:!!P}:null,a=h?s:e,o=I?{name:"detect-violations",callback:()=>{(0,sG.u)({source:l.Qej.RFD_STATUS_MENU})},flags:["dev_handoff","design"],featureFlags:["aip_flower_garden","aip_flower_garden_ready_for_dev"],disabled:!!P}:null,d=[...o?[o]:[],...a?[a]:[]],c={name:"ready-status-copy-dev-link",callback:()=>{let e=(0,iV.jN)({file:_,nodeId:t,isDevHandoff:!0});r(ij.S({fileKey:_.key,url:e,source:iH.d.STATUS_DROPDOWN_MENU}))},flags:["dev_handoff","design"]},u=j?[{name:"ready-status-open-in-dev-mode",callback:()=>{v("handoff")},flags:["design"]},c]:[c],p={separator:!0,flags:["design","dev_handoff"]},m=[p,{render:()=>(0,i.jsx)(n7,{}),optionHeight:32,flags:["design"]}],f=w&&!s1.z4.getIsExtension()?[{name:"enter-dev-mode-focus-view",callback:()=>{N("Dev Mode Canvas Focus Entry Clicked",{nodeId:"devModeFocusId"in G?G.devModeFocusId:""}),v("handoff"),M(A===T.nT.DevHandoff?"dev_mode_canvas":"design_canvas"),r(sP.sf(G))},flags:["design","dev_handoff"]},{name:"status-copy-focus-link",callback:()=>{let e=(0,iV.jN)({file:_,nodeId:O,isDevHandoff:!0,devModeFocusId:n?.devModeFocusId??t});r(ij.S({fileKey:_.key,url:e,source:iH.d.STATUS_DROPDOWN_MENU}))},flags:["dev_handoff","design"],alwaysShowCheckMarkOffset:!1}]:u;if(!F)return[...f,...B?m:[]];let b=[...f,...d.length>0?[p,...d]:[],p,{name:"status-remove",callback:()=>{s1.z4.setNodesReady(!1,[t],"canvas",null)},flags:["dev_handoff","design"],alwaysShowCheckMarkOffset:!1,disabled:!!P},...B?m:[]];return g?x?[{name:"completed-status-remark-as-ready",displayText:(0,y.t)("dev_handoff.status.popover_title_add_a_note"),displayTextClassName:s3,children:b,showDotDotDotButton:!0},{render:()=>(0,i.jsx)(s2.A,{onResult:e=>{s1.z4.setNodesReady(!0,[t],"canvas",e??null),R&&(0,tS.R4)([t]),r(sP.oB())},useDarkMode:!0}),preventDismissOnSelected:!0,preventSelectOnMouseEnter:!0,allowClickThrough:!0,flags:["design","dev_handoff"],disabled:!!P}]:b:[{header:!0,name:(0,y.t)("dev_handoff.status.menu_title_start_handoff_title"),displayTextClassName:s3},{render:()=>(0,i.jsx)(s2.A,{onResult:e=>{s1.z4.setNodesReady(!0,[t],"canvas",e??null),R&&(0,tS.R4)([t]),r(sP.oB())},useDarkMode:!0}),flags:["design","dev_handoff"],disabled:!!P}]},[_,E,S,O,h,j,F,B,t,v,r,w,g,x,G,n?.devModeFocusId,A,M,N,R,P,I]),V=e.origin.x+b.x,H=e.origin.y+b.y,K={left:V,top:H,right:V+e.size.x,bottom:H+e.size.y,width:e.size.x,height:e.size.y};return(0,sB.KV)(l.Qej.RFD_STATUS_MENU,I&&!!(0,o.kc)().aip_flower_garden_ready_for_dev),(0,i.jsx)("div",{className:`${eb.Dm}`,children:(0,i.jsx)(nU.Q,{appModel:u,dispatch:r,menuItems:U,minWidth:176,recordingKey:"readyStatusMenu",removeDisabledItems:!P,sceneGraph:p,selectedView:n,showPoint:!0,targetRect:K})})}var s6=n(333331);function s7(e){let t=(0,a.wA)(),n=(0,d.R)(e=>({appModel:e.mirror.appModel,sceneGraph:e.mirror.sceneGraph,sceneGraphSelection:e.mirror.sceneGraphSelection})),s=(0,tA.q5)(),r=(0,s6.oA)(s?.siteMount);return(0,i.jsx)(s8,{...e,...n,openFileHasPublishedSiteMount:!!r&&"published"===r.status,dispatch:t})}class s8 extends s.PureComponent{constructor(e){super(e)}componentDidMount(){l.VDs?.setExpectingCopyCutEvent(!0)}componentWillUnmount(){l.VDs?.setExpectingCopyCutEvent(!1)}contextMenu(){let e=this.props.sceneGraphSelection,t=this.props.sceneGraph.getCurrentPage()?.siteHomepageId,n=!!t&&void 0!==e[t];return[{action:"sites-copy-link",flags:["edit"],displayText:(0,y.t)("sites.fullscreen_actions.copy-external-url"),disabled:!this.props.openFileHasPublishedSiteMount},{action:"copy-link",flags:["edit"],displayText:(0,y.t)("sites.fullscreen_actions.copy-link")},{separator:!0},{action:"rename-selection",flags:["edit"],disabled:n,displayText:(0,y.t)("fullscreen.context_menu.rename")},{action:"duplicate",flags:["edit"],displayText:(0,y.t)("sites.fullscreen_actions.duplicate-webpage")},{action:"copy",flags:["edit"]},{action:"delete-selection",flags:["edit"],disabled:n,displayText:(0,y.t)("sites.fullscreen_actions.delete-selection")},{separator:!0},{action:"set-as-site-homepage",flags:["edit"]},{action:"convert-responsive-set-to-webpage",flags:["edit"]}]}render(){let e=this.props.clientX,t=this.props.clientY,n=(0,il.WI)(this.contextMenu());return(0,i.jsx)("div",{className:`${eb.Dm}`,children:(0,i.jsx)(nU.Q,{appModel:this.props.appModel,dispatch:this.props.dispatch,isLimitedDevMode:this.props.isLimitedDevMode,menuItems:n,recordingKey:"webpageMenu",removeDisabledItems:!0,sceneGraph:this.props.sceneGraph,sceneGraphSelection:this.props.sceneGraphSelection,selectedView:this.props.selectedView,showPoint:!1,targetRect:{width:10,height:10,left:e+100,top:t,right:e+110,bottom:t-10}})})}}function s9({clientX:e,clientY:t,selectedView:n,isLayerLike:s,isInteraction:r,renameItem:l,deleteItem:o,selectOnCanvas:c}){let u=(0,a.wA)(),{sceneGraph:p,sceneGraphSelection:m}=(0,d.R)(e=>({sceneGraph:e.mirror.sceneGraph,sceneGraphSelection:e.mirror.sceneGraphSelection})),h=(0,a.d4)(e=>e.mirror.appModel),f=[];return f.push({name:"rename-selection",displayText:(0,y.t)("fullscreen.context_menu.rename"),callback:l,shortcutText:" "}),s&&f.push({name:"select-on-canvas",displayText:(0,y.t)("sites.code_layer.context_menu.select_on_canvas"),callback:c}),f.push({name:s?"delete-code-layer":r?"delete-code-interaction":"delete-code-file",callback:o}),(0,i.jsx)("div",{className:eb.Dm,children:(0,i.jsx)(nU.Q,{appModel:h,dispatch:u,menuItems:f,recordingKey:"codeComponentContextMenu",removeDisabledItems:!0,sceneGraph:p,sceneGraphSelection:m,selectedView:n,showPoint:!1,targetRect:{width:10,height:10,left:e+100,top:t,right:e+110,bottom:t-10}})})}s8.displayName="WebpageContextMenu";var ae=n(863995),at=n(862589),an=n(29335),ai=n(460434);function as({clientX:e,clientY:t,selectedView:n,targetItem:s,paint:r,onPaintChange:o}){let c=(0,a.wA)(),{appModel:u,sceneGraph:p,sceneGraphSelection:m}=(0,d.R)(e=>({appModel:e.mirror.appModel,sceneGraph:e.mirror.sceneGraph,sceneGraphSelection:e.mirror.sceneGraphSelection})),h=(0,an.s1)(),f=(0,at.k1)(h),g=[];return"DOCUMENT_COLOR"===s.type?g.push({name:"slides-move-to-theme-colors",recordingKey:"moveToThemeColors",callback:()=>{let e=f(s.documentColor);e&&r&&(0,eC.hS)(r)&&r.color&&(0,en.DA)(r.color,s.documentColor)&&o((0,ai.FW)(e),ae.zk.YES)}}):(g.push({name:"slides-edit-theme-color",recordingKey:"edit",callback:s.onEdit}),g.push({name:"slides-delete-theme-color",recordingKey:"delete",callback:()=>{l.CWU?.deleteVariable(s.variableId)}})),(0,i.jsx)("div",{className:eb.Dm,children:(0,i.jsx)(nU.Q,{appModel:u,dispatch:c,menuItems:g,recordingKey:"slidesColorPickerContextMenu",removeDisabledItems:!0,sceneGraph:p,sceneGraphSelection:m,selectedView:n,showPoint:!1,targetRect:{width:10,height:10,left:e+100,top:t,right:e+110,bottom:t-10}})})}var aa=n(133662),ar=n(99723),al=n(225686),ao=n(366535),ad=n(141773),ac=n(411017),au=n(373235),ap=n(395556),am=n(875997),ah=n(768300),af=n(558805),ag=n(632650),ax=n(361248),a_=n(784527);function ay({name:e,leadingIcon:t,onIconClick:n}){return(0,i.jsxs)("div",{className:a_.w0,children:[(0,i.jsx)("button",{className:tt()(a_.FW,{[a_.PT]:n}),onClick:n,children:(0,o.kc)().figjam_a11y_section_presets?(0,i.jsx)(ax.Q,{}):(0,i.jsx)(ev.B,{svg:t})}),(0,i.jsx)("div",{className:a_.TK,children:e})]})}var av=n(419822),ab=n(56834),aC=n(802589);function aj(){return(0,i.jsx)("div",{className:a_.Do,children:(0,i.jsx)(av.k,{size:"lg"})})}function ak({name:e,description:t,iconUrl:n}){return(0,i.jsx)(aE,{name:e,description:t,iconUrl:n,trailingIcon:(0,i.jsx)(ev.B,{className:a_.KR,svg:aC.A}),itemType:"shelf"})}function aw({name:e,description:t,iconUrl:n,isSelected:s,iconBackgroundColor:a}){return(0,i.jsx)(aE,{name:e,description:t,iconUrl:n,trailingIcon:s?(0,i.jsx)(ev.B,{svg:ab.A}):void 0,iconBackgroundColor:a,itemType:"template"})}function aE({name:e,description:t,itemType:n,iconUrl:s,trailingIcon:a,iconBackgroundColor:r}){return(0,i.jsxs)("div",{className:tt()({[a_.pl]:"shelf"===n,[a_.fg]:"template"===n}),children:[(0,i.jsx)("div",{className:tt()({[a_.Tt]:"shelf"===n,[a_.BA]:"template"===n}),style:{backgroundColor:r},children:s&&(0,i.jsx)("img",{src:s,alt:(0,y.t)("whiteboard.section_preset_picker.shelf.thumbnail")})}),(0,i.jsxs)("div",{className:a_.FS,children:[(0,i.jsx)("div",{className:a_.fh,children:e}),(0,i.jsx)("div",{className:a_.ij,children:t})]}),a&&(0,i.jsx)("div",{className:a_.ER,children:a})]})}var aT=n(387932),aS=n(751870),aI=n(577900);let aN="section_preset_item",aA=/^Section(\s\d+)?$/,aL=(0,M.jz)(H.IuL);function aM({sectionId:e,sectionName:t,initialShelfId:n,initialTemplateId:r,showAlertOnSelect:o}){let d,u;let p=(0,a.wA)(),m=(0,tA.tS)(),h=(0,c.md)(af.g),f="hasData"===h.state?h.data:[],g=0!==f.length,[x,_]=(0,s.useState)(n),[v,b]=(0,s.useState)(!1),[C,j]=(0,s.useState)(!1),k=(0,ac.fG)(),w=(0,am.g)(),E=(0,c.Xr)(ah.Yq),T=(0,c.Xr)(ah.pn),S=(0,c.Xr)(ah.bj),I=(0,c.md)(ah.oh),N=(0,c.md)(ah.pF),A=(0,au.q)(),M=(0,c.md)(ah.pg),O=function(e,t){let n=(0,t1._X)({subscribeToUpdates_expensive:!0}),i=n.zoomScale,a=(0,s.useMemo)(()=>{let t=(0,L.getActiveTSSceneGraph)().get(e);if(!t)return null;let n=t.absoluteBoundingBox;return{canvasSpaceSectionTopLeft:t.canvasSpaceSectionTopLeft,canvasSpaceSectionOrigin:{x:n.x,y:n.y}}},[i,e]);if(!a)return null;let{canvasSpaceSectionTopLeft:r,canvasSpaceSectionOrigin:l}=a,o=(0,t1.Z0)(n,{x:r.x,y:r.y},!0),d={x:o.x-8,y:o.y},c=(0,t1.Z0)(n,l,!0),u=Math.max(d.y+n.y,n.y+8),p={top:u,bottom:u+200,height:200,left:0,right:d.x,width:301},m={x:(0,t1.Qt)(t.x,0,i,0),y:(0,t1.Qt)(t.y,0,i,0)};return{contextMenuRect:p,mouseBoundaryRect:{x:d.x,y:c.y+n.y,width:m.x+8,height:m.y}}}(e,N),R=s.useRef(!1),P=s.useCallback(()=>{E(),T(),b(!1)},[E,T]);(0,s.useEffect)(()=>{let e=setTimeout(()=>{j(!0)},500);return()=>clearTimeout(e)},[]),(0,s.useEffect)(()=>()=>{R.current||(E(),T())},[E,T]);let D=O?.mouseBoundaryRect;if((0,s.useEffect)(()=>{if(!v||!D)return;let e=(0,ar.s)(function(e){let t=document.activeElement?.id??"";(!D||e.clientX>D.x+D.width||e.clientX<D.x||e.clientY>D.y+D.height||e.clientY<D.y)&&!t.includes(aN)&&P()},16);return window.addEventListener("mousemove",e),()=>{window.removeEventListener("mousemove",e)}},[P,v,D]),!O)return null;let{contextMenuRect:F}=O,z=(n,i,s)=>{if(A&&m&&!M&&(b(!1),I?.template.id!==n.template.id)){if(E(),n.template.id===r){T();return}n.type===ap.n.HubFile&&(0,ad.Zg)({insert:()=>w(n,{moveViewportAfterPreview:!1,priority:"user-visible",previewManager:{nodeType:l.Z6A.SECTION,options:{nodeId:e,newName:aA.test(t)||i&&t===i?s:null,shelfId:n.category??"",templateId:n.template.id,templateName:(0,ac.gY)(n)}}}),template:n,fileKey:m,dispatch:p,triggeredFrom:"section-preset",userTriggered:!1,isPreview:!0})}},B=e=>{(0,ad.Zg)({insert:()=>S({selectTemplateAfterCommit:!1,moveViewportAfterCommit:!1,priority:"user-visible",editScopeType:em.zk.USER}),template:e,fileKey:m,dispatch:p,triggeredFrom:"section-preset",userTriggered:!0})},G=t=>{A&&m&&!M&&t.template.id!==r&&(R.current=!0,o?p((0,ao.to)({type:ag.f,data:{sectionId:e,initialTemplateId:r,initialShelfId:n,onConfirm:()=>B(t),onCancel:()=>P()}})):B(t))},U=x?f.find(e=>e.id===x):void 0;if(U){d={displayText:U.title,render:()=>(0,i.jsx)(ay,{name:U.title,leadingIcon:aS.A,onIconClick:()=>{_(null),E()}}),preventDismissOnSelected:!0};let e=n&&r?(0,aT.bO)(f,n,r):null;u=U.shelf_content.map((t,n)=>{let s={type:ap.n.HubFile,template:t,category:x},{name:a,description:l}=k(s),o=(0,al.$J)(l).trim(),d="client_meta"in t?JSON.parse(t.client_meta):{},c=d.preset_picker?.thumbnail_url_dark_bg??"";return{displayText:a,render:()=>(0,i.jsx)(aw,{name:a,description:o,iconUrl:c,isSelected:r===s.template.id,iconBackgroundColor:(0,aT.j3)(n)}),onMouseEnter:()=>{z(s,e,a)},callback:()=>G(s)}})}else d={displayText:"Edit section name",render:()=>(0,i.jsx)(ay,{name:(0,y.t)("whiteboard.section_preset_picker.shelf.title"),leadingIcon:aI.A}),preventDismissOnSelected:!0},u=f.map(t=>({displayText:t.title,render:()=>(0,i.jsx)(ak,{name:t.title,description:t.description,iconUrl:t.shelf_meta.preset_picker?.thumbnail_url}),preventDismissOnSelected:!0,callback:()=>{(0,eh.sx)("section_preset_picker_category_clicked",{fileKey:m,sectionId:e,selectedCategory:t.id,initialTemplateCategory:n,initialTemplateId:r}),_(t.id),E()}}));if(!g){if(!C)return null;u.push({displayText:"Loading",render:()=>(0,i.jsx)(aj,{}),disabled:!0})}return(0,i.jsx)(n2.fu,{name:"section_preset_picker_shown",enabled:g,properties:{fileKey:m,sectionId:e,initialTemplateCategory:n,initialTemplateId:r,templateType:ap.n.HubFile},children:(0,i.jsx)(sY.j,{depth:0,disableDropdownScrollContainer:!0,dispatch:p,displayOverTarget:!0,items:[d,...u],lean:"left",leanPadding:0,minBottomMargin:aL,minWidth:301,onMouseLeaveMenu:e=>{if(e.clientX>=F.right){b(!0);return}P()},onSelectItem:e=>{e.callback&&e.callback("",null,p)},parentRect:F,preventZoom:!0,recordingKey:aN,showPoint:!1})})}function aO(e){let t=(0,a.d4)(e=>!e.mirror.appModel.isReadOnly),n=(0,tA.q5)();(0,a.d4)(e=>n?.team||null);let s=(0,nQ.x)(),r=(0,nQ.QZ)(),l=(0,nQ.V2)(),o=e.dropdownShown.type,d=(0,nJ.v)();if(o===eb.K9){let{clientX:n,clientY:a}=e.dropdownShown.data;return(0,i.jsx)(sC,{clientX:n,clientY:a,selectedView:e.selectedView,userCanEditFile:t,userCanViewPlugins:s,userCanViewWidgets:r,userCanRunExtensions:l,isObjectsPanelMenu:!1})}if(o===eb.wi){let{clientX:n,clientY:a}=e.dropdownShown.data;return(0,i.jsx)(sC,{clientX:n,clientY:a,selectedView:e.selectedView,userCanEditFile:t,userCanViewPlugins:s,userCanViewWidgets:r,userCanRunExtensions:l,isSelectLayerMenu:!0,isObjectsPanelMenu:!1})}if(o===eb.ku){let{clientX:n,clientY:a}=e.dropdownShown.data;return(0,i.jsx)(sC,{clientX:n,clientY:a,selectedView:e.selectedView,userCanEditFile:t,userCanViewPlugins:s,userCanViewWidgets:r,userCanRunExtensions:l,isObjectsPanelMenu:!1,isTextEditModeMenu:!0})}if(o===eb.t4){let{clientX:n,clientY:a,axis:o,rulerGuideContextMenuType:d}=e.dropdownShown.data;return(0,i.jsx)(sC,{axis:o,clientX:n,clientY:a,isObjectsPanelMenu:!1,isRulerGuideMenu:!0,isTextEditModeMenu:!1,rulerGuideContextMenuType:d,selectedView:e.selectedView,userCanEditFile:t,userCanRunExtensions:l,userCanViewPlugins:s,userCanViewWidgets:r})}if(o===eb.Rb){let{clientX:n,clientY:a}=e.dropdownShown.data;return(0,i.jsx)(sC,{clientX:n,clientY:a,selectedView:e.selectedView,userCanEditFile:t,userCanViewPlugins:s,userCanViewWidgets:r,userCanRunExtensions:l,isObjectsPanelMenu:!0})}if(o===eb.W_){let{clientX:n,clientY:a}=e.dropdownShown.data;return(0,i.jsx)(s_,{clientX:n,clientY:a,selectedView:e.selectedView,userCanEditFile:t,userCanViewPlugins:s,userCanViewWidgets:r,userCanRunExtensions:l,isObjectsPanelMenu:!0,ariaLabelledBy:e.ariaLabelledBy})}if(o===eb.LO)return(0,i.jsx)(sZ,{});else if(o===eb.SA){let{clientX:t,clientY:n,pageId:s}=e.dropdownShown.data;return(0,i.jsx)(sM,{pageId:s,clientX:t,clientY:n,selectedView:e.selectedView})}else if(o===eb.bx){let{clientX:t,clientY:n}=e.dropdownShown.data;return(0,i.jsx)(sL,{clientX:t,clientY:n,selectedView:e.selectedView})}else if(o===eb.d2){let{clientX:t,clientY:n,pageIds:s,shouldShowDuplicateOption:a}=e.dropdownShown.data;return(0,i.jsx)(sK.W,{pageIds:s,clientX:t,clientY:n,selectedView:e.selectedView,shouldShowDuplicateOption:a})}else if(o===eb.Z7){let{thread:t,pinClientRect:n}=e.dropdownShown.data;return(0,i.jsx)(ir,{selectedView:e.selectedView,thread:t,pinClientRect:n,copyLink:d})}else if(o===eb.DT){let{attachment:t,clientX:n,clientY:s}=e.dropdownShown.data;return(0,i.jsx)(nY,{attachment:t,selectedView:e.selectedView,clientX:n,clientY:s})}else if(o===eb.i){let{clientX:n,clientY:a,stringToCopy:o,expandElement:d,guid:c}=e.dropdownShown.data;return(0,i.jsx)(sw,{clientX:n,clientY:a,expandElement:d,guid:c,isObjectsPanelMenu:!0,selectedView:e.selectedView,stringToCopy:o,userCanEditFile:t,userCanRunExtensions:l,userCanViewPlugins:s,userCanViewWidgets:r})}else if(o===eb.Sl){let{clientX:n,clientY:a,onCopyText:o}=e.dropdownShown.data;return(0,i.jsx)(sE,{clientX:n,clientY:a,selectedView:e.selectedView,userCanEditFile:t,userCanViewPlugins:s,userCanViewWidgets:r,userCanRunExtensions:l,isObjectsPanelMenu:!0,onCopyText:o})}else if(o===eb.WJ){let{targetInViewport:n,nodeId:a}=e.dropdownShown.data;return(0,i.jsx)(s5,{targetInViewport:n,selectedView:e.selectedView,userCanEditFile:t,userCanViewPlugins:s,userCanViewWidgets:r,userCanRunExtensions:l,isObjectsPanelMenu:!0,nodeId:a})}else if(o===eb.AM){let{targetInViewport:t}=e.dropdownShown.data;return(0,i.jsx)(sU,{targetInViewport:t,selectedView:e.selectedView})}else if(o===eb.XX){let{targetInViewport:n,annotationsCount:a}=e.dropdownShown.data;return(0,i.jsx)(ie,{targetInViewport:n,annotationsCount:a,selectedView:e.selectedView,userCanEditFile:t,userCanViewPlugins:s,userCanViewWidgets:r,userCanRunExtensions:l,isObjectsPanelMenu:!0})}else if(o===eb.si){let{sectionId:n,initialShelfId:a,initialTemplateId:o,sectionName:d,showAlertOnSelect:c}=e.dropdownShown.data;return(0,i.jsx)(aM,{initialShelfId:a,initialTemplateId:o,isObjectsPanelMenu:!0,sectionId:n,sectionName:d,selectedView:e.selectedView,showAlertOnSelect:c,userCanEditFile:t,userCanRunExtensions:l,userCanViewPlugins:s,userCanViewWidgets:r})}else if(o===eb.U3){let{clientX:n,clientY:a}=e.dropdownShown.data;return(0,i.jsx)(sk,{clientX:n,clientY:a,selectedView:e.selectedView,userCanEditFile:t,userCanViewPlugins:s,userCanViewWidgets:r,userCanRunExtensions:l,isObjectsPanelMenu:!1,carouselType:sj.SINGLE_SLIDE_VIEW})}else if(o===eb.kX){let{clientX:t,clientY:n,targetItem:s,paint:a,onPaintChange:r}=e.dropdownShown.data;return(0,i.jsx)(as,{clientX:t,clientY:n,selectedView:e.selectedView,targetItem:s,paint:a,onPaintChange:r})}else if(o===eb.OI){let{boundingRect:t,targetObjectAnimation:n}=e.dropdownShown.data;return(0,i.jsx)(aa.E,{boundingRect:t,selectedView:e.selectedView,targetObjectAnimation:n})}else if(o===eb.J7){let{clientX:n,clientY:a}=e.dropdownShown.data;return(0,i.jsx)(s7,{clientX:n,clientY:a,selectedView:e.selectedView,userCanEditFile:t,userCanViewPlugins:s,userCanViewWidgets:r,userCanRunExtensions:l,isObjectsPanelMenu:!1,isTextEditModeMenu:!0})}else if(o===eb.V6){let{clientX:t,clientY:n,deleteCollection:s,collectionId:a}=e.dropdownShown.data;return(0,i.jsx)(nV,{clientX:t,clientY:n,deleteCollection:s,selectedView:e.selectedView,collectionId:a})}else if(o===eb.Zn){let{clientX:t,clientY:n,deleteField:s,duplicateField:a}=e.dropdownShown.data;return(0,i.jsx)(nH,{clientX:t,clientY:n,deleteField:s,duplicateField:a,selectedView:e.selectedView})}else if(o===eb.s9){let{clientX:t,clientY:n,deleteItemOrItems:s}=e.dropdownShown.data;return(0,i.jsx)(nK,{clientX:t,clientY:n,deleteItemOrItems:s,selectedView:e.selectedView})}else if(o===eb.jQ){let{clientX:t,clientY:n,deleteItem:s,renameItem:a,isLayerLike:r,isInteraction:l,selectOnCanvas:o}=e.dropdownShown.data;return(0,i.jsx)(s9,{clientX:t,clientY:n,isLayerLike:r,isInteraction:l,deleteItem:s,renameItem:a,selectOnCanvas:o,selectedView:e.selectedView})}else if(o===eb.Vx){let{clientX:n,clientY:a}=e.dropdownShown.data;return(0,i.jsx)(sk,{clientX:n,clientY:a,selectedView:e.selectedView,userCanEditFile:t,userCanViewPlugins:s,userCanViewWidgets:r,userCanRunExtensions:l,isObjectsPanelMenu:!1,carouselType:sj.COOPER_CAROUSEL})}else if(o===eb.Vl){let{clientX:t,clientY:n,deleteStop:s,redistributeStops:a}=e.dropdownShown.data;return(0,i.jsx)(sO,{clientX:t,clientY:n,deleteStop:s,redistributeStops:a,selectedView:e.selectedView})}return null}var aR=n(797666),aP=n(729926),aD=n(475593),aF=n(120276);function az(){let e=(0,c.Xr)(aP.mH),t=(0,aD.XC)((0,c.md)(aP.a8));return(0,o.kc)().cursor_bot&&t?(0,i.jsx)("div",{className:aF.CR,"data-testid":"cursor-bot-fullscreen-event-blocker",onClick:()=>{e(!0)}}):null}var aB=n(982287),aG=n(76616),aU=n(328341),aV=n(586398),aH=n(373547),aK=n(120074),aW=n(679359);function aq({background:e,showSpinner:t}){let n=s.useContext(G.kw),{x:a,y:r,width:l}=n.getViewportInfo(),d={background:e},c=window.innerWidth-l;n&&(d={...d,width:`calc(100vw - ${c}px)`,height:`calc(100vh - ${r}px)`,top:`${r}px`,left:`${a}px`});let u=!1;return(0,o.kc)().css_backed_loading_spinner?u=!0:(0,x.KR)()||x.rr||(t=!1),(0,i.jsxs)("div",{className:"loading_overlay--pageSyncing--9AqbU",children:[(0,i.jsx)("div",{className:tt()("loading_overlay--blurredOverlay--79bya",eb.Dm),style:d}),t&&u?(0,i.jsx)("div",{className:"loading_overlay--pageSyncingFadeIn--QVvQE",children:(0,i.jsx)(aW.$y,{size:"large"})}):t&&(0,i.jsx)(aW.dW,{className:"loading_overlay--pageSyncingSpinner--rjAvP"})]})}function aX(){let e=(0,n0.U)(),t=(0,a.d4)(e=>e.selectedView),n=a.d4(e=>e.versionHistory)?.isLoadingPage,r=(0,aH.DP)(),{isLoading:d}=(0,aK.v9)({selectedView:t,isLoadingVersionHistory:n,theme:r}),c=(0,a.d4)(e=>e.mirror.appModel.multiplayerSessionState),u=(0,aV.yZ)(),p=(0,a.d4)(e=>e.mirror.appModel.currentPage),m=(0,a.wA)(),[h,f]=s.useState(null),g=(0,aU.ZC)(d),x=(0,s.useCallback)(t=>{e("page_loading_overlay",{timeElapsedMs:t,pageNodeId:p},{forwardToDatadog:!0})},[e,p]);return s.useEffect(()=>{if((0,o.kc)().long_page_change_notif){if(!l.h3O)throw Error("Multiplayer bindings not available");if(l.h3O.isIncrementalSession()&&d)d!==g&&u&&c!==l.kul.JOINED&&(f(Date.now()),m(v.F.enqueue({message:"Page change may take longer during staging deploy",error:!1,delay:3e3,type:"long-page-change",timeoutOverride:1/0})));else{let e=h?Date.now()-h:0;e<3e3||e>9e3?(m(v.F.dequeue({matchType:"long-page-change"})),f(null)):setTimeout(()=>{m(v.F.dequeue({matchType:"long-page-change"})),f(null)},Math.max(0,9e3-e))}}},[d,c,u,m,h,g]),(0,i.jsx)(aY,{onPageLoadingFinish:x,selectedView:t,isLoadingVersionHistory:n,theme:r})}function aY({onPageLoadingFinish:e,selectedView:t,isLoadingVersionHistory:n,theme:a}){let{isLoading:r,isLoadingMissingFonts:l,background:o}=(0,aK.v9)({selectedView:t,isLoadingVersionHistory:n,theme:a});return((0,s.useEffect)(()=>{!r&&aG.sn.get("page_loading_overlay")&&requestAnimationFrame(()=>{let t=aG.sn.tryStop("page_loading_overlay");t&&e&&e(t)})},[r,e]),r)?(aG.sn.get("page_loading_overlay")||aG.sn.start("page_loading_overlay"),(0,i.jsx)(aq,{background:o,showSpinner:!l})):null}var aZ=n(951002),aJ=n(188220),aQ=n(853137),a$=n(667693),a0=n(776111),a1=n(409019),a2=n(221586),a3=n(659062),a5=n(198277),a4=n(193460),a6=n(574587),a7=n(687849),a8=n(525972),a9=n(719947),re=n(423683),rt=n(745859),rn=n(403950),ri=n(790628),rs=n(266868),ra=n(870638),rr=n(6159),rl=n(81969),ro=n(65389),rd=n(216294),rc=n(124348),ru=n(735194),rp=n(521183),rm=n(718668),rh=n(617101),rf=n(568132),rg=n(377036);let rx=e=>(0,iE.Zj)(e)&&!e.hideCheckForQuickCommand;class r_ extends ef.o6{constructor(e){super(e),this.searchInputRef=s.createRef(),this.scrollContainerRef=s.createRef(),this.listboxId=(0,aJ.g)(),this.resultPrefix=(0,aJ.g)(),this.delayedCloseTimerID=0,this.updateQueryAndResults=e=>{let t;if(e){let n=this.searchIndex.search(this.props.appModel,e.trim());t=this.sortedByEnabledSearchResults(n)}else t=this.recentlyUsedItemsMenu();this.logSearchResults(e,t),this.setState({searchQuery:e,searchResults:t,activeItemIndex:0,mouseMoved:!1})},this.logSearchResults=(e,t)=>{this.props.quickActionsSessionId&&this.props.fireQueryResultTrackingEvent({quickActionsSessionId:this.props.quickActionsSessionId,quickActionsQueryId:this.props.latestQuerySessionIdRef.current,searchQuery:e,numSearchResults:this.state.searchResults.length,currentSelection:this.props.currentSelection,module:eZ.Jc.ALL,moduleFilters:null,qaVersion:rs.U3,searchQueryResults:(0,ra.X)(t)})},this.cancelDelayedClose=()=>{0!==this.delayedCloseTimerID&&(clearTimeout(this.delayedCloseTimerID),this.delayedCloseTimerID=0)},this.onClick=ef.cZ(this,"click",e=>{e?.button!==0||this.state.searchResults.length>0||this.setState({searchResults:this.searchIndex.list(this.props.appModel)})}),this.onKeyDown=ef.C0(this,"keydown",e=>{let t=e=>{if(this.state.searchResults.length>0){let t=this.state.activeItemIndex+e,n=t<0?this.state.searchResults.length-1:t%this.state.searchResults.length,i=1!==this.state.searchResults.length||!this.state.displayAriaActiveDescendant;this.setState({activeItemIndex:n,displayAriaActiveDescendant:i}),this.scrollContainerRef.current.scrollElementAtIndexIntoView(n)}},n=(0,a2.vN)(e,a2.xH.CONTROL),i=x.Ay.mac?(0,a2.vN)(e,a2.xH.META):n,s=x.Ay.mac&&n;switch(e.keyCode){case a2.Uz.ENTER:{e.preventDefault();let t=this.state.searchResults[this.state.activeItemIndex];t&&em.l7.user(`quick-actions-select-${t.name??t.action??"unknown"}`,()=>{this.onSelectItem(t)});break}case a2.Uz.ESCAPE:e.preventDefault(),this.cancelDelayedClose(),this.props.dispatch(sP.oB());break;case a2.Uz.N:case a2.Uz.DOWN_ARROW:if(e.keyCode===a2.Uz.N&&!s){(0,e_.jr)(e,e_.W0.NO);break}e.preventDefault(),this.cancelDelayedClose(),t(1);break;case a2.Uz.P:case a2.Uz.UP_ARROW:if(e.keyCode===a2.Uz.P&&!s){(0,e_.jr)(e,e_.W0.NO);break}e.preventDefault(),this.cancelDelayedClose(),t(-1);break;case a2.Uz.TAB:{e.preventDefault();let t=this.state.searchResults[this.state.activeItemIndex];t&&t.itemParameterArgs&&(this.onStartParameterMode(t.itemParameterArgs,t,"tab"),this.logActionSelectedEvent(t));break}case a2.Uz.R:case a2.Uz.S:case a2.Uz.D:case a2.Uz.E:case a2.Uz.F:case a2.Uz.O:if(i){e.preventDefault();let t=this.state.searchQuery+e.key;this.updateQueryAndResults(t)}break;default:"Meta"!==e.key&&"Ctrl"!==e.key&&this.cancelDelayedClose(),(0,e_.jr)(e,e_.W0.NO)}}),this.onSearchChange=ef.Z7(this,"change",e=>{let t=e.currentTarget.value;this.updateQueryAndResults(t)}),this.onSelectItem=(e,t)=>{if(e.disabled)this.cancelDelayedClose();else{let n=!1;if(e.itemParameterArgs){if(e.runPluginArgs&&!this.state.searchQuery)a8.R.instance.enqueue({mode:"run-forever",runPluginArgs:e.runPluginArgs}),n=!0;else if(e.parametersRequired){this.onStartParameterMode(e.itemParameterArgs,e,t?.type==="click"?"click":"enter"),this.logActionSelectedEvent(e);return}}if(e.callback&&!n&&(e.callback((0,iE.Dz)(e),e.args,this.props.dispatch),n=!0),e.action&&(a7.VU.get(e.action,"quick-actions",e.args)(t),n=!0),n&&this.addToRecentlyUsedCommands(e,e.runPluginArgs),this.logActionSelectedEvent(e),"toggle-publish"===e.action&&(0,tf.YQ)({id:"insert-component-onboarding-event"}),rx(e)&&!(0,a0.PN)()){this.cancelDelayedClose(),this.delayedCloseTimerID=setTimeout(()=>{this.props.dispatch(sP.oB())},300);return}this.props.dispatch(sP.oB())}},this.renderResult=(e,t)=>{let n=t===this.state.activeItemIndex;return(0,i.jsx)(rb,{actionIcon:this.getActionIcon(e),active:n,allSavedPlugins:this.props.pluginAndWidgetMenuArgs.allSavedPlugins,appModel:this.props.appModel,disabled:!!e.disabled,id:this.getResultId(t),isLastItem:t===this.state.searchResults.length-1,item:e,onClick:t=>this.onSelectItem(e,t),onMouseEnter:()=>{this.state.mouseMoved&&this.setState({activeItemIndex:t})},onMouseMove:()=>{this.state.mouseMoved||this.setState({mouseMoved:!0,activeItemIndex:t})},publishedPlugins:this.props.pluginAndWidgetMenuArgs.publishedPlugins,recordingKey:ef.Pt(this.props,e.action||"searchResult"),role:"option",searchQuery:this.state.searchQuery},e.action||t)},this.searchIndex=this.createSearchIndex(),this.state={searchQuery:"",searchResults:this.recentlyUsedItemsMenu(),activeItemIndex:0,displayAriaActiveDescendant:!0,mouseMoved:!1}}componentDidUpdate(e,t){super.componentDidUpdate(e,t),(0,a$.c2)(this.props.pluginAndWidgetMenuArgs,e.pluginAndWidgetMenuArgs)||(this.searchIndex=this.createSearchIndex())}createSearchIndex(){let e=(0,a5.M)({extensionMenuProps:this.props.pluginAndWidgetMenuArgs,isReadOnly:this.props.appModel.isReadOnly,includeDisabled:!0});return new rn.xm(this.props.appModel,this.props.selectedView,[...this.props.fullscreenMenuItems,...e],{includeDisabled:!0,acceptsUnicode:!0})}componentDidMount(){super.componentDidMount(),this.searchInputRef.current.focus()}logActionSelectedEvent(e){let{createMetrics:t}=this.props.interactionMetrics;(0,rc.kp)({item:e,searchQuery:this.state.searchQuery,qaVersion:rs.U3,numSearchResults:this.state.searchResults.length,searchPosition:this.state.activeItemIndex,moduleFilters:null,...t()})}recentlyUsedItemsMenu(){return(0,il.WI)(this.props.recentlyUsedQuickCommands.map(e=>{let t=this.searchIndex.getItem(this.props.appModel,e.displayName);return t&&e.runPluginArgs&&(t.runPluginArgs=e.runPluginArgs),t}))}sortedByEnabledSearchResults(e){let t=e.filter(e=>!e.disabled),n=e.filter(e=>e.disabled);return t.concat(n)}addToRecentlyUsedCommands(e,t){let n=(0,rd.EG)(e),i=this.props.recentlyUsedQuickCommands.filter(e=>e.displayName!==n&&!!this.searchIndex.getItem(this.props.appModel,e.displayName));i.length>=3&&i.pop(),i.unshift({displayName:n,runPluginArgs:t}),this.props.dispatch(t_.PQ(i)),this.props.updateFrecencyHistory(e,this.state.searchQuery),(0,rl.s)({displayText:n,runPluginArgs:t,localFileIdOrPluginId:e.pluginLocalFileId??e.pluginId})}getActionIcon(e){if("plugins-menu-item"===e.name){let t;return(e.pluginId&&(t=(0,iW.DM)({idToSearch:e.pluginId,localExtensionsByFileId:void 0,publishedExtensions:{...this.props.pluginAndWidgetMenuArgs.publishedPlugins,...this.props.pluginAndWidgetMenuArgs.publishedWidgets}})),t&&!(0,iJ.ZQ)(t))?(0,i.jsx)(re.V,{className:rp.ZR,plugin:t,role:"presentation"}):(0,i.jsx)(ev.B,{className:rp.pB,svg:rf.A,ariaLabel:`${e.name} icon`})}if(e.iconType&&"external_link"===e.iconType)return(0,i.jsx)(ev.B,{svg:rh.A})}onStartParameterMode(e,t,n){this.addToRecentlyUsedCommands(t),this.props.onStartParameterEntry(e,t,n)}getResultId(e){return this.resultPrefix+"-"+e}renderResults(){let e=this.state.searchResults;if(this.state.searchQuery){if(0===this.state.searchResults.length)return(0,i.jsx)("div",{className:rp.Tk,children:(0,y.tx)("fullscreen_actions.no_matches")})}else if(0===this.state.searchResults.length)return null;return(0,i.jsx)(ru.h,{id:this.listboxId,ref:this.scrollContainerRef,resultCount:e.length,role:"listbox",children:e.map(this.renderResult)})}render(){let e=this.state.searchQuery||this.state.searchResults.length;return(0,i.jsxs)(ru.H,{recordingKey:this.props.recordingKey||"",onKeyDown:this.onKeyDown,"data-testid":"quick-actions",children:[(0,i.jsxs)("div",{className:rp.$P,children:[(0,i.jsx)(ev.B,{svg:rg.A,className:rp.qc}),(0,i.jsx)("input",{ref:this.searchInputRef,"aria-activedescendant":e&&(this.state.displayAriaActiveDescendant||this.state.searchResults.length>1)?this.getResultId(this.state.activeItemIndex):void 0,"aria-autocomplete":"list","aria-controls":this.listboxId,"aria-expanded":e?"true":"false","aria-owns":this.listboxId,className:rp.Rt,dir:"auto",maxLength:150,onChange:this.onSearchChange,onClick:this.onClick,placeholder:(0,iS.A)("quick-actions-modal-placeholder"),role:"combobox",spellCheck:!1,value:this.state.searchQuery})]}),this.renderResults()]})}}function ry(e){return(0,i.jsx)(g.u,{label:"QuickActions",children:(0,i.jsx)(rv,{...e})})}function rv(e){let t=(0,a6.c4)(),n=(0,a4.F)(),s=(0,rc.Sk)(),{addFrecencyUsage:r}=(0,rt.fJ)(),l=(0,a.d4)(a9.l),o=(0,tz.Ev)(),d=(0,c.md)(eJ.dd),u=(0,c.md)(eJ.Rt),p=(0,a1.F)(u),m=(0,a.wA)(),h=(0,ri.wo)(),f=(0,a.d4)(e=>e.mirror.appModel),g=(0,a.d4)(e=>e.selectedView),x=(0,a.d4)(e=>e.user?.locale);return(0,i.jsx)(r_,{...e,appModel:f,currentSelection:l,dispatch:m,fireQueryResultTrackingEvent:o,fullscreenMenuItems:n,interactionMetrics:s,latestQuerySessionIdRef:p,locale:x,pluginAndWidgetMenuArgs:t,quickActionsSessionId:d,recentlyUsedQuickCommands:h,selectedView:g,updateFrecencyHistory:r})}function rb(e){let t=(0,B.J2)((0,F.UK)().showQuickCommandRankDebug);return(0,i.jsx)(rC,{...e,showQuickCommandRankDebug:t})}r_.displayName="QuickActions";class rC extends ef.o6{constructor(e){super(e),this.onClick=ef.cZ(this,"click",e=>{if(!this.props.onClick)return ef.aH;this.props.onClick(e)}),this.getDisplayText=()=>{let e=this.props.item;if(e.itemParameterArgs&&e.runPluginArgs&&!this.props.searchQuery)return(0,i.jsx)(ro._,{runPluginArgs:e.runPluginArgs,itemParameterArgs:e.itemParameterArgs});if(e.itemPath){let t=e.itemPath;return(0,i.jsx)(ro.h,{itemPath:t})}let t=(0,rd.EG)(e);return this.props.showQuickCommandRankDebug&&void 0!==e.stringMatchScore&&void 0!==e.popularityScore&&(t=`M${e.stringMatchScore} P${e.popularityScore}: `+t),(0,i.jsx)("div",{className:rp.D6,children:t})},rx(this.props.item)?this.state={itemIsChecked:(0,iE.WJ)(this.props.appModel,this.props.item)}:this.state={}}componentDidUpdate(e,t){super.componentDidUpdate(e,t),null!=this.state.itemIsChecked&&this.setState({itemIsChecked:(0,iE.WJ)(this.props.appModel,this.props.item)})}render(){let e=this.props.item,t=this.getDisplayText(),n=(0,iE.Dz)(e),s=e.shortcutText||(0,e$.c1)(this.props.appModel.keyboardShortcuts,n),a=void 0!==this.props.item.runPluginArgs,r=e.menuActionType&&"run-local-plugin"===e.menuActionType&&(!e.runPluginArgs||this.props.searchQuery),l="plugins-menu-item"===e.name&&!!e.itemParameterArgs&&e.itemParameterArgs.parameters.length>0,d=null;void 0!==this.state.itemIsChecked?d=(0,i.jsx)(rr.S,{checked:this.state.itemIsChecked,disabled:this.props.disabled}):this.props.actionIcon&&(d=this.props.actionIcon);let c=`${this.props.active?rp.ix:rp.Ke} ${this.props.disabled?rp.wn:""}`;return(0,i.jsxs)("div",{className:c,onMouseMove:this.props.onMouseMove,onMouseEnter:this.props.onMouseEnter,onClick:this.onClick,id:this.props.id,role:this.props.role,"aria-disabled":this.props.disabled||void 0,"aria-checked":this.props.item.checked,children:[(0,i.jsx)("div",{className:rp.EA,children:d}),(0,i.jsxs)("div",{className:rp.V4,children:[t,r&&(0,i.jsx)("div",{className:rp.Vu,children:(0,y.tx)("fullscreen_actions.development")})]}),s&&!l&&(0,i.jsx)("div",{className:rp.LE,children:(0,i.jsx)(tn.S,{shortcut:s})}),!s&&l&&(0,i.jsxs)("div",{className:rp.LE,children:[(0,i.jsx)("div",{className:rp.Hq,children:(0,y.tx)("fullscreen_actions.tab")}),a&&(0,i.jsx)("div",{className:rp.w8,children:(0,y.tx)("fullscreen_actions.to_edit")}),(0,i.jsx)(ev.B,{svg:rm.A})]}),!s&&e.isRepairCommand&&(0,o.kc)().internal_only_debug_tools&&(0,i.jsx)("div",{style:a3.sx.colorBgTertiary.p8.bRadius8.borderBox.flex.itemsCenter.justifyCenter.mr8.h16.add({fontSize:"8px"}).$,children:"REPAIR"})]})}}function rj(e){return(0,i.jsx)(g.u,{label:"QuickActionsOuter",children:(0,i.jsx)(rk,{...e})})}function rk({parameterEntryArgs:e,fireTrackingEvent:t}){let[n,a]=s.useState(),[r,l]=s.useState(!0),o=(0,c.Xr)(eJ.dd);if(s.useEffect(()=>{if(r){l(!1);let n=(0,aJ.g)();o(n),t(n),e&&a({args:e})}},[e,r,t,o]),!n)return(0,i.jsx)(ry,{recordingKey:"quickActions",onStartParameterEntry:(e,t,n)=>{let i;switch(n){case"tab":i="quick-actions-tab";break;case"enter":i="quick-actions-enter";break;case"click":i="quick-actions-click";break;default:(0,aZ.xb)(n)}a({args:{...e,triggeredFrom:i},item:t})}});{let{args:e,item:t}=n,s=t?(0,rd.EG)(t):void 0;return(0,i.jsx)(aQ.ry,{command:e.command,displayName:e.displayName,initialParameterValues:t?.runPluginArgs?.parameterValues,onExitParameterEntry:()=>{a(void 0)},parameterOnly:e.parameterOnly,parameters:e.parameters,pluginId:e.pluginId,pluginLocalFileId:e.pluginLocalFileId,recentlyUsedCommandName:s,recordingKey:"parameterEntry",triggeredFrom:e.triggeredFrom})}}rC.displayName="QuickActionsResult";var rw=n(497932),rE=n(322530),rT=n(387092),rS=n(7718),rI=n(911990),rN=n(825911),rA=n(74376),rL=n(441746),rM=n(292658),rO=n(913014);function rR({inheritStyleKeyField:e,initialStyleCreationPaint:t,recordingKey:n,onSubmit:r,shouldUseEyedropperStyleCreationFlow:l}){let o=(0,a.d4)(e=>e.mirror.selectedStyleProperties),d=(0,a.d4)(e=>e.mirror.sceneGraphSelection),c=s.useRef(Object.keys(d).length>0),u=(0,rS.sg)(e),{styleRef:p,createStyle:m}=(0,rM.u)({inheritStyleKeyField:e,initialStyleCreationPaint:t,isCreatingFromSelection:c.current,trackingOptions:{styleType:u},shouldUseEyedropperStyleCreationFlow:l}),h=ef.of(n,"submit",()=>{m(),r(p)});return o.styleType?(0,i.jsxs)(rN.zK.Provider,{value:rN.zM.CREATE_VARIABLE_STYLE,children:[(0,i.jsx)(rO.O8,{type:o.styleType,recordingKey:n,isInspectPanel:!1,selectedStyleProperties:o,showProperties:!0,onEnterPressed:h}),(0,i.jsx)(rI.Y,{horizontalAlignItems:"end",verticalAlignItems:"center",padding:16,children:(0,i.jsx)(tc.$n,{onClick:h,disabled:!p,variant:"primary",children:(0,y.tx)("design_systems.create_style.create_style")})})]}):null}var rP=n(903964),rD=n(679111),rF=n(52498),rz=n(31863);function rB({clientType:e}){let t=(0,n0.U)();return(0,s.useEffect)(()=>{let n=Date.now();return()=>{let i=Date.now()-n;t("reconnecting_modal_shown",{msElapsed:i,clientType:e}),i>1e3&&(0,rF.B3)(e)}},[e,t]),(0,i.jsx)("div",{className:`${rz.h} ${rz.M}`,children:(0,i.jsx)(sD.J,{mode:"dark",children:(0,i.jsxs)(rD.bL,{children:[(0,i.jsx)(av.k,{}),(0,i.jsx)(rD.QB,{children:(0,y.tx)("reconnecting_modal.loading")})]})})})}function rG(){return(0,n0.U)()("waiting_for_sync_modal_shown"),(0,i.jsx)("div",{className:`${rz.h}`,children:(0,i.jsx)(sD.J,{mode:"dark",children:(0,i.jsxs)(rD.bL,{children:[(0,i.jsx)(av.k,{}),(0,i.jsx)(rD.QB,{children:(0,y.tx)("waiting_for_sync_modal.saving")})]})})})}var rU=n(259964);(0,c.eU)(!1);let rV=function(){return null};var rH=n(440104),rK=n(127082),rW=n(428827),rq=n(174318),rX=n(495766),rY=n(446071);function rZ(e){return{selectedView:e.selectedView,user:e.user,currentUserOrgId:e.currentUserOrgId,comments:e.comments,dropdownShown:e.dropdownShown,modalShown:e.modalShown,pickerShown:e.pickerShown,multiplayerEmoji:e.multiplayerEmoji,eyedropper:e.eyedropper,needsUpgrade:e.needsUpgrade,progressBarState:e.progressBarState,showingReconnectingModal:e.showingReconnectingModal,showingOpenDesktopAppModal:e.showingOpenDesktopAppModal,openFile:e.openFile,pagesList:e.mirror.appModel.pagesList,timerModalState:e.timer.modalState,timerTime:e.timer.time,universalInsertModal:e.universalInsertModal,isCommentsToolSelected:e.mirror.appModel.currentTool===l.NLJ.COMMENTS,loadingBackgroundColor:e.desktopNewTab.loadingBackgroundColor,isReadOnly:e.mirror.appModel.isReadOnly,currentPage:e.mirror.appModel.currentPage,hyperlinkLocation:e.mirror.appModel.hyperlinkLocation,onCanvasNameEditorInfo:e.mirror.appModel.onCanvasNameEditorInfo,topLevelMode:e.mirror.appModel.topLevelMode,showUi:e.mirror.appModel.showUi,showToolbar:!0,showKeyboardShortcuts:e.mirror.appModel.showKeyboardShortcuts,loadingEmbeds:e.mirror.appModel.loadingEmbeds,fileIsLoading:e.progressBarState.mode===l.Oin.HIDE_UI||e.progressBarState.mode===l.Oin.ON_AND_LOCKED,hasCursorBot:!!(0,o.kc)().internal_only_debug_tools||!!e.userFlags.has_cursor_bot_onboarding_v2}}function rJ({fileKey:e}){let t=(0,a.wA)(),n=(0,a.Pj)(),i=(0,a.d4)(e=>e.isFullscreenDocumentLoaded),r=(0,rW.jz)(),o=(0,rq.e_)()===rq.$_.ELIGIBLE,d=(0,eK.Fk)(e=>e.getCurrentPage()?.guid);return s.useLayoutEffect(()=>{if(!i||!o)return;let s=n.getState(),a=r?.find(e=>e.inProgress),c=s.mirror.appModel.votingSessionInfo,u=c.sessionId&&r?r.find(e=>e.id===c.sessionId):null;if(a){if(a.id!==c.sessionId){t(E.au({}));let n=(0,eV.VP)(s.loadingState,E.$c(e))||s.voting.lastInitiatedVotingSessionId===a.id;t(E.H1({votingStage:n?l.W8Y.JOINED:l.W8Y.NOT_JOINED}))}}else c.sessionId&&!u?t(E.H1({votingStage:l.W8Y.NO_SESSION})):!a&&c.sessionId&&c.votingStage!==l.W8Y.ENDED&&(t((u?.pageNodeId&&(0,h.oA)(u.pageNodeId))===d?E.H1({sessionId:c.sessionId,votingStage:l.W8Y.ENDED}):E.H1({votingStage:l.W8Y.NO_SESSION})),t(E.D6("")))},[e,t,r,i,o,n,d]),null}function rQ(){let e=(0,a.d4)(e=>e.isFullscreenDocumentLoaded),t=s.useRef(!1);return s.useEffect(()=>{e&&!t.current&&((0,f.Z1)(),t.current=!0)},[e,t]),null}let r$={VariableAndStyleCreateModalRoot:function({initialPosition:e,initialVariableValue:t,inheritStyleKeyField:n,initialStyleCreationPaint:s,initialView:r,resolvedType:o,onCreateVariable:d,onCreateStyle:c,onClose:u,disableStyleModal:p,shouldUseEyedropperStyleCreationFlow:m}){let h="createVariableAndStyleModal";(0,rL.NF)({resolvedType:o});let{onCreateVariableSubmit:f,onCreateStyleSubmit:g}=function({onCreateVariable:e,onCreateStyle:t,onClose:n}){let{onCreateVariableSubmit:i}=(0,rA.useVariableCreateModalActions)({onCreateVariable:e,onClose:n}),s=(0,tA._G)(),r=(0,a.d4)(e=>e.mirror.sceneGraph);return{onCreateVariableSubmit:i,onCreateStyleSubmit:function(e){let i=function(e){let t=l.Pt4.getStyleNodeId(e.key,e.version),n=r.get(t);return n?{type:t3.PW.STYLE,name:n.name,library_key:s??(0,id.l)(""),key:n.styleKeyForPublish,thumbnail_url:"",canvas_url:"",content_hash:n.styleVersionHash??void 0,userFacingVersion:(0,rT.IA)(n.userFacingVersion),node_id:n.guid,isLocal:!0,style_type:n.styleType}:null}(e);i&&(t(i),n())}}}({onCreateVariable:d,onCreateStyle:c,onClose:u}),[x,_,v]=rE.t.useTabs({createStyle:!p,createVariable:!0},{recordingKey:ef.Pt(h,"viewTabs"),defaultActive:()=>r&&["createVariable","createStyle"].includes(r)?r:"createVariable"});return(0,i.jsx)(ta.bL,{onClose:u,defaultPosition:e,width:tZ.i,recordingKey:"createStyleWindow",children:(0,i.jsxs)(tr.vo,{children:[(0,i.jsxs)(tr.Y9,{children:[(0,i.jsx)(tr.r1,{children:(0,y.tx)("design_systems.create_style.title")}),(0,i.jsxs)(rE.t.TabStrip,{manager:v,children:[(0,i.jsx)(rE.t.Tab,{...x.createStyle,children:(0,y.tx)("design_systems.create_style.style")}),(0,i.jsx)(rE.t.Tab,{...x.createVariable,children:(0,y.tx)("variables.create_modal.title")})]})]}),(0,i.jsxs)(tr.nB,{padding:0,children:[(0,i.jsx)(rE.t.TabPanel,{..._.createStyle,children:(0,i.jsx)(rR,{inheritStyleKeyField:n,initialStyleCreationPaint:s,recordingKey:"createStyleModal",onSubmit:g,shouldUseEyedropperStyleCreationFlow:m??!1})}),(0,i.jsx)(rE.t.TabPanel,{..._.createVariable,children:(0,i.jsx)(rA.CreateVariableForm,{resolvedType:o,initialValue:t,recordingKey:ef.Pt(h,"createVariableForm"),onSubmit:f})})]})]})})},VariableAndComponentPropCreateModalRoot:rw.NO};function r0(e){return(0,i.jsx)(u.l,{id:"FullscreenViewInnerWrapper",children:(0,i.jsx)(g.u,{label:"FullscreenViewInnerWrapper",children:(0,i.jsx)(r1,{...e})})})}function r1({children:e}){let t=(0,d.R)(rZ),n=(0,a.wA)(),u=(0,eB.TA)(),f=t.openFile?t.openFile.key:null,g=(0,eH.px)().unwrapOr(null),E=(0,B.ut)(l.Ez5?.uiState().shouldShowAutoLayoutHintsIfExist,!1),S=(0,B.ut)(l.Ez5?.uiState().autoLayoutShortcutHints,new Map),I=(0,m.bc)((0,eU.Jpz)({key:f??""}),{enabled:!!f}),N=!1;if(I&&"loaded"===I.status&&t.openFile){let e=I.data.file;if(e&&u){let n=e.linkAccess,i=(0,h.oA)(e.team?.isStarterTeam,!1),s=(0,h.oA)(e.team?.isStudentTeam,!1),a=!!e.roles.find(e=>e.userId===u);N=(0,o.kc)().starter_file_no_auto_grant_role?t.openFile.canEdit&&n===eG.PQ.EDIT&&i&&!s&&!g:t.openFile.canEdit&&n===eG.PQ.EDIT&&i&&!s&&!a}}(0,b.fk)(f);let A=t.openFile?.editorType==="design",L=(0,k.l7)(),M=(0,C.e)(),O=(0,k.RT)(),R=(0,nB.bE)(),P=(0,rK.Oc)(),[D]=(0,c.fp)(ez.vE),F=(0,c.Xr)(nm),z=!t.showUi&&(0,e$.TY)(t.dropdownShown),G=t.dropdownShown?.type===e$.jv,U=G?t.dropdownShown?.data?.parameterEntryArgs:void 0,V=t.dropdownShown?.data?.fireQuickActionsTrackingEvent||r.lQ,H=!(0,rU.ty)(),K=(0,s.useCallback)(e=>{n((0,w.r)({dataTransfer:e.dataTransfer,clientX:e.clientX,clientY:e.clientY}))},[n]),W=(0,s.useCallback)(e=>{ex.Y5.reparentRootElement(e),e&&e.addEventListener("drop",K)},[K]),q=D&&D.status===ez.QY.WAITING,X=!q&&t.showingReconnectingModal;return(0,i.jsxs)(i.Fragment,{children:[(0,o.kc)().ee_color_management_debug?(0,i.jsx)(eD,{}):null,f&&(0,i.jsx)(rJ,{fileKey:f}),!(x.Ay.isIpad||x.Ay.isIpadNative||x.Ay.isMobileBrowser||x.Ay.isMeetDevice)&&(0,i.jsx)(rQ,{}),(0,i.jsx)("div",{className:rY.MY,"data-forward-events-to-fullscreen":!0,children:(0,i.jsx)(t9.l.Provider,{value:r$,children:(0,i.jsxs)(ep,{children:[(0,o.kc)().cursor_bot&&A&&t.hasCursorBot&&(0,i.jsx)(az,{}),!L&&!M&&!R&&!P&&!O&&(0,i.jsx)("div",{ref:W,onMouseEnter:()=>F(!0),onMouseLeave:()=>F(!1)},"fullscreen-container"),(0,i.jsx)(aX,{}),(0,i.jsx)(e9.T,{}),(0,eF.T)()&&(0,o.kc)().dt_vscode_ready_for_dev&&(0,i.jsx)(j.f,{isOnReadyForDevPage:!1}),!t.fileIsLoading&&(0,i.jsx)(e2,{}),z&&(0,i.jsx)(nU.e,{dropdown:t.dropdownShown},"fullscreen-menu"),G&&(0,i.jsx)(_.tH,{boundaryKey:"QuickActionsOuter",onError:()=>{n(v.F.enqueue({message:"Unable to open quick actions",type:"react-error"}))},fallback:_.H4.NONE_I_KNOW_WHAT_IM_DOING,children:(0,i.jsx)(rj,{parameterEntryArgs:U,fireTrackingEvent:V},"quick-actions")}),(0,i.jsx)(eQ,{}),(0,o.kc)().ce_al_experiments_on&&E&&S.size>0&&(0,i.jsx)(ts,{}),e,t.hyperlinkLocation&&(0,i.jsx)(eN,{hyperlinkLocation:t.hyperlinkLocation,editorType:t.selectedView.editorType,recordingKey:"hyperlinkEditor"}),(0,i.jsx)(e8.y,{}),t.progressBarState.mode!==l.Oin.OFF&&(0,i.jsx)(rP.z2,{editorType:(0,T.oD)(t.selectedView.editorType),progressBarMode:t.progressBarState.mode,progressBarType:t.progressBarState.type,left:0}),q?(0,i.jsx)(rG,{}):X&&(0,i.jsx)(rB,{clientType:"fullscreen"}),(0,i.jsx)(rX.Nd,{}),(0,i.jsx)(rX.jx,{showStartModal:N}),t.dropdownShown&&!H&&!x.Ay.isMeetDevice&&(0,i.jsx)(_.tH,{boundaryKey:"FullscreenContextMenu",onError:()=>{n(v.F.enqueue({message:"Unable to open context menu",type:"react-error"}))},fallback:_.H4.NONE_I_KNOW_WHAT_IM_DOING,children:(0,i.jsx)(aO,{dropdownShown:t.dropdownShown,selectedView:t.selectedView,ariaLabelledBy:(0,y.t)("fullscreen.fullscreen_view.context_menu.aria_label")})}),t.pickerShown?.id===eb.C9&&(0,i.jsx)(tW,{}),t.pickerShown?.id===aB.O&&(0,i.jsx)(aB.S,{recordingKey:"nudgeAmountPicker"}),(0,i.jsx)(nz,{})]})})}),(0,i.jsx)(rV,{}),(0,i.jsx)(e5,{}),t.showKeyboardShortcuts&&(0,i.jsx)(aR.k7,{recordingKey:"keyboardShortcutPanel"}),(0,o.kc)().react_scenegraph&&(0,i.jsx)(rH.U,{fallback:p.H4.NONE})]})}},495766:(e,t,n)=>{n.d(t,{jx:()=>eh,XI:()=>e_,qn:()=>ep,Nd:()=>em,RS:()=>eu,P2:()=>eg,j6:()=>ex,Ky:()=>ef});var i=n(104076),s=n(716976),a=n(237420),r=n(266808),l=n(324063),o=n(434511),d=n(140490),c=n(549571),u=n(598626),p=n(742549),m=n(548587),h=n(315910),f=n(366535),g=n(678711),x=n(551037),_=n(354114),y=n(74620),v=n(211862),b=n(592726),C=n(725837),j=n(249586),k=n(208740),w=n(147718),E=n(231378),T=n(656474),S=n(790009),I=n(170627),N=n(980852),A=n(883765),L=n(166887),M=n(967782),O=n(192075),R=n(228227),P=n(278491),D=n(772523),F=n(553065),z=n(754446),B=n(692042),G=n(733106),U=n(862716),V=n(415567),H=n(48251);function K(e){let t=(0,a.d4)(e=>e.mirror.selectionProperties.name),n=(0,a.d4)(e=>e.mirror.selectionProperties.width),s=(0,V.xv)(),l=(0,G.W)();if(!t||!n||!s)return null;let o=r.qmM?.editorTypeConfig().hasSlideRowBeenManuallyRenamed(s)??!0;return(0,i.jsx)(U.qn,{name:o?t:"",setName:n=>{t&&(I.l7.user("rename-frame",()=>D.i(s,n)),l({newTitle:n,nodeType:"FRAME"}),n!==t&&(0,G.d)(n).length>0&&(0,M.YQ)({id:"frame_node_name_changed_with_rfd_indicator",properties:{nodeId:s}}),e?.setNameCallback?.(s))},maxWidth:n,hasSlideRowBeenManuallyRenamed:o})}function W(){return(0,i.jsx)(S.J,{brand:"design",children:(0,i.jsx)(K,{setNameCallback:e=>{A.az.trackDefinedEvent("slides.rename_row",{rowId:e})}})})}function q(){return(0,i.jsx)(S.J,{brand:"cooper",children:(0,i.jsx)(K,{})})}function X(){let[e,t]=(0,z.lJ)("prototypeStartingPoint"),n=F.E7(e)?.name||"";return n?(0,i.jsx)(U.qn,{name:n,setName:n=>{n&&t({name:n,description:F.E7(e)?.description||"",position:F.E7(e)?.position||""})},maxWidth:93,containerClassname:H.VW}):null}function Y(){let{measurementId:e,initMeasurementText:t}=(0,a.d4)(e=>e.mirror.appModel.onCanvasNameEditorInfo),n=(0,a.d4)(e=>e.mirror.appModel.currentPage),l=s.useMemo(()=>r.w3z.findMeasurement(e,n),[e,n]),o=s.useRef(!l?.freeText),d=(0,R.Kv)(),c=function(){let e=(0,L.U)();return s.useCallback((t,n,i)=>{let s=t.findContainingTopLevelFrameOrSelf(),a=t.containingCanvas,r={measurement_id:n.id,from_node_id:n.fromNode,to_node_id:1===n.toNode.length?n.toNode[0].toString():n.toNode.toString(),node_type:t.type};s&&(r.tlf_id=s),a&&(r.page_id=a),r.free_text=i,e("update_annotation_measurement_free_text",r)},[e])}();return l?d?(r.glU?.hideOnCanvasNameEditor(),null):(0,i.jsx)(U.qn,{name:t,setName:e=>{let n=(0,N.getActiveTSSceneGraph)().get(l.fromNode);if(n){if(o&&e===t)return;I.l7.user("free-text-annotation-measurement",()=>{n.updateMeasurementFreeText(l.id,e),c(n,l,e)})}},maxWidth:150}):null}function Z(){let{varWidthNodeId:e,varWidthIndex:t}=(0,a.d4)(e=>e.mirror.appModel.onCanvasNameEditorInfo),n=(0,L.U)(),s=(0,N.getActiveTSSceneGraph)().get(e);if(!s)return null;let r=s.variableWidthPoints,l=s.strokeWeight;if(r.length<=t)return null;let o=r[t],d=o.ascent*l*2;return(0,i.jsx)(U.qn,{name:(Math.round(10*d)/10).toString(),containerClassname:H.WV,setName:e=>I.nc.user("set-var-width-point-ascent",()=>{let i=parseFloat(e);if(isNaN(i))return;let a=[...r];a[t]={...o,ascent:i/(2*l)},s.variableWidthPoints=a,n("on_canvas_var_width_point_update",{node_id:s.id})})(),maxWidth:200})}function J(){let e=(0,a.d4)(e=>e.mirror.selectionProperties.name),t=(0,a.d4)(e=>e.mirror.selectionProperties.width),n=(0,G.W)();return null!=e&&t?(0,i.jsx)(Q,{name:e,setNameWithNodeId:(e,t)=>{I.l7.user("rename-section",()=>D.i(e,t?t.trim():"")),n({newTitle:t,nodeType:"SECTION"})},maxWidth:t}):null}function Q(e){let{name:t,setNameWithNodeId:n,maxWidth:s}=e,l=(0,V.uQ)(),o=(0,U.R9)(t,e=>{l&&n(l,e)},{maxWidth:s}),d=(0,a.d4)(e=>{let t=e.mirror.appModel.activeCanvasEditModeType;return t===r.m1T.DESIGN_LAYOUT||t===r.m1T.SITES_LAYOUT}),{fontSize:c,top:u,left:p,height:m,horizontalPadding:h,verticalPadding:f,borderRadius:g}=function(e,t){let{fontSize:n,padding:i,margin:s,cornerRadius:l}=(0,a.d4)(e=>e.mirror.appModel.onCanvasNameEditorInfo),o=r.qmM.editorTypeConfig().showBigSectionNamePills(),d=i.x,c=i.y,u=o?24:2*i.y+n,p=0,m=-s.y-u,h=r.qmM.editorTypeConfig().sectionNestedZoomLevel();return(!e||t<=h)&&(p=s.x,m=s.y),{fontSize:n,height:u,top:m,left:p,horizontalPadding:d,verticalPadding:c,borderRadius:l}}((0,a.d4)(e=>{if(null===l)return!1;let t=e.mirror.sceneGraph.get(l),n=e.mirror.appModel.currentPage,i=!!t?.isResponsiveSetOrWebpage;return t&&("SECTION"===t.type||i)&&t.parentGuid===n}),Math.round(100*(0,B._X)({subscribeToUpdates_expensive:!0}).zoomScale));if(!o||!l)return null;let{containerRef:x,measurerRef:_,containerStyle:y,editingName:v,onFocus:b,onChange:C,onKeyDown:j,onBlur:k,width:w,setIsComposing:E}=o,T=d?"normal":500;return(0,i.jsxs)("div",{ref:x,className:`${H.ed} ${P.Dm}`,style:y,children:[(0,i.jsx)("span",{ref:_,className:H.so,style:{fontSize:c,fontWeight:T,paddingLeft:h,paddingRight:h,paddingTop:f,paddingBottom:f},children:v}),(0,i.jsx)("input",{"aria-label":(0,O.t)("whiteboard.section_name.aria_label"),autoCapitalize:"off",autoComplete:"off",autoCorrect:"off",autoFocus:!0,className:H.Zk,dir:"auto",onBlur:k,onChange:C,onCompositionEnd:()=>E(!1),onCompositionStart:()=>E(!0),onFocus:b,onKeyDown:j,spellCheck:!1,style:{width:`${w}px`,fontSize:c,fontWeight:T,left:p,top:u,height:m,borderRadius:g,paddingLeft:h,paddingRight:h,paddingTop:f,paddingBottom:f},value:v})]})}var $=n(457609),ee=n(788814),et=n(598369),en=n(219199),ei=n(111297),es=n(234581),ea=n(354174),er=n(201019);function el(e){let t=(0,b.iZ)();return(0,i.jsx)(ei.fu,{name:"Starter team edit confirmation modal",properties:{userId:t?.id,userEmail:t?.email},children:(0,i.jsx)(ea.yX,{confirmationTitle:(0,O.t)("fullscreen.starter_team_edit_modal.open_this_link"),confirmText:"Continue",onConfirm:()=>{(0,A.sx)("Starter File Edit Modal Confirm Clicked",{fileKey:e.fileKey}),es.L.createStarterTeamFileRole({key:e.fileKey})},disableClickOutsideToHide:!0,hideOnConfirm:!1,size:"small",hideCancel:!1,hideClose:!0,onCancel:()=>{(0,A.sx)("Starter File Edit Modal Cancel Clicked",{fileKey:e.fileKey}),en.Ay.redirect("/files/recents-and-sharing")},children:(0,i.jsx)("div",{className:er.jE,children:(0,O.tx)("fullscreen.starter_team_edit_modal.when_you_open_this_link_your_email_may_be_visible",{email:t?.email})})})})}var eo=n(276800);let ed=(0,n(959834).Ju)(function(e){return(0,i.jsxs)(ea.ey,{size:"small",className:er.yl,disableClickOutsideToHide:!0,hide:eo.lQ,children:[(0,i.jsx)("div",{className:er.DD,children:(0,O.tx)("file_migration.updating.title")}),(0,i.jsx)("div",{className:er.jE,children:(0,O.tx)("file_migration.updating.message")})]})},"FileMigrationWarningModal");function ec(){return(0,a.d4)(e=>e.progressBarState)}let eu=(0,l.xx)((e,t,n)=>{e(h.gI()),e(m.mV({}))});function ep(){switch((0,y.p8)("onCanvasNameEditorInfo").mode){case r.nzw.FRAME_NAME:return(0,i.jsx)(K,{});case r.nzw.FLOW_STARTING_POINT_NAME:return(0,i.jsx)(X,{});case r.nzw.SECTION_NAME:return(0,i.jsx)(J,{});case r.nzw.MEASUREMENT_FREE_TEXT:return(0,i.jsx)(Y,{});case r.nzw.RESPONSIVE_SET_NAME:case r.nzw.RESPONSIVE_NODE_SET_NAME:return(0,i.jsx)(J,{});case r.nzw.CANVAS_GRID_ROW_NAME:return(0,i.jsx)(W,{});case r.nzw.CANVAS_GRID_ROW_STATE_GROUP:return(0,i.jsx)(q,{});case r.nzw.GRID_TRACK_SIZE:return(0,i.jsx)(T.v2,{});case r.nzw.VAR_WIDTH_SIZE:return(0,i.jsx)(Z,{});default:return null}}function em(){let e=ec(),t=(0,a.d4)(e=>e.showingOpenDesktopAppModal),n=(0,a.wA)();if(e.mode!==r.Oin.OFF)return(0,i.jsx)(i.Fragment,{});switch(t){case k.kF.FOR_OPEN:return(0,i.jsx)(ee.g,{dispatch:n});case k.kF.FOR_MENU:return(0,i.jsx)($.s,{dispatch:n})}return(0,i.jsx)(i.Fragment,{})}function eh(e){let t=(0,v.q5)(),n=(0,b.iZ)();return e.showStartModal&&n&&t&&t.key?(0,i.jsx)(el,{fileKey:t.key}):(0,i.jsx)(i.Fragment,{})}function ef(){let e=(0,s.useRef)(null),t=(0,s.useRef)(!1),n=ec(),i=(0,a.wA)(),l=(0,a.d4)(e=>e.needsUpgrade),o=(0,s.useCallback)(()=>{null!==e.current&&(clearTimeout(e.current),e.current=null)},[e]),d=(0,s.useCallback)(()=>{o(),e.current=setTimeout(()=>{t.current=!0,l&&n.mode!==r.Oin.OFF&&i((0,f.to)({type:ed}))},2e4)},[l,n,i,o]),c=(0,s.useCallback)(()=>{t.current&&i(f.Ce()),t.current=!1,o()},[t,o,i]);(0,s.useEffect)(()=>(_.Y5.fromFullscreen.on("multiplayerConnect",d),_.Y5.fromFullscreen.on("multiplayerDisconnect",o),_.Y5.fromFullscreen.on("multiplayerGotSchema",c),()=>{_.Y5.fromFullscreen.removeListener("multiplayerConnect",d),_.Y5.fromFullscreen.removeListener("multiplayerDisconnect",o),_.Y5.fromFullscreen.removeListener("multiplayerGotSchema",c),o()}),[o,d,c])}function eg(e,t,n){!t.current&&function(e,t){if(t===r.NLJ.VECTOR_PENCIL||t===r.NLJ.ERASER||t===r.NLJ.HIGHLIGHTER){var n;return n="figjam",(0,j.uE)("Pointer Input",C.D.getState(),{inputSource:e.pointerType,tool:function(e){switch(e){case r.NLJ.VECTOR_PENCIL:return"VECTOR_PENCIL";case r.NLJ.ERASER:return"ERASER";case r.NLJ.HIGHLIGHTER:return"HIGHLIGHTER"}}(t),productType:n}),!0}return!1}(e,n)&&(t.current=!0)}function ex(e,t){t.current||(t.current=!0)}function e_(e){return(0,i.jsx)(o.l,{id:"MultiplayerEditorOverlays",children:(0,i.jsx)(d.u,{label:"MultiplayerEditorOverlays",children:(0,i.jsx)(ey,{...e})})})}function ey({commentsDetailContainerRef:e}){let t=(0,y.p8)("topLevelMode")===r.lyf.HISTORY,n=(0,v.q5)(),s=(0,a.d4)(e=>e.user),l=(0,y.p8)("currentPage"),o=(0,a.d4)(e=>e.comments),d=(0,p.l7)(),m=(0,u.e)(),h=(0,w.bE)(),f=(0,x.k)(),_=(0,c.xo)(),b=o.activeThread?.id||null,C=o.showOnlyParticipating,j=o.showResolved;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(et.Ay,{}),n&&!t&&!d&&!m&&!h&&(s||f)&&!_&&(0,i.jsx)(g.$2,{showOnlyParticipatingComments:C,showResolvedComments:j,pageId:l,activeId:b,renderDetailContainerInPortal:!0,detailContainerPortal:e.current}),!_&&(0,i.jsx)(E.yL,{})]})}},11216:(e,t,n)=>{n.d(t,{v:()=>B});var i=n(104076),s=n(716976),a=n(237420),r=n(266808),l=n(511570),o=n.n(l),d=n(876621),c=n(501781),u=n(962212),p=n(288747),m=n(331497),h=n(623971),f=n(795033),g=n(883765),x=n(725837),_=n(755444),y=n(449572),v=n(770366),b=n(140490),C=n(227689),j=n(850701),k=n(152469),w=n(244399),E=n(4033),T=n(727612),S=n(211862),I=n(657878),N=n(761597),A=n(59849),L=n(923570);function M(){return(0,N.o)(),(0,i.jsx)(i.Fragment,{})}function O(e){return(0,i.jsx)(b.u,{label:"FullscreenLivegraphSubscriber",children:(0,i.jsx)(R,{...e})})}function R(e){let t=(0,I._6)(),n="fullscreen"===t.view?t.fileKey:null,l=(0,a.wA)(),o=(0,a.d4)(e=>e.fileByKey),d=(0,a.d4)(e=>e.userAnalyticsData),c=(0,a.d4)(e=>e.user),u=(0,S.q5)(),p=u?.canEdit,{orgId:m}=e,h=null!=n&&!!o[n]?.is_favorited,b=(0,y.bc)((0,A.jJU)({fileKey:n||""}),{enabled:!!n});s.useEffect(()=>{if("loaded"===b.status){let e=b.data.file?.developerRelatedLinks,t=e?.reduce((e,t)=>{let n=e.get(t.nodeId)??[];return n.push(t),e.set(t.nodeId,n),e},new Map);if(t)try{r.glU?.setDeveloperRelatedLinks(t)}catch{}}},[b]);let O=s.useRef(!1),R=(0,f.Xr)(w.Kc),P=(0,y.bc)(A.a8q,{fileKey:n||""},{enabled:!!n});s.useLayoutEffect(()=>{if("loaded"!==P.status)return;let e=P.data.figFileWorkshopMode;R(e?e.expiresAt:null),e&&e.expiresAt>new Date&&(O.current=!0),l(k.lX(e?{id:e.id,until:e.expiresAt,loaded:!0}:{loaded:!0}))},[P,l,R]);let D=s.useRef(null),F=s.useRef(!1),z=s.useRef(null),B=s.useRef(null),G=(0,y.bc)(A.ehp,{fileKey:n||""},{enabled:!!n});s.useLayoutEffect(()=>{if("loaded"!==G.status||G.errors.length>0&&null===G.data.file)return;let e=G.data.file;if(null===D.current){let t=(0,_.Ay)().editing_file;null!==e&&t&&e.key===t.key&&!!t.can_edit!==e.canEdit&&((0,g.sx)("open_file_inconsistent_permission",{file_key:e.key,lg_can_edit:e.canEdit,sinatra_can_edit:t.can_edit,user:x.D.getState().user?.id},{batchRequest:!0}),(0,v.Rh)("open_file.inconsistent_permissions",{lg_can_edit:e.canEdit,sinatra_can_edit:t.can_edit}),r.h3O?.reconnect(!1))}if((0,L.X_)({openFile:e,wasInWorkshop:O.current,previousCanEdit:D.current,wasInUnclaimedTryFile:F.current,previousCanView:B.current,previousFileKey:z.current?.key||null},l),null==e)return;B.current=e.canView,D.current=e.canEdit,O.current&&e.isTryFile&&(F.current=!0);let t=x.D.getState().selectedView;"fullscreen"===t.view&&t.fileKey===e?.key&&z.current!==e&&(l(j.UC({openFile:{...e,isFavorited:h},isLiveGraphSync:!0})),z.current=e)},[G,l,h]);let U=(0,E.Be)();return s.useLayoutEffect(()=>{let e=x.D.getState().selectedView;if(!U.loaded||"fullscreen"!==e.view)return;let{plugins:t,widgets:n,orgPlugins:i,orgWidgets:s}=U,a={...t,...i},r={...n,...s};l(C.g3(a)),l(C.zI(r))},[l,m,U]),(0,T.rB)(),p&&(0,N.n)(d,c?.email)?(0,i.jsx)(M,{}):(0,i.jsx)(i.Fragment,{})}var P=n(690551),D=n(495766),F=n(446071);function z(){return(0,c.co)(),null}function B({children:e,setShouldShowDragAndDropBorder:t,onPointerDown:n=D.j6,isDragTarget:l=!1}){let c=(0,a.d4)(e=>e.modalShown),f=(0,u.T)(),g=(0,m.ut)(r.Ez5?.devHandoffState()?.focusMode,!1),x=(0,p.dq)(),_=s.useRef(!1);return(0,i.jsx)(P.d,{children:(0,i.jsx)(d.Y,{isDragTarget:()=>l,onTargetDragEnter:()=>{t(!0)},onTargetDragLeave:()=>{t(!1)},onTargetDrop:()=>{t(!1)},style:{flex:"1 1 auto"},children:(0,i.jsxs)("div",{"aria-hidden":!!c,className:o()(F.lA,f&&g&&F.$J),onPointerDown:e=>{n(e,_)},children:[(0,i.jsx)(O,{orgId:x}),e,(0,i.jsx)(h.G,{}),(0,i.jsx)(z,{})]})})})}},81786:(e,t,n)=>{n.d(t,{O:()=>m});var i=n(716976),s=n(237420),a=n(357524),r=n(296525),l=n(83734),o=n(315361),d=n(74620),c=n(361145),u=n(68191),p=n(312387);function m(){let e=(0,s.wA)(),t=(0,d.aV)(),n=(0,s.d4)(e=>e.selectedView.compareChangesVersionId),m=(0,s.d4)(e=>e.selectedView.compareChangesActivityId),h=(0,s.d4)(e=>e.selectedView?.view==="fullscreen"&&e.selectedView.compareChangesNodeId||null),f=(0,o.uQ)(),g=h??f??void 0,x=(0,a.ei)(g),_=(0,r.i)(g),{versions:y,versionsQueryLoaded:v}=(0,u.DS)(g),b=!v||0===y.length||!x,C=(0,c.P)(),j=(0,l.dU)(g??null,"cc_version_id_url");i.useEffect(()=>{(n||m)&&!t&&v&&!C&&(_&&!b?j():(0,p.L$)(void 0,e,!1,null))},[n,m,e,t,C,b,_,j,v])}},822846:(e,t,n)=>{n.d(t,{x:()=>tI,m:()=>tw});var i=n(104076),s=n(716976),a=n(419822),r=n(812714),l=n(795033),o=n(120440),d=n(835531),c=n(333331),u=n(883765),p=n(434511),m=n(449572),h=n(140490),f=n(967782),g=n(192075),x=n(630332),_=n(265149),y=n(693333),v=n(318648),b=n(115989),C=n(657878),j=n(59849);function k(e){let t=new Date(e);return t.setDate(e.getDate()-e.getDay()),t.setHours(0,0,0,0),t}function w({}){let e=(0,C.Td)(),t=(0,l.Xr)(x.hM),n=(0,l.Xr)(x.FI),r=(0,l.md)(x.G1),o=s.useCallback(e=>e.metadata&&"object"==typeof e.metadata&&e.metadata.title?e.metadata.title:(0,g.t)("ai_assistant.chat.history.new_chat_title"),[]),d=s.useCallback(e=>{if(!e.latestUserMessage?.parts?.length)return(0,g.t)("ai_assistant.chat.history.no_messages");let t=(0,v.th)(e.latestUserMessage).content.filter(e=>"text"===e.type).map(e=>e.text);if(0===t.length)return(0,g.t)("ai_assistant.chat.history.no_messages");let n=t.join(" ").trim();return n.length>100?`${n.slice(0,100)}...`:n},[]),{data:u,status:p}=(0,m.Rs)((0,j.r3i)(e?{ownerId:e}:null)),h=(0,c.oA)(u?.fileAiChatThreads),f=h?.map(e=>({...e,title:o(e),preview:d(e)})),_=e=>{let t={},n=new Date;return e.forEach(e=>{let i=new Date(e.createdAt),s=Math.floor((n.getTime()-i.getTime())/864e5),a=(0,g.t)("ai_assistant.chat.history.earlier");t[a=0===s?(0,g.t)("ai_assistant.chat.history.today"):!function(e){let t=new Date;return e>=k(t)&&e<t}(i)?!function(e){let t=k(new Date),n=new Date(t);return n.setDate(t.getDate()-7),e>=n&&e<t}(i)?(0,g.t)("ai_assistant.chat.history.earlier"):(0,g.t)("ai_assistant.chat.history.last_week"):(0,g.t)("ai_assistant.chat.history.this_week")]||(t[a]=[]),t[a].push(e)}),t},w=s.useMemo(()=>_(f??[]),[f]),E=e=>{t(e),n(x.Kk.Thread)};function T({id:e,title:t,preview:n,createdAt:s}){return(0,i.jsxs)("button",{className:"x78zum5 x1af02g3 x1cy8zhl xe8ttls x1sxf85j x1ypdohk xh8yej3 xeuugli x9f619 x1yjdb4r xv2f06h",onClick:()=>E(e),tabIndex:0,style:{cursor:"pointer"},children:[(0,i.jsx)("div",{className:"x1n2onr6 x1td3qas x10w6t97 x2lah0s",children:(0,i.jsx)("div",{className:"x1td3qas x10w6t97 x1yrfp1h x1sxf85j x78zum5 x6s0dn4 xl56j7k xmkeg23 x1y0btm7 x1co876m",children:(0,i.jsx)(y.u,{})})}),(0,i.jsxs)("div",{className:"x78zum5 xdt5ytf x195vfkc x1iyjqo2 xeuugli xnalus7",children:[(0,i.jsxs)("div",{className:"x78zum5 x167g77z x6s0dn4 xh8yej3 xeuugli",children:[(0,i.jsx)("div",{className:"xxrns5j x1q8tae1 x1vg90ec x1eab18d x1yyillh xiuzu7u x1iyjqo2 xeuugli xb3r6kr xlyipyv xuxw1ft xdpxx8g",children:t||(0,g.t)("ai_assistant.chat.history.new_chat_title")}),(0,i.jsx)("div",{className:"xrlp15q x1nmd3yn xm735u9 xkbmbem x3wk4up xv1l7n4 x2lah0s xuxw1ft xirqqd8 xb3r6kr xlyipyv",children:(0,b.JD)(s,"short")})]}),(0,i.jsx)("div",{className:"xrlp15q x1nmd3yn xm735u9 xkbmbem x3wk4up xv1l7n4 xh8yej3 x104kibb x1h7i4cw x1ua5tub xb3r6kr xlyipyv xdpxx8g",children:n||"Chat conversation"})]})]},e)}return(0,i.jsxs)("div",{className:"xe8ttls x78zum5 xdt5ytf x1jnr06f x1iyjqo2 x1odjw0f x2lwn1j",children:["loading"===p&&(0,i.jsx)("div",{className:"x78zum5 xl56j7k x6s0dn4 x1o8uwn5 x1iyjqo2",children:(0,i.jsx)(a.k,{})}),"errors"===p&&(0,i.jsx)("div",{className:"x78zum5 xdt5ytf x6s0dn4 xl56j7k x62rkhy x4l9tsp x2b8uid",children:(0,i.jsx)("div",{className:"xif65rj xv1l7n4",children:(0,g.t)("ai_assistant.chat.history.error_loading_threads")})}),"loaded"===p&&(0,i.jsxs)("div",{className:"x78zum5 xdt5ytf x1jnr06f x1iyjqo2",children:[(!f?.length||0===f.length)&&(0,i.jsxs)(s.Fragment,{children:[(0,i.jsx)("div",{className:"x78zum5 x6s0dn4 x1y1aw1k xy13l1i xjkvuk6 x163pfp",children:(0,i.jsx)("div",{className:"xrlp15q x1nmd3yn xm735u9 xkbmbem x3wk4up xv1l7n4 x1sdyfia",children:(0,g.t)("ai_assistant.chat.history.today")})}),(0,i.jsx)(T,{id:r??"",title:(0,g.t)("ai_assistant.chat.history.new_chat_title"),preview:(0,g.t)("ai_assistant.chat.history.not_started"),createdAt:new Date})]},(0,g.t)("ai_assistant.chat.history.today")),(f?.length??0)>0&&Object.entries(w).map(([e,t])=>(0,i.jsxs)(s.Fragment,{children:[(0,i.jsx)("div",{className:"x78zum5 x6s0dn4 x1y1aw1k xy13l1i xjkvuk6 x163pfp",children:(0,i.jsx)("div",{className:"xrlp15q x1nmd3yn xm735u9 xkbmbem x3wk4up xv1l7n4 x1sdyfia",children:e})}),t.map(e=>(0,i.jsx)(T,{id:e.id,title:e.title,preview:e.preview,createdAt:e.createdAt},e.id))]},e))]})]})}var E=n(185568);function T({widthFallback:e,currentView:t,assistantOptionOverrides:n}){let a=s.useRef(null),r=_.wY(a)?.width,l=t===x.Kk.Thread?0:1;return(0,i.jsx)("div",{className:"x78zum5 xdt5ytf x1iyjqo2 xb3r6kr x5yr21d",children:(0,i.jsxs)(S,{index:l,width:r??e,ref:a,children:[(0,i.jsx)(E.A,{assistantOptionOverrides:n}),(0,i.jsx)(w,{})]})})}let S=s.forwardRef(function({children:e,index:t,width:n},a){let r=s.useMemo(()=>e.flat().filter(e=>!!e),[e]),l=Math.min(t,r.length-1);return(0,i.jsx)("div",{"data-testid":"chat-slide-carousel",...o.xk(N.container,N.containerWithTranslation(100*l)),ref:a,children:r.map((e,i)=>(0,s.createElement)("div",{...o.xk(N.item,N.itemWithWidth(n)),key:i,"data-testid":"chat-slide-carousel-item","aria-hidden":i!==t,inert:i!==t?"":void 0},e))})}),I={k3aq6I:"xsqj5wx",$$css:!0},N={container:{k1xSpc:"x78zum5",kXwgrk:"x15zctf7",kCS8Yb:"x1r8uery",kzQI83:"x1iyjqo2",kmuXW:"xs83m0k",kAzted:"x2lwn1j",kZKoxP:"x5yr21d",kmkexE:"x1ux5q4u",kzIqYQ:null,kIr0Dl:null,kIyJzY:null,k1ekBW:null,kAMwcw:null,$$css:!0},containerWithTranslation:e=>[I,{"--x-transform":`translateX(${e}%)`}],item:{kmuXW:"x2lah0s",kZKoxP:"x5yr21d",kAzted:"x2lwn1j",k1xSpc:"x78zum5",kXwgrk:"xdt5ytf",kORKVm:"x1odjw0f",$$css:!0},itemWithWidth:e=>[{kzqmXN:null!=e?"x5lhr3w":e,$$css:!0},{"--x-width":(e=>"number"==typeof e?e+"px":null!=e?e:void 0)(e)}]};var A=n(420680),L=n(536358),M=n(166887),O=n(141330),R=n(578420);function P(){return(0,i.jsx)(h.u,{label:"ChatTabActions",children:(0,i.jsx)(D,{})})}function D(){let e=(0,l.Xr)(x.qA),t=(0,l.Xr)(x.hM),n=(0,l.Xr)(x.FI),a=(0,x.xs)().length>0,o=(0,M.hC)(),d=(0,C.Td)(),u=(0,l.md)(x.G1),p=(0,l.md)(x.FI),h=d&&u,f=(0,m.Rs)((0,j.A6w)(h?{ownerId:d,id:u}:null)),_=(0,c.oA)(f.data?.activeAiChatThread),y=s.useCallback(()=>{e(e=>"idle"===e?"shouldCreate":e),t(null),n(x.Kk.Thread),o("ai_assistant.new_chat_button_clicked",{})},[e,t,n,o]);if(!(0,r.kc)().ai_assistant_header)return null;let v=p===x.Kk.HistoryList||p===x.Kk.Thread&&_;return(0,i.jsxs)("div",{className:"x78zum5 x1qughib xrybvsa",children:[(0,r.kc)().ai_assistant_ds_library_selector?(0,i.jsx)(R.yi,{helpUrlVariant:O.JT.START_AI_ASSISTANT}):null,v&&(0,i.jsx)("div",{className:"x78zum5 x6s0dn4 x1nfngrj xrybvsa",children:(0,i.jsx)(A.K,{onClick:y,disabled:a,"aria-label":a?(0,g.t)("ai_assistant.chat.new_chat_disabled_generating"):(0,g.t)("ai_assistant.chat.new_chat"),children:(0,i.jsx)(L.e,{})})})]})}var F=n(651116),z=n(742549),B=n(76404),G=n(508011),U=n(74620),V=n(211862),H=n(490499),K=n(842013),W=n(661379),q=n(993604),X=n(302727),Y=n(452981),Z=n(383424),J=n(811329),Q=n(988543),$=n(180244),ee=n(356958),et=n(434335),en=n(466735),ei=n(961524),es=n(284193),ea=n(926653),er=n(350019),el=n(380917),eo=n(473106),ed=n(85109),ec=n(977473),eu=n(147718),ep=n(406606),em=n(859689),eh=n(986436),ef=n(684742),eg=n(736813),ex=n(276800);function e_({ariaLabel:e,children:t,iconPrefix:n,onClick:s,selected:a,showArrow:r}){return(0,i.jsxs)(ef.E,{onClick:s??ex.lQ,"aria-label":e,...{0:{className:"x78zum5 x1qughib x8rdmch x1cmmqis x6s0dn4 xjbqb8w x12tve8b x19y5rnk xxk0z11 xh8yej3 x4xl6zf x9v5kkp x1n7vjt0"},2:{className:"x78zum5 x1qughib x8rdmch x1cmmqis x6s0dn4 x19y5rnk xxk0z11 xh8yej3 x4xl6zf x9v5kkp x1n7vjt0 x1v8gsql xxrns5j x1q8tae1 x1vg90ec x1eab18d x1yyillh"},1:{className:"x78zum5 x1qughib x1cmmqis x6s0dn4 xjbqb8w x12tve8b x19y5rnk xxk0z11 xh8yej3 x4xl6zf x9v5kkp x1n7vjt0 x1uhho1l"},3:{className:"x78zum5 x1qughib x1cmmqis x6s0dn4 x19y5rnk xxk0z11 xh8yej3 x4xl6zf x9v5kkp x1n7vjt0 x1v8gsql xxrns5j x1q8tae1 x1vg90ec x1eab18d x1yyillh x1uhho1l"}}[!!a<<1|!!n<<0],children:[(0,i.jsxs)("span",{className:"x78zum5 xlqzeqv x6s0dn4 xlyipyv xeuugli",children:[n,(0,i.jsx)("span",{className:"x1lliihq x12lumcd xeuugli xb3r6kr xlyipyv xuxw1ft x1vvkbs",children:t})]}),r&&(0,i.jsx)("span",{className:"x3psx0u",children:(0,i.jsx)(eg.k,{})})]})}let ey={kZKoxP:"x16ye13r",$$css:!0},ev={kVAEAm:"x10l6tqk",k87sOh:"x13vifvy",kbCHJM:"xu96u03",kLqNvP:"",kt4wiu:"",kzqmXN:"xh8yej3",kZKoxP:"x16ye13r",k3aq6I:"xsqj5wx",k1xSpc:"x78zum5",kGNEyG:"x6s0dn4",$$css:!0},eb={list:{k1xSpc:"x78zum5",kXwgrk:"xdt5ytf",kOIVth:"x1nfngrj",khm7nJ:null,k1C7PZ:null,kVAEAm:"x1n2onr6",kogj98:"x1y64a76",kUOVxO:null,keTefX:null,koQZXg:null,k71WvV:null,km5ZXQ:null,kqGvvJ:null,keoZOQ:null,k1K539:null,$$css:!0},listHeight:e=>[ey,{"--x-height":(e=>"number"==typeof e?e+"px":null!=e?e:void 0)(`${e}px`)}],virtualListItem:(e,t)=>[ev,{"--x-height":(e=>"number"==typeof e?e+"px":null!=e?e:void 0)(`${e}px`),"--x-transform":`translateY(${t}px)`}]};function eC(){let e=function(e){switch(e){case eh.q.COMPONENTS:return(0,i.jsx)(ek,{});case eh.q.COMPONENT:return(0,i.jsx)(ew,{});default:return(0,i.jsx)(ej,{})}}((0,l.md)(ep.BE));return(0,i.jsx)(ec.Cj,{children:e})}function ej(){let[e,t]=(0,l.fp)(ep.BE),[n,s]=(0,l.fp)(ep.h3),a=(0,l.md)(eu.cM);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"xrybvsa x17qaar8 x1ef8nbk x3enpkt",children:(0,i.jsxs)(X.Root,{value:n,onChange:e=>{e&&s((0,ea.l)(e))},children:[(0,i.jsx)(X.Trigger,{width:"fill",label:(0,i.jsx)(Y.h,{children:(0,g.tx)("design_systems.home.editor.selected_library")})}),(0,i.jsx)(X.Container,{children:a.map(e=>(0,i.jsx)(X.Option,{value:e.libraryKey,children:e.name},e.libraryKey))})]})}),(0,i.jsxs)("nav",{className:"x78zum5 xdt5ytf x1nfngrj x1n2onr6 x1y64a76",children:[(0,i.jsx)(e_,{ariaLabel:(0,g.t)("design_systems.home.editor.nav.overview"),iconPrefix:(0,i.jsx)(J.L,{}),selected:e===eh.q.OVERVIEW,onClick:()=>t(eh.q.OVERVIEW),children:(0,g.tx)("design_systems.home.editor.nav.overview")}),(0,i.jsx)(e_,{ariaLabel:(0,g.t)("design_systems.home.editor.nav.components"),iconPrefix:(0,i.jsx)(Q.P,{}),selected:e===eh.q.COMPONENTS,onClick:()=>t(eh.q.COMPONENTS),showArrow:!0,children:(0,g.tx)("design_systems.home.editor.nav.components")}),(0,i.jsx)(e_,{ariaLabel:(0,g.t)("design_systems.home.editor.nav.styles"),iconPrefix:(0,i.jsx)($.y,{}),selected:e===eh.q.STYLES,onClick:()=>t(eh.q.STYLES),children:(0,g.tx)("design_systems.home.editor.nav.styles")}),(0,i.jsx)(e_,{ariaLabel:(0,g.t)("design_systems.home.editor.nav.variables"),iconPrefix:(0,i.jsx)(ee.g,{}),selected:e===eh.q.VARIABLES,onClick:()=>t(eh.q.VARIABLES),children:(0,g.tx)("design_systems.home.editor.nav.variables")})]})]})}function ek(){let e=(0,l.Xr)(ep.BE),t=(0,l.md)(ep.h3),n=(0,l.md)((0,ec.kz)(t)),a=(0,em._)(),r=(0,s.useRef)(null),d=(0,er.Te)({count:n.length,getScrollElement:()=>r.current,estimateSize:()=>32,overscan:10});return(0,i.jsxs)("nav",{className:"x1l8dxvs",children:[(0,i.jsxs)("header",{className:"x6s0dn4 x78zum5 x1q0g3np xg2d0mh xkdneqi xrybvsa x17qaar8 x3enpkt xxrns5j x1q8tae1 x1vg90ec x1eab18d x1yyillh",children:[(0,i.jsx)(A.K,{"aria-label":(0,g.t)("design_systems.home.editor.nav.back"),htmlAttributes:{"data-tooltip":(0,g.t)("design_systems.home.editor.nav.back"),"data-tooltip-type":"text"},onClick:()=>e(eh.q.OVERVIEW),children:(0,i.jsx)(et.t,{})}),(0,g.tx)("design_systems.home.editor.nav.components")]}),(0,i.jsx)(Z.P,{scroll:"y",fill:!0,ref:r,children:(0,i.jsx)("div",{...o.Ay.props(eb.list,eb.listHeight(d.getTotalSize())),children:(0,i.jsx)(ed.B,{isLoading:a,children:d.getVirtualItems().map(e=>{let t=n[e.index];return t?(0,i.jsx)("div",{...o.Ay.props(eb.virtualListItem(e.size,e.start)),children:(0,i.jsx)(e_,{ariaLabel:t.component.name,onClick:()=>(0,eu.Cw)(t.component,eh.n.DESIGN),showArrow:!0,children:t.component.name},`ds-view-left-panel-${(0,el.V)(t.component)}`)},e.key):null})})})})]})}function ew(){let e=(0,l.Xr)(ep.BE),t=(0,l.md)(ep.Px),n=(0,l.md)(ep.h3),a=(0,l.md)((0,ec.kz)(n)),r=(0,l.md)(ep.gS),o=(0,s.useMemo)(()=>r?r.isPublished?r.type===eo.P.COMPONENT?a.find(e=>e.component.type===eo.P.COMPONENT&&e.component.component_key===r.assetKey):r.type===eo.P.STATE_GROUP?a.find(e=>e.component.type===eo.P.STATE_GROUP&&e.component.key===r.assetKey):null:a.find(e=>e.component.node_id===r.assetKey):null,[r,a]);if(!r||!o)return null;let{component:d}=o;return(0,i.jsxs)("nav",{children:[(0,i.jsxs)("header",{className:"x6s0dn4 x78zum5 x1q0g3np xg2d0mh xkdneqi xrybvsa x17qaar8 x3enpkt xxrns5j x1q8tae1 x1vg90ec x1eab18d x1yyillh",children:[(0,i.jsx)(A.K,{"aria-label":(0,g.t)("design_systems.home.editor.nav.back"),htmlAttributes:{"data-tooltip":(0,g.t)("design_systems.home.editor.nav.back"),"data-tooltip-type":"text"},onClick:()=>e(eh.q.COMPONENTS),children:(0,i.jsx)(et.t,{})}),d.name]}),(0,i.jsxs)("div",{className:"x78zum5 xdt5ytf x1nfngrj x1n2onr6 x1y64a76",children:[(0,i.jsx)(e_,{iconPrefix:(0,i.jsx)(en.a,{}),selected:t===eh.n.DESIGN,onClick:()=>(0,eu.Cw)(d,eh.n.DESIGN),children:(0,g.tx)("design_systems.home.editor.nav.design")}),(0,i.jsx)(e_,{iconPrefix:(0,i.jsx)(ei.D,{}),selected:t===eh.n.CODE,onClick:()=>(0,eu.Cw)(d,eh.n.CODE),children:(0,g.tx)("design_systems.home.editor.nav.code")}),(0,i.jsx)(e_,{iconPrefix:(0,i.jsx)(es.p,{}),selected:t===eh.n.DOCUMENTATION,onClick:()=>(0,eu.Cw)(d,eh.n.DOCUMENTATION),children:(0,g.tx)("design_systems.home.editor.nav.documentation")})]})]})}var eE=n(99160),eT=n(128396),eS=n(413535),eI=n(12811),eN=n(675476),eA=n(844182),eL=n(146264),eM=n(576268),eO=n(804363),eR=n(237420),eP=n(322530),eD=n(266808),eF=n(490698),ez=n(409019),eB=n(691952),eG=n(249586),eU=n(643077),eV=n(962212),eH=n(299117),eK=n(156816),eW=n(629560),eq=n(830534),eX=n(301868),eY=n(510232),eZ=n(568590),eJ=n(692042),eQ=n(349311),e$=n(87535),e0=n(68191),e1=n(555806),e2=n(702051);function e3(){let e=(0,eR.wA)(),t=(0,eR.d4)(e=>!!e.modalShown),n=(0,eR.d4)(e=>e.versionHistory.compareId);if(!eD.AWq)throw Error("HistoryChangesBindings is not available");let a=eD.AWq.getChunkChangeCount(),r=(0,eZ.Z)("chunk_change_navigator_navigate"),l=(0,eY.E)(),o=s.useCallback(e=>{if(!eD.Egt)throw Error("SceneGraphHelpers is not available");eD.Egt.setSelectedNodeAndCanvas(e,!0),r((0,eJ.QZ)({nodeId:e,...e0.ob}),e0.kh),l(e)},[r,l]),d=s.useCallback(e=>{if(!t&&0!==a){if(!eD.glU)throw Error("Fullscreen is not available");"ArrowUp"===e.key||"ArrowLeft"===e.key||e.shiftKey&&"Tab"===e.key?o(eD.glU.navigateToNextChange(-1)):("ArrowDown"===e.key||"ArrowRight"===e.key||"Tab"===e.key)&&o(eD.glU.navigateToNextChange(1))}},[t,a,o]);return(s.useEffect(()=>{e(eX.Q.dequeue({type:eq._.SEE_WHATS_CHANGED}))},[e]),s.useEffect(()=>{if(n&&0!==a){if(!eD.glU)throw Error("Fullscreen is not available");o(eD.glU.navigateToFirstVisibleOrClosestChange())}},[a,n,o]),s.useLayoutEffect(()=>{if(0!==a)return document.addEventListener("keydown",d),()=>{document.removeEventListener("keydown",d)}},[a,d]),0===a)?null:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"chunk_change_navigator--chunkChangeCount--ZFnfP",children:(0,g.tx)("collaboration.feedback.change_count",{changeCount:a})}),(0,i.jsxs)("div",{className:"chunk_change_navigator--chunkChangeNavigator--82303",children:[(0,i.jsx)(e$.K0,{svg:e2.A,onClick:e=>{if(e.stopPropagation(),!eD.glU)throw Error("Fullscreen is not available");o(eD.glU.navigateToNextChange(-1))},"data-tooltip-type":eQ.Ib.TEXT,"data-tooltip":(0,g.t)("collaboration.feedback.previous_change"),recordingKey:"change_stepper.previous",disabled:0===a}),(0,i.jsx)(e$.K0,{svg:e1.A,onClick:e=>{if(e.stopPropagation(),!eD.glU)throw Error("Fullscreen is not available");o(eD.glU.navigateToNextChange(1))},"data-tooltip-type":eQ.Ib.TEXT,"data-tooltip":(0,g.t)("collaboration.feedback.next_change"),recordingKey:"change_stepper.next",disabled:0===a})]})]})}var e5=n(716477),e4=n(343933),e6=n(966021),e7=n(672605),e8=n(637599),e9=n(582689),te=n(835307),tt=n(415567);let tn=(0,e8.vv)(()=>eD.Ez5?.boxSelectionState().isBoxSelecting,!1);function ti(){let e=(0,s.useContext)(e9.y0).focusSelectedNodes;return!!((0,r.kc)().ce_il_layer_focus&&e)}let ts=new Set;function ta(e){let t=(0,s.useRef)(e),n=t.current;return t.current=e,n}function tr(e,t){let n;if(t?.length===1&&(n=t[0])){let t=e.get(n);t&&(t.isExpanded=!0)}}var tl=n(90453),to=n(444049),td=n(748672),tc=n(602443),tu=n(314416),tp=n(342053),tm=n(582730),th=n(234312),tf=n(236099),tg=n(502047),tx=n(481836);let t_=new Map;var ty=n(85598);function tv(){let e=(0,eA.cT)(),{pagesList:t,pageToNumChangesMap:n,isComparingChanges:a}=function(){let e=(0,eA.n0)(),t=(0,eR.d4)(e=>!!(0,r.kc)().version_diffing&&e.mirror.appModel.activeCanvasEditModeType===eD.m1T.COMPARE_CHANGES),n=(0,eR.d4)(e=>e.versionHistory.compareId);return s.useMemo(()=>{if(!t||!n)return{pagesList:e,pageToNumChangesMap:t_,isComparingChanges:t};let i=(0,e0.ee)(e);return{pagesList:e,pageToNumChangesMap:i,isComparingChanges:t}},[t,n,e])}(),l=(0,tg.g)({pagesList:t}),o=(0,eA.GQ)();return t.length?(0,i.jsx)(tb,{recordingKey:"pagesPanel",isReadOnly:e,width:o,pagesList:t,isComparingChanges:a,pageToNumChanges:n,onPageContextMenu:l}):null}function tb({width:e,isReadOnly:t,pagesList:n,onPageContextMenu:a,isComparingChanges:r,pageToNumChanges:o,recordingKey:d}){let c=(0,V.q5)(),u=(0,eR.d4)(e=>t||!c?eD.xae.LAYERS:e.leftPanel.activeTab),p=(0,eR.d4)(e=>e.versionHistory),m=(0,eU.dh)();(0,eU.nn)();let h=(0,l.md)(tc.l7),f=(0,tu.U)(),g=(0,eV.T)(),{isLayersOpen:x,toggleLayersAction:_}=(0,eA.vr)(),{renamingNodeGuid:y,startRenamingNode:v,stopRenamingNode:b}=(0,e6.T)(),C=(0,eA._4)(),{height:j,setHeight:k,isOpen:w,setIsOpen:E}=(0,tx.d)({defaultIsOpen:!0}),T=u===eD.xae.LAYERS,S=eD.AWq.getChunkChangeCount(),I=(0,eR.Pj)(),N=(0,s.useCallback)(e=>{f.showLayersPanel(),(0,eG.ds)("pages_panel_open_toggle",c?.key,I.getState(),{isPagesOpen:e},{forwardToDatadog:!0}),E(e)},[c,f,E,I]),A=(0,s.useCallback)(()=>{N(!0)},[N]),L=(0,ez.F)(w),M=(0,s.useCallback)(()=>{N(!L.current)},[L,N]),O=(0,eF.$)(h);(0,s.useEffect)(()=>{h&&O&&!t&&A()},[O,h,t,A]);let{focusedNodes:R,onSelectNodesFromLayersPanel:P,clearFocusedNodes:D}=function(){let e=(0,tt.Tv)(),t=(0,U.eY)(),n=ti(),i=function(){let e=(0,U.KH)(),t=ti(),n=(0,te.Fk)((e,n)=>{if(!t)return[];let i=new Set;return Object.keys(n).forEach(t=>{let n=function(e){for(;e;){if(e.parentNode?.type==="CANVAS")return e;e=e.parentNode}return null}(e.get(t));n&&i.add(n.guid)}),Array.from(i)},e);return(0,s.useMemo)(()=>new Set(n),[n])}(),a=ta(n),r=ta(i),o=ta(e),d=(0,s.useRef)(!1),c=(0,s.useRef)(new Set),u=r!==i,p=a!==n;(o!==e||u||p)&&function({focusedNodesRef:e,supportsFocus:t,isObjectsPanelClickRef:n,topLevelParents:i,didTopLevelParentsChange:s,scene:a,nodeIds:r}){if(!t||l.zl.get(tn)){e.current=ts;return}if(n.current){if(s&&e.current.size){let t=new Set(e.current);i.forEach(e=>t.add(e)),tr(a,r),e.current=t}n.current=!1;return}e.current=i,tr(a,r)}({focusedNodesRef:c,supportsFocus:n,isObjectsPanelClickRef:d,nodeIds:e,scene:t,topLevelParents:i,didTopLevelParentsChange:u});let m=(0,e7.C)(),h=(0,s.useCallback)(()=>{c.current=ts,m()},[m]),f=(0,s.useCallback)(()=>{d.current=!0},[]);return{onSelectNodesFromLayersPanel:n?f:void 0,focusedNodes:n?c.current:void 0,clearFocusedNodes:n?h:void 0}}(),F=(0,ty.HY)(),z=(0,l.md)(e4.wt),B=(0,l.md)(e4.R4),G=(0,H.o3)(H.nt.newResizablePanel),[K,W,q]=(0,th.BN)(u,d),X=(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(td.R,{height:j,isComparingChanges:r,isOpen:w,isReadOnly:t,onCanvasSearch:C,onHeightChange:k,onPageContextMenu:a,onToggle:M,pageToNumChanges:o,pages:n,showHeader:!g}),(0,i.jsxs)(to.m,{children:[x&&(0,i.jsx)(eH.p,{children:(0,i.jsx)(eK.Ay,{})}),(0,i.jsx)(tm.o,{currentPage:m,focusedNodes:R,isLayersOpen:x,isReadOnly:t,onSelectNodesFromLayersPanel:P,onToggleLayers:_,recordingKey:d,renamingGuid:y,reserveBottomHeight:R?.size!==0,showAllLayers:D,startRenaming:v,stopRenaming:b,topNodeProperties:null,versionHistory:p,width:G&&z?B:e})]})]});return(0,i.jsxs)(tl.A,{isFullHeight:!0,children:[(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(eB.$,{}),!t&&!F&&(0,i.jsx)(tf.I,{activeTab:u,onCanvasSearch:C,recordingKey:d,tabManager:q,tabPropsMap:K})]}),r&&T&&(0,i.jsxs)(i.Fragment,{children:[p.compareId&&(0,i.jsx)(e5.ZI,{compareId:p.compareId,versions:p.versions}),S>0&&(0,i.jsx)(tp.y,{withBorder:!0,children:(0,i.jsx)(e3,{})})]}),c&&(0,i.jsx)(eW.QU,{fileKey:c.key}),(0,i.jsx)(tC,{isInTab:T,tabProps:W[th.FV],children:X}),!F&&(0,i.jsx)(tC,{isInTab:u===eD.xae.ASSETS,tabProps:W[th.ay],children:(0,i.jsx)(eL.g,{width:e})})]})}function tC({children:e,isInTab:t,tabProps:n}){return(0,r.kc)().ui3_left_panel_tabs_fpl&&n?(0,i.jsx)(eP.t.TabPanel,{height:"fill",...n,children:(0,i.jsx)("div",{className:"x5yr21d x78zum5 xdt5ytf",children:e})}):t?(0,i.jsx)(i.Fragment,{children:e}):null}var tj=n(673267);function tk({width:e}){let[t,n]=s.useState(!1);return(s.useEffect(()=>{let e=requestAnimationFrame(()=>{n(!0)});return()=>cancelAnimationFrame(e)},[]),t)?(0,i.jsx)(eL.g,{width:e}):(0,i.jsx)("div",{className:"xh8yej3 x78zum5 xl56j7k xuzqwsy",children:(0,i.jsx)(a.k,{size:"md"})})}let tw=s.memo(function(){return(0,i.jsx)(p.l,{id:"DesignLeftPanel",children:(0,i.jsx)(h.u,{label:"DesignLeftPanel",children:(0,i.jsx)(tE,{})})})}),tE=s.memo(function(){let e=(0,l.md)((0,K.Xh)(void 0)),t=(0,V.q5)(),n=(0,U.aV)();(0,eA.bi)();let a=!!t&&e,o=(0,U.p8)("showUi"),d=(0,eA.cT)(),c=(0,F.xL)(),u=(0,H.o3)(H.nt.designNavBarView),p=(0,tj.O5)(tj.LX.DESIGN,{isReadOnly:d,isAIAssistantEnabled:c}),m=(0,tj.Fd)(tj.LX.DESIGN,{isViewsEnabled:u});s.useEffect(()=>{a&&(0,f.YQ)({id:"Found Updates To Publish"})},[a]);let[,h]=(0,W.bL)();s.useEffect(()=>()=>{h(null)},[h]);let g=(0,eA.Ye)(),x=(0,ty.HY)(),_=(0,ty.nb)(),y=(0,ty.sG)(),{isViewPanelMinimized:v}=(0,ty.MC)(),b=x&&v;return(0,r.kc)().dont_render_ui&&!o?null:(0,i.jsxs)(i.Fragment,{children:[x&&(0,i.jsx)(ty.ur,{canvasInteractions:p,views:m}),!b&&(0,i.jsx)(eN.Q,{ignoreRulers:n,..._,children:g?(0,i.jsx)(eT.s,{}):(0,i.jsx)(eE.$,{shouldDeferCanvasUpdateOnPanelResize:!0,...y,children:x?(0,i.jsx)(tS,{}):(0,i.jsx)(tT,{})})})]})});function tT(){let e=(0,z.X0)(),t=(0,G.L3)();return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(eT.s,{}),(0,i.jsx)(eI.n,{}),(0,i.jsx)(eS.d,{shouldUseBottomBorder:!e}),t?(0,i.jsx)(W.EA.Provider,{value:!0,children:(0,i.jsx)(q.f,{showFilter:!0})}):(0,i.jsx)(tv,{})]})}function tS(){let e=(0,V.q5)(),[t,n]=(0,eO.fF)(),a=(0,z.X0)(),o=(0,eA.GQ)();s.useEffect(()=>{e||n(eO.NA.FILE)},[e,n]);let c=s.useCallback(()=>{u.az.trackDefinedEvent("ui3_platform.canvas_interaction_tab_close",{name:(0,tj.p2)(t),editorType:"design"}),n(eO.NA.FILE)},[t,n]),p=s.useCallback(()=>t!==eO.NA.FILE&&(c(),!0),[c,t]);(0,B.O1)(p,B.KD.NON_DEFAULT_LEFT_RAIL_VIEW);let m=(0,eO.b4)(eO.NA.VARIABLES),h=(0,l.Xr)(m);switch(t){case eO.NA.ASSETS:return(0,i.jsx)(d.Zf,{canvasActionName:(0,g.t)("design.navbar.assets"),onClose:c,additionalButtons:(0,i.jsx)(eM.g,{}),children:(0,i.jsx)(tk,{width:o})});case eO.NA.CHAT:return(0,i.jsx)(tI,{width:o,handleClose:c});case eO.NA.SEARCH:return(0,i.jsx)(d.Zf,{canvasActionName:(0,g.t)("design.navbar.find"),onClose:c,children:(0,i.jsx)(W.EA.Provider,{value:!0,children:(0,i.jsx)(q.f,{showFilter:!0})})});case eO.NA.DESIGN_SYSTEM:if(!(0,r.kc)().ds_home)return null;return(0,i.jsx)(d.Zf,{canvasActionName:(0,g.t)("design.navbar.design_system"),onClose:c,children:(0,i.jsx)(eC,{})});case eO.NA.VARIABLES:return(0,i.jsx)(d.sW,{fileName:e?e.name:"",setMinimized:h,onClickFileName:c,children:(0,i.jsx)(i.Fragment,{})});default:return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(eS.d,{shouldUseBottomBorder:!a}),(0,i.jsx)(tv,{})]})}}function tI({width:e,handleClose:t,assistantOptionOverrides:n}){let[a,r]=(0,l.fp)(x.FI),o=V.q5()?.key??null,u=function(){let e=(0,l.md)(x.G1),t=(0,C.Td)(),n=t&&e,i=(0,m.Rs)((0,j.A6w)(n?{ownerId:t,id:e}:null)),s=(0,c.oA)(i.data?.activeAiChatThread);return s&&s.metadata&&"object"==typeof s.metadata&&s.metadata.title?s.metadata.title:(0,g.t)("ai_assistant.chat.history.new_chat_title")}(),{data:p}=(0,m.Rs)((0,j.r3i)(o?{ownerId:o}:null)),h=(0,c.oA)(p?.fileAiChatThreads),f=(h?.length??0)>0;s.useEffect(()=>()=>{r(x.Kk.Thread)},[r]);let _=s.useCallback(()=>{r(x.Kk.HistoryList)},[r]),y=a===x.Kk.HistoryList?(0,g.t)("ai_assistant.chat.previous_chats"):u,v=a===x.Kk.Thread&&f;return(0,i.jsx)(d.Zf,{canvasActionName:y,onClose:t,handleBack:v?_:void 0,additionalButtons:(0,i.jsx)(P,{}),children:(0,i.jsx)(T,{widthFallback:e,currentView:a,assistantOptionOverrides:n})})}},85598:(e,t,n)=>{n.d(t,{HY:()=>E,MC:()=>I,nb:()=>T,sG:()=>S,ur:()=>w});var i=n(104076),s=n(237420),a=n(266808),r=n(795033),l=n(300806),o=n(835531),d=n(466764),c=n(819851),u=n(74620),p=n(490499),m=n(331497),h=n(299117),f=n(91479),g=n(604578),x=n(618907),_=n(844182),y=n(539607),v=n(288054),b=n(274200),C=n(255578),j=n(190772),k=n(804363);function w({canvasInteractions:e,views:t}){let n=(0,u.aV)(),r=(0,s.d4)(e=>e.mirror.appModel.showUi),c=t&&t.length>0,p=(0,d.B)(),_=(0,m.ut)(a.Ez5?.editorPreferences().showPropertyLabels,l.$v);return r?n?(0,i.jsx)(o.bL,{width:p,isFileLoading:n,shouldShowLabels:_,children:(0,i.jsx)(o.Y9,{menuButton:(0,i.jsx)(b.Fr,{hideChevron:!0}),children:e})}):(0,i.jsxs)(o.bL,{width:p,isFileLoading:n,shouldShowLabels:_,children:[(0,i.jsxs)(o.Y9,{menuButton:(0,i.jsx)(b.Fr,{hideChevron:!0}),children:[e,c&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(o.cG,{hasGapStyling:!0}),t]})]}),(0,i.jsx)(h.p,{children:(0,i.jsx)(f.A,{})}),(0,i.jsxs)(o.wi,{children:[(0,i.jsx)(j.n8,{isLeftRail:!0}),(0,i.jsx)(g.En,{isLeftRail:!0}),(0,i.jsx)(x.J,{isLeftRail:!0}),(0,i.jsx)(y.b,{entrypoint:v.r6.LEFT_RAIL_FOOTER,hideIfNoUpdates:!0,isLeftRail:!0}),(0,i.jsx)(C.A,{isLeftRail:!0})]})]}):null}function E(){let e=(0,c.Em)(),t=(0,_.Ye)(),n=(0,p.o3)(p.nt.designNavBar);return e&&!t&&n}function T(){let e=E(),t=(0,d.B)();return{leftOffset:e?t:void 0,shouldAnimate:!e&&void 0}}function S(){let e=E(),t=(0,d.B)();return{maxWidth:e?_.g_-t:void 0}}function I(){let[e,t]=(0,k.fF)(),n=(0,k.b4)(e),[i,s]=(0,r.fp)(n);return{isViewPanelMinimized:i,setIsViewPanelMinimized:s}}},670974:(e,t,n)=>{n.d(t,{h5:()=>f,hZ:()=>p,hs:()=>g,mb:()=>h,sv:()=>x});var i=n(951002),s=n(643077),a=n(211862),r=n(288747),l=n(592726),o=n(844182),d=n(557030);let c=/^Page \d+$/;var u=(e=>(e.FILE_LOADING="fileLoading",e.K_12="k12",e.READ_ONLY="readOnly",e.PERSONAL_DRAFT="personalDraft",e))(u||{});function p(){let e=(0,r.sZ)(),t=!!e?.k12_google_org,n=l.iZ()?.profile?.job_title;return t&&"student"===n}function m(){let e=(0,a.q5)(),t=(0,o.cT)(),n=p();return e?n?"k12":t?"readOnly":(0,d.Qy)(e)?"personalDraft":null:"fileLoading"}var h=(e=>(e.ADD_PAGE="addPage",e.VIEW_PAGES="viewPages",e))(h||{});function f({nonDividerPageCount:e}){let t=m(),n=(0,s.nn)(),a=n&&!c.exec(n);if("fileLoading"===t)return null;if(e>1||a)return"viewPages";switch(t){case null:return"addPage";case"readOnly":case"personalDraft":return"viewPages";case"k12":return null;default:(0,i.xb)(t)}}function g(){return null===m()}function x(){return null===m()}},703678:(e,t,n)=>{n.d(t,{P:()=>b});var i=n(104076),s=n(716976),a=n(684742),r=n(620480),l=n(709957),o=n(795033),d=n(511570),c=n.n(d),u=n(983500),p=n(581133),m=n(192075),h=n(278491),f=n(692042),g=n(852415),x=n(404343);let _="floating_layers_panel--isExpanded--qjuJR",y="floating_layers_panel--chevronIcon--rNFmc",v=(0,u.jz)(x.M$q);function b({children:e,title:t=null,selectedLayerName:n,nodeIcon:d=null,panelActions:u=null,onSizeChange:x,bottom:b,left:C,hide:j}){let[k,w]=s.useState(!1),E=s.useRef(null),T=(0,f.QU)({subscribeToUpdates_expensive:!0}),S=(0,o.md)(p.f),I=(T-(S?.current?.clientWidth??0))/2-v-6,[N,A]=s.useState(230);function L(){w(!k)}let M=k?Math.min(N,I):230;return s.useEffect(()=>{x&&x(M)},[M,x]),(0,i.jsx)(g.w,{ref:E,className:c()("floating_layers_panel--container---6H4q",h.Dm,"devHandoffFloatingLayersPanel","pagesPanel"),"data-cancel-insertable-resource-drag-and-drop":!0,defaultSize:230,disableResizing:!k,id:"focus-floating-left-panel",onResize:e=>{A(Math.min(Math.max(e,230),I))},side:"right",size:M,style:{bottom:b,left:C,display:j?"none":void 0},children:(0,i.jsxs)("div",{className:"floating_layers_panel--containerInner--GVica",children:[(0,i.jsxs)("div",{className:c()("floating_layers_panel--header--YtDpH",{[_]:k}),children:[(0,i.jsxs)(a.E,{className:c()("floating_layers_panel--headerButton--e-t0D",{[_]:k}),onClick:L,"aria-expanded":k,"aria-label":!k&&n?(0,m.t)("dev_handoff.tag.layers_collapsed_aria",{layer:n}):(0,m.t)("dev_handoff.tag.layers"),children:[!k&&d,(0,i.jsxs)("div",{className:"floating_layers_panel--middle--QR7nt",children:[(0,i.jsx)("div",{className:c()("floating_layers_panel--title--pH3fr",{"floating_layers_panel--hasNoIconWhenCollapsed--F2ap6":!d&&!k}),children:(0,m.tx)("dev_handoff.tag.layers")}),!k&&t]})]}),k&&u,(0,i.jsx)(a.E,{className:c()("floating_layers_panel--expandCollapseButton--EOmgJ",{[_]:k}),onClick:L,"aria-expanded":k,"aria-label":(0,m.t)("dev_handoff.tag.layers"),children:k?(0,i.jsx)(r.r,{className:y}):(0,i.jsx)(l.a,{className:y})})]}),(0,i.jsx)("div",{className:c()("floating_layers_panel--listContainer--Kr9-C",{[_]:k}),children:e})]})})}},128396:(e,t,n)=>{n.d(t,{s:()=>P,_:()=>D});var i=n(104076),s=n(716976),a=n(237420),r=n(54092),l=n(74620),o=n(490499),d=n(443208),c=n(419822),u=n(322028),p=n(812714),m=n(795033),h=n(192075),f=n(141330),g=n(290407),x=n(946847),_=n(288971),y=n(923603),v=n(898591),b=n(458439);function C(){let{state:e}=(0,g.RL)(f.JT.PUBLISH_LIBRARY_FOR_AI,y.Iq),[t,n]=(0,m.fp)(v.OV),a=s.useCallback(()=>{(0,_.$I)({moduleToOpen:{type:"custom",module:(0,i.jsx)(b.u,{}),name:x.Sn.LIBRARY_CSS_EXTRACTION},trackingData:{source:"publishing_modal"}})},[]);if(s.useEffect(()=>{[g.qy.ERROR,g.qy.DONE].includes(e)&&t&&(n(!1),a())},[e,t,n,a]),!t)return null;let r={"data-tooltip-type":"text","data-tooltip-show-below":!0,onClick:a};return(0,p.kc)().bake_library_creation?(0,i.jsx)(c.k,{size:"sm",...r,"data-tooltip":(0,h.t)("figmake.ds_imports.extract_make_library_icon_tooltip")}):(0,p.kc)().bake_ds_import_l3a?(0,i.jsx)(u.s,{"data-tooltip":(0,h.t)("figmake.ds_imports.extract_library_icon_tooltip"),...r}):null}var j=n(274200),k=n(255578),w=n(190772),E=n(211862),T=n(255145),S=n(803848),I=n(456599),N=n(262114),A=n(676290);function L(){let e=(0,E.q5)(),t=(0,T.Z)();return(0,i.jsxs)(S.O,{label:(0,h.t)("fullscreen_actions.expand-ui-with-filename",{fileName:t}),children:[(0,i.jsx)("div",{className:"design_dev_handoff_collapsed_left_panel_toggle--fileName--3AMNd",children:(0,i.jsx)(N.n,{shouldShowConnectedBadge:!0})}),e&&(0,i.jsx)(I.s,{openFile:e}),(0,i.jsx)(w.n8,{}),(0,i.jsx)(A.A,{})]})}var M=n(965108),O=n(604578),R=n(618907);function P(){let{isLeftPanelCollapsed:e}=(0,s.useContext)(d.t),t=(0,l.aV)(),n=(0,a.d4)(e=>e.mirror.appModel.showUi),r=(0,o.o3)(o.nt.designNavBar);return t||!n?null:(0,i.jsxs)(M._,{isCollapsed:e,children:[(!r||e)&&(0,i.jsx)(j.Fr,{hideChevron:r}),e?(0,i.jsx)(L,{}):(0,i.jsx)(F,{})]})}function D(){let e=(0,l.aV)(),t=(0,a.d4)(e=>e.mirror.appModel.showUi),n=(0,o.o3)(o.nt.designNavBar);return e||!t?null:(0,i.jsxs)(M._,{isCollapsed:!1,children:[(0,i.jsx)(j.Fr,{hideChevron:!1}),!n&&(0,i.jsx)(F,{})]})}function F(){let e=(0,r.Zr)("toggle-sidebar");return(0,i.jsxs)("div",{className:"design_dev_handoff_left_panel_island--expandedIconSection--8-YFf",children:[(0,i.jsx)(w.n8,{}),(0,i.jsx)(O.En,{}),(0,i.jsx)(R.J,{}),(0,i.jsx)(k.A,{}),(0,i.jsx)(C,{}),e&&(0,i.jsx)(A.n,{})]})}},573184:(e,t,n)=>{n.d(t,{m:()=>tt});var i=n(104076),s=n(716976),a=n(237420),r=n(307829),l=n(420680),o=n(390579);n(120440);var d=n(511570),c=n.n(d),u=n(140490),p=n(641518),m=n(11395),h=n(192075),f=n(551037),g=n(835258),x=n(191321),_=n(795033),y=n(578854),v=n(236631),b=n(132078);function C(e){let{targetKey:t}=e,[n,a]=s.useState(!1),[r,l]=(0,_.fp)(y.Ui),o=(0,g.MP)()&&null!==r&&!n;(0,s.useEffect)(()=>(window.addEventListener("message",y.FR),()=>{window.removeEventListener("message",y.FR)}),[]);let d=r?(0,h.tx)("fullscreen.filename_view.zoom-integration-popup-header-with-name",{hostName:r}):(0,h.t)("fullscreen.filename_view.zoom-integration-popup-header");return(0,i.jsx)(i.Fragment,{children:o&&(0,i.jsx)(b.OA,{targetKey:t,isUI3:e.isUI3,dismissModal:()=>{a(!0),l(null)},width:268,background:"dark",title:(0,i.jsx)("div",{className:v.s.alignLeft.$,children:d}),children:(0,i.jsx)("p",{className:v.s.textBodyMedium.alignLeft.$,children:(0,h.t)("fullscreen.filename_view.zoom-integration-popup-body")})})})}var j=n(276800),k=n(240803),w=n(266808),E=n(812714),T=n(333331),S=n(449572),I=n(607804),N=n(370020),A=n(549571),L=n(742549),M=n(646767),O=n(111297),R=n(854972),P=n(819851),D=n(332795),F=n(470876),z=n(249586),B=n(20940),G=n(93025),U=n(364017),V=n(107507),H=n(371952),K=n(521255),W=n(211862),q=n(592726),X=n(59849),Y=n(562311),Z=n(842013),J=n(132711),Q=n(295253),$=n(176203),ee=n(389348),et=n(564941),en=n(563554),ei=n(474871),es=n(171396),ea=n(837500),er=n(218329),el=n(330378),eo=n(717648),ed=n(340670);function ec(e,t){e=e.filter(e=>e&&(0,eo.UN)(e,{isDesktopMenu:!1,isReadOnly:t.appModel.isReadOnly,isSearching:!!t.isSearching,selectedView:t.selectedView,isLimitedDevMode:t.isLimitedDevMode}));let n=[],s={header:"",items:[]};for(let t of(n.push(s),e))(0,er.k$)(t)?(s={header:"",items:[]},n.push(s)):(0,er.gN)(t)?s.header=t.name:s.items.push(t);return 1===n.length||n.every(e=>!e.header)?e.map(e=>eu(e,t)):n.map(e=>(0,i.jsx)(r.YJ,{title:(0,i.jsx)(r.hE,{children:e.header}),children:e.items.map(e=>eu(e,t))},e.header))}function eu(e,t){if(!e||(0,er.k$)(e)||(0,er.gN)(e)||(0,er.id)(e))return null;let n=(0,er._o)(e)&&e.disabled||!e.name&&!((0,er._o)(e)&&(0,et.Yh)(t.appModel,e.action));if(!((0,er._o)(e)&&e.disabledAndForceVisible)&&n&&t.removeDisabledItems)return null;let s=(0,er.Dz)(e);return(0,er._o)(e)?(0,i.jsxs)(ed.Pu,{disabled:e.disabled,onClick:()=>e.callback?.(e.action,{},t.dispatch),recordingKey:e.recordingKey||e.action||e.name,children:[((0,er.TV)(e)||(0,er._o)(e))&&e.displayText||(0,el.A)(s,e.args),e.rightIcon&&(0,i.jsx)(r.Ov,{children:e.rightIcon}),e.rightText&&(0,i.jsx)(r.Ov,{children:e.rightText}),e.shortcutText&&(0,i.jsx)(r.rm,{children:e.shortcutText})]},e.name):(0,er.TV)(e)&&e.children?(0,i.jsxs)(r.g8,{children:[(0,i.jsx)(ed.Qq,{recordingKey:e.childDropdown&&e.childDropdown.recordingKey||e.name,children:e.displayText}),(0,i.jsx)(r.MJ,{children:ec(e.children,t)})]},e.name):null}var ep=n(83008),em=n(795420),eh=n(898591),ef=n(524101),eg=n(557030),ex=n(986336),e_=n(127082),ey=n(167151),ev=n(382827),eb=n(999370),eC=n(550012),ej=n(239223),ek=n(319063);let ew=s.memo(function(){let e=(0,ej.R6)(),{colorProfilePreference:t}=(0,ek.jK)(),n=(0,ek.hP)(t)===w.RYP.DISPLAY_P3?"p3":"srgb",s=[{value:w.ywP.SRGB,label:(0,h.t)("fullscreen.filename_view.color_management.color_profile_srgb")},{value:w.ywP.DISPLAY_P3,label:(0,h.t)("fullscreen.filename_view.color_management.color_profile_display_p3")}].sort((t,n)=>t.value===e&&n.value!==e?-1:t.value!==e&&n.value===e?1:0);return(0,i.jsx)(r.YJ,{children:(0,i.jsxs)(r.g8,{children:[(0,i.jsx)(ed.Qq,{children:(0,h.t)("fullscreen.filename_view.color_management.file_color_profile")}),(0,i.jsx)(r.MJ,{children:(0,i.jsxs)(eC.z6,{title:(0,i.jsx)(r.r1,{children:(0,h.t)("fullscreen.filename_view.color_management.file_color_profile")}),value:w.ywP[e],onChange:e=>{e===w.ywP[w.ywP.SRGB]?w.glU&&w.glU.triggerAction("change-document-color-profile-to-srgb",{}):e===w.ywP[w.ywP.DISPLAY_P3]&&w.glU&&w.glU.triggerAction("change-document-color-profile-to-display-p3",{})},children:[e===w.ywP.LEGACY&&(0,i.jsx)(ed.MJ,{value:w.ywP[w.ywP.LEGACY],children:(0,h.t)("fullscreen.filename_view.color_management.menu_item_title.legacy_file",{colorProfile:(0,h.t)(`fullscreen.properties_panel.export_settings_color_profile.${n}`)})}),s.map(e=>(0,i.jsx)(ed.MJ,{value:w.ywP[e.value],children:(0,h.t)("fullscreen.filename_view.color_management.menu_item_title.legacy.assign",{color_profile:e.label})},e.value))]})})]})})});var eE=n(255551),eT=n(883765),eS=n(795737),eI=n(36002),eN=n(708412),eA=n(619070),eL=n(418732),eM=n(36444),eO=n(850701),eR=n(366535),eP=n(587658),eD=n(958251),eF=n(283548),ez=n(190737),eB=n(392243),eG=n(937505),eU=n(42995),eV=n(944350),eH=n(363153),eK=n(39059),eW=n(791400),eq=n(127815),eX=n(967723),eY=n(949052),eZ=n(309112),eJ=n(418463),eQ=(e=>(e.DISABLED="disabled",e.PUBLISH="publish",e.SHOW_UPSELL_MODAL="show_upsell_modal",e))(eQ||{});function e$(){let e=(0,a.wA)();return s.useCallback(()=>{e(eR.to({type:eY.dD,data:{entrypoint:eZ.RR.FILENAME_VIEW_DROPDOWN}}))},[e])}function e0(){let e=(0,W.q5)(),t=(0,S.bc)((0,X.dTR)({fileKey:e?.key||""}),{enabled:!!e?.key});return s.useMemo(()=>{if(!e)return{};let n=!1,i=!1,s=!1,a=null;return"loaded"===t.status&&(n=!!t.data?.file?.canTrash&&!!(0,T.oA)(t.data?.file?.canTrash),s=!!(0,T.oA)(t.data?.file?.canMove),i=!!(t.data.file&&(0,eD._R)(t.data.file.editorType??eV._Y.DESIGN,t.data.file.currentPlanUser)),a=(0,T.oA)(t.data?.file?.canMoveWithReasons)||null),{userCanTrashFile:n,userIsVRForSeat:i,userCanMove:s,userCanMoveWithReasons:a}},[t,e])}var e1=n(452981),e2=n(340099);let e3=s.memo(function(){let e=(0,a.d4)(e=>e.currentUserOrgId),t=(0,a.d4)(e=>e.currentTeamId),n=(0,eW.Q)({currentOrgId:e,currentTeamId:t}),l=!!(0,q.iZ)(),o=function(){let e=(0,a.d4)(W.vu),t=(0,a.d4)(e=>e.currentUserOrgId),n=(0,a.d4)(e=>e.currentTeamId),i=(0,eW.Q)({currentOrgId:t,currentTeamId:n});return s.useMemo(()=>{if(e&&"loaded"===i.status)return(0,ez.T0)(i.data,e.key)},[e,i])}(),d=!!o,c=(0,q.iZ)(),u=(0,W.q5)(),p=e7(),m="loaded"===n.status&&(0,ez.gV)(n.data,e),h=n.data?.currentUser?.userSidebarSections!=null?(0,T.oA)(n.data.currentUser.userSidebarSections):null,f=n.data?.currentUser?.baseOrgUser?.fileBrowserPreferences?.orderedSidebarSections??[],g=(0,ez.t$)(h??[],f),x=g.find(e=>e.id===o?.resource.sidebarSectionId),_=u?.folderId===c?.personal_drafts_folder_id,y=(0,e2.pH)(u?.key??null,{enabled:!!u});if(e6||!l)return null;let v=!_&&!!p&&!(m&&!d),b="loaded"===y.status&&y.data&&u;return v||b?(0,i.jsxs)(r.YJ,{children:[v&&(0,i.jsx)(e5,{isFavorited:d,favoriteSection:x,sections:g}),b&&(0,i.jsx)(e4,{})]}):null}),e5=s.memo(function({isFavorited:e,favoriteSection:t,sections:n}){let l=function(){let e=(0,a.wA)(),t=(0,a.d4)(W.vu),n=(0,a.d4)(e=>e.currentUserOrgId),i=(0,a.d4)(e=>e.currentTeamId),r=(0,eW.Q)({currentOrgId:n,currentTeamId:i}),l=s.useMemo(()=>{if(t&&"loaded"===r.status)return(0,ez.T0)(r.data,t.key)},[t,r]);return(n,i)=>{if(!t)return;let s={entrypoint:"editor",favoriteId:l?.resource.id,sectionId:i,file:eU.F.toLiveGraph(t),fileBrowserEntryPoint:!1};n?e(eN.qP(s)):e(eN.Fb(s))}}(),o=(0,h.t)("favorited_resources.add_to_sidebar");return e&&(o=`${(0,h.t)("favorited_resources.indicate_section_prefix")}: ${t?.name||(0,h.t)("sidebar.starred")}`),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(r.g8,{children:[(0,i.jsx)(ed.Qq,{children:o}),(0,i.jsx)(r.MJ,{children:(0,i.jsxs)(eC.z6,{title:(0,i.jsx)(e1.h,{children:o}),value:t?.id||(e?(0,h.t)("sidebar.starred"):void 0),recordingKey:"favorite-custom",onChange:e=>{e===(0,h.t)("sidebar.starred")?l(!1):l(!!t&&t.id===e,e)},children:[0===n.length&&(0,i.jsx)(ed.MJ,{value:(0,h.t)("sidebar.starred"),children:(0,h.t)("sidebar.starred")},(0,h.t)("sidebar.starred")),n.map(e=>(0,i.jsx)(ed.MJ,{value:e.id,children:e.name||(0,h.t)("sidebar.starred")},e.id))]})})]}),e&&(0,i.jsx)(ed.Pu,{recordingKey:"favorite-custom-remove",onClick:()=>l(!0,t?.id),children:(0,h.t)("favorited_resources.remove_from_sidebar")})]})}),e4=s.memo(function(){let e=(0,W.q5)(),t=function(){let e=(0,a.wA)();return t=>{e(eR.to({type:(0,eS.l)(),data:{pinnedFileId:t}}))}}(),n=function(){let e=(0,a.wA)();return t=>{e(eR.to({type:(0,eI.I)(),data:{pinnedFileId:t}}))}}(),s=(0,e2.pH)(e?.key??null,{enabled:!!e}),r=(0,e2.GI)("filename-context-menu");if("loaded"!==s.status||!s.data||!e)return null;let{canPinFileToWorkspace:l,canEditPin:o,existingFilePinId:d,workspaceHasMaxPins:c}=s.data;return l?(0,i.jsx)(ed.Pu,{recordingKey:"pin-to-workspace",onClick:()=>r(e.key,c),children:(0,h.t)("tile.dropdown.pin_to_workspace")}):o?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(ed.Pu,{onClick:()=>t(d),children:(0,h.t)("tile.dropdown.edit_workspace_pin")}),(0,i.jsx)(ed.Pu,{onClick:()=>n(d),children:(0,h.t)("tile.dropdown.remove_workspace_pin")})]}):null}),e6=(0,V.ck)(),e7=()=>{let e=(0,W.q5)(),t=(0,a.d4)(e=>e.plans);return s.useMemo(()=>!!t.find(t=>e?.plan?.tier===eV.Ag.ORG||e?.plan?.tier===eV.Ag.ENTERPRISE?`organization::${t.plan_id}`===e?.plan?.id:`team::${t.plan_id}`===e?.plan?.id),[t,e?.plan?.tier,e?.plan?.id])},e8=(0,V.ck)(),e9=s.memo(function(e){return(0,i.jsx)(u.u,{label:"FilenameViewDropdown",children:(0,i.jsx)(te,{...e})})}),te=s.memo(function({recordingKey:e=""}){let t=(0,a.d4)(e=>e.mirror.appModel),n=(0,a.d4)(e=>e.selectedView),l=(0,a.d4)(e=>(0,Y.getPermissionsStateMemoized)(e)),o=(0,a.d4)(e=>e.userStateLoaded),d=(0,W.q5)(),c=(0,a.d4)(e=>e.fileVersion),u=(0,a.d4)(e=>e.repos),m=!!(0,q.iZ)(),f=(0,a.wA)();(0,H.SR)();let{archiveBranch:g,deleteBranch:x,deleteFile:y,restoreBranch:v,openFileAnalytics:b,projectUrl:C,publish:V,toggleVersionHistory:er,resetFileThumbnail:el,rename:eo,closeSelectMenu:eu}={deleteBranch:function(){let e=(0,W.q5)(),t=(0,a.wA)();return()=>{e&&t(eR.to({type:eq.e,data:{fileName:e.name,onConfirm:()=>t(eM.kj({fileKeys:{[e.key]:!0},userInitiated:!0}))}}))}}(),rename:function(){let e=(0,a.wA)();return s.useCallback(()=>{e(eO.vg())},[e])}(),deleteFile:function(){let e=(0,W.q5)(),t=e?.canDelete,n=(0,a.d4)(W.vu),i=(0,R.JT)(),s=i&&i.profile.entityType===ee.o1.TEAM,r=(0,a.wA)(),l=(0,a.d4)(e=>e.repos);return()=>{if(!e||!n)return;let i=(0,B.up)(e,l),a=!!eK.Ay&&t&&!s;i&&(0,B.SA)(e,i)?e.repo?.canEdit&&!i.trashed_at&&r(eM.U1({filesByKey:{},reposById:{[i.id]:{repo:i,main_file:n}}})):a&&r(eM.U1({filesByKey:{[e.key]:n}}))}}(),archiveBranch:function(){let e=(0,a.d4)(W.vu),t=(0,a.wA)();return()=>{e&&(t(eP.VK({fileKeys:{[e.key]:e},userInitiated:!0})),(0,eT.sx)("Branch Archived",{fileKey:e.key,fileRepoId:e.file_repo_id}))}}(),restoreBranch:function(){let e=(0,a.d4)(W.vu),t=(0,a.wA)();return()=>{e&&t(eL.Rh({fileKeys:{[e.key]:e},userInitiated:!0}))}}(),openFileAnalytics:function(){let e=(0,W.q5)(),t=(0,a.wA)();return s.useCallback(()=>{e&&t((0,eR.to)({type:eX.e,data:{fileKey:e.key,entrypoint:eF.F.FileView}}))},[e,t])}(),projectUrl:function(){let e=(0,W.q5)(),t=(0,eG.FC)();return s.useMemo(()=>{if(!e)return;let n=e.project;return n&&n.path&&""!==n.path?(0,eB.cU)(n.id,n.orgId??null,n.teamId,t,!!n?.team?.canView):null},[e,t])}(),publish:function(){let e=(0,_.md)(Z.p9),t=(0,a.d4)(Z.fA),n=(0,W.q5)(),i=e$(),r=function(){let e=(0,W.q5)(),t=(0,a.d4)(e=>e.teams),n=(0,a.wA)(),i=e$();return()=>{if(!e)return;let s=e.teamId&&t[e.teamId];n(eR.to({type:eJ.$3,data:{afterFileMove:i,team:s||null}}))}}(),l=s.useMemo(()=>n&&e?t?"publish":"show_upsell_modal":"disabled",[t,e,n]);return"disabled"===l?null:()=>{n&&"show_upsell_modal"===l?r():"publish"===l&&i()}}(),toggleVersionHistory:function(){let e=(0,a.wA)(),t=(0,a.d4)(e=>e.mirror.appModel.activeCanvasEditModeType);return()=>{(0,ea.Ah)(t)?e((0,eH.Eg)()):e((0,eH._b)({source:en.e0.EDITOR_TOOLBAR}))}}(),resetFileThumbnail:function(){let e=(0,a.wA)(),t=(0,W.q5)();return()=>{t&&e(eA.$m({file_key:t.key,thumbnail_guid:null}))}}(),closeSelectMenu:function(){let e=(0,eE.cq)();return()=>{e&&e.events.emit("click")}}()},eC=(0,ev.sO)(),ej=(0,ey.cJ)(),ek=(0,e_.Oc)(),eS=!!((0,E.kc)().ds_pubplat_sts||(0,E.kc)().ds_pubplat_sts_code),eI=(0,I.to)(),eN=(0,P.Em)(),eD=(0,P.m0)(),ez=(0,K.BI)(),eU=(0,K.m0)(),eV=l.user,eW=(0,N.WO)(d),eY=(0,L.ju)(),eZ=(0,a.d4)(Z.F9),eQ=(0,ep.jT)(d,eZ).unwrapOr(!1),e1=(0,S.bc)(X.iY3,{branchFileKey:d?.key||""},{enabled:!!d}),e2=(0,eg.DF)(d,eV),e5=(0,e_.aI)(),{userCanTrashFile:e4,userCanMove:e6}=e0(),e7=(0,R.JT)(),e9=e7&&e7.profile.entityType===ee.o1.TEAM,te=!!eV&&e4&&!e9,tt=(0,J.jB)({files:[{editor_type:d?.editorType??null,folder_id:d?.project?.id??null}],repos:[],destinationFolderId:d?.project?.id??null,isDestinationDrafts:!1}),tn=(0,J.Cp)(tt.destinationPlan?{type:tt.destinationPlan.key.type,parentId:tt.destinationPlan.key.parentId}:null,tt.licenseType),ti=function(e,t){let{userIsVRForSeat:n,userCanMove:i,userCanMoveWithReasons:a}=e0(),r=(0,W.q5)(),l=(0,S.bc)((0,X.dTR)({fileKey:r?.key||""}),{enabled:!!r?.key});return s.useMemo(()=>({canMove:!!i,isUserViewerRestricted:!!n,planUser:l.data?.file?.currentPlanUser??null,inDrafts:!!l.data?.file?.isDraftFile,draftsMoveData:e,hasConnectedPlanUserInOrg:t,canMoveWithReasons:a||void 0}),[i,n,l.data?.file?.currentPlanUser,l.data?.file?.isDraftFile,e,t,a])}(tt,!!tn),ts=(0,A.xo)(),ta=!1;d&&n.editorType&&(ta=n.editorType===$.nT.Slides&&(0,T.oA)(d.org?.isSlidesDisabled)||n.editorType===$.nT.Sites&&!!d.org?.isSitesDisabled||n.editorType===$.nT.Cooper&&!!d.org?.isCooperDisabled);let tr=ek&&tt.requiresUpgrade&&!e5,tl=(0,J.Px)(tt,ta),to=ts||tl||tr,td=(0,U.$n)(),tc=(0,a.d4)(e=>e.mirror.appModel.topLevelMode),tu=(0,ex.F)(),tp=(0,M.n6)(),tm=(0,F.kD)(),th=(0,F.J3)(),tf=(0,F.JU)(th),tg=th===F.kN.FILE_IN_DRAFTS,tx=D.h.useTrackingContext({trigger:Q.b.FILE_DUPLICATE});s.useEffect(()=>{eU&&(eU._move_to_project=()=>{e6&&!to&&(0,eg.RG)(f,d,u,ti)()}),ez?.updateFilePermissionV2?.(e2,!!e6&&!to,!!te)},[e2,e6,te,to,f,ez,eU,d,u,ti]);let t_=(0,ef.tz)(),ty=(0,eh.y$)(),tv=m&&!e8&&(eN||eD||ej&&eS),tb=eZ&&eW||ty,tC=(0,i.jsx)(ed.Pu,{disabled:!V,recordingKey:p.Pt(e,"publishVersion"),onClick:V?()=>{eu(),V()}:j.lQ,children:(0,h.t)("fullscreen.filename_view.publish-styles-and-components")}),tj=eW&&(0,i.jsx)(ed.Pu,{recordingKey:p.Pt(e,"codeConnect"),onClick:()=>eY({componentBrowserEntrypoint:"filename_menu",componentBrowserScope:"file"}),children:(0,h.t)("dev_handoff.component_browser.menu_item")}),tk=!!eQ&&(0,i.jsx)(ed.Pu,{recordingKey:p.Pt(e,"viewFileAnalytics"),onClick:b,children:(0,h.t)("fullscreen.filename_view.file_analytics")}),tw=ty&&(0,i.jsx)(ed.Pu,{recordingKey:p.Pt(e,"makeLibrary"),onClick:()=>{(0,em.e)({dispatch:f})},children:(0,h.t)("fullscreen.filename_view.make_library")});if(!d)return null;let tE=w.Ez5&&w.Ez5.uiState().isRecovery.getCopy(),tT=n.editorType,tS=!d.canExport,tI=tT===$.nT.Whiteboard&&!!d.org?.figjamDisabledAt||tT===$.nT.Slides&&(0,T.oA)(d.org?.isSlidesDisabled)||tT===$.nT.Sites&&!!d.org?.isSitesDisabled||tT===$.nT.Cooper&&!!d.org?.isCooperDisabled||(0,Y.isOrgUserExternallyRestrictedFromState)(l)||tS,tN=tT!==$.nT.Whiteboard,tA=!!(tN&&(0,B.Kz)(d)),tL="loaded"===e1.status&&(null===e1.data.file||e1.data.file&&(0,ei.AM)(e1.data.file)===ei.pT.MERGED),tM=tA&&("loaded"!==e1.status||tL),tO=eV&&d.canManage,tR=!!(tA&&d.trashedAt),tP=tR&&!tM,tD=d.folderId===eV?.personal_drafts_folder_id,tF=d.canEdit&&!!d.thumbnailGuid,tz=!e8&&n.editorType===$.nT.Design&&d.canEdit,tB=ec((0,G.m)(td,en.e0.EDITOR_TOOLBAR,tc,tp),{appModel:t,selectedView:n,dispatch:f}),tG=ec((0,G.t)(td,en.e0.EDITOR_TOOLBAR,tc),{appModel:t,selectedView:n,dispatch:f});return(0,i.jsx)(O.fu,{name:en.e0.EDITOR_FILENAME_DROPDOWN,properties:{...tx,slideConversionDropdownEntrypoint:tu},children:(0,i.jsx)(r.mc,{children:(0,i.jsxs)(k.o,{eventListeners:["onPointerEnter","onPointerLeave","onMouseEnter","onMouseLeave"],children:[tB.map((e,t)=>(0,i.jsx)(s.Fragment,{children:e},`merging-${t}`)),tA&&tG.map((e,t)=>(0,i.jsx)(s.Fragment,{children:e},`branching-${t}`)),m&&!e8&&!tE&&!ek&&(0,i.jsx)(ed.Pu,{disabled:!(0,et.Yh)(t,"enter-history-mode"),recordingKey:p.Pt(e,"toggleVersionHistory"),onClick:er,children:(0,ea.Ah)(t.activeCanvasEditModeType)?(0,h.t)("fullscreen.filename_view.version-history-hide"):(0,h.t)("fullscreen.filename_view.version-history-show")}),!ek&&(0,i.jsxs)(r.YJ,{children:[!!tm&&(0,es.Z5)({dispatch:f,fileKey:tm?.fileKey||"",templateName:tm?.name||""}),tf&&!ek&&(0,es.R5)({dispatch:f,file:{key:d.key,name:d.name,folder_id:d.folderId,team_id:d.teamId,editor_type:d.editorType,parent_org_id:d.parentOrgId},isPublished:!!tm,fileNeedsMovingBeforePublish:tg,source:"filename-context-menu"}),tv&&(0,i.jsx)(i.Fragment,{children:tb?(0,i.jsxs)(r.g8,{children:[(0,i.jsx)(ed.Qq,{children:(0,h.t)("fullscreen.filename_view.library_actions")}),(0,i.jsxs)(r.MJ,{children:[tC,tj,tw,tk]})]}):(0,i.jsxs)(i.Fragment,{children:[tC,tw,tk]})}),tN&&!eC&&!eI&&!ej&&!tE&&!ek&&(0,i.jsxs)(ed.Pu,{disabled:!eV,recordingKey:p.Pt(e,"exportSelectedExportables"),onClick:()=>{w.glU&&w.glU.triggerAction("export-selected-exportables",{source:"toolbar"})},children:[(0,h.t)("fullscreen.filename_view.export"),(0,i.jsx)(r.Ov,{children:(0,i.jsx)(r.rm,{children:(0,et.c1)(t.keyboardShortcuts,"export-selected-exportables")})})]}),tu&&d.canEdit&&(0,i.jsx)(ed.Pu,{onClick:()=>{(0,z.Cu)({name:"slides_file_dropdown_entrypoint"}),(0,eb.fx)(d,c).then(e=>{(0,eb.PF)(f,e)})},recordingKey:p.Pt(e,"copyToFigmaSlides"),disabled:!eV,children:(0,h.t)("slides.general.copy_current_page_to_figma_slides")})]}),(0,i.jsx)(e3,{}),!tA&&tG.length>0&&(0,i.jsx)(r.YJ,{children:tG.map((e,t)=>(0,i.jsx)(s.Fragment,{children:e},`branching-group-${t}`))}),tz&&(0,i.jsx)(ew,{}),(0,i.jsxs)(r.YJ,{children:[m&&!e8&&!tD&&t_.canDuplicate&&(0,i.jsx)(ed.Pu,{disabled:!o||tI,recordingKey:p.Pt(e,"duplicate"),onClick:t_.duplicateFile,children:t_.duplicateDisplayText}),m&&!tR&&(0,i.jsx)(ed.Pu,{disabled:!e2,recordingKey:p.Pt(e,"rename"),onClick:()=>{eu(),eo()},children:tA?(0,h.t)("fullscreen.filename_view.rename-branch"):(0,h.t)("fullscreen.filename_view.rename")}),m&&!e8&&tP&&(0,i.jsx)(ed.Pu,{disabled:!tO,recordingKey:p.Pt(e,"restore"),onClick:v,children:(0,h.t)("fullscreen.filename_view.restore")}),m&&!e8&&C&&""!==C&&(0,i.jsx)(ed.Oo,{recordingKey:"goToProject",href:C,newTab:!0,children:(0,h.t)("fullscreen.filename_view.go_to_project")}),m&&!e8&&!tA&&(0,i.jsxs)(ed.Pu,{disabled:to,"data-onboarding-key":"FILENAME_VIEW_MOVE_TO_PROJECT",recordingKey:p.Pt(e,"moveToProject"),onClick:(0,eg.RG)(f,d,u,ti),children:[(0,h.t)("fullscreen.filename_view.move_file"),(0,i.jsx)(r.Ov,{children:(0,J.zS)(tt,to,tn)})]}),m&&!e8&&!tR&&!tD&&e4&&(0,i.jsx)(ed.Pu,{disabled:!te,recordingKey:p.Pt(e,"delete"),onClick:tA?g:y,children:tA?(0,h.t)("fullscreen.filename_view.archive-branch"):(0,h.t)("fullscreen.filename_view.move_to_trash")}),m&&!e8&&tR&&(0,i.jsx)(ed.Pu,{disabled:!tO,onClick:x,children:tA?(0,h.t)("fullscreen.filename_view.archive-branch"):(0,h.t)("fullscreen.filename_view.move_to_trash")})]}),!!tF&&(0,i.jsx)(r.YJ,{children:(0,i.jsx)(ed.Pu,{recordingKey:p.Pt(e,"resetFileThumbnail"),onClick:el,children:(0,E.kc)().dse_library_pg_thumbnails?(0,h.t)("fullscreen.filename_view.restore_default_file_thumbnail"):(0,h.t)("fullscreen.filename_view.restore_default_thumbnail")})})]})})})});function tt(e){return(0,i.jsx)(u.u,{label:"FileMenu",children:(0,i.jsx)(tn,{...e})})}function tn({setFileMenuIsHovered:e,isDropdownVisibleWithDelay:t,recordingKey:n}){let d=(0,a.d4)(e=>e.isRenaming),{getTriggerProps:u,manager:_}=r.b(),{onMouseDown:y,...v}=u(),b=(0,f.k)(),j=(0,m.Om)(),k=(0,s.useCallback)(e=>{b?j("LEFT_PANEL_FILE_NAME_CHEVRON"):y(e)},[b,y,j]);return s.useMemo(()=>{if(d)return null;let s=_.isOpen;return(0,i.jsx)("div",{children:(0,i.jsxs)("div",{className:c()("file_menu--chevronContainer--rxTVi",{"file_menu--selected--URB0u":s||t,"file_menu--enableSecondaryHover--h5duI":!(s||t)}),onMouseEnter:()=>{e?.(!0)},onMouseLeave:()=>{e?.(!1)},children:[(0,g.MP)()&&(0,i.jsx)(C,{isUI3:!0,targetKey:x.O0}),(0,i.jsxs)(r.bL,{manager:_,children:[(0,i.jsx)("span",{className:"xjmxbmz",children:(0,i.jsx)(l.K,{...v,onClick:k,actionOnPointerDown:!0,recordingKey:p.Pt(n,"chevron"),"aria-label":(0,h.t)("fullscreen.filename_view.edit_file_menu"),"data-onboarding-key":x.O0,children:(0,i.jsx)(o.O,{})})}),s&&(0,i.jsx)(e9,{recordingKey:n})]})]})})},[d,t,_,k,v,n,e])}},262114:(e,t,n)=>{n.d(t,{n:()=>Q});var i=n(104076),s=n(237420),a=n(240941),r=n(812714),l=n(511570),o=n.n(l),d=n(716976),c=n(638004),u=n(266808),p=n(883765),m=n(449572),h=n(513369),f=n(550209),g=n(192075),x=n(830534),_=n(301868),y=n(889833),v=n(819851),b=n(20940),C=n(59849),j=n(326216),k=n(563554),w=n(117776);function E(e){let t=Number(e);return Number.isNaN(t)?((0,b.cb)(Error("Invalid checkpoint id found in repo data")),null):t}function T(e){let t=(0,v.m0)(),{openFile:n,modalShown:i,topLevelMode:s,dispatch:a}=e,{canEdit:r,key:l,fileRepoId:o}=n,T=function(e){let t=e?.fileRepoId||"",n=(0,m.bc)(C.op7,{repoId:t});return d.useMemo(()=>{if("loaded"!==n.status||!t)return!1;let{repo:i}=n.data,s=n.data.repo?.files;if(i&&(0,b.Ns)(e,i))return!1;if(null==i||!s)return(0,f.$D)(c.e.SCENEGRAPH_AND_SYNC,Error("useUpdatesAvailableFromMain called with invalid repo or repo files data")),!1;let a=s.find(t=>t.key===e.key),r=s.find(e=>(0,b.Ns)(e,i));if(!a||!r)return(0,f.$D)(c.e.SCENEGRAPH_AND_SYNC,Error("useUpdatesAvailableFromMain called with invalid branch or source file data")),!1;if(a.sourceCheckpointId===r.checkpointId)return!1;let l=(0,h.oA)(r.recentFileVersions)||[];if(0===l.length||!a.sourceCheckpointId)return!1;let o=E(a.sourceCheckpointId);if(null===o)return!1;let d=l.filter(e=>{let{user:t,checkpoint:n}=e;if(!n||t.isSystemUser)return!1;let{id:i,meta:s}=n,a=E(i);if(null===a||a<=o)return!1;if(null===s||null===s.editCounts||void 0===s.editCounts)return!0;let r=function(e){try{return Object.fromEntries(Object.entries(e).map(([e,t])=>{let n=t&&t.version_history_count?{version_history_count:parseInt(t.version_history_count)}:{version_history_count:0};return[e,n]}))}catch(e){return(0,b.cb)(Error("Invalid edit count found in repo data")),null}}(s.editCounts);return null!==r&&Object.values(r).some(e=>e.version_history_count>0)});return!!d&&d.length>0},[e,t,n])}(n);return d.useEffect(()=>{if(t&&T){a(_.Q.dequeue({type:x._.BRANCHING_SOURCE_FILE_UPDATED}));return}r&&i?.type!==w.$l.type&&s!==u.lyf.BRANCHING&&T?((0,p.sx)("Branch Update Alert",{action:"Shown",fileKey:l,fileRepoId:o}),a(_.Q.enqueue({notification:{type:x._.BRANCHING_SOURCE_FILE_UPDATED,message:(0,g.t)("collaboration.branching.updates_available_from_main_file"),acceptCallback:()=>{a(y.hx({direction:j.Kn.FROM_SOURCE,trackingContextName:k.e0.BRANCHING_UPDATE_NOTIFICATION})),(0,p.sx)("Branch Update Alert",{action:"Update",fileKey:l,fileRepoId:o})},dismissCallback:()=>{(0,p.sx)("Branch Update Alert",{action:"Dismiss",fileKey:l,fileRepoId:o})}}}))):a(_.Q.dequeue({type:x._.BRANCHING_SOURCE_FILE_UPDATED}))},[r,l,o,i,s,T,a,t]),null}var S=n(641518),I=n(178867),N=n(506192),A=n(126852),L=n(439279),M=n(951002),O=n(328341),R=n(58212),P=n(638641),D=n(384036),F=n(234573),z=n(366535),B=n(621161),G=n(152530),U=(e=>(e[e.NoMerges=0]="NoMerges",e[e.MergeStarted=1]="MergeStarted",e[e.MergeChangesSyncedPendingConfirmation=2]="MergeChangesSyncedPendingConfirmation",e[e.MergeComplete=3]="MergeComplete",e[e.MergeError=4]="MergeError",e[e.MergeTimeout=5]="MergeTimeout",e))(U||{});function V(e){return 1===e||2===e}function H(e){return null===e.mergeResultCheckpointId}function K({repoId:e,openFileKey:t,currentUserId:n,appMergingStatus:i,openFileMerge:a}){let r=function({repoId:e,currentUserId:t,appMergingStatus:n,openFileMerge:i}){let s=(0,m.bc)(C.grH,{repoId:e}),[a,r]=d.useState(0),[l,o]=d.useState();return d.useEffect(()=>{if("loaded"===s.status){let e;let n=s.data.repo?.files?.find(e=>e.fileMerges.find(e=>e.id===i?.fileMergeId&&e.userId===t&&H(e)));i&&(e=s.data.repo?.files?.find(e=>e.fileMerges.find(e=>e.id===i.fileMergeId&&e.userId===t&&!H(e)))),n?0===a||3===a?(o(n),i&&i.committedChanges?r(2):r(1)):i&&i.committedChanges&&1===a&&r(2):V(a)&&e?(o(e),r(3)):0===a&&e?(o(e),r(3)):(4===a||5===a)&&(o(e||l),r(3))}},[s,a,l,i,t]),d.useEffect(()=>{n===A.y.MERGING_ERROR?r(4):4===a&&n===A.y.NOT_MERGING&&r(0)},[a,n]),d.useEffect(()=>{let e;let t=L.v.getFeatureGate("branching_targeted_timeout");if(t&&2===a||!t&&1===a?e=setTimeout(()=>{r(5)},3e4):3===a&&(e=setTimeout(()=>{r(0),o(void 0)},3e3)),void 0!==e)return()=>clearTimeout(e)},[t,a,l]),{state:a,mergeFile:l}}({repoId:e,currentUserId:n,appMergingStatus:i,openFileMerge:a}),l=(0,O.ZC)(r),o=function(e,t,n){switch(t){case 0:default:return;case 1:case 2:case 4:case 5:return n?.fileMerges.find(t=>t.userId===e&&H(t));case 3:return n?.fileMerges.find(t=>t.userId===e&&!H(t))}}(n,r.state,r.mergeFile),c=(0,s.wA)(),u=d.useContext(B.ss),h=d.useMemo(()=>r?.state!==3||l?.state===4?null:{icon:P.zX.CHECK,type:"file-merge-submit",message:o?.direction===0?(0,g.t)("collaboration.branching.merge_success"):(0,g.t)("collaboration.branching.update_success"),button:o?.direction===0?{text:(0,g.t)("collaboration.branching.edit_merge_description"),action:()=>{c(F.T({fileKey:t,versionId:o?.mergeResultFileversionId})),(0,p.sx)("Merge Finished Edit Description Clicked",{branchKey:r.mergeFile?.key,sourceKey:r.mergeFile?.sourceFileKey})}}:void 0,timeoutOverride:1e4},[c,o?.direction,o?.mergeResultFileversionId,r.mergeFile?.key,r.mergeFile?.sourceFileKey,r.state,t,l?.state]);return d.useEffect(()=>{if(0===r.state&&(!l||l?.state===3)){c(R.F.clearAll());return}if(5===r.state&&l&&V(l.state)&&l.mergeFile){let e=r.mergeFile.key===t?j.Kn.FROM_SOURCE:j.Kn.TO_SOURCE;c(R.F.clearAll()),c((0,z.to)({type:G.my,data:{view:G.RK.TIMED_OUT,mergeParams:{branchKey:r.mergeFile.key,sourceKey:r.mergeFile.sourceFileKey,direction:e},failureInfo:{file_merge_id:o.id}}}))}h&&c(R.F.enqueue(h));let e=o?.direction===0?j.Kn.TO_SOURCE:j.Kn.FROM_SOURCE;if(l&&V(l.state)&&(4===r.state||5===r.state)){let t;switch(r.state){case 4:t=Error("useMergeStatus: Backend merge error");break;case 5:t=Error("useMergeStatus: Open merge was not closed in 30 seconds");break;default:(0,M.xb)(r.state)}(0,b.HJ)(t,j.PW.ON_MERGE,e,{file_merge_id:o?.id})}if((V(l?.state)||l?.state===0)&&3===r.state){let t={branchKey:r.mergeFile.key,direction:e,sourceKey:r.mergeFile.sourceFileKey,branchModalTrackingId:u};c(D.ie({})),c(D.ov({hideModal:!0,mergeParams:t,userInitiated:!0,reason:"merge_complete"}))}},[c,o,r.mergeFile,r.state,t,l,h,u]),null}var W=n(211862),q=n(592726),X=n(410107),Y=n(191321),Z=n(557030);let J="filename_view--renaming--fsHo8";function Q(e){let t=(0,q.iZ)(),n=(0,W.q5)(),l=n?.repo,d=!!(n&&l&&(0,b.Ns)(n,l)),c=!!(n&&(0,b.Kz)(n)),u=!!n&&(0,Z.DF)(n,t),p=(0,s.d4)(e=>e.isRenaming),m=N.Um()?.type===Y.eg,h=(0,s.d4)(e=>e.mergingStatus),f=(0,s.d4)(e=>e.openFileMerge),g=(0,s.d4)(e=>e.mirror.appModel.topLevelMode),x=(0,s.d4)(e=>e.modalShown),_=(0,s.wA)(),y=(0,W.l3)(),v=y?.ownerRole?.userId===t?.id,C=n?.isTryFile,j=n?.project?.activeProjectResourceConnections?.[0],k=!!n&&!n?.teamId&&!n?.parentOrgId,w=(0,r.kc)().dtm_deprecation_pre_migration_onboarding&&k&&!v&&!C;return(0,i.jsxs)("div",{className:o()("filename_view--filenameView--oktvS",{[J]:p}),children:[c&&(0,i.jsx)("span",{"data-testid":"branch-icon",className:"filename_view--branchIcon--QuC5N",children:(0,i.jsx)(a.L,{})}),(0,i.jsx)("span",{className:o()("filename_view--filenameText--dN0ll",{[J]:p,"filename_view--dropdownOpen--WdeTr":m||e.isDropdownVisibleWithDelay,"filename_view--enableSecondaryHover--FeJmc":!p,"filename_view--shouldShowFileMenu--Xd8rw":!e.shouldShowFileMenu}),onMouseEnter:()=>{e.setFileNameIsHovered?.(!0)},onMouseLeave:()=>{e.setFileNameIsHovered?.(!1)},"data-onboarding-key":w?X.l:void 0,children:d&&l?(0,i.jsx)(Y.IS,{dispatch:_,user:t,repo:l,canRename:u,isRenaming:p,dataTestId:"repo_name_data_test_id"}):(0,i.jsx)(Y.o3,{recordingKey:S.Pt(e.recordingKey,"fileName")})}),e.shouldShowConnectedBadge&&j&&(0,i.jsx)(I.W,{hostPlanName:j.hostPlanName,connectedPlanName:j.connectedPlanName}),n?.fileRepoId&&t?.id&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(T,{openFile:n,modalShown:x,topLevelMode:g,dispatch:_}),(0,i.jsx)(K,{repoId:n.fileRepoId,openFileKey:n.key,currentUserId:t.id,appMergingStatus:h,openFileMerge:f})]}),w&&(0,i.jsx)(X.O,{isOwner:!1})]})}},413535:(e,t,n)=>{n.d(t,{d:()=>h});var i=n(104076);n(120440);var s=n(434511),a=n(140490),r=n(598626),l=n(742549),o=n(54092),d=n(211862),c=n(467111),u=n(85598),p=n(557352),m=n(676290);function h(e){return(0,i.jsx)(s.l,{id:"LeftPanelHeader",children:(0,i.jsx)(a.u,{label:"LeftPanelHeader",children:(0,i.jsx)(f,{...e})})})}function f({shouldUseBottomBorder:e}){let t=(0,d.q5)(),n=(0,l.l7)(),s=(0,r.e)(),a=(0,u.HY)(),h=(0,o.Zr)("toggle-sidebar");if(!(t&&t.key&&t.name))return(0,i.jsxs)(p.SZ,{shouldUseBottomBorder:!!e,shouldUseTopPadding:a,children:[(0,i.jsx)(c.cQ,{}),(0,i.jsx)(c.EG,{})]});let f=(0,i.jsx)(p.x$,{shouldShowFileMenu:!n&&!s,recordingKey:p.Fp});return a&&(f=(0,i.jsxs)("div",{...{0:{className:"x7hzu26 x1ai9mow x78zum5 x1qughib x1nfngrj"},1:{className:"x7hzu26 x1ai9mow x78zum5 x1qughib x1nfngrj x1gskr33 x1ihwiht"}}[!h<<0],children:[f,h&&(0,i.jsx)(m.n,{})]})),(0,i.jsxs)(p.SZ,{shouldUseBottomBorder:!!e,withSmallBottomPadding:a,children:[f,(0,i.jsx)(p.l9,{}),(0,i.jsx)(p.t7,{openFile:t})]})}},557352:(e,t,n)=>{n.d(t,{x$:()=>I,t7:()=>L,Fp:()=>T,SZ:()=>S,l9:()=>A});var i=n(104076),s=n(716976),a=n(237420),r=n(684742),l=n(511570),o=n.n(l),d=n(140490),c=n(271761),u=n(192075),p=n(889833),m=n(20940),h=n(506192),f=n(211862),g=n(592726),x=n(563554),_=n(530091),y=n(9255),v=n(456599),b=n(191321);function C(e){return(0,i.jsx)("div",{className:"static_repo_name--container--6SAYd",children:(0,i.jsx)(r.E,{className:"static_repo_name--button--4ZBh2 ellipsis--ellipsis--Tjyfa",onClick:()=>e.dispatch(p.oz({trackingContextName:e.trackingContextName})),children:(0,m.oj)(e.repo)})})}C.displayName="StaticRepoName";var j=n(573184),k=n(262114);let w="left_panel_header_components--row--5uMsb",E="left_panel_header_components--withBottomMargin--qvGQT",T="leftPanelHeader";function S({shouldUseBottomBorder:e,children:t,withSmallPaddingRight:n,withSmallBottomPadding:s,shouldUseTopPadding:a}){return(0,i.jsx)("div",{className:o()("left_panel_header_components--container--i23pm",{"left_panel_header_components--withBottomBorder--OQzj-":e,"left_panel_header_components--withSmallBottomPadding--Dk-gd":s,"left_panel_header_components--withSmallPaddingRight--BOLxn":n,"left_panel_header_components--withTopPadding--bVY-b":a}),children:t})}function I(e){return(0,i.jsx)(d.u,{label:"FileControlsRow",children:(0,i.jsx)(N,{...e})})}function N({shouldShowFileMenu:e=!0,recordingKey:t}){let[n,a]=s.useState(!1),r=h.Um()?.type===b.eg,[l,o]=s.useState(r);s.useEffect(()=>{if(r)o(!0);else{let e=requestAnimationFrame(()=>{o(!1)});return()=>cancelAnimationFrame(e)}},[r]);let d=(0,c.b)(),u=(0,i.jsxs)("div",{className:w,"data-file-header-hover":n,style:d?{overflow:"hidden"}:void 0,children:[(0,i.jsx)(k.n,{setFileNameIsHovered:a,isDropdownVisibleWithDelay:l,recordingKey:t,shouldShowFileMenu:e}),e&&(0,i.jsx)(j.m,{setFileMenuIsHovered:a,isDropdownVisibleWithDelay:l,recordingKey:t})]});return(0,i.jsx)(_.x,{children:u})}function A(){let e=(0,f.q5)(),t=e?.repo,n=!!(t&&(0,m.Ns)(e,t)),s=!!(e&&(0,m.Kz)(e)),r=(0,a.wA)();return s&&t?(0,i.jsx)("div",{className:o()(w,E),children:(0,i.jsx)(C,{repo:t,dispatch:r,trackingContextName:x.e0.EDITOR_TOOLBAR_ACTION})}):n&&e.fileRepoId?(0,i.jsx)("div",{className:o()(w,E),children:(0,i.jsx)(M,{})}):null}function L({openFile:e}){let t=(0,g.iZ)();return(0,i.jsxs)("div",{className:w,children:[(0,i.jsx)(b.ur,{openFile:e,user:t}),(0,i.jsx)(v.s,{openFile:e})]})}function M(){let e=(0,a.wA)(),t=s.useContext(y.X);return null===t||t<1?null:(0,i.jsx)(r.E,{className:"left_panel_header_components--button--zghbk",onClick:()=>e(p.o5({trackingContextName:x.e0.EDITOR_TOOLBAR_ACTION})),children:(0,u.tx)("fullscreen.filename_view.branch-count",{BRANCHES:t})})}},965108:(e,t,n)=>{n.d(t,{_:()=>m});var i=n(104076),s=n(716976),a=n(237420),r=n(492737),l=n(140008),o=n(511570),d=n.n(o),c=n(278491),u=n(844182),p=n(869288);function m({isCollapsed:e,children:t,minWidth:n=u.Yh,maxWidth:o=u.g_}){let m=s.useRef(null),h=function({isShowing:e,isCollapsed:t,ref:n,minWidth:i,maxWidth:r}){let l=(0,a.d4)(e=>e.isRenaming),o=(0,p.E)(n,t&&!l&&e);return(0,s.useMemo)(()=>t?l&&"number"==typeof o?{width:Math.max(i,o)}:{maxWidth:r}:void 0,[t,l,o,i,r])}({isCollapsed:e,isShowing:!0,ref:m,minWidth:n,maxWidth:o}),f=(0,r.U1)(),g=(0,s.useCallback)(t=>{(0,l.cZ)(m,t),f(e?t:null)},[f,e]);return(0,i.jsx)("div",{className:d()(c.Dm,"left_panel_island_container--islandContainer--uM5h6",{"left_panel_island_container--collapsed--OEOq4":e,"left_panel_island_container--withInsetEditor--XKTTi":!e}),style:h,ref:g,children:t})}},12811:(e,t,n)=>{n.d(t,{n:()=>a});var i=n(104076),s=n(120440);function a({height:e}){let t=e??"calc(32px + var(--spacer-2) + var(--spacer-1))",n=e??"calc(32px + var(--spacer-2) + var(--spacer-1))";return(0,i.jsx)("div",{...s.Ay.props(r.height(t,n))})}let r={height:(e,t)=>[{kZKoxP:null!=e?"x16ye13r":e,kAzted:null!=t?"x82snj4":t,$$css:!0},{"--x-height":(e=>"number"==typeof e?e+"px":null!=e?e:void 0)(e),"--x-minHeight":(e=>"number"==typeof e?e+"px":null!=e?e:void 0)(t)}]}},604578:(e,t,n)=>{n.d(t,{En:()=>u,J:()=>d,Ty:()=>c});var i=n(104076),s=n(762801),a=n(247172),r=n(180610),l=n(271761),o=n(147643);function d(){return!1}function c(){return{shouldShow:!1,label:"This is a local C++ build so it may be out of date.\n\nRun this inside fullscreen/ to use the latest build from CI:\n\n./fs unlink",icon:a.e}}function u({isLeftRail:e=!1}){e=(0,l.b)()||e;let{shouldShow:t,label:n}=c(),a=s.iv({placement:e?"right":"bottom"});if(!t)return null;let d={"aria-label":"Local Build Warning",...a.getTriggerProps(),children:(0,i.jsx)(r.n,{})};return(0,i.jsxs)("div",{children:[(0,i.jsx)(o.J,{...d}),(0,i.jsx)(s.mc,{manager:a,children:(0,i.jsx)(s.UC,{maxWidth:e?300:void 0,children:n})})]})}n(537307)},618907:(e,t,n)=>{n.d(t,{J:()=>_,K:()=>x});var i=n(104076),s=n(716976),a=n(237420),r=n(64540),l=n(266808),o=n(883765),d=n(166887),c=n(147643),u=n(192075),p=n(366535),m=n(819851),h=n(331497),f=n(349311),g=n(384510);function x(){let e=(0,a.d4)(e=>e.modalShown),t=e?.type===g.CM.type,n=(0,h.ut)(l.Ez5?.uiState().showMissingFontsButton,!1),i=(0,d.U)(),s=(0,a.wA)();return{expanded:t,icon:r.z,label:(0,u.t)("fullscreen.toolbar.missing_fonts"),onClick:()=>{t?s((0,p.AS)()):(i("missing_fonts_button_clicked"),l.glU.findMissingFontsAndShowPopover())},shouldShow:n}}function _({isLeftRail:e=!1}){let{label:t,onClick:n,shouldShow:a}=x(),l=(0,m.lg)();return((0,s.useEffect)(()=>{a&&o.az.trackDefinedEvent("ui3_platform.missing_fonts_warning_shown",{withNavbar:e,editorType:l})},[l,a,e]),a)?(0,i.jsx)(c.J,{onClick:n,recordingKey:"toolbarView.missingFontsButton","aria-label":(0,u.t)("fullscreen.toolbar.missing_fonts"),htmlAttributes:{"data-tooltip":t,"data-tooltip-type":f.Ib.TEXT,"data-tooltip-show-right":e},children:(0,i.jsx)(r.z,{})}):null}},803848:(e,t,n)=>{n.d(t,{O:()=>o});var i=n(104076),s=n(684742),a=n(192075),r=n(354114),l=n(349311);function o({label:e,children:t}){let n=(0,a.t)("fullscreen_actions.expand-ui");return(0,i.jsx)(s.E,{className:"toggle_expanded_sidebar_button--button--brZmz",onClick:()=>r.Y5.triggerAction("toggle-sidebar",{source:"left_panel",state:"expand"}),"aria-label":e??n,recordingKey:"left-panel-island.toggle-minimize-ui",htmlAttributes:{"data-tooltip-type":l.Ib.TEXT,"data-tooltip":n,"data-tooltip-shortcut-key":"toggle-sidebar"},children:t})}},676290:(e,t,n)=>{n.d(t,{n:()=>u,A:()=>p});var i=n(104076),s=n(353593),a=n(147643),r=n(192075),l=n(354114),o=n(83202),d=n(349311),c=n(59975);function u(){let e=(0,o.q)(),t=e?(0,r.t)("fullscreen_actions.expand-ui"):(0,r.t)("fullscreen_actions.minimize-ui");return(0,i.jsx)(a.J,{"aria-label":t,onClick:()=>l.Y5.triggerAction("toggle-sidebar",{source:"left_panel",state:e?"expand":"minimize"}),recordingKey:"left-panel-island.toggle-minimize-ui",htmlAttributes:{"data-onboarding-key":c.ue,"data-tooltip":t,"data-tooltip-type":d.Ib.TEXT,"data-tooltip-shortcut-key":"toggle-sidebar"},children:(0,i.jsx)(s.C,{})})}function p(){return(0,i.jsx)("div",{className:"toggle_sidebars_icon_button--nonInteractiveContainer--OPLHV",children:(0,i.jsx)(s.C,{})})}},869288:(e,t,n)=>{n.d(t,{E:()=>s});var i=n(716976);function s(e,t){let[n,s]=(0,i.useState)(null);return(0,i.useLayoutEffect)(()=>{if(!e||!e.current||!t)return;s(e.current.getBoundingClientRect().width);let n=new ResizeObserver(e=>{e.forEach(e=>{let t=e.borderBoxSize?.[0];s(t?t.inlineSize:e.contentRect.width)})});return n.observe(e.current),()=>n.disconnect()},[e,t]),n}},675476:(e,t,n)=>{n.d(t,{Q:()=>u});var i=n(104076),s=n(716976),a=n(511570),r=n.n(a),l=n(968169),o=n(83202),d=n(331497),c=n(844182);let u=s.forwardRef(({shouldAnimate:e=!0,ignoreRulers:t,leftOffset:n=0,floatingWhenExpanded:s,children:a},u)=>{let p=(0,d.J2)((0,l.UK)().renderRulers),m=(0,c.Ye)(),h=(0,o.T)();return(0,i.jsx)("div",{ref:u,className:r()("left_panel_positioner--leftPanelPositioner--8Yehe",{"left_panel_positioner--withShowingRulers--xB1lD":p&&!t,"left_panel_positioner--withAnimation--pFRuR":e&&!h,"left_panel_positioner--withInsetEditorEnabled--GYcUX":!m&&!s}),style:n?{left:n}:void 0,children:a})})},966021:(e,t,n)=>{n.d(t,{T:()=>y});var i=n(716976),s=n(237420),a=n(266808),r=n(170627),l=n(980852),o=n(409019),d=n(967782),c=n(192075),u=n(58212),p=n(354114),m=n(772523),h=n(733106),f=n(314416),g=n(312071),x=n(652145),_=n(844182);function y(){let[e,t]=(0,i.useState)(null),n=(0,o.F)(e),y=(0,f.U)(),v=(0,_.cT)(),b=(0,_.P5)(),C=(0,o.F)(b),j=(0,s.wA)(),{setIsLayersOpen:k}=(0,_.vr)(),w=(0,h.W)(),E=(0,x.s)(),T=(0,i.useCallback)(e=>{if(v)return;let n=(0,l.getActiveTSSceneGraph)().get(e);if(n?.isResponsiveSetOrWebpage&&n.parentNode?.siteHomepageId===e){j(u.F.enqueue({message:(0,c.t)("sites.panel.pages_panel.cant_rename_default_responsive_set")}));return}!n?.isReactFiber&&(C.current!==a.xae.LAYERS&&C.current!==a.xae.CODE&&y.showLayersPanel(),k(!0),t(e),n?.parentGuid&&m.hq(n.parentGuid))},[C,j,v,y,k]),S=(0,i.useCallback)((e,i,s)=>{if(v)return;let o=n.current;if(o&&e){let e=(0,l.getActiveTSSceneGraph)().get(o),t=i||"",n=a.xc1.INACTIVE;a.Ez5&&(n=a.Ez5.uiState().focusModeState.getCopy()),e?.isCodeFile?(t=(0,g.tu)(t),(!i||E(e.codeFilePath,s,t))&&(t=e.name),r.l7.user("set-node-name",()=>m.i(o,t))):e?.isResponsiveSetOrWebpage||e?.isResponsiveSetBreakpoint||e?.isWebpageBreakpoint?(t||=e?.name,r.l7.user("set-node-name",()=>m.i(o,t))):a.xc1.RESPONSIVE_SET===n||a.xc1.COMPONENT_SET===n?r.l7.user("set-node-name",()=>m.BH(t)):r.l7.user("set-node-name",()=>m.i(o,t)),p.Y5.commit(),t!==s&&e?.type&&["FRAME","SECTION"].includes(e.type)&&(w({newTitle:t,nodeType:e.type}),"FRAME"===e.type&&(0,h.d)(t).length>0&&(0,d.YQ)({id:"frame_node_name_changed_with_rfd_indicator",properties:{nodeId:o}}))}t(null)},[v,n,w,E]);return(0,i.useEffect)(()=>{let e=({nodeId:e})=>{T(e)};return p.Y5.fromFullscreen.on("startRenamingNode",e),()=>{p.Y5.fromFullscreen.removeListener("startRenamingNode",e)}},[T]),(0,i.useMemo)(()=>({renamingNodeGuid:e,startRenamingNode:T,stopRenamingNode:S}),[e,T,S])}},539607:(e,t,n)=>{n.d(t,{b:()=>k,A:()=>j});var i=n(104076),s=n(716976),a=n(237420),r=n(454851),l=n(694415),o=n(795033),d=n(511570),c=n.n(d),u=n(641518),p=n(192075),m=n(111297),h=n(384068),f=n(842013),g=n(422836),x=n(564914),_=n(143277),y=n(699914),v=n(115473),b=n(39532),C=n(705596);function j({entrypoint:e,hideIfNoUpdates:t,initialTabOverride:n}){let i=(0,b.Xm)(),r=(0,o.md)(g.Lc),d=(0,o.md)((0,f.Xh)(i)),c=(0,v.c)(),u=(0,h.n)({type:y.T,data:{entrypoint:e,initialTab:n??(c?x.Wv.RECOMMENDED:r?x.Wv.UPDATES:x.Wv.LIBRARIES)}}),m=(0,a.d4)(e=>e.modalShown?.type===y.T.type),_=s.useMemo(()=>r?(0,p.t)("fullscreen.libraries_button.tooltip.updates_to_pull"):d?(0,p.t)("fullscreen.libraries_button.tooltip.updates_to_push"):(0,p.t)("fullscreen.libraries_button.tooltip.no_updates"),[r,d]),j=r||d;(0,C.Pf)({showBadge:j,hasChangesToPull:r,disabled:!1});let k=!(t&&!r&&!d);return{expanded:m,label:_,icon:l.l,onClick:u,shouldShow:k,badge:j}}function k({recordingKey:e,onSetKeyboardNavigationElement:t,entrypoint:n,hideIfNoUpdates:a,initialTabOverride:r,isLeftRail:l}){let{expanded:o,label:d,icon:p,onClick:m,shouldShow:h,badge:f}=j({entrypoint:n,hideIfNoUpdates:a,initialTabOverride:r});return h?(0,i.jsx)("div",{className:"library_modal_button--teamLibraryIcon--EBc7q","data-onboarding-key":"library",children:(0,i.jsxs)(w,{"aria-label":d,"aria-expanded":o,ref:t,recordingKey:u.Pt(e,"teamLibrary"),onClick:m,htmlAttributes:{"data-onboarding-key":_.D,"data-tooltip-show-right":l},size:l?"lg":"md",children:[s.createElement(p),f?(0,i.jsxs)("div",{className:c()("library_modal_button--badgeContainer--ebOHQ",{"library_modal_button--badgeContainerLeftRail--Zgaxu":l}),children:[(0,i.jsx)("span",{className:"library_modal_button--updatesBadge--B4nW-","data-testid":"library-button-badge"})," "]}):null]})}):null}let w=(0,m.tf)(r.d)},248622:(e,t,n)=>{n.d(t,{Q:()=>C});var i=n(104076),s=n(716976),a=n(237420),r=n(449572),l=n(284467),o=n(189385),d=n(236631),c=n(805733),u=n(471628),p=n(495905),m=n(211862),h=n(288747),f=n(59849),g=n(853039),x=n(104836),_=n(237494),y=n(490307);let v="asset_file_path--path---PrgD text--fontPos11--2LvXf text--_fontBase--QdLsd",b="asset_file_path--skeletonText--PIxni";function C({assetLibraryKey:e,assetNodeId:t}){let n=(0,x.ol)(),C=(0,h.sZ)(),j=!!C||(0,g.w5)(n),k=C?.id,{fileContext:w,fileName:E,isPresetLibrary:T,isLoading:S}=function(e){let t=(0,r.bc)(f.ffQ,{libraryKey:e}),n=(0,p.fd)(e);return s.useMemo(()=>({fileContext:t.data?.libraryKeyToFile?.file,fileName:t.data?.libraryKeyToFile?.hubFile?.currentHubFileVersion?.name??t.data?.libraryKeyToFile?.file?.name,isPresetLibrary:n,isLoading:"loading"===t.status}),[n,t.data?.libraryKeyToFile?.file,t.data?.libraryKeyToFile?.hubFile?.currentHubFileVersion?.name,t.status])}(e),I=function(e,t){let n=(0,c.b)({libraryKey:e,nodeId:t}),i=(0,a.d4)(m.tB);return s.useMemo(()=>{if(i?.libraryKey===e)return null;let t=n.data;return null==t?null:t.link},[e,i,n])}(e,t),N=w?.teamLimitedInfo?.id,A=N?function(e,t){let n=location.origin;return t?`${n}/files/${t}/team/${e}`:`${n}/files/team/${e}`}(N,k):void 0,L=w?.teamLimitedInfo?.name,M=N&&L&&j,O=w?.computedWorkspace?.workspace?.id,R=O&&k?_.fO(O,k):void 0,P=w?.computedWorkspace?.workspace?.name,D=O&&P&&j;return S?(0,i.jsxs)("div",{className:v,"data-testid":"asset-file-path-loader",children:[(0,i.jsx)(l.Wi,{className:b,opacity:50})," ",j&&(0,i.jsxs)(i.Fragment,{children:["/",(0,i.jsx)(l.Wi,{className:b,opacity:50})]})]}):(0,i.jsxs)("div",{className:v,children:[D&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(o.q,{tooltipText:P,children:(0,i.jsx)(y.X,{href:R??"",newTab:!0,children:P})}),"/"]}),M&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(o.q,{tooltipText:L,children:(0,i.jsx)(y.X,{href:A??"",newTab:!0,children:L})}),"/"]}),(0,i.jsx)(o.q,{tooltipText:E,children:I?(0,i.jsx)(y.X,{href:I,newTab:!0,children:E}):(0,i.jsx)("span",{children:E})}),T&&(0,i.jsx)("div",{className:d.s.flex.alignCenter.justifyCenter.ml2.$,children:(0,i.jsx)(u.E,{libraryKey:e,showTooltip:!0})})]})}},298581:(e,t,n)=>{n.d(t,{M:()=>h});var i=n(104076),s=n(716976),a=n(333331),r=n(115989),l=n(284467),o=n(236631),d=n(192075),c=n(142914),u=n(351625),p=n(469603),m=n(944350);function h({assetKey:e,type:t,updatedAt:n}){let h=(0,p.R8)({assetKey:e,type:t}),{avatar:f,authorName:g}=s.useMemo(()=>{if("loaded"!==h.status||!h.data?.assetAttribution)return{avatar:null,authorName:null};let e=(0,a.oA)(h.data.assetAttribution);if(!e)return{avatar:null,authorName:null};if(e.type===m.GC.COMMUNITY)return{avatar:(0,i.jsx)(u.e,{entity:(0,p.M)(e),size:c.Pf.SMALL}),authorName:e.name};let t=(0,p.G5)(e);return null!=t&&t.img_url&&(t.handle||t.name)?{avatar:(0,i.jsx)(c.H8,{user:t,size:c.Pf.SMALL}),authorName:t.handle}:{avatar:null,authorName:null}},[h]);return"loading"===h.status?(0,i.jsx)(l.Wi,{className:o.s.h16.w100.$,animationType:l.JR.LIGHT_SHIMMER}):f&&g?(0,i.jsxs)("div",{className:"asset_updated_details--updatedAtAvatar--uf4Gy",children:[f,(0,i.jsx)("span",{className:"asset_updated_details--handle--63B8y",children:g}),n?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{className:"asset_updated_details--dot--SoliI",children:"\xb7"}),(0,i.jsx)(r.h1,{date:n})]}):null]}):n?(0,i.jsx)("div",{className:"asset_updated_details--updatedAt--eam-d",children:(0,d.tx)("design_systems.assets_panel.updated_at",{updatedAt:(0,i.jsx)(r.h1,{date:n})})}):null}},90228:(e,t,n)=>{n.d(t,{H:()=>B,a:()=>G});var i=n(104076),s=n(716976),a=n(293422),r=n(420680),l=n(352955),o=n(812714),d=n(915123),c=n(555013),u=n(943568),p=n(284467),m=n(652539),h=n(192075),f=n(402776),g=n(455788),x=n(74620),_=n(624155),y=n(567325),v=n(349311),b=n(739710),C=n(622659),j=n(87535),k=n(664320),w=n(298581),E=n(985929),T=n(511570),S=n.n(T),I=n(983500),N=n(328341),A=n(330489),L=n(459125),M=n(787010),O=n(347080);let R=(0,I.jz)(O.figmaComponentFlyoutTextMaxCollapsedHeight);function P({description:e,description_rt:t}){let n=s.useRef(null),[a,r]=s.useState(!0),[l,o]=s.useState(!1),d=(0,N.ZC)(e);s.useEffect(()=>{if(e&&n.current&&d!==e){let e=n.current.scrollHeight>R;r(e),o(e)}},[e,d]);let c=s.useCallback(()=>{a&&o(!0),r(!a)},[a]);if(!e&&!t)return null;let u=!!e&&(a||l);return(0,i.jsxs)("div",{className:"truncated_component_description--documentationSection--87RCO",children:[t?(0,i.jsx)("div",{children:(0,i.jsx)(L.C,{value:t,valueFormat:(0,A.j_)(t),namespace:"component-description-flyout-lexical-editor-readonly",lexicalContentClassName:a?M.D6:M.kF,innerRef:n})}):(0,i.jsx)("div",{ref:n,className:S()({"truncated_component_description--collapsed--VXZTS ellipsis--ellipsisAfter6Lines--2UA7M ellipsis--_ellipsisAfterNLines--LzI7k":a},"truncated_component_description--documentationDescription--C090D text--fontPos11--2LvXf text--_fontBase--QdLsd"),dir:"auto",children:e}),u&&(0,i.jsx)("button",{className:"truncated_component_description--showMore--brfX6",onClick:c,children:a?(0,h.tx)("design_systems.assets_panel.show_more"):(0,h.tx)("design_systems.assets_panel.show_less")})]})}var D=n(372209),F=n(230645),z=n(689324);function B({renderedAssetData:e,errorType:t,canViewPlayground:n,onInsert:r,shouldHideError:l,onSetShouldHideError:p}){let[m,f]=s.useState(!1);s.useEffect(()=>{f(!1),p(!1)},[e.asset,p]);let g=(0,E.S)(e.asset),x=(0,C.Y)(e.asset),b=s.useMemo(()=>(0,y.kH)(e.asset.name??""),[e.asset.name]),j=s.useRef(null),k=(0,d.NG)({text:b,textRef:j}),T=e.asset,S=(0,h.tx)("design_systems.assets_panel.insert_instance");return(0,i.jsxs)("div",{className:"component_flyout_body--bodyWrapper--CoGX-",children:[g&&!m&&(0,i.jsx)("div",{className:"component_flyout_body--updateBanner--ETDK5 component_flyout_body--_bodyPadding--KrB6p text--fontPos11--2LvXf text--_fontBase--QdLsd",children:(0,i.jsx)(u.z,{orientation:"vertical",iconSrc:F.A,onClose:()=>f(!0),variant:"design",children:(0,h.tx)("design_systems.assets_panel.update_banner")})}),(0,i.jsxs)("div",{className:"component_flyout_body--headerFileNameWrapper--MH4jz component_flyout_body--_bodyPadding--KrB6p",children:[(0,i.jsx)("h2",{className:"component_flyout_body--header--3LXSQ text--fontPos14--OL9Hp text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa","data-tooltip":k?b:void 0,"data-tooltip-type":v.Ib.TEXT,ref:j,children:b}),!!x&&x>1&&(0,i.jsx)("div",{className:"component_flyout_body--numVariants--nureW",children:(0,h.tx)("design_systems.assets_panel.variant_count",{numVariants:x})})]}),(0,i.jsx)("div",{className:"component_flyout_body--descriptionWrapper--wFyRa component_flyout_body--_bodyPadding--KrB6p",children:(0,i.jsx)(P,{description:T.description,description_rt:T.description_rt})}),T.updated_at&&(0,i.jsx)("div",{className:"component_flyout_body--updatedWrapper--q4V48 component_flyout_body--_bodyPadding--KrB6p",children:(0,i.jsx)(w.M,{assetKey:(0,_.Av)(T),type:T.type,updatedAt:T.updated_at})}),(0,i.jsx)("div",{className:"component_flyout_body--buttonWrapper--Sb1Mq component_flyout_body--_bodyPadding--KrB6p",children:(0,o.kc)().dse_fpl_wave_1?(0,i.jsx)(a.IK,{onClick:r,recordingKey:"component_flyout_insert",children:S}):(0,i.jsx)(c.$$,{onClick:r,fullWidth:!0,recordingKey:"component_flyout_insert",children:S})}),(0,i.jsx)(G,{renderedAssetData:e,errorType:t,canViewPlayground:n,shouldHideError:l,onSetShouldHideError:p})]})}function G({renderedAssetData:e,errorType:t,canViewPlayground:n,shouldHideError:a,onSetShouldHideError:r}){let l=(0,x.T3)(),o=(0,k.w$)(e.nodeData?.modeData??{}),d=s.useMemo(()=>{let t=e.nodeData?.playgroundGUID;if(!t)return"";let n=l.get(t);if(!n)return"";let i=l.get(n.symbolId??"");return i?(i.isState?i.parentGuid:i.guid)??"":""},[e,l]),c=s.useMemo(()=>{if(t)return{errorType:t,shouldHideError:a,setShouldHideError:r}},[t,a,r]);return(0,i.jsxs)(i.Fragment,{children:[n&&!e?.nodeData&&!c&&(0,i.jsxs)("div",{className:"component_flyout_body--skeletonWrapper--urKH5",children:[(0,i.jsx)(p.Wi,{className:"component_flyout_body--skeletonHeader--VoEY3",opacity:50}),(0,i.jsx)(p.Wi,{className:"component_flyout_body--skeletonBody--pINXr",opacity:50})]}),n&&(e?.nodeData||c)&&(0,i.jsxs)(x.q0.Provider,{value:l,children:[(0,i.jsx)("div",{className:"component_flyout_body--propsContainer--w8pmU",children:(0,i.jsx)(g.x,{componentProps:e.nodeData?.componentProps,containerWidth:b.O2.UNBOUNDED,errorData:c,instanceSwapPickerInitialHeight:200,instanceSwapPickerInitialPosition:"right-center",label:(0,i.jsx)(U,{renderedAssetData:e}),playgroundGUID:e.nodeData?.playgroundGUID,productComponentGUID:d,sceneGraph:l,shouldShowDividerAboveProps:!0})}),(0,i.jsx)("div",{className:"component_flyout_body--modeContainer--8n5p5",children:(0,i.jsx)(f.b,{modes:o})})]})]})}function U({renderedAssetData:e}){let t=s.useCallback(()=>{e.refetchAndResetScene()},[e]);return(0,i.jsxs)("div",{className:"component_flyout_body--playgroundHeader--lQfDc",children:[(0,i.jsxs)("div",{className:"component_flyout_body--flyoutLabel--6Y6lR text--fontPos11--2LvXf text--_fontBase--QdLsd",children:[(0,i.jsx)(m.B,{className:"component_flyout_body--headerIcon--FHdrw",svg:D.A}),(0,h.tx)("design_systems.assets_panel.playground_label")]}),(0,o.kc)().dse_fpl_wave_1?(0,i.jsx)("span",{className:"component_flyout_body--resetButtonContainer--fCSjD",children:(0,i.jsx)(r.K,{"aria-label":(0,h.t)("design_systems.playground.reset_properties"),onClick:t,disabled:!e.hasChangesToReset,recordingKey:"resetPlaygroundProps",htmlAttributes:{"data-tooltip":(0,h.t)("design_systems.playground.reset_properties"),"data-tooltip-type":v.Ib.TEXT},children:(0,i.jsx)(l.q,{})})}):(0,i.jsx)(j.K0,{className:"component_flyout_body--resetButton--wVXDQ",svg:z.A,onClick:t,"data-tooltip":(0,h.t)("design_systems.playground.reset_properties"),"data-tooltip-type":v.Ib.TEXT,disabled:!e.hasChangesToReset,recordingKey:"resetPlaygroundProps"})]})}},135535:(e,t,n)=>{n.d(t,{m:()=>em,w:()=>eh});var i=n(104076),s=n(716976),a=n(237420),r=n(649621),l=n(826220),o=n(268389),d=n(917360),c=n(812714),u=n(795033),p=n(883765),m=n(983500),h=n(328167),f=n(653899),g=n(140490),x=n(361170),_=n(848561),y=n(236631),v=n(192075),b=n(911990),C=n(12606),j=n(285626),k=n(928818),w=n(249586),E=n(563792),T=n(727612),S=n(50593),I=n(380917),N=n(583072),A=n(499036),L=n(601887),M=n(614784),O=n(354114),R=n(211862),P=n(88180),D=n(624155),F=n(280335),z=n(842013),B=n(564914),G=n(872769),U=n(959834),V=n(121969),H=n(368680),K=n(658749),W=n(10019),q=n(568383),X=n(927671),Y=n(854284),Z=n(643330),J=n(248622),Q=n(419822),$=n(266808),ee=n(328341),et=n(836982),en=n(349951),ei=n(90228),es=n(93508);let ea={maxWidth:640,maxHeight:480};function er(e){return(0,i.jsx)(g.u,{label:"ComponentFlyout",children:(0,i.jsx)(el,{...e})})}function el({asset:e,onInsert:t,onLoaded:n,flyoutHidden:r,onCloseIfHidden:l,setFlyoutHidden:o,sectionPosition:d,sectionNameForTracking:c,sectionDepth:u}){let p=(0,N.C)(e.library_key),[m,h]=s.useState(!1),f=s.useCallback(()=>h(!1),[]),g=(0,en.MO)({canvasAsset:e,canViewPlaygroundQueryResult:p,onLoaded:n,onError:f,thumbnailOptions:ea}),x=(0,F.H)(),_=(0,a.d4)(e=>e.fileVersion),y=(0,ee.ZC)(_);if(s.useEffect(()=>{g?.state==="LOADED"&&g?.currentAssetData?.nodeData?.playgroundGUID&&null!=y&&y!==_&&(x(),$.glU?.clearPlaygroundScene())},[_,y,x,e.type,g]),!g)return(0,i.jsx)("div",{className:"component_flyout--spinner--c-wap",children:(0,i.jsx)(Q.k,{})});let v="LOADED"===g.state?g.currentAssetData:g.previousAssetData,b="ERROR"===g.state?g.errorType:void 0;return(0,i.jsx)(et.k,{name:"props_playground",children:(0,i.jsxs)("div",{className:"component_flyout--wrapper--96Jih",children:[(0,i.jsx)(es.r,{renderedAssetData:v,canViewPlayground:p.unwrapOr(!1),onCloseIfHidden:l,setFlyoutHidden:o,sectionPosition:d,sectionNameForTracking:c,sectionDepth:u}),!r&&(0,i.jsx)(ei.H,{renderedAssetData:v,errorType:b,canViewPlayground:p.unwrapOr(!1),onInsert:t,onSetShouldHideError:h,shouldHideError:m})]})})}var eo=n(435119),ed=n(573278),ec=n(404343);let eu=(0,m.jz)(ec.LdP),ep=(0,m.jz)(ec.wkK),em=(0,U.Ju)(eh,ed.VI);function eh(e){return(0,i.jsx)(g.u,{label:"ComponentFlyoutModal",children:(0,i.jsx)(ef,{...e})})}function ef({asset:e,searchSessionId:t,query:n,sectionPosition:m,sectionNameForTracking:g,assetTypeDropdownSelection:U,sectionDepth:Q,containerWidth:$,onGetKeyboardNavigationItemById:ee,sourceForTracking:et}){let en=s.useRef(null),ei=s.useRef(null),es=(0,u.Xr)(eo.T),ea=(0,N.C)(e.library_key),el=(0,u.md)(q.TG),ec=(0,X.H)(e.library_key),em=(0,K._9)(e.library_key,"asset_panel_visual_assets_flyout_insert"),{closeFlyout:eh}=(0,ed.JA)(),ef=(0,T.fV)(e.library_key),eg=(0,R.q5)(),ex=(0,a.wA)(),e_=(0,a.d4)(e=>(0,z.e_)(e).local.thumbnails),ey=(0,F.H)(),ev=s.useCallback(({source:e,target:t})=>{if("outside"!==e)eh();else if(t){if(es(!1),(0,h.NX)(t,ed.u2))return;eh()}},[eh,es]),eb=(0,a.d4)(e=>e.instanceSwapPickerShown),eC=(0,W.k)(),ej=(0,M.tM)(et??"assets-panel");(0,f.h)(()=>{p.az.trackDefinedEvent("assets_panel.flyout_opened",{assetKey:(0,I.V)(e),assetType:(0,I.q)(e.type),assetLibraryKey:e.library_key,isLocal:e.isLocal,fileParentOrgId:eg?.parentOrgId??void 0,fileTeamId:eg?.teamId??void 0,assetsPanelVersion:eC,partnerType:(0,L.X)(e.library_key),queryId:ej??void 0})}),(0,f.h)(()=>()=>{ex((0,C.vq)()),es(!1)}),s.useEffect(()=>{if(!(0,D.dx)(e)||!e.isLocal)return;let t=e.node_id?e_[e.node_id]:null,n=e.type===B.PW.COMPONENT?e.content_hash:e.version;t?.content_hash!==n&&requestAnimationFrame(()=>{let t=(0,E.r2)(e.node_id);null!=t&&ex(k.T1({thumbnails:[{nodeId:e.node_id,url:t,type:e.type}],styleKind:B.AT.LOCAL}))})},[e,ex,e_]);let ek=s.useCallback(()=>{requestAnimationFrame(()=>en?.current?.ensureModalOnScreen())},[]),ew=s.useCallback(()=>{eb?.isShown&&ex((0,C.vq)())},[ex,eb]),eE=(0,M.Hu)(e.library_key),eT=(0,Y.Nv)(!0),eS=(0,V.CK)(),eI=s.useCallback(()=>{if("loaded"!==ea.status)return;let i=O.Y5.getViewportInfo(),s={canvasPosition:{x:i.offsetX,y:i.offsetY},insertAsChildOfCanvas:!0,percentageOffset:new x.Mi(.5,.5),storeInRecentsKey:G.$A.Design,useSmartPositioning:!0,fromPlayground:ea.data};e.type===B.PW.COMPONENT?(ex((0,j.FU)({item:e,...s})),ec&&em(!0)):e.type===B.PW.STATE_GROUP?ex((0,j.b$)({item:e,...s})):e.type===B.PW.MODULE&&ex((0,j.Bs)({item:e,...s,insertionCallback:()=>O.Y5.triggerAction("commit")}));let a={aiResultsEnabled:eT,assetKey:(0,D.Av)(e),assetType:(0,I.q)(e.type),queryId:ej??void 0,scoreAi:e.ai_score??void 0,scoreLexical:e.lexical_score??void 0,assetTypeDropdownSelection:U,assetsPanelVersion:eC,fileKey:eg?.key??void 0,fileParentOrgId:eg?.parentOrgId??void 0,fileTeamId:eg?.teamId??void 0,isExample:(0,A.o)(e,el),libraryKey:e.library_key,partnerType:(0,L.X)(e.library_key),sectionDepth:Q,sourceSection:g??void 0,productType:(0,w.pi)({editorType:eg?.editorType})};p.az.trackDefinedEvent("assets_panel.flyout_insert",{...a,libraryType:eE,searchSessionId:t??void 0,searchQuery:n,sectionPosition:m}),et!==H.tM?p.az.trackDefinedEvent("asset_search.result_inserted",{...a,libraryType:eE,position:m,reciprocalRank:(0,r.Et)(m)?1/(1+m):void 0,query:n,sessionId:t??void 0,entryPoint:"assets-panel",componentSuggestionSessionId:eS}):(0,H.k1)({...a,position:m})},[eS,ea.status,ea.data,e,eT,ej,U,eC,eg?.key,eg?.parentOrgId,eg?.teamId,eg?.editorType,el,Q,g,eE,t,n,m,ex,ec,em,et]);s.useEffect(()=>{if((0,c.kc)().dse_fpl_wave_2)return;let e=e=>{let t=en.current?.getEl()??ei.current;if(t){if(!t.contains(e.target)){if(!e.target?.isConnected||(es(!1),(0,h.NX)(e.target,ed.u2)))return;eh();return}es(!0)}};return document.addEventListener("pointerdown",e),()=>{document.removeEventListener("pointerdown",e)}},[eh,ex,es]);let eN=s.useCallback((t,n)=>{let i=t.code??t.key,s=(0,I.V)(e),a=ee?.(s);if(a){if((0,_.c2)(t,!1)){a.getItemAbove()?.focus(),n?.();return}if((0,_.Nt)(t,!1)){a.getItemBelow()?.focus(),n?.();return}if((0,_.yn)(t,!1)){a.getItemToTheLeft()?.focus(),n?.();return}if((0,_.lv)(t,!1)){a.getItemToTheRight()?.focus(),n?.();return}if("Enter"===i){eI(),n?.();return}}},[e,eI,ee]),eA=s.useCallback(e=>{eN(e.event,()=>e.accept())},[eN]);var eL=(0,i.jsxs)("div",{className:y.s.minW0.flex1.$,children:[(0,i.jsx)("h1",{children:(0,v.t)("design_systems.assets_panel.details")}),(0,i.jsxs)(b.Y,{spacing:0,direction:"horizontal",children:[e&&(0,i.jsx)(J.Q,{assetLibraryKey:e.library_key,assetNodeId:e.node_id}),ef&&(0,i.jsx)("div",{className:y.s.pr4.$,children:(0,i.jsx)(S.KP,{libraryKey:e.library_key,variant:"secondary",tooltipLocation:"below"})})]})]});let[eM,eO,eR]=(0,P.J)(!1),eP=s.useCallback(()=>{eM.current&&ey()},[eM,ey]);return"loaded"!==ea.status?null:(0,c.kc)().dse_fpl_wave_2?(0,i.jsx)(l.bL,{onClose:ev,defaultPosition:new x.Mi($+1,eu),width:ep,htmlAttributes:{"data-testid":"component-flyout-modal",id:ed.Ev,hidden:eO,onKeyDown:eN},ref:ei,maxHeight:"100vh",children:(0,i.jsxs)(o.vo,{children:[(0,i.jsx)(o.Y9,{children:(0,i.jsx)(d.J,{style:{margin:0,minWidth:0},children:eL})}),(0,i.jsx)(o.nB,{style:{padding:0},scrolling:"manual",children:(0,i.jsx)(er,{asset:e,onLoaded:ek,onInsert:eI,flyoutHidden:eO,onCloseIfHidden:eP,setFlyoutHidden:eR,sectionPosition:m,sectionNameForTracking:g,sectionDepth:Q})})]})}):(0,i.jsx)(Z.Ao,{ref:en,allowAutoExpanding:!0,alwaysEnsureModalOnScreen:!0,canRenderBelowViewport:!1,dataTestId:"component-flyout-modal",headerSize:"large",hidden:eO,id:ed.Ev,initialPosition:new x.Mi($+1,eu),initialWidth:ep,noCancelDragAndDrop:!0,onClick:ew,onClose:ey,onKeyDown:eA,title:eL,truncateTitleText:!0,children:(0,i.jsx)("div",{"data-not-draggable":!0,children:(0,i.jsx)(er,{asset:e,onLoaded:ek,onInsert:eI,flyoutHidden:eO,onCloseIfHidden:eP,setFlyoutHidden:eR,sectionPosition:m,sectionNameForTracking:g,sectionDepth:Q})})})}},93508:(e,t,n)=>{n.d(t,{r:()=>v});var i=n(104076),s=n(716976),a=n(419822),r=n(266808),l=n(511570),o=n.n(l),d=n(816565),c=n(365120),u=n(192075),p=n(223850),m=n(563792),h=n(380917),f=n(757887),g=n(96329),x=n(760800),_=n(581660);let y="component_flyout_thumbnail--thumbnail--p3jV2";function v({canViewPlayground:e,renderedAssetData:t,onCloseIfHidden:n,setFlyoutHidden:a,sectionPosition:r,sectionNameForTracking:l,sectionDepth:d,enableDragInsert:h=!0,maxThumbnailSize:x,fallbackToPublishedThumbnail:y=!0}){let v=s.useCallback(()=>{a(!0)},[a]),{onInsertableResourcePointerDown:j,dragState:k}=(0,g.j)({resource:t.asset,isList:!1,clickToInsert_DEPRECATED:!1,sourceForTracking:_.iV,fromPlayground:e,recomputeCancelRectsOnPointerUp:!0,onDragStart:h?v:void 0,onPointerUpWithoutInsert:h?n:void 0,sectionPosition:r,sectionNameForTracking:l,sectionDepth:d}),w=s.useMemo(()=>{let e=(0,m.zR)(t.asset,null);if(null!=e)return p.F.format(e)},[t.asset]),E=!!x;return(0,i.jsxs)(c.S.div,{className:o()("component_flyout_thumbnail--thumbnailWrapper--P38Qq",E?"component_flyout_thumbnail--fullHeightThumbnailWrapper--XCoTy":void 0),onPointerDown:h?j:void 0,role:"img","aria-label":(0,u.t)("design_systems.playground.thumbnail_alt"),style:w?{backgroundColor:w}:void 0,children:[y?(0,i.jsx)(C,{canViewPlayground:e,renderedAssetData:t}):(0,i.jsx)(b,{canViewPlayground:e,renderedAssetData:t,maxThumbnailSize:x}),h&&(0,i.jsx)(f.q,{dragState:k,isList:!1,thumbnailOverrideSrc:e&&t?.thumbnailData?t.thumbnailData.src:void 0})]})}function b({canViewPlayground:e,renderedAssetData:t,maxThumbnailSize:n}){return e&&t?.thumbnailData?(0,i.jsx)(d.oW,{className:y,style:n,src:t.thumbnailData.src,alt:(0,u.t)("design_systems.playground.thumbnail_alt"),draggable:!1}):(0,i.jsx)(a.k,{})}function C({canViewPlayground:e,renderedAssetData:t}){let n=j(t.hasChangesToReset,t.nodeData?.modeData??null);return e&&t?.thumbnailData&&n?(0,i.jsx)(d.oW,{className:y,src:t.thumbnailData.src,alt:(0,u.t)("design_systems.playground.thumbnail_alt"),draggable:!1}):(0,i.jsx)(x.M,{className:y,draggable:!1,item:t.asset,localThumbnailGenerationBehavior:"skip"},(0,h.V)(t.asset))}let j=(e,t)=>s.useMemo(()=>{if(e)return!0;let n=r.glU?.getPlaygroundScene();return!!n&&Object.values(t||{}).some(e=>{let t=e.inheritMode;return"MIXED"!==t&&!!t&&r.CWU?.getVariableSetDefaultModeForScene(e.collectionID,n)!==t.guid})},[e,t])},581660:(e,t,n)=>{n.d(t,{iV:()=>a,se:()=>r});var i=n(716976);n(491488),n(266808),n(564914);var s=n(573278);let a="asset-description-preview";function r(){let{closeFlyout:e}=(0,s.JA)();return i.useCallback(()=>{e()},[e])}},146264:(e,t,n)=>{n.d(t,{g:()=>sR});var i=n(104076),s=n(716976),a=n(511570),r=n.n(a),l=n(883765),o=n(434511),d=n(265149),c=n(653899),u=n(140490),p=n(1188),m=n(271761),h=n(236631),f=n(192075),g=n(46805),x=n(211862),_=n(374794),y=n(299117),v=n(957128),b=n(482996),C=n(244205),j=n(422872),k=n(296831),w=n(74620),E=n(174730),T=n(143277),S=n(61102),I=n(2972),N=n(654200),A=n(441030),L=n(413358);let M=(0,u._)(function(){let e=(0,w.aV)(),t=x.q5()?.canEdit,n=(0,x.MY)(),{show:a,isShowing:r,complete:l}=(0,j.e)({overlay:A.QI3,priority:T.N.SECONDARY_MODAL},[n]),o=(0,b.te)(),{currentView:d}=(0,I.wV)(),c=!!(0,E.f)(v.bo),u="no_figma_basics_onboarding_was_shown_in_current_session"===(0,k.zl)(L.j).currentState;return(0,s.useEffect)(()=>{!e&&t&&o()&&!c&&!u&&d===I.S5.Libraries&&a(),r&&d!==I.S5.Libraries&&l()},[a,l,t,r,o,c,u,d,e]),(0,i.jsx)(S.rq,{arrowPadding:v.fg,arrowPosition:N.F_.LEFT_TITLE,description:(0,f.tx)("rcs.visual_assets.explore_within_assets_tab"),disableHighlight:!0,isShowing:r,onClose:l,primaryCta:{label:(0,f.tx)("onboarding_pointers.got_it"),type:"button",onClick:l,ctaTrackingDescriptor:C.c.GOT_IT},targetKey:v.Bs,title:(0,f.tx)("rcs.visual_assets.elevate_your_designs"),trackingContextName:"Visual Asset Packs Tooltip",userFlagOnShow:v.bo})},"VisualAssetPacksTooltip");var O=n(193317);let R=(0,u._)(function({width:e}){return(0,i.jsxs)(y.p,{children:[(0,i.jsx)("div",{style:{left:`${e}px`,top:"195px"},className:"visual_assets_tooltip_and_target--hiddenNuxAnchor--i4n3a","data-onboarding-key":v.ko}),(0,i.jsx)(O.T,{}),(0,i.jsx)(M,{})]})},"VisualAssetsTooltipAndTarget");var P=n(121969),D=n(135535),F=n(573278),z=n(237420),B=n(638004),G=n(694415),U=n(769109),V=n(555013),H=n(428147),K=n(366535),W=n(443192),q=n(111297),X=n(249445),Y=n(295253);function Z(){let e=(0,z.wA)(),t=(0,x.q5)(),n=(0,z.d4)(e=>e.user?.id);if(!t)return null;let s=t.teamId,a=(0,i.jsx)(V.Us,{className:"library_upsell_banner--blueLink--bt6GX blue_link--blueLink--9rlnd",onClick:function(){(0,l.sx)("library_upsell_badge_clicked",{fileKey:t?.key,teamId:s,userId:n}),e((0,K.to)({type:H.V,data:{upsellSource:Y.b.LIBRARY_UPSELL_BADGE,teamId:s??void 0,entrypoint:X.C6.PLAN_COMPARISON_MODAL,openCheckoutInNewTab:!0}}))},trackingProperties:{trackingDescriptor:C.c.UPGRADE_TO_PROFESSIONAL},trusted:!0,role:"button",children:(0,f.tx)("design_systems.assets_panel.library_upsell_upgrade")});return(0,i.jsx)(p.tH,{boundaryKey:"LibraryUpsellBanner",fallback:p.H4.NONE_I_KNOW_WHAT_IM_DOING,sentryTags:{area:B.e.MONETIZATION_UPGRADES},children:(0,i.jsx)(q.fu,{name:"library upsell badge",properties:{fileKey:t?.key,teamId:t?.teamId},children:(0,i.jsx)("div",{className:"library_upsell_banner--bannerBackground--WlTVY",children:(0,i.jsxs)("div",{className:"library_upsell_banner--bannerContainer--SqSHa",children:[(0,i.jsx)(U.Jn,{className:"library_upsell_banner--closeButton--U1sPN",onClick:function(){(0,l.sx)("library_upsell_badge_dismissed",{fileKey:t?.key,teamId:s,userId:n}),e(W.b({has_dismissed_component_sidebar_library_upsell_banner:!0}))}}),(0,i.jsxs)("div",{className:"library_upsell_banner--bannerContent--SUcpT",children:[(0,i.jsx)("div",{className:"library_upsell_banner--bannerHeader--Lbg8d",children:(0,i.jsx)(G.l,{})}),(0,i.jsx)("p",{className:"library_upsell_banner--bannerTitle--AN3mP",children:(0,f.tx)("design_systems.assets_panel.library_upsell_header")}),(0,i.jsx)("p",{className:"library_upsell_banner--bannerBody--GSg3l",children:(0,f.tx)("design_systems.assets_panel.library_upsell_body",{upgradeToProfessionalPlanLink:a})})]})]})})})})}var J=n(490698),Q=n(682057),$=n(758994),ee=n(495905);n(109527);var et=n(530299),en=n(727954),ei=n(9781),es=n(10019);let ea=!1;var er=n(983500),el=n(499036),eo=n(95314),ed=n(848561),ec=n(684742),eu=n(528749),ep=n(738242),em=n(812714),eh=n(859277),ef=n(702021);let eg="asset_panel_folder--folderButton---mVgX",ex="asset_panel_folder--selected--U7Cz3",e_="asset_panel_folder--blankThumbnail--6v5uo";var ey=n(113877);let ev=(0,er.jz)(ey.CT),eb={height:ev,width:ev},eC=s.forwardRef(function({keyPrefix:e,name:t,onClick:n,onContextMenu:s,previewAssetOrUrl:a,recordingKey:l,disabled:o,selected:d,variant:c,customThumbnailData:u,pageInfo:p,hoverable:m,role:h},f){let g=(0,i.jsxs)(i.Fragment,{children:["preview"===c||"preview-no-padding"===c?(0,i.jsx)("div",{className:"asset_panel_folder--folderPreview--0ezgC",children:a?(0,i.jsx)(ef.V,{keyPrefix:e,previewAssetOrUrl:a,type:"preview-no-padding"===c?"no-padding":void 0,customThumbnailData:u,...eb,pageInfo:p}):(0,i.jsx)("div",{className:e_,style:eb})}):(0,i.jsx)("div",{className:"asset_panel_folder--folderIcon--FnZdp",children:(0,i.jsx)(eu.x,{})}),(0,i.jsx)("div",{className:"asset_panel_folder--folderName--CPNC8 ellipsis--ellipsis--Tjyfa",children:t}),(0,i.jsx)("div",{className:r()("asset_panel_folder--folderNextIcon--ZYH9z",{"asset_panel_folder--adjustMargin--uitBT":"icon"===c}),children:(0,i.jsx)(ep.n,{})})]});return(0,i.jsx)("div",{className:"asset_panel_folder--folderContainer--UPeR-",role:h,children:n?(0,em.kc)().dse_fpl_wave_1?(0,i.jsx)(ec.E,{"aria-label":t,className:r()(eg,{[ex]:d}),onClick:n,ref:f,recordingKey:l,disabled:o,htmlAttributes:{onContextMenu:s},children:g}):(0,i.jsx)(eh.GG,{"aria-label":t,className:r()(eg,{[ex]:d}),onClick:n,onContextMenu:s,forwardedRef:f,recordingKey:l,disabled:o,children:g}):(0,i.jsx)("div",{className:r()(eg,{[ex]:d,"asset_panel_folder--hover--BjmYh":!!m}),children:g})})});var ej=n(455582),ek=n(207116),ew=n(807474);function eE({subtree:e,index:t,keyPrefix:n,depth:a}){let r=(0,ej.sN)(),{folderPath:l,currentView:o}=(0,I.wV)(),[d]=(0,ew.MA)(),{previewAsset:c}=e,{navigateToFolder:u}=(0,I.wV)(),p=s.useCallback(()=>{r("folderRow",u(e.name))},[r,u,e.name]),m=s.useMemo(()=>[en.ON.CONTENTS,en.lM.ASSETS+a,en.tM.FOLDERS,t],[a,t]),{keyboardNavigationItem:h,setKeyboardNavigationElement:f}=(0,ed.M3)({path:m,id:e.key,disabled:(l?.length??0)>a}),{focusFirstItem:g,focusSearchBar:x}=(0,ek.rl)();(0,ek.C0)(h,0===t&&a===(l?.length??0)&&o===I.S5.Assets);let _=(0,ek.MB)({onBoth:p,onKeyDown:g,onClick:x}),y=s.useMemo(()=>l&&l.length>a,[l,a]);return(0,i.jsx)(eC,{name:e.name,onClick:_,keyPrefix:`${n}${e.name}`,previewAssetOrUrl:c,recordingKey:`assetsFolder.${e.name}`,ref:f,disabled:y,variant:"list"===d?"icon":"preview",role:"list"===d?"listitem":"gridcell"})}var eT=n(104177),eS=n(613997),eI=n(290834),eN=n(913664),eA=n(795033),eL=n(985416),eM=n(286764);let eO=(0,eA.Iz)(()=>(0,eL.rt)(0));function eR({libraryKey:e,pageId:t,folderPath:n}={}){let{lastNavAction:i}=(0,eM.ZX)(),a=i===eM.r6.Back||i===eM.r6.Mount||i===eM.r6.ToggleView&&!n,[r,l]=(0,eA.fp)(eO("libraries")),[o,d]=(0,eA.fp)(eO(`pages-${e}`)),[c,u]=(0,eA.fp)(eO(`assets-${e}-${t}-${(n??[]).join("-")}`));return{librariesScrollTop:a?r:0,pagesScrollTop:a?o:0,assetsScrollTop:a?c:0,handleScrollLibraries:s.useCallback(e=>{l(e)},[l]),handleScrollPages:s.useCallback(t=>{e&&d(t)},[d,e]),handleScrollAssets:s.useCallback(n=>{e&&t&&u(n)},[u,e,t])}}var eP=n(771255),eD=n(380917),eF=n(564914),ez=n(6380),eB=n(733405),eG=n(120440),eU=n(772963),eV=n(285626),eH=n(614784),eK=n(567325),eW=n(330308),eq=n(349311),eX=n(955715),eY=n(786406),eZ=n(658749),eJ=n(674355),eQ=n(94968),e$=n(854284),e0=n(842062),e1=n(58178);let e2=(0,er.jz)(ey._K);function e3(e){return(0,i.jsx)(u.u,{label:"AssetPanelResponsiveSetTile",children:(0,i.jsx)(e5,{...e})})}function e5({asset:e,cmsCollectionMappings:t,sectionNameForTracking:n,sectionDepth:a,sectionPosition:l,keyboardPosition:o,isFirstTile:d=!1,keyboardPanelDepth:c=0,thumbHeight:u,thumbWidth:p,libraryName:m,hideName:f=!1,onDragStart:g}){let x=(0,eK.kH)(e.name),{currentView:_,folderPath:y}=(0,I.wV)(),[v]=(0,ew.ye)(),[b]=(0,ew.MA)(),C="list"===b,j=(0,eQ.jx)(),k=null!=t,w=s.useMemo(()=>({...o,path:[en.ON.CONTENTS,en.lM.ASSETS+c,...o.path]}),[o,c]),E=_===I.S5.Assets&&y&&v&&(y?.length??0)>c,{setKeyboardNavigationElement:T,keyboardNavigationItem:S}=(0,ed.M3)({...w,id:(0,eD.V)(e),disabled:E});(0,ek.C0)(S,d&&_===I.S5.Assets&&!E);let{logInsert:N}=e4({item:e,sectionNameForTracking:n,sectionPosition:l,sourceForTracking:eZ.mZ,isList:C}),A=s.useCallback(()=>{N("drag"),(0,eX.$z)()},[N]),L=s.useMemo(()=>({sourceForTracking:eZ.mZ,sectionNameForTracking:n,sectionDepth:a,afterSuccessfulInsert:A,onDragStart:g}),[n,a,A,g]),M=function({item:e,cmsCollectionMappings:t,sectionNameForTracking:n,sectionPosition:i,sourceForTracking:a,isList:r}){let l=(0,z.wA)(),{logInsert:o,logKeyboardInsert:d}=e4({item:e,sectionNameForTracking:n,sectionPosition:i,sourceForTracking:a,isList:r}),c=s.useCallback(()=>{l((0,eV.jR)({item:e,cmsCollectionMappings:t,insertAsChildOfCanvas:!1,useSmartPositioning:!0})),(0,eX.$z)()},[l,e,t]);return s.useCallback(e=>{let t=0===e.detail;t&&d(),o(t?"keyboard":"click"),c()},[c,o,d])}({item:e,cmsCollectionMappings:t,sectionNameForTracking:n,sectionPosition:l,sourceForTracking:eZ.mZ,isList:C}),O=s.useMemo(()=>(0,eY.NR)(x),[x]),{listProps:R}=(0,eP.O)(),P=s.useMemo(()=>{if(f&&!C&&!k)return{"data-tooltip-type":eq.Ib.TEXT,"data-tooltip":O}},[O,f,C,k]);return(0,i.jsxs)(ec.E,{className:C?r()("asset_panel_responsive_set_tile--tileList--3j7Tn asset_panel_responsive_set_tile--_tileBase--NnHE4 asset_panel_tile--button--oNPUz",e1.iE):r()("asset_panel_responsive_set_tile--tileGrid--C-Qj3 asset_panel_responsive_set_tile--_tileBase--NnHE4 asset_panel_tile--button--oNPUz",e6({isFirstTile:d,isInLibraryFlyout:j,isCmsBlock:k})),ref:T,onClick:M,"aria-label":O,...P,children:[(0,i.jsx)("div",{className:r()(C?e1.u2:e1.QX,h.s.relative.$),children:(0,i.jsx)(eJ.lX,{alwaysShowBorder:!1,cmsCollectionMappings:t,displayType:C?"list-no-padding":"grid",draggable:L,height:C?R.thumbHeight:u,item:e,sectionPosition:l,shouldHideTooltip:!0,showName:C,thumbPaddingGrid:e2,thumbWrapperClassName:"asset_panel_responsive_set_tile--thumbWrapper--3Geap asset_panel_tile--thumbWrapper--bNG-Y",useBaseTile:!0,width:C?R.thumbWidth:p})}),!f&&!C&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:e1.Bm,style:{width:p-2},children:(0,i.jsx)(eU.G,{text:O})}),m&&(0,i.jsx)("div",{style:{width:p-2},children:(0,i.jsx)(eU.G,{text:m,className:r()(e1.Md,e1.Rm)})})]})]})}function e4({item:e,sectionNameForTracking:t,sectionPosition:n,sourceForTracking:i,isList:a}){let r=(0,e$.Nv)(!0),o=(0,x.tS)(),d=(0,I._m)(),c=(0,eH.Ew)({assetKey:(0,eW.u2)(e),assetLibraryKey:e.sourceLibraryKey,assetType:e.type,isList:a,sectionNameforTracking:t,sectionPosition:n,sourceForTracking:i??eZ.mZ,isExample:!1,partnerType:void 0}),u=(0,e0.r6)([e]),p=(0,P.CK)(),m=!!c.searchSessionId,h=s.useCallback(t=>{let{type:n,sectionPosition:i,searchQuery:s,searchSessionId:a,...o}=c;l.az.trackDefinedEvent("asset_search.result_inserted",{...o,aiResultsEnabled:r,assetType:n,position:i,reciprocalRank:1/(1+i),query:s,sessionId:a,entryPoint:eZ.mZ,componentSuggestionSessionId:p}),l.az.trackDefinedEvent("assets_panel.site_kit_inserted",{assetName:(0,eY.NR)((0,eK.kH)(e.name)),type:"responsive set",group:u(e),isFullPage:e.fullPage,fileKey:c.fileKey,fileTeamId:c.fileTeamId,fileOrgId:c.fileOrgId,sectionPosition:i,searchQuery:c.searchQuery,searchSessionId:c.searchSessionId,searchType:m?d?"site kit":"all":void 0,viewMode:c.viewMode?.toLocaleLowerCase(),queryId:c.queryId,action:t})},[c,r,p,e,u,m,d]),f=s.useCallback(()=>{l.az.trackDefinedEvent("assets_panel.keyboard_insert",{...c,aiResultsEnabled:r,assetsPanelVersion:3,fileKey:o??void 0})},[c,r,o]);return s.useMemo(()=>({logInsert:h,logKeyboardInsert:f}),[h,f])}let e6=({isFirstTile:e,isInLibraryFlyout:t,isCmsBlock:n})=>n?eG.Ay.classNames(e7.cmsGridWrapper):t?e?"asset_panel_responsive_set_tile--gridWrapperForBlocksRedesignFirstTile--cxGGn asset_panel_responsive_set_tile--gridWrapperForBlocksRedesign---yy1K asset_panel_tile--gridWrapper--tUJe5 asset_panel_tile--wrapper--8uDli asset_panel_tile--_wrapperBase--ngLpF library_item_tile--_variantHover--xfLPt":"asset_panel_responsive_set_tile--gridWrapperForBlocksRedesign---yy1K asset_panel_tile--gridWrapper--tUJe5 asset_panel_tile--wrapper--8uDli asset_panel_tile--_wrapperBase--ngLpF library_item_tile--_variantHover--xfLPt":e1.K2,e7={cmsGridWrapper:{kaIpWk:"x19y5rnk",krdFHd:null,kfmiAY:null,kVL7Gh:null,kT0f0o:null,kIxVMA:null,ksF3WI:null,kqGeR4:null,kYm2EN:null,kWkggS:"x12tve8b",$$css:!0}};var e8=n(919559),e9=n(794981);let te=(0,er.jz)(ey.HE),tt=(0,er.jz)(ey._q),tn=(0,er.jz)(ey.RQ),ti=(0,er.jz)(ey.$c),ts=(0,er.jz)(ey.d5);function ta({page:e,libraryKey:t,hideScrollbar:n}){let{assetsScrollTop:a,handleScrollAssets:r}=eR({libraryKey:t,pageId:e.id}),[l]=(0,ew.MA)(),{width:o}=(0,ez.G)(),d=s.useMemo(()=>(0,eN.r)(e.assets),[e.assets]),{tileHeight:c,tileWidth:u,numColumns:p}=(0,eB.AA)(o,d),m=s.useMemo(()=>{let e=[];return e.push(...td(d,p,u,c,l,"assets","Site kit",[en.tM.COMPONENTS],{includesFirstTile:!0,hideName:!0})),e},[d,l,p,c,u]);return(0,i.jsx)(eI.wl,{elements:m,hideScrollbar:n,initialScrollTop:a,onScroll:r,anchorScroll:!0,role:l})}function tr({subtree:e,currentFolderPath:t,hideScrollbar:n,onScroll:s,initialScrollTop:a,role:r}){let l=tl({subtree:e,currentFolderPath:t});return(0,i.jsx)(eI.wl,{elements:l,hideScrollbar:n,onScroll:s,initialScrollTop:a,role:r})}let tl=({subtree:e,currentFolderPath:t})=>{let{folderPath:n}=(0,I.wV)(),[a]=(0,ew.MA)(),{width:r}=(0,ez.G)(),{tileHeight:l,tileWidth:o,numColumns:d}=(0,eB.AA)(r,e?.items),c=t.join("/"),u=t.length,p=n?.length??0,m=s.useCallback(({subtree:e,elements:t})=>{let n=e.items.length>0;if(n){let n=[en.tM.COMPONENTS];t.push(...td(e.items,d,o,l,a,e.key,"Site kit",n,{includesFirstTile:u===p,keyboardPanelDepth:u,depth:u,hideName:!0}))}let s=Array.from(e.subtrees.values());n&&s.length>0&&t.push({element:(0,i.jsx)(eS.cG,{}),key:"divider",height:tn}),s.forEach((n,s)=>{t.push({element:(0,i.jsx)(eE,{subtree:n,index:s+e.items.length,keyPrefix:c,depth:u}),key:n.key,height:"list"===a?te:tt})})},[d,o,l,u,p,c,a]);return s.useMemo(()=>{let t=[];return e&&m({subtree:e,elements:t}),t},[m,e])};function to(e){return e.type===eF.PW.RESPONSIVE_SET}function td(e,t,n,s,a,r,l,o,d={}){let c=[];for(let u=0;u<e.length;u+=t){let p=e.slice(u,u+t),m=[];p.forEach((e,a)=>{let c=u+a;to(e)?m.push((0,i.jsx)(e3,{asset:e,hideName:d.hideName,isFirstTile:d?.includesFirstTile&&0===c,keyboardPanelDepth:d?.keyboardPanelDepth,keyboardPosition:(0,ek.pg)(o,c,t),libraryName:d.libraryNameForAsset?.(e),sectionDepth:d?.depth,sectionNameForTracking:l,sectionPosition:u+a,thumbHeight:s,thumbWidth:n},`${r}-${(0,eD.V)(e)}`)):m.push((0,i.jsx)(e8.pd,{embed:e,sectionNameForTracking:l,sectionPosition:u+a,keyboardPosition:(0,ek.pg)(o,c,t),isFirstTile:d?.includesFirstTile&&0===c,thumbHeight:s,thumbWidth:n,libraryName:d.libraryNameForAsset?.(e)},e.name))}),c.push({element:(0,i.jsx)("div",{className:"list"===a?e9.OS:0===u?e9.c:e9.wt,role:"row",children:m}),key:`${r}:row-${u/t}`,keys:p.map(e=>to(e)?(0,eD.V)(e):e.name),height:(0,eI.Hw)(s,a,{showFileName:!!d.libraryNameForAsset,hasTopPadding:0!==u,showAiDebugScores:!!(0,em.kc)().api_asset_search_with_scores,hideAssetName:!!d.hideName})})}return c.length>0&&(c.unshift({element:(0,i.jsx)(eS.hK,{height:ti}),key:`${r}:spacer-top`,height:ti}),c.push({element:(0,i.jsx)(eS.hK,{height:ts}),key:`${r}:spacer-bottom`,height:ts})),c}var tc=n(847538);let tu=(0,er.jz)(ey.HE),tp=(0,er.jz)(ey._q),tm=(0,er.jz)(ey.ce),th=(0,er.jz)(ey.RQ);function tf({page:e,width:t}){let{libraryKey:n,currentView:a}=(0,I.wV)(),{getPage:r}=(0,eT.G)(),{previousPageId:l}=(0,I.RR)(),o=s.useMemo(()=>a===I.S5.Pages?r(n,l):e,[a,r,n,e,l]);return n&&o?(0,i.jsx)(tg,{libraryKey:n,page:o,width:t}):(0,i.jsx)("div",{style:{width:t}})}function tg({libraryKey:e,page:t,width:n,hideScrollbar:s}){let[a]=(0,ew.ye)();if((0,en.AZ)(t))return(0,i.jsx)(tC,{page:t});if(a)return(0,i.jsx)(t_,{page:t,libraryKey:e,width:n,hideScrollbar:s});switch(t.type){case en.yW.DESIGN:return(0,i.jsx)(tx,{page:t,libraryKey:e});case en.yW.SITE:return(0,i.jsx)(ta,{page:t,libraryKey:e,hideScrollbar:s})}}function tx({page:e,libraryKey:t}){let{assetsScrollTop:n,handleScrollAssets:a}=eR({libraryKey:t,pageId:e.id}),[r]=(0,ew.MA)(),l=(0,eP.O)(),{componentSectionNameForTracking:o,templateSectionNameForTracking:d}=(0,ej.zf)(),c=s.useMemo(()=>{let t=[];if(e.templates){let n=(0,eN.r)(e.templates),{props:s,numColumns:a}=(0,eP.Z)(l,r,eo.rp.NORMAL,!0);t.push({element:(0,i.jsx)(eS.X3,{title:(0,f.t)("design_systems.assets_panel.templates")}),key:"templates:header",height:tm}),t.push(...(0,eI.Ij)(n,a,"templates",s,d,[en.tM.TEMPLATES],{includesFirstTile:!0}))}if(e.examples){let n=(0,eN.r)(e.examples),{props:i,numColumns:s}=(0,eP.Z)(l,r,eo.rp.NORMAL,!0);t.push(...(0,eI.Ij)(n,s,"examples",i,o,[en.tM.EXAMPLES],{includesFirstTile:!0,isExample:!0}))}if(e.components){e.templates&&t.push({element:(0,i.jsx)(eS.X3,{title:(0,f.t)("design_systems.assets_panel.components")}),key:"components:header",height:tm});let n=(0,eN.r)(e.components),s=(0,eo.PI)(n,!0),{props:a,numColumns:d}=(0,eP.Z)(l,r,s);t.push(...(0,eI.Ij)(n,d,"components",a,o,[en.tM.COMPONENTS],{includesFirstTile:!e.templates&&!e.examples}))}return t},[e.templates,e.examples,e.components,l,r,d,o]);return(0,i.jsx)(eI.wl,{elements:c,initialScrollTop:n,onScroll:a,anchorScroll:!0,role:r})}function t_({page:e,width:t,libraryKey:n,hideScrollbar:a}){let{folderPath:r}=(0,I.wV)(),{getFolder:l}=(0,eT.G)(),{previousFolderPath:o,previousPageId:d}=(0,I.RR)(),c=e.id,[u,p]=s.useMemo(()=>{let t=[],s=o??r??[],u=0;for(let o=-1;o<s.length;o++){let p=s.slice(0,o+1),m=l(n,c??d,p);if(m){if((0,I.xc)(m))continue;t.push((0,i.jsx)(tv,{page:e,libraryKey:n,currentFolderPath:p,hideScrollbar:a},`components-${p?p.join("/"):"root"}`)),o===(r??[]).length-1&&(u=t.length-1)}}return[t,u]},[r,l,a,n,e,c,o,d]);return(0,i.jsx)(tc.A,{index:p,width:t,children:u})}function ty(e,t){let n=e;for(let e of t){let t=n.subtrees.get(e);if(!t)return null;n=t}return n}function tv({page:e,libraryKey:t,currentFolderPath:n,hideScrollbar:a}){let[r]=(0,ew.MA)(),l=s.useMemo(()=>e.type===en.yW.DESIGN?ty(e.assets,n):null,[n,e.assets,e.type]),o=s.useMemo(()=>e.type===en.yW.SITE?ty(e.assets,n):null,[n,e.assets,e.type]),{folderPath:d}=(0,I.wV)(),c=(0,ee.fd)(t),u=e.id,p=n.length,m=d?.length??0,{assetsScrollTop:h,handleScrollAssets:f}=eR({libraryKey:t,pageId:u,folderPath:n});switch(e.type){case en.yW.DESIGN:return(0,i.jsx)(tb,{subtree:l,currentFolderPath:n,hideScrollbar:a||p<m,onScroll:f,initialScrollTop:h,role:r,isPreset:c});case en.yW.SITE:return(0,i.jsx)(tr,{subtree:o,currentFolderPath:n,hideScrollbar:a||p<m,onScroll:f,initialScrollTop:h,role:r})}}function tb({subtree:e,currentFolderPath:t,isPreset:n,hideScrollbar:s,onScroll:a,initialScrollTop:r,role:l}){let o=tj({subtree:e,currentFolderPath:t,isPreset:n});return(0,i.jsx)(eI.wl,{elements:o,hideScrollbar:s,onScroll:a,initialScrollTop:r,role:l})}function tC({page:e}){let[t]=(0,ew.MA)();return(0,i.jsx)(eS.xU,{children:(0,i.jsx)("div",{className:"grid"===t?"asset_panel_assets--embeds--kl79b":h.s.flex.flexColumn.itemsCenter.$,children:(0,i.jsx)(e8.$4,{embeds:e.embeds})})})}let tj=({subtree:e,currentFolderPath:t,isPreset:n})=>{let a=(0,eP.O)(),{componentSectionNameForTracking:r}=(0,ej.zf)(),{folderPath:l}=(0,I.wV)(),[o]=(0,ew.MA)(),d=t.join("/"),c=t.length,u=l?.length??0,p=s.useMemo(()=>!!(n&&e?.items)&&e?.items.every(e=>el.Nz(e,{isPreset:n})),[n,e?.items]),m=s.useCallback(e=>{let t=e.subtrees.values().next().value;return t&&(0,el.dS)(t.name,{isPreset:n})},[n]),h=s.useCallback(({subtree:e,elements:t})=>{let n=e.items.length>0,s=m(e);if(n){let n=[en.tM.COMPONENTS],i=(0,eo.PI)(e.items,!0),{props:s,numColumns:l}=(0,eP.Z)(a,o,i,p);t.push(...(0,eI.Ij)(e.items,l,e.key,s,r,n,{hasHeader:!1,includesFirstTile:c===u,keyboardPanelDepth:c,isExample:p}))}let l=Array.from(e.subtrees.values());n&&l.length>0&&!s&&t.push({element:(0,i.jsx)(eS.cG,{}),key:"divider",height:th,ariaHidden:!0}),l.forEach((n,a)=>{t.push({element:(0,i.jsx)(eE,{subtree:n,index:a+e.items.length,keyPrefix:d,depth:c}),key:n.key,height:"list"===o?tu:tp}),0===a&&s&&l.length>1&&t.push({element:(0,i.jsx)(eS.cG,{}),key:"examples_divider",height:th,ariaHidden:!0})})},[m,a,o,p,r,c,u,d]);return s.useMemo(()=>{let t=[];return e&&h({subtree:e,elements:t}),t},[h,e])};var tk=n(414191),tw=n(648952),tE=n(818778),tT=n(243021),tS=n(754245),tI=n(382629),tN=n(833805),tA=n(641518),tL=n(665261),tM=n(659062),tO=n(147046),tR=n(805733),tP=n(601887),tD=n(842013),tF=n(949052),tz=n(309112),tB=n(418463);let tG="asset-panel-library-context-menu",tU=tA.Pt("assetsLibrary","contextMenu"),tV=tL.ms,tH=tL.c$,tK=s.memo(({dropdownShown:e,usePortal:t})=>{let[{data:n}]=(0,tN.IT)((0,ee.Re)(e?.data?.partnerType));if(!e||e.type!==tG)return null;let{data:s}=e;if(!s)return null;let{libraryHref:a,position:r,isLocalLibrary:l,hideUnsubscribe:o=!1,onGoToLibrary:d,onPublish:c,onUnsubscribe:u,onSendFeedback:p}=s,m=l?(0,i.jsx)(tH,{onClick:c,recordingKey:tA.Pt(tU,"publishLibrary"),children:(0,f.tx)("design_systems.assets_panel.publish_library")}):null,h=[m,o||l?null:(0,i.jsx)(tH,{onClick:u,recordingKey:tA.Pt(tU,"unsubscribe"),children:(0,f.tx)("design_systems.assets_panel.remove_library_from_file")}),l||!a?null:(0,i.jsx)(tH,{href:a,target:"_blank",recordingKey:tA.Pt(tU,"goToLibrary"),onClick:d,children:(0,f.tx)("design_systems.assets_panel.go_to_library")}),!l&&n?(0,i.jsx)(tH,{href:n,target:"_blank",recordingKey:tA.Pt(tU,"sendFeedback"),onClick:p,children:(0,f.tx)("design_systems.assets_panel.send_feedback_to_creator")}):null].filter(tI.Vq);if(!r||!h.length)return null;let g=(0,i.jsxs)(tV,{style:tM.sx.add({top:`${r.top}px`,right:`${r.right}px`,bottom:`${r.bottom}px`,left:`${r.left}px`}).add(tM.sx.fixed).$,children:[...h]});return t?tS.createPortal(g,document.body):g});var tW=n(980852);let tq="asset-panel-page-context-menu",tX=tA.Pt("assetsLibrary","contextMenu"),tY=tL.ms,tZ=tL.c$,tJ=s.memo(({dropdownShown:e,usePortal:t})=>{if(!e||e.type!==tq)return null;let{data:n}=e;if(!n)return null;let{libraryPageHref:s,position:a,isLocalLibrary:r,onClickLocalPage:l,onClickSubscribedPage:o}=n;if(!a)return null;let d=r?(0,i.jsx)(tZ,{recordingKey:tA.Pt(tX,"goToLibrary"),onClick:l,children:(0,f.tx)("design_systems.assets_panel.go_to_page")}):s?(0,i.jsx)(tZ,{href:s,target:"_blank",recordingKey:tA.Pt(tX,"goToLibrary"),onClick:o,children:(0,f.tx)("design_systems.assets_panel.go_to_page")}):null;if(!d)return null;let c=(0,i.jsx)(tY,{style:tM.sx.add({top:`${a.top}px`,right:`${a.right}px`,bottom:`${a.bottom}px`,left:`${a.left}px`}).add(tM.sx.fixed).$,children:d});return t?tS.createPortal(c,document.body):c});function tQ(){let e=(0,z.d4)(e=>e.dropdownShown),t=(0,z.d4)(tk.h),n=e?.type===tT.K.ASSETS_PANEL&&!!e?.data?.component,a=e?.type===tq&&!!e?.data?.pageId,r=e?.type===tG&&!!e?.data,l=(0,tE.K)(!0),o=s.useContext(tw.U);return(0,i.jsxs)(i.Fragment,{children:[n&&(0,i.jsx)(tT.h,{selectedView:t,dropdownShown:e,onJumpToLocalComponent:l,onOpenFlyout:o?.onOpenFlyout,usePortal:!0}),a&&(0,i.jsx)(tJ,{dropdownShown:e,usePortal:!0}),r&&(0,i.jsx)(tK,{dropdownShown:e,usePortal:!0})]})}var t$=n(293422),t0=n(345288),t1=n(172096),t2=n(383698),t3=n(657317),t5=n(573845),t4=n(288054),t6=n(182788),t7=n(816565);n(284467);var t8=n(258807),t9=n(927671),ne=n(76404),nt=n(466764),nn=n(849757),ni=n(511295),ns=n(630124),na=n(266808),nr=n(421874),nl=n(470076),no=n(185245);function nd(){let{closeOverlay:e}=(0,nl.h)(),[t,n]=(0,eA.fp)(no.s0),a=s.useCallback(()=>{n(na.Nfd.DAKOTA),e()},[n,e]);return(0,i.jsx)("div",{...eG.Ay.props(nr.A.p16),children:(0,i.jsxs)("div",{...eG.Ay.props(nr.A.flex,nr.A.flexColumn,nr.A.itemsCenter,nr.A.textCenter,nr.A.gap8),children:[(0,i.jsx)(ns.s,{className:"x1aue78i"}),(0,i.jsx)("div",{...eG.Ay.props(nr.A.textBodyMediumStrong,nr.A.colorText),children:(0,f.tx)("dakota.site_blocks.create_cms_collection")}),(0,i.jsx)("div",{...eG.Ay.props(nr.A.textBodyMedium,nr.A.colorTextSecondary),children:(0,f.tx)("dakota.site_blocks.dynamically_connect_and_update")}),(0,i.jsx)(t$.IK,{onClick:a,children:(0,f.tx)("dakota.site_blocks.create_collection_button")})]})})}var nc=n(479414),nu=n(150184),np=n(275033),nm=n(239004);function nh(e){let{data:t}=(0,ni.gL)(e);return(0,s.useMemo)(()=>t?function(e){let t=e.sort((e,t)=>(0,nc.Ez)(t.position,e.position)),n=t.filter(e=>e.fieldType===np._j.PLAIN_TEXT||e.fieldType===np._j.DATE),i=n.find(e=>"title"===e.name.toLowerCase())||n[0],s=n.find(e=>e.id!==i?.id),a=t.find(e=>e.fieldType===np._j.RICH_TEXT),r=t.find(e=>e.fieldType===np._j.IMAGE);return{primaryTextFieldId:i?.id??null,secondaryTextFieldId:s?.id??null,richTextFieldId:a?.id??null,imageFieldId:r?.id??null}}(t.fieldSchemas||[]):{primaryTextFieldId:null,secondaryTextFieldId:null,richTextFieldId:null,imageFieldId:null},[t])}function nf(e){let t=(0,e0.t0)();return(0,s.useMemo)(()=>t?Object.fromEntries([[t.primaryTextFieldId,e.primaryTextFieldId],[t.secondaryTextFieldId,e.secondaryTextFieldId],[t.imageFieldId,e.imageFieldId],[t.richTextFieldId,e.richTextFieldId]].filter(e=>null!=e[0]&&null!=e[1])):{},[t,e])}function ng(e,t,{isPageBlock:n}={}){let i=(0,e0.t0)(),a=i?.assetNames;return(0,s.useMemo)(()=>{if(!a)return null;let i=n?function(e,t){let{primaryTextFieldId:n,secondaryTextFieldId:i,richTextFieldId:s,imageFieldId:a}=e,r=null!==n,l=null!==i,o=null!==s,d=null!==a;return(l&&!r&&(0,nm.AK)("Unexpected CMS block fields",{primaryTextFieldId:n,secondaryTextFieldId:i,imageFieldId:a}),d)?r&&l&&o?t.textImageRichPage??null:r&&o?t.imageRichPage??null:r&&l?t.textImagePage??null:t.imagePage??null:r&&l&&o?t.textRichPage??null:r&&o?t.richPage??null:r||l?t.textPage??null:null}(e,a):function(e,t){let{primaryTextFieldId:n,secondaryTextFieldId:i,richTextFieldId:s,imageFieldId:a}=e,r=null!==n,l=null!==i,o=r||l,d=null!==a;return(l&&!r&&(0,nm.AK)("Unexpected CMS block fields",{primaryTextFieldId:n,secondaryTextFieldId:i,imageFieldId:a}),d)?r&&!l?t.imageSingleTextList:o?t.textImageList:t.imageOnlyList:r&&null!==s?t.richTextList??t.textOnlyList:o?t.textOnlyList:null}(e,a);return i?t.find(e=>e.name===i)??null:null},[e,t,a,n])}function nx({collections:e,assets:t,renderFlyoutListItem:n,renderFlyoutPageItem:s}){return(0,i.jsx)(u.u,{label:"CmsFlyoutItems",children:e.map((a,r)=>{let l=r===e.length-1;return(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{...eG.xk(nr.A.flex,nr.A.itemsCenter,nr.A.gap4,nr.A.px8,nr.A.my4),children:[(0,i.jsx)(ns.s,{}),(0,i.jsx)("span",{...eG.xk(nr.A.textBodyMediumStrong,nr.A.colorText),children:a.name})]}),(0,i.jsx)(ny,{assets:t,collectionId:a.id,collectionName:a.name,children:e=>n({...e,index:r})}),(0,i.jsx)(nv,{assets:t,collectionId:a.id,collectionName:a.name,children:e=>s({...e,index:r})}),!l&&(0,i.jsx)("hr",{...eG.xk(n_.divider,nr.A.m8)})]},a.id)})})}let n_={divider:{kMzoRj:"xc342km",kjGldf:null,k2ei4v:null,kZ1KPB:null,ke9TFa:null,kWqL5O:null,kLoX6v:null,kt9PQ7:null,kEafiO:"x178xt8z",kPef9Z:"x13fuv20",kVAM5u:"x7z60cl",kzOINU:null,kGJrpR:null,kaZRDh:null,kBCPoo:null,k26BEO:null,k5QoK5:null,kLZC3w:null,kL6WhQ:null,$$css:!0}};function ny({collectionId:e,collectionName:t,assets:n,children:i}){let s=nh(e),a=nf(s);return i({asset:ng(s,n),cmsCollectionMappings:{blockType:"list",collectionId:e,collectionName:t,fieldSchemaMappings:a}})}function nv({collectionId:e,collectionName:t,assets:n,children:i}){let s=nh(e),a=function(e){let{data:t}=(0,nu.Vp)(e);if(!t||0===t.length)return null;let[n]=t;return n.id}(e),r=nf(s);return i({asset:ng(s,n,{isPageBlock:!0}),cmsCollectionMappings:{blockType:"page",collectionId:e,itemId:a,collectionName:t,fieldSchemaMappings:r}})}var nb=n(419822);function nC(){return(0,i.jsx)("div",{...eG.Ay.props(nr.A.p16),children:(0,i.jsx)(nb.k,{})})}var nj=n(443208),nk=n(222714);let nw=(0,s.createContext)(void 0);function nE(){let e=(0,s.useContext)(nw);if(void 0===e)throw Error("useFlyoutContext must be used within a FlyoutProvider");return e}function nT({page:e,libraryKey:t,onDragStart:n,children:a}){let r=(0,s.useMemo)(()=>(0,eN.r)(e.assets),[e.assets]),l=function(){let{windowInnerWidth:e}=(0,nk.l)();return(0,s.useMemo)(()=>Math.min(Math.max(Math.floor(15*e/64),144),220),[e])}(),o=(0,s.useMemo)(()=>l-8,[l]),d=(0,s.useMemo)(()=>l-2*eJ.$A-8,[l]),c=(0,s.useMemo)(()=>({page:e,libraryKey:t,assets:r,panelWidth:l,embedThumbWidth:o,thumbWidth:d,onDragStart:n}),[e,t,r,l,o,d,n]);return(0,i.jsx)(nw.Provider,{value:c,children:a})}let nS=s.forwardRef(({hide:e,libraryKey:t,onMouseEnter:n,onMouseLeave:a,onDragStart:r},l)=>{let{getLibrary:o}=(0,eT.G)(),d=(0,nt.B)(),{isLeftPanelCollapsed:c}=(0,s.useContext)(nj.t),u=(0,m.b)();if(c)return null;let p=o(t);if(!p)return null;let h=(0,I.Cg)(p);return h&&h.type===en.yW.SITE?tS.createPortal((0,i.jsx)("div",{ref:l,...eG.Ay.props(nP.flyout,nP.flyoutPosition(u,d),e&&nP.hidden),onMouseEnter:n,onMouseLeave:a,"data-fullscreen-prevent-event-capture":!0,"data-testid":"asset-panel-library-flyout","aria-hidden":e,children:(0,i.jsx)(nT,{libraryKey:t,page:h,onDragStart:r,children:(0,i.jsx)(nN,{})})}),document.body):null}),nI="Site kit";function nN(){let{page:e,libraryKey:t,assets:n,embedThumbWidth:s,thumbWidth:a,onDragStart:r}=nE();return(0,e0.VF)()(t)?(0,i.jsx)(nA,{}):(0,en.AZ)(e)?(0,i.jsx)(nL,{children:(0,i.jsx)(nM,{styleXStyle:nP.gap16,children:e.embeds.map((e,t)=>(0,i.jsx)(eQ.Ay.Provider,{value:eQ.W7.Embed,children:(0,i.jsx)(e8.pd,{embed:e,sectionPosition:t,keyboardPosition:{path:[en.ON.CONTENTS,en.lM.ASSETS,t],column:null},thumbHeight:Math.floor(s/2),thumbWidth:s,isFirstTile:0===t,onDragStart:r},e.name)},e.name))})}):(0,i.jsx)(nL,{children:(0,i.jsx)(nM,{styleXStyle:nP.gap16,children:n.map((e,t)=>(0,i.jsx)(eQ.Ay.Provider,{value:e.fullPage?eQ.W7.Webpage:eQ.W7.Block,children:(0,i.jsx)(e3,{asset:e,sectionPosition:t,thumbWidth:a,isFirstTile:0===t,sectionNameForTracking:nI,keyboardPosition:(0,ek.pg)([en.tM.COMPONENTS],t,1),hideName:!0,onDragStart:r},e.name)},e.name))})})}function nA(){let e=(0,x.tS)(),{data:t,status:n}=(0,ni.c$)(e),{libraryKey:a,assets:r,thumbWidth:l,onDragStart:o}=nE(),d=(0,s.useMemo)(()=>r.filter(e=>e.type===eF.PW.RESPONSIVE_SET),[r]),c=(0,s.useCallback)(({asset:e,cmsCollectionMappings:t,index:n})=>e?(0,i.jsx)(e3,{asset:e,cmsCollectionMappings:t,hideName:!0,keyboardPosition:(0,ek.pg)([en.tM.COMPONENTS],n,1),onDragStart:o,sectionNameForTracking:nI,sectionPosition:n,thumbWidth:l},e.name):null,[o,l]);return"loading"===n||null==t?(0,i.jsx)(nM,{styleXStyle:nP.justifyCenter,children:(0,i.jsx)(nC,{})}):0===t.length?(0,i.jsx)(nM,{styleXStyle:nP.justifyCenter,children:(0,i.jsx)(nd,{})}):(0,i.jsx)(nL,{children:(0,i.jsx)(nM,{styleXStyle:nP.my4,children:(0,i.jsx)(eQ.Ay.Provider,{value:eQ.W7.Block,children:(0,i.jsx)(nx,{collections:t,assets:d,renderFlyoutListItem:c,renderFlyoutPageItem:c})},a)})})}function nL({children:e}){let{libraryKey:t,page:n}=nE(),{assetsScrollTop:s,handleScrollAssets:a}=eR({libraryKey:t,pageId:n.id});return(0,i.jsx)(nn.P,{hideScrollbar:!0,onScroll:a,initialScrollTop:s,children:e})}function nM({styleXStyle:e,children:t}){let{thumbWidth:n}=nE();return(0,i.jsx)("div",{...eG.Ay.props(e,nP.flyoutWrapper,nP.flyoutWrapperWidth(n)),children:t})}let nO={kbCHJM:"xgq9j65",kLqNvP:"",kt4wiu:"",$$css:!0},nR={kzqmXN:"x5lhr3w",$$css:!0},nP={flyout:{kVAEAm:"x10l6tqk",kjj79g:"xl56j7k",k87sOh:"x13vifvy",krVfgx:"x1ey2m1c",k1xSpc:"x78zum5",kWkggS:"x1yjdb4r",kWqL5O:"xs1s249",k2ei4v:null,ke9TFa:null,kSWEuD:"x32b0ac",kVhnKS:null,k8ry5P:null,k26BEO:"x1lpqudl",kGJrpR:null,kBCPoo:null,kMv6JI:"x1v78wtz",kmVPX3:"x9dr4nv",kg3NbH:null,kuDDbn:null,kE3dHu:null,kP0aTx:null,kpe85a:null,k8WAf4:null,kLKAdn:null,kGO01o:null,kY2c9j:"xybi4ul",$$css:!0},flyoutPosition:(e,t)=>[nO,{"--x-left":(e=>"number"==typeof e?e+"px":null!=e?e:void 0)(`calc(var(--left-panel-width) + ${e?t+1:0}px)`)}],hidden:{k1xSpc:"x1s85apg",$$css:!0},flyoutWrapper:{k1xSpc:"x78zum5",kXwgrk:"xdt5ytf",kGNEyG:"x6s0dn4",$$css:!0},my4:{keoZOQ:"x15r87gk",k1K539:"x1ah0xmj",$$css:!0},gap16:{kOIVth:"x1r05qx8",khm7nJ:null,k1C7PZ:null,$$css:!0},justifyCenter:{kjj79g:"xl56j7k",$$css:!0},flyoutWrapperWidth:e=>[nR,{"--x-width":(e=>"number"==typeof e?e+"px":null!=e?e:void 0)(e+2*eJ.$A+8)}]};var nD=n(244920);let nF=(0,eA.eU)(null);var nz=n(755444),nB=n(373547);let nG={width:"unset"},nU=[{name:"pages",url:(0,nz.ck)("99bf5f7ad969ea1167c7b09340ffc4486185e71a"),background:{light:"--ramp-blue-300",dark:"--ramp-pale-blue-600"},style:{...nG,filter:"drop-shadow(0px 2px 8px rgba(0, 49, 124, 0.10))"}},{name:"navigation",url:(0,nz.ck)("a84d6d275dd4af825b41cf6a782d8950a38ccf28"),background:{light:"--ramp-persimmon-300",dark:"--ramp-pale-persimmon-600"},style:{...nG,filter:"drop-shadow(0px 2px 6px rgba(185, 42, 0, 0.10))"}},{name:"heroes",url:(0,nz.ck)("2314584dee6e81eb3a90596302b184d88f6b00f3"),background:{light:"--ramp-pink-300",dark:"--ramp-pale-pink-600"},style:{...nG,filter:"drop-shadow(0px 2px 6px rgba(165, 0, 117, 0.10))"}},{name:"features",url:(0,nz.ck)("c9c8ec535fe73557c9729a00cebbffbdf6e3bd00"),background:{light:"--ramp-yellow-400",dark:"--ramp-pale-yellow-600"},style:{...nG,filter:"drop-shadow(0px 2px 6px rgba(197, 92, 0, 0.10))"}},{name:"cms",url:(0,nz.ck)("f0a8fe62447d4ae8ab8b02a3184bd1efcae2eed4"),background:{light:"--ramp-teal-400",dark:"--ramp-pale-teal-600"},style:{...nG,filter:"drop-shadow(0px 2px 6px rgba(0, 135, 168, 0.10))"}},{name:"embeds",url:(0,nz.ck)("b6ff5202c5344702953b4d618f6d06a362b63e1b"),background:{light:"--ramp-violet-400",dark:"--ramp-pale-violet-600"},style:{...nG,filter:"drop-shadow(0px 2px 8px rgba(51, 19, 179, 0.10))"}}],nV=(0,er.jz)(ey.Sx),nH=(0,er.jz)(ey.T5);function nK(e){return(0,i.jsx)(u.u,{label:"AssetPanelLibrary",children:(0,i.jsx)(nW,{...e})})}function nW({library:e,previewHeight:t,cardWidth:n,keyboardSection:a,rowIndex:r,columnIndex:o=0,hideUnsubscribe:d,flyoutHandlers:c,isFolderView:u,folderVariant:p="preview"}){let{focusFirstItem:m,focusSearchBar:h}=(0,ek.rl)(),{navigateToLibrary:g}=(0,I.wV)(),_=(0,x.q5)(),y=(0,eA.md)(nF),v=(0,t9.H)(e.libraryKey),[C]=(0,ew.MA)(),j=((0,b.GM)()()?ew.$H.LIST:C)===ew.$H.LIST,k=(0,ej.sN)(),w=s.useCallback(()=>{k("libraryCard",g(e.libraryKey))},[e.libraryKey,k,g]),{currentView:E}=(0,I.wV)(),T=E!==I.S5.Libraries,{setKeyboardNavigationElement:S}=(0,ed.M3)({path:[en.ON.CONTENTS,en.lM.LIBRARIES,a,r],column:o,id:e.libraryKey,disabled:T}),N=(0,ek.MB)({onBoth:w,onKeyDown:m,onClick:h}),A=s.useCallback(t=>{c?c.onClick(e.libraryKey):N(t)},[c,N,e.libraryKey]),L=s.useCallback(t=>c?.onMouseEnter?.(t,e.libraryKey),[c,e.libraryKey]),M=s.useCallback(t=>c?.onMouseLeave(t,e.libraryKey),[c,e.libraryKey]),O=s.useCallback(t=>c?.onMouseMove(t,e.libraryKey),[c,e.libraryKey]),R=s.useMemo(()=>{let t=e.libraryKey===_?.libraryKey?"localLibrary":e.libraryKey;return tA.Pt("assetsLibrary",t)},[e.libraryKey,_?.libraryKey]),P=function(e,t=!1){let n=(0,x.q5)(),i=(0,z.wA)(),a=e.libraryKey===n?.libraryKey,r=(0,eZ._9)(e.libraryKey,"assets_panel_library_context_menu"),o=s.useCallback(()=>r(!1),[r]),d=function(){let e=(0,z.wA)(),t=(0,x.q5)(),n=(0,z.d4)(e=>e.teams),i=(0,z.d4)(tD.fA),a=s.useCallback(()=>{e(K.to({type:tF.dD,data:{entrypoint:tz.RR.ASSET_PANEL_LIBRARY_CONTEXT_MENU}}))},[e]),r=t?.teamId&&n[t.teamId],l=s.useCallback(()=>{e(K.to({type:tB.$3,data:{afterFileMove:a,team:r||null}}))},[e,a,r]);return s.useCallback(()=>{i?a():l()},[i,a,l])}(),c=(0,tP.X)(e.libraryKey),u=(0,tR.b)({libraryKey:e.libraryKey}),p=u.data?.link,m=s.useCallback(()=>{l.az.trackDefinedEvent("assets_panel.go_to_library",{libraryKey:e.libraryKey,fileKey:n?.key,fileTeamId:n?.teamId??void 0,fileOrgId:n?.parentOrgId??void 0,entryPoint:"library_context_menu"})},[e.libraryKey,n]),h=s.useCallback(()=>{l.az.trackDefinedEvent("assets_panel.send_feedback_to_creator",{libraryKey:e.libraryKey,fileKey:n?.key,fileTeamId:n?.teamId??void 0,fileOrgId:n?.parentOrgId??void 0,entryPoint:"library_context_menu",partnerType:c})},[e.libraryKey,n,c]),f=s.useCallback(()=>{l.az.trackDefinedEvent("assets_panel.open_library_context_menu",{libraryKey:e.libraryKey,fileKey:n?.key,fileTeamId:n?.teamId??void 0,fileOrgId:n?.parentOrgId??void 0})},[e.libraryKey,n]);return s.useCallback(n=>{e.type!==en.yW.SITE&&(n.preventDefault(),n.stopPropagation(),i((0,tO.j7)({type:tG,data:{libraryHref:p,isLocalLibrary:a,partnerType:c,hideUnsubscribe:t,onGoToLibrary:m,onPublish:d,onUnsubscribe:o,onSendFeedback:h,position:{top:n.clientY,left:n.clientX}}})),f())},[e.type,i,p,a,c,t,m,d,o,h,f])}(e,d),D=!!(0,e0.dj)(e.libraryKey),F=function(e,t){let n="dark"===(0,nB.DP)()?"dark":"light";return s.useMemo(()=>{if(!t)return;let i=nU.find(t=>t.name===e.toLowerCase()||e===(0,f.t)("design_systems.assets_panel.site_embeds")&&"embeds"===t.name);if(i)return{url:i.url,backgroundToken:`var(${i.background[n]})`,style:i.style}},[t,e,n])}(e.name,D||e.libraryKey===nD.Yl);return(0,i.jsx)(eh.GG,{"aria-label":e.name,className:u?"":"asset_panel_library--library--5bw5-",forwardedRef:S,onClick:A,onContextMenu:P,onMouseEnter:L,onMouseLeave:M,onMouseMove:O,recordingKey:R,style:{width:j||u?"100%":n},tabIndex:T?-1:0,children:u?(0,i.jsx)(eC,{keyPrefix:e.libraryKey,name:e.name,hoverable:!0,previewAssetOrUrl:F?.url??(e.thumbnailUrl||void 0),selected:y?.persisted&&y?.key===e.libraryKey,recordingKey:R||"assetsLibraryFolder",variant:p,customThumbnailData:F}):(0,i.jsx)(nq,{library:e,previewHeight:t,isList:j,showAuthor:v})})}function nq({library:e,previewHeight:t,isList:n,showAuthor:a}){let{thumbnailUrl:r}=e,[l,o]=s.useState(r),d=s.useMemo(()=>{if(l)return`url(${l})`},[l]),c=s.useCallback(()=>{o(r)},[r]),u=s.useMemo(()=>n?{height:nV,width:nH}:{height:t},[n,t]);return(0,i.jsxs)("div",{className:n?"asset_panel_library--libraryCardList--qG5I1 asset_panel_library--libraryCard--l0q0e":"asset_panel_library--libraryCard--l0q0e",children:[(0,i.jsxs)("div",{className:"asset_panel_library--libraryPreviewSection--fRTrr",children:[(0,i.jsx)("div",{style:{backgroundImage:d,...u},className:e.thumbnailShouldCover?"asset_panel_library--libraryPreviewCover---Jx5R asset_panel_library--libraryPreview--jl-5n":"asset_panel_library--libraryPreview--jl-5n"}),r&&(0,i.jsx)(t7.oW,{src:r,onLoad:c,className:"asset_panel_library--hiddenImage--a-LoJ",alt:""})]}),(0,i.jsx)(nX,{library:e,isList:n,showAuthor:a})]})}function nX({library:e,isList:t,showAuthor:n}){let a=(0,eA.md)(t9.Rs),r=e.type!==en.yW.SITE,l=s.useMemo(()=>e.type===en.yW.SITE?"":e.numComponents>0?(0,f.t)("design_systems.assets_panel.num_components",{numComponents:e.numComponents}):"",[e]),o=a?.[e.libraryKey]?.author_name||e.authorName;return(0,i.jsx)("div",{className:t?"asset_panel_library--libraryFooterList--x3M2r asset_panel_library--libraryFooter--jXcDc":r?"asset_panel_library--libraryFooter--jXcDc":"asset_panel_library--libraryFooterWithoutLibraryStats--FnrKN asset_panel_library--libraryFooter--jXcDc",children:(0,i.jsxs)("div",{className:"asset_panel_library--libraryNameAndStats--uiY8T",children:[(0,i.jsxs)("div",{className:"asset_panel_library--nameAndIconForList--UCm5F",children:[(0,i.jsx)("h3",{className:"asset_panel_library--libraryName--aege1 ellipsis--ellipsis--Tjyfa",children:e.name}),(0,i.jsx)("div",{className:"asset_panel_library--libraryIcon--6s19b",children:(0,i.jsx)(t8.P,{libraryKey:e.libraryKey,compact:!0,showPresetTooltip:!0,colorPrimaryOnHover:!0,tooltipDelay:500,tooltipLocation:"below"})})]}),r&&(0,i.jsx)("div",{className:"asset_panel_library--libraryStats--JL9eF ellipsis--ellipsis--Tjyfa",children:n?(0,f.tx)("community.by_publisher",{publisher:o}):l})]})})}function nY(){return(0,i.jsxs)("svg",{width:"74px",height:"45px",viewBox:"0 0 76 46",fill:"none",children:[(0,i.jsx)("rect",{width:"66",height:"36.2738",rx:"3",transform:"matrix(0.998629 -0.052336 -0.052336 -0.998629 1.90015 39.6787)",fill:"url(#pattern0_4378_11285)"}),(0,i.jsx)("rect",{width:"66",height:"36.2738",rx:"3",transform:"matrix(0.998629 -0.052336 -0.052336 -0.998629 1.90015 39.6787)",fill:"url(#pattern1_4378_11285)"}),(0,i.jsx)("rect",{width:"66",height:"36.2738",rx:"3",transform:"matrix(0.998629 -0.052336 -0.052336 -0.998629 1.90015 39.6787)",fill:"#85C9E4"}),(0,i.jsxs)("g",{filter:"url(#filter0_dd_4378_11285)",children:[(0,i.jsx)("rect",{width:"66",height:"36",rx:"3",transform:"matrix(-1 0 0 1 73 6)",fill:"url(#pattern2_4378_11285)"}),(0,i.jsx)("rect",{width:"66",height:"36",rx:"3",transform:"matrix(-1 0 0 1 73 6)",fill:"url(#pattern3_4378_11285)"}),(0,i.jsx)("rect",{width:"66",height:"36",rx:"3",transform:"matrix(-1 0 0 1 73 6)",fill:"#E5F4FF"}),(0,i.jsx)("g",{clipPath:"url(#clip0_4378_11285)",children:(0,i.jsxs)("g",{filter:"url(#filter1_d_4378_11285)",children:[(0,i.jsx)("rect",{x:"40.7627",y:"24.7129",width:"13.4945",height:"13.4945",rx:"2.5951",fill:"#E6E6E6",fillOpacity:"0.11"}),(0,i.jsx)("rect",{x:"40.8477",y:"24.7979",width:"13.3245",height:"13.3245",rx:"2.51011",stroke:"#CFE4F3",strokeWidth:"0.169989"}),(0,i.jsx)("path",{d:"M38.7913 22.7412L56.2288 40.1787M56.2288 22.7412L38.7913 40.1787M44.6973 22.46V40.46M47.5097 22.46V40.46M50.3225 22.46V40.46M56.51 28.6475L38.51 28.6475M56.51 31.4599L38.51 31.4599M56.51 34.2726L38.51 34.2726M53.135 31.46C53.135 34.5666 50.6166 37.085 47.51 37.085C44.4034 37.085 41.885 34.5666 41.885 31.46C41.885 28.3534 44.4034 25.835 47.51 25.835C50.6166 25.835 53.135 28.3534 53.135 31.46ZM50.3225 31.46C50.3225 33.0133 49.0633 34.2725 47.51 34.2725C45.9567 34.2725 44.6975 33.0133 44.6975 31.46C44.6975 29.9067 45.9567 28.6475 47.51 28.6475C49.0633 28.6475 50.3225 29.9067 50.3225 31.46Z",stroke:"white",strokeOpacity:"0.6",strokeWidth:"0.113372"}),(0,i.jsx)("path",{d:"M46.8393 29.3914H46.3369C46.0243 29.3914 45.8679 29.3914 45.7485 29.4522C45.6435 29.5057 45.5582 29.591 45.5047 29.6961C45.4438 29.8155 45.4438 29.9719 45.4438 30.2845V32.4054C45.4438 32.718 45.4438 32.8742 45.5047 32.9936C45.5582 33.0986 45.6435 33.1841 45.7485 33.2376C45.8678 33.2984 46.024 33.2984 46.336 33.2984H48.4587C48.7706 33.2984 48.9266 33.2984 49.0459 33.2376C49.1509 33.1841 49.2365 33.0985 49.2901 32.9935C49.3508 32.8742 49.3508 32.7182 49.3508 32.4062V31.903M49.6299 30.5077V29.1123M49.6299 29.1123H48.2345M49.6299 29.1123L47.6764 31.0658",stroke:"#007BE5",strokeWidth:"0.558837",strokeLinecap:"round",strokeLinejoin:"round"})]})}),(0,i.jsx)("g",{clipPath:"url(#clip1_4378_11285)",children:(0,i.jsxs)("g",{filter:"url(#filter2_d_4378_11285)",children:[(0,i.jsx)("rect",{x:"55.6597",y:"24.7129",width:"13.4945",height:"13.4945",rx:"2.5951",fill:"#E6E6E6",fillOpacity:"0.11"}),(0,i.jsx)("rect",{x:"55.7447",y:"24.7979",width:"13.3245",height:"13.3245",rx:"2.51011",stroke:"#CFE4F3",strokeWidth:"0.169989"}),(0,i.jsx)("path",{d:"M53.6882 22.7412L71.1257 40.1787M71.1257 22.7412L53.6882 40.1787M59.5943 22.46V40.46M62.4066 22.46V40.46M65.2194 22.46V40.46M71.407 28.6475L53.407 28.6475M71.407 31.4599L53.407 31.4599M71.407 34.2726L53.407 34.2726M68.032 31.46C68.032 34.5666 65.5136 37.085 62.407 37.085C59.3004 37.085 56.782 34.5666 56.782 31.46C56.782 28.3534 59.3004 25.835 62.407 25.835C65.5136 25.835 68.032 28.3534 68.032 31.46ZM65.2195 31.46C65.2195 33.0133 63.9603 34.2725 62.407 34.2725C60.8537 34.2725 59.5945 33.0133 59.5945 31.46C59.5945 29.9067 60.8537 28.6475 62.407 28.6475C63.9603 28.6475 65.2195 29.9067 65.2195 31.46Z",stroke:"white",strokeOpacity:"0.6",strokeWidth:"0.113372"}),(0,i.jsx)("path",{d:"M64.911 33.9649L63.704 32.758M63.704 32.758C64.1063 32.3557 64.3552 31.7999 64.3552 31.186C64.3552 29.9582 63.3599 28.9629 62.1321 28.9629C60.9043 28.9629 59.9089 29.9582 59.9089 31.186C59.9089 32.4138 60.9043 33.4091 62.1321 33.4091C62.746 33.4091 63.3017 33.1603 63.704 32.758Z",stroke:"#007BE5",strokeWidth:"0.555781",strokeLinecap:"round",strokeLinejoin:"round"})]})}),(0,i.jsx)("g",{clipPath:"url(#clip2_4378_11285)",children:(0,i.jsxs)("g",{filter:"url(#filter3_d_4378_11285)",children:[(0,i.jsx)("rect",{x:"25.7114",y:"9.66113",width:"13.4945",height:"13.4945",rx:"2.5951",fill:"#E6E6E6",fillOpacity:"0.11"}),(0,i.jsx)("rect",{x:"25.7964",y:"9.74613",width:"13.3245",height:"13.3245",rx:"2.51011",stroke:"#CFE4F3",strokeWidth:"0.169989"}),(0,i.jsx)("path",{d:"M23.7397 7.68945L41.1772 25.127M41.1772 7.68945L23.7397 25.127M29.6458 7.4082V25.4082M32.4582 7.4082V25.4082M35.2709 7.4082V25.4082M41.4585 13.5957L23.4585 13.5957M41.4585 16.4081L23.4585 16.4081M41.4585 19.2209L23.4585 19.2209M38.0835 16.4082C38.0835 19.5148 35.5651 22.0332 32.4585 22.0332C29.3519 22.0332 26.8335 19.5148 26.8335 16.4082C26.8335 13.3016 29.3519 10.7832 32.4585 10.7832C35.5651 10.7832 38.0835 13.3016 38.0835 16.4082ZM35.271 16.4082C35.271 17.9615 34.0118 19.2207 32.4585 19.2207C30.9052 19.2207 29.646 17.9615 29.646 16.4082C29.646 14.8549 30.9052 13.5957 32.4585 13.5957C34.0118 13.5957 35.271 14.8549 35.271 16.4082Z",stroke:"white",strokeOpacity:"0.6",strokeWidth:"0.113372"}),(0,i.jsx)("path",{d:"M31.0159 13.8096C30.3787 13.8096 29.8621 14.3262 29.8621 14.9634V17.5596V17.848C29.8621 18.4852 30.3787 19.0019 31.0159 19.0019H33.9005C34.5377 19.0019 35.0544 18.4852 35.0544 17.848V17.5596V14.9634C35.0544 14.3262 34.5377 13.8096 33.9005 13.8096H31.0159ZM31.0159 14.3865H33.9005C34.2193 14.3865 34.4774 14.6447 34.4774 14.9634L34.4786 16.7507C34.2542 16.5424 34.0254 16.4121 33.7742 16.4057C33.7652 16.4054 33.7655 16.4057 33.7563 16.4057C33.4283 16.4057 33.0637 16.6578 32.8188 16.9737C32.7562 16.8324 32.693 16.6927 32.6203 16.5589C32.2799 15.9303 31.9081 15.5412 31.4486 15.5403C31.058 15.5395 30.7228 15.8588 30.4367 16.2961L30.439 14.9634C30.439 14.6447 30.6972 14.3865 31.0159 14.3865ZM33.6121 14.9634C33.4528 14.9634 33.3236 15.0926 33.3236 15.2519C33.3236 15.4111 33.4528 15.5403 33.6121 15.5403C33.7713 15.5403 33.9005 15.4111 33.9005 15.2519C33.9005 15.0926 33.7713 14.9634 33.6121 14.9634ZM31.4486 16.1173C31.6165 16.1175 31.8715 16.3789 32.1155 16.8295C32.2124 17.0077 32.2993 17.2042 32.3772 17.3974C32.4239 17.5128 32.4599 17.6011 32.4761 17.6496C32.5548 17.8852 32.8745 17.9187 32.9991 17.7038C33.0115 17.6824 33.034 17.6415 33.0712 17.5867C33.1335 17.4944 33.2045 17.4009 33.2786 17.3161C33.4638 17.1038 33.6423 16.9826 33.7563 16.9826C33.8714 16.9855 34.0491 17.1064 34.234 17.3161C34.309 17.4012 34.3782 17.4944 34.4414 17.5867C34.4613 17.6155 34.4642 17.6291 34.4774 17.6496V17.848C34.4774 18.1668 34.2193 18.4249 33.9005 18.4249H31.0159C30.6972 18.4249 30.439 18.1668 30.439 17.848V17.6046C30.4572 17.5532 30.4814 17.4924 30.52 17.3974C30.5988 17.2042 30.6842 17.008 30.7817 16.8295C31.0277 16.378 31.281 16.117 31.4486 16.1173Z",fill:"#007BE5"})]})}),(0,i.jsx)("g",{clipPath:"url(#clip3_4378_11285)",children:(0,i.jsxs)("g",{filter:"url(#filter4_d_4378_11285)",children:[(0,i.jsx)("rect",{x:"40.7627",y:"9.66113",width:"13.4945",height:"13.4945",rx:"2.5951",fill:"#E6E6E6",fillOpacity:"0.11"}),(0,i.jsx)("rect",{x:"40.8477",y:"9.74613",width:"13.3245",height:"13.3245",rx:"2.51011",stroke:"#CFE4F3",strokeWidth:"0.169989"}),(0,i.jsx)("path",{d:"M38.7915 7.68945L56.229 25.127M56.229 7.68945L38.7915 25.127M44.6975 7.4082V25.4082M47.5099 7.4082V25.4082M50.3227 7.4082V25.4082M56.5103 13.5957L38.5103 13.5957M56.5103 16.4081L38.5103 16.4081M56.5103 19.2209L38.5103 19.2209M53.1353 16.4082C53.1353 19.5148 50.6169 22.0332 47.5103 22.0332C44.4037 22.0332 41.8853 19.5148 41.8853 16.4082C41.8853 13.3016 44.4037 10.7832 47.5103 10.7832C50.6169 10.7832 53.1353 13.3016 53.1353 16.4082ZM50.3228 16.4082C50.3228 17.9615 49.0636 19.2207 47.5103 19.2207C45.957 19.2207 44.6978 17.9615 44.6978 16.4082C44.6978 14.8549 45.957 13.5957 47.5103 13.5957C49.0636 13.5957 50.3228 14.8549 50.3228 16.4082Z",stroke:"white",strokeOpacity:"0.6",strokeWidth:"0.113372"}),(0,i.jsx)("g",{clipPath:"url(#clip4_4378_11285)",children:(0,i.jsx)("path",{d:"M47.6765 15.2739C47.0718 13.8547 44.9556 14.0058 44.9556 15.8198C44.9556 17.6338 47.6765 19.1454 47.6765 19.1454C47.6765 19.1454 50.3974 17.6338 50.3974 15.8198C50.3974 14.0058 48.2811 13.8547 47.6765 15.2739Z",stroke:"#007BE5",strokeWidth:"0.605407",strokeLinecap:"round",strokeLinejoin:"round"})})]})}),(0,i.jsx)("g",{clipPath:"url(#clip5_4378_11285)",children:(0,i.jsxs)("g",{filter:"url(#filter5_d_4378_11285)",children:[(0,i.jsx)("rect",{x:"55.6597",y:"9.66113",width:"13.4945",height:"13.4945",rx:"2.5951",fill:"#E6E6E6",fillOpacity:"0.11"}),(0,i.jsx)("rect",{x:"55.7447",y:"9.74613",width:"13.3245",height:"13.3245",rx:"2.51011",stroke:"#CFE4F3",strokeWidth:"0.169989"}),(0,i.jsx)("path",{d:"M53.6885 7.68945L71.126 25.127M71.126 7.68945L53.6885 25.127M59.5945 7.4082V25.4082M62.4069 7.4082V25.4082M65.2197 7.4082V25.4082M71.4072 13.5957L53.4072 13.5957M71.4072 16.4081L53.4072 16.4081M71.4072 19.2209L53.4072 19.2209M68.0322 16.4082C68.0322 19.5148 65.5138 22.0332 62.4072 22.0332C59.3006 22.0332 56.7822 19.5148 56.7822 16.4082C56.7822 13.3016 59.3006 10.7832 62.4072 10.7832C65.5138 10.7832 68.0322 13.3016 68.0322 16.4082ZM65.2197 16.4082C65.2197 17.9615 63.9605 19.2207 62.4072 19.2207C60.8539 19.2207 59.5947 17.9615 59.5947 16.4082C59.5947 14.8549 60.8539 13.5957 62.4072 13.5957C63.9605 13.5957 65.2197 14.8549 65.2197 16.4082Z",stroke:"white",strokeOpacity:"0.6",strokeWidth:"0.113372"}),(0,i.jsx)("path",{d:"M60.2761 16.3467V18.4809C60.2761 18.7755 60.515 19.0144 60.8097 19.0144H64.011C64.3056 19.0144 64.5445 18.7755 64.5445 18.4809V16.3467",stroke:"#007BE5",strokeWidth:"0.533549",strokeLinecap:"round",strokeLinejoin:"round"}),(0,i.jsx)("path",{d:"M60.8088 14.6122C60.8088 14.2439 61.1074 13.9453 61.4758 13.9453V13.9453C61.9914 13.9453 62.4095 14.3633 62.4095 14.879V15.2792H61.4758C61.1074 15.2792 60.8088 14.9806 60.8088 14.6122V14.6122Z",stroke:"#007BE5",strokeWidth:"0.533549",strokeLinejoin:"round"}),(0,i.jsx)("path",{d:"M64.0107 14.6122C64.0107 14.2439 63.7121 13.9453 63.3438 13.9453V13.9453C62.8281 13.9453 62.4101 14.3633 62.4101 14.879V15.2792H63.3438C63.7121 15.2792 64.0107 14.9806 64.0107 14.6122V14.6122Z",stroke:"#007BE5",strokeWidth:"0.533549",strokeLinejoin:"round"}),(0,i.jsx)("path",{d:"M60.009 15.2803H64.811V16.3474H60.009V15.2803Z",stroke:"#007BE5",strokeWidth:"0.533549",strokeLinecap:"round",strokeLinejoin:"round"}),(0,i.jsx)("path",{d:"M62.4099 16.3467V19.0144",stroke:"#007BE5",strokeWidth:"0.533549",strokeLinecap:"round",strokeLinejoin:"round"})]})}),(0,i.jsx)("g",{clipPath:"url(#clip6_4378_11285)",children:(0,i.jsxs)("g",{filter:"url(#filter6_d_4378_11285)",children:[(0,i.jsx)("rect",{x:"25.7114",y:"24.7129",width:"13.4945",height:"13.4945",rx:"2.5951",fill:"#E6E6E6",fillOpacity:"0.11"}),(0,i.jsx)("rect",{x:"25.7964",y:"24.7979",width:"13.3245",height:"13.3245",rx:"2.51011",stroke:"#CFE4F3",strokeWidth:"0.169989"}),(0,i.jsx)("path",{d:"M23.74 22.7412L41.1775 40.1787M41.1775 22.7412L23.74 40.1787M29.646 22.46V40.46M32.4584 22.46V40.46M35.2712 22.46V40.46M41.4587 28.6475L23.4587 28.6475M41.4587 31.4599L23.4587 31.4599M41.4587 34.2726L23.4587 34.2726M38.0837 31.46C38.0837 34.5666 35.5653 37.085 32.4587 37.085C29.3521 37.085 26.8337 34.5666 26.8337 31.46C26.8337 28.3534 29.3521 25.835 32.4587 25.835C35.5653 25.835 38.0837 28.3534 38.0837 31.46ZM35.2712 31.46C35.2712 33.0133 34.012 34.2725 32.4587 34.2725C30.9054 34.2725 29.6462 33.0133 29.6462 31.46C29.6462 29.9067 30.9054 28.6475 32.4587 28.6475C34.012 28.6475 35.2712 29.9067 35.2712 31.46Z",stroke:"white",strokeOpacity:"0.6",strokeWidth:"0.113372"}),(0,i.jsx)("path",{d:"M32.3423 28.5566C31.3514 28.5566 30.6687 29.2395 30.6687 30.2303C30.6687 30.3656 30.6687 30.7798 30.6687 30.7882C30.6687 30.878 30.6233 30.9391 30.4682 31.0671C30.4506 31.0816 30.3768 31.145 30.3549 31.1631C30.0019 31.4549 29.8282 31.7282 29.8318 32.1829C29.8356 32.6426 30.2103 33.0144 30.6687 33.0197H31.5546C31.5546 33.0197 31.5055 33.1902 31.5055 33.2987C31.5055 33.7609 31.8801 34.1355 32.3423 34.1355C32.8045 34.1355 33.1792 33.7609 33.1792 33.2987C33.1792 33.1902 33.1323 33.0197 33.1323 33.0197H34.016C34.4734 33.0214 34.8534 32.6446 34.8528 32.1829C34.8523 31.7316 34.6782 31.4535 34.3298 31.1631C34.3069 31.1438 34.226 31.0822 34.2076 31.0671C34.0559 30.9405 34.016 30.8769 34.016 30.7882C34.016 30.4395 34.016 30.2303 34.016 30.2303C34.016 29.2395 33.3331 28.5566 32.3423 28.5566ZM32.3423 29.1145C33.0252 29.1145 33.4581 29.5474 33.4581 30.2303C33.4581 30.2303 33.4581 30.4395 33.4581 30.7882C33.4581 31.0844 33.5831 31.2713 33.8503 31.4942C33.8715 31.5118 33.961 31.5821 33.9811 31.5988C34.2149 31.7938 34.2946 31.9257 34.2949 32.1829C34.2952 32.3346 34.1652 32.4624 34.016 32.4618C33.9633 32.4616 33.1513 32.4616 32.3423 32.4618C31.5335 32.4621 30.7279 32.4624 30.6687 32.4618C30.513 32.4599 30.391 32.3377 30.3897 32.1829C30.3877 31.9263 30.4674 31.7941 30.7035 31.5988C30.7228 31.5829 30.8053 31.5109 30.8256 31.4942C31.097 31.2699 31.2266 31.0872 31.2266 30.7882C31.2266 30.7798 31.2266 30.3656 31.2266 30.2303C31.2266 29.5474 31.6596 29.1145 32.3423 29.1145ZM32.3423 33.0197C32.4963 33.0197 32.6213 33.1447 32.6213 33.2987C32.6213 33.4527 32.4963 33.5776 32.3423 33.5776C32.1884 33.5776 32.0634 33.4527 32.0634 33.2987C32.0634 33.1447 32.1884 33.0197 32.3423 33.0197Z",fill:"#007BE5"})]})}),(0,i.jsx)("g",{clipPath:"url(#clip7_4378_11285)",children:(0,i.jsxs)("g",{filter:"url(#filter7_d_4378_11285)",children:[(0,i.jsx)("rect",{x:"10.6597",y:"9.66113",width:"13.4945",height:"13.4945",rx:"2.5951",fill:"#E6E6E6",fillOpacity:"0.11"}),(0,i.jsx)("rect",{x:"10.7447",y:"9.74613",width:"13.3245",height:"13.3245",rx:"2.51011",stroke:"#CFE4F3",strokeWidth:"0.169989"}),(0,i.jsx)("path",{d:"M8.68848 7.68945L26.126 25.127M26.126 7.68945L8.68848 25.127M14.5945 7.4082V25.4082M17.4069 7.4082V25.4082M20.2197 7.4082V25.4082M26.4072 13.5957L8.40723 13.5957M26.4072 16.4081L8.40723 16.4081M26.4072 19.2209L8.40723 19.2209M23.0322 16.4082C23.0322 19.5148 20.5138 22.0332 17.4072 22.0332C14.3006 22.0332 11.7822 19.5148 11.7822 16.4082C11.7822 13.3016 14.3006 10.7832 17.4072 10.7832C20.5138 10.7832 23.0322 13.3016 23.0322 16.4082ZM20.2197 16.4082C20.2197 17.9615 18.9605 19.2207 17.4072 19.2207C15.8539 19.2207 14.5947 17.9615 14.5947 16.4082C14.5947 14.8549 15.8539 13.5957 17.4072 13.5957C18.9605 13.5957 20.2197 14.8549 20.2197 16.4082Z",stroke:"white",strokeOpacity:"0.6",strokeWidth:"0.113372"}),(0,i.jsx)("path",{d:"M18.1308 16.0168L17.0145 17.1331L16.4564 16.5749M15.061 17.6354V16.143C15.061 15.9939 15.061 15.9193 15.0792 15.8499C15.0952 15.7884 15.1218 15.7302 15.1575 15.6776C15.1978 15.6183 15.2538 15.5691 15.366 15.4709L16.706 14.2984C16.914 14.1164 17.018 14.0253 17.1352 13.9907C17.2385 13.9601 17.3486 13.9601 17.4519 13.9907C17.5692 14.0254 17.6734 14.1165 17.8817 14.2988L19.2212 15.4709C19.3335 15.5691 19.3895 15.6183 19.4298 15.6776C19.4654 15.7302 19.4918 15.7884 19.5079 15.8499C19.526 15.9193 19.5262 15.9939 19.5262 16.143V17.6364C19.5262 17.9484 19.5262 18.1045 19.4654 18.2238C19.4119 18.3288 19.3263 18.4141 19.2212 18.4677C19.102 18.5284 18.946 18.5284 18.634 18.5284H15.9532C15.6412 18.5284 15.485 18.5284 15.3657 18.4677C15.2607 18.4141 15.1754 18.3288 15.1219 18.2238C15.061 18.1044 15.061 17.948 15.061 17.6354Z",stroke:"#007BE5",strokeWidth:"0.558837",strokeLinecap:"round",strokeLinejoin:"round"})]})}),(0,i.jsx)("g",{clipPath:"url(#clip8_4378_11285)",children:(0,i.jsxs)("g",{filter:"url(#filter8_d_4378_11285)",children:[(0,i.jsx)("rect",{x:"10.6597",y:"24.7129",width:"13.4945",height:"13.4945",rx:"2.5951",fill:"#E6E6E6",fillOpacity:"0.11"}),(0,i.jsx)("rect",{x:"10.7447",y:"24.7979",width:"13.3245",height:"13.3245",rx:"2.51011",stroke:"#CFE4F3",strokeWidth:"0.169989"}),(0,i.jsx)("path",{d:"M8.68823 22.7412L26.1257 40.1787M26.1257 22.7412L8.68823 40.1787M14.5943 22.46V40.46M17.4066 22.46V40.46M20.2194 22.46V40.46M26.407 28.6475L8.40698 28.6475M26.407 31.4599L8.40698 31.4599M26.407 34.2726L8.40698 34.2726M23.032 31.46C23.032 34.5666 20.5136 37.085 17.407 37.085C14.3004 37.085 11.782 34.5666 11.782 31.46C11.782 28.3534 14.3004 25.835 17.407 25.835C20.5136 25.835 23.032 28.3534 23.032 31.46ZM20.2195 31.46C20.2195 33.0133 18.9603 34.2725 17.407 34.2725C15.8537 34.2725 14.5945 33.0133 14.5945 31.46C14.5945 29.9067 15.8537 28.6475 17.407 28.6475C18.9603 28.6475 20.2195 29.9067 20.2195 31.46Z",stroke:"white",strokeOpacity:"0.6",strokeWidth:"0.113372"}),(0,i.jsx)("path",{d:"M17.2926 28.5586C15.752 28.5586 14.5032 29.8074 14.5032 31.348C14.5032 32.8886 15.752 34.1374 17.2926 34.1374C18.8332 34.1374 20.082 32.8886 20.082 31.348C20.082 29.8074 18.8332 28.5586 17.2926 28.5586ZM17.2926 29.1165C17.6608 29.1165 18.0653 29.9622 18.1269 31.0682L16.4616 31.0716C16.523 29.9656 16.9244 29.1165 17.2926 29.1165ZM16.3076 29.3405C16.0678 29.8071 15.9394 30.4258 15.9085 31.0696L15.0772 31.0671C15.1604 30.307 15.6722 29.6693 16.3076 29.3405ZM18.2789 29.3419C18.9144 29.6707 19.4131 30.2905 19.5093 31.0716L18.6784 31.0691C18.6522 30.3996 18.504 29.811 18.2789 29.3419ZM15.0789 31.6281L15.9099 31.6211C15.9408 32.2649 16.07 32.8942 16.3088 33.3558C15.6415 33.0214 15.1749 32.3667 15.0789 31.6281ZM16.4572 31.6303L18.1224 31.6267C18.0611 32.7324 17.6608 33.5795 17.2926 33.5795C16.9244 33.5795 16.5185 32.7363 16.4572 31.6303ZM18.6798 31.6275L19.5071 31.625C19.4112 32.3639 18.9448 33.0239 18.2778 33.3528C18.5255 32.8406 18.6488 32.2713 18.6798 31.6275Z",fill:"#007BE5"})]})})]}),(0,i.jsxs)("defs",{children:[(0,i.jsx)("pattern",{id:"pattern0_4378_11285",patternContentUnits:"objectBoundingBox",width:"1",height:"1",children:(0,i.jsx)("use",{xlinkHref:"#image0_4378_11285",transform:"matrix(0.00083331 0 0 0.00145829 0 -0.000923572)"})}),(0,i.jsx)("pattern",{id:"pattern1_4378_11285",patternContentUnits:"objectBoundingBox",width:"1",height:"1",children:(0,i.jsx)("use",{xlinkHref:"#image1_4378_11285",transform:"matrix(0.000916004 0 0 0.00166667 -0.0496025 0)"})}),(0,i.jsxs)("filter",{id:"filter0_dd_4378_11285",x:"4",y:"4",width:"72",height:"42",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,i.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,i.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,i.jsx)("feOffset",{dy:"1"}),(0,i.jsx)("feGaussianBlur",{stdDeviation:"1.5"}),(0,i.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.15 0"}),(0,i.jsx)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_4378_11285"}),(0,i.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,i.jsx)("feOffset",{}),(0,i.jsx)("feGaussianBlur",{stdDeviation:"0.25"}),(0,i.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0"}),(0,i.jsx)("feBlend",{mode:"normal",in2:"effect1_dropShadow_4378_11285",result:"effect2_dropShadow_4378_11285"}),(0,i.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect2_dropShadow_4378_11285",result:"shape"})]}),(0,i.jsx)("pattern",{id:"pattern2_4378_11285",patternContentUnits:"objectBoundingBox",width:"1",height:"1",children:(0,i.jsx)("use",{xlinkHref:"#image0_4378_11285",transform:"matrix(0.00083331 0 0 0.00145829 0 -0.000923572)"})}),(0,i.jsx)("pattern",{id:"pattern3_4378_11285",patternContentUnits:"objectBoundingBox",width:"1",height:"1",children:(0,i.jsx)("use",{xlinkHref:"#image1_4378_11285",transform:"matrix(0.000909091 0 0 0.00166667 -0.0454545 0)"})}),(0,i.jsxs)("filter",{id:"filter1_d_4378_11285",x:"4.51214",y:"-11.5379",width:"85.9957",height:"85.9957",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,i.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,i.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,i.jsx)("feMorphology",{radius:"6.79957",operator:"dilate",in:"SourceAlpha",result:"effect1_dropShadow_4378_11285"}),(0,i.jsx)("feOffset",{}),(0,i.jsx)("feGaussianBlur",{stdDeviation:"13.5991"}),(0,i.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.488656 0 0 0 0 0.788409 0 0 0 0 1 0 0 0 1 0"}),(0,i.jsx)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_4378_11285"}),(0,i.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_4378_11285",result:"shape"})]}),(0,i.jsxs)("filter",{id:"filter2_d_4378_11285",x:"19.4091",y:"-11.5379",width:"85.9957",height:"85.9957",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,i.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,i.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,i.jsx)("feMorphology",{radius:"6.79957",operator:"dilate",in:"SourceAlpha",result:"effect1_dropShadow_4378_11285"}),(0,i.jsx)("feOffset",{}),(0,i.jsx)("feGaussianBlur",{stdDeviation:"13.5991"}),(0,i.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.488656 0 0 0 0 0.788409 0 0 0 0 1 0 0 0 1 0"}),(0,i.jsx)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_4378_11285"}),(0,i.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_4378_11285",result:"shape"})]}),(0,i.jsxs)("filter",{id:"filter3_d_4378_11285",x:"-10.5394",y:"-26.5897",width:"85.9957",height:"85.9957",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,i.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,i.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,i.jsx)("feMorphology",{radius:"6.79957",operator:"dilate",in:"SourceAlpha",result:"effect1_dropShadow_4378_11285"}),(0,i.jsx)("feOffset",{}),(0,i.jsx)("feGaussianBlur",{stdDeviation:"13.5991"}),(0,i.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.488656 0 0 0 0 0.788409 0 0 0 0 1 0 0 0 1 0"}),(0,i.jsx)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_4378_11285"}),(0,i.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_4378_11285",result:"shape"})]}),(0,i.jsxs)("filter",{id:"filter4_d_4378_11285",x:"4.51239",y:"-26.5897",width:"85.9957",height:"85.9957",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,i.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,i.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,i.jsx)("feMorphology",{radius:"6.79957",operator:"dilate",in:"SourceAlpha",result:"effect1_dropShadow_4378_11285"}),(0,i.jsx)("feOffset",{}),(0,i.jsx)("feGaussianBlur",{stdDeviation:"13.5991"}),(0,i.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.488656 0 0 0 0 0.788409 0 0 0 0 1 0 0 0 1 0"}),(0,i.jsx)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_4378_11285"}),(0,i.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_4378_11285",result:"shape"})]}),(0,i.jsxs)("filter",{id:"filter5_d_4378_11285",x:"19.4094",y:"-26.5897",width:"85.9957",height:"85.9957",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,i.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,i.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,i.jsx)("feMorphology",{radius:"6.79957",operator:"dilate",in:"SourceAlpha",result:"effect1_dropShadow_4378_11285"}),(0,i.jsx)("feOffset",{}),(0,i.jsx)("feGaussianBlur",{stdDeviation:"13.5991"}),(0,i.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.488656 0 0 0 0 0.788409 0 0 0 0 1 0 0 0 1 0"}),(0,i.jsx)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_4378_11285"}),(0,i.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_4378_11285",result:"shape"})]}),(0,i.jsxs)("filter",{id:"filter6_d_4378_11285",x:"-10.5391",y:"-11.5379",width:"85.9957",height:"85.9957",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,i.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,i.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,i.jsx)("feMorphology",{radius:"6.79957",operator:"dilate",in:"SourceAlpha",result:"effect1_dropShadow_4378_11285"}),(0,i.jsx)("feOffset",{}),(0,i.jsx)("feGaussianBlur",{stdDeviation:"13.5991"}),(0,i.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.488656 0 0 0 0 0.788409 0 0 0 0 1 0 0 0 1 0"}),(0,i.jsx)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_4378_11285"}),(0,i.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_4378_11285",result:"shape"})]}),(0,i.jsxs)("filter",{id:"filter7_d_4378_11285",x:"-25.5906",y:"-26.5897",width:"85.9957",height:"85.9957",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,i.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,i.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,i.jsx)("feMorphology",{radius:"6.79957",operator:"dilate",in:"SourceAlpha",result:"effect1_dropShadow_4378_11285"}),(0,i.jsx)("feOffset",{}),(0,i.jsx)("feGaussianBlur",{stdDeviation:"13.5991"}),(0,i.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.488656 0 0 0 0 0.788409 0 0 0 0 1 0 0 0 1 0"}),(0,i.jsx)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_4378_11285"}),(0,i.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_4378_11285",result:"shape"})]}),(0,i.jsxs)("filter",{id:"filter8_d_4378_11285",x:"-25.5909",y:"-11.5379",width:"85.9957",height:"85.9957",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,i.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,i.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,i.jsx)("feMorphology",{radius:"6.79957",operator:"dilate",in:"SourceAlpha",result:"effect1_dropShadow_4378_11285"}),(0,i.jsx)("feOffset",{}),(0,i.jsx)("feGaussianBlur",{stdDeviation:"13.5991"}),(0,i.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.488656 0 0 0 0 0.788409 0 0 0 0 1 0 0 0 1 0"}),(0,i.jsx)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_4378_11285"}),(0,i.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_4378_11285",result:"shape"})]}),(0,i.jsx)("clipPath",{id:"clip0_4378_11285",children:(0,i.jsx)("rect",{x:"40.7627",y:"24.7129",width:"13.4945",height:"13.4945",rx:"2.5951",fill:"white"})}),(0,i.jsx)("clipPath",{id:"clip1_4378_11285",children:(0,i.jsx)("rect",{x:"55.6597",y:"24.7129",width:"13.4945",height:"13.4945",rx:"2.5951",fill:"white"})}),(0,i.jsx)("clipPath",{id:"clip2_4378_11285",children:(0,i.jsx)("rect",{x:"25.7114",y:"9.66113",width:"13.4945",height:"13.4945",rx:"2.5951",fill:"white"})}),(0,i.jsx)("clipPath",{id:"clip3_4378_11285",children:(0,i.jsx)("rect",{x:"40.7627",y:"9.66113",width:"13.4945",height:"13.4945",rx:"2.5951",fill:"white"})}),(0,i.jsx)("clipPath",{id:"clip4_4378_11285",children:(0,i.jsx)("rect",{width:"7.25582",height:"7.25582",fill:"white",transform:"translate(44.0486 12.9473)"})}),(0,i.jsx)("clipPath",{id:"clip5_4378_11285",children:(0,i.jsx)("rect",{x:"55.6597",y:"9.66113",width:"13.4945",height:"13.4945",rx:"2.5951",fill:"white"})}),(0,i.jsx)("clipPath",{id:"clip6_4378_11285",children:(0,i.jsx)("rect",{x:"25.7114",y:"24.7129",width:"13.4945",height:"13.4945",rx:"2.5951",fill:"white"})}),(0,i.jsx)("clipPath",{id:"clip7_4378_11285",children:(0,i.jsx)("rect",{x:"10.6597",y:"9.66113",width:"13.4945",height:"13.4945",rx:"2.5951",fill:"white"})}),(0,i.jsx)("clipPath",{id:"clip8_4378_11285",children:(0,i.jsx)("rect",{x:"10.6597",y:"24.7129",width:"13.4945",height:"13.4945",rx:"2.5951",fill:"white"})})]})]})}function nZ(){return(0,i.jsxs)("svg",{width:"74px",height:"45px",viewBox:"0 0 76 46",fill:"none",children:[(0,i.jsx)("rect",{width:"66",height:"36.2738",rx:"3",transform:"matrix(0.998629 -0.052336 -0.052336 -0.998629 1.89844 39.6787)",fill:"url(#pattern0_4378_11342)"}),(0,i.jsx)("rect",{width:"66",height:"36.2738",rx:"3",transform:"matrix(0.998629 -0.052336 -0.052336 -0.998629 1.89844 39.6787)",fill:"url(#pattern1_4378_11342)"}),(0,i.jsx)("rect",{width:"66",height:"36.2738",rx:"3",transform:"matrix(0.998629 -0.052336 -0.052336 -0.998629 1.89844 39.6787)",fill:"#F8D4C4"}),(0,i.jsx)("g",{filter:"url(#filter0_dd_4378_11342)",children:(0,i.jsxs)("g",{clipPath:"url(#clip0_4378_11342)",children:[(0,i.jsx)("rect",{width:"66",height:"36",rx:"3",transform:"matrix(-1 0 0 1 72.9983 6)",fill:"url(#pattern2_4378_11342)"}),(0,i.jsx)("rect",{width:"66",height:"36",rx:"3",transform:"matrix(-1 0 0 1 72.9983 6)",fill:"url(#pattern3_4378_11342)"}),(0,i.jsx)("rect",{width:"66",height:"36",rx:"3",transform:"matrix(-1 0 0 1 72.9983 6)",fill:"#FFFBEB"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M23.9114 27.9895C23.8542 28.1061 23.6358 28.1415 23.4926 28.1662C22.3258 28.3713 17.2683 28.4774 16.7815 28.0637C16.3556 27.7102 16.5918 21.933 17.007 21.6996C17.5439 21.385 23.3996 21.3249 23.8076 21.6466C24.1047 21.8906 24.2908 27.1727 23.9114 27.9895ZM23.7181 21.7208C23.3924 21.4521 17.6728 21.6537 17.1573 21.9012C16.8817 22.6295 16.7028 27.2046 16.9712 27.8551C17.4079 28.1521 22.7589 28.1415 23.6931 27.8551C24.0582 26.9889 23.9222 21.8906 23.7181 21.7208ZM38.1462 21.1021C38.2881 21.342 38.4798 21.5495 38.7086 21.7109C38.9375 21.8724 39.1984 21.9842 39.4741 22.0391C39.4825 22.0369 39.4914 22.0367 39.4999 22.0385C39.5085 22.0402 39.5165 22.0439 39.5234 22.0492C39.5303 22.0545 39.5359 22.0612 39.5397 22.069C39.5436 22.0767 39.5456 22.0852 39.5456 22.0939C39.5456 22.1025 39.5436 22.111 39.5397 22.1187C39.5359 22.1265 39.5303 22.1333 39.5234 22.1385C39.5165 22.1438 39.5085 22.1475 39.4999 22.1492C39.4914 22.151 39.4825 22.1508 39.4741 22.1487C38.8441 22.3113 38.0245 21.7456 38.0245 21.1233C38.0216 21.1074 38.0253 21.091 38.0347 21.0777C38.0441 21.0645 38.0585 21.0554 38.0746 21.0526C38.0907 21.0498 38.1073 21.0534 38.1208 21.0627C38.1342 21.072 38.1433 21.0862 38.1462 21.1021ZM41.0704 17.9378V18.2913C41.0704 18.3382 41.0516 18.3832 41.018 18.4163C40.9845 18.4495 40.9389 18.4681 40.8915 18.4681C40.8443 18.4672 40.7993 18.4483 40.7659 18.4153C40.7326 18.3824 40.7134 18.3379 40.7125 18.2913V17.9378C40.7125 17.8909 40.7314 17.8459 40.7649 17.8128C40.7985 17.7796 40.844 17.761 40.8915 17.761C40.9389 17.761 40.9845 17.7796 41.018 17.8128C41.0516 17.8459 41.0704 17.8909 41.0704 17.9378ZM37.5019 18.2736C37.5019 18.3205 37.4831 18.3655 37.4495 18.3986C37.4159 18.4318 37.3704 18.4504 37.3229 18.4504C37.2755 18.4504 37.23 18.4318 37.1964 18.3986C37.1628 18.3655 37.144 18.3205 37.144 18.2736V17.8352C37.144 17.7883 37.1628 17.7434 37.1964 17.7102C37.23 17.6771 37.2755 17.6584 37.3229 17.6584C37.3704 17.6584 37.4159 17.6771 37.4495 17.7102C37.4831 17.7434 37.5019 17.7883 37.5019 17.8352C37.5162 17.9873 37.5019 18.164 37.5019 18.2736Z",fill:"black"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16.7486 43.8508C16.7721 43.8114 16.8054 43.7785 16.8453 43.7553C17.1531 43.6068 18.8282 43.6811 19.1754 43.6952C19.1145 34.4214 24.0611 28.6371 31.2411 26.9789C32.5583 26.6749 32.5619 26.6536 32.5976 26.6749L32.841 26.0137C32.1538 25.9925 31.5919 25.4692 30.9619 25.5753C30.4859 25.6531 30.2461 26.0703 29.7772 26.2471C28.9826 26.544 27.5688 26.0879 27.1357 25.3419C26.9138 24.953 27.1106 24.55 26.971 24.2813C26.7205 24.0656 26.0082 23.7191 25.8042 23.4681C25.3854 22.9519 25.3675 21.7957 25.5572 21.1699C25.8997 20.4618 26.3662 19.819 26.9352 19.2713C27.5543 18.6821 28.1031 18.025 28.571 17.3126C29.1472 16.1777 29.1687 14.6079 29.6447 13.4234C30.1694 12.354 30.9817 11.4477 31.9928 10.8036C32.9802 10.1146 34.1708 9.76773 35.3787 9.81713C36.5062 9.88784 36.9465 10.3616 37.4726 10.5243C37.9988 10.6869 38.1097 10.5243 38.9652 10.8955C39.3048 11.0999 39.6073 11.3593 39.86 11.6627C39.9674 11.7759 39.9602 11.7829 40.1427 11.79C40.3393 11.7754 40.5367 11.7754 40.7333 11.79C41.0685 11.8635 41.389 11.9913 41.6818 12.1683C43.6755 13.3492 43.1386 15.7251 43.8902 17.4717C44.4021 18.6597 45.8266 19.8017 45.9483 21.0427C45.9914 21.6133 45.8672 22.1841 45.5904 22.6867C44.7206 24.1964 43.4715 23.012 42.8236 23.9348C42.6196 24.2247 42.4657 24.5075 42.0863 24.5641C41.6031 24.6277 40.9445 24.2494 40.5508 23.9701C40.4681 24.0654 40.3744 24.1508 40.2716 24.2247C39.9227 24.457 39.548 24.6492 39.1549 24.7975L40.064 26.0526C41.7677 25.8617 44.3842 26.4062 46.07 26.9188C46.1309 26.4945 46.6606 22.9908 47.0615 22.8211C47.6163 22.5806 53.4397 23.2489 53.7941 23.6272C54.0554 23.903 53.5865 29.1533 53.0782 29.9382C53.0031 30.0584 52.7454 30.062 52.6022 30.0655C53.4397 30.6312 54.2487 31.204 54.5386 31.4126C54.7641 30.6418 55.9488 26.5653 56.3855 25.897C56.5108 25.7026 56.6253 25.7061 57.2016 25.897C57.53 24.2782 57.9458 22.6778 58.4471 21.1028C58.2592 20.7975 58.109 20.4711 57.9997 20.1305C57.8663 19.591 57.8468 19.0301 57.9425 18.4829C57.5058 18.6278 54.8965 19.335 54.4741 19.1299C54.3607 19.0499 54.2766 18.9358 54.2343 18.8046C53.7726 17.8076 52.9816 14.4028 52.9207 13.3244C52.8957 13.1864 52.9197 13.044 52.9888 12.9214C53.4075 12.49 59.0413 10.8884 59.5173 11.1006C59.8073 11.2314 60.5911 13.7735 60.6734 14.074C61.3571 16.3403 61.0099 15.8418 61.3893 15.9726C61.826 16.1246 62.2018 17.0333 62.3557 17.454C62.5096 17.8748 62.6707 18.4405 62.4881 18.7728C62.5623 18.908 62.5921 19.0625 62.5735 19.2152C62.5549 19.3678 62.4888 19.5109 62.3843 19.6249C62.4982 19.7502 62.5724 19.9057 62.5978 20.0722C62.6232 20.2387 62.5988 20.4089 62.5275 20.5618C62.4237 20.8836 61.7759 21.0957 61.4537 21.1876C61.7081 21.8646 61.9196 22.5566 62.0873 23.2595C62.3728 24.3502 62.601 25.4548 62.7709 26.5688C62.8768 27.1101 62.9117 27.6627 62.8747 28.2128L63.4617 28.4745C63.4843 28.4847 63.5034 28.5012 63.5167 28.5219C63.5301 28.5426 63.5371 28.5666 63.5369 28.5912C63.5369 28.5912 63.4259 32.8763 61.9978 36.4366C60.2726 40.7465 57.4342 42.1891 53.114 40.5768C53.0751 40.9151 52.9908 41.2469 52.8635 41.5633C52.799 41.6764 52.5807 41.6976 52.434 41.7118C51.1633 41.7529 49.8913 41.7139 48.6256 41.5951L47.5518 48.3127C47.8418 49.14 51.1311 58.5659 51.0846 59.4428C51.0846 59.5347 51.0488 59.6054 50.8949 59.6761C49.9464 60.111 40.9588 61.2707 40.6188 60.3019C40.5329 60.065 40.3253 58.5553 40.2859 58.269L35.2284 57.7174L30.4071 58.0321C30.3552 58.5089 30.2691 58.9815 30.1494 59.4463C30.1065 59.5524 30.0564 59.609 29.9311 59.5983C29.455 59.5524 26.9173 59.0998 26.2158 58.969C23.5242 58.467 23.585 58.4245 23.6638 58.1629C23.8535 57.5442 25.6145 52.7181 26.3017 50.4659C25.2964 50.5719 24.2825 50.5719 23.2772 50.4659C23.2663 50.5042 23.2459 50.5391 23.2178 50.5676C23.1896 50.596 23.1547 50.617 23.1162 50.6285C22.4612 50.8654 16.609 50.5366 16.1294 50.0628C15.6963 49.6845 16.4229 44.3882 16.7486 43.8508ZM59.5102 11.2526C59.4708 11.1925 59.4851 11.1677 59.1702 11.2137C57.8566 11.3975 53.5614 12.7658 53.1892 13.0876C53.1176 13.8972 54.1806 18.3415 54.5994 18.8789C54.9037 18.9814 56.9224 18.4723 57.2338 18.391C59.6032 17.7793 59.5102 17.6838 60.0507 17.5601C60.3298 17.4646 60.3585 17.4611 60.3513 17.4222C60.3504 17.4135 60.3463 17.4053 60.3396 17.3995C60.333 17.3936 60.3244 17.3903 60.3155 17.3904C59.9934 17.3904 59.1308 17.3656 58.9196 17.1181C58.873 17.0678 58.8382 17.0079 58.8177 16.9428C58.7973 16.8776 58.7916 16.8088 58.8012 16.7413C58.8108 16.6737 58.8353 16.6091 58.8731 16.552C58.9109 16.4949 58.961 16.4468 59.0198 16.411C59.4798 16.229 59.9606 16.1031 60.4515 16.0362C60.5983 16.008 60.7772 15.9585 60.9562 15.9373C60.7092 14.8341 59.8932 11.8395 59.5102 11.2526ZM62.5848 28.0962V27.5482C62.5526 26.8764 62.2268 25.1121 62.1302 24.6277C61.9727 23.8428 61.9369 23.6661 61.4788 21.9619C61.4788 21.9159 61.2032 21.1558 61.2032 21.1558C61.1982 21.1426 61.1962 21.1285 61.1972 21.1145C61.1982 21.1004 61.2022 21.0868 61.209 21.0744C61.2158 21.062 61.2252 21.0512 61.2365 21.0427C61.2478 21.0342 61.2609 21.0281 61.2748 21.025C61.3141 21.025 62.2447 20.7987 62.3485 20.5052C62.4523 20.2118 62.4738 19.8582 62.2125 19.7027C62.2029 19.6958 62.1951 19.6867 62.1897 19.6763C62.1843 19.6658 62.1815 19.6543 62.1815 19.6426C62.1815 19.6308 62.1843 19.6193 62.1897 19.6088C62.1951 19.5984 62.2029 19.5893 62.2125 19.5825C62.3269 19.4897 62.4039 19.3595 62.4295 19.2155C62.4551 19.0716 62.4277 18.9233 62.3521 18.7976C62.2698 18.6314 62.7101 18.7127 62.1875 17.5212C62.055 17.2277 61.6076 16.3262 61.3034 16.2272C61.034 16.2012 60.7621 16.2313 60.5052 16.3156C60.0566 16.3854 59.6156 16.4966 59.188 16.6479C59.1609 16.6623 59.1374 16.6828 59.1195 16.7076C59.1016 16.7325 59.0898 16.7611 59.085 16.7912C59.0801 16.8213 59.0824 16.8521 59.0916 16.8813C59.1008 16.9104 59.1166 16.937 59.1379 16.959C59.2952 17.0471 59.4675 17.1058 59.6462 17.1323C60.7737 17.3515 60.5732 17.1075 60.72 17.4858C61.1507 17.4609 61.5813 17.5372 61.9763 17.7086C62.1302 17.7404 62.0658 17.8394 61.9548 17.8217C61.4753 17.6665 60.9624 17.6409 60.4694 17.7475C60.1834 17.7991 59.9038 17.8809 59.6355 17.9914C59.3921 18.0891 59.176 18.2431 59.0055 18.4405C58.9751 18.5153 58.9637 18.5963 58.9724 18.6765C58.9812 18.7566 59.0097 18.8334 59.0556 18.9001C59.1415 19.0309 59.5567 18.9425 59.7142 18.9001C59.929 18.8364 60.1545 18.7834 60.3656 18.7162C60.6627 18.6243 60.6305 18.5996 60.7236 18.6066C61.0518 18.6526 61.3729 18.7393 61.6792 18.8647C61.6879 18.8657 61.6962 18.8686 61.7036 18.8733C61.7109 18.8779 61.7171 18.8841 61.7216 18.8915C61.7262 18.8989 61.7289 18.9071 61.7297 18.9157C61.7305 18.9243 61.7293 18.9329 61.7263 18.941C61.7232 18.949 61.7183 18.9563 61.7119 18.9622C61.7055 18.9681 61.6979 18.9725 61.6896 18.975C61.6812 18.9775 61.6724 18.9781 61.6638 18.9768C61.6552 18.9755 61.647 18.9722 61.6398 18.9673C61.3657 18.8909 61.0855 18.8377 60.8023 18.8082C60.6412 18.8082 60.745 18.8082 60.3406 18.9673C60.158 19.0344 59.9826 19.0875 59.7894 19.1511C59.665 19.1932 59.5367 19.2228 59.4064 19.2395C59.1773 19.4516 59.0127 19.9466 59.3205 20.035C59.4414 20.0556 59.5658 20.0409 59.6784 19.9926C60.4981 19.7274 59.9433 19.5365 61.7222 19.8971C61.7367 19.8989 61.75 19.9061 61.7594 19.9173C61.7687 19.9285 61.7733 19.9428 61.7723 19.9572C61.7723 20.0492 61.7114 19.9926 60.7271 19.9572C60.6081 19.9454 60.4882 19.9454 60.3692 19.9572C60.0614 20.1128 59.6032 20.378 59.2489 20.2754C58.8158 20.1375 58.8301 19.6638 59.1093 19.3173C59.2095 19.1971 59.2203 19.2324 59.1344 19.2183C59.0715 19.2116 59.0108 19.1921 58.956 19.161C58.9012 19.13 58.8534 19.0881 58.8158 19.038C58.731 18.9225 58.6836 18.7843 58.6798 18.6417C58.676 18.4991 58.7159 18.3587 58.7943 18.2389L58.193 18.4157C58.074 18.9633 58.0838 19.5306 58.2216 20.0739C58.26 20.2065 58.3103 20.3355 58.372 20.4593C58.6333 21.0038 58.7299 21.0214 58.6977 21.124C58.2003 22.7215 57.7905 24.3443 57.47 25.9854C58.8194 26.4521 61.2927 27.5269 62.5848 28.0962ZM34.262 52.665C32.7301 52.7287 29.4371 52.8454 27.9267 52.7994C28.0305 53.2449 28.0949 53.5277 28.1128 53.5914C28.8323 53.5914 33.4817 52.7959 34.262 52.665ZM27.3469 52.4847C28.3061 52.7075 40.7584 52.2266 41.825 51.7776C41.714 50.9856 40.6689 46.5343 40.4577 45.6257C39.5183 45.9097 38.541 46.0528 37.5585 46.0499C37.2006 46.2338 36.61 46.552 36.2557 46.7182C36.295 47.0187 36.3917 47.7293 36.1769 47.9415C35.9622 48.1536 31.0192 49.9462 26.6847 50.4482C26.8595 51.1408 27.0808 51.8211 27.3469 52.4847ZM40.5723 43.9745C40.7371 43.9251 40.8895 43.842 41.0197 43.7306C41.1127 43.6316 41.0805 43.3311 41.0197 43.1896C40.9864 43.1209 40.9273 43.0676 40.855 43.0411C40.7676 43.0036 40.6745 42.9809 40.5794 42.974C40.551 42.9733 40.5234 42.9641 40.5005 42.9476C40.4775 42.931 40.4602 42.9079 40.4508 42.8814C40.4415 42.8549 40.4406 42.8262 40.4482 42.7991C40.4558 42.7721 40.4716 42.7479 40.4935 42.73C40.7029 42.5558 40.8487 42.3186 40.9087 42.0547C40.9087 41.8603 40.8335 41.6587 40.5186 41.4819C40.1606 41.5102 39.0869 42.3871 38.5893 41.8815C38.0918 41.3759 38.6788 40.1915 38.124 40.0925C37.5693 39.9935 37.2901 41.641 37.1934 41.8214C36.8713 42.4401 36.0051 42.882 35.5112 43.3912C35.8095 44.445 36.0484 45.5144 36.227 46.5944C36.9429 46.2161 37.4726 45.8873 37.5263 45.8873C38.2744 45.8625 40.2823 45.6575 40.8049 45.1307C40.8978 45.0598 40.9615 44.9578 40.9839 44.844C41.0063 44.7301 40.9859 44.6121 40.9266 44.512C40.8885 44.4455 40.8372 44.3874 40.7756 44.3412C40.7141 44.295 40.6437 44.2617 40.5687 44.2432C40.538 44.2358 40.5108 44.2184 40.4915 44.1937C40.4721 44.1691 40.4618 44.1387 40.4622 44.1075C40.4627 44.0763 40.4738 44.0462 40.4937 44.022C40.5137 43.9979 40.5414 43.9811 40.5723 43.9745ZM36.585 32.201C37.2499 32.1382 37.9179 32.1122 38.5858 32.1232C38.6717 32.1232 38.7433 32.1656 38.7683 32.247C38.8292 32.4732 39.8421 39.8273 39.8922 40.1879C40.107 36.6523 40.3289 32.9293 40.4935 30.1999C39.2479 32.1621 39.1406 32.3566 38.9437 32.2187C38.28 31.6795 37.6523 31.0985 37.0646 30.4792C36.9572 30.8716 36.7854 31.5116 36.585 32.201ZM33.3099 30.96C33.5533 30.6064 33.7931 30.2529 33.8826 30.1221L32.7265 27.2476L33.3099 30.96ZM32.476 26.9011C31.1222 27.1769 29.8022 27.5953 28.5388 28.1492C28.5924 28.3154 29.2832 30.4014 30.1101 32.8904C30.4895 32.8445 32.6621 32.5828 33.3314 32.5121L32.476 26.9011ZM33.9399 30.5145L33.3743 31.356L33.5533 32.4874L34.1081 32.4167C34.0258 31.6494 33.9685 30.9211 33.9399 30.5145ZM24.0575 34.2446C24.062 34.7049 24.1075 35.1639 24.1935 35.6164C25.4212 35.3053 36.1304 32.7031 37.2185 33.3147C37.7625 33.6258 39.5522 40.8809 39.724 41.535L39.8528 41.4713C39.2873 37.5433 38.5357 32.3919 38.5357 32.3778C37.3151 32.2399 25.5572 33.5551 24.0575 34.2446ZM30.3033 41.6375C31.1051 41.5845 34.2871 41.4289 34.9564 41.8673C35.0602 41.938 35.1031 41.9522 35.4718 43.2603C35.9478 42.7618 36.746 42.2916 37.0145 41.7365C37.1362 41.4925 37.333 39.7106 38.167 39.8485C39.2909 40.0359 37.8556 42.3234 39.5164 41.6163C39.409 41.1673 37.648 33.6789 37.1576 33.4031C36.1196 32.8197 24.7984 35.6659 23.3667 36.0654C23.449 36.9281 24.5013 41.5314 24.6946 42.3729C26.5483 42.0211 28.421 41.7755 30.3033 41.6375ZM35.8154 16.906C35.615 17.0404 35.6221 17.3621 35.6579 17.5954C35.9085 19.1759 37.512 20.134 38.6251 18.6208C38.8793 18.2672 39.0761 17.1429 38.9043 16.8954C38.7898 16.7504 37.8663 16.7434 37.6802 16.7434C37.3366 16.7469 35.9944 16.7999 35.8297 16.906H35.8154ZM40.0783 17.1606C40.0783 17.8253 40.3038 18.9284 40.9016 19.2466C41.8644 19.7416 42.8415 18.9567 42.8666 17.9349C42.9033 17.5618 42.8852 17.1855 42.8129 16.8176L42.7771 16.7999C42.8344 16.7009 40.3181 16.6691 40.0926 16.8919C40.085 16.9813 40.085 17.0712 40.0926 17.1606H40.0783ZM38.8327 24.8576C38.2135 25.0343 37.2149 24.9495 36.7353 24.4651C36.7252 24.4546 36.7196 24.4407 36.7196 24.4262C36.7196 24.4118 36.7252 24.3978 36.7353 24.3873C36.8176 24.2883 36.7353 24.4793 37.6659 24.6171C38.5965 24.755 39.1585 24.6171 40.0998 24.0126C40.5325 23.6199 40.8565 23.1246 41.0411 22.5736C41.4265 21.641 41.6679 20.6566 41.757 19.6532C41.4201 19.7077 41.0744 19.6518 40.7727 19.4941C40.4798 19.3249 40.2529 19.0634 40.1284 18.7516C40.2492 19.1252 40.3484 19.5053 40.4255 19.89C40.4423 19.9393 40.4448 19.9922 40.4328 20.0428C40.4208 20.0934 40.3947 20.1397 40.3575 20.1764C40.11 20.3259 39.8186 20.3882 39.5307 20.3532C39.5222 20.3554 39.5134 20.3556 39.5048 20.3538C39.4963 20.352 39.4883 20.3484 39.4814 20.3431C39.4745 20.3378 39.4689 20.331 39.4651 20.3233C39.4612 20.3155 39.4592 20.307 39.4592 20.2984C39.4592 20.2898 39.4612 20.2813 39.4651 20.2735C39.4689 20.2658 39.4745 20.259 39.4814 20.2537C39.4883 20.2484 39.4963 20.2448 39.5048 20.243C39.5134 20.2413 39.5222 20.2415 39.5307 20.2436C39.743 20.2203 39.948 20.1528 40.132 20.0456C40.2143 19.989 40.1785 20.0244 40.1535 19.9077C40.1284 19.7911 39.6631 18.1046 39.6381 17.9985C39.5271 17.9985 39.1048 17.9419 39.1048 17.8394C39.1048 17.7369 39.4412 17.7086 39.5665 17.7157C39.5665 17.6697 39.545 17.6308 39.5343 17.5954C39.5286 17.5814 39.5288 17.5657 39.5348 17.5517C39.5409 17.5378 39.5522 17.5268 39.5665 17.5212C39.5807 17.5156 39.5966 17.5158 39.6107 17.5217C39.6248 17.5277 39.636 17.539 39.6416 17.553C39.7669 17.7934 39.681 17.705 39.8492 17.7475C39.7847 17.4206 39.7847 17.0844 39.8492 16.7575C40.0533 16.4464 41.281 16.5171 41.6818 16.5418C41.4778 15.3574 40.6832 14.774 40.1964 13.8265C40.0601 13.6066 39.8783 13.4174 39.6631 13.2714C39.5557 13.2431 39.3446 13.5083 39.2157 13.5719C39.0869 13.6356 38.9652 13.9856 38.8578 14.1058C38.5202 14.4855 38.1311 14.8175 37.7017 15.0922C37.3438 15.3433 36.7854 15.3822 36.542 15.7039C36.4392 15.9775 36.3894 16.2677 36.3953 16.5595C36.857 16.5312 38.7826 16.5029 39.0117 16.8282C39.2193 17.0899 39.1298 18.2849 38.8256 18.7445C38.0596 19.89 36.882 19.9608 35.9622 18.9284C35.8633 18.8065 35.7792 18.6736 35.7116 18.5324C35.0244 19.5931 34.4839 20.2259 34.4589 21.4705C34.4302 23.0473 34.8812 25.6601 33.1524 25.989L32.8554 26.7986C34.2871 30.3554 34.2119 30.1327 34.2119 30.168C34.2119 30.2034 34.2799 31.2287 34.4052 32.4025C35.0924 32.3318 35.7331 32.2717 36.3022 32.2257C36.3451 32.0808 36.8785 30.2069 36.8677 30.168C36.814 29.9913 37.0825 29.6448 37.2901 29.3372C38.0686 28.2238 38.9186 27.1609 39.8349 26.1551L38.8327 24.8576ZM40.0926 26.2506C40.0318 26.3425 37.4547 29.1427 37.1397 30.1716C37.7188 30.8056 38.3445 31.3965 39.0117 31.9394C39.2515 31.6282 39.8994 30.6029 40.515 29.6448C40.6259 27.7956 40.7011 26.5087 40.719 26.24C40.5186 26.2258 40.2931 26.2364 40.107 26.2506H40.0926ZM52.8742 29.7862C53.2823 29.0791 53.8478 24.4828 53.7153 23.7757C53.7153 23.712 53.7153 23.6908 53.4147 23.6095C52.1333 23.2807 47.6377 22.9024 47.1653 23.0615C46.8074 23.7509 46.0235 28.2517 46.2096 28.9447C46.5747 29.2346 51.8219 29.9665 52.8885 29.7862H52.8742ZM52.6237 41.4183C53.0353 40.6193 53.3395 35.4962 53.1355 35.3017C52.8313 35.0118 47.1187 34.7643 46.5783 34.9729C46.2204 35.7154 45.7121 40.2763 45.9233 40.895C46.4101 41.2557 51.779 41.6092 52.638 41.4183H52.6237ZM44.4522 35.4926C44.1945 35.4255 42.3977 34.9729 42.1829 34.8456C42.029 34.7572 41.8536 35.0436 44.8638 26.8835C44.5059 26.5582 41.3776 26.141 40.8837 26.293C40.8837 26.4875 40.4148 34.7396 40.0461 41.3617C40.2215 41.2769 40.4756 41.1461 40.6367 41.2345C41.3096 41.588 41.3525 42.1749 40.855 42.7477C40.9479 42.7702 41.0342 42.8139 41.107 42.8753C41.1797 42.9367 41.2368 43.0141 41.2738 43.1012C41.3312 43.234 41.3556 43.3783 41.345 43.5222C41.3344 43.6661 41.2891 43.8055 41.2129 43.9286C41.1295 44.0075 41.0341 44.0731 40.9302 44.123C41.0371 44.1938 41.1215 44.2931 41.1736 44.4094C41.2205 44.5096 41.2484 44.6175 41.2559 44.7276L44.4522 35.4926ZM35.5434 57.4947L40.2179 58.0073C40.1964 57.8376 39.6703 53.7399 39.5021 52.3504C38.5285 52.4352 37.3545 52.5095 36.0982 52.5766C35.8906 55.1258 35.5255 56.8865 35.5577 57.4947H35.5434ZM35.2964 57.4664C35.2463 56.6603 35.9192 52.6191 35.9228 52.5837L35.5649 52.6014C34.3479 52.8241 31.2125 53.3722 30.8724 53.4287C30.7579 54.5672 30.4716 57.2189 30.4036 57.7634C35.7402 57.424 35.164 57.4522 35.3143 57.4664H35.2964ZM16.3048 49.9002C16.6627 50.183 21.9207 50.6568 23.0052 50.4235C23.424 49.6209 23.7211 44.5013 23.517 44.3069C23.2092 44.0134 17.4967 43.773 16.9634 43.9781C16.6269 44.717 16.1079 49.2956 16.3191 49.9002H16.3048Z",fill:"black"})]})}),(0,i.jsxs)("defs",{children:[(0,i.jsx)("pattern",{id:"pattern0_4378_11342",patternContentUnits:"objectBoundingBox",width:"1",height:"1",children:(0,i.jsx)("use",{xlinkHref:"#image0_4378_11342",transform:"matrix(0.00083331 0 0 0.00145829 0 -0.000923572)"})}),(0,i.jsx)("pattern",{id:"pattern1_4378_11342",patternContentUnits:"objectBoundingBox",width:"1",height:"1",children:(0,i.jsx)("use",{xlinkHref:"#image1_4378_11342",transform:"matrix(0.000916004 0 0 0.00166667 -0.0496025 0)"})}),(0,i.jsxs)("filter",{id:"filter0_dd_4378_11342",x:"3.99829",y:"4",width:"72",height:"42",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,i.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,i.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,i.jsx)("feOffset",{dy:"1"}),(0,i.jsx)("feGaussianBlur",{stdDeviation:"1.5"}),(0,i.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.15 0"}),(0,i.jsx)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_4378_11342"}),(0,i.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,i.jsx)("feOffset",{}),(0,i.jsx)("feGaussianBlur",{stdDeviation:"0.25"}),(0,i.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0"}),(0,i.jsx)("feBlend",{mode:"normal",in2:"effect1_dropShadow_4378_11342",result:"effect2_dropShadow_4378_11342"}),(0,i.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect2_dropShadow_4378_11342",result:"shape"})]}),(0,i.jsx)("pattern",{id:"pattern2_4378_11342",patternContentUnits:"objectBoundingBox",width:"1",height:"1",children:(0,i.jsx)("use",{xlinkHref:"#image0_4378_11342",transform:"matrix(0.00083331 0 0 0.00145829 0 -0.000923572)"})}),(0,i.jsx)("pattern",{id:"pattern3_4378_11342",patternContentUnits:"objectBoundingBox",width:"1",height:"1",children:(0,i.jsx)("use",{xlinkHref:"#image1_4378_11342",transform:"matrix(0.000909091 0 0 0.00166667 -0.0454545 0)"})}),(0,i.jsx)("clipPath",{id:"clip0_4378_11342",children:(0,i.jsx)("rect",{width:"66",height:"36",rx:"3",transform:"matrix(-1 0 0 1 72.9983 6)",fill:"white"})}),(0,i.jsx)("image",{id:"image0_4378_11342",width:"1200",height:"687"}),(0,i.jsx)("image",{id:"image1_4378_11342",width:"1200",height:"600"})]})]})}function nJ({type:e}){let{navigateToVisualAssets:t}=(0,I.wV)(),n=(0,ej.sN)(),a=s.useCallback(e=>{n("visualAssetPacks",e)},[n]),r=s.useCallback(()=>{a(t(e))},[t,a,e]);return(0,i.jsx)("div",{className:"asset_panel_visual_asset_packs--assetPanelRow--zIB-D",children:(0,i.jsx)("button",{onClick:r,className:"asset_panel_visual_asset_packs--assetPackContainer--hci-7",children:(0,i.jsx)(nQ,{type:e})})})}function nQ({type:e}){let t=e===I.G3.IconSets?(0,i.jsx)(nY,{}):(0,i.jsx)(nZ,{}),n=e===I.G3.IconSets?(0,f.t)("design_systems.assets_panel.icon_sets"):(0,f.t)("design_systems.assets_panel.illustrations");return(0,i.jsxs)("div",{className:"asset_panel_visual_asset_packs--assetPack--cBQV4",children:[t,(0,i.jsx)("h3",{className:"asset_panel_visual_asset_packs--title--NDdZn ellipsis--ellipsis--Tjyfa",children:n})]})}var n$=n(152095);let n0=(0,er.jz)(ey.RU)+1,n1=(0,er.jz)(ey.nT),n2=16/9;function n3({sidebarWidth:e,minCardWidth:t=180,previewPadding:n=n0,widthToHeightRatio:i=n2,rowPadding:a=n1}){let r=e-2*a,l=s.useMemo(()=>(0,n$.BE)({elementMinSize:t,spaceAvailable:r,gap:0}),[t,r]),o=s.useMemo(()=>(0,n$.y5)({numElements:l,spaceAvailable:r,gap:0}),[l,r]),d=s.useMemo(()=>o-2*n,[o,n]),c=s.useMemo(()=>(0,n$.hg)({width:d,widthToHeightRatio:i}),[d,i]);return s.useMemo(()=>({cardWidth:o,previewWidth:d,previewHeight:c,numColumns:l}),[o,d,c,l])}var n5=n(46329),n4=n(757396);let n6="asset_panel_libraries--row--nHi0j",n7="asset_panel_libraries--libraryPrimaryButton--hs6a7",n8=(0,er.jz)(ey.YJ),n9=(0,er.jz)(ey.RQ),ie=(0,er.jz)(ey.ce),it=(0,er.jz)(ey.Kv),ii=(0,er.jz)(ey.PK),is=(0,er.jz)(ey.vr),ia=(0,er.jz)(ey.CT)+16;function ir({width:e,hideScrollbar:t,localAssets:n}){let{libraries:s,presets:a,siteLibraries:r,librariesForConnectedProject:l}=(0,n4.g)(),o=(0,n5.I)(),d=(0,eA.md)(I.aK)===I.t6.Blocks;return o?(0,i.jsx)("div",{style:{width:e},children:(0,i.jsx)(t5.od,{})}):d?(0,i.jsx)(ic,{siteLibraries:r,hideScrollbar:t,width:e}):(0,i.jsx)(il,{localAssets:n,subscribedLibraries:s,librariesForConnectedProject:l,presetLibraries:a,hideScrollbar:t,width:e})}function il({localAssets:e,subscribedLibraries:t,presetLibraries:n,librariesForConnectedProject:a,width:r,hideScrollbar:l}){let{librariesScrollTop:o,handleScrollLibraries:d}=eR(),c=!!(0,b.GM)()(),{currentView:u}=(0,I.wV)(),[p]=(0,ew.MA)(),m=(0,eA.md)(t3.Jc),h=(0,t3.Y1)(),g=c?ew.$H.LIST:p,{cardWidth:x,previewHeight:_,numColumns:y}=n3({sidebarWidth:r}),C=g===ew.$H.GRID?y:1,j="grid"===g?n8+_+2:it,k=t.length>0,w=e.numComponents+e.numTemplates>0,E=n.length>0,T=a.length>0,S=T&&(k||w),N=E&&(T||k||w),A=s.useMemo(()=>{let s=[];h&&(s.push({element:(0,i.jsx)(t3.WC,{}),key:"asset_suggestions",height:m}),s.push({element:(0,i.jsx)(t6.Q,{page:void 0}),key:"breadcrumb",height:ie}));let r=[];w&&r.push(e),k&&r.push(...t);for(let e=0;e<r.length;e+=C){let t=r.slice(e,e+C);s.push({element:(0,i.jsx)("div",{className:n6,children:t.map((t,n)=>(0,i.jsx)(nK,{library:t,keyboardSection:en.gP.LOCAL_AND_SUBSCRIBED,rowIndex:e,columnIndex:n,cardWidth:x,previewHeight:_},t.libraryKey))}),key:t.map(e=>e.libraryKey).join("-"),keys:t.map(e=>e.libraryKey),height:j})}S&&(s.push({element:(0,i.jsx)(eS.cG,{}),key:"connected_project_divider",height:n9}),s.push({element:(0,i.jsx)(eS.X3,{title:(0,f.t)("design_systems.libraries_modal.connected_project_libraries")}),key:"connected_project_header",height:ie}));for(let e=0;e<a.length;e+=C){let t=a.slice(e,e+C);s.push({element:(0,i.jsx)("div",{className:n6,children:t.map((t,n)=>(0,i.jsx)(nK,{library:t,keyboardSection:en.gP.LOCAL_AND_SUBSCRIBED,rowIndex:e,columnIndex:n,cardWidth:x,previewHeight:_},t.libraryKey))}),key:t.map(e=>e.libraryKey).join("-"),keys:t.map(e=>e.libraryKey),height:j})}N&&(s.push({element:(0,i.jsx)(eS.cG,{}),key:"presets_divider",height:n9}),s.push({element:(0,i.jsx)(eS.X3,{title:(0,f.t)("design_systems.assets_panel.ui_kits")}),key:"preset_libraries_header",height:ie}));for(let e=0;e<n.length;e+=C){let t=n.slice(e,e+C);s.push({element:(0,i.jsx)("div",{className:n6,children:t.map((t,n)=>(0,i.jsx)(nK,{library:t,keyboardSection:en.gP.PRESETS,rowIndex:e,columnIndex:n,cardWidth:x,previewHeight:_},t.libraryKey))}),key:t.map(e=>e.libraryKey).join("-"),keys:t.map(e=>e.libraryKey),height:j})}return c&&(s.push({element:(0,i.jsx)(eS.cG,{}),key:"va_packs_divider",height:n9}),s.push({element:(0,i.jsx)(eS.X3,{title:(0,f.t)("design_systems.assets_panel.assets_from_community"),onboardingKey:v.Bs}),key:"visual_assets_header",height:ie}),s.push({element:(0,i.jsx)(nJ,{type:I.G3.IconSets}),key:"visual_assets_icon_sets",height:is}),s.push({element:(0,i.jsx)(nJ,{type:I.G3.Illustrations}),key:"visual_assets_illustrations",height:is})),s.push(c?{element:(0,i.jsx)(id,{}),key:"browse_more_assets_button",height:ii}:{element:(0,i.jsx)(io,{}),key:"add_more_libraries_button",height:ii}),s},[h,w,k,N,c,m,j,C,_,x,e,t,S,a,n]);return(0,i.jsx)(eI.wl,{elements:A,hideScrollbar:l,initialScrollTop:o,onScroll:d,anchorScroll:u===I.S5.Libraries})}function io(){let{onToggleLibraryModal:e}=(0,t2.u)({entrypoint:t4.r6.ASSETS_PANEL_ADD_MORE_LIBRARIES,modalType:"editor",initialTab:eF.Wv.RECOMMENDED});return(0,i.jsx)("div",{className:n7,children:(0,i.jsx)(t$.$n,{variant:"secondary",onClick:e,recordingKey:"assetsLibrary.addMoreLibraries",children:(0,f.tx)("design_systems.assets_panel.add_more_libraries")})})}function id(){return(0,i.jsx)(q.o3,{trackingEventName:"cmty_category",trackingProperties:{name:"visual_assets_browse_more_assets_clicked",text:"Browse more assets"},to:new t1.$E({categorySlug:t0.LJ.icons}).to,className:n7,target:"_blank",children:(0,i.jsx)(t$.$n,{variant:"secondary",recordingKey:"assetsLibrary.browseMoreAssets",children:(0,f.tx)("design_systems.assets_panel.browse_more_assets")})})}function ic({siteLibraries:e,width:t,hideScrollbar:n}){let{librariesScrollTop:a,handleScrollLibraries:r}=eR(),l=s.useRef(null),{cardWidth:o,previewHeight:d}=n3({sidebarWidth:t}),{libraryKeys:c}=(0,eA.md)(e0.AS),u=c.length+1,{flyout:p,...m}=function(e,t){let n=(0,s.useRef)(new Map),a=(0,s.useRef)(null),r=(0,s.useRef)(null),[l,o]=(0,eA.fp)(nF),d=l?.key,[c,u]=(0,s.useState)(!1),{setSafePolygon:p,isInSafePolygon:m,cursorXSpeedRef:h}=function(){let e=(0,s.useRef)(null),t=(0,s.useCallback)(t=>{e.current=t},[]),n=function(){let e=(0,s.useRef)(0),t=(0,s.useRef)(null),n=(0,s.useRef)(null),i=(0,s.useRef)(null);return(0,s.useEffect)(()=>{let s=s=>{let a=s.clientX,r=s.timeStamp;if(t.current&&n.current){let i=t.current,s=r-n.current;s>0&&(e.current=(a-i)/s)}t.current=a,n.current=r,i.current&&clearTimeout(i.current),i.current=setTimeout(()=>{e.current=0},50)};return document.addEventListener("mousemove",s),()=>{document.removeEventListener("mousemove",s),i.current&&clearTimeout(i.current)}},[]),e}();return{setSafePolygon:t,isInSafePolygon:(0,s.useCallback)(t=>!!e.current&&function(e,t){let[n,i]=e,s=!1,a=t.length;for(let e=0,r=a-1;e<a;r=e++){let[a,l]=t[e]||[0,0],[o,d]=t[r]||[0,0];l>=i!=d>=i&&n<=(o-a)*(i-l)/(d-l)+a&&(s=!s)}return s}(t,e.current)&&n.current>.1,[n]),cursorXSpeedRef:n}}(),f=(0,s.useRef)(null),g=s.useCallback(()=>{o(null),u(!1),p(null),a.current&&(clearTimeout(a.current),a.current=null)},[o,p]);(0,s.useEffect)(()=>{let t=t=>{let i=t.target;d&&n.current.get(d)?.contains(i)||e?.current?.contains(i)||g()};return document.addEventListener("pointerdown",t),()=>{document.removeEventListener("pointerdown",t)}},[e,g,d]);let x=(0,s.useCallback)((e,t)=>{if(f.current&&(clearTimeout(f.current),f.current=null),r.current=null,d===t){let i=n.current.get(t)?.getBoundingClientRect();i&&p([[e.clientX-1,e.clientY],[i.left,i.top],[i.left,i.bottom]])}else a.current&&(clearTimeout(a.current),a.current=null)},[d,p]),_=(0,s.useCallback)(()=>{a.current&&(clearTimeout(a.current),a.current=null)},[]),y=s.useCallback(()=>p(null),[p]),v=s.useCallback(()=>null!==l&&(g(),!0),[l,g]);(0,ne.O1)(v,ne.KD.OVERLAY);let[b,C]=(0,s.useState)(null);return(0,s.useEffect)(()=>{let e=[...t,nD.Yl];C((0,i.jsx)(i.Fragment,{children:e.map(e=>(0,i.jsx)(nS,{hide:d!==e,onMouseEnter:y,onMouseLeave:_,libraryKey:e,ref:t=>n.current.set(e,t),onDragStart:c?void 0:g},e))}))},[t,d,x,g,y,_,c]),{flyout:b,onMouseEnter:(e,t)=>{if(r.current=t,!c&&!a.current){a.current=setTimeout(()=>{o({key:t,persisted:c})},200);return}if(!c){if(m([e.clientX,e.clientY]))return;o({key:t,persisted:c})}},onMouseLeave:x,onClick:e=>{if(e===d&&c){g();return}o({key:e,persisted:!0}),u(!0),p(null),a.current&&clearTimeout(a.current)},onMouseMove:(e,t)=>{f.current&&(clearTimeout(f.current),f.current=null),!c&&d&&d!==t&&(m([e.clientX,e.clientY])?(f.current&&clearTimeout(f.current),f.current=setTimeout(()=>{0===h.current&&o({key:t,persisted:c})},100)):o({key:t,persisted:c}))}}}(l,c),h=s.useMemo(()=>{if("disabled"!==e.status){let t=e.data??[];return 0===t.length?Array.from({length:u},(e,t)=>({element:(0,i.jsx)(eC,{keyPrefix:"blocks",name:"",recordingKey:"assetsLibrary.siteKitLoading",disabled:!1,variant:"preview-no-padding"}),key:`site kit loading-${t}`,keys:[`site kit loading-${t}`],height:ia})):t.map((e,t)=>({element:(0,i.jsx)(nK,{cardWidth:o,columnIndex:1,flyoutHandlers:m,folderVariant:"preview-no-padding",isFolderView:!0,keyboardSection:en.gP.SITE_KIT,library:e,previewHeight:d,rowIndex:t},e.libraryKey),key:e.libraryKey,keys:[e.libraryKey],height:ia}))}return[]},[e.status,e.data,u,d,o,m]);return(0,i.jsxs)("div",{ref:l,children:[(0,i.jsx)(eI.wl,{elements:h,hideScrollbar:n,initialScrollTop:a,onScroll:r,anchorScroll:!0}),p]})}function iu({page:e,index:t}){let n=(0,ej.sN)(),[a]=(0,ew.MA)(),{navigateToPage:r,libraryKey:o,currentView:d}=(0,I.wV)(),c=s.useCallback(()=>{n("pageRow",r(e.id))},[n,r,e.id]),u=e.id,p=d!==I.S5.Pages,{keyboardNavigationItem:m,setKeyboardNavigationElement:h}=(0,ed.M3)({path:[en.ON.CONTENTS,en.lM.PAGES,t],id:e.id,disabled:p}),{focusFirstItem:f,focusSearchBar:g}=(0,ek.rl)();(0,ek.C0)(m,d===I.S5.Pages&&0===t);let _=(0,ek.MB)({onBoth:c,onKeyDown:f,onClick:g}),y=function(e,t){let n=(0,x.q5)(),i=(0,z.wA)(),a=e===n?.libraryKey,r=e&&!!t,o=(0,tR.b)({libraryKey:e,nodeId:t}),d=s.useMemo(()=>{if(o.data?.type==="team")return o.data.link},[o]),c=s.useCallback(()=>(0,tW.getActiveTSSceneGraph)().setCurrentPageAsync(t??""),[t]),u=s.useCallback(()=>{l.az.trackDefinedEvent("assets_panel.go_to_page",{libraryKey:e??"",pageId:t,fileKey:n?.key,fileTeamId:n?.teamId??void 0,fileOrgId:n?.parentOrgId??void 0,isLocal:a})},[a,e,n?.key,n?.parentOrgId,n?.teamId,t]),p=s.useCallback(()=>{c(),u()},[c,u]),m=s.useCallback(()=>{l.az.trackDefinedEvent("assets_panel.open_page_context_menu",{libraryKey:e??"",pageId:t,fileKey:n?.key,fileTeamId:n?.teamId??void 0,fileOrgId:n?.parentOrgId??void 0})},[e,n?.key,n?.parentOrgId,n?.teamId,t]),h=(0,ee.fd)(e);return s.useCallback(e=>{r&&!h&&(e.preventDefault(),e.stopPropagation(),i((0,tO.j7)({type:tq,data:{libraryPageHref:d,pageId:t,isLocalLibrary:a,onClickLocalPage:p,onClickSubscribedPage:u,position:{top:e.clientY,left:e.clientX}}})),m())},[r,h,i,d,t,a,p,u,m])}(o,e.id),v=s.useMemo(()=>"list"===a?"icon":"preview",[a]),b={pageId:e.id,libraryKey:o||""};return(0,i.jsx)(eC,{ref:h,disabled:p,keyPrefix:u,name:e.name,onClick:_,onContextMenu:y,pageInfo:b,previewAssetOrUrl:e.previewAsset,recordingKey:`assetsPage.${e.id}`,variant:v})}var ip=n(328341),im=n(698266);let ih="performance.ds_eco.asset_panel_pages_view_loading",ig=new im.jk(ih,{});function ix({didFinishLoading:e}){let t=ig.stop();(0,l.sx)(ih,{elapsedMs:t,isNewAssetPanelFetch:!0,didFinishLoading:e},{forwardToDatadog:!0})}var i_=n(736813);let iy=(0,er.jz)(ey.Mj),iv=(0,er.jz)(ey.$c),ib=(0,er.jz)(ey.d5),iC=2*iy,ij=(0,er.jz)(ey.Kd),ik=(0,er.jz)(ey.y4),iw=(0,er.jz)(ey.Gd),iE=(0,er.jz)(ey.xP);function iT({page:e,thumbWidth:t,thumbHeight:n,row:a,column:r}){let l=(0,ej.sN)(),{navigateToPage:o,currentView:d}=(0,I.wV)(),c=s.useCallback(()=>{l("pageRow",o(e.id))},[l,o,e.id]),u=d!==I.S5.Pages,{keyboardNavigationItem:p,setKeyboardNavigationElement:m}=(0,ed.M3)({path:[en.ON.CONTENTS,en.lM.PAGES,a],column:r,id:e.id,disabled:u}),{focusFirstItem:f,focusSearchBar:g}=(0,ek.rl)();(0,ek.C0)(p,d===I.S5.Pages&&0===a&&0===r);let x=(0,ek.MB)({onBoth:c,onKeyDown:f,onClick:g}),{widthForCentering:_,textRef:y,iconRef:v}=function(e){let[t,n]=s.useState(void 0),i=s.useCallback(e=>n(e?.scrollWidth),[]),[a,r]=s.useState(void 0);return{textRef:i,iconRef:s.useCallback(e=>r(e?.scrollWidth),[]),widthForCentering:s.useMemo(()=>t&&a?Math.max(Math.min(e-(t+a)-1,a),0):-1,[a,t,e])}}(t),b=(0,en.AZ)(e)?e.embeds[0]?.thumbnail_url:e.previewAsset;return(0,i.jsxs)(ec.E,{className:"site_kit_pages--tile--GWdsc",onClick:x,ref:m,"aria-label":e.name,disabled:u,children:[b?(0,i.jsx)(ef.V,{previewAssetOrUrl:b,type:"no-padding",height:n,width:t,keyPrefix:e.id}):(0,i.jsx)("div",{className:e_,style:{height:n,width:t}}),(0,i.jsx)("div",{className:h.s.flex.flexColumn.itemsCenter.wFull.$,style:{width:t},children:(0,i.jsxs)("span",{className:"site_kit_pages--pageName--ARhz3 site_kit_pages--text--gyBIU",children:[_>0&&(0,i.jsx)("div",{className:h.s.flexShrink0.$,style:{width:_}}),(0,i.jsx)(eU.G,{text:e.name,ref:y}),(0,i.jsx)("div",{className:"site_kit_pages--chevron--MPDzd",ref:v,children:(0,i.jsx)(i_.k,{})})]})})]})}let iS=(0,er.jz)(ey.RQ),iI=(0,er.jz)(ey._q),iN=(0,er.jz)(ey.HE);function iA({library:e,width:t,hideScrollbar:n,isLoading:a}){!function({isLoading:e}){let{currentView:t}=(0,I.wV)(),n=(0,ip.ZC)(t);s.useEffect(()=>(n===I.S5.Libraries&&t===I.S5.Pages&&ig.start(),t===I.S5.Pages&&!e&&ig.isRunning&&ix({didFinishLoading:!0}),()=>{n===I.S5.Pages&&t!==I.S5.Pages&&ig.isRunning&&ix({didFinishLoading:!1})}),[e,t,n])}({isLoading:a});let[r]=(0,ew.MA)(),{pagesScrollTop:l,handleScrollPages:o}=eR({libraryKey:e?.libraryKey}),d=s.useMemo(()=>e?Array.from(e.pages):[],[e]),c=(0,ee.fd)(e?.libraryKey),{thumbWidth:u,thumbHeight:p,numColumns:m}=function(){let{width:e}=(0,ez.G)(),t=s.useMemo(()=>e-iC,[e]),n=Math.max(Math.min(3,(0,n$.BE)({elementMinSize:98,gap:ij,spaceAvailable:t})),2),i=(0,n$.y5)({numElements:n,gap:ij,spaceAvailable:t})-2*iw;return{thumbWidth:i,thumbHeight:i,numColumns:n}}(),h=s.useMemo(()=>{if(e?.type===en.yW.SITE&&"grid"===r)return function(e,t,n,s){let a=Array.from(e.pages),r=[],l=n+2*iw+ik+iE;for(let e=0;e<a.length;e+=s){let o=0===e?"site_kit_pages--virtualRowFirst--pNAgS site_kit_pages--virtualRow--F7pf9":"site_kit_pages--virtualRow--F7pf9",d=a.slice(e,e+s),c=[],u=d.map(([e])=>e);d.forEach(([s,a],r)=>{a&&c.push((0,i.jsx)(iT,{page:a,row:e,column:r,thumbWidth:t,thumbHeight:n},s))}),r.push({element:(0,i.jsx)("div",{className:o,style:{gap:ij},role:"row",children:c}),key:u.join("-"),keys:u,height:l+(0===e?0:iy)})}return r.length>0&&(r.unshift({element:(0,i.jsx)(eS.hK,{height:iv}),key:"spacer-top",height:iv}),r.push({element:(0,i.jsx)(eS.hK,{height:ib}),key:"spacer-bottom",height:ib})),r}(e,u,p,m);let t=[];return d.forEach(([e,n],s)=>{t.push({element:(0,i.jsx)(iu,{page:n,index:s}),height:"list"===r?iN:iI,key:e}),0===s&&(0,el.dS)(n.name,{isPreset:c})&&t.push({element:(0,i.jsx)(eS.cG,{}),key:"examples_divider",height:iS})}),t},[e,r,d,u,p,m,c]);return a?(0,i.jsx)("div",{className:"asset_panel_pages--loadingContainer--fyofJ",style:{width:t},"data-testid":"asset-panel-pages-spinner",children:(0,i.jsx)(nb.k,{})}):0===d.length?(0,i.jsx)("div",{style:{width:t}}):(0,i.jsx)(eI.wl,{elements:h,hideScrollbar:n,initialScrollTop:l,onScroll:o})}var iL=n(444878),iM=n(872769),iO=n(83245),iR=n(626986),iP=n(429056);function iD(){let{productComponents:e}=(0,iL.g5)(iM.$A.Design),t=(0,iR.T)(),{getLibrary:n}=(0,eT.G)(),[a]=(0,ew.MA)(),r="list"===a,l=s.useCallback(e=>{let t=n(e);return t?.name||""},[n]),o=(0,eP.O)(),{props:d,numColumns:c}=s.useMemo(()=>(0,eP.Z)(o,a,eo.rp.NORMAL),[o,a]),{componentSectionNameForTracking:u}=(0,ej.zf)(),p=e.length>0,m=t.length>0;return(0,i.jsxs)(eS.xU,{children:[m&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(eS.X3,{title:(0,f.t)("design_systems.assets_panel.site_blocks")}),(0,i.jsx)("div",{className:r?iP.e:iP.WA,children:t.map((e,t)=>"embed"===e.type?(0,i.jsx)(e8.pd,{embed:e,sectionNameForTracking:"Recently used site kit assets",sectionPosition:t,keyboardPosition:(0,ek.pg)([en.tM.SITE_KIT],t,c),thumbHeight:d.thumbHeight,thumbWidth:d.thumbWidth,libraryName:(0,f.t)("design_systems.assets_panel.site_blocks.embeds")},e.name):(0,i.jsx)(e3,{asset:e,sectionNameForTracking:"Recently used site kit assets",sectionPosition:t,keyboardPosition:(0,ek.pg)([en.tM.SITE_KIT],t,c),thumbHeight:d.thumbHeight,thumbWidth:d.thumbWidth,libraryName:l(e.sourceLibraryKey)},`assetPanelRecents:siteKit:${(0,eD.V)(e)}`))})]}),m&&p&&(0,i.jsx)("div",{className:iP.r}),p&&(0,i.jsxs)(i.Fragment,{children:[m&&(0,i.jsx)(eS.X3,{title:(0,f.t)("design_systems.assets_panel.dropdown_type_all_libraries")}),(0,i.jsx)("div",{className:r?iP.e:iP.WA,children:e.map((e,t)=>(0,i.jsx)(iO.z,{asset:e,fileName:l(e.library_key),sectionNameForTracking:u,sectionPosition:t,keyboardPosition:(0,ek.pg)([en.tM.COMPONENTS],t,c),...d},`assetPanelRecents:component:${(0,eD.V)(e)}`))})]}),(0,i.jsx)("div",{className:iP.F3})]})}var iF=n(276800),iz=n(689161),iB=n(12866),iG=n(851824),iU=n(880233),iV=n(67154),iH=n(592726),iK=n(624155),iW=n(243690),iq=n(549090),iX=n(659),iY=n(182019),iZ=n(85109),iJ=n(246144),iQ=n(819851),i$=n(944350),i0=n(150156),i1=n(89221);let i2=new i0.KH({keys:[{name:"name",weight:.6},{name:"containingFrame.name",weight:.1},{name:"containingFrame.pageName",weight:.1},{name:"description",weight:.05}],threshold:.3,tokenize:!0,shouldSort:!0});function i3(){var e;let t=(0,iQ.lg)()===i$._Y.SITES,n=(0,e0.ce)(),i=n.data?.assetsByLibraryKey,a=s.useMemo(()=>(0,i1.u)(),[]),r=s.useMemo(()=>{let e=i?[...i?.values()].flat():[];return e?[...e,...a]:void 0},[i,a]),{query:l,searchOption:o}=(0,iq.I)(iX.Cn.AssetsPanel),d=t&&o&&[eF.IS.SITE_KIT,eF.IS.ALL].includes(o?.type),u=(0,J.$)(r),p=(0,ip.ZC)(l),[m,h]=s.useState([]),[f,g]=s.useState(!1);return s.useLayoutEffect(()=>{(async function(){if(u&&i2.set(r??[]),!l||0===i2.list().length){h([]);return}p||g(!0);let e=[];try{e=(await i2.search(l)).map(e=>e.item)}catch(e){(0,iJ.x1)(B.e.DESIGN_SYSTEMS_ECOSYSTEM,"error in site kit search",{message:e.message},{reportAsSentryError:!0})}h(e),g(!1)})()},[r,p,l,u]),e=m.length,s.useEffect(()=>{(0,eW.hw)(e)},[e]),(0,c.h)(()=>()=>(0,eW.hw)(0)),{results:d?m:[],loading:f,query:l}}let i5="asset_panel_search_results--empty--72Hqc",i4=(0,er.jz)(ey.ce),i6=(0,er.jz)(ey.GH),i7=(0,er.jz)(ey.RX),i8="Search keywords and filter results by specific libraries, templates, and components.",i9=({moreResults:e,query:t,showMoreDefault:n})=>{let a=!!(0,b.GM)()(),[r,l]=s.useState(!1),o=n||r||a,d=s.useCallback(()=>l(!0),[]);s.useEffect(()=>l(!1),[t]);let{visualAssetsType:c}=(0,I.wV)(),u=a&&!!c,p=s.useMemo(()=>e.map(e=>e.library_key),[e]),{data:m}=(0,iW.U)(p),h=s.useCallback(e=>m?.[e.library_key]??"",[m]),[g]=(0,ew.MA)(),x=(0,eP.O)(),{props:_,numColumns:y}=s.useMemo(()=>(0,eP.Z)(x,g,eo.rp.NORMAL),[x,g]),{componentSectionNameForTracking:v}=(0,ej.zf)({moreSearchResults:!0}),C=s.useMemo(()=>(0,eI.Ij)(e,y,"components:moreResults",_,v,[en.tM.COMPONENTS,1],{getFileName:h}),[e,y,_,v,h]);return s.useMemo(()=>{if(0===e.length)return[];let t=[];return u||t.push({element:(0,i.jsxs)("div",{className:a?"asset_panel_search_results--visualAssetsShowMoreText--sxfrf asset_panel_search_results--visualAssetsShowMore--MJbt7":"asset_panel_search_results--showMoreText--mEcU5 asset_panel_search_results--showMore--yo9-j",children:[o&&(0,f.tx)("design_systems.assets_panel.showing_results_from_all_libraries"),!o&&(0,i.jsx)("button",{className:"asset_panel_search_results--showMoreLink--3-Ww3 asset_panel_search_results--showMore--yo9-j blue_link--blueLink--9rlnd",onClick:d,children:(0,f.tx)("design_systems.assets_panel.more_results_in_all_libraries",{results:e.length})})]}),key:"components:showMoreText",height:a?i7:i6}),o&&t.push(...C),t},[e.length,o,d,C,u,a])};function se({components:e,moreComponents:t,siteKitAssets:n,query:a,getLibraryNameFromKey:r}){let l=sr(e),o=sr(t),d=l.length+o.length>0,c=n.length>0,u=s.useCallback(e=>r(e.library_key),[r]),[p]=(0,ew.MA)(),m=(0,eP.O)(),{props:h,numColumns:g}=s.useMemo(()=>(0,eP.Z)(m,p,eo.rp.NORMAL),[m,p]),{componentSectionNameForTracking:x}=(0,ej.zf)(),_=s.useMemo(()=>(0,eI.Ij)(l,g,"components",h,x,[en.tM.COMPONENTS,0],{getFileName:u}),[l,g,h,x,u]),y=i9({moreResults:o,query:a,showMoreDefault:0===l.length&&o.length>0}),[v,b]=(0,s.useState)(!1),[C,j]=(0,s.useState)(!1),k=(0,e0.r6)(n),w=s.useMemo(()=>td(n,g,h.thumbWidth,h.thumbHeight,p,"assets","Site kit search results",[en.tM.SITE_KIT],{libraryNameForAsset:k}),[p,g,h.thumbHeight,h.thumbWidth,k,n]),E=s.useMemo(()=>{let e=[];return c&&(e.push({element:(0,i.jsx)(eS.X3,{title:(0,f.t)("design_systems.assets_panel.site_blocks"),numResults:n.length,toggleExpanded:()=>b(e=>!e),isExpanded:!v,collapsible:!0}),key:"sitesHeader",height:i4}),v||e.push(...w)),d&&(c&&e.push({element:(0,i.jsx)(eS.X3,{title:(0,f.t)("design_systems.assets_panel.dropdown_type_all_libraries"),numResults:l.length,toggleExpanded:()=>j(e=>!e),isExpanded:!C,collapsible:!0}),key:"componentsHeader",height:i4}),C||(e.push(..._),e.push(...y))),e},[c,d,n.length,v,w,C,l.length,_,y]);return(0,i.jsx)(eI.wl,{elements:E,anchorScroll:!0})}function st(){return(0,I._m)()?(0,i.jsx)(si,{}):(0,i.jsx)(sn,{})}function sn(){let{query:e,results:t,isLoading:n}=(0,iq.I)(iX.Cn.AssetsPanel),{normalizedSearchResults:a,unsubscribedSearchResults:r}=t,l=i3(),o=(0,iY.U)(),{libraryKey:d}=(0,I.wV)(),{getLibrary:c}=(0,eT.G)(),u=s.useMemo(()=>a.map(e=>e.library_key),[a]),{data:p,status:m}=(0,iW.U)(u),h=ss(e),g="loading"===m,x=g&&h,_=s.useCallback(e=>p?.[e]??c(e)?.name??"",[p,c]),y=s.useMemo(()=>d?c(d)?.name:void 0,[c,d]),[,v]=s.useMemo(()=>(0,eW._2)(a.filter(e=>_(e.library_key))),[a,_]),[,b]=s.useMemo(()=>(0,eW._2)(r),[r]),C=v.length+b.length>0,j=l.results.length>0,k=x||n||o||l.loading;return sa({query:e,isLoading:k,isLoadingBreakdown:{isLibraryNamesLoadingWithTimeout:x,isSearchLoading:n,isSubscribedComponentsLoading:o},additionalLogData:{isLibraryNamesLoading:g,isLibraryNamesLoadingTimerActive:h}}),e?(0,i.jsx)(iZ.A,{isLoading:k,children:C||j?(0,i.jsx)(se,{components:v,moreComponents:b,siteKitAssets:l.results,query:e,getLibraryNameFromKey:_}):(0,i.jsx)(iz.T,{role:"alert",className:i5,children:y?(0,f.tx)("design_systems.assets_panel.no_results_for_query_in_library",{searchQuery:e,libraryName:y}):(0,f.tx)("design_systems.assets_panel.no_results_for_query",{searchQuery:e})})}):(0,i.jsx)("div",{className:i5,children:i8})}function si(){let{results:e,loading:t,query:n}=i3(),{libraryKey:a}=(0,I.wV)(),[r]=(0,ew.MA)(),{getLibrary:l}=(0,eT.G)(),o=s.useMemo(()=>a?l(a)?.name:void 0,[l,a]),{width:d}=(0,ez.G)(),{tileHeight:c,tileWidth:u,numColumns:p}=(0,eB.Ef)(d),m=s.useMemo(()=>td(e,p,u,c,r,"assets","Site kit search results",[en.tM.COMPONENTS],{includesFirstTile:!0}),[r,p,e,c,u]);return n?(0,i.jsx)(iZ.A,{isLoading:t,children:e.length>0?(0,i.jsx)(eI.wl,{elements:m,anchorScroll:!0}):(0,i.jsx)(iz.T,{role:"alert",className:i5,children:(0,f.tx)("design_systems.assets_panel.no_results_for_query_in_library",{searchQuery:n,libraryName:o})})}):(0,i.jsx)("div",{className:i5,children:i8})}let ss=e=>{let t=(0,ip.ZC)(e),{isActive:n,start:i}=(0,iV.Z)(iF.lQ);return s.useEffect(()=>{e!==t&&i(1e4)},[e,t,i]),n},sa=({isLoading:e,isLoadingBreakdown:t,additionalLogData:n,query:i})=>{let a=(0,ip.ZC)(e),r=(0,ip.ZC)(i),[o,d]=s.useState(null),c=(0,iH.iZ)(),u=(0,iB.DP)().version,p=(0,eH.tM)("assets-panel"),m=(0,ip.ZC)(p),h=(0,_.je)(),f=(0,z.d4)(e=>e.fileVersion),g=(0,z.d4)(e=>e.loadingState),y=(0,x.q5)(),v=y?.key,b=(0,et.oh)(iU.fi),C=s.useCallback(i=>{if(!o)return;let s=Date.now()-o;if(s<5e3)return;let a=h.data?.map(e=>{let t=iK.Mb(e.libraryKey);return{libraryKey:e.libraryKey,isLoading:!et.D2(g,t)}}),r=y&&null!=f&&(0,ei.yD)(y.key)||null,d=!(null!=r&&(0,et.D2)(g,r));l.az.trackDefinedEvent("assets_panel.search_long_loading",{...t,...n,fileKey:v,userId:c?.id,uiThemeVersion:u,queryId:p??m??void 0,loadingTimeMS:s,isLoading:e,queryCancelled:i,isLoadingSubscribedComponentsAndStateGroups:d,isLoadingRecentlyUsedItems:b,subscribedLibariesLoading:JSON.stringify(a)})},[h,f,g,y,o,e,t,b,v,n,c?.id,u,p,m]),j=(0,iG.A)(C,100,{leading:!0,trailing:!1}),k=s.useRef(C);s.useEffect(()=>{k.current=C},[C]);let{start:w,cancel:E}=(0,iV.Z)(()=>j(!1)),T=s.useCallback(()=>{C(!0),d(Date.now()),w(5e3)},[C,w]);s.useEffect(()=>{e&&!a?T():!e&&a&&(E(),C(!1),d(null))},[e,a,T,C,E]),s.useEffect(()=>{i!==r&&T()},[i,r,T]),s.useEffect(()=>()=>{k.current(!0)},[])};function sr(e){let{visualAssetsType:t}=(0,I.wV)(),n=!!(0,b.GM)()(),i=(0,eA.md)(t9.QN),a=(0,eA.md)(t9.r9),r=n&&!!t;return s.useMemo(()=>r?e.filter(e=>e.hub_file_id&&(t===I.G3.IconSets?i.includes(e.library_key):a.includes(e.library_key))):e,[r,e,t,i,a])}var sl=n(964068);function so({libraryKey:e,numComponents:t,size:n}){let{focusSearchBar:a}=(0,ek.rl)(),{navigateToLibrary:r}=(0,I.wV)(),l=(0,ej.sN)(),o=s.useCallback(()=>{l("visualAssetMoreTile",r(e))},[e,l,r]),d=s.useCallback(e=>{e.stopPropagation(),o(),a()},[a,o]),c=t-11,u=c>=1e3?(c/1e3).toFixed(1)+"k":c.toString();return(0,i.jsx)("button",{onClick:d,className:"asset_panel_visual_asset_more_tile--tile--r9fF-",style:{width:n,height:n},children:(0,i.jsxs)("div",{className:"asset_panel_visual_asset_more_tile--moreText--QNS99 text--fontPos13--xW8hS text--_fontBase--QdLsd",children:["+",u]})})}function sd({libraryKey:e,sectionIndex:t}){let{width:n}=(0,ez.G)(),a=(0,eA.md)(t9.Rs),{getLibrary:r}=(0,eT.G)(),l=r(e),o=l?.type===en.yW.DESIGN?l.numComponents:0,d=s.useMemo(()=>{if(l?.type===en.yW.DESIGN)return Array.from(l.pages.values())},[l]),c=[];if(d?.[0]?.components&&l?.libraryKey){let e=a?.[l?.libraryKey]?.asset_panel_component_ids||[];if(e.length>=11){let t=[];d.forEach(n=>{if(n.components){let i=(0,eN.r)(n.components).filter(t=>"component_key"in t&&e.includes(t.component_key||""));t.push(...i)}});let n=t.reduce((e,t)=>("component_key"in t&&t.component_key&&(e[t.component_key||""]=t),e),{});c=e.map(e=>n[e]).filter(e=>!!e)}else c=(0,eN.r)(d[0].components).slice(0,11)}let u=(0,eo.PI)(c,!0),p=(n-24-24)/4,m={showName:!1,noBackground:!0};return c.length?(0,i.jsx)("div",{className:"asset_panel_visual_asset_components--container--qLYh4",children:[0,1,2].map(n=>(0,i.jsxs)("div",{className:"asset_panel_visual_asset_components--row--leYBr",children:[c.slice(4*n,(n+1)*4).map((e,s)=>(0,i.jsx)(iO.z,{asset:e,disableClickPropagation:!0,displayType:"grid",fileName:void 0,hideInlineName:!0,isFirstTile:!1,isVisualAsset:!0,keyboardPosition:{path:[t,n],column:s},libraryItemTileProps:m,sectionDepth:s,sectionNameForTracking:"Visual assets panel",sectionPosition:n*s,sourceForTracking:"visual-assets-panel",thumbHeight:p,thumbLayout:u,thumbWidth:p,viewMode:eZ.Bk.Grid},`$visualAssetsPanel:component:${(0,eD.V)(e)}`)),2===n&&(0,i.jsx)(so,{libraryKey:e,numComponents:o,size:p})]},n))}):null}function sc({library:e,sectionIndex:t}){let{navigateToLibrary:n}=(0,I.wV)(),a=(0,x.q5)(),[l,o]=s.useState(!1),d=(0,ej.sN)(),c=s.useCallback(()=>{d("visualAssetLibraryCard",n(e.libraryKey))},[e,d,n]),u=s.useMemo(()=>{let t=e.libraryKey===a?.libraryKey?"localLibrary":e.libraryKey;return tA.Pt("assetsLibrary",t)},[e.libraryKey,a?.libraryKey]);return(0,i.jsx)(eh.GG,{className:r()("asset_panel_visual_asset_library--library--ta4FR",{"asset_panel_visual_asset_library--hovered--r37Mn":l}),"aria-label":e.name,onClick:c,style:{width:"100%"},recordingKey:u,children:(0,i.jsxs)("div",{className:"asset_panel_visual_asset_library--libraryCard--ljr--",children:[(0,i.jsx)(sd,{libraryKey:e.libraryKey,sectionIndex:t}),(0,i.jsx)(su,{library:e,setHovered:o})]})})}function su({library:e,setHovered:t}){let n=(0,eA.md)(t9.Rs),s=n?.[e.libraryKey]?.author_name||e.authorName;return(0,i.jsx)("div",{className:"asset_panel_visual_asset_library--libraryFooter--WtYtC",onMouseEnter:()=>t(!0),onMouseLeave:()=>t(!1),children:(0,i.jsxs)("div",{className:"asset_panel_visual_asset_library--libraryNameAndAuthor---pya2",children:[(0,i.jsxs)("div",{className:"asset_panel_visual_asset_library--nameAndIconForList--Opwld",children:[(0,i.jsx)("h3",{className:"asset_panel_visual_asset_library--libraryName--y8FNs ellipsis--ellipsis--Tjyfa",children:e.name}),(0,i.jsx)("div",{className:"asset_panel_visual_asset_library--libraryIcon--FWTh-",children:(0,i.jsx)(t8.P,{libraryKey:e.libraryKey,compact:!0,showPresetTooltip:!0,colorPrimaryOnHover:!0,tooltipDelay:500,tooltipLocation:"below"})})]}),s&&(0,i.jsx)("div",{className:"asset_panel_visual_asset_library--libraryStats--NtW2u ellipsis--ellipsis--Tjyfa",children:(0,f.tx)("community.by_publisher",{publisher:s})})]})})}var sp=n(364275);let sm=(0,u._)(function({width:e}){let{visualAssetsType:t}=(0,I.wV)(),n=(0,ip.qd)(t),s=t??n,[a]=(0,ew.MA)(),l="list"===a,o=(0,sl.lY)(),d=o.length>0,c=(0,eA.md)(t9.QN),u=(0,eA.md)(t9.r9),{cardWidth:p,previewHeight:m}=n3({sidebarWidth:e}),h=o.filter(e=>s===I.G3.IconSets?c.includes(e.library_key):u.includes(e.library_key));return(0,i.jsxs)(eS.xU,{children:[d&&(0,i.jsx)("div",{className:r()("asset_panel_visual_assets--list--APKhG",{"asset_panel_visual_assets--gridGap--DCeF2":!l}),children:h.map((e,t)=>{let n=(0,sp.x)(e);return l?(0,i.jsx)(nK,{library:n,keyboardSection:en.gP.VISUAL_ASSETS,rowIndex:t,columnIndex:0,cardWidth:p,previewHeight:m,hideUnsubscribe:!0},e.library_file_key):(0,i.jsx)(sc,{library:n,sectionIndex:t},e.library_file_key)})}),(0,i.jsx)("div",{className:"asset_panel_visual_assets--bottomPadding--OULyc"})]})},"AssetPanelVisualAssets");var sh=n(159348);let sf=(e,t,n)=>e===I.S5.Libraries?0:n?e===I.S5.VisualAssets?1:e===I.S5.Pages||t?2:3:e===I.S5.Pages||t?1:2;function sg({assetPanelItemsByLibraryKey:e,width:t}){let{libraryKey:n,pageId:a,currentView:r,isNavigatingVisualAssets:o}=(0,I.wV)(),{previousLibraryKey:d}=(0,I.RR)(),c=sx(),u=!!(0,b.GM)()(),{getPage:p,getLibrary:m}=(0,eT.G)(),h=(0,iY.q)()(n);(function(e){let t=(0,z.d4)(e=>e.loadingState),n=(0,z.d4)(e=>e.fileVersion),i=(0,x.q5)(),a=(0,es.k)(),r=i&&null!=n&&(0,ei.yD)(i.key)||null,o=!(null!=r&&(0,et.D2)(t,r));s.useEffect(()=>{o||function(e,t,n){if(ea)return;let{numLibraries:i,numComponents:s,numComponentsWithLimit:a}=e();(0,l.sx)("Assets Panel Initial Load",{numLibraries:i,numComponents:s,numComponentsWithLimit:a,assetsPanelVersion:t,fileKey:n?.key,fileTeamId:n?.teamId??void 0,fileOrgId:n?.parentOrgId??void 0}),ea=!0}(e,a,i)},[e,o,i,a])})(s.useCallback(()=>{let t=0,n=0,i=0,{allLibrariesUnsorted:s}=e;for(let[a,r]of s)if(r.type===en.yW.DESIGN){if(e.localAssets.libraryKey===a){r.numComponents>=0&&(t+=1);continue}t+=1,n+=r.numComponents,i+=Math.min(r.numComponents,20)}return{numLibraries:t,numComponents:n,numComponentsWithLimit:i}},[e])),s_(),(0,Q.Sq)();let f=s.useMemo(()=>m(n??d),[m,n,d]),g=s.useMemo(()=>p(n,a),[p,n,a]),_=sf(r,c,u&&o),{libraries:y,presets:v,librariesForConnectedProject:C}=(0,n4.g)(),{localAssets:j}=e;return!function(e,t,n,i){let a=(0,x.q5)(),[r,o]=(0,eA.fp)(sh.GT),d=t.length+n.length+i.length;e.numComponents+e.numTemplates>0&&(d+=1),s.useEffect(()=>{if(!r){o(!0);let e=sh._o.stop();e&&(0,l.sx)(sh.YS,{elapsedMs:e,fileKey:a?.key,teamId:a?.teamId,orgId:a?.parentOrgId,isUi3RedesignedAssetPanel:!0,numLibraries:d,numComponents:0,numComponentsShown:0,numSectionsShown:d},{forwardToDatadog:!0})}},[r,o,d,a])}(j,y,v,C),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(tQ,{}),r===I.S5.Search?(0,i.jsx)(st,{}):r===I.S5.Recents?(0,i.jsx)(iD,{}):(0,i.jsxs)(tc.A,{index:_,width:t,children:[(0,i.jsx)(ir,{width:t,hideScrollbar:0!==_,localAssets:j}),u&&o&&(0,i.jsx)(sm,{width:t}),!c&&(0,i.jsx)(iA,{library:f,width:t,isLoading:h,hideScrollbar:1!==_}),(0,i.jsx)(tf,{page:g,width:t})]})]})}let sx=()=>{let{getLibrary:e}=(0,eT.G)(),{libraryKey:t}=(0,I.wV)(),n=(0,iY.q)()(t),i=e(t);return!!i&&!n&&!!(0,I.Cg)(i)},s_=()=>{let{libraryKey:e}=(0,I.wV)(),t=(0,$.R)(),n=(0,J.$)(e),i=(0,ee.fd)(e);s.useEffect(()=>{i&&n&&t({updateSource:"ui3_library_expand"})},[n,i,t])};var sy=n(576268),sv=n(339619);let sb=e=>s.useCallback(t=>{t()||e()},[e]);var sC=n(449572),sj=n(495896),sk=n(59849),sw=n(475961),sE=n(853039),sT=n(336971),sS=n(368656),sI=n(937749);function sN(e){return(0,i.jsx)(u.u,{label:"AssetPanel",children:(0,i.jsx)(sA,{...e})})}function sA({width:e}){let t=(0,sS.z)(),n=function(e){let t=(0,iH.iZ)(),n=(0,x.q5)(),i=(0,sw.jO)(),a=(0,E.f)("has_dismissed_component_sidebar_library_upsell_banner"),r=(0,z.d4)(e=>e.isFreeUser),l=(0,z.d4)(sT.P),o=n?.teamId?l[n.teamId]:null,d=(0,sC.bc)(sk.kQI,{id:n?.teamId??""},{enabled:!!n?.teamId}),c=n?.canEdit??!1,u=d.data?.team?.hasPermission??!1,p=e.numComponents>0||e.numTemplates>0;return s.useMemo(()=>!a&&r&&(!o||!(0,sE.w5)(o)&&u)&&c&&i&&p&&(0,sj.Hz)(t?.id),[a,r,o,u,c,i,p,t])}(t.localAssets),a="loading"===(0,_.je)().status,r=s.useRef(null),o=d.wY(r)?.width||e,[u]=(0,ew.MA)(),p=(0,x.q5)();(0,c.h)(()=>{(0,l.sx)("Component Sidebar Viewed",{viewMode:u,assetsPanelVersion:3,fileKey:p?.key,fileTeamId:p?.teamId??void 0,fileOrgId:p?.parentOrgId??void 0,componentSuggestionSessionId:(0,P.r6)()})});let{isFlyoutOpen:m,closeFlyout:h,flyoutProps:f}=(0,F.JA)(),y=s.useCallback(e=>{let t=document.getElementById(F.Ev);m||!t||!r.current||!e.relatedTarget||r.current.contains(e.relatedTarget)||t.contains(e.relatedTarget)||h()},[m,h]);return(0,i.jsxs)(sL,{assetPanelItemsByLibraryKey:t,width:o,children:[(0,i.jsx)("div",{className:sI.kL,"data-testid":"component-sidebar",translate:"no",ref:r,onBlur:y,children:(0,i.jsxs)("div",{className:sI.kL,style:{width:o},children:[(0,i.jsx)(sy.E,{}),(0,i.jsx)(iZ.A,{isLoading:a,children:(0,i.jsx)(sg,{assetPanelItemsByLibraryKey:t,width:o})}),n&&(0,i.jsx)(Z,{}),(0,i.jsx)("div",{style:{left:`${o}px`,top:"240px"},className:sI.b3,"data-onboarding-key":g.RJ}),(0,i.jsx)(R,{width:o})]})}),f&&(0,i.jsx)(D.w,{...f})]})}function sL({children:e,width:t,assetPanelItemsByLibraryKey:n}){let s=(0,m.b)();return(0,i.jsx)(eM.P3,{children:(0,i.jsx)(eT.K,{assetPanelItemsByLibraryKey:n,children:(0,i.jsx)(ek.tM,{className:r()(sI.kL,s&&sI.Nb),children:(0,i.jsx)(sM,{children:(0,i.jsx)(ez.L,{width:t,children:e})})})})})}function sM({children:e}){return!function(){let{libraryKey:e,pageId:t,folderPath:n,navigateToTop:i,navigateToPage:a,navigateToPath:r,navigateToLibrary:l,currentView:o,onBack:d}=(0,I.wV)(),c=(0,iY.q)(),u=c(e),{getLibrary:p,getFolder:m}=(0,eT.G)(),{setLastNavAction:h}=(0,eM.ZX)(),f=sb(i),g=(0,n4.g)().allLibrariesByLibraryKey,[x,_]=(0,eA.fp)(sv.dL);s.useEffect(()=>{x&&g.size>0&&((0,ej.hB)(()=>l(x)),_(null))},[l,g.size,x,_]),(0,I.sH)(),s.useEffect(function(){if(o!==I.S5.Assets&&o!==I.S5.Pages)return;let s=p(e),l=g.get(e);if(!s){if(c(e)&&l&&o!==I.S5.Assets)return;f(i);return}if(t){if(!s?.pages.get(t)){let e=(0,I.Cg)(s);e?f(()=>a(e.id)):f(d);return}if(n&&!m(e,t,n)){let i=n.slice(0,-1),s=m(e,t,i);for(;!s&&i.length>0;)s=m(e,t,i=i.slice(0,-1));if(!s)return f(()=>a(t));let l=parent?(0,I.xc)(s):void 0;return void(l?f(()=>r([...i,l.name])):(f(()=>r(i)),h(eM.r6.Back)))}}},[d,u,o,t,n,i,a,p,m,r,h,f,c,g,e]),s.useEffect(function(){let i=p(e);if(!i||u)return;let s=(0,I.Cg)(i);if(o===I.S5.Pages&&s)a(s.id);else if(o===I.S5.Assets){let i=m(e,t,n);if(!i)return;let s=(0,I.xc)(i);s&&r([...n??[],s.name])}},[u,o,n,m,p,a,r,d,t,e])}(),(0,i.jsx)(i.Fragment,{children:e})}function sO(){return(0,i.jsx)("div",{className:h.s.colorTextSecondary.my8.mx16.$,children:(0,f.tx)("design_systems.assets_panel.error")})}function sR({width:e}){return(0,i.jsx)(o.l,{id:"AssetPanelUI3",children:(0,i.jsx)(u.u,{label:"AssetPanelUI3",children:(0,i.jsx)(p.tH,{boundaryKey:"AssetPanelUI3",fallback:(0,i.jsx)(sO,{}),children:(0,i.jsx)(sN,{width:e})})})})}},182788:(e,t,n)=>{n.d(t,{Q:()=>X});var i=n(104076),s=n(716976),a=n(420680),r=n(739713),l=n(140490),o=n(192075),d=n(573278),c=n(754245),u=n(237420),p=n(926653),m=n(511570),h=n.n(m),f=n(744449),g=n.n(f),x=n(665261),_=n(915123),y=n(848561),v=n(236631),b=n(659062),C=n(147046),j=n(278491),k=n(506192),w=n(211862),E=n(349311),T=n(718085),S=n(727954),I=n(6380),N=n(455582),A=n(207116),L=n(286764),M=n(2972),O=n(368656),R=n(757396);let P="asset_panel_collapsible_breadcrumb--buttonStub--4S8VP asset_panel_collapsible_breadcrumb--_buttonStubBase--aj18P",D="asset_panel_collapsible_breadcrumb--libraryStubStatic--VAyz1 asset_panel_collapsible_breadcrumb--_buttonStubBase--aj18P asset_panel_collapsible_breadcrumb--_libraryStubBase--y4862";function F({stubs:e}){let{collapsibleStubs:t,lastStub:n,numHiddenStubs:a,breadcrumbRef:r,ellipsisRef:l,stubRefs:o}=z(e),d=s.useCallback(()=>l.current?{top:l.current.getBoundingClientRect().bottom,left:l.current.getBoundingClientRect().left}:{top:0,left:0},[l]),c=a===t.length;return(0,i.jsxs)("div",{className:v.s.flex.itemsCenter.overflowHidden.flexShrink1.flexGrow1.$,style:b.sx.add({flexBasis:"content"}).$,ref:r,role:"navigation","data-onboarding-key":T.we,children:[(0,i.jsx)(U,{shouldEllipsize:c}),a>0&&(0,i.jsx)(G,{allStubs:t,numHiddenStubs:a,getDropdownTarget:d,ref:l}),t.map((e,t)=>t<a?null:(0,i.jsx)(V,{i:t,name:e,ref:e=>o.current[t]=e},t)),e.length>0?(0,i.jsx)(H,{name:n,firstSlash:0===t.length,shouldEllipsize:c}):null]})}let z=e=>{let[t,n]=s.useMemo(()=>0===e.length?[[],void 0]:[e.slice(0,-1),e[e.length-1]],[e]),[i,a]=s.useState([]),r=s.useRef([]);s.useEffect(function(){r.current.length>t.length&&(r.current=r.current.slice(0,t.length)),i.length>t.length&&a(e=>e.slice(0,t.length))},[t,i.length,e.length]);let l=s.useRef(null),o=s.useRef(null),{width:d}=(0,I.G)();return s.useLayoutEffect(function(){let e=l.current;if(!e)return;let t=e.children,n=e.offsetWidth-g()(Array.from(t).map(e=>e.scrollWidth));if(n<0){let e=r.current[i.length];e&&a(t=>[...t,e.scrollWidth])}else if(0===n)return;else if(i.length>0){let e=i.length-1;n>i[e]-(o.current&&1===i.length?o.current.scrollWidth:0)&&a(e=>e.slice(0,-1))}},[i,r,e,d]),{collapsibleStubs:t,lastStub:n,numHiddenStubs:i.length,breadcrumbRef:l,ellipsisRef:o,stubRefs:r}},B="asset-panel-ellipsis-menu",G=s.forwardRef(({numHiddenStubs:e,allStubs:t,getDropdownTarget:n},a)=>{let r=(0,N.sN)(),l=(0,k.Um)(),o=l?.type===B,d=(0,u.wA)(),p=s.useCallback(()=>d((0,C.oB)()),[d]),m=s.useCallback(()=>d((0,C.j7)({type:B,data:{position:n()}})),[d,n]),{isCurrentlySkippingPage:f,isCurrentlySkippingFirstFolder:g,navigateBackToPathIndex:_}=(0,M.wV)(),b=s.useMemo(()=>t.slice(0,e),[t,e]),w=s.useMemo(()=>b.join(" / "),[b]),T=s.useMemo(()=>{if(o)return l.data?.position},[l?.data?.position,o]),I=s.useCallback(e=>{r("breadcrumb",_(W(e,f,g)))},[g,f,r,_]),{focusBackButton:L,focusSearchBar:O}=(0,A.rl)(),R=(0,A.NR)({onBoth:e=>()=>{I(e)},onKeyDown:()=>()=>{setTimeout(()=>L(),0)},onClick:()=>O}),{setKeyboardNavigationElement:D}=(0,y.M3)({path:[S.ON.BREADCRUMB],column:S.Yv.ELLIPSIS}),F=h()(P,{"asset_panel_collapsible_breadcrumb--dropdownOpen--YMRPh":o});return(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{ref:a,className:v.s.flex.itemsCenter.$,children:[(0,i.jsx)(K,{}),(0,i.jsx)("button",{ref:D,className:F,onClick:m,"data-tooltip-type":E.Ib.TEXT,"data-tooltip":w,"aria-label":w,"aria-haspopup":"listbox","aria-expanded":o,children:"\u2026"})]}),o&&c.createPortal((0,i.jsx)(x.X3,{className:j.Dm,positionAbsolute:!0,style:T,id:"asset-panel-ellipsis-menu",hideDropdown:p,autofocusPrevElementOnEsc:!0,children:b.map((e,t)=>(0,i.jsx)(x.c$,{onClick:R(t),children:e},e))}),document.body)]})});function U({shouldEllipsize:e}){let t=(0,w._G)(),{allLibrariesByLibraryKey:n}=(0,R.g)(),{currentView:a,libraryKey:r,visualAssetsType:l,navigateToLibrary:d,isCurrentlySkippingPage:c,isCurrentlySkippingFirstFolder:u,folderPath:m}=(0,M.wV)(),{setLastNavAction:f}=(0,L.ZX)(),{focusBackButton:g,focusSearchBar:x}=(0,A.rl)(),_=function(){let{libraries:e,siteLibraries:t,librariesForConnectedProject:n}=(0,R.g)(),i=(0,O.z)().localAssets,a=n.length>0,r=s.useMemo(()=>{let n=e.length>0,s=i.numComponents+i.numTemplates>0;return n||s||"disabled"!==t.status},[e,t.status,i]);return a&&!r}(),b=s.useMemo(()=>r?r===t?(0,o.t)("design_systems.assets_panel.created_in_this_file"):n.get(r)?.name:void 0,[r,t,n]),C=(0,N.sN)(),j=a===M.S5.Libraries,k=a===M.S5.Pages,E=a===M.S5.Recents,T=a===M.S5.VisualAssets,I=s.useMemo(()=>!!k||!!c&&(!m||!!u&&1===m.length),[m,u,c,k]),P=s.useCallback(e=>{let t=d(e);f(L.r6.Back),C("breadcrumb",t)},[C,d,f]),F=(0,A.MB)({onBoth:()=>P(r??(0,p.l)("")),onKeyDown:g,onClick:x}),{setKeyboardNavigationElement:z}=(0,y.M3)({path:[S.ON.BREADCRUMB],column:S.Yv.LIBRARY}),B=h()(k?D:"asset_panel_collapsible_breadcrumb--libraryStub--PU1iu asset_panel_collapsible_breadcrumb--buttonStub--4S8VP asset_panel_collapsible_breadcrumb--_buttonStubBase--aj18P asset_panel_collapsible_breadcrumb--_libraryStubBase--y4862",{"asset_panel_collapsible_breadcrumb--ellipsized--vFJ6x ellipsis--ellipsis--Tjyfa":e});return j?(0,i.jsx)("div",{className:"asset_panel_collapsible_breadcrumb--allLibraries--6vL0- asset_panel_collapsible_breadcrumb--libraryStubStatic--VAyz1 asset_panel_collapsible_breadcrumb--_buttonStubBase--aj18P asset_panel_collapsible_breadcrumb--_libraryStubBase--y4862",children:_?(0,o.tx)("design_systems.libraries_modal.connected_project_libraries"):(0,o.tx)("design_systems.assets_panel.dropdown_type_all_libraries")}):E?(0,i.jsx)("div",{className:D,children:(0,o.tx)("design_systems.assets_panel.dropdown_type_recents")}):T?(0,i.jsx)("div",{className:D,children:l===M.G3.IconSets?(0,o.tx)("design_systems.assets_panel.icon_sets"):(0,o.tx)("design_systems.assets_panel.illustrations")}):(0,i.jsx)("div",{className:v.s.flex.overflowHidden.$,children:(0,i.jsx)("button",{onClick:F,className:B,disabled:I,ref:z,type:"button",children:b})})}let V=s.forwardRef(({name:e,i:t},n)=>{let{isCurrentlySkippingPage:a,isCurrentlySkippingFirstFolder:r,navigateBackToPathIndex:l}=(0,M.wV)(),o=(0,N.sN)(),d=s.useCallback(e=>{o("breadcrumb",l(e))},[o,l]),c=s.useMemo(()=>W(t,a,r),[t,r,a]),{setKeyboardNavigationElement:u}=(0,y.M3)({path:[S.ON.BREADCRUMB],column:S.Yv.STUBS+t}),{focusBackButton:p,focusSearchBar:m}=(0,A.rl)(),h=(0,A.MB)({onBoth:()=>d(c),onKeyDown:p,onClick:m});return e?(0,i.jsxs)("div",{ref:n,className:v.s.flex.itemsCenter.$,children:[(0,i.jsx)(K,{}),(0,i.jsx)("button",{ref:u,onClick:h,className:P,children:e})]}):null});function H({name:e,shouldEllipsize:t}){let n=s.useRef(null),{pageId:a,folderPath:r}=(0,M.wV)(),{width:l}=(0,I.G)(),[o,d]=s.useState(!1);return(s.useEffect(()=>{d(!!(0,_._C)({text:e??"",textRef:n}))},[e,l]),s.useEffect(()=>{setTimeout(()=>d(!!(0,_._C)({text:"",textRef:n})),0)},[a,r]),e)?(0,i.jsxs)("div",{className:v.s.noWrap.flex.itemsCenter.if(t,v.s.overflowHidden).$,children:[(0,i.jsx)(K,{}),(0,i.jsx)("div",{"data-tooltip-type":E.Ib.TEXT,"data-tooltip":o?e:void 0,ref:n,className:v.s.mx4.px2.if(t,v.s.overflowHidden.pre.ellipsis).$,"aria-current":"location",children:e})]}):null}function K(){return(0,i.jsx)("div",{className:"asset_panel_collapsible_breadcrumb--breadcrumbSlash--XWfHn","aria-hidden":!0,children:" / "})}let W=(e,t,n)=>{let i=e;return t&&i++,n&&i++,i-1};var q=n(46329);function X(e){return(0,i.jsx)(l.u,{label:"Breadcrumb",children:(0,i.jsx)(Y,{...e})})}function Y({page:e}){let{currentView:t,folderPath:n,onBack:l,libraryKey:c,isCurrentlySkippingPage:u,isCurrentlySkippingFirstFolder:p}=(0,M.wV)(),m=(0,N.sN)(),{closeFlyout:h}=(0,d.JA)(),{setBackButtonKeyboardItem:f,focusSearchBar:g}=(0,A.rl)(),x=s.useCallback(()=>{m("backButton",l()),h()},[l,m,h]),_=s.useCallback(()=>{t===M.S5.Recents?c||g():t===M.S5.Pages?g():t===M.S5.Assets&&u&&!n&&g()},[t,g,n,u,c]),y=(0,A.MB)({onBoth:x,onKeyDown:_,onClick:g}),v=s.useMemo(()=>{if(t===M.S5.Search||t===M.S5.Recents)return[];let i=e?.name&&!u?[e.name]:[],s=n??[];return[...i,...p?s.slice(1):s]},[t,n,u,p,e?.name]),b=(0,q.I)(),C=t!==M.S5.Libraries&&t!==M.S5.Search;return b?null:(0,i.jsx)(i.Fragment,{children:t!==M.S5.Search&&(0,i.jsxs)("div",{className:"asset_panel_header--breadcrumbWrapper--NC2Ps asset_panel_header--horizontalFlex--k99PA",children:[C&&(0,i.jsx)(a.K,{"aria-label":(0,o.t)("design_systems.assets_panel.back"),onClick:y,ref:f,recordingKey:"assetsPanelBack",children:(0,i.jsx)(r.C,{})}),(0,i.jsx)(F,{stubs:v})]})})}},6380:(e,t,n)=>{n.d(t,{G:()=>f,L:()=>g});var i=n(104076),s=n(716976),a=n(237420),r=n(812714),l=n(848561),o=n(366535),d=n(614784),c=n(822764),u=n(648952),p=n(135535),m=n(573278),h=n(455582);function f(){let e=s.useContext(u.U);return e?.isUi3?e:{...e,width:0}}function g({width:e,children:t}){let n=function(e){let t=(0,a.wA)(),{query:n,searchSessionId:i}=(0,d.Gq)(),u=(0,h.ht)(),f=(0,l.q_)(),g=(0,c.LR)(),x=(0,a.d4)(e=>e.universalInsertModal.showing),_=s.useCallback(()=>{x&&g()},[g,x]),{setFlyoutProps:y}=(0,m.JA)(),v=s.useCallback((s,a,l,d,c)=>{_();let m={asset:s,searchSessionId:i??void 0,query:n??void 0,sectionPosition:a,sectionNameForTracking:l,assetTypeDropdownSelection:u,containerWidth:e,onGetKeyboardNavigationItemById:f,sectionDepth:d,sourceForTracking:c};(0,r.kc)().dse_fpl_wave_2?y(m):t((0,o.to)({type:p.m,data:m}))},[_,i,n,u,e,f,y,t]);return s.useMemo(()=>({onOpenFlyout:v,assetTypeDropdownSelection:u,isUi3:!0,width:e}),[v,u,e])}(e);return(0,i.jsx)(u.U.Provider,{value:n,children:t})}},576268:(e,t,n)=>{n.d(t,{E:()=>eY,g:()=>eJ});var i=n(104076),s=n(716976),a=n(224781),r=n(420680),l=n(336518),o=n(662376),d=n(795033);n(120440);var c=n(997477),u=n(271761),p=n(192075),m=n(657317),h=n(85598),f=n(539607),g=n(2972),x=n(288054),_=n(854284),y=n(167151),v=n(470076),b=n(182788),C=n(455582),j=n(104177),k=n(237420),w=n(276800),E=n(144949),T=n(684742),S=n(285466),I=n(816689),N=n(266808),A=n(812714),L=n(883765),M=n(221586),O=n(681398),R=n(848561),P=n(819851),D=n(354114),F=n(211862),z=n(549090),B=n(659),G=n(564914),U=n(789263),V=n(727954),H=n(207116);function K({libraryName:e}){let t=(0,k.wA)(),{currentView:n,startSearch:a,onBack:r,libraryKey:l,visualAssetsType:o}=(0,g.wV)(),d=n===g.S5.Search,c=(0,g._m)(),m=(0,P.cJ)(),{inputRef:h,focusSearchBar:f}=(0,H.rl)(),x=(0,u.b)(),y=(0,k.d4)(e=>e.leftPanel.shouldFocusSearchBar)||x,{query:v,setQuery:b,setSearchOption:C}=(0,z.I)(B.Cn.AssetsPanel),j=(0,F._G)(),E=s.useCallback(()=>{d&&r()},[d,r]),T=s.useMemo(()=>l?l===j?{type:G.IS.LOCAL}:c?{type:G.IS.SITE_KIT}:{type:G.IS.FILE,libraryKey:l}:{type:G.IS.ALL},[c,l,j]),I=s.useCallback(e=>{b(e),C(T),""===e?E():d||a()},[b,C,T,E,d,a]),R=s.useRef(void 0),K=(0,_.Nv)(!0);s.useEffect(()=>{d&&(v&&R.current!==l&&(L.az.trackDefinedEvent("asset_search.misc_feature_usage",{aiResultsEnabled:K,entryPoint:"asset-panel",featureSlug:"library-filter-usage"}),C(T)),R.current=l)},[t,d,v,T,K,C,l]);let W=s.useCallback(()=>{""===v&&E()},[E,v]),q=s.useCallback(()=>{I(""),f(),E()},[I,f,E]),X=(0,k.d4)(e=>e.mirror.appModel.activeCanvasEditModeType);s.useEffect(()=>{if((0,A.kc)().accessible_keyboard_shortcuts)return;let e=e=>{(O.Ay.chromeos?e.altKey&&e.shiftKey&&e.keyCode===M.Uz.KEY_2:e.altKey&&e.keyCode===M.Uz.KEY_2)&&X!==N.m1T.TEXT&&(f(),e.preventDefault())};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[X,f]),s.useEffect(()=>{if((0,A.kc)().accessible_keyboard_shortcuts&&D.Y5.isReady())return D.Y5.assetsPanelKeyboardEvents.subscribe(f)},[f]);let Y=s.useMemo(()=>e?(0,p.t)("design_systems.assets_panel.search_library"):m?(0,p.t)("design_systems.assets_panel.search_all_sites_inserts"):o?o===g.G3.IconSets?(0,p.t)("design_systems.assets_panel.search_all_icon_sets"):(0,p.t)("design_systems.assets_panel.search_all_illustrations"):(0,p.t)("design_systems.assets_panel.search_all_libraries"),[e,o,m]);return(0,i.jsxs)("div",{className:"asset_panel_search--container--u0qoH asset_panel_search--horizontalFlex---CG1k",children:[(0,i.jsx)("div",{children:(0,i.jsx)(S.W,{})}),(0,i.jsx)(U.E1,{autofocus:y,column:V.Wy.SEARCH,entryPointForTracking:"editor:assets_panel",forwardedRef:h,isNewAssetsPanel:!0,isVisible:!0,onBlur:W,onChange:I,onClearSearch:q,onFocus:w.lQ,path:[V.ON.HEADER,V.my.SEARCH_AND_FILTER],placeholder:Y,query:v,recordingKey:"componentsLibrarySearch",selectOnFocus:!0})]})}function W({library:e}){let{navigateToTop:t}=(0,g.wV)(),{focusSearchBar:n}=(0,H.rl)(),a=(0,C.sN)(),r=s.useCallback(()=>{a("searchFilterChip",t()),n()},[n,a,t]),{setKeyboardNavigationElement:l}=(0,R.M3)({path:[V.ON.HEADER,V.my.LIBRARY_SEARCH_CHIP]});return e?(0,i.jsx)(E.v,{"aria-label":(0,p.t)("design_systems.assets_panel.search_chip_label"),hasCloseButton:!0,onClose:r,recordingKey:"asset-panel-search-chip",ref:l,htmlAttributes:{"data-testid":"asset-panel-search-chip"},children:e.name}):null}function q({visualAssetsType:e}){let{navigateToTop:t}=(0,g.wV)(),{focusSearchBar:n}=(0,H.rl)(),a=(0,C.sN)(),r=s.useCallback(()=>{a("visualAssetsSearchFilterChip",t()),n()},[n,a,t]),{setKeyboardNavigationElement:l}=(0,R.M3)({path:[V.ON.HEADER,V.my.LIBRARY_SEARCH_CHIP]});return e?(0,i.jsxs)("div",{className:"asset_panel_search--libraryChip--1nfYR asset_panel_search--horizontalFlex---CG1k","data-testid":"asset-panel-visual-assets-search-chip",children:[(0,i.jsx)("span",{className:"asset_panel_search--libraryChipText--3TsfE ellipsis--ellipsis--Tjyfa",children:e===g.G3.IconSets?(0,p.tx)("design_systems.assets_panel.icon_sets"):(0,p.tx)("design_systems.assets_panel.illustrations")}),(0,i.jsx)(T.E,{className:"asset_panel_search--libraryChipRemove--kJiJn",onClick:r,recordingKey:"asset-panel-visual-assets-search-chip",ref:l,children:(0,i.jsx)(I.f,{})})]}):null}var X=n(754245),Y=n(240803),Z=n(454851),J=n(101441),Q=n(324438),$=n(419750),ee=n(388054),et=n(140008),en=n(511570),ei=n.n(en),es=n(665261),ea=n(236631),er=n(482996),el=n(147046),eo=n(278491),ed=n(50593),ec=n(869141),eu=n(471628),ep=n(506192),em=n(444878),eh=n(872769),ef=n(286764),eg=n(757396),ex=n(807474),e_=n(626986);let ey="assets-panel-settings";function ev({includeFolderSetting:e=!0}){let t=s.useRef(null),{setKeyboardNavigationElement:n}=(0,R.M3)({path:[V.ON.HEADER,V.my.SEARCH_AND_FILTER],column:V.Wy.SETTINGS}),a=(0,F.tS)(),r=(0,ep.Um)(),l=r?.type===ey,o=(0,k.wA)(),d=s.useCallback(()=>{l?o((0,el.oB)()):(o((0,el.j7)({type:ey,data:{position:{top:t.current?.getBoundingClientRect().bottom,left:t.current?.getBoundingClientRect().left}}})),L.az.trackDefinedEvent("assets_panel.asset_type_dropdown_opened",{fileKey:a??void 0,assetsPanelVersion:3}))},[o,a,l]),c=s.useMemo(()=>{if(l)return r.data?.position},[r?.data?.position,l]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Y.o,{eventListeners:l?["onMouseDown"]:[],children:(0,i.jsx)(Z.d,{onClick:d,"aria-expanded":l,ref:(0,et.Ay)(t,n),"aria-label":(0,p.t)("design_systems.assets_panel.settings_label"),"aria-haspopup":"listbox",htmlAttributes:{"data-testid":"asset-panel-settings-button"},children:(0,i.jsx)(J.P,{})})}),l&&(0,i.jsx)(eb,{position:c,includeFolderSetting:e,buttonRef:t})]})}function eb({position:e,includeFolderSetting:t,buttonRef:n}){let a=(0,k.wA)(),r=s.useCallback(()=>{a((0,el.oB)())},[a]),l=(0,C.R2)("number"==typeof e?.top?e.top:void 0),{productComponents:o}=(0,em.g5)(eh.$A.Design),c=(0,e_.T)(),[u]=(0,ex.ye)(),{currentView:m,libraryKey:h}=(0,g.wV)(),{getLibrary:f}=(0,j.G)(),x=(0,F.tS)(),_=(0,F._G)(),[y]=(0,ex.MA)(),v=!!(0,er.GM)()()&&m===g.S5.Libraries,b=v?ex.$H.LIST:y,w=(0,P.cJ)()||v,E=s.useMemo(()=>m!==g.S5.Search&&(o.length>0||c.length>0),[m,o.length,c.length]),T=s.useMemo(()=>x&&_?f(_):void 0,[f,x,_]),S=T?.type===V.yW.DESIGN&&(T.numComponents>0||T.numTemplates>0),{libraries:I,presets:N,librariesForConnectedProject:A}=(0,eg.g)(),{goToLibrary:M,goToAll:O,goToRecents:R,changeAssetsView:D,toggleShowFolders:z}=function(e){let t=(0,F.q5)(),n=(0,C.sN)(),{navigateToLibrary:i,navigateToTop:a,navigateToRecents:r}=(0,g.wV)(),{setLastNavAction:l}=(0,ef.ZX)(),[,o]=(0,ex.MA)(),[,c]=(0,ex.ye)(),{focusSearchBar:u}=(0,H.rl)(),p=(0,d.Xr)(g.aK),m=s.useCallback(e=>{n("settingsMenu",e)},[n]),h=s.useCallback(e=>{m(i(e)),u(),p(g.t6.Libraries)},[u,i,p,m]),f=s.useCallback(()=>{m(a()),u()},[u,a,m]),x=s.useCallback(()=>{m(r()),u()},[u,r,m]),_=s.useCallback(()=>e.current?.focus(),[e]),y=s.useCallback(e=>{L.az.trackDefinedEvent("assets_panel.view_mode_changed",{viewMode:e,fileKey:t?.key,fileTeamId:t?.teamId??void 0,fileOrgId:t?.parentOrgId??void 0}),o(e),l(ef.r6.ToggleView)},[t?.key,t?.parentOrgId,t?.teamId,o,l]),v=(0,H.NR)({onBoth:e=>()=>y(e),onKeyDown:()=>_}),b=s.useCallback(e=>{L.az.trackDefinedEvent("assets_panel.folder_toggle",{showFolders:e,fileKey:t?.key,fileTeamId:t?.teamId??void 0,fileOrgId:t?.parentOrgId??void 0}),c(e)},[t?.key,t?.parentOrgId,t?.teamId,c]);return{goToLibrary:h,goToAll:f,goToRecents:x,changeAssetsView:v,toggleShowFolders:(0,H.NR)({onBoth:e=>()=>b(e),onKeyDown:()=>_})}}(n),B=s.useMemo(()=>{let e=[];return e.push(eC({text:(0,p.t)("design_systems.assets_panel.dropdown_type_all_libraries"),checked:m===g.S5.Libraries||m===g.S5.Search&&!h,onClick:O})),E&&e.push(eC({text:(0,p.t)("design_systems.assets_panel.dropdown_type_recents"),checked:m===g.S5.Recents&&o.length>0,onClick:R})),S&&e.push(eC({text:T.name,checked:m!==g.S5.Recents&&h===T.libraryKey,onClick:()=>M(T.libraryKey)})),(I.length>0||N.length>0)&&e.push((0,i.jsx)(es.wv,{})),e.push(...I.map(({name:e,libraryKey:t})=>eC({text:e,isApproved:(0,ec.sF)(t),checked:m!==g.S5.Recents&&h===t,onClick:()=>M(t)}))),e.push(...N.map(({name:e,libraryKey:t})=>eC({text:e,isApproved:(0,ec.sF)(t),isPreset:!0,checked:m!==g.S5.Recents&&h===t,onClick:()=>M(t)}))),A.length>0&&(e.push((0,i.jsx)(es.wv,{})),e.push((0,i.jsx)("div",{className:ei()(ea.s.textBodyMedium.$,"asset_panel_settings--optionSubtitle--9d2Ib"),children:(0,p.t)("design_systems.libraries_modal.connected_project_libraries")})),e.push(...A.map(({name:e,libraryKey:t})=>eC({text:e,isApproved:(0,ec.sF)(t),checked:m!==g.S5.Recents&&h===t,onClick:()=>M(t)})))),e.push((0,i.jsx)(es.wv,{})),w||(e.push(eC({text:(0,p.t)("design_systems.assets_panel.view_toggle_grid"),checked:b===ex.$H.GRID,onClick:D(ex.$H.GRID),icon:(0,i.jsx)(Q.t,{})})),e.push(eC({text:(0,p.t)("design_systems.assets_panel.view_toggle_list"),checked:b===ex.$H.LIST,onClick:D(ex.$H.LIST),icon:(0,i.jsx)($.Z,{})}))),t&&e.push(eC({text:(0,p.t)("design_systems.assets_panel.view_toggle_show_folders"),checked:u,onClick:z(!u),icon:(0,i.jsx)(ee.e,{})})),e},[m,h,O,E,S,I,N,A,t,o.length,R,T,M,b,D,u,z,w]),G=s.useMemo(()=>({...e,maxHeight:l}),[l,e]);return X.createPortal((0,i.jsx)(es.X3,{className:ei()(eo.Dm,"asset_panel_settings--dropdown--gs7K3"),positionAbsolute:!0,style:G,id:ey,hideDropdown:r,autofocusPrevElementOnEsc:!0,children:B}),document.body)}function eC({text:e,isApproved:t,isPreset:n,checked:s,onClick:a,icon:r}){return(0,i.jsx)(es.MM,{className:"asset_panel_settings--dropdownOption--kJ-6M",checked:!!s,onClick:a,children:(0,i.jsxs)("div",{className:"asset_panel_settings--optionContentContainer--iAJ6X",children:[(0,i.jsx)("div",{className:"asset_panel_settings--optionContent---2nCX ellipsis--ellipsis--Tjyfa",children:r?(0,i.jsxs)("div",{className:"asset_panel_settings--optionWithLeftIconContainer--QP3Gm",children:[r,(0,i.jsx)("span",{children:e})]}):e}),(0,i.jsx)("div",{className:"asset_panel_settings--optionRightIcon--zi-2v",children:t?(0,i.jsx)(ed.FX,{}):n?(0,i.jsx)("div",{className:ea.s.ml2.$,children:(0,i.jsx)(eu.E,{libraryKey:void 0})}):null})]})},e)}var ej=n(46329),ek=n(293422),ew=n(873291),eE=n(25907),eT=n(90383),eS=n(980852),eI=n(674524),eN=n(171660),eA=n(113985),eL=n(76404),eM=n(835307),eO=n(76365),eR=n(25870),eP=n(271899),eD=n(946847),eF=n(288971),ez=n(38119),eB=n(659639),eG=n(712242),eU=n(654200),eV=n(132078),eH=n(6380);let eK="visual_search_assets_panel";function eW({onDismiss:e}){let[t,n]=s.useState(!1),{width:a}=(0,eH.G)(),r=Math.min(.7*a,240),l=(0,k.d4)(eO.vD),o=(0,eM.Fk)((e,t)=>{let n=e.get(t);return n?.name},l),{getConfig:d}=(0,c.I7)("assets_panel_visual_search"),u="component_filter"===d().get("variant","control"),m=s.useCallback(()=>{l&&((0,eF.$I)({moduleToOpen:{type:"custom",module:(0,_.P5)()?(0,i.jsx)(ez.z6,{initialSearchTagType:u?eB.qG.COMPONENTS:void 0,isVisualSearch:!0,closeOnEscape:!0}):(0,i.jsx)(eG.WS,{}),beforeModuleOpen:()=>(0,eG.jp)(eA.G4.ASSETS_PANEL_VISUAL_SEARCH),name:eD.Sn.VISUAL_SEARCH},trackingData:{source:eA.G4.ASSETS_PANEL_VISUAL_SEARCH}}),e())},[l,e,u]),h=s.useCallback(t=>{(0,eF.$I)({moduleToOpen:{type:"custom",module:(0,_.P5)()?(0,i.jsx)(ez.z6,{initialSearchTagType:u?eB.qG.COMPONENTS:void 0,isVisualSearch:!0,closeOnEscape:!0}):(0,i.jsx)(eG.WS,{}),beforeModuleOpen:()=>(0,eG.qF)(eA.G4.ASSETS_PANEL_VISUAL_SEARCH,t),name:eD.Sn.VISUAL_SEARCH},trackingData:{source:eA.G4.ASSETS_PANEL_VISUAL_SEARCH}}),e()},[e,u]),f=s.useMemo(()=>{if(!l)return null;let e=(0,eS.getActiveTSSceneGraph)().get(l);if(!e)return null;let t=(0,eA.T1)(e);return t?t.startsWith("data:image")?t:`data:image/png;base64,${t}`:null},[l]),g=s.useCallback(e=>{e.preventDefault(),e.stopPropagation();let t=e.clipboardData?.files;t?.length===1&&t[0]?.type.startsWith("image/")&&h(t[0])},[h]);s.useEffect(()=>{if(t)return document.addEventListener("paste",g),()=>document.removeEventListener("paste",g)},[g,t]);let x=s.useCallback(e=>(!!e.metaKey||!!e.ctrlKey)&&"Enter"===e.key&&(e.preventDefault(),e.stopPropagation(),m(),!0),[m]),y=(0,eI.fo)(void 0,"keydown",e=>{x(e.event)&&e.accept()});s.useEffect(()=>(document.addEventListener("keydown",x),()=>{document.removeEventListener("keydown",x)}),[x]),s.useEffect(()=>{let t=t=>{let n=t.target;n.closest(".modalContainer")||n.closest("canvas")||e()};return document.addEventListener("mousedown",t),()=>{document.removeEventListener("mousedown",t)}},[e]);let v=s.useMemo(()=>o||(0,p.tx)("design_systems.assets_panel.visual_search.select_layer"),[o]),b=s.useMemo(()=>l?(0,i.jsx)("div",{className:"xl010v5",children:(0,i.jsx)(eP.Bf,{guid:l})}):(0,i.jsx)(ew.H,{}),[l]);return(0,eL.O1)(()=>(e(),!0),eL.KD.MODAL),(0,i.jsx)(eR.vL,{name:"visual_search_modal",handleKeyDown:y,focusOnMount:!0,children:(0,i.jsx)(eV.NJ,{className:"visual_search_button--modalContainer--RU-Vk pointer_modal--walkThroughModal--6eTVS pointer_modal--pointerModal--wrpFz",dismissModal:e,width:r,targetKey:eK,arrowPosition:eU.F_.TOP,backgroundColor:"var(--color-bg, $figmaFGWhite)",shouldNotWrapInParagraphTag:!0,noAnimation:!0,pointerOffsetOverride:r-12,children:(0,i.jsxs)("div",{className:"x78zum5 xdt5ytf x6s0dn4",children:[(0,i.jsxs)("div",{className:"x78zum5 x1q0g3np xl56j7k x6s0dn4 xod5an3 x1s2d0ae xxk0z11",children:[b,(0,i.jsx)(eN.E,{fontWeight:"medium",truncate:!0,children:v})]}),f?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"xh8yej3 xekxv85 x19y5rnk x1v8gsql x78zum5 xdt5ytf x6s0dn4 xl56j7k",children:(0,i.jsx)("img",{src:f||"",alt:"Preview",className:"xeu0yli x14r61f x1tamke2 x19kjcj4"})}),(0,i.jsx)("div",{className:"x78zum5 x13a6bvl xh8yej3 x14vqqas",children:(0,i.jsxs)(ek.$n,{variant:"secondary",onClick:m,children:[(0,i.jsx)(eN.E,{children:(0,p.tx)("design_systems.assets_panel.visual_search.search")}),(0,i.jsx)(ek.$n.Shortcut,{children:"\u2318\u23CE"})]})})]}):(0,i.jsxs)("div",{className:"xmkeg23 xbsl7fq x7z60cl xdnk06y x192jxwq x2b8uid x1ypdohk xzlr0fm xh8yej3",children:[(0,i.jsx)("input",{type:"file",accept:"image/*",className:"x1s85apg",id:"visual-search-file-input",onChange:e=>{let t=e.target.files?.[0];t&&h(t)}}),(0,i.jsx)("button",{className:"xh8yej3",onClick:e=>{e.preventDefault(),e.stopPropagation(),document.getElementById("visual-search-file-input")?.click()},children:(0,i.jsx)("div",{className:"xggk2y7",onDragOver:e=>{e.preventDefault(),e.stopPropagation()},onDrop:e=>{e.preventDefault(),e.stopPropagation();let t=e.dataTransfer.files?.[0];t&&h(t)},onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),children:(0,i.jsxs)("div",{className:"x78zum5 xdt5ytf x6s0dn4 xl56j7k x1jnr06f",children:[(0,i.jsx)(eE.Z,{}),(0,i.jsx)(eN.E,{children:(0,p.tx)("design_systems.assets_panel.visual_search.drag_or_upload")})]})})})]})]})})})}function eq(){let[e,t]=s.useState(!1),{setKeyboardNavigationElement:n}=(0,R.M3)({path:[V.ON.HEADER,V.my.SEARCH_AND_FILTER],column:V.Wy.VISUAL_SEARCH_BUTTON});return(0,i.jsxs)(Y.o,{eventListeners:e?["onMouseDown"]:[],children:[(0,i.jsx)(Z.d,{"data-onboarding-key":eK,ref:n,onClick:()=>{t(!e),L.az.trackDefinedEvent("fragment_search.assets_panel_visual_search_button_clicked",{})},"aria-expanded":e,"aria-label":(0,p.t)("design_systems.assets_panel.visual_search.label"),children:(0,i.jsx)(eT.A,{})}),e&&(0,i.jsx)(eW,{onDismiss:()=>t(!1)})]})}let eX=new class{constructor(){this.format=e=>{switch(e){case g.t6.Blocks:return(0,p.t)("design_systems.assets_panel.blocks");case g.t6.Libraries:return(0,p.t)("design_systems.assets_panel.dropdown_libraries")}}}};function eY(){let{getPage:e,getLibrary:t}=(0,j.G)(),{currentView:n,libraryKey:r,pageId:l}=(0,g.wV)(),o=s.useMemo(()=>e(r,l),[e,r,l]),c=s.useMemo(()=>t(r),[t,r]),u=!(0,m.Y1)()&&n!==g.S5.Search,[h,f]=(0,d.fp)(g.aK),x=(0,y.cJ)()&&n!==g.S5.Search&&n!==g.S5.Recents?[g.t6.Blocks,g.t6.Libraries]:void 0;return(0,i.jsxs)("div",{className:"x78zum5 xdt5ytf xw6ie8e",children:[(0,i.jsx)(eQ,{library:c}),!!x&&(0,i.jsx)(e$,{legend:(0,p.tx)("design_systems.assets_panel.assets"),value:h,onChange:e=>{(0,C.hB)(()=>f(e))},children:x.map(e=>(0,i.jsx)(a.RT,{value:e,label:eX.format(e)},e))}),u&&(0,i.jsx)(eZ,{page:o})]})}function eZ({page:e}){let{currentView:t}=(0,g.wV)(),n=(0,y.cJ)(),[s]=(0,d.fp)(g.aK),a=(0,ej.I)(),r=n&&t===g.S5.Libraries&&s===g.t6.Libraries;return n&&(s===g.t6.Blocks&&t!==g.S5.Recents||s===g.t6.Libraries&&a)?null:(0,i.jsxs)("div",{className:"x78zum5 x1q0g3np x6s0dn4",children:[(0,i.jsx)(b.Q,{page:e}),r&&(0,i.jsx)("div",{className:"x15bdqvn xt970qd x1kxq6ma",children:(0,i.jsx)(f.b,{entrypoint:x.r6.ASSETS_PANEL_BUTTON,hideIfNoUpdates:!1})})]})}function eJ(){return(0,i.jsx)(f.b,{entrypoint:x.r6.ASSETS_PANEL_BUTTON,hideIfNoUpdates:!1,recordingKey:"assetPanelHeader"})}function eQ({library:e}){let{currentView:t,visualAssetsType:n}=(0,g.wV)(),s=(0,_.Ko)(),{getConfig:a}=(0,c.I7)("assets_panel_visual_search"),l=(0,u.b)(),d=(0,h.HY)(),m=l||d,{closeOverlay:f}=(0,v.h)(),x=!(0,y.cJ)()&&s&&"control"!==a().get("variant","control");return(0,i.jsxs)("div",{...{0:{className:"xrvj5dj x52fmzj x1eavx82 x1on1db2 x1jnr06f x6s0dn4 xet2fuk x21xpn4 xt970qd xbfr8j9"},1:{className:"xrvj5dj x52fmzj x1eavx82 x1on1db2 x1jnr06f x6s0dn4 xet2fuk x21xpn4 xt970qd xbfr8j9 xexx8yu xnuq7ks x18d9i69 x163pfp x1o1pmfc"}}[!!m<<0],children:[(0,i.jsx)("div",{...{0:{className:"x1ms6mhf xgkxs2y"},1:{className:"x1ms6mhf xgkxs2y x5jayri"}}[!!m<<0],children:(0,i.jsx)(K,{libraryName:e?.name})}),x&&(0,i.jsx)("div",{className:"x1ms6mhf x1npkx4u",children:(0,i.jsx)(eq,{})}),(0,i.jsx)("div",{...{0:{className:"x78zum5 x6s0dn4 x1ms6mhf x1npkx4u"},1:{className:"x78zum5 x6s0dn4 x1ms6mhf x1k3v4rp"}}[!!x<<0],children:(0,i.jsx)(ev,{includeFolderSetting:[g.S5.Libraries,g.S5.Pages,g.S5.Assets].includes(t)})}),l&&(0,i.jsx)("div",{className:"x1ms6mhf x1k3v4rp",children:(0,i.jsx)(r.K,{"aria-label":(0,p.t)("design_systems.assets_panel.close_inserts"),onClick:f,children:(0,i.jsx)(o.A,{})})}),t===g.S5.Search&&e&&(0,i.jsx)("div",{className:"x78zum5 xeuugli x7sv70a xgkxs2y",children:(0,i.jsx)(W,{library:e})}),t===g.S5.Search&&n&&(0,i.jsx)("div",{className:"x78zum5 xeuugli x7sv70a xgkxs2y",children:(0,i.jsx)(q,{visualAssetsType:n})})]})}function e$({legend:e,value:t,onChange:n,children:s}){return(0,i.jsx)("div",{className:"xz9dl7a xyfqnmn xwib8y2 xnm25rq x1xmf6yo x178xt8z x13fuv20 x16ufvko",children:(0,i.jsx)(a.bL,{legend:(0,i.jsx)(l.q,{children:e}),value:t,onChange:n,children:s})})}},152095:(e,t,n)=>{function i({elementMinSize:e,spaceAvailable:t,gap:n}){return Math.max(1,Math.floor((t+n)/(e+n)))}function s({numElements:e,spaceAvailable:t,gap:n}){return Math.floor((t-(e-1)*n)/e)}function a({width:e,widthToHeightRatio:t=1,maxHeight:n}){let i=Math.floor(e/t);return void 0===n?Math.max(0,i):Math.max(0,Math.min(n,i))}n.d(t,{BE:()=>i,hg:()=>a,y5:()=>s})},83245:(e,t,n)=>{n.d(t,{z:()=>en});var i=n(104076),s=n(716976),a=n(237420),r=n(684742),l=n(286138),o=n(29785),d=n(812714),c=n(795033),u=n(776111),p=n(511570),m=n.n(p),h=n(328341),f=n(140490),g=n(641518),x=n(587114),_=n(915123),y=n(848561),v=n(192075),b=n(911990),C=n(675477),j=n(727612),k=n(380917),w=n(258807),E=n(499036),T=n(495905),S=n(679437),I=n(211862),N=n(567325),A=n(549090),L=n(659),M=n(842013),O=n(76365),R=n(564914),P=n(955715),D=n(368680),F=n(648952),z=n(435119),B=n(573278),G=n(985929),U=n(658749),V=n(89184),H=n(854684),K=n(622659),W=n(674355),q=n(243021),X=n(568383),Y=n(927671),Z=n(91704),J=n(727954),Q=n(207116),$=n(2972),ee=n(807474),et=n(58178);function en(e){return(0,i.jsx)(f.u,{label:"AssetPanelTile",children:(0,i.jsx)(ei,{...e})})}function ei({asset:e,fileName:t,sourceForTracking:n,thumbLayout:o,thumbHeight:p,thumbWidth:h,displayType:f,viewMode:_,sectionNameForTracking:b,sectionPosition:C,sectionDepth:j,hideInlineName:w,keyboardPosition:N,isFirstTile:A=!1,isExample:L=!1,keyboardPanelDepth:M=0,disableClickPropagation:R=!1,libraryItemTileProps:P,isVisualAsset:z=!1,onSuccessfulAssetInsert:K}){let W=s.useContext(F.U),{isFlyoutOpen:Y}=(0,B.JA)(),en=(0,I.tS)(),ei=(0,c.md)(X.TG),{currentView:ea}=(0,$.wV)(),er=s.useMemo(()=>L??(0,E.Nz)(e,{isPreset:(0,T.lR)(e,ei)}),[e,L,ei]),el=(0,G.J)(e,C,b),eo=(0,V.n)(e),ed=(0,S.u)({canSwap:!er,openFileKey:en??"",sourceForTracking:"Asset Panel",insertAsChildOfCanvas:!0}),ec=s.useCallback(()=>{Y&&!eo&&el()},[Y,eo,el]),eu=s.useCallback(()=>{Y||W?.onOpenFlyout(e,C,b,j,n)},[Y,W,e,C,b,j,n]),ep=s.useCallback(e=>{R&&e.stopPropagation(),eu()},[R,eu]),em=`assetPanelTile.${C}`,eh=g.rf(em,"click",ep),ef=s.useMemo(()=>({...N,path:[J.ON.CONTENTS,J.lM.ASSETS+M,...N.path]}),[N,M]),{folderPath:eg}=(0,$.wV)(),[ex]=(0,ee.ye)(),e_=ea===$.S5.Assets&&eg&&ex&&(eg?.length??0)>M,{setKeyboardNavigationElement:ey,keyboardNavigationItem:ev}=(0,y.M3)({...ef,id:(0,k.V)(e),onFocus:ec,disabled:e_});(0,Q.C0)(ev,A&&ea===$.S5.Assets&&!e_);let[eb]=(0,ee.MA)(),eC=(0,x.N)({colIndex:ef.column,rowIndex:ef.path[ef.path.length-1],isList:"list"===eb,keyboardNavigationItem:ev,onComponentInsertSwap:ed,onOpenFlyout:eu,item:e,sectionNameForTracking:b,sectionPosition:C,shouldRefocusAfterKeyboardInsert:ea===$.S5.Recents,sourceForTracking:n===D.tM?n:U.mZ}),ej=(0,H.F)(e,q.K.ASSETS_PANEL,C,b),ek=function(e,t){let n=(0,a.d4)(O.dK),i=e.isLocal&&(0,u.PN)()?(0,Z.eT)(e.node_id,n).join("-"):e.node_id;return g.rf(`componentThumb.${i}`,"contextmenu",e=>{t(e)})}(e,ej);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.E,{onClick:eh,className:m()(et.QT,et.x6,{[et.Vw]:z}),ref:ey,htmlAttributes:{onKeyDown:eC,onContextMenu:ek},"aria-describedby":"asset-panel-tile-hint",children:(0,i.jsx)(es,{asset:e,disableClickPropagation:R,displayType:f,fileName:t,hideInlineName:w,isVisualAsset:z,libraryItemTileProps:P,onSuccessfulAssetInsert:K,sectionDepth:j,sectionNameForTracking:b,sectionPosition:C,sourceForTracking:n,thumbHeight:p,thumbLayout:o,thumbWidth:h,viewMode:_})}),(0,d.kc)().dse_fpl_wave_2&&(0,i.jsx)(l.E,{id:"asset-panel-tile-hint","aria-hidden":!0,children:(0,v.t)("design_systems.assets_panel.asset_tile_sr_hint")})]})}function es({asset:e,fileName:t,sourceForTracking:n,thumbHeight:r,thumbWidth:l,sectionNameForTracking:p,sectionPosition:f,sectionDepth:g,hideInlineName:x,displayType:y,libraryItemTileProps:v,isVisualAsset:k,onSuccessfulAssetInsert:E}){let S=(0,a.wA)(),I=(0,A.I)(L.Cn.AssetsPanel),D=(0,a.d4)(O.dK),F=(0,a.d4)(M.F9),B=(0,c.md)(z.T),G=I.searchOption?.type===R.IS.ALL,H=(0,j.fV)(e.library_key),q=(0,T.fd)(e.library_key),X=(0,Y.H)(e.library_key),J=(0,U._9)(e.library_key,"asset_panel_visual_assets"),Q=G&&(H||q||X),$=s.useRef(null),ee=(0,N.kH)(e.name),en=(0,_.NG)({text:ee,textRef:$}),ei=s.useRef(null),es=(0,_.NG)({text:t??"",textRef:ei}),ea=!!I.query,er=(0,V.n)(e),el=(0,h.ZC)(er);s.useEffect(()=>{er&&!el&&S(C.jD())},[er,S,el]);let eo=e.isLocal&&(0,u.PN)()?(0,Z.eT)(e.node_id,D).join("-"):e.node_id,ed="Local components"===p||"Local private components"===p||e.isLocal,ec="grid"===y,eu=!x&&ec,ep=(0,d.kc)().api_asset_search_with_scores,em=(0,K.Y)(e),eh=s.useCallback(()=>{(0,P.$z)(),X&&J(!0),E?.()},[J,X,E]),ef={showName:!0,height:r,width:l,draggable:s.useMemo(()=>({sourceForTracking:n,clickToInsert:!1,afterSuccessfulInsert:eh,sectionNameForTracking:p,sectionDepth:g}),[eh,g,p,n]),shouldHideTooltip:!0,recordingNodePath:eo,isSearch:ea,useBaseTile:!0,hideNameOverlay:eu,numVariants:em,displayType:ec?"grid":"list-no-padding",sectionPosition:f,showTooltipImmediately:!1,fileName:en||es?t:void 0,alwaysShowBorder:!1,thumbWrapperClassName:et.wi},eg=ed?(0,i.jsx)(W.MT,{item:e,isFilePublished:F,...ef}):(0,i.jsx)(W.lX,{item:e,...ef,...v});return(0,i.jsxs)("div",{className:k?et.NP:ec?et.K2:et.iE,children:[(0,i.jsx)("div",{className:m()(ec?et.QX:et.u2,{[et.Gr]:er,[et.HR]:er&&B}),children:eg}),eu&&(0,i.jsxs)("div",{className:et.Bm,style:{width:l-2},children:[(0,i.jsx)("span",{className:et.UU,ref:$,children:ee}),(0,i.jsx)("div",{className:et.OW,children:(0,i.jsx)(o.e,{"aria-hidden":!0})})]}),eu&&!!t&&(0,i.jsxs)(b.Y,{spacing:0,direction:"horizontal",height:"hug-contents",children:[(0,i.jsx)("div",{className:m()(et.Md,et.Rm),ref:ei,style:Q?{maxWidth:l-w.J-2}:{width:l-2},children:t}),Q&&(0,i.jsx)(w.P,{libraryKey:e.library_key,showPresetTooltip:!0,tooltipDelay:500,tooltipLocation:"below",compact:!0})]}),ep&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:m()(et.Md,et.Rm),style:Q?{maxWidth:l-w.J-2}:{width:l-2},children:"Score: "+("score"in e?e.score?.toFixed(2)??"N/A":"N/A")}),(0,i.jsx)("div",{className:m()(et.Md,et.Rm),style:Q?{maxWidth:l-w.J-2}:{width:l-2},children:"(L:"+(e.lexical_score?.toFixed(2)??"N/A")+", AI:"+(e.ai_score?.toFixed(2)??"N/A")+", F:"+(e.fuse_score?.toFixed(2)??"N/A")+")"})]})]})}},290834:(e,t,n)=>{n.d(t,{wl:()=>T,Hw:()=>w,Ij:()=>E});var i=n(104076),s=n(716976),a=n(350019),r=n(812714),l=n(795033),o=n(983500),d=n(380917),c=n(207116),u=n(613997),p=n(83245),m=n(328341),h=n(6380),f=n(92722),g=n(113877),x=n(794981);let _=(0,o.jz)(f.Nz),y=(0,o.jz)(f.cP),v=(0,o.jz)(f.FX),b=(0,o.jz)(g.$c),C=(0,o.jz)(g.d5),j=(0,o.jz)(f.ZI),k=(0,l.eU)(!1);function w(e,t,n={}){if("list"===t)return j;let i=e;return n.hideAssetName||(i+=_),n.showFileName&&(i+=y),n.hasTopPadding&&(i+=v),n.showAiDebugScores&&(i+=2*(0,o.jz)(f.uY)),i}function E(e,t,n,s,a,l,o){let m=[],h="list"===s.displayType?"listitem":"gridcell";for(let u=0;u<e.length;u+=t){let f=e.slice(u,u+t),g=[];f.forEach((e,r)=>{if(e){let m=u+r,f=o?.getFileName?.(e);g.push((0,i.jsx)("div",{role:h,children:(0,i.jsx)(p.z,{asset:e,fileName:f,isExample:o?.isExample,isFirstTile:o?.includesFirstTile&&0===m,keyboardPanelDepth:o?.keyboardPanelDepth,keyboardPosition:(0,c.pg)(l,m,t,o?.hasHeader),sectionDepth:o?.depth,sectionNameForTracking:a,sectionPosition:u+r,...s},`${n}-${(0,d.V)(e)}`)}))}}),m.push({element:(0,i.jsx)("div",{className:"list"===s.displayType?x.OS:0===u?x.c:x.wt,children:g}),key:`${n}:row-${u/t}`,keys:f.map(e=>(0,d.V)(e)),height:w(s.thumbHeight,s.displayType,{showFileName:!!o?.getFileName,hasTopPadding:0!==u,showAiDebugScores:!!(0,r.kc)().api_asset_search_with_scores})})}return m.length>0&&(m.unshift({element:(0,i.jsx)(u.hK,{height:b}),key:`${n}:spacer-top`,height:b,ariaHidden:!0}),m.push({element:(0,i.jsx)(u.hK,{height:C}),key:`${n}:spacer-bottom`,height:C,ariaHidden:!0})),m}function T({elements:e,hideScrollbar:t,initialScrollTop:n,onScroll:r,anchorScroll:o,role:d}){let c=s.useRef(null),p=(0,a.Te)({count:e.length,getScrollElement:()=>c.current,estimateSize:t=>e[t].height,getItemKey:t=>e[t].key,paddingEnd:8,overscan:6,initialOffset:n}),f=function({scrollContainerRef:e,initialScrollTop:t,onScroll:n,enabled:i,virtualizer:a,getKeys:r}){let[l,o]=s.useState(t??e.current?.scrollTop),[d,c]=s.useState(e.current?.scrollHeight),{width:u}=(0,h.G)(),p=(0,m.ZC)(u),f=s.useCallback((e,t)=>{if(!t)return{keys:[],offset:void 0};let n=e.getVirtualItems().find(e=>e.start>=t);return n?{keys:r(n),offset:n.start-t}:{keys:[],offset:void 0}},[r]),[g,x]=s.useState(()=>f(a,t??e.current?.scrollTop)),_=s.useCallback((e,t)=>{n?.(e,t),i&&(o(e),x(f(a,e)))},[i,f,n,a]);return s.useEffect(()=>{let t=p&&u&&p!==u,n=e.current?.scrollHeight&&d&&e.current?.scrollHeight!==d;if(t&&c(e.current?.scrollHeight),void 0!==l&&void 0!==g.offset&&i&&t&&n){let t=a.getVirtualItems().find(e=>r(e).some(e=>g.keys.includes(e)));if(t)a.scrollToOffset(t.start-g.offset);else{let t=l/d,n=e.current.scrollHeight*t;a.scrollToOffset(n)}}},[g.keys,g.offset,i,r,p,e,d,l,a,u]),_}({enabled:o,scrollContainerRef:c,initialScrollTop:n,onScroll:r,virtualizer:p,getKeys:s.useCallback(t=>{let n=e[t.index];return n?n.keys??[n.key]:[]},[e])}),[g,x]=(0,l.fp)(k);return s.useEffect(()=>{if(!g)return;let t=e.findIndex(e=>"preset_libraries_header"===e.key);-1!==t&&(p.scrollToIndex(t,{align:"start"}),x(!1))},[e,p,x,g]),(0,i.jsx)(u.xU,{scrollContainerRef:c,hideScrollbar:t,initialScrollTop:n,onScroll:f,children:(0,i.jsx)("div",{style:{height:`${p.getTotalSize()}px`,width:"100%",position:"relative"},role:d,children:p.getVirtualItems().map(t=>{let n=e[t.index];return n?(0,i.jsx)("div",{style:{position:"absolute",top:0,left:0,width:"100%",transform:`translateY(${t.start}px)`},role:"grid"===d?"row":void 0,"aria-hidden":n.ariaHidden,children:n.element},t.key):null})})})}},913664:(e,t,n)=>{n.d(t,{F:()=>C,r:()=>b});var i=n(999083),s=n(926653),a=n(109527),r=n(192075),l=n(499036),o=n(567325),d=n(210954),c=n(564914),u=n(905009),p=n(727954),m=n(455582),h=n(244920),f=n(89221);function g(e){let t=(0,o.ke)(e.name),n=e.type===c.PW.RESPONSIVE_SET?e.containingFrame?.name:e.containing_frame?.name;return n?[n,...t]:t}function x(e,t="",{isPreset:n,sortingFn:i}={isPreset:!1,sortingFn:void 0}){let s=new Map,r=[];i?e.sort(i):(0,l.gO)(e,{sortFn:e=>g(e).join("/"),priorityFn:e=>(0,l.Nz)(e,{isPreset:n})});let o=Object.create(null);for(let n of e){let e=g(n),i="";for(let l=0;l<e.length;l++){let d=e[l],c=i,u=l<e.length-1;i+=d+(u?"/":"");let p=null;if(o[c]&&(p=o[c]),u){let n=o[i]??{name:d,key:`${t}-${e.slice(0,l+1).join("/")}`,items:[],subtrees:new Map,type:a.l$.NAME_GROUP,previewAsset:void 0};o[i]||(o[i]=n,p?p.subtrees.set(d,n):s.set(d,n))}u||(p?p.items.push(n):r.push(n))}}return s.forEach(e=>{(function e(t){t.previewAsset=j(t),t.subtrees.forEach(t=>e(t))})(e)}),{sortedItems:r,sortedSubtrees:s}}function _(e,t,{isPreset:n}){let i=new Map,{itemsByPageId:s,pageNamesByPageId:o,itemsWithoutPage:d}=(0,u.tz)(e,e=>e),{itemsByPageId:c,pageNamesByPageId:m,itemsWithoutPage:h}=(0,u.tz)(t,e=>e),f={...o,...m};(0,u.fM)(s,f,d),(0,u.fM)(c,f,h,!0);let g=Object.keys(f);for(let e of((0,l.gO)(g,{sortFn:e=>f[e],priorityFn:e=>(0,l.dS)(f[e],{isPreset:n})}),g)){let t=f[e],o=e in s?s[e]:void 0,d=o,u=[],m=null,h=null;if(o&&o.length>0){d=o.filter(e=>!(0,l.Nz)(e,{isPreset:n}));let{sortedItems:e,sortedSubtrees:t}=x(u=o.filter(e=>(0,l.Nz)(e,{isPreset:n})),"examples",{isPreset:n});u.length>0&&(h={name:(0,r.t)("design_systems.assets_panel.examples"),items:e,subtrees:t,key:p.nE,type:a.l$.COMPONENTS,previewAsset:void 0})}if(d&&d.length>0){let{sortedItems:e,sortedSubtrees:t}=x(d,"components",{isPreset:n});m={name:(0,r.t)("design_systems.assets_panel.components"),items:e,subtrees:t,key:p.c_,type:a.l$.COMPONENTS,previewAsset:void 0}}let g=null,_=c[e];if(_&&_.length>0){let{sortedItems:e,sortedSubtrees:t}=x(_,"templates",{isPreset:n});g={name:(0,r.t)("design_systems.assets_panel.templates"),items:e,subtrees:t,key:p.JS,type:a.l$.TEMPLATES,previewAsset:void 0}}let{sortedItems:y,sortedSubtrees:v}=x([...u??[],...d??[],..._??[]],"assets",{isPreset:n}),b={name:t,items:y,subtrees:v,key:p.Mk,type:a.l$.COMPONENTS,previewAsset:void 0},C={name:t,id:e,previewAsset:function({componentSubtree:e,exampleSubtree:t,templateSubtree:n}){let i=j(t),s=j(n),a=j(e);return i||s||a}({componentSubtree:m,exampleSubtree:h,templateSubtree:g}),components:m,examples:h,templates:g,assets:b,type:p.yW.DESIGN};i.set(e,C)}return i}function y(e,t,n,s){let l=new Map,{itemsByPageId:o,pageNamesByPageId:d,itemsWithoutPage:c}=(0,u.tz)(e,e=>({containing_frame:e.containingFrame??void 0}));(0,u.fM)(o,d,c);let m=Object.keys(d);for(let e of((0,i.v7)(m,e=>d[e]),m)){let i=d[e],s=o[e]??[];if(!i||0===s.length)continue;let{sortedItems:r,sortedSubtrees:c}=x(s,"assets",{sortingFn:n}),u={name:i,items:r,subtrees:c,key:p.Mk,type:a.l$.RESPONSIVE_SETS,previewAsset:void 0},m={name:i,id:e,previewAsset:t[e]??j(u),assets:u,type:p.yW.SITE,numAssets:function e(t){return t.items.length+Array.from(t.subtrees.values()).reduce((t,n)=>t+e(n),0)}(u)};l.set(e,m)}if(s){let e=(0,f.u)();if(e.length>0){let t={name:(0,r.t)("design_systems.assets_panel.site_blocks.embeds"),id:"embeds",embeds:e,previewAsset:void 0,assets:{name:"",items:[],subtrees:new Map,key:"EMPTY_ASSETS_NOT_USED",type:a.l$.COMPONENTS,previewAsset:void 0},type:p.yW.SITE,numAssets:e.length};l.set("embeds",t)}}return l}function v(e,t){let{allItems:n,publishedItems:i,privateItems:s,numPublished:a}=e;return a>0&&t&&s.length>0?i:n}function b(e){let t=Array.from(e.items.values());for(let[n,i]of e.subtrees.entries())t.push(...b(i));return t}function C({localComponentsInfo:e,localTemplatesInfo:t,localThumbnailUrl:n,localThumbnailShouldCover:i,subscribedComponentsInfo:l,subscribedCommunityComponentsInfo:o,canPublish:c,openFileKey:u,openFileLibraryKey:g,approvedLibraryKeysByResourceType:b,siteKitsAssetData:C,siteKitThumbnailComponents:j,siteKitSortingFn:k,presetLibraryKeys:w}){let{libraryKeyToSubscribedItems:E,subscribedFiles:T}=l,S=function({subscribedFiles:e,libraryKeyToSubscribedComponents:t,approvedLibraryKeysByResourceType:n}){let i=new Map;for(let a of(0,m.uo)(e,n)){if(!a.library_key)continue;let e=(0,s.l)(a.library_key),n=t[e]??[],r=_(n,[],{isPreset:!1}),l={name:a.name,libraryKey:(0,s.l)(a.library_key??""),pages:r,numComponents:n.length,numTemplates:0,thumbnailUrl:a.thumbnail_url_override??a.thumbnail_url,thumbnailShouldCover:!!a.thumbnail_guid,type:p.yW.DESIGN,libraryType:"team"};i.set(e,l)}return i}({subscribedFiles:[...T],libraryKeyToSubscribedComponents:E,approvedLibraryKeysByResourceType:b}),I=function(e,t){if(!e)return new Map;let{libraryKeyToSubscribedItems:n,subscribedHubFiles:i}=e??{hubFileIdToSubscribedItems:{},subscribedHubFiles:[]},a=new Map;for(let e of(0,m.LH)(i)){if(!e.library_key)continue;let i=(0,s.l)(e.library_key),r=n[i]??[],l=_(r,[],{isPreset:t.has(e.library_key)});if(r.length>0){let t={name:(0,d.oA)(e),libraryKey:(0,s.l)(e.library_key??""),pages:l,numComponents:r.length,numTemplates:0,thumbnailUrl:e.thumbnail_url,thumbnailShouldCover:!0,type:p.yW.DESIGN,libraryType:"community"};a.set(i,t)}}return a}(o,w),N=function(e,t,n,i,s,l,o,d){let{privateItems:c,numPublished:u}=e,{privateItems:m,numPublished:h}=t??{privateItems:[],numPublished:0},f=u+h>0&&s&&c.length+m.length>0,g=v(e,s),y=t?v(t,s):[],b=!!d?.has(o),C=_(g,y,{isPreset:b}),j={name:(0,r.t)("design_systems.assets_panel.created_in_this_file"),libraryKey:o,pages:C,numComponents:g.length,numTemplates:y.length,thumbnailUrl:n,thumbnailShouldCover:i,type:p.yW.DESIGN,libraryType:"team"};if(f){let e=null;if(c.length>0){let{sortedItems:t,sortedSubtrees:n}=x(c,"p_components",{isPreset:b});e={name:(0,r.t)("design_systems.assets_panel.components"),items:t,subtrees:n,key:p.c_,type:a.l$.COMPONENTS,previewAsset:void 0}}let t=null;if(m.length>0){let{sortedItems:e,sortedSubtrees:n}=x(m,"p_templates",{isPreset:b});t={name:(0,r.t)("design_systems.assets_panel.templates"),items:e,subtrees:n,key:p.JS,type:a.l$.TEMPLATES,previewAsset:void 0}}let{sortedItems:n,sortedSubtrees:i}=x([...c??[],...m??[]],"assets",{isPreset:b}),s={name:(0,r.t)("design_systems.assets_panel.assets"),items:n,subtrees:i,key:p.Mk,type:a.l$.COMPONENTS,previewAsset:void 0},l={name:(0,r.t)("design_systems.assets_panel.hidden"),id:p.o8,previewAsset:c[0]??m[0],components:e,examples:null,templates:t,assets:s,type:p.yW.DESIGN};j.pages.set(p.o8,l)}return j}(e,t,n,i,c,0,g,w),A=new Map([...S,...I]);A.set(N.libraryKey,N);let L=null;if(C){for(let e of(L=new Map,C)){let t=(0,h.Pv)(e);if(!t)continue;let n=t.library.libraryKey,i=y(t.assets,j[n]??{},k,n===h.Yl),s={...t.library,pages:i};L.set(n,s),A.set(n,s)}let e=(0,f.V)();if(e){let t=y([],{},k,!0),n={...e,pages:t};L.set((0,s.l)(h.Yl),n),A.set((0,s.l)(h.Yl),n)}}return{localAssets:N,libraries:S,presets:I,siteKits:L,allLibrariesUnsorted:A}}function j(e){let t=e?b(e):[];return t.length>0?t[0]:void 0}},733405:(e,t,n)=>{n.d(t,{AA:()=>_,Ef:()=>y,SQ:()=>x,oc:()=>d});var i=n(716976),s=n(983500),a=n(95314),r=n(152095),l=n(807474),o=n(113877);let d=40,c=(0,s.jz)(o.H0),u=2*(0,s.jz)(o.Mj),p={NORMAL:115,WIDE:void 0,SMALL:72},m={minColumns:2,maxColumns:3,aspectRatio:1,maxHeight:p.NORMAL},h={minColumns:1,maxColumns:1,aspectRatio:3.25,maxHeight:p.WIDE},f={minColumns:3,maxColumns:5,aspectRatio:1,maxHeight:p.SMALL},g=e=>{switch(e){case a.rp.WIDE:return h;case a.rp.SMALL:return f;default:return m}};function x({sidebarWidth:e}){let t=i.useMemo(()=>e-u,[e]),n=i.useMemo(()=>{let e={};for(let n of[a.rp.NORMAL,a.rp.WIDE,a.rp.SMALL]){let{minColumns:i,maxColumns:s,aspectRatio:a,maxHeight:l}=g(n),o=Math.max(Math.min(s,(0,r.BE)({elementMinSize:l??t,gap:c,spaceAvailable:t})),i),d=(0,r.y5)({numElements:o,gap:c,spaceAvailable:t}),u=(0,r.hg)({width:d,maxHeight:l,widthToHeightRatio:a});e[n]={width:d,height:u,columns:o}}return e},[t]),s=i.useMemo(()=>Math.max((0,r.BE)({elementMinSize:200,gap:c,spaceAvailable:t}),1),[t]),l=i.useMemo(()=>(0,r.y5)({numElements:s,gap:c,spaceAvailable:t}),[s,t]),o=i.useMemo(()=>(0,r.hg)({width:l,widthToHeightRatio:1.5,maxHeight:200}),[l]);return i.useMemo(()=>({componentLayouts:n,exampleLayout:{width:l,height:o,columns:s}}),[n,s,l,o])}function _(e,t){let[n]=(0,l.MA)(),s=i.useMemo(()=>t&&"grid"===n?t:[],[n,t]),a=i.useMemo(()=>s.every(e=>e.fullPage)?.85:Math.max(s.map(e=>e.mainThumbnailInfo.width/e.mainThumbnailInfo.height).reduce((e,t)=>Math.abs(t-1)<Math.abs(e-1)?t:e),.7),[s]),o=e-u,p=i.useMemo(()=>(0,r.BE)({elementMinSize:144,gap:c,spaceAvailable:o}),[o]),m=a>1?1:Math.min(2,p),h=i.useMemo(()=>(0,r.y5)({numElements:m,gap:c,spaceAvailable:o}),[m,o]),f=i.useMemo(()=>(0,r.hg)({width:h,widthToHeightRatio:a,maxHeight:void 0}),[a,h]);return"list"===n||0===s.length?{tileWidth:d,tileHeight:d,numColumns:1}:{tileWidth:h,tileHeight:f,numColumns:m}}function y(e){let[t]=(0,l.MA)(),n=e-u,s=Math.min(i.useMemo(()=>(0,r.BE)({elementMinSize:120,gap:c,spaceAvailable:n}),[n]),3),a=i.useMemo(()=>(0,r.y5)({numElements:s,gap:c,spaceAvailable:n}),[s,n]),o=i.useMemo(()=>(0,r.hg)({width:a,widthToHeightRatio:1,maxHeight:void 0}),[a]);return"list"===t?{tileWidth:d,tileHeight:d,numColumns:1}:{tileWidth:a,tileHeight:o,numColumns:s}}},771255:(e,t,n)=>{n.d(t,{O:()=>o,Z:()=>d});var i=n(716976),s=n(95314),a=n(658749),r=n(6380),l=n(733405);function o(){let{width:e}=(0,r.G)(),{componentLayouts:t,exampleLayout:n}=(0,l.SQ)({sidebarWidth:e}),[o,d]=i.useMemo(()=>{let e={},n={};for(let[i,s]of Object.entries(t))e[i]={thumbHeight:s.height,thumbWidth:s.width,viewMode:a.Bk.Grid,thumbLayout:i,sourceForTracking:a.mZ,displayType:"grid"},n[i]=s.columns;return[e,n]},[t]),c=i.useMemo(()=>({thumbHeight:n.height,thumbWidth:n.width,viewMode:a.Bk.Grid,thumbLayout:s.rp.NORMAL,sourceForTracking:a.mZ,displayType:"grid"}),[n.height,n.width]),u=i.useMemo(()=>({thumbHeight:l.oc,thumbWidth:l.oc,viewMode:a.Bk.List,thumbLayout:s.rp.NORMAL,sourceForTracking:a.mZ,displayType:"list"}),[]);return i.useMemo(()=>({componentTilePropsByLayout:o,numColumnsByLayout:d,listProps:u,exampleTileProps:c,numExampleColumns:n.columns}),[o,d,u,c,n.columns])}function d(e,t,n,i=!1){return"list"===t?{props:e.listProps,numColumns:1}:i?{props:e.exampleTileProps,numColumns:e.numExampleColumns}:{props:e.componentTilePropsByLayout[n],numColumns:e.numColumnsByLayout[n]}}},46329:(e,t,n)=>{n.d(t,{I:()=>u});var i=n(716976),s=n(795033),a=n(819851),r=n(211862),l=n(727954),o=n(104177),d=n(2972),c=n(757396);function u(){let e=(0,r._G)(),{getLibrary:t}=(0,o.G)(),{libraries:n,presets:u,siteLibraries:p,librariesForConnectedProject:m}=(0,c.g)(),h=i.useMemo(()=>t(e??void 0),[t,e]),f=i.useMemo(()=>!h||(h.type===l.yW.DESIGN?0===h.numComponents&&0===h.numTemplates:0===h.numResponsiveSets),[h]),g=0===n.length,x=0===u.length,_=0===m.length,y=(0,a.cJ)(),[v]=(0,s.fp)(d.aK);return i.useMemo(()=>y?"Blocks"!==v&&f&&g&&x&&_:f&&g&&x&&_&&"disabled"===p.status,[f,g,x,_,p,y,v])}},368656:(e,t,n)=>{n.d(t,{z:()=>b});var i=n(716976),s=n(237420),a=n(926653),r=n(795033),l=n(544995),o=n(727612),d=n(211862),c=n(853039),u=n(842013),p=n(336971),m=n(658749),h=n(913664),f=n(842062),g=n(568383),x=n(927671),_=n(117012),y=n(148233),v=n(22106);function b(){(0,_.K)();let{subscribedFileDataByLibraryKey:e,hubFilesByLibraryKey:t}=(0,y.N)(),n=(0,s.d4)(d.tB),b=(0,s.d4)(u.e_),C=(0,s.d4)(u.MH),j=(0,s.d4)(u.dM),k=(0,s.d4)(p.P),w=(0,l.n1)(),E=(0,o.Fl)(),T=(0,r.md)(x.lj),S=i.useMemo(()=>n?.teamId?k[n.teamId]:null,[n?.teamId,k]),I=i.useMemo(()=>!!S&&(0,c.w5)(S),[S]),N=i.useMemo(()=>(0,m.Sg)(C,j),[C,j]),A=(0,m.$1)({library:b,fileDataByLibraryKey:e}),L=(0,m.oV)({library:b,hubFilesByLibraryKey:t,visualAssetLibraryKeys:T}),M=i.useMemo(()=>w?L:null,[w,L]),{url:O,shouldCover:R}=(0,v.t)(),P=(0,f.Nn)(),D=i.useMemo(()=>{let e=[];for(let t of P)t.data&&e.push(t.data);return e},[P]),F=(0,f.fi)(),z=(0,f.Bv)(),B=(0,r.md)(g.TG);return i.useMemo(()=>(0,h.F)({localComponentsInfo:N,localThumbnailUrl:O,localThumbnailShouldCover:R,subscribedComponentsInfo:A,subscribedCommunityComponentsInfo:M??void 0,canPublish:I,openFileKey:n?.key??"",openFileLibraryKey:(0,a.l)(n?.libraryKey??""),approvedLibraryKeysByResourceType:E,siteKitsAssetData:D.length>0?D:void 0,siteKitThumbnailComponents:F,siteKitSortingFn:z,presetLibraryKeys:B}),[N,O,R,I,n?.key,n?.libraryKey,E,D,F,z,A,M,B])}},85109:(e,t,n)=>{n.d(t,{B:()=>a,A:()=>r});var i=n(104076),s=n(419822);function a({isLoading:e,children:t}){return e?(0,i.jsx)("div",{className:"maybe_loading--loadingContainer--Wfq03",children:(0,i.jsx)(s.k,{})}):(0,i.jsx)(i.Fragment,{children:t})}let r=a},919559:(e,t,n)=>{n.d(t,{$4:()=>H,pd:()=>K,mi:()=>q});var i=n(104076),s=n(716976),a=n(754245),r=n(684742),l=n(266808),o=n(170627),d=n(926653),c=n(795033),u=n(408825),p=n(511570),m=n.n(p),h=n(883765),f=n(983500),g=n(641518),x=n(361170),_=n(816565),y=n(848561),v=n(772963),b=n(236631),C=n(999473),j=n(614784),k=n(354114),w=n(664326),E=n(433802),T=n(95584),S=n(955715),I=n(121969),N=n(658749),A=n(727954),L=n(6380),M=n(207116),O=n(2972),R=n(771255),P=n(807474),D=n(244920),F=n(222525),z=n(513390),B=n(113877),G=n(58178);let U=2*(0,f.jz)(B.Mj),V=(0,f.jz)("4px");function H({embeds:e}){let{thumbWidth:t,thumbHeight:n}=function(){let[e]=(0,P.MA)(),{width:t}=(0,L.G)(),{listProps:n}=(0,R.O)();if("list"===e)return{thumbWidth:n.thumbWidth,thumbHeight:n.thumbHeight};let i=Math.floor(t-U),s=Math.floor(i/2);return{thumbWidth:i,thumbHeight:s}}();return(0,i.jsx)(i.Fragment,{children:e.map((e,s)=>(0,i.jsx)(K,{embed:e,sectionPosition:s,keyboardPosition:{path:[A.ON.CONTENTS,A.lM.ASSETS,s],column:null},thumbHeight:n,thumbWidth:t,isFirstTile:0===s},e.name))})}function K({embed:e,sectionPosition:t,keyboardPosition:n,sectionNameForTracking:a="Site kit",isFirstTile:c=!1,thumbHeight:u,thumbWidth:p,libraryName:f,onDragStart:T}){var L;let[R]=(0,P.MA)(),F="list"===R,{currentView:B}=(0,O.wV)(),U=function(e,t,n){let[i]=(0,P.MA)(),a=(0,j.Ew)({assetKey:e.name,assetLibraryKey:(0,d.l)(D.Yl),assetType:"embed",isList:"list"===i,sectionNameforTracking:n,sectionPosition:t,sourceForTracking:N.mZ,isExample:!1,partnerType:void 0}),r=(0,O._m)(),l=(0,I.CK)();return s.useCallback(n=>{h.az.trackDefinedEvent("asset_search.result_inserted",{...a,entryPoint:N.mZ,componentSuggestionSessionId:l});let i=!!a.searchSessionId;h.az.trackDefinedEvent("assets_panel.site_kit_inserted",{assetName:e.name,type:"embed",group:"Embeds",fileKey:a.fileKey,fileTeamId:a.fileTeamId,fileOrgId:a.fileOrgId,sectionPosition:t,searchQuery:a.searchQuery,searchSessionId:a.searchSessionId,searchType:i?r?"site kit":"all":void 0,viewMode:a.viewMode?.toLocaleLowerCase(),queryId:a.queryId,action:n}),"keyboard"===n&&h.az.trackDefinedEvent("assets_panel.keyboard_insert",a)},[a,e.name,r,t,l])}(e,t,a),{onInsertableResourcePointerDown:H,dragState:K}=(L={resource:e,clickToInsert_DEPRECATED:!1,afterSuccessfulInsert:()=>{U("drag"),(0,S.$z)()},onDragStart:T},(0,w.t)({resource:L.resource,draggingThumbMaxDimensions:L.draggingThumbMaxDimensions,onDragStart:L.onDragStart,isDraggingDisabled:L.isDraggingDisabled,recomputeCancelRectsOnPointerUp:L.recomputeCancelRectsOnPointerUp,clickToInsert_DEPRECATED:L.clickToInsert_DEPRECATED,afterSuccessfulInsert:L.afterSuccessfulInsert},{insertAction:e=>{let t=e.pointerPercentageOffset||new x.Mi;return X(L.resource,e.dropPosition,t),Promise.resolve()},dragPreviewPointerPosition:E.N.CENTERED,getDragPreviewSrc:()=>L.resource.preview_url,onPointerDownCallback:()=>{l.glU.setShowHTMLWidgetCanvasDragAndDropOutlines(!0,{x:L.resource.width,y:L.resource.height})},onPointerUpCallback:()=>{l.glU.setShowHTMLWidgetCanvasDragAndDropOutlines(!1,null)},recordingKey:g.Pt("html-widget",L.resource.name)})),W=o.nc.user("insert-embed",H),q=s.useMemo(()=>({...n,path:[A.ON.CONTENTS,A.lM.ASSETS,...n.path]}),[n]),{setKeyboardNavigationElement:J,keyboardNavigationItem:Q}=(0,y.M3)({...q});(0,M.C0)(Q,c&&B===O.S5.Assets);let $=s.useCallback(t=>{let n=k.Y5.getViewportInfo();X(e,new x.Mi(n.offsetX,n.offsetY),new x.Mi(.5,.5)),U(t),(0,S.$z)()},[e,U]),ee=s.useCallback(()=>$("keyboard"),[$]),et=s.useCallback(()=>$("click"),[$]),en=(0,M.MB)({onKeyDown:ee,onClick:et}),ei=F?"site_kit_embeds--buttonList--dJCdj site_kit_embeds--_buttonBase--PU9Mw asset_panel_tile--tileWrapperList--VMlzj asset_panel_tile--_tileWrapperBase--OAJqM library_item_tile--tileListLargeNoPadding--QnDtc library_item_tile--tile--okxBn library_item_tile--_variantHover--xfLPt library_item_tile--_tileListBase--jZpFH":Z(c),es=F?z.vZ:"site_kit_embeds--embedNameWrapper--7DR-c asset_panel_tile--nameWrapper--6O-iS";return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Y,{dragState:K,opacityOverride:.5}),(0,i.jsx)(C.n.div,{onPointerDown:W,className:b.s.flex.if(F,b.s.wFull).$,children:(0,i.jsxs)(r.E,{className:ei,ref:J,onClick:en,children:[(0,i.jsx)("div",{className:"site_kit_embeds--thumbContainer--SgHWz",style:{width:p,height:u},children:(0,i.jsx)(_.oW,{src:e.thumbnail_url,className:"site_kit_embeds--thumbnail---2jDe"})}),(0,i.jsx)("div",{className:m()(es,G.Rm),style:F?void 0:{width:p-2-V},children:(0,i.jsx)(v.G,{text:e.name})}),f&&!F&&(0,i.jsx)("div",{style:{width:p-2},children:(0,i.jsx)(v.G,{text:f,className:m()(G.Md,G.Rm)})})]})})]})}let W=(0,T.P)("recently-used-site-embeds","name",u.z.object({name:u.z.string()}),{transform:e=>({name:e.name})});function q(){return(0,c.md)(W)}function X(e,t,n){c.zl.set(W,e),o.l7.user("insert-embed",()=>{l.glU?.insertEmbed(e.initial_url,{x:t.x,y:t.y,percentOffsetX:n.x,percentOffsetY:n.y},!1,{x:e.width,y:e.height}),k.Y5.triggerAction("commit")})}function Y(e){let t=e.dragState;if(!t?.dragPosition||!t?.grabbedPointerPercentageOffset)return null;let n=function(e){let{draggingResource:t}=e,{zoomScale:n,x:i}=k.Y5.getViewportInfo(),s=e.dragPosition?.x;return(!s||s<i)&&e.draggingThumbSize?e.draggingThumbSize:new x.Mi(t.width,t.height).scale(n)}(t),s=t.dragPosition;return s=s.subtract(new x.Mi(t.grabbedPointerPercentageOffset.x*n.x,t.grabbedPointerPercentageOffset.y*n.y)),(0,a.createPortal)((0,i.jsx)("div",{className:m()(F.Wy,{[F.ce]:t.isDraggingOverCanvas}),style:{left:s.x,top:s.y,width:n?.x,height:n?.y,maxWidth:t.draggingThumbMaxDimensions?.x||void 0,maxHeight:t.draggingThumbMaxDimensions?.y||void 0,zIndex:e.zIndexOverride,opacity:e.opacityOverride?e.opacityOverride:1},children:(0,i.jsx)(_.oW,{src:t.draggingResource.preview_url,alt:""})}),document.getElementById("fullscreen-root"))}let Z=e=>e?"site_kit_embeds--buttonGridForFirstItem--hvYlI site_kit_embeds--buttonGrid--iiN-l asset_panel_responsive_set_tile--gridWrapperForBlocksRedesign---yy1K asset_panel_tile--gridWrapper--tUJe5 asset_panel_tile--wrapper--8uDli asset_panel_tile--_wrapperBase--ngLpF library_item_tile--_variantHover--xfLPt site_kit_embeds--_buttonBase--PU9Mw asset_panel_responsive_set_tile--gridWrapperForBlocksRedesignFirstTile--cxGGn asset_panel_responsive_set_tile--gridWrapperForBlocksRedesign---yy1K asset_panel_tile--gridWrapper--tUJe5 asset_panel_tile--wrapper--8uDli asset_panel_tile--_wrapperBase--ngLpF library_item_tile--_variantHover--xfLPt":"site_kit_embeds--buttonGrid--iiN-l asset_panel_responsive_set_tile--gridWrapperForBlocksRedesign---yy1K asset_panel_tile--gridWrapper--tUJe5 asset_panel_tile--wrapper--8uDli asset_panel_tile--_wrapperBase--ngLpF library_item_tile--_variantHover--xfLPt site_kit_embeds--_buttonBase--PU9Mw"},626986:(e,t,n)=>{n.d(t,{T:()=>h});var i=n(716976),s=n(999083),a=n(649621),r=n(518016),l=n.n(r),o=n(336989),d=n(592726),c=n(564914),u=n(919559),p=n(89221),m=n(842062);function h(){let e=m.ce().data?.assetsByLibraryKey,t=i.useMemo(()=>e?[...e.values()].flat():[],[e]),n=i.useMemo(()=>(0,p.u)(),[]),r=(0,o.o)(c.PW.RESPONSIVE_SET),h=(0,u.mi)(),f=(0,d.TA)(),g=i.useMemo(()=>{if(!f)return[];let e=[...r,...h].filter(e=>e.lastAddedAtUserId[f]);return(0,s.hR)(e,e=>-(e.lastAddedAtUserId[f]??0)),e},[r,h,f]);return i.useMemo(()=>{let e=l()(t??[],"key"),i=l()(n,"name");return g.map(t=>"key"in t?e[t.key]:i[t.name]).filter(a.Gh)},[g,t,n])}},847538:(e,t,n)=>{n.d(t,{A:()=>d});var i=n(104076),s=n(716976),a=n(795033),r=n(511570),l=n.n(r),o=n(455582);function d({children:e,index:t,width:n}){let r=(0,a.md)(o.h),d=s.useMemo(()=>e.flat().filter(e=>!!e),[e]),u=s.useMemo(()=>{let e=c(-Math.min(t,d.length-1)),n=`translateX(${e})`;return{transform:n,WebkitTransform:n}},[d.length,t]),p=l()("slide_carousel--container--1f4th",{"slide_carousel--noTransition--0heGr":r});return(0,i.jsx)("div",{style:u,"data-testid":"slide-carousel",className:p,children:d.map((e,s)=>(0,i.jsx)("div",{className:"slide_carousel--item--w20ND",style:{width:n},"data-testid":"slide-carousel-item","aria-hidden":s!==t,inert:s!==t?"":void 0,children:e},s))})}let c=e=>`${100*e}%`},733106:(e,t,n)=>{n.d(t,{W:()=>p,d:()=>u});var i=n(716976),s=n(795033),a=n(883765),r=n(755444),l=n(381059),o=n(211862),d=n(592726);let c=["dev","done","eng","experiment","not final","final","finalized","hand off","handoff","implementation","launch","m1","m2","m3","m4","milestone","mvp","proposal","qa","ready","ship","spec","\u2611\uFE0F","\u2705","\u2714\uFE0F","\u2747\uFE0F","\u2B50\uFE0F","\u{1F3C1}","\u{1F49A}","\u{1F4CC}","\u{1F680}","\u{1F6A2} ","\u{1F7E2}","\u{1F7E9}","\u{1F9EA}"];function u(e){let t=(e||"").toLowerCase(),n=new Set(c.filter(e=>t.includes(e)));return n.has("final")&&n.has("not final")&&(n.delete("final"),n.delete("not final")),[...n]}function p(){let e=(0,d.iZ)(),t=(0,o.tS)(),n=(0,s.md)(l.zN),c="loaded"!==n.status||!0===n.data||(0,r.sL)();return(0,i.useCallback)(({newTitle:n,nodeType:i})=>(function({fileKey:e,nodeType:t,newTitle:n,userId:i,notEligible:s}){if(s)return;let r=u(n);a.az.trackDefinedEvent("node_name.changed",{fileKey:e,nodeType:t,userId:i,didUseDevModeIndicator:r.length>0,indicator:r[0]||"",allIndicators:r.join(",")})})({nodeType:i,newTitle:n,fileKey:t||"",userId:e?.id||"",notEligible:c}),[e,t,c])}},389276:(e,t,n)=>{n.d(t,{Nz:()=>J,X5:()=>$});var i=n(104076),s=n(716976),a=n(237420),r=n(951002),l=n(266808),o=n(812714),d=n(795033),c=n(511570),u=n.n(c),p=n(784220),m=n(858959),h=n(883765),f=n(76616),g=n(328341),x=n(681398),_=n(2713),y=n(690824),v=n(264830),b=n(923513),C=n(192075),j=n(76404),k=n(508011),w=n(692042),E=n(74620),T=n(211862),S=n(915013),I=n(612433),N=n(657878),A=n(95975);n(729926),n(351405),n(475593),n(64004);var L=n(259964),M=n(77244),O=n(844379),R=n(437595),P=n(424793),D=n(572988),F=n(43607),z=(e=>(e[e.Default=0]="Default",e[e.Mobile=1]="Mobile",e[e.Prototype=2]="Prototype",e[e.Slide=3]="Slide",e))(z||{});let B=(e,t)=>{let n=(0,w.ni)(),i=(0,v.Av)(),a=(0,k._o)(),r=(0,E.p8)("showUi"),l=(0,N._6)(),o=function({isUI3:e,prototypeHeaderHidden:t,showUi:n,style:i,toolbarHeight:s,editorBannerHeight:a}){return(2===i?t?0:s:e?x.Ay.isIpadNative||(0,x.FP)()&&n?(0,L.VA)():0:n||x.Ay.isIpadNative?s:0)+a}({isUI3:!("prototype"===l.view&&"slides"===l.file.editor_type),prototypeHeaderHidden:t,showUi:r,style:e,toolbarHeight:i,editorBannerHeight:a});return s.useMemo(()=>({left:n.x,top:o,width:n.width}),[n,o])},G=(e,t)=>{let n;let i=function(e){let t;let n=(0,w.ni)();(0,E.p8)("showUi");let i=0;(x.Ay.isIpad||(0,x.FP)())&&(i=(0,L.VA)());let a=n.y+i;switch(e){case 1:t=4;break;case 2:t=a;break;case 3:t=0;break;case 0:t=10}return s.useMemo(()=>({left:n.x,top:a,width:n.width-(0===e?10:0),height:n.height-t-i}),[n,e,a,t,i])}(t),a=0;switch(t){case 0:n={borderWidth:5},a=5;break;case 1:if((0,x.FP)()){n={};break}n={borderTopWidth:4},a=4;break;case 3:n={borderWidth:5,borderRadius:"0.8rem",boxSizing:"border-box"},a=5;break;case 2:n={}}return s.useMemo(()=>({style:{...i,...n,"--multiplayerBorderColor":e,borderStyle:"solid","--multiplayerBorderWidth":`${a}px`},borderInfo:{width:a,color:e}}),[e,i,n,a])};function U(e){let{children:t,prototypeHeaderHidden:n}=e,s=(0,N.z3)(),a=0;"prototype"===s?a=2:x.Xb&&(a=1);let r=B(a,n||!1),l=2===a?F.Y$:void 0,d=2===a&&n?F.Fd:void 0;return(0,i.jsx)("div",{className:u()(F.GE,l,d,{[F.Sj]:(0,o.kc)().figjam_a11y_spotlight}),style:r,"data-testid":"multiplayer-bell-container",children:t})}function V(){let{style:e,borderInfo:t}=s.useContext(P.h);return e={...e,borderColor:t.color},(0,i.jsx)("div",{"data-testid":"viewport-frame",className:F.KM,style:e})}function H(){let{style:e,borderInfo:t}=s.useContext(P.h);return e={...e,color:"brand"===t.color?"var(--color-bg-brand)":t.color,"--borderColorTransitionDurationSeconds":`${D.Bn}s`},(0,i.jsx)("div",{className:F.KM,style:e})}function K(e){let{children:t,colorOverride:n,overlayStatus:s}=e,a=(0,S.$0)(),r=(0,S.dR)(),l=(0,S.Ww)(),o=(0,N._6)(),d=0;"prototype"===o.view?d=o.isPresenterView?3:2:x.Xb&&(d=1);let c=G((()=>{if(n)return n;if(!s)return r&&l?.sessionID===r?.sessionID?l?.color??"transparent":a?.color??"transparent";{let{self:e,others:t}=s;return"none"!==e?"brand":"following"===t&&"none"===e?a?.color??"transparent":"transparent"}})(),d);return(0,i.jsx)(P.h.Provider,{value:c,children:t})}var W=(e=>(e.PRESENTING="presenting",e.PROMPT_TO_ACCEPT_NOMINATION="prompt_to_accept_nomination",e.SHOWING_EXPLAINER="showing_explainer",e.NONE="none",e))(W||{}),q=(e=>(e.PENDING_AUTO_FOLLOW="pending_auto_follow",e.FOLLOWING="following",e.PROMPT_TO_REJOIN="prompt_to_rejoin",e.NONE="none",e))(q||{});function X(){return"prototype"!==(0,N.z3)()&&!(0,x.FP)()}function Y(e,t,n,i){let a=(0,g.ZC)(e),r=(0,g.ZC)(t),l=s.useRef(performance.now()),o=(0,A.u)();return s.useEffect(()=>{if("presenting"===e){let e=f.sn.tryStop("start_spotlight");e&&(0,h.sx)("start_spotlight",{elapsedMs:e,...o},{forwardToDatadog:!0})}else if("pending_auto_follow"===t){let e=f.sn.tryStop("join_spotlight");e&&(0,h.sx)("join_spotlight",{elapsedMs:e,...o},{forwardToDatadog:!0})}else if("following"===t){let e=f.sn.tryStop("start_following");e&&(0,h.sx)("start_following",{elapsedMs:e,...o},{forwardToDatadog:!0})}},[e,t,n,i,o]),(e!==a||t!==r)&&(l.current=performance.now()),{statusChangedAt:l.current}}function Z(e){let{multiplayer:t,prototypeHeaderHidden:n,isTabAccessible:a=!1,hideOthersOverlayOverride:c=!1}=e,u=(0,S.Ww)(),h=(0,S.dR)(),f=(0,S.$0)(),g=(0,S.y)(),v=(0,T.q5)(),k=(0,d.md)(y.X),w=(0,I.T)(),E=(0,_.y7)(),A=(0,_.oJ)(),L=(0,_.$)(),[P,F]=s.useState(!1);s.useEffect(()=>{F(!1)},[h?.sessionID]),s.useEffect(()=>{f?.sessionID===h?.sessionID&&F(!1)},[f?.sessionID,h?.sessionID]);let{isAutoFollowPending:z,cancelAutoFollowCallback:B,completeAutoFollowCallback:G,observeCurrentPresenter:V,autoFollowType:W,autoFollowDelayMs:q}=(0,S.oW)({multiplayer:e.multiplayer}),{isWaitingForFirstFollower:Z,stopPresenting:J}=function(e){let[t,n]=s.useState(!1),i=e.followerCount,[a,r]=(0,d.fp)(y.Dv);0===i||t||n(!0);let o=(0,_.jA)(e)||a;(0,_.jA)(e)&&a&&r(!1),!o&&t&&n(!1);let c=o&&0===i&&!t,u=(0,I.T)(),p=(0,N.z3)(),m=s.useCallback(()=>{u(I.N.STOP),"prototype"===p?b.h()?.stopPresenting():l.h3O.stopPresenting()},[u,p]),h=s.useCallback(()=>!!c&&(m(),!0),[m,c]);return(0,j.O1)(h,j.KD.MULTIPLAYER_SPOTLIGHT),{isWaitingForFirstFollower:c,stopPresenting:m}}(t),Q=function(e){let{multiplayer:t,showingExplainer:n,isPendingPresenting:i}=e;return(0,_.jA)(t)||i?"presenting":n?"showing_explainer":(0,_.NB)(t)?"prompt_to_accept_nomination":"none"}({multiplayer:t,showingExplainer:(0,d.md)(y.ah),isPendingPresenting:(0,d.md)(y.Dv)}),$=function(e){let{multiplayer:t,isAutoFollowPending:n,presenterUser:i,suppressRejoinPrompt:s}=e;return n?"pending_auto_follow":(0,_.L3)(t)?"following":i&&!s?"prompt_to_rejoin":"none"}({multiplayer:t,isAutoFollowPending:z,presenterUser:h,suppressRejoinPrompt:P}),ee=s.useRef(t.allUsers.length);ee.current=t.allUsers.length;let{statusChangedAt:et}=Y(Q,$,v,ee),[en,ei]=function(e,t){switch(e){case"presenting":if("following"===t||"prompt_to_rejoin"===t)return[e,"none"];return[e,t];case"prompt_to_accept_nomination":if("pending_auto_follow"===t)return["none",t];return[e,"none"];case"showing_explainer":case"none":return[e,t];default:(0,r.xb)(e)}}(Q,$),es=ei;c&&"following"===es&&(es="none");let ea=s.useCallback(()=>{F(!0),B(),w(I.N.IGNORE)},[B,w]),er=W===S.D_.INITIAL,el=s.useCallback(()=>"pending_auto_follow"===es&&!!z&&W===S.D_.INITIAL&&(B(),!0),[W,B,z,es]);(0,j.O1)(el,j.KD.MULTIPLAYER_SPOTLIGHT);let eo=X(),ed="showing_explainer"===en,ec=(0,d.md)(M.N),eu="none"!==en,ep="none"!==es,em=["presenting","prompt_to_accept_nomination","showing_explainer"].includes(en)||["following"].includes(es),[eh,ef]=(0,d.fp)(y.uc);return em!==eh&&ef(em),(0,i.jsxs)(K,{overlayStatus:{self:en,others:es},children:[(0,i.jsx)(p.N,{children:em&&(0,i.jsx)(m.P.span,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{ease:"easeIn",duration:D.Bn},children:(0,i.jsx)(H,{})})}),(0,i.jsx)(p.N,{children:eu&&(0,i.jsx)(m.P.span,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{ease:"easeIn",duration:D.Bn},children:(0,i.jsx)(U,{prototypeHeaderHidden:n,children:(()=>{switch(en){case"presenting":if(null===u)return null;if(Z){let e=(0,C.tx)("collaboration.spotlight.bell.presenter.waiting_for_followers"),t=(0,C.t)("collaboration.spotlight.bell.presenter.cancel");return(0,i.jsx)(R.Y,{color:"brand",message:{text:e},renderKey:`${u.sessionID}`,progressBar:!0,progressBarDurationMs:y.S$,autoHide:!1,button:{text:t,onClick:J},isTabAccessible:a})}return(0,i.jsx)(R.Y,{color:"brand",message:{text:(0,i.jsx)(O.s,{count:t.followerCount})},renderKey:`${u.sessionID}`,progressBar:!1,progressBarDurationMs:0,autoHide:!1,button:{text:(0,C.t)("collaboration.spotlight.bell.presenter.stop"),onClick:J},docked:eo,isTabAccessible:a});case"prompt_to_accept_nomination":if(!u||!g)return null;return(0,i.jsx)(R.Y,{autoHide:!1,button:{text:(0,C.t)("collaboration.spotlight.tooltip.spotlight_me"),onClick:()=>{E(t)}},color:"brand",isTabAccessible:a,message:{text:(0,C.tx)("collaboration.spotlight.bell.follower.nominated",{nominatorName:g.name})},onCloseCallback:()=>{A(u.sessionID,t)},progressBar:!1,progressBarDurationMs:0,renderKey:`${u.sessionID}`,showCloseButton:!0,useSecondaryColor:!0});case"showing_explainer":if(null===u)return null;let e=h?(0,C.tx)("collaboration.spotlight.bell.explainer.takeover",{currentPresenter:h?.name}):(0,C.tx)("collaboration.spotlight.bell.explainer");return(0,i.jsx)(R.Y,{autoHide:!1,button:null,color:"brand",docked:!1,isTabAccessible:a,message:{text:e},progressBar:!1,progressBarDurationMs:0,renderKey:`${t.sessionID}`,useSecondaryColor:!0});case"none":return null;default:(0,r.xb)(en)}})()})})}),(0,i.jsx)(p.N,{children:ep&&(0,i.jsx)(m.P.span,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{ease:"easeIn",duration:D.Bn},children:(0,i.jsx)(U,{prototypeHeaderHidden:n,children:(()=>{switch(es){case"pending_auto_follow":{if(!h)return null;let e=h.name,n=er?{text:(0,C.tx)("collaboration.spotlight.bell.follower.spotlighting_presenter_alternate_copy",{presenterName:e}),onClick:G}:{text:(0,C.tx)("collaboration.spotlight.bell.follower.switching_to_new_presenter",{presenterName:e})},s=er?{text:(0,C.t)("collaboration.spotlight.bell.follower.not_now"),onClick:ea}:null;if(!k){let e=(0,C.tx)("collaboration.spotlight.bell.follower.reprompt_spotlight_on_presenter",{presenterUserName:h.name}),n=(0,C.t)("collaboration.spotlight.bell.follower.follow"),s=()=>(0,_.KI)(V,t,"Spotlight Joined Manually in A11y mode ",et);return(0,i.jsx)(R.Y,{autoHide:!1,button:{text:n,onClick:s},color:h?.color,ghost:ed,isTabAccessible:a,message:{text:e,onClick:s},onCloseCallback:()=>(0,_.KI)(()=>F(!0),t,"Spotlight Dismissed Manually in A11y mode",et),progressBar:!1,progressBarDurationMs:0,renderKey:`${h.sessionID}`,showCloseButton:!0,useSecondaryColor:!0})}return(0,i.jsx)(R.Y,{color:h?.color,message:n,renderKey:`${h.sessionID}`,progressBar:er,progressBarDurationMs:q||0,autoHide:!1,button:s,ghost:ed,isTabAccessible:a})}case"following":{let e=t.observingSessionID===t.presenterSessionID;if(null===f)return null;let n=f?.name||"",s=e?(0,C.tx)("collaboration.spotlight.bell.follower.spotlight_on_presenter",{observedUserName:n}):(0,C.tx)("collaboration.spotlight.bell.follower.following_non_presenter",{observedUserName:n}),r={text:e?(0,C.t)("collaboration.spotlight.bell.stop_following"):(0,C.t)("collaboration.spotlight.bell.stop"),onClick:()=>L(t)};return(0,i.jsx)(R.Y,{autoHide:!x.Xb,button:r,color:f?.color,docked:eo,ghost:ed,isTabAccessible:a,message:{text:s},progressBar:!1,progressBarDurationMs:0,renderKey:`${t.observingSessionID}`,secondaryButton:(0,o.kc)().spotlight_zoom_override&&ec&&1!==ec?{text:(0,C.t)("collaboration.spotlight.bell.reset_zoom"),onClick:()=>{d.zl.set(M.N,1)}}:null})}case"prompt_to_rejoin":let e=()=>(0,_.KI)(V,t,"Spotlight Rejoined",et);if(null!==f||null===h)return null;let n=(0,C.tx)("collaboration.spotlight.bell.follower.reprompt_spotlight_on_presenter",{presenterUserName:h.name}),s=(0,C.t)("collaboration.spotlight.bell.follower.follow");return(0,i.jsx)(R.Y,{autoHide:!1,button:{text:s,onClick:e},color:h?.color,ghost:ed,isTabAccessible:a,message:{text:n,onClick:e},onCloseCallback:()=>(0,_.KI)(()=>F(!0),t,"Spotlight Rejoin Dismissed",et),progressBar:!1,progressBarDurationMs:0,renderKey:`${h.sessionID}`,showCloseButton:!0,useSecondaryColor:!0});case"none":return null;default:(0,r.xb)(es)}})()})})})]})}function J({prototypeHeaderHidden:e,isTabAccessible:t=!1,hideOthersOverlayOverride:n=!1}){let s=(0,a.d4)(({multiplayer:e})=>e),r=(0,S.HG)(),l=(0,S.By)(),o=-1!==s.observingSessionID;return((0,S.VA)({multiplayer:s}),(0,S.Pi)({multiplayer:s}),l)?null:r?(0,i.jsx)(Z,{multiplayer:s,prototypeHeaderHidden:e,isTabAccessible:t,hideOthersOverlayOverride:n}):o?(0,i.jsx)(Q,{prototypeHeaderHidden:e,isTabAccessible:t}):null}function Q(e){let{prototypeHeaderHidden:t,isTabAccessible:n=!1}=e,r=(0,S.$0)(),l=(0,T.q5)(),o=(0,a.d4)(e=>e.multiplayer.allUsers.length),d=s.useRef(o);d.current=o,Y("none","following",l,d);let c=`${r?.sessionID}`,u=s.useMemo(()=>{let e=r?.name||"";return{text:(0,C.tx)("collaboration.spotlight.bell.follower.following_non_presenter",{observedUserName:e})}},[r]),p=X();return null===r?null:(0,i.jsxs)(K,{children:[(0,i.jsx)(V,{}),(0,i.jsx)(U,{prototypeHeaderHidden:t,children:(0,i.jsx)(R.Y,{color:r?.color,message:u,renderKey:c,autoHide:!x.Xb,progressBar:!1,progressBarDurationMs:0,button:null,docked:p,isTabAccessible:n})})]})}function $(){return(0,i.jsx)(K,{colorOverride:"var(--color-border-brand-strong)",children:(0,i.jsx)(V,{})})}},475593:(e,t,n)=>{n.d(t,{XC:()=>s}),n(170627),n(246144),n(636208),n(694896);var i=n(351405);function s(e){return e===i.h0.PLAYING}n(120276)},473918:(e,t,n)=>{n.d(t,{mZ:()=>g,ix:()=>v,AS:()=>b,fA:()=>j,Gz:()=>y});var i=n(104076),s=n(716976),a=n(237420),r=n(266808),l=n(983500),o=n(755444),d=n(816565),c=n(192075),u=n(527433),p=n(895651),m=n(688009),h=n(404343);let f="fake_cursor--hideCursor--CUrrB";var g=(e=>(e[e.NONE=0]="NONE",e[e.EYEDROPPER=1]="EYEDROPPER",e[e.CHAT=2]="CHAT",e[e.HIGH_FIVE=3]="HIGH_FIVE",e))(g||{});let x={[r.NLJ.SELECT]:"aed6896e6ad35977610fc23bb6590c1484d3ee01",[r.NLJ.HAND]:"aebe1073b0b9e7ca3907e21cc08ee416d86520c4",[r.NLJ.DROPPER_COLOR]:"3a904092ca690b41c06a24b8e2dddb724a992c94"},_=(0,l.hG)(h.xEX);function y(e){s.useEffect(()=>(e?document.body.classList.add(f):document.body.classList.remove(f),()=>document.body.classList.remove(f)),[e])}function v(e){let{position:t,currentToolForCursor:n,children:s}=e;y(!e.hidden);let r=(0,a.d4)(e=>e.downtime.status===m.A.Ongoing||e.downtime.status===m.A.Imminent||e.showingDowntimeBanner)?_:0,l=t.x,o=t.y-r,d={willChange:"transform",transform:`translate3D(${l}px, ${o}px, 0)`,opacity:e.hidden?0:1};return(0,i.jsxs)("div",{style:d,className:"fake_cursor--container--FpLnk",children:[(0,i.jsx)(j,{currentToolForCursor:n}),s]})}function b(e){let t=(0,u.x)({subscribeToUpdates_EXPENSIVE:!0}),n=(0,p.K)();return t?(0,i.jsx)(v,{...e,position:t,hidden:!n}):null}let C=e=>{switch(e){case r.NLJ.SELECT:return(0,c.t)("fake_cursor.select_cursor");case r.NLJ.HAND:return(0,c.t)("fake_cursor.hand_cursor");case r.NLJ.DROPPER_COLOR:return(0,c.t)("fake_cursor.eyedropper_cursor");default:return(0,c.t)("fake_cursor.cursor")}};function j({currentToolForCursor:e}){let t="fake_cursor--handCursor--3jlcf fake_cursor--cursor--xDDWs";e===r.NLJ.SELECT?t="fake_cursor--selectCursorUI3--FjJsi fake_cursor--cursor--xDDWs":e===r.NLJ.DROPPER_COLOR&&(t="fake_cursor--eyedropperCursor--uXak0 fake_cursor--cursor--xDDWs");let n=x[e];return n?(0,i.jsx)(d.oW,{className:t,src:(0,o.ck)(n),alt:C(e)}):null}},231378:(e,t,n)=>{n.d(t,{k_:()=>tp,yL:()=>tx});var i={};n.r(i),n.d(i,{GLARE_ANIMATION:()=>eF,GRAY_BACKGROUND:()=>eD,NONE:()=>eB,ORANGE_GRADIENT:()=>eP,PINK_GRADIENT:()=>eO,animateBg:()=>eR,glareAnimation:()=>ez});var s=n(104076),a=n(716976),r=n(237420),l=n(859120),o=n(266808),d=n(812714),c=n(287211),u=n(511570),p=n.n(u),m=n(76616),h=n(770522),f=n(106072),g=n(1188),x=n(750371),_=n(819851),y=n(527433),v=n(46999),b=n(701071),C=n(692042),j=n(439906),k=n(851461),w=n(74620),E=n(915013),T=n(331497),S=n(728977),I=n(755444),N=(e=>(e.PINK_GRADIENT="PINK_GRADIENT",e.ORANGE_GRADIENT="ORANGE_GRADIENT",e.GRAY_BACKGROUND="GRAY_BACKGROUND",e.GLARE_ANIMATION="GLARE_ANIMATION",e.NONE="NONE",e))(N||{});let A=new Map([["happy birthday","PINK_GRADIENT"],["bday","PINK_GRADIENT"],["hbd","PINK_GRADIENT"],["fire","ORANGE_GRADIENT"],["fiire","ORANGE_GRADIENT"],["fiiire","ORANGE_GRADIENT"],["fiiiire","ORANGE_GRADIENT"],["lit","ORANGE_GRADIENT"],["heat","ORANGE_GRADIENT"],["hot","ORANGE_GRADIENT"],["spicy","ORANGE_GRADIENT"],["lowkey","GRAY_BACKGROUND"],["slick","GLARE_ANIMATION"],["this is clean","GLARE_ANIMATION"],["this clean","GLARE_ANIMATION"],["cleann","GLARE_ANIMATION"],["sharp","GLARE_ANIMATION"],["immaculate","GLARE_ANIMATION"],["pristine","GLARE_ANIMATION"],["polished","GLARE_ANIMATION"],["spotless","GLARE_ANIMATION"],["shiny","GLARE_ANIMATION"]]),L=new Map([[(0,I.ck)("a83de90bf34495081ce2e8bcaf28d1d2c16e5186"),["lol","lmao","rofl","lmfao","hehe","haha","sksk","cryingg","dyingg","so funny","rotfl"]],[(0,I.ck)("d1e0d7ed5e1aa13e8854dbd88b9fd650377a02f2"),["fire","fiire","fiiire","fiiiire","spicy","oh snap","dope","hot","heat","so good","siick","siiick","siiiick","on point","rad","sweeet","sweeeet","wagmi","wgmi","gmi"]],[(0,I.ck)("0606e9d967b5abb6d9a2853c2fff589f2ec2fc05"),["hey","hiya","heyo","hello","howdy","whats up","what's up","good morning","gm","greetings","bye","later","ciao","see ya","cya","wave"]],[(0,I.ck)("ffd0635e8f9322352eff0c15411ac0b536b98d87"),["taking a look","sus","let me look","let me see","lemme see","i see what you did there"]],[(0,I.ck)("ff5be810b821d264cc2c95f665d24a867c34e587"),["gorgeous","stunning","love","loove","looove","loooove","looooove","luv","woww","awww","<3","yass","cute","amazingg","heart eyes","beautiful","my eyeballs are literally two giant hearts right now and i couldn't be happier","beautiful","adorable"]],[(0,I.ck)("78f60a21d2616c2a24c7645d8636dec855e48ffb"),["ngmi","bummer","sad face","uh oh",":(","noo","oh no","sorry to hear that","rip","rats","big sad","tragic","fail","womp","that sucks"]],[(0,I.ck)("1429964104bceac90c5c8e731ce4cc50b27e2797"),["wtf","whoa","no way",":O","woah","whaat","whaaat","shook","shooketh","omg","omfg","speechless","oh snap","surprised"]],[(0,I.ck)("e15fa4fbba4b88b4f1f04ba64bb12abf12bcbc6c"),["gift","hbd","bday","birthday"]],[(0,I.ck)("778eea842ed4020f6209e97c77abcd84984e5c94"),["cool","coool","swag","chill"]],[(0,I.CZ)("emoji/5/noto/medium/1f410.png"),["goat"]]]);var M=(e=>(e[e.Standard=0]="Standard",e))(M||{});let O=new Map;L.forEach((e,t)=>{!function(e,t,n){e.forEach(e=>n.set(e,t))}(e,t,O)});let R=(e,t)=>{let n=t.get(e);n&&j.R9.sendReaction(n)};var P=n(30221),D=n(795033),F=n(324063),z=n(991535),B=n(633065),G=n(45706);class U extends G.w{constructor(){super(),this.type="Particle",this.velocity={x:0,y:0},this.kick={x:0,y:0},this.kickDecay=1,this.gravity={x:0,y:0}}static fastVectorAddScaled(e,t,n){e.x+=t.x*n,e.y+=t.y*n}update(e){return U.fastVectorAddScaled(this.position,this.velocity,e),U.fastVectorAddScaled(this.position,this.kick,e),U.fastVectorAddScaled(this.kick,this.kick,Math.pow(this.kickDecay,e/.016)-1),U.fastVectorAddScaled(this.velocity,this.gravity,e),super.update(e)}}class V extends G.L{constructor(){super(...arguments),this.MAX_PARTICLES=512,this.addParticle=e=>{this.getParticles().length<this.MAX_PARTICLES&&this.addEntity(e)}}getParticles(){return this.getEntities().filter(e=>e instanceof U)}}var H=n(725837),K=n(597581),W=n(166887),q=n(968169),X=n(737552);let Y=class e{constructor(){this.previouslyCollidingCursors=new Set}updateAndCheckCollisions(t){let n=new Set,i=[];for(let s=0;s<t.length;s++){let a=t[s],r=e.closestNonSelfCursor(a,t.slice(s+1));if(r&&e.distanceBetween(a.mouse?.canvasSpacePosition,r.mouse?.canvasSpacePosition)<e.CURSOR_COLLISION_RADIUS){let t=e.makeCursorProximityKey(a,r);this.previouslyCollidingCursors.has(t)||i.push([a,r]),n.add(t)}}return this.previouslyCollidingCursors=n,i}static makeCursorProximityKey(e,t){return[e.sessionId,t.sessionId].sort().join("+")}static distanceBetween(e,t){if(!e||!t)return 1/0;let n=e.x-t.x,i=e.y-t.y;return Math.sqrt(n*n+i*i)}static computeMidpoint(e,t){return{x:(e.x+t.x)/2,y:(e.y+t.y)/2}}static closestNonSelfCursor(t,n){let i=1/0,s=null;return n.forEach(n=>{if(n.sessionId!==t.sessionId){let a=e.distanceBetween(t.mouse?.canvasSpacePosition,n.mouse?.canvasSpacePosition);a<i&&(i=a,s=n)}}),s}};Y.CURSOR_COLLISION_RADIUS=80;let Z=(0,D.eU)(!1);class J extends G.w{constructor(e){super(),this.position=e,this.type="BubblePopEntity",this.sortOrder=-2}}class Q extends G.w{constructor(e){super(),this.position=e,this.type="SparkleEntity"}}class $ extends G.w{constructor(e){super(),this.position=e,this.type="StarParticle",this.scale=(1+Math.random())*.3,this.sortOrder=-.5,this.customData.emissionAngle=Math.random()*Math.PI*2}}class ee extends G.w{constructor(e){super(),this.timedTriggers=e}update(e){return this.age+=e,this.timedTriggers=this.timedTriggers.filter(e=>!(this.age>=e.time)||(e.event(),!1)),this.timedTriggers.length>0}}let et=class e extends G.w{constructor({startingRelativePosition:t,startingRotation:n,position:i,viewportZoomScale:s,cursorOnRightForWindup:a,cursorOnRightForCollision:r,sessionId:l,getUserCursorTransform:o}){super(),this.type="AnimatedCursorEntity",this.lifetime=.85,r&&(this.sortOrder=-1),this.position=i,this.viewportZoomScale=s,this.cursorOnRightForWindup=a,this.cursorOnRightForCollision=r;let d={transform:`translate(${t.x}px, ${t.y}px) rotate(${n}rad)`},c={transform:`translate(${(this.cursorOnRightForWindup?1:-1)*90}px, 70px) rotate(${this.cursorOnRightForWindup?1:-1}rad) scale(0.9)`},u={transform:`translate(${(this.cursorOnRightForCollision?1:-1)*10}px, 0px) scale(2)`},p=e.RANDOM_VECTORS.map(e=>({transform:`translate(${10*e.x}px, ${10*e.y}px) ${u.transform}`})),m=1e3/60;this.customData={sessionId:l,animations:[{keyframes:[d,c],timing:{duration:12*m,easing:"cubic-bezier(.26,.32,.12,1)"}},{keyframes:[c,u],timing:{delay:12*m,duration:4*m,easing:"cubic-bezier(.16,.5,.47,1.25)"}},{keyframes:p,timing:{delay:16*m,duration:4*m,easing:`steps(${p.length})`}},{keyframes:[u,u],timing:{delay:20*m,duration:18*m}}],getReturnToCursorTransform:t=>{let n=(this.cursorOnRightForCollision?1:-1)*10,i=o(),a=(i.position.x-this.position.x)*s,r=(i.position.y-this.position.y)*s,l=i.rotation;return`translate(${e.lerp(n,a,t)}px,${e.lerp(0,r,t)}px) rotate(${e.lerp(0,l,t)}rad) scale(${e.lerp(2,1,t)})`}}}static lerp(e,t,n){return e*(1-n)+t*n}};et.RANDOM_VECTORS=[{x:.626086772987037,y:-.24715772511262912},{x:.16558013014491735,y:-.4962441097195551}];var en=n(491943);let ei=class e{constructor(){this.wiggleMeter=0,this.wiggleMode=!1,this.lastUpdateTime=0,this.shakeFactor=0,this.shakeGracePeriod=0,this.speedFactor=0,this.mouseX=0,this.mouseY=0,this.hasLastMousePosition=!1,this.lastMouseX=0,this.lastMouseY=0,this.lastDirectionX=0,this.lastDirectionY=0,this.subscriptions=[],this.mouseLeftCanvas=!1,this.highFiveKeyPressed=!1,this.mouseButtonHeld=!1}getWiggleMode(){return this.wiggleMode}getShakeFactor(){return this.shakeFactor}getAboutToHide(){return this.getWiggleMode()&&this.wiggleMeter<e.WIGGLE_MODE_ABOUT_TO_HIDE_TIME/e.WIGGLE_MODE_DEACTIVATION_TIME}onWiggleModeChange(e){return this.subscriptions.push(e),()=>{let t=this.subscriptions.indexOf(e);t>=0&&this.subscriptions.splice(t,1)}}setWiggleMode(e){if(e!==this.wiggleMode)for(let t of(this.wiggleMode=e,this.subscriptions))t(this.wiggleMode)}setMouseLeftCanvas(e){this.mouseLeftCanvas=e}getMouseLeftCanvas(){return this.mouseLeftCanvas}setHighFiveKeyPressed(e){this.highFiveKeyPressed=e}getHighFiveKeyPressed(){return this.highFiveKeyPressed}setMouseButtonHeld(e){this.mouseButtonHeld=e,this.update()}getMousePosition(){return{x:this.mouseX,y:this.mouseY,overCanvas:!this.mouseLeftCanvas}}stopWigglingNow(){this.speedFactor=0,this.shakeFactor=0,this.shakeGracePeriod=0,this.wiggleMeter=0,this.hasLastMousePosition=!1,this.lastDirectionX=0,this.lastDirectionY=0,this.setWiggleMode(!1),this.update()}startOrRefreshWiggle(){this.setWiggleMode(!0),this.wiggleMeter=1}getDeltaTime(){let e=performance.now(),t=e-this.lastUpdateTime;return this.lastUpdateTime=e,t/1e3}update(e,t){e?this.setMousePositionAndUpdate(e,t):this.updateWiggleMeter(t)}setMousePositionAndUpdate(t,n){if(this.mouseLeftCanvas||this.mouseButtonHeld)return;let i="number"==typeof n?n:this.getDeltaTime();if(i<=0)return;this.mouseX=t.x,this.mouseY=t.y;let s=1,a=(this.mouseX-this.lastMouseX)/i,r=(this.mouseY-this.lastMouseY)/i;if(this.lastMouseX=this.mouseX,this.lastMouseY=this.mouseY,!this.hasLastMousePosition){this.hasLastMousePosition=!0;return}let l=Math.sqrt(a*a+r*r);if(l>0){let e=a/l,t=r/l;s=e*this.lastDirectionX+t*this.lastDirectionY,this.lastDirectionX=e,this.lastDirectionY=t}let o=i/e.WIGGLE_MODE_MOVEMENT_DECAY_TIME,d=i/e.WIGGLE_MODE_MOVEMENT_MIN_TIME+o;this.speedFactor+=Math.min(l*e.WIGGLE_MODE_MOVEMENT_SENSITIVITY,d),this.speedFactor=Math.max(0,this.speedFactor-o),this.speedFactor=Math.min(1,this.speedFactor);let c=this.speedFactor>=.8,u=c&&s<0,p=Math.abs(this.lastDirectionX)>Math.abs(this.lastDirectionY);c&&u&&p&&(this.shakeFactor+=1/(this.wiggleMode?e.WIGGLE_MODE_REPLENISH_SHAKES:e.WIGGLE_MODE_MIN_SHAKES_TO_TRIGGER),this.shakeGracePeriod=1),this.shakeGracePeriod>0?this.shakeGracePeriod=Math.max(this.shakeGracePeriod-i/e.WIGGLE_MODE_SHAKE_GRACE_PERIOD,0):this.shakeFactor-=i/e.WIGGLE_MODE_SHAKE_RESET_TIME,this.shakeFactor=Math.min(Math.max(this.shakeFactor,0),1),c&&(Math.abs(this.shakeFactor)>=.8?this.wiggleMeter=1:this.wiggleMode&&Math.abs(this.shakeFactor)>=.3&&(this.wiggleMeter=Math.max(this.wiggleMeter,Math.abs(this.shakeFactor)))),this.updateWiggleMeter(i)}updateWiggleMeter(t){if((t="number"==typeof t?t:this.getDeltaTime())<=0)return;this.wiggleMeter<=0?this.setWiggleMode(!1):this.wiggleMeter>=1&&this.setWiggleMode(!0);let n=0;n=this.mouseLeftCanvas?-e.WIGGLE_MODE_LEAVE_CANVAS_GRACE_PERIOD:this.highFiveKeyPressed?e.WIGGLE_MODE_HIGH_FIVE_KEY_TIME:this.wiggleMode?-e.WIGGLE_MODE_DEACTIVATION_TIME:-e.WIGGLE_MODE_MOUSE_RESET_TIME,this.wiggleMeter+=t/n,this.wiggleMeter=Math.min(Math.max(this.wiggleMeter,0),1)}};function es(){return{cursorWiggleDetector:new ei,cursorEntitySystem:new V,cursorCollisionDetector:new Y,cursorKinematics:new en.p}}ei.WIGGLE_MODE_DEACTIVATION_TIME=6,ei.WIGGLE_MODE_ABOUT_TO_HIDE_TIME=3,ei.WIGGLE_MODE_HIGH_FIVE_KEY_TIME=.5,ei.WIGGLE_MODE_MOUSE_RESET_TIME=.6,ei.WIGGLE_MODE_MOVEMENT_SENSITIVITY=4e-5,ei.WIGGLE_MODE_MOVEMENT_MIN_TIME=.1,ei.WIGGLE_MODE_MOVEMENT_DECAY_TIME=1.5,ei.WIGGLE_MODE_MIN_SHAKES_TO_TRIGGER=6.5,ei.WIGGLE_MODE_REPLENISH_SHAKES=3.5,ei.WIGGLE_MODE_SHAKE_GRACE_PERIOD=.3,ei.WIGGLE_MODE_SHAKE_RESET_TIME=.5,ei.WIGGLE_MODE_LEAVE_CANVAS_GRACE_PERIOD=.3;let ea=(0,F.xx)(function(e){return e.reduce((e,t)=>(e[t.sessionID]=t,e),{})});function er(e,t,n,i,s){let a=((0,en.I)(t.getHandsOnRight(),n)?1:-1)*(Math.PI/4),r=32/i,l={x:e.x+r*Math.sin(a),y:e.y-r*Math.cos(a)};return s||(l.x+=16/i,l.y+=16/i),{position:l,rotation:a}}function el(e,t){return!!e.find(e=>"AnimatedCursorEntity"===e.type&&e.customData.sessionId===t)}function eo(e,t,n,i,s){return!("editor"!==e.deviceName||t?.mouse?.canvasSpacePosition==null||isNaN(t?.mouse?.canvasSpacePosition.x)||t.mouse.pageId!==n||(-1===t.lastMouseMoveMs||window.performance.now()-t.lastMouseMoveMs>6e4)&&i!==e.sessionID)&&e.sessionID!==s}function ed(){let e=(0,_.lg)(),t=(0,k.XM)();return"whiteboard"===e&&!t}var ec=n(858959),eu=n(784220),ep=n(336547);function em({viewportInfo:e,bb:t}){let{zoomScale:n}=e,i=t.w*n,a=t.h*n,r=(n-1)*t.x,l=(n-1)*t.y,o={transform:`translate(${t.x+r}px, ${t.y+l}px)`,width:`${i}px`,height:`${a}px`};return(0,s.jsx)(ec.P.div,{className:"ai_animations--aiSelectionBox--vHELC",style:o,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.1}})}function eh({viewportInfo:e}){let t=(0,D.md)(ep.EO),n=(0,D.md)(ep.aG);return(0,s.jsx)(eu.N,{children:n&&t.map(t=>(0,s.jsx)(em,{viewportInfo:e,bb:t.boundingBox},t.guid))})}function ef(e,t){let n=3*e,i=3*e,s=1.7999999999999998*e,a=[];for(let e=0;e<=100;e+=2){if(0===e||100===e){a.push(eg(0,0,0));continue}let t=Math.floor(Math.random()*n)-n/2,r=Math.floor(Math.random()*i)-i/2,l=Math.floor(Math.random()*s)-s/2;a.push(eg(t,r,l))}return new Animation(new KeyframeEffect(t,a,{duration:100,easing:"ease-in-out",iterations:1/0}),document.timeline)}function eg(e,t,n){return{transform:`translate(${e}px, ${t}px) rotate(${n}deg)`}}function ex(e){return!!e.length&&e.some(e=>"running"===e.playState)}function e_(e){let{content:t,children:n}=e,[i,r]=(0,a.useState)(0),l=(0,a.useRef)(0),o=(0,a.useRef)([]),d=a.useRef(null),[c,u]=(0,a.useState)([]),p=(0,W.am)(),m=(0,a.useMemo)(()=>0===t.length?0:((t.match(/\!+$/g)||[])[0]||"").length,[t]),h=(0,a.useCallback)(e=>{clearTimeout(l.current),l.current=setTimeout(()=>{r(e=>(e>0&&h(250),Math.max(e-1,0)))},e)},[]);return(0,a.useEffect)(()=>{r(m),h(1e3)},[m,h]),(0,a.useEffect)(()=>{if(!d.current)return;i>1&&!o.current.length&&(o.current=[ef(1,d.current),ef(1.5,d.current),ef(2,d.current),ef(2.5,d.current),ef(3,d.current)]);let e=ex(o.current);if(i>1){let e=Math.min(i-1-1,o.current.length-1);o.current.forEach((t,n)=>{n===e?t.play():t.cancel()})}else o.current.forEach(e=>e?.cancel());let t=ex(o.current);!e&&t&&p("cursor_chat_rumble_triggered"),u(o.current.map(e=>e?.playState))},[i,p]),(0,s.jsx)("div",{"data-testid":"chat-animation-wrapper","data-test-animation-state":c,ref:d,children:n})}let ey={HANDLE_KEYDOWN:"HANDLE_KEYDOWN",HANDLE_INPUT:"HANDLE_INPUT",STOP_CHATTING:"STOP_CHATTING",START_FADING_INACTIVE_CHAT:"START_FADING_INACTIVE_CHAT",STOP_FADING_INACTIVE_CHAT:"STOP_FADING_INACTIVE_CHAT",HANDLE_EMOTE_ANIMATION_END:"HANDLE_EMOTE_ANIMATION_END"},ev={currentUserInput:"",previousLine:"",fadingOutText:"",isWidthLocked:!1,isShowingEmptyNewline:!1,inputIsEmpty:!0,currentEmoteBackground:N.NONE,width:0,isFigJam:!1,isFadingInactiveChat:!1,shouldClose:!1,hasTypedAnything:!1},eb=e=>{let t=document.createElement("canvas").getContext("2d");if(!t)return e;t.font="14px Inter, sans-serif";let n=Math.max(t.measureText(e.currentUserInput).width,t.measureText(e.previousLine).width);return{...e,width:n}};function eC(e,t){var n;let i=e.toLocaleLowerCase(),s=!(1===(n=i.charAt(i.length-t.length-1)).length&&/[A-Za-z]/.test(n));return i.endsWith(t)&&s}let ej=(e,t,n)=>{for(let t of O.keys())eC(e,t)&&(!function(e,t){R(e,t),R(e,t),R(e,t),R(e,t),R(e,t),R(e,t)}(t,O),n("cursor_chat_emote_triggered",{keyword:t}))},ek=e=>{for(let[t,n]of A)if(n&&eC(e,t))return{key:t,background:n}};function ew(e,t){switch(t.type){case ey.HANDLE_INPUT:{let n={...e},{value:i}=t.payload;if(e.isShowingEmptyNewline&&(n.isShowingEmptyNewline=!1),i.length>n.currentUserInput.length&&n.isFigJam){let{key:e,background:s}=ek(i)??{};s&&(n.currentEmoteBackground=s,t.payload.trackEvent("cursor_chat_background_effect_triggered",{keyword:e})),ej(i,M.Standard,t.payload.trackEvent)}return n.fadingOutText=n.previousLine,n.previousLine="",n.currentUserInput=i,e.hasTypedAnything||t.payload.trackEvent("cursor_chat_typed_something"),n.hasTypedAnything=!0,n.inputIsEmpty=0===n.currentUserInput.length&&0===n.previousLine.length,eb(n)}case ey.HANDLE_KEYDOWN:{let n=t.payload;if("Enter"===n.key){if(!1===e.hasTypedAnything)return e;let t={...e};return t.isShowingEmptyNewline=!0,t.inputIsEmpty=!1,t.isWidthLocked=!0,t.fadingOutText=t.previousLine,t.previousLine=t.currentUserInput,t.currentUserInput="",eb(t)}if("Escape"===n.key)return{...e,shouldClose:!0};return e}case ey.HANDLE_EMOTE_ANIMATION_END:{let t={...e};return t.isWidthLocked=!1,t.currentEmoteBackground=N.NONE,eb(t)}case ey.STOP_CHATTING:return{...e,shouldClose:!0};case ey.START_FADING_INACTIVE_CHAT:return{...e,isFadingInactiveChat:!0};case ey.STOP_FADING_INACTIVE_CHAT:return{...e,isFadingInactiveChat:!1};default:return e}}var eE=n(895651),eT=n(192075),eS=n(205084),eI=n(683875),eN=n(520960),eA=n(191421);let eL=(e,t,n)=>{a.useEffect(()=>{if(e.current){if(t){e.current.style.width="initial";return}e.current.style.width=`${n+35}px`}},[n,e,t])},eM=(e,t,n,i)=>{a.useEffect(()=>{n.current&&i.current&&(n.current.value=e,i.current.setAttribute("data-value",e))},[e,t,n,i])},eO="cursor_chat_emotes--PINK_GRADIENT--1KQ3C",eR="cursor_chat_emotes--animateBg---meP2",eP="cursor_chat_emotes--ORANGE_GRADIENT--cC1fw",eD="cursor_chat_emotes--GRAY_BACKGROUND--DAHAE",eF="cursor_chat_emotes--GLARE_ANIMATION--SuTBw",ez="cursor_chat_emotes--glareAnimation--x1WJw",eB="cursor_chat_emotes--NONE---FYHz";function eG(e){let t;let{color:n}=e,l="whiteboard"===(0,_.lg)(),d=a.useRef(null),c=a.useRef(null),u=(0,r.wA)(),p=(0,W.am)(),[{currentUserInput:m,previousLine:f,fadingOutText:g,isFadingInactiveChat:x,isShowingEmptyNewline:y,inputIsEmpty:v,currentEmoteBackground:b,width:C,shouldClose:j,hasTypedAnything:k},w]=a.useReducer(ew,{...ev,isFigJam:l});eL(d,v,C),eM(m,f,d,c),function(e,t,n,i){a.useEffect(()=>{o.h3O?.sendChatMessage(e,t)},[e,t]);let s=a.useCallback(()=>{o.h3O?.sendChatMessage("",""),i(eI.Ho())},[i]);a.useEffect(()=>{n&&s()},[n,s]),a.useEffect(()=>()=>s(),[s])}(m,f,j,u);let E=a.useCallback(()=>{u(eI.Ho()),w({type:ey.STOP_CHATTING})},[u,w]);a.useEffect(()=>{w({type:ey.STOP_FADING_INACTIVE_CHAT});let e=setTimeout(()=>{w({type:ey.START_FADING_INACTIVE_CHAT})},5e3),t=setTimeout(()=>{w({type:ey.STOP_FADING_INACTIVE_CHAT}),E()},8e3);return()=>{clearTimeout(e),clearTimeout(t)}},[m,w,E]),a.useEffect(()=>{let e=e=>{w({type:ey.HANDLE_KEYDOWN,payload:e})},t=()=>{document.removeEventListener("keydown",e)},n=()=>{document.addEventListener("keydown",e)};return d.current&&(window.focus(),d.current.focus({preventScroll:!0})),document.addEventListener("keydown",e),document.addEventListener("compositionstart",t),document.addEventListener("compositionend",n),()=>{document.removeEventListener("keydown",e),document.removeEventListener("compositionstart",t),document.removeEventListener("compositionend",n)}},[w,d]);let T=a.useCallback(e=>{if((0,eN.n3)(e.relatedTarget,(0,eN.Tc)(eA.oP))){d.current?.focus();return}E()},[E]),S=(0,h.GL)(n),I=S===h.e3?"chat_input--lightPlaceholder--YGSmc":"chat_input--darkPlaceholder--BH5Qn",N=(0,eT.t)("whiteboard.cursor_chat.say_something");switch(eS.Gq()?.getPrimaryLocale(!1)){case"ja":t=18;break;case"ko-kr":t=13;break;default:t=N.length}let A=(0,s.jsx)("div",{className:`chat_input--mask--P6RFl ${x?"chat_input--fading--EBfYy":""} `,style:{boxShadow:`2px 4px 8px ${n}40`},children:(0,s.jsxs)("label",{ref:c,className:"chat_input--inputSizer--9JY00",children:[(0,s.jsx)("input",{ref:d,className:`chat_input--input--2o9dx ${I} ${y?"chat_input--expanded--1W44Y":""}`,dir:"auto",maxLength:50,onBlur:T,onChange:e=>w({type:ey.HANDLE_INPUT,payload:{value:e.currentTarget.value,trackEvent:p}}),placeholder:k?"":N,size:k?1:t,spellCheck:!1,style:{color:S,backgroundColor:"transparent"},type:"text",value:m}),(0,s.jsx)("div",{className:`chat_input--chatBackground--Mdxwm ${i[b]}`,style:{background:n,color:S},onAnimationEnd:()=>w({type:ey.HANDLE_EMOTE_ANIMATION_END})}),(0,s.jsx)("div",{style:{color:S},className:"chat_input--previousChat--Y2u9G",children:f}),(0,s.jsx)("div",{style:{color:S},className:"chat_input--fadingOutLine--VF6ni chat_input--previousChat--Y2u9G chat_input--animated--ADHj-",children:g},g)]})});return l?(0,s.jsx)(e_,{content:m,children:A}):A}var eU=n(392260),eV=n(683075);function eH(){let e=(0,l.G)(),t=(0,eE.K)(),n=(0,r.d4)(({multiplayer:{allUsers:e}})=>e[0]?.color||eU.w3),i=e.enhancedContrast?(0,h.En)(n):n,a=eV.Rt;return(0,s.jsx)("div",{className:a,style:{opacity:t?1:0},children:(0,s.jsx)(eG,{color:i})})}var eK=n(704422),eW=n(951002),eq=n(944338),eX=n(681398),eY=n(473918),eZ=n(547829);function eJ(e,t,n){let i=o.z7E[t];return n?(0,I.CZ)(`multiplayer_cursors/ui3/${i}/${e.substring(1)}.png`):(0,I.CZ)(`multiplayer_cursors/v1/${i}/${e.substring(1)}.png`)}function eQ(e,t){if(t){let t=eZ.JR[e.substring(1)]??eZ.JR[eZ.p4];return`data:image/png;base64, ${t}`}let n=eZ.De[e.substring(1)]??eZ.De[eZ.p4];return`data:image/png;base64, ${n}`}function e$({viewportInfo:e,cursorEntities:t}){let n=(0,E.KP)(),i=(0,r.d4)(({multiplayer:{allUsers:e}})=>e);return(0,s.jsx)(s.Fragment,{children:t.map(t=>{let a;switch(t.type){case"StarParticle":a=(0,s.jsx)(e8,{emissionAngle:t.customData.emissionAngle});break;case"BubblePopEntity":a=(0,s.jsx)(tt,{});break;case"SparkleEntity":a=(0,s.jsx)(tn,{});break;case"AnimatedCursorEntity":let r=t.customData.sessionId,l=n.toString()===r,o=l?e5:i.find(e=>e.sessionID.toString()===r)?.color;a=(0,s.jsx)(e9,{customData:t.customData,color:o,isCurrentUser:l})}return a&&(0,s.jsx)(e1,{canvasPosition:t.position,viewportInfo:e,rotation:t.rotation,scale:t.scale,children:a},t.id)})})}function e0({cursorWiggleStatus:e,temporarilyHide:t,isCursorHandOnRight:n}){let[i,r]=a.useState(!1);return a.useEffect(()=>{let t=requestAnimationFrame(()=>{r("HIDDEN"!==e)});return()=>cancelAnimationFrame(t)},[e]),(0,s.jsx)("div",{className:"cursor_high_five--highFiveCursorForSelf--cVByQ",children:(0,s.jsx)(e3,{color:e5,isHighFiveHandOut:i,aboutToHide:"ABOUT_TO_HIDE"===e,temporarilyHide:t,isCursorHandOnRight:n})})}function e1({canvasPosition:e,viewportInfo:t,children:n,rotation:i=0,scale:a=1}){let r=(0,C.Z0)(t,e||{x:0,y:0});return(0,s.jsx)(e2,{viewportPosition:r,rotation:i,scale:a,children:n})}function e2({viewportPosition:e,children:t,rotation:n=0,scale:i=1}){let a={transform:`translate3D(${0|e.x}px, ${0|e.y}px, 0) translate(-50%, -50%) rotate(${n}rad) scale(${i})`};return(0,s.jsx)("div",{className:"cursor_high_five--highFiveAbsoluteContainer---G725",style:a,children:t})}function e3({color:e,isHighFiveHandOut:t,temporarilyHide:n,isCursorHandOnRight:i,aboutToHide:a=!1}){return(0,s.jsx)("div",{className:p()({"cursor_high_five--highFiveAnimationContainer--jWFVT":!0,"cursor_high_five--highFiveAnimHighFiveHandOut--6q5Bu":t,"cursor_high_five--highFiveAnimHighFiveHandAboutToHide--tFRSO":a}),children:(0,s.jsx)("div",{style:{opacity:n?"0":"1"},className:p()({"cursor_high_five--highFiveWaveContainer--M1fBF":!0,"cursor_high_five--cursorHandOnRight--wSZLI":i}),children:(0,s.jsx)(e7,{color:e})})})}let e5="#FFFFFF",e4=new Set([e5,"#0FA958","#5551FF","#9747FF","#848484","#D27C2C","#F24E1E","#FFC700","#667799","#9747FF","#007BE5","#FF24BD","#F24822","#FFCD29","#14AE5C"]);function e6({color:e}){let[t,n]=a.useState(!1);if(!e4.has(e))return(0,eW.KF)(!!e,`Unknown color ${e} for Cursor High Fives`),(0,s.jsx)(s.Fragment,{});let i=eJ(t?e5:e,o.z7E.HIGH_FIVE,!1);return(0,s.jsx)("img",{className:"cursor_high_five--handImage--mJVid",src:i,alt:"",onError:()=>n(!0)})}function e7({color:e}){return(0,s.jsx)(e6,{color:e},e)}function e8({emissionAngle:e}){return(0,s.jsx)("div",{className:"cursor_high_five--fallingStar--Kx2fO",children:(0,s.jsx)("div",{style:{transform:`rotate(${e}rad)`},children:(0,s.jsx)("div",{className:"cursor_high_five--shootingStar--tyk8Z",children:(0,s.jsx)(te,{})})})})}function e9({customData:e,color:t,isCurrentUser:n}){let i=a.useRef(null);return a.useLayoutEffect(()=>{if(!(0,eq.x)())return;let t=-1;return e.animations.forEach((n,s)=>{let a=i.current?.animate(n.keyframes,n.timing);a&&s===e.animations.length-1&&(a.onfinish=()=>{let n=null,s=0,a=1e3/60*12,r=l=>{let o=null===n?0:l-n;if(n=l,s+=o,i.current&&s<a){let n=s/a,l=Math.sin(2.1*n)/.8632093666488737*(1-n)+n;i.current.style.transform=e.getReturnToCursorTransform(l),t=requestAnimationFrame(r)}};t=requestAnimationFrame(r)})}),()=>{t>=0&&cancelAnimationFrame(t)}},[e,i]),(0,s.jsx)("div",{ref:i,children:(0,s.jsx)(e7,{color:t})})}function te(){let e=(0,I.ck)("353e095c3f9c8488d9bb83dec3ce1d4c689f96db");return(0,s.jsx)("img",{className:"cursor_high_five--starImage--GqFaX",src:e,alt:"star"})}function tt(){return(0,s.jsx)("div",{className:"cursor_high_five--bubble--9DVru"})}function tn(){return(0,s.jsx)("div",{className:"cursor_high_five--sparkle--hCRWw",style:{backgroundImage:`url(${(0,I.ck)("d67d53e57e063de9a1d2ae0edfb4dc96b2db406f")})`}})}var ti=n(489175),ts=n(448711),ta=n(835307),tr=n(773494);let tl="reactions--indicatorSolid--wjW1q";function to({viewportInfo:e,reactionInfo:t}){let n=(0,C.Z0)(e,t.canvasSpacePosition),[i]=(0,a.useState)(.5*Math.random()+2),[r]=(0,a.useState)(.4*Math.random()+.3),l={animationDuration:`${i.toFixed(1)}s`},o={animationDuration:`${r.toFixed(1)}s`},{x:d,y:c}=n;d-=5,c-=10;let[u]=(0,a.useState)(1*Math.random()+.5),p={willChange:"transform",transform:`translate3D(${0|d}px, ${0|c}px, 0) scale(${u})`},[m]=(0,a.useState)(Math.random()>.5?"reactions--forward--8SV6f":"reactions--backward--ZCNdY");return(0,s.jsx)("div",{className:"reactions--translationContainer--G9Mik",style:p,"data-testid":"reaction",children:(0,s.jsx)("div",{className:"reactions--floatingEmojiContainer--olUKm",style:l,children:(0,s.jsx)("img",{src:t.reactionId,className:`reactions--floatingEmoji--IKqDo ${m}`,style:o,alt:""})})})}function td({viewportInfo:e,multiplayerCursorsEnabled:t}){let n=j.R9.useReactionsBySessionId(),i=Object.keys(n),r=(0,E.KP)(),l=(0,ta.Fk)(e=>e.getCurrentPage()?.guid);return(0,s.jsx)(s.Fragment,{children:i.map(i=>{let o=n[i],d=Object.keys(o).filter(e=>o[e].pageId===l);return i===`${r}`||t?(0,s.jsx)(a.Fragment,{children:d.map(t=>{let n=o[t];return(0,s.jsx)(to,{viewportInfo:e,reactionInfo:n},t)})},i):null})})}let tc=[{x:0,y:-20,rotation:10,scale:1.6},{x:5,y:-35,rotation:-15,scale:1.2},{x:-2,y:-50,rotation:0,scale:.8}];function tu({multiplayerEmoji:e,viewportInfo:t}){let n=(0,y.x)({subscribeToUpdates_EXPENSIVE:!0}),i=(0,a.useRef)(0),[l,c]=(0,a.useState)(tl),[u,p]=(0,a.useState)(!1),m=(0,r.wA)(),h=(0,a.useCallback)(()=>{m(eI.mu())},[m]);(0,tr.Y)(h,{closeOnEsc:!0,ignore:"allClicks"});let{reactImageUrl:f,reactName:g}="REACTING_OR_CHATTING"===e.type?{reactImageUrl:e.imageUrl,reactName:e.name}:{reactImageUrl:null,reactName:null};return(0,a.useEffect)(()=>{if(c(tl),!f)return;let e=null,t=null,n=()=>{j.R9.sendReaction(f),K.H.trigger(o.JA.GENERIC),c(tl),null!=e&&clearTimeout(e),e=setTimeout(()=>{c("reactions--indicatorFading--ZTyOt reactions--indicatorSolid--wjW1q")},300)},s=e=>{" "===e.key&&null!==t&&clearInterval(t)},a=e=>{"CANVAS"===e.target.tagName&&(i.current=Date.now(),n(),t&&clearInterval(t),t=setInterval(()=>{n()},60),e.stopPropagation(),e.preventDefault())},r=e=>{if(null!=t){let e=t;if(i.current>0){let e=Date.now()-i.current;ts.F.trackFromFullscreen("emoji_reaction",{duration:e,image:f,name:g},!1),i.current=0}setTimeout(()=>{clearInterval(e)},70)}e.stopPropagation(),e.preventDefault()},l=new Set,d=0,u=null,m=e=>{if("mouse"===e.pointerType){a(e);return}if("CANVAS"!==e.target.tagName||u&&e.pointerId===u.pointerId)return;l.add(e.pointerId);let n=l.size;if(d=Math.max(n,d),1===n){let t=new PointerEvent("pointermove",e);e.target?.dispatchEvent(t),u=new PointerEvent("pointerdown",e)}d<=1?a(e):(u&&(e.target?.dispatchEvent(u),u=null),t&&clearInterval(t),p(!0))},h=e=>{"mouse"!==e.pointerType&&u&&e.pointerId===u.pointerId&&(u=new PointerEvent("pointerdown",{bubbles:u.bubbles,cancelable:u.cancelable,composed:u.composed,detail:u.detail,view:u.view,altKey:u.altKey,ctrlKey:u.ctrlKey,metaKey:u.metaKey,shiftKey:u.shiftKey,button:u.button,buttons:u.buttons,clientX:e.clientX,clientY:e.clientY,movementX:e.movementX,movementY:e.movementY,relatedTarget:u.relatedTarget,screenX:e.screenX,screenY:e.screenY,isPrimary:u.isPrimary,pointerId:u.pointerId,pointerType:u.pointerType}))},x=e=>{if("mouse"===e.pointerType){r(e);return}if(!l.has(e.pointerId))return;l.delete(e.pointerId);let t=l.size;1===d&&r(e),0===t&&(d=0,u=null,p(!1))},_=(0,ti.ft)(!0);return _?(document.addEventListener("pointerdown",m,!0),document.addEventListener("pointermove",h,!0),document.addEventListener("pointerup",x,!0),document.addEventListener("pointercancel",x,!0)):(document.addEventListener("mousedown",a,!0),document.addEventListener("mouseup",r,!0),document.addEventListener("mouseleave",r,!0)),document.addEventListener("keydown",s),()=>{null!=t&&clearInterval(t),null!=e&&clearTimeout(e),_?(document.removeEventListener("pointerdown",m,!0),document.removeEventListener("pointermove",h,!0),document.removeEventListener("pointerup",x,!0),document.removeEventListener("pointercancel",x,!0)):(document.removeEventListener("mousedown",a,!0),document.removeEventListener("mouseup",r,!0),document.removeEventListener("mouseleave",r,!0)),document.removeEventListener("keydown",s)}},[f,g]),f&&n&&!u?(0,s.jsx)("div",{className:l,style:{willChange:"transform",transform:`translate3D(${n.x-t.x}px, ${n.y-0}px, 0)`},children:(0,d.kc)().figjam_emoji_stamps_mw25?tc.map((e,t)=>(0,s.jsx)("img",{style:{opacity:.5,position:"absolute",transform:`translate3D(${e.x}px, ${e.y}px, 0) rotate(${e.rotation}deg) scale(${e.scale})`},src:f,alt:""},t)):(0,s.jsx)("img",{src:f,alt:""})}):null}let tp=(0,a.memo)(function({name:e,color:t,cursorType:n,chatMessage:r,isHighFiving:c,focusOnTextCursor:u,temporarilyHide:f,isCursorHandOnRight:g,isCursorPointingRight:x,editorType:_,isCursorAndChatAreaOffscreen:y,sessionId:v,prefersReducedMotion:b,isHighFivingSupported:C,useChatAnimation:j,disableMessageFade:k,isStaticView:w,isHoveringWidgetWithHiddenCursors:E}){let T=(0,l.G)(),[S,I]=(0,a.useState)(1),L=(0,a.useMemo)(()=>(0,h.GL)(t),[t]),M=T.enhancedContrast?(0,h.En)(t):t,[O,R]=(0,a.useState)(N.NONE),D=()=>R(N.NONE),[F,z]=(0,a.useState)(w),[B,G]=r||[];(0,a.useEffect)(()=>{let e,t;return B||G?(z(!0),I(1)):(z(!1),D()),k||(e=setTimeout(()=>{I(0)},5e3),t=setTimeout(()=>{z(!1),D()},8e3)),()=>{I(0),z(!1),D(),clearTimeout(e),clearTimeout(t)}},[B,G,k]);let U="whiteboard"===_;(0,a.useEffect)(()=>{if(U&&B&&!y)for(let e of A.keys()){let t=A.get(e);t&&eC(B,e)&&R(t)}},[B,y,U]);let V=a.useRef(null);(0,a.useEffect)(()=>{if(V.current&&V.current.innerText===B){let e=m.sn.tryStop(`view_cursor_chat_message_${v}_${B}`);e&&m.Vq.add("view_cursor_chat_message",e)}},[B,V,v]);let H=(0,d.kc)().cursor_bot&&x&&n===o.z7E.DEFAULT,K=n===o.z7E.PEN,W=(0,s.jsxs)("div",{className:p()({[eV.iU]:F,[eV.VW]:!F,[eV.S8]:!K,[eV.z8]:H}),style:{color:L},children:[(0,s.jsx)("div",{className:F?eV.bu:eV.iY,style:{opacity:F?L===h.e3?.8:.5:1},dir:"auto",children:e}),F&&(0,s.jsxs)("div",{className:eV.Lo,style:{opacity:L===h.YN?.8*S:S,boxShadow:U?void 0:`2px 4px 8px ${M}40`},dir:"auto",children:[G&&(0,s.jsx)("div",{className:G.length>0&&(B?.length??0)>0?eV.vD:"",children:G}),B&&(0,s.jsx)("div",{ref:V,children:B})]}),(0,s.jsx)("div",{className:`${eV.hD} ${i[O]}`,style:"NONE"!==O?{background:M,overflow:"hidden",borderRadius:"2px 20px 20px 20px"}:{background:M},onAnimationEnd:()=>D()})]});return u?null:(0,s.jsxs)("div",{className:eV.Dy,style:{opacity:E?0:1},"data-testid":`multiplayer-cursor-${v}`,children:[(0,s.jsxs)("div",{className:eV.or,children:[C?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:eV.p,children:(0,s.jsx)(e3,{color:t,isHighFiveHandOut:c,temporarilyHide:f,isCursorHandOnRight:g})}),(0,s.jsx)("img",{className:p()({[eV.u0]:!0,[eV.Bj]:!0,[eV.DE]:c,[eV.z8]:H}),src:eJ(t,c?o.z7E.DEFAULT:n,!0),alt:`${c?"highfive cursor":"hand cursor"}`,onError:({currentTarget:e})=>{e.onerror=null,e.src=eQ(t,!0)}})]}):(0,s.jsx)("img",{className:p()({[eV.u0]:!0,[eV.z8]:H}),src:eJ(t,n,!0),alt:"cursor",onError:({currentTarget:e})=>{e.onerror=null,e.src=eQ(t,!0)}}),v&&(0,s.jsx)(P.o,{sessionId:v})]}),(j||U)&&!b?(0,s.jsx)(e_,{content:B||"",children:W}):W]})}),tm=a.memo(function({isCursorAndChatAreaOffscreen:e,x:t,y:n,children:i}){let a={display:e?"none":"block",willChange:"transform",transform:e?"translate3D(-10000px, -10000px, 0)":`translate3D(${t}px, ${n}px, 0)`};return(0,s.jsx)("div",{style:a,children:i})});function th(){let e=(0,c.R)(({multiplayer:{allUsers:e}})=>e.map(e=>e.sessionID)),t=(0,C._X)({subscribeToUpdates_expensive:!0}),n=(0,a.useContext)(S.kw);(0,y.x)({subscribeToUpdates_EXPENSIVE:!1});let i=(0,a.useMemo)(()=>n.getCommentsWrapperOffset(t),[n,t]),l=(0,E.KP)(),d=(0,k.XM)(),u=(0,r.d4)(e=>e.multiplayerEmoji),p=!(0,T.ut)(o.Ez5?.uiState().hideMultiplayerCursors,!1),m=(0,w.p8)("currentTool"),h=ed(),[f,g,_,v]=function(){let[e]=(0,a.useState)(es);!function(e){let t=(0,W.am)(),[n,i]=(0,D.fp)(Z),s=ed(),l=function(){let e=(0,r.d4)(e=>{let t=e.mirror.appModel.currentTool;return t===o.NLJ.SELECT||t===o.NLJ.HAND}),t=(0,r.d4)(e=>e.multiplayerEmoji?.type==="WHEEL"||e.multiplayerEmoji?.type==="REACTING_OR_CHATTING"),n=(0,r.d4)(e=>e.mirror.appModel.activeCanvasEditModeType);return e&&!t&&n!==o.m1T.TEXT}(),d=(0,T.J2)((0,q.UK)().cursorHighFiveWiggle),c=(0,a.useRef)(null),u=(0,a.useRef)(0);(0,a.useEffect)(()=>{l||e.stopWigglingNow()},[e,l]),(0,a.useEffect)(()=>{let n=e.onWiggleModeChange(n=>{j.R9.sendHighFiveStatus(n),i(n),n&&e.getHighFiveKeyPressed()?t("figjam_cursor_high_five_events",{type:"enter_hands_up",source:"keyboard"}):n&&t("figjam_cursor_high_five_events",{type:"enter_hands_up",source:"mouse"})});return()=>{n()}},[e,i,t]),(0,a.useEffect)(()=>{n?(e.startOrRefreshWiggle(),e.setMouseLeftCanvas(!1),e.update()):e.stopWigglingNow()},[e,n]);let p=(0,a.useCallback)(()=>{clearTimeout(u.current),u.current=setTimeout(()=>{e.getHighFiveKeyPressed()&&!e.getWiggleMode()&&(e.update(),p())},250)},[e]);(0,a.useEffect)(()=>()=>clearTimeout(u.current),[]);let m=(0,r.Pj)(),h=(0,a.useCallback)(t=>{let n=t.metaKey||t.ctrlKey||t.altKey||t.shiftKey;if("h"!==t.key||n)" "!==t.key&&"/"!==t.key&&!n&&e.getWiggleMode()&&(e.setHighFiveKeyPressed(!1),c.current=null,e.stopWigglingNow());else{if(!e.getHighFiveKeyPressed()){let e=m.getState().mirror.appModel.currentTool;c.current=e}e.setHighFiveKeyPressed(!0),e.update(),p()}},[e,p,m]),f=(0,a.useCallback)(t=>{"h"===t.key&&(e.getWiggleMode()&&null!==c.current&&c.current!==o.NLJ.HAND&&o.glU.triggerActionInUserEditScope("set-tool-default",{source:"cursor-high-fives"}),c.current=null,e.setHighFiveKeyPressed(!1),e.stopWigglingNow())},[e,c]),g=(0,a.useCallback)(t=>{e.getWiggleMode()&&(e.setHighFiveKeyPressed(!1),e.stopWigglingNow()),(0===t.button||1===t.button)&&e.setMouseButtonHeld(!0)},[e]),x=(0,a.useCallback)(()=>{e.setMouseButtonHeld(!1)},[e]),_=(0,a.useCallback)(t=>{let n=!(t.target instanceof Element&&t.target.closest("#fullscreen-root"));e.setMouseLeftCanvas(n),e.update({x:t.clientX,y:t.clientY})},[e]),y=s&&l;(0,X.Po)("keydown",h,y),(0,X.Po)("keyup",f,y),(0,X.Po)("pointerdown",g,y),(0,X.Po)("pointerup",x,y),(0,X.Po)("mousemove",_,y&&d)}(e.cursorWiggleDetector);let t=(0,W.am)(),[n,i]=(0,a.useState)([]),[s,l]=(0,a.useState)("HIDDEN"),[d,c]=(0,a.useState)(()=>new Set),u=(0,C.bs)({subscribeToUpdates_expensive:!0}),p=(0,a.useRef)({oldEntitiesKey:"",oldHandsOnRightKey:"",oldWiggleMode:!1,oldWiggleStatus:"HIDDEN"});return j.R9.useInfoBySessionIdSubscription((0,a.useMemo)(()=>(0,z.n)(100,()=>{let n=u.current;if(!n)return;(function(e,t,n){if(!H.D||!o.h3O)return;let i=H.D.getState(),s=j.R9.infoBySessionId();if(!i.mirror||!i.mirror.appModel)return;let a=o.h3O.currentSessionID(),r=i.multiplayer,l=i.mirror.appModel.currentPage,d=r.observingSessionID,c=ea(r.allUsers),u=Object.values(s).filter(e=>{if(!e.highFiveStatus||!e.mouse)return!1;let t=c[e.sessionId];return!!t&&(t.sessionID===a||eo(t,e,l,d,a))});t.cursorKinematics.updateCursors(u,a,t.cursorWiggleDetector.getWiggleMode(),t.cursorWiggleDetector.getMousePosition());let p=e?.zoomScale||1;t.cursorCollisionDetector.updateAndCheckCollisions(u).forEach(e=>(function(e,t,n,i,s){let[a,r]=e,l=el(i.cursorEntitySystem.getEntities(),a.sessionId),d=el(i.cursorEntitySystem.getEntities(),r.sessionId);if(l&&d)return;let c=a.sessionId===n.toString(),u=r.sessionId===n.toString(),p=a.mouse.canvasSpacePosition,m=r.mouse.canvasSpacePosition,h=Y.computeMidpoint(p,m);h.y-=38/t;let f=p.x>m.x,g=c||u?c:f;(c&&!l||u&&!d)&&i.cursorWiggleDetector.startOrRefreshWiggle(),e.forEach((e,n)=>{if(!el(i.cursorEntitySystem.getEntities(),e.sessionId)&&e.mouse){let s=er(e.mouse.canvasSpacePosition,i.cursorKinematics,e.sessionId,t,c);B.eD&&setTimeout(()=>{K.H.trigger(o.JA.GENERIC)},400),i.cursorEntitySystem.addEntity(new et({startingRelativePosition:{x:(s.position.x-h.x)*t,y:(s.position.y-h.y)*t},startingRotation:s.rotation,position:h,viewportZoomScale:t,cursorOnRightForWindup:0===n?f:!f,cursorOnRightForCollision:0===n?g:!g,sessionId:e.sessionId,getUserCursorTransform:()=>er(j.R9.infoBySessionId()[e.sessionId]?.mouse?.canvasSpacePosition||{x:0,y:0},i.cursorKinematics,e.sessionId,t,0===n?c:u)}))}}),i.cursorEntitySystem.addEntity(new ee([{time:.3,event:()=>{i.cursorEntitySystem.addEntity(new J(h)),i.cursorEntitySystem.addEntity(new Q(h));for(let e=0;e<6;e++)i.cursorEntitySystem.addEntity(new $(h))}}])),s("figjam_cursor_high_five_events",{type:"give_high_five"})})(e,p,a,t,n)),t.cursorEntitySystem.update()})(n,e,t);let s=e.cursorEntitySystem.getEntities(),a=s.map(e=>e.id).join(",");a!==p.current.oldEntitiesKey&&i(s);let r=e.cursorWiggleDetector.getWiggleMode(),d=e.cursorWiggleDetector.getAboutToHide()?"ABOUT_TO_HIDE":r?"SHOWN":"HIDDEN";d!==p.current.oldWiggleStatus&&l(d);let m=e.cursorKinematics.getHandsOnRight(),h=Array.from(m.keys()).join(",");h!==p.current.oldHandsOnRightKey&&c(new Set(m)),p.current.oldEntitiesKey=a,p.current.oldWiggleMode=r,p.current.oldWiggleStatus=d,p.current.oldHandsOnRightKey=h}),[u,t,e])),[n,s,!e.cursorWiggleDetector.getMouseLeftCanvas(),d]}(),b="HIDDEN"!==g,I=eY.mZ.NONE,N=m===o.NLJ.HAND?o.NLJ.HAND:o.NLJ.SELECT,A=b?o.NLJ.SELECT:N;"REACTING_OR_CHATTING"===u.type&&u.isChatting?I=eY.mZ.CHAT:b&&(I=eY.mZ.HIGH_FIVE);let L=function(e){let t=e===eY.mZ.NONE,[n,i]=(0,a.useState)(!t);return(0,a.useEffect)(()=>{let e=()=>i(!1);if(!t){i(!0);return}if(!eX.Ay.isIpad&&!eX.Ay.isMeetDevice)return document.addEventListener("mousemove",e),()=>document.removeEventListener("mousemove",e);e()},[t]),n}(I);if(null==t)return null;let M={left:`${0|t.x}px`,top:`${0|t.y}px`,width:`${0|t.width}px`,height:`${0|t.height}px`},O=(0-t.offsetX)*t.zoomScale+i.x,R=(0-t.offsetY)*t.zoomScale+i.y,P={top:`${t.y+t.height/2}px`,left:`${t.x+t.width/2}px`,transform:`translate(${O}px, ${R}px)`};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(x.p,{children:(0,s.jsx)("div",{"aria-hidden":!0,"data-forward-events-to-fullscreen":!0,className:eV.Lw,style:P,children:p&&(0,s.jsxs)("div",{className:d?eV.W7:eV.PT,children:[(0,s.jsx)(eh,{viewportInfo:t}),e.map(e=>e===l?null:(0,s.jsx)(tg,{sessionID:e,viewportInfo:t,cursorEntities:f,cursorHandsOnRight:v,isHighFivingSupported:h},e))]})})}),(0,s.jsxs)("div",{"aria-hidden":!0,"data-forward-events-to-fullscreen":!0,className:eV.zr,style:M,children:[L&&(0,s.jsxs)(eY.AS,{currentToolForCursor:A,children:[I===eY.mZ.CHAT&&(0,s.jsx)(eH,{}),(0,s.jsx)(e0,{cursorWiggleStatus:g,temporarilyHide:!_||el(f,l.toString()),isCursorHandOnRight:(0,en.I)(v,l.toString())})]}),h&&p?(0,s.jsx)(e$,{viewportInfo:t,cursorEntities:f}):null,t?(0,s.jsx)(td,{viewportInfo:t,multiplayerCursorsEnabled:p}):null,t&&"REACTING_OR_CHATTING"===u.type?(0,s.jsx)(tu,{multiplayerEmoji:u,viewportInfo:t}):null]})]})}let tf=(e,t,n)=>{let i=a.useRef(null);i.current=e?.sessionId??i.current,(0,a.useEffect)(()=>{i.current&&n&&b.zw?.setOtherUserChattingState(i.current,t)},[n,t]),(0,a.useEffect)(()=>(i.current&&b.zw?.setOtherUserChattingState(i.current,!1),()=>{i.current&&b.zw?.setOtherUserChattingState(i.current,!1)}),[])};function tg({sessionID:e,viewportInfo:t,cursorEntities:n,cursorHandsOnRight:i,isHighFivingSupported:a}){let l=(0,r.d4)(({multiplayer:{allUsers:t}})=>t.find(t=>t.sessionID===e)),o=(0,w.p8)("currentPage"),c=(0,f.j)(),u=(0,_.lg)(),p=(0,T.J2)((0,v.d)().showOutlines),m=(0,eK.S)(),h=(0,r.d4)(({multiplayer:{observingSessionID:e}})=>-1!==e),g=j.R9.useInfoBySessionId({updateSynchronously:h})[e],x=!m&&g?g.chatMessage:[null],y=(0,E.KP)(),b=(0,E._E)(),k=!!(l&&g?.mouse&&eo(l,g,o,b,y));if(tf(g,!!(x&&x.length&&x[0]),k),!k||!g?.mouse)return null;let S=!!(0,d.kc)().ee_text_selection_in_mp&&g.focusOnTextCursor,I=p?"#848484":l.color,N=g.mouse.canvasSpacePosition,A=(0,C.Z0)(t,N),L=function({x:e,y:t},{width:n,height:i}){return e<0||t<0||e>n||t>i}(A,t)&&function({x:e,y:t}){return e<-400||t<-100}(A),M=t.zoomScale,O=(M-1)*N.x,R=(M-1)*N.y,P=l.sessionID.toString();return(0,s.jsx)(tm,{x:N.x+O,y:N.y+R,isCursorAndChatAreaOffscreen:L,children:(0,s.jsx)(tp,{chatMessage:x,color:I,cursorType:g.cursorType,editorType:u,focusOnTextCursor:S??!1,isCursorAndChatAreaOffscreen:L,isCursorHandOnRight:(0,en.I)(i,P),isHighFiving:g.highFiveStatus,isHighFivingSupported:a,isHoveringWidgetWithHiddenCursors:g.isHoveringWidgetWithHiddenCursors,name:l.name,prefersReducedMotion:c,sessionId:l.sessionID,temporarilyHide:el(n,P)})})}function tx(){return(0,s.jsx)(g.tH,{boundaryKey:"MultiplayerCursors",fallback:g.H4.NONE_I_KNOW_WHAT_IM_DOING,children:(0,s.jsx)(th,{})})}},217961:(e,t,n)=>{n.d(t,{C:()=>s,X:()=>a});var i=n(795033);let s=(0,n(985416).Wh)(()=>(0,i.eU)(0)),a=(0,i.eU)(!1)},592228:(e,t,n)=>{n.d(t,{vx:()=>eS,oo:()=>eM,OG:()=>eI});var i=n(104076),s=n(716976),a=n(237420),r=n(638004),l=n(833737),o=n(266808),d=n(681958),c=n(980852),u=n(812714),p=n(795033),m=n(674524),h=n(511570),f=n.n(h),g=n(983500),x=n(434511),_=n(76616),y=n(221586),v=n(641518),b=n(550209),C=n(652539),j=n(236631),k=n(192075),w=n(659062),E=n(324109),T=n(428045),S=n(736216),I=n(893178),N=n(568590),A=n(371952),L=n(692042),M=n(106112),O=n(582689),R=n(448711),P=n(835307),D=n(349311),F=n(294745),z=n(336547),B=n(91704),G=n(579337),U=n(737139),V=n(390036),H=n(740419);function K({modeNames:e}){if(0===e.length)return null;let t=1===e.length?e[0]:e[0]+" + "+(e.length-1);return(0,i.jsx)("div",{className:H.Io,"data-testid":"variable-mode-pill","data-tooltip-type":D.Ib.TEXT,"data-tooltip":(0,k.t)("variables.mode_pill.tooltip",{listOfModes:(0,V.Yx)(e)}),children:(0,i.jsx)("div",{className:H.XW,children:t})})}var W=n(170462),q=n(167151),X=n(382827),Y=n(684742),Z=n(390579),J=n(736813),Q=n(92299),$=n(291355),ee=n(566447),et=n(15890),en=n(221154),ei=n(405864),es=n(597304);function ea(){return(0,i.jsx)("div",{className:j.s.flex.itemsCenter.justifyCenter.$,children:(0,i.jsx)("div",{className:H.xE})})}class er extends s.PureComponent{constructor(){super(...arguments),this.expandMouseDown=e=>{this.props.expandMouseDown(this.props.guid,e)}}renderNodeIndents(){let e=[];for(let t=0;t<this.props.level+1;t++){let n=`[${t}]`,s=-1!==this.props.isLastMaskedAtLevels.indexOf(n),a=-1!==this.props.isMaskedAtLevels.indexOf(n),r=t===this.props.level&&this.props.mask,l=t===this.props.level&&this.props.hasChildren,o=f()(H.dK,H.co,{[H.TY]:this.props.displayOrder===Q.k.DOM});e.push((0,i.jsx)("span",{className:H.pZ},t)),s?e.push((0,i.jsx)(C.B,{svg:l?ei.A:es.A,className:o},`${t}-mask`)):a?e.push((0,i.jsx)(C.B,{svg:l?en.A:et.A,className:o},`${t}-mask`)):r&&e.push((0,i.jsx)(C.B,{svg:l?ee.A:$.A,className:o},`${t}-mask`)),this.props.hasBullet&&t===this.props.level?e.push((0,i.jsx)(Y.E,{recordingKey:v.Pt(this.props,"expandCaret"),className:H.OI,actionOnPointerDown:!0,onClick:this.expandMouseDown,htmlAttributes:{"data-testid":this.props.isMeasurementNode?void 0:"new-frame-bullet"},children:(0,i.jsx)(ea,{})},"expand-caret")):l&&e.push((0,i.jsx)(Y.E,{recordingKey:v.Pt(this.props,"expandCaret"),className:f()(H.GE,H.Fq),actionOnPointerDown:!0,onClick:this.expandMouseDown,children:this.props.isExpanded?(0,i.jsx)(Z.O,{}):(0,i.jsx)(J.k,{})},"expand-caret"))}return e}render(){return(0,i.jsx)("span",{ref:this.props.indentsRefCallback,className:H.Wm,children:this.renderNodeIndents()})}}er.displayName="Indents";var el=n(271899),eo=n(4921),ed=n(740681),ec=n(106774),eu=n(11048);let ep=s.memo(function(e){let{locked:t,isAncestorLocked:n,onMouseDown:a,recordingKey:r}=e,l=(0,s.useRef)(null),o=s.useCallback(e=>{e&&a(e)},[a]),d=v.rf(r,"mousedown",o),c=s.useMemo(()=>({onMouseDown:d,onKeyDownCapture:e=>{(e?.code==="Space"||e?.key==="Enter")&&d(new MouseEvent("mousedown",{altKey:e.altKey}))},onMouseLeave:()=>{l?.current&&document?.activeElement===l?.current&&l.current?.blur()},onDoubleClick:e=>e.stopPropagation()}),[d]),u=s.useMemo(()=>n&&!t?eu.Zy:(0,i.jsx)(ed.s,{"data-testid":"locked-icon"}),[n,t]),p=s.useMemo(()=>(0,i.jsx)(ec.r,{"data-testid":"unlocked-icon"}),[]);return(0,i.jsx)("span",{className:H.hz,children:(0,i.jsx)(eo.f,{ref:l,"aria-label":(0,k.t)("fullscreen.object_row.toggle_lock"),checked:t||n,onIcon:u,offIcon:p,htmlAttributes:c})})}),em=(0,s.memo)(function(e){return(0,i.jsx)("svg",{width:"16",height:"16",fill:"none",viewBox:"0 0 16 16",...e,"data-fpl-icon-size":"16",children:(0,i.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",fillRule:"evenodd",d:"M8 3.5a.5.5 0 0 1 .5-.5h2a.5.5 0 1 1 0 1H10v8h.5a.5.5 0 1 1 0 1h-2a.5.5 0 0 1 0-1H9V4h-.5a.5.5 0 0 1-.5-.5m3 2a.5.5 0 0 1 .5-.5h1A1.5 1.5 0 0 1 14 6.5v3a1.5 1.5 0 0 1-1.5 1.5h-1a.5.5 0 0 1 0-1h1a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 1-.5-.5M2.5 7a.5.5 0 0 1 .5.5v2a.5.5 0 0 0 .5.5h4a.5.5 0 1 1 0 1h-4A1.5 1.5 0 0 1 2 9.5v-2a.5.5 0 0 1 .5-.5m2.515-3.56L4.7 4.7l-1.26.315c-.505.126-.505.844 0 .97L4.7 6.3l.315 1.26c.126.505.844.505.97 0L6.3 6.3l1.26-.315c.505-.126.505-.844 0-.97L6.3 4.7l-.315-1.26c-.126-.505-.844-.505-.97 0",clipRule:"evenodd"})})});var eh=n(141330),ef=n(868187);function eg({disabled:e}){let t=(0,s.useMemo)(()=>({"data-tooltip-type":D.Ib.SPECIAL,"data-tooltip-show-above":!0,"data-tooltip-timeout-delay":50,"data-tooltip":ef.S,"data-tooltip-ai-beta-text":(0,k.t)("fullscreen.context_menu.auto_rename_layers"),"data-tooltip-ai-beta-action":eh.JT.AUTO_RENAME_LAYERS}),[]);return(0,i.jsx)(Y.E,{className:H.J0,onClick:()=>{(0,S.Br)({source:o.uQ6.LAYERS_PANEL_ACTION_ROW,trackingDataSource:"layers_panel_action_row"})},htmlAttributes:e?void 0:t,disabled:e,children:(0,i.jsx)(em,{})})}var ex=n(968169),e_=n(331497),ey=n(45754),ev=n(185245);function eb({guid:e,className:t,semanticRefCallback:n}){let s=(0,ey.Nf)(e);return s?(0,i.jsx)("span",{ref:n,className:t,"data-testid":`semantic-label-${e}`,children:s}):null}var eC=n(997811),ej=n(20165);let ek=s.memo(function(e){let{visible:t,isAncestorHidden:n,onMouseDown:a,recordingKey:r}=e,l=(0,s.useRef)(null),o=s.useCallback(e=>{e&&a(e)},[a]),d=v.rf(r,"mousedown",o),c=s.useMemo(()=>({onMouseDown:d,onKeyDownCapture:e=>{(e?.code==="Space"||e?.key==="Enter")&&d(new MouseEvent("mousedown",{altKey:e.altKey}))},onMouseLeave:()=>{l?.current&&document?.activeElement===l?.current&&l.current?.blur()},onDoubleClick:e=>e.stopPropagation(),"data-testid":"object-row-toggle-visibility"}),[d]),u=s.useMemo(()=>n?eu.Zy:(0,i.jsx)(eC.l,{"data-testid":"visible-icon"}),[n]),p=s.useMemo(()=>(0,i.jsx)(ej.f,{"data-testid":"hidden-icon"}),[]);return(0,i.jsx)("span",{className:H.yk,children:(0,i.jsx)(eo.f,{ref:l,"aria-label":(0,k.t)("fullscreen.object_row.toggle_visibility"),checked:t,onIcon:u,offIcon:p,htmlAttributes:c})})});ek.displayName="VisibilityToggle";var ew=n(404343),eE=n(347080),eT=n(864187);let eS="layer-panel-onboarding-key";function eI(e){let t=(0,q.cJ)(),n=(0,X.sO)(),i=(e.abbreviatedStateName||e.name).replace(/\n/," ");if(t&&e.isWebpage&&e.isSiteHomepage?i=(0,k.t)("sites.panel.home"):n&&"SLIDE"===e.nodeType&&(i=(0,k.t)("slides.layers_panel.slide_number",{orderNum:e.name})),e.shouldShowGuids){let t=o.Egt.getOverridePathForNode(e.guid);return`${i} (${e.guid}): [${t}]`}return i}function eN({isPrimaryBreakpoint:e}){return(0,i.jsx)("div",{className:j.s.flex.$,children:e&&(0,i.jsx)("span",{className:j.s.colorTextBrand.pr8.$,children:(0,k.t)("sites.panel.primary")})})}function eA(e){let[t,n]=(0,s.useState)(null),[a,r]=(0,s.useState)(!1),l=(0,q.cJ)(),o=(0,p.md)((0,z.r8)(e.guid)),{showVisualLayerIcons:d}=s.useContext(O.y0);(0,s.useEffect)(()=>{n(e.isRenaming?e.name:null)},[e.name,e.isRenaming]);let c=eI({abbreviatedStateName:e.abbreviatedStateName,guid:e.guid,shouldShowGuids:e.shouldShowGuids,name:e.name,isSiteHomepage:e.isSiteHomepage,isWebpage:e.isWebpage,nodeType:e.nodeType}),m=v.rf(e.recordingKey,e.focusOnSingleClick?"click":"dblclick",()=>{R.F.trackFromFullscreen("action_rename_selection",{source:"click"}),e.startRenaming(e.guid)}),h=(0,s.useRef)(null),g=(0,s.useCallback)(e=>{e&&(h.current=e,h.current.select())},[]),x=v.AF(e.recordingKey,"change",e=>{n(e.currentTarget?.value)}),_=v.v_(e.recordingKey,"keydown",t=>{if(!a){if(t.keyCode===y.Uz.ESCAPE)e.stopRenaming(!1);else if(t.keyCode===y.Uz.ENTER)e.stopRenaming(!0,h.current?.value,c);else{if(t.keyCode!==y.Uz.TAB)return(0,I.jr)(t,I.W0.NO),v.aH;t.preventDefault(),e.stopRenaming(!0,h.current?.value,c),t.shiftKey?e.prevNodeGuid&&e.startRenaming(e.prevNodeGuid):e.nextNodeGuid&&e.startRenaming(e.nextNodeGuid)}}}),b=v.iQ(e.recordingKey,"blur",()=>{e.stopRenaming(!0,h.current?.value,c)}),w=!e.isFixedOnHScroll,E="SLIDE_ROW"===e.nodeType,T=d&&(0,u.kc)().ce_il_root;return(0,i.jsxs)(i.Fragment,{children:[E?null:T?(0,i.jsx)(W.N,{guid:e.guid,size:e.iconSize,navigateAndPanTo:e.navigateAndPanTo,isMeasurementNode:e.isMeasurementNode,rowSelected:e.isSelected}):(0,i.jsx)(el.Bf,{disabled:e.disabled,guid:e.guid,hovered:e.hovered,isSiteHomepage:e.isSiteHomepage,locked:e.locked,navigateAndPanTo:e.navigateAndPanTo,outOfView:e.outOfView,panelType:e.panelType,scrollLeft:e.scrollLeft}),(e.isThumbnail||e.isFavicon||e.isSocialImage)&&(0,i.jsx)(C.B,{"data-tooltip":e.isFavicon?(0,k.t)("fullscreen.object_row.favicon"):e.isSocialImage?(0,k.t)("fullscreen.object_row.social_image"):(0,k.t)("fullscreen.object_row.file_thumbnail"),"data-tooltip-show-above":!0,"data-tooltip-type":D.Ib.TEXT,className:H.V3,svg:eT.A}),e.isRenaming&&(0,i.jsx)(U.ks,{autoCapitalize:"off",autoCorrect:"off",className:f()(H.hF,e.inputTextOverridesClassName),innerRef:g,onBlur:b,onChange:x,onCompositionEnd:()=>r(!1),onCompositionStart:()=>r(!0),onKeyDown:_,spellCheck:!1,value:null!==t?t:e.name}),!e.isRenaming&&(0,i.jsxs)("span",{className:f()(H.qg,e.staticTextOverridesClassName,{[j.s.justifyBetween.$]:l,[j.s.eventsAuto.$]:e.isFixedOnHScroll}),onDoubleClick:e.focusOnSingleClick?void 0:m,onClick:e.focusOnSingleClick?m:void 0,dir:"auto",children:[(0,i.jsx)("div",{className:H.Xv,ref:e.layerNamePlaceholderRef,children:c}),(0,i.jsx)("div",{className:f()(H._k,{[H.r]:!w||e.isHovered||e.displaySemanticLabel}),ref:e.layerNameRef,children:o&&"pending"!==o.state?o.name:c}),e.explicitVariableModeNames&&e.explicitVariableModeNames.length>0&&(0,i.jsx)("div",{className:H.pS,children:(0,i.jsx)(K,{modeNames:e.explicitVariableModeNames})}),!e.isHovered&&l&&(0,i.jsx)(eN,{isPrimaryBreakpoint:e.isPrimaryBreakpoint})]})]})}let eL=s.memo(function(e){var t,n;t="object-row-inner-render-timer",_.sn.start(t),(0,s.useEffect)(()=>{let e=_.sn.get(t);e&&e.isRunning&&!e.isUnreliable&&_.sn.tryStop(t)});let{topLevelObjectRowHeight:a,nestedObjectRowHeight:h,rowSelectionGap:x,topLevelIconSize:y,nestedIconSize:C,boldLayerNames:k}=s.useContext(O.y0),I=(0,s.useRef)(null),[N,A]=(0,s.useState)(null),[L,R]=(0,s.useState)(null),[U,V]=(0,s.useState)(null),K=(0,s.useCallback)(e=>{A(e)},[]),W=(0,s.useCallback)(e=>{R(e)},[]),X=s.useCallback(e=>{V(e)},[]),Y=(0,p.md)(T.eC),Z=(n=e.guid,(0,p.md)(T.Fj).has(n)),[J,Q]=(0,s.useState)(!1),[$,ee]=(0,s.useState)(!1),[et,en]=(0,s.useState)(0),ei=function({guid:e,hideLabel:t}){let n=(0,q.cJ)(),i=(0,p.md)(ev.s0),s=(0,e_.J2)((0,ex.UK)().showSemanticTagsOnLayerRows),a=(0,P.Fk)((e,t)=>{let n=e.get(t);return n?.isAccessibilityAnnotatable},e);return!!(n&&i===o.Nfd.FILE&&s&&a)&&!t}({hideLabel:!e.visible||e.isAncestorHidden||e.isRenaming||e.isDragging,guid:e.guid}),es=(0,P.Fk)((e,t)=>e.get(t)?.name??"",e.guid),ea=(0,P.Fk)((e,t)=>{let n=e.get(t);return n&&n.isState?n.stateAbbreviatedName:null},e.guid),el=eI({abbreviatedStateName:ea,name:es,shouldShowGuids:e.shouldShowGuids,guid:e.guid,isSiteHomepage:e.isSiteHomepage,isWebpage:e.isWebpage,nodeType:e.nodeType}),eo=(0,s.useCallback)(()=>{let e=I.current;return!!e&&e.scrollWidth>e.offsetWidth},[]),ed=(0,s.useCallback)(()=>{Q(eo())},[Q,eo]),{onContextMenu:ec}=e,em=(0,m.rf)(e.recordingKey,"contextmenu",(0,s.useCallback)(t=>{ec&&ec(e.guid,t)},[ec,e.guid])),{onMouseEnter:eh}=e,ef=(0,m.rf)(e.recordingKey,"mouseenter",(0,s.useCallback)(t=>{ed(),ee(!0),eh&&eh(e.guid,t)},[eh,e.guid,ed])),ey=(0,s.useCallback)(()=>{ee(!1)},[]),{lockMouseDown:eC}=e,ej=(0,s.useCallback)(t=>{eC&&eC(e.guid,t)},[eC,e.guid]),{visibleMouseDown:eT}=e,eN=(0,s.useCallback)(t=>{eT&&eT(e.guid,t)},[eT,e.guid]),{onDragStartCallback:eL}=e,eM=(0,s.useCallback)(t=>{t.dataTransfer.effectAllowed="none",null!=eL&&eL(e.guid,t)},[eL,e.guid]),{onDragOverCallback:eO}=e,eR=(0,s.useCallback)(t=>{null!=eO&&eO(e.guid,t)},[eO,e.guid]),{onDragDropCallback:eP}=e,eD=(0,s.useCallback)(t=>{null!=eP&&eP(e.guid,t)},[eP,e.guid]),{onDragEnterCallback:eF}=e,ez=(0,s.useCallback)(t=>{null!=eF&&eF(e.guid,t)},[eF,e.guid]),{onDragLeaveCallback:eB}=e,eG=(0,s.useCallback)(t=>{null!=eB&&eB(e.guid,t)},[eB,e.guid]),eU=(0,s.useCallback)(()=>null!=e.nodeMemoryUsage&&null!=e.rootMemoryUsage?(0,M.pr)(e.nodeMemoryUsage,e.rootMemoryUsage,!0):((0,b.$D)(r.e.SCENEGRAPH_AND_SYNC,Error("node memory usage or root memory usage is null")),""),[e.nodeMemoryUsage,e.rootMemoryUsage]),eV=!e.visible||e.isAncestorHidden&&e.panelType!==B.g$.CodeComponent,eH=e.locked||e.isAncestorLocked,eK=(e.level+3)*(0,g.jz)(eE.indentWidthWithMargin),eW=(0,g.jz)(eE.scrollBarYWidth)+(0,g.jz)(eE.trackPadding),eq=void 0!==e.panelWidth&&eK+eW>e.panelWidth+e.scrollLeft,eX=0===e.level,eY=(0,S.A0)(o.uQ6.LAYERS_PANEL_ACTION_ROW),eZ=void 0!==e.panelWidth&&eK+et+(0,g.jz)(eE.rowActionsRightMargin)+eW>e.panelWidth+e.scrollLeft,eJ=(0,c.getActiveTSSceneGraph)().get(e.guid),eQ=eY&&eX&&$&&eJ&&(0,S.sq)(eJ),e$="REACT_FIBER"!==e.nodeType&&"SLIDE"!==e.nodeType&&"SLIDE_ROW"!==e.nodeType,e0=p.md(z.r8(e.guid))?.state==="pending",e1=eX?a:h,e2=eX?y:C,e3={transform:`translate3d(0px, ${e.top}px, 0)`,height:e1,"--row-actions-width":eQ?ew.gdM:ew.yj4,"--object-row-height":`${e1}px`,"--selection-height":`${e1-2*x}px`},e5=e.fixed&&0!==e.panelWidth,e4="FRAME"===e.nodeType,e6=f()({[H.nM]:!0,[H.M4]:eX,[H.Gt]:e4&&!(0,eu.Rt)(e)&&!e.resizeToFit&&!e.isStateGroup,[H.Os]:e4&&!(0,eu.Rt)(e)&&e.resizeToFit,[H.t$]:e4&&(0,eu.Rt)(e),[H.DT]:e.isStateGroup,[H.a6]:(0,d.MT)(e.nodeType),[H.uW]:"SECTION"===e.nodeType,[H.HR]:"SYMBOL"===e.nodeType,[H.rS]:"CODE_COMPONENT"===e.nodeType,[H.bY]:"CODE_INSTANCE"===e.nodeType,[H.$E]:e.componentLike,[H.qm]:e.layerLikeCodeNode||"REACT_FIBER"===e.nodeType,[H.xG]:"MODULE"===e.nodeType,[H.KJ]:"INSTANCE"===e.nodeType,[H.iE]:e.isStamp,[H.Zt]:"HIGHLIGHT"===e.nodeType,[H.HL]:"WIDGET"===e.nodeType||e.isWidgetSublayer,[H.j3]:e.isDescendantOfSymbol,[H.cb]:e.isDescendantOfInstanceExcludingSlotSublayers,[H.NI]:(0,E.$)()&&e.isSlot,[H.vp]:e.isDescendantOfModule,[H.dK]:e.mask,[H.WO]:(0,B.qW)(e.panelType),[H.i9]:e.isWebpage,[H.Cr]:k,[H.Zu]:!!e5,[H.lh]:!!e.layerAbove,[H.yo]:e.isHovered,[H.wH]:e.isSelected,[H.ct]:e.isAncestorSelected,[H.r9]:eV,[H.xt]:eH,[H.sz]:e.hasChildren&&e.isExpanded,[H.uC]:e.isLayerAboveSelected&&e.isLayerBelowSelected,[H.ow]:e.isLayerAboveSelected&&!e.isLayerBelowSelected,[H.sc]:e.isLayerBelowSelected&&!e.isLayerAboveSelected}),e7=e.versionHistory?.activeId&&"current_version"===e.versionHistory.activeId,e8=e.showMemoryUsage&&e.showInFileMemoryPercentage&&!e.isRenaming&&e7,{registerWidth:e9}=(0,G.gz)(),te=!!e5,{observeWithResizeObserver:tt,unobserveWithResizeObserver:tn}=e;(0,s.useEffect)(()=>{if(N&&L){if(te)return;let t=()=>{let t=N.getBoundingClientRect().right-L.getBoundingClientRect().left+(0,g.jz)(eE.rowActionsWidth);e9(e.guid,t)};return t(),tt(N,t),tt(L,t),tt(U,e=>{e.contentRect.width>0&&en(e.contentRect.width)}),()=>{tn(N),tn(L),tn(U)}}},[te,N,L,U,e.guid,e9,tt,tn]);let ti=!(0,u.kc)().eu_perf_layers_toggle_render||$||!e.visible||e.locked||e.isAncestorLocked||e.isAncestorHidden,ts=(0,i.jsxs)(i.Fragment,{children:[eQ&&(0,i.jsx)(eg,{disabled:e0}),e$&&ti&&(0,i.jsx)(ep,{recordingKey:v.Pt(e,"lockIcon"),locked:e.locked,isAncestorLocked:e.isAncestorLocked,onMouseDown:ej}),e$&&ti&&(0,i.jsx)(ek,{recordingKey:v.Pt(e,"visibleIcon"),visible:e.visible,isAncestorHidden:e.isAncestorHidden,onMouseDown:eN})]}),ta=!e.hideRowActions&&!e.isRenaming&&!e.isReadOnly&&!e.isDragging&&!eq,tr=ei&&!eZ,tl=(0,i.jsx)("div",{className:H.u4,"data-testid":`${e.guid}-layers-panel-row`,"data-tooltip":J?el:null,"data-tooltip-hide-immediately":!0,"data-tooltip-max-lines":4,"data-tooltip-show-immediately":!0,"data-tooltip-show-right":!0,"data-tooltip-text-left":!0,"data-tooltip-type":D.Ib.TEXT,style:void 0===e.panelWidth?void 0:{width:te?`${e.panelWidth}px`:`${e.panelWidth+e.scrollLeft}px`},children:function(t=!1){return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(er,{currentPage:e.currentPage,disabled:eV,dispatch:e.dispatch,displayOrder:e.displayOrder,expandMouseDown:e.expandMouseDown,guid:e.guid,hasBullet:Z,hasChildren:e.hasChildren,hovered:e.isHovered,indentsRefCallback:W,isExpanded:e.isExpanded,isLastMaskedAtLevels:e.isLastMaskedAtLevels,isMaskedAtLevels:e.isMaskedAtLevels,isMeasurementNode:t,level:e.level,locked:eH,mask:e.mask,outOfView:eq,recordingKey:t?void 0:v.Pt(e,"indents"),scrollLeft:e.scrollLeft}),(0,i.jsx)(eA,{...e,abbreviatedStateName:ea,disabled:eV,displaySemanticLabel:ei,hovered:e.isHovered,iconSize:e2,isFixedOnHScroll:te,isMeasurementNode:t,layerNamePlaceholderRef:K,layerNameRef:I,locked:eH,name:es,outOfView:eq,recordingKey:t?void 0:e.recordingKey,scrollLeft:e.scrollLeft}),e.hasWarning&&(0,i.jsx)("div",{className:f()(j.s.flex.alignCenter.mr16.$,H.QW),"data-tooltip-type":D.Ib.TEXT,"data-tooltip":e.warningMessage,"data-tooltip-max-lines":4,"data-tooltip-show-immediately":!0,"data-tooltip-hide-immediately":!0,children:(0,i.jsx)(l.R,{})}),e8&&(0,i.jsx)("span",{className:H.HY,dir:"auto",children:eU()}),tr&&(0,i.jsx)("div",{style:{width:et+(0,g.jz)(eE.rowActionsRightMargin)},className:H.c}),ta&&(0,i.jsx)("div",{className:H.cm})]})}()}),to=f()(H.R4,{[H.dy]:eZ});return(0,i.jsxs)("div",{className:e6,"data-onboarding-key":e.guid===Y&&e.isSelected&&(!e.isRowInView||e.isRowInView(e,L))?eS:void 0,"data-testid":e.hasChildren?"layer-row-with-children":"layer-row",draggable:!1,onContextMenu:em,onDragEnter:ez,onDragLeave:eG,onDragOver:eR,onDragStart:eM,onDrop:eD,onMouseEnter:ef,onMouseLeave:ey,style:e3,children:[(ta||ei)&&(0,i.jsxs)("div",{className:H.cm,style:w.sx.absolute.wFull.eventsNone.$,children:[(0,i.jsx)("div",{className:j.s.wFull.$}),(0,i.jsx)("div",{className:H.V0,children:(0,i.jsxs)("div",{className:H.Hz,children:[ei&&(0,i.jsx)(eb,{semanticRefCallback:X,guid:e.guid,className:to}),ta&&ts]})})]}),(0,i.jsx)(F.e,{condition:te,wrapper:e=>(0,i.jsx)("div",{style:w.sx.absolute.wFull.eventsNone.$,children:(0,i.jsx)("div",{className:H.n4,children:(0,i.jsx)("div",{children:e})})}),children:tl})]})});eL.displayName="ObjectRow";let eM=(0,x.j)(s.memo(function(e){let t=(0,a.d4)(t=>t.mirror.appModel.hoveredNode===e.guid),n=e.hasRefToHoveredDef||t||e.isTemporarilyHovered,r=(0,N.Z)("prototype_sections_zoom"),l=s.useCallback(e=>{r((0,L.QZ)({nodeId:e,alwaysPan:!0}))},[r]),o=(0,A.o3)(e.guid);return(0,i.jsx)(eL,{...e,isHovered:n,explicitVariableModeNames:o,navigateAndPanTo:l})}),"ObjectRow")},156928:(e,t,n)=>{n.d(t,{X:()=>eJ});var i=n(104076),s=n(716976),a=n(237420),r=n(547115),l=n(439279),o=n(951002),d=n(792875),c=n(638004),u=n(266808),p=n(170627),m=n(681958),h=n(980852),f=n(812714),g=n(795033),x=n(776111),_=n(511570),y=n.n(_),v=n(385446),b=n.n(v),C=n(851824),j=n(883765),k=n(76616),w=n(983500),E=n(597581),T=n(221586),S=n(787144),I=n(743072),N=n(681398),A=n(84072),L=n(641518),M=n(550209),O=n(264830),R=n(361170),P=n(876621),D=n(849757),F=n(549571),z=n(147046),B=n(278491),G=n(469191),U=n(819851),V=n(354114),H=n(968169),K=n(510232),W=n(772523),q=n(508011),X=n(120074),Y=n(587277),Z=n(592726),J=n(582689),Q=n(331497),$=n(835307);class ee{constructor(e,t,n,i,s={}){this.component=e,this.onMouseDown=t,this.onMouseMove=n,this.onMouseUp=i,this.options=s,this.oldTouch=null,this.draggingID=null,this.deferredDragStart=null,this.onTouchStart=e=>{if(e.stopPropagation(),null===this.draggingID&&e.touches.length>0){let t=e.touches[0];if(this.draggingID=t.identifier,document.addEventListener("touchmove",this.onTouchMove,{passive:!1}),document.addEventListener("touchend",this.onTouchEndOrCancel),document.addEventListener("touchcancel",this.onTouchEndOrCancel),this.options.delayInMS){let n=!1;if(this.deferredDragStart=i=>{if(n)return!1;let s=i.clientX-t.clientX,a=i.clientY-t.clientY;return!(10>Math.sqrt(s*s+a*a))&&(n=!0,!this.options.delayInMS&&(this.onMouseDown(this.mouseEvent("mousedown",e,t)),!0))},this.options.delayInMS){let i=this.deferredDragStart;setTimeout(()=>{this.deferredDragStart!==i||n||(this.deferredDragStart=null,this.onMouseDown(this.mouseEvent("mousedown",e,t)))},this.options.delayInMS)}}else this.deferredDragStart=null,this.onMouseDown(this.mouseEvent("mousedown",e,t))}},this.onTouchMove=e=>{if(e.stopPropagation(),null!==this.draggingID){for(let t of e.touches)if(t.identifier===this.draggingID){if(this.deferredDragStart){if(!this.deferredDragStart(t))break;this.deferredDragStart=null}e.preventDefault(),this.onMouseMove(this.mouseEvent("mousemove",e,t));break}}},this.onTouchEndOrCancel=e=>{e.stopPropagation(),null!==this.draggingID&&(this.draggingID=null,document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEndOrCancel),document.removeEventListener("touchcancel",this.onTouchEndOrCancel),this.deferredDragStart?this.deferredDragStart=null:this.onMouseUp(this.mouseEvent("mouseup",e,this.oldTouch)))}}mouseEvent(e,t,n){this.oldTouch=n;let i=new MouseEvent(e,{altKey:t.altKey,metaKey:t.metaKey,ctrlKey:t.ctrlKey,shiftKey:t.shiftKey,screenX:n.screenX,screenY:n.screenY,clientX:n.clientX,clientY:n.clientY});return Object.defineProperty(i,"target",{value:t.target}),Object.defineProperty(i,"currentTarget",{value:t.currentTarget}),i}}var et=n(440910),en=n(739710),ei=n(299117),es=n(124125),ea=n(192075),er=n(244205),el=n(90844),eo=n(422872),ed=n(428045),ec=n(219971),eu=n(143277),ep=n(61102),em=n(592228),eh=n(643330),ef=n(441030);function eg(){let{show:e,isShowing:t,complete:n,uniqueId:a}=(0,eo.e)({overlay:ef.xtb,priority:eu.N.SECONDARY_MODAL}),r=ec.y.isApple(),l=s.useMemo(()=>(0,i.jsx)(es.S,{shortcut:r?"\u2303\u21E7A":"Ctrl+Alt+Shift+A"}),[r]);return(0,el.E)(a,ed.in,()=>{e({canShow:()=>!!(0,f.kc)().ce_al_show_msal_onboarding})}),(0,i.jsx)(ep.rq,{arrowPosition:eh.F_.LEFT_TITLE,description:(0,ea.tx)("fullscreen.msal_onboarding.body"),disableHighlight:!0,emphasized:!0,isShowing:t,onClose:n,onTargetLost:n,primaryCta:{label:(0,ea.tx)("general.got_it"),type:"button",onClick:n,variantOverride:"primary",ctaTrackingDescriptor:er.c.GOT_IT},secondaryCta:{label:(0,ea.tx)("general.learn_more"),type:"link",href:"https://help.figma.com/hc/articles/5731482952599#suggest",ctaTrackingDescriptor:er.c.LEARN_MORE},targetKey:em.vx,title:(0,i.jsx)("p",{"data-testid":"msal-onboarding-title",children:(0,ea.tx)("fullscreen.msal_onboarding.header_with_shortcut",{msalShortcut:l})}),trackingContextName:"MSAL Onboarding Overlay"})}var ex=n(156816),e_=n(336547),ey=n(844182),ev=n(170462),eb=n(769183),eC=n.n(eb),ej=n(666875),ek=n(311272),ew=n(211862);function eE({ids:e,thumbnailEdits:t,focusedNodeId:n,width:a,height:r}){let l=(0,ew.tS)(),[o,d]=(0,s.useState)([]),[c]=(0,ej.A)(o,100,{equalityFn:eN});(0,s.useEffect)(()=>{if(c.length){let e=[...c];n&&e.includes(n)&&(e=[n,...e.filter(e=>e!==n)]),eC()(e,5).forEach((e,t)=>{e.forEach(e=>{let i=e===n;setTimeout(()=>(0,ek.I6)(e,i,l||"",a,r),40*t)})}),d(t=>t.filter(t=>!e.includes(t)))}},[c,n,l,a,r]);let u=(0,s.useCallback)(e=>{d(t=>t.includes(e)?t:[...t,e])},[]);return(0,i.jsx)(i.Fragment,{children:e.map(e=>(0,i.jsx)(eI,{guid:e,editCount:t.get(e)||0,requestThumbnailGeneration:u},e))})}let eT=(0,n(985416).Wh)(()=>(0,g.eU)({})),eS=(0,g.Iz)(e=>(0,g.eU)(t=>t(eT)[e]??null,(t,n,i)=>{let s=t(eT);n(eT,{...s,[e]:i})}));function eI({guid:e,editCount:t,requestThumbnailGeneration:n}){let[a,r]=(0,g.fp)(eS(e)),[l]=(0,ej.A)(t,400);return(0,s.useEffect)(()=>()=>{r(l)},[l,r]),(0,s.useEffect)(()=>{l===a&&(0,ek.lp)(e)||n(e)},[e,l,n,a]),(0,i.jsx)(i.Fragment,{})}function eN(e,t){return e.length===t.length&&e.every((e,n)=>e===t[n])}function eA(e){let{topLevelIconSize:t}=s.useContext(J.y0),n=(0,$.wA)((e,t)=>t.filter(t=>{let n=e.get(t)?.type;return!!n&&!ev.w.includes(n)}),e.ids),a=(0,$.$y)((e,t)=>u.glU?u.glU.getLastEditTimes(t).reduce((e,n,i)=>(e.set(t[i],n),e),new Map):new Map,e.ids);return(0,i.jsx)(eE,{ids:n,thumbnailEdits:a,focusedNodeId:e.focusedNodeId,width:2*t,height:2*t})}var eL=n(217961),eM=n(236631),eO=n(579337),eR=n(740419);function eP({guid:e,objectRow:t,setRowWidth:n}){let a=(0,s.useRef)(null),[r,l]=(0,s.useState)(),{rowWidthsCache:o}=(0,eO.gz)();return(0,s.useEffect)(()=>{if(!a.current||!e)return;let t=o[e];void 0!==t&&(t!==r?.width||e!==r?.guid)&&l({width:t,guid:e})}),(0,s.useEffect)(()=>{r?.guid===e&&n({guid:e,width:r.width})},[r,e,n]),(0,i.jsx)("div",{ref:a,className:y()(eM.s.absolute.invisible.$,eR.Qr),"data-testid":"autoscroll-measurement-node",children:t})}var eD=n(652539),eF=n(91704),ez=n(630701);function eB(e){let{top:t,width:n,guid:a,level:r,onMouseEnter:l,recordingKey:o}=e,{nestedObjectRowHeight:d}=s.useContext(J.y0),c=L.rf(o,"click",e=>{W.bd([a])}),u={transform:`translate3d(0px, ${t}px, 0)`,width:n,height:d},p={width:eF.iy*r*2,marginRight:1===r?eF.iy/2:0};return(0,i.jsxs)("div",{className:"layer_expansion_row--layerExpansionRow--G8Twa object_row--row--HIYa5",style:u,onMouseDown:e=>e.stopPropagation(),onClick:c,onMouseEnter:l,role:"button",tabIndex:0,children:[(0,i.jsx)("span",{className:"layer_expansion_row--layerExpansionIndent--Bg5Df object_row--indent--uZlad",style:p}),(0,i.jsx)("span",{className:"layer_expansion_row--iconWrapper--J3NJb object_row--iconWrapper--ivRSW",children:(0,i.jsx)(eD.B,{svg:ez.A})}),(0,i.jsx)("span",{className:"layer_expansion_row--rowText--yhMnt object_row--rowText--3qo7Q ellipsis--ellipsis--Tjyfa",children:(0,ea.tx)("design_systems.component_properties.see_all_layers")})]})}var eG=n(224764);class eU extends L.o6{renderPlainIndents(e){let t=[];for(let n=0;n<e+1;n++)t.push((0,i.jsx)("span",{className:eR.pZ},n));return(0,i.jsx)("span",{className:eR.Wm,children:t})}render(){let e={transform:`translate3d(0px, ${this.props.top}px, 0)`,width:this.props.width,height:eG.n,"--selection-height":`${eG.n}px`,"--row-gap":"0px"},t=y()(eR.nM,eR.bV,{[eR.ct]:this.props.isParentSelected,[eR.j3]:this.props.isDescendantOfSymbol,[eR.cb]:this.props.isDescendantOfInstanceExcludingSlotSublayers,[eR.sc]:this.props.isParentSelected&&this.props.sectionHasChildren});return(0,i.jsxs)("div",{className:t,style:e,children:[this.renderPlainIndents(this.props.level),this.props.sectionType===u.KjJ.FIXED?(0,ea.t)("fullscreen.properties_panel.constraints_resizing_panel.fixed"):(0,ea.t)("fullscreen.properties_panel.scrolls")]})}}eU.displayName="SectionRow";var eV=n(656948),eH=n(967749),eK=n(347080);let eW="objects_panel--dropTargetBox--4SX8i",eq=new S.V;function eX(e){return"object"===e.rowType?e.guid:"layer-expansion"===e.rowType?`expand-${e.containingPrimaryInstanceGUID}`:e.sectionId}class eY extends L.o6{constructor(e){super(e),this.state={scrollTop:0,scrollLeft:0,mouseDown:null,dropTarget:null,needsScrollLine:!1,rowToScrollToData:null},this.cachedAllRowData=[],this.topByGuid=Object.create(null),this.leftByGuid=Object.create(null),this.heightByGuid=Object.create(null),this.totalHeight=0,this.cachedAllObjectRowDataMap={},this.setNeedsScrollLine=e=>{this.setState({needsScrollLine:e>0})},this.rangeSelectAnchorNodeId=null,this.getScene=()=>this.props.sceneGraph||(0,h.getActiveTSSceneGraph)(),this.initializeRows=e=>{let t=this.getScene(),n=e.customRowBuilder?e.customRowBuilder():(0,eV.Sk)({sceneGraph:t,rootNodeGuids:e.topNodeProperties?.children??[],showImmutableFrameSublayers:e.showImmutableFrameSublayers,temporarilyExpandedInstanceLayers:e.temporarilyExpandedInstanceLayers,topLevelObjectRowHeight:e.topLevelObjectRowHeight,nestedObjectRowHeight:e.nestedObjectRowHeight,focusedNodes:e.focusedNodes});this.topByGuid=n.topByGuid,this.leftByGuid=n.leftByGuid,this.heightByGuid=n.heightByGuid,this.sectionById=n.sectionById,this.totalHeight=n.totalHeight,this.cachedAllRowData=n.rowData,g.zl.set(eL.X,n.rowData.filter(eF.N1).some(e=>e.isExpanded&&e.hasChildren)),this.cachedAllObjectRowDataMap=n.rowData.filter(eF.N1).reduce((e,t)=>(e[t.guid]=t,e),{})},this.updateAllVisibleRowGuids=()=>{let e=[];for(let t of this.cachedAllRowData)(0,eF.N1)(t)&&e.push(t.guid);this.context.registerGuids(e)},this.justToggledExpandedGuid=null,this.anchorNodeId=null,this.topNodeDelta=0,this.lastCollapsedScrollPosition=null,this.scrollAfterNodeExpanded=!1,this.lastCollapsedGuid=null,this.hasCrossedDragThreshold=!1,this.onLeftPanelCollapsedChange=e=>{if(!e){let e=this.getTopSelectedNodeId();e&&this.scrollToNode({nodeId:e})}},this.scrollToNodeIdAfterUpdate=null,this.scrollToNode=({nodeId:e,forStackInsertion:t})=>{let n=this.topByGuid[e],i=void 0!==n,s=this.state.rowToScrollToData?.guid===e;if(!i||!s){let t=this.getScene().get(e);t&&t.parentGuid&&W.hq(t.parentGuid),this.scrollToNodeIdAfterUpdate=e;return}let a=this.heightByGuid[e],r=!this.isVerticallyVisible(n,n+a),l=this.shouldHorizontallyAutoscroll(e);(r||l)&&this.scrollNodeIntoView(e,{forStackInsertion:t})},this.recalculateLayout=()=>{this.windowInnerHeight=window.innerHeight,this.recalculateRequested=!1},this.recalculateRequested=!1,this.requestRecalculateLayout=()=>{this.recalculateRequested||requestAnimationFrame(this.recalculateLayout)},this.isScrolling=!1,this.scrollingTimeout=null,this.handleMouseEnterAfterScroll=null,this.hasTrackedHScrollEvent=!1,this.trackScroll=l.v.getFeatureGate("track_layers_panel_scrolling_frame_rate"),this.scrollingVital=null,this.onScroll=e=>{this.isScrolling=!0,this.nextScrollTop=e,null==this.frameRequestY&&(this.frameRequestY=requestAnimationFrame(this.setScrollTopState)),null!=this.scrollingTimeout&&clearTimeout(this.scrollingTimeout),this.scrollingTimeout=setTimeout(this.doneScrolling,50),this.props.onScroll(e),this.setNeedsScrollLine(e),g.zl.set(e_.uK,{autoScroll:!1}),this.trackScroll&&null===this.scrollingVital&&(this.scrollingVital=I.J.createVital("critical-interactions.layers-panel-scroll",{level:r.$b.INFO,trackFps:!0}),this.scrollingVital.start())},this.onScrollLeftChanged=(e,t)=>{t||this.props.stopRenaming(!1),this.nextScrollLeft=e,null==this.frameRequestX&&(this.frameRequestX=requestAnimationFrame(this.setScrollLeftState)),this.hasTrackedHScrollEvent||((0,j.sx)("layers_horizontal_scroll"),this.hasTrackedHScrollEvent=!0)},this.doneScrolling=()=>{this.isScrolling=!1,this.scrollingTimeout=null,this.handleMouseEnterAfterScroll&&(this.handleMouseEnterAfterScroll(),this.handleMouseEnterAfterScroll=null),this.scrollingVital?.stop(),this.scrollingVital=null},this.frameRequestY=null,this.frameRequestX=null,this.nextScrollTop=0,this.nextScrollLeft=0,this.setScrollTopState=()=>{this.setState({scrollTop:this.nextScrollTop}),this.frameRequestY=null},this.setScrollLeftState=()=>{this.setState({scrollLeft:this.nextScrollLeft}),this.frameRequestX=null},this.isNodeSticky=e=>((0,M.xO)(c.e.FIGJAM,this.props),e.parentGuid===this.props.currentPage&&("SYMBOL"===e.type||"FRAME"===e.type&&!e.resizeToFit)),this.isAncestorSticky=e=>{let t=this.getScene(),n=e.parentGuid?t.get(e.parentGuid):null;for(;n&&n.guid!==this.props.currentPage;){if(this.isNodeSticky(n))return!0;n=n.parentGuid?t.get(n.parentGuid):null}return!1},this.stickyHeaderGuid=null,this.lastStickyHeaderGuid=null,this.lastExpansionTarget=null,this.findStickyHeaderRowAndReplaceInVisibleRows=e=>{if(this.stickyHeaderGuid=null,(this.state.scrollTop>0||this.scrollAfterNodeExpanded)&&e.length>0){let t;let n=this.state.scrollTop,i=(e,t,n)=>{if("object"!==e.rowType)return!1;let i=this.findStickyHeader(e,t,n);if(i){let t=this.renderedVisibleRowProps.indexOf(e);t>=0?this.renderedVisibleRowProps[t]=i:this.renderedVisibleRowProps.push(i)}return!!i},s=null;for(let a=0;a<e.length;a++)if(0===(t=e[a]).level){if(s&&i(s,s.top,t.top)||t.top>n)return;s=t}(0,o.KF)(!!s,"has at least one top level section"),i(s,s.top,Number.POSITIVE_INFINITY)}},this.scrollNodeIntoView=(e,t)=>{let n=t&&t.fromAIRename||!1,i=t&&t.forStackInsertion||!1;if(null==this.topByGuid[e]||this.shouldHorizontallyAutoscroll(e)&&this.state.rowToScrollToData?.guid!==e||!this.scrollContainerEl||!this.scrollContainer)return;let s=this.topByGuid[e],a=this.heightByGuid[e],r=this.state.scrollTop,l=this.scrollContainerHeight();if(this.stickyHeaderGuid===e){i&&this.scrollContainer.scrollTo(s-1);return}let o=this.getScene().get(e);if(!o)return;n||g.zl.set(e_.uK,{autoScroll:!1});let d=this.isAncestorSticky(o);if(d&&s<r+a?this.scrollContainer.scrollTo(s-a):!d&&s<r?this.scrollContainer.scrollTo(s):s+a>r+l&&this.scrollContainer.scrollTo(s-l/2),this.shouldHorizontallyAutoscroll(e)&&this.state.rowToScrollToData?.guid===e&&this.state.rowToScrollToData?.width){let t=this.getNewHorizontalAutoscrollPosition(e,this.state.rowToScrollToData?.width);void 0!==t&&this.scrollContainer.scrollToLeft(t)}},this.measureCriticalInteraction=!!(l.v.getFeatureGate("critical_interaction_layers_panel_right_click")&&!(0,x.PN)()&&window?.performance?.mark),this.runAfterFramePaintCancel=null,this.rowContextMenu=(e,t)=>{if(this.props.onRowContextMenu){this.props.onRowContextMenu(e,t);return}let n=this.getScene().get(e);if(!n)return;(0,et.sp)(this.getScene(),this.props.sceneGraphSelection,n.guid)||this.updateSelection(n.guid);let{clientX:i,clientY:s}=t;this.props.dispatch(z.j7({type:B.Rb,data:{clientX:i,clientY:s}})),this.measureCriticalInteraction&&(this.runAfterFramePaintCancel=(0,A.Z)(()=>{try{let e=window.performance.measure("critical-interactions:layers-panel-right-click-duration","critical-interactions:layers-panel-right-click-start");I.J.logVital("critical-interactions.layers-panel-right-click",{level:r.$b.INFO,startTime:window.performance.timeOrigin+e.startTime,duration:e.duration})}catch(e){(0,M.$D)(c.e.FRONTEND_PLATFORM,e)}}))},this.rowContainerMouseDown=L.cZ(this,"mousedown",e=>{let t=this.guidAtMousePosition(e.clientY);if(!t||(e.stopPropagation(),document.activeElement&&"blur"in document.activeElement&&!this.props.renamingGuid&&document.activeElement.blur(),this.props.ignoreRightClickForSelection&&2===e.button))return;let n=2===e.button||0===e.button&&e.ctrlKey;if(this.measureCriticalInteraction&&n&&(this.runAfterFramePaintCancel&&this.runAfterFramePaintCancel(),window.performance.mark("critical-interactions:layers-panel-right-click-start")),this.props.onSelectNodesFromLayersPanel?.(),(this.props.allowToggleSelection??!0)&&(0,T.Fo)(e)){this.toggleSelected(t);return}(0,f.kc)().version_diffing&&this.props.editModeType===u.m1T.COMPARE_CHANGES&&u.glU.setActiveChange(t)&&this.props.showViewChangesNotification(t);let i=(0,d.IL)(this.props.sceneGraphSelection),s=null;if(i?s=i:this.rangeSelectAnchorNodeId&&(0,et.K3)(this.props.sceneGraphSelection,this.rangeSelectAnchorNodeId)&&(s=this.rangeSelectAnchorNodeId),(this.props.allowSelectRange??!0)&&e.shiftKey&&s){W.GL(s,t),V.Y5.commit();return}(0,et.sp)(this.getScene(),this.props.sceneGraphSelection,t)||(this.updateSelection(t),this.rangeSelectAnchorNodeId=t),(0,G.i)(e)||this.setState({mouseDown:new R.Mi(e.clientX,e.clientY)})},{recordMetadata:e=>{let t=this.guidAtMousePosition(e.clientY);return(0,o.KF)(!!t,"interaction test does not support rare case of no guid under mouse (empty layers panel?)"),{path:(0,eF.eT)(t,this.getScene()),clientX:e.clientX}},playbackMetadata:e=>{let t=(0,eF.g2)(e.path,this.getScene(),this.props.currentPage),n=this.topByGuid[t]+this.heightByGuid[t]/2;return{clientY:this.clientY(n),clientX:e.clientX}}}),this.onMouseMove=e=>{if(this.scrollContainer&&this.scrollContainerEl&&this.state.mouseDown&&!this.props.renamingGuid){this.state.mouseDown.distanceTo({x:e.clientX,y:e.clientY})>3&&(this.hasCrossedDragThreshold=!0);let t=this.relativeY(e.clientY),n=this.state.scrollTop,i=this.scrollContainerHeight();if(i>0){if(t<n){this.scrollContainer.scrollTo(n-(0,eF.bm)(n-t,this.props.topLevelObjectRowHeight));return}if(t>n+i){this.scrollContainer.scrollTo(n+(0,eF.bm)(t-n-i,this.props.topLevelObjectRowHeight));return}}let s=(0,eF.OL)(this.getScene(),this.props.sceneGraphSelection,this.topByGuid,this.heightByGuid,this.sectionById,e.clientX-this.state.mouseDown.x,t,this.mouseOverStickyHeaderGuid(e.clientY),this.props.panelType??eF.g$.Object,this.props.topNodeProperties,this.props.insertionLineBoxOffset);this.state.dropTarget&&s&&this.state.dropTarget.index!==s.index&&E.H.trigger(u.JA.SNAP),(this.hasCrossedDragThreshold||!s)&&(this.expandDropTargetIfNeeded(s,t),this.setState({dropTarget:s}))}},this.onMouseUp=L.cZ(this,"mouseup",e=>{let t=this.getScene(),n=!1;if(this.hasCrossedDragThreshold=!1,this.state.mouseDown&&!this.props.renamingGuid){if(n=!0,3>=this.state.mouseDown.distanceTo(new R.Mi(e.clientX,e.clientY))){if(!(0,G.i)(e)){let t=this.guidAtMousePosition(e.clientY);t?this.updateSelection(t):n=!1}}else if(!this.props.isReadOnly){let n=(0,eF.OL)(t,this.props.sceneGraphSelection,this.topByGuid,this.heightByGuid,this.sectionById,e.clientX-this.state.mouseDown.x,this.relativeY(e.clientY),this.mouseOverStickyHeaderGuid(e.clientY),this.props.panelType??eF.g$.Object,this.props.topNodeProperties,this.props.insertionLineBoxOffset);if(!n)return;let{parentGuid:i,index:s,section:a}=n,r=t.get(i);if(!r||void 0===s)return;let l=e.altKey,o=(0,eF.Lc)(r,s);l?(this.props.onSelectNodesFromLayersPanel?.(),p.l7.user("duplicate-selection",()=>W.kH(r.guid,o,a))):(this.props.onSelectNodesFromLayersPanel?.(),p.l7.user("reparent-selection",()=>W.Yu(r.guid,o,a))),W.hq(r.guid),u.Egt.clearTemporarilyExpanded(),V.Y5.commit()}}if(this.setState({mouseDown:null,dropTarget:null}),this.isDraggingToToggle&&(n=!0,this.isDraggingToToggle=null,V.Y5.commit()),!n)return L.aH},{recordMetadata:e=>{let t=this.getScene(),n=this.guidAtMousePosition(e.clientY),i=this.relativeY(e.clientY);(0,o.KF)(!!n,"interaction test does not support rare case of no guid under mouse (empty layers panel?)");let s=this.topByGuid[n],a=this.heightByGuid[n];return{path:(0,eF.eT)(n,t),treatAsEndOfClick:!!(this.state.mouseDown&&5>this.state.mouseDown.distanceTo(new R.Mi(e.clientX,e.clientY))),belowAll:i>s+a,clientX:e.clientX,aboveAll:i<s}},playbackMetadata:e=>{if(e.treatAsEndOfClick)return{clientX:this.state.mouseDown.x,clientY:this.state.mouseDown.y};{let t=(0,eF.g2)(e.path,this.getScene(),this.props.currentPage),n=this.topByGuid[t]+this.heightByGuid[t]/2;return e.belowAll&&(n+=this.heightByGuid[t]),e.aboveAll&&(n-=this.heightByGuid[t]),{clientY:this.clientY(n),clientX:e.clientX}}}}),this.setRowToScrollToData=e=>{this.setState({rowToScrollToData:e})},this.getNewHorizontalAutoscrollPosition=(e,t)=>{let n=this.leftByGuid[e];if(void 0===n)return;let i=n-16;return this.isOutOfViewLeft(e)?Math.max(0,i):this.isOutOfViewRight(e)&&t?t-n>(this.props.width??0)?i:t-(this.props.width??0):void 0},this.onScrollContainerMouseDown=()=>{W.wr(),V.Y5.commit()},this.cachedScrollContainerHeight=0,this.scrollContainerRef=e=>{this.scrollContainer=e,this.scrollContainerEl=e?.getClipContainer(),this.scrollContainerEl&&(0,f.kc)().obj_panel_caching&&(this.setupScrollContainerResizeObserver(this.scrollContainerEl),this.cachedScrollContainerHeight=this.scrollContainerEl.clientHeight)},this.containerMouseLeave=e=>{W.Uc(""),null!=this.hoverToExpandGroupTimeout&&clearTimeout(this.hoverToExpandGroupTimeout)},this.expandMouseDown=(e,t)=>{let n=this.getScene().get(e);if(!n)return;t.stopPropagation(),(0,j.sx)("objects_panel_expand",{nonInteraction:0});let i=!n.isExpanded;t.altKey?W.sK(n.guid,i):(0,T.Fo)(t)&&!(0,d.Im)(this.props.sceneGraphSelection)?W.yF(n.guid,i):W.sq(n.guid,i),this.justToggledExpandedGuid=n.guid},this.isDraggingToToggle=null,this.lockMouseDown=(e,t)=>{let n=this.getScene().get(e);if(!n||this.props.isReadOnly)return;t.stopPropagation();let i=!n.locked;this.isDraggingToToggle={locked:i},p.l7.user("set-locked",()=>{W.tU(n.guid,i,t.altKey)})},this.visibleMouseDown=(e,t)=>{let n=this.getScene().get(e);if(!n||this.props.isReadOnly)return;t.stopPropagation();let i=!n.visible;this.isDraggingToToggle={visible:i},p.l7.user("set-visible",()=>{W.pr(n.guid,i,t.altKey)})},this.hoverToExpandGroupTimeout=null,this.rowMouseEnter=(e,t)=>{let n=this.getScene().get(e);if(!n)return;let i=()=>{if(this.isDraggingToToggle){let{locked:e,visible:t}=this.isDraggingToToggle;null!=e&&p.l7.user("set-locked",()=>(function(e,t,n){e&&eQ(e,n,e=>{e.locked=t})})(n,e,!1)),null!=t&&p.l7.user("set-visible",()=>(function(e,t,n){e&&eQ(e,n,e=>{e.visible=t})})(n,t,!1))}this.state.mouseDown||W.Uc(n.guid)};N.Ay.firefox&&this.isScrolling?this.handleMouseEnterAfterScroll=i:i()},this.onDragDrop=(e,t)=>{this.onMouseUp(t.nativeEvent)},this.onDragOver=(e,t)=>{this.onMouseMove(t.nativeEvent)},this.onDragEnter=(e,t)=>{this.onMouseMove(t.nativeEvent),this.rowMouseEnter(e,t)},this.onDragLeave=(e,t)=>{this.onMouseMove(t.nativeEvent)},this.renderedVisibleRowProps=[],this.touchAdapter=new ee(this,this.rowContainerMouseDown,this.onMouseMove,this.onMouseUp,{delayInMS:500}),this.getIsRowInView=(e,t)=>{if(!this.scrollContainer)return!0;let n=this.scrollContainer.getClipContainer().getBoundingClientRect();if(!t)return!0;let i=t.getBoundingClientRect();return e.fixed&&(this.props.width??0)!==0||i.top>=n.top&&i.bottom<=n.bottom},this.recalculateLayout(),this.initializeRows(this.props),this.scrollContainerInnerRef=s.createRef()}componentDidMount(){super.componentDidMount(),document.addEventListener("mousemove",this.onMouseMove),document.addEventListener("mouseup",this.onMouseUp),window.addEventListener("resize",this.requestRecalculateLayout),V.Y5.fromFullscreen.on("scrollToNode",this.scrollToNode);let e=u.glU&&u.glU.getFirstSelectedNodeIdForCurrentPage();e&&this.scrollToNode({nodeId:e}),this.updateAllVisibleRowGuids(),this.props.scrollContainerInnerRef?.(this.scrollContainerInnerRef);let t="objects-panel-inner-render-timer",n=k.sn.get(t);n&&n.isRunning&&!n.isUnreliable&&k.sn.tryStop(t)}componentWillUnmount(){super.componentWillUnmount(),document.removeEventListener("mousemove",this.onMouseMove),document.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("resize",this.requestRecalculateLayout),V.Y5.fromFullscreen.removeListener("scrollToNode",this.scrollToNode),this.scrollContainerResizeObserver&&(this.scrollContainerResizeObserver.disconnect(),this.scrollContainerResizeObserver=void 0),l.v.getFeatureGate("critical_interaction_layers_panel_right_click")&&this.runAfterFramePaintCancel&&this.runAfterFramePaintCancel()}updateSelection(e){this.props.onSelectionUpdated?this.props.onSelectionUpdated(e):((0,Y.S)("panel"),W.tJ([e]),V.Y5.commit())}UNSAFE_componentWillUpdate(e){if(e.renamingGuid&&e.renamingGuid!==this.props.renamingGuid)this.scrollToNodeIdAfterUpdate=e.renamingGuid;else if(e.currentPage&&e.currentPage!==this.props.currentPage){let e=u.glU&&u.glU.getFirstSelectedNodeIdForCurrentPage();e&&(this.scrollToNodeIdAfterUpdate=e)}let t=this.props.focusedNodes!==e.focusedNodes,n=this.props.objectsPanelRowRebuildCounter!==e.objectsPanelRowRebuildCounter,i=this.props.customRowBuilder!==e.customRowBuilder;if((n||i||this.props.currentPage!==e.currentPage||this.props.showImmutableFrameSublayers!==e.showImmutableFrameSublayers||!b()(this.props.temporarilyExpandedInstanceLayers,e.temporarilyExpandedInstanceLayers)||!b()(this.props.temporarilyHoveredNodes,e.temporarilyHoveredNodes)||t&&(0,f.kc)().ce_il_layer_focus||!b()(this.props.topNodeProperties?.children,e.topNodeProperties?.children))&&this.initializeRows(e),this.anchorNodeId=null,this.topNodeDelta=0,n){if(null!==this.justToggledExpandedGuid)this.justToggledExpandedGuid===this.stickyHeaderGuid?(this.lastCollapsedScrollPosition=this.state.scrollTop,this.lastCollapsedGuid=this.justToggledExpandedGuid,this.scrollToNodeIdAfterUpdate=this.stickyHeaderGuid):this.justToggledExpandedGuid===this.lastCollapsedGuid&&this.justToggledExpandedGuid===this.lastStickyHeaderGuid&&this.topByGuid[this.lastStickyHeaderGuid]===this.state.scrollTop&&(this.scrollAfterNodeExpanded=!0),this.justToggledExpandedGuid=null;else{let e=!1;for(let t of this.renderedVisibleRowProps)if("object"===t.rowType&&this.scrollContainer&&(0,eF.U$)(t,0,this.scrollContainer.getTrackHeight(),this.state.scrollTop)&&this.props.sceneGraphSelection[t.guid]){e=!0;break}let t=null,n=null;for(let i of this.renderedVisibleRowProps)"object"===i.rowType&&this.scrollContainer&&(0,eF.U$)(i,0,this.scrollContainer.getTrackHeight(),this.state.scrollTop)&&((!e||this.props.sceneGraphSelection[i.guid])&&(null===t||t>i.top)&&(t=i.top,this.anchorNodeId=i.guid),(null===n||n>i.top)&&(n=i.top,this.topNodeDelta=this.topByGuid[i.guid]-i.top))}}}componentDidUpdate(e,t){if(super.componentDidUpdate(e,t),!this.scrollContainer)return;if(this.updateAllVisibleRowGuids(),this.scrollToNodeIdAfterUpdate){this.scrollNodeIntoView(this.scrollToNodeIdAfterUpdate);let e=void 0!==this.topByGuid[this.scrollToNodeIdAfterUpdate],t=this.state.rowToScrollToData?.guid===this.scrollToNodeIdAfterUpdate;e&&t&&(this.scrollToNodeIdAfterUpdate=null)}else if(this.scrollAfterNodeExpanded)null!=this.lastCollapsedScrollPosition&&this.scrollContainer.scrollTo(this.lastCollapsedScrollPosition),this.scrollAfterNodeExpanded=!1,this.lastCollapsedScrollPosition=null,this.lastCollapsedGuid=null;else{let e=this.scrollContainer.getScrollTop()+this.topNodeDelta,t=!1;for(let n of this.renderedVisibleRowProps)if("object"===n.rowType&&n.guid===this.anchorNodeId){t=(0,eF.U$)(n,0,this.scrollContainer.getTrackHeight(),e);break}t?this.scrollContainer.scrollTo(e):this.anchorNodeId&&this.scrollNodeIntoView(this.anchorNodeId)}let n="objects-panel-inner-render-timer",i=k.sn.get(n);i&&i.isRunning&&!i.isUnreliable&&k.sn.tryStop(n)}getTopSelectedNodeId(){let e;let t=Object.keys(this.props.sceneGraphSelection),n=1/0;for(let i of t){let t=this.topByGuid[i];t<n&&(n=t,e=i)}return e}findStickyHeader(e,t,n){let i=this.state.scrollTop,s=this.getScene().get(e.guid);if(!s||!e.hasChildren||!(e.isExpanded||e.isTemporarilyExpanded))return null;let a=t<=i&&n>i+e.height,r=n>i&&n<=i+e.height;return(this.scrollAfterNodeExpanded||a||r)&&this.isNodeSticky(s)?a?(this.stickyHeaderGuid=e.guid,this.lastStickyHeaderGuid=this.stickyHeaderGuid,{...e,fixed:!0}):r?{...e,top:n-e.height,layerAbove:!0}:this.scrollAfterNodeExpanded&&e.guid===this.lastStickyHeaderGuid?(this.stickyHeaderGuid=e.guid,this.lastStickyHeaderGuid=this.stickyHeaderGuid,{...e,fixed:!0}):null:null}expandDropTargetIfNeeded(e,t){let n=null;if(e&&"sticky"!==e.parentTop){let i=this.getScene().get(e.parentGuid);(0,o.KF)(!!i,"parentGuid should point to a valid node");let s=this.heightByGuid[e.parentGuid],a=t>e.parentTop+s/3&&t<e.parentTop+2*s/3;i.uiOrderedChildren.length&&a&&(n=i.guid)}this.lastExpansionTarget!==n&&(this.lastExpansionTarget&&null!=this.hoverToExpandGroupTimeout&&clearTimeout(this.hoverToExpandGroupTimeout),n&&(this.hoverToExpandGroupTimeout=setTimeout(()=>{this.state.mouseDown&&W.Ir(n,!0)},1e3)),this.lastExpansionTarget=n)}toggleSelected(e){this.props.sceneGraphSelection[e]?W.D$([e]):(W.Dh([e]),this.rangeSelectAnchorNodeId=e),V.Y5.commit()}relativeY(e){let t=(0,O.bG)();return this.scrollContainerEl&&(t=this.scrollContainerEl.getBoundingClientRect().top),e-t+this.state.scrollTop}clientY(e){let t=(0,O.bG)();return this.scrollContainerEl&&(t=this.scrollContainerEl.getBoundingClientRect().top),e+t-this.state.scrollTop}isVerticallyVisible(e,t){if(!this.scrollContainerEl)return!0;let n=this.state.scrollTop,i=this.scrollContainerEl.getBoundingClientRect().height+this.state.scrollTop;return n<e&&t<i}isOutOfViewLeft(e){let t=this.leftByGuid[e];return void 0!==t&&t<this.state.scrollLeft-50}isOutOfViewRight(e){let t=this.leftByGuid[e];return void 0!==t&&t+(0,w.jz)(eK.indentWidth)>this.state.scrollLeft+(this.props.width??0)-50}shouldHorizontallyAutoscroll(e){return this.props.renamingGuid!==e&&(this.isOutOfViewLeft(e)||this.isOutOfViewRight(e))}guidAtMousePosition(e){return this.mouseOverStickyHeaderGuid(e)||(0,eF.GN)(this.getScene(),this.props.sceneGraphSelection,this.topByGuid,this.heightByGuid,this.relativeY(e))}mouseOverStickyHeaderGuid(e){return this.scrollContainerEl&&e-this.scrollContainerEl.getBoundingClientRect().top<this.props.topLevelObjectRowHeight?this.stickyHeaderGuid:null}computeStackOutlineHeight(e,t,n,i){return"sticky"===e?Math.min(t-n,i):Math.min(t-e,i-(e-n))}scrollContainerHeight(){return(0,f.kc)().obj_panel_caching&&this.cachedScrollContainerHeight?this.cachedScrollContainerHeight:this.scrollContainerEl?.clientHeight??0}renderDropTarget(e){let t=null;if(null!=e.parentTop){let n=this.scrollContainerHeight(),s=e.bottomForCanvasStackReparenting,a=this.heightByGuid[e.parentGuid],r="sticky"===e.parentTop||this.stickyHeaderGuid===e.parentGuid;s&&n&&(a=this.computeStackOutlineHeight(r?"sticky":e.parentTop,s,this.state.scrollTop,n)),t=r?(0,i.jsx)("div",{"data-testid":"drop-target-box",className:eW,style:{position:"sticky",width:this.props.width??0,height:a,zIndex:eH.Wb}},"drop-target-box"):(0,i.jsx)("div",{"data-testid":"drop-target-box",className:eW,style:{transform:`translate3d(0px, ${e.parentTop}px, 0)`,height:a}},"drop-target-box")}let n=null;return null!=e.lineTop&&(n=(0,i.jsx)("div",{"data-testid":"drop-target-line",className:"objects_panel--dropTargetLine--vmN9u",style:{marginLeft:`${e.lineIndent?e.lineIndent:0}px`,transform:`translate3d(0px, ${0===e.lineTop?0:e.lineTop-1}px, 0)`,transition:"margin-left 150ms 0ms"}},"drop-target-line")),[t,n]}setupScrollContainerResizeObserver(e){(0,f.kc)().obj_panel_caching&&this.observedScrollContainerEl!==e&&(this.scrollContainerResizeObserver&&this.scrollContainerResizeObserver.disconnect(),this.scrollContainerResizeObserver=new ResizeObserver(t=>{for(let n of t)if(n.target===e){let e=n.contentRect.height;e!==this.cachedScrollContainerHeight&&(this.cachedScrollContainerHeight=e);return}}),this.scrollContainerResizeObserver.observe(e),this.observedScrollContainerEl=e)}onContextMenu(e){e.stopPropagation(),e.preventDefault()}hasAtLeastOneRefToHoveredDefId(e){if(!this.props.hoveredPropDef||!this.props.hoveredPropDef.nodeIDs?.length||!this.props.hoveredPropDef.defID)return!1;let t=e.containingSymbolId;if(!t||!this.props.hoveredPropDef.nodeIDs.includes(t))return!1;for(let t of Object.values(e.propRefs))if(t.isLinked&&t.explicitDefID===this.props.hoveredPropDef.defID)return!0;return!1}renderObjectRow(e,t,n,s){let a=t.getNode(e.guid);if(!a||!a.parentGuid)return null;let r=t.getAncestorInfo(a.parentGuid),l=t.getMaskInfo(e.guid),o=null!=e.isSelected?e.isSelected:(0,et.K3)(this.props.sceneGraphSelection,e.guid);if(!r||!l)return null;let d=(r.isAncestorSelected||o)&&!r.isAncestorHidden&&this.hasAtLeastOneRefToHoveredDefId(a),c=!!e.prevNodeGuid&&t.getAncestorInfo(e.prevNodeGuid).isAncestorSelected,u=(!!e.prevNodeGuid&&(0,et.K3)(this.props.sceneGraphSelection,e.prevNodeGuid)||c)&&eV.OZ(this.cachedAllRowData)?.guid!==e.guid,p=!!e.nextNodeGuid&&t.getAncestorInfo(e.nextNodeGuid).isAncestorSelected,h=("FIXED_WHEN_CHILD_OF_SCROLLING_FRAME"===a.scrollBehavior||r.isAncestorFixed)&&r.isAncestorSelected,f=(!!e.nextNodeGuid&&(0,et.K3)(this.props.sceneGraphSelection,e.nextNodeGuid)||p)&&eV.w6(this.cachedAllRowData)?.guid!==e.guid,g=a.isLayerLikeCodeNode&&!a.isInstanceSublayer&&!a.isSymbolSublayer,x=(a.isCodeInstance||a.isCodeFile||a.isCodeComponent)&&!g;return(0,i.jsx)(em.oo,{isReadOnly:this.props.isReadOnly,...e,booleanOperation:a.booleanOperation,componentLike:x,cornerRadius:a.cornerRadius,currentPage:this.props.currentPage,dispatch:this.props.dispatch,displayOrder:r.childrenDisplayOrder,expandMouseDown:this.expandMouseDown,hasChildren:a.isExpandable||e.hasChildren||(0,en.vo)(a,this.getScene()),hasRefToHoveredDef:d,hideRowActions:this.props.hideRowActions,isAncestorHidden:r.isAncestorHidden,isAncestorLocked:r.isAncestorLocked,isAncestorSelected:!e.ignoreAncestorSelection&&r.isAncestorSelected,isDragging:!!this.state.dropTarget,isExpanded:e.isExpanded||e.isTemporarilyExpanded,isFavicon:this.props.faviconGuid===e.guid,isGIF:a.hasEnabledAnimatedPaint,isLastMaskedAtLevels:l.isLastMaskedAtLevels,isLayerAboveSelected:u,isLayerBelowSelected:f||h,isMaskedAtLevels:l.isMaskedAtLevels,isPrimaryBreakpoint:a.isPrimaryBreakpointFrame,isRenaming:this.props.renamingGuid===e.guid,isRowInView:n,isSelected:o,isSiteHomepage:this.props.topNodeProperties?.siteHomepageId===e.guid,isSlot:e.isSlot,isSocialImage:this.props.socialImageGuids?.split(",").includes(e.guid),isStamp:(0,m.GI)(a),isState:a.isState,isStateGroup:a.isStateGroup,isStaticImage:a.hasEnabledStaticImagePaint,isTemporarilyHovered:this.props.temporarilyHoveredNodes.includes(e.guid),isThumbnail:this.props.thumbnailGuid===e.guid,isWebpage:a.isResponsiveSetOrWebpage,isWidgetSublayer:!!a.isInWidget,layerLikeCodeNode:g,lockMouseDown:this.lockMouseDown,locked:a.locked,mask:a.mask,nodeMemoryUsage:this.props.showInFileMemoryPercentage?a.nodeMemoryUsage:null,nodeType:a.type,objectsPanelThumbnailId:a.objectsPanelThumbnailId,observeWithResizeObserver:this.props.observeWithResizeObserver,onContextMenu:this.rowContextMenu,onDragDropCallback:this.onDragDrop,onDragEnterCallback:this.onDragEnter,onDragLeaveCallback:this.onDragLeave,onDragOverCallback:this.onDragOver,onMouseEnter:this.rowMouseEnter,panelType:this.props.panelType??eF.g$.Object,panelWidth:this.props.width,recordingKey:s?void 0:e.recordingKey,renderResourceUse:this.props.renderResourceUse,resizeToFit:a.resizeToFit,rootMemoryUsage:this.props.showInFileMemoryPercentage?a.rootMemoryUsage:null,scrollDirection:a.scrollDirection,scrollLeft:this.state.scrollLeft,shouldShowGuids:this.props.shouldShowGuids,showInFileMemoryPercentage:this.props.showInFileMemoryPercentage,showMemoryUsage:this.props.showMemoryUsage,stackMode:a.stackMode,startRenaming:this.props.startRenaming,stopRenaming:this.props.stopRenaming,unobserveWithResizeObserver:this.props.unobserveWithResizeObserver,userId:this.props.userId,versionHistory:this.props.versionHistory,visible:a.visible,visibleMouseDown:this.visibleMouseDown},eq.getKeyForId(e.guid))}renderLayerExpansionRow(e){let t=eq.getKeyForId(eX(e)),n=void 0===this.props.width?"100%":this.props.width+this.state.scrollLeft;return(0,i.jsx)(eB,{top:e.top,width:n,guid:e.containingPrimaryInstanceGUID,level:e.level,onMouseEnter:()=>W.Uc(""),dispatch:this.props.dispatch,recordingKey:L.Pt(this.props,"layerExpansion",e.containingPrimaryInstanceGUID)},t)}renderSectionHeader(e){let t=this.sectionById[e.sectionId],n=t&&(0,et.sp)(this.getScene(),this.props.sceneGraphSelection,t.parentGuid),s=!0;if(t?.parentGuid&&t?.type!==u.KjJ.FIXED){let e=this.props.sceneGraph.get(t?.parentGuid);e&&e.fixedChildrenCount===e.uiOrderedChildren.length&&(s=!1)}let a=Math.max(this.props.scrollWidth,this.props.width??0);return(0,i.jsx)(eU,{...e,width:a,isParentSelected:n,sectionHasChildren:s,dispatch:this.props.dispatch},eq.getKeyForId(e.sectionId))}render(){k.sn.start("objects-panel-inner-render-timer");let e=this.renderedVisibleRowProps,t=this.cachedAllRowData||[];for(let n of(this.renderedVisibleRowProps=(0,eF.Uw)(t,this.windowInnerHeight,this.state.scrollTop),this.findStickyHeaderRowAndReplaceInVisibleRows(t),e))(0,eF.Mq)(n,this.windowInnerHeight,this.state.scrollTop)||eq.freeKeyForId(eX(n));this.renderedVisibleRowProps.sort((e,t)=>eq.getKeyForId(eX(e))-eq.getKeyForId(eX(t)));let n=this.props.nodeInfoCache,s=[];for(let e of this.renderedVisibleRowProps)"object"===e.rowType?s.push(this.renderObjectRow(e,n,this.getIsRowInView)):"layer-expansion"===e.rowType?s.push(this.renderLayerExpansionRow(e)):s.push(this.renderSectionHeader(e));var a=null;if(this.scrollToNodeIdAfterUpdate){let e=this.cachedAllObjectRowDataMap[this.scrollToNodeIdAfterUpdate];void 0!==e&&(0,eF.N1)(e)&&(a=this.renderObjectRow(e,n,this.getIsRowInView,!0))}if(!this.props.hideCanvasDropTargets&&this.props.reparentIntoStackInfo&&this.props.sceneGraph){let e=this.props.reparentIntoStackInfo.indexInParent,t=this.props.reparentIntoStackInfo.parentGuid,n=this.props.sceneGraph.get(t);n&&s.push(...this.renderDropTarget((0,eF.Gs)(n,this.topByGuid,this.heightByGuid,this.props.sceneGraph,this.totalHeight,this.props.insertionLineBoxOffset,e)))}else!this.props.isReadOnly&&this.state.dropTarget&&s.push(...this.renderDropTarget(this.state.dropTarget));let r=this.stickyHeaderGuid||!this.state.needsScrollLine?"objects_panel--scrollContainer--h6khG":"objects_panel--scrollContainerWithBorder--SR2sm objects_panel--scrollContainer--h6khG",l={width:`max(${this.props.scrollWidth??0}px, 100%)`,height:this.totalHeight,"--row-gap":`${this.props.rowSelectionGap}px`};return(0,i.jsxs)(i.Fragment,{children:[this.props.showVisualLayerIcons&&(0,f.kc)().ce_il_root&&(0,i.jsx)(eA,{ids:this.renderedVisibleRowProps.filter(e=>"object"===e.rowType).map(e=>e.guid),focusedNodeId:this.getTopSelectedNodeId()}),(0,i.jsx)(eP,{objectRow:a,setRowWidth:this.setRowToScrollToData,guid:this.scrollToNodeIdAfterUpdate}),(0,i.jsx)(eF.M3,{selection:this.props.sceneGraphSelection,getNode:function(e){return n.getNode(e)??null}}),(0,i.jsxs)(D.P,{ref:this.scrollContainerRef,className:y()(r,{"objects_panel--hasPending--0IO3j":this.props.hasPending}),dataOnboardingKey:this.props.isUI3?void 0:ex.m4,enableOverscroll:!0,horizontalScrollBarEnabled:!0,initialScrollTop:this.props.initialScrollTop,innerClassName:y()({"objects_panel--reserveBottomHeight--yfmtq":this.props.reserveBottomHeight}),minContentWidth:this.props.width,onContextMenu:this.onContextMenu,onMouseDown:this.onScrollContainerMouseDown,onScroll:this.onScroll,onScrollLeftChanged:this.onScrollLeftChanged,recordingKey:L.Pt(this.props,"scrollContainer"),scrollContainerRef:this.scrollContainerInnerRef,width:this.props.width,children:[(0,i.jsx)(ey.jq,{onLeftPanelCollapsedChange:this.onLeftPanelCollapsedChange}),(0,i.jsx)(P.V,{children:(0,i.jsx)("div",{className:y()("objects_panel--rowContainer--03VQD","objects_panel--horizontalScrollBarPadding--JfnK4"),style:l,onMouseDown:this.rowContainerMouseDown,onTouchStart:this.touchAdapter.onTouchStart,onMouseLeave:this.containerMouseLeave,"data-testid":"objects-panel",children:s})})]})]})}}function eZ(e){let t=(0,a.wA)(),n=(0,Q.J2)((0,H.UK)().showImmutableFrameSublayers),r=(0,Q.ut)(u.Ez5?.uiState().reparentIntoStackInfo,null),l=(0,q.NF)(),o=(0,q.Ht)(),d=(0,Q.J2)(u.Ez5.uiState().hoveredComponentPropDef),c=(0,q.no)(),p=(0,Q.J2)(u.Ez5.canvasViewState().temporarilyHoveredNodes),m=(0,Z.TA)(),f=(0,a.d4)(e=>e.mirror.sceneGraphSelection),x=(0,a.d4)(e=>e.mirror.objectsPanelRowRebuildCounter),_=(0,a.d4)(e=>e.mirror.appModel.temporarilyExpandedInstanceLayers),y=(0,a.d4)(e=>e.mirror.appModel.activeCanvasEditModeType),v=(0,U.m0)(),b=(0,F._I)(),j=(0,K.E)(),k=(0,h.getActiveTSSceneGraph)(),w=(0,$.wA)((e,t)=>{let n=e.get(t);return n?{guid:n.guid,children:n.uiOrderedChildren,siteHomepageId:n.siteHomepageId}:null},e.currentPage),E=(0,eO.el)(),{topLevelObjectRowHeight:T,nestedObjectRowHeight:S,rowSelectionGap:I,insertionLineBoxOffset:N,showVisualLayerIcons:A}=s.useContext(J.y0);(0,eF.SV)();let[L,M]=(0,g.fp)(eL.C),O=(0,C.A)(M,200),R=(0,$.Fk)(e=>e.getCurrentPage()?.webMetadata?.faviconID),P=(0,$.Fk)(e=>{let t=e.getCurrentPage();return(t?t.socialImageGuidsOnPage:[]).join(",")}),D=(0,Q.J2)((0,H.UK)().showGuids),z=(0,X._Z)().isLoading,B=(0,s.useMemo)(()=>new eV.nV(k,f),[k,x,f]),G=s.useRef(null),V=s.useRef(new Map);s.useEffect(()=>{let e=V.current;return G.current=new ResizeObserver(t=>{for(let n of t){let t=e.get(n.target);t?.(n)}}),()=>{G.current?.disconnect(),e.clear()}},[]);let W=s.useCallback((e,t)=>{!e||V.current.has(e)||(V.current.set(e,t),G.current?.observe(e))},[]),Y=s.useCallback(e=>{e&&(G.current?.unobserve(e),V.current.delete(e))},[]);if(v&&!b)return null;let ee=null===e.topNodeProperties?w:e.topNodeProperties;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(eY,{...e,currentPage:e.currentPage,dispatch:t,editModeType:y,faviconGuid:R,focusedNodes:e.focusedNodes,hasPending:z,hoveredPropDef:d,initialScrollTop:L,insertionLineBoxOffset:N,nestedObjectRowHeight:S,nodeInfoCache:B,objectsPanelRowRebuildCounter:x,observeWithResizeObserver:W,onScroll:O,onSelectNodesFromLayersPanel:e.onSelectNodesFromLayersPanel,recordingKey:e.recordingKey??"objectsPanel",renderResourceUse:l,reparentIntoStackInfo:r,reserveBottomHeight:e.reserveBottomHeight,rowSelectionGap:I,sceneGraph:k,sceneGraphSelection:f,scrollWidth:E,shouldShowGuids:D,showImmutableFrameSublayers:n,showInFileMemoryPercentage:c,showMemoryUsage:o,showViewChangesNotification:j,showVisualLayerIcons:A,socialImageGuids:P,temporarilyExpandedInstanceLayers:_,temporarilyHoveredNodes:p,topLevelObjectRowHeight:T,topNodeProperties:ee,unobserveWithResizeObserver:Y,userId:m??void 0}),(0,i.jsx)(ei.p,{featureFlag:"auto_auto_layout",children:(0,i.jsx)(eg,{})})]})}function eJ(e){return(0,i.jsx)(eO.Rp,{children:(0,i.jsx)(eZ,{...e})})}function eQ(e,t,n){if(n(e),t)for(let t of e.uiOrderedChildren)eQ((0,h.getActiveTSSceneGraph)().get(t),!0,n)}eY.displayName="ObjectsPanelView",eY.contextType=eO.$V},656474:(e,t,n)=>{n.d(t,{v2:()=>M,Nu:()=>P,JP:()=>D,XB:()=>L,VG:()=>A});var i=n(104076),s=n(716976),a=n(971080),r=n(486324);let l={...r.M,useCombobox:r.M.useAutocomplete};var o=n(390579),d=n(350205),c=n(880668),u=n(827435),p=n(258331),m=n(968110),h=n(375638),f=n(72873),g=n(790009),x=n(266808),_=n(812714),y=n(287211),v=n(511570),b=n.n(v),C=n(192075),j=n(553065),k=n(754446),w=n(692042),E=n(74620),T=n(835307),S=n(864021),I=n(862716),N=n(48251);function A(e){switch(e){case x.sAE.FIXED:return"FIXED";case x.sAE.HUG:return"HUG";case x.sAE.FLEX:return"FLEX"}}function L(e){switch(e){case x.sAE.FIXED:return"FIXED";case x.sAE.HUG:return"HUG";case x.sAE.FLEX:return"FLEX"}}function M(){let e;let[t,n]=(0,k.lJ)("gridTrackSize"),s=t&&(0,j.hS)(t)&&void 0!==t.value?t.value:void 0,a=t&&(0,j.hS)(t)&&void 0!==t.type?x.sAE[t.type]:void 0,{axis:r,width:l,initialText:o,shouldOpenDropdown:d,trackSizeInPx:c}=(0,y.R)(e=>({axis:e.mirror.appModel.onCanvasNameEditorInfo.axis,width:e.mirror.selectionProperties.width,initialText:e.mirror.appModel.onCanvasNameEditorInfo.initialText,shouldOpenDropdown:e.mirror.appModel.onCanvasNameEditorInfo.shouldOpenDropdown,trackSizeInPx:e.mirror.appModel.onCanvasNameEditorInfo.trackSizeInPx})),u=(0,j.E7)((0,k.kl)("gridRowCount")),p=(0,j.E7)((0,k.kl)("gridColumnCount"));if(!t||!(0,j.gl)(t)&&void 0===a||!(0,j.gl)(t)&&void 0===s||!l||!p||!u)return null;e=r===x._0v.X?Math.round(l/p):Math.round(l/u);let m="";m=(0,j.gl)(t)?(0,C.t)("fullscreen.mixed"):S.u1.format({type:a,value:s||0});let h=e=>{let i=S.u1.parse(e,(0,j.gl)(t)?void 0:{type:a,value:s||1});n({value:i.value,type:L(i.type)})};return(0,_.kc)().ce_tv_grid_hug?(0,i.jsx)(R,{axis:r,disableSaveOnEscape:!0,gridTrackSizingType:a,maxWidth:e,name:o||m,noSelectOnFocus:!!o,setGridTrackSizingType:e=>{n({type:L(e)})},setName:h,shouldOpenDropdown:d,trackSizeFlexMultiplier:a===x.sAE.FLEX?s:void 0,trackSizeInPx:c}):(0,i.jsx)(I.qn,{name:o||m,setName:h,maxWidth:e,noSelectOnFocus:!!o,disableSaveOnEscape:!0})}let O={crossAxis:-30,mainAxis:8};function R(e){let t=(0,I.R9)(e.name,e.setName,{maxWidth:e.maxWidth,noSelectOnFocus:e.noSelectOnFocus,disableSaveOnEscape:e.disableSaveOnEscape,formatter:S.u1}),n=(0,T.Fk)(e=>{let t=x.HV5?.getSingleSelectedPrimaryGridId();if(!t)return!1;let n=e.get(t);return!!n&&n.isOrInInstance(x.Yc7.SLOT_SUBLAYERS)}),r=(0,T.Fk)(e=>{let t=x.HV5?.getSingleSelectedPrimaryGridId();if(!t)return!1;let n=e.get(t);return!!n&&"SYMBOL"===n.type}),[c,u]=s.useState(e.shouldOpenDropdown),[p,m]=s.useState(c&&void 0!==e.gridTrackSizingType?A(e.gridTrackSizingType):void 0),h=(0,w.LE)({subscribeToUpdates_expensive:c}),f=(0,w.Xg)({subscribeToUpdates_expensive:c}),_=(0,E.p8)("isReadOnly"),y=(0,S.mp)(n);s.useEffect(()=>{(h||f)&&u(!1)},[h,f]);let v=l.useCombobox({selected:void 0!==e.gridTrackSizingType?[A(e.gridTrackSizingType)]:[],activeValue:p,onActiveValueChange:m,expanded:c,expandOnFocus:!1,onExpand:u,onSelect(t){if(!t)return;let n=function(e){switch(e){case"FIXED":return x.sAE.FIXED;case"HUG":return x.sAE.HUG;case"FLEX":return x.sAE.FLEX;default:return null}}(t);null!=n&&(e.setGridTrackSizingType(n),u(!1),x.glU?.hideOnCanvasNameEditor())}}),C=s.useRef(null);if(!t)return null;let{containerRef:j,measurerRef:k,containerStyle:L,editingName:M,onFocus:R,onChange:F,onKeyDown:z,onBlur:B,width:G,setIsComposing:U}=t,V=r||n;return(0,i.jsx)(I.n9,{containerRef:j,containerClassname:e.containerClassname,containerStyle:L,measurerRef:k,editingName:M,children:(0,i.jsxs)(g.J,{brand:"design",children:[(0,i.jsxs)("div",{className:V?N.iM:N.hs,children:[(0,i.jsx)(a.Y,{id:`on-canvas-name-editor-${e.name}`,disabled:n,...v.getInputProps({ref:C,autoFocus:!0,className:b()(N.U2,{[N.r9]:n}),onChange:(e,{event:t})=>{F(t)},onKeyDown:function(e){"Enter"===e.key&&c||z(e)},spellCheck:!1,style:{width:`${G}px`},value:M,htmlAttributes:{autoCapitalize:"off",autoComplete:"off",autoCorrect:"off",dir:"auto",onBlur:B,onCompositionEnd:()=>U(!1),onCompositionStart:()=>U(!0),onFocus:R},formatter:{gridTrackSizeFormatterFlex:S.u1}})}),(0,i.jsx)(l.Trigger,{...v.getTriggerProps(),disabled:_,className:V?N.Pq:N.uR,children:(0,i.jsx)(o.O,{})})]}),(0,i.jsx)(l.PopupList,{...v.getListProps(),anchorEl:C,"data-testid":"grid-track-combobox-popup-list",placement:"bottom-start",offset:({rects:e})=>({crossAxis:e.reference.width+O.crossAxis,mainAxis:O.mainAxis}),className:N.g1,children:y.map(t=>(0,i.jsx)(l.Option,{value:A(t),className:N.r2,recordingKey:`trackSizingTypeOption-${x.sAE[t]}`,"data-testid":`gridTrackSizing-${x.sAE[t]}`,children:(0,i.jsxs)("span",{className:b()(N.Fo,{[N.$U]:p===A(t)}),children:[(0,i.jsx)(d.l,{className:N.rF}),(0,i.jsx)(P,{gridTrackSizingType:t,axis:e.axis}),(0,i.jsx)(D,{gridTrackSizingType:t,axis:e.axis,trackSizeInPx:e.trackSizeInPx,trackSizeFlexMultiplier:e.trackSizeFlexMultiplier})]})},t))})]})})}function P(e){switch(e.gridTrackSizingType){case x.sAE.FIXED:return e.axis===x._0v.X?(0,i.jsx)(c.w,{}):(0,i.jsx)(u.T,{});case x.sAE.HUG:return e.axis===x._0v.X?(0,i.jsx)(p.v,{}):(0,i.jsx)(m.C,{});case x.sAE.FLEX:return e.axis===x._0v.X?(0,i.jsx)(h.G,{}):(0,i.jsx)(f.N,{})}}function D(e){switch(e.gridTrackSizingType){case x.sAE.FIXED:let t=S.xm.format({type:x.sAE.FIXED,value:e.trackSizeInPx});return e.axis===x._0v.X?(0,C.tx)("fullscreen.on_canvas_editor.grid_track_size.fixed_width_explicit",{width_in_px:t}):(0,C.tx)("fullscreen.on_canvas_editor.grid_track_size.fixed_height_explicit",{height_in_px:t});case x.sAE.HUG:return(0,C.tx)("fullscreen.on_canvas_editor.grid_track_size.hug");case x.sAE.FLEX:return(0,C.tx)("fullscreen.on_canvas_editor.grid_track_size.fill_container_explicit",{size_in_fr:S.u1.format({type:x.sAE.FLEX,value:e.trackSizeFlexMultiplier||1})})}}},862716:(e,t,n)=>{n.d(t,{R9:()=>x,n9:()=>_,qn:()=>y});var i=n(104076),s=n(716976),a=n(237420),r=n(88314),l=n(266808),o=n(511570),d=n.n(o),c=n(221586),u=n(641518),p=n(278491),m=n(354114),h=n(893178),f=n(692042),g=n(48251);function x(e,t,n){let i;let{maxWidth:o,noSelectOnFocus:d=!1,disableSaveOnEscape:p=!1,hasSlideRowBeenManuallyRenamed:x=!0,formatter:_}=n,{padding:y,margin:v,...b}=(0,a.d4)(e=>e.mirror.appModel.onCanvasNameEditorInfo),C=(0,f._X)({subscribeToUpdates_expensive:!0}),j=C?.zoomScale||1,[k,w]=s.useState(e),[E,T]=s.useState(!0),S=s.useRef(null),I=s.useRef(null),[N,A]=s.useState(0),[L,M]=s.useState(!1),O=s.useCallback((e,t)=>{switch(b.mode){case l.nzw.FRAME_NAME:case l.nzw.VAR_WIDTH_SIZE:A(Math.min(e,o*j)+7);break;case l.nzw.CANVAS_GRID_ROW_NAME:case l.nzw.CANVAS_GRID_ROW_STATE_GROUP:let n=Math.min(e,o*j);x?A(n+14):A(Math.max(n,40)+14);break;case l.nzw.RESPONSIVE_SET_NAME:case l.nzw.RESPONSIVE_NODE_SET_NAME:case l.nzw.SECTION_NAME:let i=o*j;b.mode===l.nzw.RESPONSIVE_SET_NAME&&(i-=60),b.mode===l.nzw.RESPONSIVE_NODE_SET_NAME&&(i-=60),e<i?A(e):A(i-2*v.x);break;case l.nzw.FLOW_STARTING_POINT_NAME:A(Math.min(e,o)+4);break;case l.nzw.MEASUREMENT_FREE_TEXT:A(Math.min(e,o*j)+8.5);break;case l.nzw.GRID_TRACK_SIZE:let s=e;l.qmM&&(s=l.qmM.measureTrackLabelSize(t).x),A(Math.min(s,o*j+8.5))}},[b.mode,o,j,v.x,x]);s.useLayoutEffect(()=>{I.current&&O(I.current.scrollWidth,k)},[k,O]),s.useEffect(()=>{e&&(T(!0),w(e))},[e]),s.useEffect(()=>{let e=e=>{let t=!(S.current&&S.current.contains(e.target)),n=document.querySelector('[data-resource-id="rename-selection"]'),i=e.target&&n&&n.contains(e.target);t&&!i&&l.glU?.hideOnCanvasNameEditor()};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]);let R=u.AF("onCanvasRename","change",e=>{w(e.target.value)}),P=u.v_("onCanvasRename","keydown",e=>{if(!L){if("Escape"===e.key&&p){T(!1),l.glU?.hideOnCanvasNameEditor();return}switch(e.key){case"Escape":case"Enter":case"Tab":e.preventDefault(),T(!1),t(k),m.Y5.commit(),l.glU?.hideOnCanvasNameEditor();break;case"=":case"-":(0,c.Fo)(e)&&(0,h.f7)(e)}}});if(!C)return null;let D={},F=(0,f.Z0)(C,{x:b.x,y:b.y},!1),z={x:F.x+C.x,y:F.y+C.y};if(b.mode===l.nzw.FLOW_STARTING_POINT_NAME&&(z.x-=32+N,z.y=Math.round(z.y)),b.mode===l.nzw.FRAME_NAME){let e=(0,r.Cc)(5,9,(C.zoomScale-.1)*5);e=(0,r.qE)(e,5,9)-3,z.y-=e}if(b.mode===l.nzw.CANVAS_GRID_ROW_NAME&&l.Ez5){let e=l.Ez5.canvasGrid().gridRowSpacing()/2*C.zoomScale;e-=8,z.y-=e}switch(b.mode===l.nzw.CANVAS_GRID_ROW_STATE_GROUP&&l.Ez5&&(z.y+=8,z.x+=6),b.mode===l.nzw.RESPONSIVE_SET_NAME&&(z.x+=36,z.y-=3),b.mode===l.nzw.RESPONSIVE_NODE_SET_NAME&&(z.x+=36,z.y-=3),b.mode===l.nzw.VAR_WIDTH_SIZE&&(z.y+=20*b.varWidthTextDirection.y,z.x+=20*b.varWidthTextDirection.x),b.mode===l.nzw.GRID_TRACK_SIZE?D.transform=`translate(${b.x+C.x}px, ${b.y+C.y}px) rotate(${b.angle}deg)`:b.mode===l.nzw.MEASUREMENT_FREE_TEXT?b.invertTextPosition?D.transform=b.isCentered?`translate(calc(${z.x}px - 50%), ${z.y-24}px)`:`translate(calc(${z.x-6}px - 100%), ${z.y-9.5}px)`:D.transform=b.isCentered?`translate(calc(${z.x}px - 50%), ${z.y+7}px)`:`translate(${z.x+6}px, ${z.y-9.5}px)`:b.mode===l.nzw.VAR_WIDTH_SIZE?D.transform=`translate(calc(${z.x}px - 50%), ${z.y-10}px)`:D.transform=`translate(${z.x}px, ${z.y}px) rotate(${b.angle}deg)`,b.mode){case l.nzw.FRAME_NAME:i=g.Rj;break;case l.nzw.CANVAS_GRID_ROW_NAME:case l.nzw.CANVAS_GRID_ROW_STATE_GROUP:i=g.oX;break;case l.nzw.FLOW_STARTING_POINT_NAME:i=g.K3;break;case l.nzw.MEASUREMENT_FREE_TEXT:i=g.Q;break;case l.nzw.GRID_TRACK_SIZE:i=g.PE;break;case l.nzw.VAR_WIDTH_SIZE:i=g.z$}return{containerRef:S,measurerRef:I,containerStyle:D,inputClassname:i,editingName:k,onFocus:e=>{if(d||e.target.select(),I.current&&O(I.current.scrollWidth,k),_&&_.defaultSelection){let{start:t,end:n}=_.defaultSelection(k);e.target.setSelectionRange(t,n)}},onChange:R,onKeyDown:P,onBlur:e=>{E&&(t(e.target.value),m.Y5.commit(),e.relatedTarget&&"focus-target"===e.relatedTarget.className&&l.glU?.hideOnCanvasNameEditor())},width:N,setIsComposing:M}}function _({containerRef:e,containerClassname:t,containerStyle:n,measurerRef:s,editingName:a,children:r}){return(0,i.jsxs)("div",{ref:e,className:d()(t,p.Dm,g.T_),style:n,children:[(0,i.jsx)("span",{ref:s,className:g.jk,children:a}),r]})}function y(e){let t=x(e.name,e.setName,{maxWidth:e.maxWidth,noSelectOnFocus:e.noSelectOnFocus,disableSaveOnEscape:e.disableSaveOnEscape,hasSlideRowBeenManuallyRenamed:e.hasSlideRowBeenManuallyRenamed});if(!t)return null;let{containerRef:n,measurerRef:s,containerStyle:a,editingName:r,onFocus:l,onChange:o,onKeyDown:d,onBlur:c,width:u,setIsComposing:p,inputClassname:m}=t;return(0,i.jsx)(_,{containerRef:n,containerClassname:e.containerClassname,containerStyle:a,measurerRef:s,editingName:r,children:(0,i.jsx)("input",{autoCapitalize:"off",autoComplete:"off",autoCorrect:"off",autoFocus:!0,className:m,dir:"auto",onBlur:c,onChange:o,onCompositionEnd:()=>p(!1),onCompositionStart:()=>p(!0),onFocus:l,onKeyDown:d,spellCheck:!1,style:{width:`${u}px`},value:r})})}},65554:(e,t,n)=>{n.d(t,{Cg:()=>o,UA:()=>d,fr:()=>r,uF:()=>a,ym:()=>l});var i=n(983500),s=n(404343);let a=40,r=(0,i.jz)(s.xM9),l=(0,i.jz)(s.M$q),o=(0,i.jz)(s.MGP),d=8},347598:(e,t,n)=>{n.d(t,{B:()=>l});var i=n(104076),s=n(511570),a=n.n(s),r=n(961125);function l({children:e,hasScrollLine:t,onClick:n}){return(0,i.jsx)("div",{className:a()(r.kL,{[r.to]:t}),onClick:n,children:e})}},837080:(e,t,n)=>{n.d(t,{H:()=>a});var i=n(104076),s=n(489175);function a({children:e,dataOnboardingKey:t}){return(0,i.jsx)("div",{className:"header_text--headerText--ZXIeN",onContextMenu:s.jo,"data-onboarding-key":t,children:e})}},90453:(e,t,n)=>{n.d(t,{A:()=>l});var i=n(104076),s=n(511570),a=n.n(s),r=n(120074);function l({isFullHeight:e,children:t}){let n=(0,r._Z)().isLoading;return(0,i.jsx)("div",{"data-testid":"left-panel-body",className:a()("left_panel_body--container--GuUjF sf_pro--uiFontWithSFProFallback--m-p9V",{leftPanelBody:!n,"left_panel_body--flexGrow--HFJjd":e}),children:t})}},400690:(e,t,n)=>{n.d(t,{e:()=>c,i:()=>d});var i=n(104076),s=n(536358),a=n(352630),r=n(192075),l=n(643077),o=n(349311);function d({onClick:e,recordingKey:t,tooltipText:n}){return(0,i.jsx)(a.Me,{recordingKey:t,"aria-label":n,onClick:e,trackingProperties:{text:"Add new page"},htmlAttributes:{"data-testid":"new-page-button","data-tooltip":n,"data-tooltip-type":o.Ib.TEXT,"data-tooltip-show-above":!0},children:(0,i.jsx)(s.e,{})})}function c({recordingKey:e}){let t=(0,l.rE)();return(0,i.jsx)(d,{onClick:()=>t(null),recordingKey:e,tooltipText:(0,r.t)("fullscreen.pages_panel.add_new_page")})}},681470:(e,t,n)=>{n.d(t,{t:()=>C});var i=n(104076),s=n(161623),a=n(108692),r=n(536358),l=n(620480),o=n(266808),d=n(641518),c=n(652539),u=n(236631),p=n(192075),m=n(819851),h=n(822852),f=n(643077),g=n(944350),x=n(349311),_=n(983764),y=n(87535);let v="new_page_dropdown--newPageIcon--R2RXS";var b=n(871428);function C({recordingKey:e}){let{Dropdown:t,toggleDropdown:n,isDropdownShown:C,dropdownTargetRef:j}=(0,_.B)("newPageDropdown"),k=(0,m.lg)(),w=(0,h.Te)(),E=(0,f.rE)();if(!w)return null;let T=[{displayText:(0,p.t)("fullscreen.pages_panel.page_dropdown_new"),optionHeight:24,editorType:null,disabled:!0},{displayText:(0,p.t)("fullscreen.pages_panel.design_page"),optionHeight:24,editorType:g._Y.DESIGN,icon:(0,i.jsx)("div",{className:v,children:(0,i.jsx)(s.N,{})}),callback:()=>E(o._YF.DESIGN)},{displayText:(0,p.t)("fullscreen.pages_panel.figjam_page"),optionHeight:24,editorType:g._Y.WHITEBOARD,icon:(0,i.jsx)("div",{className:v,children:(0,i.jsx)(c.B,{svg:b.A})}),callback:()=>E(o._YF.WHITEBOARD)},{displayText:(0,p.t)("fullscreen.pages_panel.slide_deck"),optionHeight:24,editorType:g._Y.SLIDES,icon:(0,i.jsx)("div",{className:v,children:(0,i.jsx)(a.o,{})}),callback:()=>E(o._YF.SLIDES)}],S=48;for(let e=0;e<T.length;e++)if(T[e].editorType===k){S+=24*e;break}return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:u.s.absolute.w8.h8.$,ref:j,style:{bottom:`${S}px`,right:"42px"}}),(0,i.jsx)(y.K0,{className:"new_page_dropdown--newPageButton--sYJsl",recordingKey:d.Pt(e,"newPageDropdown"),"data-tooltip-type":x.Ib.TEXT,"data-tooltip":(0,p.t)("fullscreen.pages_panel.add_new_page"),"data-tooltip-show-above":!0,onMouseDown:n,children:(0,i.jsxs)("div",{className:"new_page_dropdown--newPageIconsContainer--pzY38",children:[(0,i.jsx)(r.e,{}),(0,i.jsx)("div",{className:"new_page_dropdown--newPageChevron--N0hv3",children:(0,i.jsx)(l.r,{})})]})}),C&&(0,i.jsx)(t,{minWidth:160,items:T,showPoint:!0})]})}},444049:(e,t,n)=>{n.d(t,{m:()=>s});var i=n(104076);function s({children:e}){return(0,i.jsx)("div",{className:"objects_panel_container--container--jBz9j",children:e})}},558720:(e,t,n)=>{n.d(t,{U:()=>c});var i=n(104076),s=n(454851),a=n(853943),r=n(641518),l=n(192075),o=n(349311),d=n(983764);function c(e){let{Dropdown:t,toggleDropdown:n,dropdownTargetRef:c,isDropdownShown:u}=(0,d.B)("LAYERS_PANEL_DROPDOWN");return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{ref:c,children:(0,i.jsx)(s.d,{"aria-label":(0,l.t)("dev_handoff.code.options"),recordingKey:e.recordingKey,"aria-expanded":u,onClick:function(e){e.stopPropagation(),n()},htmlAttributes:{"data-tooltip":(0,l.t)("dev_handoff.code.options"),"data-tooltip-type":o.Ib.TEXT},children:(0,i.jsx)(a.J,{})})}),(0,i.jsx)(t,{items:e.dropdownItems,showPoint:!0,lean:e.lean,recordingKey:r.Pt(e.recordingKey,"dropdown")})]})}},569565:(e,t,n)=>{n.d(t,{bU:()=>et,bG:()=>es,VS:()=>ea});var i=n(104076),s=n(716976),a=n(237420),r=n(266808),l=n(795033),o=n(511570),d=n.n(o),c=n(166887),u=n(86517),p=n(328341),m=n(514223),h=n(140490),f=n(586398),g=n(742549),x=n(469191),_=n(661711),y=n(968169),v=n(510232),b=n(568590),C=n(643077),j=n(508011),k=n(120074),w=n(211862),E=n(657878),T=n(944350),S=n(331497),I=n(638004),N=n(684742),A=n(798174),L=n(380494),M=n(408825),O=n(449572),R=n(513369),P=n(550209),D=n(679359),F=n(804101),z=n(767273),B=n(192075),G=n(59849),U=n(669436),V=n(602443);function H({pageRowRef:e,pagesListRef:t,nodeId:n,nodeName:s,pageThumbnail:a,isLoading:r}){let o=(0,w.q5)(),u=(0,c.hC)(),p=(0,l.Xr)(V.qp);if(!o||!t.current||!e.current)return null;let h=t.current.getBoundingClientRect().left+t.current.getBoundingClientRect().width,f=h-16,g=`calc(${h}px + var(--spacer-2, 0.5rem))`,x=e.current.getBoundingClientRect().top,_=e.current.getBoundingClientRect().height;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{style:{position:"fixed",zIndex:10,left:f+"px",top:x+"px",height:_+"px",width:"32px"}}),(0,i.jsxs)("div",{"data-testid":"PageSummaryPreview",className:"page_summary_preview--previewContainer--kx2Uy",style:{left:g,top:x+_/2},children:[(0,i.jsxs)("div",{className:"page_summary_preview--thumbnailContainer--a-jPQ",children:[(0,i.jsx)("div",{"data-testid":"FileThumbnail",children:(0,i.jsx)(z.V,{thumbnailType:(0,F.lv)(o.editorType,!1),thumbnailUrl:a?.thumbnail_url??null,clientMeta:a?.thumbnail_meta??o.clientMeta,noBorder:!0})}),(0,i.jsx)(N.E,{"aria-label":(0,B.t)("pages_panel.summary_preview.update_preview"),className:d()("page_summary_preview--refreshButton--XAvPe",{"page_summary_preview--alwaysShowRefreshButton--M3IDC":!a}),onClick:()=>{o&&!r&&(u("figjam_pages_summary.preview_refreshed",{previewPageId:n}),p(m.r.LOADING),U.S.updatePageCheckpointThumbnails({fileKey:o.key}).catch(()=>{u("figjam_summary_preview.page_thumbnails_request_failed_increment_metric",{})}))},htmlAttributes:{"data-tooltip":(0,B.t)("pages_panel.summary_preview.update_preview"),"data-tooltip-type":"text","data-testid":"RefreshPreviewButton"},children:r?(0,i.jsx)(D.kt,{testId:"LoadingSpinner",size:"small",className:"page_summary_preview--loadingSpinner--FXocO"}):(0,i.jsx)(A.o,{})})]}),(0,i.jsx)("div",{className:"page_summary_preview--pageTitleContainer--Yk-qK text--fontPos13--xW8hS text--_fontBase--QdLsd",children:s})]})]})}let K=M.z.record(M.z.object({thumbnail_url:M.z.string(),thumbnail_meta:M.z.object({}).passthrough().transform(e=>JSON.stringify(e)),created_at:M.z.string().optional()}));var W=n(722887),q=n(221586),X=n(354114),Y=n(772523),Z=n(844182),J=(e=>(e.RANGE="range",e.INDIVIDUAL="individual",e))(J||{});function Q(e){return(0,q.Fo)(e)?"individual":e.shiftKey?"range":null}var $=n(757218),ee=n(170627);function et(e){return(0,i.jsx)(h.u,{label:"PagesList",children:(0,i.jsx)(en,{...e})})}function en({pages:e,isReadOnly:t,onContextMenu:n,isComparingChanges:o,onPageSwitch:d,pageToNumChanges:p,shouldHighlightActivePage:m=!0,activePageShouldUseBrandColor:h,scrollContainer:v,shouldUseButtonRows:b}){let k=(0,S.ut)(r.Ez5?.currentPageState().requestedPageChange,""),w=(0,S.ut)(r.Ez5?.uiState().showInFileMemoryPercentage,!1),E=(0,C.dh)(),T=!(0,f.wK)(),I=(0,c.U)(),N=(0,g.l7)(),A=(0,s.useRef)(null),L=(0,j.Ht)(),M=(0,a.d4)(e=>e.versionHistory),O=(0,S.J2)((0,y.UK)().showGuids),{selectedPageIds:R,handleMultiselectClick:P,cancelMultiselect:D}=function(e){let[t,n]=(0,l.fp)(V.cE),i=(0,C.dh)(),a=(0,s.useCallback)(()=>{n(e=>e.length?[]:e)},[n]),r=(0,s.useCallback)((s,r)=>{let l=Q(r);switch(l&&((0,Y.tJ)([]),X.Y5.commit()),l){case"individual":return n(t.includes(s)?t.filter(e=>e!==s):0===t.length&&i!==s?[i,s]:[...t,s]),!0;case"range":{let a=0===t.length?i:t[t.length-1],r=e.findIndex(e=>e.nodeId===a),l=e.findIndex(e=>e.nodeId===s),o=Math.min(r,l),d=Math.max(r,l),c=new Set(t),u=e.slice(o,d+1).map(e=>e.nodeId);return c.has(u[0])&&c.has(u[u.length-1])?n(t.filter(e=>!u.includes(e))):n([...t,...u.filter(e=>!c.has(e))]),!0}case null:return a(),!1}},[a,e,i,t,n]);return{selectedPageIds:t,handleMultiselectClick:r,cancelMultiselect:a}}(e),{isReordering:F,reorderingPageIds:z,startReordering:B,cancelReordering:G,commitReordering:U,draggingState:H,updateDraggingState:K}=function(e){let[t,n]=(0,s.useState)([]),i=(0,s.useRef)(null),[a,l]=(0,s.useState)(null),o=t.length>0,d=(0,c.U)(),u=(0,s.useCallback)(e=>{n(e),l(null),i.current=null},[]),p=(0,s.useCallback)(()=>{n(e=>e.length?[]:e),l(null),i.current=null},[]),m=(0,s.useCallback)((e,n)=>{if(t.includes(e)){l(null);return}let s=n.target;a&&a.dragOverPageId===e&&i.current||(i.current=s.getBoundingClientRect());let r=n.clientY-i.current.top<i.current.height/2?"before":"after";l(t=>t&&t.dragOverPageId===e&&t.insertPosition===r?t:{dragOverPageId:e,insertPosition:r})},[a,t]),h=(0,s.useCallback)(()=>!a||!o||t.includes(a.dragOverPageId)?(p(),!1):(ee.l7.user("reorder-pages",()=>{let n=(0,Z.Pe)(e);"before"===a.insertPosition?[...t].sort((e,t)=>(n[e]??Number.MAX_SAFE_INTEGER)-(n[t]??Number.MAX_SAFE_INTEGER)).forEach(e=>{r.Egt?.pageMoveBeforePage(e,a.dragOverPageId)}):[...t].sort((e,t)=>(n[t]??Number.MAX_SAFE_INTEGER)-(n[e]??Number.MAX_SAFE_INTEGER)).forEach(e=>{r.Egt?.pageMoveAfterPage(e,a.dragOverPageId)})}),p(),d("page_reorder",{reorderedPageIds:t,dragOverPageId:a.dragOverPageId,insertPosition:a.insertPosition},{forwardToDatadog:!0}),!0),[e,o,t,p,a,d]);return{isReordering:o,reorderingPageIds:t,startReordering:u,cancelReordering:p,commitReordering:h,draggingState:a,updateDraggingState:m}}(e),{renamingPageId:J,startRenaming:et,cancelRenaming:en,commitRenaming:ea,pendingPageName:er,setPendingPageName:el}=(0,$.c)(e),eo=es({pagesList:e,isComparingChanges:o});!function({pagesList:e,isDisabled:t,selectedPageIds:n,startRenaming:i,cancelMultiselect:a,cancelReordering:r}){(0,s.useEffect)(()=>{if(t)return;let s=t=>{let s=(0,Z.Pe)(e),l=n.filter(t=>{let n=s[t];return void 0!==n&&!e[n].isDivider}).sort((e,t)=>s[e]-s[t]);if(0!==l.length)switch(t.keyCode){case q.Uz.ESCAPE:a(),r();break;case q.Uz.R:(0,q.Fo)(t)&&(1===l.length?i(l[0]):X.Y5.triggerActionInUserEditScope("batch-page-rename",{args:{nodeIds:l}}))}};return document.addEventListener("keydown",s),()=>document.removeEventListener("keydown",s)},[t,e,n,a,r,i])}({pagesList:e,isDisabled:t,selectedPageIds:R,startRenaming:et,cancelMultiselect:D,cancelReordering:G}),(0,s.useEffect)(()=>{let e=()=>{D(),G()};return document.addEventListener("click",e),()=>document.removeEventListener("click",e)},[D,G]),(0,s.useEffect)(()=>{if(!F)return;let e=e=>{e.stopPropagation(),t?G():U()};return document.addEventListener("mouseup",e),()=>document.removeEventListener("mouseup",e)},[F,t,G,U]),(0,u.C)(v?.getScrollContainer(),F);let ed=(e,n)=>{G(),t||(0,x.i)(n)||Q(n)||(R.includes(e)?B(R):(D(),B([e])))},ec=(e,n)=>{F&&!t&&(K(e,n),n.preventDefault(),n.stopPropagation())},eu=(e,n)=>{if(t||Q(n)){G();return}U()&&(n.preventDefault(),n.stopPropagation())},ep=(e,n)=>{n.stopPropagation(),!t&&P(e,n)||(0,_.J)(()=>{N&&I("Dev Mode Overview Page Clicked",{pageId:e}),eo(e),d?.(e)})},em=({nodeId:e,e:t,clientX:i,clientY:s})=>{t.preventDefault(),t.stopPropagation(),n({nodeId:e,clientX:i??t.clientX,clientY:s??t.clientY})},eh=e=>{t||et(e)},ef=e=>{J&&(t||!e?en():ea())},eg=e=>!!m&&(k?e===k:e===E),ex=(0,s.useMemo)(()=>{let t=e[0];return!!t&&e.some(e=>e.pageType!==t.pageType)},[e]);return(0,i.jsx)("div",{ref:A,children:e.map((t,n)=>(0,i.jsx)("div",{children:(0,i.jsx)(ei,{nodeId:t.nodeId,nodeName:t.name,isDivider:t.isDivider,isFirstRow:0===n,isLastRow:n===e.length-1,draggingState:H,pagesListRef:A,previewSummaryEnabled:0===z.length&&!t.isDivider&&J!==t.nodeId,children:(0,i.jsx)(W.G,{activePageShouldUseBrandColor:h,hasMultiplePageTypes:ex,index:n,isActive:eg(t.nodeId),isComparingChanges:o,isDivider:t.isDivider,isOffline:T,isRenaming:J===t.nodeId,nodeId:t.nodeId,nodeName:t.name,onClickCallback:ep,onContextMenuCallback:em,onMouseDownCallback:ed,onMouseMoveCallback:ec,onMouseUpCallback:eu,pageToNumChanges:p,pageType:t.pageType,pagesList:e,renamingPagePendingName:J===t.nodeId?er:null,reorderingPageGuids:z,selectedPageGuids:R,setRenamingPagePendingName:el,shouldShowGuids:O,shouldUseButtonRow:b,showInFileMemoryPercentage:w,showMemoryUsage:L,startRenaming:eh,stopRenaming:ef,versionHistory:M})})},t.nodeId))})}function ei({nodeId:e,nodeName:t,isDivider:n,isFirstRow:o,isLastRow:u,children:h,draggingState:f,pagesListRef:g,previewSummaryEnabled:x}){let _=(0,s.useRef)(null),[y,v]=s.useState(!1),b=(0,a.d4)(e=>e.mirror.appModel.topLevelMode===r.lyf.HISTORY),C=f&&f.dragOverPageId===e?"before"===f.insertPosition?o?"pages_list--withInsertBeforeTop--IQT63":"pages_list--withInsertBefore---ui-o":u?"pages_list--withInsertAfterBottom--yG3xD":"pages_list--withInsertAfter--7QoMA":null,j=(0,w.q5)(),[k,E]=(0,l.fp)(V.qp),S=(0,s.useMemo)(()=>j?.editorType===T._Y.WHITEBOARD&&!b,[j?.editorType,b]),N=(0,s.useMemo)(()=>y&&x&&S,[y,x,S]),A=function(e){let t=(0,w.q5)(),n=(0,O.bc)(G.SPC,{fileKey:t?.key??""},{enabled:!!(t?.key&&e)});return L.Qw.useTransform(n,e=>{if(e?.file?.pagesSignedThumbnailData.status!==R.tT.Loaded)return null;try{if(!e?.file?.pagesSignedThumbnailData.data)return null;let t=JSON.parse(e.file.pagesSignedThumbnailData.data);return K.parse(t)}catch(n){return(0,P.$D)(I.e.FIGJAM,Error(`PageSummaryPreview: Failed to parse page thumbnail data. Error: ${n.message}.`),{tags:{fileKey:t?.key},extra:{parsedPageThumbnails:e?.file?.pagesSignedThumbnailData.data}}),null}})}(S),M=(0,s.useMemo)(()=>A?.data?.[e],[e,A?.data]),D=(0,s.useMemo)(()=>k===m.r.LOADING||"loading"===A.status,[k,A.status]);(0,s.useEffect)(()=>{M?.created_at&&E(m.r.SUCCESS)},[E,M?.created_at]);let F=(0,c.hC)(),z=(0,p.ZC)(S);return(0,s.useEffect)(()=>{!z&&N&&F("figjam_summary_preview.preview_shown",{previewPageId:e})},[F,e,N,z]),(0,i.jsxs)("div",{className:d()("pages_list--pagesRowWrapper--Plig-",C,{"pages_list--divider--idUOu":n}),ref:_,onMouseEnter:()=>v(!0),onMouseLeave:()=>v(!1),"data-testid":"PagesRowWrapper",children:[h,y&&x&&S&&(0,i.jsx)(H,{"data-testid":"PageSummaryPreview",pagesListRef:g,pageRowRef:_,nodeId:e,nodeName:t,pageThumbnail:M,isLoading:D})]})}function es({pagesList:e,isComparingChanges:t}){let n=(0,b.Z)("page_change_navigator_navigate"),i=(0,v.E)(),l=(0,c.U)(),o=(0,a.wA)(),d=(0,E._6)(),u=(0,C.dh)(),p=(0,a.d4)(e=>e.versionHistory);return(0,s.useCallback)(s=>(0,C.$P)(s,u,p,o,(0,k.Fy)(e,s)===r.xal.LOADED,l,n,i,t,d),[e,n,i,l,o,d,u,p,t])}function ea({pagesList:e,isComparingChanges:t,enabled:n=!0}){let i=(0,b.Z)("page_change_navigator_navigate"),l=(0,v.E)(),o=(0,c.U)(),d=(0,a.wA)(),u=(0,E._6)(),p=(0,C.dh)(n),m=(0,a.d4)(e=>e.versionHistory);return(0,s.useCallback)(async s=>{n&&await (0,C.$P)(s,p,m,d,(0,k.Fy)(e,s)===r.xal.LOADED,o,i,l,t,u)},[e,i,l,o,d,u,p,m,t,n])}},562921:(e,t,n)=>{n.d(t,{k3:()=>m,q0:()=>h});var i=n(716976),s=n(795033),a=n(409019),r=n(328341),l=n(222714),o=n(264830),d=n(985416),c=n(582689),u=n(65554),p=n(137783);function m({initialHeight:e,numberOfPages:t,upsellHeight:n,panelHeadersHeight:s,showingExtraControls:d,scrollContainerInnerRef:c,filterState:m,onHeightChange:f}){let[g,x]=(0,i.useState)(void 0),_=(0,i.useRef)(!1),{windowInnerHeight:y}=(0,l.l)(),v=(0,i.useCallback)(function(e){x(e),f?.(e)},[f]);(0,i.useLayoutEffect)(()=>{void 0===e||_.current||(x(e),_.current=!0)},[e]);let b=function({numberOfPages:e,upsellHeight:t,panelHeadersHeight:n,showingExtraControls:s,windowInnerHeight:a}){return(0,i.useMemo)(function(){let i=e*u.fr;return i=Math.ceil(i/u.fr)*u.fr+t+u.UA,s&&(i+=u.fr),Math.min(i,Math.round(.25*(a-(0,o.bG)()-u.Cg-n)))},[n,t,a,e,s])}({numberOfPages:t,upsellHeight:n,panelHeadersHeight:s,showingExtraControls:d,windowInnerHeight:y}),C=h({scrollContainerInnerRef:c,windowInnerHeight:y}),j=g?C(g):b;return function({filterState:e,computedHeight:t,defaultHeight:n,setHeight:s}){let l=(0,r.ZC)(t),o=(0,a.F)({previousComputedHeight:l,defaultHeight:n,setHeight:s});(0,i.useLayoutEffect)(()=>{if(void 0===e)return;let{previousComputedHeight:t,defaultHeight:n,setHeight:i}=o.current;t&&i(e===p.m.ALL?Math.max(t,n):Math.min(t,n))},[e,o])}({filterState:m,computedHeight:j,defaultHeight:b,setHeight:v}),{height:j,setHeight:v,defaultHeight:b}}function h({scrollContainerInnerRef:e,windowInnerHeight:t}){let{topLevelObjectRowHeight:n}=i.useContext(c.y0);return(0,i.useCallback)(function(i){return Math.max(1.5*u.fr,Math.min(i,t-(e.current?.getBoundingClientRect().top??175)-(1.5*n+(u.uF+u.ym))))},[e,t,n])}(0,d.Wh)(()=>(0,s.eU)(null))},137783:(e,t,n)=>{n.d(t,{m:()=>i});var i=(e=>(e.FILTERED="filtered",e.ALL="all",e))(i||{})},748672:(e,t,n)=>{n.d(t,{R:()=>Y});var i=n(104076),s=n(240803),a=n(680909),r=n(192075),l=n(643077),o=n(65554),d=n(716976),c=n(812714),u=n(641518),p=n(742549),m=n(489175),h=n(819851),f=n(48469),g=n(85598),x=n(400690),_=n(681470),y=n(629592);function v({isReadOnly:e,isPagesOpen:t,isComparingChanges:n,hasMultiplePageTypes:s,onClickNewPage:r,onCanvasSearch:o,onPageContextMenu:v,recordingKey:b,title:C,tooltipText:j}){let k=(0,l.dh)(),w=(0,l.nn)(),E=(0,h.m0)(),T=(0,p.l7)(),S=s||(0,c.kc)().interop_pages,I=!(0,g.HY)()&&(e||E||T)&&!!o,N=(0,d.useCallback)(e=>{(0,m.jo)(e),t||v?.({nodeId:k,clientX:e.clientX,clientY:e.clientY})},[v,t,k]);return(0,i.jsxs)(a.Y9,{variant:"leftPanel",size:"lg",children:[I?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(a.JU,{htmlAttributes:{onContextMenu:N},recordingKey:u.Pt(b,"collapsedRow"),children:(0,i.jsx)("span",{className:y.W,"data-onboarding-key":"pages-panel-toggle",children:t?(0,i.jsx)("span",{children:C}):w||""})}),!n&&(0,i.jsx)(a.X0,{children:(0,i.jsx)(f._,{onClick:o})})]}):(0,i.jsx)(a.JU,{htmlAttributes:{onContextMenu:N},recordingKey:u.Pt(b,"collapsedRow"),children:C}),!e&&(0,i.jsx)(a.X0,{children:S?(0,i.jsx)(_.t,{recordingKey:b}):(0,i.jsx)(x.i,{onClick:r,recordingKey:u.Pt(b,"newPage"),tooltipText:j})})]})}var b=n(511570),C=n.n(b),j=n(876621),k=n(849757),w=n(772523),E=n(120074),T=n(490499),S=n(852415),I=n(237420),N=n(409019),A=n(555013),L=n(428147),M=n(366535),O=n(459494),R=n(111297),P=n(332795),D=n(249445),F=n(74620),z=n(211862),B=n(944350),G=n(853039),U=n(295253);function V({onHeightChange:e}){let t=(0,I.wA)(),n=(0,z.q5)(),s=(0,F.p8)("pagesList").length,a=(0,h.m0)(),l=(0,O.Fr)(),o=P.h.useTrackingContext({trigger:U.b.PAGE_TRACKER_UPSELL}),c=(0,N.F)(e),u=d.useCallback(e=>{c.current?.(e?.getBoundingClientRect().height||0)},[s]),p=n?.team,m=n?.plan,f=p&&m&&p.canEdit&&m.tier===B.Ag.STARTER;if(s<=0||!n||a||!f)return null;let g=(0,G.Lj)(n);if((g<=1||g>=1/0)&&!l(n))return null;let x=()=>{let e=U.b.PAGE_TRACKER_UPSELL;t((0,M.to)({type:L.V,data:{upsellSource:e,teamId:p?.id,entrypoint:D.C6.PAGE_TRACKER_UPSELL,openCheckoutInNewTab:!0}}))},_=(0,i.jsx)(A.Us,{onClick:x,trusted:!0,"data-testid":"page_tracker_upsell_link",children:(0,r.tx)("fullscreen.pages_panel.see_plans_that_offer_more")}),y=(0,i.jsx)(A.Us,{onClick:x,trusted:!0,"data-testid":"page_tracker_upsell_link",children:(0,r.tx)("fullscreen.pages_panel.get_unlimited_pages_and_more")}),v=s/G.LF[n.editorType??B._Y.DESIGN],b=C()({"page_tracker_upsell--progressPartial--guOiP":v<1,"page_tracker_upsell--progressCompleteWarning--06IlO page_tracker_upsell--progressComplete--ilmev":1===v,"page_tracker_upsell--progressCompleteDanger--lCunz page_tracker_upsell--progressComplete--ilmev":v>1}),j=`${Math.trunc(100*Math.min(v,1))}%`,k={fileTeamId:p?.id,numPages:s,...o};return(0,i.jsx)(R.fu,{name:"Page Tracker Upsell",properties:k,children:(0,i.jsx)("div",{className:"page_tracker_upsell--upsellContainer--ZEwXz",ref:u,"data-testid":"page_tracker_upsell",children:(0,i.jsxs)("div",{className:"page_tracker_upsell--upsellBody--yUAjd",children:[(0,i.jsx)("div",{className:"page_tracker_upsell--progressBar--fDCBY",children:(0,i.jsx)("div",{className:b,style:{width:j},"data-testid":"page_tracker_progress_bar"})}),(0,i.jsx)("p",{className:"page_tracker_upsell--upsellText--Ng-u0",children:(()=>{let e=G.LF[n.editorType??B._Y.DESIGN]-s;return e>=2?(0,i.jsxs)(i.Fragment,{children:[(0,r.tx)("fullscreen.pages_panel.n_free_pages_left",{numPagesRemaining:e}),(0,i.jsx)("br",{}),_]}):1===e?(0,i.jsxs)(i.Fragment,{children:[(0,r.tx)("fullscreen.pages_panel.n_free_pages_left",{numPagesRemaining:e}),(0,i.jsx)("br",{}),y]}):0===e?(0,i.jsxs)(i.Fragment,{children:[(0,r.tx)("fullscreen.pages_panel.all_n_free_pages_used",{maxFreePages:G.LF[n.editorType??B._Y.DESIGN]}),(0,i.jsx)("br",{}),y]}):(0,i.jsxs)(i.Fragment,{children:[(0,r.tx)("fullscreen.pages_panel.all_free_pages_used"),(0,i.jsx)("br",{}),y]})})()})]})})})}var H=n(569565),K=n(562921),W=n(843955),q=n(639853);function X({pages:e,initialHeight:t,extraControls:n,panelHeadersHeight:s,shouldHighlightActivePage:a,isComparingChanges:r,pageToNumChanges:l,isReadOnly:o,onPageContextMenu:c,filterState:u,onHeightChange:p}){let m=(0,E._Z)().isLoading,h=(0,d.useRef)(null);(0,W.a)({pagesList:e,scrollContainerRef:h});let f=(0,d.useRef)(null),[g,x]=(0,d.useState)(0),_=e.length,y=(0,T.o3)(T.nt.newResizablePanel),v=(0,T.o3)(T.nt.designPagePickerA11y),{height:b,setHeight:I,defaultHeight:N}=(0,K.k3)({initialHeight:t,numberOfPages:_,upsellHeight:g,panelHeadersHeight:s,showingExtraControls:!!n,scrollContainerInnerRef:f,filterState:u,onHeightChange:p});return(0,i.jsx)(j.V,{children:(0,i.jsx)(S.w,{size:b,defaultSize:N,onResize:e=>{I(e),w.Uc("")},side:"bottom",className:m?q.aY:q.l$,children:(0,i.jsxs)(k.P,{scrollBarAlways:!1,ref:h,scrollContainerRef:f,className:C()(q.jG,{[q.ge]:!y}),children:[(0,i.jsx)(H.bU,{pages:e,scrollContainer:h.current??void 0,shouldHighlightActivePage:a,isComparingChanges:r,pageToNumChanges:l,isReadOnly:o,onContextMenu:c,shouldUseButtonRows:v}),n,(0,i.jsx)(V,{onHeightChange:x})]})})})}function Y({height:e,onHeightChange:t,isOpen:n,onToggle:d,showHeader:c=!0,pages:u,extraControls:p,filterState:m,panelHeadersHeight:h=o.uF,shouldHighlightActivePage:f=!0,isComparingChanges:g=!1,pageToNumChanges:x,isReadOnly:_,onPageContextMenu:y,onCanvasSearch:b}){let C=(0,l.rE)(),j=u.some(e=>u[0]&&e.pageType!==u[0].pageType);return(0,i.jsx)(s.o,{eventListeners:["onClick"],children:(0,i.jsx)("div",{className:"pages_panel--pagesPanelContent--ZGkcM",children:(0,i.jsxs)(a.bL,{isOpen:n,toggle:d,children:[c&&(0,i.jsx)(v,{hasMultiplePageTypes:j,isComparingChanges:g,isPagesOpen:n,isReadOnly:_,onCanvasSearch:b,onClickNewPage:()=>C(null),onPageContextMenu:y,recordingKey:"pagesPanel",title:(0,r.t)("fullscreen.pages_panel.pages"),tooltipText:(0,r.t)("fullscreen.pages_panel.add_new_page")}),(0,i.jsx)(a.UC,{children:n&&(0,i.jsx)(X,{extraControls:p,filterState:m,initialHeight:e??void 0,isComparingChanges:g,isReadOnly:_,onHeightChange:t,onPageContextMenu:y,pageToNumChanges:x,pages:u,panelHeadersHeight:h,shouldHighlightActivePage:f})})]})})})}},453373:(e,t,n)=>{n.d(t,{g:()=>r});var i=n(104076),s=n(390579),a=n(736813);function r(e){return(0,i.jsx)("div",{className:"pages_panel_chevron--chevron--3E6os","data-show-on-hover":e.isExpanded||void 0,children:e.isExpanded?(0,i.jsx)(s.O,{}):(0,i.jsx)(a.k,{})})}},722887:(e,t,n)=>{n.d(t,{v:()=>z,G:()=>F});var i=n(104076),s=n(716976),a=n(237420),r=n(382629),l=n(684742),o=n(161623),d=n(108692),c=n(954068),u=n(76618),p=n(409104),m=n(266808),h=n(812714),f=n(795033),g=n(511570),x=n.n(g),_=n(641518),y=n(652539),v=n(192075),b=n(58212),C=n(819851),j=n(893178),k=n(106112),w=n(120074),E=n(331497),T=n(835307),S=n(349311),I=n(455431),N=n(221586),A=n(737139);function L({value:e,setValue:t,recordingKey:n,isDisabled:a,stopRenaming:r}){let l=(0,s.useRef)(null);(0,s.useEffect)(()=>{l.current?.select()},[]);let o=_.v_(n,"keydown",e=>{if(e.keyCode===N.Uz.ESCAPE)r(!1),e.stopPropagation();else if(e.keyCode===N.Uz.ENTER)e.preventDefault(),r(!0);else{if(e.keyCode!==N.Uz.TAB)return(0,j.jr)(e,j.W0.NO),_.aH;e.preventDefault(),r(!0)}}),d=_.AF(n,"change",e=>{a||t(e.currentTarget.value)}),c=_.iQ(n,"blur",()=>{r(!0)});return(0,i.jsx)(A.ks,{"aria-label":(0,v.t)("fullscreen.pages_panel.page_name"),autoCapitalize:"off",autoCorrect:"off",autoFocus:!0,className:"page_rename_input--input--s2o7Q",innerRef:l,onBlur:c,onChange:d,onKeyDown:o,spellCheck:!1,value:e})}var M=n(639853),O=n(255111),R=n(871428);function P({editorType:e}){switch(e){case m._YF.DESIGN:return(0,i.jsx)(o.N,{});case m._YF.WHITEBOARD:return(0,i.jsx)(y.B,{svg:R.A});case m._YF.SLIDES:return(0,i.jsx)(d.o,{});default:return null}}function D(e){let{isActive:t,isDivider:n,pageType:s,hasMultiplePageTypes:a}=e;return n||!a?null:(0,i.jsx)("div",{className:x()(M.n6,{[M.vu]:t}),children:(0,i.jsx)(P,{editorType:s})})}function F({pageType:e,hasMultiplePageTypes:t,nodeId:n,nodeName:l,isRenaming:o,startRenaming:d,stopRenaming:c,renamingPagePendingName:u,setRenamingPagePendingName:p,isActive:g,shouldShowGuids:E,onMouseDownCallback:N,onMouseUpCallback:A,onMouseMoveCallback:R,onClickCallback:P,reorderingPageGuids:F,selectedPageGuids:G,onContextMenuCallback:U,showMemoryUsage:V,showInFileMemoryPercentage:H,isOffline:K,isComparingChanges:W,pageToNumChanges:q,versionHistory:X,isDivider:Y,pagesList:Z,index:J,activePageShouldUseBrandColor:Q,shouldUseButtonRow:$}){let ee=(0,a.wA)(),et="whiteboard"===(0,C.lg)(),[en,ei]=s.useState(!1),es=(0,f.md)(I.l),ea=(0,T.Fk)((e,t,n)=>n?e.get(t)?.nodeMemoryUsage:null,n,H),er=(0,T.Fk)((e,t,n)=>n?e.get(t)?.rootMemoryUsage:null,n,H),el=s.useMemo(()=>(0,w.Fy)(Z,n)===m.xal.LOADED,[n,Z]),eo=m.h3O?.getSessionState()===m.kul.JOINED,ed=s.useMemo(()=>K&&!eo&&!el&&!!m.h3O?.isIncrementalSession(),[K,el,eo]),ec=_.Pt("pagesPanel","row",J)||"",eu=_.rf(ec,"contextmenu",e=>{e.preventDefault(),!ed&&U&&U({nodeId:n,e})}),ep=(0,s.useCallback)(()=>{ed||o||d(n)},[d,ed,o,n]),em=_.rf(ec,"dblclick",()=>{ep()}),eh=(0,s.useCallback)(e=>{if("Enter"!==e.key)return(0,j.jr)(e,j.W0.NO),_.aH;e.preventDefault(),ep()},[ep]),ef=_.rf(ec,"click",e=>{if(!Y&&!o){if(ed){ee(b.F.enqueue({type:"offline-page-switch",message:(0,v.t)("fullscreen.pages_panel.unavailable_offline")}));return}P(n,e)}}),eg=s.useCallback(e=>{ed||o||N(n,e)},[o,n,N,ed]),ex=s.useCallback(e=>{o||R(n,e)},[o,n,R]),e_=s.useCallback(e=>{o||A(n,e)},[o,n,A]),ey=s.useCallback(()=>(0,r.uy)(ea)||(0,r.uy)(er)?"":(0,k.pr)(ea,er,!0),[ea,er]),ev=W&&q?.get(n)||0,eb=X?.activeId&&"current_version"===X.activeId,eC=V&&H&&!o&&eb,ej=!W&&!o,ek=Y&&!g&&!o,ew=et&&!o&&g&&G?.length===0,eE=x()({[M.mB]:ek,[M.oG]:!ek,[M.sl]:g,[M.sR]:ew&&en&&es,[M.Pl]:Q,[M.Dq]:0===F.length&&0===G.length,[M.As]:$},0!==F.length||0!==G.length?G.includes(n)?M.wH:F.includes(n)?M.iB:0===F.length?M.Dq:"":""),eT=s.useRef(null),eS=s.useRef(!1),eI=s.useCallback(e=>{c(e),eS.current=!0},[c]);s.useLayoutEffect(()=>{!o&&eS.current&&eT.current&&(eT.current.focus(),eS.current=!1)},[o]);let eN=o&&(0,i.jsx)(L,{value:u||"",setValue:p,stopRenaming:eI,recordingKey:ec,isDisabled:ed}),eA=ed&&!ek&&(0,i.jsx)("div",{className:M.Nr,"data-tooltip-type":S.Ib.TEXT,"data-tooltip":(0,v.t)("fullscreen.pages_panel.unavailable_offline"),"data-onboarding-key":"page-unavailable-offline",children:(0,i.jsx)(y.B,{className:M.VQ,svg:O.A,"data-tooltip-type":S.Ib.TEXT,"data-tooltip":(0,v.t)("fullscreen.pages_panel.unavailable_offline"),"data-onboarding-key":"page-unavailable-offline"})}),eL=(0,h.kc)().version_diffing&&W&&ev>0&&(0,i.jsx)("div",{className:M.Sp,children:ev}),eM=ew&&!t,eO=eM?(0,i.jsx)(B,{accessibleLabel:$?(0,v.t)("fullscreen.pages_panel.page_row.more_actions",{pageName:l}):void 0,onContextMenuCallback:U,nodeId:n,isMoreActionsActive:en,setIsMoreActionsActive:ei,isPageContextMenuOpen:es,shouldAbsolutePositionButton:$}):null,eR=(0,i.jsxs)(i.Fragment,{children:[!$&&eN,ek?(0,i.jsx)("span",{className:M.jE,"data-testid":"pageDivider"}):!o&&(0,i.jsx)("div",{className:eM?M.R:M.Nz,children:(0,i.jsx)("span",{className:ed?M.YW:M.KE,children:E?`${l} (${n})`:l})}),(0,i.jsxs)("div",{className:M.q8,children:[ej&&(0,i.jsx)(z,{pageGuid:n,fallback:(0,i.jsx)(D,{isActive:g,isDivider:Y,pageType:e,hasMultiplePageTypes:t}),hideBackground:!0}),eA,eC&&(0,i.jsx)("span",{className:ed?M.hi:M.VC,dir:"auto",children:ey()}),eL,!$&&eO]})]});return $?o?(0,i.jsxs)("div",{className:eE,draggable:!1,onContextMenu:eu,children:[eN,(0,i.jsxs)("div",{className:M.q8,children:[eA,eL]})]}):(0,i.jsxs)("div",{className:"pages_panel_row--pageRowContainer--oVnTb",children:[(0,i.jsx)("button",{ref:eT,"aria-current":g?"page":void 0,"aria-label":ek?(0,v.t)("fullscreen.pages_panel.page_divider"):void 0,className:eE,draggable:!1,onClick:ef,onContextMenu:eu,onDoubleClick:em,onKeyDown:eh,onMouseDown:eg,onMouseMove:ex,onMouseUp:e_,type:"button",children:eR}),eO]}):(0,i.jsx)("div",{className:eE,draggable:!1,onClick:ef,onContextMenu:eu,onDoubleClick:em,onMouseDown:eg,onMouseMove:ex,onMouseUp:e_,children:eR})}function z({pageGuid:e,margin:t,fallback:n=null,hideBackground:s=!1}){let a=(0,E.ut)(m.Ez5?.currentSceneState().numReadyNodesByPage,null),r=(0,E.ut)(m.Ez5?.currentSceneState().numCompletedNodesByPage,null),l=a?.has(e)?a.get(e)>0:!!m.glU?.nodeStatusesOnPage(e).includes(m.zIx.BUILD),o=r?.has(e)?r.get(e)>0:!!m.glU?.nodeStatusesOnPage(e).includes(m.zIx.COMPLETED);return o&&!l?(0,i.jsx)(c.g,{"aria-label":(0,v.t)("dev_handoff.status.completed"),className:"pages_panel_row--pageCompleted--gzdWd","data-tooltip-type":S.Ib.TEXT,"data-tooltip":(0,v.t)("dev_handoff.status.completed"),"data-testid":"pageCompletedIndicator"}):l||o?(0,i.jsx)(u.O,{"aria-label":(0,v.t)("dev_handoff.tag.ready_to_build"),className:x()("pages_panel_row--pageReady--XaDiG",{"pages_panel_row--hideBackground--22Ike":s}),style:t?{[t]:"8px"}:void 0,"data-tooltip-type":S.Ib.TEXT,"data-tooltip":(0,v.t)("dev_handoff.tag.ready_to_build"),"data-testid":"pageReadyIndicator"}):n}function B({accessibleLabel:e,onContextMenuCallback:t,nodeId:n,isMoreActionsActive:a,isPageContextMenuOpen:r,setIsMoreActionsActive:o,shouldAbsolutePositionButton:d}){let c=s.useRef(null);return s.useEffect(()=>{r||o(!1)},[r,o]),(0,i.jsx)(l.E,{ref:c,"aria-label":e,htmlAttributes:d?void 0:{onDoubleClick:e=>e.stopPropagation()},onClick:e=>{o(!0);let i=c.current?.getBoundingClientRect();i&&t({nodeId:n,e,clientX:i.x+-4,clientY:i.y+i.height+10})},className:x()("pages_panel_row--pageMoreActionsButton--5Rty9",{"pages_panel_row--pageMoreActionsButtonActive--2dmC-":a&&r,"pages_panel_row--pageMoreActionsAbsolutePosition--S-xcp":d}),"data-tooltip-type":S.Ib.TEXT,"data-tooltip":(0,v.t)("fullscreen.pages_panel.more_pages_actions"),"data-tooltip-show-above":!0,children:(0,i.jsx)(p.A,{className:"pages_panel_row--pageMoreActionsIcon--kzZVn"})})}},342053:(e,t,n)=>{n.d(t,{y:()=>r});var i=n(104076),s=n(511570),a=n.n(s);function r({children:e,withBorder:t,autoHeight:n=!1}){return(0,i.jsx)("div",{className:a()("tabs_header--tabsHeader--8rHi8",{"tabs_header--autoHeight--eXDMV":n,"tabs_header--withBorder--jZYSF":t}),children:e})}},582730:(e,t,n)=>{n.d(t,{o:()=>I});var i=n(104076),s=n(237420),a=n(680909),r=n(684742),l=n(420680),o=n(956814),d=n(864200),c=n(38660),u=n(266808),p=n(795033);n(120440);var m=n(434511),h=n(641518),f=n(192075),g=n(330378),x=n(489175),_=n(736216),y=n(211862),v=n(349311),b=n(564941),C=n(156816),j=n(217961),k=n(156928),w=n(558720),E=n(141330),T=n(390452),S=n(578420);let I=(0,m.j)(function({isLayersOpen:e,onToggleLayers:t,recordingKey:n,...s}){let l=(0,y.q5)(),d=l?.thumbnailGuid||null;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(a.bL,{isOpen:e,toggle:t,height:"fill",children:[(0,i.jsxs)(a.Y9,{variant:"leftPanel",size:"lg","data-onboarding-key":C.BZ,children:[(0,i.jsx)(a.JU,{recordingKey:h.Pt(n,"layersCollapsedRow"),htmlAttributes:{onContextMenu:x.jo},children:(0,f.tx)("fullscreen.pages_panel.layers_tab")}),e&&(0,i.jsx)(a.X0,{children:(0,i.jsx)(N,{recordingKey:h.Pt(n,"layersOptionMenu")})})]}),(0,i.jsx)(a.UC,{children:(0,i.jsx)(k.X,{...s,thumbnailGuid:d})})]}),s.reserveBottomHeight&&s.showAllLayers&&(0,i.jsx)("div",{className:"x78zum5 xl56j7k x10l6tqk x1ey2m1c xu96u03 x3m8u43 xsdox4t x1yjdb4r xoegz02",children:(0,i.jsxs)(r.E,{onClick:s.showAllLayers,className:"x1hlb6i2 x1db2dqx x78zum5 x6s0dn4 x1rjybxy x19y5rnk xxk0z11 xh8yej3 xrlp15q x1nmd3yn xm735u9 xkbmbem x3wk4up x10e2c7l xv2f06h x1n0bwc9 x1c5oinq",children:[(0,i.jsx)(o.f,{}),(0,f.tx)("sites.layer_view.show_all_layers")]})})]})},"Ui3ObjectsPanel",{onlyDirectChildRenders:!1});function N(e){let t=(0,s.d4)(e=>e.mirror.appModel.keyboardShortcuts),n=(0,p.md)(j.X),a="collapse-layers",r=()=>{u.glU?.triggerActionEnumInUserEditScope(u.rcl.COLLAPSE_LAYERS,{})};if((0,_.A0)(u.uQ6.LAYERS_PANEL_OVERFLOW_MENU)){let n=[{displayText:(0,g.A)(a),callback:r,sideText:(0,b.c1)(t,a),rightJustifySideText:!0,icon:(0,i.jsx)(d.X,{"data-testid":"collapse-layers-button"}),recordingKey:a},{displayText:(0,g.A)("auto-rename-layers"),callback:()=>{(0,_.Br)({source:u.uQ6.LAYERS_PANEL_OVERFLOW_MENU,trackingDataSource:"layers_panel_overflow_menu"})},icon:(0,i.jsx)(c.d,{}),rightIcon:(0,i.jsx)(S.yi,{variant:T.x.ON_MENU,helpUrlVariant:E.JT.AUTO_RENAME_LAYERS}),recordingKey:"auto-rename-layers"}];return(0,i.jsx)(w.U,{dropdownItems:n,lean:"left",recordingKey:e.recordingKey})}return n?(0,i.jsx)(l.K,{"aria-label":(0,g.A)(a),"data-testid":"collapse-layers-button",onClick:r,recordingKey:h.Pt(e.recordingKey,a),htmlAttributes:{"data-tooltip-type":v.Ib.TEXT,"data-tooltip":(0,g.A)(a)},children:(0,i.jsx)(d.X,{})}):(0,i.jsx)(i.Fragment,{})}},234312:(e,t,n)=>{n.d(t,{ay:()=>_,FV:()=>b,eG:()=>k,BN:()=>w});var i=n(104076),s=n(716976),a=n(322530),r=n(266808),l=n(812714),o=n(641518),d=n(246144),c=n(192075),u=n(819851),p=n(657878),m=n(490499),h=n(85598),f=n(337726),g=n(167151),x=n(314416);let _=r.xae.ASSETS.toString(),y=r.xae.CHAT.toString(),v=r.xae.CODE.toString(),b=r.xae.LAYERS.toString(),C=r.xae.DESIGN_SYSTEM.toString(),j=r.xae.VARIABLES.toString();function k({tabManager:e,tabPropsMap:t}){let n=(0,h.HY)();return(0,i.jsx)("div",{className:"ui3_tabs--tabStrip--zypFK",onContextMenu:e=>{e.preventDefault(),e.stopPropagation()},children:(0,i.jsxs)(a.t.TabStrip,{manager:e,children:[(0,i.jsx)(a.t.Tab,{...t[b],htmlAttributes:{"data-testid":f.pk},children:(0,c.tx)("fullscreen.pages_panel.file_tab")}),(0,i.jsx)(a.t.Tab,{...t[v],children:(0,c.tx)("fullscreen.pages_panel.code_tab")}),!n&&(0,i.jsx)(a.t.Tab,{...t[_],onboardingKey:f.Qr,children:(0,c.tx)("fullscreen.pages_panel.assets_tab")})]})})}function w(e,t){let n=(0,p._6)(),i=(0,h.HY)(),{showPublish:c,showLayersPanel:f,showCodePanel:k,showChat:w}=(0,x.U)(),E=(0,g.Vj)(n),T=(0,u.ow)(),S=(0,u.Em)(),I=(0,l.kc)().ai_assistant||!1,N=(0,l.kc)().ds_home||!1,A=(0,m.o3)(m.nt.designNavBarView),L=s.useCallback(e=>{let t=parseInt(e);switch(t){case r.xae.LAYERS:f();break;case r.xae.CODE:k();break;case r.xae.ASSETS:c();break;case r.xae.CHAT:w();break;case r.xae.DESIGN_SYSTEM:case r.xae.VARIABLES:f(),(0,d.x1)("UI3Tabs","NavBar-only tab showing in non-NavBar experience",{reportAsSentryError:!0,tab:t});break;default:(t=>{throw Error("Unhandled tab behavior: "+e)})(0)}},[f,k,c,w]);return a.t.useManagedTabs({[b]:!0,[v]:E,[_]:!T,[y]:S&&I&&!1,[C]:i&&N,[j]:i&&A},e.toString(),L,{recordingKey:o.Pt(t,"tabs")})}},236099:(e,t,n)=>{n.d(t,{I:()=>p});var i=n(104076),s=n(266808),a=n(140490),r=n(819851),l=n(48469),o=n(539607),d=n(288054),c=n(342053),u=n(234312);function p(e){return(0,i.jsx)(a.u,{label:"Ui3TabsRow",children:(0,i.jsx)(m,{...e})})}function m({activeTab:e,onCanvasSearch:t,recordingKey:n,...a}){let p=(0,r.Em)(),m=(0,r.cJ)(),h=e===s.xae.LAYERS,f=(p||m)&&(e===s.xae.ASSETS||h);return(0,i.jsxs)(c.y,{withBorder:!0,children:[(0,i.jsx)(u.eG,{...a}),(0,i.jsxs)("div",{className:"ui3_tabs_row--iconContainer--a0sRl",children:[h&&(0,i.jsx)(l._,{onClick:t}),f&&(0,i.jsx)(o.b,{recordingKey:n,entrypoint:e===s.xae.ASSETS?d.r6.ASSETS_PANEL_BUTTON:d.r6.LAYERS_TAB_BUTTON,hideIfNoUpdates:e===s.xae.LAYERS})]})]})}},502047:(e,t,n)=>{n.d(t,{K:()=>c,g:()=>u});var i=n(716976),s=n(237420),a=n(795033),r=n(147046),l=n(278491),o=n(844182),d=n(602443);function c(){let e=(0,s.wA)();return(0,i.useCallback)(({nodeId:t,clientX:n,clientY:i})=>{e((0,r.j7)({type:l.SA,data:{clientX:n,clientY:i,pageId:t}}))},[e])}function u({pagesList:e,shouldShowDuplicateOption:t=!0}){let n=(0,s.wA)(),[c,u]=(0,a.fp)(d.cE);return(0,i.useCallback)(({nodeId:i,clientX:s,clientY:a})=>{let d=new Set(e.map(e=>e.nodeId)),p=c.filter(e=>d.has(e));p.length>0&&!p.includes(i)&&d.has(i)&&(p.push(i),u(p));let m=(()=>{if(p.length>0){let t=(0,o.Pe)(e);return[...p].sort((e,n)=>t[e]-t[n])}return[i]})();0!==m.length&&n((0,r.j7)({type:l.d2,data:{clientX:s,clientY:a,pageIds:m,shouldShowDuplicateOption:t}}))},[c,n,e,u,t])}},843955:(e,t,n)=>{n.d(t,{a:()=>u});var i=n(716976),s=n(795033),a=n(983500),r=n(409019),l=n(643077),o=n(602443),d=n(404343);let c=(0,a.hG)(d.xM9);function u({pagesList:e,scrollContainerRef:t}){let n=(0,l.dh)(),a=(0,s.md)(o.l7),d=(0,r.F)(e),c=(0,r.F)(!!a);(0,i.useLayoutEffect)(()=>{c.current||p({pageId:n,pagesList:d.current,scrollContainerRef:t})},[n,t,d,c]),(0,i.useLayoutEffect)(()=>{a&&p({pageId:a,pagesList:d.current,scrollContainerRef:t})},[a,t,d])}function p({pageId:e,pagesList:t,scrollContainerRef:n}){let i=n.current;if(!i)return;let s=t.findIndex(t=>t.nodeId===e);if(-1===s)return;let a=s*c,r=a+c,l=i.getScrollTop(),o=l+i.getTrackHeight();a<l?i.scrollTo(a-c/2):r>o&&i.scrollTo(l+(r-o)+c/2)}},757218:(e,t,n)=>{n.d(t,{c:()=>g});var i=n(716976),s=n(237420),a=n(266808),r=n(980852),l=n(795033),o=n(166887),d=n(967782),c=n(661711),u=n(643077),p=n(120074),m=n(211862),h=n(733106),f=n(602443);function g(e){let t=(0,u.dh)(),[n,g]=(0,l.fp)(f.l7),[x,_]=(0,l.fp)(f.oZ),y=(0,m.q5)(),v=(0,s.wA)(),b=(0,u.rE)(),C=(0,s.d4)(e=>e.versionHistory),j=(0,o.am)(),k=(0,h.W)(),w=(0,i.useCallback)(e=>{g(e),a.glU?.triggerActionInUserEditScope("track-page-rename",{args:{nodeId:e}})},[g]),E=(0,i.useCallback)(()=>g(null),[g]),T=(0,i.useCallback)(async()=>{if(!n)return;let i=(0,r.getActiveTSSceneGraph)().get(n),s=i?.name,l=x||"",o=await (0,u.zO)({openFile:y,pageNode:i,pageName:l});if((0,u.CQ)({openFile:y,pageId:n,newName:l,oldName:s,trackRenamePage:()=>j("page_commit_rename",{nodeId:t,isDivider:o},{forwardToDatadog:!0})}),o&&t===n){let n=e.findIndex(e=>e.nodeId===t),i=n+1,s=e[i];for(;s&&s.isDivider;)i+=1,s=e[i];if(s)(0,c.J)(()=>(0,u.$P)(s.nodeId,t,C,v,(0,p.Fy)(e,s.nodeId)===a.xal.LOADED,j));else{let i=n-1,s=e[i];for(;s&&s.isDivider;)i-=1,s=e[i];s?(0,c.J)(()=>(0,u.$P)(s.nodeId,t,C,v,(0,p.Fy)(e,s.nodeId)===a.xal.LOADED,j)):b(null)}}g(e=>e===n?null:e),k({newTitle:l,nodeType:"PAGE"}),s!==l&&(0,h.d)(l).length>0&&(0,d.YQ)({id:"page_name_changed_with_rfd_indicator",properties:{pageId:n}})},[e,b,n,g,x,y,t,C,j,v,k]);return{renamingPageId:n,startRenaming:w,cancelRenaming:E,commitRenaming:T,pendingPageName:x,setPendingPageName:_}}},481836:(e,t,n)=>{n.d(t,{d:()=>l});var i=n(716976),s=n(237420),a=n(359166),r=n(211862);function l({defaultIsOpen:e}){let[t,n]=function(e){let t=(0,r.tS)(),[n,l]=(0,i.useState)(()=>t?o(t)??e:e);return(0,i.useLayoutEffect)(()=>{if(!t)return;let e=o(t);e&&l(e)},[t]),[n,(0,i.useCallback)(e=>{l(n=>{let i="function"==typeof e?e(n):e;return t&&function(e,t){let n=(0,a.TQ)();if(n){let i=JSON.parse(n.getItem("pages-panel")||"{}");if((0,s.bN)(i[e],t))return;i[e]=t,n.setItem("pages-panel",JSON.stringify(i))}}(t,i),i})},[t])]}({height:null,isOpen:e,devHandoffShowAllPages:!1}),l=(0,i.useCallback)(e=>{n(t=>({...t,isOpen:e}))},[n]),d=(0,i.useCallback)(e=>{n(t=>({...t,height:e}))},[n]),c=(0,i.useCallback)(e=>{n(t=>({...t,devHandoffShowAllPages:e}))},[n]);return{height:t.height,setHeight:d,isOpen:t.isOpen,setIsOpen:l,devHandoffShowAllPages:t.devHandoffShowAllPages,setDevHandoffShowAllPages:c}}function o(e){let t=(0,a.TQ)();if(t)return JSON.parse(t.getItem("pages-panel")||"{}")[e]}},864021:(e,t,n)=>{n.d(t,{KR:()=>m,mp:()=>f,u1:()=>p,xm:()=>u});var i=n(716976),s=n(266808),a=n(812714),r=n(77185),l=n(192075),o=n(553065),d=n(739710);class c{constructor(e){this.defaultValue=e,this.defaultValue=e}parse(e,t){if(""===(e=e.trim().toLowerCase())||"%"===e||"px"===e)return this.defaultValue;if(["hug","fit-content"].some(t=>t.startsWith(e)||e.startsWith(t))&&(0,a.kc)().ce_tv_grid_hug)return{type:s.sAE.HUG,value:1};if(["auto","flex","fill"].some(t=>t.startsWith(e)||e.startsWith(t)))return{type:s.sAE.FLEX,value:1};let n=e.endsWith("fr");e=e.replace(/px|fr/g,"");let i=(0,r.O4)(e,NaN);return i.error?t||this.defaultValue:n?(0,a.kc)().ce_tv_grid_ga&&i.value>50?{type:s.sAE.FIXED,value:i.value}:{type:s.sAE.FLEX,value:(0,a.kc)().ce_tv_grid_ga?Math.min(50,i.value):1}:{type:s.sAE.FIXED,value:i.value}}defaultSelection(e){let t=/[0-9\.]+/.exec(e);return null!=t?{start:t.index,end:t.index+t[0].length}:{start:0,end:e.length}}format(e){if(!e)return"";if((0,o.gl)(e))return(0,l.t)("fullscreen.mixed");if(e.type===s.sAE.HUG)return(0,l.t)("fullscreen.properties_panel.constraints_resizing_panel.hug");let t=parseFloat(e.value.toFixed(2));return e.type===s.sAE.FLEX?(0,a.kc)().ce_tv_grid_hug?`${t}fr`:(0,l.t)("fullscreen.auto"):(0,d.lg)(t)}}let u=new c({type:s.sAE.FIXED,value:100}),p=new c({type:s.sAE.FLEX,value:1}),m=new class extends c{format(e){if(!e)return"";if((0,o.gl)(e))return(0,l.t)("fullscreen.mixed");let t=parseFloat(e.value.toFixed(2));return e.type===s.sAE.FLEX?(0,a.kc)().ce_tv_grid_hug?`${t}fr`:(0,l.t)("fullscreen.auto"):(0,d.lg)(t)}}({type:s.sAE.FLEX,value:1}),h=[s.sAE.FLEX,s.sAE.HUG,s.sAE.FIXED];function f(e){return i.useMemo(()=>e?h.filter(e=>e!==s.sAE.FIXED):h,[e])}},434923:(e,t,n)=>{n.d(t,{Q:()=>D});var i=n(104076),s=n(716976),a=n(140458),r=n(266808),l=n(170627),o=n(511570),d=n.n(o),c=n(190028),u=n(641518),p=n(836982),m=n(555013),h=n(957581),f=n(236631),g=n(352630),x=n(192075),_=n(977745),y=n(260745),v=n(111297),b=n(810244),C=n(912610),j=n(402276),k=n(525972),w=n(792028),E=n(176203),T=n(437761),S=n(349311),I=n(959509),N=n(423683),A=n(372677),L=n(501883),M=n(737139),O=n(26950),R=n(691417);let P=class e extends s.PureComponent{constructor(){super(...arguments),this.onRemoveRelaunchData=e=>{l.l7.user("remove-plugin-relaunch-data",()=>r.NfO.removeRelaunchDataFromSelection(e))},this.onRelaunch=async e=>{let t=this.props.openFileKey;if(!t)return;if(!(0,I.Fr)()){k.R.instance.handleUpgrade(y.Q7.RUN_PLUGIN);return}let{canRun:n}=(0,C.JT)({plugin:e.plugin,editorType:this.props.editorType??E.nT.Design});if(n)return await k.R.instance.enqueue({mode:"run-forever",runPluginArgs:{plugin:e.plugin,openFileKey:t,command:e.relaunchButton.command,queryMode:!1,runMode:"default",triggeredFrom:this.props.editorType===E.nT.DevHandoff?"handoff-relaunch":"relaunch",ignoreForRunLastPlugin:!0,isWidget:!1}})},this.fetchPlugin=e=>{this.props.dispatch(_.af({id:e,resourceType:w.bD.PLUGIN}))},this.renderRelaunchRows=e=>{let t="";return e.map(e=>{let n=e.plugin.plugin_id,s=`${e.pluginTypeAndID}-${e.relaunchButton.command}`,a=(0,i.jsx)(F,{relaunchData:e,recordingKey:u.Pt(this.props,"relaunch",s),onRelaunch:this.onRelaunch,onRemoveRelaunchData:this.onRemoveRelaunchData,firstButtonForPlugin:n!==t,collapsibleStyling:this.props.isDevHandoff&&this.props.collapsible},s);return t=n,a})}}render(){let t=(0,C.vA)(this.props.pluginRelaunchData,this.props.publishedPlugins,this.props.localPlugins,this.props.currentOrgId,this.props.numSelected,(t,n)=>e.refreshCache.debounceRefresh(t,this.fetchPlugin.bind(this),n),T.FW.FIGMA);if(0===t.length)return null;let n=this.props.title??(0,x.t)("properties_panel.plugin.title");return this.props.isDevHandoff?(0,i.jsx)(p.k,{name:"inspection_panel",children:(0,i.jsx)(A.VZ,{title:n,collapsiblePanelKey:this.props.collapsible?"plugin-relaunch":void 0,recordingKey:"plugin",children:this.renderRelaunchRows(t)})}):(0,i.jsx)(p.k,{name:"plugin_panel",children:(0,i.jsxs)(M.Zk,{children:[(0,i.jsx)(M.fI,{children:(0,i.jsx)(L.xw,{children:n})}),this.renderRelaunchRows(t)]})})}};P.displayName="PluginPanel",P.refreshCache=new j.O(c.A.duration(1,"day"));let D=P;class F extends u.o6{constructor(){super(...arguments),this.onRelaunch=u.cZ(this,"click",()=>{this.props.onRelaunch(this.props.relaunchData)})}render(){return(0,i.jsx)(z,{...{...this.props,onRelaunch:this.onRelaunch,recordingKey:u.Pt(this.props,"removeButton")}})}}function z(e){let{plugin:t,relaunchButton:n}=e.relaunchData,s=(0,T.ZQ)(t)?(0,i.jsx)("div",{className:"plugin_panel--pluginIconLocal--44TyG",children:(0,i.jsx)(h.t,{svg:O.A,fallbackSvg:R.A})}):(0,i.jsx)("div",{className:"plugin_panel--pluginIcon--TvCDA plugin--pluginIconBase--yAG5F",children:(0,i.jsx)(N.V,{plugin:t})});return(0,i.jsxs)(v.fu,{name:"PluginRelaunchRow",properties:{pluginId:t.plugin_id},trackingTargets:b.K.RCS,children:[(0,i.jsx)(M.fI,{className:e.collapsibleStyling?"plugin_panel--rowButtonCollapsible--Vfrhx button_row--rowButton--s-r8y raw_components--singleRow--W5dYN raw_components--_singleRow--yTGIY raw_components--singleRowHeight--dKM4t raw_components--_row--rHucX raw_components--row--NThzm button_row--_rowButton--EdZXq":"plugin_panel--rowButton--PxW5t button_row--rowButton--s-r8y raw_components--singleRow--W5dYN raw_components--_singleRow--yTGIY raw_components--singleRowHeight--dKM4t raw_components--_row--rHucX raw_components--row--NThzm button_row--_rowButton--EdZXq",children:(0,i.jsxs)("div",{className:"plugin_panel--relaunchContainer--leq1l",children:[(0,i.jsx)(m.Yo,{className:"plugin_panel--relaunchButton--sEH4s",onClick:()=>e.onRelaunch(e.relaunchData),"data-tooltip-type":S.Ib.TEXT,"data-tooltip":t.name,children:(0,i.jsxs)("div",{className:f.s.flex.itemsCenter.$,children:[(0,i.jsx)("div",{className:"plugin_panel--pluginIconContainer--o3Wvm",children:s}),(0,i.jsx)("div",{className:"plugin_panel--relaunchButtonName--Ol-Gy",children:(0,i.jsx)("div",{className:f.s.ellipsis.overflowHidden.noWrap.fontMedium.$,children:n.name})})]})}),(0,i.jsx)("div",{className:"plugin_panel--iconContainer--KltJf",children:(0,i.jsx)(g.Me,{recordingKey:e.recordingKey,trackingProperties:{action:"minus"},"aria-label":(0,x.t)("properties_panel.plugin.remove_tooltip"),onClick:()=>e.onRemoveRelaunchData(e.relaunchData.plugin.plugin_id),htmlAttributes:{"data-tooltip-type":S.Ib.TEXT,"data-tooltip":(0,x.t)("properties_panel.plugin.remove_tooltip")},children:(0,i.jsx)(a.r,{})})})]})}),!!n.description&&(0,i.jsx)("div",{className:d()("plugin_panel--relaunchDescription--TmxcU",e.collapsibleStyling&&"plugin_panel--relaunchDescriptionPadded--G2-Tl"),children:(0,i.jsx)("pre",{className:"plugin_panel--relaunchDescriptionText--8x1PM ellipsis--ellipsisAfter3Lines--h405C ellipsis--_ellipsisAfterNLines--LzI7k",children:n.description===T.Q7?(0,x.tx)("properties_panel.plugin.mixed_descriptions"):n.description})})]})}F.displayName="PluginRelaunchRow"},645626:(e,t,n)=>{n.d(t,{A:()=>G});var i=n(104076),s=n(716976),a=n(237420),r=n(276800),l=n(420680),o=n(240803),d=n(300558),c=n(546258);let u=(0,s.memo)(function(e){return(0,i.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,"data-fpl-icon-size":"24",children:(0,i.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",fillRule:"evenodd",d:"M16.5 7h-9a.5.5 0 0 0-.5.5V8h10v-.5a.5.5 0 0 0-.5-.5m.5 2H7v7.5a.5.5 0 0 0 .5.5h9a.5.5 0 0 0 .5-.5zM7.5 6A1.5 1.5 0 0 0 6 7.5v9A1.5 1.5 0 0 0 7.5 18h9a1.5 1.5 0 0 0 1.5-1.5v-9A1.5 1.5 0 0 0 16.5 6zm7 7a1 1 0 0 0-.486-.857l-2.5-1.5A1 1 0 0 0 10 11.5v3a1 1 0 0 0 1.515.857l2.5-1.5A1 1 0 0 0 14.5 13m-1.972-.583L13.5 13l-.972.583L12 13.9l-1 .6v-3l1 .6z",clipRule:"evenodd"})})});var p=n(266808),m=n(170627),h=n(795033),f=n(511570),g=n.n(f),x=n(641518),_=n(246144),y=n(836982),v=n(619511),b=n(192075),C=n(50536),j=n(784654),k=n(819851),w=n(687849),E=n(354114),T=n(553065),S=n(754446),I=n(74620),N=n(211862),A=n(205088),L=n(144386),M=n(349311),O=n(372677),R=n(589481),P=n(137007),D=n(843893),F=n(737139);function z({children:e,...t}){return(0,i.jsx)(v.k,{isVisible:!0,children:(0,i.jsx)(l.K,{...t,children:e})})}function B({selected:e,hasFocus:t,flowItemsCount:n,item:s,index:a,hasFile:r,fileKey:l,fileProtoUrl:m,isDragging:h,viewOnly:f,dispatch:_,onMouseDown:y,onMouseMove:v,onMouseUp:k,renamingStartingPointNodeId:w,setRenamingStartingPointNodeId:E,submitRename:T,selectFlowRowAndSetToEditName:S,recordingKey:I}){return(0,i.jsxs)(R.e6,{className:"prototype_flows_panel--flowRow--pqvyi","data-testid":"prototype-flow-panel-row",dragging:h,onDoubleClick:()=>{var e;return e=s.nodeID,void(f||w===e||(E(e),p.X3B?.centerViewportOnNodeIfNecessary(e)))},onMouseDown:y,onMouseMove:v,onMouseUp:k,recordingKey:x.Pt(I,"draggableRow"),selected:e&&t,singletonRow:n<=1,children:[!f&&w&&w===s.nodeID?(0,i.jsx)(D.mZ,{defaultValue:s.prototypeStartingPoint.name||"",submitRename:e=>T(s.nodeID,e),recordingKey:x.Pt(I,"startingPointNameInput"),shouldListenForTabKeyboardEvent:n>1,onTabKeyboardEvent:e=>S(e?a-1:a+1),className:"prototype_flows_panel--startingPointNameInput--fH7vx prototype_starting_point_panel--startingPointNameInput--uR8GY raw_components--textAreaInput--mi1Ag raw_components--base--T7G0z raw_components--input--JB4Ix raw_components--singleRowHeight--dKM4t"}):(0,i.jsx)(F.JU,{className:"prototype_flows_panel--flowName--kg1JF",children:s.prototypeStartingPoint.name}),w!==s.nodeID&&(0,i.jsx)("div",{className:g()("prototype_flows_panel--panelInfoContainer--pVsR6","prototype_flows_panel--fadeOutOnTitleUnhover--G4xPQ"),children:(0,i.jsxs)(o.o,{display:"contents",eventListeners:["onMouseDown"],children:[(0,i.jsx)(z,{onClick:()=>{var e;return e=s.nodeID,void p.glU.selectInstances(e,!p.X3B?.isNodeVisibleInViewport(e))},"aria-label":(0,b.t)("proto.flows_panel.select_frame"),htmlAttributes:{"data-tooltip-type":M.Ib.TEXT,"data-tooltip":(0,b.t)("proto.flows_panel.select_frame")},children:(0,i.jsx)(d.A,{})}),(0,i.jsx)(z,{disabled:!r,onClick:()=>(function(e){let t=p.X3B?.currentDeviceType(),n=(0,L.vp)({scalingInfo:{viewportScalingMode:(0,A.qb)(t||p.bq3.NONE),contentScalingMode:(0,A.Rv)(t||p.bq3.NONE)},nodeId:void 0,startingPointNodeId:e,showHotspots:void 0});_(C.lW({stringToCopy:`${m}${n}`}))})(s.nodeID),"aria-label":(0,b.t)("proto.flows_panel.copy_link"),htmlAttributes:{"data-tooltip-type":M.Ib.TEXT,"data-tooltip":(0,b.t)("proto.flows_panel.copy_link")},children:(0,i.jsx)(c.W,{})}),(0,i.jsx)(z,{disabled:!l,onClick:function(){_((0,j.K)({fileKey:l,startingPointNodeId:s.nodeID,shouldOpenAtStartingPoint:!0,source:"properties_panel"}))},"aria-label":(0,b.t)("proto.flows_panel.preview"),htmlAttributes:{"data-tooltip-type":M.Ib.TEXT,"data-tooltip":(0,b.t)("proto.flows_panel.preview")},children:(0,i.jsx)(u,{})})]})})]},s.nodeID)}let G=function(e){let t=(0,S.kl)("prototypeStartingPointsInfo"),n=(0,a.d4)(N.sS)||"",l=(0,N.q5)(),o=(0,N.Cq)({useSinatraType:!0}),d=(0,a.d4)(e=>e.mirror.appModel.currentSelectedProperty),c=(0,I.eY)(),u=(0,k.m0)(),[f,g]=s.useState(null),v=(0,a.wA)(),C=u||e.viewOnly,j=(0,a.d4)(e=>e.mirror.appModel.prototypeCanvasUiVisible&&C),A=(0,T._W)(t,[]),{collapsedInspectionPanelAtom:L,collapseEnabled:M}=(0,O.QZ)("prototype_flows"),[R,D]=(0,h.fp)(L),z=s.useCallback(()=>{D(!R)},[D,R]);if(s.useEffect(()=>{o||(0,_.x1)("prototyping","No file available in flows panel",{fileKey:n})},[o,n]),!t||u&&0===(A=A.filter(e=>c.get(e.nodeID)?.visible)).length)return null;function G(e){let t=e;e>=A.length?t=0:e<0&&(t=A.length-1),E.Y5.updateAppModel({currentSelectedProperty:{type:p.rrT.PROTOTOTYPE_STARTING_POINT,indices:[t]}}),g(A[t].nodeID)}function U(e,t){g(null),t&&m.l7.user("update-prototype-starting-point-name",()=>{p.glU.updatePrototypeStartingPointName(e,t)})}let V=u&&M&&R;return(0,i.jsx)(y.k,{name:"prototype_flows_panel",children:(0,i.jsx)(F.Zk,{className:R?"noBottomPadding":void 0,children:(0,i.jsx)(P.TA,{addProperty:r.lQ,boldHeaderRow:V,currentSelectedProperty:d,dispatch:v,hideAddButton:!0,isPanelBodyCollapsedAtom:M?L:void 0,onChange:e=>{if(0===e.length||0===d.indices.length)return;let t=A.filter((e,t)=>d.indices.includes(t)).map(e=>e.nodeID);if(0===t.length)return;let n=A[d.indices[0]].nodeID,i=e[0].nodeID===n?"":e[e.findIndex(e=>e.nodeID===n)-1].nodeID,s=A[d.indices[d.indices.length-1]].nodeID,a=e[e.length-1].nodeID===s?"":e[e.findIndex(e=>e.nodeID===s)+1].nodeID;m.l7.user("change-starting-points",()=>{p.glU.insertPrototypeStartingPointsBetween(t,i,a)})},onDeleteProperty:C?()=>{}:e=>{let t=A.filter((t,n)=>e.has(n)).map(e=>e.nodeID);t.length>0&&p.glU.deletePrototypeStartingPoints(t)},onHeaderClick:M?z:void 0,openFile:l,pickerShown:null,propertyList:A,recordingKey:"prototypeFlowsList",renderProperty:(e,t,s,a,r,l,d,c,u)=>(0,i.jsx)(B,{dispatch:v,fileKey:n,fileProtoUrl:o?.prototype_url,flowItemsCount:A.length,hasFile:!!o,hasFocus:r,index:t,isDragging:a,item:e,onMouseDown:d,onMouseMove:c,onMouseUp:u,recordingKey:x.Pt("prototypeFlowsList",t),renamingStartingPointNodeId:f,selectFlowRowAndSetToEditName:G,selected:s,setRenamingStartingPointNodeId:g,submitRename:U,viewOnly:!!C},t),reversed:!1,selectedPropertyType:p.rrT.PROTOTOTYPE_STARTING_POINT,shouldIgnoreKeyboardEventDuplicateProperty:!0,showVisibleFlowsButton:C&&!V,stylePickerShown:{isShown:!1},title:(0,b.t)("proto.flows"),toggleVisibleFlows:e=>{M&&e.stopPropagation(),w.VU.get("toggle-prototyping-info","panel")(e)},visibleFlowsButtonChecked:j})})})}},843893:(e,t,n)=>{n.d(t,{mZ:()=>K,Ay:()=>V});var i=n(104076),s=n(716976),a=n(237420),r=n(684742),l=n(420680),o=n(240803);let d=(0,s.memo)(function(e){return(0,i.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,"data-fpl-icon-size":"24",children:(0,i.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",fillRule:"evenodd",d:"M15 17H9a1 1 0 0 1-1-1V8a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1v8a1 1 0 0 1-1 1m-6 1h6a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2H9a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2m1.5-9a.5.5 0 0 0 0 1h3a.5.5 0 0 0 0-1zm-.5 2.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 0 1h-3a.5.5 0 0 1-.5-.5m.5 1.5a.5.5 0 0 0 0 1h2a.5.5 0 0 0 0-1z",clipRule:"evenodd"})})});var c=n(546258),u=n(140458),p=n(180),m=n(266808),h=n(170627),f=n(287211),g=n(228172),x=n(511570),_=n.n(x),y=n(221586),v=n(641518),b=n(619511),C=n(192075),j=n(50536),k=n(354114),w=n(553065),E=n(754446),T=n(211862),S=n(205088),I=n(144386),N=n(349311),A=n(415567),L=n(501883),M=n(826220),O=n(268389),R=n(983500),P=n(300535),D=n(361170),F=n(849757),z=n(278491),B=n(404343);let G=function({startingPoint:e,closeModal:t,parentPanelRectObject:n,recordingKey:a}){let[r,l]=(0,s.useState)(e?.description||""),o=(0,s.useRef)(r);(0,s.useEffect)(()=>{o.current=r},[r]);let d=(0,A.uQ)(),c=(0,s.useRef)(d),u=(0,s.useCallback)(()=>{h.l7.user("submit-prototype-starting-point-description",()=>{c.current&&m.glU.updatePrototypeStartingPointDescription(c.current,o.current)}),t()},[t]);(0,s.useEffect)(()=>u,[u]);let p=(0,s.useCallback)(()=>{h.l7.user("blur-prototype-starting-point-description",()=>{c.current&&m.glU.updatePrototypeStartingPointDescription(c.current,o.current)})},[]);return(0,s.useEffect)(()=>(window.addEventListener("blur",p),window.addEventListener("focus",p),()=>{window.removeEventListener("blur",p),window.removeEventListener("focus",p)}),[p]),(0,i.jsx)(M.bL,{defaultPosition:new D.Mi(n.x-(0,R.hG)(B.M0y),n.y),onClose:u,draggable:"header",children:(0,i.jsxs)(O.vo,{className:z.Qx,children:[(0,i.jsx)(O.Y9,{children:(0,i.jsx)(O.hE,{children:(0,C.t)("proto.starting_point_modal.description")})}),(0,i.jsx)(O.nB,{padding:0,children:(0,i.jsx)(F.P,{className:"prototype_starting_point_modal--contentContainer--PuTTf",children:(0,i.jsx)("div",{className:"prototype_starting_point_modal--richTextEditor--Ru95M",dir:"auto",children:(0,i.jsx)(P.X,{fallback:null,errorFallback:null,placeholder:(0,C.t)("proto.starting_point_modal.enter_a_description_for_your_starting_point"),defaultValue:r,onInputChange:e=>{l(e)},onBlur:p,mountBehavior:"focusAndSelectAll",toolbarOptions:"minimal",toolbarProps:{"aria-label":(0,C.t)("proto.starting_point_modal.description")}})})})})]})})};var U=n(737139);function V(e){let[t,n]=(0,E.lJ)("prototypeStartingPoint"),x=!!(0,f.R)(H),[y,M]=(0,s.useState)(!1),[O,R]=(0,s.useState)(w.E7(t)?.name||""),[P,D]=(0,s.useState)(!1);(0,s.useEffect)(()=>{let e=w.E7(t)?.name||"";e!==O&&(R(e),!O&&P&&(D(!1),M(!0)))},[t,O,P]);let[F,z]=(0,s.useState)(!1),B=(0,s.useRef)(null),V=(0,A.Tv)(),W=(0,T.Cq)({useSinatraType:!0}),q=!!W,X=W?.prototype_url,Y=(0,a.d4)(e=>e.mirror.appModel.urlNodeId),Z=(0,a.wA)(),J=(0,s.useCallback)(()=>{z(!1)},[]);(0,s.useEffect)(()=>{J()},[J,V]);let Q=h.nc.user("delete-prototype-starting-points",()=>{V&&m.glU.deletePrototypeStartingPoints(V)}),$=v.rf(v.Pt(e.recordingKey,"minusButton"),"click",e=>{Q()}),ee=v.rf(v.Pt(e.recordingKey,"nameLabel"),"click",e=>{M(!0)});(0,s.useEffect)(()=>(k.Y5.fromFullscreen.on("focusPrototypeStartingPointPanelToEditName",ee),()=>{k.Y5.fromFullscreen.removeListener("focusPrototypeStartingPointPanelToEditName",ee)}),[ee]);let et=v.rf(e.recordingKey,"click",e=>{D(!0),h.l7.user("add-prototype-starting-point",()=>{k.Y5.triggerAction("add-prototype-starting-point")})}),en=V&&V.length>1,ei=(0,w._W)(t,{}),es=(0,i.jsx)(i.Fragment,{children:y?(0,i.jsx)(K,{defaultValue:O,submitRename:function(e){M(!1),e?n({name:e,description:(0,w.E7)(t)?w.E7(t)?.description:"",position:(0,w.E7)(t)?w.E7(t)?.position:""}):R(w.E7(t)?.name||"")},recordingKey:v.Pt(e,"startingPointNameInput")}):(0,i.jsx)(r.E,{className:"prototype_starting_point_panel--startingPointNameLabel--Mipwi raw_components--textAreaInput--mi1Ag raw_components--base--T7G0z raw_components--input--JB4Ix raw_components--singleRowHeight--dKM4t",onClick:ee,"aria-label":(0,C.t)("proto.starting_points.edit_flow_title"),children:O})}),ea=(0,i.jsx)(l.K,{onClick:()=>{z(!0)},htmlAttributes:{"data-tooltip-type":N.Ib.TEXT,"data-tooltip":(0,C.t)("proto.starting_points.edit_description")},"aria-label":(0,C.t)("proto.starting_points.edit_description"),recordingKey:v.Pt(e,"startingPointPanelIcon"),children:(0,i.jsx)(d,{})}),er=(0,i.jsx)(g.DE,{ref:B,label:null,input:es,icon:ea});if(!x&&en)return null;let el=x&&!en?(0,i.jsx)("span",{className:"prototype_starting_point_panel--fadeOutOnUnhover--6-o5B",children:(0,i.jsx)(b.k,{isVisible:!0,children:(0,i.jsx)(l.K,{disabled:!q,onClick:()=>(function(e,t,n){let i=m.X3B?.currentDeviceType()??m.bq3.NONE,s=(0,I.vp)({scalingInfo:{viewportScalingMode:(0,S.qb)(i),contentScalingMode:(0,S.Rv)(i)},nodeId:void 0,startingPointNodeId:n,showHotspots:void 0});e(j.lW({stringToCopy:`${t}${s}`}))})(Z,X,Y),htmlAttributes:{"data-tooltip-type":N.Ib.TEXT,"data-tooltip":(0,C.t)("proto.flows_panel.copy_link")},"aria-label":(0,C.t)("proto.flows_panel.copy_link"),children:(0,i.jsx)(c.W,{})})})}):null,eo=x?(0,C.tx)("proto.starting_points.flow_starting_point_title"):(0,i.jsx)(r.E,{className:"prototype_starting_point_panel--panelTitleText--F75N0 draggable_list--panelTitleText--SwKez",onClick:et,recordingKey:v.Pt(e,"panelTitle"),children:(0,C.tx)("proto.starting_points.flow_starting_point_title")}),ed=x?(0,C.t)("proto.starting_points.delete_starting_point_tooltip"):(0,C.t)("proto.starting_points.add_starting_point_tooltip"),ec=x?en?(0,i.jsx)(U.fI,{children:(0,i.jsx)(U.nV,{className:"prototype_starting_point_panel--mixedNoteLabel--gzISu draggable_list--label--Gcpsi",children:(0,C.tx)("proto.starting_points.click_to_remove_mixed_content")})}):(0,i.jsxs)(i.Fragment,{children:[er,F&&(0,i.jsx)(G,{startingPoint:ei,closeModal:J,parentPanelRectObject:B.current.getBoundingClientRect(),recordingKey:v.Pt(e,"startingPointDescriptionModal")})]}):null;return(0,i.jsxs)(U.Zk,{children:[(0,i.jsxs)(U.fI,{className:x?"prototype_starting_point_panel--flowStartingPointRow--Ajjk1 collapsible_property_panel--panelTitleRowOuter--i5K0R":_()("prototype_starting_point_panel--panelHeaderRowFaded--pswTv draggable_list--panelHeaderRowFaded--kETRR draggable_list--hover--yEfA5","prototype_starting_point_panel--hover--5t-WV"),children:[(0,i.jsx)(L.xw,{faded:!x,extended:!0,children:eo}),el,(0,i.jsx)("span",{className:x?"prototype_starting_point_panel--rightIconButton--ID6ZQ":"prototype_starting_point_panel--addButton--M-0Xy draggable_list--addButton--D0q--",children:(0,i.jsx)(o.o,{eventListeners:x?[]:["onMouseDown"],display:"contents",children:(0,i.jsx)(l.K,{onClick:x?$:et,htmlAttributes:{"data-tooltip-type":N.Ib.TEXT,"data-tooltip":ed},"aria-label":ed,recordingKey:v.Pt(e,"plusButton"),children:x?(0,i.jsx)(u.r,{}):(0,i.jsx)(p.$,{})})})})]}),ec]})}function H(e){return e.mirror.selectionProperties.prototypeStartingPoint}function K(e){let[t,n]=s.useState(e.defaultValue),a=v.AF(e.recordingKey,"change",e=>{n(e.target.value)}),r=v.iQ(e.recordingKey,"blur",h.nc.user("rename-starting-point",()=>e.submitRename(t))),l=v.v_(e.recordingKey,"keydown",n=>{"Enter"===n.key?e.submitRename(t):"Escape"===n.key?e.submitRename(""):e.shouldListenForTabKeyboardEvent&&n.keyCode===y.Uz.TAB&&(n.preventDefault(),e.submitRename(t),e.onTabKeyboardEvent?.(n.shiftKey))});return(0,i.jsx)(o.o,{eventListeners:["onMouseDown"],display:"contents",children:(0,i.jsx)("input",{"aria-label":(0,C.t)("proto.starting_points.edit_flow_title"),autoFocus:!0,className:e.className||"prototype_starting_point_panel--startingPointNameInput--uR8GY raw_components--textAreaInput--mi1Ag raw_components--base--T7G0z raw_components--input--JB4Ix raw_components--singleRowHeight--dKM4t",defaultValue:e.defaultValue,dir:"auto",onBlur:r,onChange:a,onFocus:e=>{e.currentTarget.select()},onKeyDown:l,placeholder:"Flow name",type:"text"})})}},948311:(e,t,n)=>{n.d(t,{v2:()=>eb,Ds:()=>ey});var i=n(104076),s=n(716976),a=n(237420),r=n(420680),l=n(293422),o=n(501950),d=n(390579),c=n(266808),u=n(812714),p=n(795033),m=n(434511),h=n(140490),f=n(641518),g=n(2713),x=n(11395),_=n(236631),y=n(192075),v=n(142914),b=n(607804);n(120440);var C=n(33091),j=n(366535),k=n(211862),w=n(643898),E=n(519414);function T(){let e=(0,a.wA)(),t=(0,k.q5)(),n=(0,p.md)(C.o),s=!!t&&(0,w.Pe)(t);return(0,i.jsx)("div",{className:"x1057jvv xnfn54o",children:(0,i.jsx)(l.WW,{variant:"secondary",disabled:s||n.isExporting,onClick:()=>e(j.to({type:E.p})),children:(0,y.t)("fullscreen.toolbar.buzz.export")})})}var S=n(693035),I=n(549571),N=n(819851),A=n(244399),L=n(551037),M=n(835258),O=n(915013),R=n(592726),P=n(443208),D=n(467111),F=n(859802),z=n(286911),B=n(819222),G=n(911865),U=n(964231),V=n(67282),H=n(375e3),K=n(167151),W=n(813141),q=n(382827),X=n(17933),Y=n(684742),Z=n(546258),J=n(511570),Q=n.n(J),$=n(755444),ee=n(124125),et=n(58212),en=n(203132),ei=n(687849),es=n(54092),ea=n(76365),er=n(349311),el=n(564941),eo=n(236202),ed=n(746818),ec=n(910950);let eu={"present-slides-audience-view":"set-slides-audience-view","present-slides-presenter-view":"set-slides-presenter-view"};function ep(){let[e,t]=s.useState(!1),{getTriggerProps:n,getContainerProps:a,getArrowProps:r}=X.fP({isOpen:e,onOpenChange:t,type:"tooltip",placement:"bottom-end",softDismiss:!0}),l=!(0,es.Zr)("present-slides-audience-view");return(0,i.jsxs)("div",{className:Q()(ec.fullHeightSidebarFlyout,{"slides_present_popover--popoverButtonActive---2tRc":e,[ec.disabledFullHeightSidebarFlyout]:l}),"data-tooltip-type":er.Ib.LOOKUP,"data-tooltip":"present-slides-audience-view","data-onboarding-key":ed.J5,"data-testid":"present-slides-audience-view",children:[(0,i.jsx)(Y.E,{actionOnPointerDown:!0,htmlAttributes:{"data-testid":"slides-presentation-flyout-button"},className:Q()(ec.fullHeightSidebarFlyoutButton,"slides_present_popover--popoverButton--aAPlW",{"slides_present_popover--popoverButtonDisabled--J-LyW":l}),"aria-label":(0,y.t)("fullscreen.flyout.slides_presentation"),recordingKey:"slidesPresentationFlyout",...n(),children:(0,i.jsx)(o.X,{})}),(0,i.jsxs)(X.mc,{...a({className:"slides_present_popover--popoverContainer--9Slvg"}),children:[(0,i.jsx)(X.i3,{...r()}),(0,i.jsx)(em,{})]})]})}function em(){return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"slides_present_popover--optionsContainer--onjlH",children:[(0,i.jsx)(eh,{}),(0,i.jsx)(ef,{})]}),(0,i.jsx)(ex,{})]})}function eh(){return(0,i.jsx)(eg,{action:"present-slides-audience-view",icon:(0,i.jsx)(en.V,{}),description:(0,y.t)("fullscreen_actions.present-slides-description"),recordingKey:"audienceViewPresent"})}function ef(){return(0,i.jsx)(eg,{action:"present-slides-presenter-view",icon:(0,i.jsx)(en.y,{}),description:(0,y.t)("fullscreen_actions.present-slides-presenter-view-description"),recordingKey:"presenterViewPresent"})}function eg({action:e,icon:t,description:n,recordingKey:s}){let r=(0,a.d4)(ea.nj),l=(0,es.Zr)(e),o=(0,eo.Jg)(e),d=(0,el.c1)(r.keyboardShortcuts,e);return(0,i.jsx)(Y.E,{className:"slides_present_popover--presentOptionButton--Lhjzj",onClick:t=>{ei.VU.get(eu[e],"toolbar")(t)},disabled:!l,recordingKey:s,children:(0,i.jsxs)("div",{className:"slides_present_popover--presentOptionButtonContent--fS6qx",children:[(0,i.jsx)("h3",{className:"slides_present_popover--presentOptionName--IyAoT slides_present_popover--text--84FoS",children:o}),(0,i.jsx)(ee.S,{shortcut:d,className:"slides_present_popover--shortcut--RMmIC"}),(0,i.jsx)("div",{className:"slides_present_popover--presentOptionButtonIcon--aquNW",children:t}),(0,i.jsx)("p",{className:"slides_present_popover--presentOptionDescription--0NTTE",children:n})]})})}function ex(){let e=(0,k.tS)(),t=(0,a.wA)(),n=s.useCallback(()=>{let n=`${(0,$.Ay)().figma_url}/deck/${e}`;navigator.clipboard.writeText(n),t(et.F.enqueue({type:"copy-presentation-link-success",message:(0,y.t)("fullscreen_actions.copy-presentation-link-success")}))},[e,t]);return(0,i.jsxs)(Y.E,{onClick:n,htmlAttributes:{"data-onboarding-key":ed.FM},className:"slides_present_popover--copyPresentationLinkButton--EGEdD",children:[(0,i.jsx)(Z.W,{}),(0,y.tx)("fullscreen_actions.copy-presentation-link")]})}var e_=n(691201);let ey=(0,p.eU)(0);function ev(e){let{isRightPanelCollapsed:t}=s.useContext(P.t),n=(0,a.wA)(),m=(0,q.sO)(),h=(0,K.cJ)(),C=(0,b.to)()&&(0,b.HH)(),j=(0,N.HW)(),k=(0,O.dR)(),w=(0,a.d4)(e=>e.multiplayer),E=s.useMemo(()=>w.allUsers.find(e=>e.sessionID===w.sessionID)||null,[w.allUsers,w.sessionID]),X=(0,g.B4)(),Y=j?null:e.openFile,Z=(0,A.DG)(Y?.key||"").enabled,J=(0,M.ck)(),Q=s.useRef(null),$=(0,p.Xr)(ey),ee=(0,L.k)(),et=(0,S.eZ)(),en=(0,W.G)(),ei=(0,I.xo)(),es=(0,R.iZ)(),ea=(0,x.Om)();s.useEffect(()=>{Q.current&&t&&$(Q.current.clientWidth)},[t,Q,$,w.allUsers]);let er=s.useCallback(e=>{(0,F.Lx)(e,E?.sessionID,n,j,w,k,X)},[E?.sessionID,n,j,w,k,X]);return(0,i.jsx)("div",{ref:Q,children:null===Y?(0,i.jsx)("div",{className:e_.tU,children:(0,i.jsx)(D.YJ,{})}):(0,i.jsxs)("div",{className:e_.Yg,children:[(0,i.jsxs)("div",{className:e_.kb,children:[(0,i.jsx)(z.sK,{isUI3:!0}),ei&&es&&(0,i.jsx)(v.H8,{user:{...es,id:es.id}}),w&&e.openFile&&E&&!ei&&(0,i.jsx)(F.v7,{thresholdUsesContainerWidth:!0,multiplayer:w,currentUser:E,onUserClick:ee?()=>ea(c.rcl.FOLLOW_PRESENTER):er})]}),(t||ee)&&!C&&(0,i.jsx)("div",{className:e_.wR,children:(0,i.jsx)(H.H,{recordingKey:f.Pt("header","zoomMenu")})}),(0,i.jsx)("div",{className:e_.Oh,children:(0,i.jsxs)("div",{className:_.s.flex.itemsCenter.$,children:[!J&&!C&&(!(0,u.kc)().slides_a11y_present_button||!m)&&(et||!en)&&!ee&&(0,i.jsx)(V.QE,{item:h?U.Ax:m&&!(0,u.kc)().slides_a11y_present_button?G.IS:U.Fz,recordingKey:e.recordingKey,numUnreadComments:0}),ee&&!C&&!en&&(0,i.jsxs)("div",{className:_.s.flex.flexRow.$,children:[(0,i.jsx)(r.K,{"aria-label":(0,y.t)("fullscreen_actions.present-as-prototype"),onClick:()=>ea(c.rcl.PRESENT_AS_PROTOTYPE),children:(0,i.jsx)(o.X,{})}),(0,i.jsx)(r.K,{"aria-label":(0,y.t)("fullscreen.flyout.prototype_view"),onClick:()=>ea(c.rcl.PRESENT_AS_PROTOTYPE),children:(0,i.jsx)(d.O,{})})]}),C&&(0,i.jsx)(T,{}),m&&(0,u.kc)().slides_a11y_present_button&&(0,i.jsx)(ep,{}),ee&&(0,i.jsx)("div",{style:{marginLeft:8,marginRight:8},children:(0,i.jsx)(l.WW,{variant:"secondary",onClick:()=>ea("SHARE_BUTTON"),children:(0,y.t)("fullscreen.toolbar.multiplayer.share")})}),Y&&!ee&&(0,i.jsx)(B.ShareButton,{user:e.user,editingFile:Y,isFileInWorkshop:Z,appendedClassname:e_.OI})]})})]})})}function eb(e){return(0,i.jsx)(m.l,{id:"RightPanelHeaderNoProps",children:(0,i.jsx)(h.u,{label:"RightPanelHeaderNoProps",children:(0,i.jsx)(eC,{...e})})})}function eC({recordingKey:e}){let t=(0,k.q5)(),n=(0,a.d4)(e=>e.user);return(0,i.jsx)(ev,{recordingKey:e,openFile:t,user:n,isIntegration:(0,M.ck)()})}},959091:(e,t,n)=>{n.d(t,{P:()=>v});var i=n(104076),s=n(716976),a=n(382629),r=n(120440),l=n(933688),o=n(685899),d=n(55470),c=n(190772),u=n(188665),p=n(350081),m=n(951002),h=n(641518),f=n(390036),g=n(67282),x=n(128962);function _({action:e}){switch(e.type){case u.ZU.FLYOUT:return(0,i.jsx)(l.E,{name:"selection_actions_button",alsoTrack:()=>({layerButtonAction:`open_flyout_${(0,f.uc)(e.dropdownKey)}`}),children:(0,i.jsx)(x.F,{flyoutConfig:e,recordingKey:h.Pt(o.If,e.flyoutRecordingKey)})},e.dropdownKey);case u.ZU.ACTION:return(0,i.jsx)(l.E,{name:"selection_actions_button",alsoTrack:()=>({layerButtonAction:`${(0,f.uc)(e.action)}`}),children:(0,i.jsx)(g.QE,{item:e,numUnreadComments:0,recordingKey:o.If})},e?.reactKey??e?.recordingKey);case u.ZU.CUSTOM_ACTION:return(0,i.jsx)(o.XS,{item:e},e.recordingKey);case u.ZU.ACTION_SUBMENU:return(0,i.jsx)(l.E,{name:"selection_actions_button",alsoTrack:()=>({layerButtonAction:`open_submenu_${(0,f.uc)(e.getTitle())}`}),children:(0,i.jsx)(g.QE,{item:e,numUnreadComments:0,recordingKey:h.Pt(o.If,e.recordingKey)})},e.recordingKey);default:(0,m.xb)(e)}}var y=n(250828);let v=s.memo(e=>{let t=s.useMemo(()=>e.actions.map(e=>e.filter(e=>(0,a.Vq)(e))),[e.actions]),n=(0,p.U)(t),m=function(e){let t=(0,o.fJ)();return(0,s.useMemo)(()=>{let n=!1,i=e.flat().filter(e=>("preventHoisting"in e&&e.preventHoisting&&(n=!0),!("preventHoisting"in e)||!e.preventHoisting));return(0,o.b_)(t,i,n)},[e,t])}(n),h=(0,o.yG)(n,m),f=h.reduce((e,t)=>e+t.length,0)>0;return(0,i.jsx)(c.zW.Provider,{value:{source:"selection_actions_panel"},children:(0,i.jsxs)("div",{...r.xk(y.R.selectionActionsButtons),children:[m.map(e=>{let t=e.type===u.ZU.FLYOUT?e.flyoutRecordingKey:"reactKey"in e?e.reactKey:e.recordingKey;return(0,i.jsx)(_,{action:e},t)}),f&&(0,i.jsx)(l.E,{name:"selection_actions_overflow_menu",children:(0,i.jsx)(d.S,{enabledToolbarItems:h,overflowTooltip:e.overflowTooltip,recordingKey:"selectionActionsButtons"})})]})})});v.displayName="SelectionActionsButtons"},931863:(e,t,n)=>{n.d(t,{W:()=>g});var i=n(104076),s=n(716976),a=n(171704),r=n(466209),l=n(87708),o=n(812714),d=n(795033),c=n(120440),u=n(434511),p=n(406954),m=n(737139),h=n(962326),f=n(250828);let g=(0,u.j)(function(e){let t=s.useRef(null),n=function({fallback:e,onBeforeFocus:t},n){return(0,l.Z)(n=>{let i=function({focused:e,root:t,previous:n,next:i},s){if(!n&&!i)return s;let a=(0,r.nq)(t).indexOf(e),l=(0,r.nq)(i??n);return l[a]??l[0]??s}(n,e?.current||null);t&&(i=t(i)),i?.focus()},{ref:void 0})}({onBeforeFocus:s.useCallback(e=>(0,o.kc)().ui3p_a11y_selection_actions_retain_focus&&"keyboard"===a.F.type?t.current?(0,p.xv)(t.current)??e:e:null,[])}),u=(0,d.Xr)(h.A),g=s.useCallback(e=>{e&&u(t),n.current=e,t.current=e},[n,u]);return(0,i.jsxs)(m.Zk,{ref:g,style:{paddingBottom:0},children:[(0,i.jsxs)("div",{...c.xk(f.R.nameAndActionsContainer),children:[e.selectionName,e.selectionActionsButtons]}),(0,i.jsx)("div",{...c.xk(f.R.selectionActionsChildren),children:e.children})]})},"SelectionActionsPanel")},418204:(e,t,n)=>{n.d(t,{Y:()=>h});var i=n(104076),s=n(716976),a=n(120440),r=n(192075),l=n(978526),o=n(328996),d=n(881754),c=n(349311),u=n(691201);function p({nodeTypeString:e}){let t=s.useRef(null),[n,a]=s.useState(!1),r=s.useCallback(()=>{t.current&&a(t.current.offsetWidth<t.current.scrollWidth)},[]);return s.useLayoutEffect(()=>{r();let e=new ResizeObserver(r);return t.current&&e.observe(t.current),()=>{e.disconnect()}},[e,r]),(0,i.jsx)("h1",{ref:t,className:u.aj,"data-tooltip-type":n?c.Ib.TEXT:void 0,"data-tooltip":n?e:void 0,"data-testid":"node-type-display",children:e})}var m=n(250828);let h=s.memo(e=>{let{nodeCount:t,nodeType:n,nodeTypeString:s}=e,c=(0,d.g)();return n?(0,i.jsx)("div",{ref:c,...a.xk(m.R.selectionName),children:(()=>{switch(n){case"MIXED":return(0,i.jsx)("div",{className:u.Zp,children:(0,i.jsx)("h1",{children:(0,r.t)("fullscreen.properties_panel.layer_header.node_type_multiple_selected",{count:t})})});case"SYMBOL":return(0,i.jsx)(l.R,{alwaysShowParentComponent:!0,shouldHideComponentIcon:!0,unfocusedInputOverridesClassName:u.XS,focusedInputOverridesClassName:u.sE});case"INSTANCE":return(0,i.jsx)(o.W,{isInSelectionActionsPanel:!0});default:return(0,i.jsx)(p,{nodeTypeString:s})}})()}):null});h.displayName="SelectionName"},315876:(e,t,n)=>{n.d(t,{w:()=>z,y:()=>B});var i=n(104076),s=n(716976),a=n(237420),r=n(667693),l=n(302727),o=n(420680),d=n(452981),c=n(751309),u=n(92652),p=n(387092),m=n(812714),h=n(120440),f=n(783728),g=n.n(f),x=n(219199),_=n(641518),y=n(246144),v=n(192075),b=n(366535),C=n(968169),j=n(331497),k=n(76365),w=n(564914),E=n(349311),T=n(288054),S=n(699914),I=n(228172),N=n(236631);let A=s.forwardRef(function({labelTx:e,input:t,icon:n,labelFor:s},a){let r=(0,i.jsx)(null!=s?"label":"span",{className:N.s.textBodyMedium.pl1.flex.$,children:e});return(0,i.jsx)(I.fn,{ref:a,leftInput:r,rightInput:t,icon:n,leftLabel:null,rightLabel:null})});var L=n(916051),M=n(664320),O=n(304900);n(531);var R=n(482628);function P(e){let{leftInput:t,rightInput:n,icon:s,shouldUseLabels:a,xstyle:r}=e,l=a?(0,v.t)("variables.create_modal.collection_label"):void 0,o=a?(0,v.t)("variables.mode_picker.mode_header"):void 0,d=(0,i.jsxs)("div",{className:"x78zum5 x6s0dn4 x1n2onr6",children:[(0,i.jsx)(R.N,{}),(0,i.jsx)("div",{className:"xh8yej3 x1dk4jvt",children:t})]}),c=(0,i.jsx)("div",{className:"x78zum5 x6s0dn4 x1n2onr6",children:(0,i.jsx)("div",{className:"xh8yej3 x1dk4jvt",children:n})});return s?(0,i.jsx)(I.fn,{leftInput:d,leftLabel:l,rightLabel:o,rightInput:c,icon:s}):(0,i.jsx)(I.Uq,{leftInput:d,leftLabel:l,rightLabel:o,rightInput:c,xstyle:r})}let D="variable_mode_entries--iconColor--FpHYz",F="variable_mode_entries--iconTrail--HWFxi variable_mode_entries--iconColor--FpHYz";function z({showExplicitOnly:e,recordingKey:t}){let n=(0,M.kN)(),r=(0,j.J2)((0,C.UK)().showGuids),l=(0,a.d4)(k.Sh),o=(0,s.useMemo)(()=>JSON.stringify(l),[l]),d=(0,M.hZ)(),c=(0,M.cd)(),u=Object.entries(n),m=(0,s.useMemo)(()=>u.sort(([e,t],[n,i])=>t.libraryKey!==i.libraryKey?t.libraryKey?i.libraryKey?t.libraryKey.localeCompare(i.libraryKey):1:-1:t.collectionName.localeCompare(i.collectionName)),[u]);return(0,i.jsx)(i.Fragment,{children:m.map(([n,s])=>{let a=s.inheritMode,l=s.explicitMode;return(0,i.jsx)(B,{explicitModeID:l,inheritedModeID:a,isShowingGuids:r,modeOptions:s.modeOptions,onChange:(e,t)=>{c(e,(0,p.yG)(n),()=>{d(n,e,t)})},recordingKey:_.Pt(t,`variableModeEntry-${e}`),showExplicitOnly:e,variableSetKey:n,variableSetName:s.collectionName},`variable-mode-entry-${n}-${e}-${o}`)})})}function B(e){let{showExplicitOnly:t,variableSetName:n,variableSetKey:p,modeOptions:f,explicitModeID:C,inheritedModeID:j,isShowingGuids:k,recordingKey:I,hideRemoveButton:N,onChange:R,simplifiedPickers:z,bifurcatedPickerWrapperStyles:B,bifurcatedPickerStyles:G}=e,U=(0,a.wA)(),V=(0,O.T)(p,f,C,j??null),H=(0,M.ZP)(),K=C&&C!==M.Mo&&f.every(e=>!(0,r.c2)(e.modeId,C)),W=M.Ws;(0,m.kc)().ds_new_mode_dropdown_data?W=V.currentMode:K?W=M.Yn:C?W=C:j&&(W=M.UE);let q=(0,s.useMemo)(()=>(function({modeOptions:e,inheritedModeID:t,isShowingGuids:n}){return{format:i=>{if(i===M.iw.LEARN_MORE)return(0,v.t)("variables.modes.option.learn_more");if(i===M.iw.REVIEW_UPDATES)return(0,v.t)("variables.modes.option.review_updates");if(i===M.UE){if(t===M.Mo)return(0,v.t)("variables.mode_properties_panel.select.option.auto_with_name",{modeName:(0,v.t)("variables.mode_properties_panel.select.option.mixed")});let n=e.find(e=>r.c2(e.modeId,t))?.name;return n?(0,v.t)("variables.mode_properties_panel.select.option.auto_with_name",{modeName:n}):(0,v.t)("variables.mode_properties_panel.select.option.auto")}{if(i===M.Ws)return 0===e.length&&(0,y.x1)("variables","No mode options available"),(0,v.t)("variables.mode_properties_panel.select.option.default_with_name",{modeName:e[0].name??""});if(i===M.Mo)return(0,v.t)("variables.mode_properties_panel.select.option.mixed");if(i===M.Yn)return(0,v.t)("variables.mode_properties_panel.select.option.deleted");let t=e.find(e=>(0,r.c2)(e.modeId,i));return t?n?`${t.name} (${t.modeId.guid})`:t.name:((0,y.x1)("variables","Option does not exist in modeOptions"),(0,v.t)("variables.mode_properties_panel.select.option.deleted"))}},isEqual:(e,t)=>(0,r.c2)(e,t)}})({modeOptions:f,inheritedModeID:j,isShowingGuids:k}),[f,j,k]),X=(0,s.useId)(),Y=q.format(W),[Z,J]=(0,s.useState)(t),Q=(0,s.useCallback)((e,t,n)=>{R(e,n),void 0!==t&&J(t)},[R]),$=!!(0,m.kc)().ds_extended_collections&&V.collectionsInFamily.size>1,ee=(0,s.useMemo)(()=>(0,m.kc)().ds_extended_collections?function(e,t,n){let s=[],a=(0,i.jsx)(c.B,{className:D}),r=(0,i.jsx)(c.B,{className:F});for(let n of t.formattedModeOptions)n.type===O.Z.Standard&&n.modeId.collectionKey===t.activeCollectionKeyInFamily&&s.push((0,i.jsxs)(l.Option,{value:n.modeId,recordingKey:`value=${n.modeId.guid}`,children:[e.format(n.modeId),n.isCompatible?void 0:r]},`mode-option-${n.modeId.guid}`));return t.hasIncompatibleMode&&s.push((0,i.jsx)(l.Group,{children:(0,i.jsx)(l.Option,{value:n,iconLead:a,children:e.format(n)},n===M.iw.REVIEW_UPDATES?"incompatible-modes-updates":"incompatible-modes-learn-more")})),s}(q,V,H):function(e,t,n,s){let a=[];if(0===t.length)return a;let r=g()(t,e=>e.modeId.collectionKey),o=(0,i.jsx)(c.B,{className:D}),d=(0,i.jsx)(c.B,{className:F});if(Object.entries(r).map(([t,s])=>{for(let r of(a.length>0&&s.length>0&&a.push((0,i.jsx)(l.Separator,{})),s))a.push((0,i.jsxs)(l.Option,{value:r.modeId,recordingKey:_.Pt(`varSetSelect=${t}`,`value=${r.modeId.guid}`,`varSetKey=${t}`),children:[e.format(r.modeId),r.isCompatible?null:d]},`mode-option-${t}-${r.modeId.guid}-${n}`))}),t.some(e=>!e.isCompatible)){let t=s===M.iw.REVIEW_UPDATES?(0,i.jsx)(l.Option,{value:M.iw.REVIEW_UPDATES,recordingKey:"incompatible-modes-review-updates",iconLead:o,children:e.format(M.iw.REVIEW_UPDATES)}):s===M.iw.LEARN_MORE?(0,i.jsx)(l.Option,{value:M.iw.LEARN_MORE,recordingKey:"incompatible-modes-learn-more",iconLead:o,children:e.format(M.iw.LEARN_MORE)}):null;t&&a.push((0,i.jsx)(l.Group,{children:t},"incompatible-modes-group"))}return a}(q,f,t,H),[q,f,t,H,V]),et=(0,s.useCallback)(e=>{let t=V.getSelectedModeForNewSet(e,W);t&&(R(t.modeId,t.name),J(!1))},[W,V,R]);if(f.length<2||Z&&!C)return null;let en=W===M.Mo,ei=!!j,es=!$||j===M.Mo||j?.collectionKey===V.activeCollectionKeyInFamily,ea=!$||f[0]?.modeId.collectionKey===V.activeCollectionKeyInFamily,er=(0,m.kc)().ds_new_mode_dropdown_data?function(e,t,n){let s=[];for(let a of t.formattedModeOptions)switch(a.type){case O.Z.Mixed:s.push((0,i.jsx)(l.Option,{value:M.Mo,recordingKey:"value:MIXED",children:e.format(M.Mo)},M.Mo),(0,i.jsx)(l.Separator,{}));break;case O.Z.Inherited:n&&a.modeId?.collectionKey!==t.activeCollectionKeyInFamily||s.push((0,i.jsx)(l.Option,{value:M.UE,recordingKey:"value:INHERIT",children:e.format(M.UE)},M.UE),(0,i.jsx)(l.Separator,{}));break;case O.Z.Default:n&&a.modeId.collectionKey!==t.activeCollectionKeyInFamily||s.push((0,i.jsx)(l.Option,{value:M.Ws,recordingKey:"value:DEFAULT",disabled:!a.isCompatible,children:e.format(M.Ws)},M.Ws),(0,i.jsx)(l.Separator,{}));break;case O.Z.Deleted:s.push((0,i.jsx)(l.Option,{value:M.Yn,recordingKey:"value:DELETED",disabled:!0,children:e.format(M.Yn)},M.Yn))}return s}(q,V,$):function(e,t,n,s,a,r,o){let d=[];return n&&d.push((0,i.jsx)(l.Option,{value:M.Mo,recordingKey:"value:MIXED",children:e.format(M.Mo)},M.Mo),(0,i.jsx)(l.Separator,{})),s?a&&d.push((0,i.jsx)(l.Option,{value:M.UE,recordingKey:"value:INHERIT",children:e.format(M.UE)},M.UE),(0,i.jsx)(l.Separator,{})):o.length>0&&r&&d.push((0,i.jsx)(l.Option,{value:M.Ws,recordingKey:"value:DEFAULT",disabled:!o[0].isCompatible,children:e.format(M.Ws)},M.Ws),(0,i.jsx)(l.Separator,{})),t===M.Yn&&d.push((0,i.jsx)(l.Option,{value:M.Yn,recordingKey:"value:DELETED",disabled:!0,children:e.format(M.Yn)},M.Yn)),d}(q,W,en,ei,es,ea,f),el=(0,i.jsxs)(l.Root,{value:W,onChange:e=>{e===M.iw.LEARN_MORE?x.Ay.unsafeRedirect(M.Yc,"_blank"):e===M.iw.REVIEW_UPDATES?U(b.to({type:S.T,data:{initialTab:w.Wv.UPDATES,entrypoint:T.r6.VARIABLE_MODE_INCOMPATIBLE_REVIEW_UPDATES_DROPDOWN_OPTION}})):Q(e,!1,q.format(e))},isEqual:q.isEqual,recordingKey:_.Pt(I,`varSetSelect=${p}`),children:[(0,i.jsx)(l.ManuallyLabeledTrigger,{id:X,"aria-label":$?(0,v.t)("variables.variable_mode"):void 0,width:"fill",htmlAttributes:{"data-tooltip-type":E.Ib.TEXT,"data-tooltip":Y}}),(0,i.jsxs)(l.Container,{children:[...er,...ee]})]}),eo=(0,i.jsx)("span",{className:"variable_mode_entries--ui3VariableSetName--eqW9C variable_mode_entries--variableSetName--hmoV4","data-testid":"variableModeEntry",children:n}),ed=(0,i.jsx)(o.K,{"aria-label":(0,v.t)("general.remove"),onClick:()=>Q("INHERIT",!0),actionOnPointerDown:!0,htmlAttributes:{"data-tooltip":(0,v.t)("general.remove"),"data-tooltip-type":E.Ib.TEXT},children:(0,i.jsx)(u.O,{})});if($){let e=(0,i.jsxs)(l.Root,{value:V.activeCollectionKeyInFamily,onChange:et,recordingKey:_.Pt(I,`varSetInFamilySelect=${p}`),children:[(0,i.jsx)(l.Trigger,{width:"fill",label:(0,i.jsx)(d.h,{children:(0,v.tx)("variables.variable_collection")})}),(0,i.jsxs)(l.Container,{children:["MIXED"===V.activeCollectionKeyInFamily&&(0,i.jsx)(l.Option,{value:M.Mo,recordingKey:`varSetInFamilyOption=${M.Mo}`,children:(0,v.t)("variables.mode_properties_panel.select.option.mixed")}),Array.from(V.collectionsInFamily.entries()).map(([e,t])=>(0,i.jsx)(l.Option,{value:e,recordingKey:`varSetInFamilyOption=${e}`,children:t},e))]})]});return(0,i.jsx)("span",{...h.xk(B),children:(0,i.jsx)(P,{leftInput:e,rightInput:el,icon:N||z?void 0:ed,shouldUseLabels:!z,xstyle:G})})}return z?(0,i.jsx)("div",{className:"x1bpp3o7 xq1dxzn",children:el}):N?(0,i.jsx)(L.No,{label:eo,labelFor:X,input:el}):(0,i.jsx)(A,{labelTx:eo,labelFor:X,input:el,icon:ed})}},853137:(e,t,n)=>{n.d(t,{Hj:()=>H,W$:()=>V,ry:()=>U});var i=n(104076),s=n(716976),a=n(237420),r=n(999083),l=n(951002),o=n(948351),d=n(638004),c=n(511570),u=n.n(c),p=n(883765),m=n(221586),h=n(681398),f=n(641518),g=n(550209),x=n(246144),_=n(652539),y=n(192075),v=n(147046),b=n(850701),C=n(354114),j=n(643898),k=n(912610),w=n(8828),E=n(29236),T=n(525972),S=n(885163),I=n(306728),N=n(423683),A=n(266868),L=n(81969),M=n(601704),O=n(735194),R=n(830224),P=n(521183),D=n(610488),F=n(377036);let z="Loading suggestions...";function B(e){(0,l.vA)(null!==e,"We should never be in the middle state if there are no optional parameters")}class G extends f.o6{constructor(e){let t;if(super(e),this.searchInputRef=s.createRef(),this.scrollContainerRef=s.createRef(),this.searchBarRef=s.createRef(),this.primaryPlaceholderTextRef=s.createRef(),this.ranWithParameters=!1,this.runArgs=null,this.loadingTimerID=null,this.pendingLoadingMessage=null,this.firstOptionalIndex=null,this.eventID=0,this.onSuggestions=e=>{switch(e.type){case"SUGGESTIONS":{let t=this.getDropdownItems(e.suggestions,this.state.searchQuery,this.state.activeParameterIndex),n=t.findIndex(e=>(function(e){return"freeform"!==e&&"skip"!==e})(e)),i=n>=0?n:this.state.activeItemIndex,s=t.length||!this.state.searchQuery?null:(0,y.t)("fullscreen_actions.no_matches");this.clearLoadingMessage(),this.setState({activeItemIndex:i,items:t,errorMessage:s});break}case"ERROR":this.clearLoadingMessage(),this.setState({items:this.getDropdownItems([],this.state.searchQuery,this.state.activeParameterIndex),errorMessage:e.message||(0,y.t)("fullscreen_actions.no_matches")});break;case"LOADING":this.setLoadingMessage(e.message)}},this.onBackspace=()=>{let e=this.state.activeParameterIndex,t=null;if("middle"===e){if(B(this.firstOptionalIndex),0===this.firstOptionalIndex){this.props.onExitParameterEntry();return}t=this.firstOptionalIndex-1}else if("final"===e)t=this.props.parameters.length-1;else{if(0===e){this.props.onExitParameterEntry();return}t=e-1}let n={...this.state.parameterValues},i=this.getParameterForIndex(t)?.key;i&&delete n[i],this.setParameterIndex(t,n)},this.onTextChange=e=>{let t;let n=this.state.activeParameterIndex;if("middle"===n)B(this.firstOptionalIndex),t=this.firstOptionalIndex;else{if("final"===n)return;t=n}let i=this.props.parameters[t];this.triggerInputEvent({parameterValues:this.state.parameterValues,currentParameter:i,currentSearchQuery:e}),this.setLoadingMessage(z),this.setState({searchQuery:e,items:this.getDropdownItems([],e,t),activeItemIndex:0,activeParameterIndex:t,mouseMoved:!1,errorMessage:""})},this.onSelectItem=(e,t)=>{let n;let i=this.state.activeParameterIndex;if("final"===i){"enter"===t&&this.launchPluginWithParameters(this.state.parameterValues);return}let s={...this.state.parameterValues};if("middle"!==i){if(0===this.state.items.length)return;let n=this.props.parameters[i];if(e<0||e>=this.state.items.length){let s="Trying to select suggestion at invalid index";console.error(s),(0,x.Lo)("PluginParameterEntry","invalid index",{index:e,items:this.state.items.length,currentIndex:i,parameter:n.name,keyPress:t}),(0,g.$D)(d.e.EXTENSIBILITY_ECOSYSTEM,Error(s));return}let a=this.state.items[e];"skip"===a||("freeform"===a?s[n.key]={name:this.state.searchQuery}:((0,l.KF)(!this.state.loadingMessage,"Selected item while loading"),s[n.key]=a))}let a=this.firstOptionalIndex;if("middle"===i){if(B(this.firstOptionalIndex),"enter"===t){this.launchPluginWithParameters(s);return}n=this.firstOptionalIndex}else if(i===this.props.parameters.length-1){if("enter"===t){this.launchPluginWithParameters(s);return}n="final"}else n=null!==a&&i===a-1?"tab"===t?a:"middle":i+1;this.setParameterIndex(n,s),this.searchInputRef.current.focus()},this.onKeyDown=f.C0(this,"keydown",e=>{let t=e=>{let t=this.state.activeItemIndex+e;return t<0?this.state.items.length-1:t%this.state.items.length},n=h.Ay.mac?(0,m.vN)(e,m.xH.META):(0,m.vN)(e,m.xH.CONTROL);switch(e.keyCode){case m.Uz.ENTER:e.preventDefault(),this.onSelectItem(this.state.activeItemIndex,"enter");break;case m.Uz.TAB:e.preventDefault(),this.onSelectItem(this.state.activeItemIndex,"tab");break;case m.Uz.DOWN_ARROW:if(e.preventDefault(),this.state.items.length>0){let e=t(1);this.setState({activeItemIndex:e}),this.scrollContainerRef.current?.scrollElementAtIndexIntoView(e)}break;case m.Uz.UP_ARROW:if(e.preventDefault(),this.state.items.length>0){let e=t(-1);this.setState({activeItemIndex:e}),this.scrollContainerRef.current?.scrollElementAtIndexIntoView(e)}break;case m.Uz.BACKSPACE:0===this.state.searchQuery.length?(e.preventDefault(),this.onBackspace(),e.stopPropagation()):("final"===this.state.activeParameterIndex||"middle"===this.state.activeParameterIndex)&&e.preventDefault();break;case m.Uz.ESCAPE:e.preventDefault(),this.props.dispatch(v.oB());break;case m.Uz.P:case m.Uz.FORWARD_SLASH:n&&(e.preventDefault(),this.props.dispatch(v.oB()));break;case m.Uz.EQUALS:case m.Uz.DASH:n&&(e.preventDefault(),"-"===e.key?C.Y5.triggerAction("zoom-out"):C.Y5.triggerAction("zoom-in"));break;case m.Uz.R:case m.Uz.S:case m.Uz.D:case m.Uz.E:case m.Uz.F:case m.Uz.O:if(n){e.preventDefault();let t=this.state.searchQuery+e.key;this.onTextChange(t)}}}),this.onSearchChange=f.Z7(this,"change",e=>{let t=e.currentTarget.value;this.onTextChange(t)}),this.renderResult=(e,t,n)=>{let s,a="",r="";return"skip"===t?(a=`Skip "${e.name}"`,r="skip"):"freeform"===t?(a=this.state.searchQuery,r="skip"):(a=t.name,r=t.name,s=W(t,P.ZR)),(0,i.jsx)(K,{recordingKey:f.Pt(this.props,"suggestion",r),active:n===this.state.activeItemIndex,suggestion:a,onClick:e=>this.onSelectItem(n,"enter"),onMouseMove:()=>{this.state.mouseMoved||this.setState({mouseMoved:!0,activeItemIndex:n})},icon:s,onMouseEnter:()=>{this.state.mouseMoved&&this.setState({activeItemIndex:n})}},n)},(0,x.Lo)("PluginParameterEntry","Starting parameter entry for plugin",{parameters:e.parameters,displayName:e.displayName,parameterOnly:e.parameterOnly,pluginId:e.pluginId,pluginLocalFileId:e.pluginLocalFileId,command:e.command}),0===e.parameters.length)throw Error("Must specify at least one parameter");let n=e.parameters.findIndex(e=>e.optional);this.firstOptionalIndex=n<0?null:n,t=e.initialParameterValues?"final":e.parameters[0].optional?"middle":0,this.handler=this.runPlugin();let a=this.getParameterForIndex(t);a&&this.triggerInputEvent({parameterValues:{},currentParameter:a,currentSearchQuery:""}),this.setLoadingMessage("Loading plugin..."),this.state={searchQuery:"",items:[],errorMessage:null,loadingMessage:null,activeItemIndex:0,parameterValues:e.initialParameterValues||{},activeParameterIndex:t,mouseMoved:!1,hidePluginName:!1}}getParameterForIndex(e){return"middle"===e||"final"===e?null:this.props.parameters[e]}getCurrentParameter(){return this.getParameterForIndex(this.state.activeParameterIndex)}runPlugin(){let e=null;if(this.props.pluginId?this.props.allSavedPlugins[this.props.pluginId]?e=this.props.allSavedPlugins[this.props.pluginId]:this.props.publishedPlugins[this.props.pluginId]&&(e=(0,k.uF)(this.props.publishedPlugins[this.props.pluginId])):this.props.pluginLocalFileId&&(e=this.props.localExtensions[this.props.pluginLocalFileId]),!e)throw Error("Plugin not runnable");let{canRun:t}=(0,k.JT)({plugin:e,editorType:this.props.editorType});if(!t)throw Error("Plugin not runnable");this.runArgs={plugin:e,command:this.props.command||"",queryMode:!0,runMode:"default",triggeredFrom:"parameter-entry",openFileKey:this.props.openFile?.key||"",deferRunEvent:!0,isWidget:!1};let n=(0,E.D)();return T.R.instance.enqueue({mode:"run-forever",runPluginArgs:this.runArgs}),n}async triggerInputEvent(e){this.eventID++;let t=this.eventID,n=await this.handler;this.eventID===t&&n.triggerParameterInputEvent({...e,onSuggestions:e=>{this.eventID===t&&this.onSuggestions(e)}})}updateLayout(){let e=0===this.state.activeParameterIndex&&!this.props.parameters[0].optional;if(void 0===this.state.placeholderWidth&&!e){if(this.primaryPlaceholderTextRef.current){let e=Math.min(250,Math.max(this.primaryPlaceholderTextRef.current.offsetWidth,120));this.setState({placeholderWidth:e})}else this.setState({placeholderWidth:0})}let t=this.searchBarRef.current,n=t.offsetWidth<t.scrollWidth;e||!n||this.state.hidePluginName||this.setState({hidePluginName:!0}),t.scrollLeft=t.scrollWidth}componentDidMount(){super.componentDidMount(),(0,p.sx)(M.yh,(0,M.ov)({...this.props,qaVersion:A.U3})),this.searchInputRef.current.focus(),this.updateLayout()}componentDidUpdate(e,t){super.componentDidUpdate(e,t),this.updateLayout()}componentWillUnmount(){super.componentWillUnmount(),this.ranWithParameters||(0,I.wY)();let e=(0,M.O8)(this.props.parameters,this.state.parameterValues);this.ranWithParameters&&e.requiredEntered!==e.requiredCount&&((0,x.Lo)("PluginParameterEntry","Parameter entry mismatch",{requiredParameters:this.props.parameters,parameterValues:this.state.parameterValues}),(0,g.$D)(d.e.EXTENSIBILITY_ECOSYSTEM,Error("Plugin ran successfully with parameters, but not all parameters were recorded")));let t=(0,M.ov)({...this.props,qaVersion:A.U3});(0,p.sx)(M.rj,{...t,success:this.ranWithParameters,parametersEntered:e.entered,requiredParametersEntered:e.requiredEntered,optionalParametersEntered:e.optionalEntered})}getDropdownItems(e,t,n){if("middle"===n||"final"===n)return[];let i=e.slice(),s=this.props.parameters[n];t.length>0&&s.allowFreeform&&i.unshift("freeform");let a=this.props.parameters[n];return 0===t.length&&a.optional&&i.unshift("skip"),i}setLoadingMessage(e){if(this.loadingTimerID){this.pendingLoadingMessage=e;return}this.pendingLoadingMessage=e,this.loadingTimerID=setTimeout(()=>{this.setState({loadingMessage:this.pendingLoadingMessage}),this.loadingTimerID=null,this.pendingLoadingMessage=null},300)}clearLoadingMessage(){this.loadingTimerID&&(clearTimeout(this.loadingTimerID),this.loadingTimerID=null),this.setState({loadingMessage:null})}setParameterIndex(e,t){let n=this.getParameterForIndex(e);n&&((0,x.Lo)("PluginParameterEntry","setParameterIndex",{nextParameter:n.name}),this.triggerInputEvent({parameterValues:t,currentParameter:n,currentSearchQuery:""}));let i=!(0===e&&!this.props.parameters[0].optional)&&this.state.hidePluginName;this.searchInputRef.current.focus(),this.setLoadingMessage(z),this.setState({searchQuery:"",items:this.getDropdownItems([],"",e),activeItemIndex:0,activeParameterIndex:e,parameterValues:t,mouseMoved:!1,errorMessage:null,placeholderWidth:void 0,hidePluginName:i})}launchPluginWithParameters(e){if(this.setState({parameterValues:e}),this.handler.then(async t=>{let{isCancelled:n}=await (0,S.y)(this.runArgs);n||t.triggerRunEvent({command:"parameters",parameters:e})}),this.runArgs){let t=this.runArgs;if(this.runArgs=null,t.queryMode=!1,t.deferRunEvent=!1,t.parameterValues=e,this.props.recentlyUsedCommandName){let e=this.props.recentlyUsedCommandName;this.props.dispatch(b.Rw({currentDisplayName:e,newCommand:{displayName:e,runPluginArgs:t}})),(0,L.s)({displayText:e,runPluginArgs:t,localFileIdOrPluginId:this.props.pluginLocalFileId??this.props.pluginId})}(0,w.C3)(t)}this.ranWithParameters=!0,this.props.dispatch(v.oB())}renderResults(){if("middle"===this.state.activeParameterIndex)return(0,i.jsxs)("div",{className:R.wM,children:[(0,i.jsxs)("div",{className:R.FV,children:[(0,i.jsx)("div",{className:R.h8,children:(0,y.tx)("fullscreen_actions.plugin_parameters.tab")}),(0,i.jsx)("div",{className:R.w8,children:(0,y.tx)("fullscreen_actions.plugin_parameters.to_enter_optional_parameters")})]}),(0,i.jsxs)("div",{className:R.FV,children:[(0,i.jsx)("div",{className:R.h8,children:(0,y.tx)("fullscreen_actions.plugin_parameters.enter")}),(0,i.jsx)("div",{className:R.w8,children:(0,y.tx)("fullscreen_actions.plugin_parameters.to_run_plugin")})]})]});if("final"===this.state.activeParameterIndex)return null;let e=this.props.parameters[this.state.activeParameterIndex],t=null;if(this.state.errorMessage?t=(0,i.jsx)("div",{className:P.Tk,children:this.state.errorMessage}):this.state.loadingMessage&&(t=(0,i.jsx)("div",{className:P.Tk,children:this.state.loadingMessage})),0===this.state.items.length)return t;let n=t?this.state.items.length+1:this.state.items.length;return(0,i.jsxs)(O.h,{ref:this.scrollContainerRef,resultCount:n,children:[this.state.items.map((t,n)=>this.renderResult(e,t,n)),t]})}renderCurrentParameters(){let e=this.getCurrentParameter()?.key,t=H(this.props.parameters,this.state.parameterValues,e);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(V,{value:this.state.hidePluginName?void 0:this.props.displayName,icon:function(e,t,n){if(!n)return(0,i.jsx)(_.B,{className:R.nW,svg:D.A,ariaLabel:"plugin icon"});{let s=e[n];return s||(s=t[n]&&(0,k.uF)(t[n])),(0,i.jsx)(N.V,{className:R.nW,plugin:s,alt:"plugin icon"})}}(this.props.allSavedPlugins,this.props.publishedPlugins,this.props.pluginId)},"plugin-name"),t]})}placeholderElement(){let e=this.state.activeParameterIndex,t=this.state.searchQuery.length>0;if("final"===e)return(0,i.jsx)(i.Fragment,{});if("middle"===e){let e=(0,r.WI)(this.props.parameters.map(e=>e.optional?e.name:null)).join(", ");return(0,i.jsx)("span",{ref:this.primaryPlaceholderTextRef,children:(0,y.tx)("fullscreen_actions.plugin_parameters.optional_optional_names",{optionalNames:e})})}{let n=this.props.parameters[e],s=this.props.parameters.slice(e);if(n.optional){let e=s.map(e=>e.name);return t&&(e[0]=""),(0,i.jsx)("span",{ref:this.primaryPlaceholderTextRef,children:e.join(", ")})}{let e=(0,r.WI)(s.map(e=>e.optional?null:e.name)),n=(0,r.WI)(s.map(e=>e.optional?e.name:null));return t&&(e[0]=""),(0,i.jsxs)("span",{children:[(0,i.jsx)("span",{ref:this.primaryPlaceholderTextRef,children:e.join(", ")}),n.length>0&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{className:R.yL,children:"|"},"divider"),(0,i.jsx)("span",{children:(0,y.tx)("fullscreen_actions.plugin_parameters.optional_optional_names",{optionalNames:n.join(", ")})},"optionalParams")]})]})}}}render(){let e=this.getCurrentParameter(),t=e?.description,n=this.placeholderElement(),s="final"===this.state.activeParameterIndex?R.ed:R.Kf,a={minWidth:this.state.placeholderWidth?`${this.state.placeholderWidth}px`:void 0},r=this.renderResults();return(0,i.jsxs)(O.H,{recordingKey:this.props.recordingKey||"",onKeyDown:this.onKeyDown,children:[(0,i.jsxs)("div",{className:P.$P,children:[(0,i.jsx)(_.B,{svg:F.A,className:P.qc}),(0,i.jsxs)("div",{className:R.ON,ref:this.searchBarRef,children:[this.renderCurrentParameters(),(0,i.jsxs)("div",{className:s,children:[(0,i.jsx)("input",{ref:this.searchInputRef,className:R.t6,onChange:this.onSearchChange,value:this.state.searchQuery,maxLength:150,spellCheck:!1,style:a}),(0,i.jsx)("div",{className:R.l4,children:(0,i.jsxs)("div",{className:R.qf,children:[(0,i.jsx)("span",{className:R.CZ,children:this.state.searchQuery}),n]})})]})]})]}),!!t&&(0,i.jsx)("div",{className:u()({[R.WL]:!0,[R.$8]:!r}),children:t}),r]})}}function U(e){let t=(0,a.wA)(),n=(0,a.d4)(e=>e.openFile),s=(0,a.d4)(e=>e.publishedPlugins),r=(0,a.d4)(e=>e.installedPluginVersions.plugins),l=(0,a.d4)(e=>e.localPlugins),o=(0,a.d4)(e=>e.currentUserOrgId?e.orgById[e.currentUserOrgId]:null),d=(0,a.d4)(e=>e.selectedView.editorType),c=(0,a.d4)(e=>(0,j.Eh)(e)),u=(0,a.d4)(e=>e.mirror.appModel.activeTextReviewPlugin),p=(0,a.d4)(e=>(0,j.cb)(e));return(0,i.jsx)(G,{...e,activeTextReviewPlugin:u,allSavedPlugins:r,dispatch:t,editorType:d,localExtensions:l,openFile:n,org:o,publishedPlugins:s,userCanRunExtensions:p,userCanViewPlugins:c})}function V(e){return(0,i.jsxs)("div",{className:R.Io,children:[e.icon&&(0,i.jsx)("span",{children:e.icon}),e.value&&(0,i.jsx)("span",{children:e.value})]})}function H(e,t,n){return e.filter(e=>t[e.key]&&e.key!==n).map(e=>t[e.key]&&t[e.key].name&&(0,i.jsx)(V,{icon:W(t[e.key],R.nW),value:t[e.key].name},e.key))}G.displayName="PluginParameterEntry";class K extends f.o6{constructor(){super(...arguments),this.onClick=f.cZ(this,"click",e=>{if(!this.props.onClick)return f.aH;this.props.onClick(e)})}render(){let e=`${this.props.active?P.ix:P.Ke}`;return(0,i.jsxs)("div",{className:e,onClick:this.onClick,onMouseMove:this.props.onMouseMove,onMouseEnter:this.props.onMouseEnter,children:[(0,i.jsx)("div",{className:P.EA,children:this.props.icon}),(0,i.jsx)("div",{className:R.iu,children:(0,i.jsx)("div",{className:P.D6,children:this.props.suggestion})})]})}}function W(e,t){let n="";if(e.iconUrl)n=e.iconUrl;else if(e.icon&&"string"==typeof e.icon)n="data:image/svg+xml;base64,"+o.aj(e.icon);else{if(!e.icon||"string"==typeof e.icon)return;n="data:application/octet-stream;base64,"+o.lF(e.icon)}return(0,i.jsx)(q,{className:t,src:n})}K.displayName="ParameterSuggestion";class q extends f.o6{render(){let e=new URL(this.props.src);return e.hostname===window.location.hostname?((0,g.$D)(d.e.EXTENSIBILITY_ECOSYSTEM,Error("same-origin URL blocked in UntrustedImage")),(0,i.jsx)(i.Fragment,{})):["https:","http:","data:","blob:"].includes(e.protocol)?(0,i.jsx)("img",{src:this.props.src,className:this.props.className,crossOrigin:"anonymous",alt:""}):((0,g.$D)(d.e.EXTENSIBILITY_ECOSYSTEM,Error("Unexpected protocol blocked in UntrustedImage")),(0,i.jsx)(i.Fragment,{}))}}q.displayName="UntrustedImage"},65389:(e,t,n)=>{n.d(t,{_:()=>m,h:()=>p});var i=n(104076),s=n(716976),a=n(667693),r=n(328341),l=n(652539),o=n(853137),d=n(830224),c=n(521183),u=n(70690);function p({itemPath:e}){let t=s.useRef(null),n=s.useRef(null),o=s.useRef(null),d=s.useRef(null),[p,m]=s.useState("full"),h=(0,r.ZC)(e);s.useLayoutEffect(()=>{(0,a.c2)(e,h)||"full"===p||m("full"),"full"===p&&f()},[h,e,p]);let f=()=>{let e=n.current?.offsetWidth,i=d.current?.offsetWidth,s=o.current?.offsetWidth,a=t.current?.scrollWidth,r=t.current?.clientWidth;void 0!==e&&void 0!==i&&void 0!==s&&a&&r&&r<a&&(e+i>r?m("plugin"):m("path"))};if(1===e.length)return(0,i.jsx)("span",{ref:d,children:e[0]});let g=e.slice(1,e.length-1),x=(0,i.jsx)(l.B,{svg:u.A,className:c.VU,dataTestId:"rightChevron"}),_=(0,i.jsxs)("span",{ref:n,children:["plugin"===p?"...":e[0],x]}),y=(0,i.jsx)("span",{ref:o,children:"plugin"!==p&&(0,i.jsx)(i.Fragment,{children:"path"===p?(0,i.jsxs)(i.Fragment,{children:["...",x]}):g.map((e,t)=>(0,i.jsxs)("span",{children:[e," ",x]},t))})});return(0,i.jsxs)("div",{ref:t,className:c.D6,..."full"!==p?{"data-tooltip-type":"text","data-tooltip":e.join(" > "),"data-tooltip-show-above":!0}:{},children:[_,y,(0,i.jsx)("span",{ref:d,children:e[e.length-1]})]})}function m({runPluginArgs:e,itemParameterArgs:t}){let[n,a]=s.useState(!1),r=s.useRef(null);s.useEffect(()=>{let e=r.current;e&&e.offsetWidth<e.scrollWidth&&!n&&a(!0)},[n]);let l=e.parameterValues;if(l){let e=t.parameters,s=(0,o.Hj)(e,l);return(0,i.jsxs)("div",{className:d.ON,ref:r,"data-testid":"parameter-display",children:[(0,i.jsx)(o.W$,{value:n?void 0:t.displayName},"plugin-name"),s]})}return(0,i.jsx)(i.Fragment,{})}},735194:(e,t,n)=>{n.d(t,{H:()=>u,h:()=>p});var i=n(104076),s=n(716976),a=n(641518),r=n(665261),l=n(849757),o=n(278491),d=n(25870),c=n(521183);class u extends a.o6{constructor(e){super(e),this.onKeyDownFromFullscreen=e=>{e.accept(),this.props.onKeyDown(e.event)},this.onContainerClick=e=>{e.stopPropagation()}}componentDidMount(){super.componentDidMount(),document.addEventListener("keydown",this.props.onKeyDown)}componentWillUnmount(){super.componentWillUnmount(),document.removeEventListener("keydown",this.props.onKeyDown)}render(){let e={left:window.innerWidth/2-200,top:window.innerHeight/8,width:400};return(0,i.jsx)(d.vL,{name:this.props.recordingKey||"",handleKeyDown:this.onKeyDownFromFullscreen,focusOnMount:!0,children:(0,i.jsx)(r.ms,{className:`${c.DU} ${o.Dm}`,style:e,"data-testid":this.props["data-testid"],onClick:this.onContainerClick,children:(0,i.jsx)("div",{children:this.props.children})})})}}class p extends a.o6{constructor(e){super(e),this.scrollContainerRef=s.createRef()}scrollElementAtIndexIntoView(e){if(this.props.resultCount>=10){let t=this.scrollContainerRef.current.getScrollTop(),n=32*e,i=32*e+32;n<t?this.scrollContainerRef.current.scrollTo(n):i>t+304&&this.scrollContainerRef.current.scrollTo(i-304)}}render(){let e=this.props.resultCount,t=Math.min(Math.max(e,1),10);return(0,i.jsxs)(l.P,{ref:this.scrollContainerRef,width:400,height:32*t+(e>=10?-16:8),hideScrollbar:!0,role:this.props.role,contentId:this.props.id,children:[this.props.children,(0,i.jsx)("div",{style:{height:8}})]})}}},317582:(e,t,n)=>{n.d(t,{s:()=>_});var i=n(716976),s=n(237420),a=n(999083),r=n(812714),l=n(513879),o=n(596224),d=n(887555),c=n(511920),u=n(292168),p=n(755893),m=n(977745),h=n(819851),f=n(893393),g=n(912610),x=n(3234);function _(){let e=(0,s.wA)(),t=(0,h.lg)(),[n,_]=(0,i.useState)([]),[y,v]=(0,i.useState)(!1),b=(0,i.useMemo)(()=>{let e=(0,p.Gj)(t);(0,r.kc)().ext_design_plugins_in_sites&&e===p.qq.SITES&&(e=p.qq.DESIGN);let n={resourceType:[u.vt.PLUGIN,u.vt.WIDGET],editorType:e,caller:c.z.SUGGESTED_EXTENSIONS,sortBy:d.e.Browse.POPULAR,includeContent:!0};return[{...n,price:l.C.FREE},{...n,price:l.C.PAID}]},[t]),C=(0,i.useCallback)(async()=>{let e,t;try{[e,t]=await Promise.all([f.M4.fetch(x.a.CommunityResourcesPaginatedQuery(b[0])),f.M4.fetch(x.a.CommunityResourcesPaginatedQuery(b[1]))])}catch(e){v(!1),_([]);return}let n=e.map(e=>(0,o.$9)(e)).filter(e=>!!e),i=t.map(e=>(0,o.$9)(e)).filter(e=>!!e);_((0,a.k4)([...(0,a.k4)(n).slice(0,10),...(0,a.k4)(i).slice(0,5)])),v(!0)},[b]);return(0,i.useEffect)(()=>{C()},[C]),(0,i.useEffect)(()=>{e(m.Qi({publishedPlugins:n,src:"Quick Actions V2 suggested extensions"}))},[n,e]),{loaded:y,extensions:(0,i.useMemo)(()=>n.map(e=>(0,g.Ar)(e)).filter(e=>!!e),[n])}}},870638:(e,t,n)=>{n.d(t,{X:()=>l});var i=n(216294),s=n(266868),a=n(714136);function r(e){return{key:(0,i.ee)(e),isDisabled:!!e.disabled,resultType:e.pluginId||e.pluginLocalFileId?s.l4.EXTENSION:s.l4.ACTION}}function l(e){let t=new Map;e.forEach(e=>{let n=e.category??"";t.has(n)||t.set(n,[]),t.get(n)?.push(e)});let n=[];for(let[e,i]of t.entries())n.push({name:e,actions:i.map(r)});return(0,a.i6)(n)}},289243:(e,t,n)=>{n.d(t,{l:()=>dJ});var i={};n.r(i),n.d(i,{button:()=>oR,buttonContent:()=>oF,buttonText:()=>oD,destructive:()=>oY,destructiveLink:()=>o$,destructiveSecondary:()=>oZ,fauxFocus:()=>oK,icon:()=>oP,largeSize:()=>oG,largeWideSize:()=>oV,link:()=>oQ,outlineStyle:()=>oH,primary:()=>oq,regularSize:()=>oB,secondary:()=>oX,shortcut:()=>oz,signup:()=>oJ,solidStyle:()=>oW,wideSize:()=>oU});var s=n(104076),a=n(716976),r=n(237420),l=n(638004),o=n(498349),d=n(266808),c=n(795033),u=n(140490),p=n(1188),m=n(58212),h=n(842909),f=n(220082),g=n(120640),x=n(288971),_=n(76616),y=n(653899),v=n(965685),b=n(836734),C=n(607532),j=n(4033),k=n(164131),w=n(233420),E=n(16480),T=n(583928),S=n(170956),I=n(266868),N=n(757725),A=n(714136),L=n(798811),M=n(780712),O=n(951002),R=n(276800),P=n(674524),D=n(188220),F=n(221586),z=n(848561),B=n(236631),G=n(192075),U=n(113985),V=n(315910),H=n(211862),K=n(643898),W=n(564914),q=n(461546),X=n(849275),Y=n(854284),Z=n(141330),J=n(725837),Q=n(581133),$=n(72138),ee=n(5885),et=n(946847),en=n(975542),ei=n(881968),es=n(83068),ea=n(572552),er=n(584288),el=n(872419),eo=n(180),ed=n(159134),ec=n(840206),eu=n(527494),ep=n(812714),em=n(776111),eh=n(851824),ef=n(550209),eg=n(124125),ex=n(652539),e_=n(659062),ey=n(260745),ev=n(218329),eb=n(920132),eC=n(843707),ej=n(687849),ek=n(968169),ew=n(74620),eE=n(288747),eT=n(331497),eS=n(912610),eI=n(525972),eN=n(719947),eA=n(437761),eL=n(349311),eM=n(423683),eO=n(564941),eR=n(745859),eP=n(65389),eD=n(216294),eF=n(124348),ez=n(287211);function eB(){return(0,ez.R)(e=>{let t={};for(let n in e.mirror.appModel)(0,eO.vg)(n)&&(t[n]=e.mirror.appModel[n]),"isReadOnly"===n&&(t.isReadOnly=e.mirror.appModel.isReadOnly);return t})}var eG=n(999083),eU=n(160444),eV=n(90383),eH=n(988543),eK=n(814157),eW=n(621592),eq=n.n(eW),eX=n(171660),eY=n(819851),eZ=n(980852),eJ=n(246144),eQ=n(178623);async function e$(e,t,n){let i;return(await eQ.Ay.shared.assistantChat({messages:[...t,e]})).pipeThrough((i={},new TransformStream({async transform(e,t){if(e.choices.length&&(i=function(e,t){let n=(e,t)=>{for(let[i,s]of(e={...e},Object.entries(t)))if(void 0===e[i]||null===e[i]){if(e[i]=s,Array.isArray(e[i]))for(let t of e[i])delete t.index}else if("string"==typeof e[i]&&"string"==typeof s)e[i]+=s;else if("number"==typeof e[i]&&"number"==typeof s)e[i]=s;else if(Array.isArray(e[i])&&Array.isArray(s)){let t=e[i];for(let e=0;e<s.length;e++){let{index:i,...a}=s[e];if(i-t.length>1)throw Error(`Error: An array has an empty value when tool_calls are constructed. tool_calls: ${t}; tool: ${s}`);t[i]=n(t[i],a)}}else"object"==typeof e[i]&&"object"==typeof s&&(e[i]=n(e[i],s));return e};return n(e,t.choices[0].delta)}(i,e),t.enqueue({...i,role:"assistant"}),i.tool_calls&&i.tool_calls.length>0&&"tool_calls"===e.choices[0].finish_reason))for(let e of i.tool_calls){let i=await n(e),s={tool_call_id:e.id,role:"tool",name:e.function.name,content:JSON.stringify(i)};t.enqueue(s)}}})))}var e0=n(408825),e1=n(309581),e2=n(624155),e3=n(297852),e5=n(67779),e4=n(737791),e6=n(306728),e7=n(414191),e8=n(4460),e9=n(176203),te=n(959509),tt=n(649038),tn=n(823539);let ti=e0.z.object({node_id:e0.z.string(),score:e0.z.number(),file_name:e0.z.string(),editor_name:e0.z.string(),editor_img_url:e0.z.string(),last_edited_at:e0.z.string(),url:e0.z.string(),thumbnail_url:e0.z.string(),edit_info:e0.z.object({created_at:e0.z.string(),last_modified:e0.z.string(),last_modified_user:e0.z.string()}).optional(),containing_page_name:e0.z.string(),containing_frame_name:e0.z.string().optional(),fragment_name:e0.z.string(),width:e0.z.number(),height:e0.z.number()}),ts=e0.z.object({type:e0.z.literal("fragments"),status:e0.z.literal("success"),fragments:e0.z.array(ti)}),ta=e0.z.object({type:e0.z.literal("fragments"),status:e0.z.literal("success"),fragments:e0.z.array(ti.pick({score:!0,file_name:!0,editor_name:!0,last_edited_at:!0,containing_page_name:!0,containing_frame_name:!0,fragment_name:!0})),images:e0.z.array(e0.z.string())}),tr=e0.z.object({type:e0.z.literal("selection"),status:e0.z.literal("success"),selectionLength:e0.z.number()}),tl=e0.z.object({type:e0.z.literal("selection"),status:e0.z.literal("success"),selectionLength:e0.z.number(),images:e0.z.array(e0.z.string()),jsx:e0.z.array(e0.z.string())}),to=e0.z.object({type:e0.z.literal("plugin"),status:e0.z.literal("success")}),td=e0.z.object({type:e0.z.literal("plugin"),status:e0.z.literal("success")}),tc=e0.z.object({type:e0.z.literal("assets"),queries:e0.z.array(e0.z.string()),status:e0.z.literal("success"),assets:e0.z.any().array()}),tu=e0.z.object({type:e0.z.literal("assets"),status:e0.z.literal("success"),assets:e0.z.array(e0.z.object({name:e0.z.string(),description:e0.z.string().optional()})),images:e0.z.array(e0.z.string())}),tp=e0.z.object({type:e0.z.literal("request-feature"),status:e0.z.literal("success"),title:e0.z.string(),description:e0.z.string()}),tm=e0.z.object({type:e0.z.literal("request-feature"),status:e0.z.literal("success"),images:e0.z.undefined()}),th=e0.z.object({userFacing:e0.z.union([ts,tr,to,tc,tp]),assistantFacing:e0.z.union([ta,tl,td,tu,tm])});async function tf(e){if("function"!==e.type)throw Error("Unexpected tool_call type:"+e.type);let t=JSON.parse(e.function.arguments),n=c.zl.get(H.ze);if(!n)throw Error("No file key found");switch(e.function.name){case"autocomplete":case"view_user_selection":{let e=eZ.getActiveTSSceneGraph().getCurrentPage()?.directlySelectedNodes??[],t=e?.slice(0,10),n=t.map(e=>{let t=(0,U.T1)(e,U.UF.GPT);if(!t)throw Error("Failed to export thumbnail");return t}),i=t.map(e=>"");return{userFacing:{type:"selection",status:"success",selectionLength:e.length},assistantFacing:{type:"selection",status:"success",selectionLength:e.length,images:n,jsx:i}}}case"visual_search_with_selection":case"search_designs_by_text":{let i=[];if("visual_search_with_selection"===e.function.name){let e=eZ.getActiveTSSceneGraph().getCurrentPage()?.directlySelectedNodes;if(!e||0===e.length)throw Error("No selection found");i=(await (0,U.lc)({type:"input-selection",node:e[0],file_key:n,name:e[0].name})).slice(0,3)}else i=(await (0,U.c)({type:"input-text",value:t.query,file_key:n})).slice(0,3);return{userFacing:{type:"fragments",status:"success",fragments:i},assistantFacing:{type:"fragments",status:"success",fragments:i.map(e=>({score:e.score,file_name:e.file_name,editor_name:e.editor_name,last_edited_at:e.last_edited_at,containing_page_name:e.containing_page_name,containing_frame_name:e.containing_frame_name,fragment_name:e.fragment_name})),images:i.map(e=>e.thumbnail_url)}}}case"search_components_by_text":{let e=t.queries.slice(0,3);if(0===e.length)throw Error("No queries provided");let n=(await Promise.all(e.map(e=>tx(e)))).map(e=>e.slice(0,3)).flat(),i=[],s=[];return n.map(e=>{if(!e.thumbnail_url)return;let t=e.thumbnail_url.startsWith("/")?`${window.location.origin}${e.thumbnail_url}`:e.thumbnail_url;i.push(e),s.push(t)}),{userFacing:{type:"assets",status:"success",queries:t.queries,assets:i},assistantFacing:{type:"assets",status:"success",assets:i.map(e=>({name:e.name,description:e.description})),images:s}}}case"create_figma_plugin":let i=e0.z.object({plugin_code:e0.z.string(),ui_code:e0.z.string().optional()}).safeParse(t);if(!i.success)throw Error("Invalid args: "+i.error.toString());let{plugin_code:s,ui_code:a}=i.data;return tg(s,a);case"edit_file":{let e=e0.z.object({code:e0.z.string()}).safeParse(t);if(!e.success)throw Error("Invalid args: "+e.error.toString());let{code:n}=e.data;return tg(n)}default:throw Error(`No function found for ${e.function.name}`)}}async function tg(e,t){let n=c.zl.get(H.ze),i=(0,te.o8)();if(!i)throw Error("Cannot run plugin while logged out");if(!n)throw Error("No file key found");await (0,e6.wY)();let s=`
    <script src="https://cdn.tailwindcss.com"></script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <script type="text/babel">
    ${t}
    </script>
    <div id="root"></div>
    `,a=t?(0,eS.nx)(e,s):e,r=(0,e6.mv)();return e6.iu.currentPluginRunID=r,(0,e4.E9)({allowedDomains:tt.gH,apiVersion:e5.pS,capabilities:[],stats:new tn.P,checkSyntax:!0,code:a,command:"",disableSilenceConsole:!0,enablePrivatePluginApi:!1,enableProposedApi:!1,errorHandler:R.lQ,isLocal:!0,isWidget:!1,name:"Assistant plugin",openFileKey:n,permissions:eS.qH.forFirstPartyPlugin(),pluginID:"",pluginRunID:r,pluginVersionID:"0",queryMode:!1,showLaunchErrors:!0,showRuntimeErrors:!0,titleIconURL:"",userID:i,vmType:"cppvm",editorType:[eA.FW.FIGMA],incrementalSafeApi:!1,enableNativeJsx:!1}),{userFacing:{type:"plugin",status:"success"},assistantFacing:{type:"plugin",status:"success"}}}async function tx(e){let t=J.D.getState(),n=(0,H.tB)(t),i=(0,e8.vx)(t);if(!n||null==i)throw Error("No open file or file version found");let s=1;for(;!(0,e3.Wg)(J.D.getState())&&s<=50;)await new Promise(e=>setTimeout(e,200*s)),s++;if(!(0,e3.Wg)(J.D.getState()))throw Error("Failed to initialize assets");let a={type:W.IS.ALL},r=(0,e9.yY)((0,eY.XE)((0,e7.h)(t))),l=c.zl.get(e1.qp);t=J.D.getState();let o={type:"input-text",query:e,assetTypeOption:a,isKnownLibrary:e=>!0,openFile:(0,H.tB)(t),selectedView:(0,e7.h)(t),inDesignEditor:r,fileVersion:i,currentOrgId:(0,e2.eD)(t),fileByKey:(0,e8.t_)(t),libraryByLibraryKey:l,includeVisualAssets:!1,usedAssetKeys:(0,e2.ET)(t,J.D.dispatch)};e3.YG.refreshSourcesIfNeeded(J.D);let d=await e3.YG.computeResultsReduxSearchTypeHelper(e,a,r,l,null),u=d.normalizedSearchResults;return u=d.normalizedSearchResults.filter(e=>o.isKnownLibrary(e)),(0,e3.Ow)(u)}var t_=(e=>(e.Idle="idle",e.Loading="loading",e.Error="error",e))(t_||{});let ty=(0,c.eU)({status:"idle",messages:[]});async function tv(e,t,n,i){try{let s;let a=eZ.getActiveTSSceneGraph().getCurrentPage()?.directlySelectedNodes,r="string"==typeof e?{role:"user",content:[{type:"text",text:`<user_message><user_input>${e}</user_input><selected_layer_ids>${a&&JSON.stringify(a.map(e=>e.guid))}</selected_layer_ids></user_message>`}]}:e;n(e=>({...e,status:t_.Loading,messages:[...e.messages,r]}));let l=[];for(let e of t){let t=function(e){if("tool"!==e.role)return e;let t=e.content,n="string"==typeof t?JSON.parse(t):t,i=th.parse(n).assistantFacing,s=i.type;switch(s){case"selection":case"assets":case"fragments":let{images:a,...r}=i;return{...e,content:JSON.stringify(r)};case"plugin":case"request-feature":return e;default:(0,O.xb)(s)}}(e);l.push(t)}let o=(await e$(r,l,i)).getReader();for(;;){let{done:e,value:t}=await o.read();if(e){n(e=>({...e,status:t_.Idle}));break}let{sendFollowup:i,newMessages:a}=function(e){if("tool"!==e.role)return{sendFollowup:!1,newMessages:[]};let t=e.content,n="string"==typeof t?JSON.parse(t):t,i=th.parse(n),s=i.assistantFacing.type;switch(s){case"selection":case"assets":case"fragments":return{sendFollowup:!0,newMessages:[{role:"user",content:[{type:"text",text:"\x3c!-- The tool call showed me the following images: --\x3e"},...i.assistantFacing.images.map(e=>({type:"image_url",image_url:{url:e.startsWith("http")?e:`data:image/jpeg;base64,${e}`,detail:"high"}}))]}]};case"plugin":case"request-feature":return{sendFollowup:!1,newMessages:[]};default:(0,O.xb)(s)}}(t);a.length>0&&i&&(s=a[a.length-1]),n(e=>"string"==typeof t.content&&0===t.content.length||t.role!==e.messages[e.messages.length-1]?.role?{status:t_.Loading,messages:[...e.messages,t,...a]}:{status:t_.Loading,messages:[...e.messages.slice(0,-1),t,...a]})}s&&tv(s,c.zl.get(ty).messages,n,i)}catch(e){(0,eJ.Lo)("Send chat message failed: ",e.message),n(e=>({...e,status:t_.Error}))}}var tb=n(904017),tC=n(790628),tj=n(419822),tk=n(481710);let tw=(0,a.memo)(function(e){return(0,s.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,"data-fpl-icon-size":"24L",children:(0,s.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",d:"M11.5 5a6.5 6.5 0 0 1 4.935 10.728l3.419 3.419a.5.5 0 1 1-.707.707l-3.42-3.42A6.5 6.5 0 1 1 11.5 5m0 1a5.5 5.5 0 1 0 0 11 5.5 5.5 0 0 0 0-11m-.485 2.44c.126-.505.844-.505.97 0l.515 2.06 2.06.515c.505.126.505.844 0 .97l-2.06.515-.515 2.06c-.126.505-.844.505-.97 0L10.5 12.5l-2.06-.515c-.505-.126-.505-.844 0-.97l2.06-.515z"})})});var tE=n(998987),tT=n(793498),tS=n(247172),tI=n(217380),tN=n(954068),tA=n(467735),tL=n(784220),tM=n(858959),tO=n(366535),tR=n(592726),tP=n(763286),tD=n(85955),tF=n(651548),tz=n(611873),tB=n(412184),tG=n(782430),tU=n(293422),tV=n(361170),tH=n(959834),tK=n(643330);function tW({url:e}){return(0,s.jsx)("img",{src:e,className:B.s.maxW100.$,alt:"debug"})}function tq(e){let{obj:t,depth:n=0}=e;if(null===t)return(0,s.jsx)("span",{className:B.s.colorTextTertiary.$,children:(0,G.t)("assistant.debug.null")});if("object"!=typeof t){if("string"==typeof t){if(t.startsWith("{")&&t.endsWith("}"))try{let e=JSON.parse(t);return(0,s.jsx)(tq,{obj:e,depth:n})}catch(e){}return t.startsWith("data:image")?(0,s.jsx)(tW,{url:t}):t.length>300&&t.match(/^([A-Za-z0-9+/]{4})*([A-Za-z0-9+/]{3}=|[A-Za-z0-9+/]{2}==)?$/)?(0,s.jsx)(tW,{url:`data:image/jpeg;base64,${t}`}):(0,s.jsxs)("span",{className:B.s.colorTextSuccess.$,children:['"',t,'"']})}return"number"==typeof t?(0,s.jsx)("span",{className:B.s.colorTextSelected.$,children:t}):"boolean"==typeof t?(0,s.jsx)("span",{className:B.s.colorTextComponent.$,children:t.toString()}):(0,s.jsx)("span",{children:t})}let i=Array.isArray(t),a=i?["[","]"]:["{","}"],r=Object.entries(t);return(0,s.jsxs)("div",{style:{marginLeft:`${8*n}px`},children:[a[0],r.length>0&&(0,s.jsx)("div",{children:r.map(([e,t],a)=>(0,s.jsxs)("div",{children:[!i&&(0,s.jsx)("span",{className:B.s.colorTextDanger.$,children:`"${e}:" `}),(0,s.jsx)(tq,{obj:t,depth:n+1}),a<r.length-1&&","]},e))}),a[1]]})}function tX(e){let{data:t}=e;return(0,s.jsx)("pre",{contentEditable:!0,className:"font-mono text-sm select-all text-wrap",children:(0,s.jsx)(tq,{obj:t})})}function tY({messages:e}){return(0,s.jsx)("div",{children:(0,s.jsx)("div",{className:B.s.px2.py2.$,children:(0,s.jsx)(tX,{data:e})})})}let tZ=(0,tH.Ju)(function({messages:e}){let t=(0,r.wA)();return(0,s.jsx)(tK.Ao,{onClose:()=>{t(tO.AS())},initialPosition:new tV.Mi(0,0),initialWidth:400,allowResizeWidth:!0,autoflowHeight:!0,title:(0,G.t)("assistant.debug.title"),dragHeaderOnly:!0,children:(0,s.jsxs)("div",{className:B.s.px2.py2.$,style:{height:600,overflowX:"scroll",overflowY:"scroll"},children:[(0,s.jsx)(tU.$n,{onClick:()=>{navigator.clipboard.writeText(JSON.stringify(e,void 0,2))},children:(0,G.t)("assistant.debug.copy_all")}),(0,s.jsx)(tY,{messages:e})]})})},"AiChatPrototypeDebugModal",tH.ZU.YES);function tJ(){let[e,t]=a.useState(""),[n,i]=(0,c.fp)(ty),l=(0,r.wA)(),o=(0,r.d4)(e=>e.modalShown);(0,X.b)();let d=a.useCallback(()=>{if(o&&o.type===tZ.type){l(tO.AS());return}l(tO.to({type:tZ,data:{messages:n.messages}}))},[n.messages,l,o]);a.useEffect(()=>{o?.type!==tZ.type||l(tO.hm({type:tZ.type,data:{messages:n.messages}}))},[n.messages,l,o]);let u=a.useCallback(()=>{"/debug"===e?d():tv(e,n.messages,i,tf),t("")},[e,n.messages,i,d]);return(0,s.jsxs)(ei.n,{height:Z.wC,hideActionPanel:!0,children:[(0,s.jsx)(ei.n.Body,{children:0===n.messages.length?(0,s.jsx)(tQ,{}):(0,s.jsx)(tz.q,{stretchContent:!1,useBottomPinning:!0,enableScrollShadow:!0,children:(0,s.jsxs)("div",{className:B.s.py8.flex.flexColumn.gap4.$,children:[n.messages.map((e,t)=>(0,s.jsx)(t3,{message:e},`msg-${t}`)),(0,s.jsx)("div",{style:{marginLeft:"44px",marginRight:"12px"},children:(0,s.jsx)(t1,{status:n.status})})]})})}),(0,s.jsx)(ei.n.Footer,{children:(0,s.jsx)(es.vj,{placeholder:(0,G.t)("fullscreen_actions.assistant-chat"),searchQuery:e,onSearchChange:t,endEnhancer:(0,s.jsx)(tD.r,{shortcuts:[{key:F.Uz.ENTER}],onAction:u,disabled:0===e.length||n.status===t_.Loading,children:(0,G.t)("assistant.chat.send_message")})})})]})}function tQ(){return(0,s.jsxs)("div",{className:B.s.flex.flexColumn.itemsCenter.justifyEnd.hFull.gap8.$,children:[(0,s.jsx)(tk.J,{}),(0,s.jsxs)("div",{className:B.s.flex.flexRow.gap16.$,children:[(0,s.jsx)("div",{className:B.s.flex.flexColumn.itemsCenter.flexGrow1.gap8.$,children:(0,s.jsxs)(t$,{inputToSend:"Find similar designs to my selection",children:[(0,s.jsx)(tw,{}),"Find designs"]})}),(0,s.jsxs)("div",{className:B.s.flex.flexColumn.itemsCenter.flexGrow1.gap8.$,children:[(0,s.jsxs)(t$,{inputToSend:"Make a plugin that creates rectangles in a grid",children:[(0,s.jsx)(tE.m,{}),(0,G.t)("assistant.chat.suggestion.make_tool")]}),(0,s.jsxs)(t$,{inputToSend:"",disabled:!0,children:[(0,s.jsx)(tT.X,{}),(0,G.t)("assistant.chat.suggestion.coming_soon")]})]})]})]})}function t$({children:e,inputToSend:t,disabled:n}){let[i,r]=(0,c.fp)(ty),l=a.useCallback(()=>{tv(t,i.messages,r,tf)},[t,i.messages,r]);return(0,s.jsx)("button",{className:B.s.flex.flexColumn.justifyEnd.wFull.b1.colorBorder.gap8.textBodyLargeStrong.p12.if(n,B.s.colorTextSecondary).$,style:{borderRadius:13,minWidth:150,...n&&{"--color-icon":"var(--color-text-secondary)"}},onClick:l,disabled:n,children:e})}function t0({children:e}){return(0,s.jsx)("div",{className:B.s.flex.flexRow.itemsCenter.wFull.b1.colorBorder.gap8.h40.textBodyLargeStrong.px4.mr12.$,style:{borderRadius:13},children:e})}function t1({status:e}){let t;switch(e){case t_.Idle:t=null;break;case t_.Loading:t=(0,s.jsxs)(t0,{children:[(0,s.jsx)("div",{className:B.s.pl4.flex.itemsCenter.justifyCenter.$,children:(0,s.jsx)(tj.k,{})}),(0,s.jsx)("div",{className:B.s.colorTextSecondary.$,children:(0,G.t)("assistant.chat.status.loading")})]});break;case t_.Error:t=(0,s.jsxs)(t0,{children:[(0,s.jsx)(tS.e,{}),(0,G.t)("assistant.chat.status.error")]});break;default:(0,O.xb)(e)}return(0,s.jsx)(tL.N,{mode:"popLayout",initial:!1,children:(0,s.jsx)(tM.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:t},e)})}function t2(e){let t=a.useRef(null),n=(0,r.d4)(H.tB);try{let i=e.content,a="string"==typeof i?JSON.parse(i):i,{userFacing:r}=th.parse(a);if("fragments"===r.type){let e=r.fragments.map(e=>({...e,type:"fig-file-fragment"}));return(0,s.jsx)(tG.U,{fragments:e,focusHandle:t,numberOfGridColumns:3,maxResults:3,entryPoint:U.G4.ACTIONS_LIST,disableActionShortcuts:!0})}if("assets"===r.type)return(0,s.jsx)(tF.x,{primary:!0,columns:3,padding:8,gap:12,children:r.assets.map((e,t)=>(0,s.jsx)(tB.a,{asset:e,assetTypeDropdownSelection:W.IS.ALL,disableActionShortcuts:!0,libraryNameByLibraryKeyFromLG:{},openFileKey:n?.key??"",queryId:"",searchQuery:r.queries[0],searchSessionId:c.zl.get(w.dd)??"",sectionPosition:t},t))});if("selection"===r.type)return(0,s.jsxs)(t0,{children:[(0,s.jsx)(tI.W,{}),(0,G.t)("assistant.chat.tool_result.selection.success")]});if("request-feature"===r.type)return(0,s.jsxs)(t0,{children:[(0,s.jsx)(tI.W,{}),(0,G.t)("assistant.chat.tool_result.feature_request")]});return(0,s.jsxs)(t0,{children:[(0,s.jsx)(tN.g,{}),(0,G.t)("assistant.chat.tool_result.success")]})}catch(e){return(0,s.jsxs)(t0,{children:[(0,s.jsx)(tS.e,{}),(0,G.t)("assistant.chat.tool_result.error")]})}}function t3({message:e}){let t=(0,tR.iZ)();return"user"===e.role&&"string"!=typeof e.content&&e.content?.length&&e.content[0]?.type==="text"&&e.content[0].text.startsWith("\x3c!--")||"assistant"===e.role&&!e.content||"tool"===e.role&&!e.content?null:(0,s.jsx)("div",{className:B.s.px12.py4.flex.wFull.$,children:(0,s.jsxs)("div",{className:B.s.gap8.flex.wFull.$,children:[(0,s.jsx)("div",{className:B.s.w24.h24.flexShrink0.flex.itemsCenter.justifyCenter.$,children:"assistant"===e.role||"tool"===e.role?(0,s.jsx)(tk.J,{}):t?.img_url?(0,s.jsx)(tP.J,{src:t.img_url,className:B.s.w16.h16.radiusFull.$}):(0,s.jsx)(tA.j,{})}),(0,s.jsxs)("div",{className:B.s.flex.flexColumn.wFull.pt2.$,children:[(0,s.jsx)("span",{className:B.s.textBodyLargeStrong.$,children:"assistant"===e.role||"tool"===e.role?"Figma":"You"}),"tool"===e.role?(0,s.jsx)("div",{className:B.s.wFull.pt4.$,children:(0,s.jsx)(t2,{...e})}):"string"==typeof e.content?(0,s.jsx)(t5,{text:e.content}):(0,s.jsx)("div",{children:null===e.content?null:e.content.map((e,t)=>"text"===e.type?(0,s.jsx)(t5,{text:e.text},`sub-t-${t}`):null)})]})]})})}function t5({text:e}){let t=e;try{let n=new DOMParser().parseFromString(e,"text/xml").getElementsByTagName("user_input");n.length>0&&(t=n[0].textContent||"")}catch{}return(0,s.jsx)("div",{children:t.split("\n").map((e,t)=>(0,s.jsxs)("span",{children:[e,(0,s.jsx)("br",{})]},`l-${t}`))})}var t4=n(38119),t6=n(912707),t7=n(466084),t8=n(243416),t9=n(328341),ne=n(598626),nt=n(76365),nn=n(403950),ni=n(415567),ns=n(873442);let na=(0,a.memo)(function(e){return(0,s.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,"data-fpl-icon-size":"24",children:(0,s.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",d:"M16.5 11a.5.5 0 0 1 .5.5v6a1.5 1.5 0 0 1-1.5 1.5h-7A1.5 1.5 0 0 1 7 17.5v-3a.5.5 0 0 1 1 0v3a.5.5 0 0 0 .5.5h7a.5.5 0 0 0 .5-.5v-6a.5.5 0 0 1 .5-.5m-6.353-.854a.5.5 0 0 1 .707 0l2 2a.5.5 0 0 1 0 .707l-2 2a.5.5 0 1 1-.707-.707L11.293 13H5.5a.5.5 0 0 1 0-1h5.793l-1.146-1.146a.5.5 0 0 1 0-.707m2.45-5.136a.5.5 0 0 1 .257.136l4 4A.5.5 0 0 1 16.5 10h-4a.5.5 0 0 1-.5-.5V6H8.5a.5.5 0 0 0-.5.5v4a.5.5 0 0 1-1 0v-4A1.5 1.5 0 0 1 8.5 5h4zM13 9h2.293L13 6.707z"})})});var nr=n(783728),nl=n.n(nr),no=n(654e3),nd=n.n(no);function nc(){let e=(0,r.d4)(e=>e.mirror?.appModel);return(t,n,i=!1)=>{let s=t[n];if(s&&(i||!s.disabled&&(!s.action||(0,eO.Yh)(e,n))))return s}}function nu(e){switch(e){case ns.b.RECENTS:return 0;case ns.b.ORGANIZE:return 1;case ns.b.TEMPLATES_AND_DIAGRAMS:return 2;case ns.b.IMAGE_EDITING:return 3;case ns.b.DESIGN_TOOLS:return 4;case ns.b.RIFFING_AND_WRITING:return 5;case ns.b.COLLABORATION_TOOLS:return 6;case ns.b.HANDOFF_TOOLS:return 7;case ns.b.VIEWER_TOOLS:return 8;case ns.b.SUGGESTIONS:return 9;case ns.b.COMMON_SETTINGS:return 10;case null:return 100;default:return(0,O.xb)(e)}}var np=n(281599),nm=n(913834),nh=n(315361),nf=n(84463),ng=n(259358),nx=n(304434),n_=n(634717);let ny=new Set([Z.JT.REMOVE_BACKGROUND,Z.JT.UPSCALE_IMAGE]),nv=new Set([...ny,Z.JT.EDIT_IMAGE,Z.JT.EXPAND_IMAGE]);var nb=(e=>(e[e.NONE=0]="NONE",e[e.MULTI_IMAGE=1]="MULTI_IMAGE",e[e.SINGLE_IMAGE=2]="SINGLE_IMAGE",e[e.IMAGE_PLACEHOLDER=3]="IMAGE_PLACEHOLDER",e))(nb||{});let nC=new Map([[Z.JT.REMOVE_BACKGROUND,ns.b.IMAGE_EDITING],[Z.JT.UPSCALE_IMAGE,ns.b.IMAGE_EDITING],[Z.JT.EXPAND_IMAGE,ns.b.IMAGE_EDITING],[Z.JT.REMOVE_OBJECT,ns.b.IMAGE_EDITING],[Z.JT.SEPARATE_OBJECT,ns.b.IMAGE_EDITING],[Z.JT.GENERATE_IMAGE,ns.b.IMAGE_EDITING],[Z.JT.EDIT_IMAGE,ns.b.IMAGE_EDITING],[Z.JT.VECTORIZE_IMAGE,ns.b.IMAGE_EDITING],[Z.JT.AUTO_RENAME_LAYERS,ns.b.DESIGN_TOOLS],[Z.JT.CONTENT_FILL,ns.b.DESIGN_TOOLS],[Z.JT.FIND_INSPIRATION,ns.b.DESIGN_TOOLS],[Z.JT.FIRST_DRAFT,ns.b.DESIGN_TOOLS],[Z.JT.FIRST_DRAFT_FINE_TUNE,ns.b.DESIGN_TOOLS],[Z.JT.MAGIC_LINK,ns.b.DESIGN_TOOLS],[Z.JT.MAKE_EDITS,ns.b.DESIGN_TOOLS],[Z.JT.REWRITE_TEXT,ns.b.RIFFING_AND_WRITING],[Z.JT.SLIDES_GENERATE_SPEAKER_NOTES,ns.b.RIFFING_AND_WRITING],[Z.JT.SLIDES_REWRITE_TEXT,ns.b.RIFFING_AND_WRITING],[Z.JT.SHORTEN_TEXT,ns.b.RIFFING_AND_WRITING],[Z.JT.TRANSLATE_TEXT,ns.b.RIFFING_AND_WRITING],[Z.JT.WHITEBOARD_GENERATE_CONTENT,ns.b.TEMPLATES_AND_DIAGRAMS],[Z.JT.SUMMARIZE_STICKIES,ns.b.ORGANIZE],[Z.JT.SORT_STICKIES_BY_TOPIC,ns.b.ORGANIZE],[Z.JT.MIND_MAP_GENERATE_IDEAS,ns.b.TEMPLATES_AND_DIAGRAMS],[Z.OZ,ns.b.DESIGN_TOOLS],[Z.Ax,ns.b.DESIGN_TOOLS]]),nj=[["set-tool-comments",ns.b.COLLABORATION_TOOLS],["present-as-prototype",ns.b.COLLABORATION_TOOLS],["set-tool-measure",ns.b.HANDOFF_TOOLS],["set-tool-annotate",ns.b.HANDOFF_TOOLS],["zoom-to-fit",ns.b.VIEWER_TOOLS],["export-selected-exportables",ns.b.VIEWER_TOOLS],["copy-as-png",ns.b.VIEWER_TOOLS]],nk=[["theme-light-mode",ns.b.COMMON_SETTINGS],["theme-dark-mode",ns.b.COMMON_SETTINGS],["theme-system",ns.b.COMMON_SETTINGS]],nw=[["request-to-edit",ns.b.COLLABORATION_TOOLS],["set-tool-comments",ns.b.COLLABORATION_TOOLS],["present-as-prototype",ns.b.COLLABORATION_TOOLS],["zoom-to-fit",ns.b.VIEWER_TOOLS],["page-next",ns.b.VIEWER_TOOLS],["export-selected-exportables",ns.b.VIEWER_TOOLS],["toggle-rulers",ns.b.VIEWER_TOOLS]];var nE=(e=>(e.DESIGN_EDITOR_AI="DESIGN_EDITOR_AI",e.DESIGN_EDITOR_NO_AI="DESIGN_EDITOR_NO_AI",e.DESIGN_VIEWER="DESIGN_VIEWER",e.DEV_MODE="DEV",e.VARIABLES_TABLE="VARIABLES_TABLE",e.NONE="NONE",e))(nE||{});function nT(){let e=d.Ez5?.singleSlideView().isFocusedNodeViewFocused(),t=(0,ni.Vr)(),n=(0,r.d4)(nt.Sh);return(!t||!t.isSlide||!e)&&n.length>0}function nS(e,t){let n=(0,r.d4)(e=>e.selectedView);return a.useMemo(()=>new nn.xm(e,n,t,{includeDisabled:!0,acceptsUnicode:!0}),[e,n,t])}var nI=n(520843);n(120440);var nN=n(21791),nA=n(371843),nL=n(54092),nM=n(835307),nO=n(208740),nR=n(193460),nP=n(962856),nD=n(944350),nF=n(520054);function nz({children:e}){return(0,s.jsxs)("div",{className:"x78zum5 x1q0g3np x6s0dn4 xg2d0mh",children:[e,(0,s.jsx)(nP.E,{variant:"brandOutline",children:(0,G.tx)("fullscreen_actions.new")})]})}var nB=n(569565),nG=n(716438),nU=n(80484),nV=n(529652),nH=n(806158),nK=n(360677);let nW=(0,a.memo)(function(e){return(0,s.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,"data-fpl-icon-size":"24",children:(0,s.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",fillRule:"evenodd",d:"M16.5 6A1.5 1.5 0 0 1 18 7.5v6a.5.5 0 0 1-1 0V10h-6v7h2.5a.5.5 0 0 1 0 1h-6A1.5 1.5 0 0 1 6 16.5v-9A1.5 1.5 0 0 1 7.5 6zM10 17v-7H7v6.5a.5.5 0 0 0 .5.5zM7 9h10V7.5a.5.5 0 0 0-.5-.5h-9a.5.5 0 0 0-.5.5zm9.7 7.7.315-1.26c.126-.505.844-.505.97 0l.315 1.26 1.26.315c.505.126.505.844 0 .97l-1.26.315-.315 1.26c-.126.505-.844.505-.97 0L16.7 18.3l-1.26-.315c-.505-.126-.505-.844 0-.97z",clipRule:"evenodd"})})});var nq=n(693333),nX=n(31707),nY=n(394531),nZ=n(728458),nJ=n(970949),nQ=n(330163),n$=n(241443),n0=n(38660),n1=n(950997),n2=n(203775),n3=n(34192),n5=n(558466),n4=n(894417),n6=n(721358),n7=n(984588),n8=n(864881),n9=n(744695),ie=n(17140),it=n(354114),ii=n(945858),is=n(205088),ia=n(736489),ir=n(640168),il=n(704726),io=n(191482),id=n(153477),ic=n(831104),iu=n(572253),ip=n(125715),im=n(5822),ih=n(913105),ig=n(290407),ix=n(488782),i_=n(508158),iy=n(911277),iv=n(609762),ib=n(242498),iC=n(325164);function ij({action:e,actionType:t,actionIcon:n,actionLabel:i,instructionLabel:a}){let[r]=(0,c.fp)(im.hQ),l=(0,ib.s)(e),{close:o}=(0,S.cq)(),d=(0,ee._M)({action:e,clientLifecycleId:void 0});return r?(o(),null):e&&l.state!==ib.w.SELECTION_OK?(0,s.jsx)(iC.AE,{action:e,actionIcon:n,actionLabel:i,onPerform:()=>{l.confirmInitialSelection(),(0,im.J7)(t),o()},aiTrackingContext:d,instructionAction:{type:"learn_more",url:Z.UW},children:a}):null}var ik=n(523625),iw=n(854708),iE=n(198038),iT=n(363016),iS=n(645259),iI=n(673611),iN=n(788184);let iA=async({params:{mermaidText:e}})=>{if(!(0,ep.kc)().figjam_mermaid_to_diagram)return;let t=await (0,iN.o)(e,(0,ep.kc)().figjam_mermaid_preprocess_connector_text??!1,(0,ep.kc)().figjam_mermaid_preprocess_subgraph_text??!1,(0,ep.kc)().figjam_mermaid_preprocess_replace_classname_end??!1);if(!t)throw Error("Unable to correctly read mermaid text");(0,iI.F9)(t)};var iL=n(157294),iM=n(645443),iO=n(998432),iR=n(88314),iP=n(322530),iD=n(58599),iF=n(170627),iz=n(824570),iB=n(511570),iG=n.n(iB),iU=n(357524),iV=n(910445),iH=n(883765),iK=n(770522),iW=n(770366),iq=n(641518),iX=n(978354);function iY(e,t){return(0,iX.YJ)({nodeIds:Object.keys(e),options:{skipNodeIds:!1,detachInstances:!0,includeType:!0,skipNodeIdsWithoutType:t,classPropName:"class",autoLayoutTagName:"div",frameTagName:"div"}})}var iZ=n(880875),iJ=n(359166);let iQ="first_draft_prompt_history_";var i$=n(920498),i0=n(297293);async function i1(e,t,n){let i=(0,eZ.getActiveTSSceneGraph)();for(let s of n.flatMap(e=>e.nodeWeightInfos)){let n=i.get(s.nodeId);if(!n)continue;let a=function(e,t,n,i){if(!i0.z[t])return;let s=i0.z[e];if(s)return s[n][i]}(t,n.fontName.family,e,s.weight),r={family:t,style:a?.style??n.fontName.style};try{await (0,i$.uW)(r),iF.l7.user("first-draft-theme-modal-adjust-font-family",()=>{n.fontName=r})}catch(i){let e={family:t,style:"Regular"};try{await (0,i$.uW)(e),iF.l7.user("first-draft-theme-modal-adjust-font-family",()=>{n.fontName=e})}catch(t){let e=void 0===t?"undefined":t instanceof Error?t.message:JSON.stringify(t);iH.az.trackDefinedEvent("ai_generation.first_draft_font_error",{error:e,family:r.family,style:r.style,location:"adjust-font"})}}iF.l7.user("first-draft-theme-modal-adjust-font-family",()=>{a?.letterSpacing!==void 0&&(n.letterSpacing=a.letterSpacing)})}}var i2=n(583516),i3=n(950836),i5=n(393470),i4=n(775428),i6=n(260776),i7=n(306184),i8=n(376314),i9=n(128982),se=n(480135),st=n(538152);let sn=new se.q(40);async function si({changes:e,makeChangesSessionId:t,clientLifecycleId:n,containingNodeId:i,instrumentationRef:s}){let a=(0,eZ.getActiveTSSceneGraph)().get(e.affectedId);if(!a)return!1;let r=`${t}:${e.affectedId}`;if(sn.has(r))return(0,ef.$D)(l.e.AI_GENERATION,Error("first-draft: Attempted to apply content changes twice"),{extra:{clientLifecycleId:n}}),!1;if(sn.set(r,!0),!a.getSharedPluginData("jsx","isImage"))return iF.l7.ai("first-draft-iterate-text-content",()=>(function({node:e,textContent:t}){return"TEXT"!==e.type?((0,eJ.xi)("first-draft","Update text called on a non-text node",{nodeId:e.guid,nodeType:e.type}),!1):(e.characters=t,!0)})({node:a,textContent:e.content})),!0;{let t=a.getSharedPluginData("jsx","background");return await s.current.logImageLoad(()=>(0,st.Og)({node:a,description:e.content,background:t,clientLifecycleId:n,containingNodeId:i,endpoint:eQ.Ay.design.firstDraftCreateImage})),!0}}async function ss(e,t){try{let{parseJSX:i}=await Promise.resolve().then(n.bind(n,249890));return i(e,t)}catch{return null}}var sa=n(289798),sr=n(127123);async function sl({action:e,insertJSX:t,options:{dsKitKey:n,currentTheme:i,imageArgs:s,rootNodeId:a}}){try{let{affectedId:r,jsxToInsert:l}=e,o=(0,eZ.getActiveTSSceneGraph)().get(r);if(!o)throw Error("Could not find affected node in the scene");let d=(0,eZ.getActiveTSSceneGraph)().get(a);if(!d)throw Error("Could not find root node in the scene");let c=(0,i7.BY)(d),u=o.parentNode;if(!u)throw Error("Could not find affected node in the scene");let p=u.childrenGuids.indexOf(r);if(-1===p)throw Error("Could not find affected node in the scene");let m="below";"insert"===e.type&&(m=e.insertBehavior);let h=await ss(l);if(!h||0===h.length)throw Error("Failed to parse JSX");let f=(0,sa.fv)(h);if(0===f.size)throw Error("Only building blocks can be inserted or replaced");await t({jsxStr:"```jsx\n"+l+"\n```",options:{...(0,sr.Dp)(),insertBehavior:"inline",dsKitKey:n,themeProperties:i,deviceType:c,parentNodeId:u.guid,insertAtIndex:"above"===m?p:p+1,imageArgs:s}}),"replace"===e.type&&iF.l7.ai("first-draft-make-changes-remove",()=>{o.removeSelfAndChildren()})}catch(t){throw(0,ef.$D)(l.e.AI_GENERATION,t,{extra:{action:e,dsKitKey:n}}),t}}var so=n(731930),sd=n(638871);function sc(){let e=(0,ew.eY)(),t=Object.entries((0,ew.KH)()).filter(([e,t])=>t).map(([e])=>e),n=null;for(let i of t)if(n=function(t){let n="",i=t;for(;!n&&i;){let t=e.get(i);if(!t)break;t.getSharedPluginData(sd.SV,"userPrompt")&&(n=i),i=t.parentGuid||""}return n||null}(i))break;return n}var su=n(431222),sp=n(888760),sm=n(40114);function sh(){return(0,s.jsx)("div",{className:"animation_overlay--Sweep--yk3ZW"})}var sf=n(577021),sg=n(598369),sx=n(994224),s_=n(13123),sy=n.n(s_),sv=(e=>(e.mobile="MOBILE",e.web="WEB",e))(sv||{});function sb(e=1){let t=[{label:(0,G.t)("first_draft.make_changes.prompt_labels.change_font"),prompt:(0,G.t)("first_draft.make_changes.prompts.futuristic_font")},{label:(0,G.t)("first_draft.make_changes.prompt_labels.colors"),prompt:(0,G.t)("first_draft.make_changes.prompts.calming_colors")},{label:(0,G.t)("first_draft.make_changes.prompt_labels.round_corners"),prompt:(0,G.t)("first_draft.make_changes.prompts.round_corners")},{label:(0,G.t)("first_draft.make_changes.prompt_labels.colors"),prompt:(0,G.t)("first_draft.make_changes.prompts.watermelon_theme")},{label:(0,G.t)("first_draft.make_changes.prompt_labels.rewrite"),prompt:(0,G.t)("first_draft.make_changes.prompts.punchier_text")},{label:(0,G.t)("first_draft.make_changes.prompt_labels.imagery"),prompt:(0,G.t)("first_draft.make_changes.prompts.vibrant_images")},{label:(0,G.t)("first_draft.make_changes.prompt_labels.add"),prompt:(0,G.t)("first_draft.make_changes.prompts.add_another_section")},{label:(0,G.t)("first_draft.make_changes.prompt_labels.replace"),prompt:(0,G.t)("first_draft.make_changes.prompts.replace_hero_image")}];return eq()(sy()(t.filter(e=>""!==sC(e.label))),e=>e.label).slice(0,e)}function sC(e){return e.trim().toLowerCase()}var sj=n(224781),sk=n(336518),sw=n(452981),sE=n(177833),sT=n(420680),sS=n(694034),sI=n(572927),sN=n(739713),sA=n(373547),sL=n(859277),sM=n(32331),sO=n(62814),sR=n(502733),sP=n(468779),sD=n(943098);function sF({children:e}){let t=(0,a.useRef)(null),{tracker:n,index:i}=(0,sR.L0)(t),r=a.useMemo(()=>({trackerRef:n,layoutIndex:i}),[i,n]);return(0,s.jsx)(sR.MQ.Provider,{value:r,children:e})}let sz=a.createContext({isFocused:!1});function sB({children:e,defaultActiveIndex:t=0,itemsPerRow:n}){let i=(0,a.useRef)(null),[r,l]=a.useState(!1);a.useEffect(()=>{let e=()=>i.current?.blur();return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),a.useEffect(()=>{let e=i.current;if(!e)return;let t=()=>l(!0),n=()=>l(!1);return e.addEventListener("focus",t),e.addEventListener("blur",n),()=>{e.removeEventListener("focus",t),e.removeEventListener("blur",n)}},[]);let o=(0,a.useMemo)(()=>({isFocused:r,itemsPerRow:n}),[r,n]);return(0,s.jsx)(sO._,{fillWidth:!0,children:(0,s.jsx)("div",{className:"keyboard_navigation_on_focus--parent--XamDV",tabIndex:0,ref:i,children:(0,s.jsx)(sF,{children:(0,s.jsx)(sD.A.Provider,{value:t,children:(0,s.jsx)(sz.Provider,{value:o,children:e})})})})})}function sG({children:e,primaryAction:t,className:n,htmlAttributes:i,...r}){let l=(0,a.useRef)(null),{isFocused:o,itemsPerRow:d}=a.useContext(sz),{active:c,target:u}=(0,sM.H)({ref:l,itemsPerRow:d}),p=a.useCallback(()=>{o&&t()},[o,t]),m=(0,a.useMemo)(()=>({shortcuts:[{key:F.Uz.ENTER}],onAction:p,allowDefault:!0}),[p]);return(0,sP.k)({primaryAction:m,active:c,actionLabel:!1,target:u}),(0,s.jsx)(sL.D8,{forwardedRef:l,className:iG()(n,{"keyboard_navigation_on_focus--active--vGhwX":c}),...i,...r,children:e})}var sU=n(223850),sV=n(778920),sH=n(392260);let sK=[sH.jR,sH.N0,sH.k0,sH.RO,sH.Sb].map(e=>({string:e,color:sU.F.parse(e)}));function sW({theme:e,onChangeColor:t,activeColorIdx:n,activeColorOutline:i,idx:r,colorSwatch:l}){let o=a.useCallback(()=>{t(l.color),it.Y5.triggerAction("commit")},[l.color,t]);return(0,s.jsx)(sG,{primaryAction:o,children:(0,s.jsx)(sV.pt,{size:"medium",value:l.color,background:"dark"===e?"dark":"light",onClick:o,paletteType:"base",swatchStyle:{...n===r&&{outline:i,outlineOffset:"2px"},boxSizing:"border-box",boxShadow:"none"}},l.string)})}function sq(e){return(0,s.jsx)(sG,{primaryAction:e.onClick,children:(0,s.jsx)("div",{className:B.s.radiusFull.$,children:-1===e.activeColorIdx?(0,s.jsx)(sV.pt,{size:"medium",value:e.value,paletteType:"base",selectionState:"selected_custom",background:"dark"===e.theme?"dark":"light",onClick:e.onClick,swatchStyle:{boxSizing:"border-box",boxShadow:"none"}}):(0,s.jsx)(sV.ck,{size:"medium",onClick:e.onClick,swatchStyle:{boxSizing:"border-box",boxShadow:"none"}})})})}function sX({theme:e,onChangeColor:t,setShowCustomColorPicker:n,value:i}){let r=a.useCallback(()=>{n(!0)},[n]),l=(0,iz.zN)(i,iK.DA),{activeColorIdx:o,activeColorOutline:d}=a.useMemo(()=>({activeColorIdx:sK.findIndex(e=>(0,iK.DA)(e.color,l)),activeColorOutline:`2px solid ${sU.F.format(l)}`,value:l}),[l]),c=Math.max(o,0);return(0,s.jsx)(sB,{defaultActiveIndex:c,children:(0,s.jsx)("div",{className:B.s.flex.flexGrow1.justifyBetween.$,style:{boxSizing:"content-box"},children:(0,s.jsxs)(s.Fragment,{children:[sK.map((n,i)=>(0,s.jsx)(sW,{theme:e,onChangeColor:t,activeColorIdx:o,activeColorOutline:d,idx:i,colorSwatch:n},n.string)),(0,s.jsx)(sq,{activeColorIdx:o,value:l,theme:e,onClick:r})]})})})}var sY=n(556230),sZ=(e=>(e.COLOR="color",e.RADIUS="radius",e.SPACING="spacing",e.FONT="font",e))(sZ||{}),sJ=(e=>(e.TITLE="title",e.BODY="body",e.LABLE="label",e))(sJ||{});let sQ="theme_editor--svgText--yyKtR",s$=a.createContext({activeTab:sZ.COLOR,onTabChange:()=>{},recordingKey:void 0});function s0({label:e,children:t,tab:n}){let{onTabChange:i,activeTab:r,recordingKey:l}=a.useContext(s$),o=a.useCallback(()=>{i(n)},[i,n]);return(0,s.jsx)(sG,{"aria-label":e,primaryAction:o,className:iG()("theme_editor--iconButton--SYPlk theme_editor--baseIconButton--15rMM",r===n&&"theme_editor--iconActive--8Nsgk"),onClick:o,recordingKey:iq.Pt(l,n),htmlAttributes:a.useMemo(()=>({"data-tooltip":e,"data-tooltip-type":eL.Ib.TEXT,"data-tooltip-show-above":!0,"data-clickable":!0}),[e]),children:t})}var s1=n(265149),s2=n(506192),s3=n(596628),s5=n(355256),s4=n(661716),s6=n(50435);function s7(e,t){return t===d.NVY.HSL?(0,iD.oB)(e):(0,iD.qN)(e)}function s8({brandColor:e,absoluteContainerId:t,onChangeColor:n,onHide:i}){let l=(0,r.wA)(),o=(0,s2.Um)(),c=a.useRef(document.getElementById(t||"fullscreen-root"));(0,L.kz)(F.Uz.ESCAPE,i),(0,L.kz)(F.Uz.BACKSPACE,i,document.activeElement?.tagName.toLowerCase()!=="input");let[u,p]=a.useState(d.NVY.HEX),[m,h]=a.useState(s7(e,u)),[f,g]=a.useState({left:0,top:0}),x=a.useRef(),_=()=>{let e=x.current?.getBoundingClientRect();e&&g({left:e.left,top:e.bottom-120})},y=a.useCallback(e=>{e&&(x.current=e,_())},[]);(0,s1.wY)(x,()=>_()),(0,s1.wY)(c,()=>_());let v=(0,iV.A)(async(e,t)=>{await n(e),t&&it.Y5.triggerAction("commit")},100),b=a.useCallback((e,t)=>{h(e),v((0,iD.w_)(e),t)},[v]),C=a.useCallback(e=>{e.a=1,v(e,!0),h((0,s3.QS)(m,s7(e,u),e))},[m,u,v]),j={color:e,value:m,changeCallback:b,hideOpacity:!0,colorFormat:u,dispatch:l,currentTool:d.NLJ.CODE_BLOCK,dropdownShown:o,onColorChange:C,canAcceptStyles:!1,canAcceptVariables:!1};return(0,s.jsxs)("div",{className:B.s.flex.pr16.pl16.pt8.pb4.flexRow.justifyCenter.itemsEnd.flexGrow1.gap16.$,children:[(0,s.jsxs)("div",{className:B.s.flex.flexRow.justifyCenter.itemsCenter.flexGrow1.gap8.$,children:[(0,s.jsx)(sT.K,{"aria-label":(0,G.t)("first_draft.theme_tool.close_panel"),onClick:()=>i(),recordingKey:"closeSectionEditor",children:(0,s.jsx)(sN.C,{})}),(0,s.jsxs)("div",{className:B.s.flex.flexColumn.justifyBetween.wFull.itemsEnd.gap4.$,children:[(0,s.jsx)("div",{className:B.s.flex.justifyBetween.itemsCenter.wFull.$,children:(0,s.jsx)(s4.e,{width:168,color:m,changeCallback:b})}),(0,s.jsxs)("div",{className:B.s.flex.justifyBetween.itemsCenter.wFull.gap8.$,style:{maxWidth:210},children:[(0,s.jsx)(s5.p,{selectClassName:iG()(B.s.flexShrink1.flexGrow0.flex.$,"theme_editor--colorSelect--wIbMH","theme_editor--precedence--lvYGC"),colorFormat:u,onColorFormatChange:e=>{p(e),"l"in m&&e!==d.NVY.HSL?h((0,iD.qN)((0,iD.w_)(m))):e!==d.NVY.HSL||"l"in m||h((0,iD.oB)((0,iD.w_)(m)))},dispatch:l,dropdownShown:o}),u===d.NVY.HEX&&(0,s.jsx)(s3.dt,{...j}),u===d.NVY.RGB&&(0,s.jsx)(s3.VA,{...j}),u===d.NVY.CSS&&(0,s.jsx)(s3.he,{...j}),(u===d.NVY.HSL||u===d.NVY.HSB)&&(0,s.jsx)(s3.fC,{...j})]})]})]}),(0,s.jsx)("div",{className:B.s.flex.justifyCenter.itemsCenter.relative.mr8.$,ref:y,children:(0,s.jsx)("div",{style:{width:115},children:(0,s.jsxs)("div",{style:{position:"fixed",width:115,height:115,...f},children:[(0,s.jsx)("div",{className:iG()("theme_editor--pickerUnderlay--gfCHS",B.s.colorBg.elevation200.absolute.p2.$),style:{width:115,height:115,borderRadius:14}}),(0,s.jsx)("div",{className:iG()("theme_editor--pickerOverlay--Ykwy9",B.s.flex.colorBg.absolute.p2.overflowHidden.justifyCenter.alignCenter.$),style:{width:115,height:115,borderRadius:14},children:(0,s.jsx)(s6.T,{containerClass:"theme_editor--pickerWrapper--fs-6V",size:115,color:m,changeCallback:b,canvasWrapperStyles:{outlineWidth:0,borderRadius:"13px"},ghostStyles:{boxShadow:"none"}})})]})})})]})}var s9=n(499035);function ae(e){let t=(0,sA.DP)(),n=e.brandColor,i=sY.ER.get(Math.round(2*e.cornerRadiusStop)/2),r=sY.NT.get(Math.round(2*e.spacingStop)/2),l=a.useMemo(()=>({activeTab:e.activeTab,onTabChange:e.onTabChange,recordingKey:e.recordingKey}),[e.activeTab,e.onTabChange,e.recordingKey]);return(0,s.jsx)(s$.Provider,{value:l,children:(0,s.jsx)(sB,{defaultActiveIndex:function(e){switch(e){case sZ.COLOR:return 0;case sZ.RADIUS:return 1;case sZ.SPACING:return 2;case sZ.FONT:return 3}}(e.activeTab),children:(0,s.jsxs)(en.B,{fullWidth:!0,justify:"space-between",children:[(0,s.jsx)(s0,{tab:sZ.COLOR,label:(0,G.t)("first_draft.theme_panel.color"),children:(0,s.jsx)(sV.pt,{size:"medium",value:n,paletteType:"base",background:"dark"===t?"dark":"light",swatchStyle:{boxSizing:"border-box",boxShadow:"none"}})}),(0,s.jsx)(s0,{tab:sZ.RADIUS,label:(0,G.t)("first_draft.theme_panel.radius"),children:(0,s.jsx)(ex.B,{svg:i,className:"theme_editor--svgIcon--ongu6"})}),(0,s.jsx)(s0,{tab:sZ.SPACING,label:(0,G.t)("first_draft.theme_panel.spacing"),children:(0,s.jsx)(ex.B,{svg:r,className:sQ})}),(0,s.jsx)(s0,{tab:sZ.FONT,label:(0,G.t)("first_draft.theme_panel.font"),children:(0,s.jsx)(ex.B,{svg:s9.A,className:sQ})})]})})})}let at={[sZ.COLOR]:function(e){let t=(0,sA.DP)(),[n,i]=a.useState(!1),{focusParent:r}=e,l=a.useCallback(()=>{i(!1),r?.()},[r]);return n?(0,s.jsx)(s8,{onHide:l,...e}):(0,s.jsxs)("div",{className:B.s.flex.flexRow.flexGrow1.p16.pt12.pb12.gap16.itemsCenter.$,children:[(0,s.jsx)(al,{recordingKey:e.recordingKey}),(0,s.jsx)("div",{className:B.s.flex0.flexShrink0.$,children:(0,s.jsxs)(sj.bL,{onChange:e.onChangeColorMode,value:e.colorMode,recordingKey:iq.Pt(e,"colorModePicker"),legend:(0,s.jsx)(sk.q,{children:(0,G.tx)("first_draft.theme_tool.color.mode_picker")}),children:[(0,s.jsx)(sj.c$,{value:"light","aria-label":(0,G.t)("first_draft.theme_tool.color.light_mode"),icon:(0,s.jsx)("div",{className:B.s.flex.w44.itemsCenter.justifyCenter.$,children:(0,s.jsx)(sS.K,{})})}),(0,s.jsx)(sj.c$,{value:"dark","aria-label":(0,G.t)("first_draft.theme_tool.color.dark_mode"),icon:(0,s.jsx)("div",{className:B.s.flex.w44.itemsCenter.justifyCenter.$,children:(0,s.jsx)(sI.D,{})})})]})}),(0,s.jsx)(sX,{value:e.brandColor,onChangeColor:e.onChangeColor,theme:t,setShowCustomColorPicker:i})]})},[sZ.RADIUS]:function(e){let[t,n]=a.useState(e.cornerRadiusStop);return(0,s.jsxs)("div",{className:B.s.flex.flexRow.flexGrow1.itemsCenter.p16.gap16.$,children:[(0,s.jsx)(al,{recordingKey:e.recordingKey}),(0,s.jsx)(sw.J,{className:B.s.opacity0_5.$,children:(0,G.tx)("first_draft.theme_panel.radius")}),(0,s.jsx)(sE.A,{"aria-label":(0,G.t)("first_draft.theme_panel.radius"),bigStep:.2,defaultValue:t,max:sY.Ne,min:sY.Xy,onChange:e.onChangeCornerRadiusStop,rangeAnchor:sY.Xy,recordingKey:iq.Pt(e,"cornerRadiusSlider"),step:.1,value:e.cornerRadiusStop})]})},[sZ.SPACING]:function(e){let[t,n]=a.useState(e.spacingStop);return(0,s.jsxs)("div",{className:B.s.flex.flexRow.flexGrow1.itemsCenter.p16.gap16.$,children:[(0,s.jsx)(al,{recordingKey:e.recordingKey}),(0,s.jsx)(sw.J,{className:B.s.opacity0_5.$,children:(0,G.tx)("first_draft.theme_panel.spacing")}),(0,s.jsx)(sE.A,{"aria-label":(0,G.t)("first_draft.theme_panel.spacing"),bigStep:.2,defaultValue:t,max:sY.Ne,min:sY.Xy,onChange:e.onChangeSpacingStop,rangeAnchor:sY.Xy,recordingKey:iq.Pt(e,"spacingSizeSlider"),step:sY.jF,value:e.spacingStop})]})},[sZ.FONT]:function(e){let[t,n,i]=iP.t.useTabs({[sJ.TITLE]:null!==e.titleFont,[sJ.BODY]:null!==e.bodyFont,[sJ.LABLE]:null!==e.labelFont},{recordingKey:iq.Pt(e,"fontEditor")});return(0,s.jsxs)("div",{className:B.s.flex.flex1.flexColumn.$,children:[(0,s.jsxs)("div",{className:B.s.flex.flex1.flexRow.gap8.p8.$,children:[(0,s.jsx)(al,{recordingKey:e.recordingKey}),(0,s.jsxs)(iP.t.TabStrip,{manager:i,children:[(0,s.jsx)(iP.t.Tab,{...t.title,children:(0,G.tx)("first_draft.theme_panel.label.fontTitle")}),(0,s.jsx)(iP.t.Tab,{...t.body,children:(0,G.tx)("first_draft.theme_panel.label.fontBody")}),(0,s.jsx)(iP.t.Tab,{...t.label,children:(0,G.tx)("first_draft.theme_panel.label.fontLabel")})]})]}),(0,s.jsx)("div",{className:B.s.wFull.colorBgTertiary.h1.$}),(0,s.jsxs)("div",{className:B.s.flex.flex1.flexColumn.gap8.p8.$,children:[(0,s.jsx)(iP.t.TabPanel,{...n.title,children:(0,s.jsx)(as,{...e})}),(0,s.jsx)(iP.t.TabPanel,{...n.body,children:(0,s.jsx)(aa,{...e})}),(0,s.jsx)(iP.t.TabPanel,{...n.label,children:(0,s.jsx)(ar,{...e})})]})]})}};function an(e){let t=a.useRef(null),n=a.useCallback(()=>{t.current?.focus()},[]);if(a.useLayoutEffect(n,[n]),!e.section)return null;let i=at[e.section];return(0,s.jsx)("div",{ref:t,tabIndex:-1,className:iG()("theme_editor--boxInherit--BjYCO",B.s.flex.relative.wFull.$),children:(0,s.jsx)(i,{focusParent:n,...e})})}function ai({selectedKey:e,items:t,recordingKey:n}){let i=t.findIndex(({key:t})=>t===e);return(0,s.jsx)(sB,{defaultActiveIndex:i>-1?i:0,itemsPerRow:5,children:(0,s.jsx)("div",{className:B.s.flex.flex1.flexWrap.itemsCenter.rowGap8.justifyBetween.$,children:t.map(({key:t,name:i,svg:a,onClick:r})=>(0,s.jsx)(sG,{"aria-label":i,recordingKey:iq.Pt(n,t),className:iG()("theme_editor--fontIconButton--Vc-KE theme_editor--iconButton--SYPlk theme_editor--baseIconButton--15rMM",sQ,e===t&&"theme_editor--selected--2BGbx"),primaryAction:r,onClick:r,htmlAttributes:{"data-tooltip":i,"data-tooltip-show-above":!0,"data-tooltip-type":eL.Ib.TEXT},children:(0,s.jsx)(ex.B,{svg:a})},t))})})}function as(e){let t=`FontTitle_${e.titleFont}`,n=Array.from(sY.X4).map(([t,n])=>({key:`FontTitle_${t}`,name:t,svg:n,onClick:()=>e.onChangeTitleFont(t)}));return null===e.titleFont?null:(0,s.jsx)(ai,{selectedKey:t,items:n,recordingKey:e.recordingKey})}function aa(e){let t=`FontBody_${e.bodyFont}`,n=Array.from(sY.K4).map(([t,n])=>({key:`FontBody_${t}`,name:t,svg:n,onClick:()=>e.onChangeBodyFont(t)}));return null===e.bodyFont?null:(0,s.jsx)(ai,{selectedKey:t,items:n,recordingKey:e.recordingKey})}function ar(e){let t=`FontLabel_${e.labelFont}`,n=Array.from(sY.pz).map(([t,n])=>({key:`FontLabel_${t}`,name:t,svg:n,onClick:()=>e.onChangeLabelFont(t)}));return null===e.labelFont?null:(0,s.jsx)(ai,{selectedKey:t,items:n,recordingKey:e.recordingKey})}function al({recordingKey:e}){let{pop:t}=(0,S.cq)();return(0,L.kz)(F.Uz.ESCAPE,t),(0,L.kz)(F.Uz.BACKSPACE,t),(0,s.jsx)("div",{className:B.s.h24.$,children:(0,s.jsx)(sT.K,{recordingKey:iq.Pt(e,"backButton"),onClick:t,"aria-label":(0,G.t)("qa.go_back"),children:(0,s.jsx)(sN.C,{})})})}var ao=n(390178);function ad(e){let{close:t}=(0,S.cq)();(0,ew.f4)(n=>{if(e)for(let e of Object.keys(n.mirror.sceneGraphSelection)){let n=(0,eZ.getActiveTSSceneGraph)().get(e);if(n&&!n.isOrInFirstDraft){t();return}}})}var ac=(e=>(e[e.READY_FOR_PROMPT=0]="READY_FOR_PROMPT",e[e.RUNNING=1]="RUNNING",e[e.FINISHED=2]="FINISHED",e[e.ERROR=3]="ERROR",e[e.ICANTDOTHIS=4]="ICANTDOTHIS",e))(ac||{}),au=(e=>(e.PROMPT="prompt",e.THEME="theme",e))(au||{});function ap(e,t){switch(t.type){case"NEW_ROOT_NODE":case"EDIT_INFO_UPDATED":return t.payload;case"SET_BRAND_COLOR":return{...e,brandColor:t.payload};case"SET_RADIUS":return{...e,radius:t.payload};case"SET_SPACING":return{...e,spacing:t.payload};case"SET_COLOR_MODE":return{...e,colorMode:t.payload};case"SET_TITLE_FONTS":return{...e,titleFonts:t.payload};case"SET_BODY_FONTS":return{...e,bodyFonts:t.payload};case"SET_LABEL_FONTS":return{...e,labelFonts:t.payload}}}let am={brandColor:iK.UE,colorMode:i4.lH.LIGHT,spacing:1,radius:1,titleFonts:[],bodyFonts:[],labelFonts:[]};function ah(e,{pinnedRanges:t}={}){let n=(0,eZ.getActiveTSSceneGraph)().get(e);if(!n)return am;let i=(0,i7.BY)(n),s=(0,i7.uP)(n,{pinnedRanges:t}),a=(0,i7.Mz)(n,i),r=(0,i6.X6)(n)??iK.UE;return{brandColor:(0,iK.tK)((0,i3.tb)(r,s.colors))??iK.UE,colorMode:(0,i5.P)(n)??i4.lH.LIGHT,spacing:(0,i2.YB)(s.spacingRangesForGuids),radius:(0,i2.nd)(s.radiusValues),titleFonts:a.title,bodyFonts:a.body,labelFonts:a.label}}function af({initialRootGuid:e}){let t=(0,ee._M)({action:Z.JT.FIRST_DRAFT_MAKE_CHANGES,clientLifecycleId:void 0}),n=t.clientLifecycleId,i=(0,H.tS)(),r=a.useCallback(()=>{(0,iH.sx)("First Draft: Error",{file_key:i,clientLifecycleId:n,view:"firstDraftMakeChanges"},{forwardToDatadog:!0,sendAsBeacon:!0,mlEvent:!0})},[i,n]);return(0,s.jsx)(p.tH,{boundaryKey:"FirstDraftMakeChanges",fallback:p.H4.NONE_I_KNOW_WHAT_IM_DOING,sentryTags:{clientLifecycleId:n,area:l.e.AI_GENERATION},onError:r,children:(0,s.jsx)(ag,{recordingKey:"firstDraftMakeChangesView",initialRootGuid:e,aiTrackingContext:t})})}function ag(e){let t=e.aiTrackingContext,n=t.clientLifecycleId,[i,o]=a.useState(""),c=(0,H.tS)(),u=(0,ew.eY)(),{allUsableKitEntries:p}=(0,sx.sI)(),m=sc()||e.initialRootGuid,h=(0,ew.KH)(),f=(0,a.useMemo)(()=>m?u.get(m):null,[u,m]),{applyMakeChanges:g,resetMakeChanges:x,instrumentationRef:_}=function({clientLifecycleId:e}){let[t]=(0,a.useState)({current:(0,D.g)()}),{insertJSX:n,resetAsync:i,instrumentationRef:s}=(0,so.Vh)({clientLifecycleId:e,insertType:"makeChanges"});return{applyMakeChanges:(0,a.useCallback)(async(a,r)=>{let o=[];for(let e of("affectedId"in a&&o.push(a.affectedId),"destinationId"in a&&o.push(a.destinationId),o)){if(!function e(t,n,i){let s=t.get(n);return!!s&&(s.guid===i||!!s.parentGuid&&e(t,s.parentGuid,i))}((0,eZ.getActiveTSSceneGraph)(),e,r.rootNodeId)){(0,ef.$D)(l.e.AI_GENERATION,Error("first-draft: Node does not have root node as ancestor"),{extra:{nodeId:e,action:a,...r}});return}if(e===r.rootNodeId){(0,ef.$D)(l.e.AI_GENERATION,Error("first-draft: Tried to mutate root node"),{extra:{nodeId:e,action:a,...r}});return}}switch(await i(),a.type){case"theme":{let{content:e}=a;e&&function(e,t,n){let i=(0,eZ.getActiveTSSceneGraph)().get(e);if(!i)return;let s=(0,i7.BY)(i);if(["borderRadii","spacing","colors","fontFamilies"].some(e=>e in n)){let e=(0,i7.k5)(t,n);(0,i7.jR)(i,e,s)}let a=t.darkMode?i4.lH.DARK:i4.lH.LIGHT,r=t.brandColor??function(e){let t=(0,i7.uP)(e,{ignoreOpacity:!0}),n=(0,i6.X6)(e)??iK.UE;return(0,i3.tb)(n,t.colors)}(i),l="darkMode"in n?n.darkMode?i4.lH.DARK:i4.lH.LIGHT:void 0;if(l&&a!==l&&iF.l7.ai("first-draft-make-changes-theme-switch-mode",()=>{(0,i5.t)(i,l,r)}),"brandColor"in n&&n.brandColor){let e=(0,iK.tK)(n.brandColor);if(e){let t=(0,i6.qO)(e,l??a);iF.l7.ai("first-draft-make-changes-theme-brand-color",()=>{(0,i3.l9)(i,t,l??a??i4.lH.LIGHT,{},r)})}}}(r.rootNodeId,r.currentTheme,e);break}case"text_or_image":await si({changes:a,makeChangesSessionId:t.current,clientLifecycleId:e,containingNodeId:r.rootNodeId,instrumentationRef:s});break;case"insert":case"replace":await sl({action:a,options:r,insertJSX:n}),await i();break;case"remove":iF.l7.ai("first-draft-make-changes-remove",()=>{let e=(0,eZ.getActiveTSSceneGraph)().get(a.affectedId);e&&e.removeSelfAndChildren()});break;case"move":{let{affectedId:e,destinationId:t,insertBehavior:n}=a;iF.l7.ai("first-draft-make-changes-move",()=>{let i=(0,eZ.getActiveTSSceneGraph)(),s=i.get(e),a=i.get(t),r=a?.parentNode,l=r?.childrenGuids.indexOf(t)??-1;s&&r&&("above"===n?r.insertChild(s,l):"below"===n&&(l<r.childCount-1?r.insertChild(s,l+1):r.appendChild(s)))});break}case"replaceClasses":{let{affectedId:e,classes:t}=a,n=(0,eZ.getActiveTSSceneGraph)().get(e),i=n?.isIconLike&&(0,i4.Dk)(n)===i4.lg.CONTENT?"Icon":void 0;iF.l7.ai("first-draft-make-changes-replace-classes",()=>{for(let n of t)(0,i9.w)(e,n,i)})}}},[e,t,n,s,i]),resetMakeChanges:(0,a.useCallback)(()=>{t.current=(0,D.g)()},[t]),instrumentationRef:s}}({clientLifecycleId:n}),[y,v]=a.useState(0),[b,C]=a.useState(Error((0,G.t)("first_draft.something_went_wrong"))),[j,k]=a.useState(null),[w,E,T]=iP.t.useTabs({prompt:!0,theme:!0},{defaultActive:"theme",recordingKey:iq.Pt(e,"tabs")}),[S,I]=a.useState(!1);ad(2===y||3===y||4===y);let N=a.useRef(1),A=a.useRef(null);(0,a.useEffect)(()=>{A.current=i},[i]);let[L,M]=a.useState(Date.now()),R=(0,r.wA)(),P=a.useRef(S);(0,a.useEffect)(()=>{S!==P.current&&f&&(S?(0,sg.Vm)(f.guid,(0,s.jsx)(sh,{})):(0,sg.ks)(f.guid),P.current=S)},[S,f]);let F=a.useCallback(()=>{N.current+=1,_.current.trackFinished("stopped"),ay(t,"stopped"),v(0),I(!1)},[v,t,N,_]),z=a.useCallback(async()=>{x();let e=N.current,i={file_key:c,clientLifecycleId:n,generation_id:f?.firstDraftData?.generationId};try{if(_.current.start(),v(1),k(null),M(Date.now()),!f)throw Error("Root node not found");let s=f&&f.getSharedPluginData(sd.SV,"userPrompt")||"",a=a_(f),r="LOCAL"===a.type,l=r?d.XJn.getKitKey(a.pageId):a.key,o=p.find(e=>"key"in e.dsKitKey&&e.dsKitKey.key===l);Object.assign(i,{dsKitType:a.type,isLocal:r,kitKey:l,kitIdentifier:o?.metadata?.identifier??null}),(0,iH.sx)("First Draft: Make Changes Started",{...i,hasNonRootNodeSelected:!(f.guid in h)},{forwardToDatadog:!0,batchRequest:!0,mlEvent:!0}),(0,ee.Dl)(t);let{jsxStr:c}=iY({[f.guid]:!0},!1),{jsxStr:u}=iY({[f.guid]:!0},!0);if(!c||!u){(0,iH.sx)("First Draft: Make Changes Ended",{...i,timeElapsedMs:Date.now()-L,status:"failed",reason:"infer-jsx-failed",hasNonRootNodeSelected:!(f.guid in h)},{forwardToDatadog:!0,batchRequest:!0,mlEvent:!0}),ay(t,"error"),v(2);return}let m=A.current||"",x=function(e){if(!(0,ep.kc)().first_draft_prompt_history||!(0,ep.kc)().first_draft_make_changes_history)return[];let t=(0,iJ.Q_)();if(!t)return[];let n=`${iQ}${e}`,i=t.getItem(n);if(!i)return[];try{return e0.z.array(iZ.Db).parse(JSON.parse(i))}catch{}return[]}(f.guid),y=function(e){let t=(0,i7.uP)(e,{ignoreOpacity:!0}),n=(0,i6.X6)(e)??iK.UE,i=(0,i3.tb)(n,t.colors),s=(0,i5.P)(e)??i4.lH.LIGHT;return{...(0,i7.rO)(e,t),version:2,brandColor:i,darkMode:"dark"===s}}(f),b=await eQ.Ay.design.firstDraftMakeChanges({userPrompt:m,promptHistory:x,storedInitialPrompt:s,kitKey:l??"",isLocal:r,currentTheme:y,jsx:c,jsxInsertReplace:u},(0,su.sF)({clientLifecycleId:n}));x.push({prompt:m}),function(e,t){let n=(0,iJ.Q_)();if(!n)return;let i=`${iQ}${e}`;n.setItem(i,JSON.stringify(t))}(f.guid,x);let C=b.getReader(),j=[];for(;;){let{done:n,value:r}=await C.read();if(e!==N.current){C.cancel();break}if(_.current.trackFirstByteReceived(),n&&_.current.trackLastStreamByteReceived(),(0,eJ.Lo)("makeChanges","Response message",{message:r}),r?.trace&&k(r.trace),r?.action){if("replaceClasses"===r.action.type&&!(0,ep.kc)().first_draft_surgical_edits){(0,eJ.xi)("makeChanges","Unsupported action",{action:r.action.type}),(0,iW.Rh)("first_draft.client.make_changes.unsupported_action",{action:r.action.type}),j.push(Promise.reject(new iO.G1("make_changes_unsupported",{})));continue}if((0,iH.sx)("First Draft: Make Changes Prompt Action",{...i,action:r.action.type},{forwardToDatadog:!0,batchRequest:!0,mlEvent:!0}),"iCantDoThis"===r.action.type){let e=r.action.rationaleCategory;j.push(Promise.reject(new iO.G1("make_changes_unsupported",{rationaleCategory:e})))}else j.push(g(r.action,{dsKitKey:a,rootNodeId:f.guid,currentTheme:y,imageArgs:{initialUserPrompt:s}}))}if(n){let e=await Promise.allSettled(j);if(!j.length)throw(0,eJ.xi)("makeChanges","No actions were applied from the prompt response"),(0,iW.Rh)("first_draft.client.make_changes.no_actions_applied"),new iO.G1("make_changes_unsupported",{});if(e.every(e=>"rejected"===e.status)){for(let t of e)if("rejected"===t.status)throw t.reason}(0,iH.sx)("First Draft: Make Changes Ended",{...i,status:"completed",timeElapsedMs:Date.now()-L,hasNonRootNodeSelected:!(f.guid in h)},{forwardToDatadog:!0,batchRequest:!0,mlEvent:!0}),ay(t,"success"),_.current.trackFinished("success"),v(2),it.Y5.triggerAction("commit");break}}}catch(a){(0,eJ.xi)("makeChanges","Error",{error:a});let e=a instanceof iO.G1,n={...i,timeElapsedMs:Date.now()-L,error:a.toString(),status:"failed",reason:"error"},s=e?"handled_internally":(0,ef.$D)(l.e.AI_GENERATION,a,{extra:n});(0,iH.sx)("First Draft: Make Changes Ended",{...n,sentryEventId:s},{forwardToDatadog:!0,batchRequest:!0,mlEvent:!0}),ay(t,"error"),_.current.trackFinished("failure"),e&&("make_changes_unsupported"===a.type||"make_changes_moderated"===a.type)?((0,iH.sx)("First Draft: Make Changes Prompt Action",{...i,action:"make_changes_unsupported"===a.type?"iCantDoThis":"blocked"},{forwardToDatadog:!0,batchRequest:!0,mlEvent:!0}),v(4)):v(3),C(a instanceof Error?a:Error("Unknown error"))}finally{e===N.current&&(N.current+=1)}},[c,n,N,_,f,h,t,L,g,x,p]),B=()=>{v(0),(0,sf.k)()},U=j&&(0,ep.kc)().cortex_execution_tracing;switch(y){case 1:return(0,s.jsx)(iS.F,{onStop:F,aiTrackingContext:t,recordingKey:iq.Pt(e,"running"),children:(0,G.tx)("first_draft.making_changes")});case 3:return U&&(0,ao.A)(R,j),(0,s.jsx)(iw.E,{error:b,customMessage:(0,G.t)("first_draft.something_went_wrong"),recordingKey:iq.Pt(e,"error"),buttons:[{type:iw.f.GO_BACK,callback:B}],aiTrackingContext:t});case 4:return U&&(0,ao.A)(R,j),(0,s.jsx)(iw.E,{error:b,customMessage:(e=>{let t=(0,G.t)("first_draft.make_changes.i_cant_do_this");if(e instanceof iO.G1){if("make_changes_moderated"===e.type)return(0,G.t)("ai.error.unsafe_or_harmful");if(!(0,ep.kc)().first_draft_make_changes_errors)return t;if("make_changes_unsupported"===e.type&&e.data?.rationaleCategory){let t=e.data.rationaleCategory;switch(t){case"component":return(0,G.t)("first_draft.make_changes.i_cant_do_this_component");case"font":return(0,G.t)("first_draft.make_changes.i_cant_do_this_font");case"layout":return(0,G.t)("first_draft.make_changes.i_cant_do_this_layout");case"other":break;default:return(0,O.xb)(t)}}}return t})(b),recordingKey:iq.Pt(e,"unsupported"),buttons:[{type:iw.f.GO_BACK,callback:B}],aiTrackingContext:t});case 2:let V=[];return(0,sp.KK)()&&!(0,ep.kc)().first_draft_use_gemini&&(V.push({type:iE.is.UNDO_MAKE_CHANGES,callback:()=>{v(0),it.Y5.triggerAction("undo"),(0,iH.sx)("First Draft: Make Changes Undo",{file_key:c,clientLifecycleId:n},{forwardToDatadog:!0,sendAsBeacon:!0,mlEvent:!0}),(0,sf.k)()}}),V.push({type:iE.is.MAKE_CHANGES,callback:B})),U&&(0,ao.A)(R,j),(0,s.jsx)(iE.Oq,{recordingKey:iq.Pt(e,"iterate"),iterateOptions:V,aiTrackingContext:{...t,iteration_view_type:ik.$J.SUCCESS_WITH_ITERATION},stayOpen:!0});case 0:return(0,s.jsx)(ax,{promptValue:i,setPromptValue:o,rootNode:f,tabManager:T,tabPropsMap:w,tabPanelPropsMap:E,handleSubmit:z,recordingKey:e.recordingKey,aiTrackingContext:t});default:(0,O.xb)(y)}}function ax({promptValue:e,setPromptValue:t,rootNode:n,tabManager:i,tabPropsMap:r,tabPanelPropsMap:l,handleSubmit:o,recordingKey:d,aiTrackingContext:c}){let u=c.clientLifecycleId,[p,m]=a.useState(sb(1)[0].prompt),[h,f]=a.useState(sb(3)),[g,x]=a.useReducer(ap,am),_=a.useCallback(e=>{v.current=Date.now(),x(e)},[x]),y=(0,iz.zN)(n,(e,t)=>e?.guid===t?.guid);(0,a.useEffect)(()=>{_({type:"NEW_ROOT_NODE",payload:ah(y?.guid??"")})},[y?.guid,_]);let v=a.useRef(-1/0),b=a.useRef((0,i2.$L)(y)),C=a.useRef((0,i7.nF)((0,i2.uq)(y))),j=a.useRef(g.radius),k=a.useRef(g.spacing);(0,a.useEffect)(()=>{b.current=(0,i2.$L)(y),C.current=(0,i7.nF)((0,i2.uq)(y));let e=ah(y?.guid??"");j.current=e.radius,k.current=e.spacing},[y]);let{close:w}=(0,S.cq)(),E=(0,H.tS)(),T=a.useMemo(()=>{let e,t;let n={file_key:E,clientLifecycleId:u,generation_id:y?.firstDraftData?.generationId};return y&&(t="LOCAL"===(e=a_(y)).type?e.pageId:e.key),Object.assign(n,{dsKitType:null!=e?e.type:null,kitKey:t}),n},[y,E,u]),I=g.colorMode,N=g.brandColor,A=g.radius,L=g.spacing,M=g.titleFonts,O=g.bodyFonts,R=g.labelFonts,P=(0,iU.ei)(y?.guid),D=(0,iz.k9)(()=>P,[P]);a.useEffect(()=>{let e=ah(y?.guid??"",{pinnedRanges:C.current});(0,iR.xN)((0,iD.oB)(N).h,(0,iD.oB)(e.brandColor).h,.01)&&(e.brandColor=N);let t=D?.lastEditedAt??-1/0;(t>v.current||v.current-t>1e3)&&_({type:"EDIT_INFO_UPDATED",payload:e})},[N,_,D,y?.guid,g.radius,g.spacing]);let z=(0,iV.A)(e=>{(0,iH.sx)("First Draft: Make Changes Color Change",{...T,color:e},{forwardToDatadog:!0,batchRequest:!0,mlEvent:!0})},5e3),U=a.useCallback(e=>{e!==I&&(iF.l7.user("first-draft-switch-color-mode",()=>{(0,i5.t)(y,e,(0,iK.F_)(g.brandColor))}),z(I),it.Y5.triggerAction("commit"),_({type:"SET_COLOR_MODE",payload:e}))},[I,z,_,y,g.brandColor]),V=a.useMemo(()=>(0,i3.N_)(y),[y]),K=a.useRef(null),W=a.useRef(null),q=a.useCallback((e,t)=>{if(W.current)K.current=[e,W.current];else{W.current=e;let n=(0,iK.F_)(t);iF.l7.user("first-draft-apply-brand-color",()=>{(0,i3.l9)(y,e,I,V,n)}),setTimeout(()=>{if(W.current=null,K.current){let[e,t]=K.current;K.current=null,q(e,t)}},30)}},[I,V,y]),X=a.useCallback(e=>{z((0,iK.F_)(e));let t={...(0,i6.qO)(e,I),a:1};q(t,N),_({type:"SET_BRAND_COLOR",payload:t})},[_,z,I,q,N]),Y=(0,iV.A)(e=>{(0,iH.sx)("First Draft: Make Changes Radius Change",{...T,radius:e},{forwardToDatadog:!0,batchRequest:!0,mlEvent:!0})},1e3),J=(0,iV.A)(e=>{Y(e),(0,i2.oP)(b.current,e,j.current)},100),Q=a.useCallback((e,t)=>{t.commit&&it.Y5.triggerAction("commit"),e!==A&&(J(e),_({type:"SET_RADIUS",payload:e}))},[A,_,J]),$=(0,iV.A)(e=>{(0,iH.sx)("First Draft: Make Changes Spacing Change",{...T,spacing:e},{forwardToDatadog:!0,batchRequest:!0,mlEvent:!0})},1e3),et=(0,iV.A)(e=>{$(e),(0,i2.HS)(C.current,e,k.current)},100),ei=a.useCallback((e,t)=>{t.commit&&it.Y5.triggerAction("commit"),e!==L&&(et(e),_({type:"SET_SPACING",payload:e}))},[_,et,L]),es=(0,iV.A)((e,t)=>{(0,iH.sx)("First Draft: Make Changes Font Change",{...T,font_location:e,font_type:t},{forwardToDatadog:!0,batchRequest:!0,mlEvent:!0})},1e3),ea=a.useCallback(e=>0===e.length?null:e[0].family,[]),er=a.useCallback(async e=>{await i1(i8.lu.TITLE,e,M),es("title",e),it.Y5.triggerAction("commit"),y&&_({type:"SET_TITLE_FONTS",payload:(0,i7.Mz)(y,(0,i7.BY)(y)).title})},[M,es,y,_]),el=a.useCallback(async e=>{await i1(i8.lu.BODY,e,g.bodyFonts),es("body",e),it.Y5.triggerAction("commit"),y&&_({type:"SET_BODY_FONTS",payload:(0,i7.Mz)(y,(0,i7.BY)(y)).body})},[g.bodyFonts,es,y,_]),eo=a.useCallback(async e=>{await i1(i8.lu.LABEL,e,g.labelFonts),es("label",e),it.Y5.triggerAction("commit"),y&&_({type:"SET_LABEL_FONTS",payload:(0,i7.Mz)(y,(0,i7.BY)(y)).label})},[g.labelFonts,es,y,_]),ed=(0,a.useCallback)(e=>{(0,ee.SX)({...c,...(0,ee.Q0)(e),interaction:ik.NI.GENERATE}),o()},[c,o]),[ec,eu]=a.useState(sZ.COLOR),em=(0,s.jsx)(tD.r,{shortcuts:[{key:F.Uz.ENTER,modifier:[F.xH.META]}],onAction:ed,disabled:!y||0===e.length,recordingKey:iq.Pt(d,"submit"),children:(0,G.tx)("first_draft.make_changes")}),eh=(0,s.jsx)(tD.r,{shortcuts:[{key:F.Uz.ENTER,modifier:[F.xH.META]}],onAction:w,recordingKey:iq.Pt(d,"doneTheming"),children:(0,G.tx)("first_draft.done_theming")});return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(en.B,{fullWidth:!0,align:"center",justify:"space-between",gap:0,children:"theme"===i.activeTab&&(0,s.jsx)(an,{bodyFont:ea(O),brandColor:N,colorMode:I,cornerRadiusStop:A,labelFont:ea(R),onChangeBodyFont:el,onChangeColor:X,onChangeColorMode:U,onChangeCornerRadiusStop:Q,onChangeLabelFont:eo,onChangeSpacingStop:ei,onChangeTitleFont:er,recordingKey:iq.Pt(d,"themeEditorDrawer"),section:ec,spacingStop:L,titleFont:ea(M)})}),(0,s.jsxs)("div",{className:iG()(B.s.p8.relative.$,"theme"===i.activeTab&&"first_draft_make_changes_view--contentBoxed--L-H0e",ec&&B.s.elevation500.radiusLarge.$),"data-testid":"readyForPromptView",children:[(0,s.jsx)(iP.t.TabPanel,{...l.prompt,children:(0,s.jsx)(sm.XG,{action:Z.JT.FIRST_DRAFT_MAKE_CHANGES,value:e,onChange:t,recordingKey:iq.Pt(d,"prompt"),suggestion:p,suggestionPills:(0,ep.kc)().first_draft_new_prompt_pills?h:void 0})}),(0,s.jsx)(iP.t.TabPanel,{...l.theme,children:(0,s.jsx)(ae,{activeTab:ec,onTabChange:eu,brandColor:N,cornerRadiusStop:A,spacingStop:L,titleFont:ea(M),bodyFont:ea(O),labelFont:ea(R),recordingKey:iq.Pt(d,"themeEditor")})}),(0,s.jsxs)(en.B,{fullWidth:!0,justify:"space-between",children:[(0,s.jsxs)(iP.t.TabStrip,{manager:i,children:[(0,s.jsx)(iP.t.Tab,{...r.theme,children:(0,G.tx)("first_draft.style")}),(0,s.jsx)(iP.t.Tab,{...r.prompt,children:(0,s.jsx)("span",{"data-testid":"promptTabLabel",children:(0,G.tx)("first_draft.prompt")})})]}),"prompt"===i.activeTab?em:eh]})]})]})}function a_(e){let t=e.firstDraftData;if(t){if(t.kit.type===d.AZ4.LOCAL)return{type:"LOCAL",pageId:d.XJn.getPageIdFromKitKey(t.kit.key)??""};if(t.kit.type===d.AZ4.LIBRARY)return{type:"1P_LIBRARY",key:t.kit.key}}return JSON.parse(e.getSharedPluginData(sd.SV,"dsKitKey"))}function ay(e,t){switch(t){case"success":(0,ee.as)({...e,status:ik.dM.COMPLETED,reason:ik.F9.SUCCESS});break;case"error":(0,ee.as)({...e,status:ik.dM.FAILED,reason:ik.F9.ERROR});break;case"stopped":(0,ee.as)({...e,status:ik.dM.FAILED,reason:ik.F9.STOPPED})}}var av=n(769183),ab=n.n(av),aC=n(931114),aj=n(911990),ak=n(716736),aw=n(36958),aE=n(233990),aT=n(967987);function aS({node:e,tree:t,parentComponent:n,descendantComponentGuids:i},s){if(!t[e.guid]){if(t[e.guid]={isBuildingBlock:s.isBuildingBlock,name:s.name,parentGuid:n?.guid??null,isListItem:s.isListItem,inferReason:s.inferReason,children:[]},n){let i=t[n.guid];i&&i.children.push(e.guid)}for(let s of i){let i=t[s];i&&(!i.parentGuid||i.parentGuid===n?.guid)&&(i.parentGuid=e.guid)}}}function aI({node:e,tree:t,parentComponent:n,descendantComponentGuids:i}){t[e.guid]&&delete t[e.guid];let s=n?t[n.guid]:null;for(let a of(s&&(s.children=s.children.filter(t=>t!==e.guid)),i)){let i=t[a];i&&i.parentGuid===e.guid&&(i.parentGuid=n?.guid??null,s&&s.children.push(a))}}function aN(e){let t=function(e,t){let n={};for(let i of e.childrenNodes)!function e(t,n,i,s,a=null){var r;let l=i.components[t.guid],o=(r=i.isMobileDesign,("FRAME"===t.type||"INSTANCE"===t.type)&&(!r||function(e,t,n=.1){return Math.abs(e-t)<n}(t.size.x,n.size.x-n.stackLeftPadding-n.stackLeftPadding))),c=[];if(l&&(s[t.guid]={isBuildingBlock:o,name:l,parentGuid:a?.guid??null,isListItem:!1,children:[]},a&&s[a.guid])){let e=s[a.guid];e&&e.children.push(t.guid)}for(let r of t.childrenNodes)c=c.concat(e(r,n,i,s,l?t:a));let u={node:t,designNode:n,tree:s,nodeCanBeBuildingBlock:o,descendantComponentGuids:c,parentComponent:a};(function(e){let{node:t,tree:n,nodeCanBeBuildingBlock:i,parentComponent:s}=e,a={};for(let e of t.childrenNodes){let t=n[e.guid];t&&(a[t.name]||(a[t.name]=[]),a[t.name].push(e.guid))}let r=Object.entries(a).filter(([e,t])=>t.length>1);if(1!==r.length)return;let l=r[0][1],o=l[0];for(let a of(n[t.guid]||s||!o||aS(e,{name:`${n[o].name}List`,isBuildingBlock:i,isListItem:!1,inferReason:"list-view"}),l)){let e=n[a];e&&(e.isListItem=!0,e.isBuildingBlock=!1)}})(u),function(e){let{node:t,tree:n,nodeCanBeBuildingBlock:i,parentComponent:s,descendantComponentGuids:a}=e;!n[t.guid]&&!s&&i&&a.filter(e=>!n[e]?.isBuildingBlock&&!n[e]?.parentGuid).length>0&&aS(e,{name:`Component:${t.guid}`,isBuildingBlock:!0,isListItem:!1,inferReason:"component-for-orphaned-atoms"})}(u),function(e){let{node:t,tree:n,designNode:i,descendantComponentGuids:s,nodeCanBeBuildingBlock:a}=e;!n[t.guid]&&0===s.length&&t.parentGuid===i.guid&&a&&aS(e,{name:`Component:${t.guid}`,isBuildingBlock:!0,isListItem:!1,inferReason:"component-for-uncomponentized-element"})}(u),function(e){let{node:t,designNode:n,tree:i}=e,s=i[t.guid];if(s&&s.isBuildingBlock&&t.size.y>.66*n.size.y&&s.children.length>1&&s.children.every(e=>i[e]?.isBuildingBlock)){for(let e of s.children){let t=i[e];t&&(t.parentGuid=null)}aI(e)}}(u),function({node:e,tree:t,parentComponent:n,nodeCanBeBuildingBlock:i,descendantComponentGuids:s,designNode:a}){let r=e.childrenNodes[0];if(i&&1===e.childCount&&r&&t[r.guid]?.isBuildingBlock){let i=t[r.guid];i&&!t[e.guid]&&(t[e.guid]={isBuildingBlock:!0,name:i.name,parentGuid:n?.guid??null,isListItem:!1,inferReason:"hoisted-singleton-building-block",children:i.children}),aI({node:r,designNode:a,tree:t,parentComponent:e,descendantComponentGuids:s,nodeCanBeBuildingBlock:!0})}}(u);let p=function({node:e,designNode:t,tree:n,parentComponent:i,descendantComponentGuids:s}){if(e.size.x<100||e.size.y<20||s.length>0||"NONE"===e.stackMode||e.childCount<=1)return[];let a=e.childrenNodes[0],r=e.childrenNodes[e.childCount-1],l=[];for(let o of[a,r]){if(o?.type!=="FRAME"||o.size.x<100||o.size.y<20)continue;let a=d.XJn.findSimilarNodes(o.guid,e.guid,!1,!1,!0),r=[o,...a.map(e=>(0,eZ.getActiveTSSceneGraph)().get(e)).filter(e=>!!e)],c=Array.from((0,aC._i)(new Set(e.childrenGuids),new Set([o.guid,...a])));if(r.length>=2&&r.length>=e.childCount-1&&c.length<=1){let a=c[0];if(a){let t=e.childrenGuids.indexOf(a);if(t>0&&t<e.childCount-1)return[]}for(let a of r)n[a.guid]||(aS({node:a,designNode:t,tree:n,parentComponent:n[e.guid]?e:i,descendantComponentGuids:s,nodeCanBeBuildingBlock:!1},{isBuildingBlock:!1,name:`Component:${a.guid}`,isListItem:!0,inferReason:"similar-sublayers"}),l.push(a.guid))}}return l}(u);return s[t.guid]?[t.guid,...c,...p]:[...c,...p]}(i,e,t,n);return n}(e.frame,e);if(!t)return[];let{suggestedComponentTree:n,node:i}=function(e,t){let n=d.XJn.detachDesignForComponentize(e.guid,Object.keys(t)),i={};for(let[e,s]of Object.entries(t)){let t=n.get(e),a={...s,parentGuid:s.parentGuid?n.get(s.parentGuid)??s.parentGuid:null,children:s.children.map(e=>n.get(e)??e)};t?i[t]=a:i[e]=a}let s=n.get(e.guid);if(!s)throw Error("Failed to detach design");let a=(0,eZ.getActiveTSSceneGraph)().get(s);if(!a)throw Error("Failed to detach design");return e.parentNode&&e.parentNode.appendChild(a),a.x=e.x,a.y=e.y,e.removeSelfAndChildren(),{suggestedComponentTree:i,node:a}}(e.frame,t);return Array.from(Object.entries(n)).filter(([e])=>e!==i.guid).map(([e,t])=>({guid:e,name:t.name,isBuildingBlock:t.isBuildingBlock}))}function aA(){let[e,t]=a.useState({loaded:0,total:0}),n=a.useContext(aE.x),i=n?.getSuggestedComponents;return{submit:a.useCallback(async(e,n,s,a)=>{let r=e.filter(e=>("FRAME"===e.type||"INSTANCE"===e.type)&&!e.isStateGroup),l=(0,aw.Y6)(),{nodes:o,nodeMappings:c}=iF.l7.user("clone-nodes",()=>(function(e,t){let n=[],i={x:(0,aw.NY)(t.copiedDesigns).right()+aw.CN,y:aw.CN},s=new Map;for(let a of e){let e=d.XJn.cloneNodeForComponentize(a.guid),r=e.get(a.guid);if(!r)continue;let l=(0,eZ.getActiveTSSceneGraph)().get(r);l&&(t.copiedDesigns.appendChild(l),n.push(l),l.relativeTransform={...l.relativeTransform,m02:i.x,m12:i.y},i.x+=l.size.x+aw.FL,s=new Map([...s,...e]))}return(0,aw.Vl)(t),{nodes:n,nodeMappings:s}})(r,l));for(let e of(t({loaded:1,total:o.length}),ab()(o,10))){let r=await (0,ak.Z)(i?i(e):aL(e,n),s);if(s.aborted)return{};for(let e of r)if(e){if(a?.remapNodeIdsForTest)for(let[t,n]of c.entries()){let i=e.components[t];i&&(e.components[n]=i,delete e.components[t])}iF.l7.user("componentize",()=>{!function(e,t){let n=(0,eZ.getActiveTSSceneGraph)();if(!n.getCurrentPage())return;let i=(0,aw.NY)(t.buildingBlocks),s=(0,aw.NY)(t.atoms),a={x:i.right()+aw.CN,y:aw.CN},r={x:s.right()+aw.CN,y:aw.CN},l={};for(let{guid:i,name:s,isBuildingBlock:o}of e){let e=n.get(function(e,t){for(;t[e];)e=t[e];return e}(i,l));if(!e||"FRAME"!==e.type&&"INSTANCE"!==e.type||("FRAME"===e.type&&(0,aw.MR)(e,t.icons),!e.isAlive))continue;let c=d.XJn.findSimilarNodes(e.guid,t.buildingBlocks.guid,!1,!0,!0).concat(d.XJn.findSimilarNodes(e.guid,t.atoms.guid,!1,!0,!0)),u=c[0]?n.get(c[0]):null;if(!u){if("FRAME"===e.type)(u=n.createComponentFromNode(e.clone())).name=s;else{if(!(u=n.get(e.clone())))throw Error("Failed to clone instance");(0,aT.T)(u)}o?(t.buildingBlocks.appendChild(u),u.relativeTransform={...u.relativeTransform,m02:a.x,m12:a.y},a.y+=u.size.y+aw.FL):(t.atoms.appendChild(u),u.relativeTransform={...u.relativeTransform,m02:r.x,m12:r.y},r.y+=u.size.y+aw.FL)}let p=(0,aw.w8)(e,u);if(p)for(let[e,t]of p?.entries()){let i=n.get(t),s=i?.overrideKey;s&&(l[e]=s)}}(0,aw.Vl)(t)}(aN(e),l)})}t(t=>({loaded:Math.min(t.loaded+e.length,t.total),total:t.total}))}return it.Y5.commit(),{}},[i]),progress:e}}async function aL(e,t){let n=await Promise.all(e.map(async e=>{let t=await (0,sd.gC)(e);return{imageB64:t.base64,jsx:t.jsx}}));return(await eQ.Ay.design.firstDraftComponentize({requests:n},(0,su.sF)({clientLifecycleId:t}))).responses.map((t,n)=>{let i=e[n];return t&&i?{frame:i,isMobileDesign:t.isMobileDesign,components:t.components.reduce((e,t)=>(e[t.guid]=t.name,e),{})}:null})}var aM=n(701038),aO=n(360110),aR=(e=>(e[e.COMPONENTIZE=0]="COMPONENTIZE",e[e.ADD_PROPS=1]="ADD_PROPS",e[e.LINT=2]="LINT",e[e.ALL=3]="ALL",e))(aR||{}),aP=(e=>(e.INITIAL="initial",e.COMPONENTIZE="componentize",e.ADD_PROPS="add_props",e.LINT="lint",e.ALL="all",e))(aP||{});function aD(e){return e.filter(e=>"FRAME"===e.type).length}function aF(e){let[t,n]=a.useState("initial"),i=[{step:3,title:(0,G.t)("first_draft.make_kit.all_steps.title"),description:(0,G.t)("first_draft.make_kit.all_steps.description")},{step:0,title:(0,G.t)("first_draft.make_kit.componentize_step.title"),description:(0,G.t)("first_draft.make_kit.componentize_step.description")},{step:1,title:(0,G.t)("first_draft.make_kit.add_props_step.title"),description:(0,G.t)("first_draft.make_kit.add_props_step.description")},{step:2,title:(0,G.t)("first_draft.make_kit.lint_step.title"),description:(0,G.t)("first_draft.make_kit.lint_step.description")}],r=(0,a.useCallback)(e=>{switch(e){case 0:n("componentize");break;case 1:n("add_props");break;case 2:n("lint");break;case 3:n("all")}},[]),l=e=>(0,s.jsx)(aO.B.Item,{primaryAction:{onAction:()=>{r(e.step)}},children:(0,s.jsxs)("div",{className:B.s.flex.flexColumn.p4.wFull.$,children:[(0,s.jsx)("div",{className:B.s.font13.wFitContent.$,children:e.title}),(0,s.jsx)("div",{className:B.s.font11.colorTextSecondary.lh16.wFitContent.$,children:e.description})]})},e.step);switch(t){case"initial":return(0,s.jsxs)(ei.n,{hideActionPanel:!0,children:[(0,s.jsx)(ei.n.Header,{children:(0,s.jsxs)("div",{className:B.s.wFull.flex.flexColumn.p8.$,children:[(0,s.jsxs)("div",{className:B.s.wFull.flex.gap4.$,children:[(0,s.jsx)("div",{className:B.s.h24.$,children:(0,s.jsx)(sT.K,{recordingKey:iq.Pt(e.recordingKey,"backButton"),onClick:e.onBack,"aria-label":(0,G.t)("qa.go_back"),children:(0,s.jsx)(sN.C,{})})}),(0,s.jsx)("div",{className:B.s.colorText.textBodyLarge.$,children:(0,G.tx)("fullscreen_actions.quick_actions.first-draft-make-kit")})]}),(0,s.jsx)("div",{className:B.s.wFull.flex.font11.$,children:(0,G.tx)("first_draft.make_kit.description")})]})}),(0,s.jsx)(ei.n.Body,{children:(0,s.jsxs)(aO.B,{resultCount:i.length,maxVisibleResults:i.length,children:[l(i[0]),(0,s.jsx)(aO.B.Section,{header:"Individual steps",children:i.slice(1).map(l)})]})})]});case"componentize":return(0,s.jsx)(aB,{});case"add_props":return(0,s.jsx)(aU,{});case"lint":return(0,s.jsx)(iM.zY,{});case"all":return(0,s.jsx)(aV,{})}}let az=async({params:{submit:e,selectedNodes:t},abortController:n,clientLifecycleId:i})=>{await e(t,i,n.signal)};function aB(e){let{close:t}=(0,S.cq)(),n=(0,ig.RL)(Z.JT.FIRST_DRAFT_COMPONENTIZE,az),{start:i,stop:r,state:l,aiTrackingContext:o}=n,{submit:c,progress:u}=aA(),p=(0,a.useCallback)(async()=>{let e=(0,eZ.getActiveTSSceneGraph)().getCurrentPage();if(!e)return;let t=e.directlySelectedNodes;0!==t.length&&await i({selectedNodes:t,submit:c})},[i,c]),m=a.useCallback(()=>{r(),t()},[t,r]),h=a.useCallback(()=>{d.glU.triggerActionInUserEditScope("undo",{}),t()},[t]),f=e.overrides?.state??l,g=e.overrides?.progress??u;switch(f){case ig.qy.INITIAL:return(0,s.jsx)(iC.AE,{action:Z.JT.FIRST_DRAFT_COMPONENTIZE,actionLabel:(0,G.tx)("first_draft.make_kit.componentize_step.title"),actionIcon:(0,s.jsx)(eH.P,{}),onPerform:e.overrides?.perform??p,instructionAction:{type:"learn_more",url:"https://figma.com"},aiTrackingContext:o,getCustomSelectedNodesAmount:aD,children:(0,G.tx)("first_draft.make_kit.componentize_step.instructions")});case ig.qy.RUNNING:return(0,s.jsx)(iS.F,{recordingKey:iq.Pt(e.recordingKey,"componentizeRunning"),aiTrackingContext:o,onStop:m,secondaryMessage:g.total?(0,G.t)("first_draft.make_kit.x_of_y_frames",{loaded:g.loaded,total:g.total}):void 0,children:(0,G.tx)("first_draft.make_kit.componentize_step.running")});case ig.qy.DONE:return(0,s.jsx)(iE.Oq,{iterateOptions:[{type:iE.is.UNDO,callback:h}],aiTrackingContext:{...o,iteration_view_type:ik.$J.DEFAULT_SUCCESS}});case ig.qy.CANCELLED:return null;case ig.qy.ERROR:return(0,s.jsx)(iw.E,{error:"error"in n?n.error:Error(),recordingKey:iq.Pt(e.recordingKey,"error"),buttons:[{type:iw.f.OK,callback:t}],aiTrackingContext:o});default:(0,O.xb)(f)}}let aG=async({params:{submit:e,selectedNodes:t},abortController:n,clientLifecycleId:i})=>{await e(i,n.signal,t)};function aU(e){let{close:t}=(0,S.cq)(),{submit:n,progress:i}=(0,aM.iK)(),r=(0,ig.RL)(Z.JT.FIRST_DRAFT_SUGGEST_PROPS,aG),{start:l,stop:o,state:c,aiTrackingContext:u}=r,p=(0,a.useCallback)(async()=>{let e=(0,eZ.getActiveTSSceneGraph)().getCurrentPage();if(!e)return;let t=e.directlySelectedNodes;0!==t.length&&await l({selectedNodes:t,submit:n})},[l,n]),m=a.useCallback(()=>{o(),t()},[t,o]),h=a.useCallback(()=>{d.glU.triggerActionInUserEditScope("undo",{}),t()},[t]),f=e.overrides?.state??c,g=e.overrides?.progress??i;switch(f){case ig.qy.INITIAL:return(0,s.jsx)(iC.AE,{action:Z.JT.FIRST_DRAFT_SUGGEST_PROPS,actionLabel:(0,G.tx)("first_draft.make_kit.add_props_step.add_props_button"),actionIcon:(0,s.jsx)(eH.P,{}),onPerform:p,instructionAction:{type:"learn_more",url:"https://figma.com"},aiTrackingContext:u,children:(0,G.tx)("first_draft.make_kit.add_props_step.instructions")});case ig.qy.RUNNING:return(0,s.jsx)(iS.F,{recordingKey:iq.Pt(e.recordingKey,"suggestPropsRunning"),aiTrackingContext:u,onStop:m,secondaryMessage:g.total?(0,G.t)("first_draft.make_kit.x_of_y_components",{loaded:g.loaded,total:g.total}):void 0,children:(0,G.tx)("first_draft.make_kit.add_props_step.running")});case ig.qy.DONE:return(0,s.jsx)(iE.Oq,{iterateOptions:[{type:iE.is.UNDO,callback:h}],aiTrackingContext:{...u,iteration_view_type:ik.$J.DEFAULT_SUCCESS}});case ig.qy.CANCELLED:return null;case ig.qy.ERROR:return(0,s.jsx)(iw.E,{error:"error"in r?r.error:Error(),recordingKey:iq.Pt(e.recordingKey,"error"),buttons:[{type:iw.f.OK,callback:t}],aiTrackingContext:u});default:(0,O.xb)(f)}}function aV(e){let{submit:t,progress:n}=aA(),{start:i,state:r}=(0,ig.RL)(Z.JT.FIRST_DRAFT_COMPONENTIZE,az),{submit:l,progress:o}=(0,aM.iK)(),{start:d,state:c}=(0,ig.RL)(Z.JT.FIRST_DRAFT_SUGGEST_PROPS,aG),u=(0,a.useCallback)(async()=>{let e=(0,eZ.getActiveTSSceneGraph)().getCurrentPage();if(!e)return;let n=e.directlySelectedNodes;0!==n.length&&(await i({selectedNodes:n,submit:t}),await d({submit:l}))},[i,t,d,l]);switch(r){case ig.qy.INITIAL:case ig.qy.RUNNING:case ig.qy.CANCELLED:case ig.qy.ERROR:return(0,s.jsx)(aB,{overrides:{state:r,progress:n,perform:u}});case ig.qy.DONE:switch(c){case ig.qy.INITIAL:case ig.qy.RUNNING:case ig.qy.CANCELLED:case ig.qy.ERROR:return(0,s.jsx)(aU,{overrides:{state:c,progress:o}});case ig.qy.DONE:return(0,s.jsx)(iM.zY,{});default:(0,O.xb)(c)}default:(0,O.xb)(r)}}async function aH(e,t){return(await Promise.all(t.map(async t=>{let n=await (0,sd.gC)(t),i=e.replace("{{jsx}}",n.jsx),s=await eQ.Ay.openai.completeChat({model:"gpt-4o-2024-08-06",temperature:.5,n:1,messages:[{role:"system",content:i},{role:"user",content:[{type:"image_url",image_url:{url:n.base64}}]}],use_cache:!1,response_format:{type:"json_object"}}),a=s.choices[0]?.message.content;return a?{...function(e){if(!e)throw Error("No content detected in GPT response");let t=JSON.parse(e.replace(/```json\n|```/g,"")),n=iZ.AR.parse(t);return{isMobileDesign:n.isMobileDesign,components:n.components.reduce((e,t)=>(e[t.guid]=t.name,e),{})}}(a),frame:t}:null}))).filter(e=>null!==e)}async function aK(e,t){return(await Promise.all(t.map(async t=>{let n=await (0,sd.gC)(t),i=e.replace("{{jsx}}",n.jsx),s=await eQ.Ay.openai.completeChat({model:"gpt-4o-2024-08-06",temperature:.5,n:1,messages:[{role:"system",content:i},{role:"user",content:[{type:"image_url",image_url:{url:n.base64}}]}],use_cache:!1,response_format:{type:"json_object"}}),a=s.choices[0]?.message.content;return a?{component:t,...JSON.parse(a)}:null}))).filter(e=>null!==e)}let aW=e=>{let t=new Set;return!function e(n){if(n.name.startsWith("[COMPONENT]")&&t.add(n.guid),"childrenNodes"in n)for(let t of n.childrenNodes)e(t)}(e),t},aq=(e,t)=>{let n=0,i=e;for(;i.guid!==t.guid&&n<8;){if(n+=1,!i.parentNode)throw Error("Node is not a child of root, distance: "+n);i=i.parentNode}return n},aX=async({componentizePromptOverride:e,dispatch:t})=>{let n=(0,eZ.getActiveTSSceneGraph)().getCurrentPage();if(!n)return;let i=n.directlySelectedNodes;if(0===i.length){t(m.F.enqueue({type:"eval-componentize",message:"No selected nodes"}));return}for(let e of i){if("FRAME"!==e.type){t(m.F.enqueue({type:"eval-componentize",message:"Selected node is not a frame"}));return}if(e.name.startsWith("[TEST]")){t(m.F.enqueue({type:"eval-componentize",message:`Selected node ${e.name} is already a test node`}));return}}for(let n of i){let i;if(n.name=`[TEST] ${n.name}`,!(i=e?(await aH(e,[n]))[0]:(await aL([n],""))[0])){t(m.F.enqueue({type:"eval-componentize",message:`Failed to get suggested components for ${n.name}`}));return}for(let e of aN(i))(0,eZ.getActiveTSSceneGraph)().get(e.guid).name=`[COMPONENT] ${e.name}`}},aY=async({componentizePromptOverride:e,dispatch:t,close:n})=>{let i=(0,eZ.getActiveTSSceneGraph)().getCurrentPage();if(!i)return;let s=i.childrenNodes.filter(e=>"FRAME"===e.type);if(0===s.length){t(m.F.enqueue({type:"eval-componentize",message:"No frames found"}));return}n(),t(m.F.enqueue({type:"eval-componentize",message:"Starting eval"}));let a=[],r=0,l=s.filter(e=>e.name.startsWith("[TEST]"));for(let n of ab()(l,5))await Promise.all(n.map(async n=>{let i;i=e?(await aH(e,[n]))[0]:(await aL([n],""))[0],a.push({node:n,components:new Set(aN(i).map(e=>e.guid)),expectedComponents:aW(n)}),r+=1,t(m.F.enqueue({type:"eval-componentize",message:`Completed ${r} / ${l.length}`}))})),await new Promise(e=>setTimeout(e,100));let o=[];for(let e of a){let t=(0,aC._i)(e.expectedComponents,e.components).size,n=(0,aC._i)(e.components,e.expectedComponents).size,i=(0,aC.iR)(e.expectedComponents,e.components).size;o.push({falseNegativeCount:t,falsePositiveCount:n,correctCount:i,result:e})}iF.l7.ai("eval-componentize",()=>{let e=(0,eZ.getActiveTSSceneGraph)().createNode("CANVAS");e.name=`Eval Run ${i.name} ${new Date().toISOString()}`;let t=(0,eZ.getActiveTSSceneGraph)().createNode("FRAME");t.name="Results Frame",t.x=-1e3,t.y=-1e3,t.size={x:220,y:220},t.fills=[{type:"SOLID",color:{r:.9,g:.9,b:.9,a:1},visible:!0,opacity:1,blendMode:"NORMAL"}];let n=(0,eZ.getActiveTSSceneGraph)().createNode("TEXT");for(let i of(n.name="Results",d.biQ.setTextContentOnTextNode(n.guid,`False Negative Count: ${o.reduce((e,t)=>e+t.falseNegativeCount,0)}
False Positive Count: ${o.reduce((e,t)=>e+t.falsePositiveCount,0)}
Correct Count: ${o.reduce((e,t)=>e+t.correctCount,0)}`),n.x=10,n.y=10,n.size={x:200,y:200},n.fills=n.fills.concat([{type:"SOLID",color:{r:0,g:0,b:0,a:1},visible:!0,opacity:1,blendMode:"NORMAL"}]),t.appendChild(n),e.appendChild(t),o)){let t=i.result;if(!(0,aC.yZ)(t.expectedComponents,t.components)){let n=d.XJn.cloneNodeForComponentize(t.node.guid),s=(0,eZ.getActiveTSSceneGraph)().get(n.get(t.node.guid));if(!s)throw Error("Failed to clone node");s.name=t.node.name+` (FNC: ${i.falseNegativeCount} FPC: ${i.falsePositiveCount} CC: ${i.correctCount})`;let a=(e,t)=>{e.strokePaints={data:e.strokePaints.data.concat([{type:"SOLID",color:t,visible:!0,opacity:1,blendMode:"NORMAL"}]),blobs:e.strokePaints.blobs},e.strokeWeight=(8-aq(e,s))*2,e.strokeAlign="OUTSIDE",e.borderStrokeWeightsIndependent=!1,e.borderBottomWeight=2,e.borderTopWeight=2,e.borderLeftWeight=2,e.borderRightWeight=2},r=new Map;for(let[e,t]of n.entries())r.set(t,e);for(let e of(0,aC._i)(t.expectedComponents,t.components)){let t=n.get(e);a((0,eZ.getActiveTSSceneGraph)().get(t),{r:1,g:0,b:0,a:1})}for(let e of(0,aC._i)(t.components,t.expectedComponents)){let t=n.get(e);a((0,eZ.getActiveTSSceneGraph)().get(t),{r:0,g:0,b:1,a:1})}for(let e of(0,aC.iR)(t.expectedComponents,t.components)){let t=n.get(e);a((0,eZ.getActiveTSSceneGraph)().get(t),{r:0,g:1,b:0,a:1})}e.appendChild(s)}}(0,eZ.getActiveTSSceneGraph)().setCurrentPageAsync(e.guid)}),t(m.F.enqueue({type:"eval-componentize",message:"Finished eval"}))},aZ=["componentizePrompt","suggestProps","componentizeResultMapping"];var aJ=n(742476),aQ=n(638641),a$=n(954231),a0=n(947153),a1=n(327217),a2=n(384851),a3=n(826220),a5=n(268389),a4=n(4921),a6=n(101441),a7=n(878178),a8=n(868768),a9=n(757381),re=n(240787),rt=n(475477),rn=n(390036),ri=n(278491),rs=n(7786),ra=n(44535),rr=n(578420);let rl={ORG:"org",ALL:"all"},ro=(0,c.E3)("firstDraftKitPickerTab",rl.ORG);function rd({aiTrackingContext:e,ParentComponent:t}){let{allUsableKitEntries:n,hasLastSelectedKit:i,setSelectedKit:r,kitsAreLoaded:l}=(0,sx.sI)(),[o,d]=a.useState(""),u=a.useRef(null);(0,ra.y)(o,u),(0,rs.z)();let{pop:p,push:m}=(0,S.cq)(),h=(0,a.useCallback)(n=>{r(n),(0,ee.SX)({...e,interaction:ik.NI.SELECT_KIT,interaction_type:ik.bp.BUTTON_CLICK}),i?p():m({name:et.Sn.FIRST_DRAFT,module:(0,s.jsx)(t,{})})},[t,e,r,i,p,m]),[f,g]=a.useState(null);a.useEffect(()=>{u.current?.focus()},[u]);let[x,_]=(0,c.fp)(ro),y=(0,tb.T5)("FirstDraftKitSelection").unwrapOr(null),v=y?.name||(0,G.t)("first_draft.kits.org_libraries.fallback"),b=v&&v.length>20,C=(0,ep.kc)().first_draft_direct_gen&&n.some(e=>e.metadata.direct_generation),j=f||n;if((0,ep.kc)().first_draft_direct_gen){if(C){let e=x===rl.ORG;j=j.filter(t=>e===t.metadata.direct_generation)}}else j=j.filter(e=>!e.metadata.direct_generation);return(0,s.jsx)(L.s3,{name:"firstDraftKitPicker",recordingKey:"firstDraftKitPicker",children:(0,s.jsx)(z.dP,{children:(0,s.jsxs)("div",{className:B.s.flex.flexColumn.gap8.pt8.$,"data-testid":"kitSelectionListContainer",children:[(0,s.jsxs)("div",{className:iG()("kit_picker_view--navContainer--JHIEY",ri.Dm),children:[(0,s.jsx)("div",{className:B.s.h24.$,children:(0,s.jsx)(sT.K,{recordingKey:iq.Pt("firstDraftKitSelection","backButton"),onClick:p,"aria-label":(0,G.t)("qa.go_back"),children:(0,s.jsx)(sN.C,{})})}),(0,s.jsx)("input",{ref:u,"aria-autocomplete":"list",className:iG()("kit_picker_view--searchInput--Yj6zW",ri.Dm),dir:"auto",maxLength:100,onChange:e=>{!function(e){if(d(e),0===e.length)g(null);else{let t=e.toLowerCase();g(n.filter(e=>ru(e).toLowerCase().includes(t)))}}(e.target.value)},placeholder:(0,G.t)("first_draft.kits.search_placeholder"),spellCheck:!1,type:"search",value:o}),(0,s.jsx)(rr.yi,{helpUrlVariant:Z.JT.FIRST_DRAFT_MAKE_KIT})]}),l&&(0,ep.kc)().first_draft_direct_gen?(0,s.jsx)("div",{className:B.s.wFull.pl8.pr8.$,children:C?(0,s.jsxs)(ea.fu,{value:x,onChange:R.lQ,numItems:2,children:[(0,s.jsx)(ea.oz,{tabId:rl.ORG,onAction:()=>_(rl.ORG),recordingKey:iq.Pt("firstDraftKitSelection","orgTab"),htmlAttributes:{...b&&{"data-tooltip":v,"data-tooltip-type":eL.Ib.TEXT}},children:(0,G.tx)("first_draft.kits.org_libraries",{orgName:(0,rn.EJ)(v,20)})}),(0,s.jsx)(ea.oz,{tabId:rl.ALL,onAction:()=>_(rl.ALL),recordingKey:iq.Pt("firstDraftKitSelection","allTab"),children:(0,G.tx)("first_draft.kits.all_libraries")})]}):(0,s.jsx)(rp,{})}):null,(0,s.jsx)("div",{style:{height:312},className:B.s.relative.$,"data-testid":"kitSelectionListView",children:l?(0,s.jsx)(rc,{kitsToShow:j,searchQuery:o,onKitOptionSelected:h}):null})]})})})}function rc({kitsToShow:e,searchQuery:t,onKitOptionSelected:n}){if(t&&0===e.length){let e=t.length>20?`${t.slice(0,20)}\u2026`:t;return(0,s.jsx)("div",{className:B.s.p8.selfCenter.justifyCenter.flex.flexGrow0.$,children:(0,G.tx)("first_draft.kits.no_results",{searchQuery:e})})}return(0,s.jsx)(iL.T.Provider,{value:{recordingKey:"firstDraftView"},children:(0,s.jsx)(aO.B,{primary:!0,resultCount:e.length,children:e.map((e,t)=>(0,s.jsx)(aO.B.Item,{primaryAction:{text:"Perform",shortcuts:[{key:F.Uz.ENTER}],onAction:()=>n(e)},actionLabel:!1,recordingKey:iq.Pt("firstDraftKitSelection",t,"list-item"),children:(0,s.jsxs)("div",{className:B.s.p4.gap8.flexRow.flex.itemsCenter.$,"data-testid":"fd-kit-item",children:[(0,s.jsx)("div",{className:"kit_picker_view--fileThumbnail--aGgkC",style:{backgroundImage:`url(${e.thumbnailUrl})`}}),(0,s.jsxs)("div",{className:"kit_picker_view--kitDisplayInformation--Ypl2p",children:[(0,s.jsx)("div",{children:ru(e)}),e.numComponents>0&&(0,s.jsx)("div",{className:"kit_picker_view--componentCountText--bBnSq",children:(0,G.tx)("first_draft.kits.components_count",{count:e.numComponents})})]})]})},t))})})}function ru(e){switch(e.dsKitKey.type){case"LOCAL":case"USER_LIBRARY":return e.name;case"1P_LIBRARY":if(e.metadata.identifier)return(0,G.t)(`first_draft.kits.${e.metadata.identifier}`)||e.name;return e.name;default:return(0,O.xb)(e.dsKitKey)}}function rp(){return(0,s.jsxs)("div",{className:"kit_picker_view--tempGettingStartedNotice--ADe-Q",children:[(0,s.jsx)("div",{className:B.s.fontBold.$,children:(0,G.tx)("first_draft.direct_gen.getting_started.heading")}),(0,s.jsxs)("div",{className:B.s.inline.colorTextSecondary.flexWrap.$,children:[(0,G.tx)("first_draft.direct_gen.getting_started.notice")," ",(0,s.jsx)(rt.N,{newTab:!0,trusted:!0,href:"https://www.figma.com/blog/figma-ai-first-draft-byods/",onClick:e=>e.stopPropagation(),htmlAttributes:{"data-tooltip":(0,G.t)("qa.learn_more"),"data-tooltip-type":eL.Ib.TEXT,"data-tooltip-show-above":!0},children:(0,G.tx)("qa.learn_more")})]})]})}function rm({onClose:e,defaultPosition:t,description:n,setDescription:i}){return(0,s.jsx)(a3.bL,{width:"sm",onClose:e,defaultPosition:{bottom:window.innerHeight-t.y-16,right:window.innerWidth-t.x+16},children:(0,s.jsxs)(a5.vo,{children:[(0,s.jsx)(a5.Y9,{children:(0,s.jsx)(a5.hE,{children:(0,G.tx)("first_draft.reference_settings")})}),(0,s.jsx)(a5.nB,{padding:8,children:(0,s.jsx)(a9.v,{placeholder:(0,G.t)("first_draft.reference_settings.placeholder"),value:n,onChange:e=>{i(e.currentTarget.value)},rows:3,minHeight:64,maxHeight:64,focusOnMount:!0})})]})})}function rh({selectedNodeThumbnailsCache:e,onDelete:t,promptValue:n,setPromptValue:i}){let r=Array.from((0,a2.eb)().values()),[l,o]=a.useState(null),c=(0,a.useRef)({x:0,y:0});return(0,s.jsxs)("div",{className:B.s.p4.flex.flexRow.flexWrap.minW0.flexShrink0.$,children:[r?.map(n=>s.jsxs("div",{className:B.s.relative.$,style:{display:"flex"},children:[s.jsx(a8.v,{thumbnailUrl:e?.get(n.guid)?.imageURL??a2.zs,altText:n.name,onClick:()=>{d.glU?.panToNode(n.guid,!1)},isUploading:e?.get(n.guid)?.promise!==null,onDelete:()=>{t(n.guid)}}),s.jsx("div",{className:B.s.absolute.colorBgSecondary.p4.$,style:{bottom:"-4px",left:"-4px",borderRadius:"0 9px 0 0"},children:s.jsx(a4.f,{onIcon:s.jsx(a6.P,{}),offIcon:s.jsx(a6.P,{}),onChange:(e,{event:t})=>{c.current={x:t.target.getBoundingClientRect().x,y:t.target.getBoundingClientRect().bottom},o(e?n.guid:null)},checked:l===n.guid,variant:"highlighted","aria-label":G.t("first_draft.reference_settings.adjust_settings")||""})})]},n.guid)),l&&(0,s.jsx)(rm,{onClose:()=>o(null),defaultPosition:c.current,description:n.attachmentMetadata?.[l]?.description??"",setDescription:e=>i({...n,attachmentMetadata:{...n.attachmentMetadata,[l]:{description:e}}})})]})}function rf({promptValue:e,setPromptValue:t,onShowKitPicker:n,selectedKit:i,handleSubmit:r,promptHistory:o,recordingKey:c,aiTrackingContext:u,selectedNodeThumbnailsCache:p,allowNodeAttachments:m}){let h;let[f]=a.useState(function(e=3,t){let n=(0,ep.kc)().first_draft_new_prompt_pills,i=[{label:(0,G.t)("first_draft.prompts.pricing_page.label"),prompt:(0,G.t)("first_draft.prompts.pricing_page.prompt"),type:"WEB"},{label:(0,G.t)("first_draft.prompts.sign_in_screen.label"),prompt:(0,G.t)("first_draft.prompts.sign_in_screen.prompt"),type:"WEB"},{label:(0,G.t)("first_draft.prompts.blog_post.label"),prompt:(0,G.t)("first_draft.prompts.blog_post.prompt"),type:"WEB"},{label:(0,G.t)("first_draft.prompts.portfolio.label"),prompt:(0,G.t)("first_draft.prompts.portfolio.prompt"),type:"WEB"},{label:(0,G.t)("first_draft.prompts.news_site.label"),prompt:(0,G.t)("first_draft.prompts.news_site.prompt"),type:"WEB"},{label:(0,G.t)("first_draft.prompts.onboarding.label"),prompt:(0,G.t)("first_draft.prompts.onboarding.prompt"),type:"WEB"},{label:(0,G.t)("first_draft.prompts.sign_in_screen.label"),prompt:(0,G.t)("first_draft.prompts.sign_in_screen.prompt"),type:"MOBILE"},{label:(0,G.t)("first_draft.prompts.blog_post.label"),prompt:(0,G.t)("first_draft.prompts.blog_post.prompt"),type:"MOBILE"},{label:(0,G.t)("first_draft.prompts.map_app_mobile.label"),prompt:(0,G.t)("first_draft.prompts.map_app_mobile.prompt"),type:"MOBILE"},{label:(0,G.t)("first_draft.prompts.messaging_mobile.label"),prompt:(0,G.t)("first_draft.prompts.messaging_mobile.prompt"),type:"MOBILE"},{label:(0,G.t)("first_draft.prompts.profile.label"),prompt:(0,G.t)("first_draft.prompts.profile_mobile.prompt"),type:"MOBILE"},{label:(0,G.t)("first_draft.prompts.travel_app_mobile.label"),prompt:(0,G.t)("first_draft.prompts.travel_app_mobile.prompt"),type:"MOBILE"},{label:(0,G.t)("first_draft.prompts.social_feed_mobile.label"),prompt:(0,G.t)("first_draft.prompts.social_feed_mobile.prompt"),type:"MOBILE"},{label:(0,G.t)("first_draft.prompts.ticketing_app.label"),prompt:(0,G.t)("first_draft.prompts.ticketing_app.prompt"),type:"MOBILE"},{label:(0,G.t)("first_draft.prompts.ride_sharing_mobile.label"),prompt:(0,G.t)("first_draft.prompts.ride_sharing_mobile.prompt"),type:"MOBILE"},{label:(0,G.t)("first_draft.prompts.to_dos_mobile.label"),prompt:(0,G.t)("first_draft.prompts.to_dos_mobile.prompt"),type:"MOBILE"}];n&&i.push({label:(0,G.t)("first_draft.prompts.homepage.label"),prompt:(0,G.t)("first_draft.prompts.homepage.prompt"),type:"WEB"},{label:(0,G.t)("first_draft.prompts.homepage.label"),prompt:(0,G.t)("first_draft.prompts.homepage_2.prompt"),type:"WEB"},{label:(0,G.t)("first_draft.prompts.video_player_streaming.label"),prompt:(0,G.t)("first_draft.prompts.video_player_streaming.prompt"),type:"WEB"},{label:(0,G.t)("first_draft.prompts.video_page_with_comments.label"),prompt:(0,G.t)("first_draft.prompts.video_page_with_comments.prompt"),type:"WEB"},{label:(0,G.t)("first_draft.prompts.search_results_travel.label"),prompt:(0,G.t)("first_draft.prompts.search_results_travel.prompt"),type:"WEB"},{label:(0,G.t)("first_draft.prompts.social_feed_text_heavy.label"),prompt:(0,G.t)("first_draft.prompts.social_feed_text_heavy.prompt"),type:"WEB"},{label:(0,G.t)("first_draft.prompts.profile.label"),prompt:(0,G.t)("first_draft.prompts.profile_social_media.prompt"),type:"WEB"},{label:(0,G.t)("first_draft.prompts.news_article.label"),prompt:(0,G.t)("first_draft.prompts.news_article.prompt"),type:"WEB"},{label:(0,G.t)("first_draft.prompts.landing_page.label"),prompt:(0,G.t)("first_draft.prompts.landing_page_beauty.prompt"),type:"WEB"},{label:(0,G.t)("first_draft.prompts.landing_page.label"),prompt:(0,G.t)("first_draft.prompts.landing_page_tech.prompt"),type:"WEB"},{label:(0,G.t)("first_draft.prompts.marketing_page_football.label"),prompt:(0,G.t)("first_draft.prompts.marketing_page_football.prompt"),type:"WEB"},{label:(0,G.t)("first_draft.prompts.shopping.label"),prompt:(0,G.t)("first_draft.prompts.shopping_hifi.prompt"),type:"WEB"},{label:(0,G.t)("first_draft.prompts.shopping.label"),prompt:(0,G.t)("first_draft.prompts.product_details_shoes.prompt"),type:"WEB"},{label:(0,G.t)("first_draft.prompts.admin_dashboard_saas.label"),prompt:(0,G.t)("first_draft.prompts.admin_dashboard_saas.prompt"),type:"WEB"},{label:(0,G.t)("first_draft.prompts.settings_mobile.label"),prompt:(0,G.t)("first_draft.prompts.settings_mobile.prompt"),type:"MOBILE"},{label:(0,G.t)("first_draft.prompts.video_player_comments_mobile.label"),prompt:(0,G.t)("first_draft.prompts.video_player_comments_mobile.prompt"),type:"MOBILE"},{label:(0,G.t)("first_draft.prompts.checkout_mobile.label"),prompt:(0,G.t)("first_draft.prompts.checkout_mobile.prompt"),type:"MOBILE"},{label:(0,G.t)("first_draft.prompts.reviews_mobile.label"),prompt:(0,G.t)("first_draft.prompts.reviews_mobile.prompt"),type:"MOBILE"},{label:(0,G.t)("first_draft.prompts.audio_player_mobile.label"),prompt:(0,G.t)("first_draft.prompts.audio_player_mobile.prompt"),type:"MOBILE"},{label:(0,G.t)("first_draft.prompts.investing_mobile.label"),prompt:(0,G.t)("first_draft.prompts.investing_mobile.prompt"),type:"MOBILE"},{label:(0,G.t)("first_draft.prompts.app_browsing_mobile.label"),prompt:(0,G.t)("first_draft.prompts.app_browsing_mobile.prompt"),type:"MOBILE"},{label:(0,G.t)("first_draft.prompts.reservations_mobile.label"),prompt:(0,G.t)("first_draft.prompts.reservations_mobile.prompt"),type:"MOBILE"},{label:(0,G.t)("first_draft.prompts.fitness_mobile.label"),prompt:(0,G.t)("first_draft.prompts.fitness_mobile.prompt"),type:"MOBILE"},{label:(0,G.t)("first_draft.prompts.subscriptions_mobile.label"),prompt:(0,G.t)("first_draft.prompts.subscriptions_mobile.prompt"),type:"MOBILE"},{label:(0,G.t)("first_draft.prompts.recipes_mobile.label"),prompt:(0,G.t)("first_draft.prompts.recipes_mobile.prompt"),type:"MOBILE"},{label:(0,G.t)("first_draft.prompts.sports_mobile.label"),prompt:(0,G.t)("first_draft.prompts.sports_mobile.prompt"),type:"MOBILE"},{label:(0,G.t)("first_draft.prompts.delivery_app_mobile.label"),prompt:(0,G.t)("first_draft.prompts.delivery_app_mobile.prompt"),type:"MOBILE"},{label:(0,G.t)("first_draft.prompts.calendar_mobile.label"),prompt:(0,G.t)("first_draft.prompts.calendar_mobile.prompt"),type:"MOBILE"},{label:(0,G.t)("first_draft.prompts.email_mobile.label"),prompt:(0,G.t)("first_draft.prompts.email_mobile.prompt"),type:"MOBILE"},{label:(0,G.t)("first_draft.prompts.file_browser_mobile.label"),prompt:(0,G.t)("first_draft.prompts.file_browser_mobile.prompt"),type:"MOBILE"},{label:(0,G.t)("first_draft.prompts.education_mobile.label"),prompt:(0,G.t)("first_draft.prompts.education_mobile.prompt"),type:"MOBILE"},{label:(0,G.t)("first_draft.prompts.shopping_mobile.label"),prompt:(0,G.t)("first_draft.prompts.shopping_mobile.prompt"),type:"MOBILE"});let s=i;if(t){let e=t.toLowerCase();e.includes("mobile")?s=s.filter(e=>"MOBILE"===e.type):e.includes("web")&&(s=s.filter(e=>"WEB"===e.type))}let a=sy()(s),r={};for(let t of a){if(Object.keys(r).length>=e)break;let n=sC(t.label);r[n]||(r[n]=t)}let o=Object.values(r).slice(0,e);return o.length<e?((0,ef.$D)(l.e.AI_GENERATION,Error(`Unable to generate ${e} unique presets`),{extra:{count:e,generatedCount:o.length,selectedPresetsObj:r,shuffledPresets:a}}),[]):o}(4,i?.name)),g=(0,a.useCallback)(e=>{(0,ee.SX)({...u,...(0,ee.Q0)(e),interaction:ik.NI.GENERATE}),r()},[u,r]),x=Array.from((0,a2.eb)().values()),_=(0,a.useCallback)(e=>{d.Egt?.removeFromSelection([e])},[]),y=(0,a.useCallback)(()=>0!==e.prompt.length,[e]),v=(0,ep.kc)().first_draft_direct_gen,b=(0,a.useRef)(null),C=()=>i&&(0,s.jsx)(tU.$n,{"aria-label":ru(i),iconPrefix:(0,s.jsx)(a7.i,{style:{marginLeft:2,marginRight:4}}),onClick:n,recordingKey:iq.Pt(c,"changeKit"),variant:"secondary",children:ru(i)}),j=(0,re.o)();return h=v?{growVertically:!0,width:j-16}:{growVertically:!1},(0,s.jsxs)("div",{className:B.s.borderBox.$,style:{padding:8},"data-testid":"readyForPromptView",children:[(0,s.jsx)(sm.XG,{action:Z.JT.FIRST_DRAFT,bottomContent:m&&v&&x&&p&&x.length>0&&(0,s.jsx)(rh,{promptValue:e,setPromptValue:t,selectedNodeThumbnailsCache:p,onDelete:_}),featureNameForInstrumentation:"first_draft",onChange:n=>t({...e,prompt:n}),promptHistory:v?[]:o,recordingKey:iq.Pt(c,"generate"),refocusToInput:!1,suggestion:f[0].prompt,suggestionPills:f.slice(1),textAreaRef:b,topNavContent:v?(0,s.jsx)("div",{}):(0,s.jsx)("div",{className:"first_draft_prompt_view_v2--libraryButtonContainer--P-Bye",children:C()}),value:e.prompt,...h}),(0,s.jsxs)(en.B,{fullWidth:!0,justify:"space-between",children:[v&&C()||(0,s.jsx)("div",{}),(0,s.jsxs)(en.B,{gap:8,children:[v&&(0,s.jsx)(sm.nj,{promptHistory:o,onChange:n=>t({...e,prompt:n}),textAreaRef:b}),(0,s.jsx)(tD.r,{shortcuts:[{key:F.Uz.ENTER,modifier:[F.xH.META]}],onAction:g,recordingKey:iq.Pt(c,"generate"),disabled:!y(),children:(0,G.tx)("first_draft.generate")})]})]})]})}var rg=n(462046),rx=n(579553);function r_({options:e,onSelect:t}){let[n,i]=a.useState(),r=a.useCallback((e,s)=>{t(e,{ev:s,prevOption:n}),i(e)},[t,n]);return(0,s.jsxs)(sO._,{children:[(0,s.jsx)(rx.t,{}),(0,s.jsx)(tF.x,{columns:6,gap:13.9,padding:0,children:e.map((e,t)=>(0,s.jsx)(ry,{column:t,presetOption:e,onSelect:r},t))})]})}function ry({column:e,presetOption:t,onSelect:n}){let i={onAction:e=>n(t,e)};return(0,s.jsx)(tF.x.Item,{recordingKey:`previewTileItem-${e}`,focusAction:i,primaryAction:i,enableFauxFocus:!1,children:(0,s.jsx)(tF.x.GridItemHighlight,{children:(0,s.jsx)("div",{className:B.s.colorBgSecondary.b1.colorBorder.wFull.flex.alignCenter.justifyCenter.$,style:{aspectRatio:"1/1",height:"56px",overflow:"hidden",borderRadius:"8px",alignItems:"flex-start"},children:(0,s.jsx)("img",{alt:(0,G.t)("first_draft.theme_preview",{index:e+1}),src:t.dataURI,className:B.s.maxWFull.$,draggable:!1})})})})}let rv=(0,c.E3)("draft_prompt_history",[]),rb="first-draft-done-feedback",rC=(0,c.Iz)(()=>(0,c.eU)({prompt:""})),rj=async({params:{selectedKit:e,promptValue:t,submitPrompt:n,shouldContinueStreamRef:i,selectedNodeIds:s,selectedNodeThumbnailsCache:a},abortController:r})=>{if(r.signal.addEventListener("abort",()=>{i.current=!1}),!e)throw Error((0,G.t)("first_draft.no_design_generated"));let l=await n(t,{designSystem:e,selectedNodeIds:s??void 0,selectedNodeThumbnailsCache:a},{shouldGenerateImages:!0,addWireframeBorder:e?.metadata.needs_border,skipSelection:(0,sr.WX)(e)});if(l.error)throw d.XJn.clearFDScene(),l.error;if(l?.success&&!l?.nodeId)throw Error((0,G.t)("first_draft.no_design_generated"));return{result:l}};function rk(){let e=(0,H.tS)(),{aiTrackingContext:t}=(0,ig.wj)(Z.JT.FIRST_DRAFT),n=t.clientLifecycleId,i=a.useCallback(()=>{(0,iH.sx)("First Draft: Error",{file_key:e,clientLifecycleId:n,view:"firstDraftGenerate"},{forwardToDatadog:!0,sendAsBeacon:!0,mlEvent:!0})},[n,e]);return(0,s.jsx)(p.tH,{boundaryKey:"FirstDraft",fallback:p.H4.NONE_I_KNOW_WHAT_IM_DOING,sentryTags:{clientLifecycleId:n,area:l.e.AI_GENERATION},onError:i,children:(0,s.jsx)(iL.T.Provider,{value:{recordingKey:"firstDraftView"},children:(0,s.jsx)(rw,{recordingKey:"firstDraftView"})})})}function rw({recordingKey:e}){let t=(0,ig.RL)(Z.JT.FIRST_DRAFT,rj),{start:n,stop:i,state:l,aiTrackingContext:o}=t,u=o.clientLifecycleId,p=(0,ew.eY)(),h=(0,H.tS)(),f=(0,a.useRef)(null),g=rC(u),[x,_]=(0,c.fp)(g);if(f.current){let e=f.current;f.current=null,_(e)}let[y,v]=a.useState([]),b=a.useRef(!0),C=a.useRef(null),j=a.useRef(null),k=a.useRef(new aJ.P(1)),[w,E]=a.useState(new Set),T=a.useRef({}),{kitsAreLoaded:I,hasLastSelectedKit:N,selectedKit:A}=(0,sx.sI)(),{close:L,push:M,replace:R}=(0,S.cq)(),[P,D]=a.useState(!1===N);(0,a.useEffect)(()=>{if(P||!N)return(N?M:R)({name:et.Sn.FIRST_DRAFT_KIT_PICKER,module:(0,s.jsx)(rd,{aiTrackingContext:o,ParentComponent:rk})})},[o,P,N,e,M,R]);let{promptHistory:F,addPromptToHistory:z}=(0,a1.a)(rv,e=>e),B=(0,sr.WX)(A),[U,V]=(0,a.useState)(!1),K=(0,r.wA)(),W=(0,sr.WX)(A),q=(0,a2.qi)({enabled:W}),X=(0,a2.eb)();ad(!B&&(l===ig.qy.DONE||l===ig.qy.ERROR)),a.useEffect(()=>()=>{d.XJn.clearFDScene()},[]);let Y=a.useCallback(()=>b.current,[b]),Q=a.useCallback(async(e,t,n,i)=>{if(!e||!n)return;(0,a$.xF)(e);let s=!0;A&&!1===A.metadata.has_theme&&(s=!1),0===i.length&&0===Object.keys(t).length&&(s=!1),s&&v(await (0,a0.xk)(n,e,i,t))},[A]),{submitPrompt:$,executionTrace:en,imageProgress:ei}=(0,sr.TM)({shouldContinueStream:Y,onInsertJSXDone:Q,clientLifecycleId:u}),es=a.useCallback(async()=>{if(l===ig.qy.RUNNING){(0,eJ.xi)("first-draft","handleSubmit called while already running");return}if(!A){(0,eJ.xi)("first-draft","handleSubmit called without a selected kit");return}J.D.dispatch(m.F.dequeue({matchType:rb})),z(x.prompt);let e=await n({selectedKit:A,promptValue:x,submitPrompt:$,shouldContinueStreamRef:b,selectedNodeIds:W?Array.from(X.keys()):void 0,selectedNodeThumbnailsCache:q});e?.result?.nodeId&&(C.current=e.result.nodeId)},[l,A,z,x,n,$,W,X,q]),ea=a.useCallback(()=>{i(),L()},[L,i]),er=(0,a.useCallback)(async(e,t)=>{void 0!==t.prevOption&&e!==t.prevOption&&(0,ee.hm)({...o,...(0,ee.zQ)(t.ev),iteration_view_type:ik.$J.SUCCESS_WITH_ITERATION,interaction:ik.sd.GALLERY_SELECT,status:ik.o2.COMPLETED,value:e.modeId||"null"}),t.ev.target?.item&&(T.current[t.ev.target.index]=t.ev.target.item),await k.current.postTask(()=>{if(C.current&&(j.current?.modeId??null)!==e.modeId){let t=(0,a0.DP)(e,C.current,w),n=p.get(t),i=n?.firstDraftData,s=i?.kit?.type??null;(0,iH.sx)("First Draft: Multiple Options Selected",{preset_name:e.modeId,clientLifecycleId:u,isLocal:s===d.AZ4.LOCAL||null,dsKitType:null!==s?s===d.AZ4.LOCAL?"LOCAL":"1P_LIBRARY":null,kitKey:i?.kit?.key??null,file_key:h},{forwardToDatadog:!0,batchRequest:!0,mlEvent:!0}),E(new Set([C.current,...w])),C.current=t,j.current=e}},{})},[o,w,u,p,h]),el=(0,nM.Fk)((e,t)=>{for(let n of t)if(n){let t=e.get(n);if(t)return Object.values(t.explicitVariableModes())[0]??null}},[C.current,...w]);a.useEffect(()=>{if(j.current&&void 0!==el&&j.current.modeId!==el){let e=y.findIndex(e=>e.modeId===el);T.current[e]&&(j.current=y[e],T.current[e].fauxFocus())}},[el,y]);let eo=()=>0===y.length?null:(0,s.jsx)(r_,{options:y,onSelect:er}),ed=en&&(0,ep.kc)().cortex_execution_tracing;switch((0,a.useLayoutEffect)(()=>{l===ig.qy.DONE&&B&&(f.current={...x,attachmentMetadata:{...x.attachmentMetadata,...C.current?{[C.current]:{description:"",wasOutputOfPreviousGeneration:!0}}:{}}},J.D.dispatch(m.F.enqueue({type:rb,icon:aQ.zX.GREEN_CHECK,content:(0,s.jsx)(rg.I,{aiTrackingContext:o}),onDismiss:()=>{J.D.dispatch(m.F.dequeue({matchType:rb}))},timeoutOverride:6e4})),d.XJn?.clearFDScene(),(0,ig.B3)(Z.JT.FIRST_DRAFT),C.current&&d.Egt?.addToSelection([C.current]))},[l,B,x,o]),l){case ig.qy.INITIAL:return(0,s.jsx)(rf,{aiTrackingContext:o,allowNodeAttachments:W,handleSubmit:es,kitsAreLoaded:I,onShowKitPicker:()=>{D(!0)},promptHistory:F,promptValue:x,recordingKey:e,selectedKit:A,selectedNodeThumbnailsCache:q,setPromptValue:_});case ig.qy.RUNNING:return(0,s.jsx)(iS.F,{recordingKey:iq.Pt(e,"running"),onStop:ea,aiTrackingContext:o,secondaryMessage:ei.total&&ei.loaded?(0,G.t)("first_draft.x_of_y_images",{loaded:ei.loaded,total:ei.total}):void 0,children:(0,G.tx)("first_draft.running")});case ig.qy.DONE:{let n=t.result;if(U)return(0,s.jsx)(af,{initialRootGuid:n.result?.nodeId});let i=[];if((0,sp.KK)()&&!(0,ep.kc)().first_draft_use_gemini&&i.push({type:iE.is.MAKE_CHANGES,callback:()=>{d.XJn.clearFDScene(),V(!0)}}),ed&&(0,ao.A)(K,en),B)return null;return(0,s.jsx)(iE.Oq,{content:A?.dsKitKey.type==="USER_LIBRARY"?null:(()=>{let e=[],t=eo();return(t&&e.push(t),0===e.length)?null:(0,s.jsx)(aj.Y,{direction:"vertical",spacing:8,children:e})})(),iterateOptions:i,recordingKey:iq.Pt(e,"iterate"),aiTrackingContext:{...o,iteration_view_type:ik.$J.SUCCESS_WITH_ITERATION},stayOpen:!0})}case ig.qy.ERROR:{let{error:n}=t;return ed&&(0,ao.A)(K,en),(0,s.jsx)(iw.E,{error:n,recordingKey:iq.Pt(e,"error"),buttons:[{type:iw.f.OK,callback:L}],aiTrackingContext:o})}case ig.qy.CANCELLED:return null;default:(0,O.xb)(l)}}var rE=n(712242),rT=n(997629);let rS="7f12ea1300756f144a0fb5daaf68dbfc01103a46",rI=(e,t)=>{let n=e=>{let t=e=>"number"==typeof e&&!isNaN(e);return t(e.x)&&t(e.y)&&t(e.width)&&t(e.height)};if(!n(e)||!n(t))throw Error("Invalid bounding box - all position and size properties must be valid numbers");let i=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x))*Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y)),s=e.width*e.height+t.width*t.height-i;return[i,s]},rN={intersectionOverUnion:{distanceFunction:(e,t,n)=>{let i=!0,s=n.iouDefaultCost;try{let[a,r]=rI(e.boundingBox,t.boundingBox);void 0!==n.iouThreshold&&(i=i&&(0===r?0:a/r)>n.iouThreshold),s=r-a}catch(e){return{match:!1,distance:s}}return{match:i,distance:s}},options:{iouDefaultCost:1,iouThreshold:.2,typeMismatchCost:1}}};var rA=n(584781);function rL(e){return e.fills.some(e=>"IMAGE"===e.type)}let rM=new Set(["VECTOR","LINE"]),rO=new Set(["VECTOR","ROUNDED_RECTANGLE","ELLIPSE","STAR","LINE","REGULAR_POLYGON"]);function rR(e){return!!(rM.has(e.type)||rO.has(e.type))||"GROUP"===e.type&&e.childrenNodes.every(e=>rR(e))}var rP=n(260495),rD=n(156774),rF=n(567164);function rz(e){let t=atob(e),n=new Uint8Array(t.length);for(let e=0;e<t.length;e++)n[e]=t.charCodeAt(e);return n}function rB(e){if(!e||!e.startsWith("data:")||-1===e.indexOf(";base64,"))throw Error("Invalid data URL format");let t=e.split(";base64,").pop();if(!t)throw Error("Could not extract base64 data from URL");let n=e.substring(5,e.indexOf(";"));if(!n)throw Error("Could not extract mime type from data URL");return{base64:t,mimeType:n}}function rG(e){let t=e.size,n=(0,rD._G)(new tV.Mi(t.x,t.y),e.guid,!0,void 0,!1,!0);if(!n||!n.pixels||!n.pixelSize||!n.displaySize)return null;let{base64:i,mimeType:s}=rB((0,rD.Pv)(n.pixels,n.pixelSize));return{base64:i,mimeType:s,pixelData:n.pixels,width:n.pixelSize.x,height:n.pixelSize.y}}async function rU(e,t,n,i,s,a,r,l="Image"){let o;let d=rz(a),c=await (0,rP.UD)(d,r,"image");if(iF.l7.user("create image node",()=>{(o=e.createNode("RECTANGLE")).size={x:i,y:s},o.insertImageInFillPaint(c),o.x=n.x,o.y=n.y,t.appendChild(o),o.name=l}),!o)throw Error("Failed to create node");return o}async function rV(e,t,n,i,a,r,l){let o=await rU(e,t,n,i,a,r,l,"Placeholder");return(0,sg.Vm)(o.guid,(0,s.jsx)(rF.A,{})),o}async function rH(e,t,n,i,s,a,r,l){let{node:o,issues:c}=await (0,rT.LZ)(n,{originalSize:{x:s,y:a},normalizePxToRange01:!0,excludeImageData:!0,excludeVectorData:!0,imagePlaceholderRef:rS}),u=()=>{o&&iF.l7.user("remove aborted node",()=>{o?.removeSelfAndChildren()})};if(l.signal.aborted)throw u(),new ig.lc;if(!o)throw Error(`Failed to deserialize node${c.length?`: ${c.map(e=>e.message).join(", ")}`:""}`);let p=await Promise.all(r.objects.filter(e=>"image"===e.cls||"vector"===e.cls).map(async e=>{let t=function(e,t,n,i){let s=new Uint8Array(i.width*i.height*4);for(let n=0;n<i.height;n++)for(let a=0;a<i.width;a++){let r=i.x+a,l=((i.y+n)*t+r)*4,o=(n*i.width+a)*4;s[o]=e[l]??0,s[o+1]=e[l+1]??0,s[o+2]=e[l+2]??0,s[o+3]=e[l+3]??0}return{data:s,width:i.width,height:i.height}}(function(e,t,n,i){let s=new Uint8Array(e.length);for(let a=0;a<i;a++)for(let i=0;i<n;i++){let r=(a*n+i)*4,l=t[a*n+i];s[r]=e[r]??0,s[r+1]=e[r+1]??0,s[r+2]=e[r+2]??0,s[r+3]=(e[r+3]??0)*(l??0)/255}return s}(i,function(e,t,n,i,s){let a=new Uint8Array(i*s);for(let r=0;r<s;r++)for(let l=0;l<i;l++){let o=Math.floor(l*t/i),d=Math.floor(r*n/s);a[r*i+l]=e[d*t+o]??0}return a}(e.mask,r.width,r.height,s,a),s,a),s,0,{x:e.x,y:e.y,width:e.width,height:e.height}),n=rz((function(e,t,n){let i=t*n*4;if(e.length!==i)throw Error(`Data length (${e.length}) does not match expected dimensions (${i})`);let{canvas:s,ctx:a}=function(e,t){let n=document.createElement("canvas");n.width=e,n.height=t;let i=n.getContext("2d");return{canvas:n,ctx:i}}(t,n);return function(e,t,n,i){let s=e.createImageData(t,n);s.data.set(i),e.putImageData(s,0,0)}(a,t,n,e),s.toDataURL("image/png")})(t.data,t.width,t.height).split(",")[1]),l=await (0,rP.UD)(n,"image/png","image");return{type:e.cls,x:e.x,y:e.y,width:e.width,height:e.height,imageSetForInsertion:l}}));if(l.signal.aborted)throw u(),new ig.lc;let m=function({node:e,graphics:t}){var n;let[i,s]=function(e,t){let n=[];!function e(t){if(n.push(t),t.childrenNodes)for(let n of t.childrenNodes)e(n)}(e);let i=e.absoluteRenderBounds;if(!i)return[[],[]];let s=[],a=[];return n.forEach(e=>{if(t(e)){let{relativeBounds:t,isVisible:n}=function(e,t){let n=e.absoluteBoundingBox;if(!n)return{relativeBounds:void 0,isVisible:!1};let i={x:n.x-t.x,y:n.y-t.y,width:n.w,height:n.h},s=i.x<t.width&&i.x+i.width>0&&i.y<t.height&&i.y+i.height>0;return{relativeBounds:i,isVisible:s}}(e,{x:i.x,y:i.y,width:i.w,height:i.h});n&&t&&(s.push({boundingBox:t}),a.push(e))}}),[s,a]}(e,e=>rL(e)||rR(e)),[a,r]=function(e,t){let n=e.filter(t);return[n.map(e=>({boundingBox:{x:e.x,y:e.y,width:e.width,height:e.height}})),n]}(t,e=>"image"===e.type||"vector"===e.type),[l,o]=function(e,t,n=rN.intersectionOverUnion){let{columnsForRow:i,rowForColumn:s}=function(e,t=!1){if(0===e.length||0===e[0].length)return{columnsForRow:[],rowForColumn:[],gain:0};let n=e.length,i=e[0].length,s=!1;if(i>n){e=e[0].map((t,n)=>e.map(e=>e[n]));let t=n;n=i,i=t,s=!0}let a=t?Math.max(...e.flat()):Math.min(...e.flat());t&&a<0&&(a=0),!t&&a>0&&(a=0),e=e.map(e=>e.map(e=>t?-e+a:e-a));let r=Array(n).fill(-1),l=Array(i).fill(-1),o=Array(i).fill(0),d=Array(n).fill(0);for(let t=0;t<i;t++){let{sink:n,predecessors:i,updatedU:s,updatedV:a}=function(e,t,n,i,s,a){let r=i.length,l=i[0].length,o=Array(r).fill(0),d=Array(l).fill(!1),c=Array(r).fill(!1),u=Array.from({length:r},(e,t)=>t),p=r,m=null,h=0,f=e,g=Array(r).fill(1/0);for(;null===m;){d[f]=!0;let e=1/0,a=-1;for(let s=0;s<p;s++){let r=u[s],l=h+i[r][f]-t[f]-n[r];l<g[r]&&(o[r]=f,g[r]=l),g[r]<e&&(e=g[r],a=s)}if(!isFinite(e))return{sink:null,predecessors:o,updatedU:t,updatedV:n};let r=u[a];c[r]=!0,p--,u.splice(a,1),h=g[r],-1===s[r]?m=r:f=s[r]}t[e]+=h;for(let n=0;n<d.length;n++)d[n]&&n!==e&&(t[n]+=h-g[a[n]]);for(let e=0;e<c.length;e++)c[e]&&(n[e]-=h-g[e]);return{sink:m,predecessors:o,updatedU:t,updatedV:n}}(t,o,d,e,r,l);if(null===n)return{columnsForRow:[],rowForColumn:[],gain:-1};o=s,d=a;let c=n;for(;;){let e=i[c];r[c]=e;let n=l[e];if(l[e]=c,c=n,e===t)break}}let c=0;for(let t=0;t<i;t++)c+=e[l[t]][t];if(t?(c=-c+a*i,o=o.map(e=>-e),d=d.map(e=>-e)):c+=a*i,s){let e=r;r=l,l=e,e=o,o=d,d=e}return{columnsForRow:r,rowForColumn:l,gain:c}}(function(e,t,n){let{distanceFunction:i,options:s}=n;if(!i)throw Error("`distanceFunction` must be set in config.");if(!s)throw Error("`options` must be set in config.");let a=Array.from({length:e.length},()=>Array(t.length).fill(0));for(let n=0;n<e.length;n++)for(let r=0;r<t.length;r++)a[n][r]=i(e[n],t[r],s).distance;return a}(e,t,n)),{distanceFunction:a,options:r}=n;for(let n=0;n<i.length;n++){let l=i[n];-1===l||a(e[n],t[l],r).match||(s[l]=-1,i[n]=-1)}return[i,s]}(i,a),d=(0,eZ.getActiveTSSceneGraph)();return iF.l7.ai("reconcile all graphics",()=>{for(let e=0;e<i.length;e++){let t=l[e];if(void 0!==t&&-1!==t){let n=r[t],i=s[e];if(i&&n?.imageSetForInsertion){if(rL(i))i.insertImageInFillPaint(n.imageSetForInsertion);else if(rR(i)){let e=d.createNode("RECTANGLE");e.name=i.name||i.type,e.size={x:n.width,y:n.height},e.x=i.x,e.y=i.y,e.setImageInFillPaint(n.imageSetForInsertion),i.parentNode?.appendChild(e),i.removeSelfAndChildren()}}}}}),n=s.filter(rL),iF.l7.ai("Removing placeholder image fills",()=>{n.forEach(e=>{let t=e.fills;e.fills=t.filter(e=>!("IMAGE"===e.type&&e.image&&e.image.hash&&(0,rA.nj)(e.image.hash)===rS))})}),e}({node:o,graphics:p});return iF.l7.user("place node",()=>{t.parentNode?.appendChild(m),m.x=t.x,m.y=t.y,e.setSelectionToSingleNode(m.guid),d.glU.showSelectionOverlayImmediately()}),m}let rK=e0.z.object({cls:e0.z.string(),x:e0.z.number(),y:e0.z.number(),width:e0.z.number(),height:e0.z.number(),mask:e0.z.instanceof(Uint8Array)}).passthrough(),rW=e0.z.object({width:e0.z.number(),height:e0.z.number(),objects:e0.z.array(rK)}).passthrough();async function rq(e,t=1){let n=(await eQ.Ay.design.imageToShareJsx({input:{image:e},numDesigns:t})).jsx;if(!n?.length)throw Error("No valid JSX received from server");return n.flat()}async function rX(e,t,n){let i=(await Promise.all(t.map(async e=>{try{let{node:t}=await (0,rT.LZ)(e,{originalSize:{x:n.size.x,y:n.size.y},normalizePxToRange01:!0,excludeImageData:!0,excludeVectorData:!0});if(!t)return null;iF.l7.user("place node",()=>{t.x=n.x,t.y=n.y});let i=rG(t);if(!i)return null;let s=i.base64;return iF.l7.user("hide and remove node",()=>{t.visible=!1,t.removeSelfAndChildren()}),{jsx:e,base64:s}}catch(e){return null}}))).filter(e=>null!==e);if(0===i.length)return console.warn("No valid JSX candidate thumbnails generated, defaulting to first candidate"),t[0];let s=(await eQ.Ay.design.guiclip({image:e,candidates:i.map(e=>e.base64)})).bestCandidateIndex;return null==s?(console.warn("Cannot get best candidate index from server, defaulting to first valid candidate"),i[0].jsx):i[s].jsx}async function rY(e){let t=await eQ.Ay.design.uiParser({png_b64:e}),n={width:t.width,height:t.height,objects:t.objects.map(e=>({cls:e.cls,x:e.x,y:e.y,width:e.width,height:e.height,mask:new Uint8Array(atob(e.mask).split("").map(e=>e.charCodeAt(0)))}))},i=rW.safeParse(n);if(!i.success)throw Error("Unable to parse response from UI Parser");return i.data}let rZ=async({abortController:e})=>{let t;let n=eZ.getActiveTSSceneGraph().getCurrentPage()?.directlySelectedNodes;if(!n||1!==n.length||void 0===n[0])throw Error("No image selected");let i=n[0],s=i.size.x,a=i.size.y;try{let{base64:n,mimeType:r,pixelData:l,width:o,height:d}=function(e){let t=rG(e);if(!t)throw Error("Cannot process image");return t}(i),{node:c,location:u}=function(e,t,n){return{node:e.parentNode,location:new tV.Mi(e.x+t+(t+n)/2*.15,e.y)}}(i,o,d),p=(0,eZ.getActiveTSSceneGraph)(),m=p.getCurrentPage();if(!m)throw Error("Cannot get current page from scene");t=await rV(p,c??m,u,s,a,n,r);let h=(0,ig.zM)((e,t)=>rq(e,t),e),f=(0,ig.zM)((e,t,n)=>rX(e,t,n),e),g=(0,ig.zM)(e=>rY(e),e),x=await h(n,4),_=await f(n,x,t),y=await g(n),v=(0,ig.zM)(rH,e,e=>{e&&iF.l7.user("clean up reconciled node",()=>{e.removeSelfAndChildren()})});await v(m,t,_,l,o,d,y,e)}catch(e){if(e instanceof ig.lc)return;throw e}finally{iF.l7.user("remove placeholder node",()=>{t&&t.removeSelfAndChildren()})}},rJ=async({abortController:e,params:t})=>{let n;let i=(t.width+t.height)/2,s=new tV.Mi(t.node.x+t.width+.15*i,t.node.y),a=(0,eZ.getActiveTSSceneGraph)(),r=a.getCurrentPage();if(!r)throw Error("Cannot get current page from scene");let l=rG(t.node);if(!l)throw Error("Failed to get image data from node");let{base64:o,mimeType:c,pixelData:u,width:p,height:m}=l;try{n=await rV(a,t.node.parentNode??r,s,p,m,o,c);let i=await (0,rT.oy)(t.node,{normalizePxToRange01:!0,excludeImageData:!0,excludeVectorData:!0}),l=await d.bbV?.generateNodeSegmentationFromWeb(t.node.guid);if(!l)throw Error("UiParserHelpers is undefined, failed to create segmentation for node");let h={width:l.width,height:l.height,objects:l.objects.map(e=>({cls:e.cls,x:e.x,y:e.y,width:e.width,height:e.height,mask:e.mask}))};await rH(r,n,i.jsxStr,u,p,m,h,e)}catch(e){throw e}finally{iF.l7.user("remove placeholder node",()=>{n&&n.removeSelfAndChildren()})}};var rQ=n(25907),r$=n(298056);function r0({fileInputRef:e,onFileInputChange:t}){return(0,s.jsx)("input",{type:"file",ref:e,accept:r$.xp.join(","),onChange:t,multiple:!1,className:B.s.hidden.$})}function r1({action:e,instruction:t,onPerform:n,disableImageUpload:i=!1}){let{close:r}=(0,S.cq)(),l=(0,ig.RL)(e,rZ),{state:o,stop:c,aiTrackingContext:u}=l,p=a.useRef(null),m=()=>{(0,ig.B3)(e)};switch(o){case ig.qy.INITIAL:return(0,s.jsxs)(s.Fragment,{children:[!i&&(0,s.jsx)(r0,{fileInputRef:p,onFileInputChange:e=>{let t=e.target?.files;if(t&&t[0]){let e=t[0],n=new FileReader;n.onloadend=()=>{if(n.result){let t=n.result.toString(),i=new Image;i.onload=async()=>{let n=i.width,s=i.height,a=(0,eZ.getActiveTSSceneGraph)(),r=a.getCurrentPage();if(!r)return;let l=it.Y5.getViewportInfo(),o=new tV.Mi(l.offsetX-n/2,l.offsetY-s/2),{base64:c,mimeType:u}=rB(t),p=await rU(a,r,o,n,s,c,u,e.name);r.setSelectionToSingleNode(p.guid),d.glU.showSelectionOverlayImmediately()},i.src=t}},n.readAsDataURL(e)}}}),(0,s.jsx)(iC.AE,{action:e,actionLabel:(0,G.tx)("image_to_design.action"),actionIcon:(0,s.jsx)(n5.m,{}),instructionAction:i?void 0:{type:"custom",label:(0,G.tx)("fragment_search.visual_search_image_upload_button"),iconPrefix:(0,s.jsx)(rQ.Z,{}),onPerform:()=>p.current?.click()},aiTrackingContext:void 0,onPerform:n,children:t})]});case ig.qy.RUNNING:return(0,s.jsx)(iS.F,{onStop:()=>{c(),m(),r()},aiTrackingContext:u,children:(0,G.tx)("ai.working")});case ig.qy.DONE:return(0,s.jsx)(iE.Oq,{iterateOptions:[],aiTrackingContext:{...u,iteration_view_type:ik.$J.SUCCESS_WITH_ITERATION},showFeedbackInline:!0});case ig.qy.ERROR:return(0,s.jsx)(iw.E,{error:l.error,buttons:[{type:iw.f.OK,callback:m}],aiTrackingContext:u});case ig.qy.CANCELLED:return null}}var r2=n(465769),r3=n(952182),r5=n(94706),r4=n(86421),r6=n(592948),r7=n(196486),r8=n(607804),r9=n(406959),le=n(266230),lt=n(915242),ln=n(167037);async function li(){let e=(0,eZ.getActiveTSSceneGraph)(),t=e.getCurrentPage()?.directlySelectedNodes||[];if(1!==t.length)return null;let n=t[0];if(!n)throw Error("Selected node is undefined");return await ls(n.guid)}async function ls(e){if(!d.ruz)throw Error("ImageToolsBindings is not available");let t=(0,eZ.getActiveTSSceneGraph)().get(e);if(!t)throw Error("Node not found");let n=d.ruz.getTopmostVideoIndex(t.id);if(null===n)throw Error("No video paint found in node");let i=t.fills[n];if(!i||!i.video?.hash)throw Error("Video paint or hash not found");let s=await (0,ln.f)(i.video);if(!s)throw Error("Could not get signed URL for video");return new Promise((e,t)=>{let n=document.createElement("video");n.crossOrigin="anonymous",n.muted=!0,n.playsInline=!0;let i=document.createElement("canvas"),a=i.getContext("2d");if(!a){t(Error("Could not get canvas context"));return}n.onloadedmetadata=()=>{i.width=n.videoWidth,i.height=n.videoHeight,n.currentTime=n.duration},n.onseeked=()=>{try{a.drawImage(n,0,0,i.width,i.height);let t=i.toDataURL("image/png");e(t.split(",")[1]??"")}catch(e){t(e)}},n.onerror=e=>{t(Error(`Video loading error: ${e}`))},n.src=s,n.load()})}var la=n(249422);let lr=(0,c.E3)("make_video_prompt_history",[]),ll=a.lazy(()=>n.e(7717).then(n.bind(n,827717)));function lo({action:e,aiActionType:t,actionLabel:n,instructionLabel:i,icon:a,searchSynonyms:r}){return{action:e,featureFlags:["figjam_quick_actions_v2"],tags:[nA.$.AI],flags:["edit","whiteboard"],iconType:a,searchSynonyms:r,quickAction:{beforeModuleOpen:()=>{(0,eO.Yh)(J.D.getState().mirror.appModel,e)&&(0,im.J7)(t)},alwaysEnabled:!0,module:{name:et.Sn.FIGJAM_AI_CONTEXTUAL_FEATURES,module:(0,s.jsx)(ij,{action:e,actionType:t,actionIcon:a,actionLabel:n,instructionLabel:i})}}}}let ld=[{callback:R.lQ,action:Z.JT.TRANSLATE_TEXT,flags:["edit","design","slides","sites","cooper","whiteboard"],featureFlags:["qa_text_features"],tags:[nA.$.AI],quickAction:{beforeModuleOpen:()=>{(0,ig.B3)(Z.JT.TRANSLATE_TEXT)},alwaysEnabled:!0,module:{name:et.Sn.TRANSLATE,module:(0,s.jsx)(iv.K,{})}},iconType:(0,s.jsx)(nG.c,{}),searchSynonyms:["change language"]},{callback:R.lQ,action:Z.JT.REWRITE_TEXT,flags:["edit","design","slides","sites","cooper","whiteboard"],featureFlags:["qa_text_features"],quickAction:{beforeModuleOpen:()=>{(0,ig.B3)(Z.JT.REWRITE_TEXT)},module:{name:et.Sn.REWRITE,module:(0,s.jsx)(i_.w,{})},alwaysEnabled:!0},iconType:(0,s.jsx)(nU.K,{}),tags:[nA.$.AI],searchSynonyms:["revise this","modify this","adjust tone"]},{callback:()=>{(0,ig.B3)(Z.JT.SLIDES_GENERATE_SPEAKER_NOTES),(0,ig.Ag)(Z.JT.SLIDES_GENERATE_SPEAKER_NOTES,iu.O,{source:ip.f.QUICK_ACTIONS})},action:Z.JT.SLIDES_GENERATE_SPEAKER_NOTES,flags:["slides"],iconType:(0,s.jsx)(nV.A,{}),tags:[nA.$.AI],searchSynonyms:["presenter notes","speaker notes","notes","draft presenter notes","draft speaker notes","draft notes"]},{callback:()=>(0,ic.mD)(J.D.dispatch,{source:"quick_actions",toggle:!0}),action:Z.JT.SLIDES_REWRITE_TEXT,flags:["slides"],iconType:(0,s.jsx)(nH.L,{}),tags:[nA.$.AI],searchSynonyms:["adjust tone","tone dial","professional","casual","concise","expanded"]},{callback:()=>(0,ic.mD)(J.D.dispatch,{source:"quick_actions",toggle:!0}),action:Z.JT.SLIDES_REWRITE_TEXT,flags:["edit","design"],featureFlags:["aip_tone_dial_fd"],iconType:(0,s.jsx)(nH.L,{}),tags:[nA.$.AI],searchSynonyms:["adjust tone","tone dial","professional","casual","concise","expanded"]},{callback:R.lQ,action:Z.JT.SHORTEN_TEXT,flags:["edit","design","slides","sites","cooper","whiteboard"],featureFlags:["qa_text_features"],quickAction:{module:{name:et.Sn.SHORTEN,module:(0,s.jsx)(iy.J,{})},alwaysEnabled:!0,beforeModuleOpen:()=>{(0,ig.B3)(Z.JT.SHORTEN_TEXT),(0,eO.Yh)(J.D.getState().mirror.appModel,Z.JT.SHORTEN_TEXT)&&(0,ig.Ag)(Z.JT.SHORTEN_TEXT,iy.$,{featureType:Z.JT.SHORTEN_TEXT,source:"quick-actions"})}},iconType:(0,s.jsx)(nK.R,{}),tags:[nA.$.AI],searchSynonyms:["make concise","condense","reduce","abbreviate","shorter"]},{callback:R.lQ,action:Z.JT.FIRST_DRAFT,flags:["edit","design"],featureFlags:[],quickAction:{module:{module:(0,s.jsx)(rk,{}),name:et.Sn.FIRST_DRAFT},beforeModuleOpen:()=>{(0,ig.B3)(Z.JT.FIRST_DRAFT)}},iconType:(0,s.jsx)(nW,{}),tags:[nA.$.AI],searchSynonyms:["first draft","make designs","generate design","create design","let's design"]},{callback:()=>{it.Y5.triggerActionEnum(d.rcl.START_AI_ASSISTANT)},action:Z.JT.START_AI_ASSISTANT,flags:["edit","design"],featureFlags:["ai_assistant"],tags:[nA.$.AI],iconType:(0,s.jsx)(nq.u,{}),searchSynonyms:["assistant","prompt","chat","ai"]},{callback:R.lQ,action:Z.JT.MAKE_EDITS_DEBUG,flags:["edit","design","whiteboard","slides"],featureFlags:["ai_assistant","make_edits_debug"],quickAction:{module:{module:(0,s.jsx)(r6.Aw,{}),name:et.Sn.MAKE_EDITS_DEBUG},beforeModuleOpen:()=>{}},iconType:(0,s.jsx)(nW,{}),searchSynonyms:["debug make edits"],tags:[nA.$.AI]},{callback:R.lQ,action:Z.JT.MAKE_EDITS_DEBUG_REVIEW,flags:["edit","design","whiteboard","slides"],featureFlags:["ai_assistant","make_edits_debug"],quickAction:{module:{module:(0,s.jsx)(a.Suspense,{fallback:null,children:(0,s.jsx)(ll,{})}),name:et.Sn.MAKE_EDITS_DEBUG_REVIEW},beforeModuleOpen:()=>{}},iconType:(0,s.jsx)(nW,{}),searchSynonyms:["debug make edits review"],tags:[nA.$.AI]},{callback:R.lQ,action:Z.JT.FIRST_DRAFT_FINE_TUNE,flags:["edit","design"],featureFlags:["first_draft_fine_tune"],quickAction:{module:{module:(0,s.jsx)(function(){let e=(0,a.lazy)(()=>n.e(8878).then(n.bind(n,8878))),{aiTrackingContext:t}=(0,ig.wj)(Z.JT.FIRST_DRAFT_FINE_TUNE),i=t.clientLifecycleId;return(0,s.jsx)(p.tH,{boundaryKey:"FirstDraftFineTune",fallback:p.H4.NONE_I_KNOW_WHAT_IM_DOING,sentryTags:{clientLifecycleId:i,area:l.e.AI_GENERATION},children:(0,s.jsx)(iL.T.Provider,{value:{recordingKey:"firstDraftFineTuneView"},children:(0,s.jsx)(a.Suspense,{fallback:(0,s.jsx)("div",{children:(0,G.t)("first_draft.make_edits.loading")}),children:(0,s.jsx)(e,{})})})})},{}),name:et.Sn.FIRST_DRAFT_FINE_TUNE},beforeModuleOpen:()=>{(0,ig.B3)(Z.JT.FIRST_DRAFT_FINE_TUNE)},alwaysEnabled:!0},iconType:(0,s.jsx)(nW,{}),tags:[nA.$.AI],searchSynonyms:["fine tune","first draft fine tune"]},{callback:R.lQ,action:Z.JT.FIRST_DRAFT_MAKE_CHANGES,flags:["edit","design"],featureFlags:["first_draft_native","first_draft_make_changes","first_draft_make_changes_reopen"],notFeatureFlags:["first_draft_use_gemini"],quickAction:{module:{module:(0,s.jsx)(function(){let e=sc(),[t]=a.useState(e);return(0,s.jsx)(af,{initialRootGuid:t||null})},{}),name:et.Sn.FIRST_DRAFT_MAKE_CHANGES}},iconType:(0,s.jsx)(nW,{}),tags:[nA.$.AI],searchSynonyms:["make changes","adjust design","modify design","edit design"]},{callback:R.lQ,action:Z.JT.FIRST_DRAFT_MAKE_KIT,flags:["edit","design"],featureFlags:["first_draft_native","first_draft_make_kit"],quickAction:{module:{module:(0,s.jsx)(function(){let{pop:e}=(0,S.cq)();return(0,s.jsx)(p.tH,{boundaryKey:"FirstDraftMakeKitView",fallback:p.H4.NONE_I_KNOW_WHAT_IM_DOING,sentryTags:{area:l.e.AI_GENERATION},children:(0,s.jsx)(aF,{recordingKey:"firstDraftMakeKitView",onBack:e})})},{}),name:et.Sn.FIRST_DRAFT_MAKE_KIT},beforeModuleOpen:()=>{(0,ig.B3)(Z.JT.FIRST_DRAFT_MAKE_KIT),(0,ig.B3)(Z.JT.FIRST_DRAFT_COMPONENTIZE),(0,ig.B3)(Z.JT.FIRST_DRAFT_SUGGEST_PROPS)}},iconType:(0,s.jsx)(nW,{}),tags:[nA.$.AI],searchSynonyms:["make kit","create kit","generate kit","design kit"]},{callback:R.lQ,action:Z.JT.FIRST_DRAFT_MAKE_KIT_DEBUG,flags:["edit","design"],featureFlags:["first_draft_native","first_draft_make_kit","first_draft_debug"],quickAction:{module:{module:(0,s.jsx)(function(){let e=(0,r.wA)(),{close:t}=(0,S.cq)(),{inputs:n,renderInput:i}=function(e,t,n){let i=a.useMemo(()=>(function(e){let t=e.reduce((e,t)=>(e[t]=e0.z.object({override:e0.z.string(),enabled:e0.z.boolean()}),e),{});return e0.z.object(t)})(e),[e]),{inputs:r,setInputs:l,handleInputChange:o,handleCheckboxChange:d}=function(e,t,n,i){let[s,r]=a.useState(()=>{let s=localStorage.getItem(t);if(s)try{let e=JSON.parse(s);if(n)return n.parse(e);return e}catch(e){console.error(`Failed to parse saved state for ${t}:`,e)}return e.reduce((e,t)=>(e[t]={override:"",enabled:i?.enabled??!1},e),{})});a.useEffect(()=>{localStorage.setItem(t,JSON.stringify(s))},[s,t]);let l=a.useCallback(e=>t=>{r(n=>({...n,[e]:{...n[e],override:t.target.value}}))},[]),o=a.useCallback(e=>t=>{r(n=>({...n,[e]:{...n[e],enabled:t.target.checked}}))},[]);return{inputs:s,setInputs:r,handleInputChange:l,handleCheckboxChange:o}}(e,t,i,void 0),c=a.useCallback(({field:e,label:t,rows:n=3,placeholder:i="Enter override"})=>(function(e,t,n,i,a,r=3,l="Enter override"){let o=e[t]||{override:"",enabled:!1};return(0,s.jsxs)(en.B,{fullWidth:!0,justify:"space-between",children:[(0,s.jsx)("input",{type:"checkbox",checked:o.enabled,onChange:i(t)}),(0,s.jsx)("div",{style:{opacity:o.enabled?1:.5,width:"100%"},children:(0,s.jsxs)(aj.Y,{direction:"vertical",spacing:8,children:[(0,s.jsx)(eX.E,{children:n}),(0,s.jsx)("textarea",{className:B.s.resizeNone.wFull.colorBgSecondary.px12.py8.bRadius5.$,rows:r,value:o.override,placeholder:l,onChange:a(t),disabled:!o.enabled})]})})]})})(r,e,t,d,o,n,i),[r,o,d]);return{inputs:r,setInputs:l,handleInputChange:o,handleCheckboxChange:d,renderInput:c}}(aZ,"firstDraftMakeKitDebugState"),l=a.useMemo(()=>n.componentizeResultMapping.enabled?async()=>await function(e){if(!e||""===e.trim())return{};try{return JSON.parse(e)}catch(e){return console.warn("Failed to parse JSON:",e),{}}}(n.componentizeResultMapping.override):n.componentizePrompt.enabled?async e=>await aH(n.componentizePrompt.override,e):void 0,[n.componentizePrompt.override,n.componentizeResultMapping.override,n.componentizeResultMapping.enabled,n.componentizePrompt.enabled]),o=a.useMemo(()=>{if(n.suggestProps.enabled)return async e=>{try{return await aK(n.suggestProps.override,e)}catch(e){return console.error("Failed to get suggested props:",e),[]}}},[n.suggestProps.override,n.suggestProps.enabled]),[d,c]=a.useState(!1);return d?(0,s.jsx)(aE.x.Provider,{value:{getSuggestedComponents:l,getSuggestedProps:o},children:(0,s.jsx)(aV,{})}):(0,s.jsx)("div",{children:(0,s.jsxs)(aj.Y,{direction:"vertical",spacing:"auto",padding:8,children:[(0,s.jsx)(eX.E,{fontSize:14,fontWeight:"medium",children:"Make First Draft Kit (Debug)"}),(0,s.jsxs)(aj.Y,{direction:"vertical",padding:8,width:"fill-parent",spacing:16,children:[i({field:"componentizePrompt",label:"Componentize Prompt Override",rows:3,placeholder:"Enter override, must contain {{jsx}} for substitution"}),i({field:"suggestProps",label:"Suggest Props Prompt Override",rows:3,placeholder:"Enter override, must contain {{jsx}} for substitution"}),i({field:"componentizeResultMapping",label:"Componentize Result Mapping Override",rows:3,placeholder:"Enter override, must contain {{jsx}} for substitution"})]}),(0,s.jsxs)(en.B,{gap:8,children:[(0,s.jsx)(tU.$n,{variant:"secondary",onClick:async()=>{await aY({componentizePromptOverride:n.componentizePrompt.enabled?n.componentizePrompt.override:void 0,dispatch:e,close:t})},children:"Eval componentize on page"}),(0,s.jsx)(tU.$n,{variant:"secondary",onClick:()=>c(!0),children:"Run on current selection"}),(0,s.jsx)(tU.$n,{variant:"secondary",onClick:()=>aX({componentizePromptOverride:n.componentizePrompt.enabled?n.componentizePrompt.override:void 0,dispatch:e}),children:"Generate test case from selected"})]})]})})},{}),name:et.Sn.FIRST_DRAFT_MAKE_KIT_DEBUG},beforeModuleOpen:()=>{(0,ig.B3)(Z.JT.FIRST_DRAFT_MAKE_KIT),(0,ig.B3)(Z.JT.FIRST_DRAFT_COMPONENTIZE),(0,ig.B3)(Z.JT.FIRST_DRAFT_SUGGEST_PROPS)}},iconType:(0,s.jsx)(nW,{}),searchSynonyms:["debug kit","debug make kit"],tags:[nA.$.AI]},{callback:R.lQ,action:Z.JT.FIRST_DRAFT_LINTING,flags:["edit","design"],featureFlags:["first_draft_native","first_draft_publish_ux"],quickAction:{module:{module:(0,s.jsx)(iM.S6,{}),name:et.Sn.FIRST_DRAFT_LINT}},tags:[nA.$.AI]},{callback:R.lQ,action:Z.JT.FIRST_DRAFT_DEBUG,flags:["edit","design"],featureFlags:["first_draft_native","first_draft_debug"],quickAction:{module:{module:(0,s.jsx)(function(){let e=(0,a.lazy)(()=>n.e(4215).then(n.bind(n,754215)));return(0,s.jsx)(p.tH,{boundaryKey:"MakeEdits",fallback:p.H4.NONE_I_KNOW_WHAT_IM_DOING,sentryTags:{area:l.e.AI_GENERATION},children:(0,s.jsx)(iL.T.Provider,{value:{recordingKey:"firstDraftDebugView"},children:(0,s.jsx)(a.Suspense,{fallback:(0,s.jsx)("div",{children:"Loading..."}),children:(0,s.jsx)(e,{})})})})},{}),name:et.Sn.FIRST_DRAFT_DEBUG}},tags:[nA.$.AI]},{name:Z.JT.FIND_INSPIRATION,action:Z.JT.FIND_INSPIRATION,displayNode:(0,G.tx)("fullscreen_actions.quick_actions.find-inspiration-verbose"),displayForQuickCommand:"find-inspiration-quick-command",args:{},tags:[nA.$.AI],flags:["design","slides","cooper"],featureFlags:(0,ep.kc)().hub_file_fragments?[]:["asset_suggestions"],callback:R.lQ,quickAction:{module:{module:(0,ep.kc)().hub_file_fragments?(0,s.jsx)(t4.z6,{isVisualSearch:!0}):(0,s.jsx)(rE.WS,{}),name:et.Sn.VISUAL_SEARCH},beforeModuleOpen:()=>(0,rE.jp)(U.G4.ACTIONS_LIST)},iconType:(0,s.jsx)(eV.A,{}),searchSynonyms:["visual search","image search","selection search","visual lookup","find matching","search for similar","find similar designs","find more like"]},{action:Z.JT.REMOVE_BACKGROUND,featureFlags:[],tags:[nA.$.AI],flags:["edit","design","slides","cooper","sites","whiteboard"],iconType:(0,s.jsx)(nX.g,{}),quickAction:{module:{module:(0,s.jsx)(r5.wx,{source:"quick-actions"}),name:et.Sn.BACKGROUND_REMOVE_TOAST},alwaysEnabled:!0,beforeModuleOpen:()=>{if((0,ig.B3)(Z.JT.REMOVE_BACKGROUND),(0,eO.Yh)(J.D.getState().mirror.appModel,Z.JT.REMOVE_BACKGROUND)){let e=d.ruz?.getNodeImagePairsForEdit()??[];(0,ig.Ag)(Z.JT.REMOVE_BACKGROUND,il.J,{source:"quick-actions",targets:e},{isBatch:e.length>1})}}},callback:R.lQ,searchSynonyms:["clean up image","clean up picture","make transparent","delete background","erase background","eliminate background","isolate subject"]},{action:Z.JT.UPSCALE_IMAGE,featureFlags:[],tags:[nA.$.AI],flags:["edit","design","slides","cooper","sites","whiteboard"],iconType:(0,s.jsx)(nY.K,{}),quickAction:{module:{module:(0,s.jsx)(r5.q$,{source:"quick-actions"}),name:et.Sn.UPSCALE_IMAGE_TOAST},alwaysEnabled:!0,beforeModuleOpen:()=>{if((0,ig.B3)(Z.JT.UPSCALE_IMAGE),(0,eO.Yh)(J.D.getState().mirror.appModel,Z.JT.UPSCALE_IMAGE)){let e=d.ruz?.getNodeImagePairsForEdit()??[];(0,ig.Ag)(Z.JT.UPSCALE_IMAGE,ir.r6,{source:"quick-actions",targets:e},{isBatch:e.length>1})}}},callback:R.lQ,searchSynonyms:["boost resolution","sharpen image","sharpen picture","upscale image","scale up","enlarge image","refine image","improve image","unblur","reduce blur","increase size","increase quality","enhance clarity","crisp"]},{action:Z.JT.EXPAND_IMAGE,featureFlags:["aip_expand_image"],tags:[nA.$.AI],flags:["edit","design"],iconType:(0,s.jsx)(nZ.V,{}),quickAction:{module:{module:(0,s.jsx)(r2.FI,{action:Z.JT.EXPAND_IMAGE,onEnabled:()=>(0,ia.T4)("quick-actions")}),name:et.Sn.EXPAND_IMAGE_VIEW},alwaysEnabled:!0,beforeModuleOpen:()=>(0,ig.B3)(Z.JT.EXPAND_IMAGE)},callback:R.lQ,searchSynonyms:["expand image","uncrop image","extend image","fill image","change aspect ratio"]},{action:Z.JT.REMOVE_OBJECT,featureFlags:["expr_ai_remove_object"],tags:[nA.$.AI],flags:["edit","design"],iconType:(0,s.jsx)(nJ.i,{}),quickAction:{module:{module:(0,s.jsx)(r2.FI,{action:Z.JT.REMOVE_OBJECT,onEnabled:()=>(0,ia.XJ)("quick-actions")}),name:et.Sn.REMOVE_OBJECT_VIEW},beforeModuleOpen:()=>{(0,ig.B3)(Z.JT.REMOVE_OBJECT)},alwaysEnabled:!0},callback:R.lQ,searchSynonyms:["remove object","erase object","delete object","remove element","erase image object","delete image object","remove image object","erase item"]},{action:Z.JT.VECTORIZE_IMAGE,featureFlags:["ce_il_vectorize"],tags:[nA.$.AI],flags:["edit","design"],iconType:(0,s.jsx)(nQ.b,{}),quickAction:{module:{module:(0,s.jsx)(r5.e8,{source:"quick-actions"}),name:et.Sn.VECTORIZE_IMAGE},beforeModuleOpen:()=>{if((0,ig.B3)(Z.JT.VECTORIZE_IMAGE),(0,eO.Yh)(J.D.getState().mirror.appModel,Z.JT.VECTORIZE_IMAGE)){let e=d.ruz?.getNodeImagePairsForEdit()??[];(0,ig.Ag)(Z.JT.VECTORIZE_IMAGE,io.D,{source:"quick-actions",targets:e},{isBatch:e.length>1})}},alwaysEnabled:!0},callback:R.lQ,searchSynonyms:["vectorize image","convert to vector","image to vector","trace","vector trace","raster to vector"]},{action:Z.JT.SEPARATE_OBJECT,featureFlags:["expr_ai_sep_layers"],tags:[nA.$.AI],flags:["edit","design"],iconType:(0,s.jsx)(n$.L,{}),quickAction:{module:{module:(0,s.jsx)(r2.FI,{action:Z.JT.SEPARATE_OBJECT,onEnabled:()=>(0,ia.Kt)("quick-actions")}),name:et.Sn.SEPARATE_OBJECT_VIEW},beforeModuleOpen:()=>{(0,ig.B3)(Z.JT.SEPARATE_OBJECT)},alwaysEnabled:!0},callback:R.lQ,searchSynonyms:["separate object","extract object","isolate object","separate layer","extract layer","isolate layer"]},{callback:R.lQ,action:Z.JT.AUTO_RENAME_LAYERS,featureFlags:["eai_auto_rename_layers"],tags:[nA.$.AI],flags:["edit","design"],iconType:(0,s.jsx)(n0.d,{}),quickAction:{module:{module:(0,s.jsx)(r7.A,{source:d.uQ6.QUICK_ACTIONS}),name:et.Sn.RENAME_LAYERS_TOAST},alwaysEnabled:!0,beforeModuleOpen:()=>{(0,ig.B3)(Z.JT.AUTO_RENAME_LAYERS),(0,eO.Yh)(J.D.getState().mirror.appModel,Z.JT.AUTO_RENAME_LAYERS)&&(0,ig.Ag)(Z.JT.AUTO_RENAME_LAYERS,ii.Ay,{source:d.uQ6.QUICK_ACTIONS,overwriteNames:!1})}},searchSynonyms:["rename all layers","name layers"]},{callback:R.lQ,action:Z.JT.GENERATE_IMAGE,featureFlags:[],tags:[nA.$.AI],flags:["edit","design","slides","cooper","sites","whiteboard"],iconType:(0,s.jsx)(n1.K,{}),quickAction:{module:{module:(0,s.jsx)(r3.Ay,{}),name:et.Sn.GENERATE_IMAGE},beforeModuleOpen:()=>{(0,ig.B3)(Z.JT.GENERATE_IMAGE)}},searchSynonyms:["generate image","make a picture","generate graphic","generate picture","generate illustration","create image"]},{callback:R.lQ,action:Z.JT.EDIT_IMAGE,featureFlags:[],tags:[nA.$.AI],flags:["edit","design","slides","cooper","sites","whiteboard"],iconType:(0,s.jsx)(nU.K,{}),quickAction:{module:{module:(0,s.jsx)(r3.Tu,{}),name:et.Sn.EDIT_IMAGE},beforeModuleOpen:()=>{(0,ig.B3)(Z.JT.EDIT_IMAGE)},alwaysEnabled:!0},searchSynonyms:["edit image","edit picture","edit graphic","edit illustration","modify image","change image","style image"]},{callback:R.lQ,action:Z.JT.MAKE_VIDEO,featureFlags:["aip_mw_video"],tags:[nA.$.AI],flags:["edit","design","slides","cooper","sites","whiteboard"],iconType:(0,s.jsx)(n1.K,{}),quickAction:{module:{module:(0,s.jsx)(function(){let e=(0,r8.to)(),{close:t}=(0,S.cq)(),[n,i]=a.useState(""),{promptHistory:r,addPromptToHistory:l}=(0,a1.a)(lr,e=>e),o=(0,ig.RL)(Z.JT.MAKE_VIDEO,la.wx),{start:d,stop:c,state:u,aiTrackingContext:p}=o,{referenceImages:m,handleFileUpload:h,createImageAttachments:f,fileInputRef:g}=(0,r9.Iu)();(0,a.useEffect)(()=>{li().then(e=>{e&&(0,lt.w)(e,e=>{e.imageHash&&e.image&&h({status:"success",type:"IMAGE",nodeGuid:e.nodeGuid,image:e.image,imageHash:e.imageHash,uniqueId:(0,le.lA)()})})}).catch(e=>{console.error("Failed to get last frame:",e)})},[h]);let x=(0,a.useCallback)(async()=>{l(n),await d({prompt:n,images:(0,r3.L0)(m)})},[l,n,m,d]);switch((0,a.useEffect)(()=>()=>{c(),(0,ig.B3)(Z.JT.MAKE_VIDEO)},[c]),u){case ig.qy.INITIAL:return(0,s.jsx)(iT.A,{action:Z.JT.MAKE_VIDEO,aiTrackingContext:p,ariaLabel:(0,G.t)("fullscreen_actions.make_video"),extraFooter:(0,s.jsx)(r3.Ti,{fileInputRef:g,disabled:m.length>=1,tooltip:m.length>=1?(0,G.t)("video_ai.make_video.initial_frame_already_set"):(0,G.t)("video_ai.make_video.set_initial_frame"),multiple:!1,onFileUpload:f}),featureNameForInstrumentation:"make_video",hardClose:e,maxLength:1024,minLength:3,onChangePrompt:i,onRun:x,prompt:n,promptHistory:r,submitLabel:(0,G.tx)("ai.make_it"),useClose:e});case ig.qy.RUNNING:return(0,s.jsx)(iS.F,{onCancel:t,aiTrackingContext:p,children:(0,G.tx)("video_ai.make_video.processing")});case ig.qy.DONE:let _={...p,iteration_view_type:ik.$J.SUCCESS_WITH_ITERATION};return(0,s.jsx)(iE.Oq,{iterateOptions:[],aiTrackingContext:_,completionString:(0,G.t)("video_ai.make_video.initial_completion"),showFeedback:!1,targets:[]});case ig.qy.ERROR:return(0,s.jsx)(iw.E,{error:o.error,buttons:[{type:iw.f.GO_BACK,callback:()=>(0,ig.B3)(Z.JT.MAKE_VIDEO)}],aiTrackingContext:p});case ig.qy.CANCELLED:return null}},{}),name:et.Sn.MAKE_VIDEO},beforeModuleOpen:()=>{(0,ig.B3)(Z.JT.MAKE_VIDEO)}},searchSynonyms:["make video","generate video","create video","make animation","make film","make clip"]},{action:Z.JT.MAGIC_LINK,flags:["edit","design"],featureFlags:["prototype_ai_magic_link"],tags:[nA.$.AI],quickAction:{module:{module:(0,s.jsx)(r4.p,{}),name:et.Sn.MAGIC_LINK},alwaysEnabled:!0,beforeModuleOpen:()=>{J.D.dispatch((0,is.Zh)({name:"prototype.ai_magic_link_entry_clicked",params:{source:"quick_actions"}})),(0,ig.B3)(Z.JT.MAGIC_LINK),(0,eO.Yh)(J.D.getState().mirror.appModel,Z.JT.MAGIC_LINK)&&(0,ig.Ag)(Z.JT.MAGIC_LINK,id.e,{})}},iconType:(0,s.jsx)(n2.S,{}),searchSynonyms:["magic link","add prototype links","add prototype connections","connect prototype","add interactions","make prototype"]},{action:Z.JT.CONTENT_FILL,featureFlags:[],tags:[nA.$.AI],flags:["edit","design","sites"],iconType:(0,s.jsx)(n3.L,{}),quickAction:{module:{module:(0,s.jsx)(ix.F,{}),name:et.Sn.REGENERATE_TEXT_TOAST},alwaysEnabled:!0,beforeModuleOpen:()=>{(0,ig.B3)(Z.JT.CONTENT_FILL)}},searchSynonyms:["fill content","content fill","lorem ipsum","rewrite placeholder text","replace duplicates","rewrite duplicates"]},{action:Z.JT.AI_CHAT_PROTOTYPE,featureFlags:["prt_legacy_v3"],flags:["design","slides","cooper"],tags:[nA.$.AI],iconType:(0,s.jsx)(eU.C,{}),quickAction:{module:{module:(0,s.jsx)(tJ,{}),name:et.Sn.AI_CHAT_PROTOTYPE},beforeModuleOpen:()=>{c.zl.set(ty,{status:t_.Idle,messages:[]})}},searchSynonyms:["chat"]},{action:Z.JT.IMAGE_TO_DESIGN,featureFlags:["gen_llava_lamp"],flags:["edit","design"],tags:[nA.$.AI],iconType:(0,s.jsx)(n5.m,{}),quickAction:{module:{module:(0,s.jsx)(function(){let{start:e}=(0,ig.RL)(Z.JT.IMAGE_TO_DESIGN,rZ);return(0,s.jsx)(r1,{action:Z.JT.IMAGE_TO_DESIGN,instruction:(0,G.tx)("image_to_design.instruction"),onPerform:()=>{e({})}})},{}),name:et.Sn.IMAGE_TO_DESIGN},alwaysEnabled:!0,beforeModuleOpen:()=>{(0,ig.B3)(Z.JT.IMAGE_TO_DESIGN),(0,eO.Yh)(J.D.getState().mirror.appModel,Z.JT.IMAGE_TO_DESIGN)&&(0,ig.Ag)(Z.JT.IMAGE_TO_DESIGN,rZ,{})}},searchSynonyms:["convert image to layers","make image editable","convert image to design","generate design from image","screenshot to design","picture to design"]},{action:Z.JT.IMAGE_TO_DESIGN_ORACLE,featureFlags:["gen_llava_lamp"],flags:["edit","design"],tags:[nA.$.AI],iconType:(0,s.jsx)(eU.C,{}),quickAction:{module:{module:(0,s.jsx)(function(){let{start:e}=(0,ig.RL)(Z.JT.IMAGE_TO_DESIGN_ORACLE,rJ);return(0,s.jsx)(r1,{action:Z.JT.IMAGE_TO_DESIGN_ORACLE,instruction:(0,G.tx)("image_to_design.oracle_instruction"),disableImageUpload:!0,onPerform:()=>{let t=eZ.getActiveTSSceneGraph().getCurrentPage()?.directlySelectedNodes;if(!t||1!==t.length||void 0===t[0])return;let n=t[0];e({node:n,width:n.size.x,height:n.size.y})}})},{}),name:et.Sn.IMAGE_TO_DESIGN_ORACLE},alwaysEnabled:!0,beforeModuleOpen:()=>{(0,ig.B3)(Z.JT.IMAGE_TO_DESIGN_ORACLE)}}},{callback:()=>{c.zl.set(ih.bJ)},action:Z.JT.WHITEBOARD_GENERATE_CONTENT,featureFlags:["figjam_quick_actions_v2"],tags:[nA.$.AI],flags:["edit","whiteboard"],iconType:(0,s.jsx)(n4.I,{}),searchSynonyms:["create content","add content","generate content","create diagram","add diagram","generate diagram","create templates and diagrams","add templates and diagrams","generate templates and diagrams"]},{action:Z.JT.MERMAID_TO_DIAGRAM,featureFlags:["figjam_mermaid_to_diagram"],tags:[nA.$.AI],flags:["edit","whiteboard"],iconType:(0,s.jsx)(n6.Q,{}),quickAction:{module:{module:(0,s.jsx)(function(){let e=(0,ig.RL)(Z.JT.MERMAID_TO_DIAGRAM,iA),{start:t,state:n,aiTrackingContext:i}=e,[r,l]=a.useState("");switch(n){case ig.qy.INITIAL:return(0,s.jsx)(iT.A,{action:Z.JT.MERMAID_TO_DIAGRAM,aiTrackingContext:i,minLength:3,prompt:r,onChangePrompt:l,onRun:()=>{t({mermaidText:r})},submitLabel:(0,G.t)("figjam_ai.ai_actions.make_diagram_button")});case ig.qy.RUNNING:return(0,s.jsx)(iS.F,{aiTrackingContext:i,children:(0,G.t)("figjam_ai.ai_actions.make_diagram_progress")});case ig.qy.DONE:return(0,s.jsx)(iE.Oq,{aiTrackingContext:{...i,iteration_view_type:ik.$J.DEFAULT_SUCCESS},iterateOptions:[]});case ig.qy.ERROR:return(0,s.jsx)(iw.E,{error:e.error,aiTrackingContext:i});case ig.qy.CANCELLED:return null}},{}),name:et.Sn.MERMAID_TO_DIAGRAM},alwaysEnabled:!0,beforeModuleOpen:()=>{(0,ig.B3)(Z.JT.MERMAID_TO_DIAGRAM)}}},lo({action:Z.JT.SUMMARIZE_STICKIES,aiActionType:im.hG.SUMMARIZE_STICKIES,actionLabel:(0,G.tx)("fullscreen_actions.summarize-stickies"),instructionLabel:(0,G.tx)("figjam_ai.organize_stickies.make_selection_instruction"),icon:(0,s.jsx)(n7.x,{})}),lo({action:Z.JT.SORT_STICKIES_BY_TOPIC,aiActionType:im.hG.SORT_STICKIES_BY_TOPIC,actionLabel:(0,G.tx)("fullscreen_actions.sort-stickies-by-topic"),instructionLabel:(0,G.tx)("figjam_ai.organize_stickies.make_selection_instruction"),icon:(0,s.jsx)(n8.a,{})}),lo({action:Z.JT.SORT_STICKIES_BY_COLOR,aiActionType:im.hG.SORT_STICKIES_BY_COLOR,actionLabel:(0,G.tx)("fullscreen_actions.sort-stickies-by-color"),instructionLabel:(0,G.tx)("figjam_ai.organize_stickies.make_selection_instruction"),icon:(0,s.jsx)(n8.a,{})}),lo({action:Z.JT.SORT_STICKIES_BY_AUTHOR,aiActionType:im.hG.SORT_STICKIES_BY_AUTHOR,actionLabel:(0,G.tx)("fullscreen_actions.sort-stickies-by-author"),instructionLabel:(0,G.tx)("figjam_ai.organize_stickies.make_selection_instruction"),icon:(0,s.jsx)(n8.a,{})}),lo({action:Z.JT.SORT_STICKIES_BY_STAMP_COUNT,aiActionType:im.hG.SORT_STICKIES_BY_STAMP_COUNT,actionLabel:(0,G.tx)("fullscreen_actions.sort-stickies-by-stamp-count"),instructionLabel:(0,G.tx)("figjam_ai.organize_stickies.make_selection_instruction"),icon:(0,s.jsx)(n8.a,{})}),lo({action:Z.JT.SORT_STICKIES_BY_STAMP_TYPE,aiActionType:im.hG.SORT_STICKIES_BY_STAMP_TYPE,actionLabel:(0,G.tx)("fullscreen_actions.sort-stickies-by-stamp-type"),instructionLabel:(0,G.tx)("figjam_ai.organize_stickies.make_selection_instruction"),icon:(0,s.jsx)(n8.a,{})}),lo({action:Z.JT.MIND_MAP_GENERATE_IDEAS,aiActionType:im.hG.MIND_MAP_GENERATE_IDEAS,actionLabel:(0,G.tx)("fullscreen_actions.mind-map-generate-ideas"),instructionLabel:(0,G.tx)("figjam_ai.make_mindmap_ideas.make_selection_instruction"),icon:(0,s.jsx)(n6.Q,{}),searchSynonyms:["generate new mind map ideas","generate mind map ideas","generate ideas"]})];function lc(){let e=(0,h.PE)(),t=!(0,ie.q8)(),n=(0,eY.ow)(),i=e||(0,ep.kc)().figjam_ai_menu_items_all_access&&n&&t,r=(0,t8.V)(),l=(0,ni.Vr)(),o=(0,Y.eH)(),d=(0,eE.sZ)();return(0,a.useMemo)(()=>ld.reduce((t,n)=>{for(let e of n.featureFlags||[])if(!(0,ep.kc)()[e])return t;if(n.action===Z.JT.FIND_INSPIRATION){if(!o&&!r)return t;let e={...n};return l?.name&&!l?.isSlide&&(e.displayNode=(0,G.tx)("fullscreen_actions.quick_actions.find-inspiration-with-selection",{frameName:(0,s.jsx)(eX.E,{color:"secondary",children:l?.name})})),t.push(e),t}return n.action===Z.JT.EDIT_IMAGE&&(0,n9.d)(d)||(n.action===Z.JT.GENERATE_IMAGE||n.action===Z.JT.EDIT_IMAGE||n.action===Z.JT.UPSCALE_IMAGE||n.action===Z.JT.REMOVE_BACKGROUND)&&!e||i&&t.push(n),t},[]),[i,r,l,o,d,e])}var lu=n(198277),lp=n(574587),lm=n(870638),lh=n(230993);function lf(e){let{submenuItem:t,path:n}=e,{push:i,close:a}=(0,S.cq)();if(!t||!t.itemPath||t.submenu&&0===t.submenu.length)return null;let r=(0,eb.TW)(t);return(0,s.jsx)(aO.B.Item,{primaryAction:{onAction:()=>{if(t.submenu){i({name:et.Sn.PLUGIN_SUBMENU_ENTRY,module:(0,s.jsx)(lg,{item:t,path:n.concat(r)})},{shouldResetSearchQuery:!0});return}let e=!t.itemParameterArgs;t.callback&&(t.callback(),e&&a())},shortcuts:[{key:F.Uz.ENTER},{key:F.Uz.TAB}]},actionLabel:!1,children:(0,s.jsxs)("div",{className:B.s.flex.justifyBetween.wFull.$,children:[(0,s.jsx)("div",{className:B.s.ml28.$,children:r}),t.submenu&&(0,s.jsx)(eu.a,{})]})},r)}function lg(e){let[t,n]=a.useState(""),[i,r]=a.useState([]),l=(0,b.Bd)(),{item:o,path:d}=e;if(a.useEffect(()=>{o.submenu&&(r(o.submenu),n(""))},[o]),!o.submenu)return null;let c=(0,s.jsx)(aO.B,{resultCount:i.length,children:i.map(e=>(0,s.jsx)(lf,{submenuItem:e,path:d},e.extensionSearchString||""))}),u=e=>{n(e),o.submenu&&r(o.submenu.filter(t=>(0,eb.TW)(t).toLowerCase().includes(e.toLowerCase())))},p=d.join(" > ");return(0,s.jsxs)(ei.n,{height:Z.wC,canShrinkIfNeeded:l,children:[(0,s.jsx)(es.vj,{searchQuery:t,onSearchChange:u,onClear:()=>{u("")},placeholder:p}),(0,s.jsx)(ei.n.Body,{children:c})]})}var lx=n(390452),l_=n(92572),ly=n(955016),lv=n(443192),lb=n(514359),lC=n(174730),lj=n(733200),lk=n(943067),lw=(e=>(e.PERSONAL_DRAFT="PERSONAL_DRAFT",e.WORKSPACE_OR_PLAN_DISABLED="WORKSPACE_OR_PLAN_DISABLED",e.ORG_GUEST="ORG_GUEST",e.NON_PAID_SEAT="NON_PAID_SEAT",e.NO_ORG_OR_TEAM_USER="NO_ORG_OR_TEAM_USER",e.ROLLING_OUT="ROLLING_OUT",e))(lw||{});let lE=[],lT=new Set([e9.nT.Design,e9.nT.Sites,e9.nT.Whiteboard,e9.nT.Cooper,e9.nT.Slides]);var lS=n(225654);function lI({title:e,subTitle:t,icon:n,onClose:i,dataTestId:a}){return(0,s.jsx)("div",{"data-testid":a,className:B.s.colorBgBrandTertiary.p8.bRadius8.$,children:(0,s.jsxs)("div",{className:B.s.flex.gap8.$,children:[n,(0,s.jsxs)("div",{className:B.s.flex.flexColumn.flexGrow1.$,children:[(0,s.jsx)("span",{className:"banner--title--gNQoq",children:e}),(0,s.jsx)("span",{className:"banner--subtitle--8K4pM",children:t})]}),i?(0,s.jsx)(sT.K,{onClick:i,"aria-label":(0,G.t)("qa.dismiss"),htmlAttributes:{"data-testid":"banner-close-icon"},children:(0,s.jsx)(lS.X,{style:{"--color-icon":"var(--color-icon-secondary)"}})}):null]})})}function lN(){let e;let{reason:t,dismissKey:n}=function(){let e=(function(){let e=(0,tb.D6)("useAIDisabledReasons").unwrapOr(null),t=(0,tb.X$)("useAIDisabledReasons").unwrapOr(null),n=(0,tb.T5)("useAIDisabledReasons").unwrapOr(null),i=(0,h.PE)(),s=(0,H.q5)(),a=e?.key.type===nD.h4.ORG_USER&&e?.permission===nD.Xn.GUEST,r=!!(0,ep.kc)().ff_wsai_toggle,l=(0,lj.oA)(s?.sharedContainerSetting),o=r?l?.aiSetting==="disabled":!n?.aiFeaturesEnabled,d=!!(t&&t.tier!==nD.Ag.STARTER),c=!e?.seatTypeLicenseTypes?.includes(nD.G_.DESIGN),u=!!t,p=u&&!!e,m=(0,eY.E3)();if(i||!lT.has(m))return lE;if(!(0,lk.$7)("useDisabledReasons"))return["ROLLING_OUT"];let f=[];return!s||s.parentOrgId||s.teamId||f.push("PERSONAL_DRAFT"),o&&f.push("WORKSPACE_OR_PLAN_DISABLED"),a&&f.push("ORG_GUEST"),d&&c&&f.push("NON_PAID_SEAT"),u&&!p&&f.push("NO_ORG_OR_TEAM_USER"),f})().sort((e,t)=>lA(e)-lA(t)),t={seen_no_ai_org_disabled:(0,lC.f)("seen_no_ai_org_disabled"),seen_no_ai_team_or_org_user:(0,lC.f)("seen_no_ai_team_or_org_user"),seen_no_ai_rolling_out:(0,lC.f)("seen_no_ai_rolling_out")};return(0,a.useMemo)(()=>{for(let n of e){let e=function(e){switch(e){case lw.ROLLING_OUT:return"seen_no_ai_rolling_out";case lw.WORKSPACE_OR_PLAN_DISABLED:return"seen_no_ai_org_disabled";case lw.NON_PAID_SEAT:case lw.NO_ORG_OR_TEAM_USER:case lw.ORG_GUEST:return"seen_no_ai_team_or_org_user";case lw.PERSONAL_DRAFT:case null:return null;default:(0,O.xb)(e)}}(n);if(!e)return{reason:n};if(!t[e])return{reason:n,dismissKey:e}}return{reason:null}},[e,t])}(),i=(0,r.wA)(),l=(0,lb.yy)(),o=(0,c.md)(H.Hu),d=(0,G.t)("qa.no_ai.title");switch(t){case lw.ROLLING_OUT:case null:return null;case lw.PERSONAL_DRAFT:d=(0,G.t)("qa.no_ai.title.personal_draft"),e=(0,G.t)("qa.no_ai.subtitle.personal_draft");break;case lw.WORKSPACE_OR_PLAN_DISABLED:d=(0,G.t)("qa.no_ai.title.org_disabled"),e=(0,G.t)("qa.no_ai.subtitle.org_disabled");break;case lw.NON_PAID_SEAT:case lw.NO_ORG_OR_TEAM_USER:case lw.ORG_GUEST:d=(0,G.t)("qa.no_ai.title.not_available_here"),e=(0,G.t)("qa.no_ai.subtitle.team_or_org_user_no_access",{orgOrTeamName:l?.name||o?.name||""});break;default:(0,O.xb)(t)}return(0,s.jsx)("div",{className:B.s.mx8.mb8.$,children:(0,s.jsx)(lI,{title:d,subTitle:e,icon:(0,s.jsx)(tT.X,{}),dataTestId:"no-ai-banner",onClose:n?()=>i(lv.b({[n]:!0})):void 0})})}function lA(e){switch(e){case lw.ROLLING_OUT:return 0;case lw.PERSONAL_DRAFT:return 1;case lw.NON_PAID_SEAT:case lw.NO_ORG_OR_TEAM_USER:case lw.ORG_GUEST:return 2;case lw.WORKSPACE_OR_PLAN_DISABLED:return 3;case null:return 1e3;default:(0,O.xb)(e)}}var lL=n(350817),lM=n(397376),lO=n(772963),lR=n(15329),lP=n(878801),lD=n(36362);function lF(e){let{extension:t,publishedExtension:n,canRequest:i,canRun:s}=e,a=(0,eE.sZ)(),r=(0,lD.RW)(),l=(0,lP.a)(a?.id,t.plugin_id,r.loaded?r.data?.workspaceId:void 0);if((0,eA.bH)(t)&&a&&a.name)return{text:a.name};if((0,eA.ZQ)(t)&&n&&(0,lR.AC)(n))return{text:(0,G.t)("qa.extensions.in_review"),variant:lx.x.BRAND};if((0,eA.ZQ)(t))return{text:(0,G.t)("qa.extensions.development")};if(s);else if(l)return{text:(0,G.t)("qa.extensions.approval_pending")};else if(i)return{text:(0,G.t)("qa.extensions.needs_approval")};return null}function lz({text:e,variant:t}){return(0,s.jsx)(lx.E,{variant:t,children:(0,s.jsx)(lO.G,{text:e})})}function lB(e){let{searchQuery:t,fullscreenMenuAction:n}=e,i="";if(n.searchSynonyms&&(i+=`Synonyms: ${n.searchSynonyms.join(", ")}`),!(0,sp.h8)())return null;let{details:a,score:r}=(0,n_.ou)((0,eR.x0)()).debugData(t,(0,nn._g)(n).searchItem),l=`Score:${r.toFixed(2)}`;return(0,s.jsx)("div",{className:B.s.ml8.colorTextSecondary.noWrap.$,"data-tooltip":[a,i].filter(Boolean).join("\n"),"data-tooltip-type":eL.Ib.TEXT,"data-tooltip-max-width":300,"data-testid":"search-debug-info",children:l})}var lG=n(718668),lU=n(617101),lV=n(586486);let lH=e=>(0,ev.Zj)(e)&&!e.hideCheckForQuickCommand,lK=()=>{};function lW({item:e,searchQuery:t,createCommonMetrics:n}){let{push:i}=(0,S.cq)(),{addFrecencyUsage:o}=(0,eR.fJ)(),d=(0,ev.Dz)(e),c=(0,r.d4)(e=>e.mirror.appModel),u=(0,r.wA)(),{close:p}=(0,S.cq)(),m=(0,eT.J2)((0,ek.UK)().showQuickCommandRankDebug),h=(0,j.V2)(),f=(0,ew.p8)("keyboardShortcuts"),g=(0,a.useCallback)(()=>{p()},[p]),_=(0,eh.A)(g,300);(0,a.useEffect)(()=>()=>{_.cancel()},[_]);let y=(0,lM.r7)(),v=a.useRef(!1),C=(0,a.useCallback)(i=>{let s=i?(0,lL.OZ)(i):"",a={...n(),shortcutText:s};(0,eF.kp)(a),y(e),o(e,t)},[o,y,n,e,t]),w=(0,a.useCallback)((e,n)=>{if(v.current)return;v.current=!0;let a=n?.key===F.Uz.TAB?"tab":"enter";if(_.isPending()&&_.cancel(),e.disabled)return;if("plugins-menu-item"===e.name&&!h){g(),eI.R.instance.handleUpgrade(ey.Q7.RUN_PLUGIN);return}let r=!!e.itemParameterArgs,o=(0,eC.YT)(e);if(!(r||o||"enter"===a))return;let d=null;if(e.quickAction){let t={};if(e.quickAction.retainSearchQuery&&(t.shouldResetSearchQuery=!1),e.quickAction.beforeModuleOpen){let t=(0,x._V)();e.quickAction.beforeModuleOpen(t)}i(e.quickAction.module,t),C(n);return}if(r)switch(a){case"enter":if(e.runPluginArgs&&!t){let t={...e.runPluginArgs,...e.itemParameterArgs?.command&&{command:e.itemParameterArgs.command}};d=async()=>{await eI.R.instance.enqueue({mode:"run-forever",runPluginArgs:t})}}else if(e.parametersRequired){let t=e.itemParameterArgs;i({name:et.Sn.PLUGIN_PARAMETER_ENTRY,module:(0,s.jsx)(lh.r,{command:t.command,displayName:t.displayName,initialParameterValues:e.runPluginArgs?.parameterValues,onExitParameterEntry:R.lQ,parameterOnly:t.parameterOnly,parameters:t.parameters,pluginId:t.pluginId,pluginLocalFileId:t.pluginLocalFileId,recentlyUsedCommandName:(0,eD.EG)(e),triggeredFrom:"quick-actions"})}),C(n);return}break;case"tab":if(e.itemParameterArgs){let t=e.itemParameterArgs;i({name:et.Sn.PLUGIN_PARAMETER_ENTRY,module:(0,s.jsx)(lh.r,{command:t.command,displayName:t.displayName,initialParameterValues:e.runPluginArgs?.parameterValues,onExitParameterEntry:R.lQ,parameterOnly:t.parameterOnly,parameters:t.parameters,pluginId:t.pluginId,pluginLocalFileId:t.pluginLocalFileId,recentlyUsedCommandName:(0,eD.EG)(e),triggeredFrom:"quick-actions"})}),C(n);return}break;default:(0,O.xb)(a)}if(o){i({name:et.Sn.PLUGIN_SUBMENU_ENTRY,module:(0,s.jsx)(lg,{item:e,path:[(0,eb.TW)(e)]})}),C(n);return}e.callback&&!d?d=async()=>{e.callback&&await e.callback((0,ev.Dz)(e),e.args,u)}:e.action&&(d=async()=>{if(!e.action)return;let t=lK();if(t)return await t();ej.VU.get(e.action,"quick-actions",e.args)()}),C(n),lH(e)&&!(0,em.PN)()?_():e.keepMenuOpen||g(),d?d().catch(t=>{(0,ef.$D)(l.e.AI_FOR_PRODUCTION,t,{extra:{item:e}})}):(0,ef.$D)(l.e.AI_FOR_PRODUCTION,Error("No valid action triggered from quick actions"),{extra:{item:e}})},[v,g,_,u,i,t,C,h]),E=e.shortcutText||(0,eO.c1)(f,d),T="plugins-menu-item"===e.name&&!!e.itemParameterArgs&&e.itemParameterArgs.parameters.length>0,I=(0,eC.YT)(e),N=T||I,A=(0,j.cW)(),L=(0,j.ZT)();function M(e){if("plugins-menu-item"===e.name){let t;return(e.pluginId&&(t=(0,eS.DM)({idToSearch:e.pluginId,localExtensionsByFileId:void 0,publishedExtensions:{...A,...L}})),t&&!(0,eA.ZQ)(t))?(0,s.jsx)(eM.V,{className:B.s.colorIcon.w20.h20.m2.bRadius4.$,plugin:t,role:"presentation"}):(0,s.jsx)(ex.B,{className:B.s.colorIcon.w20.h20.bRadius4.$,svg:lV.A,ariaLabel:`${e.name} icon`,autosize:!0})}if(e.iconType&&"string"==typeof e.iconType){var t;return"external_link"===(t=e.iconType)?(0,s.jsx)(ex.B,{svg:lU.A,className:B.s.colorIcon.$}):"import"===t?(0,s.jsx)(el.R,{}):"plus"===t?(0,s.jsx)(eo.$,{}):"widget"===t?(0,s.jsx)(ed.C,{}):void 0}if(e.iconType&&"string"!=typeof e.iconType)return e.iconType}let P=(()=>{if(e.itemParameterArgs&&e.runPluginArgs&&!t)return(0,s.jsx)(eP._,{runPluginArgs:e.runPluginArgs,itemParameterArgs:e.itemParameterArgs});if(e.itemPath){let t=e.itemPath;return(0,s.jsx)(eP.h,{itemPath:t})}return e.displayNode?(0,s.jsx)(s.Fragment,{children:e.displayNode}):(0,s.jsx)(s.Fragment,{children:(0,eD.EG)(e)})})(),D=lH(e),z=D?(0,ev.WJ)(c,e):void 0,U=(0,k.h)("plugin"),V=(0,k.h)("widget"),H=(0,eE.sZ)(),K=()=>"run-local-plugin"===e.menuActionType||"insert-local-widget"===e.menuActionType?(0,s.jsx)("div",{style:e_.sx.add({maxWidth:"110px"}).$,children:(0,s.jsx)(lz,{text:(0,G.t)("fullscreen_actions.development")})}):H&&(U.some(t=>t.plugin_id===e.pluginId)||V.some(t=>t.plugin_id===e.pluginId))?(0,s.jsx)("div",{style:e_.sx.add({maxWidth:"110px"}).$,children:(0,s.jsx)(lz,{text:H.name})}):m?(0,s.jsx)(lB,{searchQuery:t,fullscreenMenuAction:e}):e.isRepairCommand&&(0,ep.kc)().internal_only_debug_tools?(0,s.jsx)(lx.E,{children:"REPAIR"}):e.action===Z.JT.FIRST_DRAFT&&e.disabled?(0,s.jsx)("div",{"data-tooltip":(0,G.t)("qa.unavailable"),"data-tooltip-type":eL.Ib.TEXT,style:{"--color-icon":"var(--color-icon-disabled)"},children:(0,s.jsx)(ec.M,{})}):void 0,W=(0,eF.BB)(e),q=W&&(0,rr.OR)(e)||null,X=(0,eF.Z7)(e),Y=a.useMemo(()=>q?(0,s.jsx)(rr.yi,{helpUrlVariant:q},"ai"):X?(0,s.jsx)(lx.E,{children:(0,G.tx)("general.beta")},"beta"):null,[q,X]),J=a.useMemo(()=>E?(0,s.jsx)(eg.S,{shortcut:E}):N?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:B.s.colorBgTertiary.bRadius5.font11.h16.fontMedium.flex.itemsCenter.px4.mr8.$,"aria-hidden":!0,id:"tab-hint",children:(0,G.tx)("whiteboard.ai_modal.hint_tab")}),(0,s.jsx)(ex.B,{svg:lG.A,className:B.s.colorIcon.$,"aria-describedby":"tab-hint"})]}):null,[E,N]),Q="go-to-page"===e.name?`go-to-page-${e.args?.pageName}`:e.name||e.action;(0,a.useEffect)(()=>{e.onRender&&e.onRender(!!t)},[e,t]);let $=(0,b.Bd)(),ee=(0,b.uJ)(),[en,ei]=a.useState(!1),es=a.useMemo(()=>$&&en&&q?{onAction:()=>{(0,rr.mf)(q)}}:{text:"Perform",shortcuts:ee?[{key:F.Uz.ENTER}]:[{key:F.Uz.ENTER},{key:F.Uz.TAB}],onAction:({shortcut:t})=>w(e,t)},[q,$,en,ee,e,w]),ea=!!e.runPluginArgs,er=a.useMemo(()=>T?ea?(0,G.t)("qa.secondary_action.plugin.adjust_parameters"):(0,G.t)("qa.secondary_action.plugin.set_parameters"):I?(0,G.t)("qa.secondary_action.plugin.submenu"):void 0,[T,I,ea]),eN=N&&ee;return $&&(W||eN)?(0,s.jsx)(aO.B.Item,{primaryAction:es,actionLabel:!1,disabled:e.disabled,recordingKey:Q,scrollMargin:"32px 0 16px 0",shouldDisableFocusOnHover:ee,type:"container",children:(t,n,i)=>(0,s.jsx)(ly._,{badge:K(),dataTestId:Q,disabled:e.disabled,displayNode:P,icon:M(e),label:(0,eD.EG)(e),onAccessoryFauxFocusChanged:ei,onPrimaryButtonClick:n,onPrimaryButtonFocus:i,primaryButtonRef:t,shouldMakeContentInert:ee,type:"container",children:(0,s.jsx)(ly.k,{activeContent:(t,n)=>W?(0,s.jsx)(rr.yi,{ref:t,helpUrlVariant:(0,rr.OR)(e),isFocused:n},"ai"):eN?(0,s.jsx)("button",{"aria-label":er,ref:t,className:B.s.bgTransparent.h24.$,onClick:()=>{w(e,{key:F.Uz.TAB})},children:(0,s.jsx)(l_.c,{active:n,borderWidth:1,children:(0,s.jsx)(eu.a,{})})}):void 0,inactiveContent:E&&(0,s.jsx)(eg.S,{shortcut:E})||null})})}):(0,s.jsx)(aO.B.Item,{primaryAction:es,actionLabel:!1,disabled:$?e.disabled:void 0,recordingKey:Q,scrollMargin:"32px 0 16px 0",type:$&&D?"checkbox":"button",isChecked:!!z,shouldDisableFocusOnHover:ee,children:(0,s.jsx)(ly._,{badge:K(),checked:z,dataTestId:Q,disabled:e.disabled,displayNode:P,icon:M(e),label:(0,eD.EG)(e),shouldMakeContentInert:ee,children:(0,s.jsx)(ly.k,{activeContent:Y,inactiveContent:J})})})}function lq({setActiveTab:e}){let t=(0,A.Ev)(),n=(0,c.md)(w.Lk),i=(0,c.md)(w.dd),l=(0,r.d4)(eN.l),o=(0,c.md)(w.Rt),u=(0,a.useRef)(o),p=(0,c.md)(w.Q8),m=(0,a.useDeferredValue)(p);(0,a.useEffect)(()=>{u.current=o},[o]);let f=function(){let e=(0,nR.F)(),t=lc(),n=function(){let e=(0,r.d4)(e=>e.mirror.appModel.isReadOnly),t=(0,lp.c4)(),n=function(){let e=(0,tC.wo)(),t=(0,j.cW)(),n=(0,j.ZT)(),i=(0,eY.E3)(),s=[],a=[];return e.forEach(e=>{if(!e.extensionInfo)return;let{extensionType:i,extensionId:r}=e.extensionInfo,l=(0,eS.DM)({idToSearch:r,localExtensionsByFileId:{},publishedExtensions:{...t,...n}});l&&("plugin"===i?s.push(l):a.push(l))}),{plugins:(0,eS.AG)(i,s),widgets:(0,eS.AG)(i,a)}}();return(0,a.useMemo)(()=>(0,lu.M)({isReadOnly:e,extensionMenuProps:{...t,recentlyUsedPlugins:[...t.recentlyUsedPlugins??[],...n.plugins??[]],recentlyUsedWidgets:[...t.recentlyUsedWidgets??[],...n.widgets??[]],unboundedRecents:!0},includeDisabled:!0,filters:{showUnpurchased:!1}}),[e,t,n])}(),i=function(){let e=(0,ew.p8)("pagesList"),t=(0,nB.bG)({pagesList:e,isComparingChanges:!1});return(0,a.useMemo)(()=>(0,ep.kc)().qa_go_to_page?e.map(e=>({name:"go-to-page",args:{pageName:e.name},callback:()=>{t(e.nodeId)},iconType:(0,s.jsx)(na,{}),displayNode:(0,s.jsx)(s.Fragment,{children:(0,G.tx)("fullscreen_actions.quick_actions.go-to-page",{pageName:(0,s.jsx)(eX.E,{color:"secondary",children:e.name})})})})):[],[e,t])}(),l=function(){let e=(0,eY.lg)(),t=(0,nf.V)(),n=(0,nf.J)(),i=(0,nM.Fk)(e=>{let t=e.getDirectlySelectedNodes();return{length:t.length,firstNodeName:t?.[0]?.name||""}});return a.useMemo(()=>e===nD._Y.DESIGN?t&&0!==i.length?[{...nF.Bc,displayNode:i.length>1?(0,G.tx)("fullscreen_actions.quick_actions.selection"):(0,G.tx)("fullscreen_actions.quick_actions.send-frame-to-figma-make",{frameName:(0,s.jsx)(eX.E,{color:"secondary",children:i.firstNodeName})})}]:[]:e===nD._Y.WHITEBOARD&&0!==i.length&&n?[{...nF.rF,displayNode:(0,s.jsx)(nz,{children:(0,G.tx)("fullscreen_actions.quick_actions.create-a-prototype-with-figma-make")})}]:[],[e,i,t,n])}(),o=function(){let e=(0,nL.Zr)("send-to-buzz-from-design"),t=(0,r.d4)(H.tB),n=(0,r.d4)(e8.vx),i=(0,nM.Fk)(e=>e.getDirectlySelectedNodes().length>0),l=a.useMemo(()=>({tags:[nA.$.BETA],iconType:(0,s.jsx)(nI.h,{}),searchSynonyms:["send to buzz","export to buzz","copy to buzz","create buzz file","figma buzz","buzz"],flags:["edit","design"],callback:(e,i,s)=>{(0,nN.rN)(s,(0,nN.VY)({openFile:t,fileVersion:n}),nO.f6.SEND_TO_BUZZ_FROM_DESIGN_QA_V2_MENU)}}),[n,t]);return a.useMemo(()=>{if(!d.Mpt||!e||!t||!n)return[];let a=i?d.Mpt.getSelectedNodesToSend():d.Mpt.getTopLevelFramesToSend();if(0===a.length)return[];if(1===a.length){let e=(0,eZ.getActiveTSSceneGraph)().get(a[0]);if(e?.isTopLevelFrame())return[{action:"send-to-buzz-from-design",...l,displayNode:(0,G.tx)("buzz.send_from_design.send_node_to_figma_buzz",{nodeName:(0,s.jsx)("span",{className:"x1n0bwc9",children:e.name})})}]}return i?[{action:"send-selection-to-buzz-from-design",...l,displayNode:(0,G.tx)("buzz.send_from_design.send_selection_to_figma_buzz",{numSelectedNodes:a.length})}]:[{action:"send-to-buzz-from-design",...l,displayNode:(0,G.tx)("buzz.send_from_design.send_frames_to_figma_buzz",{numFrames:a.length})}]},[n,e,t,i,l])}();return(0,a.useMemo)(()=>[...e,...l,...o,...n,{name:"wand-menu",callback:R.lQ,children:t},...i],[e,t,n,i,l,o])}(),g=eB(),x=nS(g,f),_=function(e,t,n,i){let l=(0,tC.wo)(),o=(0,eG.WI)(l.map(n=>{let i=t.getItem(e,n.displayName);return i&&n.runPluginArgs&&(i.runPluginArgs=n.runPluginArgs),i})).slice(0,3),{items:u}=function(e,t,n){let i=(0,h.PE)(),s=(0,t9.ZC)(i),l=function(e,t,n){let i=nc(),s=t.map(e),l=function(){let e=(0,eY.m0)(),t=(0,ne.e)(),n=H.q5()?.canEdit,i=(0,h.PE)();return t?"VARIABLES_TABLE":e?"DEV":!1===n?"DESIGN_VIEWER":n&&i?"DESIGN_EDITOR_AI":n&&!i?"DESIGN_EDITOR_NO_AI":"NONE"}(),o=function(e,t){let n=function(){let e=(0,r.d4)(e=>e.mirror?.appModel),t=nc(),{frecencyByAction:n,frecencyByQuery:i}=(0,eR.fJ)(),s=(0,nh.Tv)(),l=(0,np.C)(),o=(0,nf.V)(),d=(0,nf.J)();return(0,a.useCallback)((a,r)=>{if(r)return[];let c=a.map(e),u=[],p=(0,n_.ou)({actions:n}),m=s.filter(e=>{let t=(0,eZ.getActiveTSSceneGraph)().get(e);return t?.isSlide}).length>0;if(0===s.length||m)return u=[Z.JT.GENERATE_IMAGE,Z.JT.REMOVE_BACKGROUND,Z.JT.UPSCALE_IMAGE,Z.JT.EXPAND_IMAGE,Z.JT.EDIT_IMAGE,Z.JT.AUTO_RENAME_LAYERS,Z.JT.CONTENT_FILL,Z.JT.FIND_INSPIRATION,Z.JT.FIRST_DRAFT,Z.JT.FIRST_DRAFT_FINE_TUNE,Z.JT.MAGIC_LINK,Z.JT.MAKE_EDITS,Z.JT.SLIDES_GENERATE_SPEAKER_NOTES,Z.JT.SLIDES_REWRITE_TEXT,Z.JT.REWRITE_TEXT,Z.JT.SHORTEN_TEXT,Z.JT.TRANSLATE_TEXT,Z.JT.WHITEBOARD_GENERATE_CONTENT,Z.JT.SUMMARIZE_STICKIES,Z.JT.SORT_STICKIES_BY_TOPIC,Z.JT.MIND_MAP_GENERATE_IDEAS],l&&u.push(Z.OZ),[...u].map(e=>t(c,e,!0)).filter(e=>!!e).sort((e,t)=>p.sort("",(0,nn._g)(e).searchItem,(0,nn._g)(t).searchItem));{let s,a,r=0;if(nm.ruz){let e=nm.ruz.getNodeImagePairsForEdit();e.length>1&&(0,ep.kc)().aip_batch_image_modify?r=1:1===e.length?r=2:nm.ruz.getGenerateImageTarget()&&(r=3)}o&&u.push(Z.i0),d&&u.push(Z.Ax),u.push(Z.JT.CONTENT_FILL,Z.JT.TRANSLATE_TEXT,Z.JT.REWRITE_TEXT,Z.JT.SHORTEN_TEXT,Z.JT.SLIDES_GENERATE_SPEAKER_NOTES,Z.JT.SLIDES_REWRITE_TEXT,Z.JT.GENERATE_IMAGE,Z.JT.REMOVE_BACKGROUND,Z.JT.UPSCALE_IMAGE,Z.JT.EXPAND_IMAGE,Z.JT.EDIT_IMAGE,Z.JT.FIRST_DRAFT_MAKE_CHANGES,Z.JT.AUTO_RENAME_LAYERS,Z.JT.MAGIC_LINK,Z.JT.FIND_INSPIRATION,Z.JT.FIRST_DRAFT,Z.JT.MAKE_EDITS,Z.JT.FIRST_DRAFT_FINE_TUNE,Z.JT.SUMMARIZE_STICKIES,Z.JT.SORT_STICKIES_BY_TOPIC,Z.JT.MIND_MAP_GENERATE_IDEAS),l&&u.push(Z.OZ);let m=[...u].map(e=>t(c,e)).filter(e=>!!e),h=m.sort((e,t)=>(function(e,t,n){if(1===e){if(ny.has(t.action??"")&&!ny.has(n.action??""))return -1;if(!ny.has(t.action??"")&&ny.has(n.action??""))return 1}else if(2===e){if(nv.has(t.action??"")&&!nv.has(n.action??""))return -1;if(!nv.has(t.action??"")&&nv.has(n.action??""))return 1}if(3===e||2===e){if(t.action===Z.JT.GENERATE_IMAGE)return -1;if(n.action===Z.JT.GENERATE_IMAGE)return 1}})(r,e,t)??p.sort("",(0,nn._g)(e).searchItem,(0,nn._g)(t).searchItem)),f=Object.values(c).filter(t=>(0,eO.Yh)(e,t.name||t.action||"")&&!m.includes(t)&&!t.searchOnly&&!(t.featureFlags&&t.featureFlags.includes("internal_only_debug_tools"))&&(0,nx.y)("",(0,ng.n)(t),{actions:n,queries:i})>0).sort((e,t)=>p.sort("",(0,nn._g)(e).searchItem,(0,nn._g)(t).searchItem));return f.length<4?(s=8-f.length,a=f.length):h.length<4?(s=h.length,a=8-h.length):(s=4,a=4),[...h.slice(0,s),...f.slice(0,a)]}},[e,t,n,i,s,l,o,d])}(),[i]=(0,a.useState)(()=>n(e,""));return i}(t,0),c=function(e,t){let n=!nT();return(0,a.useCallback)(()=>{if(n){let e=[];for(let n of t){if(!n.action||n.disabled)continue;let t=nC.get(n.action);t&&e.push([n.action,t])}return e}let i=[];for(let n of((0,eO.Yh)(e,Z.JT.FIRST_DRAFT_MAKE_CHANGES)&&i.push([Z.JT.FIRST_DRAFT_MAKE_CHANGES,ns.b.SUGGESTIONS]),t))n.action&&!n.disabled&&i.push([n.action,ns.b.SUGGESTIONS]);return i},[e,t,n])}(e,o),u=function(){let e=(0,ni.I9)(),t=(0,ew.p8)("activeCanvasEditModeType"),n=(0,np.C)();return(0,a.useCallback)(()=>{if(!e?.length){let e=[["canvas-search-replace",ns.b.SUGGESTIONS],["select-all",ns.b.SUGGESTIONS],["undo",ns.b.SUGGESTIONS],["toggle-rulers",ns.b.COMMON_SETTINGS],["toggle-snapping-to-pixels",ns.b.COMMON_SETTINGS],["toggle-sidebar",ns.b.COMMON_SETTINGS],["toggle-ui",ns.b.COMMON_SETTINGS],["toggle-multiplayer-cursors",ns.b.COMMON_SETTINGS],["show-nudge-amount-picker",ns.b.COMMON_SETTINGS],["open-shortcuts",ns.b.COMMON_SETTINGS],["open-account-settings",ns.b.COMMON_SETTINGS]];return n&&e.push(["copy-to-figma-slides",ns.b.SUGGESTIONS]),e}if(1===e.length){let i=e[0],s=[["add-selection-ready-status",ns.b.SUGGESTIONS],["republish-selected-components",ns.b.SUGGESTIONS],["publish-changes-to-library",ns.b.SUGGESTIONS],["toggle-shown-for-selected-nodes",ns.b.SUGGESTIONS]],a=[["select-matching",ns.b.SUGGESTIONS],["outline-stroke",ns.b.SUGGESTIONS],["mask-selection",ns.b.SUGGESTIONS],["flatten-selection",ns.b.SUGGESTIONS],["unlock-all",ns.b.SUGGESTIONS],["convert-to-raster",ns.b.SUGGESTIONS],["toggle-shown-for-selected-nodes",ns.b.SUGGESTIONS]];if(t===d.m1T.VECTOR)return[["flip-horizontal",ns.b.SUGGESTIONS],["flip-vertical",ns.b.SUGGESTIONS],["align-horizontal-center",ns.b.SUGGESTIONS],["align-vertical-center",ns.b.SUGGESTIONS]];switch(i.type){case"SYMBOL":return s;case"FRAME":if(i.isStateGroup)return s;if(i.isGroup)return a;let r=[["add-selection-ready-status",ns.b.SUGGESTIONS],["select-matching",ns.b.SUGGESTIONS],["stack-selection",ns.b.SUGGESTIONS],["run-multi-stack-auto-layout",ns.b.SUGGESTIONS],["copy-properties",ns.b.SUGGESTIONS],["unlock-all",ns.b.SUGGESTIONS],["convert-to-raster",ns.b.SUGGESTIONS],["toggle-shown-for-selected-nodes",ns.b.SUGGESTIONS],["replace-selected-frame-with-section",ns.b.SUGGESTIONS]];return n&&r.push(["copy-to-figma-slides",ns.b.SUGGESTIONS]),r;case"INSTANCE":return[["select-matching",ns.b.SUGGESTIONS],["detach-instance",ns.b.SUGGESTIONS],["reset-symbol",ns.b.SUGGESTIONS],["convert-to-raster",ns.b.SUGGESTIONS],["toggle-shown-for-selected-nodes",ns.b.SUGGESTIONS]];case"SLICE":return[["export-selected-exportables",ns.b.SUGGESTIONS],["convert-to-raster",ns.b.SUGGESTIONS],["toggle-shown-for-selected-nodes",ns.b.SUGGESTIONS]];case"WIDGET":return[["select-all-widgets",ns.b.SUGGESTIONS],["convert-to-raster",ns.b.SUGGESTIONS],["toggle-shown-for-selected-nodes",ns.b.SUGGESTIONS]];case"SECTION":return[["add-selection-ready-status",ns.b.SUGGESTIONS],["select-matching",ns.b.SUGGESTIONS],["unlock-all",ns.b.SUGGESTIONS],["toggle-shown-for-selected-nodes",ns.b.SUGGESTIONS],["replace-selected-section-with-frame",ns.b.SUGGESTIONS]];case"GROUP":return a;case"ELLIPSE":case"BOOLEAN_OPERATION":case"LINE":case"REGULAR_POLYGON":case"RECTANGLE":case"ROUNDED_RECTANGLE":case"STAR":case"VECTOR":return[["select-matching",ns.b.SUGGESTIONS],["flip-horizontal",ns.b.SUGGESTIONS],["mask-selection",ns.b.SUGGESTIONS],["flatten-selection",ns.b.SUGGESTIONS],["copy-properties",ns.b.SUGGESTIONS],["convert-to-raster",ns.b.SUGGESTIONS],["toggle-shown-for-selected-nodes",ns.b.SUGGESTIONS]];case"TEXT":return[["text-edit-hyperlink",ns.b.SUGGESTIONS],["text-toggle-strikethrough",ns.b.SUGGESTIONS],["copy-properties",ns.b.SUGGESTIONS],["paste-properties",ns.b.SUGGESTIONS],["text-font-size-increase",ns.b.SUGGESTIONS],["text-font-size-decrease",ns.b.SUGGESTIONS],["text-bold-increase",ns.b.SUGGESTIONS],["text-bold-decrease",ns.b.SUGGESTIONS]]}}let i=[["select-matching",ns.b.SUGGESTIONS],["frame-selection",ns.b.SUGGESTIONS],["create-symbol",ns.b.SUGGESTIONS],["create-multiple-symbols",ns.b.SUGGESTIONS],["toggle-locked-for-selected-nodes",ns.b.SUGGESTIONS],["export-selected-exportables",ns.b.SUGGESTIONS],["align-horizontal-center",ns.b.SUGGESTIONS],["align-vertical-center",ns.b.SUGGESTIONS]];return n&&i.push(["copy-to-figma-slides",ns.b.SUGGESTIONS]),i},[e,n,t])}(),p=(0,a.useCallback)((e,t)=>{let n=i(s,e,!0);if(n)return{...n,category:t}},[i,s]),m=n.map(e=>({...e,category:ns.b.RECENTS})).filter(t=>!(0,nn.oG)(e,t)),f=(0,a.useCallback)(e=>{let t=e.map(([e,t])=>p(e,t));return eq()((0,eG.WI)([...m,...t]),eD.EG)},[m,p]),g=nT(),x=(0,a.useMemo)(()=>{if(g&&!["DESIGN_EDITOR_NO_AI","DESIGN_EDITOR_AI","DEV","VARIABLES_TABLE"].includes(l)){var e;let t=(e=ns.b.SUGGESTIONS,o.map(t=>({...t,category:e})));return eq()((0,eG.WI)([...m,...t]),eD.EG)}switch(l){case"DESIGN_EDITOR_AI":return f(c());case"DEV":return f(nj);case"VARIABLES_TABLE":return f(nk);case"DESIGN_VIEWER":return f(nw);case"DESIGN_EDITOR_NO_AI":return f(u());case"NONE":return[];default:(0,O.xb)(l)}},[g,l,o,m,f,c,u]);return{suggestionMode:l,items:x}}(e,t,n),[o,c]=(0,a.useState)(l);return(0,a.useEffect)(()=>{(i!==s||0===o.items.length&&l.items.length>0||l.suggestionMode!==o.suggestionMode)&&c(l)},[i,s,o.items.length,o.suggestionMode,l]),o}(e,t,o),p=""!==n,m=(0,a.useMemo)(()=>""===n?[]:t.search(e,n).slice(0,25),[e,t,n]),f=function(e,t){let n=(0,eY.my)()===e9.nT.Design,i=(0,H.q5)(),l=(0,t8.V)(),o=(0,t7.s)(),d=!!(0,ep.kc)().prt_legacy_v3,[u,p]=(0,c.fp)(ty),m=(0,r.d4)(K.Eh),h=(0,Y.eH)(),f=(0,tb.T5)("useSearchFallbacks").unwrapOr(null),g=f?.name||i?.name;return(0,a.useMemo)(()=>""!==e?[{name:"ai-chat-prototype-query",args:{searchQuery:e},callback:()=>{},displayNode:(0,G.tx)("fullscreen_actions.assistant-chat-query",{query:(0,s.jsx)(eX.E,{color:"secondary",children:e})}),iconType:(0,s.jsx)(eU.C,{}),quickAction:{module:{module:(0,s.jsx)(tJ,{}),name:et.Sn.AI_CHAT_PROTOTYPE},beforeModuleOpen:e=>{c.zl.set(ty,{status:t_.Idle,messages:[]}),tv(e.searchQuery,u.messages,p,tf)}},disabled:!d},{name:"find-assets-and-community-matching",args:{searchQuery:e},callback:()=>{},displayNode:h?(0,G.tx)("fullscreen_actions.quick_actions.search-at-plan-file-and-community",{searchQuery:(0,s.jsx)(eX.E,{color:"secondary",children:(0,G.tx)("fullscreen_actions.quick_actions.quoted-query",{searchQuery:e})}),planFileName:g}):l?(0,G.tx)("fullscreen_actions.quick_actions.find-components-matching",{searchQuery:(0,s.jsx)(eX.E,{color:"secondary",children:e})}):(0,G.tx)("fullscreen_actions.quick_actions.find-assets-matching",{searchQuery:(0,s.jsx)(eX.E,{color:"secondary",children:e})}),iconType:h||l?(0,s.jsx)(eV.A,{}):(0,s.jsx)(eH.P,{}),quickAction:{module:{module:h?(0,s.jsx)(t4.z6,{}):(0,s.jsx)(t6.B,{}),name:et.Sn.ASSETS_TAB_DETAIL_VIEW},beforeModuleOpen:t=>{(0,$.ES)({type:"input-text",query:t.searchQuery,assetTypeOption:{type:W.IS.ALL},isKnownLibrary:o}),i?.key&&h&&l&&(0,U.Hl)({type:"input-text",value:e,file_key:i.key},U.G4.ACTIONS_LIST,void 0,void 0,void 0,!1)},retainSearchQuery:!0},disabled:!n||!i?.canEdit},{name:"find-extensions-matching",args:{searchQuery:e},displayNode:h?(0,G.tx)("fullscreen_actions.quick_actions.search-plugins-widgets",{searchQuery:(0,s.jsx)(eX.E,{color:"secondary",children:(0,G.tx)("fullscreen_actions.quick_actions.quoted-query",{searchQuery:e})})}):(0,G.tx)("fullscreen_actions.quick_actions.find-extensions-matching",{searchQuery:(0,s.jsx)(eX.E,{color:"secondary",children:e})}),iconType:(0,s.jsx)(eK.x,{}),callback:()=>{t.setActiveTab(et.Jc.EXTENSIONS)},keepMenuOpen:!0,disabled:!n||!m}].filter(e=>!e.disabled):[],[e,l,n,i?.canEdit,i?.key,o,t,d,u,p,m,h,g])}(n,i);return p?eq()([...m.slice(0,4),...f,...m.slice(4)],eD.EG):u}(g,x,m,{setActiveTab:e}),y=(0,lm.X)(_),v=_.length,b=function(e){let t=nd()(nl()(e,e=>e.category),(e,t)=>({category:Object.values(ns.b).find(e=>t===e)||null,items:e})).sort((e,t)=>nu(e.category)-nu(t.category)),n=[],i=0;for(let{category:e,items:s}of t)n.push({category:e,items:s,globalIdxOfFirstItem:i}),i+=s.length;return n}(_);(0,er.iC)({activeTab:et.Jc.ALL,query:p,resultsCount:v}),(0,a.useEffect)(()=>{n===et.Jc.ALL&&i&&t({quickActionsSessionId:i,quickActionsQueryId:u.current,searchQuery:m,numSearchResults:v,currentSelection:l,module:n,moduleFilters:null,qaVersion:I.$L,searchQueryResults:y})},[t,n,i,m,v,l,y]);let{createMetrics:C}=(0,eF.Sk)();return(0,s.jsxs)(aO.B,{primary:!0,resultCount:v,children:[(0,s.jsx)(lN,{}),b.map(({category:e,items:t,globalIdxOfFirstItem:n})=>null!==e&&t.length>0&&b.length>1?(0,s.jsx)(aO.B.Section,{header:function(e){switch(e){case ns.b.RECENTS:return(0,G.t)("qa.category.recents");case ns.b.DESIGN_TOOLS:return(0,G.t)("qa.category.design_tools");case ns.b.RIFFING_AND_WRITING:return(0,G.t)("qa.category.riffing_and_writing");case ns.b.IMAGE_EDITING:return(0,G.t)("qa.category.image_editing");case ns.b.COLLABORATION_TOOLS:return(0,G.t)("qa.category.collaboration_tools");case ns.b.HANDOFF_TOOLS:return(0,G.t)("qa.category.handoff_tools");case ns.b.VIEWER_TOOLS:return(0,G.t)("qa.category.viewer_tools");case ns.b.SUGGESTIONS:return(0,G.t)("qa.category.suggestions");case ns.b.COMMON_SETTINGS:return(0,G.t)("qa.category.common_settings");case ns.b.ORGANIZE:return(0,G.t)("qa.category.organize");case ns.b.TEMPLATES_AND_DIAGRAMS:return(0,G.t)("qa.category.templates_and_diagrams");default:return(0,O.xb)(e)}}(e),children:t.map((e,t)=>(0,s.jsx)(lW,{item:e,searchQuery:m,createCommonMetrics:()=>({numSearchResults:v,qaVersion:I.$L,searchQuery:m,searchPosition:n+t,item:e,moduleFilters:null,...C()})},(0,eD.EG)(e)))},e):t.map((e,t)=>(0,s.jsx)(lW,{item:e,searchQuery:m,createCommonMetrics:()=>({numSearchResults:v,qaVersion:I.$L,searchQuery:m,searchPosition:n+t,item:e,moduleFilters:null,...C()})},(0,eD.EG)(e))))]})}var lX=n(801038),lY=n(783286),lZ=n(633065);function lJ({extensionFilter:e,setExtensionFilter:t,canViewWidgets:n}){let i=(0,eE.sZ)(),r=(0,lb.Cb)(),l=(0,a.useMemo)(()=>({[et.BY.ALL]:(0,G.t)("qa.filter.all"),[et.BY.PLUGINS]:(0,G.t)("qa.filter.plugins"),[et.BY.WIDGETS]:(0,G.t)("qa.filter.widgets"),[et.BY.FROM_ORG]:(0,G.t)("qa.filter.from_org_name",{org_name:i?.name||""}),[et.BY.DEVELOPMENT]:(0,G.t)("qa.filter.development")}),[i?.name]),o=(0,a.useMemo)(()=>{let e=!!i&&!r,t=lZ.y3(),s=[];return n&&s.push({type:"checkableOption",value:et.BY.ALL,text:l[et.BY.ALL]}),s.push({type:"checkableOption",value:et.BY.PLUGINS,text:l[et.BY.PLUGINS]}),n&&s.push({type:"checkableOption",value:et.BY.WIDGETS,text:l[et.BY.WIDGETS]}),(e||t)&&s.push({type:"separator"}),e&&s.push({type:"checkableOption",value:et.BY.FROM_ORG,text:l[et.BY.FROM_ORG]}),t&&s.push({type:"checkableOption",value:et.BY.DEVELOPMENT,text:l[et.BY.DEVELOPMENT]}),s},[i,r,n,l]);return(0,s.jsx)(ea.c0,{ariaLabel:(0,G.t)("qa.filter.aria_label"),buttonId:l$,displayAboveTarget:!1,id:l0,items:o,labelForSelectedItem:e=>l[e],menuId:lQ,onSelectedChange:t,placeholder:"Filter",recordingKey:l0,selected:e})}let lQ="extensions-filter-dropdown-menu",l$="extensions-filter-dropdown-button",l0="extensions-filter-dropdown";var l1=n(332942),l2=n(317582),l3=n(382629),l5=n(937119),l4=n(469645),l6=n(147046),l7=n(107224),l8=n(792028),l9=n(134245),oe=n(4232),ot=n(156134),on=n(408978),oi=n(51906);let os=e=>{(0,ot.j)({pluginID:e.plugin_id,widgetName:e.name,pluginVersionID:"",triggeredFrom:"quick-actions"})};var oa=n(5019);function or({augmentedExtension:e,isAccessibleIcon:t}){let{extension:n,publishedExtension:i}=e;if(!(0,eA.ZQ)(n))return(0,s.jsx)(eM.V,{"aria-hidden":t,plugin:n,className:B.s.colorIcon.w20.h20.m2.bRadius4.$});let a=i&&(0,eS.Ar)(i);return a&&a.redirect_icon_url?(0,s.jsx)(eM.V,{"aria-hidden":t,plugin:a,className:B.s.colorIcon.w20.h20.m2.bRadius4.$}):(0,s.jsx)(ex.B,{ariaHidden:t,svg:lV.A,className:B.s.colorIcon.w20.h20.m2.bRadius4.$,dataTestId:"qa2-dev-plugin-icon",autosize:!0})}var ol=n(744983),oo=n(136150),od=n(853943),oc=n(365120),ou=n(489175),op=n(241625),om=n(572857),oh=n(389348),of=n(991104),og=n(146299),ox=n(885043);let o_="EXTENSION_OPTIONS_DROPDOWN";function oy(e){let t=(0,s2.Um)();return(0,eA.ZQ)(e)?t?.type===o_&&t?.data.extensionId===e.plugin_id&&t?.data.localFileId===e.localFileId:t?.type===o_&&t?.data.extensionId===e.plugin_id&&t?.data.localFileId===null}function ov(e){let t=(0,r.wA)(),n=oy(e);return a.useCallback(i=>{if(n)t(l6.oB());else{let n=i.getBoundingClientRect();t(l6.j7({type:o_,data:{extensionId:e.plugin_id,localFileId:(0,eA.ZQ)(e)?e.localFileId:null,targetRect:n}}))}},[t,n,e])}function ob(e){let t=ov(e);return{text:"",shortcuts:[E.Hz],onAction:e=>{let n=e.target?.element;n&&t(n)}}}function oC({extension:e,active:t,isAccessibleButton:n,isHiddenFocusable:i,buttonRefSetter:r}){let l=ov(e),o=a.useCallback(e=>{e.stopPropagation(),l(e.currentTarget)},[l]),d=(0,s.jsx)(l_.c,{active:t,borderWidth:1,children:(0,s.jsx)(od.J,{})});return(0,s.jsx)("div",{className:"x78zum5 x1jl38hy x1n2onr6",children:n?(0,s.jsx)("button",{ref:r,"aria-label":(0,G.t)("qa.plugins_widget.more_options",{widget:e.name}),onClick:o,onPointerUp:ou.dG,"data-testid":"extension-options-button",...{0:{className:"x1md70p1 x1labf8s"},1:{className:"x1md70p1 x1labf8s xg01cxk x10l6tqk"}}[!!i<<0],children:d}):(0,s.jsx)(oc.S.div,{role:"button",tabIndex:0,onClick:o,onPointerUp:ou.dG,className:iG()(B.s.bgTransparent.h24.$),"data-testid":"extension-options-button",children:d})})}function oj(e){let{augmentedExtension:t}=e,{extension:n,publishedExtension:i,localPublishedExtension:a}=t,r=(0,s2.Um)(),o=(0,eA.ZQ)(n)?n:a,d=(0,l7.NV)(o,i,oh.k2.EDITOR),c=(0,l7.OX)(i),u=(0,l7.x2)(n,i),p=(0,l7.qu)(o),m=(0,ox.rH)(t),h=(0,l7.xZ)(t),f=(0,tR.TA)(),g=!!i&&!!f&&((0,op.Ro)(i,f)||(0,om.Dd)(i,f)),x=oy(n),_=(0,og.O)({extension:t,preloadImage:x});if(!x)return null;let y=[],v=[],b=!!i;!(0,eA.ZQ)(n)&&(b?(d&&g&&y.push(d),y.push({displayText:(0,G.t)("qa.extensions.view_details"),callback:_}),u&&g&&y.push(u),p&&g&&y.push(p),h&&g&&y.push(h),m&&v.push(m),c&&g&&v.push(c)):(0,ef.$D)(l.e.AI_FOR_PRODUCTION,Error("[Quick Actions] Published extension is missing publishedExtension from Redux state"),{extra:{extensionId:n.plugin_id,isWidget:(0,eA.k0)(n),types:Array.from(t.types).toString()}})),(0,eA.ZQ)(n)&&(d&&y.unshift(d),b&&u&&y.push(u),!n.error&&p&&y.push(p),m&&v.push(m),c&&v.push(c));let C=y.some(Boolean)&&v.some(Boolean)?{displayText:"",separator:!0}:null;return(0,s.jsx)(of.ms,{parentRect:r?.data.targetRect,lean:"left",minWidth:64,items:[...y,C,...v].filter(e=>!!e),dataTestId:"extensionOptionsDropdown",recordingKey:"extensionOptionsDropdown"})}function ok({augmentedExtension:e,isDropdownOpen:t=!1,submenuRef:n,onOptionsFauxFocusChanged:i,...r}){let{extension:l}=e,o=(0,eA.k0)(l)?(0,s.jsx)(eX.E,{color:"tertiary",fontSize:11,children:(0,G.tx)("qa.extensions.widget")}):(0,s.jsx)(eX.E,{color:"tertiary",fontSize:11,children:(0,G.tx)("qa.extensions.plugin")}),d=lF(e),c=(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(or,{isAccessibleIcon:r.isAccessibleExtensionRow,augmentedExtension:e}),(0,s.jsx)("div",{className:B.s.px8.$,style:e_.sx.add({maxWidth:d?"205px":"300px"}).$,children:(0,s.jsx)(lO.G,{text:l.name})}),(0,s.jsx)(on.lM,{augmentedExtension:e,submenuRef:n}),d&&(0,s.jsx)("div",{style:e_.sx.add({maxWidth:"110px"}).$,children:(0,s.jsx)(lz,{text:d.text,variant:d.variant})})]}),u=aO.B.Item.useIsActive(),[p,m]=a.useState(!1),h=a.useCallback(()=>{m(!0)},[]),f=a.useCallback(()=>{m(!1)},[]),g=(0,b.uJ)(),[x,_,y]=aO.B.Item.useAccessoryFocusState(u,!(0,es.Jj)(),i),v=x||_,C=a.useMemo(()=>!!u||!!r.isAccessibleExtensionRow&&(v||p||t),[u,t,v,p,r.isAccessibleExtensionRow]);return(0,s.jsxs)("div",{className:B.s.flex.itemsCenter.justifyBetween.wFull.$,onPointerEnter:h,onPointerLeave:f,children:[r.isAccessibleExtensionRow?(0,s.jsx)("button",{ref:r.primaryButtonRef,className:B.s.flex.itemsCenter.$,onClick:r.onPrimaryButtonClick,onFocus:r.onPrimaryButtonFocus,style:e_.sx.add({background:"transparent",flexGrow:1}).$,children:c}):(0,s.jsx)("div",{className:B.s.flex.itemsCenter.$,children:c}),(0,s.jsxs)("div",{children:[(C||g)&&(0,s.jsx)(oC,{...r.isAccessibleExtensionRow&&{isAccessibleButton:!0,isHiddenFocusable:g&&!C,buttonRefSetter:y},active:v||g&&t,extension:l}),!C&&(0,s.jsx)("span",{"aria-hidden":!0,children:o})]})]})}function ow({manifestError:e}){return(0,s.jsx)("div",{className:B.s.alignLeft.font11.lh16.pl32.$,children:(0,s.jsx)(eX.E,{color:"danger",children:e.displayText})})}function oE({extension:e}){return(0,s.jsx)(l5.R,{className:B.s.font11.alignLeft.colorTextSecondary.lh16.pl32.$,text:e.localFilePath.replace("/manifest.json","")})}function oT(e){return(0,s.jsx)(u.u,{label:"LocalExtensionItem",children:(0,s.jsx)(oS,{...e})})}function oS({augmentedExtension:e,submenuRef:t}){let{extension:n}=e,i=(0,r.wA)(),l=oy(n),o=(0,l7.Pt)(n.error?.type,n),{onAction:d,actionText:c}=function({manifestError:e,augmentedExtension:t,submenuRef:n}){let{close:i}=(0,S.cq)(),{extension:s}=t,r=(0,on.q8)(s),l=(0,on.U4)(s),o=(0,on.S3)({submenuIsShown:l,extension:s}),d=(0,oi.t)(s,r),c=oe.dR(s.plugin_id,"quick-actions"),u=(0,lM.Kp)(t),p=a.useCallback(()=>{(0,eA.k0)(s)?iF.l7.user("insert-widget",()=>os(s)):r&&n?o(n.current):c(),r||u(),d()&&i()},[s,r,n,o,c,u,d,i]);return e?{onAction:()=>e.action(),actionText:e.displayText}:{onAction:p,actionText:(0,G.t)("qa.extensions.run")}}({manifestError:o,augmentedExtension:e,submenuRef:t}),u=a.useCallback(()=>{if(l){i(l6.oB());return}d()},[l,d,i]),p=E.H5.LOCAL,m=(0,ol.D)({source:p,text:c,onAction:u,augmentedExtension:e}),h=ob(n),f=(0,b.Bd)(),g=(0,s.jsxs)(s.Fragment,{children:[!o&&(0,s.jsx)(oE,{extension:n}),o&&(0,s.jsx)(ow,{manifestError:o})]}),x=(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(on.Xq,{augmentedExtension:e}),(0,s.jsx)(oj,{augmentedExtension:e})]}),[_,y]=a.useState(!1),v=a.useCallback(e=>{y(e)},[]);return f?(0,s.jsx)(ol.p,{hasNestedButton:!0,primaryAction:_?h:m,children:(n,i,a)=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:B.s.flex.flexColumn.wFull.$,children:[(0,s.jsx)(ok,{augmentedExtension:e,isAccessibleExtensionRow:!0,isDropdownOpen:l,onOptionsFauxFocusChanged:v,onPrimaryButtonClick:i,onPrimaryButtonFocus:a,primaryButtonRef:n,submenuRef:t}),g]}),x]})}):(0,s.jsxs)(ol.p,{primaryAction:_?h:m,children:[(0,s.jsxs)("div",{className:B.s.flex.flexColumn.wFull.$,children:[(0,s.jsx)(ok,{augmentedExtension:e,onOptionsFauxFocusChanged:v,submenuRef:t}),g]}),x]})}function oI(e){return(0,s.jsx)(u.u,{label:"PublishedExtensionItem",children:(0,s.jsx)(oN,{...e})})}function oN({augmentedExtension:e,submenuRef:t}){let{extension:n,canRun:i,canRequest:l}=e,o=(0,r.wA)(),d=oy(n),{onAction:c,actionText:u}=(0,oa.m)({augmentedExtension:e,submenuRef:t}),p=E.H5.PUBLISHED,m=(0,ol.D)({source:p,text:u,onAction:()=>{if(d){o(l6.oB());return}c()},augmentedExtension:e}),[h,f]=a.useState(!1),g=a.useCallback(e=>{f(e)},[]),x=ob(n),_=(0,b.Bd)();if(!i&&!l)return null;let y=(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(on.Xq,{augmentedExtension:e}),(0,s.jsx)(oj,{augmentedExtension:e})]});return _?(0,s.jsx)(ol.p,{hasNestedButton:!0,primaryAction:h?x:m,children:(n,i,a)=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:B.s.flex.flexColumn.wFull.$,children:(0,s.jsx)(ok,{augmentedExtension:e,isAccessibleExtensionRow:!0,isDropdownOpen:d,onOptionsFauxFocusChanged:g,onPrimaryButtonClick:i,onPrimaryButtonFocus:a,primaryButtonRef:n,submenuRef:t})}),y]})}):(0,s.jsxs)(ol.p,{primaryAction:h?x:m,children:[(0,s.jsx)(ok,{augmentedExtension:e,onOptionsFauxFocusChanged:g,submenuRef:t}),y]})}function oA(e){let t=(0,r.wA)(),n=(0,j.QZ)(),i=(0,j.V2)();return lZ.y3()&&[et.BY.DEVELOPMENT,et.BY.ALL].includes(e)?[{itemKey:"newPlugin",text:(0,G.t)("whiteboard.inserts.plugin_development_options_new_plugin"),svg:eo.$,onAction:()=>{if(!i)return eI.R.instance.handleUpgrade(ey.Q7.MANAGE_EXTENSIONS);t(tO.Lo()),it.Y5.dispatch((0,tO.to)({type:l9.h,data:{resourceType:l8.bD.PLUGIN}}))}},n?{itemKey:"newWidget",text:(0,G.t)("whiteboard.inserts.widget_development_options_new_widget"),svg:eo.$,onAction:()=>{if(!i)return eI.R.instance.handleUpgrade(ey.Q7.MANAGE_EXTENSIONS);t(tO.Lo()),it.Y5.dispatch((0,tO.to)({type:l9.h,data:{resourceType:l8.bD.WIDGET}}))}}:null,{itemKey:"importFromManifest",text:(0,G.t)("whiteboard.inserts.development_options_import"),svg:el.R,onAction:()=>{if(!i)return eI.R.instance.handleUpgrade(ey.Q7.MANAGE_EXTENSIONS);t((0,l4.JZ)({resourceType:"unknown"}))}}].filter(l3.Vq):[]}function oL({itemKey:e,text:t,svg:n,onAction:i}){let a=(0,oo.OX)(),r=E.H5.ACTION,l=(0,ol.D)({source:r,onAction:t=>{let{target:n}=t;(0,eF.PV)({action:e,isAi:!1,module:et.Jc.EXTENSIONS,qaVersion:I.$L,rankingAlgorithm:(0,A.eg)(et.Jc.EXTENSIONS),searchPosition:n?.index??0,isPlugin:!1,numSearchResults:a.numResults,searchQuery:a.searchQuery,moduleFilters:a.moduleFilters}),i()},augmentedExtension:null});return(0,s.jsx)(ol.p,{primaryAction:l,children:(0,s.jsx)("div",{className:B.s.flex.itemsCenter.alignLeft.wFull.justifyBetween.$,children:(0,s.jsxs)("div",{className:B.s.flex.$,children:[(0,s.jsx)(n,{}),(0,s.jsx)("div",{className:B.s.ml8.$,children:t})]})})})}var oM=n(142914),oO=n(684742);let oR="button_with_faux_focus--button--4UzJZ",oP="button_with_faux_focus--icon--3ofHG",oD="button_with_faux_focus--buttonText--eXi6z",oF="button_with_faux_focus--buttonContent--QYGhy",oz="button_with_faux_focus--shortcut--XSTpu",oB="button_with_faux_focus--regularSize--PRZRN",oG="button_with_faux_focus--largeSize--KbVb-",oU="button_with_faux_focus--wideSize--vAeP3",oV="button_with_faux_focus--largeWideSize--7umaZ",oH="button_with_faux_focus--outlineStyle--HbkS5",oK="button_with_faux_focus--fauxFocus--ydUPp",oW="button_with_faux_focus--solidStyle--JXrgr",oq="button_with_faux_focus--primary--z-mFg button_with_faux_focus--solidStyle--JXrgr",oX="button_with_faux_focus--secondary--nFRZl button_with_faux_focus--outlineStyle--HbkS5",oY="button_with_faux_focus--destructive--mKBEK button_with_faux_focus--solidStyle--JXrgr",oZ="button_with_faux_focus--destructiveSecondary--Wtsn1 button_with_faux_focus--outlineStyle--HbkS5",oJ="button_with_faux_focus--signup--CPfrM button_with_faux_focus--solidStyle--JXrgr",oQ="button_with_faux_focus--link--qW4X-",o$="button_with_faux_focus--destructiveLink--xx-J5 button_with_faux_focus--link--qW4X-",o0=a.forwardRef(({active:e,children:t,size:n="regularSize",variant:a,...r},l)=>(0,s.jsx)(oO.E,{className:iG()({[oR]:!0,[i[a??"primary"]]:!0,[i[n]]:!0,[oK]:e}),...r,ref:l,children:(0,s.jsx)("span",{className:oD,children:(0,s.jsx)("span",{className:oF,children:t})})}));var o1=n(820579);function o2({action:e,children:t,dataTestId:n,variant:i}){let r=(0,a.useRef)(null),{active:l,target:o}=(0,sM.H)({ref:r,itemsPerRow:2}),d=(0,a.useMemo)(()=>({shortcuts:[{key:F.Uz.ENTER}],onAction:e}),[e]),{onClickCallback:c}=(0,sP.k)({primaryAction:d,active:l,actionLabel:!1,target:o});return(0,s.jsx)(o0,{ref:r,onClick:e=>{e.stopPropagation(),c()},htmlAttributes:{"data-testid":n},variant:i,active:l,children:t})}function o3({extension:e}){let t=(0,o1.R_)(e),n=(0,o1.JB)(e);return(0,s.jsxs)("div",{className:B.s.mx8.mb8.p8.bRadius8.flex.justifyBetween.gap4.colorBgInfo.$,"data-testid":"extension-invite-row",children:[(0,s.jsxs)("div",{className:B.s.flex.gap8.itemsCenter.font11.lh16.$,children:[(0,s.jsx)(oM.H8,{user:e.creator,size:oM.Pf.MEDIUM}),(0,s.jsx)(o1.e2,{resource:e})]}),(0,s.jsxs)("div",{className:B.s.flex.gap4.$,children:[(0,s.jsx)(o2,{action:n,dataTestId:"decline-invite-button",variant:"secondary",children:(0,s.jsx)(eX.E,{fontSize:11,children:(0,G.tx)("community.detail_view.decline")})}),(0,s.jsx)(o2,{action:t,dataTestId:"accept-invite-button",children:(0,s.jsx)(eX.E,{fontSize:11,children:(0,G.tx)("community.detail_view.accept")})})]})]})}function o5({invitedPlugins:e,invitedWidgets:t,selectedFilter:n}){let i=function({invitedPlugins:e,invitedWidgets:t,selectedFilter:n}){switch(n){case et.BY.PLUGINS:return e;case et.BY.WIDGETS:return t;case et.BY.ALL:case et.BY.DEVELOPMENT:return[...e,...t];case et.BY.FROM_ORG:return[];default:(0,O.xb)(n)}}({invitedPlugins:e,invitedWidgets:t,selectedFilter:n});return 0===i.length?null:(0,s.jsx)("div",{"data-testid":"extension-invite-section",className:B.s.flex.flexColumn.$,children:(0,s.jsx)(aO.B.Section,{header:(0,G.t)("community.detail_view.invitations"),children:i.map(e=>(0,s.jsx)(o3,{extension:e},e.id))})})}var o4=n(225686),o6=n(894087),o7=n(286138),o8=n(871973),o9=n(6507),de=n(693499);function dt({augmentedExtension:e}){let{extension:t,publishedExtension:n}=e,i=(0,eA.k0)(t)?(0,G.tx)("qa.extensions.widget"):(0,G.tx)("qa.extensions.plugin"),a=n?.unique_run_count??0,r=n?.like_count??0,l=n?(0,s.jsx)(o8.o,{publishedExtension:n,showTooltip:!1}):null,o=(0,o8.g)(n);return(0,s.jsx)("div",{className:B.s.flex.flexColumn.colorTextSecondary.textBodyMedium.$,children:(0,s.jsxs)("div",{className:B.s.flex.flexRow.$,children:[i,(0,s.jsx)(dn,{}),(0,s.jsx)(ex.B,{svg:o9.A,className:B.s.mx2.colorIconSecondary.$}),(0,s.jsx)("div",{className:B.s.ml2.$,children:(0,G.t)("qa.extensions.num_users",{numUsers:a,numUsersStr:(0,rn.$M)(a)})}),(0,s.jsx)(dn,{}),(0,s.jsx)(ex.B,{svg:de.A,className:B.s.colorIconSecondary.$,style:e_.sx.add({margin:"3px"}).$,"aria-hidden":"true"}),(0,s.jsx)(o7.E,{children:(0,G.t)("qa.extensions.num_likes_accessibility_label",{numLikes:r,numLikesStr:(0,rn.$M)(r)})}),(0,s.jsx)("div",{"aria-hidden":!0,className:B.s.ml2.$,children:(0,rn.$M)(r)}),o&&(0,s.jsx)(dn,{}),l]})})}function dn(){return(0,s.jsx)("div",{className:B.s.w1.hFull.mx6.$,style:e_.sx.add({backgroundColor:"var(--color-border-fs)"}).$,"data-testid":"divider"})}function di({augmentedExtension:e}){let{extension:t,canRun:n,canRequest:i}=e,[r,l]=a.useState(!1),o=(0,og.O)({extension:e,preloadImage:r}),d=E.H5.PUBLISHED_WITH_DETAILS,c=(0,ol.D)({source:d,text:(0,G.t)("qa.extensions.view_details"),onAction:o,augmentedExtension:e});if(!n&&!i)return null;let u=(0,lR.G8)(t,o4.$J);return(0,s.jsx)(ol.p,{primaryAction:c,setActive:l,children:(0,s.jsxs)("div",{className:B.s.flex.flexColumn.alignLeft.wFull.$,children:[(0,s.jsxs)("div",{className:B.s.flex.itemsCenter.overflowHidden.$,children:[(0,s.jsx)(or,{augmentedExtension:e}),(0,s.jsx)(ds,{augmentedExtension:e})]}),(0,s.jsxs)("div",{className:B.s.flex.flexColumn.overflowHidden.ml32.$,children:[(0,s.jsx)(lO.G,{text:u,className:B.s.mb4.colorTextSecondary.textBodyMedium.$,showTooltip:o6.i.NEVER}),(0,s.jsx)(dt,{augmentedExtension:e})]})]})})}function ds({augmentedExtension:e}){let{extension:t}=e,n=lF(e);return(0,s.jsxs)("div",{className:B.s.flex.itemsCenter.ml8.$,children:[(0,s.jsx)("div",{className:B.s.pr8.colorText.textBodyLarge.$,style:e_.sx.add({maxWidth:n?"205px":"300px"}).$,children:(0,s.jsx)(lO.G,{text:t.name})}),n&&(0,s.jsx)("div",{style:e_.sx.add({maxWidth:"110px"}).$,children:(0,s.jsx)(lz,{text:n.text,variant:n.variant})})]})}function da({augmentedExtensions:e,header:t,showExtensionDetails:n=!1,dataTestId:i}){let r=e.map(e=>{let t=a.createRef(),{key:i}=e;return(0,T.JT)(e)?(0,s.jsx)(oT,{augmentedExtension:e,submenuRef:t},i):n?(0,s.jsx)(di,{augmentedExtension:e},i):(0,s.jsx)(oI,{augmentedExtension:e,submenuRef:t},i)});return(0,s.jsxs)("div",{"data-testid":i,className:B.s.flex.flexColumn.$,children:[t&&(0,s.jsx)(aO.B.Section,{header:t,children:r}),!t&&r]})}function dr({actions:e}){return 0===e.length?null:(0,s.jsx)("div",{"data-testid":"extension-actions-section",className:B.s.flex.flexColumn.$,children:e.map(({itemKey:e,...t})=>(0,s.jsx)(oL,{itemKey:e,...t},e))})}function dl({extensions:e}){let t=(0,a.useMemo)(()=>[...e].sort(T.bL),[e]);return 0===t.length?null:(0,s.jsx)(da,{augmentedExtensions:t,dataTestId:"my-extensions-section"})}function dd(){let e=(0,j.QZ)();return(0,s.jsx)("div",{className:B.s.flex.wFull.mt16.justifyCenter.alignCenter.colorTextSecondary.$,"data-testid":"no-extensions-found",children:e?(0,G.tx)("qa.no_plugins_widgets_found"):(0,G.tx)("qa.no_plugins")})}function dc({availableExtensions:e,selectedFilter:t}){let n=(0,A.Ev)(),i=(0,c.md)(w.Lk),l=(0,c.md)(w.dd),o=(0,c.md)(w.Rt),d=(0,c.md)(w.Q8),u=(0,r.d4)(eN.l),p=(0,j.f6)(),m=(0,j.wW)(),{loaded:h,extensions:f}=function(e){let t=(0,T.Oy)(),{loaded:n,extensions:i}=(0,l2.s)(),s=i.map(e=>t(e,E.Ag.COMMUNITY));return{loaded:n,extensions:(0,T.ZM)([...e,...s])}}(e),{myExtensions:g,suggestedExtensions:x,otherExtensionsFromOrg:_}=function(e,t){let n=(0,T.vA)(t),i=[],s=[],a=[];e.filter(e=>e.canRun||e.canRequest).filter(e=>n(e)).forEach(e=>{(0,T.wj)(e)?i.push(e):t===et.BY.FROM_ORG&&(0,T.jb)(e)||t!==et.BY.FROM_ORG&&(0,T.Nf)(e)?s.push(e):t===et.BY.FROM_ORG&&a.push(e)});let r=0,l=e=>{let t=[];for(let n of e){if(r>=25)break;t.push(n),r+=1}return t};return{myExtensions:l(i),suggestedExtensions:l(s),otherExtensionsFromOrg:l(a)}}(f,t),y=oA(t),v=g.length+x.length+_.length+y.length,b=t===et.BY.DEVELOPMENT,C=t===et.BY.FROM_ORG,k=h||C||b,S=function({myExtensions:e,suggestedExtensions:t,otherExtensionsFromOrg:n,extensionActions:i}){let s=(0,A.HD)("My Extensions",e),a=(0,A.HD)("Suggested",t),r=(0,A.HD)("Other Extensions from Org",n),l=(0,A.NH)(i);return(0,A.i6)([s,a,r,l])}({myExtensions:g,suggestedExtensions:x,otherExtensionsFromOrg:_,extensionActions:y});return((0,a.useEffect)(()=>{i===et.Jc.EXTENSIONS&&l&&k&&n({quickActionsSessionId:l,quickActionsQueryId:o,searchQuery:"",numSearchResults:v,currentSelection:u,module:i,moduleFilters:t,qaVersion:I.$L,searchQueryResults:S})},[n,i,l,k,o,v,u,t,S]),(0,er.iC)({activeTab:et.Jc.EXTENSIONS,query:d,resultsCount:v}),0===v)?(0,s.jsx)(dd,{}):(0,s.jsx)(oo.M6,{numResults:v,moduleFilters:t,children:(0,s.jsxs)(aO.B,{primary:!0,resultCount:v,dataTestId:"browseExtensions",children:[(0,s.jsx)(o5,{invitedPlugins:p,invitedWidgets:m,selectedFilter:t}),(0,s.jsx)(dl,{extensions:g}),(0,s.jsx)(dr,{actions:y}),(0,s.jsx)(du,{extensions:x,hasLoaded:k}),C&&(0,s.jsx)(dp,{extensions:_})]})})}function du({extensions:e,hasLoaded:t}){return t?0===e.length?null:(0,s.jsx)(da,{augmentedExtensions:e,header:(0,G.t)("qa.suggested"),showExtensionDetails:!0}):(0,s.jsx)("div",{className:B.s.p8.$,children:(0,s.jsx)(l1.R,{})})}function dp({extensions:e}){let t=(0,eE.sZ)();return t&&0!==e.length?(0,s.jsx)(da,{augmentedExtensions:e,header:(0,G.t)("qa.other_extensions_from_org",{org_name:t.name}),showExtensionDetails:!0}):null}var dm=n(738180),dh=n.n(dm),df=n(666875),dg=n(977745),dx=n(833805),d_=n(655363),dy=n(596224),dv=n(887555),db=n(685031),dC=n(511920),dj=n(292168),dk=n(755893),dw=n(222195),dE=n(893393),dT=n(150156),dS=n(621971);let dI=dE.M4.Query({fetch:async e=>(await dS.$W.getExtensions(e)).data.meta,enabled:()=>!(0,ep.kc)().ext_extended_plugin_editor_types,output:({data:e})=>({public:e.results.public.map(e=>e.model),private:e.results.private.map(e=>e.model)})}),dN=dE.M4.Query({fetch:async e=>{let t={...e,limit_associations:!0,sort_by:dv.e.Search.RELEVANCY,resource_type:[dj.vt.PLUGIN,dj.vt.WIDGET],include_content:!0,consolidate_org_search:!0};return(await dS.$W.getResources({...t,caller:dC.z.EDITOR_COMMUNITY_VIEW})).data.meta},enabled:()=>!!(0,ep.kc)().ext_extended_plugin_editor_types,output:({data:e})=>{let{pass:t,fail:n}=(0,d_.j)(e.results,e=>(0,dy.Gk)(e.model));return{public:n.map(({model:e})=>e.content?.plugin||e.content?.widget).filter(e=>!!e),private:t.map(({model:e})=>e.content?.plugin||e.content?.widget).filter(e=>!!e)}}});function dA(){return(0,s.jsx)("div",{className:"x78zum5 xh8yej3 xw7yly9 xl56j7k x2b8uid x1n0bwc9",children:(0,G.t)("search.error.max_query_length_exceeded")})}function dL({availableExtensions:e,selectedFilter:t}){let n=(0,A.Ev)(),i=(0,c.md)(w.Lk),o=(0,c.md)(w.dd),d=(0,c.md)(w.Q8),[u]=(0,df.A)(d,300),p=u.trim(),m=(0,c.md)(w.Rt),h=(0,r.d4)(eN.l),f=(0,r.wA)(),{loading:g,publicExtensions:x,privateExtensions:_,localExtensions:y}=function(e){let{status:t,results:n,errors:i}=function(e){let t=function(e){switch(e){case e9.nT.Design:case e9.nT.Illustration:return db.k.Editors.FIGMA;case e9.nT.Whiteboard:return db.k.Editors.FIGJAM;case e9.nT.DevHandoff:return db.k.Editors.DEV_MODE;case e9.nT.Slides:return db.k.Editors.SLIDES;case e9.nT.Sites:return(0,ep.kc)().ext_extended_plugin_editor_types?db.k.Editors.SITES:db.k.Editors.ALL;case e9.nT.Cooper:return(0,ep.kc)().ext_extended_plugin_editor_types?db.k.Editors.COOPER:db.k.Editors.ALL;case null:case e9.nT.Figmake:return db.k.Editors.ALL;default:(0,O.xb)(e)}}((0,eY.my)());(0,ep.kc)().ext_design_plugins_in_sites&&t===db.k.Editors.SITES&&(t=db.k.Editors.FIGMA);let n=(0,lb.U5)(),i=(0,eE.dq)()??void 0,[{status:s,data:a,errors:r}]=(0,dx.IT)((0,ep.kc)().ext_extended_plugin_editor_types?dN({query:e.trim(),resourceEditorType:(0,dk.So)(t),orgId:n?i:void 0,maxNumResults:20}):dI({query:e.trim(),editorType:t,orgSearch:n,currentOrgId:i,maxNumResults:20}),{enabled:e.trim().length>0&&!(0,T.GX)(e.trim()),key:"searchPublishedExtensionsQuery"});return{status:s,results:a||{public:[],private:[]},errors:r}}(e),s=function(e){let t=(0,j.$1)(),n=(0,a.useMemo)(()=>Object.values(t),[t]),i=(0,a.useMemo)(()=>new dT.Ef(n,dw.Ih),[n]);return(0,a.useMemo)(()=>i.search(e),[i,e])}(e);return(0,a.useMemo)(()=>{switch(t){case"loading":return{loading:!0,privateExtensions:[],publicExtensions:[],localExtensions:[]};case"loaded":return{loading:!1,publicExtensions:n.public,privateExtensions:n.private,localExtensions:s};case"disabled":return{loading:!1,privateExtensions:[],publicExtensions:[],localExtensions:[]};case"errors":return(0,ef.$D)(l.e.EXTENSIBILITY_ECOSYSTEM,Error("[useSearchExtensions] Unable to fetch search results"),{tags:{status:t},extra:{errors:i}}),{loading:!1,privateExtensions:[],publicExtensions:[],localExtensions:[]};default:(0,O.xb)(t)}},[n?.private,n?.public,s,t,i])}(p),v=function(e,t){let n=oA(t),i=(0,a.useMemo)(()=>new dT.Ef(n,dw.zd),[n]);return(0,a.useMemo)(()=>i.search(e),[i,e])}(p,t);(0,a.useEffect)(()=>{let e=[...x,..._];0!==e.length&&f(dg.Qi({publishedPlugins:e,src:"Quick actions"}))},[f,_,x]);let{myExtensions:b,fromOrgExtensions:C,communityExtensions:k}=dR(function({publicExtensions:e,privateExtensions:t,localExtensions:n}){let i=(0,T.Oy)();return(0,a.useMemo)(()=>{let s=(e,t)=>e.map(e=>(0,eS.Ar)(e)).filter(e=>!!e).map(e=>i(e,t)),a=s(e,E.Ag.COMMUNITY),r=s(t,E.Ag.ORG_PRIVATE);return[...n.map(e=>i(e,E.Ag.LOCAL)),...r,...a]},[i,n,t,e])}({publicExtensions:x,privateExtensions:_,localExtensions:y}),e,t),S=b.length+C.length+k.length+v.length,N=function({myExtensions:e,actionItems:t,fromOrgExtensions:n,communityExtensions:i}){let s=(0,A.HD)("My Extensions",e),a=(0,A.NH)(t),r=(0,A.HD)("From Org",n),l=(0,A.HD)("From Community",i);return(0,A.i6)([s,a,r,l])}({myExtensions:b,actionItems:v,fromOrgExtensions:C,communityExtensions:k});return((0,a.useEffect)(()=>{i===et.Jc.EXTENSIONS&&o&&!g&&n({quickActionsSessionId:o,quickActionsQueryId:m,searchQuery:p,numSearchResults:S,currentSelection:h,module:i,moduleFilters:t,qaVersion:I.$L,searchQueryResults:N})},[h,n,i,S,o,m,t,g,N,p]),(0,er.iC)({activeTab:et.Jc.EXTENSIONS,isLoading:g,passthroughErrorMessage:(0,T.GX)(p)?(0,G.t)("search.error.max_query_length_exceeded"):null,query:d,resultsCount:S}),g)?(0,s.jsx)(l1.R,{}):(0,T.GX)(p)?(0,s.jsx)(dA,{}):0===S?(0,s.jsx)(dd,{}):(0,s.jsx)(oo.M6,{numResults:S,moduleFilters:t,children:(0,s.jsxs)(aO.B,{primary:!0,resultCount:S,children:[(0,s.jsx)(dl,{extensions:b}),(0,s.jsx)(dr,{actions:v}),(0,s.jsx)(dM,{extensions:C}),(0,s.jsx)(dO,{extensions:k})]})})}function dM({extensions:e}){let t=(0,eE.sZ)();if(!t||0===e.length)return null;let[n,i]=dh()(e,e=>e.types.has(E.Ag.ORG_SAVED)),a=[...n,...i];return(0,s.jsx)(da,{augmentedExtensions:a,header:(0,G.t)("qa.from_org_name",{org_name:t.name}),showExtensionDetails:!0,dataTestId:"from-org-extensions-section"})}function dO({extensions:e}){return 0===e.length?null:(0,s.jsx)(da,{augmentedExtensions:e,header:(0,G.t)("qa.from_community"),showExtensionDetails:!0,dataTestId:"community-extensions-section"})}let dR=(e,t,n)=>{let i=(0,T.vA)(n),s=(0,a.useMemo)(()=>new Set(e.map(e=>e.key)),[e]),r=(0,a.useMemo)(()=>{let n=[...e,...t];return(0,T.ZM)(n)},[t,e]),l=[],o=[],d=[];return r.filter(e=>e.canRun||e.canRequest).filter(e=>i(e)).filter(e=>s.has(e.key)).forEach(e=>{(0,T.wj)(e)?l.push(e):(0,T.C5)(e)?o.push(e):(0,T.Nf)(e)&&d.push(e)}),{myExtensions:l,fromOrgExtensions:o,communityExtensions:d}};function dP({hasLoadedExtensions:e,extensions:t,selectedFilter:n}){let i=(0,c.md)(w.Q8),a=(0,w.JB)(),r=(0,c.AY)(lY.t);return((0,y.h)(()=>()=>{a(),r()}),e)?i.trim()?(0,s.jsx)(dL,{availableExtensions:t,selectedFilter:n}):(0,s.jsx)(dc,{availableExtensions:t,selectedFilter:n}):(0,s.jsx)(l1.R,{})}var dD=n(742782);function dF(){!function(){let e=(0,c.md)(w.IH),t=(0,c.md)(Q.f),{autoClose:n}=(0,S.cq)(),i=(0,a.useCallback)(()=>{let e=J.D.getState();e.modalShown||e.dropdownShown||e.pickerShown||n()},[n]);!function({ref:e,handler:t,eventType:n="mousedown",eventOptions:i,recordingKey:s,enabled:r}){let l=(0,a.useCallback)(n=>{if(!(n.target instanceof Node))return;let i=n.target;i&&i.isConnected&&e&&(Array.isArray(e)?e.filter(e=>!!(e&&e.current)).every(e=>e.current&&!e.current.contains(i)):e.current&&!e.current.contains(i))&&t(n)},[e,t]),o=(0,P.rf)(s,n,l);(0,a.useEffect)(()=>{if(e&&r)return window.addEventListener(n,o,i),()=>{window.removeEventListener(n,o,i)}},[e,n,l,o,i,r])}({ref:(0,a.useMemo)(()=>[e,t],[e,t]),handler:()=>setTimeout(i,0),eventType:"mousedown",eventOptions:!0,recordingKey:"click-to-dismiss",enabled:!0})}();let{defaultViewTabsAvailable:e,defaultViewAssetsTabVisible:t}=(0,g.gB)(),[n,i]=(0,c.fp)(w.Q8),l=(0,c.Xr)(w.Rt),[o,d]=(0,c.fp)(lY.t),[u,p]=(0,c.fp)(w.Lk),{loaded:m,extensions:h}=(0,c.md)(w.P_),f=(0,r.wA)();a.useEffect(()=>f(V.aq()),[f]);let x=(0,H.q5)(),_=!!(e&&x?.canEdit),y=(0,t7.s)(),v=(0,t8.V)(),C=(0,Y.eH)();(0,X.b)({disabled:!_});let k=u===et.Jc.ASSETS,{debouncedAssetSearch:E,clearAssetSearchAndCancelDebounce:T}=(0,$.TC)({debounceWait:300}),{debouncedFragmentTextSearch:I,clearFragmentSearchAndCancelDebounce:N}=(0,dD.S)({debounceWait:300,entryPoint:U.G4.ACTIONS_ASSETS_TAB}),{debouncedFragmentTextSearch:M,clearFragmentSearchAndCancelDebounce:z}=(0,dD.S)({debounceWait:300,entryPoint:U.G4.ACTIONS_ASSETS_TAB,isCommunity:!0}),es=a.useCallback(e=>{i(e),l((0,D.g)()),(0,A.lw)(),_&&(k||0===e.length)&&(E(e,{type:W.IS.ALL}),v&&I(e),C&&M(e))},[i,l,E,I,_,k,v,C,M]),el=a.useCallback(()=>{i(""),_&&(T(),v&&N(),C&&z())},[i,_,T,N,v,C,z]),eo=a.useCallback(e=>{p(e),(0,A.lw)()},[p]),ed=a.useCallback(()=>{(0,t4.mX)(n,()=>eo(et.Jc.ASSETS),v,C,y,U.G4.ACTIONS_ASSETS_TAB)},[n,eo,v,C,y]),ec=a.useRef(null),eu=(0,lX.U)(v),ep=(0,r.d4)(K.Eh),em=(0,j.QZ)();a.useEffect(()=>{em||o!==et.BY.ALL&&o!==et.BY.WIDGETS||d(et.BY.PLUGINS)},[em,o,d]);let eh=(0,b.U)(),ef=(0,b.Bd)(),eg=(0,b.n0)(ef&&eh);(0,L.If)(eg);let ex=a.useId(),e_=a.useId(),ey=a.useId(),ev=(0,s.jsxs)(ea.fu,{value:u,onChange:R.lQ,numItems:ep?3:2,children:[(0,s.jsx)(ea.oz,{tabId:et.Jc.ALL,tabPanelId:ef?ex:void 0,onAction:()=>eo(et.Jc.ALL),navigatingShortcut:{key:F.Uz.KEY_1,modifier:[F.xH.ALT]},shouldHaveAccessibleAttributes:ef,children:(0,G.tx)("qa.all")}),t&&(0,s.jsx)(ea.oz,{tabId:et.Jc.ASSETS,tabPanelId:ef?e_:void 0,onAction:ed,navigatingShortcut:{key:F.Uz.KEY_2,modifier:[F.xH.ALT]},shouldHaveAccessibleAttributes:ef,children:(0,G.tx)("qa.assets")}),ep&&(0,s.jsx)(ea.oz,{tabId:et.Jc.EXTENSIONS,tabPanelId:ef?ey:void 0,onAction:()=>eo(et.Jc.EXTENSIONS),navigatingShortcut:{key:F.Uz.KEY_3,modifier:[F.xH.ALT]},shouldHaveAccessibleAttributes:ef,children:em?(0,G.tx)("qa.plugins_widgets"):(0,G.tx)("qa.plugins")})]}),eb=a.useCallback(e=>{(C||v)&&(0,t4.jk)(e)},[v,C]),eC=(0,ee._M)({action:Z.JT.FIND_INSPIRATION,clientLifecycleId:void 0}),ej=C||v?(0,s.jsx)("div",{className:B.s.flex.$,children:(0,s.jsx)(t4.hc,{entryPoint:U.G4.ACTIONS_ASSETS_TAB,aiTrackingContext:eC,recordingKey:(0,P.Pt)("defaultView","visualSearchIconButton")})}):void 0,ek=u===et.Jc.EXTENSIONS,ew=(0,c.Xr)(q.FX),eE=a.useId();return(0,s.jsx)(ei.n,{canShrinkIfNeeded:ef,height:Z.wC,recordingKey:"defaultView",shouldWrapContentsInTabLoop:eg,children:(0,s.jsxs)(er.Do,{children:[(0,s.jsx)(dz,{ref:ec,descriptorId:eE,endEnhancer:ej,hasAccessibleImprovements:ef,isAssetsTabActive:k,isUsingRealFocus:eg,onClear:el,onPaste:eb,onSearchChange:es,placeholder:eu,searchQuery:n}),ef&&(0,s.jsx)(er.mr,{id:eE}),(_||ek)&&(0,s.jsx)("div",{className:B.s.px8.pb8.$,children:(0,s.jsxs)(en.b,{primary:!1,gap:8,fullWidth:!0,justify:"space-between",children:[_&&ev,ek&&(0,s.jsx)(lJ,{extensionFilter:o,setExtensionFilter:d,canViewWidgets:em})]})}),function(){switch(u){case et.Jc.ALL:return ew(!0),(0,s.jsx)(ei.n.Body,{id:ef?ex:void 0,isTabPanel:!0,children:(0,s.jsx)(lq,{setActiveTab:eo})});case et.Jc.ASSETS:return(0,s.jsx)(ei.n.Body,{id:ef?e_:void 0,isTabPanel:!0,children:(0,s.jsx)(t6.t,{searchHandle:ec})});case et.Jc.EXTENSIONS:return(0,s.jsx)(ei.n.Body,{id:ef?ey:void 0,isTabPanel:!0,children:(0,s.jsx)(dP,{extensions:h,hasLoadedExtensions:m,selectedFilter:o})});default:return(0,O.xb)(u)}}()]})})}let dz=a.forwardRef(({descriptorId:e,endEnhancer:t,hasAccessibleImprovements:n,isAssetsTabActive:i,isUsingRealFocus:r,onClear:l,onPaste:o,onSearchChange:d,placeholder:c,searchQuery:u},p)=>{let m=(0,z.bh)({isDefaultFocusItem:!0}),h=a.useCallback(()=>{m?.()},[m]);return(0,s.jsx)(es.vj,{ref:p,searchQuery:u,onSearchChange:d,onClear:l,onEnter:r?h:void 0,onPaste:o,endEnhancer:t,placeholder:n&&u||!i?void 0:c,descriptorId:n?e:void 0})});function dB(){let{current:e}=(0,S.cq)(),t=(0,w.jh)();return((0,y.h)(()=>()=>{t()}),e)?(0,s.jsx)(s.Fragment,{children:e.module}):(0,s.jsx)(dF,{})}let dG=(e,t)=>{let n=(0,N.x)();(0,A.F$)(n)&&(0,A.Mq)({...t,qaVersion:I.$L,quickActionsSessionId:e,timeToShowModal:_.sn.tryStop(I.mP)||0,module:n})};function dU(){!function(){let e=(0,c.Xr)(w.P_),t=(0,j.FG)(),n=(0,j.AR)(),{loaded:i,userPlugins:s,userWidgets:r,orgPlugins:l,orgWidgets:o}=(0,j.q3)(),d=(0,j.ll)(),u=(0,j.U6)(),p=(0,k.h)("plugin"),m=(0,k.h)("widget"),h=(0,j.$1)(),f=(0,T.Oy)(),g=(0,a.useMemo)(()=>[{extensions:t,extensionType:E.Ag.RECENT},{extensions:n,extensionType:E.Ag.RECENT},{extensions:Object.values(s),extensionType:E.Ag.USER_SAVED},{extensions:Object.values(r),extensionType:E.Ag.USER_SAVED},{extensions:Object.values(l),extensionType:E.Ag.ORG_SAVED},{extensions:Object.values(o),extensionType:E.Ag.ORG_SAVED},{extensions:Object.values(d),extensionType:E.Ag.ALLOWLIST},{extensions:Object.values(u),extensionType:E.Ag.ALLOWLIST},{extensions:p,extensionType:E.Ag.ORG_PRIVATE},{extensions:m,extensionType:E.Ag.ORG_PRIVATE},{extensions:Object.values(h),extensionType:E.Ag.LOCAL}],[t,n,s,r,l,o,d,u,p,m,h]),x=(0,a.useMemo)(()=>{let e=i?g.map(({extensions:e,extensionType:t})=>e.map(e=>f(e,t))).flat():[];return(0,T.ZM)(e)},[g,f,i]);(0,a.useEffect)(()=>{i&&x&&e({loaded:i,extensions:x})},[i,x,e])}();let e=(0,c.Xr)(w.Bu),t=(0,c.md)(w.rE),n=(0,c.md)(w.dd);(0,y.h)(()=>(e(!0),n&&dG(n,t||void 0),()=>{e(!1)}));let i=(0,c.md)(v.Kh),[r,l]=a.useState(!1),{close:o}=(0,S.cq)();return(0,a.useEffect)(()=>{dV(i)&&l(!0),r&&!dV(i)&&i!==d.NLJ.IMAGE_LASSO&&o()},[o,i,r]),(0,s.jsx)(C.s,{children:(0,s.jsx)(b.xQ,{children:(0,s.jsx)(L.s3,{name:"quickActions",recordingKey:"quickActions",children:(0,s.jsx)(M.p,{children:(0,s.jsx)(dB,{})})})})})}function dV(e){return e===d.NLJ.SELECT}var dH=n(249586),dK=n(236311),dW=n(827956);function dq(e){let t=(0,eh.A)(x.KY,e.timeoutMs),n=(0,x.el)(),[i,r]=a.useState(!1),l=a.useRef(null);return a.useEffect(()=>(i?t.cancel():t(),()=>{t.cancel()}),[t,i]),(0,a.useEffect)(()=>{n&&(t.cancel(),t())},[n,t]),(0,s.jsx)("div",{ref:l,onPointerEnter:()=>{r(!0)},onPointerLeave:()=>{r(!1)},children:e.children})}function dX(){let e=J.D.getState(),t=(0,eN.l)(e),n=e.openFile?.key??"",i=(0,dH.v5)(e.selectedView,null),r=(0,nR.F)(),l=[...lc(),...r],o=eB(),u=nS(o,l),p=(0,x.el)(),m=p?u.list(o).find(e=>e.action===p.action):null,f=m?.action,g=m?(0,eD.ah)(m):null,_=(0,eD.J8)(m?.action,p?.payload),y=(0,eD.Hr)(m?.action),v=(0,a.useCallback)(()=>{f&&(it.Y5.triggerAction(f,p?.payload),(0,x.KY)())},[f,p?.payload]),b=(0,c.md)(w.dd),C=(0,A.vI)(),j=(0,h.PE)();(0,dW.K)();let k=(0,a.useMemo)(()=>({action:f,source:"toast",toastType:p?.payload?.source,quickActionsSessionId:b,currentSelection:t,qaVersion:I.$L,fileKey:n,productType:i,role:C,hasAiFeatureAccess:j}),[f,b,t,n,i,C,j,p?.payload?.source]),E=(0,a.useRef)(k),T=(0,x.w_)(p);(0,a.useEffect)(()=>{E.current=k},[k]),(0,a.useEffect)(()=>{f&&T&&(0,iH.sx)(I.Sq,E.current,{forwardToDatadog:!0})},[f,T]),(0,ew.f4)(e=>{p?.guid&&!e.mirror.sceneGraphSelection[p.guid]&&(0,x.KY)()});let S=(0,a.useCallback)(()=>{if(!m)return;let e=m?.action,t=[Z.JT.MAGIC_LINK,Z.JT.FIND_INSPIRATION].includes(e);f===Z.JT.CONTENT_FILL&&d.CT8?.dismissContentFillNudge(),(0,x.KY)({dismissedAction:t?e:void 0})},[m,f]);if(!T)return null;if(!m)return console.warn("No menu item found for suggested action."),null;let N=(0,rr.OR)(m);return(0,s.jsx)(L.s3,{name:"quickActions",recordingKey:"quickActions",children:(0,s.jsx)(M.p,{children:(0,s.jsx)(ei.n,{children:(0,s.jsx)(dq,{timeoutMs:1e4,children:(0,s.jsx)(dK.y,{onDismiss:S,recordingKey:"SuggestionToast",children:(0,s.jsxs)(en.B,{justify:"space-between",align:"center",fullWidth:!0,children:[(0,s.jsxs)(en.B,{gap:4,align:"center",children:[(0,s.jsx)("span",{style:{"--color-icon":"var(--color-icon-brand)"},children:y}),(0,s.jsxs)(en.B,{align:"center",children:[(0,s.jsx)("span",{className:B.s.textBodyMediumStrong.$,children:(0,s.jsx)(eX.E,{color:"brand",children:_})}),(0,eF.BB)(m)&&(0,s.jsx)(rr.yi,{helpUrlVariant:N})]})]}),(0,s.jsx)(tD.r,{variant:"secondary",shortcuts:[{key:F.Uz.ENTER,modifier:[F.xH.META]}],onAction:()=>{v(),f&&(0,A.mi)({...E.current,isAi:!0})},recordingKey:"SuggestionToast",children:g})]})})})})})})}var dY=n(622345);function dZ(){let e=(0,la.XV)(),t=(0,la.hk)(),n=(0,la.sF)();return e?(0,s.jsx)(L.s3,{name:"quickActions",recordingKey:"quickActions",children:(0,s.jsx)(M.p,{children:(0,s.jsx)(ei.n,{children:(0,s.jsx)(dK.y,{onDismiss:t,recordingKey:"VideoToast",children:(()=>{switch(e.status){case"success":return(0,s.jsxs)(en.B,{justify:"space-between",align:"center",fullWidth:!0,children:[(0,s.jsxs)(en.B,{gap:4,align:"center",children:[(0,s.jsx)("span",{className:"x2lah0s",children:(0,s.jsx)(eU.C,{})}),(0,s.jsx)("span",{className:"xxrns5j x1q8tae1 x1vg90ec x1eab18d x1yyillh",children:(0,G.tx)("video_ai.make_video.success",{prompt:e.prompt})})]}),(0,s.jsx)(tD.r,{shortcuts:[{key:F.Uz.ENTER,modifier:[F.xH.META]}],onAction:n,recordingKey:"VideoToast",children:(0,G.tx)("video_ai.make_video.insert")})]});case"error":return(0,s.jsxs)(en.B,{gap:4,align:"center",children:[(0,s.jsx)("span",{className:"x2lah0s",children:(0,s.jsx)(dY.C,{style:{"--color-icon":"var(--color-icon-danger)"}})}),(0,s.jsx)("span",{className:"xxrns5j x1q8tae1 x1vg90ec x1eab18d x1yyillh",children:(0,G.tx)("video_ai.make_video.error",{prompt:e.prompt})})]});default:return null}})()})})})}):null}function dJ(e){return(0,s.jsx)(u.u,{label:"QuickActionsV2",children:(0,s.jsx)(dQ,{...e})})}function dQ(e){let t=(0,r.wA)(),n=(0,f.I)(),i=(0,h.PE)();return((0,a.useEffect)(()=>{d.glU?.handleHasDesignAIPermissionChange()},[i]),n)?(0,s.jsx)(p.tH,{boundaryKey:"QuickActionsV2",onError:()=>{t(m.F.enqueue({message:"Unable to open quick actions",type:"react-error"}))},team:l.e.AI_FOR_PRODUCTION,fallback:p.H4.NONE_I_KNOW_WHAT_IM_DOING,children:(0,s.jsx)(o.i,{children:(0,s.jsx)(g.QT,{value:(0,g.Ct)(e),children:(0,s.jsx)(d$,{})})})}):null}function d$(){let e=(0,c.md)(w.Bu),t=(0,x.el)(),n=(0,la.XV)();return e?(0,s.jsx)(dU,{}):t?(0,s.jsx)(dX,{}):n?(0,s.jsx)(dZ,{}):null}},120640:(e,t,n)=>{n.d(t,{Ct:()=>s,QT:()=>r,gB:()=>l});var i=n(716976);function s(e={}){return{defaultViewTabsAvailable:e.defaultViewTabsAvailable??!1,defaultViewAssetsTabVisible:e.defaultViewAssetsTabVisible??!1,centeredInPanels:e.centeredInPanels??!1}}let a=(0,i.createContext)(s()),r=a.Provider;function l(){return(0,i.useContext)(a)}},780712:(e,t,n)=>{n.d(t,{p:()=>I});var i=n(104076),s=n(716976),a=n(812714),r=n(795033),l=n(511570),o=n.n(l),d=n(983500),c=n(265149),u=n(581133),p=n(278491),m=n(188264),h=n(345477),f=n(141330),g=n(170956),x=n(946847),_=n(120640),y=n(831214),v=n(775659),b=n(889422),C=n(233420),j=n(240787),k=n(164760),w=n(404343),E=n(769209);let T=(0,d.jz)(w.j4N);function S(e){let t=s.useRef(null),n=(0,r.Xr)(C.fq),l=(0,c.wY)(t),{centeredInPanels:d}=(0,_.gB)();(0,s.useEffect)(()=>(l?.height&&n(l.height),()=>{n(0)}),[l,n]);let g=function(){let[e]=(0,r.fp)(u.f),t=e?.current?.getBoundingClientRect(),n=!!(t&&t.height>0),i=(0,h.xn)(),l=(0,h.Yk)(),o=(0,y.L)(),d=(0,v.G)(),c=(0,b.ze)();return(0,s.useMemo)(()=>(0,a.kc)().figjam_quick_actions_v2&&!o&&(!n||c)?{bottom:l+(c&&d?0:8)}:n?{bottom:T+i+(t?.height||0)+8}:null,[i,n,t?.height,l,o,d,c])}(),[x,j]=(0,m.d)(),w=(0,s.useMemo)(()=>d?{left:x-j}:null,[d,x,j]),E={bottom:f.VQ};return(0,i.jsx)("div",{ref:t,style:{...E,...g,left:0,...w},className:o()(k.tT,p.Dm),"data-testid":"quick-actions-v2",children:(0,i.jsx)(N,{children:e.children})})}function I(e){return(0,i.jsx)(S,{children:e.children})}function N(e){let t=s.useRef(null),n=(0,r.Xr)(C.IH),{current:a}=(0,g.cq)();(0,s.useEffect)(()=>(t.current&&n(t),()=>{n(null)}),[n]);let l=(0,j.o)(),d=a&&x.wL.includes(a.name);return(0,i.jsx)("div",{ref:t,style:{maxWidth:E.X,minWidth:d?void 0:l},className:o()(k.N8,p.Dm),"data-cancel-insertable-resource-drag-and-drop":"true",children:e.children})}},911277:(e,t,n)=>{n.d(t,{$:()=>w,J:()=>E});var i=n(104076),s=n(716976),a=n(772197),r=n(951002),l=n(360677),o=n(980852),d=n(795033),c=n(192075),u=n(138421),p=n(178623),m=n(296081),h=n(141330),f=n(290407),g=n(170956),x=n(523625),_=n(233420),y=n(854708),v=n(325164),b=n(198038),C=n(645259),j=n(661331);let k=({texts:e,authInfo:t,surroundingContext:n})=>p.Ay.shared.adjustText({texts:e,action:{type:"SHORTEN"},jsonMode:e.length>1,surroundingContext:n},t),w=async({params:e,abortController:t,onTasksUpdate:n,clientLifecycleId:i})=>{let{featureType:s}=e,a=(0,m.i2)(),r={targets:(0,u.on)(a,{allowEmpty:!1,excludeDigitsAndSpecialChar:!1,excludeLockedNodes:!0}),parameters:null,selection:o.getActiveTSSceneGraph().getCurrentPage()?.directlySelectedNodes??[],activeNodes:a};d.zl.set(_.DZ,null),d.zl.set(_.F3,r),d.zl.set(_.Q8,""),await (0,j.GD)({params:{clientLifecycleId:i,state:r,makeCortexRequest:k,featureType:s,excludeDigitsAndSpecialChar:!1,editScopeLabel:"adjust-text"},abortController:t,onTasksUpdate:n})};function E(){let{close:e}=(0,g.cq)(),{longRunningAction:t,lastParameters:n,onRun:o,cancel:d,resetText:u,lastRun:p}=(0,j.Hd)({makeCortexRequest:k,featureType:h.JT.SHORTEN_TEXT}),{state:m,aiTrackingContext:_,tasks:w}=t,E=(0,s.useCallback)(()=>{u(),(0,f.B3)(h.JT.SHORTEN_TEXT),e()},[u,e]),T=w.length,S=w.filter(e=>e.state===f.z8.FAILED).length;switch(m){case f.qy.INITIAL:return(0,i.jsx)(v.AE,{action:h.JT.SHORTEN_TEXT,actionIcon:(0,i.jsx)(l.R,{}),actionLabel:(0,c.tx)("fullscreen_actions.quick_actions.shorten-text"),onPerform:()=>{o(null)},aiTrackingContext:_,getCustomDisabledTextFromSelectedNodes:e=>(0,j.bu)(e,{onlyAllowSingular:!0,instruction:(0,c.tx)("ai_text_tools.select_text_singular")}),instructionAction:{type:"learn_more",url:h.pY},children:(0,c.tx)("ai_text_tools.select_text_singular")});case f.qy.RUNNING:return(0,i.jsx)(C.F,{onCancel:()=>{d(),e()},aiTrackingContext:_,children:(0,c.tx)("ai_text_tools.shorten.running")});case f.qy.ERROR:let I;let{error:N}=t,A=[{type:y.f.TRY_AGAIN,callback:()=>o(n)}],L=null;return(N instanceof j.Vz||(0,a.determineErrorReason)(N)===a.ErrorReason.CONTENT_LENGTH_LIMIT)&&(I=(0,c.tx)("ai.error.content_length_limit"),A=[]),N instanceof j.Jd&&(I=(0,c.tx)("ai_text_tools.missing_fonts"),A=[]),(0,a.determineErrorReason)(N)===a.ErrorReason.UNSAFE_OR_HARMFUL_CONTENT&&(A=[]),T>0&&S>0&&S<T&&(L=(0,c.tx)("ai_text_tools.shorten.couldnt_count",{failed:S,total:T})),(0,i.jsx)(y.E,{buttons:A,error:t.error,aiTrackingContext:_,customMessage:I,secondaryMessage:L});case f.qy.DONE:return(0,i.jsx)(b.Oq,{recordingKey:"shortenText",iterateOptions:[{type:b.is.UNDO,callback:E},{type:b.is.TRY_AGAIN,callback:()=>{o(n)}}],aiTrackingContext:{..._,iteration_view_type:x.$J.SUCCESS_WITH_ITERATION},targets:p?p.targets.map(e=>e.node.guid):void 0});case f.qy.CANCELLED:return null;default:(0,r.xb)(m)}}},609762:(e,t,n)=>{n.d(t,{K:()=>A});var i=n(104076),s=n(716976),a=n(772197),r=n(951002),l=n(716438),o=n(192075),d=n(607804),c=n(819851),u=n(178623),p=n(141330),m=n(242498),h=n(290407),f=n(170956),g=n(523625),x=n(854708),_=n(325164),y=n(198038),v=n(645259),b=n(221586),C=n(236631),j=n(836734),k=n(798811),w=n(360110),E=n(881968),T=n(83068);function S({items:e,onSelectItem:t,placeholder:n,showIcon:a=!0}){(0,k.If)(!1);let[r,l]=s.useState(""),[o,d]=s.useState([]);s.useEffect(()=>{d(e),l("")},[e]);let c=(0,i.jsx)(w.B,{resultCount:o.length,children:o.map(e=>(0,i.jsx)(w.B.Item,{primaryAction:{onAction:()=>t(e),shortcuts:[{key:b.Uz.ENTER}]},actionLabel:!1,recordingKey:e.label,children:(0,i.jsx)("div",{className:C.s.flex.justifyBetween.wFull.$,children:(0,i.jsx)("div",{className:C.s.ml28.$,children:e.label})})},e.label))}),u=t=>{l(t),d(e.filter(e=>e.label.toLowerCase().includes(t.toLowerCase())))},m=(0,j.Bd)();return(0,i.jsxs)(E.n,{height:p.wC,canShrinkIfNeeded:m,recordingKey:"parameterLikeList",children:[(0,i.jsx)(T.DM,{searchQuery:r,onSearchChange:u,onClear:()=>{u("")},placeholder:n,showIcon:a}),(0,i.jsx)(E.n.Body,{children:c})]})}var I=n(661331);let N=["Arabic","Urdu"];function A(){let e=(0,c.ow)(),t=[{name:"Arabic",label:(0,o.t)("ai_text_tools.translate.language.arabic")},{name:"Chinese (Simplified)",label:(0,o.t)("ai_text_tools.translate.language.chinese_simplified")},{name:"Chinese (Traditional)",label:(0,o.t)("ai_text_tools.translate.language.chinese_traditional")},{name:"Dutch",label:(0,o.t)("ai_text_tools.translate.language.dutch")},{name:"English (United Kingdom)",label:(0,o.t)("ai_text_tools.translate.language.english_uk")},{name:"English (United States)",label:(0,o.t)("ai_text_tools.translate.language.english_us")},{name:"Tagalog",label:(0,o.t)("ai_text_tools.translate.language.tagalog")},{name:"French",label:(0,o.t)("ai_text_tools.translate.language.french")},{name:"German",label:(0,o.t)("ai_text_tools.translate.language.german")},{name:"Hindi",label:(0,o.t)("ai_text_tools.translate.language.hindi")},{name:"Indonesian",label:(0,o.t)("ai_text_tools.translate.language.indonesian")},{name:"Italian",label:(0,o.t)("ai_text_tools.translate.language.italian")},{name:"Japanese",label:(0,o.t)("ai_text_tools.translate.language.japanese")},{name:"Korean",label:(0,o.t)("ai_text_tools.translate.language.korean")},{name:"Malay",label:(0,o.t)("ai_text_tools.translate.language.malay")},{name:"Polish",label:(0,o.t)("ai_text_tools.translate.language.polish")},{name:"Portuguese (Brazil)",label:(0,o.t)("ai_text_tools.translate.language.portuguese_brazil")},{name:"Portuguese (Portugal)",label:(0,o.t)("ai_text_tools.translate.language.portuguese_portugal")},{name:"Russian",label:(0,o.t)("ai_text_tools.translate.language.russian")},{name:"Spanish (Latin America)",label:(0,o.t)("ai_text_tools.translate.language.spanish_latin_america")},{name:"Spanish (Spain)",label:(0,o.t)("ai_text_tools.translate.language.spanish_spain")},{name:"Swedish",label:(0,o.t)("ai_text_tools.translate.language.swedish")},{name:"Tamil",label:(0,o.t)("ai_text_tools.translate.language.tamil")},{name:"Thai",label:(0,o.t)("ai_text_tools.translate.language.thai")},{name:"Turkish",label:(0,o.t)("ai_text_tools.translate.language.turkish")},{name:"Ukrainian",label:(0,o.t)("ai_text_tools.translate.language.ukrainian")},{name:"Urdu",label:(0,o.t)("ai_text_tools.translate.language.urdu")},{name:"Vietnamese",label:(0,o.t)("ai_text_tools.translate.language.vietnamese")}];e&&(t=t.filter(e=>!N.includes(e.name)));let n=(0,o.t)("ai_text_tools.translate.running"),b=s.useRef(null),{onRun:C,resetText:j,cancel:k,longRunningAction:w,lastRun:E}=(0,I.Hd)({makeCortexRequest:({texts:e,parameters:t,authInfo:n,surroundingContext:i})=>u.Ay.shared.adjustText({texts:e,action:{type:"TRANSLATE",language:t.language},jsonMode:e.length>1,surroundingContext:i},n),featureType:p.JT.TRANSLATE_TEXT}),{state:T,aiTrackingContext:A,tasks:L}=w,{close:M}=(0,f.cq)(),O=(0,m.s)(p.JT.TRANSLATE_TEXT),R=L.length,P=L.filter(e=>e.state===h.z8.FAILED).length,D=(0,d.to)();switch(T){case h.qy.RUNNING:return(0,i.jsx)(v.F,{onCancel:()=>{k(),M()},aiTrackingContext:A,children:n});case h.qy.INITIAL:switch(O.state){case m.w.NEEDS_INITIAL_SELECTION:case m.w.SELECTION_LOST:return(0,i.jsx)(_.AE,{action:p.JT.TRANSLATE_TEXT,actionLabel:(0,o.tx)("fullscreen_actions.quick_actions.translate-text"),actionIcon:(0,i.jsx)(l.c,{}),onPerform:()=>O.confirmInitialSelection(),getCustomDisabledTextFromSelectedNodes:e=>(0,I.bu)(e,{}),aiTrackingContext:A,instructionAction:{type:"learn_more",url:p.pY},children:(0,o.tx)("ai_text_tools.selection_instruction")});case m.w.SELECTION_OK:return(0,i.jsx)(S,{items:t,onSelectItem:e=>{let t={language:e.name};C(t),b.current=t},placeholder:(0,o.t)("ai_text_tools.translate.language"),showIcon:!D})}case h.qy.ERROR:let F;let{error:z}=w,B=null,G=[{type:x.f.TRY_AGAIN,callback:()=>{if(b.current)C(b.current);else throw new I.ay("Last parameters is null")}}];return(z instanceof I.Vz||(0,a.determineErrorReason)(z)===a.ErrorReason.CONTENT_LENGTH_LIMIT)&&(F=(0,o.tx)("ai.error.content_length_limit"),G=[]),z instanceof I.Jd&&(F=(0,o.tx)("ai_text_tools.missing_fonts"),G=[]),(0,a.determineErrorReason)(z)===a.ErrorReason.UNSAFE_OR_HARMFUL_CONTENT&&(G=[]),R>0&&P>0&&P<R&&(B=(0,o.tx)("ai_text_tools.translate.couldnt_count",{failed:P,total:R})),(0,i.jsx)(x.E,{buttons:G,error:w.error,aiTrackingContext:A,customMessage:F,secondaryMessage:B});case h.qy.DONE:return(0,i.jsx)(y.Oq,{iterateOptions:[{type:y.is.UNDO,callback:()=>{j(),M()}}],recordingKey:"translateText",aiTrackingContext:{...A,iteration_view_type:g.$J.DEFAULT_SUCCESS},targets:E?E.targets.map(e=>e.node.guid):[]});case h.qy.CANCELLED:return null;default:(0,r.xb)(T)}}},384851:(e,t,n)=>{n.d(t,{ce:()=>_,eb:()=>C,qi:()=>j,yh:()=>y,zs:()=>v});var i=n(716976),s=n(430301),a=n(382629),r=n(344424),l=n(812714),o=n(408825),d=n(316520),c=n.n(d),u=n(931114),p=n(246144),m=n(752062),h=n(835307),f=n(415567);let g=o.z.object({description:o.z.string(),wasOutputOfPreviousGeneration:o.z.boolean().optional()});o.z.object({prompt:o.z.string(),attachmentMetadata:o.z.record(o.z.string(),g).optional()});let x=`User has also attached the following frames (represented as JSX) and their corresponding images, components used here can be referenced in the output:
`;function _(e){let t={};for(let n of(0,r.B)(e,{followInstances:!0})){let e=(0,s.getComponentInfoById)(n.guid,{enableTsArrays:!!(0,l.kc)().first_draft_ts_arrays,forDeprecatedFirstDraft:!0});if(!e){(0,p.xi)("first-draft","Component info not found for user-selected node",{componentGuid:n.guid},{reportAsSentryError:!0});continue}t[e.jsxName.toLowerCase()]=e}return t}async function y(e,t,n){let i=(await Promise.all(e.map(async e=>{var n;let i=await (0,m.nX)(e);if(!i)return(0,p.xi)("first-draft","Unable to get JSX for user-selected node",{nodeGuid:e.guid}),null;let s=t.get(e.guid);if(!s)return(0,p.xi)("first-draft","No image data found for user-selected node",{nodeGuid:e.guid}),null;let a=null;a=s.promise?await s.promise:s.blob;let r=await (n=a,new Promise((e,t)=>{let i=new FileReader;i.onloadend=()=>{let n=i.result;"string"==typeof n?e(n):t(Error("Failed to convert blob to Data URL"))},i.onerror=()=>{t(Error("Failed to read blob"))},i.readAsDataURL(n)}));return{guid:e.guid,jsxStr:i,imageUrl:r}}))).filter(a.Vq);return[{role:"system",content:x},{role:"user",content:c()(i.map(({guid:e,jsxStr:t,imageUrl:i},s)=>{let a=[{type:"text",text:`
ATTACHMENT #${s+1}:
`}];return n&&n[e]&&a.push({type:"text",text:`Description: ${[...n[e].wasOutputOfPreviousGeneration?["This was the output of a previous generation"]:[],n[e].description].join(" ")}
`}),t&&a.push({type:"text",text:`\`\`\`jsx
${t}
\`\`\`
`}),a.push({type:"image",image:i}),a}))}]}let v=URL.createObjectURL(new Blob(["data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="],{type:"image/gif"}));function b(e){return e.visible}function C(){let e=(0,i.useRef)(new Map),t=(0,f.Tv)();return(0,h.Fk)((t,n)=>{if(!n)return e.current=new Map,null;let i=n.map(e=>t.get(e)).filter(a.Vq).filter(b);return e.current=new Map(i.map(e=>[e.guid,e])),i.map(e=>e?.guid)},t),e.current}function j({enabled:e}){let[t,n]=i.useState(new Map),s=i.useRef(t);s.current=t;let a=i.useRef(!1),r=C();return i.useEffect(()=>{if(!e)return;let i=new Set(r.keys()),s=new Set(t.keys()),l=(0,u._i)(s,i);(0,u._i)(i,s).forEach(async e=>{let t=r.get(e);if(!t)return;let i=t.loadImagesAndExport([{imageType:"PNG"}]),s=(async()=>new Blob([await i],{type:"image/png"}))();n(t=>{let n=new Map(t);return n.set(e,{imageURL:null,blob:null,promise:s}),n});let l=await s;if(a.current)return;let o=URL.createObjectURL(l);n(t=>{let n=new Map(t);return n.set(e,{imageURL:o,blob:l,promise:null}),n})}),l.size>0&&n(e=>{let t=new Map(e);return l.forEach(e=>{if(!t.has(e))return;let n=t.get(e);n?.imageURL&&URL.revokeObjectURL(n.imageURL),t.delete(e)}),t})},[r,t,e]),i.useEffect(()=>()=>{a.current=!0,s.current.forEach(e=>{e.imageURL&&URL.revokeObjectURL(e.imageURL)})},[]),t}},994224:(e,t,n)=>{n.d(t,{YG:()=>v,sI:()=>y});var i=n(104076),s=n(716976),a=n(878178),r=n(812714),l=n(795033),o=n(511570),d=n.n(o),c=n(641518),u=n(236631),p=n(192075),m=n(597280),h=n(703477);let f=(0,l.E3)("first_draft_last_used_kit",""),g=(0,l.E3)("first_draft_reset_kit_for_byod",!0);function x(e){return"LOCAL"===e.dsKitKey.type?e.dsKitKey.pageId??"local":e.dsKitKey.key}function _({text:e}){return(0,i.jsxs)("div",{className:d()(u.s.flex.flexRow.$),children:[(0,i.jsx)(a.i,{style:{marginLeft:-2}})," ",(0,i.jsx)("span",{className:d()(u.s.pl4.$),children:e})]})}function y(e=!1){let{libraryKitsQueryStatus:t,localKits:n,libraryKits:i}=(0,m.Ml)(),[a,o]=(0,l.fp)(f),[d,c]=(0,l.fp)(g);d&&(0,r.kc)().first_draft_direct_gen&&(o(""),c(!1));let[u,p]=(0,s.useState)(null),h="loaded"===t;(0,s.useEffect)(()=>{if(h&&null===u){if(e){let e=n[0]??i[0]??null;e&&p({type:"KIT",kit:e})}else{let e=i[0]??n[0]??null;e&&p({type:"KIT",kit:e})}}},[n,i,h,u,p,e]);let _=(0,s.useMemo)(()=>[...i,...n],[i,n]),v=(0,s.useMemo)(()=>{let e=_.find(e=>x(e)===a);return h&&!e&&o(""),e??null},[a,_,o,h]);return{kitsAreLoaded:h,hasLastSelectedKit:h?!!v:!!a,selectedKit:v,setSelectedKit:s.useCallback(e=>{o(x(e))},[o]),selectedKitOption:u,setSelectedKitOption:p,allUsableKitEntries:_}}function v({items:e,kitsAreLoaded:t,selectedKitOption:n,setSelectedKitOption:s,recordingKey:a}){return(0,i.jsx)(h.m,{selected:n,onSelectedChange:s,placeholder:(0,i.jsx)(_,{text:t?(0,p.t)("first_draft.library_placeholder"):(0,p.t)("first_draft.kits_loading")}),labelForSelectedItem:e=>(0,i.jsx)(_,{text:e.kit.name}),displayAboveTarget:!0,lean:"right",items:e,recordingKey:c.Pt(a,"kitPicker"),disabled:!t})}},390178:(e,t,n)=>{n.d(t,{A:()=>l});var i=n(276800),s=n(539854),a=n(192075),r=n(58212);function l(e,t,n=(0,a.t)("first_draft.share_trace_nudge_in_modal",{weirdOutput:(0,a.t)("first_draft.share_trace_nudge_weird_output")})){e(r.F.enqueue({type:"FIRST_DRAFT_SHOW_TRACE",message:n,button:{text:(0,a.t)("first_draft.share_trace"),action:()=>{(0,s.j)(JSON.stringify(t,null,2),"trace.json")}},onDismiss:i.lQ,timeoutOverride:2e4,timeoutType:"exact"}))}},827956:(e,t,n)=>{n.d(t,{K:()=>p});var i=n(716976),s=n(237420),a=n(266808),r=n(328341),l=n(74620),o=n(76365),d=n(854284),c=n(141330),u=n(288971);function p(){let e=(0,s.d4)(o.vD),t=(0,r.ZC)(e),n=(0,l.p8)("activeUserAction"),p=(0,d.LC)();i.useEffect(()=>{(e!==t&&t||![a.QOV.DEFAULT,a.QOV.CLICKING_TO_CHANGE_SELECTION].includes(n))&&(0,u.KY)({actionToClear:c.JT.FIND_INSPIRATION})},[e,n,t,p])}},592948:(e,t,n)=>{n.d(t,{Aw:()=>a,IO:()=>u,Ik:()=>o,Lx:()=>l,Nv:()=>s,Y4:()=>r,cS:()=>c,jE:()=>d,nR:()=>i});let i=()=>Promise.resolve({}),s=()=>null,a=()=>null,r=()=>null,l=void 0,o=null,d=()=>null,c=()=>null,u=null},605862:(e,t,n)=>{n.d(t,{i7:()=>m});var i=n(104076),s=n(716976),a=n(997477),r=n(422872),l=n(905885),o=n(174730),d=n(143277),c=n(132078),u=n(441030);function p({dismissModal:e,targetKey:t}){let n=(0,a.bY)("make_edits_1p_description").getDynamicConfig();return n.value.description&&"string"==typeof n.value.description&&n.value.title&&"string"==typeof n.value.title?(0,i.jsxs)(c.NJ,{targetKey:t,dismissModal:e,width:300,topPadding:8,children:[(0,i.jsx)("div",{style:{marginBottom:"8px",fontWeight:600},children:n.value.title}),(0,i.jsx)("div",{style:{whiteSpace:"pre-line"},children:n.value.description})]}):null}function m(e,t){let n=(0,o.f)("seen_first_party_model_explanation"),[c]=(0,l.BZ)(),{show:m,isShowing:h,complete:f}=(0,r.e)({overlay:u.u36,priority:d.N.SECONDARY_MODAL});return s.useEffect(()=>{if(c){"first-party"===c.configurationKey&&!n&&e&&m();return}"first-party"===(0,a.gP)("make_edits_configuration").value.configurationKey&&!n&&e&&m()},[n,m,e,c]),{isShowingFirstPartyExplanation:h,completeFirstPartyExplanation:f,FirstPartyExplanationPointer:()=>h?(0,i.jsx)(p,{dismissModal:f,targetKey:t}):null}}},167037:(e,t,n)=>{n.d(t,{M:()=>f,f:()=>h});var i=n(584781),s=n(998653),a=n(392528),r=n(672328),l=n(346075),o=n(496023),d=n(224804),c=n(57106),u=n(328420),p=n(484009),m=n(609817);async function h(e){if(!e.hash)return null;let t=(0,m.tG)(),n=(0,i.nj)(e.hash);return await t.getAllVideoUrls(),t.getSignedUrls([n]).get(n)??null}async function f(e){let t=e.map(e=>new s.p({formats:[a.uS],source:new r.Ts(e)})),n=(await Promise.all(t.map(e=>Promise.all([e.getPrimaryVideoTrack(),e.getPrimaryAudioTrack()])))).filter(e=>!!e[0]&&!!e[1]),i=new l.Fl({codec:"avc",bitrate:o.m0}),m=new l.Ii({codec:"aac",bitrate:o.m0}),h=new d.k({format:new c.si,target:new u.Sn});h.addVideoTrack(i),h.addAudioTrack(m),await h.start();let f=0;for(let[e,t]of n){let n=new p.lc(e),s=new p.qw(t);for await(let e of n.samples())e.setTimestamp(e.timestamp+f),i.add(e);for await(let e of s.samples())e.setTimestamp(e.timestamp+f),m.add(e);f+=await e.computeDuration()}return(await h.finalize(),h.target.buffer)?new Uint8Array(h.target.buffer):null}},508504:(e,t,n)=>{n.d(t,{J:()=>O});var i=n(104076),s=n(716976),a=n(237420),r=n(419822),l=n(266808),o=n(812714),d=n(511570),c=n.n(d),u=n(166887),p=n(1188),m=n(192075),h=n(223837),f=n(692042);function g(e){let t=e.mirror.sceneGraph,n=e.mirror.sceneGraphSelection;if(1!==Object.keys(n).length)return null;let i=t.get(Object.keys(n)[0]);return i&&"MEDIA"===i.type?i:null}var x=n(221086),_=n(315125),y=n(354114),v=n(260495);let b=(0,_.m)(C);async function C(e){let t=await (0,x.OF)(()=>j(e),{times:10,interval:1e3});return await new Promise((n,i)=>{let s=new Image;s.crossOrigin="anonymous",s.addEventListener("load",n),s.addEventListener("error",t=>{i(t.type+" loading the image with hash "+e)}),s.src=t}),t}async function j(e){let t=(await (0,v.Mj)([e],await y.Y5.openFilePromise())).s3_urls[e];if(!t)throw Error("Couldn't resolve image URL from server");return t}var k=n(795033),w=n(681398),E=n(165681),T=n(278491),S=n(749484),I=n(185117);let N="rich_media_overlay--loadingFallback---qUKd",A="rich_media_overlay--croppedClipPath--BeUH-";function L(e,t){e&&(t?(e.play(),w.Ay.safari&&(e.currentTime=.1)):(0,E.sQ)(e)?e.pause():(w.Ay.safari&&e.currentTime>.1&&(e.currentTime-=.1),e.play()))}let M=(0,s.memo)(({nodeId:e,mediaHash:t,isMaximized:n,setIsMaximized:a})=>{(0,S.RJ)(t);let r=(0,u.am)(),[l,o]=(0,s.useState)(null),[d,p,m,h]=function(){let[e,t]=(0,s.useState)(!1),[n,i]=(0,s.useState)(null);return(0,s.useEffect)(()=>{if(n){let e=()=>t(!0),i=()=>t(!1);return n.addEventListener("mousemove",e),n.addEventListener("mouseleave",i),()=>{n.removeEventListener("mousemove",e),n.removeEventListener("mouseleave",i)}}},[n]),[n,i,e,t]}(),f=(0,s.useRef)(null),g=(0,s.useRef)(!1),x=(0,k.md)(I.vE),[_,y]=(0,s.useState)(!1),[v,b]=(0,s.useState)(!0),C=(0,s.useRef)(!1);(0,s.useEffect)(()=>{x&&r("figjam_video_started_playing",{mediaHash:t})},[r,t,x]),(0,s.useEffect)(()=>{!g.current&&d&&(g.current=!0,(0,S.mc)(f.current,d,t).then(e=>{f.current=e}))},[g,t,d]),(0,s.useEffect)(()=>{if(d)return e(),d.addEventListener("loadeddata",e),d.addEventListener("canplay",e),()=>{d.removeEventListener("loadeddata",e),d.removeEventListener("canplay",e)};function e(){d&&(2>(d.readyState||0)&&!C.current?b(!0):(C.current=!0,b(!1)))}},[d]),(0,s.useEffect)(()=>{r("figjam_video_selected",{mediaHash:t})},[r,t]);let j=(0,S.DD)(e),N=(0,S.ZU)(e),[M,O]=(0,k.fp)(I.H),{isVideoNodeHovered:R,pointerDownOnVideo:P}=M,D=(0,s.useCallback)((e,t)=>{O({isVideoNodeHovered:e,pointerDownOnVideo:t})},[O]);return(0,i.jsxs)("div",{className:"rich_media_overlay--videoContainer--oC3oc",ref:o,children:[(0,i.jsx)("div",{className:c()("rich_media_overlay--clippedVideo--JljnC",n?"rich_media_overlay--noClipPath--ZooJK":A),children:(0,i.jsx)("video",{ref:p,crossOrigin:"anonymous",autoPlay:x&&!w.Ay.safari,className:c()("rich_media_overlay--video--O6uP2",n&&T.s4,n&&"rich_media_overlay--maximizedVideoBg--FUhbn"),onMouseUp:function(){document.activeElement instanceof HTMLElement&&document.activeElement.blur()},controls:w.Ay.isIpad&&n,onClick:function(){n&&L(d,_)}})}),(0,i.jsx)(E._L,{didAutoplayOnSelection:x,hasEnded:_,isLoading:v,isMaximized:n,isVideoHovered:m,isVideoNodeHovered:R,mediaHash:t,pointerDownOnVideo:P,setHasEnded:y,setIsMaximized:a,setIsVideoHovered:h,setVideoControls:D,shouldHideControlBar:N,shouldHidePlaybackButton:j,toggleVideoPlayback:L,videoContainerElement:l,videoElement:d})]})}),O=s.memo(function(){let e=(0,a.d4)(g);return!e||!e.richMediaInfo||(0,o.kc)().video_in_canvas_figjam&&(0,o.kc)().figjam_canvas_migrate_video_nodes&&"VIDEO"===e.richMediaInfo.richMediaType?null:(0,i.jsx)(R,{nodeGuid:e.guid,mediaHash:e.richMediaInfo.mediaHash,mediaType:e.richMediaInfo.richMediaType},e.richMediaInfo.mediaHash)}),R=s.memo(function(e){let{nodeGuid:t,mediaHash:n,mediaType:a}=e,r=s.useRef(null),l=s.useRef(null),o=(0,f._X)({subscribeToUpdates_expensive:!0}),[d,u]=s.useState(!1);return s.useEffect(()=>{let e=(0,h.EE)("rich-media",[t],e=>{l.current=e.position,z(r,o,l,d)});return l.current=e.currentNodePosition[t]?.position||null,z(r,o,l,d),()=>{(0,h.lB)("rich-media")}},[t,o,d]),(0,i.jsx)("div",{ref:r,className:c()("rich_media_overlay--richMediaOverlay--G9rnR",{"rich_media_overlay--maximizedMediaPositioner--vewL5":d}),children:(0,i.jsx)(p.tH,{fallback:(0,i.jsx)(D,{mediaType:a,mediaHash:n}),boundaryKey:"Video",children:(0,i.jsxs)(s.Suspense,{fallback:(0,i.jsx)(P,{}),children:["ANIMATED_IMAGE"===a&&(0,i.jsx)(F,{mediaHash:n}),"VIDEO"===a&&(0,i.jsx)(M,{nodeId:t,mediaHash:n,setIsMaximized:u,isMaximized:d})]})})})});function P(){return(0,i.jsx)("div",{className:c()(N,A),children:(0,i.jsx)(r.k,{size:"lg"})})}function D({mediaHash:e,mediaType:t}){let n=(0,m.tx)("whiteboard.gif.failed_to_load");return"VIDEO"===t&&(n=(0,m.tx)("whiteboard.video.failed_to_load"),l.tHB?.isVideoBeingUploaded(e)&&(n=(0,m.tx)("whiteboard.video.still_uploading"))),(0,i.jsx)("div",{className:c()(N,A),children:(0,i.jsx)("div",{className:"rich_media_overlay--errorText--upGwm text--fontNeg16--JtecD text--_fontBase--QdLsd text--_negText--j9g-L",children:n})})}function F({mediaHash:e}){let t=b.useValue(e),n=(0,u.am)();return s.useEffect(()=>{n("figjam_gif_started_playing")},[n]),(0,i.jsx)("img",{crossOrigin:"anonymous",style:{height:"100%",backgroundColor:"white",width:"100%"},src:t,alt:"",className:A})}function z(e,t,n,i){if(!e.current||!t||!n.current)return;let s=e.current;if(i)s.style.position="fixed",s.style.height="auto",s.style.width="auto",s.style.transform="none",s.style.pointerEvents="all";else{let e=n.current,i=(0,f.Yb)(t,e);s.style.height=`${i.height}px`,s.style.width=`${i.width}px`,s.style.transform=`translate(${i.x+t.x}px, ${i.y+t.y}px) rotate(${e.angle}deg)`,s.style.transformOrigin="top left"}}},749484:(e,t,n)=>{n.d(t,{DD:()=>j,RJ:()=>x,ZU:()=>C,mc:()=>w});var i,s=n(716976),a=n(221086),r=n(980852),l=n(812714),o=n(776111),d=n(146283),c=n(315125),u=n(922214),p=n(354114),m=n(692042),h=n(835307),f=n(669436);let g=(0,c.m)(_,(i=(0,c.y)(6e4),(e,t)=>!t.deferred.result&&i(e,t)));function x(e){return g.useValue(e)}async function _(e){return await (0,a.OF)(()=>y(e),{times:20,interval:1e3})}async function y(e){let t=await v(e);if(!t)throw Error("Couldn't resolve video URL from server");return t}async function v(e){let t=await p.Y5.openFilePromise();if("figFile"!==t.type)throw Error("Unsupported file");try{let n=await f.S.getVideosDownload({fileKey:t.fileKey,hexHash:e});if(200!==n.status||n.data.error)throw Error("api error while resolving video");return n.data.meta.signed_url}catch(t){throw console.warn(`Couldn't download video with hash ${e}`),t}}let b=1/15;function C(e){let[t,n]=(0,s.useState)(!0),i=k(e),a=(0,m.qc)((0,m._X)({subscribeToUpdates_expensive:!1}));return(0,s.useEffect)(()=>{let e=0;i&&(e=i.x*i.y),n(e/(a.height*a.width)<b)},[i,a.height,a.width]),t}function j(e,{mediaPlayBadgeRadius:t=24}={}){let[n,i]=(0,s.useState)(!0),a=k(e),r=(0,m._X)({subscribeToUpdates_expensive:!1});return(0,s.useEffect)(()=>{a&&i(a.x*r.zoomScale<4*t||a.y*r.zoomScale<4*t)},[t,a,r.zoomScale]),n}function k(e){return(0,h.wA)((e,t)=>{let n=e.get(t);return n?n.size:null},e)}async function w(e,t,n,i,s,a=0){window.VIDEOJS_NO_DYNAMIC_STYLE=!0;let c=null;if(i&&(c=r.getActiveTSSceneGraph().get(i)?.videoPlayback),e)return e;t.style.height="100%",t.style.width="100%",t.style.display="flex",t.style.justifyContent="center",t.style.alignItems="center";let m=void 0!==t.volume?t.volume:1,h=(0,l.kc)().buzz_video_trimming,f=s?.startTimeMs??(h?c?.startTimeMs??0:0),g=s?.endTimeMs??(h?c?.endTimeMs??0:0),x=f/1e3,_=g>0?g/1e3:null,v=await (0,u.Fe)();return new Promise(e=>{let i=s=>{let r=v.videoJs(t,{muted:t.muted??!1,controls:!1,controlBar:!1,bigPlayButton:!1,loadingSpinner:!1,errorDisplay:!1,textTrackSettings:!1,textTrackDisplay:!1,nativeTextTracks:!1},async()=>{if((0,o.PN)()){r.src({type:"video/mp4",src:`https://static.figma.com/uploads/${n}`}),e(r);return}r.on("ready",()=>{r.volume(m),r.currentTime(x)}),r.on("timeupdate",()=>{let e=r.currentTime();null!==_&&void 0!==e&&e>=_&&(r.pause(),r.currentTime(_))});try{let t=await p.Y5.openFilePromise();if("figFile"!==t.type)throw Error("Unsupported file");let i=`/api/files/${t.fileKey}/videos/${n}/manifest`;await (0,u.uz)(i,!0,r),e(r)}catch(t){try{let t=await y(n);d.k.warn("Reverting to fallback video source"),await (0,u.uz)(t,!1,r),e(r)}catch(t){s<a?(r.dispose(),setTimeout(()=>{i(s+1)},500)):e(null)}}})};i(0)})}},274200:(e,t,n)=>{n.d(t,{kL:()=>eo,kF:()=>el,Fr:()=>eu});var i=n(104076),s=n(716976),a=n(237420),r=n(307829),l=n(684742),o=n(481710),d=n(390579),c=n(287211),u=n(188220),p=n(511570),m=n.n(p),h=n(219199),f=n(208882),g=n(11395),x=n(271761),_=n(980049),y=n(967782),v=n(192075),b=n(147046),C=n(366535),j=n(675477),k=n(244399),w=n(551037),E=n(835258),T=n(592726),S=n(490499),I=n(176203),N=n(349311),A=n(564941),L=n(956359),M=n(989034),O=n(980852),R=n(346886);function P(e){let t=(0,a.d4)(e=>e.mirror.appModel.pagesList),n=(0,a.d4)(e=>e.mirror.appModel.currentPage),s=(0,a.wA)();if(!t||t.length<=1)return null;let r=async e=>{await (0,O.getActiveTSSceneGraph)().setCurrentPageFromNodeAsync(e.nodeId)},l=t.map(e=>({displayText:e.name,disabled:!1,isChecked:n===e.nodeId,nodeId:e.nodeId}));return(0,i.jsx)(R.j,{dispatch:s,items:l,showPoint:!0,parentRect:e.dropdown.data.targetRect,onSelectItem:r,recordingKey:"pagesPicker"})}var D=n(951002),F=n(550012),z=n(170627);n(120440);var B=n(140490),G=n(193350),U=n(549571),V=n(218329),H=n(330378),K=n(819851),W=n(193460),q=n(687849),X=n(227665),Y=n(717648),Z=n(735924);let J=(0,B._)(s.memo(function(){let e=(0,a.d4)(e=>e.mirror.appModel.isReadOnly),t=(0,a.d4)(e=>e.selectedView),n=(0,K.m0)(),l=(0,a.d4)(e=>(0,U.tn)(e)),o=n&&!l,d=(0,X.g)(),c=(0,W.d)({debugMenuItems:d}),u=s.useMemo(()=>({isDesktopMenu:!1,isReadOnly:e,isSearching:!1,selectedView:t,isLimitedDevMode:o}),[e,t,o]);return 0===c.length?null:(0,i.jsx)(r.mc,{htmlAttributes:{"data-testid":"main-menu"},children:(0,i.jsx)(Q,{items:c,parentKey:"mainMenu",filterOptions:u})})}),"FigmaMainMenu");function Q({items:e,parentKey:t,filterOptions:n}){let a=s.useMemo(()=>{let t;let i=[],s=[];for(let a of e)if((0,Y.UN)(a,n)){if((0,V.k$)(a)){if(0===s.length)continue;i.push({items:s,title:t}),s=[],t=void 0}else if((0,V.gN)(a))t=a.name;else if((0,V.TV)(a)){if(!a.children||0===a.children.length||!a.children.some(e=>(0,Y.UN)(e,n)))continue;s.push(a)}else s.push(a)}return s.length>0&&i.push({items:s,title:t}),i},[e,n]);return(0,i.jsx)(i.Fragment,{children:a.map((e,s)=>(0,i.jsx)(r.YJ,{children:e.items.map((e,s)=>{let a;let r=(a="",(0,V.id)(e)?a=`jsx-element-${s}`:(0,V._o)(e)?a=e.recordingKey||e.action||e.name||`action-${s}`:(0,V.TV)(e)&&(a=e.childDropdown&&e.childDropdown.recordingKey||e.name),`${t}.${a}`);return(0,i.jsx)(ee,{item:e,itemKey:r,filterOptions:n},r)})},e.title||`menu-group-${s}`))})}function $(e){return e.displayText||(0,H.A)((0,V.Dz)(e),e.args)}function ee({item:e,itemKey:t,filterOptions:n}){return(0,V.id)(e)?(0,i.jsx)("div",{className:"x1nnhrsq",children:e.render()}):(0,V.TV)(e)?(0,i.jsxs)(r.g8,{children:[(0,i.jsx)(r.ZP,{recordingKey:t,children:$(e)}),(0,i.jsx)(r.MJ,{children:(0,i.jsx)(Q,{items:e.children,parentKey:t,filterOptions:n})})]}):(0,V._o)(e)?(0,i.jsx)(et,{item:e,itemKey:t}):void(0,D.xb)(e)}function et({item:e,itemKey:t}){let n=(0,a.wA)(),l=(0,a.d4)(t=>e.action&&(0,A.Yh)(t.mirror.appModel,e.action)),o=s.useCallback(t=>{let n=t.mirror.appModel.keyboardShortcuts;return(0,A.c1)(n,(0,V.Dz)(e))},[e]),d=(0,a.d4)(o),c=e.shortcutText||d,u="object"==typeof e.iconType?void 0:(0,Z.QU)(e.iconType),p=(0,V.Zj)(e),m=s.useCallback(t=>p&&(0,V.WJ)(t.mirror.appModel,e),[p,e]),h=(0,a.d4)(m),f=s.useCallback(t=>{z.l7.user(`fullscreen-menu-${e.action??"non-action"}`,()=>{if(e.callback&&e.callback((0,V.Dz)(e),e.args,n,t),e.action){let i=e.action;e.loadingIndicatorString?n(G.n.set({message:e.loadingIndicatorString,callback:()=>{q.VU.get(i,e.source??"menu",e.args)(t)}})):q.VU.get(i,e.source??"menu",e.args)(t)}})},[e,n]),g=s.useCallback((e,t)=>{f(t.event)},[f]),x=s.useCallback(e=>{f(e)},[f]);return p&&!u?(0,i.jsxs)(F.H_,{checked:h,"data-onboarding-key":e["data-onboarding-key"],disabled:e.disabled||!(e.name||l),onChange:g,recordingKey:t,children:[$(e),(0,i.jsxs)(r.Ov,{children:[e.rightIcon,c&&(0,i.jsx)(r.rm,{children:c}),e.rightText&&(0,i.jsx)(r.ME,{children:e.rightText})]})]}):(0,i.jsxs)(r.q7,{"data-onboarding-key":e["data-onboarding-key"],disabled:e.disabled||!(e.name||l),onClick:x,recordingKey:t,children:[u&&(0,i.jsx)(r.Q$,{children:u}),$(e),(0,i.jsxs)(r.Ov,{children:[e.rightIcon,c&&(0,i.jsx)(r.rm,{children:c}),e.rightText&&(0,i.jsx)(r.ME,{children:e.rightText})]})]})}var en=n(502756),ei=n(337726),es=n(947479),ea=n(254926),er=n(61813);let el="fullscreen_menu_visible",eo="fullscreen_menu_hidden",ed=[en.PH.type];function ec(){return"main-menu"}let eu=s.memo(function(e){return(0,S.o3)(S.nt.mainMenuFPLMigration)?(0,i.jsx)(ep,{...e}):(0,i.jsx)(em,{...e})}),ep=s.memo(function(e){let t=(0,a.wA)(),{getTriggerProps:n,manager:u}=r.b(),p=(0,x.b)(),_=(0,k.$D)(),b=!(0,T.iZ)(),S=(0,w.k)(),A=(0,g.Om)(),{modalShown:M,selectedView:O}=(0,c.R)(e=>({modalShown:e.modalShown,selectedView:e.selectedView})),R=M?.type,P=R&&ed.includes(R),D="fullscreen"===O.view&&O.editorType===I.nT.Whiteboard,F=u.isOpen;if(s.useEffect(()=>{F&&(t(j.jD()),P&&t(C.ES({type:R})))},[F,t,P,R]),s.useEffect(()=>{F?(0,y.YQ)({id:el}):(0,y.YQ)({id:eo})},[F]),(0,E.eM)())return(0,i.jsx)("div",{className:es.Z7,children:(0,i.jsx)(o.J,{})});let z=(0,i.jsxs)(l.E,{"aria-label":(0,v.t)("fullscreen_actions.main_menu"),className:m()(es.Yd,{[es.ET]:F}),"data-onboarding-key":ei.tO,"data-tooltip":ec(),"data-tooltip-offset-x":p?8:0,"data-tooltip-show-right":p,"data-tooltip-type":N.Ib.LOOKUP,recordingKey:"figmaIconButton",...b?{onClick:()=>{D?(t(f.Ts({origin:"logged_out_main_menu_toolbar",redirectUrl:h.Ay.location.pathname,signedUpFromOpenSession:_})),t(C.to({type:L.x,data:{headerText:(0,v.t)("fullscreen.toolbar.create_an_account_to_do_more_with_fig_jam")}}))):S&&A("LEFT_PANEL_FIGMA_LOGO")}}:n(),children:[(0,i.jsx)(o.J,{}),!e.hideChevron&&(0,i.jsx)(d.O,{className:es.xW})]},"toggle-menu-button");return b?z:(0,i.jsxs)(r.bL,{manager:u,children:[z,(0,i.jsx)(J,{})]})}),em=s.memo(function(e){let t=s.useRef(null),n=(0,a.wA)(),r=s.useMemo(()=>(0,u.g)(),[]),{dropdownShown:l,modalShown:d,user:p,selectedView:j}=(0,c.R)(e=>({dropdownShown:e.dropdownShown,modalShown:e.modalShown,user:e.user,selectedView:e.selectedView})),T=(0,k.$D)(),S=(0,w.k)(),O=(0,g.Om)();s.useEffect(()=>{(0,A.TY)(l)?(0,y.YQ)({id:el}):(0,y.YQ)({id:eo})},[l]);let R=s.useRef(null),D=(0,x.b)();return(0,E.eM)()?(0,i.jsx)("div",{className:es.Z7,children:(0,i.jsx)(o.J,{})}):(0,i.jsxs)(_.i,{ref:t,"aria-controls":r,"aria-expanded":(0,A.TY)(l),"aria-haspopup":"menu",ariaLabel:(0,v.t)("fullscreen_actions.main_menu"),chevronRef:R,className:m()(es.AQ,{[es.ET]:(0,A.TY)(l)}),"data-tooltip":ec(),"data-tooltip-offset-x":D?8:0,"data-tooltip-show-right":D,"data-tooltip-type":N.Ib.LOOKUP,fallbackSvg:er.A,id:"toggle-menu-button",isUI3:!0,onClick:()=>{let e=t.current;if(!p||p.appData&&p.appData.loggedOut){if(e){if("fullscreen"===j.view&&j.editorType===I.nT.Whiteboard)n(f.Ts({origin:"logged_out_main_menu_toolbar",redirectUrl:h.Ay.location.pathname,signedUpFromOpenSession:T})),n(C.to({type:L.x,data:{headerText:(0,v.t)("fullscreen.toolbar.create_an_account_to_do_more_with_fig_jam")}}));else{if(S){O("LEFT_PANEL_FIGMA_LOGO");return}n(b.j7({type:A.G,data:{targetRect:e.getBoundingClientRect()}}))}}return}if(d?.type&&ed.includes(d?.type)&&n(C.ES({type:d.type})),(0,A.TY)(l))n(b.oB());else if(e){let t={type:A.pi,data:{targetRect:e.getBoundingClientRect()},hasOwnEscKeyHandler:!0};n(b.j7(t))}},onboardingKey:ei.tO,positionOnChevron:!0,recordingKey:"toggleMenuTopbarButton",showChevron:!e.hideChevron,svg:ea.A,ui3Icon:(0,i.jsx)(o.J,{}),children:[(0,A.TY)(l)&&(0,i.jsx)(M.e,{id:r,"aria-labelledby":"toggle-menu-button",controlledByID:"toggle-menu-button",dropdown:l,chevronRef:R,positionOnChevron:!0},"fullscreen-menu"),(0,A.IS)(l)&&(0,i.jsx)(P,{dropdown:l})]},"toggle-menu-button")})},954919:(e,t,n)=>{n.d(t,{QY:()=>l,Zk:()=>s,xw:()=>o});var i=n(795033);let s=(0,i.eU)({seen_fj_upsell_draft_modal_1:{fileKey:void 0,sessionId:0},seen_fj_upsell_draft_modal_2:{fileKey:void 0,sessionId:0},seen_fj_upsell_draft_modal_3:{fileKey:void 0,sessionId:0},seen_fj_upsell_team_modal_1:{fileKey:void 0,sessionId:0},seen_fj_upsell_team_modal_2:{fileKey:void 0,sessionId:0},seen_fj_upsell_team_modal_3:{fileKey:void 0,sessionId:0}}),a=(0,i.eU)({showing:!1,userFlag:null}),r=(0,i.eU)(e=>e(a),(e,t,n)=>{t(a,n)}),l=(0,i.eU)(e=>e(r)),o=(0,i.eU)(null,(e,t,{showing:n,userFlag:i=null})=>{t(r,{showing:n,userFlag:i})})},456599:(e,t,n)=>{n.d(t,{s:()=>eM});var i=n(104076),s=n(140490),a=n(716976),r=n(237420),l=n(795033),o=n(997477),d=n(856909),c=n(192075),u=n(428147),p=n(366535),m=n(443192),h=n(249586),f=n(381059),g=n(719097),x=n(211862),_=n(295253),y=n(954919),v=n(511570),b=n.n(v),C=n(111297),j=n(461375);function k({name:e,onBadgeClick:t,text:n,trackingProperties:s,isLocked:a,children:r}){let l=a?"paid_status_badge_base--locked--z8YBo":e===d._Y.DEV_MODE_TRIAL?"paid_status_badge_base--devmode--u3XTd":"paid_status_badge_base--brand--7khqG";return(0,i.jsx)(C.fu,{name:e,properties:{...s,text:e},children:(0,i.jsxs)("div",{className:"paid_status_badge_base--container--e3rGO",children:[(0,i.jsx)(C.$z,{type:"button",className:"paid_status_badge_base--button--KgNx9","data-onboarding-key":j.l,onClick:t,children:(0,i.jsx)("span",{className:b()("paid_status_badge_base--badge---04yF text--fontPos11--2LvXf text--_fontBase--QdLsd",l),children:n})}),r]})})}function w({openFile:e}){let t=(0,j.I)(e.editorType),n=function(e){let t=(0,l.md)(g.UQ),n=(0,l.md)(f.zN),{getConfig:i}=(0,o.I7)("exp_free_badge_in_drafts_plan_comparison");return a.useMemo(()=>"design"===e&&t&&"loaded"===n.status&&!1===n.data&&!!i().getValue("free_badge_visible",!1),[e,t,n.status,n.data,i])}(e.editorType),s={fileKey:e.key,productType:(0,h.pi)(e)};return t?(0,i.jsx)(E,{trackingProperties:s}):n?(0,i.jsx)(T,{trackingProperties:s}):null}function E({trackingProperties:e}){let t=(0,r.wA)(),n=(0,l.md)(y.QY),s=(0,l.Xr)(y.xw),a=(0,l.md)(y.Zk),o=(0,r.d4)(e=>e.multiplayer.sessionID),h=(0,x.tS)();return(0,i.jsx)(k,{name:d._Y.FREE,onBadgeClick:()=>{n.showing&&n.userFlag&&(s({showing:!1}),t(p.Lo()),t(m.b({[n.userFlag]:!0})),a[n.userFlag]={fileKey:h||void 0,sessionId:o}),t(p.to({type:u.V,data:{upsellSource:_.b.DRAFT_FILE_BADGE,openCheckoutInNewTab:!0}}))},text:(0,c.t)("fullscreen.filename_view.free"),trackingProperties:e})}function T({trackingProperties:e}){let t=(0,r.wA)();return(0,i.jsx)(k,{name:d._Y.FREE,onBadgeClick:()=>{t(p.to({type:u.V,data:{upsellSource:_.b.DESIGN_DRAFT_FILE_BADGE,openCheckoutInNewTab:!0}}))},text:(0,c.t)("fullscreen.filename_view.free"),trackingProperties:e})}var S=n(812714),I=n(851824),N=n(217862),A=n(936817),L=n(788127),M=n(259936),O=n(249445),R=n(392243),P=n(937505),D=n(105228),F=n(944350),z=n(853039),B=n(562311),G=n(268305),U=n(386216),V=n(449572),H=n(513369),K=n(555013),W=n(236631),q=n(911990),X=n(459494),Y=n(244205),Z=n(332795),J=n(59849),Q=n(643330),$=n(132078);let ee="file_tracker_upsell_modal--walkThroughModal--NYXku pointer_modal--walkThroughModalAnimateFast--Xm453 pointer_modal--walkThroughModal--6eTVS pointer_modal--pointerModal--wrpFz",et="file_tracker_upsell_modal--modalContent--Jn4Rd",en="file_tracker_upsell_modal--progressBar--IPGgx",ei="file_tracker_upsell_modal--progressDefault--rdBIR",es="file_tracker_upsell_modal--progressDefaultV2--UK4N-",ea="file_tracker_upsell_modal--progressActiveV2--aJYjz file_tracker_upsell_modal--progressDefaultV2--UK4N-",er="file_tracker_upsell_modal--progressWarningV2--eSiCe file_tracker_upsell_modal--progressDefaultV2--UK4N-",el="file_tracker_upsell_modal--progressActive--OS7iA file_tracker_upsell_modal--progressDefault--rdBIR",eo="file_tracker_upsell_modal--progressWarning--pJlRr file_tracker_upsell_modal--progressDefault--rdBIR";function ed(e){let t;let{teamId:n,dismissModal:s,topPadding:a,pointerPaddingOffset:r}=e,l=(0,V.bc)(J.bel,{teamId:n}),o=(0,x.q5)(),d=(0,N.y)(n,_.b.FILE_TRACKER_MODAL,O.C6.PAGE_TRACKER_UPSELL),u=(0,X.E9)(),p=Z.h.useTrackingContext({trigger:_.b.FILE_TRACKER_MODAL});if(!o||"loaded"!==l.status)return null;if(u)t=(0,H.oA)(l.data.team?.teamFileCounts?.totalFileCount)??0;else switch(o.editorType){case"design":t=l.data.team?.teamFileCounts?.designFileCount??0;break;case"whiteboard":t=l.data.team?.teamFileCounts?.whiteboardFileCount??0;break;case"slides":t=parseInt(l.data.team?.teamFileCounts?.slideFileCount??"0")}if(void 0===t||0===t)return null;let m=t<z.WW?(0,c.tx)("fullscreen.file_tracker_modal.num_files_of_max_free_files_created",{numFiles:t,maxFreeFiles:z.WW}):(0,c.tx)("fullscreen.file_tracker_modal.this_is_your_last_free_file"),f=t<z.WW?(0,c.tx)("fullscreen.file_tracker_modal.starter_plans_are_free_but_they_limit_you_to_just_max_free_files",{maxFreeFiles:z.WW}):(0,c.tx)("fullscreen.file_tracker_modal.max_free_files_already_you_are_becoming_a_pro",{maxFreeFiles:z.WW}),g=[(0,c.t)("fullscreen.file_tracker_modal.unlimited_files_pages"),(0,c.t)("fullscreen.file_tracker_modal.audio_conversations_in_files"),(0,c.t)("fullscreen.file_tracker_modal.unlimited_version_history_and_more")],y={fileTeamId:n,numFiles:t,productType:(0,h.pi)(o),...p};return(0,i.jsx)(C.fu,{name:"File Tracker Modal",properties:y,children:(0,i.jsx)($.CR,{animateQuickly:!0,className:ee,disableClickOutsideToHide:!0,dismissModal:s,pointerPaddingOffset:r,shouldCenterArrow:Q.EL.FALLBACK,shouldDismissWhenLostDOMTarget:!0,targetKey:j.l,topPadding:a,width:330-2*$.uv,children:(0,i.jsxs)("div",{className:et,"data-testid":"fileTrackerUpsellModalContent",children:[(0,i.jsxs)("div",{className:en,children:[(0,i.jsx)("div",{className:b()(el,{[eo]:t>=z.WW})}),(0,i.jsx)("div",{className:b()(ei,{[el]:t>1,[eo]:t>=z.WW})}),(0,i.jsx)("div",{className:b()(ei,{[eo]:t>=z.WW})})]}),(0,i.jsx)("h1",{className:"file_tracker_upsell_modal--modalTitle--UVfa7",children:m}),(0,i.jsx)("p",{className:"file_tracker_upsell_modal--modalBody--x728y",children:f}),(0,i.jsx)("div",{className:W.s.font11.colorText.lh16.fontMedium.mb24.pr24.$,children:(0,i.jsx)(q.Y,{direction:"vertical",spacing:16,children:g.map((e,t)=>(0,i.jsxs)(q.Y,{direction:"horizontal",verticalAlignItems:"start",spacing:8,children:[(0,i.jsx)("span",{children:"\u2713"}),(0,i.jsx)("span",{children:e})]},t))})}),(0,i.jsx)(K.vd,{className:"file_tracker_upsell_modal--comparePlansButton--2oBV9",onClick:()=>{s(),d()},dataTestId:"fileTrackerUpsellModalCta",trackingProperties:{trackingDescriptor:Y.c.COMPARE_PLANS},children:(0,c.tx)("fullscreen.file_tracker_modal.compare_plans")})]})})})}var ec=n(293422),eu=n(790009);n(120440);var ep=n(958251),em=n(595596),eh=n(176203);function ef(e){let t;let{teamId:n,dismissModal:s,topPadding:a,pointerPaddingOffset:r}=e,l=(0,V.bc)(J.bel,{teamId:n}),o=(0,x.q5)(),d=(0,N.y)(n,_.b.FILE_TRACKER_MODAL,O.C6.PAGE_TRACKER_UPSELL),u=Z.h.useTrackingContext({trigger:_.b.FILE_TRACKER_MODAL});if(!o||"loaded"!==l.status)return null;let p=o.editorType===F._Y.SITES||o.editorType===F._Y.DESIGN;switch(o.editorType){case"design":case"sites":t=(l.data.team?.teamFileCounts?.designFileCount??0)+parseInt(l.data.team?.teamFileCounts?.sitesFileCount??"0");break;case"whiteboard":t=l.data.team?.teamFileCounts?.whiteboardFileCount??0;break;case"slides":t=parseInt(l.data.team?.teamFileCounts?.slideFileCount??"0")}if(void 0===t||0===t)return null;let m=(0,c.tx)("fullscreen.file_tracker_modal.num_files_of_max_free_files_product_type_created",{numFiles:t,maxFreeFiles:z.WW,productStr:"sites"===o.editorType||"design"===o.editorType?(0,c.t)("fullscreen.file_tracker_modal.figma_design_and_figma_sites"):(0,em.VG)((0,ep.wR)(o.editorType))}),f=(0,c.tx)("fullscreen.file_tracker_modal.upgrade_your_plan_for"),g=[(0,c.t)("fullscreen.file_tracker_modal.unlimited_files_folders"),(0,c.t)("fullscreen.file_tracker_modal.advanced_prototyping"),(0,c.t)("fullscreen.file_tracker_modal.team_wide_design_library")],y={fileTeamId:n,numFiles:t,productType:(0,h.pi)(o),...u};return(0,i.jsx)(C.fu,{name:"File Tracker Modal V2",properties:y,children:(0,i.jsx)(eu.J,{brand:(0,eh.aj)(o.editorType??F._Y.DESIGN),children:(0,i.jsx)($.CR,{animateQuickly:!0,className:ee,disableClickOutsideToHide:!0,dismissModal:s,pointerPaddingOffset:r,shouldCenterArrow:Q.EL.FALLBACK,shouldDismissWhenLostDOMTarget:!0,targetKey:j.l,topPadding:a,width:260-2*$.uv,children:(0,i.jsxs)("div",{className:et,"data-testid":"fileTrackerUpsellModalContent",children:[(0,i.jsxs)("div",{className:en,children:[(0,i.jsx)("div",{className:b()(ea,{[er]:t>=z.WW})}),(0,i.jsx)("div",{className:b()(es,{[ea]:t>1,[er]:t>=z.WW})}),(0,i.jsx)("div",{className:b()(es,{[er]:t>=z.WW})})]}),(0,i.jsxs)("h1",{className:"x1j61x8r x1akne3o x1e56ztr xxrns5j x1q8tae1 x1vg90ec x1eab18d x1yyillh",children:[m," ",p&&(0,i.jsx)(K.CY,{href:"https://help.figma.com/hc/articles/33543548184215",target:"_blank",trusted:!0,children:(0,c.t)("fullscreen.file_tracker_modal.learn_more")})]}),(0,i.jsx)("div",{className:"xrlp15q x1nmd3yn xm735u9 xkbmbem x3wk4up x12sbs06",children:(0,i.jsxs)(q.Y,{direction:"vertical",spacing:8,children:[(0,i.jsx)("p",{children:f}),g.map((e,t)=>(0,i.jsxs)(q.Y,{direction:"horizontal",verticalAlignItems:"start",spacing:8,children:[(0,i.jsx)("span",{children:"\u2713"}),(0,i.jsx)("span",{children:e})]},t))]})}),(0,i.jsx)(ec.IK,{onClick:()=>{s(),d()},children:(0,c.tx)("fullscreen.file_tracker_modal.view_plans")})]})})})})}function eg(e){let{teamId:t,dismissModal:n,topPadding:s,pointerPaddingOffset:a}=e,r=(0,x.q5)(),l=(0,N.y)(t,_.b.MAKE_UPSELL_MODAL,O.C6.MAKE_UPSELL_MODAL),o=Z.h.useTrackingContext({trigger:_.b.MAKE_UPSELL_MODAL});if(!r||r.editorType!==F._Y.FIGMAKE)return null;let d=(0,c.t)("figmake.make_upsell_modal.title"),u=[(0,c.t)("figmake.make_upsell_modal.3000_credits"),(0,c.t)("figmake.make_upsell_modal.importing_libraries"),(0,c.t)("figmake.make_upsell_modal.edit_make_files")],p=(0,c.t)("figmake.make_upsell_modal.upgrade_your_plan_for"),m={fileTeamId:t,productType:(0,h.pi)(r),...o};return(0,i.jsx)(C.fu,{name:"Make Upsell Modal",properties:m,children:(0,i.jsx)(eu.J,{brand:(0,eh.aj)(r.editorType??F._Y.FIGMAKE),children:(0,i.jsx)($.CR,{animateQuickly:!0,className:"make_upsell_modal--walkThroughModal--KxF3z pointer_modal--walkThroughModalAnimateFast--Xm453 pointer_modal--walkThroughModal--6eTVS pointer_modal--pointerModal--wrpFz",disableClickOutsideToHide:!0,dismissModal:n,pointerPaddingOffset:a,shouldCenterArrow:Q.EL.FALLBACK,shouldDismissWhenLostDOMTarget:!0,targetKey:j.l,topPadding:s,width:260-2*$.uv,children:(0,i.jsxs)("div",{className:"xdpxx8g x1q2oy4v","data-testid":"makeUpsellModalContent",children:[(0,i.jsx)("h1",{className:"x1j61x8r x1akne3o x1e56ztr xxrns5j x1q8tae1 x1vg90ec x1eab18d x1yyillh",children:d}),(0,i.jsx)("div",{className:"xrlp15q x1nmd3yn xm735u9 xkbmbem x3wk4up x12sbs06",children:(0,i.jsxs)(q.Y,{direction:"vertical",spacing:8,children:[(0,i.jsx)("p",{children:p}),u.map((e,t)=>(0,i.jsxs)(q.Y,{direction:"horizontal",verticalAlignItems:"start",spacing:8,children:[(0,i.jsx)("span",{children:"\u2713"}),(0,i.jsx)("span",{children:e})]},t))]})}),(0,i.jsx)(ec.IK,{onClick:()=>{n(),l()},children:(0,c.t)("fullscreen.file_tracker_modal.view_plans")})]})})})})}var ex=n(171660);function e_({dismissModal:e,teamId:t}){let n=(0,r.wA)(),s=(0,D.TN)(t);return(0,i.jsx)(C.fu,{name:"Pro trial upsell modal",properties:G.ng.getTrackingProperties(),children:(0,i.jsx)($.CR,{width:300,targetKey:j.l,dismissModal:e,shouldCenterArrow:Q.EL.FALLBACK,hideCloseButton:!0,children:(0,i.jsxs)("div",{className:"pro_trial_upsell_modal--container--vCFd5",children:[(0,i.jsx)("div",{children:(0,i.jsx)(ex.E,{fontSize:13,fontWeight:"semi-bold",children:(0,c.tx)("fullscreen.pro_trial_upsell_modal.title",{numOfDaysLeft:s?.daysLeft})})}),(0,i.jsx)("p",{className:"pro_trial_upsell_modal--textContainer--kGoDm",children:(0,i.jsx)(ex.E,{fontSize:11,children:(0,c.tx)("fullscreen.pro_trial_upsell_modal.description")})}),(0,i.jsx)("div",{className:"pro_trial_upsell_modal--btnContainer--wZVCK",children:(0,i.jsx)(K.vd,{trackingProperties:{trackingDescriptor:Y.c.UPGRADE_FROM_FILENAME_PRO_BADGE,...G.ng.getTrackingProperties("Upgrade now")},onClick:()=>{e(),n((0,p.to)({type:u.V,data:{teamId:t,upsellSource:_.b.PRO_TRIAL_UPSELL_MODAL,openCheckoutInNewTab:!0}}))},children:(0,c.t)("fullscreen.pro_trial_upsell_modal.cta_text")})})]})})})}var ey=n(778612),ev=n(649266),eb=n(664554);let eC=(0,S.kc)().sites_design_starter_combined_file_limit;function ej(e){return(0,i.jsx)(s.u,{label:"TeamPaidStatusBadge",children:(0,i.jsx)(ek,{...e})})}function ek({openFile:e,team:t}){let n=(0,P.FC)(),s=(0,D.TN)(t.id),l=t.restrictionsList?.includes(F.P4.LOCKED),o=(0,r.d4)(e=>e.isOpenFileLoadedFromLiveGraph),d=(0,x.MY)().errors,c=!(0,z.XX)(t)&&(0,B.canEditTeam)(t.id,n),u=t.canEdit&&e.plan?.tier===F.Ag.STARTER,[p,m]=a.useState(!1);a.useEffect(()=>{if(o&&!p){let e=setTimeout(()=>{m(!0)},100);return()=>clearTimeout(e)}},[o,p]);let f=(0,M.u8)({oldValue:c,newValue:u,newValueReady:o&&p,label:L.A.TeamPaidStatusBadge.canEditStarterTeam,enableFullRead:(0,A.DQ)(A.Pw.GROUP_8),contextArgs:{canEdit:t.canEdit,planTier:e.plan?.tier,isOpenFileLoadedFromLiveGraph:o,numOpenFileErrors:Array.isArray(d)?d.length:-1}}),g=(0,ey.iG)(t),_={fileKey:e.key,fileTeamId:t.id,productType:(0,h.pi)(e)};return G.ng.canSeeProTrialUxInFile(s,e)?(0,i.jsx)(eE,{trackingProperties:_,teamId:t.id}):l?(0,i.jsx)(eT,{trackingProperties:_,teamId:t.id,proTrial:s,canEditTeam:f,isProOrOnceEdu:g}):f?(0,i.jsx)(eS,{openFile:e,permissionsState:n,trackingProperties:_,teamId:t.id}):null}function ew(){let[e,t]=a.useState(!1);return[e,(0,I.A)(e=>{t(e)},200,{leading:!0,trailing:!1})]}function eE({teamId:e,trackingProperties:t}){let[n,s]=ew();return(0,i.jsx)(k,{name:d._Y.PRO_TRIAL,onBadgeClick:()=>s(!0),text:(0,c.t)("fullscreen.filename_view.pro_trial"),trackingProperties:{...t,...G.ng.getTrackingProperties()},children:n&&(0,i.jsx)(e_,{teamId:e,dismissModal:()=>s(!1)})})}function eT({teamId:e,proTrial:t,trackingProperties:n,canEditTeam:s,isProOrOnceEdu:a}){let l=(0,r.wA)(),o=(0,U.jn)(),m=G.ng.canSeeProTrialExpiryUx(t),h=m?d._Y.PRO_TRIAL_EXPIRED:d._Y.LOCKED,f=m?_.b.PRO_TRIAL_UPSELL_MODAL:_.b.LOCKED_TEAM_FILE_BADGE;return(0,i.jsx)(k,{name:h,onBadgeClick:()=>{if(o)return null;e&&!a?l(p.to({type:ev.t,data:{teamId:e,canEditTeam:s}})):s&&l(p.to({type:u.V,data:{teamId:e,upsellSource:f,entrypoint:O.C6.PLAN_COMPARISON_MODAL}}))},text:m?(0,c.t)("fullscreen.filename_view.trial_expired"):(0,c.t)("fullscreen.filename_view.locked"),trackingProperties:{...n,...m?G.ng.getTrackingProperties():{}},isLocked:!0})}function eS({openFile:e,permissionsState:t,trackingProperties:n,teamId:s}){let a=(0,j.I)(e.editorType),r=(0,R.jd)(t.openFile?.project);return a&&!eC?(0,i.jsx)(eL,{trackingProperties:n,teamId:s}):r?(0,i.jsx)(eI,{openFile:e,trackingProperties:n,teamId:s}):(0,i.jsx)(eA,{openFile:e,trackingProperties:n,teamId:s})}function eI({openFile:e,trackingProperties:t,teamId:n}){let s=(0,N.y)(n,e.editorType===F._Y.FIGMAKE?_.b.MAKE_UPSELL_MODAL:_.b.STARTER_TEAM_FILE_BADGE,e.editorType===F._Y.FIGMAKE?O.C6.MAKE_UPSELL_MODAL:O.C6.PLAN_COMPARISON_MODAL);return(0,i.jsx)(k,{name:d._Y.FREE,onBadgeClick:()=>s(),text:(0,c.t)("fullscreen.filename_view.free"),trackingProperties:t})}let eN=[F._Y.DESIGN,F._Y.WHITEBOARD,F._Y.SLIDES,F._Y.FIGMAKE,...eC?[F._Y.SITES]:[]];function eA({openFile:e,trackingProperties:t,teamId:n}){let[s,a]=ew(),r=(0,eb.I)(),l=e.editorType===F._Y.FIGMAKE,o=(0,N.y)(n,l?_.b.MAKE_UPSELL_MODAL:_.b.STARTER_TEAM_FILE_BADGE,l?O.C6.MAKE_UPSELL_MODAL:O.C6.PLAN_COMPARISON_MODAL);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(k,{name:d._Y.FREE,onBadgeClick:()=>{e.editorType&&eN.includes(e.editorType)?a(!0):o()},text:(0,c.t)("fullscreen.filename_view.free"),trackingProperties:t}),s&&!l&&(eC?(0,i.jsx)(ef,{teamId:n,dismissModal:()=>a(!1),topPadding:4,pointerPaddingOffset:-32}):(0,i.jsx)(ed,{teamId:n,dismissModal:()=>a(!1),topPadding:4,pointerPaddingOffset:-32})),s&&l&&(0,i.jsx)(eg,{teamId:n,dismissModal:()=>a(!1),topPadding:4,pointerPaddingOffset:"shown"===r?-32:40})]})}function eL({trackingProperties:e,teamId:t}){let n=(0,N.y)(t,_.b.STARTER_TEAM_FILE_BADGE,O.C6.PLAN_COMPARISON_MODAL),s=(0,r.wA)(),a=(0,l.md)(y.QY),o=(0,l.Xr)(y.xw);return(0,i.jsx)(k,{name:d._Y.FREE,onBadgeClick:()=>{a.showing&&a.userFlag&&(o({showing:!1}),s(p.Lo()),s(m.b({[a.userFlag]:!0}))),n()},text:(0,c.t)("fullscreen.filename_view.free"),trackingProperties:e})}function eM({openFile:e}){return(0,i.jsx)(s.u,{label:"FilePaidStatusBadge",children:e.team?(0,i.jsx)(ej,{openFile:e,team:e.team}):(0,i.jsx)(w,{openFile:e})})}},461375:(e,t,n)=>{n.d(t,{I:()=>o,l:()=>l});var i=n(716976),s=n(795033),a=n(381059),r=n(719097);let l="file_paid_status_badge_onboarding_key";function o(e){let t=(0,s.md)(r.UQ),n=(0,s.md)(a.zN);return i.useMemo(()=>"whiteboard"===e&&t&&"loaded"===n.status&&!1===n.data,[e,t,n.status,n.data])}},255578:(e,t,n)=>{n.d(t,{A:()=>w});var i=n(104076),s=n(741935),a=n(256082),r=n(812714),l=n(140490),o=n(147643),d=n(192075),c=n(854972),u=n(615782),p=n(248043),m=n(944350),h=n(349311),f=n(700411),g=n(219199),x=n(221586),_=n(560201);let y="hub_file_tooltips--hubFileInfo--mO1Xa text--fontPos11--2LvXf text--_fontBase--QdLsd",v="hub_file_tooltips--handle--n3W-M",b="hub_file_tooltips--link--fRVPc blue_link--blueLink--9rlnd",C=(0,_.ex)("hub_file_in_review",function(e){let{url:t}=e,n=(0,x.Gc)(e=>{e.preventDefault(),g.Ay.redirect(t,"_blank")});return(0,i.jsxs)(f._,{newTab:!0,trusted:!0,href:t,className:y,htmlAttributes:{onMouseDown:n},children:[(0,i.jsx)("span",{className:v,children:(0,d.tx)("community.tooltip.is_currently_in_review")}),(0,i.jsx)("div",{className:b,children:(0,d.tx)("community.permissions_modal_publish_tab.footer.view_community_page")})]})},e=>({url:e.getAttribute("data-tooltip-hub-file-url")||""})),j=(0,_.ex)("hub_file_info",function(e){let{lastPublishedAt:t,url:n}=e,s=(0,x.Gc)(e=>{e.preventDefault(),g.Ay.redirect(n,"_blank")});return(0,i.jsxs)(f._,{newTab:!0,trusted:!0,href:n,className:y,htmlAttributes:{onMouseDown:s},children:[(0,i.jsx)("span",{className:v,children:(0,d.tx)("community.tooltip.published_to_community_on_date",{date:t})}),(0,i.jsx)("div",{className:b,children:(0,d.tx)("community.permissions_modal_publish_tab.footer.view_community_page")})]})},e=>{let t=e.getAttribute("data-tooltip-hub-file-url")||"";return{lastPublishedAt:e.getAttribute("data-tooltip-hub-file-last-published-at")||"",url:t}}),k=(0,_.ex)("hub_file_info_unverified",function(e){let{verificationStatus:t}=e;return(0,i.jsx)("div",{className:y,children:(0,i.jsx)("span",{className:v,children:t})})},e=>({verificationStatus:e.getAttribute("data-tooltip-hub-file-verification-status")})),w=(0,l._)(function({isLeftRail:e}){let t=(0,c.JT)();return t?(0,i.jsx)(E,{hubFile:t,isLeftRail:e}):null},"HubFileBacklink");function E({hubFile:e,isLeftRail:t}){let n;let l=(0,u.Vz)(e.id);if(e.unpublishedAt)return null;let{currentHubFileVersion:c}=e,f=(0,d.t)("fullscreen.filename_view.hub_file_published_at",{publish_date:new Date(c.createdAt)}),g=e.verificationStatus===m.iS.BLOCKED?(0,d.t)("community.tooltip.this_community_file_is_currently_blocked"):e.verificationStatus===m.iS.UNVERIFIED?(0,d.t)("community.tooltip.this_community_file_is_currently_unverified"):"",x=e.verificationStatus===m.iS.BLOCKED||e.verificationStatus===m.iS.UNVERIFIED,_=e.publishingStatus===m.KB.PENDING_PUBLIC||e.publishingStatus===m.KB.PENDING_USER_VISUAL_COMPLIANCE;x?n=k:_?n=C:(0,r.kc)().hub_file_info_tooltip&&(n=j);let y={"data-testid":"filename-view-public-icon","data-tooltip":n,"data-tooltip-hub-file-last-published-at":f,"data-tooltip-hub-file-url":(0,p.X$)(e.id),"data-tooltip-hub-file-verification-status":g,"data-tooltip-interactive":!0,"data-tooltip-max-width":300,"data-tooltip-offset-y":0,"data-tooltip-type":h.Ib.SPECIAL};return t?(0,i.jsx)(o.J,{"aria-label":(0,d.t)("community.permissions_modal_publish_tab.footer.view_community_page"),htmlAttributes:{...y,"data-tooltip-show-right":!0},onClick:x?void 0:l,children:x?(0,i.jsx)(s.e,{}):(0,i.jsx)(a.V,{})}):(0,i.jsx)("div",{className:x?"hub_file_backlink--publicIconDisabled--ESBVX hub_file_backlink--publicIconBase--uhtkz":"hub_file_backlink--publicIcon--gl5n8 hub_file_backlink--publicIconBase--uhtkz",onClick:x?void 0:l,...y,children:x?(0,i.jsx)(s.e,{}):(0,i.jsx)(a.V,{})})}},859802:(e,t,n)=>{n.d(t,{v7:()=>eT,Lx:()=>eb});var i=n(104076),s=n(716976),a=n(237420),r=n(80969),l=n(17933),o=n(498349),d=n(390579),c=n(790009),u=n(266808),p=n(795033),m=n(120440),h=n(511570),f=n.n(h),g=n(851824),x=n(983500),_=n(633065),y=n(434511),v=n(219199),b=n(166887),C=n(221586),j=n(2713),k=n(690824),w=n(264830),E=n(11395),T=n(903853),S=n(555013),I=n(849757),N=n(236631),A=n(192075),L=n(489175),M=n(147046),O=n(850701),R=n(443192);n(244399);var P=n(551037),D=n(406954),F=n(835258),z=n(565854),B=n(211862),G=n(915013),U=n(67154),V=n(205088),H=n(549794);n(286132);var K=n(40452),W=n(349311),q=n(530091),X=n(228439);n(882726);var Y=n(616248);n(215853),n(819222);var Z=n(404343);(0,x.hG)(Z.rJv);var J=(e=>(e.VOICE="voice",e))(J||{}),Q=n(681398),$=n(366535);n(377692);var ee=n(249586),et=n(571430);n(592726);var en=n(944350),ei=n(459496),es=n(498726),ea=n(176203),er=n(278151),el=n(103345);n(316427);var eo=n(393708),ed=n(49875),ec=n(623355),eu=(e=>(e[e.NO_CALL_STATE=0]="NO_CALL_STATE",e[e.JOIN_CALL_STATE=1]="JOIN_CALL_STATE",e[e.IN_CALL_WIDGET_OPEN=2]="IN_CALL_WIDGET_OPEN",e[e.IN_CALL_WIDGET_CLOSED=3]="IN_CALL_WIDGET_CLOSED",e))(eu||{});function ep(e){let t=(0,a.Pj)(),n=(0,B.q5)(),s=(0,a.d4)(e=>e.orgById),r=(0,a.d4)(e=>e.teams),l=(0,a.d4)(e=>e.selectedView?.editorType),o=(0,a.d4)(e=>"prototype"===e.selectedView.view),d=l===ea.nT.Design||l===ea.nT.Whiteboard||l===ea.nT.DevHandoff||l===ea.nT.Slides||l===ea.nT.Illustration,c=(0,a.wA)();if(Q.XN||!n||o||!d)return null;let u=(0,K.YL)({openFile:n,teams:r,orgById:s});if(u===K.gW.FEATURE_DISABLED)return null;if(u===K.gW.ELIGIBLE_WITH_UPGRADE)return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("span",{className:ec.WF,"data-onboarding-key":ei._2,onClick:()=>{let e=n.teamId&&r[n.teamId];if(!e)return;(0,ee.ds)("CTA Clicked",n.key,t.getState(),{name:"Disabled Voice Call Button"});let i=l===ea.nT.Whiteboard?en._Y.WHITEBOARD:en._Y.DESIGN;c($.to({type:el.DV,data:{team:e,resource:es.Bi.AUDIO,action:er.pE.USE_AUDIO,editorType:i,currentPlan:et.F.Plan.STARTER,upsellPlan:et.F.Plan.PRO}}))},children:(0,i.jsx)(eo.A.HeadphonesIcon,{className:ec.tL,size:32})})});if(u!==K.gW.ELIGIBLE){let e=u===K.gW.DISABLED_BY_ORG?(0,A.t)("collaboration.voice.audio_has_been_disabled_by_your_organization"):(0,A.t)("collaboration.voice.to_use_audio_in_this_file_move_it_to_a_team_on_one_of_our_paid_plans");return(0,i.jsx)("span",{className:ec.WF,"data-tooltip-type":W.Ib.TEXT,"data-tooltip-show-immediately":!0,"data-tooltip":e,children:(0,i.jsx)(eo.A.HeadphonesIcon,{className:ec.sl,size:32})})}return(0,i.jsx)("div",{className:ec.Te,children:(0,i.jsx)(ed.K,{fileKey:n.key,className:ec.iw,"data-tooltip-type":W.Ib.TEXT,"data-tooltip":(0,A.t)("collaboration.voice.start_conversation"),hidePopover:e.hidePopover,children:(0,i.jsx)("span",{className:ec.iG,children:(0,i.jsx)("span",{"data-onboarding-key":"audio-nux-key",className:ec.zc,children:(0,i.jsx)(eo.A.HeadphonesIcon,{className:ec.tL,size:32})})})})})}var em=n(127082),eh=n(167151),ef=n(813141),eg=n(782803);n(152469);var ex=n(814664);n(286911);var e_=n(699745);let ey="multiplayer-nickname-dropdown",ev=((0,F.ck)(),(0,x.jz)(Z.rJv));function eb(e,t,n,i,s,a,r){if(!s)return;let l=e.sessionID,o=l===t,d=a&&a.sessionID===t;if(o&&d)r();else if(i){let t=s.observingSessionID===l||s.sessionID===l?-1:e.sessionID,i=-1!==s.observingSessionID,a=s.observingSessionID!==l&&s.sessionID!==l;i&&n((0,V._P)({name:"Prototype Observation Ended",params:{multiplayerObservingSessionID:s.observingSessionID,multiplayerSessionID:s.sessionID}})),a&&(n((0,V._P)({name:"Prototype Observation Started",params:{multiplayerObservingSessionID:l,multiplayerSessionID:s.sessionID}})),n(R.b({aware_of_observation_mode:!0}))),n(O.J4({...s,observingSessionID:t}))}else u.h3O&&(u.h3O.observeUser(l),s.observingSessionID!==l&&s.sessionID!==l&&n(R.b({aware_of_observation_mode:!0})))}function eC(e){let{query:t,usersToSearch:n}=e,[i,a]=s.useState(n),r=s.useRef(!1),l=(0,b.am)(),o=s.useRef(!1),d=o.current,c=s.useCallback(async e=>{if(""===e)a(n);else{r.current=!1;let t=await (0,ex.n)(e,n);r.current||(a(t.map(e=>e.item)),d||(l("Multiplayer Tools User Search",{otherUserSessionsCount:n.length}),o.current=!0))}},[d,l,n]),u=(0,g.A)(c,200);return s.useEffect(()=>(u(t),()=>{u.cancel(),r.current=!0}),[u,t,n]),{searchResults:i}}let ej=(0,s.forwardRef)(function(e,t){let{query:n,setQuery:a}=e,l=s.useRef(null);return(0,i.jsx)("div",{ref:t,className:e_.MT,children:(0,i.jsx)(r.D,{ref:l,"aria-label":(0,A.t)("search.search_file_users"),autoFocus:!0,onChange:a,onClick:L.dG,placeholder:(0,A.t)("collaboration.spotlight.menu.search.placeholder"),spellCheck:!1,value:n})})});function ek({currentUser:e,peopleList:t,previousViewerList:n,onUserClick:r,shouldDisableSpotlight:d,spotlightDisabledReason:u,containerProps:h,multiplayer:f,orgPathPart:g,isSites:x,nominatePresenter:y,cancelPresenterNomination:b,hidePopover:E}){let L=(0,s.useRef)(null),O=(0,s.useRef)(null),[R,P]=(0,p.fp)(k.ah),[D,F]=(0,p.fp)(k.Dv),[B,V]=s.useState(310),H=(0,s.useRef)(null),[K,q]=s.useState(0),Y=(0,a.wA)(),Z=(0,w.Av)(),J=Math.min(window.innerHeight-Z-22,465);s.useLayoutEffect(()=>{L.current&&O.current&&V(Math.min(J-L.current.offsetHeight-O.current.offsetHeight-16*K,310))},[J,K]);let Q=(0,s.useCallback)(()=>{d||P(!0)},[P,d]),{start:$,cancel:ee}=(0,U.Z)(Q),et=(0,s.useCallback)(()=>{ee(),P(!1)},[ee,P]),en=(0,j.Vi)(),ei=(0,s.useCallback)(()=>{d||(en(),et(),F(!0),Y(M.oB()),E())},[et,Y,F,en,d,E]),es=(0,j.B4)(),ea=(0,s.useCallback)(()=>{es(),Y(M.oB()),E()},[Y,es,E]),er=(0,G.dR)(),el=er&&e.sessionID===er.sessionID?(0,i.jsx)(T.pz,{onClick:ea,className:e_.BK,children:(0,A.tx)("collaboration.spotlight.button.stop")}):(0,i.jsx)(S.$$,{onClick:ei,className:e_.BK,onMouseOver:()=>{$(300)},onMouseLeave:et,disabled:d,"data-tooltip":d&&u?u:void 0,"data-tooltip-type":W.Ib.TEXT,"data-tooltip-show-below":!0,children:(0,A.tx)("collaboration.spotlight.tooltip.spotlight_me")}),eo=t.length+(n?.length??0)>8,[ed,ec]=s.useState(""),{searchResults:eu}=eC({query:ed,usersToSearch:t}),{searchResults:em}=eC({query:ed,usersToSearch:n??[]}),eh=eu.length>0&&em.length>0,eg=eu.length>0||em.length>0,ex=0===eu.length&&0===em.length,ey=(0,i.jsx)("div",{className:e_.zW,children:(0,i.jsx)("div",{className:e_.me})});(0,s.useEffect)(()=>{q((eo?1:0)+(""!==ed&&ex?1:0)+(eg?1:0))},[eo,ed,ex,eg]);let eb=(e,t)=>{let n=(0,C.Gc)(()=>{let t=`/files${g}/user/${e.userID}`;v.Ay.redirect(t,_.eD?void 0:"_blank")}),s=[],a=f.sessionNominatedByCurrentUser===e.sessionID,l=f.presenterSessionID===e.sessionID,o=x&&!!e.sitesViewState&&(0,ef.a)(e.sitesViewState);return!t||l||d||(a?s.push({text:(0,A.tx)("collaboration.spotlight.tooltip.menu.cancel_ask_to_spotlight"),onClick:()=>{(0,z.AD)(e)&&b(e.sessionID,f)},key:"cancel-ask-to-spotlight"}):s.push({text:(0,A.tx)("collaboration.spotlight.tooltip.ask_to_spotlight"),onClick:()=>{(0,z.AD)(e)&&y(e.sessionID,f)},disabled:o,key:"ask-to-spotlight"})),s.push({text:(0,A.tx)("avatar.tooltip.view_profile"),onClick:e=>{n(e)},key:"view-profile"}),(0,i.jsx)(X.Q,{user:e,isOverflow:!0,onUserClick:t?r:void 0,secondaryActions:s,hidePopover:E},e.sessionID)},ek=(0,i.jsxs)(c.J,{mode:"dark",children:[(0,i.jsxs)("div",{ref:L,className:e_.Km,children:[(0,i.jsx)(X.Q,{user:e,isOverflow:!0,isCurrentUserHeaderRow:!0}),(0,i.jsxs)("div",{className:e_.Vr,children:[el,(0,i.jsx)(ep,{hidePopover:E})]})]}),eo&&(0,i.jsxs)(i.Fragment,{children:[ey,(0,i.jsx)("div",{className:e_.zK,ref:O,children:(0,i.jsx)(ej,{query:ed,setQuery:ec})})]}),""!==ed&&ex&&(0,i.jsxs)(i.Fragment,{children:[ey,(0,i.jsx)("div",{className:`${e_.hg} ${N.s.mb8.$}`,children:(0,A.tx)("fullscreen.toolbar.multiplayer.no_user_found")})]}),eg&&(0,i.jsxs)(i.Fragment,{children:[ey,(0,i.jsxs)(I.P,{width:ev-16,maxHeight:B,scrollBarAlways:!0,disableScrollbarBorder:!0,ref:H,children:[eh&&(0,i.jsx)("h2",{className:e_.hg,children:(0,A.tx)("fullscreen.toolbar.multiplayer.currently_viewing")}),eu.length>0&&eu.map(e=>(0,i.jsx)(s.Fragment,{children:eb(e,!d)},`currentViewer-${e.userID}`)),em.length>0&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("h2",{className:e_.hg,children:(0,A.tx)("fullscreen.toolbar.multiplayer.previously_viewed")}),em.map(e=>(0,i.jsx)(s.Fragment,{children:eb(e,!1)},`previousViewer-${e.userID}`))]})]})]})]});return(0,i.jsx)(l.mc,{...h(m.Ay.props(eE.popoverContainer(J,ev))),children:(0,i.jsx)(o.i,{children:ek})})}let ew={kWkggS:"xon4yw5",keoZOQ:"x7hzu26",kaIpWk:"x1mxnbhz",krdFHd:"",kfmiAY:"",kVL7Gh:"",kT0f0o:"",kIxVMA:"",ksF3WI:"",kqGeR4:"",kYm2EN:"",kmVPX3:"xf7z5ut",kg3NbH:"",kuDDbn:"",kE3dHu:"",kP0aTx:"",kpe85a:"",k8WAf4:"",kLKAdn:"",kGO01o:"",kB7OPa:"x9f619",kskxy:"x1jols5v",kzqmXN:"x5lhr3w",$$css:!0},eE={popoverContainer:(e,t)=>[ew,{"--x-maxHeight":(e=>"number"==typeof e?e+"px":null!=e?e:void 0)(`${e}px`),"--x-width":(e=>"number"==typeof e?e+"px":null!=e?e:void 0)(`${t}px`)}]},eT=(0,y.j)(s.memo(function(e){let{multiplayer:t,currentUser:n,onUserClick:a,thresholdUsesContainerWidth:r}=e,o=(0,s.useRef)(null),c=(0,s.useRef)(null),m=(0,s.useRef)(null),h=(0,s.useRef)(null),g=(0,z.wF)(),x=(0,P.k)(),_=(0,E.Om)(),[y,v]=s.useState(!1),[C,w]=s.useState(!1),T=(0,em.Oc)(),{getTriggerProps:S,getContainerProps:I}=l.fP({isOpen:y,onOpenChange:v,type:"dialog",softDismiss:!0}),N=T?{ref:void 0}:S(),M=!T&&y,O=(0,s.useMemo)(()=>t.allUsers.filter(e=>e.sessionID!==n?.sessionID),[t.allUsers,n]),R=(0,Y.W)(),F=R?(0,A.t)("left_rail.only_available_on_canvas"):void 0,[B,U]=(0,p.fp)(k.ah);B&&!M&&U(!1);let V=o.current&&c.current?o.current.clientWidth-c.current.clientWidth:void 0,K=(0,z.Wq)(V,r),{users:Z,overflowUsers:J}=(0,z.uC)(O,null,!1,K),Q=(0,s.useMemo)(()=>[...Z,...J].filter(e=>e&&e.userID!==n.userID),[J,Z,n]),$=(0,s.useMemo)(()=>g?.filter(e=>!Q.some(t=>e.userID===t.userID)&&e.userID!==n.userID),[Q,g,n]),ee=(0,b.am)(),et=(0,s.useCallback)(e=>{(0,L.dG)(e),c.current&&(y||T||ee("Multiplayer Tools Opened",{currentUserSessionID:n.sessionID,otherUserSessionsCount:Q.length}))},[c,y,ee,n.sessionID,Q.length,T]),en=(0,G.dR)(),ei=en&&en.sessionID!==n.sessionID?en:null,es=(0,H.q)(),ea=(0,j.tu)(),er=(0,j.oJ)(),el=(0,eh.cJ)(),eo=Q.length+1,ed=(0,i.jsx)(eg.s,{featured:ei,quickAccess:Z,maxVisibleUsers:z.A8-1,onUserClick:a,totalUserCount:eo}),ec=(0,i.jsx)(q.x,{children:(0,i.jsxs)("button",{"aria-expanded":T?void 0:y,"aria-label":(0,A.t)("fullscreen.toolbar.multiplayer.multiplayer_tools"),className:f()({[e_.XE]:!0,[e_.yx]:J.length>0,[e_.Ge]:0===J.length,[e_.wH]:M,[e_.yo]:!M&&C&&!T}),"data-tooltip":T?void 0:(0,A.t)("fullscreen.toolbar.multiplayer.multiplayer_tools"),"data-tooltip-offset-x":c.current&&h.current?c.current.offsetWidth/2-h.current.offsetWidth/2-1.5:0,"data-tooltip-offset-y":c.current&&o.current?o.current.clientHeight/2-c.current.clientHeight/2:0,"data-tooltip-type":W.Ib.TEXT,id:"multiplayer-toolbar-container",onClick:L.dG,onKeyDownCapture:e=>{(0,D.hx)({e,onClickHandler:e=>{x?_(u.rcl.FOLLOW_PRESENTER):et(e)},onEscapeHandler:()=>{c?.current?.blur()}})},onMouseDownCapture:e=>{x?_(u.rcl.FOLLOW_PRESENTER):et(e)},onMouseLeave:()=>{w(!1)},onMouseOverCapture:e=>{w(!0),(0,L.dG)(e)},...N,ref:e=>{c.current=e;let t=N.ref;t&&t(e)},children:[(0,i.jsx)("span",{ref:m,className:e_.r9,children:(0,i.jsx)(X.Q,{user:n,isOverflow:!1},n.sessionID)},n.sessionID),(0,i.jsxs)("span",{"data-onboarding-key":"multiplayer-spotlight-nux-key",className:e_.rR,children:[J.length>0&&(0,i.jsx)("span",{className:f()({[e_.zk]:!0,[e_.r9]:!0,[e_.wH]:M,[e_.yo]:!M&&C&&!T}),style:{minWidth:eo<10?8:eo<100?15:22},children:`${eo}`}),!T&&(0,i.jsx)("span",{ref:h,children:(0,i.jsx)(d.O,{className:f()({[e_.ai]:!0,[e_.wH]:M})})})]})]})});return(0,i.jsxs)("span",{className:e_.EI,ref:o,"data-onboarding-key":"multiplayer-users-container",children:[(0,i.jsxs)(i.Fragment,{children:[ec,ed]}),(0,i.jsx)(ek,{cancelPresenterNomination:er,containerProps:I,currentUser:n,hidePopover:()=>{v(!1)},isSites:el,multiplayer:t,nominatePresenter:ea,onUserClick:a,orgPathPart:es,peopleList:Q,previousViewerList:$,shouldDisableSpotlight:R,spotlightDisabledReason:F})]})}),"MultiplayerUsersNew"),eS="multiplayer-users-dropdown"},286911:(e,t,n)=>{n.d(t,{sK:()=>S,vQ:()=>T});var i=n(104076),s=n(716976),a=n(511570),r=n.n(a),l=n(518016),o=n.n(l),d=n(983500),c=n(328341),u=n(755444),p=n(264830),m=n(915013),h=n(826160),f=n(428886),g=n(404343),x=n(699745);let _=e=>e?13:14,y=(0,d.jz)(g.Ocz),v=(0,d.jz)(g.bnr),b=e=>e?v:y,C=(0,d.jz)(g.Ko3);var j=(e=>(e.PRESENTING="presenting",e.SELECTED="selected",e.NONE="none",e))(j||{}),k=(e=>(e.PRESENTING="presenting",e.SELECTED="selected",e.DESELECTED="deselected",e.NONE="",e))(k||{});let w=e=>{let t=e.user.sessionID===e.observingSessionID,n=e.user.sessionID===e.presenterSessionID;return t?"selected":n?"presenting":"none"},E=o()([{current:"none",selected:"selected",presenting:"presenting",none:""},{current:"selected",selected:"selected",presenting:"presenting",none:"deselected"},{current:"presenting",selected:"selected",presenting:"presenting",none:""}],e=>e.current);function T(e){let t;let{user:n,tooltipOffsetY:a}=e;(0,p.Av)();let l=function({user:e,observingSessionID:t,presenterSessionID:n,nominatedSessionID:i,disableSpotlightAnimation:a}){let[r,l]=s.useState(""),o=(0,c.ZC)({user:e,observingSessionID:t,presenterSessionID:n,nominatedSessionID:i}),d=s.useMemo(()=>({user:e,observingSessionID:t,presenterSessionID:n,nominatedSessionID:i}),[t,n,e,i]);return s.useEffect(()=>{let e="";if(!a){let t=w(d);e=E[o&&w(o)||"none"][t]}l(e)},[d,o,a]),r}({user:n,observingSessionID:e.observingSessionID,presenterSessionID:e.presenterSessionID,nominatedSessionID:e.nominatedSessionID,disableSpotlightAnimation:e.disableSpotlightAnimation}),o=x.qb,d=(0,m.Ww)(),u=w(s.useMemo(()=>({user:e.user,observingSessionID:e.observingSessionID,presenterSessionID:e.presenterSessionID,nominatedSessionID:e.nominatedSessionID}),[e.observingSessionID,e.presenterSessionID,e.user,e.nominatedSessionID])),g=n.sessionID===d?.sessionID?"var(--color-bg-brand)":n.color,y=b(!0),v=_(!0);return e.hasBorder&&(t="none"===u?"outward":"inward"),(0,i.jsx)("div",{className:r()({[x.C7]:!e.horizontal,[x._L]:e.horizontal}),children:(0,i.jsxs)(f.WB,{id:e.tooltipProxyId,user:{id:n.userID,handle:n.name,sessionId:n.sessionID},tooltipOffsetY:a,children:[(0,i.jsx)("svg",{className:`multiplayer-animation-svg ${e.horizontal?"horizontal":""}`,viewBox:`0 0 ${y} ${C}`,"aria-hidden":"true",children:(0,i.jsx)("circle",{className:`multiplayer-animation-circle ${e.horizontal?"horizontal":""} ${l}`,cx:y/2,cy:C/2,r:v,fill:"none",stroke:g,strokeWidth:"2"})},"multiplayer-animation-svg"),e.showColorIndicators&&(0,i.jsx)("div",{className:`multiplayer-animation-droplet${e.horizontal?"-horizontal":""} ${l}`,"data-avatar-color-bar":!0,style:{backgroundColor:g}},"multiplayer-animation-droplet"),(0,i.jsx)("div",{className:o,children:(0,i.jsx)(h.Ro,{entity:{...n,id:n.userID},className:x.ws,borderStyle:t})})]})})}let S=s.memo(function(e){let t=b(e.isUI3),n=_(e.isUI3),s=`
  @layer css-modules {
    .multiplayer-animation-svg {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: ${t}px;
    }

    .multiplayer-animation-droplet {
      left: ${t/2-n/2}px;
      top: 0px;
      height: 2px;
      width: ${n}px;
      border-radius: 0px;
      position: absolute;
    }

    .multiplayer-animation-droplet-horizontal {
      left: 0px;
      top: 50%;
      transform: translateY(-50%);
      height: ${n}px;
      width: 2px;
      border-radius: 0px;
      position: absolute;
    }

    .multiplayer-animation-droplet.selected {
      animation: droplet 0.3s ease-in forwards;
    }

    .multiplayer-animation-droplet-horizontal.selected {
      animation: droplet-horizontal 0.3s ease-in forwards;
    }

    .multiplayer-animation-droplet.deselected {
      animation: droplet-reverse 0.2s ease-out 0.4s forwards;
      left: ${t/2-n/4}px;
      top: 0px;
      height: 0px;
      width: 0px;
      border-radius: 0px;
    }

    .multiplayer-animation-droplet-horizontal.deselected {
      animation: droplet-horizontal-reverse 0.2s ease-out 0.4s forwards;
      left: ${t/2-n/4}px;
      height: 0px;
      width: 0px;
      border-radius: 0px;
    }

    .multiplayer-animation-circle {
      stroke-dasharray: 400;
      stroke-dashoffset: 400;
      transform-origin: center;
      transform: rotateZ(-90deg);
    }

    .multiplayer-animation-circle.horizontal {
      transform: rotateZ(-180deg);
    }

    .multiplayer-animation-circle.selected {
      animation: draw-circle 0.15s ease-in 0.3s forwards;
    }

    .multiplayer-animation-circle-horizontal.selected {
      animation: draw-circle-horizontal 0.15s ease-in 0.3s forwards;
    }

    .multiplayer-animation-circle.deselected {
      animation: draw-circle-reverse 0.4s ease-in forwards;
    }

    .multiplayer-animation-circle.presenting {
      stroke-dasharray: 3.4;
      animation: rotating 30s linear infinite
    }

    @keyframes rotating {
      from {
        transform: rotateZ(0deg);
      }
      to {
        transform: rotateZ(360deg);
      }
    }

    @keyframes droplet {
      0% {
        top: 0px;
        height: 2px;
        width: ${n}px;
        border-radius: 0px;
      }
      20% {
        top: -3.5px;
        height: ${n/2}px;
        width:  ${n/2}px;
        border-radius: 100%;
      }
      66% {
        top: -2px;
        height: 7px;
      }
      98% {
        top: 5px;
        height: 3px;
        width: 3px;
        border-radius: 100%;
      }
      99% {
        top: 5px;
        height: 1px;
        width: 1px;
        border-radius: 100%;
      }
      100% {
        top: 5px;
        height: 0px;
        width: 0px;
        border-radius: 100%;
      }
    }

    @keyframes droplet-horizontal {
      0% {
        left: 0;
        height: ${n}px;
        width: 2px;
        border-radius: 0px;
      }
      20% {
        left: -3.5px;
        height: ${n/2}px;
        width: ${n/2}px;
        border-radius: 100%;
      }
      66% {
        left: -2px;
        width: ${n/2}px;
      }
      99% {
        left: 5px;
        height: 3px;
        width: 3px;
        border-radius: 100%;
      }
      100% {
        left: 5px;
        height: 0px;
        width: 0px;
        border-radius: 100%;
      }
    }

    @keyframes draw-circle {
      0% {
        stroke-dashoffset: 400;
      }
      100% {
        stroke-dashoffset: 300;
      }
    }

    @keyframes droplet-reverse {
      0% {
        top: 0px;
        height: 2px;
        width: 2px;
        border-radius: 0px;
      }
      100% {
        top: 0px;
        height: 2px;
        width: ${n};
        border-radius: 0px;
      }
    }

    @keyframes droplet-horizontal-reverse {
      0% {
        left: 0px;
        height: 2px;
        width: 2px;
        border-radius: 0px;
      }
      100% {
        left: 0px;
        width: 2px;
        height: ${n}px;
        border-radius: 0px;
      }
    }
  }
  `;return(0,i.jsx)("style",{nonce:(0,u.Ay)().csp_nonce,children:s})})},525092:(e,t,n)=>{n.d(t,{K:()=>p,W:()=>u});var i=n(104076),s=n(716976),a=n(653899),r=n(192075),l=n(568590),o=n(522584),d=n(834524),c=n(643330);let u="design-panel-container";function p(e){let[t,n]=s.useState(!1),p=(0,l.Z)();return((0,a.h)(()=>{queueMicrotask(async function(){let t=e.getNodeForViewportFocus?.(),i=e.getNodeToSelect();i&&"FRAME"===i.type?(await (0,d.zU)({navigate:p,guidToFocus:t?.guid,guidToSelect:i.guid}),n(!0)):e.flowDirection===d.en.FORWARD?e.onNext():e.onPrevious()})}),t)?(0,i.jsx)(o.VF,{arrowPosition:c.F_.RIGHT_BODY,disableHighlight:!0,dismissModal:e.onClose,lowerLeftText:(0,i.jsx)(o.uY,{currentStepNum:e.currentStepNum,totalNumSteps:e.totalNumSteps}),onPrimaryCtaClick:e.onNext,onSecondaryCtaClick:e.onPrevious,pointsTo:"designPanel",shouldCenterArrow:c.EL.FALLBACK,targetKey:u,title:(0,r.tx)("tooltips_plus_onboarding.design_panel.title"),trackingContextName:"Tooltips+ Design Panel Step",children:(0,r.tx)("tooltips_plus_onboarding.design_panel.description")}):null}},565911:(e,t,n)=>{n.d(t,{v:()=>eD,e:()=>eF});var i=n(104076),s=n(716976),a=n(237420),r=n(795033),l=n(443192),o=n(90844),d=n(422872),c=n(381059),u=n(211862),p=n(592726),m=n(174730),h=n(475961),f=n(143277),g=n(441030),x=n(192075),_=n(668242),y=n(244205),v=n(764973),b=n(46805),C=n(74620),j=n(944350),k=n(208740),w=n(522584),E=n(525092);function T(e){let t=(0,x.tx)("tooltips_plus_onboarding.outro.title"),n=(0,x.tx)("tooltips_plus_onboarding.outro.description");return(0,i.jsx)(w.A2,{children:(0,i.jsx)(w.xI,{dismissModal:e.onClose,title:t,trackingContextName:"Tooltips+ Outro Step",onSecondaryCtaClick:e.onSecondaryCtaClick,onPrimaryCtaClick:e.onPrimaryCtaClick,secondaryCtaProps:{ctaText:(0,x.tx)("tooltips_plus_onboarding.outro.practice_more_btn"),ctaTrackingDescriptor:y.c.PRACTICE_MORE_HERE},primaryCtaProps:{ctaText:(0,x.tx)("tooltips_plus_onboarding.outro.start_new_file_btn"),ctaTrackingDescriptor:y.c.START_A_NEW_FILE},children:n})})}var S=n(266808),I=n(980852),N=n(653899),A=n(333682),L=n(834524);function M(e){(0,N.h)(()=>{let t=(0,L.eN)((0,I.getActiveTSSceneGraph)(),"FRAME");if(e.hasUiKits&&null!=t){e.skip&&e.skip();return}});let t=(0,a.d4)(e=>e.isFullscreenDocumentLoaded);s.useEffect(()=>{S.glU&&t&&S.glU.triggerAction("set-tool-frame",null)},[t]);let n=e.fromCursorBot?A.b:w.VF;return S.glU?(0,i.jsx)("div",{"data-testid":"tooltips-plus-frames-step",children:(0,i.jsx)(n,{disableHighlight:!0,dismissModal:e.onClose,hideCloseButton:e.hideCloseButton,lowerLeftText:(0,i.jsx)(w.uY,{currentStepNum:e.currentStepNum,totalNumSteps:e.totalNumStep,useLoadingBar:e.useLoadingBar}),onPrimaryCtaClick:e.onPrimaryCtaClick,onSecondaryCtaClick:e.onSecondaryCtaClick?()=>{S.glU?.triggerAction("set-tool-default",null),e.onSecondaryCtaClick&&e.onSecondaryCtaClick()}:void 0,pointsTo:"toolbar",primaryCtaProps:e.primaryCtaProps,secondaryCtaProps:e.secondaryCtaProps,targetKey:"frame",title:e.hasUiKits?(0,x.tx)("tooltips_plus_onboarding.presets_frame_step.title"):(0,x.tx)("tooltips_plus_onboarding.no_nav_frames_get_started_with_a_frame"),trackingContextName:e.fromCursorBot?"Cursor Bot Create Frame Step":"Tooltips+ Frame Step",children:e.bodyText||(0,x.tx)("tooltips_plus_onboarding.no_nav_frames_description")})}):null}var O=n(997273);function R(e){return(s.useEffect(()=>{S.glU&&S.glU.triggerAction("set-tool-type",null)},[]),S.glU)?(0,i.jsx)(w.VF,{dismissModal:e.onClose,disableHighlight:!0,targetKey:"tool-type-onboarding",title:(0,x.tx)("tooltips_plus_onboarding.text_step.title"),trackingContextName:"Tooltips+ Text Step",lowerLeftText:(0,i.jsx)(w.uY,{currentStepNum:e.currentStepNum,totalNumSteps:e.totalNumSteps,useLoadingBar:e.useLoadingBar}),onPrimaryCtaClick:()=>{S.glU?.triggerActionInUserEditScope("set-tool-default",null),e.onNext()},onSecondaryCtaClick:e.onPrevious,pointsTo:"toolbar",children:(0,x.tx)("tooltips_plus_onboarding.text_step.description")}):null}var P=n(850701),D=n(772523),F=n(654200);function z(e){let t=(0,a.wA)(),n=(0,x.tx)("tooltips_plus_onboarding.ui_kits_ending_step.title"),r=(0,x.tx)("tooltips_plus_onboarding.ui_kits_ending_step.description"),l="UI Kits";return e.forStartingPoints&&(n=(0,x.tx)("starting_points_onboarding.assets_step.title"),r=(0,x.tx)("starting_points_onboarding.assets_step.description",{strongAssets:(0,i.jsx)("strong",{style:{display:"contents"},children:(0,x.tx)("design_systems.assets_panel.assets")})})),(0,b.oe)()&&(n=(0,x.tx)("tooltips_plus_onboarding.assets_ending_step.title"),r=(0,x.tx)("tooltips_plus_onboarding.assets_ending_step.description",{strongAssets:(0,i.jsx)("strong",{style:{display:"contents"},children:(0,x.tx)("design_systems.assets_panel.assets")})}),l="Assets"),s.useEffect(()=>{(0,D.wr)(),t(P.FP({tab:S.xae.ASSETS}))},[t]),(0,i.jsx)(w.VF,{arrowPosition:F.F_.LEFT_TITLE,disableHighlight:!0,dismissModal:e.onClose,lowerLeftText:(0,i.jsx)(w.uY,{currentStepNum:e.currentStepNum,totalNumSteps:e.totalNumSteps,useLoadingBar:e.useLoadingBar}),onPrimaryCtaClick:e.onPrimaryCtaClick,onSecondaryCtaClick:()=>{t(P.FP({tab:S.xae.LAYERS})),e.onSecondaryCtaClick()},pointsTo:"leftPanel",primaryCtaProps:e.primaryCtaProps,targetKey:b.RJ,title:n,trackingContextName:e.forStartingPoints?"Starting Points Assets Step":`Tooltips+ ${l} Ending Step`,children:r})}let B={NAV:"figma_basics_tooltips_nav_step",FRAME:"figma_basics_tooltips_frame_step",TEXT:"figma_basics_tooltips_text_step",FORMAT_TEXT:"figma_basics_tooltips_format_text_step",DESIGN_PANEL:"figma_basics_tooltips_design_panel_step",PRESETS_ENDING:"figma_basics_tooltips_presets_ending_step",UI_KITS_ENDING:"figma_basics_tooltips_ui_kits_ending_step"};function G({completeOverlay:e}){let t=(0,a.wA)(),n=(0,a.Pj)(),r=(0,m.f)("figma_basics_tooltips_onboarding"),o=(0,m.f)(B.FRAME),d=(0,m.f)(B.TEXT),c=(0,m.f)(B.FORMAT_TEXT),u=(0,m.f)(B.DESIGN_PANEL),p=(0,m.f)(B.UI_KITS_ENDING),h=!!(0,m.f)("started_figma_basics_onboarding"),f=(0,C.aV)(),[g,S]=(0,s.useState)(L.en.FORWARD),I=(0,a.d4)(e=>e.mirror.sceneGraph),{hasAnyUiKit:N}=(0,b.I7)(),A=N&&!p,P=[A].reduce((e,t)=>t?e+1:e,4),D=(e,n=L.en.FORWARD)=>{S(n),t(l.b({[e]:!0}))},F=(e,n=L.en.BACKWARD)=>{S(n),t(l.b({[e]:!1}))},G=()=>{e(),t(l.b({figma_basics_tooltips_onboarding:!0}))};return(s.useEffect(()=>{r||f||h||t(l.b({started_figma_basics_onboarding:!0}))},[f,r,t,h]),r||f)?null:o?d?c?u?A?(0,i.jsx)(z,{onPrimaryCtaClick:()=>D(N?B.UI_KITS_ENDING:B.PRESETS_ENDING),onSecondaryCtaClick:()=>F(B.DESIGN_PANEL),onClose:G,currentStepNum:5,totalNumSteps:P,primaryCtaProps:{ctaText:(0,x.tx)("tooltips_plus_onboarding.done"),ctaTrackingDescriptor:y.c.DONE}}):(0,i.jsx)(T,{onPrimaryCtaClick:()=>{let e=(0,v.xA)({state:n.getState(),openNewFileIn:k.ai.NEW_TAB,folderOverride:"drafts",trackingInfo:{from:k.f6.DESIGN_TOOLTIPS_PLUS_OUTRO_MODAL,selectedView:n.getState().selectedView},editorType:j._Y.DESIGN});t(_.uM(e)),G()},onSecondaryCtaClick:G,onClose:G}):(0,i.jsx)(E.K,{onNext:()=>D(B.DESIGN_PANEL),onPrevious:()=>F(B.FORMAT_TEXT),onClose:G,currentStepNum:4,totalNumSteps:P,getNodeToSelect:()=>(0,L.aD)(I),flowDirection:g}):(0,i.jsx)(O.P,{onPrimaryCtaClick:()=>D(B.FORMAT_TEXT),onSecondaryCtaClick:()=>F(B.TEXT),onClose:G,lowerLeftText:(0,i.jsx)(w.uY,{currentStepNum:3,totalNumSteps:P}),skip:()=>{g===L.en.FORWARD?D(B.FORMAT_TEXT):F(B.TEXT)},getNodeToSelect:()=>(0,L.wy)(I)}):(0,i.jsx)(R,{onNext:()=>D(B.TEXT),onPrevious:()=>F(B.FRAME),onClose:G,currentStepNum:2,totalNumSteps:P}):(0,i.jsx)(M,{onPrimaryCtaClick:()=>D(B.FRAME),onClose:G,currentStepNum:1,hideCloseButton:!0,totalNumStep:P})}var U=n(415567),V=n(568590);function H({onPrimaryCtaClick:e,onSecondaryCtaClick:t,primaryCtaProps:n,secondaryCtaProps:r,onClose:o,skip:d,currentStepNum:c,totalNumSteps:u,lowerLeftText:p,title:m,bodyText:h,frameNodeMatcher:f,fromCursorBot:g,isFollowUp:_}){let y=(0,a.wA)(),v=(0,U.Vr)(),b=f?.(I.getActiveTSSceneGraph())||(0,L.eN)((0,I.getActiveTSSceneGraph)(),"FRAME",v),C=(0,V.Z)(),[j,k]=s.useState(!1);if((0,N.h)(()=>{queueMicrotask(async function(){if(null==b){d();return}(v?.type!=="FRAME"||g)&&await (0,L.zU)({navigate:C,guidToSelect:b.guid}),k(!0),y(l.b({design_panel_step_shown:!0})),S.glU?.triggerAction("set-tool-default",null)})}),!j)return null;let T=g?A.b:w.VF,M=g?void 0:(0,i.jsx)(w.uY,{currentStepNum:c||2,totalNumSteps:u||4,useLoadingBar:!0}),O={dismissModal:o,disableHighlight:!0,targetKey:E.W,title:m||(0,x.tx)("tooltips_plus_onboarding.change_properties_in_the_design_panel"),trackingContextName:"Tooltips+ Design Panel Step (No Figma Basics)",lowerLeftText:p||M,onSecondaryCtaClick:t,onPrimaryCtaClick:e,primaryCtaProps:n,secondaryCtaProps:r,arrowPosition:F.F_.RIGHT_BODY,shouldCenterArrow:F.EL.FALLBACK,pointsTo:"designPanel"},R={...O,collapseToTopRight:g,trackingContextName:"Cursor Bot Design Panel Step"+(_?" (Reactive Follow Up)":"")};return(0,i.jsx)(T,{...g?R:O,children:h||(0,x.tx)("tooltips_plus_onboarding.next_take_some_time_to_adjust_your_frames_size")})}var K=n(420680),W=n(225654),q=n(511570),X=n.n(q),Y=n(755444),Z=n(555013),J=n(111297),Q=n(373547),$=n(968169),ee=n(373235),et=n(219971),en=n(692042),ei=n(331497),es=n(167809),ea=n(606151),er=n(920712);let el="no_figma_basics_panning_and_zooming_step--selectedHeaderTitle--8-xpb",eo="no_figma_basics_panning_and_zooming_step--unselectedHeaderTitle--y0NFC",ed="no_figma_basics_panning_and_zooming_step--instructionRow--BP4W4",ec="no_figma_basics_panning_and_zooming_step--icon--mtHJ3",eu="no_figma_basics_panning_and_zooming_step--heavyFontWeight--Fma8P",ep="no_figma_basics_panning_and_zooming_step--keyboardKeyHighlight--jN1Bq";function em({markComplete:e}){let t=(0,m.f)("has_panned_in_design_file"),n=(0,m.f)("has_zoomed_in_design_file"),r=(0,m.f)("dismissed_no_figma_basics_panning_and_zooming_tooltip"),[l,o]=s.useState(()=>t||n),d=!l&&!r,[c,u]=s.useState(!1);(0,ea.g)("no_figma_basics_panning_and_zooming_overlay"),(0,es.U)("no_figma_basics_panning_and_zooming_overlay");let p=!!(0,m.f)("no_figma_basics_panning_and_zooming_overlay");s.useEffect(()=>{p&&c&&setTimeout(()=>{u(!1)},1300)},[p,u,c]);let h=(0,ee.q)(),f=(0,a.d4)(e=>e.mirror.sceneGraph),g=h&&(0,L.Qf)(f),x=!!g&&g.childCount>0;if(s.useEffect(()=>{h&&null!=f&&(x&&(c||d)||e())},[x,h,c,e,f,d]),!x)return null;let _={};return p&&(_={opacity:"0",transition:"opacity",transitionDelay:"1000ms",transitionDuration:"300ms"}),(0,i.jsxs)(i.Fragment,{children:[d&&(0,i.jsx)(eg,{}),c&&(0,i.jsx)("div",{style:_,children:(0,i.jsx)(eh,{})})]})}function eh(){let e=(0,en.QU)({subscribeToUpdates_expensive:!0});return(0,i.jsx)(J.fu,{name:"Panning and Zooming Glow Overlay",children:(0,i.jsxs)("div",{className:"no_figma_basics_panning_and_zooming_step--readyToDesignMoreContainer--nu9cG",children:[(0,i.jsx)("div",{className:"no_figma_basics_panning_and_zooming_step--readyToDesignMoreBoldText--H6Q1p",children:(0,x.tx)("tooltips_plus_onboarding.ready_to_design_more")}),(0,x.tx)("tooltips_plus_onboarding.go_to_a_blank_spot_in_your_canvas"),(0,i.jsx)(Z.Kz,{multiple:3}),(0,i.jsx)("div",{style:{width:e+"px",borderRadius:e+"px"},className:"no_figma_basics_panning_and_zooming_step--blueGlow--zcqFY"})]})})}var ef=(e=>(e.MOUSE="mouse",e.TRACKPAD="trackpad",e))(ef||{});function eg(){let e=(0,a.wA)(),[t,n]=s.useState("mouse");return(0,i.jsx)(J.fu,{name:"Panning and Zooming Instructions Modal",children:(0,i.jsx)(er.wz,{children:(0,i.jsxs)("div",{"data-testid":"panning-and-zooming-hint",className:"no_figma_basics_panning_and_zooming_step--container--8Vwa-",children:[(0,i.jsxs)("div",{className:"no_figma_basics_panning_and_zooming_step--header--OrjJu",children:[(0,i.jsxs)("div",{className:"no_figma_basics_panning_and_zooming_step--headerTabs--D9Er-",children:[(0,i.jsx)("button",{className:X()({[el]:"mouse"===t,[eo]:"mouse"!==t}),onClick:()=>n("mouse"),children:(0,x.tx)("tooltips_plus_onboarding.mouse")}),(0,i.jsx)("button",{className:X()({[el]:"trackpad"===t,[eo]:"trackpad"!==t}),onClick:()=>n("trackpad"),children:(0,x.tx)("tooltips_plus_onboarding.trackpad")})]}),(0,i.jsx)("div",{className:"no_figma_basics_panning_and_zooming_step--closeButton--UAV5m",children:(0,i.jsx)(K.K,{onClick:()=>{e(l.b({dismissed_no_figma_basics_panning_and_zooming_tooltip:!0}))},"aria-label":(0,x.t)("general.close"),htmlAttributes:{"data-testid":"close-button"},children:(0,i.jsx)(W.X,{})})})]}),(0,i.jsxs)("div",{className:"no_figma_basics_panning_and_zooming_step--body--QKpb-",children:[(0,i.jsx)(Z.Kz,{multiple:1.5}),(0,i.jsx)(eC,{peripheral:t}),(0,i.jsx)(Z.Kz,{multiple:2}),(0,i.jsx)(ej,{peripheral:t})]})]})})})}let ex=e=>"dark"===e?(0,Y.ck)("d2eefebde737b9d5fba2b35193dcd51e26ed0164"):(0,Y.ck)("99d648a7ac711ba9d19976515105d6395eeb2d4c"),e_=e=>"dark"===e?(0,Y.ck)("e27a5d39945685c389cd50e9f08144678edefeab"):(0,Y.ck)("2357b697bfe85711b1de702dc63611ef8bb75859"),ey=e=>"dark"===e?(0,Y.ck)("f49911183f0d3a2b6ee5044b42e0a14fe549999a"):(0,Y.ck)("2a0c8ae88f72d6155bd818a0c51c8ced71fcecfa"),ev=e=>"dark"===e?(0,Y.ck)("045c7e1324e953b8ee9ec91ac4e944995662e11e"):(0,Y.ck)("c764bcd0a726bf2d31f70f16808785efeae4de56"),eb=e=>"dark"===e?(0,Y.ck)("7a24deb2e05c4542dbd8b6bd1f009e26ba761b48"):(0,Y.ck)("32f4843d9b24a4b95129bacd47f6b81fe439228f");function eC({peripheral:e}){let t=(0,Q.DP)(),n="mouse"===e?ev(t):ex(t),s=`${e} icon`,a=(0,ei.J2)((0,$.UK)().scrollWheelZoom);return(0,i.jsxs)("div",{className:ed,children:[(0,i.jsx)("img",{src:n,className:ec,alt:s}),(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:eu,children:(0,x.tx)("tooltips_plus_onboarding.to_zoom")}),"\xa0","mouse"!==e?(0,x.tx)("tooltips_plus_onboarding.pinch_your_trackpad"):a?(0,x.tx)("tooltips_plus_onboarding.scroll_your_mouse"):(0,x.tx)("tooltips_plus_onboarding.hold_key_and_scroll",{keyboardKey:(0,i.jsx)("span",{className:ep,children:(0,x.tx)(et.y.isMac()?"tooltips_plus_onboarding.command_key":"tooltips_plus_onboarding.control_key")})})]})]})}function ej({peripheral:e}){let t=(0,Q.DP)(),n=(0,ei.J2)((0,$.UK)().rightClickPan),s=`${e} icon`;return(0,i.jsxs)("div",{className:ed,children:[(0,i.jsx)("img",{src:"mouse"!==e?e_(t):n?eb(t):ey(t),className:ec,alt:s}),(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:eu,children:(0,x.tx)("tooltips_plus_onboarding.to_move")}),"\xa0","mouse"!==e?(0,x.tx)("tooltips_plus_onboarding.swipe_your_trackpad_with_two_fingers"):n?(0,x.tx)("tooltips_plus_onboarding.hold_right_click_while_moving_mouse"):(0,x.tx)("tooltips_plus_onboarding.hold_space_and_left_click_while_moving_your_mouse",{spaceKey:(0,i.jsx)("span",{className:ep,children:(0,x.tx)("tooltips_plus_onboarding.space_key")})})]})]})}var ek=n(482996);function ew(e){let t=(0,a.wA)(),n=(0,ek.te)()()?(0,x.tx)("tooltips_plus_onboarding.ui_kits_and_icon_packs_step.title"):(0,x.tx)("tooltips_plus_onboarding.ui_kits_step.title"),r=(0,x.tx)("tooltips_plus_onboarding.ui_kits_step.description"),l="UI Kits";return(0,b.oe)()&&(n=(0,x.tx)("tooltips_plus_onboarding.assets_step.title"),r=(0,x.tx)("tooltips_plus_onboarding.assets_step.description"),l="Assets"),s.useEffect(()=>{t(P.FP({tab:S.xae.ASSETS}))},[t]),(0,i.jsx)(w.VF,{dismissModal:e.onClose,disableHighlight:!0,targetKey:b.RJ,title:n,trackingContextName:`Tooltips+ ${l} Step`,lowerLeftText:(0,i.jsx)(w.uY,{currentStepNum:e.currentStepNum,totalNumSteps:e.totalNumSteps,useLoadingBar:e.useLoadingBar}),onPrimaryCtaClick:()=>{t(P.FP({tab:S.xae.LAYERS})),e.onNext()},arrowPosition:F.F_.LEFT_TITLE,pointsTo:"leftPanel",children:r})}let eE={FRAME:"no_figma_basics_tooltips_frame_step",TEXT:"no_figma_basics_tooltips_text_step",FORMAT_TEXT:"no_figma_basics_tooltips_format_text_step",DESIGN_PANEL:"no_figma_basics_tooltips_design_panel_step",PRESETS:"no_figma_basics_tooltips_presets_step",PRESETS_ENDING:"no_figma_basics_tooltips_presets_ending_step",UI_KITS:"no_figma_basics_tooltips_ui_kits_step",UI_KITS_ENDING:"no_figma_basics_tooltips_ui_kits_ending_step",PANNING_AND_ZOOMING_GLOW_OVERLAY:"no_figma_basics_panning_and_zooming_overlay",PANNING_AND_ZOOMING_TOOLTIP:"dismissed_no_figma_basics_panning_and_zooming_tooltip"};function eT({completeOverlay:e}){let t=(0,a.wA)(),n=(0,m.f)("no_figma_basics_tooltips_onboarding"),r=(0,C.aV)(),[o,d]=s.useState(L.en.FORWARD),c=(0,m.f)(eE.FRAME),u=(0,m.f)(eE.TEXT),p=(0,m.f)(eE.FORMAT_TEXT),h=(0,m.f)(eE.DESIGN_PANEL),f=(0,m.f)(eE.UI_KITS),g=(0,m.f)(eE.UI_KITS_ENDING),{hasAnyUiKit:_,status:v}=(0,b.I7)(),j=_&&!f,k=_&&!g,E=[_].reduce((e,t)=>t?e+1:e,4),T=(0,U.Vr)(),S=()=>(0,L.eN)((0,I.getActiveTSSceneGraph)(),"TEXT",T),N=(e,n=L.en.FORWARD)=>{d(n),t(l.b({[e]:!0}))},A=(e,n=L.en.BACKWARD)=>{d(n),t(l.b({[e]:!1}))},P=(e,t)=>{o===L.en.FORWARD?N(t):A(e)},D=s.useCallback(()=>{e(),t(l.b({no_figma_basics_tooltips_onboarding:!0}))},[e,t]);return n||r||"loading"===v?null:(0,i.jsx)("div",{"data-testid":"no-figma-basics-step",children:(()=>{if(j)return(0,i.jsx)(ew,{onNext:()=>N(_?eE.UI_KITS:eE.PRESETS),onClose:D,currentStepNum:1,totalNumSteps:E,useLoadingBar:!0});if(c){if(!h)return(0,i.jsx)(H,{onPrimaryCtaClick:()=>N(eE.DESIGN_PANEL),onSecondaryCtaClick:()=>A(eE.FRAME),onClose:D,skip:()=>P(eE.FRAME,eE.DESIGN_PANEL)});if(!u)return(0,i.jsx)(R,{onNext:()=>N(eE.TEXT),onPrevious:()=>A(eE.DESIGN_PANEL),onClose:D,currentStepNum:3,totalNumSteps:E,useLoadingBar:!0});if(!p)return(0,i.jsx)(O.P,{onPrimaryCtaClick:()=>N(eE.FORMAT_TEXT),onSecondaryCtaClick:()=>A(eE.TEXT),onClose:D,lowerLeftText:(0,i.jsx)(w.uY,{currentStepNum:4,totalNumSteps:E,useLoadingBar:!0}),skip:()=>{o===L.en.FORWARD?N(eE.FORMAT_TEXT):A(eE.TEXT)},getNodeToSelect:S});else if(k)return(0,i.jsx)(z,{onPrimaryCtaClick:()=>N(_?eE.UI_KITS_ENDING:eE.PRESETS_ENDING),onSecondaryCtaClick:()=>A(eE.FORMAT_TEXT),onClose:D,currentStepNum:5,totalNumSteps:E,useLoadingBar:!0,primaryCtaProps:{ctaText:(0,x.tx)("tooltips_plus_onboarding.done"),ctaTrackingDescriptor:y.c.DONE}});else return(0,i.jsx)(em,{markComplete:D})}{let e=_?()=>A(eE.UI_KITS):void 0;return(0,i.jsx)(M,{currentStepNum:1,totalNumStep:E,onPrimaryCtaClick:()=>N(eE.FRAME),onSecondaryCtaClick:e,onClose:D,skip:()=>{P(eE.PRESETS,eE.FRAME)},useLoadingBar:!0,hasUiKits:_})}})()})}function eS(e){let[t,n]=s.useState(!1),a=(0,V.Z)(),r=s.useRef(null),l=e.getNodeForViewportFocus?.(),o=e.getNodeToSelect();return(0,N.h)(()=>{queueMicrotask(async function(){o&&null===r.current?(await (0,L.zU)({navigate:a,guidToFocus:l?.guid,guidToSelect:o.guid}),n(!0),r.current=o):o||r.current||e.onNext()})}),(0,i.jsx)(w.TG,{arrowPosition:F.F_.LEFT_TITLE,disableHighlight:!0,dismissModal:e.onClose,lowerLeftText:(0,i.jsx)(w.uY,{currentStepNum:e.currentStepNum,totalNumSteps:e.totalNumSteps}),onPrimaryCtaClick:e.onNext,pointsTo:"leftPanel",targetKey:r.current?r.current.guid:O.B,title:(0,x.tx)("starting_points_onboarding.edit_text_step.title"),trackingContextName:"Starting Points Tooltips Edit Text Step",visible:t,children:(0,x.tx)("starting_points_onboarding.edit_text_step.description")})}function eI(e){let t=(0,h.Lh)(h.D8.PAINT_PANEL_ROW,"paint-1-0");return(0,i.jsx)(w.VF,{arrowPosition:F.F_.RIGHT_BODY,disableHighlight:!0,dismissModal:e.onClose,lowerLeftText:(0,i.jsx)(w.uY,{currentStepNum:e.currentStepNum,totalNumSteps:e.totalNumSteps}),onPrimaryCtaClick:e.onNext,onSecondaryCtaClick:e.onPrevious,pointsTo:"designPanel",targetKey:t,title:(0,x.tx)("starting_points_onboarding.fills_step.title"),trackingContextName:"Starting Points Fills Step",children:(0,x.tx)("starting_points_onboarding.fills_step.description")})}var eN=n(643330);function eA(e){let[t,n]=s.useState(!1),a=(0,V.Z)();return((0,N.h)(()=>{queueMicrotask(async function(){let t=e.getNodeForViewportFocus?.(),i=e.getNodeToSelect();i&&"FRAME"===i.type?(await (0,L.zU)({navigate:a,guidToFocus:t?.guid,guidToSelect:i.guid}),n(!0)):e.flowDirection===L.en.FORWARD?e.onNext():e.onPrevious()})}),t)?(0,i.jsx)(w.VF,{arrowPosition:eN.F_.RIGHT_BODY,disableHighlight:!0,dismissModal:e.onClose,lowerLeftText:(0,i.jsx)(w.uY,{currentStepNum:e.currentStepNum,totalNumSteps:e.totalNumSteps}),onPrimaryCtaClick:e.onNext,onSecondaryCtaClick:e.onPrevious,pointsTo:"designPanel",targetKey:"design-panel-container",title:(0,x.tx)("starting_points_onboarding.properties_step.title"),trackingContextName:"Starting Points Properties Step",children:(0,x.tx)("starting_points_onboarding.properties_step.description")}):null}var eL=n(440043),eM=n(59975);function eO(e){return(0,i.jsx)(w.VF,{disableHighlight:!0,dismissModal:e.onClose,lowerLeftText:(0,i.jsx)(w.uY,{currentStepNum:e.currentStepNum,totalNumSteps:e.totalNumSteps}),onPrimaryCtaClick:e.onNext,onSecondaryCtaClick:e.onPrevious,pointsTo:"toolbar",shouldCenterArrow:F.EL.BEST_EFFORT,targetKey:eM.aE,title:(0,x.tx)("starting_points_onboarding.toolbar_step.title"),trackingContextName:"Tooltips+ Text Step",children:(0,x.tx)("starting_points_onboarding.toolbar_step.description",{actionsSvg:(0,i.jsx)("span",{style:{display:"inline-block",height:"16px",width:"21px"},children:(0,i.jsx)(eL.t,{})}),strongActions:(0,i.jsx)("strong",{children:(0,x.tx)("qa.extensions.tooltip_actions")})})})}let eR={EDIT_TEXT:"starting_points_tooltips_edit_text_step",PROPERTIES:"starting_points_tooltips_properties_step",FILLS:"starting_points_tooltips_fills_step",TOOLBAR:"starting_points_tooltips_toolbar_step",ASSETS:"starting_points_tooltips_assets_step"};function eP({completeOverlay:e}){let t=(0,a.wA)(),n=(0,m.f)("seen_starting_points_tooltips_onboarding"),r=(0,m.f)(eR.EDIT_TEXT),o=(0,m.f)(eR.PROPERTIES),d=(0,m.f)(eR.FILLS),c=(0,m.f)(eR.TOOLBAR),u=(0,m.f)(eR.ASSETS),p=!!(0,m.f)("started_figma_basics_onboarding"),h=(0,C.aV)(),[f,g]=(0,s.useState)(L.en.FORWARD),_=(0,a.d4)(e=>e.mirror.sceneGraph),v=(e,n=L.en.FORWARD)=>{g(n),t(l.b({[e]:!0}))},b=(e,n=L.en.BACKWARD)=>{g(n),t(l.b({[e]:!1}))},j=()=>{e(),t(l.b({seen_starting_points_tooltips_onboarding:!0}))};return(s.useEffect(()=>{n||h||p||t(l.b({started_figma_basics_onboarding:!0}))},[h,n,t,p]),n||h)?null:(0,i.jsx)("div",{children:r?o?d?c?u?void 0:(0,i.jsx)(z,{onPrimaryCtaClick:()=>v(eR.ASSETS),onSecondaryCtaClick:()=>b(eR.TOOLBAR),onClose:j,currentStepNum:5,totalNumSteps:5,primaryCtaProps:{ctaText:(0,x.tx)("tooltips_plus_onboarding.done"),ctaTrackingDescriptor:y.c.DONE},forStartingPoints:!0}):(0,i.jsx)(eO,{onNext:()=>v(eR.TOOLBAR),onPrevious:()=>b(eR.FILLS),onClose:j,currentStepNum:4,totalNumSteps:5}):(0,i.jsx)(eI,{onNext:()=>v(eR.FILLS),onPrevious:()=>b(eR.PROPERTIES),onClose:j,currentStepNum:3,totalNumSteps:5}):(0,i.jsx)(eA,{onNext:()=>v(eR.PROPERTIES),onPrevious:()=>b(eR.EDIT_TEXT),onClose:j,currentStepNum:2,totalNumSteps:5,getNodeToSelect:()=>(0,L.nt)(_),flowDirection:f}):(0,i.jsx)(eS,{onNext:()=>v(eR.EDIT_TEXT),onClose:j,currentStepNum:1,totalNumSteps:5,getNodeToSelect:()=>(0,L.l7)(_)})})}let eD="tooltips_plus_onboarding_reset_onboarding";function eF(){let e=(0,a.wA)(),t=(0,p.iZ)(),n=u.q5()?.canEditCanvas,x=(0,r.md)(c.NT),_=(0,r.md)(c.g5),{isShowing:y,complete:v,show:b,uniqueId:C}=(0,d.e)({overlay:g.WD4,priority:f.N.OVERRIDING_MODAL},[_,x]),j=!!(0,m.f)("editor_onboarded"),k=!!(0,m.f)("figma_basics_tooltips_onboarding"),w=!!(0,m.f)("no_figma_basics_tooltips_onboarding"),E=!!(0,m.f)("seen_starting_points_tooltips_onboarding"),T=!!(0,m.f)("started_figma_basics_onboarding"),S=(0,u.Cq)({useSinatraType:!0}),I=(0,h.WO)(t?.id,S,[L.d4]),[N,A]=s.useState(!1),[M,O]=s.useState(!1);(0,o.E)(C,["Reset Onboarding",eD],()=>{if(!t||!S)return;let n=I?{figma_basics_tooltips_onboarding:!1,[B.NAV]:!1,[B.FRAME]:!1,[B.TEXT]:!1,[B.FORMAT_TEXT]:!1,[B.DESIGN_PANEL]:!1,[B.PRESETS_ENDING]:!1,[B.UI_KITS_ENDING]:!1}:{no_figma_basics_tooltips_onboarding:!1,[eE.FRAME]:!1,[eE.TEXT]:!1,[eE.FORMAT_TEXT]:!1,[eE.DESIGN_PANEL]:!1,[eE.PRESETS]:!1,[eE.PRESETS_ENDING]:!1,[eE.VISUAL_ASSETS]:!1,[eE.UI_KITS]:!1,[eE.UI_KITS_ENDING]:!1,[eE.PANNING_AND_ZOOMING_GLOW_OVERLAY]:!1,[eE.PANNING_AND_ZOOMING_TOOLTIP]:!1,design_panel_step_shown:!1,format_text_step_shown:!1,started_figma_basics_onboarding:!1};e(l.b(n))}),(0,o.E)(C,"starting_points_template_inserted",()=>{A(!0)}),(0,o.E)(C,"starting_points_basics_template_inserted",()=>{O(!0)});let R=s.useCallback(()=>{t&&S&&n&&!k&&(I||!T&&!w&&!E&&!j)&&(y||b())},[t,S,n,k,j,I,y,E,b,T,w]);return(s.useEffect(()=>{R()},[R]),y)?I||M?(0,i.jsx)("div",{"data-testid":"figma-basics-tooltips-onboarding",children:(0,i.jsx)(G,{completeOverlay:v})}):N?(0,i.jsx)("div",{"data-testid":"starting-points-tooltips-onboarding",children:(0,i.jsx)(eP,{completeOverlay:v})}):(0,i.jsx)("div",{"data-testid":"no-basics-file-tooltips-onboarding",children:(0,i.jsx)(eT,{completeOverlay:v})}):null}},807289:(e,t,n)=>{n.d(t,{H:()=>L});var i=n(104076),s=n(716976),a=n(130249),r=n(242069),l=n(266808),o=n(170627),d=n(980852),c=n(812714),u=n(795033),p=n(883765),m=n(74620),h=n(211862),f=n(592726),g=n(331497),x=n(577932),_=n(580276),y=n(107799),v=n(68902),b=n(906540),C=n(540041),j=n(266230),k=n(129575),w=n(743558),E=n(231918),T=n(121363),S=n(589977),I=n(32404),N=n(429033),A=n(76578);function L({codeInstanceNodeGuid:e,codeInstanceNode:t,entryPointCodeFileGuid:n,entryPointCodeFile:L,previewState:M,isResizingPanel:O,newCodeLayerState:R,setCodeInstanceNode:P,setEntryPointCodeFile:D,forceReadOnly:F,hideChatBox:z,onChatInputBlur:B,onChatInputFocus:G,featureType:U}){let V=(0,f.iZ)(),H=(0,h.tS)();(0,I.zA)();let K=(0,k.di)({codeFileNode:L});(0,N.m)({chatController:K});let W=(0,s.useMemo)(()=>(0,i.jsx)(C.d,{nodeGuid:n}),[n]),q=(0,u.Xr)((0,y.mC)(n)),X=(0,_.Xu)(),Y=(0,u.md)(v.LR),{changedFiles:Z}=(0,w.E)(L??null,K,U),J=(0,T.P)(),Q=(0,a.og)(L?.codeFileFullPath),$=(0,s.useMemo)(()=>(0,x.qE)(H||null,n),[H,n]),ee=(0,s.useCallback)((e,t,n,i)=>{p.az.trackDefinedEvent("ai_for_production.code_chat_design_node_pasted",{number_of_nodes:t,number_of_instances:n,persistent_entity_id:$,file_key:H||void 0,attachmentId:i})},[H,$]);return function(e,t,n){let i=(0,m.eY)(),{attachments:a,setAttachments:r,claimAPendingAttachmentOrMakeOne:o,createPendingAttachmentsForNodes:d}=(0,j._9)(e),c=l.Ez5?.codeSelection(),u=(0,g.ut)(c?.selectedPromptFrames,[]),p=(0,s.useCallback)(()=>{let e=u?.[0]??"";e&&t===A.Oy.EMPTY&&((0,E.E)([e],i,r,()=>{},n,o,void 0,d),l.n1M?.clearSelectedPromptFrames())},[u,t,i,r,n,o,d]);(0,s.useEffect)(()=>{0===a.length&&p()},[a,p,t])}(n,M,(0,s.useCallback)(({step:e,attachmentType:t,attachmentId:n,nodeGuid:i,elapsedMs:s,error:a,nodeCount:r,instanceCount:o})=>{e===l.doA.START&&"FIGMA_NODE"===t&&r&&o&&ee(i,r,o,n),e===l.doA.START&&u.zl.set((0,j.wd)(i),performance.now()),p.az.trackDefinedEvent("ai_for_production.code_chat_figma_attachment_funnel",{step:l.doA[e],featureType:U,attachmentType:t,attachmentId:n,fileKey:H||void 0,nodeGuid:i,elapsedMs:s,error:a,nodeCount:r,instanceCount:o,persistentEntityId:$})},[U,$,H,ee])),(0,i.jsx)(b.U,{chatController:K,chatMessagesNode:L,chatMessagesNodeGuid:n,codeInstanceGuid:e,emptyState:W,enableAssetImport:(0,c.kc)().bake_import,enableDragUpload:!0,enableDsImport:(0,c.kc)().bake_ds_import_plan_enabled,enableImageAttachment:!0,featureType:U,forceReadOnly:F,hideChatBox:z,isResizingPanel:O,onChatInputBlur:B,onChatInputFocus:G,rootPath:Q,sendMessage:async(i,s)=>{let a=i.plainText;a||(a=i.hidden?"":u.zl.get((0,y.mC)(n)));let p={...i,plainText:a},m=t,h=L;if((0,c.kc)().bake_canvas_server_files_client&&R){if(o.l7.ai("initialize-new-make-layer",()=>{l.glU?.initializeNewMakeLayer(e,n,R.initializingNodeIds)}),m=(0,d.getActiveTSSceneGraph)().get(e),h=(0,d.getActiveTSSceneGraph)().get(n),!m||!h){console.warn("Failed to initialize new make layer");return}P(m),D(h)}q(""),await (0,S.v)({featureType:U,userMessageContent:p,rawUserChatDetails:s,user:V,chatMessagesNode:h,chatController:K,setInput:q,fileKey:H,autoFixingUserMessageId:null,canUseSupabase:X,changedFiles:Z,model:J,instanceNode:m,requestInitiator:r.bG.USER,mcpPreferences:Y,isMcpClientEnabled:!1})},setInput:q,showCodeStreaming:!0,showCopyButton:!0})}},76578:(e,t,n)=>{n.d(t,{tX:()=>q,Oy:()=>J});var i=n(104076),s=n(716976),a=n(59423),r=n(242069),l=n(742212),o=n(420680),d=n(917360),c=n(224781),u=n(336518);let p=(0,s.memo)(function(e){return(0,i.jsx)("svg",{width:"16",height:"16",fill:"none",viewBox:"0 0 16 16",...e,"data-fpl-icon-size":"16",children:(0,i.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",d:"M8.525 5.525a.5.5 0 0 1 .707.708L7.465 8l1.767 1.768a.5.5 0 0 1-.707.707l-2.12-2.121a.5.5 0 0 1 0-.707z"})})});var m=n(236901),h=n(500767),f=n(266808),g=n(980852),x=n(812714),_=n(795033);n(120440);var y=n(192075),v=n(211862),b=n(415567),C=n(835307),j=n(533144),k=n(990609),w=n(728198),E=n(107799),T=n(266230),S=n(803120),I=n(129575),N=n(492130),A=n(825543),L=n(329232),M=n(389006),O=n(776975),R=n(703375),P=n(315922),D=n(946408),F=n(983685),z=n(855492),B=n(401763),G=n(652931),U=n(842771),V=n(444713),H=n(407465),K=n(20949),W=n(807289);function q({forceReadOnly:e,hideToolbar:t,hideChatBox:n}){let a=(0,_.md)(E.Vp),l=function(){let e=(0,_.md)(j.wh),t=(0,C.Fk)((e,t)=>t.flatMap(t=>e.get(t)?.guid??[]),e);return Array.from((0,s.useMemo)(()=>{let e=(0,g.getActiveTSSceneGraph)();return new Map(t.map(t=>[t,e.get(t)]).filter(e=>null!=e[1]))},[t]).values())[0]}()??null,o=(0,x.kc)().bake_canvas&&(l||a?.newCodeInstanceNodeId),d=(0,s.useCallback)(()=>{_.zl.set(E.Vp,null)},[]);return o?(0,i.jsx)(Q,{codeInstanceNodeToEdit:l,newCodeLayerState:a,onClose:d,forceReadOnly:e,showToolbar:!t,hideChatBox:n,featureType:r.lV.FIGMAKE_IN_DESIGN}):null}function X({name:e,onClose:t}){return(0,i.jsxs)("div",{className:"x1kzcg16 xlup9mm x1yjdb4r xso031l x1q0q8m5 xertd99 x78zum5 x1nfngrj xkh2ocl x6s0dn4",children:[(0,i.jsx)(o.K,{onClick:t,"aria-label":(0,y.t)("general.back"),children:(0,i.jsx)(p,{})}),(0,i.jsx)(d.J,{className:"xrlp15q x1nmd3yn xm735u9 xkbmbem x3wk4up x1akne3o",htmlAttributes:{"data-tooltip":e,"data-tooltip-type":"text"},children:e}),(0,i.jsx)(B.M,{})]})}function Y({panelConfiguration:e,handleSegmentChange:t}){return(0,i.jsx)("div",{className:"x78zum5 x6s0dn4 x1excjyp",children:(0,i.jsxs)(c.bL,{value:e,onChange:t,legend:(0,i.jsx)(u.q,{children:(0,y.t)("sites.panel.code_window_display_picker.hidden_legend")}),children:[(0,i.jsx)(c.c$,{"aria-label":(0,y.t)("make.window.preview"),value:"preview",icon:(0,i.jsx)(m.T,{})}),(0,i.jsx)(c.c$,{"aria-label":(0,y.t)("make.window.code"),value:"code",icon:(0,i.jsx)(h.U,{})})]})})}function Z({handleRefresh:e,panelConfiguration:t,handleSegmentChange:n,codeInstanceNode:s,sitesPreview:a,showToolbar:r}){let l=(0,O.rh)(s),{handleScaleLinearly:o}=(0,U.gZ)({forceRefresh:e});return l?(0,i.jsxs)("div",{className:"x1vvogim xaope02 x1yjdb4r xso031l x1q0q8m5 xertd99 x78zum5 x6s0dn4 x1nfngrj",children:[(0,i.jsx)(Y,{panelConfiguration:t,handleSegmentChange:n}),(0,i.jsx)(K.n,{}),r&&(0,i.jsx)("div",{className:"x1iyjqo2",children:(0,i.jsx)(w.A,{codeSelectionToRender:l,refresh:e,onScaleLinearly:o,sitesPreview:a??void 0})})]}):null}var J=(e=>(e[e.EMPTY=0]="EMPTY",e[e.THINKING=1]="THINKING",e[e.LOADED=2]="LOADED",e))(J||{});function Q({codeInstanceNodeToEdit:e,newCodeLayerState:t,onClose:n,forceReadOnly:l,hideChatBox:o,featureType:d,showToolbar:c}){let{handleRegisterIframeRefresh:u,handleRefresh:p}=(0,U.q3)(e),[m,h]=(0,s.useState)(null),[g,x]=s.useState("preview"),[y,v]=s.useState(e),[b,C]=s.useState(()=>(0,A.hh)(e)),[k,w]=s.useState(!1),S=y?.guid??t?.newCodeInstanceNodeId,I=b?.guid??t?.newEntryPointCodeFileNodeId,N=function(e,t){let{exchange:n}=(0,E.$W)(e),i=function(e){let[t,n]=s.useState(()=>ee(e?.sourceCode));return(0,s.useEffect)(()=>{t&&n(ee(e?.sourceCode))},[e?.sourceCode,t,n]),t}(t);return i&&n?.messages?.length?1:i?0:2}(I,b),{setAttachments:L}=(0,T._9)(I),M=s.useCallback(()=>{(0,j.UM)(),n(),L([]),f.n1M?.clearPastedDesign()},[n,L]),O=s.useCallback(e=>{f.Ez5?.uiState()?.isMakeModalChatInputFocused.set(e)},[]),R=s.useCallback(()=>{x("code")},[]);(0,F.sl)(R);let P=s.useRef(null),D=(0,U.wE)(y),z=(0,_.md)(j.ZY),B=D&&!z;if(!y?.isAlive&&!t?.newCodeInstanceNodeId||!S||!I)return null;let G=(0,i.jsx)($,{chatNode:b,codeInstanceNode:y,featureType:r.lV.FIGMAKE_IN_DESIGN,forceReadOnly:l,isDragging:k,panelConfiguration:B?"preview":g,previewState:N,registerIframeRefresh:u,registerSitesPreview:h,windowRef:P});return(0,i.jsx)("div",{className:"x10l6tqk x1yjdb4r x13vifvy xu96u03 x3m8u43 x1ey2m1c x1n327nk",children:(0,i.jsx)(a.YZ,{direction:"horizontal",children:B?(0,i.jsxs)(a.Zk,{children:[(0,i.jsx)(X,{onClose:M,name:y?.name??""}),G]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(a.Zk,{defaultSize:35,minSize:20,children:(0,i.jsxs)("div",{className:"x78zum5 xdt5ytf x5yr21d",children:[(0,i.jsx)(X,{onClose:M,name:y?.name??""}),(0,i.jsx)(W.H,{codeInstanceNode:y,codeInstanceNodeGuid:S,entryPointCodeFile:b,entryPointCodeFileGuid:I,featureType:d,forceReadOnly:l,hideChatBox:o,isResizingPanel:k,newCodeLayerState:t,onChatInputBlur:()=>{O(!1)},onChatInputFocus:()=>{O(!0)},previewState:N,setCodeInstanceNode:v,setEntryPointCodeFile:C})]})}),(0,i.jsx)(a.TW,{onDragging:e=>{w(e)},className:"x1i1rx1s xbpqucl"}),(0,i.jsx)(a.Zk,{children:(0,i.jsxs)("div",{className:"x78zum5 xdt5ytf x5yr21d",children:[(0,i.jsx)(Z,{codeInstanceNode:y,sitesPreview:m,handleRefresh:p,panelConfiguration:g,handleSegmentChange:x,showToolbar:!!c}),G]})})]})})})}function $({registerIframeRefresh:e,registerSitesPreview:t,panelConfiguration:n,chatNode:r,codeInstanceNode:l,isDragging:o,windowRef:d,previewState:c,forceReadOnly:u,featureType:p}){let m=(0,_.md)(j.Jl),h=(0,g.getActiveTSSceneGraph)().get(m),f=(0,A.hh)(r),y=(0,I.di)({codeFileNode:r}),C=h?.guid,w=r?.guid,E=s.useCallback(e=>{if(!C)return;let t=L.O.get(C);t&&(e===N.d.BUILD_ERROR||e===N.d.RUNTIME_ERROR?t.hasErrors=!0:e===N.d.LOADED&&(t.hasErrors=!1))},[C]),T=s.useMemo(()=>{let e=r?.codeFilePath||void 0;return(0,i.jsx)(k.S,{selectedCodeFileNode:h,nodeWithChatMessages:r,featureType:p,rootPath:e})},[r,h,p]),F=s.useMemo(()=>(0,i.jsx)(M.RL,{codeFile:h,nodeWithChatMessages:r,fullHeight:!0,forceDisableEditable:u}),[r,h,u]),B=(0,v.tS)();(0,s.useEffect)(()=>{if(!C)return;let e=L.O.start(B,C);return()=>e.end()},[C,B]);let{triggerSelfHeal:U}=(0,S.u)({chatMessagesNode:r,chatController:y,disabled:!(0,x.kc)().bake_auto_error_fix,featureType:p}),K=s.useCallback((e,t,n,i)=>{f&&U(f,n,i)},[U,f]),W=(0,O.rh)(l),q=(0,b.uQ)(),[X,Y]=(0,_.fp)(V.gn),[Z,J]=(0,_.fp)(V.u3),[Q,$]=(0,_.fp)(V.dD);(0,s.useEffect)(()=>{if(Y(!0),q){let e=(0,g.getActiveTSSceneGraph)().get(q);if(e){let t=e.absoluteBoundingBox.w,n=e.absoluteBoundingBox.h;if(t>V.g_){let e=t/n,i=V.g_;J(i),$(i/e)}else if(n>V.L9){let e=t/n,i=V.L9;J(i*e),$(i)}else J(t),$(n)}}},[q,$,J,Y]);let ee=s.useMemo(()=>{let n=2===c;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{...{0:{className:"xh8yej3 x78zum5 x1iyjqo2 xs83m0k"},1:{className:"xh8yej3 x1iyjqo2 xs83m0k x1s85apg x47corl"}}[!n<<0],children:(0,i.jsx)(H.m,{children:(0,i.jsx)(D.m,{chatNodeId:w??null,codeSelectionToRender:W,disableDrawer:!0,disablePointerEvents:o,isVisible:!0,jsxDev:(0,x.kc)().code_layers_click_to_inspect,onError:K,onPreviewStateChange:E,onRegisterIframeRefresh:e,onRegisterSitesPreview:t,sandbox:null,showViewOptions:!0,surface:R.e.DesignInSeparateTabPreview})})}),(0,i.jsx)(P._,{codeSelectionToRender:W??void 0,windowRef:d})]})},[W,d,E,o,w,K,c,e,t]);return(0,i.jsxs)("div",{className:"x78zum5 xdt5ytf x5yr21d",children:["preview"===n&&(0,i.jsx)("div",{className:"xh8yej3 x5yr21d x78zum5 xdt5ytf xlqzeqv x6s0dn4",children:1===c?(0,i.jsx)(G.Ay,{}):0!==c&&l?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"xh8yej3",children:(0,i.jsx)(V.Yd,{})}),ee]}):(0,i.jsx)(z.p,{})}),"code"===n&&(0,i.jsxs)(a.YZ,{direction:"horizontal",children:[(0,i.jsx)(a.Zk,{defaultSize:35,children:T}),(0,i.jsx)(a.Zk,{defaultSize:65,children:F})]})]})}function ee(e){return!e||""===(e=e.trim())||e===l.j||e===l.o}},98622:(e,t,n)=>{n.d(t,{n:()=>h});var i=n(104076),s=n(716976),a=n(237420),r=n(420680),l=n(180),o=n(192075),d=n(147046),c=n(506192),u=n(792028),p=n(349311),m=n(702388);function h(e){let t=(0,a.wA)(),n=(0,c.Um)(),h=n?.type===m.kt,f=e.resourceType===u.bD.WIDGET?(0,o.t)("community.plugins.create_new_widget"):(0,o.t)("community.plugins.create_new_plugin"),g=s.useCallback(e=>{h?t(d.oB()):t(d.j7({type:m.kt,data:{targetRect:e.currentTarget?.getBoundingClientRect()}}))},[t,h]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.K,{"aria-label":f,htmlAttributes:{"data-tooltip-type":p.Ib.TEXT,"data-tooltip":f},onClick:g,children:(0,i.jsx)(l.$,{})}),h&&(0,i.jsx)(m.Pq,{resourceType:e.resourceType})]})}},203426:(e,t,n)=>{n.d(t,{W:()=>_});var i=n(104076),s=n(716976),a=n(237420),r=n(293422),l=n(180),o=n(620480);n(120440);var d=n(555013),c=n(236631),u=n(192075),p=n(147046),m=n(912697);function h(){return(0,i.jsxs)("svg",{width:"64",height:"64",viewBox:"0 0 64 64",fill:"none",children:[(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M25.5594 4.51951C27.2967 3.55473 29.3688 3 31.5833 3C33.7979 3 35.87 3.55473 37.6073 4.51951L36.6363 6.26799C35.2024 5.47169 33.4655 5 31.5833 5C29.7012 5 27.9643 5.47169 26.5304 6.26799L25.5594 4.51951ZM40.1279 6.44958C41.6462 8.03598 42.5833 10.0811 42.5833 12.3333C42.5833 13.1443 42.4615 13.9318 42.2328 14.6823L40.3197 14.0993C40.492 13.5337 40.5833 12.9425 40.5833 12.3333C40.5833 10.6589 39.8909 9.09446 38.683 7.83249L40.1279 6.44958ZM20.5833 12.3333C20.5833 10.0811 21.5204 8.03598 23.0388 6.44958L24.4837 7.83249C23.2758 9.09446 22.5833 10.6589 22.5833 12.3333C22.5833 12.9425 22.6746 13.5337 22.847 14.0993L20.9339 14.6823C20.7052 13.9318 20.5833 13.1443 20.5833 12.3333ZM40.5429 17.7548C41.0494 17.1527 41.4763 16.4937 41.8068 15.7886L39.9959 14.9398C39.7426 15.4802 39.4111 15.9939 39.0096 16.4706C38.5701 16.9926 38.4772 17.6483 38.5592 18.1861C39.3313 18.0684 40.5364 17.8847 40.5364 17.8847C40.5289 17.8355 40.5321 17.7961 40.5377 17.7719C40.5397 17.7629 40.5417 17.7575 40.5429 17.7548ZM22.6273 17.7589C22.1192 17.1557 21.6911 16.4953 21.3598 15.7886L23.1708 14.9398C23.4241 15.4802 23.7556 15.9939 24.1571 16.4706C24.5966 16.9926 24.6894 17.6483 24.6075 18.1861C23.8353 18.0684 23.4024 18.0024 22.6303 17.8847C22.6378 17.8355 22.6346 17.7961 22.629 17.7719C22.6238 17.7492 22.619 17.7491 22.6273 17.7589ZM12.7855 18.8279C13.5007 18.3073 14.3826 18 15.3333 18H18.2724V20H15.3333C14.8195 20 14.3471 20.1649 13.9624 20.4449C13.5028 19.8134 13.2451 19.4594 12.7855 18.8279ZM19.7419 18H22.6229H22.681C22.6637 18 22.6432 18.0029 22.6222 18.0095C22.616 18.0115 22.6103 18.0136 22.6051 18.0158C22.6051 18.0158 23.6596 18.6058 24.3353 18.9838C24.047 19.4991 23.4839 20 22.681 20H19.7419V18ZM40.5444 18.0095C40.5235 18.0029 40.5029 18 40.4856 18H40.5438H43.7581V20H40.4856C39.6827 20 39.1196 19.4991 38.8313 18.9838C39.507 18.6058 40.5615 18.0158 40.5615 18.0158C40.5564 18.0136 40.5506 18.0115 40.5444 18.0095ZM45.3943 18H48.6667C51.0599 18 53 19.9401 53 22.3333V26.7778H51V22.3333C51 21.0447 49.9553 20 48.6667 20H45.3943V18ZM11 22.3333C11 21.3826 11.3073 20.5007 11.8279 19.7855C12.4594 20.2451 12.8134 20.5028 13.4449 20.9624C13.1649 21.3471 13 21.8195 13 22.3333V25.4391H11V22.3333ZM11 30.0977V26.9919H13V30.0395V30.0977C13 30.0804 12.9971 30.0598 12.9905 30.0389C12.9885 30.0327 12.9864 30.027 12.9842 30.0218C12.9842 30.0218 12.3942 31.0763 12.0162 31.752C11.5009 31.4637 11 30.9006 11 30.0977ZM18.6667 30C18.0575 30 17.4663 30.0913 16.9007 30.2637L16.3177 28.3505C17.0682 28.1218 17.8557 28 18.6667 28C20.9189 28 22.964 28.9371 24.5504 30.4555L23.1675 31.9003C21.9055 30.6924 20.3411 30 18.6667 30ZM16.0602 30.5874C15.5198 30.8407 15.0061 31.1722 14.5294 31.5737C14.0074 32.0133 13.3517 32.1061 12.8139 32.0241C12.9316 31.252 12.9976 30.8191 13.1153 30.047C13.1645 30.0545 13.2039 30.0512 13.2281 30.0457C13.2371 30.0436 13.2425 30.0416 13.2452 30.0404C13.8473 29.5339 14.5063 29.107 15.2114 28.7765L16.0602 30.5874ZM53 29V37.8889H51V29H53ZM26 39C26 37.1179 25.5283 35.381 24.732 33.9471L26.4805 32.9761C27.4453 34.7134 28 36.7854 28 39C28 41.2146 27.4453 43.2866 26.4805 45.0239L24.732 44.0529C25.5283 42.619 26 40.8821 26 39ZM53 40.1111V49H51V40.1111H53ZM12.8139 45.9759C13.3517 45.8939 14.0074 45.9867 14.5293 46.4263C15.0061 46.8278 15.5198 47.1593 16.0602 47.4126L15.2114 49.2235C14.5063 48.893 13.8473 48.466 13.2452 47.9596C13.2425 47.9584 13.2371 47.9564 13.2281 47.9543C13.2039 47.9487 13.1645 47.9455 13.1153 47.953C13.1153 47.953 12.9316 46.748 12.8139 45.9759ZM18.6667 48C20.3411 48 21.9055 47.3076 23.1675 46.0997L24.5504 47.5445C22.964 49.0629 20.9189 50 18.6667 50C17.8557 50 17.0682 49.8782 16.3177 49.6495L16.9007 47.7363C17.4663 47.9087 18.0575 48 18.6667 48ZM11 47.9023C11 47.0994 11.5009 46.5363 12.0162 46.248C12.3942 46.9237 12.9842 47.9782 12.9842 47.9782C12.9864 47.973 12.9885 47.9673 12.9905 47.9611C12.9971 47.9402 13 47.9196 13 47.9023V47.9605V51.0081H11V47.9023ZM53 51.2222V55.6667C53 58.0599 51.0599 60 48.6667 60H44.2222V58H48.6667C49.9553 58 51 56.9553 51 55.6667V51.2222H53ZM11 55.6667V52.5609H13V55.6667C13 56.1805 13.1649 56.6529 13.4449 57.0376L11.8279 58.2145C11.3073 57.4993 11 56.6174 11 55.6667ZM15.3333 60C14.3826 60 13.5007 59.6927 12.7855 59.1721L13.9624 57.5551C14.3471 57.8351 14.8195 58 15.3333 58H19.7778V60H15.3333ZM30.8889 60H22V58H30.8889V60ZM42 60H33.1111V58H42V60Z",fill:"var(--color-icon-tertiary)"}),(0,i.jsx)("path",{d:"M13.9624 20.4449C13.5028 19.8134 13.2451 19.4594 12.7855 18.8279C12.3424 19.1503 12.1474 19.3465 11.8279 19.7855C12.4594 20.2451 12.8134 20.5028 13.4449 20.9624C13.6139 20.7303 13.7189 20.6222 13.9624 20.4449Z",fill:"var(--color-icon-tertiary)"}),(0,i.jsx)("path",{d:"M13 30.0395V30.0977C13 30.0804 12.9971 30.0598 12.9905 30.0389C12.9885 30.0327 12.9864 30.027 12.9842 30.0218L12.0162 31.752C12.2838 31.9017 12.5 31.9763 12.8139 32.0241C12.8139 32.0241 12.9976 30.8191 13.1153 30.047C13.0703 30.0441 13 30.0395 13 30.0395Z",fill:"var(--color-icon-tertiary)"}),(0,i.jsx)("path",{d:"M13.1153 47.953L12.8139 45.9759C12.6557 46 12.195 46.1479 12.0162 46.248L12.9842 47.9782C12.9864 47.973 12.9885 47.9673 12.9905 47.9611C12.9971 47.9402 13 47.9196 13 47.9023V47.9605L13.1153 47.953Z",fill:"var(--color-icon-tertiary)"}),(0,i.jsx)("path",{d:"M24.6075 18.1861C23.8353 18.0684 23.4024 18.0024 22.6303 17.8847C23.2962 18.3139 23.6695 18.5546 24.3353 18.9838C24.451 18.7772 24.5564 18.5211 24.6075 18.1861Z",fill:"var(--color-icon-tertiary)"}),(0,i.jsx)("path",{d:"M22.6229 18H22.681C22.6637 18 22.6432 18.0029 22.6222 18.0095C22.616 18.0115 22.6103 18.0136 22.6051 18.0158C22.6051 18.0158 23.6596 18.6058 24.3353 18.9838C23.6695 18.5546 23.2962 18.3139 22.6303 17.8847C22.6274 17.9297 22.6229 18 22.6229 18Z",fill:"var(--color-icon-tertiary)"}),(0,i.jsx)("path",{d:"M40.5364 17.8847C40.5364 17.8847 39.3313 18.0684 38.5592 18.1861C38.5768 18.3016 38.6904 18.7319 38.8313 18.9838C39.507 18.6058 40.5615 18.0158 40.5615 18.0158C40.5564 18.0136 40.5506 18.0115 40.5444 18.0095C40.5235 18.0029 40.5029 18 40.4856 18H40.5438L40.5364 17.8847Z",fill:"var(--color-icon-tertiary)"})]})}function f(){return(0,i.jsxs)("svg",{width:"64",height:"64",viewBox:"0 0 64 64",fill:"none",children:[(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M35.4987 5.63364L31.9998 2.13477L28.501 5.63364L29.9152 7.04785L31.9998 4.96319L34.0845 7.04785L35.4987 5.63364ZM5.63785 28.4967L7.05206 29.911L4.96319 31.9998L7.05206 34.0887L5.63785 35.5029L2.13477 31.9998L5.63785 28.4967ZM28.5009 58.3659L29.9151 56.9517L31.9998 59.0365L34.0846 56.9517L35.4988 58.3659L31.9998 61.8649L28.5009 58.3659ZM58.3702 35.4946L61.8649 31.9998L58.3702 28.5051L56.9559 29.9193L59.0365 31.9998L56.9559 34.0804L58.3702 35.4946ZM37.2481 7.38307L35.8339 8.79729L39.9186 12.8819H45.6994V10.8819H40.747L37.2481 7.38307ZM48.1756 10.8819V12.8819H51.1281V15.8344H53.1281V10.8819H48.1756ZM53.1281 18.3106H51.1281V24.0914L55.2086 28.1719L56.6228 26.7577L53.1281 23.263V18.3106ZM56.6228 37.2419L55.2086 35.8277L51.1281 39.9082V45.689H53.1281V40.7367L56.6228 37.2419ZM53.1281 48.1652H51.1281V51.1175H48.1757V53.1175H53.1281V48.1652ZM45.6995 53.1175V51.1175H39.9188L35.834 55.2023L37.2483 56.6165L40.7472 53.1175H45.6995ZM26.7514 56.6165L28.1656 55.2023L24.0809 51.1175H18.3085V53.1175H23.2525L26.7514 56.6165ZM15.8365 53.1175V51.1175H12.8925V48.1735H10.8925V53.1175H15.8365ZM10.8925 45.7015H12.8925V39.9291L8.80361 35.8402L7.38939 37.2545L10.8925 40.7575V45.7015ZM7.38939 26.7452L8.80361 28.1594L12.8925 24.0705V18.298H10.8925V23.2421L7.38939 26.7452ZM10.8925 15.826H12.8925V12.8819H15.8365V10.8819H10.8925V15.826ZM18.3086 10.8819V12.8819H24.0811L28.1657 8.79729L26.7515 7.38307L23.2527 10.8819H18.3086Z",fill:"var(--color-icon-tertiary)"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M33.3956 19.5055L26.4844 29.1128H41.4723L28.9966 45.6671L27.3994 44.4634L37.4607 31.1128H22.582L31.7721 18.3375L33.3956 19.5055Z",fill:"var(--color-icon-tertiary)"})]})}var g=n(506192),x=n(702388);function _({isWidget:e}){let t=(0,a.wA)(),n=(0,g.Um)(),_=n?.type===x.kt,y=s.useRef(null),v=s.useCallback(e=>{_?t(p.oB()):t(p.j7({type:x.kt,data:{type:"pointing",targetRect:e.currentTarget?.getBoundingClientRect()}}))},[t,_]),{href:b,onClick:C}=(0,m.y)("https://www.figma.com/widget-docs/intro/"),{href:j,onClick:k}=(0,m.y)("https://www.figma.com/plugin-docs");return(0,i.jsxs)("div",{className:"x78zum5 x6s0dn4 xdt5ytf xl56j7k x5yr21d",children:[(0,i.jsx)("span",{className:c.s.m16.$,children:e?(0,i.jsx)(f,{}):(0,i.jsx)(h,{})}),(0,i.jsx)("span",{className:c.s.font11.fontNormal.colorTextSecondary.mb4.$,children:e?(0,u.tx)("community.plugins.no_widgets_created_yet"):(0,u.tx)("community.plugins.no_plugins_created_yet")}),e?(0,i.jsx)(d.N_,{href:b,onClick:C,className:"x1j6dyjg xopfts3 x1hl2dhg xt0psk2",trusted:!0,children:(0,u.tx)("community.plugins.learn_more_about_widget_development")}):(0,i.jsx)(d.N_,{href:j,onClick:k,trusted:!0,className:"x1j6dyjg xopfts3 x1hl2dhg xt0psk2",children:(0,u.tx)("community.plugins.learn_more_about_plugin_development")}),(0,i.jsx)(r.$n,{onClick:v,variant:"secondary",children:(0,i.jsxs)("div",{className:"x78zum5 x6s0dn4",children:[(0,i.jsx)(l.$,{}),(0,i.jsx)("div",{className:"xet2fuk x1akne3o",children:(0,u.tx)("community.plugins.new")}),(0,i.jsx)("div",{ref:y,children:(0,i.jsx)(o.r,{})})]})})]})}},993469:(e,t,n)=>{n.d(t,{H:()=>l});var i=n(104076),s=n(192075);function a(){return(0,i.jsxs)("svg",{width:"60",height:"70",viewBox:"0 0 60 70",fill:"none",children:[(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M38.747 8.88206L29.9998 0.134888L21.2527 8.88206H8.89248V21.2422L0.134766 30L8.89248 38.7577V51.1176H21.2525L29.9998 59.865L38.7472 51.1176H51.1281V38.7368L59.8649 30L51.1281 21.2631V8.88206H38.747ZM49.1281 10.8821H37.9186L29.9998 2.96331L22.0811 10.8821H10.8925V22.0707L2.96319 30L10.8925 37.9292V49.1176H22.0809L29.9998 57.0366L37.9188 49.1176H49.1281V37.9084L57.0365 30L49.1281 22.0915V10.8821Z",fill:"var(--color-bg-disabled-secondary)"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M31.3956 17.5056L24.4844 27.1129H39.4723L26.9966 43.6672L25.3994 42.4635L35.4607 29.1129H20.582L29.7721 16.3377L31.3956 17.5056Z",fill:"var(--color-bg-disabled-secondary)"}),(0,i.jsx)("path",{d:"M40 41.5C40 40.6716 40.6716 40 41.5 40H58.5C59.3284 40 60 40.6716 60 41.5V68.4395C60 69.0684 59.2726 69.418 58.7815 69.0252L50 62L41.2185 69.0252C40.7274 69.418 40 69.0684 40 68.4395V41.5Z",fill:"var(--color-bg-disabled-secondary)"})]})}function r(){return(0,i.jsxs)("svg",{width:"51",height:"69",viewBox:"0 0 51 69",fill:"none",children:[(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.58333 9.33333C9.58333 4.0157 14.6867 0 20.5833 0C26.48 0 31.5833 4.0157 31.5833 9.33333C31.5833 11.371 30.8158 13.2415 29.5429 14.7548C29.5409 14.7593 29.5365 14.7716 29.5338 14.7946C29.5285 14.8406 29.5344 14.9014 29.5552 14.9594C29.5611 14.9758 29.5672 14.9892 29.5728 15H37.6667C40.0599 15 42 16.9401 42 19.3333V52.6667C42 55.0599 40.0599 57 37.6667 57H4.33333C1.9401 57 0 55.0599 0 52.6667V44.9023C0 43.9176 0.731631 43.317 1.36447 43.0896C1.99657 42.8626 2.86764 42.869 3.52935 43.4263C4.72239 44.431 6.148 45 7.66667 45C11.5538 45 15 41.149 15 36C15 30.851 11.5538 27 7.66667 27C6.148 27 4.72239 27.569 3.52935 28.5737C2.86764 29.131 1.99657 29.1374 1.36447 28.9104C0.731631 28.683 0 28.0824 0 27.0977V19.3333C0 16.9401 1.9401 15 4.33333 15H11.5939C11.5995 14.9892 11.6056 14.9758 11.6115 14.9594C11.6323 14.9014 11.6382 14.8406 11.6328 14.7946C11.6302 14.7716 11.6257 14.7593 11.6237 14.7547C10.3509 13.2415 9.58333 11.371 9.58333 9.33333ZM29.544 14.7526C29.5443 14.7522 29.544 14.7526 29.544 14.7526ZM20.5833 2C15.4343 2 11.5833 5.44622 11.5833 9.33333C11.5833 10.852 12.1524 12.2776 13.1571 13.4706C13.7143 14.1324 13.7208 15.0034 13.4937 15.6355C13.2664 16.2684 12.6657 17 11.681 17H4.33333C3.04467 17 2 18.0447 2 19.3333V27.0106C2.01079 27.0162 2.02423 27.0222 2.04063 27.0281C2.09865 27.049 2.15938 27.0548 2.20535 27.0495C2.22841 27.0468 2.24068 27.0424 2.24526 27.0404C3.75846 25.7676 5.62904 25 7.66667 25C12.9843 25 17 30.1033 17 36C17 41.8967 12.9843 47 7.66667 47C5.62904 47 3.75845 46.2324 2.24526 44.9596C2.24068 44.9576 2.22842 44.9532 2.20535 44.9505C2.15938 44.9452 2.09865 44.951 2.04063 44.9719C2.02423 44.9778 2.01079 44.9838 2 44.9894V52.6667C2 53.9553 3.04467 55 4.33333 55H37.6667C38.9553 55 40 53.9553 40 52.6667V19.3333C40 18.0447 38.9553 17 37.6667 17H29.4856C28.5009 17 27.9003 16.2684 27.673 15.6355C27.4459 15.0034 27.4523 14.1324 28.0096 13.4706C29.0143 12.2776 29.5833 10.852 29.5833 9.33333C29.5833 5.44622 25.7324 2 20.5833 2ZM2.24739 27.0393C2.24784 27.0391 2.24739 27.0394 2.24739 27.0393Z",fill:"var(--color-bg-disabled-secondary)"}),(0,i.jsx)("path",{d:"M31 40.5C31 39.6716 31.6716 39 32.5 39H49.5C50.3284 39 51 39.6716 51 40.5V67.4395C51 68.0684 50.2726 68.418 49.7815 68.0252L41 61L32.2185 68.0252C31.7274 68.418 31 68.0684 31 67.4395V40.5Z",fill:"var(--color-bg-disabled-secondary)"})]})}function l(e){return(0,i.jsxs)("div",{className:"saved_view_empty_state--emptyStateContainer--KrviB",children:[e.isWidget?(0,i.jsx)(a,{}):(0,i.jsx)(r,{}),(0,i.jsxs)("div",{className:"saved_view_empty_state--emptyStateTextContainer--xRmL3",children:[(0,i.jsx)("div",{className:"saved_view_empty_state--emptyStateHeader--t4hjK text--fontPos11--2LvXf text--_fontBase--QdLsd",children:(0,s.tx)("universal_insert.saved_empty_state")}),(0,i.jsx)("div",{className:"saved_view_empty_state--emptyStateSubheader--FndRk text--fontPos11--2LvXf text--_fontBase--QdLsd",children:e.isWidget?(0,s.tx)("universal_insert.saved_for_quick_access_widgets"):(0,s.tx)("universal_insert.saved_for_quick_access_plugins")})]})]})}},299479:(e,t,n)=>{n.d(t,{Bo:()=>u,G$:()=>m,NI:()=>p,Qp:()=>a,V6:()=>l,YA:()=>h,bE:()=>d,fM:()=>r,mO:()=>o,mn:()=>s,v8:()=>c});var i=n(104076);function s(){return(0,i.jsxs)("svg",{width:"42",height:"42",viewBox:"0 0 42 42",fill:"none",children:[(0,i.jsx)("rect",{x:"1",y:"1",width:"40",height:"40",rx:"5",fill:"white"}),(0,i.jsx)("rect",{x:"0.583333",y:"0.583333",width:"40.8333",height:"40.8333",rx:"5.41667",stroke:"black",strokeOpacity:"0.1",strokeWidth:"0.833333"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11 11.8333C11 11.3731 11.3731 11 11.8333 11H21H30.1667C30.6269 11 31 11.3731 31 11.8333V16C31 16.4602 30.6269 16.8333 30.1667 16.8333C29.7064 16.8333 29.3333 16.4602 29.3333 16V12.6667H21.8333V29.3333H25.1667C25.6269 29.3333 26 29.7064 26 30.1667C26 30.6269 25.6269 31 25.1667 31H21H16.8333C16.3731 31 16 30.6269 16 30.1667C16 29.7064 16.3731 29.3333 16.8333 29.3333H20.1667V12.6667H12.6667V16C12.6667 16.4602 12.2936 16.8333 11.8333 16.8333C11.3731 16.8333 11 16.4602 11 16V11.8333Z",fill:"black",fillOpacity:"0.9"})]})}function a(){return(0,i.jsxs)("svg",{width:"42",height:"42",viewBox:"0 0 42 42",fill:"none",children:[(0,i.jsx)("rect",{x:"1",y:"1",width:"40",height:"40",rx:"5",fill:"white"}),(0,i.jsx)("rect",{x:"0.583333",y:"0.583333",width:"40.8333",height:"40.8333",rx:"5.41667",stroke:"black",strokeOpacity:"0.1",strokeWidth:"0.833333"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M22.6666 19.0849L23.3798 18.5874C24.4633 17.8316 25.1667 16.5811 25.1667 15.1666C25.1667 12.8654 23.3012 10.9999 21 10.9999C18.6988 10.9999 16.8333 12.8654 16.8333 15.1666C16.8333 16.5811 17.5366 17.8315 18.6201 18.5873L19.3332 19.0848V19.9543V22.6666H22.6666V19.9544V19.0849ZM24.3332 22.6666V19.9544C25.8445 18.9003 26.8333 17.1489 26.8333 15.1666C26.8333 11.9449 24.2217 9.33325 21 9.33325C17.7783 9.33325 15.1667 11.9449 15.1667 15.1666C15.1667 17.1488 16.1554 18.9002 17.6666 19.9543V22.6666C17.5892 22.6666 17.5122 22.6774 17.4377 22.6986L11.6044 24.3653C11.2466 24.4675 11 24.7945 11 25.1666V28.4999C11 28.9602 11.3731 29.3333 11.8333 29.3333H30.1667C30.6269 29.3333 31 28.9602 31 28.4999V25.1666C31 24.7945 30.7533 24.4675 30.3956 24.3653L24.5623 22.6986C24.4878 22.6774 24.4108 22.6666 24.3333 22.6666H24.3332ZM17.7831 24.3333H19.3332H22.6666H24.2169L29.3333 25.7952V27.6666H12.6667V25.7952L17.7831 24.3333ZM14.3333 31.8333C14.3333 31.373 14.7064 30.9999 15.1667 30.9999H26.8333C27.2936 30.9999 27.6667 31.373 27.6667 31.8333C27.6667 32.2935 27.2936 32.6666 26.8333 32.6666H15.1667C14.7064 32.6666 14.3333 32.2935 14.3333 31.8333Z",fill:"black",fillOpacity:"0.9"})]})}function r(){return(0,i.jsxs)("svg",{width:"42",height:"42",viewBox:"0 0 42 42",fill:"none",children:[(0,i.jsx)("rect",{x:"1",y:"1",width:"40",height:"40",rx:"5",fill:"white"}),(0,i.jsx)("rect",{x:"0.583333",y:"0.583333",width:"40.8333",height:"40.8333",rx:"5.41667",stroke:"black",strokeOpacity:"0.1",strokeWidth:"0.833333"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11 22.6667V19.2639V17.6667H16V22.6667H11ZM11 24.3333V27.6667C11 28.5871 11.7462 29.3333 12.6667 29.3333H16V24.3333H11ZM17.6667 29.3333H29.3333C30.2538 29.3333 31 28.5871 31 27.6667V12.6667C31 11.7462 30.2538 11 29.3333 11H21.925H17.6667V16H31V17.6667H17.6667V22.6667H31V24.3333H17.6667V29.3333ZM16 11H12.6667C11.7462 11 11 11.7462 11 12.6667V16H16V11ZM9.33334 27.6667V19.2639V12.6667C9.33334 10.8257 10.8257 9.33333 12.6667 9.33333H21.925H29.3333C31.1743 9.33333 32.6667 10.8257 32.6667 12.6667V27.6667C32.6667 29.5076 31.1743 31 29.3333 31H12.6667C10.8257 31 9.33334 29.5076 9.33334 27.6667Z",fill:"black",fillOpacity:"0.9"})]})}function l(){return(0,i.jsxs)("svg",{width:"42",height:"42",viewBox:"0 0 42 42",fill:"none",children:[(0,i.jsx)("rect",{x:"1",y:"1",width:"40",height:"40",rx:"5",fill:"white"}),(0,i.jsx)("rect",{x:"0.583333",y:"0.583333",width:"40.8333",height:"40.8333",rx:"5.41667",stroke:"black",strokeOpacity:"0.1",strokeWidth:"0.833333"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M28.4999 10.9999H25.1666C24.7063 10.9999 24.3333 11.373 24.3333 11.8333V15.1666C24.3333 15.6268 24.7063 15.9999 25.1666 15.9999H28.4999C28.9602 15.9999 29.3333 15.6268 29.3333 15.1666V11.8333C29.3333 11.373 28.9602 10.9999 28.4999 10.9999ZM25.1666 9.33325C23.7859 9.33325 22.6666 10.4525 22.6666 11.8333V12.6666H21.8333C20.4525 12.6666 19.3333 13.7859 19.3333 15.1666V19.3333C19.3333 19.7935 18.9602 20.1666 18.4999 20.1666H17.6666V19.3333C17.6666 17.9525 16.5473 16.8333 15.1666 16.8333H11.8333C10.4525 16.8333 9.33325 17.9525 9.33325 19.3333V22.6666C9.33325 24.0473 10.4525 25.1666 11.8333 25.1666H15.1666C16.5473 25.1666 17.6666 24.0473 17.6666 22.6666V21.8333H18.4999C18.9602 21.8333 19.3333 22.2063 19.3333 22.6666V26.8333C19.3333 28.214 20.4525 29.3333 21.8333 29.3333H22.6666V30.1666C22.6666 31.5473 23.7859 32.6666 25.1666 32.6666H28.4999C29.8806 32.6666 30.9999 31.5473 30.9999 30.1666V26.8333C30.9999 25.4525 29.8806 24.3333 28.4999 24.3333H25.1666C23.7859 24.3333 22.6666 25.4525 22.6666 26.8333V27.6666H21.8333C21.373 27.6666 20.9999 27.2935 20.9999 26.8333V22.6666C20.9999 22.0263 20.7592 21.4422 20.3633 20.9999C20.7592 20.5576 20.9999 19.9735 20.9999 19.3333V15.1666C20.9999 14.7063 21.373 14.3333 21.8333 14.3333H22.6666V15.1666C22.6666 16.5473 23.7859 17.6666 25.1666 17.6666H28.4999C29.8806 17.6666 30.9999 16.5473 30.9999 15.1666V11.8333C30.9999 10.4525 29.8806 9.33325 28.4999 9.33325H25.1666ZM15.1666 18.4999H11.8333C11.373 18.4999 10.9999 18.873 10.9999 19.3333V22.6666C10.9999 23.1268 11.373 23.4999 11.8333 23.4999H15.1666C15.6268 23.4999 15.9999 23.1268 15.9999 22.6666V19.3333C15.9999 18.873 15.6268 18.4999 15.1666 18.4999ZM25.1666 25.9999H28.4999C28.9602 25.9999 29.3333 26.373 29.3333 26.8333V30.1666C29.3333 30.6268 28.9602 30.9999 28.4999 30.9999H25.1666C24.7063 30.9999 24.3333 30.6268 24.3333 30.1666V26.8333C24.3333 26.373 24.7063 25.9999 25.1666 25.9999Z",fill:"black",fillOpacity:"0.9"})]})}function o(){return(0,i.jsxs)("svg",{width:"42",height:"42",viewBox:"0 0 42 42",fill:"none",children:[(0,i.jsx)("rect",{x:"1",y:"1",width:"40",height:"40",rx:"5",fill:"white"}),(0,i.jsx)("rect",{x:"0.583333",y:"0.583333",width:"40.8333",height:"40.8333",rx:"5.41667",stroke:"black",strokeOpacity:"0.1",strokeWidth:"0.833333"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M23 12.67H27C28.2868 12.67 29.33 13.7132 29.33 15V27C29.33 28.2868 28.2868 29.33 27 29.33H15C13.7132 29.33 12.67 28.2868 12.67 27V18H21.5C22.3284 18 23 17.3284 23 16.5V12.67ZM21.33 12.67H15C13.7132 12.67 12.67 13.7132 12.67 15V16.33H21.33V12.67ZM21.5 11H27C29.2091 11 31 12.7909 31 15V27C31 29.2091 29.2091 31 27 31H15C12.7909 31 11 29.2091 11 27V16.5V15C11 12.7909 12.7909 11 15 11H21.5Z",fill:"black",fillOpacity:"0.9"})]})}function d(){return(0,i.jsxs)("svg",{width:"42",height:"42",viewBox:"0 0 42 42",fill:"none",children:[(0,i.jsx)("rect",{x:"1",y:"1",width:"40",height:"40",rx:"5",fill:"white"}),(0,i.jsx)("rect",{x:"0.583333",y:"0.583333",width:"40.8333",height:"40.8333",rx:"5.41667",stroke:"black",strokeOpacity:"0.1",strokeWidth:"0.833333"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M31 21C31 26.5228 26.5229 31 21 31C15.4772 31 11 26.5228 11 21C11 15.4771 15.4772 11 21 11C26.5229 11 31 15.4771 31 21ZM32.6667 21C32.6667 27.4433 27.4433 32.6667 21 32.6667C14.5567 32.6667 9.33334 27.4433 9.33334 21C9.33334 14.5567 14.5567 9.33333 21 9.33333C27.4433 9.33333 32.6667 14.5567 32.6667 21ZM15.728 22.6667C15.4422 22.6667 15.1763 22.8132 15.0236 23.0548C14.8709 23.2964 14.8527 23.5994 14.9753 23.8576C16.0444 26.108 18.3393 27.6667 21 27.6667C23.6607 27.6667 25.9557 26.108 27.0247 23.8576C27.1473 23.5994 27.1291 23.2964 26.9764 23.0548C26.8237 22.8132 26.5578 22.6667 26.272 22.6667H15.728ZM21 26C19.5199 26 18.1891 25.3569 17.273 24.3333H24.727C23.811 25.3569 22.4801 26 21 26ZM19.3333 17.6667C19.3333 18.5871 18.5871 19.3333 17.6667 19.3333C16.7462 19.3333 16 18.5871 16 17.6667C16 16.7462 16.7462 16 17.6667 16C18.5871 16 19.3333 16.7462 19.3333 17.6667ZM24.3333 19.3333C25.2538 19.3333 26 18.5871 26 17.6667C26 16.7462 25.2538 16 24.3333 16C23.4129 16 22.6667 16.7462 22.6667 17.6667C22.6667 18.5871 23.4129 19.3333 24.3333 19.3333Z",fill:"black",fillOpacity:"0.9"})]})}function c(){return(0,i.jsxs)("svg",{width:"42",height:"42",viewBox:"0 0 42 42",fill:"none",children:[(0,i.jsx)("rect",{x:"1",y:"1",width:"40",height:"40",rx:"5",fill:"white"}),(0,i.jsx)("rect",{x:"0.583333",y:"0.583333",width:"40.8333",height:"40.8333",rx:"5.41667",stroke:"black",strokeOpacity:"0.1",strokeWidth:"0.833333"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M27.6667 12.6667H14.3333C13.4129 12.6667 12.6667 13.4129 12.6667 14.3333V23.7798L16.8691 19.5774C17.1945 19.252 17.7222 19.252 18.0476 19.5774L27.7984 29.3282C28.6573 29.2611 29.3333 28.5428 29.3333 27.6667V14.3333C29.3333 13.4129 28.5871 12.6667 27.6667 12.6667ZM11 27.6667V25.7929V25.7904V14.3333C11 12.4924 12.4924 11 14.3333 11H27.6667C29.5076 11 31 12.4924 31 14.3333V27.6667C31 29.5076 29.5076 31 27.6667 31H14.3333C12.4924 31 11 29.5076 11 27.6667ZM17.4583 21.3452L12.6667 26.1368V27.6667C12.6667 28.5871 13.4129 29.3333 14.3333 29.3333H25.4465L17.4583 21.3452ZM26 17.6667C26 18.5871 25.2538 19.3333 24.3333 19.3333C23.4129 19.3333 22.6667 18.5871 22.6667 17.6667C22.6667 16.7462 23.4129 16 24.3333 16C25.2538 16 26 16.7462 26 17.6667ZM27.6667 17.6667C27.6667 19.5076 26.1743 21 24.3333 21C22.4924 21 21 19.5076 21 17.6667C21 15.8257 22.4924 14.3333 24.3333 14.3333C26.1743 14.3333 27.6667 15.8257 27.6667 17.6667Z",fill:"black",fillOpacity:"0.9"})]})}function u(){return(0,i.jsxs)("svg",{width:"42",height:"42",viewBox:"0 0 42 42",fill:"none",children:[(0,i.jsx)("rect",{x:"1",y:"1",width:"40",height:"40",rx:"5",fill:"white"}),(0,i.jsx)("rect",{x:"0.583333",y:"0.583333",width:"40.8333",height:"40.8333",rx:"5.41667",stroke:"black",strokeOpacity:"0.1",strokeWidth:"0.833333"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M26 12.6667H16V14.3333H26V12.6667ZM27.6667 12.6667V14.3333H29.3333L29.3333 12.6667L27.6667 12.6667ZM12.6667 12.6667L14.3333 12.6667V14.3333H12.6667L12.6667 12.6667ZM29.3333 16H12.6667L12.6667 29.3333H29.3333L29.3333 16ZM12.6667 11C11.7462 11 11 11.7462 11 12.6667V29.3333C11 30.2538 11.7462 31 12.6667 31H29.3333C30.2538 31 31 30.2538 31 29.3333V12.6667C31 11.7462 30.2538 11 29.3333 11H12.6667ZM21.8934 23.6306L22.2346 23.4259L22.9045 23.024C23.1742 22.8621 23.1742 22.4712 22.9045 22.3094L22.2346 21.9074L21.8934 21.7027L21.8803 21.6948L21 21.1667L20.9758 21.1522L20.5599 20.9026L19.9644 20.5453C19.6867 20.3787 19.3333 20.5787 19.3333 20.9026V21.597V22.0821V22.1103V23.223V23.2512V23.7363V24.4308C19.3333 24.7546 19.6867 24.9547 19.9644 24.788L20.5599 24.4308L20.9758 24.1812L21 24.1667L21.8803 23.6385L21.8934 23.6306ZM23.762 20.8802L20.8219 19.1161C19.4333 18.283 17.6667 19.2832 17.6667 20.9026V24.4308C17.6667 26.0501 19.4333 27.0504 20.8219 26.2172L23.762 24.4531C25.1106 23.6439 25.1106 21.6894 23.762 20.8802Z",fill:"black",fillOpacity:"0.9"})]})}function p(){return(0,i.jsxs)("svg",{width:"42",height:"42",viewBox:"0 0 42 42",fill:"none",children:[(0,i.jsx)("rect",{x:"1",y:"1",width:"40",height:"40",rx:"5",fill:"white"}),(0,i.jsx)("rect",{x:"0.583333",y:"0.583333",width:"40.8333",height:"40.8333",rx:"5.41667",stroke:"black",strokeOpacity:"0.1",strokeWidth:"0.833333"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M25.0786 14.7062C25.2844 14.2945 25.1176 13.794 24.7059 13.5882C24.2943 13.3823 23.7937 13.5492 23.5879 13.9608L16.9212 27.2942C16.7154 27.7058 16.8823 28.2064 17.2939 28.4122C17.7056 28.618 18.2061 28.4512 18.4119 28.0395L25.0786 14.7062ZM14.0487 13.7068C13.7023 13.4037 13.1758 13.4388 12.8728 13.7852L7.03944 20.4518C6.76452 20.766 6.76452 21.2352 7.03944 21.5493L12.8728 28.216C13.1758 28.5624 13.7023 28.5975 14.0487 28.2944C14.395 27.9913 14.4301 27.4649 14.1271 27.1185L8.77389 21.0006L14.1271 14.8827C14.4301 14.5363 14.395 14.0098 14.0487 13.7068ZM27.9512 28.2944C28.2975 28.5975 28.824 28.5624 29.1271 28.216L34.9604 21.5493C35.2353 21.2352 35.2353 20.766 34.9604 20.4518L29.1271 13.7852C28.824 13.4388 28.2975 13.4037 27.9512 13.7068C27.6048 14.0098 27.5697 14.5363 27.8728 14.8827L33.2259 21.0006L27.8728 27.1185C27.5697 27.4649 27.6048 27.9913 27.9512 28.2944Z",fill:"black",fillOpacity:"0.9"})]})}function m(){return(0,i.jsxs)("svg",{width:"42",height:"42",viewBox:"0 0 42 42",fill:"none",children:[(0,i.jsx)("rect",{x:"1",y:"1",width:"40",height:"40",rx:"5",fill:"white"}),(0,i.jsx)("rect",{x:"0.583333",y:"0.583333",width:"40.8333",height:"40.8333",rx:"5.41667",stroke:"black",strokeOpacity:"0.1",strokeWidth:"0.833333"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.1579 29.3333H21C25.6024 29.3333 29.3333 25.6024 29.3333 21C29.3333 16.3976 25.6024 12.6667 21 12.6667C16.3976 12.6667 12.6667 16.3976 12.6667 21V27.8421C12.6667 28.1597 12.6669 28.3541 12.6722 28.5017C12.6767 28.6248 12.6835 28.6661 12.6844 28.671C12.7523 28.9948 13.0052 29.2477 13.329 29.3156C13.3237 29.3145 13.3575 29.3227 13.4983 29.3278C13.6459 29.3331 13.8403 29.3333 14.1579 29.3333ZM21 11C15.4772 11 11 15.4772 11 21V27.8421C11 28.4536 11 28.7593 11.0532 29.013C11.2569 29.9843 12.0157 30.7431 12.987 30.9468C13.2407 31 13.5464 31 14.1579 31H21C26.5228 31 31 26.5228 31 21C31 15.4772 26.5228 11 21 11Z",fill:"black",fillOpacity:"0.9"})]})}function h(){return(0,i.jsxs)("svg",{width:"42",height:"42",viewBox:"0 0 42 42",fill:"none",children:[(0,i.jsx)("rect",{x:"1",y:"1",width:"40",height:"40",rx:"5",fill:"white"}),(0,i.jsx)("rect",{x:"0.583333",y:"0.583333",width:"40.8333",height:"40.8333",rx:"5.41667",stroke:"black",strokeOpacity:"0.1",strokeWidth:"0.833333"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.6667 9.33325C17.2064 9.33325 16.8333 9.70635 16.8333 10.1666C16.8333 10.6268 17.2064 10.9999 17.6667 10.9999H20.1667V12.7008C15.0337 13.1243 11 17.4244 11 22.6666C11 28.1894 15.4772 32.6666 21 32.6666C26.5228 32.6666 31 28.1894 31 22.6666C31 21.069 30.6254 19.5589 29.9591 18.2193L30.4107 17.7677C31.3871 16.7914 31.3871 15.2085 30.4107 14.2322L29.4344 13.2558C28.4581 12.2795 26.8752 12.2795 25.8989 13.2558L25.4473 13.7075C24.343 13.1583 23.1229 12.8072 21.8333 12.7008V10.9999H24.3333C24.7936 10.9999 25.1667 10.6268 25.1667 10.1666C25.1667 9.70635 24.7936 9.33325 24.3333 9.33325H21H17.6667ZM26.9116 14.6002C27.7348 15.2045 28.4621 15.9318 29.0664 16.755L29.2322 16.5892C29.5577 16.2637 29.5577 15.7361 29.2322 15.4107L28.2559 14.4344C27.9305 14.1089 27.4028 14.1089 27.0774 14.4344L26.9116 14.6002ZM21.8333 16.8333C21.8333 16.373 21.4602 15.9999 21 15.9999C20.5398 15.9999 20.1667 16.373 20.1667 16.8333V21.2229C19.6685 21.5111 19.3333 22.0497 19.3333 22.6666C19.3333 23.5871 20.0795 24.3333 21 24.3333C21.9205 24.3333 22.6667 23.5871 22.6667 22.6666C22.6667 22.0497 22.3315 21.5111 21.8333 21.2229V16.8333ZM21 30.9999C25.6024 30.9999 29.3333 27.269 29.3333 22.6666C29.3333 18.0642 25.6024 14.3333 21 14.3333C16.3976 14.3333 12.6667 18.0642 12.6667 22.6666C12.6667 27.269 16.3976 30.9999 21 30.9999Z",fill:"black",fillOpacity:"0.9"})]})}},240660:(e,t,n)=>{n.d(t,{t:()=>r});var i=n(104076),s=n(684742),a=n(527494);function r({text:e,description:t,onClick:n,iconComponent:r,recordingKey:l,rightCaret:o}){return(0,i.jsxs)(s.E,{onClick:n,recordingKey:l,className:"native_figjam_action_block--optionContainer--PAZPH",htmlAttributes:{"data-testid":l},children:[(0,i.jsx)("div",{className:"native_figjam_action_block--actionBlockLeftSide--lGAtd native_figjam_action_block--actionBlockRightSide--lUQRE",children:r}),(0,i.jsxs)("div",{className:"native_figjam_action_block--actionBlockRightSide--lUQRE",children:[(0,i.jsx)("div",{className:"native_figjam_action_block--textRow--yGuij",children:(0,i.jsx)("div",{className:"native_figjam_action_block--text--S9XDd text--fontPos13--xW8hS text--_fontBase--QdLsd",children:e})}),(0,i.jsx)("div",{className:"native_figjam_action_block--description--FdkF2 text--fontPos11--2LvXf text--_fontBase--QdLsd",children:t})]}),o&&(0,i.jsx)(a.a,{className:"native_figjam_action_block--rightCaret--mk9xP","aria-hidden":!0})]})}},597175:(e,t,n)=>{let i;n.d(t,{z:()=>nk});var s=n(104076),a=n(716976),r=n(237420),l=n(307829),o=n(454851),d=n(550012),c=n(302727),u=n(452981),p=n(868045),m=n(936612),h=n(795033);n(120440);var f=n(511570),g=n.n(f),x=n(851824),_=n(221586),y=n(140490),v=n(848561),b=n(849757),C=n(915459),j=n(236631),k=n(192075),w=n(171916),E=n(607804),T=n(701856),S=n(518710),I=n(147046),N=n(111297),A=n(819851),L=n(4033),M=n(802529),O=n(822764),R=n(288747),P=n(798094),D=n(436648),F=n(792028),z=n(98622),B=n(419822),G=n(317582),U=n(382629),V=n(833805),H=n(977745),K=n(893393),W=n(912610),q=n(450067);let X=K.M4.Query({fetch:async e=>{if(!e.pluginIds.length)return[];let t=await q.V.postPluginsBatch(e.pluginIds,e.orgId),n=t.data?.meta??[],i=new Map(e.pluginIds.map((e,t)=>[e,t]));return n.sort((e,t)=>(i.get(e.id)??Number.MAX_SAFE_INTEGER)-(i.get(t.id)??Number.MAX_SAFE_INTEGER))},stalenessPolicy:"never"});var Y=n(16480),Z=n(213233),J=n(324063),Q=n(508356),$=n(966990);let ee="fd_browse_resource_modal--slidingPane--TqmkG sliding_pane--slidingPane--6OmDU",et="fd_browse_resource_modal--searchBarContainer--Q2kZ7",en="fd_browse_resource_modal--devHandoffSearchBarContainer--zw9mg",ei="fd_browse_resource_modal--buzzSearchBarContainer--H7cP1",es="fd_browse_resource_modal--filterButtonActive--8krHg",ea="fd_browse_resource_modal--subtitle--Rvd0d text--fontPos11--2LvXf text--_fontBase--QdLsd",er="fd_browse_resource_modal--sectionHeaderWithIcon--Tr-vS fd_browse_resource_modal--subtitle--Rvd0d text--fontPos11--2LvXf text--_fontBase--QdLsd",el="fd_browse_resource_modal--horizontalDivider--H67hA",eo="fd_browse_resource_modal--horizontalDividerLong--cQZ0n fd_browse_resource_modal--horizontalDivider--H67hA",ed="fd_browse_resource_modal--mainViewHeader--AZpur",ec="fd_browse_resource_modal--mainViewHeaderHeight--7TbQi",eu="fd_browse_resource_modal--mainViewHeaderHeightBuzz--8P5yP",ep="fd_browse_resource_modal--close--G1pa0",em="fd_browse_resource_modal--emptySection--ANbkm text--fontPos12--YsUAh text--_fontBase--QdLsd",eh="fd_browse_resource_modal--loadingSpinner--0IwJ9",ef="fd_browse_resource_modal--showAllSavedExtensionsButton--LDbiv text--fontPos12--YsUAh text--_fontBase--QdLsd";function eg(e){let t=(0,L.Be)(),n=t.widgets,i=Object.values(t.plugins).sort(L.YW).filter(e=>"user"===e.installed_by),s=(0,J.xx)(()=>i),r=(0,Q.Ol)(s()),l=(r=(0,Q.bT)(r)).map(e=>e.plugin_id),o=Object.values(n).sort(L.YW).filter(e=>"user"===e.installed_by),d=(0,J.xx)(()=>o),c=(0,Q.Ol)(d()).map(e=>e.plugin_id);return a.useMemo(()=>e?c:l,[l,c,e])}function ex(e){let t=eg(e.isWidget),[n,i]=a.useState(!1),r=a.useMemo(()=>n?t:t.slice(0,40),[t,n]);return 0===t.length?null:(0,s.jsxs)(N.fu,{name:"saved",children:[(0,s.jsx)("div",{className:ea,children:(0,k.tx)("universal_insert.saved")}),r.map((e,t)=>(0,s.jsx)($.ff,{resourceId:e,type:$.R7.SAVED,keyboardNavigationPath:[Z.B6+1,t]},e)),t.length>40&&!n&&(0,s.jsx)("button",{className:ef,onClick:()=>i(!0),children:e.isWidget?(0,k.tx)("universal_insert.show_all_saved_widgets"):(0,k.tx)("universal_insert.show_all_saved_plugins")})]})}function e_(){let{activeTab:e}=(0,Z.IT)(),t=(0,L.op)(),n=(0,L.qr)(),i=(0,L.Be)(),s=e===D.sk.WIDGET,a=eg(s),r=s?n:t;return(r=(0,Z.P7)(r,Y.Ag.RECENT,s),i.loaded)?{loaded:!0,extensions:{recentExtensions:r,savedExtensionIds:a}}:{loaded:!1,extensions:{recentExtensions:[],savedExtensionIds:[]}}}function ey({recentExtensions:e,savedExtensionIds:t,showWidget:n}){let[i,r]=a.useState(!1),l=(0,a.useMemo)(()=>[...e.map(e=>({id:e.plugin_id,type:$.R7.RECENT})),...t.map(e=>({id:e,type:$.R7.SAVED}))].filter(({id:e},t,n)=>n.findIndex(t=>t.id===e)===t),[e,t]),o=i?l:l.slice(0,25);return 0===l.length?null:(0,s.jsxs)(N.fu,{name:"recents_and_saved",children:[o.map((e,t)=>(0,s.jsx)($.ff,{resourceId:e.id,type:e.type,keyboardNavigationPath:[Z.B6+1,t]},e.id)),l.length>25&&!i&&(0,s.jsx)("button",{className:ef,onClick:()=>r(!0),children:n?(0,k.t)("universal_insert.show_all_recent_and_saved_widgets"):(0,k.t)("universal_insert.show_all_recent_and_saved_plugins")})]})}function ev({suggestedExtensions:e}){let t=e.slice(0,25);return 0===t.length?null:(0,s.jsxs)(N.fu,{name:"Suggested",children:[(0,s.jsx)("div",{className:ea,children:(0,k.t)("universal_insert.suggested")}),t.map((e,t)=>(0,s.jsx)($.ff,{resourceId:e.plugin_id,type:$.R7.COMMUNITY,keyboardNavigationPath:[Z.B6,t]},e.plugin_id))]})}let eb=(0,y._)(function(){let{activeTab:e,defaultExtensions:t}=(0,Z.IT)(),n=e===D.sk.WIDGET,{loaded:i,extensions:{recentExtensions:l,savedExtensionIds:o}}=e_(),{extensions:d,loaded:c}=function(e,t){let n=(0,G.s)(),i=function(e){let t=(0,r.wA)(),n=(0,R.sZ)(),[{data:i,status:s}]=(0,V.IT)(X({pluginIds:e,orgId:n?.id??null}),{enabled:e.length>0}),l="loaded"===s||0===e.length;return(0,a.useEffect)(()=>{l&&i&&i.length>0&&t(H.Qi({publishedPlugins:i,src:"Hardcoded extensions"}))},[i,t,l]),{loaded:l,extensionVersions:i?.map(e=>W.Ar(e)).filter(U.Vq)??[]}}("hardcoded"===e.type?e.pluginIds:[]),s=(0,Z.P7)(n.extensions,Y.Ag.COMMUNITY,t);switch(e.type){case"hardcoded":return{extensions:i.extensionVersions,loaded:i.loaded};case"suggested":return{extensions:s,loaded:n.loaded}}}(t,n);return i&&c?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(ey,{recentExtensions:l,savedExtensionIds:o,showWidget:n}),(0,s.jsx)(ev,{suggestedExtensions:d})]}):(0,s.jsx)("div",{className:"x7hzu26 xh8yej3 x1o2pa38",children:(0,s.jsx)(B.k,{})})},"AllView");var eC=n(81409),ej=n(555013),ek=n(912697),ew=n(521255);let eE="detail_view--communityLink--e-ixL fd_browse_resource_modal--communityLinkBase---qAie text--fontPos11--2LvXf text--_fontBase--QdLsd",eT="detail_view--ratingSelectorContainer--zbvCM";function eS(){let{activeTab:e}=(0,Z.IT)(),t=(0,ew.BI)(),n=(0,A.m0)(),{href:i,onClick:a}=(0,ek.y)(`/community/${e===D.sk.PLUGIN?"plugins":"widgets/figma_design"}${n?"/devmode":""}`);return t?.shouldOptimizeForIpadApp?null:(0,s.jsxs)(ej.Ph,{className:eE,href:i,onClick:a,trackingEventName:"Inserts - Browse More From Community",target:"_blank",trusted:!0,children:[(0,s.jsx)(eC.N,{className:"x1aue78i"}),(0,k.tx)("universal_insert.browse_more_in_community")]})}var eI=n(46379),eN=n(880233),eA=n(716597),eL=n(624155),eM=n(40224),eO=n(264797),eR=n(876105),eP=n(686466);function eD(e){let t=(0,r.wA)(),n=(0,r.Pj)(),i=(0,r.d4)(eP.m),l=(0,r.d4)(e=>(0,eM.CX)(e)),o=a.useRef(null),d=(0,Z.NF)(Z.gC+Z.Kr+Z.Ix);a.useEffect(()=>{(async()=>{if(t((0,eN.zK)()),l){await eL.NW;let{fileVersion:e}=n.getState();e&&!(0,eL.El)("INVALID-FILE-KEY-SHOULD-BE-REMOVED",l)&&n.dispatch((0,eA.n)({libraryKey:l}))}})()},[t,l,n]);let[c,u]=a.useState(!1);return(0,s.jsxs)("div",{children:[e.header,(0,s.jsxs)("div",{"data-not-draggable":!0,children:[(0,s.jsx)(eR.LL,{drilldownPickerContextValue:{listItemHeight:48,leafListHeight:48,listItemThumbnailStylesOverride:{height:40,width:40,borderRadius:2}},entrypointForLogging:null,isSearching:c,pickerType:eI.Zl.RESOURCE_INSERT_MODAL,query:e.query,recordingKey:"componentInsert",scrollContainerHeight:d,searchBarRef:o,selectedItems:i?[i]:[],setIsSearching:u,setQuery:e.setQuery,toggleGridViewButton:(0,s.jsx)(eR.Cc,{isSwapPicker:!1})}),(0,s.jsx)(eO.Q,{})]})]})}var eF=n(420680),ez=n(853943),eB=n(546258),eG=n(812714),eU=n(300535),eV=n(997477),eH=n(679359),eK=n(45468),eW=n(615504),eq=n(652539),eX=n(950382),eY=n(548883),eZ=n(592726),eJ=n(569377),eQ=n(267849);function e$({resource:e}){let t=(0,r.d4)(e=>e.authedActiveCommunityProfile),n=(0,eZ.iZ)(),i=(0,eY.ej)(e);return(0,s.jsxs)("div",{className:eJ.I4,"data-not-draggable":!0,children:[(0,s.jsx)("div",{className:eJ.QW,children:(0,s.jsx)(eq.B,{svg:eQ.A})}),(0,s.jsx)("div",{className:eJ.hI,children:(0,k.tx)("community.buyer.payment_for_this_resource_is_moving_over_to_figma")}),(0,s.jsx)("div",{className:eJ.JL,children:(0,s.jsx)("button",{onClick:()=>{(0,eX.mG)(e,F.aL.INSERTS,n.id,t?.id),i()},children:(0,k.tx)("community.buyer.update_payment")})})]})}var e0=n(427125);n(822900),n(89312),n(487803);var e1=n(222195);n(643330),n(354174),n(132078);var e2=n(349311);let e3="rating_stats_data--averageStar--YdqTY";function e5({isHovered:e}){return(0,s.jsx)("span",{className:e3,"aria-label":(0,k.t)("community.detail_view.full_star"),children:(0,s.jsx)("svg",{width:"16",height:"15",viewBox:"0 0 16 15",fill:"var(--color-text-tertiary, $figmaFGBlack3)",children:(0,s.jsx)("path",{d:"M7.77304 0.492166C7.86239 0.298449 8.13771 0.298448 8.22707 0.492166L10.2571 4.89337L15.0703 5.46405C15.2821 5.48917 15.3672 5.75101 15.2106 5.89585L11.6521 9.18663L12.5967 13.9405C12.6383 14.1498 12.4155 14.3116 12.2294 14.2074L8.00005 11.84L3.77072 14.2074C3.58457 14.3116 3.36183 14.1498 3.4034 13.9405L4.348 9.18663L0.789528 5.89586C0.632903 5.75101 0.717982 5.48917 0.929831 5.46405L5.74296 4.89337L7.77304 0.492166Z",fill:e?"var(--color-text-tooltip-warning, $yellow_400_light)":"var(--color-multiplayeryellow, $multiplayerYellow)"})})})}function e4(){return(0,s.jsx)("span",{className:e3,"aria-label":(0,k.t)("community.detail_view.empty_star"),children:(0,s.jsx)("svg",{width:"16",height:"15",viewBox:"0 0 16 15",fill:"var(--color-text-tertiary, $figmaFGBlack3)",children:(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.58344 5.82031L7.99995 2.38731L6.41646 5.82031L2.66216 6.26545L5.43781 8.83229L4.70102 12.5404L7.99995 10.6938L11.2989 12.5404L10.5621 8.83229L13.3377 6.26545L9.58344 5.82031ZM15.0702 5.46385C15.282 5.48897 15.3671 5.75081 15.2105 5.89566L11.652 9.18643L12.5966 13.9403C12.6382 14.1496 12.4154 14.3114 12.2293 14.2072L7.99995 11.8398L3.77062 14.2072C3.58447 14.3114 3.36173 14.1496 3.4033 13.9403L4.3479 9.18643L0.789429 5.89566C0.632804 5.75081 0.717883 5.48897 0.929731 5.46385L5.74286 4.89318L7.77294 0.491968C7.86229 0.29825 8.13762 0.29825 8.22697 0.491968L10.257 4.89318L15.0702 5.46385Z",fill:"var(--color-text-secondary,$figmaFGBlack5)"})})})}let e6="rating_star_selector--ratingDescription--WBrg8 text--fontPos14--OL9Hp text--_fontBase--QdLsd";var e7=n(833198),e8=n(733948);function e9({onSelect:e,existingRating:t,showDescriptions:n=!1,useBigStars:i=!0,isOptional:r=!1,disabled:l=!1,disabledTooltip:o}){let[d,c]=(0,a.useState)(0),[u,p]=(0,a.useState)(0),[m,h]=(0,a.useState)(!1),f=[(0,k.t)("community.star_ratings.i_really_dont_like_it"),(0,k.t)("community.star_ratings.i_dont_like_it"),(0,k.t)("community.star_ratings.its_okay"),(0,k.t)("community.star_ratings.i_like_it"),(0,k.t)("community.star_ratings.i_love_it")];(0,a.useEffect)(()=>{void 0===t||d||(c(t),p(t))},[t,d]);let g=i?(0,s.jsx)(eq.B,{svg:e7.A,className:"rating_star_selector--emptyStar--P-7A1 rating_star_selector--star--ML342","aria-label":(0,k.t)("community.detail_view.empty_star"),dataTestId:"empty-star-big"}):(0,s.jsx)(e4,{}),x=i?(0,s.jsx)(eq.B,{svg:e8.A,className:m?"rating_star_selector--fullStarHover--JKgxp rating_star_selector--star--ML342":"rating_star_selector--fullStar--rCWKu rating_star_selector--star--ML342","aria-label":(0,k.t)("community.detail_view.full_star"),dataTestId:"full-star-big"}):(0,s.jsx)(e5,{isHovered:m}),_=e=>{l||(c(e+1),h(!0))},y=t=>{l||(t+1===u&&r?(p(0),e(0)):(p(t+1),e(t+1)))};return(0,s.jsxs)("div",{className:i?"rating_star_selector--starInfoContainer--aW-rA":"rating_star_selector--starInfoContainerBigStars--y3zus rating_star_selector--starInfoContainer--aW-rA",children:[(0,s.jsx)("div",{className:l?"rating_star_selector--starContainerDisabled--7bMU6 rating_star_selector--starContainer--1y2ZB":"rating_star_selector--starContainer--1y2ZB",onMouseLeave:()=>{l||u===d||c(u)},"data-tooltip-type":l?e2.Ib.TEXT:void 0,"data-tooltip":l?o:void 0,"data-tooltip-show-immediately":!0,"data-testid":"rating-tooltip",children:(()=>{let e=[];for(let t=0;t<5;t++)e.push((0,s.jsx)("span",{className:j.s.flex.$,onMouseEnter:()=>_(t),onMouseLeave:()=>h(!1),onClick:()=>y(t),role:"button",tabIndex:0,children:t<d?x:g},`rating-star-${t}}`));return e})()}),(0,s.jsx)("div",{className:"rating_star_selector--ratingDescriptionVisibility--XvJs2",children:(0,s.jsxs)(s.Fragment,{children:[n&&(0,s.jsx)("div",{className:i?"rating_star_selector--ratingDescriptionBigStars--WKSN3 rating_star_selector--ratingDescription--WBrg8 text--fontPos14--OL9Hp text--_fontBase--QdLsd":e6,children:f[d-1]}),r&&0===d&&(0,s.jsx)("div",{className:e6,children:l?(0,k.tx)("community.rating_review.ratings_not_available"):(0,k.tx)("community.rating_review.optional")})]})})]})}function te({userRating:e,isInsertsModal:t,disabled:n,disabledTooltip:i,openRatingModal:a}){return(0,s.jsxs)("div",{className:t?"rating_stats_view--ratingSelectorContainerInsertsModal--yPaAm rating_stats_view--ratingSelectorContainer--9lgDS":"rating_stats_view--ratingSelectorContainer--9lgDS",children:[(0,s.jsx)("div",{className:t?"rating_stats_view--ratingCTAInsertsModal--lcpeW text--fontPos11--2LvXf text--_fontBase--QdLsd":"rating_stats_view--ratingCTA--Wa386 text--fontPos13--xW8hS text--_fontBase--QdLsd",children:e?(0,s.jsx)("div",{onClick:()=>a(e?.ratingValue),className:"rating_stats_view--editRating---V3U6",role:"button",tabIndex:0,children:(0,k.tx)("community.detail_view.edit_rating")}):(0,k.tx)("community.detail_view.leave_a_rating")}),(0,s.jsx)(e9,{onSelect:a,existingRating:e?.ratingValue,disabled:n,disabledTooltip:i})]})}var tt=n(860120),tn=n(15329),ti=n(50536),ts=n(36362),ta=n(962212),tr=n(506192),tl=n(81910),to=n(966854),td=n(826160),tc=n(996397),tu=n(547322),tp=n(631722),tm=n(698162),th=n(550538),tf=n(653899),tg=n(564422);function tx({onBack:e,text:t}){let n=(0,A.m0)(),i=(0,E.to)(),r=a.useRef(null);return(0,tf.h)(()=>{r.current?.focus()}),(0,s.jsxs)("div",{className:"browse_resource_modal_tab_header--header--MQQB5 text--fontPos11--2LvXf text--_fontBase--QdLsd",children:[(0,s.jsxs)("div",{className:"browse_resource_modal_tab_header--left--UnLHb",children:[(0,s.jsx)(eq.B,{"data-not-draggable":!0,svg:tg.A,className:"browse_resource_modal_tab_header--backButton--xXsNC fd_browse_resource_modal--backButton--S7dMz",onClick:e}),(0,s.jsx)("span",{ref:r,tabIndex:-1,children:t})]}),!n&&!i&&(0,s.jsx)(Z.Ex,{containerClassName:"browse_resource_modal_tab_header--close--9Fu6o"})]})}var t_=n(991104),ty=n(822706);let tv=(0,y._)(function(e){let t=(0,r.wA)(),{activeTab:n}=(0,Z.IT)(),i=n===D.sk.PLUGIN,l=(0,L.cW)(),o=(0,L.ZT)(),d=(i?l:o)[e.resourceId];return(a.useEffect(()=>{d&&d.community_publishers||t(H.af({id:e.resourceId,resourceType:i?F.bD.PLUGIN:F.bD.WIDGET}))},[t,d,e.resourceId,i]),d)?(0,s.jsx)("div",{className:"x5yr21d x78zum5 xdt5ytf",children:(0,s.jsx)(tb,{resourceId:e.resourceId,resource:d})}):(0,s.jsx)("div",{className:j.s.flex.wFull.borderBox.justifyCenter.pt32.$,children:(0,s.jsx)(eH.kt,{size:"medium"})})},"DetailView");function tb(e){let{resource:t}=e,{activeTab:n}=(0,Z.IT)(),i=n===D.sk.PLUGIN,l=(0,r.wA)(),o=(0,A.m0)(),d=(0,E.to)(),c=(0,L.x)(),{getDynamicConfig:u}=(0,eV.bY)("hide_buzz_plugin_community_stats"),p=d&&u().get("hidden",!1),m=(0,tr.Um)(),h=(0,Z.NF)((0,ta.T)()?Z.gC+64:Z.gC+40),f=(0,r.d4)(e=>e.authedUsers),x=(0,eY.EO)(t),_=(0,eY.lt)(t),y=(0,eY.gn)(t),v=(0,tt.QQ)(_),C=(0,r.d4)(e=>e.authedActiveCommunityProfile),w=(0,th.b)(),T=(0,R.sZ)(),S=(0,L.ll)(),M=(0,L.U6)(),O=Object.values((0,L.$1)()).find(t=>String(t.plugin_id)===e.resourceId),{dragState:P,onInsertableResourcePointerDown:z}=(0,to.P)({resource:(0,W.uF)(t),clickToInsert_DEPRECATED:!0,afterSuccessfulInsert:w,triggeredFrom:"universal-insert"}),{canRate:B=!1}={},G=a.useCallback(()=>{l(ti.S({url:i?(0,tc.ab)(e.resourceId):(0,tc.ox)(e.resourceId),linkType:i?"plugin":"widget"}))},[l,e.resourceId,i]),U=i&&m?.type===t_.yW&&m.data.pluginId===e.resourceId&&m.data.targetRect,V=a.useCallback(t=>{t.stopPropagation(),i&&(U?l(I.oB()):l(I.j7({type:t_.yW,data:{pluginId:e.resourceId,targetRect:t.currentTarget.getBoundingClientRect()}})))},[i,U,l,e.resourceId]),H=a.useCallback(()=>{l(I.oB())},[l]);if(!t)return null;t.community_resource_payment=_;let K=(0,W.uF)(t),q=(0,eY.Zk)(C,f,t),X=(0,W.og)({canAssociatedUserPurchaseThisResource:q,resource:t}),Y=!O&&(0,ts.XV)({org:T,extension:t,allowlistedExtensions:i?S:M}),J=i?(0,s.jsx)($.tO,{pluginId:e.resourceId,usePrimaryButtonStyles:!0,dropdownShownType:"DROPDOWN_TYPE_RUN_PLUGIN_SUBMENU_DETAIL_VIEW"}):(0,s.jsx)($.GJ,{widgetId:e.resourceId});return(0,s.jsxs)(N.fu,{name:"detail",properties:{resourceId:e.resourceId,resourceType:i?F.bD.PLUGIN:F.bD.WIDGET,isMonetized:(0,F.m3)(t),editorType:"figma"},children:[!d&&(0,s.jsx)("div",{className:"x1c4vz4f",children:(0,s.jsx)(tC,{})}),(0,s.jsx)(b.P,{height:h,containerStyle:{flexGrow:1},onScroll:H,onMouseDown:e=>e.stopPropagation(),onPointerDown:e=>e.stopPropagation(),children:(0,s.jsx)("div",{className:"detail_view--contentContainer--nSBG8",children:(0,s.jsxs)("div",{className:(0,ta.T)()?"detail_view--contentContainerVsCode--QO3Ls":void 0,children:[(0,s.jsxs)("div",{className:(0,ta.T)()?"detail_view--coverImageContainerVsCode--4UADZ detail_view--coverImageContainer--2AZZG detail_view--coverImageContainer--2AZZG":"detail_view--coverImageContainer--2AZZG",children:[(0,s.jsx)("img",{className:g()((0,ta.T)()?"detail_view--coverImageVsCode--ZtGDB":i?"detail_view--coverImageNotDraggable--5PzSB detail_view--coverImage---G-H1":"detail_view--coverImage---G-H1",j.s.if((0,ta.T)(),j.s.bRadius5).$),src:K.redirect_cover_image_url||"",alt:`${K.name}`,onPointerDown:e=>!i&&z(e)}),(0,s.jsx)(tl.E,{dragState:P})]}),y&&(0,s.jsx)(tp.cu,{}),X&&!y&&!v&&(0,s.jsx)(e$,{resource:t}),(0,s.jsxs)("div",{className:(0,ta.T)()?"detail_view--infoContainerVsCode--g6DeF detail_view--infoContainer--deaxz text--fontPos11--2LvXf text--_fontBase--QdLsd":"detail_view--infoContainer--deaxz text--fontPos11--2LvXf text--_fontBase--QdLsd",children:[(0,s.jsxs)("div",{className:"detail_view--metadataContainer--GSTfB",children:[(0,s.jsxs)("div",{className:"detail_view--name--oJZlL text--fontPos14--OL9Hp text--_fontBase--QdLsd",children:[(0,s.jsx)("div",{className:"detail_view--nameString--D7CH4 ellipsis--ellipsis--Tjyfa",children:K.name}),(0,eK.$3)({resource:t,validBadges:[eK.op.PURCHASED],authedActiveCommunityProfile:C})||(0,s.jsx)(eW.I,{badges:t.badges,height:"16",hideTooltip:!0})]}),(0,s.jsx)("div",{className:"detail_view--publishers--EXOAA text--fontPos11--2LvXf text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa",children:(t.community_publishers?.accepted||[]).length>0&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(td.Ro,{entity:t.community_publishers?.accepted[0],size:16,className:"detail_view--avatar--trwkE"}),(0,Z.kB)(t)]})})]}),(!o||c)&&(0,s.jsxs)("div",{className:"detail_view--actionsRow--sAwdf",children:[(0,s.jsx)("div",{className:"detail_view--ctaContainer--Z5uKT",children:x&&!(0,eG.kc)().community_hub_admin_reviewer?(0,s.jsx)(e0.I,{resource:t,context:F.aL.INSERTS,payment:_}):Y?(0,s.jsx)(ty.s,{version:K,isPlugin:i}):J}),(0,s.jsx)("div",{className:"x78zum5 x6s0dn4 x1057jvv",children:(0,s.jsx)(tm._,{resourceId:e.resourceId,resourceType:i?F.vt.PLUGIN:F.vt.WIDGET,parentView:tm.n.DETAIL})}),o&&(0,W.Th)(K,T,S)?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"detail_view--dotsContainer--JdwCt",children:(0,s.jsx)(eF.K,{"aria-label":(0,k.t)("universal_insert.more_options"),htmlAttributes:{"data-tooltip-type":e2.Ib.TEXT,"data-tooltip":(0,k.t)("universal_insert.more_options")},onClick:V,children:(0,s.jsx)(ez.J,{})})}),U&&(0,s.jsx)(t_.Gq,{resourceId:e.resourceId,plugin:K,resourceType:i?F.vt.PLUGIN:F.vt.WIDGET})]}):(0,s.jsx)(eF.K,{"aria-label":(0,k.t)("universal_insert.copy_link"),htmlAttributes:{"data-tooltip-type":e2.Ib.TEXT,"data-tooltip":(0,k.t)("universal_insert.copy_link")},onClick:G,children:(0,s.jsx)(eB.W,{})})]}),(0,s.jsx)("div",{className:"detail_view--horizontalDivider--nZbBH"}),!p&&(0,s.jsx)("div",{className:"detail_view--resourceUsageDetails--dKwea",children:(0,s.jsx)(tu.f,{resource:t})}),(0,s.jsx)("div",{className:eT,children:B&&(0,tn.Ul)(t)&&(0,s.jsx)("div",{className:eT,children:(0,s.jsx)(te,{openRatingModal:e=>{},isInsertsModal:!0})})}),(0,s.jsx)(eU.R,{fallback:null,errorFallback:null,value:K.description})]})]})})}),(0,s.jsx)("div",{className:"x2lah0s",children:(0,s.jsx)(tj,{resourceId:e.resourceId})})]})}function tC(){let{closeResource:e,activeTab:t}=(0,Z.IT)();return(0,s.jsx)(tx,{onBack:e,text:t===D.sk.PLUGIN?(0,k.tx)("universal_insert.plugin"):(0,k.tx)("universal_insert.widget")})}function tj(e){let{activeTab:t}=(0,Z.IT)(),n=t===D.sk.PLUGIN?"plugin":"widget",{href:i,onClick:a}=(0,ek.y)(`/community/${n}/${e.resourceId}`);return(0,s.jsxs)(ej.Ph,{className:eE,href:i,onClick:a,target:"_blank",trackingEventName:"Inserts Detail View - Browse More From Community",trusted:!0,children:[(0,s.jsx)(eC.N,{className:"x1aue78i"}),(0,k.tx)("universal_insert.see_more_details_in_community")]})}var tk=n(911990),tw=n(475477),tE=n(293422),tT=n(180),tS=n(620480),tI=n(513674),tN=n(171660),tA=n(702388),tL=n(4102);function tM({isDesktop:e}){return(0,s.jsxs)(tI.Y1,{direction:"vertical",verticalAlignItems:"center",horizontalAlignItems:"center",children:[(0,s.jsx)(eq.B,{svg:tL.A,className:j.s.colorIconSecondary.pb24.$,autosize:!0,height:(0,ta.T)()?"64px":void 0}),(0,s.jsx)(tO,{isDesktop:e})]})}function tO({isDesktop:e}){let t={learnMoreLink:(0,s.jsx)(tw.N,{href:"https://www.figma.com/plugin-docs",newTab:!0,children:(0,k.tx)("dev_handoff.inspect_panel.learn_more_plugin_development")})};return(0,s.jsx)(s.Fragment,{children:e?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:j.s.alignCenter.$,children:[(0,s.jsx)(tN.E,{color:"secondary",children:(0,k.tx)("dev_handoff.inspect_panel.create_first_here")}),(0,s.jsx)("br",{}),(0,s.jsx)(tN.E,{children:(0,k.tx)("dev_handoff.inspect_panel.learn_more_link",t)})]}),(0,s.jsx)(tR,{})]}):(0,s.jsxs)("div",{className:j.s.alignCenter.$,children:[(0,s.jsx)(tN.E,{color:"secondary",children:(0,k.tx)("dev_handoff.inspect_panel.inspect_plugins_go_here")}),(0,s.jsx)("br",{}),(0,s.jsx)(tN.E,{color:"secondary",children:(0,k.tx)("dev_handoff.inspect_panel.use_desktop_to_develop")}),(0,s.jsx)("br",{}),(0,s.jsx)(tN.E,{children:(0,k.tx)("dev_handoff.inspect_panel.learn_more_link",t)})]})})}function tR(){let e=(0,r.wA)(),t=(0,tr.Um)(),n=t?.type===tA.kt,i=a.useCallback(t=>{n?e(I.oB()):e(I.j7({type:tA.kt,data:{targetRect:t.currentTarget?.getBoundingClientRect()}}))},[e,n]);return(0,s.jsxs)("div",{className:j.s.pt16.$,children:[(0,s.jsx)(tE.$n,{onClick:i,variant:"secondary",children:(0,s.jsxs)(tI.Y1,{direction:"horizontal",verticalAlignItems:"center",padding:0,children:[(0,s.jsx)(tT.$,{className:j.s.pr8.$}),(0,s.jsx)(tN.E,{children:(0,k.tx)("dev_handoff.inspect_panel.new_plugin")}),(0,s.jsx)(tS.r,{})]})}),n&&(0,s.jsx)("div",{children:(0,s.jsx)(tA.Pq,{resourceType:F.bD.PLUGIN})})]})}var tP=n(532096),tD=n(203426);function tF(){let{activeTab:e}=(0,Z.IT)(),t=(0,tP.$A)((0,r.d4)(e=>e.selectedView)),n=(0,L.nl)({allowNonVsCodePluginsInVsCode:!0}),i=(0,L.yQ)(),a=e===D.sk.WIDGET,l=a?i:n,o=(0,P.M)(),d=(0,L.sp)(a);return o&&(Object.keys(l).length>0||d.length>0)?(0,s.jsxs)(N.fu,{name:"Development",children:[Object.keys(l).map((e,t)=>(0,s.jsx)($.ff,{resourceId:e,type:$.R7.DEVELOPMENT,keyboardNavigationPath:[Z.B6,t]},e)),d.map((e,t)=>(0,s.jsx)($.ff,{resourceId:e.id,type:$.R7.DEVELOPMENT_MISSING_LOCAL,keyboardNavigationPath:[Z.B6,Object.keys(l).length+t]},e.id))]}):t?(0,s.jsx)(tk.Y,{horizontalAlignItems:"center",verticalAlignItems:(0,ta.T)()?"start":"center",children:(0,s.jsx)(tM,{isDesktop:!!o})}):(0,s.jsx)(tD.W,{isWidget:a})}var tz=n(164131),tB=(e=>(e[e.MAIN=0]="MAIN",e[e.ORG_PRIVATE_EXPANDED_LIST=1]="ORG_PRIVATE_EXPANDED_LIST",e[e.ORG_ALLOWLIST_EXPANDED_LIST=2]="ORG_ALLOWLIST_EXPANDED_LIST",e))(tB||{});function tG({viewType:e,onBackPress:t}){let n=(0,Z.NF)(Z.gC);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(tU,{viewType:e,onBackPress:t}),(0,s.jsxs)(b.P,{height:n,onMouseDown:e=>e.stopPropagation(),onPointerDown:e=>e.stopPropagation(),children:[(0,s.jsx)(tV,{viewType:e}),(0,s.jsx)(eS,{})]})]})}function tU({viewType:e,onBackPress:t}){let n;let{activeTab:i}=(0,Z.IT)(),a=i===D.sk.PLUGIN;return n=e===tB.ORG_PRIVATE_EXPANDED_LIST?a?(0,k.tx)("universal_insert.all_internal_plugins"):(0,k.tx)("universal_insert.all_internal_widgets"):a?(0,k.tx)("universal_insert.all_approved_plugins"):(0,k.tx)("universal_insert.all_approved_widgets"),(0,s.jsxs)("div",{className:"fd_browse_resource_modal--expandedViewHeader--uLZl5",children:[(0,s.jsxs)("div",{className:"fd_browse_resource_modal--left--si6Cj",children:[(0,s.jsx)(eq.B,{svg:tg.A,className:"fd_browse_resource_modal--backButton--S7dMz",onClick:t,onMouseDown:e=>e.stopPropagation(),onPointerDown:e=>e.stopPropagation()}),(0,s.jsx)("div",{className:"fd_browse_resource_modal--expandedViewHeaderTitle--wG-j2 text--fontPos11--2LvXf text--_fontBase--QdLsd",children:n})]}),(0,s.jsx)(Z.Ex,{containerClassName:ep})]})}function tV({viewType:e}){let t;let{activeTab:n}=(0,Z.IT)(),i=(0,tz.h)("plugin"),a=(0,tz.h)("widget"),r=n===D.sk.WIDGET,l=(0,L.ll)(),o=(0,Q.bT)(Object.values(l)),d=(0,L.U6)(),c=r?Object.keys(d):o.map(e=>e.plugin_id);return t=e===tB.ORG_PRIVATE_EXPANDED_LIST?(0,s.jsx)(s.Fragment,{children:(r?a:i).map((e,t)=>(0,s.jsx)($.ff,{resourceId:e.plugin_id,type:$.R7.ORG_PRIVATE,keyboardNavigationPath:[Z.B6,t]},e.plugin_id))}):(0,s.jsx)(s.Fragment,{children:c.map((e,t)=>(0,s.jsx)($.ff,{resourceId:e,type:$.R7.COMMUNITY,keyboardNavigationPath:[Z.B6,t]},e))}),(0,s.jsx)("div",{className:"fd_browse_resource_modal--expandedViewContainer--EvsBd",children:t})}var tH=n(287211),tK=n(483243),tW=n(211862),tq=n(944350),tX=n(530299),tY=n(904017),tZ=n(959509),tJ=n(987294);let tQ=(0,y._)(function(e){let t=(0,tY.X$)("OrgView").unwrapOr(null),n=(0,tY.H3)(t);return n?(0,s.jsx)(t$,{currentOrgId:n,viewExpandedList:e.viewExpandedList}):(0,s.jsx)(eH.kt,{className:eh})},"OrgView");function t$(e){let{currentOrgId:t,viewExpandedList:n}=e,i=(0,tY.T5)("_OrgView").unwrapOr(null),l=i?.pluginsWhitelistEnforced??!1,o=i?.widgetsWhitelistEnforced??!1,{activeTab:d}=(0,Z.IT)(),c=d===D.sk.WIDGET,u=(0,tz.h)("plugin"),p=(0,Q.bT)(u),m=(0,tz.h)("widget"),h=c?m:p,f=h.length>0,g=c?o:l,x=c?tZ.n_:tZ.Gb,_=(0,tW.tS)(),y=(0,tX.mC)(x(t,_)),v=(0,L.ll)(),b=(0,Q.bT)(Object.values(v)).map(e=>e.plugin_id),C=(0,L.U6)(),j=a.useMemo(()=>Object.keys(C),[C]),w=(0,L.Be)(),E=(0,L.pR)(w),T=E.orgWidgets,S=E.orgPlugins,I=(0,r.d4)(e=>e.orgUsersByOrgId[t][e.user.id]?.permission===tq._D.GUEST),A=(0,tH.R)(e=>I?{}:(0,W.Qt)((0,W.i8)(Object.values(e.publishedPlugins)),t)),M=a.useMemo(()=>{let e=Object.values(S).filter(e=>!A[e.plugin_id]);return l&&(e=e.filter(e=>v[e.plugin_id])),e.sort(L.YW)},[v,l,A,S]),O=(0,Q.Ol)(M);O=(0,Q.bT)(O);let R=a.useMemo(()=>O.map(e=>e.plugin_id),[O]),P=a.useMemo(()=>b.filter(e=>!S[e]),[b,S]),F=a.useMemo(()=>{let e=Object.values(T).filter(e=>!(0,tK.s7)(e,t));return o&&(e=e.filter(e=>C[e.plugin_id])),e.sort(L.YW)},[T,o,t,C]),z=(0,Q.Ol)(F),B=a.useMemo(()=>z.map(e=>e.plugin_id),[z]),G=a.useMemo(()=>j.filter(e=>!T[e]),[j,T]),U=c?G:P,V=c?B:R,H=f?(0,s.jsxs)(s.Fragment,{children:[(g?h.slice(0,Z.Xo):h).map((e,t)=>(0,s.jsx)($.ff,{resourceId:e.plugin_id,type:$.R7.ORG_PRIVATE,keyboardNavigationPath:[Z.B6,t]},e.plugin_id)),g&&h.length>Z.Xo&&(0,s.jsx)(t0,{viewExpandedList:()=>{n(tB.ORG_PRIVATE_EXPANDED_LIST)},ctaText:c?(0,k.t)("universal_insert.all_internal_widgets"):(0,k.t)("universal_insert.all_internal_plugins")})]}):(0,s.jsx)("div",{className:em,children:c?(0,k.tx)("universal_insert.no_internal_widgets"):(0,k.tx)("universal_insert.no_internal_plugins")}),{href:K,onClick:q}=(0,ek.y)(`/community/${c?"widgets":"plugins"}`),X=g&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:eo}),(0,s.jsxs)("div",{className:er,children:[(0,k.tx)("universal_insert.approved_from_figma_community"),(0,s.jsx)("a",{href:K,target:"_blank",children:(0,s.jsx)(eF.K,{onClick:q,"aria-label":(0,k.t)("universal_insert.go_to_community"),htmlAttributes:{"data-tooltip-type":e2.Ib.TEXT,"data-tooltip":(0,k.t)("universal_insert.go_to_community")},children:(0,s.jsx)(eC.N,{})})})]}),y&&0===U.length?(0,s.jsx)("div",{className:em,children:c?(0,k.tx)("universal_insert.organization_has_no_approved_community_widgets"):(0,k.tx)("universal_insert.organization_has_no_approved_community_plugins")}):(0,s.jsxs)(s.Fragment,{children:[(f?U.slice(0,5):U).map((e,t)=>(0,s.jsx)($.ff,{resourceId:e,type:$.R7.COMMUNITY,keyboardNavigationPath:[Z.B6+1,t]},e)),f&&U.length>5&&(0,s.jsx)(t0,{viewExpandedList:()=>{n(tB.ORG_ALLOWLIST_EXPANDED_LIST)},ctaText:c?(0,k.t)("universal_insert.all_approved_widgets"):(0,k.t)("universal_insert.all_approved_plugins")})]})]}),Y=V.length>0?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:el}),(0,s.jsxs)("div",{className:er,children:[(0,k.tx)("universal_insert.saved_from_community"),(0,s.jsx)("a",{href:K,target:"_blank",children:(0,s.jsx)(eF.K,{"aria-label":(0,k.t)("universal_insert.go_to_community"),htmlAttributes:{"data-tooltip-type":e2.Ib.TEXT,"data-tooltip":(0,k.t)("universal_insert.go_to_community")},onClick:q,children:(0,s.jsx)(eC.N,{})})})]}),V.map((e,t)=>(0,s.jsx)($.ff,{resourceId:e,type:$.R7.SAVED,keyboardNavigationPath:[Z.B6+2,t]},e))]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:el}),(0,s.jsxs)("div",{className:er,children:[(0,k.tx)("universal_insert.saved_from_community"),(0,s.jsx)("a",{href:K,target:"_blank",children:(0,s.jsx)(eF.K,{onClick:q,"aria-label":(0,k.t)("universal_insert.go_to_community"),htmlAttributes:{"data-tooltip-type":e2.Ib.TEXT,"data-tooltip":(0,k.t)("universal_insert.go_to_community")},children:(0,s.jsx)(eC.N,{})})})]}),(0,s.jsx)("div",{className:em,children:c?(0,k.tx)("universal_insert.no_saved_widgets"):(0,k.tx)("universal_insert.no_saved_plugins")})]});return(0,s.jsxs)(N.fu,{name:"Org",children:[H,Y,X]})}function t0(e){return(0,s.jsxs)("button",{onClick:e.viewExpandedList,className:"fd_browse_resource_modal--viewExpandedCta--xrZpk text--fontPos12--YsUAh text--_fontBase--QdLsd",children:[(0,s.jsx)("span",{children:e.ctaText}),(0,s.jsx)(eq.B,{svg:tJ.A})]})}var t1=n(993469),t2=n(65545),t3=n(999083),t5=n(638004),t4=n(883765),t6=n(550209),t7=n(280350),t8=n(352630),t9=n(513879),ne=n(596224),nt=n(887555),nn=n(17134),ni=n(511920),ns=n(755893),na=n(3234);let nr=async(e,t)=>{let n={caller:ni.z.EDITOR_COMMUNITY_VIEW,resourceType:[t2.vtl.PLUGIN],editorType:e?ns.qq.DEV_HANDOFF:ns.qq.DESIGN,sortBy:nt.e.Browse.POPULAR,includeContent:!0};e&&t&&(n.capabilityType=nn.h.CODEGEN);let[i,s]=await Promise.all([K.M4.fetch(na.a.CommunityResourcesPaginatedQuery({...n,price:t9.C.FREE,pageSize:18})),K.M4.fetch(na.a.CommunityResourcesPaginatedQuery({...n,price:t9.C.PAID,pageSize:12}))]);return[...i||[],...s||[]].map(e=>(0,ne.cD)(e)).filter(e=>!!e)},nl=async()=>{let e={caller:ni.z.EDITOR_COMMUNITY_VIEW,resourceType:[t2.vtl.WIDGET],editorType:ns.qq.DESIGN,sortBy:nt.e.Browse.POPULAR,includeContent:!0},[t,n]=await Promise.all([K.M4.fetch(na.a.CommunityResourcesPaginatedQuery({...e,price:t9.C.FREE,pageSize:18})),K.M4.fetch(na.a.CommunityResourcesPaginatedQuery({...e,price:t9.C.PAID,pageSize:12}))]);return[...t||[],...n||[]].map(e=>(0,ne.rg)(e)).filter(e=>!!e)};function no({viewExpandedList:e,keyboardNavigationOffset:t,shortDivider:n}){let{activeTab:i}=(0,Z.IT)(),l=i===D.sk.WIDGET,o=(0,A.m0)(),d=(0,h.md)(S.RB)&&o,[c,u]=a.useState(!1),{allowListIsLoading:p,allowList:m,hasAllowList:f,hasPluginAllowList:g,hasWidgetAllowList:x,publicExtensionsDisallowed:_}=(0,L.jA)(l),y=(0,Q.bT)(Object.values(m)).map(e=>e.plugin_id),[v,b]=a.useState(null),[C,j]=a.useState(null),[w,E]=a.useState(!1),[T,I]=a.useState(!1),M=(0,r.wA)();a.useEffect(()=>{let e=c!==d;g||_||!e&&null!==v||w||(E(!0),nr(o,d).then(e=>{M(H.Qi({publishedPlugins:e,src:"Figma inserts modal recents view"})),b((0,t3.k4)(e)),E(!1),u(d)}).catch(e=>{(0,t6.$D)(t5.e.COMMUNITY,e),E(!1),b([]),u(d)}))},[M,v,w,o,f,g,_,d,c]),a.useEffect(()=>{x||null!==C||T||(I(!0),nl().then(e=>{M(H.Qi({publishedPlugins:e,src:"Figma inserts modal recents view"})),j((0,t3.k4)(e)),I(!1)}).catch(e=>{(0,t6.$D)(t5.e.COMMUNITY,e),I(!1),j([])}))},[M,C,T,f,x]);let O=l?C:v,R=l?T:w,{href:P,onClick:F}=(0,ek.y)(`/community/${i===D.sk.PLUGIN?"plugins":"widgets"}`);return a.useMemo(()=>{if(f?p:R)return(0,s.jsx)("div",{className:"xqui205 xh8yej3 x1o2pa38",children:(0,s.jsx)(B.k,{})});if(!(null!==O)&&!f)return null;let a=f?y:O.map(e=>e.id);return _||0===a.length?null:(0,s.jsxs)(N.fu,{name:f?"Approved plugins":"From Community",children:[(0,s.jsx)("div",{className:n?el:eo}),(0,s.jsxs)("div",{className:er,"data-onboarding-key":"community_feed_header",children:[f?(0,k.tx)("universal_insert.approved_from_figma_community"):(0,k.tx)("universal_insert.from_community"),(0,s.jsx)("a",{href:P,target:"_blank",children:(0,s.jsx)(t8.Me,{onClick:F,"aria-label":(0,k.t)("universal_insert.go_to_community"),htmlAttributes:{"data-tooltip-type":e2.Ib.TEXT,"data-tooltip":(0,k.t)("universal_insert.go_to_community")},trackingEventName:"Inserts - Browse More From Community Icon Button",children:(0,s.jsx)(eC.N,{})})})]}),a.slice(0,f?5:10).map((e,n)=>(0,s.jsx)($.ff,{type:$.R7.COMMUNITY,resourceId:e,keyboardNavigationPath:[t,n]},e)),f&&a.length>5?(0,s.jsx)(t0,{viewExpandedList:()=>{e(tB.ORG_ALLOWLIST_EXPANDED_LIST)},ctaText:l?(0,k.t)("universal_insert.all_approved_widgets"):(0,k.t)("universal_insert.all_approved_plugins")}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(eS,{}),(0,s.jsx)(t7.a,{onIntersectionChange:e=>{e.isIntersecting&&(0,t4.sx)("community_feed_bottom_reached",{location:"inserts",resourceType:i})},style:o?{paddingBottom:30}:void 0})]})]})},[f,p,R,O,y,_,P,F,l,e,t,n,i,o])}function nd(e){let{activeTab:t}=(0,Z.IT)(),{loaded:n,extensions:{recentExtensions:i,savedExtensionIds:r}}=e_(),l=a.useMemo(()=>i.length>0?(0,s.jsxs)(N.fu,{name:"recents",children:[(0,s.jsx)("div",{className:ea,"data-onboarding-key":"recents_plugin_header",children:(0,k.tx)("universal_insert.recents")}),i.slice(0,Z.Zm).map((e,t)=>(0,s.jsx)($.ff,{type:$.R7.RECENT,resourceId:e.plugin_id,keyboardNavigationPath:[Z.B6,t]},e.plugin_id))]}):(0,s.jsx)(s.Fragment,{}),[i]);if(!0===n&&i.length+r.length===0)return(0,s.jsxs)(N.fu,{name:"Recents and saved",children:[(0,s.jsx)(t1.H,{isWidget:t===D.sk.WIDGET}),(0,s.jsx)(no,{viewExpandedList:e.viewExpandedList,keyboardNavigationOffset:Z.B6+2})]});let o=(0,s.jsx)(ex,{isWidget:t===D.sk.WIDGET}),d=i.length>0,c=r.length>0;return(0,s.jsxs)(N.fu,{name:"Recents and saved",children:[l,c&&d&&(0,s.jsx)("div",{className:el}),o,(0,s.jsx)(no,{viewExpandedList:e.viewExpandedList,keyboardNavigationOffset:Z.B6+2})]})}var nc=n(552696),nu=n(824570),np=n(685031);function nm(){let e=a.useRef({}),t=a.useCallback((t,n)=>{e.current[t]=n},[]),n=a.useCallback(t=>e.current[t]||[],[]),i=a.useCallback(t=>t in e.current,[]),s=a.useCallback(()=>{e.current={}},[]);return a.useMemo(()=>({setResultsForQuery:t,getResultsForQuery:n,hasQueryResultsCached:i,resetCache:s}),[t,n,i,s])}var nh=n(150156);let nf=new nh.Ef([],{...e1.Pk,keys:e1.Kj}),ng=new nh.Ef([],{...e1.Pk,keys:[{name:"name",weight:1}]}),nx=new nh.Ef([],{...e1.Pk,keys:e1.Kj}),n_=(0,y._)(function(e){let t;let{activeTab:n}=(0,Z.IT)(),i=n===D.sk.WIDGET,r=(0,A.m0)(),l=(0,E.to)(),o=e.query.trim(),d=(0,A.lg)(),c=np.k.getApiEditorType(d),{pluginServerSideSearch:u,pluginSearchIsLoading:p,pluginSearchHasResolved:m}=(0,L.I5)(c,{useResourceSearch:l}),{widgetServerSideSearch:h,widgetSearchIsLoading:f,widgetSearchHasResolved:g}=(0,L.SG)(c),{getResultsForQuery:x,setResultsForQuery:_,resetCache:y}=nm(),v=x(o),{getResultsForQuery:C,setResultsForQuery:j,resetCache:w}=nm(),T=C(o),{getResultsForQuery:S,setResultsForQuery:I,hasQueryResultsCached:O,resetCache:P}=nm(),F=ny(S(o),[v]),{getResultsForQuery:z,setResultsForQuery:B,hasQueryResultsCached:G,resetCache:U}=nm(),V=ny(z(o),[v,F]),{getResultsForQuery:H,setResultsForQuery:K,resetCache:q}=nm(),X=ny(H(o),[v,F,V]),{getResultsForQuery:Y,setResultsForQuery:J,hasQueryResultsCached:Q,resetCache:ee}=nm(),es=ny(Y(o),[v,F,V,X]);a.useEffect(()=>{y(),w(),P(),U(),ee(),q()},[i,q,ee,P,w,U,y]);let ea=(0,L.Tg)(),er=(0,L.qr)(),el=(0,L.$1)(),eo=(0,L.yQ)(),ed=(0,L.ll)(),ec=(0,L.U6)(),eu=(0,L.cW)(),ep=(0,L.ZT)(),ef=(0,nu.k9)(()=>Object.keys(i?ec:ed).map(e=>(0,W.uF)((i?ep:eu)[e])),[ed,ep,eu,ec,i]);a.useEffect(()=>{nf.set(Object.values(i?er:ea))},[ea,er,i]),a.useEffect(()=>{ng.set(Object.values(i?eo:el))},[el,eo,i]),a.useEffect(()=>{nx.set(ef)},[ef]);let eg=(0,R.sZ)(),{serverSideSearch:ex,isLoading:e_,hasResolved:ey}=n===D.sk.PLUGIN?{serverSideSearch:u,isLoading:p,hasResolved:m}:{serverSideSearch:h,isLoading:f,hasResolved:g};a.useEffect(()=>{""!==o&&(Q(o)&&G(o)&&O(o)||ex(o,e=>J(o,e),e=>B(o,e),e=>I(o,e)),_(o,nf.search(o).map(e=>e.plugin_id)),j(o,ng.search(o).map(e=>e.localFileId.toString())),K(o,nx.search(o).map(e=>e.plugin_id)))},[o,Q,O,G,ex,K,J,I,j,B,_]);let ev=M.z4.getIsExtension()?Z.gC+Z.Ix:r?Z.gC+Z.Ix+Z.ff+8:Z.gC+Z.Ix,eb=(0,Z.NF)(ev),eC=r?en:l?ei:et,ej=r?"fd_browse_resource_modal--devHandoffSearchBarContainerScrolled--KosxI fd_browse_resource_modal--devHandoffSearchBarContainer--zw9mg":l?ei:"fd_browse_resource_modal--searchBarContainerScrolled--2-lJE fd_browse_resource_modal--searchBarContainer--Q2kZ7",ek=a.useCallback(t=>{let n=e.searchContainerRef.current;n&&(t>0?n.className=ej:n.className=eC)},[e.searchContainerRef,ej,eC]);a.useEffect(()=>()=>{e.searchContainerRef.current&&(e.searchContainerRef.current.className=eC)},[]);let ew=eg&&(i?eg.widgets_whitelist_enforced:eg.plugins_whitelist_enforced),eE=(!ew||(0,ts.Cs)({org:eg,isWidget:i}))&&es&&es.length>0&&ey,eT=ew&&X.length>0,eS=eg&&V&&V.length>0&&ey,eI=F.length>0&&ey,eN=v.length>0,eA=T.length>0,eL=ey&&(eE||eS||eN||eI||eT);if(ey&&!(eN||eA||eL))t=(0,s.jsxs)("div",{className:em,children:[(0,s.jsx)("div",{className:"x78zum5 xl56j7k x6s0dn4 xh8yej3 x12sbs06",children:(0,s.jsx)(nc.X,{className:"xtc4nxu"})}),(0,s.jsx)("div",{children:i?ew&&eg?(0,k.tx)("universal_insert.no_widgets_matching_query_for_allowlist",{orgName:eg.name,query:o}):(0,k.tx)("universal_insert.no_widgets_matching_query",{query:o}):ew&&eg?(0,k.tx)("universal_insert.no_plugins_matching_query_for_allowlist",{orgName:eg.name,query:o}):(0,k.tx)("universal_insert.no_plugins_matching_query",{query:o})})]});else{t=[];let e=Z.B6;eN&&(t.push((0,s.jsx)(nb,{sectionHeader:(0,k.tx)("universal_insert.recents"),ids:v,type:$.R7.RECENT,sectionIdx:e},$.R7.RECENT)),e+=1),eA&&(t.push((0,s.jsx)(nb,{sectionHeader:(0,k.tx)("universal_insert.development"),ids:T,type:$.R7.DEVELOPMENT,sectionIdx:e},$.R7.DEVELOPMENT)),e+=1),e_&&!eL?t.push((0,s.jsx)(eH.kt,{className:eh},"Loading spinner")):(eI&&(t.push((0,s.jsx)(nb,{sectionHeader:(0,k.tx)("universal_insert.saved"),ids:F,type:$.R7.SAVED,sectionIdx:e},$.R7.SAVED)),e+=1),eS&&(t.push((0,s.jsx)(nb,{sectionHeader:eg.name,ids:V,type:$.R7.ORG_PRIVATE,sectionIdx:e},$.R7.ORG_PRIVATE)),e+=1),eT&&(t.push((0,s.jsx)(nb,{sectionHeader:(0,k.tx)("universal_insert.approved_from_figma_community"),ids:X,type:$.R7.COMMUNITY,sectionIdx:e},`ALLOW_LIST_${$.R7.COMMUNITY}`)),e+=1),eE&&t.push((0,s.jsx)(nb,{sectionHeader:(0,k.tx)("universal_insert.from_community"),ids:es,type:$.R7.COMMUNITY,sectionIdx:e},$.R7.COMMUNITY)))}return(0,s.jsx)(b.P,{innerClassName:l?"fd_browse_resource_modal--buzzScrollContainer--XtGn8":"",height:eb,onScroll:ek,onMouseDown:e=>e.stopPropagation(),onPointerDown:e=>e.stopPropagation(),children:(0,s.jsx)(N.fu,{name:"search",properties:{searchQuery:o,resourceType:n},children:t})})},"SearchView"),ny=(e,t)=>{let n={};return t.forEach(e=>e.forEach(e=>n[e]=!0)),e.filter(e=>!n[e])};function nv(e){return(0,s.jsx)("div",{onClick:()=>(0,t4.sx)("search result clicked"),"data-testid":`browse-resource-tile-${e.resourceId}`,children:(0,s.jsx)($.ff,{resourceId:e.resourceId,type:e.type,keyboardNavigationPath:e.keyboardNavigationPath,shouldFocusFirstItem:!0})})}function nb(e){return(0,s.jsxs)(s.Fragment,{children:[e.sectionIdx>Z.B6&&(0,s.jsx)("div",{className:el}),(0,s.jsx)("div",{className:"x1g2dr8m xiqqdae xkezfkh x14kxzw3 x1giz659 xe9iah2 x1swbamy xkdneqi x1n0bwc9",children:e.sectionHeader}),e.ids.map((t,n)=>(0,s.jsx)(nv,{resourceId:t,type:e.type,keyboardNavigationPath:[e.sectionIdx,n]},t))]})}let nC=()=>({[D.sk.COMPONENT]:{label:(0,k.t)("universal_insert.components"),tab:D.sk.COMPONENT,resourceTypeLabel:(0,k.t)("universal_insert.components_resource_type")},[D.sk.PLUGIN]:{label:(0,k.t)("community.view_bar.plugins"),tab:D.sk.PLUGIN,resourceTypeLabel:(0,k.t)("community.plugins.plugin")},[D.sk.WIDGET]:{label:(0,k.t)("community.view_bar.widgets"),tab:D.sk.WIDGET,resourceTypeLabel:(0,k.t)("community.plugins.widget")}});function nj(e){return(0,s.jsxs)("div",{className:"fd_browse_resource_modal--tabHeader--edoDO",children:[(0,s.jsx)("div",{className:"fd_browse_resource_modal--tabsContainer--v6cIk",children:Object.entries(nC()).map(([t,n])=>(0,s.jsx)("div",{className:"fd_browse_resource_modal--tabClickTarget--QDM1e",role:"tab",onClick:()=>e.onClick(n.tab),onMouseDown:e=>e.stopPropagation(),onPointerDown:e=>e.stopPropagation(),tabIndex:0,children:(0,s.jsx)("div",{"data-label":n.label,className:n.tab===e.selectedTab?"fd_browse_resource_modal--selectedTab--u91ec fd_browse_resource_modal--tab--Olia- text--fontPos11--2LvXf text--_fontBase--QdLsd":"fd_browse_resource_modal--tab--Olia- text--fontPos11--2LvXf text--_fontBase--QdLsd",children:n.label},t)},t))}),(0,s.jsx)(Z.Ex,{containerClassName:ep})]})}let nk=(0,y._)(function(){let e=a.useRef(null),{fdPreviewResource:t,initialFdView:n}=(0,r.d4)(e=>e.universalInsertModal),l=t?.id,{activeTab:o,currentView:d,setCurrentViewOrTab:c}=(0,Z.IT)(),u=(0,A.m0)(),p=(0,E.to)(),m=u||p?"fd_browse_resource_modal--slidingPaneContainerAdjustable--ge7kl sliding_pane--slidingPaneContainer--RQkXf":"fd_browse_resource_modal--slidingPaneContainer--sW-oK sliding_pane--slidingPaneContainer--RQkXf",[h,f]=a.useState(n?"":i||""),[g,x]=a.useState(tB.MAIN),y=a.useCallback(e=>{if(e.keyCode===_.Uz.ENTER){let t=e.target,n=t?.querySelector("button");n?.click()}},[]);a.useEffect(()=>{i=h},[h]);let b=a.useMemo(()=>(0,s.jsx)(nj,{onClick:t=>{t!==D.sk.COMPONENT&&e.current?.querySelector("input")?.focus(),c({newTab:t})},selectedTab:o}),[o,c]),C=a.useMemo(()=>{let t=et;if(u?t=en:p&&(t=ei),o===D.sk.COMPONENT)return(0,s.jsx)(N.fu,{name:o,children:(0,s.jsx)(eD,{header:b,query:h,setQuery:f})});let n=()=>o===D.sk.PLUGIN?(0,k.t)("universal_insert.search_all_plugins"):o===D.sk.WIDGET?(0,k.t)("universal_insert.search_all_widgets"):(0,k.t)("universal_insert.search_all_extensions");return(0,s.jsxs)(N.fu,{name:o,children:[!u&&!p&&b,(0,s.jsx)("div",{className:"x5yr21d",onMouseDown:e=>e.stopPropagation(),onPointerDown:e=>e.stopPropagation(),children:(0,s.jsxs)(v.dP,{containerStyle:{display:"flex",flexDirection:"column",height:"100%"},onKeyDown:y,children:[(0,s.jsx)("div",{className:t,ref:e,children:p?(0,s.jsx)(nw,{searchQuery:h,placeholder:n(),setSearchQuery:f}):(0,s.jsx)(nE,{searchQuery:h,placeholder:n(),setSearchQuery:f})}),0===h.length&&(0,s.jsx)("div",{className:"x1iyjqo2",children:(0,s.jsx)(nS,{viewExpandedList:x,currentView:d,setCurrentView:e=>c({newView:e})})}),h.length>0&&(0,s.jsx)(n_,{query:h,searchContainerRef:e})]})})]})},[o,y,h,u,p,b,d,c]),j=null;return l?j=(0,s.jsx)(tv,{resourceId:l}):(g===tB.ORG_PRIVATE_EXPANDED_LIST||g===tB.ORG_ALLOWLIST_EXPANDED_LIST)&&(j=(0,s.jsx)(v.dP,{onKeyDown:y,children:(0,s.jsx)(tG,{viewType:g,onBackPress:()=>x(tB.MAIN)})})),(0,s.jsxs)("div",{className:m,children:[(0,s.jsx)("div",{className:j?"fd_browse_resource_modal--slidingPaneLeft--TOiZt sliding_pane--slidingPaneLeft--Wrfdy sliding_pane--slidingPane--6OmDU":ee,children:C}),j&&(0,s.jsx)("div",{className:ee,children:j})]})},"FdBrowseResourceModalContent");function nw({searchQuery:e,setSearchQuery:t,placeholder:n}){let i=(0,r.wA)(),a=(0,x.A)(e=>{e.length>0?i(w.Dy({entryPoint:"figma:inserts"})):i(w.ky()),t(e)},300);return(0,s.jsx)(T.N,{searchQuery:e,placeholder:n,onChange:a,clearSearch:()=>{i(w.ky()),t("")}})}function nE({searchQuery:e,setSearchQuery:t,placeholder:n}){let i=(0,r.wA)(),{setKeyboardNavigationElement:l}=(0,v.M3)({id:"search",path:[Z.np,0]}),o=a.useRef(null),[d,c]=(0,h.fp)(S.uP),u=(0,h.md)(S.HT);a.useEffect(()=>{d&&"development"===u&&(o.current?.focus(),c(!1))},[d,c,u]);let p=(0,O.LR)(),m=a.useCallback(n=>"Escape"===n.key&&(e?t(""):p(),!0),[p,e,t]),f=(0,x.A)(e=>{e.length>0?i(w.Dy({entryPoint:"figma:inserts"})):i(w.ky()),t(e)},300);a.useEffect(()=>()=>{i(w.ky())},[i]);let _=(0,A.m0)(),y=(0,s.jsx)(C.IW,{ref:e=>{o.current=e?.searchInput??null,l(e?.searchInput??null)},className:g()(_?"fd_browse_resource_modal--searchBarDevHandoff--uuPW-":"fd_browse_resource_modal--searchBar---bmO8",{"fd_browse_resource_modal--searchBarEmpty--8dNhE":""===e}),clearSearch:()=>{i(w.ky()),t("")},focusOnMount:!_,hideXIcon:!e,isKeyDownHandled:m,onChange:f,placeholder:n,query:e,selectTextOnMount:!_});if(!_)return y;let b=_&&!e;return(0,s.jsxs)("div",{className:"fd_browse_resource_modal--searchBarAndFilterContainer--F1Wg8",children:[y,b&&(0,s.jsx)(nT,{})]})}function nT(){let{getTriggerProps:e,manager:t}=l.b(),[n,i]=(0,h.fp)(S.RB),a=n&&!t.isOpen;return(0,s.jsxs)(l.bL,{manager:t,children:[(0,s.jsx)(o.d,{"aria-label":(0,k.t)("dev_handoff.inspect_panel.search_bar_filter"),...e(),children:a?(0,s.jsx)(p.S,{className:g()({[es]:a})}):(0,s.jsx)(m.S,{className:g()({[es]:a})})}),(0,s.jsx)(l.mc,{children:(0,s.jsx)(d.H_,{checked:n,onChange:()=>{i(!n)},children:(0,k.t)("dev_handoff.inspect_panel.search_bar_filter_codegen_option")})})]})}function nS(e){let t=a.useRef(null),n=(0,A.m0)(),i=(0,E.to)(),l=M.z4.getIsExtension()?Z.Ix+Z.gC+48:n?Z.gC+Z.Kr+Z.Ix+Z.ff:Z.gC+Z.Kr+Z.Ix,{activeTab:o,currentView:d}=(0,Z.IT)(),c=(0,Z.NF)(l),u=a.useRef(null),p=(0,r.wA)(),m=a.useCallback(e=>{t.current&&(e>0?t.current.className=g()("fd_browse_resource_modal--mainViewHeaderScrolled--RPI7X fd_browse_resource_modal--mainViewHeader--AZpur",i?eu:ec):t.current.className=g()(ed,i?eu:ec),p(I.oB()))},[t,p,i]);a.useEffect(()=>{u.current?.scrollToTop()},[o,d]);let h=(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(nA,{currentView:e.currentView}),"all"===e.currentView&&(0,s.jsx)(eb,{}),"recents_and_saved"===e.currentView&&(0,s.jsx)(nd,{viewExpandedList:e.viewExpandedList}),"development"===e.currentView&&(0,s.jsx)(tF,{}),"org"===e.currentView&&(0,s.jsx)(tQ,{viewExpandedList:e.viewExpandedList})]});return(0,s.jsxs)("div",{className:"x1n2onr6 x78zum5 xdt5ytf x5yr21d",children:[(0,s.jsxs)("div",{className:g()(ed,i?eu:ec),ref:t,"data-onboarding-key":"recents_and_saved_plugin_header",children:[(0,s.jsx)(nL,{currentView:e.currentView,onChange:e.setCurrentView}),"development"===e.currentView&&(0,s.jsx)("div",{className:"fd_browse_resource_modal--mainViewHeaderRightSide--hxfTP text--fontPos12--YsUAh text--_fontBase--QdLsd",children:(0,s.jsx)(z.n,{resourceType:o===D.sk.WIDGET?F.bD.WIDGET:F.bD.PLUGIN})})]}),(0,s.jsx)(b.P,{height:c,onScroll:m,innerClassName:n||i?j.s.hFull.$:"",ref:u,containerStyle:{flexGrow:1},children:(0,s.jsx)("div",{...{0:{},1:{className:"x1t1ogtf"}}[!!nI.includes(e.currentView)<<0],children:h})}),(0,s.jsx)(nN,{currentView:e.currentView})]})}let nI=["recents_and_saved","all"];function nN({currentView:e}){return nI.includes(e)?(0,s.jsx)("div",{className:"x7wzq59 x1ey2m1c",children:(0,s.jsx)(eS,{})}):null}function nA({currentView:e}){let{activeTab:t}=(0,Z.IT)(),n=R.sZ()?.id,i=(0,L.f6)(),a=(0,L.wW)(),r=t===D.sk.WIDGET?a:i,l="org"===e?r.filter(e=>e.org_id&&e.org_id===n):r;return 0===l.length?null:(0,s.jsxs)("div",{children:[l.map((e,t)=>(0,s.jsx)($.ff,{resourceId:e.id,type:$.R7.INVITED,keyboardNavigationPath:[Z.dQ,t]},e.id)),(0,s.jsx)("div",{className:el})]})}function nL(e){let t=(0,R.sZ)(),n=(0,P.M)(),{includeAll:i}=(0,Z.IT)(),r=a.useCallback(e=>(function(e,t){switch(e){case"all":return(0,k.t)("qa.filter.all");case"recents_and_saved":return(0,k.t)("universal_insert.recents_and_saved");case"development":return(0,k.t)("universal_insert.development");case"org":return t?.name||(0,k.t)("universal_insert.from_your_org")}})(e,t),[t]),l=[];return(i&&l.push("all"),l.push("recents_and_saved"),n&&l.push("development"),1!==l.length||t)?(0,s.jsxs)(c.Root,{value:e.currentView,onChange:e.onChange,children:[(0,s.jsx)(c.Trigger,{label:(0,s.jsx)(u.h,{children:(0,k.t)("universal_insert.resource.select.aria_label")})}),(0,s.jsxs)(c.Container,{children:[l.map(e=>(0,s.jsx)(c.Option,{value:e,children:r(e)},e)),t?(0,s.jsx)(c.Group,{children:(0,s.jsx)(c.Option,{value:"org",children:r("org")})}):null]})]}):(0,s.jsx)("div",{className:"fd_browse_resource_modal--mainViewSelectorTitleContainer--PITMQ",children:(0,s.jsx)("div",{className:"fd_browse_resource_modal--mainViewSelectorTitle--TnoUK text--fontPos12--YsUAh text--_fontBase--QdLsd",children:r(l[0])})})}},822706:(e,t,n)=>{n.d(t,{s:()=>g,w:()=>f});var i=n(104076),s=n(237420),a=n(555013),r=n(236631),l=n(192075),o=n(366535),d=n(878801),c=n(36362),u=n(211862),p=n(288747),m=n(176203),h=n(569507),f=(e=>(e.FigJamPluginTile="figjam_plugin_tile",e))(f||{});function g(e){let t=(0,s.wA)(),{version:n,isPlugin:f,variant:g}=e,x=(0,u.q5)(),_=(0,p.sZ)(),y=(0,c.RW)(),v=(0,d.a)(_?.id,n.plugin_id,y.loaded?y.data?.workspaceId:void 0);if(!x||!x.parentOrgId)return null;if(v){let e="figjam_plugin_tile"===g?(0,l.tx)("universal_insert.request"):(0,l.tx)("universal_insert.approval_pending");return(0,i.jsx)(a.nR,{disabled:!0,className:r.s.wFull.$,dataTestId:"request-button-approval-pending",children:e})}let b={extension:{pluginId:n.plugin_id,iconUrl:n.redirect_icon_url,name:n.name},isWidget:!f,orgId:x.parentOrgId,workspaceDetails:y.loaded?y.data:void 0,openedFrom:"editor",fullscreenEditorType:(0,m.wN)(x.editorType)},C="figjam_plugin_tile"===g?(0,l.tx)("universal_insert.request"):(0,l.tx)("universal_insert.request_approval");return(0,i.jsx)(a.nR,{onClick:()=>{t((0,o.to)({type:h.S,data:b}))},className:r.s.wFull.$,dataTestId:"request-button",children:C})}},502756:(e,t,n)=>{n.d(t,{PH:()=>ey});var i,s=n(104076),a=n(716976),r=n(237420),l=n(951002),o=n(792875),d=n(268389),c=n(929302),u=n(950187),p=n(790009),m=n(511570),h=n.n(m),f=n(192075),g=n(111297),x=n(36599),_=n(470876),y=n(141773),v=n(249586),b=n(211862),C=n(615782),j=n(395556),k=n(792028),w=n(872769),E=n(959834),T=n(293422),S=n(411017),I=n(944350),N=n(583669),A=n(475477),L=n(684742),M=n(81409),O=n(812714),R=n(236631),P=n(443192),D=n(174730),F=n(480143);let z="_team_templates_browse",B="seen_figjam_make_tmpl_category";function G({selectedCategory:e,selectCategory:t,categoryTitles:n,categoryIds:i,triggeredFrom:l,makeSomethingCategoryId:o,subcategories:d}){let c=(0,r.wA)(),u=(0,b.tS)(),p=(0,_.Gi)(),m=(0,D.f)("figjam_editor_onboarded"),h=(0,D.f)(B),g=i.filter(e=>d.every(t=>!t.categoryIds.includes(e)));(0,a.useEffect)(()=>{"makeSomething"!==l&&m&&!h&&(t(o),c(P.b({[B]:!0})))},[c,m,h,o,t,l]);let x=e=>{t(e),(0,v.Cu)({fileKey:u,categoryName:e},"template_modal_category_selected")},y=t=>t.map(t=>{let i=n[t];return i?(0,s.jsx)(U,{text:i,isSelected:e===t,onClick:()=>x(t)},t):null});return(0,s.jsxs)("ul",{className:F.pz,children:[(0,s.jsx)(U,{text:(0,f.t)("browse_templates_modal.all_templates"),onClick:()=>t(void 0),isSelected:!e}),p&&(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(U,{text:(0,f.t)("browse_templates_modal.header_name_templates",{entityName:p.name||""}),onClick:()=>x(z),isSelected:e===z,"data-testid":"org-templates"})}),y(g),d.map(e=>(0,s.jsxs)("li",{children:[(0,s.jsx)("div",{className:R.s.minH16.p0.$}),(0,s.jsx)("h2",{className:F.vC,children:e.title}),(0,s.jsx)("ul",{children:y(e.categoryIds)})]},e.id)),(0,s.jsx)("li",{className:R.s.minH8.$}),(0,s.jsxs)("li",{className:F.D5,children:[(0,s.jsx)(M.N,{className:F.wP}),(0,s.jsx)(A.N,{href:"/community/figjam",newTab:!0,onClick:()=>{(0,v.Cu)({fileKey:u,uiSelectedView:"browse_more_sidebar_link",name:"Templates Modal Browse More"},"cta_clicked")},children:(0,f.tx)("browse_templates_modal_sidebar.see_more_in_community")})]})]})}function U(e){let t=(0,s.jsx)(L.E,{className:e.isSelected?F.X6:F.Mo,onClick:e.onClick,"aria-current":(0,O.kc)().figjam_a11y_templates_modal?e.isSelected:void 0,children:e.text});return(0,O.kc)().figjam_a11y_templates_modal?(0,s.jsx)("li",{children:t}):t}G.displayName="BrowseTemplatesModalSidebar",U.displayName="TemplatesPickerSidebarItem";var V=n(228944),H=n(413296);function K(e){let t=(0,_.tS)(),n=(0,r.d4)(e=>e.hubFiles),i=(0,b.tS)(),l=a.useMemo(()=>Y(e.templates),[e.templates]),o=a.useRef(null);a.useEffect(()=>{o.current?.scrollTo(0,0)},[e.selectedCategory]);let d=null;if(e.selectedCategory){let t=(e.templates[e.selectedCategory]||[]).map(e=>n[e]);d=(0,s.jsx)(q,{templates:t.filter(e=>!!e).map(e=>({template:e,type:j.n.HubFile})),categoryTitle:e.categoryTitles[e.selectedCategory],category:e.selectedCategory,templateInsertionLocation:e.templateInsertionLocation,onInsertTemplate:e.onInsertTemplate,isInsertingTemplate:e.isInsertingTemplate,previewHubFile:e.previewHubFile})}else d=(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(H.O9,{},"team_template_announcement"),t&&(0,s.jsx)(W,{onInsertTemplate:e.onInsertTemplate,isInsertingTemplate:e.isInsertingTemplate,templateInsertionLocation:e.templateInsertionLocation,selectCategory:e.selectCategory}),e.categoryIds.map(t=>{let i=(l[t]||[]).map(e=>n[e]).filter(e=>!!e);return(0,s.jsx)(q,{category:t,categoryTitle:e.categoryTitles[t],templates:i.map(e=>({template:e,type:j.n.HubFile,category:t})),templateInsertionLocation:e.templateInsertionLocation,selectCategory:e.selectCategory,onInsertTemplate:e.onInsertTemplate,isInsertingTemplate:e.isInsertingTemplate,previewHubFile:e.previewHubFile},`templates_category_preview:${t}`)})]});return(0,s.jsxs)("div",{className:F.rb,ref:o,children:[d,(0,s.jsx)(V.tJ,{url:e.enterCommunityUrl,fileKey:i||null})]})}function W(e){let{templates:t,isLoading:n,templateBrowseEntity:i}=(0,_.wv)(I._Y.WHITEBOARD,3);return n?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(V.G3,{}),(0,s.jsx)(V.G3,{}),(0,s.jsx)(V.G3,{shouldFade:!0})]}):t.length&&i?(0,s.jsx)(q,{category:z,categoryTitle:(0,f.t)("browse_templates_modal.header_name_templates",{entityName:i.name}),templates:t,selectCategory:e.selectCategory,templateInsertionLocation:e.templateInsertionLocation,onInsertTemplate:e.onInsertTemplate,isInsertingTemplate:e.isInsertingTemplate}):null}function q(e){let t=e.selectCategory;return(0,s.jsxs)("div",{className:F.xQ,children:[(0,s.jsxs)("div",{className:F.w0,children:[(0,s.jsx)("h2",{className:F.$I,children:e.categoryTitle}),t&&(0,s.jsx)(T.$n,{variant:"link",onClick:()=>t(e.category),"aria-label":(0,f.t)("browse_templates_modal.see_all_category_title",{categoryTitle:e.categoryTitle}),children:(0,f.tx)("browse_templates_modal.see_all")})]}),(0,s.jsx)(X,{templates:e.templates,templateInsertionLocation:e.templateInsertionLocation,previewHubFile:e.previewHubFile,onInsertTemplate:e.onInsertTemplate,isInsertingTemplate:e.isInsertingTemplate})]})}function X(e){let t=(0,S.fG)(),{previewHubFile:n}=e;return(0,s.jsxs)(V.iq,{children:[e.templates.map(i=>{let{primaryKey:a}=t(i);return(0,s.jsx)(V.AF,{template:i,templateInsertionLocation:e.templateInsertionLocation,onInsert:()=>e.onInsertTemplate(i),isInsertingTemplate:e.isInsertingTemplate(a),onPreview:i.type===j.n.HubFile&&n?()=>n(i.template.id):void 0},a)}),(0,s.jsx)(N.hT,{numResources:e.templates.length,maxResources:3})]})}K.displayName="BrowseTemplatesModalContent",q.displayName="TemplatesPickerCategorySection";let Y=(e,t=3)=>{let n={};return Object.keys(e).forEach(i=>{e[i]&&(n[i]=e[i].slice(0,t))}),n};var Z=n(300535),J=n(225686),Q=n(377026),$=n(568501),ee=n(546580),et=n(592726),en=n(404343);(e=>{function t(e){return(0,s.jsx)("div",{className:"resource_detail_view_header--subtitleContainer--G4iVj",children:e.children})}e.SmallStickyTopBar=function(e){let n=(0,et.iZ)()?{}:{top:en.avG};return(0,s.jsx)("div",{className:e.className||"resource_detail_view_header--headerContainer_Small--GNjXr resource_detail_view_header--headerContainerBase--noQIf",style:n,children:(0,s.jsxs)("div",{className:"resource_detail_view_header--headerElementsContainer_Small--7d4Dl resource_detail_view_header--headerElementsContainerBase--Bkwye detail_view--container--5uafb detail_view--_container--9sCA7 text--fontPos14--OL9Hp text--_fontBase--QdLsd",children:[(0,s.jsxs)("div",{className:"resource_detail_view_header--headerLeft--3evKW",children:[(0,s.jsxs)("div",{className:"resource_detail_view_header--titleContainer--D1-zT",children:[(0,s.jsx)("h1",{className:"resource_detail_view_header--nameShrunk--djxg3 text--fontPos18--rYXJb text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa",children:e.name}),e.titleBadge]}),(0,s.jsx)(t,{children:(0,s.jsxs)("div",{className:"resource_detail_view_header--subtitleItem--Wtt2d text--fontPos13--xW8hS text--_fontBase--QdLsd",children:[(0,s.jsx)(ee.L,{publishers:e.resource.community_publishers.accepted}),(0,s.jsx)(ee.I,{publishers:e.resource.community_publishers.accepted})]})})]}),(0,s.jsxs)("div",{className:"resource_detail_view_header--headerRight--HScUW detail_view--headerRight--nsyNm",children:[(0,s.jsx)("div",{className:"resource_detail_view_header--secondaryCTAContainer--iNAnz detail_view--likesContainer--LC17P",children:e.secondaryCTAButton}),(0,s.jsx)("div",{className:"resource_detail_view_header--rowReverse--Fl6Zv detail_view--rowReverse---FVgL",children:e.mainCTAButton})]})]})})}})(i||(i={}));var ei=n(40133);function es(e){let t=(0,r.wA)(),n=(0,r.d4)(e=>e.hubFiles),a=n[e.templateId],l=(0,C.a6)(a);if(!a)return null;let o=(0,s.jsx)(ei.i,{insertTemplate:()=>e.insertTemplate({type:j.n.HubFile,template:a}),isInsertingTemplate:e.isInsertingTemplate,children:(0,C.Ve)(e.templateInsertionLocation)}),d=e.moreTemplateIds.filter(t=>t!==e.templateId).map(e=>n[e]);return(0,s.jsxs)("div",{className:"browse_templates_modal_resource_preview--resourcePreview--xsc-T",children:[(0,s.jsx)(i.SmallStickyTopBar,{resource:a,name:l.name,mainCTAButton:o,secondaryCTAButton:(0,s.jsx)(s.Fragment,{}),className:"browse_templates_modal_resource_preview--headerContainer--SGsCX",openCreatorsInNewTab:!0}),(0,s.jsxs)("div",{className:"browse_templates_modal_resource_preview--container--FlTtG hub_file_detail_view--container--wjAfD",children:[(0,s.jsx)("div",{className:"browse_templates_modal_resource_preview--embedContainer--ONcnZ hub_file_detail_view--embedContainer--QMuUr detail_view--embedContainer---TcbF",children:(0,s.jsx)($.Z,{containerClassName:"browse_templates_modal_resource_preview--embedContainerInner--Bu6RJ hub_file_detail_view--iframeContainer---uQYN",disableClickToExpand:!0,disableComments:!0,disableFullscreen:!0,dispatch:t,fixedSize:!0,fullscreenState:Q.G4.DEFAULT,hubFile:a,profileIdToAdminResourceAs:null},a.id)}),(0,s.jsxs)("div",{className:"browse_templates_modal_resource_preview--metadataContainer--GipYm",children:[(0,s.jsxs)("div",{className:"browse_templates_modal_resource_preview--description--EuZxv",children:[(0,J.$J)(l.description).trim().length>0&&(0,s.jsx)(Z.R,{fallback:null,errorFallback:null,value:l.description}),(0,s.jsx)("div",{className:R.s.mt16.$,children:(0,s.jsx)(A.N,{href:`/community/file/${e.templateId}`,newTab:!0,children:(0,f.tx)("browse_templates_modal.see_more_details_in_community")})})]}),(0,s.jsx)("div",{className:"browse_templates_modal_resource_preview--moreTemplatesHeader--Kz1a1 text--fontPos13--xW8hS text--_fontBase--QdLsd",children:(0,f.tx)("browse_templates_modal.more_templates_like_this")}),(0,s.jsx)("div",{className:"browse_templates_modal_resource_preview--moreTemplatesGrid--LqGIO",children:d.slice(0,6).map(t=>(0,s.jsx)(V.Pr,{hubFileId:t.id,templateInsertionLocation:e.templateInsertionLocation,onInsert:()=>e.insertTemplate({type:j.n.HubFile,template:t}),isInsertingTemplate:e.isInsertingTemplate,previewHubFile:()=>e.selectTemplate(t.id)},t.id))})]})]})]})}es.displayName="BrowseTemplatesModalResourcePreview";var ea=n(280350),er=n(671134),el=n(44395);function eo({searchQuery:e,hubFileResultIds:t,isInsertingTemplate:n,onInsertTemplate:i,onPreviewHubFileTemplate:r}){let l=(0,b.tS)(),o=a.useRef(null),d=(0,_.tS)(),[c,u]=(0,a.useState)(!d),{templates:p,requestLoadMore:m,isLoading:h}=(0,y.Ou)(e,d,I._Y.WHITEBOARD);(0,a.useEffect)(()=>{u(!d),"function"==typeof o.current?.scroll&&o.current.scroll({top:0,behavior:"smooth"})},[e,d]);let g=`/community/search?resource_type=files&editor_type=figjam&query=${e}`;return 0!==t.length||0!==p.length||h?h&&0===p.length?(0,s.jsx)(V.Cm,{}):(0,s.jsxs)("section",{className:R.s.wFull.p24.overflowYScroll.$,ref:o,children:[(0,s.jsxs)(V.iq,{children:[d&&p.map(e=>(0,s.jsx)(V.AF,{template:{template:e,type:j.n.TeamTemplate},isInsertingTemplate:n(e.file_key),onInsert:()=>i({template:e,type:j.n.TeamTemplate})},`team-template-${e.file_key}`)),c&&t.map(e=>(0,s.jsx)(V.Pr,{hubFileId:e,onInsert:i,isInsertingTemplate:n(e),previewHubFile:()=>r(e)},`hub-file-template-${e}`))]}),d&&!h&&(0,s.jsx)(ea.a,{onIntersectionChange:({isIntersecting:e})=>{e&&!m()&&u(!0)}}),!h&&(0,s.jsx)("div",{className:R.s.mt24.$,children:(0,s.jsx)(V.tJ,{url:g,fileKey:l})})]}):(0,s.jsx)(er._3,{illustration:el.A,resourceTypeDisplayString:"templates",query:e,cta:(0,s.jsx)(A.N.Button,{href:g,newTab:!0,variant:"secondary",children:(0,f.tx)("browse_templates_modal.browse_more_in_community")})})}var ed=n(420680),ec=n(80969),eu=n(739713),ep=n(915459);function em(e){return(0,s.jsx)(d.Y9,{children:e.previewTemplateId?(0,s.jsx)(ed.K,{"aria-label":(0,f.t)("general.back"),onClick:e.goBack,children:(0,s.jsx)(eu.C,{})}):(0,O.kc)().figjam_a11y_templates_modal?(0,s.jsx)("div",{className:F.KF,children:(0,s.jsx)(ec.D.Lazy,{value:e.searchQuery,onChange:e.setSearchQuery,placeholder:(0,f.t)("browse_templates_modal.search_templates"),"aria-label":(0,f.t)("browse_templates_modal.search_templates"),"aria-description":(0,f.t)("general.search_will_update"),autoFocus:!0,size:"lg"})}):(0,s.jsx)(ep.IW,{query:e.searchQuery,clearSearch:()=>e.setSearchQuery(""),onChange:e.setSearchQuery,className:F.ON,placeholder:(0,f.t)("browse_templates_modal.search_templates"),focusOnMount:!0})})}em.displayString="BrowseTemplatesModalTopBar";var eh=n(121450),ef=n(496809),eg=n(582154);function ex(e){let t;let{onTemplateInsertedCurrentFile:n,onTemplateInsertedNewFile:i,onClose:c}=e,u=a.useRef(null),{templates:p,categoryTitles:m,duplicateFile:g,fileKey:v,searchQuery:b,searchTemplatesResult:E,setSearchQuery:T,categoryIds:S,subcategories:I}=(0,eg.bg)({source:"browse-templates-modal"}),{templates:N,categoryIds:A}=(0,eg.bg)({templatesShelfType:k.cS.FIGJAM_SIMPLE_TEMPLATES_PICKER}),L={...N,...p},M=(0,_.Gi)(),O={};A.reduce((e,t)=>(e[t]=(0,f.t)("browse_templates_modal_sidebar.get_started"),e),O);let R={...m,...O},[P,D]=a.useState(),[B,U]=a.useState(),V=(0,o.Im)(L),H=P&&Object.values(L).find(e=>e.includes(P))||[],{insertTemplate:W,isInsertingTemplate:q}=(0,y.Fz)(),X=(0,r.d4)(e=>P?e.hubFiles[P]:null),Y=a.useCallback(()=>{n?n():c()},[n,c]);a.useEffect(()=>{let t=S.filter(t=>m[t]===e.initiallySelectedCategoryTitle);1===t.length&&U(t[0])},[S,m,e.initiallySelectedCategoryTitle]),a.useEffect(()=>{u.current?.scrollTo(0,0),P&&X&&(0,x._)("resource_previewed",{fileKey:v,resourceType:"template",resourceName:(0,C.a6)(X).name,resourceId:P,triggeredFrom:"browse-templates-modal",templateType:j.n.HubFile})},[P,v,X]);let Z=!b,J=(0,y.b4)(),Q=(0,y.WS)(),$=e=>q(e)||Q(e),ee=t=>{if(e.templateInsertionLocation===C.RD.CURRENT_FILE)W({template:t,onSuccess:Y,triggeredFrom:"browse-templates-modal"});else{switch(t.type){case j.n.HubFile:g(t.template.id);break;case j.n.TeamTemplate:J({templateIdentifier:{type:w.vt.TeamTemplate,file_key:t.template.file_key},templateName:t.template.name,openInNewTab:!0});break;case j.n.TeamTemplateLg:J({templateIdentifier:{type:w.vt.TeamTemplate,file_key:t.template.fileKey},templateName:t.template.name,openInNewTab:!0});break;default:(0,l.xb)(t)}i?.()}};if(P)t=(0,s.jsx)(es,{templateId:P,templateInsertionLocation:e.templateInsertionLocation,insertTemplate:ee,isInsertingTemplate:$(P),moreTemplateIds:H,selectTemplate:D}),Z=!1;else if(b)t=(0,s.jsx)(eo,{searchQuery:b,hubFileResultIds:E,isInsertingTemplate:$,onInsertTemplate:ee,onPreviewHubFileTemplate:D});else if(B===z)switch(M?.type){case"org":t=(0,s.jsx)(eh.yB,{insertTemplate:ee,isInsertingTemplate:$,templateInsertionLocation:e.templateInsertionLocation});break;case"team":t=(0,s.jsx)(ef.z,{teamId:M.entity.id,teamName:M.name,onInsert:ee,isInsertingTemplate:$,templateInsertionLocation:e.templateInsertionLocation});break;default:t=(0,s.jsx)(s.Fragment,{})}else t=V?(0,s.jsx)(s.Fragment,{}):(0,s.jsx)(K,{categoryIds:S,categoryTitles:R,enterCommunityUrl:"/community/figjam",isInsertingTemplate:$,onInsertTemplate:ee,previewHubFile:D,selectCategory:U,selectedCategory:B,templateInsertionLocation:e.templateInsertionLocation,templates:L});return(0,s.jsxs)(d.Wk,{className:h()({[F.hW]:"newFile"===e.triggeredFrom}),children:[(0,s.jsx)(em,{searchQuery:b,setSearchQuery:T,previewTemplateId:P,goBack:()=>D(void 0)}),(0,s.jsxs)("div",{className:F.jE,ref:u,children:[Z&&(0,s.jsx)(G,{categoryIds:S,categoryTitles:R,selectedCategory:B,selectCategory:U,makeSomethingCategoryId:A[0]??"",triggeredFrom:e.triggeredFrom,subcategories:I}),t]})]})}function e_(e){let{properties:t,name:n}=(0,g.j6)(),{onClose:i}=e,r=a.useCallback(()=>{i(),(0,v.Cu)({...t,trackingContext:n,text:"Templates Close Button"})},[t,n,i]),l=c.hS({...e,onClose:r});return(0,s.jsx)(p.J,{brand:"whiteboard",children:(0,s.jsx)(u.bL,{width:888,manager:l,children:(0,s.jsx)(ex,{...e})})})}let ey=(0,E.Ju)(function(e){let t=(0,b.tS)();return(0,s.jsx)(g.fu,{name:"template_modal_shown",properties:{fileKey:t,source:e.triggeredFrom},children:(0,s.jsx)(e_,{...e})})},"BrowseTemplatesModal")},295114:(e,t,n)=>{n.d(t,{G:()=>_,y:()=>y});var i=n(104076),s=n(716976),a=n(237420),r=n(296430),l=n(266808),o=n(11395),d=n(192075),c=n(366535),u=n(244205),p=n(551037),m=n(877373),h=n(615782),f=n(349311),g=n(502756),x=n(178266);let _="templates_toolbar";function y(){let e=(0,a.wA)(),t=(0,a.d4)(e=>e.modalShown?.type===g.PH.type),n=(0,p.k)(),y=(0,o.Om)(),v=(0,s.useCallback)(()=>{if(n){y("SHOW_TEMPLATES_MODAL");return}t?e(c.Ce()):(m.oW.trigger("action",l.KWd.CLEAR),e(c.$O({type:g.PH.type,data:{triggeredFrom:"toolbar",templateInsertionLocation:h.RD.CURRENT_FILE}})))},[n,y,e,t]),b=(0,d.t)("whiteboard.inserts.templates");return(0,i.jsx)(x.Z,{tooltip:{type:f.Ib.TEXT,text:b},isActive:t,onClick:v,trackingProperties:{trackingDescriptor:u.c.TEMPLATES_TOOLBAR_ITEM_CLICKED},onboardingKey:_,children:(0,i.jsx)(r.X,{})})}},228944:(e,t,n)=>{n.d(t,{AF:()=>B,Cm:()=>Y,G3:()=>X,Kt:()=>q,Pr:()=>G,iq:()=>P,mS:()=>D,tJ:()=>U});var i=n(104076),s=n(237420),a=n(951002),r=n(88314),l=n(419822),o=n(684742),d=n(286138),c=n(475477),u=n(812714),p=n(511570),m=n.n(p),h=n(513674),f=n(219199),g=n(449572),x=n(140490),_=n(665261),y=n(236631),v=n(192075),b=n(50536),C=n(147046),j=n(249586),k=n(411017),w=n(220411),E=n(506192),T=n(615782),S=n(59849),I=n(395556),N=n(652960),A=n(919853),L=n(40133),M=n(583669),O=n(582154),R=n(480143);function P(e){return(0,i.jsx)("ul",{className:R.sk,children:e.children})}function D(e){return(0,i.jsx)(x.u,{label:"TemplatesContextMenu",children:(0,i.jsx)(F,{...e})})}function F({template:e}){let t=(0,E.Um)(),{primaryKey:n}=(0,k.fG)()(e);return t?.type===O.hx&&t?.data?.templatePrimaryKey===n&&t.data?.position?(0,i.jsx)(z,{template:e,position:t.data.position}):null}function z({template:e,position:t}){let n=(0,s.wA)(),{viewSourceFileUrl:a,duplicateLink:r,primaryKey:o}=(0,k.fG)()(e),d=e.type===I.n.TeamTemplate,c=(0,g.bc)(S.sMs,{key:o},{enabled:d});return(0,i.jsxs)(_.ms,{style:{...t,position:"fixed"},children:[(0,i.jsx)(_.c$,{onClick:()=>{n(C.oB()),n(b.S({url:r}))},children:(0,v.tx)("browse_templates_modal.context_menu.copy_link")}),a&&d&&(0,i.jsx)(_.c$,{onClick:()=>{n(C.oB()),f.Ay.redirect(a,"_blank")},disabled:"loading"===c.status||"disabled"===c.status||!c.data?.file?.hasPermission,children:(0,i.jsxs)(h.Y1,{width:"fill-parent",horizontalAlignItems:"space-between",verticalAlignItems:"center",spacing:8,children:[(0,i.jsx)("span",{children:(0,v.tx)("browse_templates_modal.context_menu.view_original_file")}),(0,i.jsx)("span",{className:y.s.if("loading"!==c.status,y.s.invisible).$,children:(0,i.jsx)(l.k,{})})]})})]})}function B(e){let{clientMeta:t,imageUrl:n,thumbnailIsSet:s,isWhiteboard:a,name:r,publishers:l,hubFileId:c,resizedThumbnailUrls:p}=(0,k.fG)()(e.template),h=(0,O.jq)(e.template),f=(0,A.Td)();return(0,i.jsxs)("li",{children:[(0,i.jsx)(N.zq,{onContextMenu:h,image:(0,i.jsxs)(N.FK,{backgroundColor:(0,w.Cn)(t),children:[(0,i.jsx)(N.zx.Cover,{children:(0,i.jsx)(o.E,{className:m()(R.n_,{[R.tN]:(0,u.kc)().figjam_a11y_templates_modal}),onClick:e.onInsert,disabled:e.isInsertingTemplate||f,"aria-label":(0,u.kc)().figjam_a11y_templates_modal?(0,T.QE)(r,e.templateInsertionLocation):void 0,children:null})}),(0,i.jsx)(N.zx.Center,{children:(0,i.jsxs)(L.i,{insertTemplate:e.onInsert,isInsertingTemplate:e.isInsertingTemplate,shouldUseOpaqueBackground:!0,children:[(0,T.Ve)(e.templateInsertionLocation),(0,u.kc)().figjam_a11y_templates_modal&&(0,i.jsx)(d.E,{children:r})]})}),(0,i.jsx)(M.Ho,{image:n,isSet:s,isWhiteboard:a,hubFileId:c,alt:(0,u.kc)().figjam_a11y_templates_modal?"":r,resizedThumbnailUrls:p})]}),bottomRow:(0,i.jsx)(N.Wf.FullMetadata,{name:r,publishers:l,hoverText:e.onPreview?(0,v.t)("browse_templates_modal.view_details"):void 0,onClick:e.onPreview})}),(0,i.jsx)(D,{template:e.template})]})}function G(e){let t=(0,s.d4)(t=>t.hubFiles[e.hubFileId]);return(0,i.jsx)(B,{template:{template:t,type:I.n.HubFile},onInsert:()=>e.onInsert({template:t,type:I.n.HubFile}),isInsertingTemplate:e.isInsertingTemplate,onPreview:e.previewHubFile,templateInsertionLocation:e.templateInsertionLocation})}function U({url:e,fileKey:t}){return(0,i.jsx)(c.N.Button,{href:e,newTab:!0,onClick:()=>{(0,j.Cu)({fileKey:t,uiSelectedView:"see_more_button",name:"Templates Modal Browse More"},"cta_clicked")},variant:"secondary",children:(0,v.tx)("browse_templates_modal_content.see_more_in_community")})}function V(){return(0,i.jsx)("div",{className:y.s.flex.itemsCenter.h40.my8.wFull.$,children:(0,i.jsx)(H,{})})}function H(){return(0,i.jsx)("div",{className:m()(y.s.w100.h16.bRadius3.$,R.Mm)})}function K({lightness:e="normal"}){let t=function(e){switch(e){case"normal":return R.Mm;case"light":return R.EQ;case"lightest":return R.Y;default:(0,a.xb)(e)}}(e);return(0,i.jsx)(N.zq,{image:(0,i.jsx)(N.FK,{removeBorder:!0,children:(0,i.jsx)("div",{className:m()(t,y.s.wFull.hFull.$)})}),bottomRow:(0,i.jsx)("div",{className:m()(t,y.s.h16.w100.bRadius3.$)})})}function W({shouldFade:e}){return(0,i.jsx)(i.Fragment,{children:(0,r.y1)(3).map(t=>{let n="normal";return e&&(n=2===t?"lightest":1===t?"light":"normal"),(0,i.jsx)(K,{lightness:n},t)})})}function q(){return(0,i.jsxs)("div",{className:y.s.px24.$,children:[(0,i.jsx)(V,{}),(0,i.jsxs)(P,{children:[(0,i.jsx)(W,{}),(0,i.jsx)(W,{}),(0,i.jsx)(W,{shouldFade:!0})]})]})}function X({shouldFade:e}){return(0,i.jsxs)("div",{className:y.s.pb20.$,children:[(0,i.jsx)("div",{className:y.s.h24.mb16.$,children:(0,i.jsx)(H,{})}),(0,i.jsx)(P,{children:(0,i.jsx)(W,{shouldFade:e})})]})}function Y(){return(0,i.jsx)(h.Y1,{width:"fill-parent",height:"fill-parent",verticalAlignItems:"center",horizontalAlignItems:"center",children:(0,i.jsx)(l.k,{size:"lg"})})}},413296:(e,t,n)=>{n.d(t,{Ht:()=>_,O9:()=>y});var i=n(104076),s=n(716976),a=n(237420),r=n(359166),l=n(236631),o=n(259161),d=n(192075),c=n(732836),u=n(443192),p=n(134671),m=n(470876),h=n(174730),f=n(191047);let g="team_template_card_view_count",x=()=>{if(!r.x4)return;let e=parseInt(r.x4.getItem(g)||"0");r.x4.setItem(g,""+ ++e)};function _({fullWidth:e=!1}){return(0,i.jsxs)("div",{className:l.s.flex.flexColumn.itemsCenter.mxAuto.gap12.alignCenter.justifyCenter.$,style:{width:e?"100%":"360px",paddingTop:"100px"},children:[(0,i.jsx)("div",{children:(0,i.jsx)(f.$z,{size:f.IX.MEDIUM,useCurrentFileAsThumbnail:!1})}),(0,i.jsx)("div",{className:l.s.font13.fontSemiBold.$,children:(0,d.tx)("whiteboard.inserts.custom_templates_header")}),(0,i.jsx)("div",{children:(0,d.tx)("whiteboard.inserts.custom_templates_description")}),(0,i.jsx)(o.pW,{newTab:!0,href:p.A,children:(0,d.tx)("whiteboard.inserts.learn_more")})]})}function y({applyInsertStyling:e,applyNarrowStyling:t}){let n=(0,h.f)("dismissed_team_template_announcement_card"),l=(0,a.wA)(),o=(0,m.tS)(),d=(0,s.useCallback)(()=>{l(u.b({dismissed_team_template_announcement_card:!0})),localStorage.removeItem(g)},[l]),c=parseInt(r.x4?.getItem(g)||"0");return((0,s.useEffect)(()=>{!n&&c>=10&&d()},[n,c,d]),o&&c<10&&!n)?(0,i.jsx)(v,{applyInsertStyling:e,applyNarrowStyling:t,onDismiss:d}):null}function v({applyInsertStyling:e,applyNarrowStyling:t,onDismiss:n}){return(0,s.useEffect)(()=>{x()},[]),(0,i.jsxs)("div",{className:l.s.bRadius5.flex.flexRow.itemsStart.gap12.itemsCenter.p18.colorBgSecondary.mb20.if(e,l.s.m20).if(t,l.s.m12.p12.pt16.mb12).$,"data-testid":"teamplates-announcement-card",children:[(0,i.jsx)("div",{children:(0,i.jsx)(f.$z,{size:t?f.IX.SMALL:f.IX.MEDIUM,useCurrentFileAsThumbnail:!1})}),(0,i.jsxs)("div",{className:l.s.flex.flexColumn.justifyBetween.$,children:[(0,i.jsx)("div",{className:l.s.font13.fontSemiBold.pb8.$,children:(0,d.tx)("whiteboard.inserts.custom_templates_header")}),(0,i.jsx)("div",{children:(0,d.tx)("whiteboard.inserts.custom_templates_description")}),(0,i.jsxs)("div",{className:l.s.flex.gap8.pt16.$,children:[(0,i.jsx)(o.pW,{newTab:!0,href:p.A,children:(0,d.tx)("whiteboard.inserts.learn_more")}),(0,i.jsx)(c.V,{onClick:n,children:(0,d.tx)("whiteboard.inserts.dismiss")})]})]})]})}},121450:(e,t,n)=>{n.d(t,{DL:()=>R,Z0:()=>z,fc:()=>F,yB:()=>B});var i=n(104076),s=n(716976),a=n(999083),r=n(307829),l=n(550012),o=n(293422),d=n(936031),c=n(812714),u=n(511570),p=n.n(u),m=n(665261),h=n(280350),f=n(652539),g=n(236631),x=n(192075),_=n(911990),y=n(470876),v=n(411017),b=n(288747),C=n(944350),j=n(754039),k=n(853246),w=n(563554),E=n(413296),T=n(228944),S=n(496809),I=n(344943),N=n(370420),A=n(480143),L=n(523860),M=n(85206);function O({filterOptionsCount:e,userMemberFilterOptionsSelected:t,userNonMemberFilterOptionsSelected:n,isMyTeamsOnly:i,showWorkspaces:s,unassignedTeamsSelected:a}){let r=[...t,...n],l=r.length+(a?1:0);return 0===l?(0,x.t)("browse_templates_modal.none_selected"):l===e?s?i?(0,x.t)("browse_templates_modal.my_teams_only"):(0,x.t)("browse_templates_modal.all_workspaces"):(0,x.t)("browse_templates_modal.all_teams"):1===l?a?(0,x.t)("browse_templates_modal.other_teams"):r[0].name:(0,x.t)("browse_templates_modal.first_name_count_more",{count:l-1,firstName:r[0].name})}function R(e){return(0,c.kc)().figjam_a11y_templates_modal?(0,i.jsx)(D,{...e}):(0,i.jsx)(P,{...e})}function P({filterOptions:e,selectedIds:t,isMyTeamsOnly:n,onFilterChange:s,userTeamOrWorkspaceIds:r,showWorkspaces:l,rightAlignOptions:o=!0}){let d=new Set(t||e.map(e=>e.id)),c=[],u=[],p=[],h=!1;for(let t of e)d.has(t.id)&&p.push(t),(0,y.qI)(t)?h=!0:r.has(t.id)?c.push(t):u.push(t);(0,a.KQ)(c,"name"),(0,a.KQ)(u,"name");let f=c.filter(e=>d.has(e.id)),v=u.filter(e=>d.has(e.id)),b=O({filterOptionsCount:e.length,userMemberFilterOptionsSelected:f,userNonMemberFilterOptionsSelected:v,showWorkspaces:l,isMyTeamsOnly:n,unassignedTeamsSelected:d.has(k.s)}),C=(e,t)=>{s({ids:e?p.reduce((e,n)=>n.id===t.id?e:[...e,n.id],[]):[...p.map(e=>e.id),t.id],myTeamsOnly:n})},j=(e,t)=>{let i=new Set(d);e.forEach(e=>{t?i.add(e.id):i.delete(e.id)}),s({ids:Array.from(i),myTeamsOnly:n})},E=[];if(l){if(E.push(...[...c,...u].filter(e=>!!e.id).map(e=>{let t=d.has(e.id);return(0,i.jsx)(m.rr,{checked:t,onClick:()=>{C(t,e)},displayType:m.Jn.Checkbox,children:e.name},e.id||e.name)})),E.length&&E.unshift((0,i.jsx)(m.wv,{},"my-teams-only-separator")),E.unshift((0,i.jsx)(m.rr,{checked:n,onClick:()=>s({ids:t,myTeamsOnly:!n}),displayType:m.Jn.Checkmark,children:(0,x.tx)("browse_templates_modal.my_teams_only")},"my-teams-only")),h){let e=d.has(k.s);E.push((0,i.jsx)(m.wv,{},"unassigned-teams-separator"),(0,i.jsx)(m.rr,{checked:e,onClick:()=>{C(e,{id:k.s})},displayType:m.Jn.Checkbox,children:(0,x.tx)("browse_templates_modal.other_teams")},"unassigned-teams"))}}else c.length>0&&E.push((0,i.jsx)(m.rr,{displayType:m.Jn.Checkbox,checked:c.length===f.length,mixed:c.length>f.length&&f.length>0,onClick:()=>{j(c,f.length<c.length)},children:(0,x.tx)("browse_templates_modal.my_teams")},"my-teams")),E.push(...c.map(e=>{let t=d.has(e.id);return(0,i.jsx)(m.rr,{checked:t,onClick:()=>{C(t,e)},displayType:m.Jn.Checkbox,nested:!0,children:e.name},e.id||e.name)})),c.length>0&&u.length>0&&E.push((0,i.jsx)(m.wv,{},"other-teams-separator")),u.length>0&&E.push((0,i.jsx)(m.rr,{displayType:m.Jn.Checkbox,checked:u.length===v.length,mixed:u.length>v.length&&v.length>0,onClick:()=>{j(u,v.length<u.length)},children:(0,x.tx)("browse_templates_modal.all_others")},"other-teams")),E.push(...u.map(e=>{let t=d.has(e.id);return(0,i.jsx)(m.rr,{checked:t,onClick:()=>{C(t,e)},displayType:m.Jn.Checkbox,nested:!0,children:e.name},e.id||e.name)}));return E.length?(0,i.jsxs)(_.Y,{spacing:0,width:"hug-contents",children:[(0,i.jsx)("span",{className:g.s.colorTextSecondary.$,children:(0,x.tx)("browse_templates_modal.published_from")}),(0,i.jsx)(m.Ve,{label:b,menuTrackingContextName:w.e0.TEMPLATES_BROWSE_FILTERS,menuTrackingProperties:{isEnterpriseOrg:l},noBorder:!0,noRightPadding:!0,notDraggable:!0,options:E,optionsBelowSelector:!0,rightAlignOptions:o,stayOpenOnSelect:!0})]}):null}function D({filterOptions:e,selectedIds:t,isMyTeamsOnly:n,onFilterChange:s,userTeamOrWorkspaceIds:d,showWorkspaces:c,rightAlignOptions:u=!0}){let p=new Set(t||e.map(e=>e.id)),m=[],h=[],f=[],v=!1;for(let t of e)p.has(t.id)&&f.push(t),(0,y.qI)(t)?v=!0:d.has(t.id)?m.push(t):h.push(t);(0,a.KQ)(m,"name"),(0,a.KQ)(h,"name");let b=m.filter(e=>p.has(e.id)),C=h.filter(e=>p.has(e.id)),j=O({filterOptionsCount:e.length,userMemberFilterOptionsSelected:b,userNonMemberFilterOptionsSelected:C,showWorkspaces:c,isMyTeamsOnly:n,unassignedTeamsSelected:p.has(k.s)}),w=(e,t)=>{s({ids:e?f.reduce((e,n)=>n.id===t.id?e:[...e,n.id],[]):[...f.map(e=>e.id),t.id],myTeamsOnly:n})},E=(e,t)=>{let i=new Set(p);e.forEach(e=>{t?i.add(e.id):i.delete(e.id)}),s({ids:Array.from(i),myTeamsOnly:n})},{getTriggerProps:T,manager:S}=r.b({initialPosition:u?"bottom-end":"bottom-start"}),I=[];if(c){if(I.push(...[...m,...h].filter(e=>!!e.id).map(e=>{let t=p.has(e.id);return(0,i.jsx)(l.H_,{checked:t,onChange:()=>w(t,e),children:e.name},e.id||e.name)})),I.length&&I.unshift((0,i.jsx)(r.wv,{},"my-teams-only-separator")),I.unshift((0,i.jsx)(l.H_,{checked:n,onChange:()=>s({ids:t,myTeamsOnly:!n}),children:(0,x.tx)("browse_templates_modal.my_teams_only")},"my-teams-only")),v){let e=p.has(k.s);I.push((0,i.jsx)(r.wv,{},"unassigned-teams-separator")),I.push((0,i.jsx)(l.H_,{checked:e,onChange:()=>w(e,{id:k.s}),children:(0,x.tx)("browse_templates_modal.other_teams")},"unassigned-teams"))}}else m.length>0&&I.push((0,i.jsx)(l.H_,{checked:m.length===b.length,mixed:m.length>b.length&&b.length>0,onChange:()=>{E(m,b.length<m.length)},children:(0,x.tx)("browse_templates_modal.my_teams")},"my-teams")),I.push(...m.map(e=>{let t=p.has(e.id);return(0,i.jsx)(l.H_,{checked:t,onChange:()=>w(t,e),children:e.name},e.id||e.name)})),m.length>0&&h.length>0&&I.push((0,i.jsx)(r.wv,{},"other-teams-separator")),h.length>0&&I.push((0,i.jsx)(l.H_,{checked:h.length===C.length,mixed:h.length>C.length&&C.length>0,onChange:()=>{E(h,C.length<h.length)},children:(0,x.tx)("browse_templates_modal.all_others")},"other-teams")),I.push(...h.map(e=>{let t=p.has(e.id);return(0,i.jsx)(l.H_,{checked:t,onChange:()=>w(t,e),children:e.name},e.id||e.name)}));return I.length?(0,i.jsxs)(_.Y,{spacing:0,width:"hug-contents",children:[(0,i.jsx)("span",{className:g.s.colorTextSecondary.$,children:(0,x.tx)("browse_templates_modal.published_from")}),(0,i.jsxs)(r.bL,{manager:S,children:[(0,i.jsx)(o.$n,{...T(),variant:"ghost","aria-label":(0,x.t)("browse_templates_modal.filter_templates_by_publisher"),children:j}),(0,i.jsx)(r.mc,{children:I})]})]}):null}function F(e){let[t,n]=(0,s.useState)(!0),a=(0,s.useRef)(null),r=(0,s.useRef)(!1);return(0,s.useEffect)(()=>{!0!==r.current||t||a.current?.scrollIntoView()},[t]),(0,i.jsxs)("section",{children:[(0,i.jsx)("button",{className:p()(g.s.wFull.alignLeft.sticky.top0.zIndexTemplateModalTeamName.font13.my8.h40.fontMedium.colorBg.$,A.MY),onClick:()=>n(!t),ref:a,children:(0,i.jsxs)("h2",{children:[(0,i.jsx)(f.B,{className:g.s.relative.inlineFlex.justifyCenter.colorIconTertiary.mx2.w16.$,style:{top:"-2px"},svg:t?L.A:M.A}),e.workspaceName&&(0,i.jsxs)("span",{className:g.s.colorTextSecondary.fontNormal.$,children:[e.workspaceName," /"," "]}),e.teamName]})}),t&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:g.s.if(e.minimalSpacing,g.s.px0.mb0,g.s.px24.mb20).$,children:e.children}),(0,i.jsx)(h.a,{"data-testid":`load-more-team-${e.teamId}`,onIntersectionChange:({isIntersecting:t})=>{t&&e.onRequestLoadMoreForTeam(e.teamId)}})]}),(0,i.jsx)(h.a,{onIntersectionChange:({isIntersecting:e})=>{r.current=e}})]})}function z(e){return(0,i.jsxs)("section",{children:[(0,i.jsxs)(d.bL,{className:N.H6,children:[(0,i.jsxs)("h2",{className:N.bV,children:[e.workspaceName&&(0,i.jsxs)("span",{className:g.s.colorTextSecondary.fontNormal.$,children:[e.workspaceName," /"," "]}),e.teamName]}),(0,i.jsx)(d.gZ,{className:N.jy,children:(0,i.jsx)(o.$n.Link,{onClick:e.onSeeAllClick,children:(0,x.tx)("whiteboard.inserts.see_all")})})]}),(0,i.jsx)("div",{className:g.s.if(e.minimalSpacing,g.s.px0.mb0,g.s.px24.mb20).$,children:e.children})]})}function B(e){let t=(0,s.useRef)(null),n=(0,b.sZ)(),a=(0,j.G7)(n),{filterOptions:r,selectedTeamOrWorkspaceOrLicenseGroupIds:l,isMyTeamsOnly:o,onFilterChange:d,requestLoadMore:u,requestLoadMoreForTeam:p,templatesByTeam:m,userTeamOrWorkspaceIds:f,isLoadingTeamTemplates:k}=(0,y.GR)(n,C._Y.WHITEBOARD),{filterOptions:w,selectedIds:N,isMyTeamsOnly:A,onFilterChange:L,requestLoadMoreForOrg:M,teamTemplates:O,userTeamOrWorkspaceIds:P,isLoading:D}=(0,y.L_)({orgId:n.id,areWorkspacesEnabled:a,editorType:C._Y.WHITEBOARD,numTemplatesPerTeam:6}),B=(0,c.kc)().pro_templates_lg,[G,U]=(0,s.useState)(null);if(G)return(0,i.jsx)(S.z,{teamId:G.teamId,teamName:G.name,templateInsertionLocation:e.templateInsertionLocation,isInsertingTemplate:e.isInsertingTemplate,onInsert:e.insertTemplate,onBackClick:()=>U(null)});let V=B?L:d,H=B?M:u,K=B?D:k,W=B?O:m;return(0,i.jsxs)("div",{className:g.s.wFull.$,children:[(0,i.jsxs)(_.Y,{horizontalAlignItems:"space-between",height:I.k,padding:{left:24,right:24},strokeWidth:{bottom:1},strokeColor:"default",children:[(0,i.jsx)("div",{className:g.s.font13.fontMedium.$,children:(0,x.tx)("browse_templates_modal.published_by_current_org_name",{orgName:n.name})}),(0,i.jsx)(R,{filterOptions:B?w:r,selectedIds:B?N:l,isMyTeamsOnly:B?A:o,onFilterChange:e=>{"function"==typeof t.current?.scroll&&t.current.scroll({top:0,behavior:"smooth"}),V(e)},userTeamOrWorkspaceIds:new Set(B?P:f),showWorkspaces:a})]}),0===W.length?B?D:K?(0,i.jsx)(T.Kt,{}):(0,i.jsx)(E.Ht,{}):(0,i.jsxs)("section",{className:g.s.overflowYScroll.$,ref:t,style:{height:`calc(100% - ${I.k}px)`},children:[W.map(({teamId:t,teamName:n,workspaceName:s,templates:r,totalTemplatesByTeam:l})=>{let o=(0,i.jsx)(T.iq,{children:r.map(t=>(0,i.jsx)(T.AF,{templateInsertionLocation:e.templateInsertionLocation,template:t,onInsert:()=>e.insertTemplate(t),isInsertingTemplate:e.isInsertingTemplate((0,v.gp)(t))},(0,v.gp)(t)))});return B?(0,i.jsx)(z,{teamName:n??"",workspaceName:a?s??"":null,teamId:t,onSeeAllClick:l>6?()=>{U({teamId:t,name:n??""})}:void 0,children:o},t):(0,i.jsx)(F,{teamName:n??"",workspaceName:a?s??"":null,teamId:t,onRequestLoadMoreForTeam:p,children:o},t)}),(0,i.jsx)(h.a,{"data-testid":"load-more-teams",className:g.s.relative.$,style:{bottom:"250px"},onIntersectionChange:({isIntersecting:e})=>{e&&H()}})]})]})}},496809:(e,t,n)=>{n.d(t,{z:()=>x});var i=n(104076),s=n(420680),a=n(739713),r=n(681398),l=n(280350),o=n(236631),d=n(192075),c=n(911990),u=n(470876),p=n(944350),m=n(395556),h=n(413296),f=n(228944),g=n(344943);function x({teamId:e,teamName:t,templateInsertionLocation:n,onInsert:x,isInsertingTemplate:_,onBackClick:y}){let{requestLoadMoreForTeam:v,templatesByTeam:b}=(0,u.li)({teamId:e,editorType:p._Y.WHITEBOARD});return b?(0,i.jsxs)("div",{className:o.s.wFull.$,children:[(0,i.jsxs)(c.Y,{horizontalAlignItems:"start",height:g.k,strokeWidth:{bottom:1},strokeColor:"default",padding:{left:24,right:24},children:[y&&(0,i.jsx)(s.K,{"aria-label":(0,d.t)("general.back"),actionOnPointerDown:r.Ay.isIpad,onClick:y,children:(0,i.jsx)(a.C,{})}),(0,i.jsx)("div",{className:o.s.font13.fontMedium.$,children:(0,d.tx)("browse_templates_modal.published_by_current_org_name",{orgName:t})})]}),(0,i.jsxs)("section",{className:o.s.overflowYScroll.$,style:{height:`calc(100% - ${g.k}px)`},children:[(0,i.jsx)("div",{className:o.s.px24.my20.$,children:(0,i.jsx)(f.iq,{children:b.templates.map(e=>(0,i.jsx)(f.AF,{templateInsertionLocation:n,template:{template:e,type:m.n.TeamTemplateLg},onInsert:()=>x({template:e,type:m.n.TeamTemplateLg}),isInsertingTemplate:_(e.fileKey)},e.fileKey))})}),(0,i.jsx)(l.a,{className:o.s.relative.$,style:{bottom:"250px"},onIntersectionChange:({isIntersecting:e})=>{e&&v()}})]})]}):(0,i.jsx)(h.Ht,{})}},582154:(e,t,n)=>{n.d(t,{hx:()=>y,jq:()=>v,bg:()=>_});var i=n(716976),s=n(237420),a=n(99723),r=n(755444);n(221586);var l=n(192075),o=n(587710),d=n(921540),c=n(147046);n(36599);var u=n(249586),p=n(411017),m=n(211862),h=n(615782);n(944350);var f=n(530299),g=n(150156);n(395556);var x=n(792028);function _(e){let{templatesShelfType:t,source:n,isCmtyShelvesV2Enabled:c=!1}=e,p=(0,s.wA)(),[_]=i.useState(()=>new g.Ef([],{keys:["name"]})),y=t||x.cS.FIGJAM_TEMPLATES_PICKER,v=o.sz.loadingKeyForPayload({shelfType:y}),b=(0,f.oh)(v),C=(0,f.mC)(v),j=(0,s.d4)(e=>e.hubFiles),k=(0,s.d4)(e=>e.communityHub.shelves[y]),w=(0,m.tS)(),E=r.Ay().user_data?.id,[T,S]=i.useState(""),[I,N]=i.useState([]),A=i.useMemo(()=>(k||[]).reduce((e,t)=>({...e,[t.id]:t.shelf_content.map(e=>e.id)}),{}),[k]),L=i.useMemo(()=>(k||[]).reduce((e,t)=>({...e,[t.id]:(0,l.Yd)(t.i18n_meta.title,t.title)}),{}),[k]),M=i.useMemo(()=>(k||[]).map(({id:e})=>e),[k]),O=i.useCallback(e=>{let t=j[e],i=(0,h.a6)(t);p(d.rL({hubFileId:e,hubFileName:i.name||"this file",openInNewTab:!0,source:n}))},[p,j,n]);return i.useEffect(()=>{b||C||(c?p(o.sr({shelfType:y})):p(o.sz({shelfType:y})))},[p,C,b,y,c]),i.useEffect(()=>{let e=Object.keys(A).reduce((e,t)=>[...e,...A[t]],[]).map(e=>(0,h.a6)(j[e]));_.set(e)},[A,j,_]),i.useEffect(()=>{let e;T?(e=[...new Set(e=_.search(T).map(e=>e.hub_file_id))],(0,u.Cu)({userId:E,fileKey:w,entry_point:"templates_modal",scope:"Templates Modal",files:0,private_plugins:0,private_widgets:0,public_plugins:0,public_widgets:0,projects:0,teams:0,users:0},"search_query_result")):e=[],N(e)},[T,E,w,_]),{templates:A,categoryTitles:L,hubFiles:j,isLoading:b,duplicateFile:O,fileKey:w,userId:E,setSearchQuery:i.useCallback((0,a.s)(S,300),[]),searchQuery:T,searchTemplatesResult:I,categoryIds:M,subcategories:i.useMemo(()=>{if(!k)return[];let e={activity:(0,l.t)("browse_templates_modal.subcategory.activity"),role:(0,l.t)("browse_templates_modal.subcategory.role")},t=[];return k.forEach(n=>{if(!n.shelf_meta.category)return;let i=n.shelf_meta.category,s=t.find(e=>e.id===i);s?s.categoryIds.push(n.id):t.push({id:i,title:e[i]||i,categoryIds:[n.id]})}),t},[k])}}n(616060);let y="templates_context_menu";function v(e){let t=(0,s.wA)(),{primaryKey:n}=(0,p.fG)()(e);return i.useCallback(e=>{e.preventDefault();let i={templatePrimaryKey:n,position:{top:e.clientY,left:e.clientX}};t(c.j7({type:y,data:i}))},[t,n])}},344943:(e,t,n)=>{n.d(t,{k:()=>i});let i=56},159048:(e,t,n)=>{n.d(t,{Zc:()=>f});var i=n(104076),s=n(716976),a=n(237420),r=n(826220),l=n(268389),o=n(266808),d=n(192075),c=n(366535),u=n(822764),p=n(959834),m=n(215239);let h="InsertMediaModal",f=(0,p.Ju)(function(){let e=(0,a.wA)(),t=s.useCallback(()=>{o.glU?.triggerAction("set-tool-default",null),e(c.ES({type:h}))},[e]),{initialModalPosition:n}=(0,u.ts)({kind:"mountCenter"},192,320);return n?(0,i.jsx)(r.bL,{onClose:t,draggable:"header",defaultPosition:n,width:320,htmlAttributes:{"data-testid":"insert-media-modal"},children:(0,i.jsxs)(l.vo,{children:[(0,i.jsx)(l.Y9,{children:(0,i.jsx)(l.hE,{children:(0,d.t)("whiteboard.embeds.insert_embed_modal.title")})}),(0,i.jsx)(l.nB,{children:(0,i.jsx)(m.q,{onSuccess:t})})]})}):null},h)},125616:(e,t,n)=>{n.d(t,{H:()=>h,_:()=>f});var i=n(104076),s=n(951002),a=n(273039),r=n(266808),l=n(980852),o=n(511570),d=n.n(o),c=n(337059),u=n(873016),p=n(987836),m=n(770158);function h({children:e,initialViewerSize:t,isDeviceFrameShown:n,shouldHide:s}){let a;return n&&(a=l.getActiveTSSceneGraph().getCurrentPage()?.prototypeDevice),(0,i.jsx)(f,{initialViewerSize:t,isDeviceFrameShown:n,prototypeDevice:a,isInlinePreview:!0,shouldHide:s,children:e})}function f({children:e,initialViewerSize:t,isDeviceFrameShown:n,prototypeDevice:l,isInlinePreview:o,onDeviceFrameLoaded:h,shouldHide:f}){let g="data:,",x="",_={},y=!1,v=1,b=!1;if(n){(0,s.B1)(l,"prototypeDevice should be set when device frame is shown");let{presetIdentifier:e,rotation:n}=l,i=c.hY[e];if(o){let e=i?.inlinePreviewInfo;(0,s.B1)(e,"inlinePreviewDeviceData should exist since device is supported for inline preview")}g=i.url,y=(0,a.devicePresetHasOverlyRoundedCorners)(e),b=n===r.xOL.CCW_90;let d=i.getI18nDeviceName(),p=i.getI18nStyleName();x=`${d} (${p})`;let{idealDeviceSize:m,framePresetSize:h,offset:f}=(0,u.is)(e,n),C=(0,u.Ho)(t,h,m);v=C.x/C.y;let j=(0,u.Ho)(t,h,f),k={x:t.x/C.x*100,y:t.y/C.y*100},w={x:j.x/C.x*100,y:j.y/C.y*100};_={position:"absolute",width:`${k.x}%`,height:`${k.y}%`,left:`${w.x}%`,top:`${w.y}%`}}let C=n?m.qW:p.Wc,j=d()({[p.Wc]:!0,[m.Cb]:n,[m.Q$]:y});return(0,i.jsxs)("div",{className:d()(C,{[p.R]:f}),children:[n&&(b?(()=>{let e=1/v;return(0,i.jsx)("div",{style:{aspectRatio:v},children:(0,i.jsx)("img",{src:g,className:d()(m.Q0,m.mT,m.M4),style:{width:`${100*e}%`},alt:x,"data-testid":"inline-preview-device-image",onLoad:h})})})():(0,i.jsx)("img",{src:g,className:m.M4,alt:x,"data-testid":"inline-preview-device-image",onLoad:h})),(0,i.jsx)("div",{style:_,className:j,children:e})]})}},628188:(e,t,n)=>{n.d(t,{Ig:()=>a,J9:()=>c,Pp:()=>d,XL:()=>u,nH:()=>s,pu:()=>i,td:()=>l,ug:()=>r,zH:()=>o});var i=(e=>(e.NAME_SELF="Name Step",e.HOW_DO_YOU_PLAN_TO_USE_FIGMA="How do you plan to use Figma Step",e.WHAT_DO_YOU_DO="What Do You Do Step",e.WHAT_DO_YOU_DO_V2="What Do You Do Role Step",e.WHERE_OR_HOW_DO_YOU_WORK="Where Or How Do You Work Step",e.WHAT_TYPE_OR_LEVEL_OF_SCHOOL="What Type Or Level Of School Step",e.HOW_MANY_PEOPLE_WORK_IN_ORGANIZATION="How Many People Work At Your Organization Step",e.INVITE_COLLABORATORS="Invite Collaborators Step",e.HAVE_USED_WHITEBOARDS_BEFORE="Have You Used Digital Whiteboarding Tools Before Step",e.HAVE_USED_FIGMA_PRODUCTS_BEFORE="Have You Used Figma Products Before Step",e.CHOOSE_PLAN="Choose Plan Step",e.CHOOSE_PRODUCT="Choose Product Step",e.WHAT_DO_YOU_WANT_TO_MAKE_FIRST="What Do You Want To Make First Step",e.WHICH_SEAT_WOULD_YOU_LIKE="Which Seat Would You Like Step",e))(i||{});let s=["Name Step","How do you plan to use Figma Step","What Do You Do Role Step","Invite Collaborators Step","Have You Used Figma Products Before Step","Choose Plan Step","Choose Product Step"],a=["Name Step","How do you plan to use Figma Step","What Do You Do Role Step","Invite Collaborators Step","Have You Used Digital Whiteboarding Tools Before Step","Choose Plan Step"],r=["Name Step","How do you plan to use Figma Step","What Do You Do Role Step"],l=s.filter(e=>"Choose Product Step"!==e),o=s.filter(e=>"Choose Plan Step"!==e),d=["Name Step","What Do You Do Role Step","Have You Used Figma Products Before Step"],c=["Name Step","What Do You Do Role Step","Have You Used Figma Products Before Step"],u=["What Do You Do Step"]},61835:(e,t,n)=>{n.d(t,{G:()=>d});var i=n(104076),s=n(716976),a=n(192075),r=n(670410);let l="sticky_note--stickyNoteAnimateIn--AiFPv",o=e=>{switch(e){case"developer":return(0,a.t)("new_user_experience.what_do_you_do.sticky_note.developer");case"designer":return(0,a.t)("new_user_experience.what_do_you_do.cursor_chat.designer");case"product_manager":return(0,a.t)("new_user_experience.what_do_you_do.cursor_chat.product_manager");case"research":return(0,a.t)("new_user_experience.what_do_you_do.cursor_chat.user_researcher");case"marketer":return(0,a.t)("new_user_experience.what_do_you_do.cursor_chat.marketer");case"student":return(0,a.t)("new_user_experience.what_do_you_do.sticky_note.student");case"educator":return(0,a.t)("new_user_experience.what_do_you_do.sticky_note.educator");case"ux_writing":return(0,a.t)("new_user_experience.what_do_you_do.sticky_note.ux_writing");case"data_analytics":return(0,a.t)("new_user_experience.what_do_you_do.sticky_note.data_analytics");default:return(0,a.t)("new_user_experience.what_do_you_do.sticky_note.other")}};function d({jobTitle:e}){let t=(0,r.K2)(),[n,a]=(0,s.useState)(0),d=(0,s.useRef)(n),c=(0,s.useRef)(e),u=o(c.current),[p,m]=(0,s.useState)(u),[h,f]=(0,s.useState)(l),g=e=>{let t;do t=Math.floor(15*Math.random())+-7;while(!(Math.abs(e-t)>=3))return t};return((0,s.useEffect)(()=>{let t=g(d.current);a(t);let n=o(e);if(c.current&&c.current!==e){f("sticky_note--stickyNoteAnimateOut--g015-"),c.current=e;let i=setTimeout(()=>{m(n),f(l),d.current=t},300);return()=>clearTimeout(i)}c.current=e,d.current=t,m(n),f(l)},[e]),e)?(0,i.jsx)("div",{className:h,style:{"--prevEndRotationAngle":`${d.current}deg`,"--endRotationAngle":`${n}deg`},children:(0,i.jsxs)("div",{className:"sticky_note--stickyNote--3k6bP",children:[(0,i.jsx)("div",{className:"sticky_note--stickyNoteText--okxL-",children:p}),(0,i.jsx)("div",{className:"sticky_note--stickyNoteName--vgQzM",children:t})]})}):null}},493909:(e,t,n)=>{n.d(t,{B:()=>s});var i=n(104076);function s(){return(0,i.jsxs)("svg",{width:"800",height:"520",viewBox:"0 0 800 520",fill:"none",children:[(0,i.jsxs)("g",{filter:"url(#filter0_ddd_28_2608)",children:[(0,i.jsx)("rect",{x:"503",y:"226",width:"150",height:"150",rx:"2",fill:"white",stroke:"#E6E6E6",strokeWidth:"4"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M568.344 276.438H572.344V272.438V270.406C572.344 267.006 575.1 264.25 578.5 264.25C581.9 264.25 584.656 267.006 584.656 270.406V272.438V276.438H588.656H607V337.5H550V276.438H568.344ZM588.656 272.438H592.656H607H611V276.438V337.5V341.5H607H550H546V337.5V276.438V272.438H550H564.344H568.344V270.406C568.344 264.797 572.891 260.25 578.5 260.25C584.109 260.25 588.656 264.797 588.656 270.406V272.438ZM578.5 290.688C573.995 290.688 570.344 294.339 570.344 298.844C570.344 303.348 573.995 307 578.5 307C583.005 307 586.656 303.348 586.656 298.844C586.656 294.339 583.005 290.688 578.5 290.688ZM566.344 298.844C566.344 292.13 571.786 286.688 578.5 286.688C585.214 286.688 590.656 292.13 590.656 298.844C590.656 303.78 587.714 308.029 583.488 309.933C588.863 311.952 592.688 317.139 592.688 323.219V325.25H588.688V323.219C588.688 317.592 584.126 313.031 578.5 313.031C572.874 313.031 568.312 317.592 568.312 323.219V325.25H564.312V323.219C564.312 317.139 568.137 311.952 573.512 309.933C569.286 308.029 566.344 303.78 566.344 298.844Z",fill:"#E3E3E3"}),(0,i.jsxs)("g",{clipPath:"url(#clip0_28_2608)",children:[(0,i.jsx)("rect",{x:"558",y:"93",width:"150",height:"74",rx:"37",fill:"#F5F5F5"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M591.913 133.843C591.913 133.38 591.459 133.053 591.019 133.2L585.662 134.985C585.385 135.078 585.198 135.337 585.198 135.629V140.842V142.842V146.054C585.198 146.346 585.385 146.605 585.662 146.697L591.019 148.483C591.459 148.63 591.913 148.302 591.913 147.839V133.843ZM581.198 142.842V146.054C581.198 148.067 582.487 149.855 584.397 150.492L589.754 152.278C592.784 153.288 595.913 151.033 595.913 147.839V133.843C595.913 130.65 592.784 128.395 589.754 129.405L585.198 130.924V130.127C585.198 118.411 594.696 108.913 606.413 108.913C618.129 108.913 627.627 118.411 627.627 130.127V130.924L623.071 129.405C620.041 128.395 616.913 130.65 616.913 133.843V147.839C616.913 151.033 620.041 153.288 623.071 152.278L628.428 150.492C630.338 149.855 631.627 148.067 631.627 146.054V142.842V140.842V135.629V130.127C631.627 116.202 620.338 104.913 606.413 104.913C592.487 104.913 581.198 116.202 581.198 130.127V135.629V140.842V142.842ZM627.627 142.842V146.054C627.627 146.346 627.44 146.605 627.163 146.697L621.806 148.483C621.366 148.63 620.913 148.302 620.913 147.839V133.843C620.913 133.38 621.366 133.053 621.806 133.2L627.163 134.985C627.44 135.078 627.627 135.337 627.627 135.629V140.842V142.842Z",fill:"#CDCDCD"}),(0,i.jsx)("path",{d:"M665.04 147.451C662.827 147.451 660.851 147.07 659.111 146.307C657.381 145.544 656.011 144.486 655.002 143.133C654.003 141.769 653.466 140.189 653.39 138.396H658.45C658.514 139.373 658.842 140.222 659.433 140.941C660.034 141.65 660.819 142.198 661.785 142.585C662.752 142.972 663.826 143.165 665.008 143.165C666.308 143.165 667.457 142.939 668.456 142.488C669.466 142.037 670.256 141.409 670.825 140.603C671.394 139.787 671.679 138.847 671.679 137.783C671.679 136.677 671.394 135.705 670.825 134.867C670.266 134.018 669.445 133.352 668.36 132.869C667.285 132.385 665.986 132.144 664.46 132.144H661.673V128.083H664.46C665.685 128.083 666.759 127.863 667.683 127.422C668.617 126.982 669.348 126.37 669.874 125.585C670.401 124.791 670.664 123.861 670.664 122.798C670.664 121.777 670.433 120.891 669.971 120.139C669.52 119.376 668.875 118.78 668.037 118.351C667.21 117.921 666.233 117.706 665.105 117.706C664.031 117.706 663.026 117.905 662.092 118.302C661.168 118.689 660.416 119.248 659.836 119.978C659.256 120.698 658.944 121.562 658.901 122.572H654.083C654.137 120.789 654.663 119.221 655.662 117.867C656.672 116.514 658.004 115.456 659.658 114.693C661.313 113.93 663.15 113.549 665.169 113.549C667.285 113.549 669.112 113.962 670.648 114.79C672.195 115.606 673.387 116.696 674.225 118.061C675.073 119.425 675.492 120.918 675.482 122.54C675.492 124.388 674.977 125.956 673.935 127.245C672.904 128.534 671.529 129.399 669.81 129.839V130.097C672.001 130.43 673.698 131.3 674.902 132.708C676.115 134.115 676.717 135.86 676.706 137.944C676.717 139.76 676.212 141.387 675.192 142.827C674.182 144.266 672.802 145.399 671.051 146.227C669.3 147.043 667.296 147.451 665.04 147.451Z",fill:"#CDCDCD"})]}),(0,i.jsx)("rect",{x:"556",y:"91",width:"154",height:"78",rx:"39",stroke:"#E6E6E6",strokeWidth:"4"}),(0,i.jsx)("path",{d:"M240.072 95.7249L285.898 265.713L115.91 311.539L70.084 141.551L240.072 95.7249Z",fill:"#E6E6E6"}),(0,i.jsx)("g",{clipPath:"url(#clip1_28_2608)",children:(0,i.jsxs)("g",{clipPath:"url(#clip2_28_2608)",children:[(0,i.jsxs)("mask",{id:"path-11-outside-1_28_2608",maskUnits:"userSpaceOnUse",x:"102.394",y:"136.291",width:"61.684",height:"66.0603",fill:"black",children:[(0,i.jsx)("rect",{fill:"white",x:"102.394",y:"136.291",width:"61.684",height:"66.0603"}),(0,i.jsx)("path",{d:"M146.846 179.984L146.844 180.001L148.046 180.143C148.579 180.209 149.091 180.388 149.547 180.667C150.004 180.947 150.393 181.32 150.689 181.762L150.74 181.846C151.128 182.426 151.34 183.102 151.351 183.795C151.362 184.488 151.172 185.169 150.802 185.758C150.433 186.347 149.899 186.818 149.265 187.118C148.631 187.417 147.923 187.531 147.224 187.447L145.855 187.285L145.852 187.304C146.385 187.37 146.898 187.549 147.354 187.829C147.811 188.109 148.2 188.483 148.495 188.926L148.547 189.004C148.934 189.584 149.145 190.26 149.156 190.953C149.167 191.645 148.976 192.326 148.607 192.914C148.237 193.502 147.704 193.973 147.071 194.272C146.437 194.572 145.729 194.686 145.031 194.602L115.38 191.086C114.555 190.988 113.756 190.731 113.03 190.33C112.304 189.929 111.664 189.392 111.149 188.748C110.633 188.104 110.25 187.368 110.023 186.58C109.796 185.792 109.729 184.968 109.825 184.156L111.859 167.007L114.344 167.301C116.312 167.535 117.411 167.288 118.944 164.684C123.729 155.978 130.52 153.325 131.095 148.473L131.278 146.934C131.345 146.406 131.621 145.927 132.047 145.601C132.472 145.274 133.011 145.126 133.548 145.19L134.159 145.263C135.136 145.378 136.047 145.813 136.744 146.5C137.441 147.186 137.884 148.083 138.001 149.045C138.126 150.111 138.126 151.186 138 152.251C137.784 154.066 137.21 155.82 136.312 157.416L134.097 161.357C133.962 161.594 133.889 161.86 133.884 162.132C133.878 162.404 133.942 162.674 134.068 162.916C134.194 163.159 134.378 163.367 134.606 163.523C134.833 163.678 135.095 163.777 135.37 163.809L149.824 165.523C150.357 165.589 150.869 165.767 151.325 166.047C151.781 166.326 152.171 166.7 152.467 167.142L152.518 167.228C152.904 167.808 153.115 168.484 153.125 169.176C153.135 169.868 152.944 170.548 152.575 171.135C152.206 171.723 151.673 172.194 151.04 172.493C150.407 172.792 149.7 172.907 149.002 172.824L147.849 172.687L150.299 172.978C150.832 173.043 151.344 173.222 151.801 173.502C152.257 173.782 152.646 174.156 152.941 174.599L152.996 174.681C153.383 175.26 153.594 175.936 153.605 176.628C153.616 177.321 153.425 178.001 153.056 178.589C152.687 179.177 152.155 179.648 151.522 179.948C150.889 180.247 150.181 180.362 149.482 180.279L146.846 179.984Z"})]}),(0,i.jsx)("path",{d:"M146.846 179.984L146.844 180.001L148.046 180.143C148.579 180.209 149.091 180.388 149.547 180.667C150.004 180.947 150.393 181.32 150.689 181.762L150.74 181.846C151.128 182.426 151.34 183.102 151.351 183.795C151.362 184.488 151.172 185.169 150.802 185.758C150.433 186.347 149.899 186.818 149.265 187.118C148.631 187.417 147.923 187.531 147.224 187.447L145.855 187.285L145.852 187.304C146.385 187.37 146.898 187.549 147.354 187.829C147.811 188.109 148.2 188.483 148.495 188.926L148.547 189.004C148.934 189.584 149.145 190.26 149.156 190.953C149.167 191.645 148.976 192.326 148.607 192.914C148.237 193.502 147.704 193.973 147.071 194.272C146.437 194.572 145.729 194.686 145.031 194.602L115.38 191.086C114.555 190.988 113.756 190.731 113.03 190.33C112.304 189.929 111.664 189.392 111.149 188.748C110.633 188.104 110.25 187.368 110.023 186.58C109.796 185.792 109.729 184.968 109.825 184.156L111.859 167.007L114.344 167.301C116.312 167.535 117.411 167.288 118.944 164.684C123.729 155.978 130.52 153.325 131.095 148.473L131.278 146.934C131.345 146.406 131.621 145.927 132.047 145.601C132.472 145.274 133.011 145.126 133.548 145.19L134.159 145.263C135.136 145.378 136.047 145.813 136.744 146.5C137.441 147.186 137.884 148.083 138.001 149.045C138.126 150.111 138.126 151.186 138 152.251C137.784 154.066 137.21 155.82 136.312 157.416L134.097 161.357C133.962 161.594 133.889 161.86 133.884 162.132C133.878 162.404 133.942 162.674 134.068 162.916C134.194 163.159 134.378 163.367 134.606 163.523C134.833 163.678 135.095 163.777 135.37 163.809L149.824 165.523C150.357 165.589 150.869 165.767 151.325 166.047C151.781 166.326 152.171 166.7 152.467 167.142L152.518 167.228C152.904 167.808 153.115 168.484 153.125 169.176C153.135 169.868 152.944 170.548 152.575 171.135C152.206 171.723 151.673 172.194 151.04 172.493C150.407 172.792 149.7 172.907 149.002 172.824L147.849 172.687L150.299 172.978C150.832 173.043 151.344 173.222 151.801 173.502C152.257 173.782 152.646 174.156 152.941 174.599L152.996 174.681C153.383 175.26 153.594 175.936 153.605 176.628C153.616 177.321 153.425 178.001 153.056 178.589C152.687 179.177 152.155 179.648 151.522 179.948C150.889 180.247 150.181 180.362 149.482 180.279L146.846 179.984Z",fill:"#E6E6E6"}),(0,i.jsx)("path",{d:"M146.846 179.984L146.844 180.001L148.046 180.143C148.579 180.209 149.091 180.388 149.547 180.667C150.004 180.947 150.393 181.32 150.689 181.762L150.74 181.846C151.128 182.426 151.34 183.102 151.351 183.795C151.362 184.488 151.172 185.169 150.802 185.758C150.433 186.347 149.899 186.818 149.265 187.118C148.631 187.417 147.923 187.531 147.224 187.447L145.855 187.285L145.852 187.304C146.385 187.37 146.898 187.549 147.354 187.829C147.811 188.109 148.2 188.483 148.495 188.926L148.547 189.004C148.934 189.584 149.145 190.26 149.156 190.953C149.167 191.645 148.976 192.326 148.607 192.914C148.237 193.502 147.704 193.973 147.071 194.272C146.437 194.572 145.729 194.686 145.031 194.602L115.38 191.086C114.555 190.988 113.756 190.731 113.03 190.33C112.304 189.929 111.664 189.392 111.149 188.748C110.633 188.104 110.25 187.368 110.023 186.58C109.796 185.792 109.729 184.968 109.825 184.156L111.859 167.007L114.344 167.301C116.312 167.535 117.411 167.288 118.944 164.684C123.729 155.978 130.52 153.325 131.095 148.473L131.278 146.934C131.345 146.406 131.621 145.927 132.047 145.601C132.472 145.274 133.011 145.126 133.548 145.19L134.159 145.263C135.136 145.378 136.047 145.813 136.744 146.5C137.441 147.186 137.884 148.083 138.001 149.045C138.126 150.111 138.126 151.186 138 152.251C137.784 154.066 137.21 155.82 136.312 157.416L134.097 161.357C133.962 161.594 133.889 161.86 133.884 162.132C133.878 162.404 133.942 162.674 134.068 162.916C134.194 163.159 134.378 163.367 134.606 163.523C134.833 163.678 135.095 163.777 135.37 163.809L149.824 165.523C150.357 165.589 150.869 165.767 151.325 166.047C151.781 166.326 152.171 166.7 152.467 167.142L152.518 167.228C152.904 167.808 153.115 168.484 153.125 169.176C153.135 169.868 152.944 170.548 152.575 171.135C152.206 171.723 151.673 172.194 151.04 172.493C150.407 172.792 149.7 172.907 149.002 172.824L147.849 172.687L150.299 172.978C150.832 173.043 151.344 173.222 151.801 173.502C152.257 173.782 152.646 174.156 152.941 174.599L152.996 174.681C153.383 175.26 153.594 175.936 153.605 176.628C153.616 177.321 153.425 178.001 153.056 178.589C152.687 179.177 152.155 179.648 151.522 179.948C150.889 180.247 150.181 180.362 149.482 180.279L146.846 179.984Z",stroke:"white",strokeWidth:"11.1183",mask:"url(#path-11-outside-1_28_2608)"}),(0,i.jsx)("path",{d:"M161.104 178.267L159.645 170.883C158.966 167.445 154.282 166.889 152.818 170.073L149.672 176.911L142.912 178.87C139.845 179.759 139.354 183.898 142.128 185.48L148.242 188.965L149.701 196.35C150.38 199.787 155.064 200.343 156.529 197.159L159.675 190.321L166.434 188.362C169.501 187.474 169.992 183.334 167.218 181.753L161.104 178.267Z",fill:"url(#paint0_linear_28_2608)"}),(0,i.jsx)("path",{d:"M161.104 178.267L159.645 170.883C158.966 167.445 154.282 166.889 152.818 170.073L149.672 176.911L142.912 178.87C139.845 179.759 139.354 183.898 142.128 185.48L148.242 188.965L149.701 196.35C150.38 199.787 155.064 200.343 156.529 197.159L159.675 190.321L166.434 188.362C169.501 187.474 169.992 183.334 167.218 181.753L161.104 178.267Z",fill:"url(#paint1_linear_28_2608)"}),(0,i.jsx)("path",{d:"M161.104 178.267L159.645 170.883C158.966 167.445 154.282 166.889 152.818 170.073L149.672 176.911L142.912 178.87C139.845 179.759 139.354 183.898 142.128 185.48L148.242 188.965L149.701 196.35C150.38 199.787 155.064 200.343 156.529 197.159L159.675 190.321L166.434 188.362C169.501 187.474 169.992 183.334 167.218 181.753L161.104 178.267Z",stroke:"white",strokeWidth:"5.55914"})]})}),(0,i.jsx)("path",{d:"M401.053 215.44L338.613 380.052L174.001 317.612L236.44 153L401.053 215.44Z",fill:"#EEEEEE"}),(0,i.jsx)("g",{clipPath:"url(#clip3_28_2608)",children:(0,i.jsxs)("g",{clipPath:"url(#clip4_28_2608)",children:[(0,i.jsxs)("mask",{id:"path-14-outside-2_28_2608",maskUnits:"userSpaceOnUse",x:"278.143",y:"256.229",width:"77.7141",height:"67.6104",fill:"black",children:[(0,i.jsx)("rect",{fill:"white",x:"278.143",y:"256.229",width:"77.7141",height:"67.6104"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M306.46 309.456L318.238 311.887L326.859 270.116L316.353 267.948C312.283 274.145 306.177 275.672 300.339 274.885L297.828 287.049C303.384 287.847 308.774 285.058 312.405 280.651L306.46 309.456ZM299.57 290.973L294.125 289.85L293.002 295.294L287.557 294.17L286.433 299.614L291.878 300.738L290.754 306.183L296.198 307.307L297.322 301.862L302.766 302.986L303.89 297.541L298.446 296.417L299.57 290.973ZM336.197 291.632C336.113 290.823 335.038 290.601 334.64 291.311L331.256 297.351C331.138 297.561 330.934 297.711 330.698 297.76L324.306 299.082C323.59 299.23 323.398 300.162 323.996 300.581L329.342 304.326C329.54 304.465 329.668 304.683 329.693 304.923L330.409 311.809C330.493 312.619 331.568 312.841 331.966 312.131L335.35 306.091C335.468 305.88 335.672 305.731 335.908 305.682L342.3 304.359C343.016 304.211 343.208 303.279 342.61 302.86L337.264 299.115C337.066 298.976 336.938 298.759 336.913 298.518L336.197 291.632Z"})]}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M306.46 309.456L318.238 311.887L326.859 270.116L316.353 267.948C312.283 274.145 306.177 275.672 300.339 274.885L297.828 287.049C303.384 287.847 308.774 285.058 312.405 280.651L306.46 309.456ZM299.57 290.973L294.125 289.85L293.002 295.294L287.557 294.17L286.433 299.614L291.878 300.738L290.754 306.183L296.198 307.307L297.322 301.862L302.766 302.986L303.89 297.541L298.446 296.417L299.57 290.973ZM336.197 291.632C336.113 290.823 335.038 290.601 334.64 291.311L331.256 297.351C331.138 297.561 330.934 297.711 330.698 297.76L324.306 299.082C323.59 299.23 323.398 300.162 323.996 300.581L329.342 304.326C329.54 304.465 329.668 304.683 329.693 304.923L330.409 311.809C330.493 312.619 331.568 312.841 331.966 312.131L335.35 306.091C335.468 305.88 335.672 305.731 335.908 305.682L342.3 304.359C343.016 304.211 343.208 303.279 342.61 302.86L337.264 299.115C337.066 298.976 336.938 298.759 336.913 298.518L336.197 291.632Z",fill:"#E6E6E6"}),(0,i.jsx)("path",{d:"M318.238 311.887L317.114 317.331L322.558 318.455L323.682 313.011L318.238 311.887ZM306.46 309.456L301.015 308.332L299.892 313.777L305.336 314.9L306.46 309.456ZM326.859 270.116L332.304 271.24L333.428 265.796L327.983 264.672L326.859 270.116ZM316.353 267.948L317.477 262.503L313.779 261.74L311.706 264.896L316.353 267.948ZM300.339 274.885L301.081 269.376L295.942 268.683L294.894 273.761L300.339 274.885ZM297.828 287.049L292.384 285.925L291.189 291.711L297.037 292.551L297.828 287.049ZM312.405 280.651L317.85 281.775L308.115 277.116L312.405 280.651ZM294.125 289.85L295.249 284.405L289.805 283.282L288.681 288.726L294.125 289.85ZM299.57 290.973L305.014 292.097L306.138 286.653L300.693 285.529L299.57 290.973ZM293.002 295.294L291.878 300.738L297.322 301.862L298.446 296.417L293.002 295.294ZM287.557 294.17L288.68 288.726L283.236 287.602L282.112 293.046L287.557 294.17ZM286.433 299.614L280.989 298.491L279.865 303.935L285.309 305.059L286.433 299.614ZM291.878 300.738L297.322 301.862L298.446 296.417L293.002 295.294L291.878 300.738ZM290.754 306.183L285.31 305.059L284.186 310.503L289.63 311.627L290.754 306.183ZM296.198 307.307L295.075 312.751L300.519 313.875L301.643 308.43L296.198 307.307ZM297.322 301.862L298.446 296.417L293.002 295.294L291.878 300.738L297.322 301.862ZM302.766 302.986L301.642 308.43L307.087 309.554L308.21 304.109L302.766 302.986ZM303.89 297.541L309.334 298.665L310.458 293.22L305.014 292.097L303.89 297.541ZM298.446 296.417L293.002 295.294L291.878 300.738L297.322 301.862L298.446 296.417ZM334.64 291.311L339.49 294.028L339.49 294.028L334.64 291.311ZM336.197 291.632L330.668 292.207L330.668 292.207L336.197 291.632ZM331.256 297.351L326.406 294.633L326.406 294.633L331.256 297.351ZM330.698 297.76L329.572 292.316L329.572 292.316L330.698 297.76ZM324.306 299.082L323.18 293.638L323.18 293.638L324.306 299.082ZM323.996 300.581L320.807 305.135L320.807 305.135L323.996 300.581ZM329.342 304.326L326.153 308.88L326.153 308.88L329.342 304.326ZM329.693 304.923L324.164 305.498L324.164 305.498L329.693 304.923ZM330.409 311.809L324.88 312.384L324.88 312.384L330.409 311.809ZM331.966 312.131L336.816 314.848L336.816 314.848L331.966 312.131ZM335.35 306.091L340.2 308.808L340.2 308.808L335.35 306.091ZM335.908 305.682L337.035 311.126L337.035 311.126L335.908 305.682ZM342.3 304.359L341.174 298.916L341.174 298.916L342.3 304.359ZM342.61 302.86L339.42 307.413L339.42 307.413L342.61 302.86ZM337.264 299.115L340.453 294.562L340.453 294.562L337.264 299.115ZM336.913 298.518L342.442 297.943L342.442 297.943L336.913 298.518ZM319.362 306.443L307.583 304.012L305.336 314.9L317.114 317.331L319.362 306.443ZM321.415 268.992L312.793 310.763L323.682 313.011L332.304 271.24L321.415 268.992ZM315.229 273.392L325.736 275.561L327.983 264.672L317.477 262.503L315.229 273.392ZM299.596 280.394C306.985 281.391 315.47 279.418 321 270.999L311.706 264.896C309.095 268.872 305.368 269.954 301.081 269.376L299.596 280.394ZM303.272 288.173L305.783 276.009L294.894 273.761L292.384 285.925L303.272 288.173ZM308.115 277.116C305.366 280.452 301.763 281.998 298.619 281.546L297.037 292.551C305.006 293.697 312.183 289.663 316.696 284.186L308.115 277.116ZM311.904 310.58L317.85 281.775L306.961 279.527L301.015 308.332L311.904 310.58ZM293.001 295.294L298.446 296.418L300.693 285.529L295.249 284.405L293.001 295.294ZM298.446 296.417L299.57 290.973L288.681 288.726L287.557 294.17L298.446 296.417ZM286.433 299.614L291.878 300.738L294.125 289.849L288.68 288.726L286.433 299.614ZM291.877 300.738L293.001 295.294L282.112 293.046L280.989 298.491L291.877 300.738ZM293.002 295.294L287.557 294.17L285.309 305.059L290.754 306.182L293.002 295.294ZM296.198 307.307L297.322 301.862L286.433 299.614L285.31 305.059L296.198 307.307ZM297.322 301.862L291.878 300.738L289.63 311.627L295.075 312.751L297.322 301.862ZM291.878 300.738L290.754 306.183L301.643 308.43L302.767 302.986L291.878 300.738ZM303.89 297.541L298.446 296.417L296.198 307.306L301.642 308.43L303.89 297.541ZM298.445 296.417L297.322 301.862L308.21 304.109L309.334 298.665L298.445 296.417ZM297.322 301.862L302.766 302.986L305.014 292.097L299.57 290.973L297.322 301.862ZM294.125 289.85L293.002 295.294L303.89 297.541L305.014 292.097L294.125 289.85ZM339.49 294.028C337.236 298.051 331.144 296.794 330.668 292.207L341.726 291.057C341.081 284.852 332.84 283.151 329.79 288.594L339.49 294.028ZM336.106 300.068L339.49 294.028L329.79 288.594L326.406 294.633L336.106 300.068ZM331.824 303.203C333.638 302.828 335.201 301.684 336.106 300.068L326.406 294.633C327.076 293.439 328.23 292.593 329.572 292.316L331.824 303.203ZM325.432 304.526L331.824 303.203L329.572 292.316L323.18 293.638L325.432 304.526ZM327.186 296.028C330.579 298.405 329.489 303.687 325.432 304.526L323.18 293.638C317.691 294.773 316.216 301.919 320.807 305.135L327.186 296.028ZM332.532 299.773L327.186 296.028L320.807 305.135L326.153 308.88L332.532 299.773ZM335.223 304.348C335.031 302.506 334.049 300.836 332.532 299.773L326.153 308.88C325.031 308.094 324.305 306.86 324.164 305.498L335.223 304.348ZM335.938 311.234L335.223 304.348L324.164 305.498L324.88 312.384L335.938 311.234ZM327.116 309.413C329.37 305.39 335.462 306.648 335.938 311.234L324.88 312.384C325.525 318.589 333.766 320.291 336.816 314.848L327.116 309.413ZM330.5 303.374L327.116 309.413L336.816 314.848L340.2 308.808L330.5 303.374ZM334.782 300.238C332.968 300.613 331.406 301.757 330.5 303.374L340.2 308.808C339.53 310.003 338.376 310.848 337.035 311.126L334.782 300.238ZM341.174 298.916L334.782 300.238L337.035 311.126L343.426 309.803L341.174 298.916ZM339.42 307.413C336.027 305.036 337.117 299.755 341.174 298.916L343.426 309.803C348.915 308.668 350.39 301.522 345.799 298.307L339.42 307.413ZM334.074 303.668L339.42 307.413L345.799 298.307L340.453 294.562L334.074 303.668ZM331.383 299.093C331.575 300.936 332.557 302.605 334.074 303.668L340.453 294.562C341.575 295.348 342.301 296.581 342.442 297.943L331.383 299.093ZM330.668 292.207L331.383 299.093L342.442 297.943L341.726 291.057L330.668 292.207Z",fill:"white",mask:"url(#path-14-outside-2_28_2608)"}),(0,i.jsx)("path",{d:"M334.637 291.31C335.035 290.6 336.11 290.822 336.194 291.631L336.91 298.517C336.935 298.758 337.063 298.975 337.261 299.114L342.607 302.859C343.206 303.278 343.013 304.21 342.297 304.358L335.905 305.681C335.669 305.73 335.465 305.879 335.347 306.09L331.963 312.13C331.565 312.84 330.49 312.618 330.406 311.808L329.69 304.922C329.665 304.682 329.537 304.464 329.339 304.325L323.993 300.58C323.395 300.161 323.587 299.229 324.303 299.081L330.695 297.759C330.931 297.71 331.135 297.56 331.253 297.35L334.637 291.31Z",fill:"url(#paint2_linear_28_2608)"}),(0,i.jsx)("path",{d:"M334.637 291.31C335.035 290.6 336.11 290.822 336.194 291.631L336.91 298.517C336.935 298.758 337.063 298.975 337.261 299.114L342.607 302.859C343.206 303.278 343.013 304.21 342.297 304.358L335.905 305.681C335.669 305.73 335.465 305.879 335.347 306.09L331.963 312.13C331.565 312.84 330.49 312.618 330.406 311.808L329.69 304.922C329.665 304.682 329.537 304.464 329.339 304.325L323.993 300.58C323.395 300.161 323.587 299.229 324.303 299.081L330.695 297.759C330.931 297.71 331.135 297.56 331.253 297.35L334.637 291.31Z",fill:"url(#paint3_linear_28_2608)"})]})}),(0,i.jsxs)("g",{clipPath:"url(#clip5_28_2608)",children:[(0,i.jsx)("path",{d:"M184.432 264.236C178.839 259.445 178.187 250.993 182.978 245.4C185.298 242.693 188.535 241.049 192.097 240.774C195.655 240.499 199.107 241.624 201.817 243.946L205.185 246.832L208.071 243.464C210.393 240.753 213.63 239.108 217.192 238.834C220.754 238.559 224.206 239.687 226.916 242.009C229.623 244.328 231.268 247.566 231.543 251.128C231.817 254.686 230.692 258.138 228.37 260.848L225.773 263.887L208.103 284.512L184.432 264.236Z",fill:"#F24E1E"}),(0,i.jsxs)("mask",{id:"path-18-outside-3_28_2608",maskUnits:"userSpaceOnUse",x:"172.339",y:"231.353",width:"68.3502",height:"63.7497",fill:"black",children:[(0,i.jsx)("rect",{fill:"white",x:"172.339",y:"231.353",width:"68.3502",height:"63.7497"}),(0,i.jsx)("path",{d:"M184.417 264.048C178.828 259.3 178.181 250.918 182.976 245.368C185.297 242.682 188.535 241.048 192.097 240.774C195.655 240.499 199.106 241.613 201.815 243.914L205.181 246.774L208.068 243.431C210.392 240.742 213.63 239.108 217.192 238.834C220.754 238.559 224.205 239.676 226.914 241.977C229.619 244.275 231.262 247.485 231.534 251.018C231.807 254.547 230.679 257.97 228.356 260.66L225.757 263.676L208.075 284.143L184.417 264.048Z"})]}),(0,i.jsx)("path",{d:"M184.417 264.048C178.828 259.3 178.181 250.918 182.976 245.368C185.297 242.682 188.535 241.048 192.097 240.774C195.655 240.499 199.106 241.613 201.815 243.914L205.181 246.774L208.068 243.431C210.392 240.742 213.63 239.108 217.192 238.834C220.754 238.559 224.205 239.676 226.914 241.977C229.619 244.275 231.262 247.485 231.534 251.018C231.807 254.547 230.679 257.97 228.356 260.66L225.757 263.676L208.075 284.143L184.417 264.048Z",fill:"#E6E6E6"}),(0,i.jsx)("path",{d:"M184.417 264.048C178.828 259.3 178.181 250.918 182.976 245.368C185.297 242.682 188.535 241.048 192.097 240.774C195.655 240.499 199.106 241.613 201.815 243.914L205.181 246.774L208.068 243.431C210.392 240.742 213.63 239.108 217.192 238.834C220.754 238.559 224.205 239.676 226.914 241.977C229.619 244.275 231.262 247.485 231.534 251.018C231.807 254.547 230.679 257.97 228.356 260.66L225.757 263.676L208.075 284.143L184.417 264.048Z",stroke:"white",strokeWidth:"11.1183",mask:"url(#path-18-outside-3_28_2608)"}),(0,i.jsx)("path",{d:"M232.029 266.914L229.166 259.953C227.833 256.712 223.13 257.075 222.311 260.482L220.55 267.8L214.299 271.032C211.462 272.498 211.782 276.654 214.811 277.668L221.484 279.902L224.347 286.864C225.679 290.105 230.382 289.742 231.202 286.335L232.963 279.016L239.214 275.785C242.051 274.318 241.73 270.162 238.702 269.148L232.029 266.914Z",fill:"url(#paint4_linear_28_2608)"}),(0,i.jsx)("path",{d:"M232.029 266.914L229.166 259.953C227.833 256.712 223.13 257.075 222.311 260.482L220.55 267.8L214.299 271.032C211.462 272.498 211.782 276.654 214.811 277.668L221.484 279.902L224.347 286.864C225.679 290.105 230.382 289.742 231.202 286.335L232.963 279.016L239.214 275.785C242.051 274.318 241.73 270.162 238.702 269.148L232.029 266.914Z",fill:"url(#paint5_linear_28_2608)"}),(0,i.jsx)("path",{d:"M232.029 266.914L229.166 259.953C227.833 256.712 223.13 257.075 222.311 260.482L220.55 267.8L214.299 271.032C211.462 272.498 211.782 276.654 214.811 277.668L221.484 279.902L224.347 286.864C225.679 290.105 230.382 289.742 231.202 286.335L232.963 279.016L239.214 275.785C242.051 274.318 241.73 270.162 238.702 269.148L232.029 266.914Z",stroke:"white",strokeWidth:"5.55914"})]})]}),(0,i.jsxs)("defs",{children:[(0,i.jsxs)("filter",{id:"filter0_ddd_28_2608",x:"-12",y:"-7",width:"824",height:"544",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,i.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,i.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,i.jsx)("feOffset",{dy:"1"}),(0,i.jsx)("feGaussianBlur",{stdDeviation:"1.5"}),(0,i.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.1 0"}),(0,i.jsx)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_28_2608"}),(0,i.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,i.jsx)("feOffset",{dy:"5"}),(0,i.jsx)("feGaussianBlur",{stdDeviation:"6"}),(0,i.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,i.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.13 0"}),(0,i.jsx)("feBlend",{mode:"normal",in2:"effect1_dropShadow_28_2608",result:"effect2_dropShadow_28_2608"}),(0,i.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,i.jsx)("feOffset",{}),(0,i.jsx)("feGaussianBlur",{stdDeviation:"0.25"}),(0,i.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,i.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.15 0"}),(0,i.jsx)("feBlend",{mode:"normal",in2:"effect2_dropShadow_28_2608",result:"effect3_dropShadow_28_2608"}),(0,i.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect3_dropShadow_28_2608",result:"shape"})]}),(0,i.jsxs)("linearGradient",{id:"paint0_linear_28_2608",x1:"143.538",y1:"167.367",x2:"165.808",y2:"199.865",gradientUnits:"userSpaceOnUse",children:[(0,i.jsx)("stop",{stopColor:"#E6E6E6"}),(0,i.jsx)("stop",{offset:"1",stopColor:"#E6E6E6"})]}),(0,i.jsxs)("linearGradient",{id:"paint1_linear_28_2608",x1:"165.808",y1:"199.865",x2:"143.538",y2:"167.367",gradientUnits:"userSpaceOnUse",children:[(0,i.jsx)("stop",{stopColor:"white",stopOpacity:"0"}),(0,i.jsx)("stop",{offset:"0.418743",stopColor:"white",stopOpacity:"0.15"}),(0,i.jsx)("stop",{offset:"0.504534",stopColor:"white",stopOpacity:"0.63"}),(0,i.jsx)("stop",{offset:"0.588015",stopColor:"white",stopOpacity:"0.15"}),(0,i.jsx)("stop",{offset:"1",stopColor:"white",stopOpacity:"0"})]}),(0,i.jsxs)("linearGradient",{id:"paint2_linear_28_2608",x1:"325.033",y1:"286.769",x2:"342.171",y2:"316.32",gradientUnits:"userSpaceOnUse",children:[(0,i.jsx)("stop",{stopColor:"#E6E6E6"}),(0,i.jsx)("stop",{offset:"1",stopColor:"#E6E6E6"})]}),(0,i.jsxs)("linearGradient",{id:"paint3_linear_28_2608",x1:"341.567",y1:"316.671",x2:"324.429",y2:"287.119",gradientUnits:"userSpaceOnUse",children:[(0,i.jsx)("stop",{stopColor:"white",stopOpacity:"0"}),(0,i.jsx)("stop",{offset:"0.418743",stopColor:"white",stopOpacity:"0.15"}),(0,i.jsx)("stop",{offset:"0.504534",stopColor:"white",stopOpacity:"0.63"}),(0,i.jsx)("stop",{offset:"0.588015",stopColor:"white",stopOpacity:"0.15"}),(0,i.jsx)("stop",{offset:"1",stopColor:"white",stopOpacity:"0"})]}),(0,i.jsxs)("linearGradient",{id:"paint4_linear_28_2608",x1:"212.683",y1:"259.626",x2:"240.83",y2:"287.191",gradientUnits:"userSpaceOnUse",children:[(0,i.jsx)("stop",{stopColor:"#E6E6E6"}),(0,i.jsx)("stop",{offset:"1",stopColor:"#E6E6E6"})]}),(0,i.jsxs)("linearGradient",{id:"paint5_linear_28_2608",x1:"240.83",y1:"287.191",x2:"212.683",y2:"259.626",gradientUnits:"userSpaceOnUse",children:[(0,i.jsx)("stop",{stopColor:"white",stopOpacity:"0"}),(0,i.jsx)("stop",{offset:"0.418743",stopColor:"white",stopOpacity:"0.15"}),(0,i.jsx)("stop",{offset:"0.504534",stopColor:"white",stopOpacity:"0.63"}),(0,i.jsx)("stop",{offset:"0.588015",stopColor:"white",stopOpacity:"0.15"}),(0,i.jsx)("stop",{offset:"1",stopColor:"white",stopOpacity:"0"})]}),(0,i.jsx)("clipPath",{id:"clip0_28_2608",children:(0,i.jsx)("rect",{x:"558",y:"93",width:"150",height:"74",rx:"37",fill:"white"})}),(0,i.jsx)("clipPath",{id:"clip1_28_2608",children:(0,i.jsx)("rect",{width:"74.1218",height:"74.1218",fill:"white",transform:"translate(106.064 129.334) rotate(6.76404)"})}),(0,i.jsx)("clipPath",{id:"clip2_28_2608",children:(0,i.jsx)("rect",{width:"74.1218",height:"74.1218",fill:"white",transform:"matrix(-0.99304 -0.117781 -0.117781 0.99304 179.668 138.064)"})}),(0,i.jsx)("clipPath",{id:"clip3_28_2608",children:(0,i.jsx)("rect",{width:"74.1218",height:"74.1218",fill:"white",transform:"translate(286.034 246.553) rotate(11.6624)"})}),(0,i.jsx)("clipPath",{id:"clip4_28_2608",children:(0,i.jsx)("rect",{width:"74.1218",height:"74.1218",fill:"white",transform:"translate(286.033 246.553) rotate(11.6624)"})}),(0,i.jsx)("clipPath",{id:"clip5_28_2608",children:(0,i.jsx)("rect",{width:"74.1218",height:"74.1218",fill:"white",transform:"translate(168.407 227.73) rotate(-4.41313)"})})]})]})}},899948:(e,t,n)=>{n.d(t,{H:()=>s});var i=n(104076);function s(){return(0,i.jsxs)("svg",{viewBox:"0 0 686 324",fill:"none",children:[(0,i.jsx)("rect",{x:"434",y:"172",width:"150",height:"150",rx:"2",fill:"var(--color-bg, white)",stroke:"var(--color-border, #E6E6E6)",strokeWidth:"4"}),(0,i.jsx)("g",{opacity:"0.12",clipPath:"url(#clip0_3329_23775)",children:(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M515 237V243H503V237C503 233.686 505.686 231 509 231C512.314 231 515 233.686 515 237ZM499 243V237C499 231.477 503.477 227 509 227C514.523 227 519 231.477 519 237V243H521C522.105 243 523 243.895 523 245V265C523 266.105 522.105 267 521 267H497C495.895 267 495 266.105 495 265V245C495 243.895 495.895 243 497 243H499Z",fill:"var(--color-icon, rgba(0,0,0,0.9))"})}),(0,i.jsx)("rect",{x:"530",y:"37",width:"154",height:"78",rx:"39",fill:"var(--color-bg-secondary, #F5F5F5)"}),(0,i.jsx)("circle",{cx:"645.25",cy:"75.75",r:"28.5",fill:"var(--color-border, #E6E6E6)"}),(0,i.jsx)("path",{opacity:"0.12",fillRule:"evenodd",clipRule:"evenodd",d:"M632.8 86L626.704 76.5872L626 75.5001L626.704 74.4129L632.8 65H637.565L630.766 75.5001L637.566 86H632.8ZM639.992 86L646.792 65H650.996L644.196 86H639.992ZM653.422 86L660.222 75.5001L653.422 65H658.188L664.284 74.4129L664.988 75.5001L664.284 76.5872L658.188 86H653.422Z",fill:"var(--color-icon, rgba(0,0,0,0.9))"}),(0,i.jsx)("rect",{x:"530",y:"37",width:"154",height:"78",rx:"39",stroke:"var(--color-border, #E6E6E6)",strokeWidth:"4"}),(0,i.jsx)("rect",{x:"55",y:"49",width:"103",height:"36",rx:"18",fill:"var(--color-border, #E6E6E6)"}),(0,i.jsx)("rect",{x:"55",y:"107",width:"94",height:"36",rx:"18",fill:"var(--color-border, #E6E6E6)"}),(0,i.jsx)("rect",{x:"55",y:"165",width:"72",height:"36",rx:"18",fill:"var(--color-border, #E6E6E6)"}),(0,i.jsx)("rect",{x:"195",y:"49",width:"103",height:"36",rx:"18",fill:"var(--color-border, #E6E6E6)"}),(0,i.jsx)("rect",{x:"195",y:"107",width:"94",height:"36",rx:"18",fill:"var(--color-border, #E6E6E6)"}),(0,i.jsx)("rect",{x:"195",y:"165",width:"72",height:"36",rx:"18",fill:"var(--color-border, #E6E6E6)"}),(0,i.jsx)("rect",{x:"2",y:"2",width:"348",height:"246",rx:"10",stroke:"var(--color-border, #E6E6E6)",strokeWidth:"4",strokeDasharray:"12 12"}),(0,i.jsx)("defs",{children:(0,i.jsx)("clipPath",{id:"clip0_3329_23775",children:(0,i.jsx)("rect",{width:"64",height:"64",fill:"var(--color-bg, white)",transform:"translate(477 215)"})})})]})}},292658:(e,t,n)=>{n.d(t,{u:()=>u});var i=n(716976),s=n(387092),a=n(266808),r=n(170627),l=n(264993),o=n(384513),d=n(883765),c=n(354114);function u({inheritStyleKeyField:e,initialStyleCreationPaint:t,isCreatingFromSelection:n,trackingOptions:u,shouldUseEyedropperStyleCreationFlow:p}){let[m,h]=i.useState(null),f=i.useRef(!1),g=r.nc.user("create-style",()=>{if(f.current=!0,a.Pt4&&m){let{key:e,version:t}=m,n=a.Pt4.getSoftDeletedStyleNodeId(e,t);return c.Y5.restoreSoftDeletedNode(n),(0,d.sx)("Style Created",{styleType:u.styleType,styleKey:m.key,styleVersion:m.version}),n}});return i.useEffect(()=>{let i=r.l7.system("create-soft-deleted-style",()=>(function({initialStyleCreationPaint:e,isCreatingFromSelection:t,inheritStyleKeyField:n,shouldUseEyedropperStyleCreationFlow:i}){if(i)return a.OmW?.createSoftDeletedStyleForEyedropper()??null;if(!e)return a.glU?.createSoftDeletedStyle(n,"","",t)??null;{let t=(0,o.GP)(e);return a.Osy?.createSoftDeletedStyleFromPaintData(t,"")??null}})({initialStyleCreationPaint:t,inheritStyleKeyField:e,isCreatingFromSelection:n,shouldUseEyedropperStyleCreationFlow:p}));if(!i){h(null);return}return h(i),()=>{a.glU?.selectStyle(s.n3.INVALID,s.IA.INVALID),r.l7.system("style-creation-cleanup",()=>{if(a.Pt4&&a.glU&&i&&!f.current){let t=a.Pt4.getSoftDeletedStyleNodeId(i.key,i.version);a.glU.applyStyleToSelection(e,l.AD,!0),a.glU.hardDeleteSoftDeletedNode(t)}})}},[t,e,n,p]),{styleRef:m,createStyle:g}}},316427:(e,t,n)=>{n.d(t,{Y:()=>u});var i=n(104076),s=n(716976),a=n(420680),r=n(192075),l=n(55557),o=n(765846),d=n(349311),c=n(393708);function u({userId:e,onMuteButtonClickCallback:t,disabled:n}){let u=l.h.getInstance(),[p,m]=(0,s.useState)(null),h=(0,o.TI)(e,u),f=(0,s.useCallback)(async()=>{!n&&void 0!==h&&u&&(await t(h,u),m(h?"unmute":"mute"))},[h,t,m,u,n]);s.useEffect(()=>{m(null)},[h]);let g=()=>n?(0,r.t)("collaboration.voice.check_your_microphone_permissions_to_start_chatting"):h?(0,r.t)("collaboration.voice.click_to_unmute"):(0,r.t)("collaboration.voice.click_to_mute");return(0,i.jsx)(a.K,{onClick:f,"data-tooltip-type":d.Ib.TEXT,"data-tooltip":g(),"data-tooltip-timeout-delay":n?50:void 0,"aria-label":g(),"data-fullscreen-intercept":!0,disabled:n,children:n||"unmute"!==p&&("mute"===p||h)?(0,i.jsx)(c.A.Muted,{}):(0,i.jsx)(c.A.Unmuted,{})})}},910372:(e,t,n)=>{n.d(t,{Fl:()=>P,QU:()=>N,SI:()=>D,bf:()=>A,oA:()=>S,uj:()=>I,vy:()=>M});var i=n(716976),s=n(237420),a=n(926653),r=n(812714),l=n(795033),o=n(449572),d=n(370020),c=n(880233),u=n(285626),p=n(74620),m=n(211862),h=n(932709),f=n(59849),g=n(893393),x=n(842013),_=n(177328),y=n(76365),v=n(685490),b=n(34927),C=n(276347),j=n(566796);function k(e,t,n,i){if(!e)return new Set;let s=new Set;for(let a of e.childrenNodes){if("SYMBOL"===a.type||a.isStateGroup||"INSTANCE"===a.type){let{backingNodeId:e,backingLibraryKey:n}=(0,j.HX)(a.guid,t,i);n&&e&&s.add(`${n},${e}`)}a.childCount>0&&k(a,t,n,i).forEach(e=>s.add(e))}return s}function w(e,t,n,i,s){if(!e)return new Set;let a=new Set;for(let r of e.childrenNodes){if("SYMBOL"===r.type||r.isStateGroup||"INSTANCE"===r.type){let{backingStateGroupKey:e,backingComponentKey:l}=(0,j.HX)(r.id,t,n),o=e||l||null;!o&&r.symbolId&&i&&s&&(o=E(r.symbolId,i,s)),o&&a.add(o)}r.childCount>0&&w(r,t,n,i,s).forEach(e=>a.add(e))}return a}function E(e,t,n){let i=t.find(t=>t.node_id===e);if(i){if(i.containing_frame?.containingStateGroup?.nodeId){let e=i.containing_frame.containingStateGroup.nodeId,t=n.find(t=>t.node_id===e);if(t?.key)return t.key}if(i.component_key)return i.component_key}let s=n.find(t=>t.node_id===e);return s?.key?s.key:null}function T(e,t){let n=(0,l.md)(m._S),a=(0,p.eY)(),o=(0,s.d4)(v.aD),d=(0,s.d4)(y.BA),c=function(e){let t=(0,s.d4)(x.MH),n=(0,s.d4)(e=>e.mirror.appModel.currentPage),a=(0,l.md)(m._S);return(0,i.useMemo)(()=>{let i=new Set;if(!e)return i;for(let[e,s]of Object.entries(t))s.containing_frame?.pageId===n&&(s.containing_frame?.containingStateGroup?.nodeId?i.add((0,j.zi)(a,s.containing_frame?.containingStateGroup.nodeId)):i.add((0,j.zi)(a,e)));return i},[n,t])}(e),u=!t&&o.length+d.size>((0,r.kc)().dt_preload_code_connect_increase_limit?100:50);return(0,i.useMemo)(()=>{if(u)return new Set;let t=new Set;for(let i of o){let s=k(a.get(i.nodeId),a,e,n),{backingNodeId:r,backingLibraryKey:l}=(0,j.HX)(i.nodeId,a,n);if(l&&r)for(let e of(t.add(`${l},${r}`),s))t.add(e)}let i=new Set;for(let s of d){let r=a.get(s),l=s;if(r?.containingStateGroupId&&(l=r.containingStateGroupId),i.has(l))continue;let o=k(r,a,e,n);if(n&&l)for(let e of(t.add(`${n},${l}`),i.add(l),o))t.add(e)}for(let e of c)t.add(e);return t},[c,d,o,u])}function S(){let e=(0,l.md)(m._S),t=(0,p.eY)(),n=(0,s.d4)(e=>e.mirror.appModel.currentPage),r=(0,s.d4)(v.aD),o=(0,s.d4)(_.Th),c=(0,s.d4)(_.WH),u=(0,s.d4)(y.BA),f=(0,m.q5)(),g=(0,d.CQ)(f),x=(0,i.useMemo)(()=>{let n=new Set,i=new Map;for(let s of r){let{backingLibraryKey:r}=(0,j.HX)(s.nodeId,t,e);if(r){let e=(0,a.l)(r);n.add(e),i.set(s.key,e)}}return{libraryKeys:Array.from(n),componentToLibraryKeyMap:i}},[r,e]),b=(0,h.bj)(x.libraryKeys),C=(0,i.useMemo)(()=>{if("loaded"!==b.status)return r;let e=new Set(b.data.filter(e=>"library_type"in e&&"community"!==e.library_type).map(e=>e.library_key));return r.filter(t=>{let n=x.componentToLibraryKeyMap.get(t.key);return n&&e.has(n)})},[r,b.status,x.componentToLibraryKeyMap]);return(0,i.useMemo)(()=>{if(!g)return new Set;let i=new Set;for(let n of C){let s=w(t.get(n.nodeId),t,e,o,c),{backingComponentKey:a,backingStateGroupKey:r}=(0,j.HX)(n.nodeId,t,e);if(a||r){let e=r||a;e&&i.add(e),s.forEach(e=>i.add(e))}}let s=new Set;for(let n of u){let a=t.get(n),r=E(n,o,c);if(!r||s.has(r))continue;let l=w(a,t,e,o,c);if(r)for(let e of(i.add(r),s.add(r),l))i.add(e)}for(let e of c)e.key&&e.containing_frame?.pageId===n&&i.add(e.key);for(let e of o)e.component_key&&!e.containing_frame?.containingStateGroup&&e.containing_frame?.pageId===n&&i.add(e.component_key);return i},[C,c,o,n])}function I(){let e=(0,s.d4)(e=>e.mirror.appModel.currentPage),t=(0,m.tS)(),n=T(t,!1);(0,i.useEffect)(()=>{l.zl.set(C.zV,null)},[e]);let a=(0,o.bc)(f.Opb,{nodes:Array.from(n),openFileKey:t??""},{enabled:(0,r.kc)().dt_preload_code_connect_increase_limit?n.size<100:n.size<50});(0,i.useEffect)(()=>{if("loaded"===a.status&&a.data.file?.preload_code_connect_lk){let e=a.data.file.preload_code_connect_lk;l.zl.set(C.zV,{...e,nodesWithCodeConnect:new Set(e.nodesWithCodeConnect)})}return()=>l.zl.set(C.zV,null)},[e,a.status])}function N(e,t=!0){let n=(0,m.tS)(),i=(0,o.bc)(f.Opb,{nodes:e,openFileKey:n??""},{enabled:e.length<20&&t});if("loaded"===i.status&&i.data.file?.preload_code_connect_lk){let e=i.data.file.preload_code_connect_lk;return{status:"loaded",nodesWithCodeConnect:new Set(e.nodesWithCodeConnect),docsById:e.docsById}}return{status:i.status,nodesWithCodeConnect:new Set,docsById:{}}}function A(){return l.zl.get(C.zV)?.nodesWithCodeConnect}let L=g.M4.Query({fetch:async({nodes:e})=>0===e.length?{}:(await b.Q.getComponentNames(e)).data.meta.componentsById,stalenessPolicy:"never"});function M(){let e=(0,s.d4)(e=>e.mirror.appModel.currentPage);(0,i.useEffect)(()=>{l.zl.set(C.Af,null)},[e]);let t=T((0,m.tS)(),!0),[n]=(0,g.IT)(L({nodes:Array.from(t)}),{enabled:!!(0,r.kc)().dt_code_connect_preload_component_names_endpoint&&t.size>0});(0,i.useEffect)(()=>("loaded"===n.status&&n.data&&l.zl.set(C.Af,{componentsById:n.data}),()=>l.zl.set(C.Af,null)),[e,n.status])}let O=g.M4.Query({fetch:async({assetKeys:e})=>0===e.length?{status:{}}:(await b.Q.getInContextPublishedComponentsStatus(e)).data.meta,stalenessPolicy:"never"}),R=g.M4.Mutation((e,{query:t})=>{let{assetKeys:n,componentKey:i,status:s}=e;t.mutate(O({assetKeys:n}),e=>e?{...e,status:{...e.status,[i]:s}}:{status:{[i]:s}})});function P(){let e=(0,g.gY)(R),t=S();return(0,i.useCallback)(n=>{let{componentKey:i,status:s}=n;i&&e({assetKeys:Array.from(t),componentKey:i,status:s})},[e,t])}function D(){let e=(0,s.d4)(e=>e.mirror.appModel.currentPage);(0,i.useEffect)(()=>{(0,r.kc)().dt_component_browser_optimistic_update_query||l.zl.set(C.mO,null)},[e]);let t=S(),n=(0,l.md)(u.Xh),a=(0,l.md)(c.s9),o=(0,l.md)(u.M7),p=(0,m.q5)(),h=(0,d.CQ)(p),[f]=(0,g.IT)(O({assetKeys:Array.from(t)}),{enabled:!!h&&t.size>0});(0,i.useEffect)(()=>{if(!(0,r.kc)().dt_component_browser_optimistic_update_query)return;let e="loading"===n||"loading"===a||"loading"===o||"loading"===f.status&&t.size>0;e?l.zl.set(C.mO,{status:{},loadingStatus:"loading"}):0===t.size?l.zl.set(C.mO,{status:{},loadingStatus:"loaded"}):"loaded"===f.status&&f.data&&!e&&l.zl.set(C.mO,{status:f.data.status,loadingStatus:"loaded"})},[e,f.status,t.size,n,a,o,f.data]),(0,i.useEffect)(()=>{if((0,r.kc)().dt_component_browser_optimistic_update_query)return;let e="loading"===n||"loading"===a||"loading"===o||"loading"===f.status&&t.size>0;return e?l.zl.set(C.mO,{status:{},loadingStatus:"loading"}):0===t.size?l.zl.set(C.mO,{status:{},loadingStatus:"loaded"}):"loaded"===f.status&&f.data&&!e&&l.zl.set(C.mO,{status:f.data.status,loadingStatus:"loaded"}),()=>l.zl.set(C.mO,null)},[e,f.status,t.size,n,a,o])}},170462:(e,t,n)=>{n.d(t,{N:()=>b,w:()=>v});var i=n(104076),s=n(684742),a=n(227601),r=n(29611),l=n(686546),o=n(938965),d=n(865870),c=n(356931),u=n(790009),p=n(120440),m=n(816565),h=n(284467),f=n(192075),g=n(373547),x=n(311272),_=n(211862),y=n(835307);let v=["TEXT","SECTION","SLICE","STICKY","CONNECTOR","STAMP"];function b(e){let t;let n=(0,y.Fk)((e,t)=>e.get(t)?.visible,e.guid),v=(0,y.Fk)((e,t)=>e.get(t)?.type,e.guid),b=(0,_.tS)(),j=(0,g.DP)(),k=(0,x.ic)(e.guid);if(!v)return null;switch(v){case"TEXT":t=(0,i.jsx)(a.B,{className:"xmauxvm"});break;case"SECTION":t=(0,i.jsx)(r.P,{className:"xmauxvm"});break;case"SLICE":t=(0,i.jsx)(l.C,{className:"xmauxvm"});break;case"STICKY":t=(0,i.jsx)(o.V,{className:"xmauxvm"});break;case"CONNECTOR":t=(0,i.jsx)(d.y,{className:"xmauxvm"});break;case"STAMP":t=(0,i.jsx)(c.b,{className:"xmauxvm"});break;default:t=k&&b?(0,i.jsx)(m.oW,{className:"x5yr21d xh8yej3 x4ouu4z",style:{objectFit:"contain",opacity:n?1:.5},src:k,alt:(0,f.t)("layer_icon.thumbnail.alt_text")}):(0,i.jsx)(h.Qp,{className:"x5yr21d xh8yej3 x4ouu4z",animationType:h.JR.LIGHT_SHIMMER})}return(0,i.jsx)(s.E,{"aria-label":(0,f.t)("layer_icon.button.pan_to_node"),htmlAttributes:{onDoubleClick:t=>{e.navigateAndPanTo&&(t.currentTarget?.blur(),e.navigateAndPanTo(e.guid))}},className:"x11g6tue",children:(0,i.jsx)("span",{...p.Ay.props(C.iconHeight(e.size),C.iconWidth(e.size),C.iconContainer,"light"===j?C.lightBackground:C.darkBackground,e.rowSelected&&C.selected),children:(0,i.jsx)(u.J,{mode:"light",children:t})})})}let C={iconHeight:e=>[{kZKoxP:null!=e?"x16ye13r":e,$$css:!0},{"--x-height":(e=>"number"==typeof e?e+"px":null!=e?e:void 0)(e)}],iconWidth:e=>[{kzqmXN:null!=e?"x5lhr3w":e,$$css:!0},{"--x-width":(e=>"number"==typeof e?e+"px":null!=e?e:void 0)(e)}],darkBackground:{kC7eKd:"x14ju1db",ku1ltF:null,kHypHr:null,kWkggS:null,kKwaWg:null,kl9DO0:null,k1YJky:null,kDwdnV:null,kAiEkY:null,kz484i:null,kgSjnq:null,$$css:!0},lightBackground:{kC7eKd:"x1usue9s",ku1ltF:null,kHypHr:null,kWkggS:null,kKwaWg:null,kl9DO0:null,k1YJky:null,kDwdnV:null,kAiEkY:null,kz484i:null,kgSjnq:null,$$css:!0},iconContainer:{kjVXCG:"xeutv01",kaIpWk:"x19y5rnk",krdFHd:null,kfmiAY:null,kVL7Gh:null,kT0f0o:null,kIxVMA:null,ksF3WI:null,kqGeR4:null,kYm2EN:null,kmVPX3:"x1i3ajwb",kg3NbH:null,kuDDbn:null,kE3dHu:null,kP0aTx:null,kpe85a:null,k8WAf4:null,kLKAdn:null,kGO01o:null,kB7OPa:"x9f619",k1xSpc:"x78zum5",kGNEyG:"x6s0dn4",kjj79g:"xl56j7k",$$css:!0},selected:{kmVPX3:"xyf9f8g",kg3NbH:null,kuDDbn:null,kE3dHu:null,kP0aTx:null,kpe85a:null,k8WAf4:null,kLKAdn:null,kGO01o:null,kMzoRj:"xmkeg23",kjGldf:null,k2ei4v:null,kZ1KPB:null,ke9TFa:null,kWqL5O:null,kLoX6v:null,kEafiO:null,kt9PQ7:null,ksu8eU:"x1y0btm7",kJRH4f:null,kVhnKS:null,k4WBpm:null,k8ry5P:null,kSWEuD:null,kDUl1X:null,kPef9Z:null,kfdmCh:null,kVAM5u:"x2mq3v4",kzOINU:null,kGJrpR:null,kaZRDh:null,kBCPoo:null,k26BEO:null,k5QoK5:null,kLZC3w:null,kL6WhQ:null,$$css:!0}}},926899:(e,t,n)=>{n.d(t,{_:()=>l,x:()=>r});var i=n(547115),s=n(520199),a=n(921378);let r=(e,t)=>async n=>{if(!e){let e="Thread ID is required to upload tool result to blob store";return(0,s.fL)(new s.fC(e),"upload_to_blob_store",{fileKey:t}),{state:"uploadFailed",error:e}}let i=await a.M.uploadJsonBlobs(t,e,[n]);if(i.success){let a=i.resultItems[0];if(!a){let n="Blobstore upload succeeded but no result was returned";return(0,s.fL)(new s.fC(n),"upload_to_blob_store",{fileKey:t,threadId:e}),{state:"uploadFailed",error:n}}return(0,s.pF)("Uploaded tool result to blob store",a),{state:n.success?"success":"toolFailed",blobstoreContentKey:a.contentKey}}{let n=`Failed to upload tool result to blob store: ${i.error}`;return(0,s.fL)(new s.fC(n),"upload_to_blob_store",{fileKey:t,threadId:e}),{state:"uploadFailed",error:n}}},l=({enabled:e,fileKey:t,threadId:n,userFlow:r})=>async l=>{if(!e){let e="Chat SDK is disabled, we should not be trying to upload content to blobstore";return(0,s.fL)(new s.Tv(e),"upload_to_blob_store",{fileKey:t,threadId:n}),{success:!1,error:e}}let o=await r.measureDurationAsync("uploadContentToBlobstore",async e=>{let i=await a.M.uploadBlobs(t,n,l);return e.addContext({statusCode:i.success?"200":"500",aiChatThreadId:n}),i});if(!o.success)return(0,s.fL)(new s.Tv(`Failed to upload content to blobstore: ${o.error}`),"upload_to_blob_store",{fileKey:t,threadId:n,cause:o.error}),o;let d=o.resultItems.length,c=o.resultItems.filter(e=>e.entityAlreadyExisted).length;return(0,s.nH)(`Uploaded ${d} items to Blobstore (${c} already existed)`,o),r.addAction("uploadedToBlobstore",i.$b.INFO,{numUploaded:d,numAlreadyExisted:c}),o}},846033:(e,t,n)=>{n.d(t,{j4:()=>x,FO:()=>y,aF:()=>g,Z0:()=>_,Nl:()=>v});var i=n(547115),s=n(242069),a=n(442498),r=n(32970),l=n(723584),o=n(370012);function d(e,t){let{type:n,...i}=(0,o.t)(e),s={partIndex:t,partType:n,partTypeVersion:1,contentJson:JSON.stringify(i)};return(0,l.$2)(e)?{...s,blobstoreContentKey:e.blobstoreContentKey}:s}r.z.object({fileKey:r.z.string(),threadId:r.z.string(),messages:r.z.array(r.z.object({messageIndex:r.z.number(),startFileSeqNum:r.z.string(),endFileSeqNum:r.z.string().optional(),role:r.z.string(),parts:r.z.array(r.z.object({partIndex:r.z.number(),partType:r.z.string(),partTypeVersion:r.z.number(),contentJson:r.z.string(),blobstoreContentKey:r.z.string().optional()})),pendingParts:r.z.array(r.z.object({partId:r.z.string()})),clientId:r.z.string().optional(),nodeGuid:r.z.string().optional(),scenegraphSentAt:r.z.string().optional()}))}),r.z.object({fileKey:r.z.string(),threadId:r.z.string(),parts:r.z.array(r.z.object({partIndex:r.z.number(),partType:r.z.string(),partTypeVersion:r.z.number(),contentJson:r.z.string(),blobstoreContentKey:r.z.string()}))});var c=n(545735),u=n(926899),p=n(520199),m=n(173485),h=n(442218);async function f({messages:e,fileKey:t,threadId:n,startFileSeqNum:s,userFlow:a,commitContext:r}){let o=await (0,m.co)(),c=e.map(e=>(function({message:e,messageIndex:t,messageIndexOffset:n,startFileSeqNum:i,endFileSeqNum:s}){let a=[],r=[];for(let[t,n]of e.content.entries())(0,l.$2)(n)&&n.dbRecordId?r.push({partId:n.dbRecordId}):a.push(d(n,t));return{messageIndex:(n??-1)+1+t,startFileSeqNum:String(i??1),endFileSeqNum:s?String(s):void 0,role:e.role,parts:a,pendingParts:r,clientId:e.clientId,nodeGuid:e.guid,scenegraphSentAt:e.convertedFromScenegraph?e.createdAtMs.toString():void 0}})({message:e,messageIndex:e.messageIndex,messageIndexOffset:null,startFileSeqNum:s,endFileSeqNum:o})),u=await a.measureDurationAsync(`commitMessagesToDatabase[${r}]`,async e=>(e.addContext({fileKey:t,aiChatThreadId:n,description:r}),await (0,p.kA)(e,()=>h.NH.createThreadMessages({threadId:n,fileKey:t,messages:c}))));if(!u.success){let{statusCode:e,cause:i,errorData:s}=u;return(0,p.fL)(new p.Tv(`Failed to commit thread messages (context: ${r})`),"commit_messages_to_database",{fileKey:t,threadId:n,statusCode:e,cause:i,errorData:s,commitContext:r}),!1}let f=c.reduce((e,t)=>e+t.parts.length,0);return(0,p.nH)(`Committed ${c.length} messages (${f} parts) to database`,{commitContext:r,threadId:n,startFileSeqNum:s,endFileSeqNum:o}),a.addAction("messagesCommitted",i.$b.INFO,{numMessagesCommitted:c.length,numPartsCommitted:f}),!0}let g=({enabled:e,...t})=>async n=>{e&&await f({...t,messages:n})},x=async({chatController:e,nodeChatMessage:t,...n})=>{let{commitContext:i,fileKey:r,userFlow:l}=n;if(!e.isInitialized){(0,p.fL)(new p.Tv(`Cannot append single node chat to database, chatController not initialized (context: ${i})`),"append_single_node_chat_to_database",{fileKey:r,commitContext:i});return}if(!e.chatSdkPhase1Enabled)return;let o=e.chatSdkState?.threadId;if(!o){(0,p.fL)(new p.Tv(`Failed to append single node chat to database, no threadId found (context: ${i})`),"append_single_node_chat_to_database",{fileKey:r,commitContext:i});return}let d=(e.getNodeChatMessages()??[]).findIndex(e=>(0,s._$)(e)===(0,s._$)(t));if(-1===d){(0,p.fL)(new p.Tv(`Failed to append single node chat to database, message not found in chatController (context: ${i})`),"append_single_node_chat_to_database",{fileKey:r,commitContext:i});return}let{message:c,pendingUploads:m}=await (0,a.SQ)(t);await (0,a.Xm)(m??[],(0,u._)({enabled:!0,fileKey:r,threadId:o,userFlow:l})),await f({...n,threadId:o,messages:[{...c,messageIndex:d}]})?(0,p.nH)(`Committed ${i} message to database`,{threadId:o,messageIndex:d}):(0,p.D5)(`Failed to commit ${i} message to database`,{threadId:o,messageIndex:d})},_=({enabled:e,fileKey:t,threadId:n,userFlow:s})=>async a=>{let r=structuredClone(a);if(!e)return r;let o=r.flatMap((e,t)=>"tool"!==e.role&&"user"!==e.role?[]:e.content.flatMap((e,n)=>(0,l.$2)(e)?[{messageIndex:t,partIndex:n,part:e}]:[]));if(o.length>0){let e=await s.measureDurationAsync("createPendingMessageParts",async e=>(e.addContext({fileKey:t,aiChatThreadId:n}),await (0,p.kA)(e,()=>h.NH.createMessageParts({fileKey:t,threadId:n,parts:o.map(({partIndex:e,part:t})=>d(t,e))}))));if(!e.success){let{statusCode:i,cause:s,errorData:a}=e;return(0,p.fL)(new p.Tv("Failed to create pending message parts"),"create_pending_message_parts",{fileKey:t,threadId:n,statusCode:i,cause:s,errorData:a}),r}let a=(0,c.BS)(e.data.meta);for(let[e,i]of a.parts.entries()){let s=o[e];if(!s)return(0,p.fL)(new p.Tv(`Created part ${e} not found in refParts, this should never happen`),"create_pending_message_parts",{fileKey:t,threadId:n}),r;s.part.dbRecordId=i.id}(0,p.nH)(`Created ${a.parts.length} ref parts`,o),s.addAction("pendingMessagePartsCreated",i.$b.INFO,{numCreated:a.parts.length})}return r},y=({enabled:e,fileKey:t,threadId:n,userFlow:i,isOldFile:s})=>async a=>{if(!e)return;let r=new Set;for(let e of a){if(0===e.totalSummarized||0===e.summary.length)continue;if(!e.uptoMessageGuid){(0,p.nH)(`uptoMessageGuid undefined; skipping committing compression up to message index ${e.totalSummarized}`);continue}if(r.has(e.uptoMessageGuid))continue;r.add(e.uptoMessageGuid);let a=await i.measureDurationAsync("commitCompression",async i=>(i.addContext({fileKey:t,nodeId:e.uptoMessageGuid,aiChatThreadId:n,chatSdkIsOldFile:s}),await (0,p.kA)(i,()=>h.NH.createCompression({threadId:n,fileKey:t,uptoMessageGuid:e.uptoMessageGuid,uptoMessageSentAt:e.uptoMessageSentAt,summaryText:e.summary}))));if(!a.success){if(s)(0,p.D5)(`[old file] Failed to commit compression with uptoMessageGuid ${e.uptoMessageGuid}`,{threadId:n,errorData:a.errorData});else{let{statusCode:i,cause:s,errorData:r}=a;(0,p.fL)(new p.Tv("Failed to commit compression"),"commit_compressions",{fileKey:t,threadId:n,statusCode:i,cause:s,errorData:r,uptoMessageGuid:e.uptoMessageGuid,uptoMessageSentAt:e.uptoMessageSentAt,uptoMessageIndex:e.totalSummarized})}return}(0,p.nH)(`Committed compression with uptoMessageGuid ${e.uptoMessageGuid} to database for thread ${n}`)}},v=({enabled:e,fileKey:t,userFlow:n,isOldFile:i})=>async()=>{if(!e)return;let s=await n.measureDurationAsync("triggerValidations",async e=>(e.addContext({fileKey:t,chatSdkIsOldFile:i}),await (0,p.kA)(e,()=>h.NH.triggerValidations({fileKey:t}))));if(s.success)(0,p.nH)(`Successfully triggered validations for fileKey ${t}`);else if("400"===s.statusCode)(0,p.nH)(`Trigger validations skipped with expected 400 status code: ${s.cause?.message??"Unknown 400 status code error"}`);else{let{statusCode:e,cause:n,errorData:a}=s;(0,p.fL)(new p.Tv(`Failed to trigger validations for fileKey: ${t}`),"trigger_validations",{fileKey:t,statusCode:e,cause:n,errorData:a,isOldFile:i})}}},315125:(e,t,n)=>{n.d(t,{m:()=>a,y:()=>r});var i=n(991783),s=n(534148);function a(e,t){let n={};return n.useValue=function(a){if(t&&n[a]&&t(a,n[a])&&delete n[a],!n[a]){let t=(0,i.v)();e(a).then(e=>t.resolve(e)).catch(e=>t.reject(e)),n[a]={deferred:t,created:Date.now()}}let{deferred:r}=n[a];switch(r.status){case"pending":throw(0,s.WE)(r.promise),Error("unreachable");case"rejected":throw r.error;case"resolved":return r.result}},n}function r(e){return(t,n)=>Date.now()-n.created>e}},810149:(e,t,n)=>{n.d(t,{ES:()=>r,KO:()=>l,ci:()=>o,wy:()=>a});var i=n(542653),s=n(795033);let a=(0,n(985416).Wh)(()=>(0,i.ft)()>=2?(0,s.eU)(new Set(["/src","/src/app","/src/styles"])):(0,s.eU)(new Set)),r=(0,s.eU)(null),l=(0,s.eU)(!1);function o(e){let t=e.split("/"),n="",i=new Set;for(let e of t)""!==e&&(n=`${n}/${e}`,i.add(n));s.zl.set(a,e=>new Set([...e,...i]))}},990609:(e,t,n)=>{n.d(t,{S:()=>eE});var i=n(104076),s=n(716976),a=n(237420),r=n(614641),l=n(500275),o=n(542653),d=n(307829),c=n(454851),u=n(853943),p=n(980852),m=n(812714),h=n(795033),f=n(120440),g=n(883765),x=n(192075),_=n(58212),y=n(178623),v=n(20267),b=n(704759),C=n(211862),j=n(835307),k=n(572427),w=n(810149),E=n(700126),T=n(533144),S=n(107799),I=n(302934),N=n(366604),A=n(963433),L=n(660471),M=n(833737),O=n(266808),R=n(170627),P=n(349311),D=n(848358),F=n(638004),z=n(9378),B=n.n(z),G=n(550209),U=n(354114),V=n(287291),H=n(951002);let K=(0,s.createContext)(null);function W({children:e,value:t}){return(0,i.jsx)(K.Provider,{value:t,children:e})}function q(){let e=(0,s.useContext)(K);return(0,H.KF)(!!e,"useFileTreeContext must be used within a FileTreeProvider"),e}var X=n(312071);let Y=[".ts",".tsx",".js",".jsx",".css",".scss",".html",".json",".md",".txt"];function Z({path:e}){let{onNewFileCreated:t}=q();return(0,i.jsx)(d.q7,{onClick:()=>{g.az.trackDefinedEvent("figmake.filesystem_action",{fileKey:h.zl.get(C.ze)??void 0,action:"create_file",targetType:e?"folder":"root",entryPoint:"context_menu",codeFileGuid:void 0}),R.Hq.user("create-new-code-file",()=>{try{let n=en("new-file.tsx",e),i=e?`${e.replace(/\/$/,"")}/${n}`:n,s=p.getActiveTSSceneGraph()?.createNewCodeFile({path:i,sourceCode:"",entryPoint:"file_context_menu",isEntrypointCodeFile:!1,onError:e=>{G.$D(F.e.MAKE,e)},enableDuplicateCheck:m.kc().bake_dup_code_files,createCodeComponent:!1});if(U.Y5.commit(),s){let e=(0,p.getActiveTSSceneGraph)().get(s);e&&(0,X.nU)(e),t(s)}}catch(e){(0,G.$D)(F.e.MAKE,e)}})},"data-testid":"create-file-menu-item",children:(0,x.t)("figmake.filesystem.context_menu.create_new_file")})}function J({path:e}){return(0,i.jsx)(d.q7,{onClick:()=>{g.az.trackDefinedEvent("figmake.filesystem_action",{fileKey:h.zl.get(C.ze)??void 0,action:"copy_path",targetType:e.includes(".")?"file":"folder",entryPoint:"context_menu",codeFileGuid:void 0}),navigator.clipboard.writeText(e)},children:(0,x.t)("figmake.filesystem.context_menu.copy_path")})}function Q({node:e,disabled:t}){return(0,i.jsx)(d.q7,{onClick:()=>{g.az.trackDefinedEvent("figmake.filesystem_action",{fileKey:h.zl.get(C.ze)??void 0,action:"delete_file",targetType:"file",entryPoint:"context_menu",codeFileGuid:e.guid}),R.Hq.user("delete-code-file",()=>{O.glU?.deleteCodeFile(e.guid),O.glU?.commit()})},disabled:t,"data-testid":"delete-file-menu-item",children:(0,x.t)("figmake.filesystem.context_menu.delete")})}function $(e){let t=(0,p.getActiveTSSceneGraph)();if(!t)return;let n=t.get(e.guid);if(n)return n.sourceCode}function ee({fileOrFolder:e}){return(0,i.jsx)(d.q7,{onClick:()=>{g.az.trackDefinedEvent("figmake.filesystem_action",{fileKey:h.zl.get(C.ze)??void 0,action:"download",targetType:e.type,entryPoint:"context_menu",codeFileGuid:"file"===e.type?e.guid:void 0});let{name:t,blob:n}=function(e){if("file"===e.type){let t=$(e);return{name:e.name,blob:new Blob([t||""],{type:"text/plain"})}}{let t=new(B());!function e(t,n,i){if("file"===n.type){let e=$(n);if(!e)return;let{name:s}=n,a=n.codeFilePath?n.codeFilePath.slice(i.length)+"/":"";t.file(a+s,new TextEncoder().encode(e))}else for(let s of n.children)e(t,s,i)}(t,e,e.path);let n=t.generate({type:"blob"});return{name:e.path.length>0?e.path.split("/").pop()+".zip":"project.zip",blob:n}}}(e),i=URL.createObjectURL(n),s=document.createElement("a");s.href=i,s.download=t,s.click(),URL.revokeObjectURL(i)},children:(0,x.t)("figmake.filesystem.context_menu.download")})}function et({handleRename:e,disabled:t}){return(0,i.jsx)(d.q7,{onClick:()=>{g.az.trackDefinedEvent("figmake.filesystem_action",{fileKey:h.zl.get(C.ze)??void 0,action:"rename",targetType:"file",entryPoint:"context_menu",codeFileGuid:void 0}),e()},htmlAttributes:{onPointerUp:e=>e.preventDefault()},disabled:t,children:(0,x.t)("figmake.filesystem.context_menu.rename")})}function en(e,t,n){let i,s=0,a=e,r=n||(0,o.$d)(t);for(;s<1e4;)if(i=t?t+"/"+a:a,`/${i}`in r){let t=(0,V.dv)(e),n=t?e.replace(/\.[^/.]+$/,""):e;s++,a=t?`${n}-${s}${t}`:`${n}-${s}`}else break;if(s>=1e4)throw Error(`Unable to generate unique filename for "${e}" - too many existing files with similar names`);return a}function ei(e){return e.isFile&&"file"in e}function es(e){return e.isDirectory&&"createReader"in e}async function ea(e,t,n){if(e.length>100){let t=(0,x.t)("figmake.filesystem.file_upload.error_too_many_files",{count:e.length,max:100});n?.(_.F.enqueue({message:t,error:!0,timeoutOverride:3e3}));return}let i=[];for(let t of e)try{let e=await new Promise(e=>{t.file(e)});if(e){let n="fullPath"in t?t.fullPath.replace(/^\//,""):e.name;i.push({file:e,relativePath:n})}}catch(e){console.error("Failed to process file entry:",e)}for(let{file:e,relativePath:s}of i)await el(e,s,t,n)}function er(e){let t=e.lastIndexOf("/");return t>=0?e.substring(0,t):void 0}async function el(e,t,n,i){let s=n?`${n}/${t}`:t;try{!function(e){let t=(0,V.dv)(e.name);if(!Y.includes(t))throw Error((0,x.t)("figmake.filesystem.file_upload.error_invalid_type"));if(e.size>0xa00000)throw Error((0,x.t)("figmake.filesystem.file_upload.error_too_large"))}(e);let t=await new Promise((t,n)=>{let i=new FileReader;i.onload=e=>{let i=new TextDecoder("utf-8",{fatal:!0});try{if(e.target?.result&&"object"==typeof e.target.result&&e.target.result instanceof ArrayBuffer){let n=i.decode(e.target.result);"string"==typeof n&&t(n)}}finally{n(Error("Failed to read file as text"))}},i.onerror=()=>n(Error("Failed to read file")),i.readAsArrayBuffer(e)}),n=en(e.name,er(s)),i=er(s)?`${er(s)}/${n}`:n;R.l7.user("create-file-from-drop",()=>{let e=p.getActiveTSSceneGraph()?.createNewCodeFile({path:i,sourceCode:t,entryPoint:"file_drop",isEntrypointCodeFile:!1,onError:e=>{G.$D(F.e.MAKE,e)},enableDuplicateCheck:m.kc().bake_dup_code_files,createCodeComponent:!0});if(U.Y5.commit(),g.az.trackDefinedEvent("figmake.file_upload_result",{fileKey:h.zl.get(C.ze)??void 0,success:!0,errorMessage:void 0,codeFileGuid:e??void 0}),e){let t=(0,p.getActiveTSSceneGraph)().get(e);t&&(0,X.nU)(t)}})}catch(n){g.az.trackDefinedEvent("figmake.file_upload_result",{fileKey:h.zl.get(C.ze)??void 0,success:!1,errorMessage:n instanceof Error?n.message:void 0,codeFileGuid:void 0});let t=n instanceof Error?n.message:(0,x.t)("figmake.filesystem.file_upload.error_failed",{name:e.name});i?.(_.F.enqueue({message:t,error:!0,timeoutOverride:3e3}))}}async function eo(e,t,n){if(e&&0!==e.length){if(e[0]&&"webkitGetAsEntry"in e[0]){await ed(e,t,n);return}await ec(e,t,n)}}async function ed(e,t,n){let i=[],s=[],a=!1;for(let t of e)if(t.webkitGetAsEntry){let e=t.webkitGetAsEntry();e&&(ei(e)?i.push(e):es(e)&&(a=!0,s.push(function e(t,n){return new Promise(i=>{let s=t.createReader(),a=()=>{s.readEntries(t=>{if(0===t.length){i();return}let s=[];for(let i of t)ei(i)?n.push(i):es(i)&&s.push(e(i,n));Promise.all(s).then(()=>{a()})})};a()})}(e,i))))}else if("file"===t.kind){let e=t.getAsFile();e&&i.push({file:t=>t(e)})}await Promise.all(s),g.az.trackDefinedEvent("figmake.file_upload",{fileKey:h.zl.get(C.ze)??void 0,fileCount:i.length,hasDirectories:a}),await ea(i,t,n)}async function ec(e,t,n){let i=Array.from(e);if(g.az.trackDefinedEvent("figmake.file_upload",{fileKey:h.zl.get(C.ze)??void 0,fileCount:i.length,hasDirectories:!1}),i.length>100){let e=(0,x.t)("figmake.filesystem.file_upload.error_too_many_files",{count:i.length,max:100});n?.(_.F.enqueue({message:e,error:!0,timeoutOverride:3e3}));return}for(let e of i)await el(e,e.name,t,n)}function eu({manager:e,file:t,handleRename:n,featureType:a}){let r=(0,p.getActiveTSSceneGraph)().get(t.guid),o=(0,E.l)(),c=(0,l.QK)(r,a);return s.useEffect(()=>{e.isOpen&&g.az.trackDefinedEvent("figmake.filesystem_open_context_menu",{fileKey:h.zl.get(C.ze)??void 0,targetType:"file",codeFileGuid:t.guid})},[e.isOpen,t]),(0,i.jsx)(d.bL,{manager:e,children:(0,i.jsxs)(d.mc,{children:[(0,i.jsx)(J,{path:t.codeFilePath?t.codeFilePath+"/"+t.name:t.name}),(0,i.jsx)(ee,{fileOrFolder:t}),!o&&(0,i.jsx)(et,{handleRename:n,disabled:c}),!o&&r&&(0,i.jsx)(Q,{node:r,disabled:c})]})})}let ep={fileItemLabel:{k1xSpc:"x78zum5",kGNEyG:"x6s0dn4",kmVPX3:"x7qmaab",kaIpWk:"x12oqio5",kMwMTN:"x1akne3o","--color-icon":"xtlvio2",k9WMMc:"xdpxx8g",kWkggS:"xjbqb8w x12tve8b",khDVqt:"xuxw1ft",kXHlph:"x6ikm8r",kg5iWk:"xlyipyv",kzqmXN:"xh8yej3",$$css:!0},fileItemLabelRenaming:{kWkggS:"xjbqb8w",$$css:!0},fileItemLabelActive:{kWkggS:"xcr9a89",kMwMTN:"x1akne3o",k63SB2:"x6xwguf","--color-icon":"xtlvio2",$$css:!0},disabled:{kMwMTN:"xge78cn",kWkggS:"x1yjdb4r",$$css:!0}};function em({selectedNode:e,file:t,indentLevel:n,codeIsStreaming:a,featureType:r}){let{codeLibraryInstance:o}=(0,A.oA)(),c=(0,s.useRef)(null),{getContextMenuTriggerProps:u,manager:g}=d.b(),{newlyCreatedFileGuid:_,onNewFileFocused:y}=q(),{selectedDsLibraryFolderPath:v}=(0,A.oA)(),[b,C]=s.useState(!1),[j]=(0,h.fp)(w.ES),[k]=(0,h.fp)(w.KO),T=(0,p.getActiveTSSceneGraph)().get(t.guid),S=_===t.guid,I=(0,E.l)(),N=(0,l.QK)(T,r),F=s.useCallback(()=>{C(!0),y()},[y]);return(0,m.kc)().bake_library_creation&&o?.shouldHidePreviewForMakeKitCreation&&!T?.sourceCodeLibraryKey?null:(0,i.jsxs)("button",{"aria-label":(0,x.t)("figmake.filesystem.file.description",{name:t.name}),onClick:()=>{let e=(0,p.getActiveTSSceneGraph)().get(t.guid);e&&(0,X.nU)(e,!0)},className:"x10w6t97 x78zum5 x6s0dn4 xjbqb8w xj8oexa xnjsko4",disabled:a,...u(),"data-testid":"code-file-item",children:[(0,i.jsxs)("div",{...f.Ay.props(ep.fileItemLabel,e?.guid!==t.guid||b||null!==j||k||v&&(0,m.kc)().bake_byods_extraction_showcase?void 0:ep.fileItemLabelActive,a?ep.disabled:void 0,b?ep.fileItemLabelRenaming:void 0),style:{paddingLeft:8+16*n},children:[(0,i.jsx)("span",{style:{flexShrink:0,...(0,X.Ql)(a)},children:(0,i.jsx)(L.i,{})}),(0,i.jsx)(D.p,{fileName:t.name,onChange:e=>{C(!1),T&&R.Hq.user("edit-code-file-name",()=>{T.setHasBeenManuallyRenamed(!0),T.name=e,O.glU?.commit()})},disabled:a,readOnly:I||N,onFocus:F,ref:c,path:t.codeFilePath,autoFocus:S}),t.isLarge&&(0,i.jsx)("span",{className:"x1iog12x x2lah0s x78zum5 x6s0dn4 x1gxdvn5","data-tooltip":(0,x.t)("sites.code_components.code_file_size_warning"),"data-tooltip-type":P.Ib.TEXT,children:(0,i.jsx)(M.R,{})})]}),(0,i.jsx)(eu,{manager:g,file:t,handleRename:()=>c.current?.focus(),featureType:r})]},t.guid)}var eh=n(419822),ef=n(620480),eg=n(780312),ex=n(388054),e_=n(772963);function ey(e,t,n){let i=(0,a.wA)(),[r,l]=(0,h.fp)(w.ES),[o]=(0,h.fp)(w.KO),d=r===e&&!o;return{isDragOver:d,handleDragOver:s.useCallback(t=>{t.preventDefault(),t.stopPropagation(),t.dataTransfer.dropEffect=n?.disabled?"none":"copy",o||l(e)},[e,l,o,n?.disabled]),handleDragLeave:s.useCallback(e=>{e.preventDefault(),e.stopPropagation(),e.currentTarget.contains(e.relatedTarget)||l(null)},[l]),handleDrop:s.useCallback(async e=>{if(e.preventDefault(),e.stopPropagation(),l(null),n?.disabled)return;let s=e.dataTransfer;s?.items&&s.items.length>0?await eo(Array.from(s.items),t,i):await eo(s?.files,t,i)},[t,i,l,n?.disabled])}}function ev({manager:e,folder:t,rootPath:n}){let a=(0,E.l)();return s.useEffect(()=>{e.isOpen&&g.az.trackDefinedEvent("figmake.filesystem_open_context_menu",{fileKey:h.zl.get(C.ze)??void 0,targetType:"folder",codeFileGuid:void 0})},[e.isOpen,t]),(0,i.jsx)(d.bL,{manager:e,children:(0,i.jsxs)(d.mc,{children:[!a&&(0,i.jsx)(Z,{path:(n?n+"/":"")+t.path.slice(1)}),(0,i.jsx)(J,{path:t.path.slice(1)}),(0,i.jsx)(ee,{fileOrFolder:t})]})})}let eb={folderItemContainerDragOver:{kWkggS:"xcr9a89",kVAEAm:"x1n2onr6",kgeoSG:"x1cpjm7i",kEoFBp:"x1hmns74",k96MEf:"x1y3wzot",k75S9Q:"x1wlytlt",kLBHJ3:"xb0dqd5",k5Ofw7:"xhq5o37",k5Ohv7:"xpmqpgo",kj4x2v:"x1fo1fc9",kfXFYZ:"x1vzh1im",kPB484:"xb52w3a",km8f2m:"xkk1bqk",kxmVGU:"x12maryy",$$css:!0},folderItemLabelActive:{kMwMTN:"x1akne3o",k63SB2:"x6xwguf","--color-icon":"xtlvio2",kWkggS:"xcr9a89",$$css:!0},folderItemLabel:{kzQI83:"x1iyjqo2",kmuXW:"xs83m0k",kCS8Yb:"x1t1x2f9",k1xSpc:"x78zum5",kGNEyG:"x6s0dn4",kOIVth:"x195vfkc",kaIpWk:"x12oqio5",kWkggS:"xjbqb8w x12tve8b",k7Eaqz:"xeuugli",$$css:!0},folderItemLabelDragActive:{kWkggS:"xjbqb8w",$$css:!0},disabled:{kMwMTN:"xge78cn",kWkggS:"x1yjdb4r",$$css:!0}};function eC({selectedNode:e,folder:t,indentLevel:n,codeIsStreaming:a,openFolderPaths:r,toggleFolder:l,featureType:o,rootPath:c}){let u=r.has(t.path)&&!t.isLoading,{getContextMenuTriggerProps:p,manager:_}=d.b(),{codeLibraryInstance:y,selectedDsLibraryFolderPath:v}=(0,A.oA)(),[b]=(0,h.fp)(w.ES),[j]=(0,h.fp)(w.KO),k=null!==b||j,S=s.useRef(),I=s.useCallback(e=>{k&&!u&&!a&&e.dataTransfer?.items.length>0&&(S.current&&clearTimeout(S.current),S.current=setTimeout(()=>{l(t.path)},250))},[k,u,a,l,t.path]),N=s.useCallback(e=>{!e.currentTarget.contains(e.relatedTarget)&&S.current&&clearTimeout(S.current)},[]);s.useEffect(()=>()=>{S.current&&clearTimeout(S.current)},[]);let L=s.useMemo(()=>(0,X.w_)([...t.children]),[t.children]),M=(0,E.l)(),O=c?`${c}/${t.path.replace(/^\//,"")}`:t.path.replace(/^\//,""),{isDragOver:R,handleDragOver:P,handleDragLeave:D,handleDrop:F}=ey(`folder-${c||"root"}-${t.path}`,O,{disabled:a||M}),z=s.useCallback(e=>{N(e),D(e)},[N,D]);return(0,m.kc)().bake_library_creation&&y?.shouldHidePreviewForMakeKitCreation&&!t.isDsImportedLibrary?null:(0,i.jsxs)("div",{className:"x78zum5 xdt5ytf x195vfkc xkh2ocl xjbqb8w x12oqio5 xj8oexa xnjsko4",onDragOver:P,onDragEnter:I,onDragLeave:z,onDrop:F,"data-folder-item":!0,children:[(0,i.jsx)("div",{...f.Ay.props(R&&!M?eb.folderItemContainerDragOver:void 0),children:(0,i.jsxs)("div",{className:"x10w6t97 x78zum5 x6s0dn4 xjbqb8w",children:[(0,i.jsxs)("button",{...p(),"aria-label":(0,x.t)("figmake.filesystem.folder.description",{name:t.name}),"aria-expanded":u,onClick:()=>{let e=(0,m.kc)().bake_byods_extraction_showcase&&t.isDsImportedLibrary,n=((0,m.kc)().bake_byods_extraction_showcase?h.zl.get(T.ww):null)===t.path;e&&!n&&u||(l(t.path),g.az.trackDefinedEvent("figmake.toggle_folder",{fileKey:h.zl.get(C.ze)??void 0,isOpening:!u})),e&&(h.zl.set(T.ww,t.path),h.zl.set(T.$X,null))},...f.Ay.props(eb.folderItemLabel,a||t.isLoading?eb.disabled:void 0,k?eb.folderItemLabelDragActive:void 0,(0,m.kc)().bake_byods_extraction_showcase&&v===t.path&&!k?eb.folderItemLabelActive:void 0),disabled:a||t.isLoading,children:[(0,i.jsxs)("div",{style:{paddingLeft:16*n,display:"flex",alignItems:"center",...(0,X.Ql)(a||!!t.isLoading)},children:[(0,i.jsx)("span",{style:{flexShrink:0},children:u?(0,i.jsx)(ef.r,{}):(0,i.jsx)(eg.R,{})}),(0,i.jsx)("span",{style:{flexShrink:0},children:(0,i.jsx)(ex.e,{})})]}),(0,i.jsx)(e_.G,{text:t.name,"data-testid":"code-folder-name"}),t.isLoading?(0,i.jsx)("div",{style:{flexShrink:0,flexGrow:1,display:"flex",justifyContent:"flex-end",marginLeft:4,marginRight:4,...(0,X.Ql)(!0)},children:(0,i.jsx)(eh.k,{size:"sm"})}):null]}),(0,i.jsx)(ev,{manager:_,folder:t,rootPath:c})]})}),u?L.map(t=>"file"===t.type?(0,i.jsx)(em,{selectedNode:e,file:t,indentLevel:n+1,codeIsStreaming:a,featureType:o},t.guid):(0,i.jsx)(eC,{selectedNode:e,folder:t,indentLevel:n+1,codeIsStreaming:a,openFolderPaths:r,toggleFolder:l,featureType:o,rootPath:c},t.name)):null]})}function ej({isDragActive:e,canScrollUp:t,canScrollDown:n,onScrollTriggerEnter:s,onScrollTriggerLeave:a}){return e?(0,i.jsxs)(i.Fragment,{children:[t&&(0,i.jsx)("div",{className:"x10l6tqk xu96u03 x3m8u43 xh8yej3 x1lasm2m xsaw067 x13vifvy x67bb7w",onDragEnterCapture:e=>{e.preventDefault(),e.stopPropagation(),s("up",e)},onDragOverCapture:e=>{e.preventDefault(),e.stopPropagation(),s("up",e)},onDragLeaveCapture:e=>{e.preventDefault(),e.stopPropagation(),a()}}),n&&(0,i.jsx)("div",{className:"x10l6tqk xu96u03 x3m8u43 xh8yej3 x1lasm2m xsaw067 x1ey2m1c x67bb7w",onDragEnterCapture:e=>{e.preventDefault(),e.stopPropagation(),s("down",e)},onDragOverCapture:e=>{e.preventDefault(),e.stopPropagation(),s("down",e)},onDragLeaveCapture:e=>{e.preventDefault(),e.stopPropagation(),a()}})]}):null}let ek=3;function ew({manager:e,rootPath:t,codeProject:n}){let a=(0,E.l)();return s.useEffect(()=>{e.isOpen&&g.az.trackDefinedEvent("figmake.filesystem_open_context_menu",{fileKey:h.zl.get(C.ze)??void 0,targetType:"root",codeFileGuid:void 0})},[e.isOpen,t]),(0,i.jsx)(d.bL,{manager:e,children:(0,i.jsxs)(d.mc,{children:[!a&&(0,i.jsx)(Z,{path:t}),(0,i.jsx)(ee,{fileOrFolder:n})]})})}function eE({selectedCodeFileNode:e,nodeWithChatMessages:t,featureType:n,rootPath:a}){let{codeLibraryInstance:c,selectedDsLibraryFolderPath:u}=(0,A.oA)(),{getContextMenuTriggerProps:f,manager:g}=d.b(),_=(0,h.md)(T.$X),[y,v]=(0,s.useState)(null),C=(0,h.md)(I.eJ),L=(0,j.Fk)((e,t,n)=>(0,l.Ns)(e,t),a,C),[M,O]=(0,h.fp)(w.wy),[R]=(0,h.fp)(w.ES),[P]=(0,h.fp)(w.KO),D=null!==R||P,F=s.useCallback(e=>{O(t=>{let n=new Set(t);return n.has(e)?n.delete(e):n.add(e),n})},[O]),z=s.useCallback(()=>{let e=(0,r.iB)(),t=(0,o._J)(e),n=t?.guid;if(n||(n=L.children.find(e=>"file"===e.type)?.guid),n){let e=(0,p.getActiveTSSceneGraph)().get(n);e&&(0,X.nU)(e)}},[L]),B=(0,b.kK)(),G=s.useCallback(()=>{if(!B)return;let e=B[0];e&&(0,N.el)(e.name)},[B]);(0,s.useEffect)(()=>{(0,l.kv)(e)||z(),(0,m.kc)().bake_library_creation&&e?.name==="App.tsx"&&c?.shouldHidePreviewForMakeKitCreation&&null===u&&!_&&G()},[e,L,z,G,c,u,_]);let U=s.useMemo(()=>(0,X.w_)([...L.children]),[L.children]),V=function(e){let{exchange:t}=(0,S.$W)(e?.guid);return Object.values(t?.fileUpdates??{}).length>0}(t),H=(0,E.l)(),K=`file-tree-${a||"root"}`,q=(0,s.useRef)(null),{isDragOver:Y,handleDragOver:Z,handleDragLeave:J,handleDrop:Q}=ey(K,a,{disabled:V||H}),{handleScrollTriggerEnter:$,handleScrollTriggerLeave:ee,canScrollUp:et,canScrollDown:en}=function(e){let t=(0,s.useRef)(null),n=(0,s.useRef)(null),i=(0,s.useRef)(ek),a=(0,s.useRef)(null),[,r]=(0,h.fp)(w.KO),[l,o]=s.useState(!1),[d,c]=s.useState(!1),u=s.useCallback(()=>{if(!e.current)return;let t=e.current,n=t.scrollTop<=1,i=t.scrollTop>=t.scrollHeight-t.clientHeight-1;o(!n),c(!i)},[e]);s.useEffect(()=>{let t=e.current;if(!t)return;u();let n=()=>{u()};return t.addEventListener("scroll",n),()=>t.removeEventListener("scroll",n)},[e,u]);let p=s.useCallback(()=>{t.current&&(cancelAnimationFrame(t.current),t.current=null,n.current=null,r(!1)),a.current&&(clearTimeout(a.current),a.current=null)},[r]),m=s.useCallback((s,a=ek)=>{if(i.current=a,n.current===s&&t.current||(t.current&&(cancelAnimationFrame(t.current),t.current=null),!e.current))return;n.current=s;let l=e.current;if("up"===s&&l.scrollTop<=1||"down"===s&&l.scrollTop>=l.scrollHeight-l.clientHeight-1)return;r(!0);let o=()=>{if(!e.current||!n.current)return;let s=i.current,a="up"===n.current?-s:s,r=e.current.scrollTop+a;if("up"===n.current&&r<=0){e.current.scrollTop=0,p(),u();return}let l=e.current.scrollHeight-e.current.clientHeight;if("down"===n.current&&r>=l){e.current.scrollTop=l,p(),u();return}e.current.scrollTop=r,t.current=requestAnimationFrame(o)};t.current=requestAnimationFrame(o)},[e,r,u,p]),f=s.useCallback((t,n)=>{a.current&&(clearTimeout(a.current),a.current=null);let i=ek;if(n&&e.current){let s=e.current.getBoundingClientRect(),a=n.clientY;i="up"===t?Math.max(1,Math.min(16,Math.round(16-(a-s.top)/50*15))):Math.max(1,Math.min(16,Math.round(16-(s.bottom-a)/50*15)))}m(t,i)},[m,e]),g=s.useCallback(()=>{a.current&&clearTimeout(a.current),a.current=window.setTimeout(()=>{p()},50)},[p]);return(0,s.useEffect)(()=>()=>{p()},[p]),{canScrollUp:l,canScrollDown:d,handleScrollTriggerEnter:f,handleScrollTriggerLeave:g}}(q),ei=s.useCallback(e=>{v(e);let t=(0,p.getActiveTSSceneGraph)().get(e);if(t?.codeFilePath){let e="/"+t.codeFilePath;M.has(e)||O(t=>new Set([...t,e]))}},[M,O]),es=s.useCallback(()=>{v(null)},[]),ea=s.useMemo(()=>({newlyCreatedFileGuid:y,onNewFileCreated:ei,onNewFileFocused:es}),[y,ei,es]),er=s.useMemo(()=>{let e=(0,o.ft)();return(0,m.kc)().make_foundry&&e>=1},[]);return(0,i.jsx)(W,{value:ea,children:(0,i.jsxs)("div",{className:"x1n2onr6 x5yr21d x1vjfegm x78zum5 xdt5ytf",children:[er&&(0,i.jsx)("div",{className:"x2lah0s",children:(0,i.jsx)(k.r,{titleTx:(0,i.jsx)(i.Fragment,{children:(0,x.t)("figmake.filesystem.file_header_menu.label")}),icon:(0,i.jsx)(eT,{})})}),(0,i.jsxs)("div",{ref:q,...{0:{className:"xysyzu8 x6ikm8r x1n2onr6 x1iyjqo2 x12oqio5"},2:{className:"xysyzu8 x6ikm8r x1iyjqo2 x12oqio5 xcr9a89 x1n2onr6 x1cpjm7i x1hmns74 x1y3wzot x1wlytlt xb0dqd5 xhq5o37 xpmqpgo x1fo1fc9 x1vzh1im xb52w3a xkk1bqk x12maryy"},1:{className:"xysyzu8 x6ikm8r x1n2onr6 x1iyjqo2 x12oqio5"},3:{className:"xysyzu8 x6ikm8r x1iyjqo2 x12oqio5 xcr9a89 x1n2onr6 x1cpjm7i x1hmns74 x1y3wzot x1wlytlt xb0dqd5 xhq5o37 xpmqpgo x1fo1fc9 x1vzh1im xb52w3a xkk1bqk x12maryy"}}[!!(Y&&!H)<<1|!!D<<0],...f(),onDragOver:Z,onDragLeave:J,onDrop:Q,children:[(0,i.jsx)(ew,{manager:g,rootPath:a,codeProject:L}),(0,i.jsx)("div",{className:"x12ulsxz xdqyycr x78zum5 xdt5ytf xlqzeqv x1qjc9v5 x1nd3289 xrxpjvj",children:U.map(t=>"file"===t.type?(0,i.jsx)(em,{selectedNode:e,file:t,indentLevel:0,codeIsStreaming:V,featureType:n},t.guid):(0,i.jsx)(eC,{selectedNode:e,folder:t,indentLevel:0,codeIsStreaming:V,openFolderPaths:M,toggleFolder:F,featureType:n,rootPath:a},t.name))})]}),(0,i.jsx)(ej,{isDragActive:D,canScrollUp:et,canScrollDown:en,onScrollTriggerEnter:$,onScrollTriggerLeave:ee})]})})}function eT(){let{getTriggerProps:e,manager:t}=d.b(),n=(0,a.wA)(),r=s.useCallback(async()=>{try{await y.Ay.foundry.install({autoUpdatePackages:!0},(0,v.Ay)()),await y.Ay.foundry.restart({},(0,v.Ay)()),n(_.F.enqueue({message:(0,x.t)("figmake.filesystem.file_header_menu.hard_refresh_complete_toast")}))}catch(e){console.error("Hard refresh error",e),n(_.F.enqueue({message:(0,x.t)("figmake.filesystem.file_header_menu.hard_refresh_error_toast"),error:!0}))}},[n]);return(0,i.jsxs)(d.bL,{manager:t,children:[(0,i.jsx)(c.d,{...e(),"aria-label":(0,x.t)("figmake.filesystem.file_header_menu.aria_label"),children:(0,i.jsx)(u.J,{})}),(0,i.jsx)(d.mc,{children:(0,i.jsx)(d.q7,{onClick:r,"data-tooltip":(0,x.t)("figmake.filesystem.file_header_menu.hard_refresh_tooltip"),children:(0,x.t)("figmake.filesystem.file_header_menu.hard_refresh")})})]})}},165749:(e,t,n)=>{n.d(t,{A:()=>i});class i{get current(){return{url:"/_sandbox"}}addPopStateListener(){}addRefreshListener(){}push(){}forward(){}back(){}refresh(){}}},728198:(e,t,n)=>{n.d(t,{A:()=>K});var i=n(104076),s=n(716976),a=n(237420),r=n(4921),l=n(420680),o=n(302727),d=n(452981),c=n(293422),u=n(523532),p=n(622820),m=n(167445),h=n(266808),f=n(980852),g=n(812714),x=n(795033),_=n(192075),y=n(366535),v=n(571430),b=n(772523),C=n(211862),j=n(944350),k=n(904017),w=n(295253),E=n(498726),T=n(737139),S=n(572427),I=n(103345),N=n(700126),A=n(581006),L=n(746332),M=n(776975),O=n(533144),R=n(617057),P=n(842771),D=n(705071),F=n(488419),z=n(185245);function B(e){return e?e?.isCodeInstance?e?.backingCodeComponent?.exportedFromCodeFile:e?.isCodeFile?e:e?.exportedFromCodeFile:null}function G({onScaleLinearly:e}){let[t]=(0,x.fp)(O.Y_);return(0,i.jsx)(r.f,{variant:"highlighted",checked:!t,onIcon:(0,i.jsx)(u.h,{}),offIcon:(0,i.jsx)(u.h,{}),"aria-label":(0,_.t)("sites.code_component.view_at_100"),htmlAttributes:{"data-tooltip":(0,_.t)("sites.code_component.view_at_100"),"data-tooltip-type":"text"},onChange:()=>e(!t)})}function U({codeSelectionToRender:e,sitesPreview:t}){let n=(0,N.l)();return(0,i.jsx)(F.l,{disabled:n,sitesPreview:t,showTooltipAbove:!1,codeInstanceGuid:e.codeInstanceNodeGuid})}function V(){let e=(0,f.getActiveTSSceneGraph)(),t=(0,M.cu)(),n=t[0]?e.get(t[0]):null,{handleHtmlToDesign:s,isProcessing:r,isEnabled:o}=(0,R.mP)(),d=(0,a.wA)(),c=C.q5()?.team??null,u=(0,k.S2)(),m=(0,k.YY)(u).unwrapOr(!1);return(0,i.jsx)(l.K,{"aria-label":(0,_.t)("figmake.m2d.paste_to_canvas_as_design_layers"),htmlAttributes:{"data-tooltip":(0,_.t)("figmake.m2d.paste_to_canvas_as_design_layers"),"data-tooltip-type":"text"},disabled:r||!o,onClick:()=>{if(m){d((0,y.to)({type:I.DV,data:{team:c,resource:E.Bi.MAKE_TO_DESIGN,currentPlan:v.F.Plan.STARTER,upsellPlan:v.F.Plan.PRO,editorType:j._Y.FIGMAKE,upsellSource:w.b.MAKE_TO_DESIGN_PAYWALL}}));return}s({target:"canvas",canvasNodeGuid:n?.guid})},children:(0,i.jsx)(p.X,{})})}function H({codeSelectionToRender:e,children:t}){let[n,a]=(0,x.fp)(A.TJ),r=(0,s.useCallback)(e=>{let t=(0,f.getActiveTSSceneGraph)().get(e),n=t?.exportedFromCodeFile;t&&n&&a(e=>({...e,[n.guid]:t.guid}))},[a]),l="instance"===e.type?B((0,f.getActiveTSSceneGraph)().get(e.codeInstanceNodeGuid)):B((0,f.getActiveTSSceneGraph)().get(e.codeBehaviorNodeGuid)),c=l?.guid??"",u=(0,P.H1)(l??null),p=u[0],m=n[c]??p?.localGuid;return(0,i.jsx)(T.Zk,{style:{paddingBottom:0,borderBottom:"none"},children:(0,i.jsx)(S.Wv,{titleTx:u.length>1?(0,i.jsxs)(o.Root,{value:m,onChange:e=>{e&&r(e)},children:[(0,i.jsx)(o.Trigger,{label:(0,i.jsx)(d.h,{children:(0,_.t)("sites.code_component.preview_legend")})}),(0,i.jsx)(o.Container,{children:u.map(e=>(0,i.jsx)(o.Option,{value:e.localGuid,children:e.name},e.localGuid))})]}):(0,i.jsx)(i.Fragment,{}),children:t})})}function K({codeSelectionToRender:e,onAddToCanvas:t,refresh:n,onScaleLinearly:a,sitesPreview:r}){let o=(0,f.getActiveTSSceneGraph)(),d=(0,M.cu)(),u=d[0]?o.get(d[0]):null,p=(0,P.wE)(u),y=(0,x.md)(O.ZY),v=!p||y,C=(0,x.md)(z.s0),[j,k]=(0,x.fp)(O.qQ),w=y&&(p||j),E=(0,s.useCallback)(()=>{u&&(0,L.Py)({node:u})},[u]),T=(0,s.useCallback)(()=>{!p&&j&&(b.tJ([j]),k(null)),h.Ez5?.codeSelection().showMainComponent.set(!1)},[p,j,k]),S=(0,g.kc)().code_layers_zoom_controls&&a,I=r&&"instance"===e.type&&v&&(0,g.kc)().code_layers_click_to_inspect,N="instance"===e.type&&!f.getActiveTSSceneGraph().get(e.codeInstanceNodeGuid)?.isLayerLikeCodeNode&&t,A=(0,g.kc)().bake_m2d&&"instance"===e.type;return(0,i.jsxs)(H,{codeSelectionToRender:e,children:[w&&C===h.Nfd.FILE&&(0,i.jsx)(c.$n,{variant:"secondary","aria-label":(0,_.t)("fullscreen_actions.return-to-instance"),onClick:T,children:(0,_.t)("fullscreen_actions.return-to-instance")}),!v&&C===h.Nfd.FILE&&(0,i.jsx)(c.$n,{variant:"secondary","aria-label":(0,_.t)("fullscreen_actions.edit-main-component"),onClick:E,children:(0,_.t)("fullscreen_actions.edit-main-component")}),N&&(0,i.jsx)(c.$n,{variant:"secondary","aria-label":(0,_.t)("sites.code_component.add_to_canvas"),onClick:t,children:(0,_.t)("sites.code_component.add_to_canvas")}),S&&(0,i.jsx)(G,{onScaleLinearly:a}),I&&(0,i.jsx)(U,{codeSelectionToRender:e,sitesPreview:r}),(0,i.jsx)(D.r,{openText:(0,_.t)("sites.code_component.drawer.open"),hideText:(0,_.t)("sites.code_component.drawer.hide")}),(0,i.jsx)(l.K,{"aria-label":(0,_.t)("sites.code_component.code_view_reload"),htmlAttributes:{"data-tooltip":(0,_.t)("sites.code_component.code_view_reload"),"data-tooltip-type":"text"},onClick:n,children:(0,i.jsx)(m.A,{})}),A&&(0,i.jsx)(V,{})]})}},90499:(e,t,n)=>{n.d(t,{o:()=>i});let i=(0,n(140948).bt)(e=>e.mirror.appModel.isReadOnly)},619511:(e,t,n)=>{n.d(t,{k:()=>r});var i=n(104076),s=n(511570),a=n.n(s);function r({children:e,wrapperClassName:t,isVisible:n}){return(0,i.jsx)("div",{className:a()(t,"focusable_hidden_button_wrapper--wrapper--w-n3a",{"focusable_hidden_button_wrapper--visible--3AzQL":n}),children:e})}},384658:(e,t,n)=>{n.d(t,{N:()=>l});var i=n(104076),s=n(716976),a=n(858959);let r="shimmer_text--container--hdMNz",l=(0,s.memo)(({children:e,duration:t=2,baseColor:n="#a1a1aa",shimmerColor:l="#000",spread:o=2,as:d="p",noWrap:c=!0})=>{let u=(0,s.useMemo)(()=>Math.min(e.length*o,100),[e,o]),p=`linear-gradient(
        90deg,
        transparent calc(50% - ${u}px),
        ${l} 50%,
        transparent calc(50% + ${u}px)
      ),
      linear-gradient(${n}, ${n})`,m=c?`${r} shimmer_text--noWrap--RtJ98`:r,h=(0,a.P)(d);return(0,i.jsx)(h,{className:m,style:{backgroundImage:p,width:"fit-content"},initial:{backgroundPosition:"100% center"},animate:{backgroundPosition:"0% center"},transition:{duration:t,repeat:1/0,ease:"linear"},children:e})})},36767:(e,t,n)=>{n.d(t,{e:()=>d,v:()=>c});var i=n(104076),s=n(716976);n(120440);var a=n(553065),r=n(754446),l=n(391145);let o={type:"SOLID",color:{r:1,g:1,b:1,a:1},opacity:1,blendMode:"NORMAL"};function d(e){let[t]=(0,r.lJ)("dividedSwatchColors");return(0,s.useMemo)(()=>(0,a.hS)(e)&&e&&e.color?[e.color]:Array.isArray(t)&&t.length>1?t:[{r:1,g:1,b:1,a:1}],[t,e])}function c({colors:e,paint:t,showTransparentBorder:n=!1,forceNonInteractive:s=!1}){if(!(e.length>1))return(0,i.jsx)(l.J,{...{0:{className:"x6jxa94 x1v9usgg x1cum3z5"},1:{className:"x6jxa94 x1v9usgg x1cum3z5 xmkeg23 x1y0btm7 xgejvvm"}}[!!n<<0],hideBorderShadow:n,paint:t??o,allowMouseDownPropagation:!0,forceNonInteractive:s});{let t=e[0],n=e.find(e=>e.r!==t.r||e.g!==t.g||e.b!==t.b)??t;return(0,i.jsxs)("div",{className:"x1n2onr6 x1kky2od xlup9mm",tabIndex:s?-1:void 0,children:[(0,i.jsx)("span",{className:"x10l6tqk x1kky2od xlup9mm xu96u03 x13vifvy x1f869rl",children:(0,i.jsx)(l.J,{className:"x6jxa94 x1v9usgg x1cum3z5",paint:{type:"SOLID",color:t,opacity:1,blendMode:"NORMAL"},allowMouseDownPropagation:!0,forceNonInteractive:s})}),(0,i.jsx)("span",{className:"x10l6tqk x1kky2od xlup9mm xu96u03 x13vifvy x103kmln",children:(0,i.jsx)(l.J,{className:"x6jxa94 x1v9usgg x1cum3z5",paint:{type:"SOLID",color:n,opacity:1,blendMode:"NORMAL"},allowMouseDownPropagation:!0,forceNonInteractive:s})})]})}}},635629:(e,t,n)=>{n.d(t,{y:()=>_});var i={};n.r(i),n.d(i,{baseIconButton:()=>f,highlighted:()=>h,icon:()=>x,input:()=>u,label:()=>p,primary:()=>m,srOnly:()=>c,toggleButton:()=>g});var s=n(104076),a=n(716976),r=n(554875),l=n(452981),o=n(511570),d=n.n(o);let c="toggle_button_32--srOnly--MJcgX",u="toggle_button_32--input--pQ88f",p="toggle_button_32--label--DiRj4",m="toggle_button_32--primary---O-Ty",h="toggle_button_32--highlighted--1lPJo",f="toggle_button_32--baseIconButton--eTRcM",g="toggle_button_32--toggleButton--xs7XD toggle_button_32--baseIconButton--eTRcM",x="toggle_button_32--icon--r-dy0",_=(0,a.forwardRef)(({onIcon:e,offIcon:t,"aria-label":n,variant:o="primary",htmlAttributes:m,...h},f)=>{let _=(0,a.useId)(),y=h.checked&&!h.mixed?e:t;return(0,s.jsxs)("span",{"data-disabled":!!h.disabled||void 0,className:g,children:[(0,s.jsx)(r.F,{className:d()(u,i[o]),id:_,htmlAttributes:m,...h,"data-tooltip":n,"data-tooltip-type":"text","data-tooltip-shortcut-key":h?.["data-tooltip-shortcut-key"]??m?.["data-tooltip-shortcut-key"],ref:f}),(0,s.jsxs)(l.J,{htmlFor:_,className:p,children:[(0,s.jsx)("span",{className:c,children:n}),(0,s.jsx)("span",{"aria-hidden":!0,className:x,children:y})]})]})});_.displayName="ToggleButton32"},344946:(e,t,n)=>{n.d(t,{F:()=>N});var i=n(104076),s=n(716976),a=n(419822),r=n(795033),l=n(120440),o=n(784220),d=n(858959),c=n(389006),u=n(359103),p=n(963433),m=n(127082),h=n(420680),f=n(392659),g=n(36758),x=n(236901),_=n(285466),y=n(988083),v=n(384658),b=n(192075),C=n(297174);function j({text:e,icon:t}){return(0,i.jsxs)("div",{className:"x78zum5 x1n0bwc9 x193iq5w x1q0g3np x6s0dn4",children:[(0,i.jsx)("div",{className:"x78zum5 x2lah0s",children:t}),(0,i.jsx)("span",{className:"x78zum5 x1iog12x x12lumcd xb3r6kr xlyipyv xuxw1ft",children:(0,i.jsx)(v.N,{children:e??""})})]})}var k=n(107799),w=n(24441);function E(){return(0,i.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none","aria-label":(0,b.t)("figmake.code_chat.live_dot_aria_label"),children:[(0,i.jsx)("path",{d:"M18 12C18 15.3137 15.3137 18 12 18C8.68629 18 6 15.3137 6 12C6 8.68629 8.68629 6 12 6C15.3137 6 18 8.68629 18 12Z",fill:"#14AE5C"}),(0,i.jsx)("path",{d:"M17 12C17 14.7614 14.7614 17 12 17C9.23858 17 7 14.7614 7 12C7 9.23858 9.23858 7 12 7C14.7614 7 17 9.23858 17 12Z",stroke:"white",strokeOpacity:"0.6",strokeWidth:"2"})]})}var T=n(242069);let S={artifactContainer:{k1xSpc:"x78zum5",kVAM5u:"x7z60cl",kaIpWk:"x9h44rk",kMzoRj:"xmkeg23",ksu8eU:"x1y0btm7",k8WAf4:"x1vvogim",kg3NbH:"xaope02",kLWn49:"x1o2sk6j",$$css:!0},inProgress:{kMwMTN:"x1akne3o",$$css:!0}};function I({children:e,isInProgress:t,isCurrentVersion:n}){let{artifactTypographyStyle:s,artifactActiveTypographyStyle:a}=(0,w.L)();return(0,i.jsx)("div",{"aria-current":n?"true":void 0,...l.Ay.props(S.artifactContainer,n?a:s,t?S.inProgress:void 0),children:e})}function N(e){let{chatMessagesNodeGuid:t,layerDisplayName:n,type:l}=e,w=(0,r.md)((0,C.l)(t)),{exchange:S}=(0,k.$W)(t),N=(0,m.Oc)(),A="progress"===e.type&&e.showCodeStreaming&&S?function(e){if(!(e&&e.messages.length>0))return;let t=e?.messages[e.messages.length-1];for(let e of t?.toolCalls??[]){let t=(0,T.m4)(e);if(t)return t}let n=(0,T.H5)(t?.textContent||""),i=e.fileUpdates[e.fileUpdates.length-1];return n.code?n.code:i?i.contents:void 0}(S):void 0,L="progress"===e.type?e.scrollToBottom:null;(0,s.useEffect)(()=>{A&&L&&L()},[A,L]);let M="code_version"===l&&e.isCurrentVersion,O="code_version"===l?e.codeVersionNumber:0,R="code_version"===l?e.versionTitle:void 0,P="code_version"===l?e.restoreVersion:void 0,D=s.useMemo(()=>"code_version"!==l?null:N&&R?(0,i.jsxs)("div",{className:"x78zum5 xdt5ytf xeuugli x845mor",children:[(0,i.jsx)("h3",{className:"x6xwguf xb3r6kr xlyipyv xuxw1ft","data-testid":`version-title-${O}`,children:R}),(0,i.jsx)("div",{className:"x1yuz8eb","data-testid":`version-number-${O}`,children:(0,b.t)("figmake.chat.artifact.version",{version:O})})]}):M?(0,b.t)("figmake.chat.artifact.latest_version"):(0,b.t)("figmake.chat.artifact.version",{version:O}),[l,M,R,O,N]),F=function(e,t){if(!e)return(0,i.jsx)("div",{className:"x78zum5 x1q0g3np x1n0bwc9 x193iq5w x6s0dn4",children:(0,i.jsx)(v.N,{children:(0,b.t)("figmake.chat.working")})});switch(e.type){case"toolCall":return(0,i.jsx)(j,{icon:function(e){switch(e){case"view_tool":return(0,i.jsx)(x.T,{});case"delete_tool":return(0,i.jsx)(g.i,{});case"file_search":return(0,i.jsx)(_.W,{});default:return null}}(e.toolName),text:function(e){let t=(0,C.N)(e);switch(e.toolName){case"view_tool":if(t)return(0,b.t)("figmake.tool_call.viewing",{file:t});break;case"write_tool":case"fast_apply_tool":case"edit_tool":case"insert_tool":if(t)return(0,b.t)("figmake.tool_call.writing",{file:t});break;case"think":break;case"delete_tool":if(t)return(0,b.t)("figmake.tool_call.deleting",{file:t});break;case"file_search":return(0,b.t)("figmake.tool_call.searching")}return(0,b.t)("figmake.chat.working")}(e)});case"code":return(0,i.jsx)(j,{icon:(0,i.jsx)(f.L,{}),text:(0,b.t)("figmake.tool_call.writing",{file:t??e.fullFilePath})});case"editedFiles":return(0,i.jsx)(j,{icon:(0,i.jsx)(f.L,{}),text:(0,b.t)("figmake.tool_call.editing",{file:e.files.join(", ")})});case"deletedFiles":return(0,i.jsx)(j,{icon:(0,i.jsx)(g.i,{}),text:(0,b.t)("figmake.tool_call.deleting",{file:e.files.join(", ")})});default:return(0,i.jsx)("div",{className:"x78zum5 x1q0g3np x1n0bwc9 x193iq5w x6s0dn4",children:(0,i.jsx)(v.N,{children:(0,b.t)("figmake.chat.working")})})}}(w,n),z=(0,C.N)(w),B="progress"!==l&&P&&P?(0,i.jsx)(h.K,{"aria-label":(0,b.t)("figmake.chat.artifact.restore"),"aria-description":(0,b.t)("figmake.chat.artifact.aria_restore_description",{version:O,title:R||""}),onClick:P,recordingKey:`figmake.version_history.restore_button.${O}`,children:(0,i.jsx)(y.H,{})}):null,G=(0,p.g7)()?(0,i.jsx)(u.iE,{asLargeVariant:!0,openInSameTab:!0}):(0,i.jsx)(E,{}),U="progress"===l?(0,i.jsx)(a.k,{}):M?G:B;return(0,i.jsx)(I,{isInProgress:"progress"===l,isCurrentVersion:M,children:(0,i.jsxs)("div",{className:"x78zum5 xdt5ytf xh8yej3",children:[(0,i.jsxs)("div",{className:"x78zum5 x1q0g3np x6s0dn4 x1qughib xh8yej3",children:[(0,i.jsx)("div",{className:"x78zum5 x845mor xb3r6kr xlyipyv xuxw1ft xeuugli",title:z??"",children:"progress"===l?F:D}),(0,i.jsx)("div",{className:"x78zum5 x6s0dn4 xet2fuk x2lah0s",children:U})]}),(0,i.jsx)(o.N,{children:!!A&&(0,i.jsxs)(d.P.div,{initial:{height:0,opacity:0},animate:{height:128,opacity:1},exit:{height:0,opacity:0},transition:{duration:.3,ease:"easeInOut"},className:"x78zum5 x1n2onr6 x47corl xdt5ytf x1cy8zhl xh8yej3 xb3r6kr",children:[(0,i.jsx)(d.P.div,{className:"x10l6tqk x13vifvy xu96u03 x3m8u43 x1vqgdyp x1vjfegm x1b0inr7"}),(0,i.jsx)(c.Or,{code:A,fileName:n??"",fullHeight:!0,maxHeight:"128px",onlyShowCode:!0})]})})]})})}},786519:(e,t,n)=>{n.d(t,{n:()=>s});var i=n(795033);let s=(0,n(985416).Wh)(()=>(0,i.eU)(null))},68902:(e,t,n)=>{n.d(t,{A4:()=>l,EO:()=>d,G6:()=>E,IN:()=>k,KU:()=>j,LR:()=>w,RN:()=>_,cV:()=>y,ck:()=>o,dB:()=>I,iw:()=>u,kU:()=>m,nJ:()=>T,rz:()=>C});var i=n(242069),s=n(57),a=n(795033),r=n(985416),l=(e=>(e.ALWAYS_ASK="always_ask",e.AUTO_RUN="auto_run",e.DISABLED="disabled",e))(l||{}),o=(e=>(e.LIST_MCP_CLIENTS="list_mcp_clients",e.INSPECT_MCP_CLIENT="add_mcp_client",e))(o||{});let d=(0,a.eU)({screen:"list_mcp_clients",selectedMcpServer:null,isVisible:!1}),c=(0,a.eU)({}),u=(0,a.eU)(e=>e(c),(e,t,n)=>{let i=e(c);if(Array.isArray(n))n.forEach(({toolCallId:e,toolResult:t})=>{t?i[e]=t:delete i[e]});else{let{toolCallId:e,toolResult:t}=n;t?i[e]=t:delete i[e]}t(c,i)}),p=(0,a.eU)(0),m=(0,a.eU)(e=>e(p)>0,(e,t,n)=>{let i=e(p);"start"===n?t(p,i+1):"end"===n&&t(p,Math.max(0,i-1))}),h="mcp-tool-preferences",f="mcp-server-preferences";function g(e){try{localStorage.setItem(f,JSON.stringify(e))}catch(e){console.warn("Failed to save MCP server preferences to localStorage:",e)}}let x=(0,a.eU)(function(){try{let e=localStorage.getItem(f);return e?s.rn.parse(JSON.parse(e)):{}}catch(e){return console.warn("Failed to parse MCP server preferences from localStorage:",e),localStorage.removeItem(f),{}}}()),_=(0,a.eU)(e=>e(x),(e,t,{serverId:n,subset:i})=>{let s=e(x),a=s[n]?.disabled===!0,r={...s};if(r[n]??={disabled:!1},i){if(a)return;let e=`${i}ToolsDisabled`;r[n][e]=!r[n][e]}else r[n].disabled=!r[n].disabled;t(x,r),g(r)});function y(e,t){let n={...a.zl.get(x)};delete n[t],a.zl.set(x,n),g(n);let i={...a.zl.get(b)};Object.keys(i).forEach(t=>{t.startsWith(`mcp__${e}_`)&&delete i[t]}),a.zl.set(b,i),v(i)}function v(e){try{localStorage.setItem(h,JSON.stringify(e))}catch(e){console.warn("Failed to save MCP tool preferences to localStorage:",e)}}let b=(0,a.eU)(function(){try{let e=localStorage.getItem(h);return e?s.Kf.parse(JSON.parse(e)):{}}catch(e){return console.warn("Failed to parse MCP tool preferences from localStorage:",e),localStorage.removeItem(h),{}}}());function C(e){let t=a.zl.get(x);if(t[e])return;let n={...t};n[e]={disabled:!1,writeToolsDisabled:!0},a.zl.set(x,n),g(n)}let j=(0,a.eU)(e=>e(b),(e,t,n)=>{let s=e(b),a=(0,i.YW)(n.serverName,n.toolName),r={...s},l=s[a]?.disabled===!0;switch(n.runSetting){case"auto_run":r[a]={disabled:!1,autoRun:!0};break;case"always_ask":n.readOnly&&l?delete r[a]:r[a]={disabled:!1,autoRun:!1};break;case"disabled":r[a]={disabled:!0}}t(b,r),v(r),n.trackPreferenceUpdate()});function k(e,t){try{let n=(0,i.YW)(e,t),s=a.zl.get(b);return s[n]?.autoRun===!0}catch{return!1}}let w=(0,a.eU)(e=>{let t=e(b),n={};for(let[e,i]of Object.entries(t))n[e]={disabled:i.disabled??!1,autoRun:i.autoRun};return{serverPreferences:e(x),toolPreferences:n}}),E=65,T=(0,r.Wh)(()=>(0,a.eU)(!1)),S=(0,a.eU)({}),I=(0,a.eU)(e=>e(S),(e,t,n)=>{let i={...e(S),[n]:!0};t(S,i)})},503208:(e,t,n)=>{n.d(t,{o:()=>i});let i=(0,n(252285).H)({codeSnapshotKey:null,files:{},isLoading:!1,error:!1,lastAttemptedKey:null})},462416:(e,t,n)=>{n.d(t,{ry:()=>r3});var i=n(104076),s=n(716976),a=n(237420),r=n(242069),l=n(323460),o=n(614641),d=n(542653),c=n(569989),u=n(999083),p=n(638004),m=n(420680),h=n(689161),f=n(171704),g=n(988083),x=n(80484),_=n(481535),y=n(347643);let v=(0,s.memo)(function(e){return(0,i.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,"data-fpl-icon-size":"24L",children:(0,i.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",d:"M11.268 4.865c1.082-1.153 2.836-1.154 3.917 0 .642.685.9 1.621.78 2.511a2.66 2.66 0 0 1 2.304.78l.05.053.034.034.05.055c1.031 1.158 1.014 2.989-.05 4.125l-5.67 6.048-.024.031a.21.21 0 0 0 .024.247l1.164 1.242a.62.62 0 0 1 0 .836.53.53 0 0 1-.784 0L11.9 19.585a1.445 1.445 0 0 1 0-1.95l5.67-6.048a1.86 1.86 0 0 0 0-2.508l-.033-.034-.03-.032a1.59 1.59 0 0 0-2.32.032l-4.735 5.05-.02.021a.53.53 0 0 1-.764-.021.62.62 0 0 1 0-.836l4.734-5.05a1.86 1.86 0 0 0 0-2.508 1.59 1.59 0 0 0-2.35 0l-6.27 6.689-.021.02a.53.53 0 0 1-.763-.02.62.62 0 0 1 0-.836zm1.567 1.672a.53.53 0 0 1 .783 0 .62.62 0 0 1 0 .836l-4.636 4.945a1.86 1.86 0 0 0 0 2.508 1.59 1.59 0 0 0 2.351 0l4.637-4.945a.53.53 0 0 1 .783 0 .62.62 0 0 1 0 .836l-4.637 4.945c-1.065 1.136-2.78 1.154-3.866.054l-.052-.054c-1.082-1.154-1.082-3.026 0-4.18z"})})});var b=n(437481),C=n(225654),j=n(266808),k=n(170627),w=n(795033),E=n(120440),T=n(408825),S=n(784220),I=n(858959),N=n(883765),A=n(409019),L=n(958855),M=n(550209),O=n(225125),R=n(997477),P=n(390036),D=n(876621),F=n(192075),z=n(315361),B=n(366535),G=n(74620),U=n(211862),V=n(915013),H=n(298056),K=n(620720),W=n(141330),q=n(577021),X=n(577932),Y=n(581006),Z=n(107799),J=n(174026),Q=n(108025),$=n(533144),ee=n(4154),et=n(628384),en=n(878697),ei=n(983685),es=n(351394),ea=n(686586),er=n(789596),el=n(488419),eo=n(4921),ed=n(911259),ec=n(635629),eu=n(697360);function ep({disabled:e,sitesPreview:t,asLargeVariant:n,onboardingKey:a,showTooltipAbove:r}){let{enabled:l}=(0,eu.lA)(),o=s.useCallback(()=>{t.pointAndEditControl({type:"enable",enabled:!l})},[t,l]),d=n?ec.y:eo.f,c=(0,i.jsx)(ed.Z,{});return(0,i.jsx)(d,{"aria-label":(0,F.t)("figmake.chat.click_to_inspect.label"),checked:l,disabled:e,htmlAttributes:{"data-onboarding-key":a,"data-tooltip-show-above":r||void 0,"data-tooltip-show-below":!r||void 0},offIcon:c,onChange:o,onIcon:c,variant:"highlighted"})}var em=n(631571),eh=n(963433),ef=n(127082),eg=n(68902),ex=n(929302),e_=n(950187),ey=n(268389),ev=n(980852),eb=n(959834),eC=n(946847),ej=n(233420),ek=n(798811),ew=n(38119),eE=n(266230),eT=n(157067),eS=n(231918);let eI=(0,eb.Ju)(function(e){let t=ex.hS({open:e.open,onClose:e.onClose}),[,n]=(0,w.fp)(ej.YH);s.useEffect(()=>{let e={name:eC.Sn.CHAT_ASSET_SEARCH,module:(0,i.jsx)(ew.z6,{})};return n(t=>[e,...t]),()=>{n(e=>e.slice(1))}},[n]);let{claimAPendingAttachmentOrMakeOne:a,createPendingAttachmentsForNodes:r,setAttachments:l}=(0,eE._9)(e.chatMessagesNodeGuid||""),{addCommunityAttribution:o}=(0,eT.Pe)(),d=s.useCallback((e,t,n)=>{let i=(0,ev.getActiveTSSceneGraph)(),s=e[0];if(!s)return;let o=i.get(s);if(!o)return;let d=i.getInternalCanvas();d&&(k.Hq.system("figmake-inserted-component",()=>{d.appendChild(o)}),(0,eS.E)([s],i,l,()=>{},()=>{},a,void 0,r))},[l,a,r]),c=s.useCallback((e,t)=>{o(t,{hubFileId:e.hub_file_id.toString(),creatorName:e.editor_name,hubFileName:e.file_name})},[o]);return(0,i.jsx)(e_.bL,{manager:t,width:"fit-content",children:(0,i.jsxs)(ey.vo,{children:[(0,i.jsx)(ey.Y9,{children:(0,i.jsx)(ey.hE,{children:(0,F.t)("sites.panel.make.attach_design")})}),(0,i.jsx)(ey.nB,{padding:0,children:(0,i.jsx)(ek.s3,{name:eC.Sn.CHAT_ASSET_SEARCH,recordingKey:"chatAssetSearch",children:(0,i.jsx)(ew.z6,{isFigmake:!0,isVisualSearch:!1,closeOnEscape:!0,assetInsertionCallback:d,hubFileFragmentInsertionCallback:c,keyboardNavigationProviderOptions:{syncRealFocusToFauxFocus:!0}})})})]})})},"ChatAssetSearchModal",eb.ZU.YES);var eN=n(663166),eA=n(475477),eL=n(263188),eM=n(821655),eO=n(369729),eR=n(419822),eP=n(293422),eD=n(684742),eF=n(958188),ez=n(318525),eB=n(247172);let eG=(0,s.memo)(function(e){return(0,i.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,"data-fpl-icon-size":"24",children:(0,i.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",fillRule:"evenodd",d:"m16.7 5.699.315-1.26c.126-.505.844-.505.97 0L18.3 5.7l1.26.315c.505.126.505.844 0 .97L18.3 7.3l-.315 1.26c-.126.505-.844.505-.97 0L16.7 7.3l-1.26-.315c-.505-.126-.505-.844 0-.97zM13 6a.5.5 0 0 1 0 1H7.5a.5.5 0 0 0-.5.5v9a.5.5 0 0 0 .5.5h9a.5.5 0 0 0 .5-.5V11a.5.5 0 0 1 1 0v5.5a1.5 1.5 0 0 1-1.5 1.5h-9A1.5 1.5 0 0 1 6 16.5v-9A1.5 1.5 0 0 1 7.5 6zm-2.146 4.146a.5.5 0 0 1 0 .708L9.707 12l1.147 1.146a.5.5 0 0 1-.708.708l-1.5-1.5a.5.5 0 0 1 0-.708l1.5-1.5a.5.5 0 0 1 .708 0m2.292.708a.5.5 0 0 1 .708-.708l1.5 1.5a.5.5 0 0 1 0 .708l-1.5 1.5a.5.5 0 0 1-.708-.708L14.293 12z",clipRule:"evenodd"})})});var eU=n(217380),eV=n(350102),eH=n(890373),eK=n(812714),eW=n(95046),eq=n(906990),eX=n(219199),eY=n(653899),eZ=n(328341),eJ=n(755444),eQ=n(816565),e$=n(352630),e0=n(259161),e1=n(502907),e2=n(260745),e3=n(443192),e5=n(111297),e4=n(551037),e6=n(863154),e7=n(568156),e8=n(174730),e9=n(248043),te=n(944350),tt=n(904017),tn=n(382137),ti=n(163018),ts=n(544107),ta=n(349311),tr=n(578420),tl=n(293172),to=n(312071),td=n(199062),tc=n(842771),tu=n(580276),tp=n(17933),tm=n(180610),th=n(142914),tf=n(662376);let tg={chatBoxMessageRow:{kaIpWk:"x9h44rk",k1K539:"x38tqe7",kLKAdn:"x1y1aw1k",kg3NbH:"xdqyycr",kGO01o:"x1s51fez",kVAEAm:"x1n2onr6",kY2c9j:"x8knxv4",$$css:!0},chatBoxMessageRowPrimary:{kWkggS:"xu5wzci",kMwMTN:"x1tk3asg",k63SB2:"x1s688f",$$css:!0},chatBoxMessageRowError:{kWkggS:"x3yuajn",kMwMTN:"x172n1ly",$$css:!0},chatBoxMessageRowWarning:{kWkggS:"x1mt81i5",kMwMTN:"x12fzf0q",$$css:!0},chatBoxMessageRowCommunity:{kWkggS:"x1v8gsql",kMwMTN:"x1akne3o",$$css:!0},chatBoxMessageRowInfo:{kWkggS:"x1yjdb4r",kMzoRj:"xmkeg23",ksu8eU:"x1y0btm7",kVAM5u:"x7z60cl",kMwMTN:"x1akne3o",$$css:!0},chatBoxMessageRowWithClose:{kpe85a:"x1m2p0i2",$$css:!0}};function tx({children:e,secondaryContent:t,variant:n,onClose:s}){return(0,i.jsxs)("div",{...E.Ay.props(tg.chatBoxMessageRow,"primary"===n&&tg.chatBoxMessageRowPrimary,"error"===n&&tg.chatBoxMessageRowError,"warning"===n&&tg.chatBoxMessageRowWarning,"community"===n&&tg.chatBoxMessageRowCommunity,"info"===n&&tg.chatBoxMessageRowInfo,s&&tg.chatBoxMessageRowWithClose),children:[(0,i.jsxs)("div",{className:"x6s0dn4 x78zum5 x1q0g3np x1qughib",children:[e,s&&(0,i.jsx)("div",{className:"x10l6tqk xclnmbr",children:(0,i.jsx)(m.K,{onClick:s,"aria-label":(0,F.t)("living_designs.chat.errors.close"),children:(0,i.jsx)(tf.A,{})})})]}),t]})}var t_=n(622018),ty=n(32404),tv=n(836543);function tb(){let e=(0,ty.RK)(),t=e?.name??"",{isConnectedNonOwner:n}=(0,ty.zA)(),[a,r]=s.useState(!1),{getTriggerProps:l,getContainerProps:o,getArrowProps:d}=tp.fP({isOpen:a,onOpenChange:r,type:"dialog",openOnHover:!0,placement:"top"}),c=(0,w.Xr)(tl.Xl),u=(0,w.md)(tl.Xl),p=(0,w.md)(tl.GV),m=(0,tv.A)();return((0,eY.h)(()=>{p&&m({showVisualBells:!1})}),p||!u)?null:(0,i.jsx)(tx,{variant:"warning",onClose:()=>c(!1),children:(0,i.jsxs)("div",{className:"x78zum5 x1q0g3np x1qughib x6s0dn4 xh8yej3","data-testid":"supabase-deploy-nudge",children:[(0,i.jsxs)("div",{className:"x78zum5 x1q0g3np x167g77z xkh2ocl x6s0dn4",children:[(0,i.jsx)("div",{className:"x1gxdvn5",children:(0,i.jsx)(tm.n,{})}),(0,i.jsxs)("div",{className:"x78zum5 xdt5ytf",children:[(0,i.jsx)("p",{className:"xxrns5j x1q8tae1 x1vg90ec x1eab18d x1yyillh",children:(0,F.t)("figmake.deploy_nudge.init.title")}),(0,i.jsx)("p",{className:"xrlp15q x1nmd3yn xm735u9 xkbmbem x3wk4up",children:(0,F.t)("figmake.deploy_nudge.init.subtitle")})]})]}),(0,i.jsxs)(tp.mc,{...o({style:{boxShadow:"var(--elevation-500-modal-window)",borderRadius:"var(--radius-large, 0.8125rem)",padding:"4px",background:"var(--color-bg)",width:"240px"}}),children:[(0,i.jsx)(tp.i3,{...d()}),(0,i.jsx)("div",{className:"x78zum5 xkh2ocl xz9dl7a xsag5q8 xnm25rq",children:(0,i.jsx)("p",{className:"xxrns5j x1q8tae1 x1vg90ec x1eab18d x1yyillh",children:(0,F.t)("figmake.deploy_nudge.popover.title")})}),(0,i.jsx)("div",{className:"x178xt8z x13fuv20 x16ufvko xh8yej3"}),(0,i.jsxs)("div",{className:"x78zum5 xdt5ytf xkh2ocl x1n565qt x15gqxvk x1l90r2v xpymby5 x1v2ro7d x1cy8zhl",children:[(0,i.jsx)("p",{className:"xrlp15q x1nmd3yn xm735u9 xkbmbem x3wk4up",children:(0,F.t)("figmake.deploy_nudge.popover.subtitle")}),(0,i.jsxs)("div",{className:"x78zum5 x1q0g3np x167g77z",children:[(0,i.jsx)(t_.ls,{size:th.Pf.LARGE}),(0,i.jsxs)("div",{className:"x78zum5 xdt5ytf x1nhvcw1",children:[(0,i.jsx)("p",{className:"xxrns5j x1q8tae1 x1vg90ec x1eab18d x1yyillh",children:t}),(0,i.jsx)("p",{className:"xrlp15q x1nmd3yn xm735u9 xkbmbem x3wk4up x1n0bwc9",children:(0,F.t)("figmake.deploy_nudge.popover.user_avatar.subtitle")})]}),(0,i.jsx)("div",{})]})]})]}),(0,i.jsx)(eP.$n,{variant:"secondary",disabled:n,onClick:()=>m({showVisualBells:!0}),...n?l({onClick:()=>m({showVisualBells:!0})}):{},children:(0,F.t)("figmake.settings.connected_project.deploy_button")})]})})}var tC=n(588961),tj=n(954700),tk=n(635533),tw=n(816689),tE=n(988543),tT=n(388054),tS=n(227601),tI=n(546258),tN=n(945437),tA=n(419750),tL=n(387724),tM=n(29611),tO=n(728145),tR=n(91651),tP=n(292993),tD=n(308709),tF=n(330163),tz=n(999692),tB=n(977122),tG=n(836736),tU=n(854064);let tV=(0,s.memo)(function(e){return(0,i.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,"data-fpl-icon-size":"24L",children:(0,i.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",fillRule:"evenodd",d:"M5 5h9v4h-4a1 1 0 0 0-1 1v4H5zm4 10H5a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h9a1 1 0 0 1 1 1v4h4a1 1 0 0 1 1 1v9a1 1 0 0 1-1 1h-9a1 1 0 0 1-1-1zm6-5h4v9h-9v-4h4a1 1 0 0 0 1-1zm-1 0v4h-4v-4z",clipRule:"evenodd"})})});function tH(e){switch(e){case"FRAME":default:return tO.v;case"GROUP":return tR.h;case"RECTANGLE":case"ROUNDED_RECTANGLE":return tP.n;case"TEXT":return tS.B;case"SYMBOL":case"INSTANCE":return tD.D;case"VECTOR":return tF.b;case"LINE":return tz.W;case"ELLIPSE":return tB.m;case"REGULAR_POLYGON":return tG.V;case"STAR":return tU.F;case"BOOLEAN_OPERATION":return tV;case"SECTION":return tM.P}}let tK={elementAttachment:{k1xSpc:"x78zum5",kXwgrk:"x1q0g3np",kjj79g:"x1qughib",kGNEyG:"x6s0dn4",koQZXg:"xq1n1xh",keoZOQ:"x14vqqas",kOIVth:"x1jnr06f",kaIpWk:"x12oqio5",kzqmXN:"xeq5yr9",ks0D6T:"x16q51m2",$$css:!0},elementPrompt:{kWkggS:"x1v8gsql",kMzoRj:"xmkeg23",ksu8eU:"x1y0btm7",kVAM5u:"x7z60cl",kMwMTN:"x1akne3o",$$css:!0},elementChat:{kogj98:"x1ghz6dp",koQZXg:null,keoZOQ:null,kpe85a:"xy13l1i",kWkggS:"xcr9a89",kMwMTN:"x1quhyk7",$$css:!0},elementPromptWithoutRemove:{kpe85a:"xy13l1i",$$css:!0}};function tW({icon:e,label:t,variant:n="prompt",onRemove:s}){return(0,i.jsxs)("div",{...E.Ay.props(tK.elementAttachment,"prompt"===n?[tK.elementPrompt,!s&&tK.elementPromptWithoutRemove]:tK.elementChat),children:[(0,i.jsx)("div",{children:e}),(0,i.jsx)("div",{className:"xb3r6kr xlyipyv xuxw1ft xazcve0",children:t}),"prompt"===n&&s?(0,i.jsx)(m.K,{"aria-label":(0,F.t)("figmake.chat.click_to_inspect.remove"),onClick:s,children:(0,i.jsx)(tw.f,{className:"xmauxvm"})}):null]})}function tq({tagName:e,variant:t="prompt",iconType:n,onRemove:s}){let a="component"===n?tE.P:"library"===n?tT.e:tX(e,n);return(0,i.jsx)(tW,{icon:(0,i.jsx)(a,{...{0:{className:"x1aue78i"},1:{className:"xmauxvm"}}[!("prompt"!==t)<<0]}),label:e,variant:t,onRemove:s})}let tX=(e,t)=>"library"===t?tT.e:"component"===t?tE.P:tY(e),tY=e=>{switch(e.toLocaleLowerCase()){case"p":case"span":case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":case"label":case"strong":case"em":case"b":case"i":return tS.B;case"a":return tI.W;case"img":case"video":return tN.T;case"li":case"ul":return tA.Z;case"ol":return tL.p;default:return tM.P}};function tZ({nodes:e,variant:t="prompt",iconType:n,onRemove:s}){if(0===e.length||!e[0])return null;let a=e[0],r="component"===n?tE.P:tH(a.type),l=e.length>1?(0,F.t)("ai_assistant.selected_layers_count",{count:e.length}):a.name;return(0,i.jsx)(tW,{icon:(0,i.jsx)(r,{...{0:{className:"x1aue78i"},1:{className:"xmauxvm"}}[!("prompt"!==t)<<0]}),label:l,variant:t,onRemove:s})}var tJ=n(911374),tQ=n(49795),t$=n(951002),t0=n(636420),t1=n(948843),t2=n(350205),t3=n(276800);function t5({text:e,onEditStart:t,onSaveEdits:n,isEditing:a,isReadOnly:r,status:l}){let[o,d]=s.useState(e),c=s.useRef(null),u=()=>{n(o.trim())};return s.useEffect(()=>{a&&c.current&&(d(e),c.current.focus(),c.current.setSelectionRange(e.length,e.length))},[a,e]),(0,i.jsx)("div",{className:"x98rzlu x78zum5 x6s0dn4",children:a?(0,i.jsx)(t0.W,{className:"xrlp15q x4z9k3i xm735u9 x1fc57z9 x3wk4up x1n0bwc9 xh8yej3 x18s2yiw xc342km xng3xce xjbqb8w x1717udv x16dsc37 x1ed109x x9f619 x10wlt62",rows:1,value:o,"aria-label":(0,F.t)("figmake.chat.new_todo_input"),ref:c,onChange:e=>d(e),expandable:!0,htmlAttributes:{onKeyDown:e=>{("Enter"===e.key||"Escape"===e.key)&&(e.preventDefault(),u())},onBlur:u}}):(0,i.jsx)(eD.E,{className:"x98rzlu x1ed109x",onClick:r?void 0:()=>t(),children:(0,i.jsx)("span",{...{0:{className:"xrlp15q x4z9k3i xm735u9 x1fc57z9 x3wk4up x1n0bwc9 xh8yej3 x13faqbe x126k92a x1mzt3pk x1lliihq xamitd3"},2:{className:"xrlp15q x4z9k3i xm735u9 x1fc57z9 x3wk4up xh8yej3 x13faqbe x126k92a x1mzt3pk x1lliihq xamitd3 x1akne3o"},1:{className:"xrlp15q x4z9k3i xm735u9 x1fc57z9 x3wk4up x1n0bwc9 xh8yej3 x13faqbe x126k92a x1mzt3pk x1lliihq xamitd3 xmqliwb x11dwbv0"},3:{className:"xrlp15q x4z9k3i xm735u9 x1fc57z9 x3wk4up xh8yej3 x13faqbe x126k92a x1mzt3pk x1lliihq xamitd3 x1akne3o xmqliwb x11dwbv0"}}[!("in_progress"!==l)<<1|!("done"!==l)<<0],children:e})})})}function t4({icon:e,circleStyle:t}){return(0,i.jsxs)("div",{className:"x1n2onr6 x78zum5 x6s0dn4 xl56j7k xqcrz7y xvy4d1p xxk0z11",children:[(0,i.jsx)("div",{...E.Ay.props(ne.todoCircle,t)}),e]})}function t6({status:e}){switch(e){case"todo":return(0,i.jsx)(t4,{});case"in_progress":return(0,i.jsx)(t4,{circleStyle:ne.todoCircleInProgress,icon:(0,i.jsx)(t1.a,{className:"x10l6tqk xsmyaan x1kpxq89"})});case"done":return(0,i.jsx)(t4,{icon:(0,i.jsx)(t2.l,{className:"x10l6tqk xsmyaan x1kpxq89 xmauxvm"})});default:(0,t$.xb)(e)}}function t7({todo:e,onEditStart:t,onSaveEdits:n,onDelete:a,isEditing:r,isReadOnly:l}){let[o,d]=s.useState(!1);return(0,i.jsxs)("div",{className:"x78zum5 x1n2onr6 x1q0g3np xl56j7k xkh2ocl x6s0dn4 x1nfngrj xjbqb8w xv2f06h x19y5rnk",onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),children:[(0,i.jsx)(t6,{status:e.status}),(0,i.jsx)(t5,{text:e.content,onEditStart:()=>t(e.id),onSaveEdits:t=>n(e.id,t),isEditing:r,isReadOnly:l,status:e.status},`${e.id}-editable-text`),!l&&!r&&(0,i.jsx)("div",{...{0:{className:"xg01cxk x5yr21d x10l6tqk x3m8u43 x1useyqa x78zum5 x1cy8zhl x13a6bvl x10pwc4n"},1:{className:"x5yr21d x10l6tqk x3m8u43 x1useyqa x78zum5 x1cy8zhl x13a6bvl x10pwc4n x1hc1fzr"}}[!!o<<0],children:(0,i.jsx)(eD.E,{className:"x78zum5 x6s0dn4 xl56j7k x1ypdohk xc342km xng3xce xjbqb8w x1717udv x10e2c7l",onClick:()=>a(e.id),"aria-label":(0,F.t)("figmake.chat.delete_todo_button"),"data-tooltip-type":ta.Ib.TEXT,"data-tooltip":(0,F.t)("figmake.chat.delete_todo_button"),"data-tooltip-hide-immediately":!0,children:(0,i.jsx)(tf.A,{})})})]})}function t8({todos:e,onEditStart:t,onSaveEdits:n,onDelete:s,isReadOnly:a,editingTodoId:r}){let l=(0,i.jsx)(i.Fragment,{children:e.map(e=>(0,i.jsx)(t7,{todo:e,onEditStart:t,onSaveEdits:n,onDelete:s,isReadOnly:a,isEditing:!!r&&r===e.id},e.id))});return(0,i.jsx)("div",{className:"x78zum5 xdt5ytf xg2d0mh xkh2ocl",children:l})}function t9({todos:e}){return(0,i.jsx)(t8,{todos:e,onEditStart:t3.lQ,onSaveEdits:t3.lQ,onDelete:t3.lQ,isReadOnly:!0,editingTodoId:null})}let ne={todoCircle:{kVAEAm:"x10l6tqk",kzqmXN:"x1kky2od",kZKoxP:"xlup9mm",kaIpWk:"x16rqkct",krdFHd:null,kfmiAY:null,kVL7Gh:null,kT0f0o:null,kIxVMA:null,ksF3WI:null,kqGeR4:null,kYm2EN:null,kMzoRj:"xmkeg23",kjGldf:null,k2ei4v:null,kZ1KPB:null,ke9TFa:null,kWqL5O:null,kLoX6v:null,kEafiO:null,kt9PQ7:null,kVAM5u:"x1dzeurx",kzOINU:null,kGJrpR:null,kaZRDh:null,kBCPoo:null,k26BEO:null,k5QoK5:null,kLZC3w:null,kL6WhQ:null,ksu8eU:"x1y0btm7",kJRH4f:null,kVhnKS:null,k4WBpm:null,k8ry5P:null,kSWEuD:null,kDUl1X:null,kPef9Z:null,kfdmCh:null,kB7OPa:"x9f619",$$css:!0},todoCircleInProgress:{kVAM5u:"x110w64q",kzOINU:null,kGJrpR:null,kaZRDh:null,kBCPoo:null,k26BEO:null,k5QoK5:null,kLZC3w:null,kL6WhQ:null,$$css:!0}};function nt({completedTodoCount:e,totalTodoCount:t,isExpanded:n,onToggleExpand:s}){return(0,i.jsxs)("div",{className:"x78zum5 x1q0g3np x6s0dn4 x1qughib xh8yej3",children:[(0,i.jsxs)("div",{className:"x78zum5 x1q0g3np x6s0dn4 x1nfngrj",children:[(0,i.jsx)("div",{className:"x78zum5 xl56j7k x6s0dn4",children:(0,i.jsx)(tA.Z,{})}),(0,i.jsxs)("p",{className:"xuzfeq1 x8yk33q x1e00guj x18zpg43 x22v61l",children:[(0,F.t)("figmake.scratchpad.header_title")," \xb7"," ",(0,i.jsx)("span",{className:"xuzfeq1 x8yk33q x1e00guj x18zpg43 x22v61l x1n0bwc9",children:(0,F.t)("figmake.scratchpad.header_todo_count",{completedTodoCount:e.toString(),totalTodoCount:t.toString()})})]})]}),(0,i.jsx)("div",{className:"x78zum5 x1q0g3np x6s0dn4 x1nfngrj",children:(0,i.jsx)(m.K,{variant:"ghost","aria-label":(0,F.t)("figmake.scratchpad.toggle_expand_button"),onClick:s,children:n?(0,i.jsx)(tJ.k,{}):(0,i.jsx)(tQ.l,{})})})]})}function nn({todos:e}){let[t,n]=(0,s.useState)(!1),a=(0,s.useCallback)(()=>{n(!t)},[t]),r=e.filter(e=>"done"===e.status).length;return(0,i.jsx)(tx,{variant:"info",children:(0,i.jsxs)("div",{className:"x78zum5 xdt5ytf xkh2ocl xh8yej3 x883omv",children:[(0,i.jsx)(nt,{completedTodoCount:r,totalTodoCount:e.length,isExpanded:t,onToggleExpand:a}),(0,i.jsx)(S.N,{initial:!1,children:t&&(0,i.jsx)(I.P.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.15,ease:"easeInOut"},className:"x78zum5 xkh2ocl xm4efwp xb3r6kr",children:(0,i.jsx)(t9,{todos:e})})})]})})}var ni=n(468855),ns=n(252285),na=n(389006),nr=n(702319),nl=n(612691);let no="IN PROGRESS: ",nd=e=>{let t=e.split("\n"),n=[],i=1;for(let e of t){let t=e.trim().match(/^[-*+]\s*\[(.)\]\s*(.+)$/);if(t&&t[1]&&t[2]){let e;let s=t[1].toLowerCase(),a=t[2].trim();"x"===s?(a.startsWith(no)&&(a=a.substring(no.length)),e="done"):"-"===s?e="in_progress":a.startsWith(no)?(e="in_progress",a=a.substring(no.length)):e="todo",n.push({id:String(i++),status:e,content:a})}}return n};function nc(e,t){try{let n="string"==typeof t?JSON.parse(t):t,i=e.safeParse(n);return i.success?i.data:null}catch(e){return console.error("Failed to parse JSON with schema:",e),null}}let nu=(0,w.eU)([]),np=(0,ns.H)(!1),nm=(0,w.eU)(new Set),nh=(0,w.eU)(null,(e,t,n)=>{t(np(n),!0),t(nm,e=>new Set([...e,n]))});var nf=n(622107),ng=n(872966),nx=n(51656),n_=n(807471),ny=n(190028),nv=n(529186),nb=n(590662);let nC="dismissed_chat_soft_limit_banner";var nj=n(447556),nk=n(699374),nw=n(787692),nE=n(436539),nT=n(965883),nS=n(754038),nI=n(208882),nN=n(350819),nA=n(944520),nL=n(11395),nM=n(201482),nO=n(343398),nR=n(619794);function nP(){let e=(0,nO.Y9)((0,F.t)("auth.welcome-to-figma")),t=(0,a.wA)();return(0,i.jsx)(e5.fu,{name:"Logged Out File Chatbox Banner",children:(0,i.jsxs)("div",{className:"x9f619 x78zum5 x1y1aw1k xnuq7ks x18d9i69 xnm25rq x9a3u73 x1cy8zhl x1mxnbhz x131gfan x1mgsydn x167g77z",children:[(0,i.jsx)("div",{className:"x1tk3asg x1g2dr8m xiqqdae x1j61x8r xkezfkh x14kxzw3 xqp8s7e x78zum5 x6s0dn4 xxk0z11 x1iyjqo2 xeuugli",children:(0,i.jsx)("span",{className:"xb3r6kr xuxw1ft xlyipyv",children:(0,F.t)("auth.sign_up_to_use_figma_rev")})}),(0,i.jsxs)("div",{className:"xeq5yr9 x78zum5 x13a6bvl x167g77z x3psx0u",children:[(0,i.jsx)(eD.E,{onClick:()=>{(0,nL.UK)("SIGN_UP_BUTTON_BANNER"),e({origin:nS.ty.FIGMA_REV_LOGGED_OUT_FOOTER,formState:nN.qB.SIGN_UP})},className:"xxk0z11 x16v0e3u xf67zum x19y5rnk x1akne3o x2b8uid xeq5yr9 xclx6tv xiqqdae x1j61x8r xkezfkh x14kxzw3 xqp8s7e x2lah0s",children:(0,F.t)("auth.sign_up")}),(0,i.jsx)(nM.M,{onClick:()=>{(0,nL.UK)("GOOGLE_SSO_BUTTON"),(0,nS.Rm)({dispatch:t,origin:nS.ty.FIGMA_REV_LOGGED_OUT_FOOTER_WITH_GOOGLE,redirectUrl:eX.Ay.location.pathname}).then(e=>{"login"===e.type&&t(nI.My({userId:e.user.id}))},e=>{(0,nA.g)("google_signup_error",nS.ty.FIGMA_REV_LOGGED_OUT_FOOTER_WITH_GOOGLE,{error:e.message}),(0,nl.z)("ff_show_auth_modal_on_google_sso_error")&&(0,nS.Y2)({dispatch:t,origin:nS.ty.FIGMA_REV_LOGGED_OUT_FOOTER_WITH_GOOGLE,message:e.message,redirectUrl:eX.Ay.location.pathname,errorType:e.errorType})})}})]}),(0,i.jsx)(nR.P,{origin:nS.DT.LOGGED_OUT_FILE,overrideUseFedCMPrompt:!1})]})})}var nD=n(210028),nF=n(566303);let nz={RIGHT:8,LEFT:4,GAP:2},nB={sendButton:{kaIpWk:"x1xwekrv",kZKoxP:"xlrawln",kmVPX3:"x10db7i2",kE3dHu:null,kpe85a:null,kLKAdn:null,kGO01o:null,kjj79g:"xlqzeqv",kGNEyG:"x6s0dn4",k1xSpc:"x78zum5",kmuXW:"x2lah0s",$$css:!0},sendButtonEnabled:{kWkggS:"xu5wzci",$$css:!0},sendButtonDisabled:{kWkggS:"xgbcquw",$$css:!0},stopButton:{k1xSpc:"x78zum5",kZKoxP:"xlrawln",kLKAdn:"xexx8yu",kpe85a:"xy13l1i",kGO01o:"x18d9i69",kE3dHu:"x6wrskw",kGNEyG:"x6s0dn4",kC7eKd:"xsqpjig",kaIpWk:"x1xwekrv",kOIVth:"x195vfkc",$$css:!0},stopButtonIconOnly:{kaIpWk:"x1xwekrv",kZKoxP:"xlrawln",kmVPX3:"x10db7i2",kE3dHu:null,kpe85a:null,kLKAdn:null,kGO01o:null,kGNEyG:"x6s0dn4",k1xSpc:"x78zum5",kC7eKd:"xsqpjig",$$css:!0}};function nG({children:e}){return(0,i.jsx)("div",{className:"x78zum5 xdt5ytf x2lah0s xr9ek0c x1o6q14k x1yztbdb xq1n1xh x7wzq59 x1ey2m1c","data-onboarding-key":er.HB,children:e})}function nU(){return(0,i.jsx)(eA.N,{href:"https://creativecommons.org/licenses/by/4.0/",newTab:!0,children:(0,F.tx)("design_systems.preset_libraries.tooltip.figma_license_link")})}function nV({communityAttributions:e,onClose:t}){if(e.length<=0||e.length>3)return null;let n=e.map(e=>(0,i.jsx)(e0.Ph,{newTab:!0,href:(0,e9.X$)(e.hubFileId),trusted:!0,children:(0,P.EJ)(e.hubFileName,30)},e.hubFileId));return(0,i.jsx)(tx,{variant:"community",onClose:t,children:(0,i.jsxs)("div",{className:"x78zum5 x1q0g3np x17d4w8g",children:[(0,i.jsx)("div",{className:"x2lah0s",children:(0,i.jsx)(eF.o,{})}),(0,i.jsx)("div",{children:1===e.length?(0,F.tx)("figmake.chat.community_attribution.attributions_one",{hubFileLink:n[0],creatorName:e[0].creatorName,licenseLink:(0,i.jsx)(nU,{})}):2===e.length?(0,F.tx)("figmake.chat.community_attribution.attributions_two",{hubFileLink1:n[0],hubFileLink2:n[1],licenseLink:(0,i.jsx)(nU,{})}):(0,F.tx)("figmake.chat.community_attribution.attributions_three",{hubFileLink1:n[0],hubFileLink2:n[1],hubFileLink3:n[2],licenseLink:(0,i.jsx)(nU,{})})})]})})}let nH=(0,e5.tf)(eL.$);function nK({licenseType:e,onClose:t}){let n=(0,tt.No)(),s=n.unwrapOr(null)?.tier,{getProvisionalAccessBanner:a,getPendingRequest:r}=(0,tn.wH)(),{text:l,shouldShowCurf:o}=a(e),{curfCtaHandler:d,curfCtaLabel:c}=(0,tn.mT)(e),u=l;return o||r(e)?.entryPoint!==e2.tc.CODE_CHAT_LIMIT||(u=(0,F.t)("fullscreen.toolbar_banner.provisional_access.code_chat")),(0,i.jsx)(e5.fu,{name:"ChatBoxProvisionalAccessBanner",properties:{tier:s},children:(0,i.jsx)("div",{className:"xyorhqc xj0a0fe","data-testid":"provisional-access-banner",children:(0,i.jsxs)(eM.Yy,{variant:"brand",icon:null,onDismiss:t,children:[(0,i.jsx)(eO.Q,{children:u}),o&&(0,i.jsx)(nH,{onClick:d,children:c})]})})})}function nW({onClose:e,children:t}){let n=(0,tt.No)(),s=n.unwrapOr(null)?.tier;return(0,i.jsx)(e5.fu,{name:"ChatBoxSoftLimitBanner",properties:{tier:s},children:(0,i.jsx)("div",{className:"xyorhqc xj0a0fe","data-testid":"chat-soft-limit-banner",children:(0,i.jsx)(eM.Yy,{variant:"brand",icon:null,onDismiss:e,children:(0,i.jsx)(eO.Q,{children:t})})})})}function nq({onClose:e}){let t=(0,ti.eP)({forAiMetering:!0}),n=(0,ti.nJ)({forAiMetering:!0}),[s]=(0,eq.OR)(),a=s.data?.monthly_summary;if(!t.data||!n.data||!a)return null;let{name:r,activeTrialLicenseTypes:l}=n.data,o=l?.includes(te.G_.FIGMAKE);return(0,i.jsx)(nW,{onClose:e,children:o?(0,F.tx)("ai_credits_meter.soft_limit_in_plan",{planName:r,numTotalMonthlyCredits:a.total.toLocaleString(),learnMoreLink:(0,i.jsx)(e0.Ph,{newTab:!0,trusted:!0,href:W._t,children:(0,F.tx)("general.learn_more")})}):(0,F.tx)("ai_credits_meter.soft_limit_for_seat_type_in_plan",{seatType:(0,e1.JT)(t.data),planName:r,numTotalMonthlyCredits:a.total.toLocaleString(),learnMoreLink:(0,i.jsx)(e0.Ph,{newTab:!0,trusted:!0,href:W._t,children:(0,F.tx)("general.learn_more")})})})}function nX({onClose:e}){return(0,ts.T3)()?(0,i.jsx)(nq,{onClose:e}):(0,i.jsx)(nW,{onClose:e,children:(0,F.tx)("figmake.meter_limit.reached_future_credit_limit",{learnMoreLink:(0,i.jsx)(e0.Ph,{newTab:!0,trusted:!0,href:W._t,children:(0,F.tx)("general.learn_more")})})})}function nY({testId:e,config:t,trackingProperties:n}){return(0,i.jsx)(e5.fu,{name:"ChatBoxToast",properties:n,children:(0,i.jsx)("div",{className:"xyorhqc xj0a0fe","data-testid":e,children:(0,i.jsx)(eM.Yy,{variant:"brand",icon:t.icon,children:(0,i.jsxs)("div",{className:"x78zum5 x1q0g3np x1qughib xou54vl x6s0dn4 xh8yej3",children:[(0,i.jsx)("div",{className:"x78zum5 x1q0g3np xkh2ocl x6s0dn4",children:(0,i.jsx)(eO.Q,{title:t.title,children:t.content?.()})}),t.button]})})})})}function nZ(){return(0,i.jsx)(e5.fu,{name:"ChatBoxToast-InProgress",children:(0,i.jsx)("div",{className:"xyorhqc xj0a0fe x1iwbaqv","data-testid":"mobile-in-progress-banner",children:(0,i.jsx)(eM.Yy,{variant:"brand",icon:(0,i.jsx)(eR.k,{}),children:(0,i.jsx)("div",{className:"x78zum5 x1q0g3np x1qughib xou54vl x6s0dn4 xh8yej3",children:(0,i.jsx)("div",{className:"x78zum5 x1q0g3np xkh2ocl x6s0dn4",children:(0,i.jsx)(eO.Q,{children:(0,F.t)("make_mobile_chat.working_on_it_stay_on")})})})})})})}function nJ(){let{openFigmakeFullscreenInSameTab:e}=(0,eh.Ve)();return(0,i.jsx)(e5.fu,{name:"ChatBoxToast-Complete",children:(0,i.jsx)("div",{className:"xyorhqc xj0a0fe","data-testid":"mobile-complete-banner",children:(0,i.jsx)(eM.Yy,{variant:"success",icon:(0,i.jsx)(ez.U,{}),children:(0,i.jsxs)("div",{className:"x78zum5 x1q0g3np x1qughib xou54vl x6s0dn4 xh8yej3",children:[(0,i.jsx)("div",{className:"x78zum5 x1q0g3np xkh2ocl x6s0dn4",children:(0,i.jsx)(eO.Q,{children:(0,F.t)("make_mobile_chat.all_set")})}),(0,i.jsx)("div",{className:"xu159t0 xpavgux",children:(0,i.jsx)(e$.$z,{variant:"primary",onClick:e,children:(0,F.t)("make_mobile_chat.preview")})})]})})})})}function nQ({attachments:e,clearAttachment:t}){return e&&e.filter(e=>"error"!==e.status).length>0?(0,i.jsx)("div",{className:"x78zum5 x1q0g3np x167g77z x14vqqas x1wsuqlk xat24cr xq1n1xh",children:e.map(e=>"error"===e.status?null:(0,i.jsx)(nD.V,{attachment:e,clearAttachment:t},e.uniqueId))}):null}function n$(){let e=(0,w.Xr)(eg.nJ);return(0,i.jsx)(tx,{variant:"warning",onClose:()=>e(!0),children:(0,i.jsxs)("div",{className:"x78zum5 x1q0g3np x1qughib x6s0dn4 xh8yej3 xg2d0mh","data-testid":"mcp-warning-banner",children:[(0,i.jsx)(eB.e,{"aria-hidden":!0,style:{"--color-icon":"currentColor"}}),(0,i.jsxs)("div",{className:"x78zum5 xdt5ytf x1iyjqo2",children:[(0,i.jsx)("div",{className:"xxrns5j x1q8tae1 x1vg90ec x1eab18d x1yyillh xmyi33j",children:(0,F.t)("figmake.mcp_clients.warning_banner.title")}),(0,i.jsx)("div",{className:"xrlp15q x1nmd3yn xm735u9 xkbmbem x3wk4up xmyi33j",children:(0,F.t)("figmake.mcp_clients.warning_banner.message")})]})]})})}function n0(){let e=(0,a.wA)(),{mcpClients:t,isLoading:n}=(0,nE.Qh)(),r=(0,s.useRef)(!1);if(s.useEffect(()=>{r.current||n||t.length||(e(e3.b({has_authed_figmake_mcp_client:!1})),r.current=!0)},[e,n,t.length]),n||!t.length||!t[0])return null;let l=t[0].server;return(0,i.jsx)(tx,{variant:"info",onClose:()=>{e(e3.b({dismissed_figmake_chat_mcp_tool_banner:!0}))},children:(0,i.jsxs)("div",{className:"xxrns5j x1q8tae1 x1vg90ec x1eab18d x1yyillh x78zum5 xilkfi8 x1nfngrj","data-testid":"mcp-education-banner",children:[(0,i.jsx)(eQ.oW,{className:"x1kky2od xlup9mm x192jxwq x19kjcj4",src:l.logoUrl,alt:l.name}),(0,F.t)("figmake.chat_box.mcp_education_banner",{serverName:l.name})]})})}function n1(){let e=(0,tj.P)(),t=(0,w.Xr)(tl.rK);return(0,i.jsx)(tx,{variant:"error",onClose:()=>t(!1),children:(0,i.jsxs)("div",{className:"x78zum5 x1q0g3np x1qughib x6s0dn4 xh8yej3","data-testid":"supabase-error-banner",children:[(0,i.jsxs)("div",{className:"x78zum5 x1q0g3np x167g77z xkh2ocl x6s0dn4",children:[(0,i.jsx)(eB.e,{"aria-hidden":!0,style:{"--color-icon":"currentColor"}}),(0,F.t)("figmake.supabase_error.title")]}),(0,i.jsx)(eP.$n,{variant:"secondary",onClick:e,children:(0,F.t)("figmake.supabase_error.button")})]})})}function n2({text:e,...t}){let[n,a]=(0,s.useState)(!1),r=(0,s.useRef)(null);return(0,i.jsx)(eD.E,{onClick:()=>{navigator.clipboard.writeText(e),a(!0),r.current&&clearTimeout(r.current),r.current=setTimeout(()=>{a(!1)},1e3)},"aria-label":(0,F.t)("figmake.chat_box.error.copy_request_id"),...t,children:n?(0,F.t)("figmake.chat_box.error.request_id_copied"):e})}function n3({chatError:e,onClose:t,onRetry:n,featureType:s}){let{error:a,cortexClientGeneratedRequestUuid:r}=e,{node:l,dismissable:o,shouldShowRetry:d,severity:c,shouldShowReload:u}=(0,ng.Ex)(a),p=r;(0,nl.z)("make_error_tsid")&&(p??=(0,eJ.tl)().tracking_session_id);let m=!p;return(0,eY.h)(()=>{if(!(0,nl.z)("make_report_chat_error_banner"))return;let e=(0,ng.tx)(a);(0,X.Nh)({requestUUID:r??"",featureType:s,errorReason:e,errorMessage:a.message,errorName:a.name})}),(0,i.jsx)(tx,{variant:c,onClose:o?t:void 0,secondaryContent:p&&(0,i.jsxs)("div",{className:"xrybvsa x15r87gk xh8yej3 x78zum5 xozqiw3 xg2d0mh",children:[(0,i.jsx)("p",{className:"x2lah0s",children:(0,F.t)("figmake.chat_box.error.request_id")}),(0,i.jsx)(n2,{text:p,className:"x172n1ly xebhuq6 xb3r6kr"})]}),children:(0,i.jsx)("div",{className:"x78zum5 xdt5ytf x1cy8zhl x1nfngrj xh8yej3",children:(0,i.jsxs)("div",{className:"x78zum5 x1q0g3np x6s0dn4 xg2d0mh xh8yej3",children:[m&&(0,i.jsx)("span",{className:"xvy4d1p",children:m&&(0,i.jsx)(eB.e,{"aria-hidden":!0,style:{"--color-icon":"currentColor"}})}),(0,i.jsx)("div",{role:"alert",...{0:{className:"xxrns5j x1q8tae1 x1vg90ec x1eab18d x1yyillh x1iyjqo2"},1:{className:"xxrns5j x1q8tae1 x1vg90ec x1eab18d x1yyillh x1iyjqo2 xrybvsa"}}[!m<<0],"data-testid":"code-chat-error-message",children:l}),d&&n&&(0,i.jsx)("div",{className:"x1yjdb4r x78zum5 x1q0g3np x6s0dn4 x167g77z x19y5rnk",children:(0,i.jsx)(eP.$n,{variant:"secondary",onClick:n,children:(0,F.t)("ai.try_again")})}),u&&(0,i.jsx)("div",{className:"x1yjdb4r x78zum5 x1q0g3np x6s0dn4 x167g77z x19y5rnk",children:(0,i.jsx)(eP.$n,{variant:"secondary",onClick:()=>eX.Ay.reload("AI Assistant: Outdated Client Error"),children:(0,F.t)("ai.refresh_page")})})]})})})}function n5({onClose:e,onRefactor:t,numLargeFiles:n}){return(0,i.jsxs)(tx,{variant:"warning",onClose:e,children:[(0,i.jsxs)("div",{className:"x78zum5 x1q0g3np x6s0dn4 x1jnr06f",children:[(0,i.jsx)(eB.e,{"aria-hidden":!0,style:{"--color-icon":"currentColor"}}),(0,i.jsx)("div",{style:{color:"currentColor"},children:(0,F.t)("figmake.chat_box.refactor_large_files",{numLargeFiles:n})})]}),(0,i.jsx)("div",{className:"x78zum5 x1q0g3np x6s0dn4 x167g77z x19y5rnk x1yjdb4r",children:(0,i.jsx)(eP.$n,{variant:"secondary",onClick:t,children:(0,F.t)("figmake.chat_box.refactor_large_files_cta")})})]})}function n4({onClose:e,requestFixErrors:t,errorFixingDisabled:n,isLastUserMessageAutoErrorFix:s,errorCount:a,variant:r}){let l=(0,w.Xr)(Y.YD),o=(0,w.Xr)(Y.Vo),d=(0,F.t)("living_designs.chat.errors.error_count",{count:a});return d="error"===r?s?a>10?(0,F.t)("figmake.errors.autofix_failed_max_errors",{maxCount:10}):(0,F.t)("figmake.errors.autofix_failed",{count:a}):a>10?(0,F.t)("figmake.errors.max_errors",{maxCount:10}):(0,F.t)("living_designs.chat.errors.error_count",{count:a}):a>10?(0,F.t)("figmake.chat.warning_message_max_errors",{maxCount:10}):(0,F.t)("figmake.chat.warning_message",{count:a}),(0,i.jsxs)(tx,{variant:r,onClose:e,children:[(0,i.jsx)(eD.E,{onClick:()=>{l(!0),o("console")},...{0:{className:"xjbqb8w x1ypdohk"},2:{className:"xjbqb8w x1ypdohk x172n1ly"},1:{className:"xjbqb8w x1ypdohk x1akne3o"},3:{className:"xjbqb8w x1ypdohk x1akne3o"}}[!("error"!==r)<<1|!("info"!==r)<<0],children:(0,i.jsxs)("div",{className:"x78zum5 x1q0g3np x6s0dn4 x1jnr06f",children:[(0,i.jsx)(eB.e,{"aria-hidden":!0,style:{"--color-icon":"currentColor"}}),(0,i.jsx)("div",{style:{color:"currentColor"},children:d})]})}),(0,i.jsx)("div",{className:"x78zum5 x1q0g3np x6s0dn4 x167g77z x19y5rnk x1yjdb4r",children:(0,i.jsx)(eP.$n,{variant:"secondary",onClick:t,disabled:n,children:(0,F.t)("living_designs.chat.errors.ask_figma_fix")})})]})}function n6({onClose:e}){return(0,i.jsx)(tx,{variant:"info",onClose:e,children:(0,i.jsxs)("span",{className:"x78zum5 x1q0g3np x6s0dn4 x1jnr06f",children:[(0,i.jsx)(eG,{}),(0,F.t)("figmake.chat.autofix_message")]})})}function n7({onClose:e,onContinue:t}){return(0,i.jsxs)(tx,{variant:"warning",onClose:e,children:[(0,i.jsx)("span",{children:(0,F.t)("ai.error.max_steps_reached")}),(0,i.jsx)(eP.$n,{variant:"secondary",onClick:t,children:(0,F.t)("figmake.chat.continue")})]})}function n8({state:e}){return"chatDisabled"===e.type?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(nf.$,{testId:"chat-box-toast",renderer:nY,featureType:e.featureType}),e.showLoggedOutBanner&&(0,i.jsx)(nP,{})]}):"supabaseNudge"===e.type?(0,i.jsx)(tb,{}):"supabaseError"===e.type?(0,i.jsx)(n1,{}):"chatError"===e.type?(0,i.jsx)(n3,{chatError:e.chatError,onClose:e.onClose,onRetry:e.onRetry,featureType:e.featureType}):"refactorLargeFiles"===e.type?(0,i.jsx)(n5,{onClose:e.onClose,onRefactor:e.onRefactor,numLargeFiles:e.numLargeFiles}):"consoleErrors"===e.type?(0,i.jsx)(n4,{onClose:e.onClose,requestFixErrors:e.requestFixErrors,errorFixingDisabled:e.errorFixingDisabled,isLastUserMessageAutoErrorFix:e.isLastUserMessageAutoErrorFix,errorCount:e.errorCount,variant:e.variant}):"selfHealing"===e.type?(0,i.jsx)(n6,{onClose:e.onClose}):"communityAttribution"===e.type?(0,i.jsx)(nV,{communityAttributions:e.communityAttributions,onClose:e.onClose}):"chatSoftLimit"===e.type?(0,i.jsx)(nX,{onClose:e.onClose}):"provisionalAccess"===e.type?(0,i.jsx)(nK,{licenseType:e.licenseType,onClose:e.onClose}):"mobileInProgress"===e.type?(0,i.jsx)(nZ,{}):"mobileComplete"===e.type?(0,i.jsx)(nJ,{}):"mcpToolWarning"===e.type?(0,i.jsx)(n$,{}):"mcpClientEducation"===e.type?(0,i.jsx)(n0,{}):"maxStepsReached"===e.type?(0,i.jsx)(n7,{onClose:e.onClose,onContinue:e.onContinue}):"todos"===e.type?(0,i.jsx)(nn,{todos:e.todos}):null}let n9=s.forwardRef((e,t)=>{let{placeholderText:n,canSend:l,sendMessage:o,chatBoxLeftExtraContent:u,chatBoxRightExtraContent:p,inspectedElement:m,errorFixingDisabled:h,showPasteDesignsCallout:f,generationInProgress:g,chatMessagesNodeGuid:x,canCancelGeneration:_,chatContainerRef:y,isDraggingAttachment:v,chatMessageCount:b,isLastUserMessageAutoErrorFix:C,featureType:k,onBlur:E,onFocus:T,cleanUpResumableMake:S}=e,[I,N]=(0,w.fp)((0,Z.mC)(x)),{chatError:A,clearChatError:L}=(0,nx.tk)(x),M=(0,n_.Xt)(x),O=(0,n_.kV)(x),[R,D]=(0,tc.jT)(),[z]=(0,tC.PM)(),B=(0,w.md)(td.UV),G=R.filter(e=>"error"===e.type||"warn"===e.type),U=(0,eZ.ZC)(G),V=s.useMemo(()=>G.every(e=>"warn"===e.type)&&0===z.length,[G,z]),H=(0,eZ.ZC)(b),[K,q]=(0,s.useState)(!1),X=l&&!(0,P.jN)(I)&&!B,Y=function(e){let[t,n]=s.useState(!1),i=s.useRef(null);return s.useEffect(()=>(i.current&&clearTimeout(i.current),n(e.length>0),i.current=setTimeout(()=>{n(!1)},1e4),()=>{i.current&&clearTimeout(i.current)}),[e]),t}(I);s.useEffect(()=>{let e=(0,Z.A5)(x);e?e.isTyping!==Y&&(0,Z.YZ)({...e,isTyping:Y}):x&&(0,Z.YZ)({node:x,isTyping:Y,messages:[],fileUpdates:[]})},[Y,x]),s.useEffect(()=>{(U?.length!==G.length||H!==b)&&q(!1)},[U,G,H,b]);let[J,$]=(0,w.fp)((0,tk.o0)(x)),[ee,et]=(0,w.fp)((0,tk.AK)(x)),[en,ei]=(0,s.useState)(300),[es,ea]=(0,s.useState)(0),{communityAttributionDisplay:er,clearCommunityAttributionDisplay:el}=(0,eT.Pe)();(0,s.useEffect)(()=>{if(!y?.current)return;let e=()=>{ei(Math.max(64,.4*(y.current?.clientHeight||300)))},t=()=>{ea(y.current?.clientWidth??0)},n=()=>{e(),t()};n(),new ResizeObserver(n).observe(y.current)},[y]);let eo=(0,nk.S)({textareaRef:t,maxHeight:en});(0,s.useEffect)(()=>{eo()},[en,I,eo,es]);let ed=(0,Q.ry)(k),ec=(0,w.md)(nj.Ng),eu=(0,e4.k)(),ep=(0,ef.Oc)(),em=ep?te.G_.FIGMAKE:te.G_.SITES,ex=(0,tu.Xu)(),e_=(0,w.md)(tl.Xl),{connectedProject:ey,isConnectedNonOwner:ev}=(0,ty.GC)(),eb=(0,ty.Iz)(),{showProvisionalAccessBanner:eC,onCloseProvisionalAccessBanner:ej}=function(e){let{getProvisionalAccessBanner:t}=(0,tn.wH)(),n=t(e),[i,a]=(0,s.useState)(!0);return{showProvisionalAccessBanner:n?.showBanner&&i,onCloseProvisionalAccessBanner:()=>{a(!1)}}}(em),{showChatSoftLimitBanner:ek,onCloseChatSoftLimitBanner:ew}=function(e){let t=(0,a.wA)(),n=(0,e8.f)(nC),i=(0,tt.No)(),s=i.unwrapOr(null)?.tier,{meterUsed:r}=(0,nb.xD)(e),l=(0,nv.Tf)();if(e===W.JT.AI_CHAT_PROTOTYPE)return{showChatSoftLimitBanner:!1};if(n&&function(e){let t=(0,ny.A)(new Date).tz("America/Los_Angeles");return(0,ny.A)(e).tz("America/Los_Angeles").isBefore(t,"month")}(n.updatedAt))t(e3.b({[nC]:!1}));else if(n)return{showChatSoftLimitBanner:!1};return s&&s!==te.Ag.STARTER&&s!==te.Ag.STUDENT?{showChatSoftLimitBanner:r>=l[s],onCloseChatSoftLimitBanner:()=>{t(e3.b({[nC]:!0}))}}:{showChatSoftLimitBanner:!1}}(ep?W.JT.FIGMAKE:k===r.lV.AI_ASSISTANT?W.JT.START_AI_ASSISTANT:W.JT.LIVING_DESIGNS),eE=!g&&b>0,eS=(0,eh.g7)(),eI=(G.length>0||ex&&z.length>0)&&!K,eN=(0,w.md)(eg.nJ),eA=(0,nr.ee)(),eL=(0,nE.pA)(eA??!1),eM=(0,eK.kc)().bake_mcp_warning_banner&&eL>=eg.G6&&!eN,eO=(0,e8.f)("dismissed_figmake_chat_mcp_tool_banner"),eR=(0,e8.f)("has_authed_figmake_mcp_client"),eP=!!((0,eK.kc)().bake_mcp_education_banner&&!eO&&eR),eD=Array.from((0,to.vj)().entries()).filter(([e,t])=>!t.isInternal()).map(([e])=>e),eF=(0,s.useCallback)(()=>{o({message:(0,F.t)("figmake.chat_box.refactor_large_files_cta"),errors:eD,origin:r.zm.REFACTOR_LARGE_FILES_BUTTON}),$(!0)},[o,$,eD]),ez="true"!==localStorage.getItem("hide-refactor-large-files-banner"),eB=(0,eK.kc)().make_refactor_large_files,eG=s.useMemo(()=>eB&&ez&&!J&&eD.length>0,[J,eD,ez,eB]),eU=function(e){let{shouldDisableCodeChat:t,isSendToMakeInProgress:n,canUseSupabase:i,showSupabaseDeployNudge:a,connectedProject:l,isConnectedNonOwner:o,hasSupabaseError:u,chatError:p,clearChatError:m,hasConsoleMessages:h,isFixingErrors:f,setHideErrorMessage:g,generationInProgress:x,communityAttributionDisplay:_,clearCommunityAttributionDisplay:y,showChatSoftLimitBanner:v,onCloseChatSoftLimitBanner:b,isFigmake:C,showProvisionalAccessBanner:k,onCloseProvisionalAccessBanner:E,licenseType:T,isFigmaMakeMobile:S,isGenerationComplete:I,showRefactorLargeFilesBanner:N,onRefactorLargeFiles:A,largeFileNames:L,consoleErrorsAndWarnings:M,supabaseConsoleMessages:O,allWarnings:R,errorFixingDisabled:P,isLastUserMessageAutoErrorFix:D,wasLastMessageAttemptErrorFix:z,requestFixErrors:B,sendMessage:G,featureType:U,isLoggedOutCommentUser:V,showMcpWarningBanner:H,showMcpEducationBanner:K,isPausedAtMaxSteps:W,clearFinishReason:q}=e,X=(0,nr.ee)(),Y=function(){let{codeLibraryInstance:e}=(0,eh.oA)(),{exchange:t}=(0,Z.$W)(e?.guid),n=(0,s.useMemo)(()=>t?.messages??[],[t]),[i,a]=(0,w.fp)(nu),r=(0,s.useRef)(0),l=(0,s.useRef)(0),o=r.current<=n.length?n[r.current-1]?.toolResults.length??0:0;return(0,s.useEffect)(()=>{let e;if(!(0,nl.z)("make_todo_list_ui"))return;let t=new Map,s=o>l.current?1:0,d=r.current<=n.length?Math.max(r.current-s,0):0;for(let i=n.length-1;i>=d;i--){let s=n[i];if(s){if(s.type===j.K$p.TOOL_MESSAGE&&s.toolResults)for(let n=s.toolResults.length-1;n>=0;n--){let i=s.toolResults[n];if(i?.toolName==="todo_list_tool"){let e=nc(c.vR,i.resultJson);e?.success&&e.updatedTodo&&!t.has(e.updatedTodo.content)&&t.set(e.updatedTodo.content,e.updatedTodo.status)}if(i?.toolName==="add_todos_tool"){let t=nc(c.vn,i.resultJson);if(t?.success&&t.todos){e=t.todos;break}}}if(void 0!==e)break}}let u=i.length>0,p=t.size>0;if(void 0!==e&&e.length>0)a(e.map((e,n)=>({id:String(n),content:e.content,status:t.get(e.content)||"todo"})));else if(u&&p){let e=!1,n=i.map(n=>{let i=t.get(n.content)||n.status;return i!==n.status&&(e=!0),{...n,status:i}});e&&a(n)}r.current=n.length,l.current=n[n.length-1]?.toolResults.length??0},[n,a,o,i]),i}(),J=function(){let{codeLibraryInstance:e}=(0,eh.oA)(),{exchange:t}=(0,Z.$W)(e?.guid),n=(0,nl.z)("bake_agent_scratchpad")&&(0,nl.z)("make_todo_list_ui")?function(e){let{code:t}=(0,na.pY)(e,ni.L5),n=(0,d.$d)()[ni.L5];return t??n?.sourceCode}(t):void 0;return(0,s.useMemo)(()=>n?nd(n):[],[n])}(),Q=(0,nl.z)("make_chat_todo_list")?Y:J;return t||n?{type:"chatDisabled",showLoggedOutBanner:C&&V,featureType:U}:i&&a&&(l||o)?{type:"supabaseNudge"}:i&&u?{type:"supabaseError"}:p?{type:"chatError",chatError:p,onClose:m,onRetry:z?B:()=>G({}),featureType:U}:h&&f?{type:"selfHealing",onClose:()=>g(!0)}:h&&!x?{type:"consoleErrors",onClose:()=>g(!0),requestFixErrors:B,errorFixingDisabled:P,isLastUserMessageAutoErrorFix:!!D,errorCount:M.length+O.length,variant:R?"info":"error"}:(0,nl.z)("make_todo_list_ui")&&Q.length>0?{type:"todos",todos:Q}:_&&_.length>0?{type:"communityAttribution",communityAttributions:_,onClose:y}:!(0,eK.kc)().disable_code_chat_soft_limit_banner&&(0,eK.kc)().enable_code_chat_soft_limit_banner_for_plan&&v?{type:"chatSoftLimit",onClose:b}:X&&H?{type:"mcpToolWarning"}:(0,eK.kc)().bake_monetization_plan&&C&&k?{type:"provisionalAccess",licenseType:T,onClose:E}:S&&x?{type:"mobileInProgress"}:S&&I?{type:"mobileComplete"}:N?{type:"refactorLargeFiles",onClose:()=>localStorage.setItem("hide-refactor-large-files-banner","true"),onRefactor:A,numLargeFiles:L.length}:W?{type:"maxStepsReached",onClose:q,onContinue:()=>{G({message:(0,F.t)("figmake.chat.continue"),origin:r.zm.MAX_STEPS_REACHED_BUTTON})}}:X&&K?{type:"mcpClientEducation"}:{type:"normal"}}({shouldDisableCodeChat:ed,isSendToMakeInProgress:ec,canUseSupabase:ex,showSupabaseDeployNudge:e_,connectedProject:ey,isConnectedNonOwner:ev,hasSupabaseError:eb,chatError:A,clearChatError:L,hasConsoleMessages:eI,isFixingErrors:J,setHideErrorMessage:q,generationInProgress:g,communityAttributionDisplay:er,clearCommunityAttributionDisplay:el,showChatSoftLimitBanner:ek,onCloseChatSoftLimitBanner:ew,isFigmake:ep,showProvisionalAccessBanner:eC,onCloseProvisionalAccessBanner:ej,licenseType:em,isFigmaMakeMobile:eS,isGenerationComplete:eE,showRefactorLargeFilesBanner:eG,onRefactorLargeFiles:eF,largeFileNames:eD,consoleErrorsAndWarnings:G,supabaseConsoleMessages:z,allWarnings:V,errorFixingDisabled:h,isLastUserMessageAutoErrorFix:C,wasLastMessageAttemptErrorFix:ee,requestFixErrors:function(){$(!0),et(!0);let e=Array.from(new Set([...G.map(e=>e.message)??[],...z.map(e=>e.event_message)]));o({message:V?(0,F.t)("figmake.chat.warning_fix_message"):(0,F.t)("living_designs.chat.errors.fix_these_errors"),errors:e,origin:r.zm.FIX_ERRORS_BUTTON}),D([])},sendMessage:o,featureType:k,isLoggedOutCommentUser:eu,showMcpWarningBanner:eM,showMcpEducationBanner:eP,isPausedAtMaxSteps:"tool-calls"===M,clearFinishReason:O});return(0,i.jsx)("form",{onSubmit:e=>{e.preventDefault(),X&&(et(!1),o({}))},children:(0,i.jsxs)(nG,{children:[(0,i.jsx)(n8,{state:eU}),(0,i.jsx)(ie,{cachedChatContainerWidth:es,canCancelGeneration:_,canSend:X,chatBoxLeftExtraContent:u,chatBoxRightExtraContent:p??[],chatMessagesNodeGuid:x,cleanUpResumableMake:S,featureType:k,generationInProgress:g,input:I,inspectedElement:m,isDraggingAttachment:v,onBlur:E,onFocus:T,placeholderText:n,sendMessage:o,setInput:N,showPasteDesignsCallout:f,textareaRef:t,updateTextareaHeight:eo})]})})});function ie({chatMessagesNodeGuid:e,generationInProgress:t,canSend:n,canCancelGeneration:a,sendMessage:l,input:o,setInput:d,updateTextareaHeight:c,inspectedElement:u,isDraggingAttachment:p,showPasteDesignsCallout:m,textareaRef:h,placeholderText:f,chatBoxLeftExtraContent:g,chatBoxRightExtraContent:x,onBlur:_,onFocus:y,featureType:v,cachedChatContainerWidth:b,cleanUpResumableMake:C}){let k=(0,ef.Oc)(),T=(0,z.O1)(),A=v===r.lV.AI_ASSISTANT&&T&&!u,L=s.useCallback(()=>{j.Egt?.clearSelection()},[]),M=(0,ei.sG)(),O=(0,ei.YC)(),R=v===r.lV.AI_ASSISTANT,P=(0,w.md)(Y.mK),D=s.useCallback(()=>{P?.setDirectManipulationEnabled({enabled:!1})},[P]),B=(0,w.md)(td.UV),G=(0,s.useCallback)(e=>{let t=e.target;c(),d(t.value)},[d,c]),[V,H]=(0,s.useState)(!1),K=(0,s.useRef)(null),[q,X]=(0,s.useState)(!1),J=(0,w.Xr)((0,tk.AK)(e)),ee=(0,s.useRef)(null),et=(0,s.useCallback)(()=>{H(!0),X(!1),K.current&&(clearTimeout(K.current),K.current=null)},[]),en=(0,s.useCallback)(()=>{H(!1),X(!0),K.current&&clearTimeout(K.current),K.current=setTimeout(()=>{X(!1),K.current=null},30)},[]),es=(0,s.useCallback)(e=>{if(e.stopPropagation(),"Enter"===e.key&&!e.shiftKey){if(V||e.nativeEvent.isComposing||q)return;e.preventDefault(),n&&(J(!1),l({}),(0,nl.z)("bake_point_and_edit")&&u?P?.pointAndEditControl({type:"sendChatMessage"}):(u||P?.directManipulationEditor.directManipulationEnabled())&&P?.setDirectManipulationEnabled({enabled:!1}))}"Escape"===e.key&&ee?.current?.value.trim()===""&&(0,$.UM)()},[ee,n,l,u,P,V,q,J]),ea=w.zl.get((0,Z.Z3)(e)),er=(0,Q.ry)(),{attachments:el}=(0,eE._9)(e),eo=(0,eE.oz)(),ed=(0,nT.M)(),ec=(0,s.useRef)(null),[eu,ep]=(0,s.useState)(0),em=t&&b>300;(0,s.useEffect)(()=>{ep(em&&ec.current?ec.current.scrollWidth+nz.RIGHT+nz.LEFT+24+nz.GAP:25)},[em]);let[eh,eg]=(0,w.fp)(Z.uz),ex=(0,w.md)(U.ze),e_=(0,w.md)(e6.wg),ey=(0,nw.Z)();(0,s.useEffect)(()=>{if(t)eg(Date.now());else{if(eh&&k){let e=Date.now()-eh;N.az.trackDefinedMetric("figmake.generation_in_progress",{fileKey:ex??void 0,durationMilliseconds:e,userCanEdit:e_,onPageUnload:!1,resumableMakeEnabled:ey})}eg(null)}},[t]);let ev=er?"var(--color-bg-secondary)":"var(--color-bg)";return(0,i.jsxs)("div",{...{0:{className:"x1n2onr6 x78zum5 xdt5ytf x2lah0s x1iorvi4 xb3r6kr x1y0btm7 xmkeg23 x9h44rk x1ey2m1c x1753ylo x7z60cl x1j937ru xhfuivf xsag5q8 x1v2ro7d"},2:{className:"x1n2onr6 x78zum5 xdt5ytf x2lah0s x1iorvi4 xb3r6kr x9h44rk x1ey2m1c x1753ylo xhfuivf xsag5q8 x1v2ro7d xdh2fpr x1y0btm7 x1va2ikv"},1:{className:"x1n2onr6 x78zum5 xdt5ytf x2lah0s x1iorvi4 xb3r6kr x1y0btm7 xmkeg23 x9h44rk x1ey2m1c x1753ylo x7z60cl x1j937ru xsag5q8 x1v2ro7d x15ysqaf"},3:{className:"x1n2onr6 x78zum5 xdt5ytf x2lah0s x1iorvi4 xb3r6kr x9h44rk x1ey2m1c x1753ylo xsag5q8 x1v2ro7d xdh2fpr x1y0btm7 x1va2ikv x15ysqaf"}}[!!p<<1|!(v!==r.lV.CODE_IN_SITES)<<0],style:{backgroundColor:ev},children:[(0,i.jsxs)("div",{className:"x78zum5 xdt5ytf x1iyjqo2 xs83m0k x1r8uery",style:{backgroundColor:ev},children:[m&&(0,i.jsx)(it,{}),(0,i.jsx)(nQ,{attachments:el,clearAttachment:eo}),u?(0,i.jsx)(tq,{tagName:u.tagName||"",variant:"prompt",iconType:"element",onRemove:D}):M?(0,i.jsx)(tq,{tagName:M.tagName||"",variant:"prompt",iconType:"component"}):O&&O.libraryName?(0,i.jsx)(tq,{tagName:O.libraryName,variant:"prompt",iconType:"library"}):null,A?(0,i.jsx)(tZ,{nodes:T,variant:"prompt",onRemove:L}):null,(0,i.jsx)("textarea",{ref:function(e){ee.current=e,"function"==typeof h?h(e):h&&(h.current=e)},className:"x78zum5 x1iyjqo2 xtt52l0 x8nclml xnm25rq xyfqnmn xz9dl7a xsag5q8 x1ed109x x8yk33q","data-testid":"code-chat-chat-box",disabled:er,id:e7.x2,maxLength:5e5,onBlur:e=>{_?.(e)},onChange:G,onCompositionEnd:en,onCompositionStart:et,onFocus:e=>{let t=e.target.value.length;e.target.setSelectionRange(t,t),y?.(e)},onKeyDown:es,onPaste:function(e){if(k){if((0,eK.kc)().allow_node_links_in_make)ed(e);else try{let t=(e.clipboardData||window.clipboardData).getData("Text");(0,nF.D)(t)&&(0,eE.hH)(j.FDn.USER_PASTED_FIGMA_LINK_IN_CHAT)}catch{}}},placeholder:f,style:{backgroundColor:ev,height:"auto",overflowY:"hidden"},value:o})]}),(0,i.jsxs)("div",{className:"x78zum5 x1q0g3np x1qughib x6s0dn4 xt970qd xaope02",children:[(0,nl.z)("ai_assistant_ds_library_selector")?(0,i.jsx)("div",{style:{display:"flex",alignItems:"center"},children:g}):(0,i.jsxs)(i.Fragment,{children:[R?(0,i.jsx)(tr.yi,{helpUrlVariant:W.JT.AI_CHAT_PROTOTYPE}):null,g]}),(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8,minWidth:0},children:[x,(0,i.jsx)("div",{style:{flexShrink:0},children:(()=>{let e=(0,eW.A)(.19,1,.22,1),s={play:{width:"25px",transition:{duration:.3,ease:e}},stop:{width:`${eu}px`,transition:{duration:.3,ease:e}}};return(0,i.jsx)("div",{className:"x78zum5 x6s0dn4 xl56j7k x11umrmk",children:(0,i.jsxs)(I.P.button,{disabled:t?!a:!n,onClick:async()=>{t?(ea&&ea.abort((0,eN.NK)(eN.XD.USER_ABORTED)),C&&await C("figmake_or_resume_abort")):(J(!1),l({}),(0,nl.z)("bake_point_and_edit")&&u?P?.pointAndEditControl({type:"sendChatMessage"}):(u||P?.directManipulationEditor.directManipulationEnabled())&&P?.setDirectManipulationEnabled({enabled:!1}))},type:"button",...E.Ay.props(t?em?nB.stopButton:nB.stopButtonIconOnly:nB.sendButton,!t&&n&&nB.sendButtonEnabled,!t&&!n&&nB.sendButtonDisabled),animate:t?"stop":"play","aria-label":t?(0,F.t)("living_designs.chat.stop_button.alt_text"):(0,F.t)("living_designs.chat.send_button.alt_text"),"data-testid":t?"code-chat-stop-button":"code-chat-send-button","data-tooltip":B?(0,F.t)("figmake.ds_imports.library_files_downloading"):null,"data-tooltip-type":ta.Ib.TEXT,initial:"play",variants:s,children:[(0,i.jsx)(I.P.div,{className:"x1n2onr6 x78zum5 x6s0dn4 xl56j7k xvy4d1p xxk0z11",variants:{play:{x:0,transition:{duration:.3,ease:e}},stop:{x:0,transition:{duration:.3,ease:e}}},animate:t?"stop":"play",children:(0,i.jsx)(S.N,{mode:"wait",children:t?(0,i.jsx)(I.P.div,{className:"absolute",animate:{opacity:1,scale:1,rotate:0},exit:{opacity:0,scale:0,rotate:-45},initial:{opacity:0,scale:0,rotate:100},transition:{duration:.3,ease:e},children:(0,i.jsx)(eV.Q,{className:"xwa2v1s xvy4d1p xxk0z11 x2lah0s"})},"square"):(0,i.jsx)(I.P.div,{className:"absolute",animate:{opacity:1,scale:1,rotate:0},exit:{opacity:0,scale:0,rotate:45},initial:{opacity:0,scale:0,rotate:-45},transition:{duration:.25,ease:e},children:B?(0,i.jsx)(eR.k,{size:"sm"}):(0,i.jsx)(eU.W,{className:"xwa2v1s xvy4d1p xxk0z11 x2lah0s"})},"arrow")})}),(0,i.jsx)(S.N,{children:em&&(0,i.jsx)(I.P.span,{ref:ec,className:"xrlp15q x1nmd3yn xm735u9 xkbmbem x3wk4up xb3r6kr xuxw1ft x1tk3asg x1j61x8r",initial:{opacity:0,width:0},animate:{opacity:1,width:"auto"},exit:{opacity:0,width:0},transition:{opacity:{duration:.25,ease:e},width:{duration:.25,ease:e}},children:(0,F.t)("living_designs.chat.stop_button")})})]})})})()})]})]})]})}function it(){return(0,i.jsxs)("div",{className:"x78zum5 x1q0g3np x6s0dn4 x1nejdyq x1ruevkc xmkeg23 xbsl7fq xaqgqki xw7yly9 x1o6q14k xat24cr xq1n1xh x1sxf85j",children:[(0,i.jsx)(ii,{}),(0,i.jsx)("div",{className:"x1nmd3yn xm735u9 xkbmbem xqp8s7e xv1l7n4 xvwc6ox x1j61x8r",children:(0,F.t)("figmake.chat.paste_existing_design_callout")})]})}function ii(){return(0,i.jsxs)("svg",{width:"22",height:"27",viewBox:"0 0 22 27",children:[(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16.3438 5.59766H18.8389V20.5352H16.2041V22.7998H5.85938V20.3682H3.1377V5.79492H5.7168V3.06641H16.3438V5.59766ZM7.83398 9.25586C7.691 9.24173 7.55088 9.29393 7.44922 9.39551L7.39355 9.45117C7.29203 9.55285 7.23973 9.69297 7.25391 9.83594C7.34716 10.7618 7.7613 14.2858 8.74023 15.2656C9.40363 15.9289 10.4407 16.2157 11.4219 16.1045L12.167 16.8545C12.5491 17.2397 13.171 17.241 13.5547 16.8574L14.834 15.5781C15.2154 15.1967 15.2167 14.5783 14.8369 14.1953L14.0986 13.4512C14.2185 12.4619 13.9322 11.4128 13.2627 10.7432C12.283 9.76425 8.76013 9.34913 7.83398 9.25586Z",fill:eH.Tj.bgSelected}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.2261 0.0282208C5.71996 0.0785065 6.10527 0.495932 6.10527 1.00306V2.22185H15.9015V1.00306C15.9015 0.495932 16.2868 0.0785065 16.7807 0.0282208L16.8811 0.0234375H20.7996L20.9001 0.0282208C21.3939 0.0785065 21.7792 0.495932 21.7792 1.00306V4.92155L21.7745 5.022C21.7275 5.48284 21.3609 5.84947 20.9001 5.89639L20.7996 5.90117H19.8238V20.1057H20.7996L20.9001 20.1105C21.3939 20.1608 21.7792 20.5782 21.7792 21.0853V25.0038L21.7745 25.1043C21.7275 25.5651 21.3609 25.9317 20.9001 25.9787L20.7996 25.9834H16.8811L16.7807 25.9787C16.3198 25.9317 15.9532 25.5651 15.9063 25.1043L15.9015 25.0038V23.7869H6.10527V25.0038L6.10049 25.1043C6.05357 25.5651 5.68694 25.9317 5.2261 25.9787L5.12565 25.9834H1.20716L1.10671 25.9787C0.645871 25.9317 0.279246 25.5651 0.232322 25.1043L0.227539 25.0038V21.0853C0.227539 20.5782 0.612855 20.1608 1.10671 20.1105L1.20716 20.1057H2.19444V5.90117H1.20716L1.10671 5.89639C0.645871 5.84947 0.279246 5.48284 0.232322 5.022L0.227539 4.92155V1.00306C0.227539 0.495932 0.612855 0.0785065 1.10671 0.0282208L1.20716 0.0234375H5.12565L5.2261 0.0282208ZM1.20716 25.0038H5.12565V21.0853H1.20716V25.0038ZM16.8811 25.0038H20.7996V21.0853H16.8811V25.0038ZM6.10527 3.20147V4.92155L6.10049 5.022C6.05357 5.48284 5.68694 5.84947 5.2261 5.89639L5.12565 5.90117H3.17406V20.1057H5.12565L5.2261 20.1105C5.71996 20.1608 6.10527 20.5782 6.10527 21.0853V22.8073H15.9015V21.0853C15.9015 20.5782 16.2868 20.1608 16.7807 20.1105L16.8811 20.1057H18.8442V5.90117H16.8811L16.7807 5.89639C16.3198 5.84947 15.9532 5.48284 15.9063 5.022L15.9015 4.92155V3.20147H6.10527ZM1.20716 4.92155H5.12565V1.00306H1.20716V4.92155ZM16.8811 4.92155H20.7996V1.00306H16.8811V4.92155Z",fill:eH.Tj.iconBrand}),(0,i.jsx)("path",{d:"M7.39116 8.45953C7.62267 8.28138 7.92476 8.21392 8.21343 8.28179L12.0259 9.17828V9.17926L12.2076 9.22613C13.9005 9.71089 15.0432 11.2703 15.0259 13.0045L15.4644 13.4429C15.8466 13.8255 15.8467 14.4452 15.4644 14.8277L12.8267 17.4654C12.4442 17.8478 11.8245 17.8476 11.4419 17.4654L11.0035 17.0269C9.26918 17.0443 7.70984 15.9015 7.22514 14.2086L7.17827 14.0269H7.17729L6.28081 10.2144C6.20316 9.88421 6.30267 9.53728 6.54253 9.29742L7.29643 8.54351L7.39116 8.45953ZM7.95952 9.26519L10.1744 11.481C10.4208 11.3465 10.703 11.2691 11.0035 11.2691L11.1802 11.2779C12.0543 11.3666 12.7369 12.105 12.7369 13.0025C12.7367 13.9595 11.9605 14.7357 11.0035 14.7359C10.106 14.7358 9.36756 14.0533 9.27885 13.1793L9.27007 13.0025L9.27885 12.8248C9.30267 12.5907 9.37346 12.3705 9.481 12.1734L7.26616 9.95855L7.23491 9.9898L8.13139 13.8023C8.4771 15.2707 9.88699 16.2325 11.3804 16.0191L12.1343 16.773L14.772 14.1353L14.0181 13.3814C14.2314 11.888 13.2696 10.4781 11.8013 10.1324L7.98882 9.2359L7.95952 9.26519ZM11.0035 12.2486C10.5873 12.2487 10.2496 12.5863 10.2496 13.0025C10.2497 13.3926 10.5464 13.7139 10.9263 13.7525L11.0035 13.7564C11.3934 13.7562 11.7147 13.4594 11.7535 13.0796L11.7574 13.0025C11.7574 12.5863 11.4196 12.2488 11.0035 12.2486Z",fill:eH.Tj.iconBrand})]})}var is=n(572427);function ia({showAiBetaBadge:e}){return(0,i.jsx)("div",{className:"xh8yej3 x78zum5 x87ps6o",children:(0,i.jsx)(is.Wv,{titleTx:(0,F.tx)("living_designs.chat.default_title"),children:e?(0,i.jsx)(tr.yi,{helpUrlVariant:W.JT.CODE_CHAT}):null})})}var ir=n(78439),il=n(439279),io=n(815346),id=n(824570),ic=n(851824),iu=n(849757),ip=n(592726),im=n(24441),ih=n(378979);let ig={messageContent:{k1xSpc:"x78zum5",kaIpWk:"xgqmno8",k8WAf4:"x1m7iz9m",kg3NbH:"xaope02",kWkggS:"x1v8gsql",kfSwDN:"x1hx0egp",khDVqt:"x126k92a",kTgw9:"x13faqbe",kkrTdU:"x1ed109x",$$css:!0},messageContentMakeNewUI:{kaIpWk:"x1m3ak92",krdFHd:null,kfmiAY:null,kVL7Gh:null,kT0f0o:null,kIxVMA:null,ksF3WI:null,kqGeR4:null,kYm2EN:null,$$css:!0}};function ix({user:e,featureType:t,plainText:n,imports:a=[],inspectedElement:l,inspectedComponent:o,inspectedLibrary:d,selectedNodeIds:c}){let{userMessageTypographyStyle:u}=(0,im.L)(),p=n.trim(),m=t===r.lV.AI_ASSISTANT&&c&&c.length>0&&!l,h=(0,G.eY)(),f=(0,s.useMemo)(()=>c&&Array.isArray(c)?c.map(e=>(0,z.Zl)(h,e)).filter(e=>null!==e):[],[c,h]),g=(0,ih.N)(),x=e=>{g(e)};return(0,i.jsx)("div",{role:"region","aria-label":(0,F.t)("figmake.chat.artifact.a11y_prompt_section_title",{user:e.name??e.handle}),className:"x1eaahee",children:(0,i.jsxs)("div",{className:"x78zum5 x1q0g3np x167g77z x13a6bvl","data-testid":"user-chat-message",children:[(0,i.jsxs)("div",{className:"x78zum5 xdt5ytf x167g77z xuk3077",children:[l&&l.tagName?(0,i.jsx)(tq,{variant:"chat",tagName:l.tagName}):o&&o.tagName?(0,i.jsx)(tq,{variant:"chat",tagName:o.tagName,iconType:"component"}):d&&d.libraryName?(0,i.jsx)(tq,{variant:"chat",tagName:d.libraryName,iconType:"library"}):null,m?(0,i.jsx)(tZ,{nodes:f,variant:"chat"}):null,a.length>0?(0,i.jsx)("div",{className:"x78zum5 x1q0g3np x167g77z x1a02dak x13a6bvl",children:a.map(e=>(0,i.jsx)(nD.s,{pastedDesignNodeId:e.guid,onClick:()=>x(e.guid),attachmentType:(0,eE.yM)(e)},e.guid))}):null,(0,i.jsx)("div",{...E.Ay.props(ig.messageContent,t===r.lV.FIGMAKE&&il.v.getFeatureGate("make_chat_ui_improvements")&&ig.messageContentMakeNewUI,u),children:p})]}),(0,i.jsx)("div",{className:"xpvyfi4 x1ty9z65",children:(0,i.jsx)(th.H8,{"aria-label":e.name??e.handle,user:e})})]})})}var i_=n(286138),iy=n(384658),iv=n(736813);function ib({option:e,isSelected:t,onClick:n}){let{isDisabled:a,getBackgroundColor:r}=function(e){let t="failed"===e.status||"pending"===e.status||e.isLoading||e.isDisabled,n=s.useCallback(()=>"failed"===e.status?eH.Tj.bgTertiary:t?eH.Tj.bgSecondary:e.backgroundColor||eH.Tj.bgSecondary,[e.status,e.backgroundColor,t]);return{isDisabled:t,getBackgroundColor:n}}(e),l={backgroundColor:r()};return(0,i.jsxs)("button",{...{0:{className:"x1n2onr6 xh8yej3 x5yr21d x1y5e3q9 x98rzlu x19y5rnk xmkeg23 x1y0btm7 x7z60cl x1717udv xt0e3qv x1s07b3s x1v8gsql xb3r6kr x2lah0s"},4:{className:"x1n2onr6 xh8yej3 x5yr21d x1y5e3q9 x98rzlu x19y5rnk xmkeg23 x1y0btm7 x1717udv xt0e3qv x1s07b3s x1v8gsql xb3r6kr x2lah0s xaqgqki"},2:{className:"x1n2onr6 xh8yej3 x5yr21d x1y5e3q9 x98rzlu x19y5rnk xmkeg23 x1y0btm7 x1717udv x1v8gsql xb3r6kr x2lah0s x1h6gzvc x197sbye x1xfd4ba"},6:{className:"x1n2onr6 xh8yej3 x5yr21d x1y5e3q9 x98rzlu x19y5rnk xmkeg23 x1y0btm7 x1717udv x1v8gsql xb3r6kr x2lah0s x1h6gzvc x197sbye x1xfd4ba"},1:{className:"x1n2onr6 xh8yej3 x5yr21d x1y5e3q9 x98rzlu x19y5rnk xmkeg23 x1y0btm7 x1717udv xt0e3qv x1s07b3s x1v8gsql xb3r6kr x2lah0s x1fzvlhx"},5:{className:"x1n2onr6 xh8yej3 x5yr21d x1y5e3q9 x98rzlu x19y5rnk xmkeg23 x1y0btm7 x1717udv xt0e3qv x1s07b3s x1v8gsql xb3r6kr x2lah0s x1fzvlhx"},3:{className:"x1n2onr6 xh8yej3 x5yr21d x1y5e3q9 x98rzlu x19y5rnk xmkeg23 x1y0btm7 x1717udv x1v8gsql xb3r6kr x2lah0s x1h6gzvc x197sbye x1fzvlhx"},7:{className:"x1n2onr6 xh8yej3 x5yr21d x1y5e3q9 x98rzlu x19y5rnk xmkeg23 x1y0btm7 x1717udv x1v8gsql xb3r6kr x2lah0s x1h6gzvc x197sbye x1fzvlhx"}}[!!t<<2|!!a<<1|!("failed"!==e.status)<<0],onClick:n,disabled:a,type:"button","aria-label":e.alt||`Option ${e.id}`,title:"failed"===e.status?`Failed: ${e.error?.message||"Unknown error"}`:e.isDisabled?(0,F.t)("ai_assistant.multiple_options.option_not_available"):void 0,children:[e.thumbnailUrl?(0,i.jsx)(eQ.oW,{className:"xh8yej3 x5yr21d x192jxwq xl1xv1r",src:e.thumbnailUrl,alt:e.alt||`Option ${e.id}`}):(0,i.jsx)("div",{className:"xh8yej3 x5yr21d x192jxwq",style:l}),"pending"===e.status&&(0,i.jsx)("div",{className:"x10l6tqk x13vifvy xu96u03 x3m8u43 x1ey2m1c x192jxwq x78zum5 x6s0dn4 xl56j7k x1v8gsql",children:(0,i.jsx)(eR.k,{size:"sm"})}),"failed"===e.status&&(0,i.jsx)("div",{className:"x10l6tqk x13vifvy xu96u03 x3m8u43 x1ey2m1c x192jxwq x78zum5 x6s0dn4 xl56j7k x1v79ifo x1vjfegm",children:(0,i.jsx)("div",{className:"x1pvqxga x1quhyk7",children:(0,i.jsx)(eB.e,{})})}),"thumbnail-generating"===e.status&&(0,i.jsx)("div",{className:"x10l6tqk x13vifvy xu96u03 x3m8u43 x1ey2m1c x192jxwq x78zum5 x6s0dn4 xl56j7k x1531fpn xhtitgo",children:(0,i.jsx)(eR.k,{size:"sm"})})]})}function iC({options:e,selectedId:t,onSelectionChange:n}){return(0,i.jsx)("div",{className:"x78zum5 xdt5ytf xxhr3t",children:(0,i.jsxs)("div",{className:"x78zum5 xdt5ytf x1nfngrj xmkeg23 x1y0btm7 x1mxnbhz x7z60cl xf7z5ut",children:[(0,i.jsx)("div",{className:"xrlp15q x1nmd3yn xm735u9 xkbmbem x3wk4up x1n0bwc9 x1uhho1l",children:(0,F.t)("ai_assistant.multiple_options.which_version")}),(0,i.jsx)("div",{className:"x78zum5 x6s0dn4 x1nfngrj x1eoq7q4 xw2csxc",children:e.map(e=>(0,i.jsxs)(s.Fragment,{children:[(0,i.jsx)(ib,{option:e,isSelected:t===e.id,onClick:()=>!e.isLoading&&n?.(e.id)}),e.isOriginal&&(0,i.jsx)("div",{className:"x78zum5 x6s0dn4 x1n0bwc9","aria-hidden":"true",children:(0,i.jsx)(iv.k,{})})]},e.id))})]})})}var ij=n(956492),ik=n(563554),iw=n(523625),iE=n(739423),iT=n(320802),iS=n(344946),iI=n(913834),iN=n(331497);function iA(e){let t=s.useCallback(()=>{iI.glU?.findMissingFontsAndShowPopoverWithScope(iI.vhv.CURRENT_PAGE)},[]),n=(0,iN.ut)(iI.Ez5?.uiState().showMissingFontsButton,!1);return(0,i.jsxs)("div",{className:"x78zum5 xdt5ytf x1nfngrj",children:[(0,i.jsx)("div",{className:"x1ed109x x1hx0egp xrlp15q x1nmd3yn xm735u9 xkbmbem x3wk4up",children:e.message}),(0,i.jsx)("div",{className:"x1ed109x x1hx0egp xrlp15q x1nmd3yn xm735u9 xkbmbem x3wk4up",children:(0,F.t)("ai_assistant.missing_fonts_explanation")}),(0,i.jsxs)("div",{className:"x78zum5 x1nfngrj x7hzu26",children:[n&&(0,i.jsx)(eP.$n,{variant:"secondary",onClick:t,children:(0,F.t)("ai_assistant.resolve_fonts")}),(0,i.jsx)(eP.$n,{variant:"primary",onClick:e.onContinue,children:n?(0,F.t)("ai_assistant.missing_fonts_continue_anyway"):(0,F.t)("ai_assistant.missing_fonts_continue")})]})]})}var iL=n(28721),iM=n(383947),iO=n(630332),iR=n(925699);let iP=(0,eb.Ju)(function(e){let t=ex.hS({open:e.open,onClose:e.onClose}),n=(0,a.wA)(),r=s.useCallback(()=>{n(iR.L({fileKey:e.fileKey,restoreVersionId:e.restoreVersionId,trackingContext:e.trackingContext})),n((0,B.Lo)())},[n,e.fileKey,e.restoreVersionId,e.trackingContext]);return(0,i.jsx)(e_.bL,{manager:t,width:"lg",children:(0,i.jsxs)(ey.vo,{children:[(0,i.jsx)(ey.Y9,{children:(0,i.jsx)(ey.hE,{children:(0,F.tx)("ai_assistant.restore.warning.header")})}),(0,i.jsx)(ey.nB,{children:(0,i.jsxs)("div",{className:"x78zum5 xdt5ytf x1rjybxy",children:[(0,i.jsx)("div",{children:(0,F.tx)("ai_assistant.restore.warning.body")}),(0,i.jsx)("div",{children:(0,F.tx)("ai_assistant.restore.warning.are_you_sure")})]})}),(0,i.jsx)(ey.wi,{children:(0,i.jsxs)(ey.jk,{children:[(0,i.jsx)(eP.$n,{variant:"secondary",onClick:()=>n((0,B.Lo)()),children:(0,F.tx)("ai_assistant.restore.warning.cancel")}),(0,i.jsx)(eP.$n,{variant:"primary",type:"submit",onClick:r,htmlAttributes:{"data-testId":"restore-version-confirm-button"},children:(0,F.tx)("ai_assistant.restore.warning.confirm")})]})})]})})},"assistant_restore_warning_modal");function iD({fileKey:e,trackingContext:t}){let n=(0,a.wA)(),s=(0,w.md)((0,iO.wc)(t.clientLifecycleId)),r=(0,w.md)((0,iO.ru)(t.clientLifecycleId)),l=(0,w.md)(iO.fC);return!(0,iM.xj)(s)||l&&s.value.restoreVersionId===l?null:(0,iM.Mx)(r)?(0,i.jsx)(eR.k,{}):(0,i.jsx)("div",{className:"xmauxvm x1k89kn4 x3qs9px",children:(0,i.jsx)(m.K,{"aria-label":(0,iM.xj)(r)?(0,F.t)("ai_assistant.restore.restored_tooltip"):(0,F.t)("ai_assistant.restore.tooltip"),disabled:(0,iM.xj)(r),onClick:()=>{if(!(0,iM.xj)(s)){console.warn("No valid savepoint available for restore");return}if((0,iM.Mx)(r)){console.warn("Restore already in progress");return}n((0,B.to)({type:iP,data:{fileKey:e,restoreVersionId:s.value.restoreVersionId,trackingContext:t}}))},"data-testid":"assistant-chat-restore-button",children:(0,i.jsx)(iL.I,{})})})}var iF=n(873291);function iz(e){let t=(0,z.O1)(),n=t.map(e=>e.id),s=1===n.length?n[0]:null,a=t.length>0,r=1===t.length?t[0]:null,l=a?r&&r.type?tH(r.type):tH("FRAME"):iF.H;return(0,i.jsxs)("div",{className:"x78zum5 xdt5ytf x1nfngrj",children:[(0,i.jsx)("div",{className:"x1ed109x x1hx0egp xrlp15q x1nmd3yn xm735u9 x37zpob x3wk4up x1akne3o",children:e.message}),(0,i.jsxs)("div",{className:"x78zum5 x6s0dn4 x1nfngrj xvxsjr2 xjbqb8w xmkeg23 x1y0btm7 x7z60cl x1mxnbhz x7hzu26",children:[(0,i.jsxs)("div",{className:"x78zum5 x6s0dn4 x1nfngrj x98rzlu",children:[(0,i.jsx)(l,{}),(0,i.jsx)("div",{className:"xrlp15q x1nmd3yn x1s688f xkbmbem x3wk4up x98rzlu x1quhyk7",children:a?n&&n.length>1?(0,F.t)("ai_assistant.selected_layers_count",{count:n.length}):r?.name||(0,F.t)("ai_assistant.selected_layer"):(0,F.t)("ai_assistant.no_layers_selected")})]}),(0,i.jsx)("div",{className:"x2lah0s",children:a&&(0,i.jsx)(eP.$n,{variant:"primary",onClick:()=>{let t=s?[s]:n||[];e.onContinue(t)},children:(0,F.t)("ai_assistant.continue")})})]})]})}var iB=n(861598),iG=n(518520),iU=n(180),iV=n(354114);function iH({header:e,body:t}){return(0,i.jsxs)("div",{className:"x78zum5 xdt5ytf xkh2ocl x9h44rk xmkeg23 x1y0btm7 x7z60cl",children:[(0,i.jsx)("div",{className:"x78zum5 xkh2ocl x1y1aw1k xyfqnmn xwib8y2 x163pfp",children:e}),t&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t_.cG,{}),(0,i.jsx)("div",{className:"x78zum5 xkh2ocl x1y1aw1k xyfqnmn xwib8y2 x163pfp",children:t})]})]})}function iK({status:e,remainingSeconds:t}){let n="pending"===e?(0,F.t)("figmake.chat.todos.auto_start_message",{seconds:t}):(0,F.t)("figmake.chat.todos.auto_start_message_cancelled");return(0,i.jsxs)("div",{className:"x78zum5 x1q0g3np x6s0dn4 x1qughib",children:[(0,i.jsx)("span",{className:"xrlp15q x4z9k3i xm735u9 xkbmbem x3wk4up x1n0bwc9",children:n}),"pending"===e&&(0,i.jsx)(eR.k,{size:"sm"})]})}let iW=0;function iq(){return`todo-${iW++}`}function iX({onAccept:e,todos:t,toolCallId:n,toolResult:a,getScratchpadFileNode:r}){let l=(0,w.Xr)(nh),o=(0,w.md)(np(n));s.useEffect(()=>{a?.result?.data&&l(n)},[a?.result?.data,l,n]);let d=s.useMemo(()=>{let e;try{a?.result?.data&&"Was not successful."!==a.result.message&&(e=JSON.parse(a.result.data).todos)}catch(e){console.warn("Error parsing toolResult.result.message:",e)}return e},[a?.result?.data,a?.result?.message]),c=d&&d.length>0?d:t,[u,p]=s.useState(()=>c.map(e=>({id:iq(),content:e,status:"todo"}))),[m,h]=s.useState(o?{status:"read-only"}:{status:"pending"}),[f,g]=s.useState(!o),[x,_]=s.useState(t);s.useEffect(()=>{o&&(h({status:"read-only"}),g(!1))},[o]),s.useEffect(()=>{(t.length!==x.length||t.some((e,t)=>e!==x[t]))&&(p(t.map(e=>({id:iq(),content:e,status:"todo"}))),_(t))},[t,x]);let y=s.useCallback(e=>{!function(e,t){let n=t();if(!n){console.error("Scratchpad file not found");return}k.Hq.system("scratchpad-inline-edit",()=>{let t=e.map(e=>`- [ ] ${e.content}`).join("\n"),i=n.sourceCode,s=function(e){let t=e.indexOf("# TODOs");if(-1===t)return null;let n=e.length,i=e.substring(t+1),s=/\n#+\s/.exec(i);return s&&void 0!==s.index&&(n=t+1+s.index),{section:e.substring(t,n),startIndex:t,endIndex:n}}(i);if(s){let e=i.substring(0,s.startIndex),a=i.substring(s.endIndex);n.sourceCode=e+`# TODOs

${t}

`+a}else n.sourceCode=i+`

# TODOs

${t}`;iV.Y5.commit()})}(e,r)},[r]),v=s.useCallback(e=>{(0,t$.KF)("read-only"!==m.status,"You cannot edit a todo in read-only mode"),h({status:"editing",editingTodoId:e})},[m.status]),b=s.useCallback((e,t)=>{let n;(0,t$.KF)("editing"===m.status,"We should already be in editing mode"),h({status:"editing",editingTodoId:null}),p(n=t?u.map(n=>n.id===e?{...n,text:t}:n):u.filter(t=>t.id!==e)),y(n)},[u,m.status,y]),C=s.useCallback(e=>{(0,t$.KF)("read-only"!==m.status,"You cannot delete a todo in read-only mode"),"editing"!==m.status&&h({status:"editing",editingTodoId:null});let t=u.filter(t=>t.id!==e);p(t),y(t)},[u,m.status,y]),j=s.useCallback(()=>{let e={id:iq(),content:"",status:"todo"};p([...u,e]),h({status:"editing",editingTodoId:e.id})},[u]),E=s.useCallback(()=>{if("read-only"===m.status)return;h({status:"read-only"}),y(u);let t=u.map(e=>e.content);g(!1),l(n),e(t)},[m,u,e,y,l,h,n]),T=Math.max(0,5-function(e){let[t,n]=s.useState(0);return s.useEffect(()=>{if(!e){n(0);return}let i=setTimeout(()=>n(t+1),1e3);return()=>clearTimeout(i)},[e,t]),t}("pending"===m.status));return(s.useEffect(()=>{if("pending"===m.status){let e=setTimeout(E,5e3);return()=>clearTimeout(e)}},[m.status,E]),0===u.length)?null:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(iH,{header:(0,i.jsx)(iY,{todoCount:u.length,onEdit:()=>v(null),onAddTodo:j,state:m,isExpanded:f,onToggleExpand:()=>g(e=>!e)}),body:f&&(0,i.jsxs)("div",{className:"x78zum5 xdt5ytf x1nfngrj xkh2ocl xh8yej3",children:[(0,i.jsx)(t8,{todos:u,onEditStart:v,onSaveEdits:b,onDelete:C,isReadOnly:"read-only"===m.status,editingTodoId:"editing"===m.status?m.editingTodoId:null}),"editing"===m.status&&(0,i.jsx)("div",{className:"x78zum5 x1q0g3np x6s0dn4 x1nfngrj xkh2ocl x7hzu26 x1ef8nbk x1cmmqis xilkfi8",children:(0,i.jsx)(eP.WW,{variant:"primary",onClick:E,children:(0,F.t)("figmake.scratchpad.start_tasks_button")})})]})}),"read-only"!==m.status&&(0,i.jsx)(iK,{status:m.status,remainingSeconds:T})]})}function iY({todoCount:e,isExpanded:t,onEdit:n,onAddTodo:s,onToggleExpand:a,state:r}){let l;return"pending"===r.status?l=(0,i.jsx)(eP.$n,{variant:"secondary",onClick:n,children:(0,F.t)("figmake.scratchpad.edit_button")}):"editing"===r.status&&(l=(0,i.jsx)(m.K,{variant:"ghost","aria-label":(0,F.t)("figmake.scratchpad.add_todo_button"),onClick:s,children:(0,i.jsx)(iU.$,{})})),(0,i.jsxs)("div",{className:"x78zum5 x1q0g3np x6s0dn4 x1qughib xh8yej3",children:[(0,i.jsxs)("div",{className:"x78zum5 x1q0g3np x6s0dn4 x1nfngrj",children:[(0,i.jsx)("div",{className:"x78zum5 xl56j7k x6s0dn4",children:(0,i.jsx)(tA.Z,{})}),(0,i.jsxs)("p",{className:"xuzfeq1 x8yk33q x1e00guj x18zpg43 x22v61l",children:[(0,F.t)("figmake.scratchpad.header_title")," \xb7 ",e]})]}),(0,i.jsxs)("div",{className:"x78zum5 x1q0g3np x6s0dn4 x1nfngrj",children:[l,(0,i.jsx)(m.K,{variant:"ghost","aria-label":(0,F.t)("figmake.scratchpad.toggle_expand_button"),onClick:a,children:t?(0,i.jsx)(tQ.l,{}):(0,i.jsx)(tJ.k,{})})]})]})}var iZ=n(652539),iJ=n(10074),iQ=n(996715),i$=n(131442),i0=n(174549);function i1({text:e}){return(0,i.jsxs)("div",{className:"x78zum5 x1q0g3np x6s0dn4 x167g77z xkh2ocl",children:[(0,i.jsx)("div",{className:"xvvfnsg",children:(0,i.jsx)(i$.r,{})}),(0,i.jsx)("div",{className:"xrbesu5 x12cwyba x1l993ej x1ejgcx7 x1aos5ly",children:e})]})}function i2({title:e,subtitle:t,interaction:n}){return(0,i.jsx)(i4,{icon:(0,i.jsx)(eR.k,{size:"md"}),title:e,subtitle:t,interaction:n})}function i3({title:e,subtitle:t,interaction:n}){return(0,i.jsx)(i4,{icon:(0,i.jsx)(i0.V,{}),title:e,subtitle:t,interaction:n})}function i5({title:e,subtitle:t,interaction:n}){return(0,i.jsx)(i4,{icon:(0,i.jsx)("div",{className:"x15edyk6",children:(0,i.jsx)(eB.e,{})}),title:e,subtitle:t,interaction:n})}function i4({icon:e,title:t,subtitle:n,interaction:s}){return(0,i.jsxs)("div",{className:"x78zum5 x1q0g3np x167g77z xwib8y2 xkh2ocl",children:[(0,i.jsx)("div",{className:"x78zum5 x1cy8zhl xkh2ocl",children:e}),(0,i.jsxs)("div",{className:"x78zum5 xdt5ytf x1cy8zhl x167g77z xkh2ocl",children:[(0,i.jsxs)("div",{className:"x78zum5 xdt5ytf x1cy8zhl xdpxx8g",children:[(0,i.jsx)("div",{className:"xrbesu5 x12cwyba x1l993ej x1ejgcx7 x1aos5ly",children:t}),(0,i.jsx)("div",{className:"xuzfeq1 x8yk33q x1e00guj x18zpg43 x22v61l x1n0bwc9",children:n})]}),s]})]})}function i6({dismissSupabase:e,trackingContext:t}){let n=(0,ty.wT)(),a=(0,U.tS)()||"",r=s.useCallback(()=>{(0,X.oU)({persistentEntityId:t.persistentEntityId,clientLifecycleId:t.clientLifecycleId},"toolCta",a),n()},[n,t.persistentEntityId,t.clientLifecycleId,a]),l=(0,eh.g7)();return(0,i.jsx)(i3,{title:(0,F.t)("figmake.supabase.cta.list.account_connected"),subtitle:(0,F.t)("figmake.supabase.cta.auth.body_text"),interaction:(0,i.jsxs)("div",{className:"x78zum5 x167g77z",children:[(0,i.jsx)(eP.WW,{variant:l?"secondary":"primary",onClick:r,children:(0,F.t)("figmake.supabase.connect")}),(0,i.jsx)(eP.WW,{variant:"secondary",onClick:()=>e(),children:(0,F.t)("figmake.supabase.cancel")})]})})}var i7=n(847714);function i8({toolCallId:e,toolName:t,dismissSupabase:n,trackingContext:s}){let{organization:r}=(0,ty.mS)(),l=(0,a.wA)();return(0,i.jsxs)("div",{className:"x78zum5 xdt5ytf x167g77z xkh2ocl",children:[(0,i.jsx)(i1,{text:(0,F.t)("figmake.supabase.cta.list.account_connected")}),(0,i.jsx)(i1,{text:(0,F.t)("figmake.supabase.cta.list.org_connected",{org:r?.name??""})}),(0,i.jsx)(i3,{title:(0,F.t)("figmake.supabase.cta.connect_to_existing_projects.title"),subtitle:(0,F.t)("figmake.supabase.cta.connect_to_existing_projects.subtitle"),interaction:(0,i.jsxs)("div",{className:"x78zum5 x167g77z",children:[(0,i.jsx)(eP.WW,{variant:"primary",onClick:()=>{l((0,B.to)({type:i7.Z,data:{toolCallId:e,toolName:t,trackingContext:s,source:"toolCta"},showModalsBeneath:!0}))},children:(0,F.t)("figmake.supabase.cta.connect_to_existing_projects.button")}),(0,i.jsx)(eP.WW,{variant:"secondary",onClick:()=>n(),children:(0,F.t)("figmake.supabase.cancel")})]})})]})}function i9(){let{organization:e}=(0,ty.mS)(),{connectedProject:t}=(0,ty.GC)(),n=t?.name??"";return(0,i.jsxs)("div",{className:"x78zum5 xdt5ytf x167g77z xkh2ocl",children:[(0,i.jsx)(i1,{text:(0,F.t)("figmake.supabase.cta.list.account_connected")}),(0,i.jsx)(i1,{text:(0,F.t)("figmake.supabase.cta.list.org_connected",{org:e?.name??""})}),(0,i.jsx)(i1,{text:(0,F.t)("figmake.supabase.cta.list.project_connected",{project:n})})]})}function se(){let{organization:e}=(0,ty.mS)(),t=(0,w.md)(iQ.Kj);if(!t||"connecting"!==t.state)return null;let n=t.project.name??"";return(0,i.jsxs)("div",{className:"x78zum5 xdt5ytf x167g77z xkh2ocl",children:[(0,i.jsx)(i1,{text:(0,F.t)("figmake.supabase.cta.list.account_connected")}),(0,i.jsx)(i1,{text:(0,F.t)("figmake.supabase.cta.list.org_connected",{org:e?.name??""})}),(0,i.jsx)(i2,{title:(0,F.t)("figmake.supabase.cta.list.project_connecting",{project:n}),subtitle:(0,F.t)("figmake.supabase.cta.list.project_connecting.subtitle")})]})}var st=n(972700);function sn({toolCallId:e,toolName:t,dismissSupabase:n,trackingContext:s}){let{organization:r}=(0,ty.mS)(),l=(0,a.wA)();return(0,i.jsxs)("div",{className:"x78zum5 xdt5ytf x167g77z xkh2ocl",children:[(0,i.jsx)(i1,{text:(0,F.t)("figmake.supabase.cta.list.account_connected")}),(0,i.jsx)(i1,{text:(0,F.t)("figmake.supabase.cta.list.org_connected",{org:r?.name??""})}),(0,i.jsx)(i3,{title:(0,F.t)("figmake.supabase.cta.create_project.title"),subtitle:(0,F.t)("figmake.supabase.cta.create_project.subtitle"),interaction:(0,i.jsxs)("div",{className:"x78zum5 x167g77z",children:[(0,i.jsx)(eP.WW,{variant:"primary",onClick:()=>{l((0,B.to)({type:st.AP,data:{toolCallId:e,toolName:t,trackingContext:s,source:"toolCta"},showModalsBeneath:!0}))},children:(0,F.t)("figmake.supabase.cta.create_project.button")}),(0,i.jsx)(eP.WW,{variant:"secondary",onClick:()=>n(),children:(0,F.t)("figmake.supabase.cancel")})]})})]})}function si(){return(0,i.jsx)("div",{className:"x78zum5 xdt5ytf x167g77z xkh2ocl xl56j7k x6s0dn4 x1tamke2 xh8yej3",children:(0,i.jsx)(eR.k,{})})}function ss({toolCallId:e,toolName:t,dismissSupabase:n,trackingContext:a}){let{authenticated:r,authenticationExpired:l,connectedProject:o,existingProjects:d,isLoading:c}=(0,ty.zA)(),u=(0,w.Xr)(tl.hR),p=(0,w.md)(iQ.Kj);return(0,s.useEffect)(()=>{if(c){u(tl.s8.LOADING);return}if(p&&"connecting"===p.state){u(tl.s8.CONNECTING_TO_PROJECT);return}o?u(tl.s8.CONNECTED_PROJECT):r&&d.length?u(tl.s8.CONNECT_TO_EXISTING_PROJECTS):r&&!l?u(tl.s8.CREATE_PROJECT):u(tl.s8.AUTH)},[c,o,d,r,u,p,l]),(0,i.jsx)(sa,{toolCallId:e,toolName:t,dismissSupabase:n,trackingContext:a})}function sa({toolCallId:e,toolName:t,dismissSupabase:n,trackingContext:a}){let r=(0,w.md)(tl.hR),l=(0,U.tS)()||"",o=s.useRef(!1);switch(s.useEffect(()=>{if(o.current)return;let e=(0,X.oR)({persistentEntityId:a.persistentEntityId,clientLifecycleId:a.clientLifecycleId},"toolCta",r,l);o.current=e},[r,a.persistentEntityId,a.clientLifecycleId,l]),r){case tl.s8.AUTH:return(0,i.jsx)(i6,{dismissSupabase:n,trackingContext:a});case tl.s8.CONNECTING_TO_PROJECT:return(0,i.jsx)(se,{});case tl.s8.CONNECT_TO_EXISTING_PROJECTS:return(0,i.jsx)(i8,{toolCallId:e,toolName:t,dismissSupabase:n,trackingContext:a});case tl.s8.CREATE_PROJECT:return(0,i.jsx)(sn,{toolCallId:e,toolName:t,dismissSupabase:n,trackingContext:a});case tl.s8.CONNECTED_PROJECT:return(0,i.jsx)(i9,{});case tl.s8.LOADING:return(0,i.jsx)(si,{})}}var sr=n(114344);function sl({toolCallId:e,toolName:t,disabledStatus:n,dismissSupabase:s,trackingContext:a}){return n?(0,i.jsx)(iH,{header:(0,i.jsx)(so,{disabledStatus:n})}):(0,i.jsx)(iH,{header:(0,i.jsx)(sd,{}),body:(0,i.jsx)(ss,{toolCallId:e,toolName:t,dismissSupabase:s,trackingContext:a})})}function so({disabledStatus:e}){let t=s.useMemo(()=>{switch(e){case iB.VD.TOOL_CALL_SUCCESS:return(0,F.t)("figmake.supabase.cta.collapsed.success");case iB.VD.TOOL_CALL_DISABLED:return(0,F.t)("figmake.supabase.cta.collapsed.disabled");case iB.VD.TOOL_CALL_PENDING:return(0,F.t)("figmake.supabase.cta.collapsed.pending");case iB.VD.TOOL_CALL_CANCELLED:default:return(0,F.t)("figmake.supabase.cta.collapsed.failure")}},[e]);return(0,i.jsxs)("div",{className:"x78zum5 x1q0g3np x6s0dn4 x167g77z",children:[(0,i.jsx)("div",{className:"xvy4d1p xxk0z11 x78zum5 xl56j7k x6s0dn4",children:(0,i.jsx)(iZ.B,{svg:sr.A,useOriginalSrcFills_DEPRECATED:!0,svgWidth:"14px",svgHeight:"14px"})}),(0,i.jsx)("p",{className:"xrbesu5 x12cwyba x1l993ej x1ejgcx7 x1aos5ly",children:t})]})}function sd(){return(0,i.jsxs)("div",{className:"x78zum5 x1q0g3np x6s0dn4 x1qughib xh8yej3 xou54vl",children:[(0,i.jsxs)("div",{className:"x78zum5 x1q0g3np x6s0dn4 x167g77z",children:[(0,i.jsx)("div",{className:"xvy4d1p xxk0z11 x78zum5 xl56j7k x6s0dn4",children:(0,i.jsx)(iZ.B,{svg:sr.A,useOriginalSrcFills_DEPRECATED:!0,svgWidth:"14px",svgHeight:"14px"})}),(0,i.jsx)("p",{className:"xrbesu5 x12cwyba x1l993ej x1ejgcx7 x1aos5ly",children:(0,F.t)("figmake.supabase.cta.title")})]}),(0,i.jsx)(t_.jc,{url:iJ.kS,linkText:(0,F.t)("figmake.supabase.cta.link")})]})}var sc=n(368422),su=n(841971),sp=n(772963),sm=n(304425),sh=n(647178);function sf({toolCallId:e,toolName:t,disabledStatus:n,initialSecretName:s,dismissSupabase:a,trackingContext:r}){return n?(0,i.jsx)(iH,{header:(0,i.jsx)(sg,{disabledStatus:n,initialSecretName:s})}):(0,i.jsx)(iH,{header:(0,i.jsx)(sx,{}),body:(0,i.jsx)(s_,{toolCallId:e,toolName:t,initialSecretName:s,dismissSupabase:a,trackingContext:r})})}function sg({initialSecretName:e,disabledStatus:t}){let n=s.useMemo(()=>{switch(t){case iB.VD.TOOL_CALL_SUCCESS:return(0,F.t)("figmake.supabase.create_secret_cta.collapsed.success",{secretName:e});case iB.VD.TOOL_CALL_DISABLED:return(0,F.t)("figmake.supabase.create_secret_cta.collapsed.disabled");case iB.VD.TOOL_CALL_CANCELLED:default:return(0,F.t)("figmake.supabase.create_secret_cta.collapsed.failure")}},[t,e]);return(0,i.jsxs)("div",{className:"x78zum5 x1q0g3np x6s0dn4 x167g77z",children:[(0,i.jsx)(su.P,{}),(0,i.jsx)("p",{className:"xrbesu5 x12cwyba x1l993ej x1ejgcx7 x1aos5ly",children:n})]})}function sx(){let{connectedProject:e}=(0,ty.GC)();return(0,i.jsxs)("div",{className:"x78zum5 x1q0g3np x6s0dn4 x1qughib xh8yej3 xou54vl",children:[(0,i.jsxs)("div",{className:"x78zum5 x1q0g3np x6s0dn4 x167g77z",children:[(0,i.jsx)(su.P,{}),(0,i.jsx)("p",{className:"xrbesu5 x12cwyba x1l993ej x1ejgcx7 x1aos5ly",children:(0,F.t)("figmake.supabase.create_secret_cta.header")})]}),(0,i.jsx)(t_.jc,{url:(0,iJ.C4)(e?.id),linkText:(0,F.t)("figmake.supabase.create_secret_cta.link")})]})}function s_({toolCallId:e,toolName:t,initialSecretName:n,dismissSupabase:a,trackingContext:r}){let[l,o]=s.useState("init"),d=(0,i.jsx)(sp.G,{text:n,className:"x1i89z7r x1ey7xld x256u9z"});switch(l){case"init":return(0,i.jsx)(i3,{title:(0,F.tx)("figmake.supabase.create_secret_cta.body.title_secret_name",{secretName:d}),subtitle:(0,F.t)("figmake.supabase.create_secret_cta.body.subtitle"),interaction:(0,i.jsx)(sv,{interactionState:l,setInterationState:o,toolCallId:e,toolName:t,initialSecretName:n,dismissSupabase:a,trackingContext:r})});case"loading":return(0,i.jsx)(i2,{title:(0,F.t)("figmake.supabase.create_secret_cta.body.loading.title"),subtitle:(0,F.t)("figmake.supabase.create_secret_cta.body.loading.subtitle")});case"success":return(0,i.jsx)(i1,{text:(0,F.t)("figmake.supabase.create_secret_cta.body.title")});case"failed":return(0,i.jsx)(i5,{title:(0,F.tx)("figmake.supabase.create_secret_cta.body.error.title_secret_name",{secretName:d}),subtitle:(0,F.t)("figmake.supabase.create_secret_cta.body.error.subtitle"),interaction:(0,i.jsx)(sv,{interactionState:l,setInterationState:o,toolCallId:e,toolName:t,initialSecretName:n,dismissSupabase:a,trackingContext:r})})}}var sy=(e=>(e.INIT="init",e.LOADING="loading",e.SUCCESS="success",e.FAILED="failed",e))(sy||{});function sv({interactionState:e,setInterationState:t,toolCallId:n,toolName:a,initialSecretName:r,dismissSupabase:l,trackingContext:o}){let[d,c]=s.useState(""),u=(0,U.tS)(),p="loading"===e,m=(0,iG.S)(),h=async()=>{if(!u){console.error("No open file key found");return}t("loading");try{await sm.R.createSecret({fileKey:u,secretName:r,secretValue:d}),(0,X.XJ)(o,u)}catch(e){t("failed"),(0,sh.fQ)(e);return}t("success"),m({toolCallId:n,toolName:a,toolResult:{success:!0,message:`Successfully created secret ${r}.`}})};return(0,i.jsxs)("form",{className:"x78zum5 xdt5ytf x1cy8zhl xl56j7k x167g77z xkh2ocl xy13l1i",children:[(0,i.jsx)(sc.p,{type:"password",id:"password",value:d,onChange:c,placeholder:(0,F.t)("figmake.supabase.create_secret_cta.body.secret_value"),size:"lg",disabled:p}),p?(0,i.jsx)(t_.lV,{variant:"primary",children:(0,F.t)("figmake.supabase.create_secret_cta.body.button")}):(0,i.jsxs)("div",{className:"x78zum5 x167g77z",children:[(0,i.jsx)(eP.WW,{type:"submit",variant:"primary",onClick:h,children:(0,F.t)("figmake.supabase.create_secret_cta.body.button")}),(0,i.jsx)(eP.WW,{variant:"secondary",onClick:()=>l(),children:(0,F.t)("figmake.supabase.cancel")})]})]})}function sb(){let e=(0,d._J)(ni.L5);if(!e){console.error("Scratchpad file not found");return}return e}function sC({toolCall:e,toolResult:t,isMostRecentMessage:n,chatMessagesNodeGuid:s,trackingContext:a}){let r=t&&t.result?t.result.success?iB.t4.SUCCESS:iB.t4.FAILURE:iB.t4.PENDING;return(0,i.jsx)(sj,{toolName:e.toolName,toolCallId:e.toolCallId,partialArgs:e.partialArgs,isMostRecentMessage:n,chatMessagesNodeGuid:s,status:r,trackingContext:a,toolResult:t})}function sj({toolName:e,toolCallId:t,partialArgs:n,isMostRecentMessage:a,status:r,trackingContext:l,toolResult:o}){let d=(0,tu.gJ)(),[c,u]=s.useState(!1),[p,m]=s.useState(!1),h=(0,Q.ry)(),f=s.useMemo(()=>{if(!a)switch(r){case iB.t4.SUCCESS:return iB.VD.TOOL_CALL_SUCCESS;case iB.t4.FAILURE:return iB.VD.TOOL_CALL_CANCELLED;case iB.t4.PENDING:return iB.VD.TOOL_CALL_PENDING}return h||d&&(0,tu.d4)(e)?iB.VD.TOOL_CALL_DISABLED:c?iB.VD.TOOL_CALL_CANCELLED:void 0},[a,r,d,c,h,e,p]),g=(0,iG.S)(),x=(0,U.tS)()||"",_=s.useCallback(n=>{(0,X.IB)({persistentEntityId:l.persistentEntityId,clientLifecycleId:l.clientLifecycleId},e,x),u(!0),m(!1),g({toolCallId:t,toolName:e,toolResult:n})},[t,e,g,x,l.persistentEntityId,l.clientLifecycleId]);switch(e){case"supabase_connect":{let n={success:!1,message:"User dismissed Supabase connect tool call"};return(0,i.jsx)(sl,{toolCallId:t,toolName:e,disabledStatus:f,dismissSupabase:()=>_(n),trackingContext:l})}case"create_supabase_secret":{let s={success:!1,message:"User dismissed secret creation tool call"};return(0,i.jsx)(sf,{toolCallId:t,toolName:e,disabledStatus:f,initialSecretName:n.secretName??"",dismissSupabase:()=>_(s),trackingContext:l})}case"add_todos_tool":if(!(0,nl.z)("make_todo_list_ui"))return null;return(0,i.jsx)(iX,{onAccept:e=>{if((0,eK.kc)().make_chat_todo_list){_({success:!0,message:`The user accepted the suggested TODOs. This is what's in the to-do list:

${e.join("\n")}

You may start implementing it.`,todos:e.map(e=>({content:e,status:"todo"}))});return}let t=sb();if(!t){console.error("To-do list not found");return}let n=JSON.stringify({todos:e});_({success:!0,message:`The user accepted the suggested TODOs. This is what's in the to-do list:

${t.sourceCode}

You may start implementing it.`,data:n})},toolCallId:t,toolResult:o,todos:n.todos??[],getScratchpadFileNode:sb});default:return null}}var sk=n(989917),sw=n(725694),sE=n(883187),sT=n(371868),sS=n(465428),sI=n(723309),sN=n(697872),sA=n(356138),sL=n(129215),sM=n(321259),sO=n(832937),sR=n(836658),sP=n(820400),sD=n(25882),sF=n(511570),sz=n.n(sF),sB=n(801519),sG=n(994166);n(194789),n(494523),n(912727),n(384075);var sU=n(750802),sV=n(58212),sH=n(50536),sK=n(106921);function sW({code:e,language:t,title:n,isLoading:r}){let[l,o]=(0,s.useState)(!1),d=e.split("\n"),c=d.length>10,u=(0,a.wA)(),p=(0,s.useCallback)(()=>{u(sH.lW({stringToCopy:e,ignoreLineBreaks:!1})),u(sV.F.enqueue({message:(0,F.t)("dev_handoff.ai_assistant.code_block.copy_to_clipboard_toast")}))},[e,u]),h=(0,s.useCallback)(()=>{let t=n??"code.txt",i=new Blob([e],{type:"text/plain"}),s=URL.createObjectURL(i),a=document.createElement("a");a.href=s,a.download=t,a.click(),URL.revokeObjectURL(s)},[e,n]),f=n?`${n}`:t?(0,F.t)("dev_handoff.ai_assistant.code_block.title_for_language",{language:t}):(0,F.t)("dev_handoff.ai_assistant.code_block.title_no_language"),g=function(e){if(!e)return"plaintext";let t=e.toLowerCase();return({ts:"typescript",js:"javascript",py:"python",rb:"ruby",sh:"bash"})[t]||t}(t),x=l?e:d.slice(0,10).join("\n"),_=sG.highlight(x,sG.languages[g],g);return(0,i.jsxs)("div",{className:"x1yjdb4r xmkeg23 x1y0btm7 x7z60cl x1mxnbhz xb3r6kr",children:[(0,i.jsxs)("div",{className:"x78zum5 x6s0dn4 x1qughib xf7z5ut x1v8gsql xjwf9q1",children:[(0,i.jsx)("div",{className:"x78zum5 x6s0dn4 x1iyjqo2 xs83m0k xeuugli",children:(0,i.jsxs)("div",{className:"x78zum5 x6s0dn4 xg2d0mh x1cmmqis x192jxwq xeuugli",children:[(0,i.jsx)(sR.k,{}),(0,i.jsx)("div",{className:"x1j6dyjg x10p5zqr x1d3mw78 x1akne3o xb3r6kr xlyipyv xuxw1ft",children:f})]})}),(0,i.jsx)("div",{className:"x78zum5 x6s0dn4 xg2d0mh x2lah0s xt0e3qv",children:r?(0,i.jsx)(eR.k,{size:"md"}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(m.K,{"aria-label":(0,F.t)("dev_handoff.ai_assistant.code_block.download_tooltip"),onClick:h,variant:"ghost",children:(0,i.jsx)(sP.W,{})}),(0,i.jsx)(m.K,{"aria-label":(0,F.t)("dev_handoff.ai_assistant.code_block.copy_to_clipboard_tooltip"),onClick:p,variant:"ghost",children:(0,i.jsx)(sD.E,{})})]})})]}),(0,i.jsxs)("div",{className:"x1n2onr6",children:[(0,i.jsx)("div",{className:sz()(sK.y,E.Ay.classNames(sY.codeContent,!l&&!r&&sY.codeContentCollapsed)),"data-lang":g,children:(0,i.jsx)("pre",{className:"x1ghz6dp x1j6dyjg x1ey7xld x1d3mw78 x1akne3o xebhuq6 x1yn0g08",dangerouslySetInnerHTML:{__html:(0,sU.p)(_)}})}),c&&!l&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"x10l6tqk x1ey2m1c xu96u03 x3m8u43 xwzfr38 xzdc4m2 x47corl"}),(0,i.jsx)("div",{className:"x1yjdb4r x19y5rnk x10l6tqk x1ey2m1c xu96u03 x3m8u43 x78zum5 xuk3077 xl56j7k xp6roeo xt0e3qv",children:(0,i.jsx)(eP.$n,{onClick:()=>{o(!l)},disabled:r,variant:"secondary",children:r?(0,i.jsx)(eR.k,{size:"sm"}):(0,F.t)("dev_handoff.ai_assistant.code_block.show_more")})})]})]})]})}class sq extends sB.Kp{static getType(){return"devmode-ai-chat-code-block"}static clone(e){return new sq(e.__code,e.__language,e.__title,e.__isLoading,e.__key)}constructor(e,t=null,n=null,i,s){super(s),this.__code=e,this.__language=t,this.__title=n,this.__isLoading=i??!1}exportJSON(){return{type:"devmode-ai-chat-code-block",version:1,language:this.__language,title:this.__title,code:this.__code,isLoading:this.__isLoading}}static importJSON(e){return new sq(e.code,e.language,e.title,e.isLoading??!1)}createDOM(){return document.createElement("div")}updateDOM(){return!1}decorate(){return(0,i.jsx)(sW,{code:this.__code,language:this.__language??void 0,title:this.__title??void 0,isLoading:this.__isLoading})}}function sX(e,t,n,i){let s=new sq(e,t??null,n??null,i);return(0,sB.pT)(s)}let sY={codeContent:{kmVPX3:"xi4r6k5",kg3NbH:null,kuDDbn:null,kE3dHu:null,kP0aTx:null,kpe85a:null,k8WAf4:null,kLKAdn:null,kGO01o:null,kVQacm:"xysyzu8",kXHlph:null,kORKVm:null,$$css:!0},codeContentCollapsed:{kXHlph:"x14aock7",$$css:!0}};var sZ=n(308233),sJ=n(144949),sQ=n(568590),s$=n(772523),s0=n(692042);function s1({nodeId:e,text:t}){let n=(0,ev.getActiveTSSceneGraph)(),a=n.get(e),r=(0,sQ.Z)("ai_assistant"),l=(0,s.useMemo)(()=>a&&tH(a.type),[a]),o=(0,s.useCallback)(t=>{r((0,s0.QZ)({nodeId:t.guid,alwaysPan:!0})),n.getCurrentPage()?.setSelectionToSingleNode(e)},[r,e,n]);return a&&l?(0,i.jsx)("div",{className:"x3nfvp2 x3ajldb xmgb6t1",onMouseEnter:()=>(0,s$.Uc)(e),onMouseLeave:()=>(0,s$.Uc)(""),children:(0,i.jsx)(eD.E,{onClick:()=>o(a),children:(0,i.jsx)(sJ.v,{leading:(0,i.jsx)(l,{}),size:"sm",children:t})})}):(0,i.jsx)(i.Fragment,{})}class s2 extends sB.Kp{static getType(){return"figma-node-link"}static clone(e){return new s2(e.__nodeId,e.__text,e.__key)}constructor(e,t,n){super(n),this.__nodeId=e,this.__text=t}getNodeId(){return this.__nodeId}getText(){return this.__text}createDOM(e){let t=document.createElement("div"),n=e?.theme?.figmaNodeLink||e?.theme?.link;return n&&(t.className=n),t}decorate(){return(0,i.jsx)(s1,{nodeId:this.__nodeId,text:this.__text})}updateDOM(){return!1}static importJSON(e){let{nodeId:t,text:n}=e;return s3({nodeId:t,text:n})}exportJSON(){return{type:"figma-node-link",nodeId:this.__nodeId,text:this.__text,version:1,children:[],direction:null,format:"",indent:0}}}function s3({nodeId:e,text:t}){let n=new s2(e,t);return(0,sB.pT)(n)}let s5=[sA.iK,sL.Db,sM.v5,sM.YW,sO.jL,sO.dJ,sL.k_,sL.Db,s2,sq,sZ.R],s4="editor_theme--heading--vjD0c",s6="editor_theme--revTextCode--mNWW0",s7="editor_theme--revHeading--ImFNg",s8="editor_theme--revHeadingMedium--TFIV2",s9="editor_theme--revHeadingSmall--kK1er",ae={code:"editor_theme--code--FBk-C",heading:{h1:s4,h2:s4,h3:s4,h4:s4,h5:s4,h6:s4},link:"editor_theme--link--g9j-A",list:{listitem:"editor_theme--listItem--HtIgs",nested:{listitem:"editor_theme--nestedListItem--rxhSm"},ol:"editor_theme--listOl--bcK9i",ul:"editor_theme--listUl--9En-S"},ltr:"editor_theme--ltr--z-aAi",rtl:"editor_theme--rtl--2jeQD",paragraph:"editor_theme--paragraph--5klW3",placeholder:"editor_theme--placeholder--1ATfY",quote:"editor_theme--quote--x7A5C",text:{bold:"editor_theme--textBold--eUufn",code:"editor_theme--textCode--dShpu",italic:"editor_theme--textItalic--6aIoY",strikethrough:"editor_theme--textStrikethrough--Nx-DH",underline:"editor_theme--textUnderline--sWctL",underlineStrikethrough:"editor_theme--textUnderlineStrikethrough--BF3Oy"},figmaNodeLink:"editor_theme--figmaNodeLink--YpGcz",figmaAssetDialog:"editor_theme--figmaAssetDialog--MquNj"};var at=n(532153);let an={dependencies:[s2],export:(e,t)=>{if(!(e instanceof s2))return null;let n=e.getNodeId(),i=e.getText();return`<figma-node-link node-id="${n}">${i}</figma-node-link>`},importRegExp:/<figma-node-link node-id="([^"]+)">([^<]+)<\/figma-node-link>/,regExp:/<figma-node-link node-id="([^"]+)">([^<]+)<\/figma-node-link>$/,replace:(e,t)=>{let[,n,i]=t;if(!n||!i)return;let s=s3({nodeId:n,text:i});e.replace(s)},trigger:">",type:"text-match"};function ai(e){let[t]=(0,sT.DF)(),n=s.useMemo(()=>(function({elementTransformers:e=[],multilineElementTransformers:t=[],textFormatTransformers:n=[],textMatchTransformers:i=[],includeInlineCode:s=!1}){return[sw.TB,sw.jA,sw.mK,sw.NB,...e,...t,...s?[sw.Up]:[],sw.eA,sw.gb,sw.d7,sw.Pi,sw.Eg,sw.gW,sw.WY,...n,an,at.f,sw.ps,...i]})({elementTransformers:e.elementTransformers,multilineElementTransformers:e.multilineElementTransformers,textFormatTransformers:e.textFormatTransformers,textMatchTransformers:e.textMatchTransformers,includeInlineCode:e.transformInlineCode}),[e.elementTransformers,e.multilineElementTransformers,e.textFormatTransformers,e.textMatchTransformers,e.transformInlineCode]);return(0,s.useEffect)(()=>{try{t.update(()=>{let t=il.v.getFeatureGate("make_chat_ui_improvements")&&e.featureType===r.lV.FIGMAKE?e.textContent.split("\n").map(e=>e.match(/^( {2,3})([-*+]|\d+\.)\s/)?"    "+e.trimStart():e).join("\n"):e.textContent;(0,sw.Wn)(t,n,void 0,!0)},{discrete:!0})}catch(n){console.error("Error parsing editor state. Default to empty lexical state",n);let e=t.parseEditorState('{"root":{"children":[{"children":[],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textStyle":""}],"direction":null,"format":"","indent":0,"type":"root","version":1}}');t.setEditorState(e)}},[e.textContent,t,n,e.featureType]),(0,i.jsx)("div",{children:(0,i.jsx)(sN.$,{contentEditable:(0,i.jsx)(sS.a,{className:"x1iyjqo2",spellCheck:!1,"data-testid":"code-chat-content-editable",contentEditable:!1}),placeholder:null,ErrorBoundary:sI.R})})}function as({textContent:e,editorTheme:t,elementTransformers:n,multilineElementTransformers:s,textFormatTransformers:a,textMatchTransformers:r,transformInlineCode:l,featureType:o}){let d=function({editorTheme:e}={}){return{namespace:"code-chat-rich-text-editor",onError(e){throw e},theme:e??ae,nodes:s5}}({editorTheme:t});return(0,i.jsx)(sE.n,{initialConfig:{...d,editable:!1},children:(0,i.jsx)(ai,{textContent:e,elementTransformers:n,multilineElementTransformers:s,textFormatTransformers:a,textMatchTransformers:r,transformInlineCode:l,featureType:o})})}let aa={dependencies:[sq],export:e=>{if(e instanceof sq){let t=e.exportJSON(),n=t.language??"",i=t.code,s=t.title?` title="${t.title}"`:"";return`\`\`\`${n}${s}
${i}
\`\`\``}return null},regExpStart:/^[ \t]*```([\w-]+)?( *title="([^"]+)")?/,regExpEnd:{optional:!0,regExp:/[ \t]*```$/},replace:(e,t,n,i,s,a)=>{let r=n[1]??null,l=n[2]??null,o=n[3]??null;if(!t&&s){let t;if(1===s.length)t=i?sX((r||"")+(l||"")+s[0],null):sX(s[0]?.startsWith(" ")?s[0]?.slice(1):s[0]||"",r,o);else{if(s[0]?.trim().length===0)for(;s.length>0&&!s[0]?.length;)s.shift();else s[0]=s[0]?.startsWith(" ")?s[0].slice(1):s[0]||"";for(;s.length>0&&!s[s.length-1]?.length;)s.pop();t=sX(s.join("\n"),r,o,!i)}e.append(t)}},type:"multiline-element"};function ar(e){let t=(0,ef.Oc)()?function(){let e=il.v.getFeatureGate("make_chat_ui_improvements");return{code:s6,heading:{h1:e?s8:s7,h2:e?s8:s7,h3:e?s8:s7,h4:e?s8:s7,h5:e?s9:s7,h6:e?s9:s7},link:"editor_theme--revLink--cC1OE",list:{listitem:e?"editor_theme--revListItemNew--dU0-c":"editor_theme--revListItem--t-JSJ",nested:{listitem:"editor_theme--revNestedListItem--xI4pL"},ol:e?"editor_theme--revListOlNew--82hde":"editor_theme--revListOl--VIR3k",ul:e?"editor_theme--revListUlNew--vIAEZ":"editor_theme--revListUl--l1Hwr"},ltr:"editor_theme--revLtr--P2rY9",rtl:"editor_theme--revRtl--p2uEF",paragraph:e?"editor_theme--revParagraphNew--t7ysS":"editor_theme--revParagraph--nf-XL",placeholder:"editor_theme--revPlaceholder--MjHDL",quote:e?"editor_theme--revQuoteNew--UjPv9":"editor_theme--revQuote--vLFjg",text:{bold:e?"editor_theme--revTextBoldNew--e1fsf":"editor_theme--revTextBold--B6at8",code:e?"editor_theme--revTextInlineCode--QfLl8":s6,italic:"editor_theme--revTextItalic--Bc6Q3",strikethrough:"editor_theme--revTextStrikethrough--OgIi0",underline:"editor_theme--revTextUnderline--Vbg5K",underlineStrikethrough:"editor_theme--revTextUnderlineStrikethrough--H-f-D"}}}():ae,n=il.v.getFeatureGate("make_chat_ui_improvements")&&e===r.lV.FIGMAKE,a=(0,s.useMemo)(()=>[aa],[]),l=(0,s.useMemo)(()=>[sw.Sq],[]),o=(0,s.useMemo)(()=>e===r.lV.AI_ASSISTANT?a:n?l:void 0,[e,n,a,l]);return function(s){return(0,i.jsx)(as,{textContent:s,editorTheme:t,multilineElementTransformers:o,transformInlineCode:n,featureType:e})}}var al=n(527494),ao=n(414173),ad=n(913372);function ac({result:e,toolName:t,serverLogoUrl:n}){let[a,r]=s.useState(!1),l=e.success?iB.lh.SUCCESS:iB.lh.FAILED,o=s.useCallback(()=>{r(!a)},[a]),d=s.useMemo(()=>{if(!e.data)return JSON.stringify(e,null,2);try{let t=JSON.parse(e.data).map(e=>{if("text"===e.type){let t;try{t=JSON.parse(e.text)}catch(n){t=e.text}return{...e,text:t}}return e}),n={success:e.success,message:e.message,data:t};return JSON.stringify(n,null,2)}catch(t){return JSON.stringify(e,null,2)}},[e]);return(0,i.jsxs)("div",{className:"x78zum5 xdt5ytf x1nfngrj xh8yej3",children:[(0,i.jsxs)("button",{className:"x78zum5 x6s0dn4 x1nfngrj x11g6tue xc342km xng3xce x9r1u3d x1717udv xh8yej3 xdpxx8g x1ypdohk",onClick:o,children:[(0,i.jsx)(au,{status:l}),(0,i.jsx)("div",{className:"xrbesu5 x12cwyba x1l993ej x1ejgcx7 x1aos5ly xh8yej3",children:t}),n&&(0,i.jsx)("div",{className:"x78zum5 x6s0dn4 xl56j7k xvy4d1p xxk0z11 x1ai9mow",children:(0,i.jsx)(eQ.oW,{className:"x1xp8n7a xmix8c7 x19y5rnk x19kjcj4 x10d6zji",src:n,alt:t})}),(0,i.jsx)(m.K,{onClick:o,"aria-label":(0,F.t)("figmake.mcp_tool.cta.results"),children:a?(0,i.jsx)(tJ.k,{}):(0,i.jsx)(al.a,{})})]}),a&&(0,i.jsx)("div",{className:"xl8oe17",children:(0,i.jsx)("pre",{className:"x1v8gsql x19y5rnk xi4r6k5 xif65rj x1ey7xld x1akne3o x126k92a x1vvkbs x1odjw0f xmkeg23 x1y0btm7 x7z60cl xuyqlj2 x1hx0egp",children:d})})]})}function au({status:e}){let t=(0,i.jsx)(i0.V,{});switch(e){case iB.lh.LOADING:t=(0,i.jsx)(eR.k,{size:"md"});break;case iB.lh.SUCCESS:t=(0,i.jsx)(i$.r,{className:"x11vm0g5"});break;case iB.lh.FAILED:t=(0,i.jsx)(ao.f,{className:"x11ui4if"});break;case iB.lh.CANCELLED:t=(0,i.jsx)(ad.J,{className:"xmauxvm"});break;case iB.lh.IDLE:t=(0,i.jsx)(i0.V,{});break;default:(0,t$.xb)(e)}return(0,i.jsx)("div",{className:"x78zum5 x6s0dn4 xl56j7k xvy4d1p xxk0z11 x2lah0s xb3r6kr",children:t})}function ap({server:e,onAuthorize:t,onDismiss:n,isUserAuthorized:s}){return(0,i.jsxs)("div",{className:"x78zum5 xdt5ytf x1nfngrj xh8yej3",children:[(0,i.jsxs)("div",{className:"x78zum5 x1cy8zhl x1nfngrj",children:[(0,i.jsx)(au,{status:iB.lh.LOADING}),(0,i.jsxs)("div",{className:"x78zum5 xdt5ytf xg2d0mh",children:[(0,i.jsx)("div",{className:"xrbesu5 x12cwyba x1l993ej x1ejgcx7 x1aos5ly",children:(0,F.t)("figmake.mcp_tool.cta.setup_connection")}),(0,i.jsx)("div",{className:"xuzfeq1 x8yk33q x1e00guj x18zpg43 x22v61l x1n0bwc9",children:e.tagline})]})]}),(0,i.jsxs)("div",{className:"x78zum5 x1nfngrj x1nhvcw1 xh8yej3 xl8oe17",children:[(0,i.jsx)(eP.WW,{variant:"primary",onClick:t,children:(0,F.t)("figmake.mcp_tool.cta.connect")}),s&&(0,i.jsx)(eP.WW,{variant:"secondary",onClick:n,children:(0,F.t)("figmake.mcp_tool.cta.cancel")})]})]})}function am({server:e,success:t}){let n=t?iB.lh.SUCCESS:iB.lh.CANCELLED,s=t?(0,F.t)("figmake.mcp_tool.cta.successful_connection",{server_name:e.name}):(0,F.t)("figmake.mcp_tool.cta.cancelled_connection");return(0,i.jsx)("div",{className:"x78zum5 xdt5ytf x1nfngrj xh8yej3",children:(0,i.jsxs)("div",{className:"x78zum5 x1cy8zhl x1nfngrj",children:[(0,i.jsx)(au,{status:n}),(0,i.jsx)("div",{className:"x78zum5 xdt5ytf xg2d0mh",children:(0,i.jsx)("div",{className:"xrbesu5 x12cwyba x1l993ej x1ejgcx7 x1aos5ly",children:s})})]})})}function ah({toolArgs:e,toolName:t,status:n,serverLogoUrl:a}){let[r,l]=s.useState(!1),o=()=>l(!r),d=Object.keys(e).length>0,c=s.useMemo(()=>d?JSON.stringify(e,null,2):(0,F.t)("figmake.mcp_tool.args.no_parameters"),[e,d]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("button",{className:"x78zum5 x6s0dn4 x1nfngrj x11g6tue xc342km xng3xce x9r1u3d x1717udv xh8yej3 xdpxx8g x1ypdohk",onClick:o,"aria-expanded":r,type:"button",children:[(0,i.jsx)(au,{status:n}),(0,i.jsx)("div",{className:"xrbesu5 x12cwyba x1l993ej x1ejgcx7 x1aos5ly x1iyjqo2 xs83m0k xeuugli",children:t}),a&&(0,i.jsx)("div",{className:"x78zum5 x6s0dn4 xl56j7k xvy4d1p xxk0z11 x1ai9mow",children:(0,i.jsx)(eQ.oW,{className:"x1xp8n7a xmix8c7 x19y5rnk x19kjcj4 x10d6zji",src:a,alt:t})}),(0,i.jsx)(m.K,{onClick:o,"aria-label":(0,F.t)("figmake.mcp_tool.cta.toggle_args"),children:r?(0,i.jsx)(tJ.k,{}):(0,i.jsx)(al.a,{})})]}),r&&(0,i.jsx)("div",{className:"xl8oe17",children:(0,i.jsx)("pre",{...{0:{className:"x1v8gsql x19y5rnk xi4r6k5 xif65rj x1ey7xld x1akne3o x126k92a x1vvkbs xuyqlj2 x1odjw0f xmkeg23 x1y0btm7 x7z60cl x1ghz6dp x1hx0egp"},1:{className:"x1v8gsql x19y5rnk xi4r6k5 xif65rj x1ey7xld x126k92a x1vvkbs xuyqlj2 x1odjw0f xmkeg23 x1y0btm7 x7z60cl x1ghz6dp x1hx0egp x3vvef7"}}[!d<<0],children:c})})]})}var af=n(188426),ag=n(7720);function ax({serverName:e,serverLogoUrl:t,variant:n}){let a=s.useMemo(()=>{switch(n){case"cancelled":return(0,F.t)("figmake.mcp_tool.cta.cancelled",{server_name:e});case"unauthorized":return(0,F.t)("figmake.mcp_tool.cta.connect_to_server",{server_name:e});case"default":return e}},[n,e]);return(0,i.jsx)("div",{className:"x78zum5 xdt5ytf xg2d0mh xh8yej3",children:(0,i.jsxs)("div",{className:"x78zum5 x6s0dn4 x1nfngrj xh8yej3",children:[(0,i.jsx)("div",{className:"x78zum5 x6s0dn4 xl56j7k xvy4d1p xxk0z11",children:(0,i.jsx)(eQ.oW,{className:"x1xp8n7a xmix8c7 x19y5rnk x19kjcj4 x10d6zji",src:t,alt:e})}),(0,i.jsx)("div",{className:"xrbesu5 x12cwyba x1l993ej x1ejgcx7 x1aos5ly",children:a}),"unauthorized"===n&&(0,i.jsx)("div",{className:"xrlp15q x1nmd3yn xm735u9 xkbmbem x3wk4up x1iyjqo2 x78zum5 x13a6bvl",children:(0,i.jsx)(eA.N,{href:"https://help.figma.com/hc/articles/35440096186007",newTab:!0,children:(0,i.jsxs)("div",{className:"x78zum5 x6s0dn4 xg2d0mh",children:[(0,i.jsx)(af.S,{className:"xrnak4o"}),(0,F.t)("figmake.mcp_tool.cta.learn_more")]})})})]})})}function a_(){return(0,i.jsx)("div",{className:"x78zum5 xdt5ytf xg2d0mh xh8yej3",children:(0,i.jsxs)("div",{className:"x78zum5 x6s0dn4 x1nfngrj xh8yej3",children:[(0,i.jsx)("div",{className:"x78zum5 x6s0dn4 xl56j7k xvy4d1p xxk0z11",children:(0,i.jsx)(ag.K,{})}),(0,i.jsx)("div",{className:"xrbesu5 x12cwyba x1l993ej x1ejgcx7 x1aos5ly",children:(0,F.t)("figmake.mcp_tool.connectors_disabled")})]})})}function ay({toolCall:e,toolResult:t}){let n;let s=e.partialArgs,a=s.tool_name||e.toolName,r=s.tool_input||{},l=s.serverName||"",o=s.serverLogoUrl,d=(0,c.Tr)(a).serverToolName;if(t?.result){let e=t.result;n={success:e.success??!0,message:e.message??"",data:e.data}}return a&&"run_mcp_tool"!==a&&l&&d&&o?n?(0,i.jsx)(iH,{header:(0,i.jsx)(ax,{serverName:l,serverLogoUrl:o,variant:"default"}),body:(0,i.jsx)(ac,{result:n,toolName:d,serverLogoUrl:void 0})}):(0,i.jsx)(iH,{header:(0,i.jsx)(ax,{serverName:l,serverLogoUrl:o,variant:"default"}),body:(0,i.jsx)(ah,{toolArgs:(0,nr.y8)(r),toolName:d,status:iB.lh.LOADING,serverLogoUrl:void 0})}):(console.warn("[McpAutoRunToolCall] Insufficient information to render:",{fullToolName:a,serverName:l,serverToolName:d,hasLogo:!!o}),null)}var av=n(166887);function ab({onConfirm:e,onDismiss:t,isExecutingTools:n,chatMessagesNodeGuid:a,isBatch:r=!1}){let l=(0,w.md)((0,Z.mC)(a)),o=!l||""===l.trim(),d=(0,nl.z)("bake_mcp_auto_run")&&!r,c=s.useCallback(async()=>{e&&await e()},[e]),u=s.useCallback(async()=>{e&&await e(eg.A4.AUTO_RUN)},[e]),p=s.useCallback(()=>{t&&t()},[t]);s.useEffect(()=>{if(!o||!e||n)return;let t=e=>{"Enter"!==e.key||e.shiftKey||e.metaKey||e.ctrlKey||e.altKey||(e.preventDefault(),c())};return window.addEventListener("keydown",t,{capture:!0}),()=>window.removeEventListener("keydown",t,{capture:!0})},[o,e,c,n]);let m=r?(0,F.t)("figmake.mcp_tool.cta.run_all"):(0,F.t)("figmake.mcp_tool.cta.run_tool"),h=r?(0,F.t)("figmake.mcp_tool.cta.cancel_all"):(0,F.t)("figmake.mcp_tool.cta.cancel");return(0,i.jsx)("div",{className:"x78zum5 xh8yej3",children:(0,i.jsxs)("div",{className:"x78zum5 x1nfngrj x1nhvcw1 xl8oe17 x1iyjqo2",children:[(0,i.jsx)(eP.WW,{variant:"primary",onClick:c,disabled:n,children:m+(o?" \u21B5":"")}),d&&(0,i.jsx)(eP.WW,{variant:"secondary",onClick:u,disabled:n,children:(0,F.t)("figmake.mcp_clients.allow_unsupervised")}),(0,i.jsx)(eP.WW,{variant:"secondary",onClick:p,disabled:n,children:h})]})})}function aC({batchedToolMap:e}){let t=Object.keys(e).length>1;return(0,i.jsx)("div",{className:"x78zum5 xdt5ytf x1nfngrj xh8yej3",children:(0,i.jsx)("div",{className:"x78zum5 xdt5ytf x1nfngrj xh8yej3 xuyqlj2 x1odjw0f x1jwbysl",children:Object.values(e).flatMap(({serverInfo:e,toolStates:n})=>n.map(n=>{if(!n.toolResult)return console.error("Tool result is undefined",n),null;let s=t?e.serverLogoUrl:void 0;return(0,i.jsx)("div",{className:"x78zum5 xdt5ytf xg2d0mh xh8yej3",children:(0,i.jsx)(ac,{result:n.toolResult,toolName:n.serverToolName,serverLogoUrl:s})},n.toolCallId)}))})})}function aj({batchedToolMap:e,onConfirmAll:t,onDismissAll:n,isUserAuthorized:a,allDismissed:r,isExecutingTools:l,isStreamingToolCalls:o,chatMessagesNodeGuid:d}){let c=Object.keys(e).length>1,u=s.useMemo(()=>Object.values(e).flatMap(({toolStates:e})=>e).length>1,[e]);return(0,i.jsxs)("div",{className:"x78zum5 xdt5ytf x1nfngrj xh8yej3",children:[(0,i.jsx)("div",{className:"x78zum5 xdt5ytf x1nfngrj xh8yej3 xuyqlj2 x1odjw0f x1jwbysl",children:Object.values(e).flatMap(({serverInfo:e,toolStates:t})=>t.map(({toolCallId:t,toolArgs:n,serverToolName:s,status:a})=>{let l=c?e.serverLogoUrl:void 0;return(0,i.jsx)("div",{className:"x78zum5 xdt5ytf xg2d0mh xh8yej3",children:(0,i.jsx)(ah,{toolArgs:(0,nr.y8)(n),toolName:s,status:r?iB.lh.CANCELLED:a,serverLogoUrl:l})},t)}))}),a&&!r&&!l&&!o&&(0,i.jsx)(ab,{onConfirm:t,onDismiss:n,isExecutingTools:l,chatMessagesNodeGuid:d,isBatch:u})]})}function ak({batchedToolMap:e,variant:t}){let n=Object.keys(e).length;if(1===n){let{serverName:n,serverLogoUrl:s}=Object.values(e)[0].serverInfo;return(0,i.jsx)(ax,{serverName:n,serverLogoUrl:s,variant:t})}return(0,i.jsx)("div",{className:"x78zum5 xdt5ytf xg2d0mh xh8yej3",children:(0,i.jsxs)("div",{className:"x78zum5 x6s0dn4 x1nfngrj xh8yej3",children:[(0,i.jsx)("div",{className:"x78zum5 x6s0dn4 xl56j7k xvy4d1p xxk0z11",children:(0,i.jsx)(ag.K,{})}),(0,i.jsx)("div",{className:"xrbesu5 x12cwyba x1l993ej x1ejgcx7 x1aos5ly",children:"cancelled"===t?(0,F.t)("figmake.mcp_clients.multi_connector_cancelled",{num_servers:n}):(0,F.t)("figmake.mcp_clients.multi_connector",{num_servers:n})})]})})}var aw=n(932567),aE=n(657672);function aT({serverId:e,onDismiss:t,isUserAuthorized:n,onSuccess:s}){let{mcpServers:r}=(0,nE.oJ)(),{refetch:l}=(0,nE.Qh)(),o=(0,a.wA)(),d=w.zl.get(U.ze),c=r.find(t=>t.id===e),u=c?.name||"server",{initiateOauth:p}=(0,aE.R)({onAuthSuccess:async()=>{await aw.p.createMcpClient({mcpServerId:e,fileKey:d??void 0}),await l(),s?.()},onAuthFailure:()=>{o(sV.F.enqueue({message:(0,F.t)("figmake.mcp_clients.oauth_failed_with_server_name",{server_name:u}),error:!0,timeoutOverride:2e3}))}});return c?(0,i.jsx)(iH,{header:(0,i.jsx)(ax,{serverName:c.name,serverLogoUrl:c.logoUrl,variant:"unauthorized"}),body:(0,i.jsx)(ap,{server:c,onAuthorize:()=>p(c),onDismiss:t,isUserAuthorized:n})}):null}function aS({server:e,success:t}){return(0,i.jsx)(iH,{header:(0,i.jsx)(ax,{serverName:e.name,serverLogoUrl:e.logoUrl,variant:"unauthorized"}),body:(0,i.jsx)(am,{server:e,success:t})})}function aI({batchedToolMap:e,onConfirmAll:t,onDismissAll:n,hasDismissedAll:a,isExecutingTools:r,isStreamingToolCalls:l,chatMessagesNodeGuid:o}){let d=(0,ip.iZ)(),{mcpClients:c,isLoading:u}=(0,nE.Qh)(),{serverAuthMap:p,allServersAuthenticated:m}=s.useMemo(()=>{let t=new Set(c.map(e=>e.server.id)),n=Object.keys(e).reduce((e,n)=>(e[n]=t.has(n),e),{});return{serverAuthMap:n,allServersAuthenticated:Object.values(n).every(e=>e)}},[e,c]),{allToolsAuthenticatedForUser:h,hasAllResults:f}=s.useMemo(()=>{let t=Object.values(e).flatMap(({toolStates:e})=>e);return{allToolsAuthenticatedForUser:t.every(e=>!e.toolArgs.userId||!d||d.id===e.toolArgs.userId),hasAllResults:t.every(e=>void 0!==e.toolResult)}},[e,d]);if(u)return null;if(!m&&!a&&!f)return(0,i.jsx)(i.Fragment,{children:Object.entries(p).filter(([e,t])=>!t).map(([e])=>(0,i.jsx)(aT,{serverId:e,onDismiss:n,isUserAuthorized:h},e))});let g={batchedToolMap:e,isUserAuthorized:h};return a?(0,i.jsx)(aN,{...g}):f?(0,i.jsx)(aA,{...g}):(0,i.jsx)(aL,{...g,onConfirmAll:t,onDismissAll:n,isExecutingTools:r,isStreamingToolCalls:l,chatMessagesNodeGuid:o})}function aN(e){return(0,i.jsx)(iH,{header:(0,i.jsx)(ak,{batchedToolMap:e.batchedToolMap,variant:"cancelled"}),body:(0,i.jsx)(aj,{batchedToolMap:e.batchedToolMap,isUserAuthorized:e.isUserAuthorized,allDismissed:!0})})}function aA(e){return(0,i.jsx)(iH,{header:(0,i.jsx)(ak,{batchedToolMap:e.batchedToolMap,variant:"default"}),body:(0,i.jsx)(aC,{batchedToolMap:e.batchedToolMap})})}function aL(e){return(0,i.jsx)(iH,{header:(0,i.jsx)(ak,{batchedToolMap:e.batchedToolMap,variant:"default"}),body:(0,i.jsx)(aj,{batchedToolMap:e.batchedToolMap,onConfirmAll:e.onConfirmAll,onDismissAll:e.onDismissAll,isUserAuthorized:e.isUserAuthorized,isExecutingTools:e.isExecutingTools,isStreamingToolCalls:e.isStreamingToolCalls,chatMessagesNodeGuid:e.chatMessagesNodeGuid})})}function aM({toolCalls:e,toolResults:t,isMostRecentMessage:n,chatMessagesNodeGuid:a,trackingContext:r}){let l=(0,w.md)(eg.iw),o=(0,w.Xr)(eg.iw),d=(0,w.Xr)(eg.KU),u=(0,w.Xr)(eg.kU),p=(0,av.hC)(),m=(0,nE.q6)(),[h,f]=s.useState(!1),[g,x]=s.useState(!1),_=(0,ip.TA)(),{exchange:y}=(0,Z.$W)(a),v=s.useMemo(()=>void 0!==y&&y.messages.length>0,[y]),b=n&&v,C=s.useMemo(()=>{let i=[],s=new Map;for(let e of t)s.set(e.toolCallId,e);for(let t of e){let{serverToolName:e}=(0,c.Tr)(t.toolName),a=l[t.toolCallId],r=(0,nr.KS)(a,s.get(t.toolCallId)),o=t.partialArgs.serverId,d=t.partialArgs.userId,u={toolCallId:t.toolCallId,serverId:o,status:(0,nr.xA)({hasDismissedToolCall:g,isExecutingTool:h,isMostRecentMessage:n,isCurrentUserInitiator:d===_,toolResult:r}),toolArgs:t.partialArgs,fullToolName:t.toolName,serverToolName:e,toolResult:r};i.push(u)}return i},[e,t,l,h,g,n,_]),j=s.useMemo(()=>{let e={};for(let t of C){let{serverName:n}=(0,c.Tr)(t.fullToolName),i=t.toolArgs.serverLogoUrl;e[t.serverId]||(e[t.serverId]={serverInfo:{serverId:t.serverId,serverName:n,serverLogoUrl:i},toolStates:[]}),e[t.serverId].toolStates.push(t)}return e},[C]),k=s.useMemo(()=>Object.values(j).flatMap(({toolStates:e})=>e),[j]),[E,T]=(0,w.fp)(eg.dB);(0,eY.h)(()=>{k.forEach(e=>{E[e.toolCallId]||(T(e.toolCallId),p("ai_chat_mcp.tool_prompt_shown",{toolName:e.serverToolName,mcpServerId:e.serverId,featureEntrypoint:"figmake",clientLifecycleId:r.clientLifecycleId,persistentEntityId:r.persistentEntityId,toolCallId:e.toolCallId}))})});let{cancelBatchToolCalls:S}=(0,nE.Rr)(k.map(e=>e.toolCallId),a),I=(0,iG.Y)(),N=s.useMemo(()=>k.every(e=>(0,nr.Gt)({status:e.status,result:e.toolResult,completeToolName:e.fullToolName})),[k]),A=s.useCallback(e=>{if(x(!0),f(!1),u("end"),1===k.length&&k[0]&&e===eg.A4.DISABLED){let t=k[0],{serverName:n,serverToolName:i}=(0,c.Tr)(t.fullToolName);d({serverName:n,toolName:i,runSetting:e,trackPreferenceUpdate:()=>{p("ai_chat_mcp.tool_preferences_updated",{toolName:i,mcpServerId:n,featureEntrypoint:"figmake",enabled:!1,autoRunEnabled:!1})}})}S(k,{...r,autoRunEnabled:!1})},[k,S,u,r,d,p]),L=s.useCallback(async e=>{if(f(!0),u("start"),1===k.length&&k[0]&&(e===eg.A4.AUTO_RUN||e===eg.A4.DISABLED)){let t=k[0],{serverName:n,serverToolName:i}=(0,c.Tr)(t.fullToolName);d({serverName:n,toolName:i,runSetting:e,trackPreferenceUpdate:()=>{p("ai_chat_mcp.tool_preferences_updated",{toolName:i,mcpServerId:n,featureEntrypoint:"figmake",enabled:e!==eg.A4.DISABLED,autoRunEnabled:e===eg.A4.AUTO_RUN})}})}I({results:await Promise.all(k.map(async({toolCallId:e,serverId:t,fullToolName:n,serverToolName:i,toolArgs:s})=>{let a=await m(t,e,s,i,{...r,autoRunEnabled:!1});return o({toolCallId:e,toolResult:a}),{toolCallId:e,toolName:n,toolResult:a}}))}),f(!1),u("end")},[k,m,o,u,r,I,d,p]);return(0,i.jsx)(aI,{batchedToolMap:j,onConfirmAll:L,onDismissAll:A,hasDismissedAll:g||N,isExecutingTools:h,isStreamingToolCalls:b,chatMessagesNodeGuid:a})}function aO({toolCalls:e,toolResults:t,trackingContext:n}){return(0,i.jsx)(i.Fragment,{children:e.map(e=>(0,i.jsx)(aR,{toolCall:e,toolResult:t.find(t=>t.toolCallId===e.toolCallId),trackingContext:n},e.toolCallId))})}function aR({toolCall:e,toolResult:t,trackingContext:n}){let a=(0,ip.iZ)(),r=(0,iG.S)(),{mcpServers:l}=(0,nE.oJ)(),o=(0,av.hC)(),[d,u]=(0,w.fp)(eg.iw),p=e.partialArgs.serverId,m=e.partialArgs.userId,h=a?.id===m,f=(0,nr.KS)(d[e.toolCallId],t),{serverToolName:g}=(0,c.Tr)(e.toolName),[x,_]=(0,w.fp)(eg.dB);(0,eY.h)(()=>{x[e.toolCallId]||(_(e.toolCallId),o("ai_chat_mcp.tool_prompt_shown",{toolName:g,mcpServerId:p,featureEntrypoint:"figmake",clientLifecycleId:n.clientLifecycleId,persistentEntityId:n.persistentEntityId,toolCallId:e.toolCallId}))});let y=s.useCallback(()=>{let t={success:!0,message:"User authorized recommendation tool call"};o("ai_chat_mcp.tool_run_success",{toolName:g,mcpServerId:p,featureEntrypoint:"figmake",clientLifecycleId:n.clientLifecycleId,persistentEntityId:n.persistentEntityId,toolCallId:e.toolCallId}),r({toolCallId:e.toolCallId,toolName:e.toolName,toolResult:t}),u({toolCallId:e.toolCallId,toolResult:t})},[r,e.toolCallId,e.toolName,u,g,p,n.clientLifecycleId,n.persistentEntityId,o]),v=s.useCallback(()=>{let t={success:!1,message:"User dismissed recommendation tool call"};o("ai_chat_mcp.tool_run_cancelled",{toolName:g,mcpServerId:p,featureEntrypoint:"figmake",clientLifecycleId:n.clientLifecycleId,persistentEntityId:n.persistentEntityId,toolCallId:e.toolCallId}),r({toolCallId:e.toolCallId,toolName:e.toolName,toolResult:t}),u({toolCallId:e.toolCallId,toolResult:t})},[r,e.toolCallId,e.toolName,u,g,p,o,n.clientLifecycleId,n.persistentEntityId]),b=l.find(e=>e.id===p);return f&&b?(0,i.jsx)(aS,{server:b,success:f.success}):(0,i.jsx)(aT,{serverId:p,onSuccess:y,onDismiss:v,isUserAuthorized:h})}function aP({toolCalls:e,toolResults:t,trackingContext:n,chatMessagesNodeGuid:a,isMostRecentMessage:r}){let l=(0,nr.ee)(),{recommendationToolCalls:o,recommendationToolResults:d,mcpToolCalls:u,mcpToolResults:p}=s.useMemo(()=>(function(e,t){let n=e=>e.includes(c.Jz),i=e.filter(e=>n(e.toolName)),s=e.filter(e=>!n(e.toolName)),a=new Set(i.map(e=>e.toolCallId));return{recommendationToolCalls:i,recommendationToolResults:t.filter(e=>a.has(e.toolCallId)),mcpToolCalls:s,mcpToolResults:t.filter(e=>!a.has(e.toolCallId))}})(e,t),[e,t]);return 0===e.length?null:l?(0,i.jsxs)(i.Fragment,{children:[o.length>0&&(0,i.jsx)(aO,{toolCalls:o,toolResults:d,trackingContext:n}),u.length>0&&(0,i.jsx)(aM,{toolCalls:u,toolResults:p,isMostRecentMessage:r,chatMessagesNodeGuid:a,trackingContext:n})]}):(0,i.jsx)(iH,{header:(0,i.jsx)(a_,{})})}function aD({reasoning:e,isReasoningComplete:t,featureType:n}){let a=ar(n),l=s.useRef(null),[o,d]=s.useState(!1),[c,u]=s.useState(!1);s.useEffect(()=>{l.current&&d((l.current?.scrollHeight||0)>184)},[e]);let p=a(e??"");s.useEffect(()=>{if(l.current&&!t){let e=l.current;requestAnimationFrame(()=>{e.scrollTop=e.scrollHeight})}},[e,t]);let m=c||!t;return(0,i.jsxs)("div",{className:"x78zum5 xdt5ytf",children:[t?(0,i.jsxs)(eD.E,{...{0:{className:"x78zum5 x6s0dn4 x87ps6o x1ypdohk x11g6tue xfn42iu xng3xce x1r7ld26 x1717udv xh8yej3 xdpxx8g xv1l7n4 x1op4zxa"},1:{className:"x78zum5 x6s0dn4 x87ps6o x1ypdohk x11g6tue xfn42iu xng3xce x1r7ld26 x1717udv xh8yej3 xdpxx8g x1op4zxa xiuzu7u"}}[!!c<<0],onClick:()=>u(!c),"aria-expanded":c,"aria-label":c?(0,F.t)("figmake.chat.hide_reasoning"):(0,F.t)("figmake.chat.show_reasoning"),recordingKey:"reasoningToggle",children:[(0,F.t)("figmake.chat.reasoning"),(0,i.jsx)(al.a,{...{0:{className:"xtc4nxu x1bmturs"},1:{className:"x1bmturs xtlvio2 x1iffjtl"}}[!!c<<0]})]}):(0,i.jsx)(iy.N,{children:(0,F.t)("figmake.chat.reasoning")}),(0,i.jsx)("div",{className:"xb3r6kr",children:(0,i.jsxs)(S.N,{mode:"wait",children:[!t&&(0,i.jsxs)(I.P.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3,ease:"easeInOut"},style:{position:"relative"},children:[o&&(0,i.jsx)("div",{className:"x10l6tqk xu96u03 x3m8u43 xxk0z11 x47corl x13vifvy x1b0inr7"}),(0,i.jsx)("div",{ref:l,...{0:{className:"xv1l7n4 x19sr0n1 x19ypqd9 x1u2bih1 xf18ygs xnuq7ks x1anpbxc x1iog12x x1hx0egp xkcv6ua x1ed109x x1i69ec5 xb3r6kr x78zum5 xdt5ytf xmidabu"},1:{className:"xv1l7n4 x1anpbxc x1hx0egp xkcv6ua x1ed109x x1i69ec5 xb3r6kr x78zum5 xdt5ytf xmidabu"}}[!!(n===r.lV.FIGMAKE&&il.v.getFeatureGate("make_chat_ui_improvements"))<<0],children:p}),o&&(0,i.jsx)("div",{className:"x10l6tqk xu96u03 x3m8u43 xxk0z11 x47corl x1ey2m1c xdu2321"})]},"in-progress"),t&&m&&(0,i.jsx)(I.P.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3,ease:"easeInOut"},children:(0,i.jsx)("div",{...{0:{className:"xv1l7n4 x19sr0n1 x19ypqd9 x1u2bih1 xf18ygs xnuq7ks x1anpbxc x1iog12x x1hx0egp x1odjw0f xkcv6ua x1ed109x"},1:{className:"xv1l7n4 x1anpbxc x1hx0egp x1odjw0f xkcv6ua x1ed109x"}}[!!(n===r.lV.FIGMAKE&&il.v.getFeatureGate("make_chat_ui_improvements"))<<0],children:p})},"completed")]})})]})}var aF=n(913434),az=n(170604);let aB={container:{k1xSpc:"x78zum5",kXwgrk:"xdt5ytf",kOIVth:"xou54vl",$$css:!0}};function aG({messages:e,isMostRecent:t,isInProgress:n,hasExchangeMessages:a,showCodeStreaming:r,scrollToBottom:l,trackingContext:o,chatMessagesNodeGuid:d,codeVersionNumber:c,isAutoErrorFix:u,featureType:p,title:m,layerDisplayName:h,isCurrentVersion:f,chatController:g}){let{defaultTypographyStyle:x}=(0,im.L)(),_=(0,nr.ee)(),[y]=e,v=e[e.length-1],b=(()=>{switch(v?.type){case"message":case"visible_message":return v.message;case"plan":return v.plan;case"summary":return v.summary;case"work":return v.work;default:return}})(),C=v?.type==="reasoning"?v.reasoning:void 0,j=(0,aF.IW)(e),k=(0,az.WL)(e),{codeRestoreVersion:w}=(0,sk.nm)({codeSnapshotKey:j?.codeSnapshotKey,codeSnapshotBlobstoreContentKey:j?.blobstoreContentKey,chatMessagesNodeGuid:d,featureType:p,restoreToVersionTitle:m,chatController:g,...o}),T=s.useRef((b||C)??""),S=s.useRef(v?.id);s.useEffect(()=>{if(!n)return;let e=(b||C)??"";(v?.id!==S.current||e.length>T.current.length)&&l(),T.current=e,S.current=v?.id},[b,C,l,n,v?.id]);let I=(0,eZ.ZC)(n);s.useEffect(()=>{!n&&I&&t&&l()},[n,t,l,I]);let N=s.useMemo(()=>t&&n?(0,i.jsx)(iS.F,{type:"progress",showCodeStreaming:r,chatMessagesNodeGuid:d,layerDisplayName:h,scrollToBottom:l},`progress-${d}`):null,[t,n,d,l,h,r]),A=s.useMemo(()=>{if(0===e.length&&a)return[u?(0,i.jsx)(aW,{},"fixing"):(0,i.jsx)(aV,{},"thinking")];let s=!1,r=!1;return e.flatMap((a,l)=>{let c=l===e.length-1,u=!1;switch(a.type){case"reasoning":let m=l<e.length-1||!n;return[(0,i.jsx)(aD,{reasoning:a.reasoning,isReasoningComplete:m,featureType:p},`reasoning-${l}`)];case"plan":return s=!0,[(0,i.jsx)(aX,{plan:a.plan,featureType:p},`plan-${l}}`)];case"summary":return[(0,i.jsx)(aY,{summary:a.summary,featureType:p},`summary-${l}`)];case"clientSideToolCall":return u=c&&n&&!(0,ij.p$)(a.toolCall.toolName,a.toolCall.partialArgs),[(0,i.jsx)(sC,{toolCall:a.toolCall,toolResult:a.toolResult,isMostRecentMessage:t&&c,chatMessagesNodeGuid:d,trackingContext:o},`clientSideToolCall-${l}`),...u?[(0,i.jsx)(aK,{},"working")]:[]];case"mcpClientSideToolCall":return u=c&&n&&!!_,[(0,i.jsx)(aP,{toolCalls:a.toolCalls,toolResults:a.toolResults,isMostRecentMessage:t&&c,trackingContext:o,chatMessagesNodeGuid:d},`batchedClientSideToolCall-${l}`),...u?[(0,i.jsx)(aK,{},"working")]:[]];case"mcpServerSideToolCall":return[(0,i.jsx)(ay,{toolCall:a.toolCall,toolResult:a.toolResult},`mcpServerSideToolCall-${l}`)];case"selectionRequest":return[(0,i.jsx)(iz,{type:a.type,message:a.message,selectedNodeIds:a.selectedNodeIds,onContinue:a.onContinue},`selectionRequest-${l}`)];case"missingFontsResolution":return[(0,i.jsx)(iA,{type:a.type,message:a.message,onContinue:a.onContinue},`missingFontsResolution-${l}`)];case"visible_message":return r=!0,[(0,i.jsx)(aZ,{message:a.message,featureType:p},`visible_message-${l}`)];case"multipleOptions":return[(0,i.jsx)(iC,{options:a.options,selectedId:a.selectedId,onSelectionChange:a.onSelectionChange},`multipleOptions-${l}`)];default:if(c&&N){let t=e.findIndex(e=>"summary"===e.type||"visible_message"===e.type),n=(s||r)&&(-1===t||t<l);return u="toolCall"===a.type&&!(0,ij.p$)(a.name),n?[N]:u?[(0,i.jsx)(aK,{},"working")]:[]}return[]}})},[e,u,t,N,n,d,o,a,_,p]),L=(0,i.jsx)(aJ,{trackingContext:o,isInProgress:n,featureType:p,firstMessage:y,lastMessage:v,chatMessagesNodeGuid:d,isMostRecent:t}),M=!n&&k?(0,i.jsx)(iS.F,{type:"code_version",isCurrentVersion:f,codeVersionNumber:c,restoreVersion:w,chatMessagesNodeGuid:d,layerDisplayName:h,versionTitle:m},`version-${c}`):null;return 0===A.length?null:(0,i.jsx)("div",{role:"region","aria-label":(0,F.t)("figmake.chat.artifact.a11y_reasoning_section_title",{version:c,title:m||""}),children:(0,i.jsxs)("div",{...E.Ay.props(aB.container,x),"data-testid":"assistant-chat-messages-v2",children:[A,M,L]})})}function aU({message:e}){return(0,i.jsx)("div",{className:"x1n2onr6",children:(0,i.jsx)(i_.E,{children:(0,i.jsx)(h.T,{role:"alert",children:e})})})}function aV(){let e=(0,F.t)("figmake.chat.thinking");return(0,i.jsxs)("div",{className:"x78zum5 x6s0dn4 x167g77z",children:[(0,i.jsx)(iT.H,{}),(0,i.jsx)(aU,{message:e}),(0,i.jsx)(iy.N,{children:e})]})}function aH(){let e=(0,F.t)("figmake.chat.resuming_make_view_only");return(0,i.jsxs)("div",{className:"x78zum5 x6s0dn4 x167g77z",id:"make-mid-generation-warning",children:[(0,i.jsx)(iT.H,{}),(0,i.jsx)(aU,{message:e}),(0,i.jsx)(iy.N,{children:e})]})}function aK(){return(0,i.jsxs)("div",{className:"x78zum5 x6s0dn4 x167g77z",children:[(0,i.jsx)(iT.H,{}),(0,i.jsx)(iy.N,{children:(0,F.t)("figmake.chat.working")})]})}function aW(){return(0,i.jsxs)("div",{className:"x78zum5 x6s0dn4 x167g77z",children:[(0,i.jsx)(iT.H,{}),(0,i.jsx)(iy.N,{children:(0,F.t)("figmake.chat.fixing")})]})}function aq({text:e,featureType:t}){let n=ar(t);return(0,i.jsxs)("div",{className:"x1ed109x",children:[" ",n(e.trim())]})}function aX({plan:e,featureType:t}){return(0,i.jsx)(aq,{text:e,featureType:t})}function aY({summary:e,featureType:t}){return(0,i.jsx)(aq,{text:e,featureType:t})}function aZ({message:e,featureType:t}){return(0,i.jsx)(aq,{text:e,featureType:t})}function aJ({trackingContext:e,isInProgress:t,featureType:n,firstMessage:s,lastMessage:a,chatMessagesNodeGuid:l,isMostRecent:o}){let d=(0,U.q5)(),c=d?.key||null,u=e.clientLifecycleId&&!t&&d?.canEdit,{feedbackState:p,setFeedbackState:m,sentimentFeedbackCallback:h,additionalFeedbackCallback:f,categoryFeedbackCallback:g,productType:x}=(0,J.q)(e,c,n,a?.id||"",l),_=[{id:iw.nj.MISSING_FUNCTIONALITY,label:(0,F.t)("figmake.chat.artifact.feedback_category.missing_functionality")},{id:iw.nj.LOW_QUALITY_VISUALS,label:(0,F.t)("figmake.chat.artifact.feedback_category.low_quality_visuals")},{id:iw.nj.SLOW,label:(0,F.t)("figmake.chat.artifact.feedback_category.slow")},{id:iw.nj.BROKEN,label:(0,F.t)("figmake.chat.artifact.feedback_category.broken")},{id:iw.nj.BAD_EDIT,label:(0,F.t)("figmake.chat.artifact.feedback_category.bad_edit")},{id:iw.nj.OTHER,label:(0,F.t)("figmake.chat.artifact.feedback_category.other")}],y=n===r.lV.AI_ASSISTANT?W.JT.START_AI_ASSISTANT:W.JT.CODE_CHAT,v=(0,z.uQ)(),b={action:y,source:n,clientLifecycleId:e.clientLifecycleId,persistentEntityId:e.persistentEntityId,quick_actions_session_id:null,file_key:c,product_type:x},C=(0,ny.A)(new Date(Number(s?.sentAt64))),j=(0,ny.A)().subtract(7,"days").startOf("day"),k=C.isSameOrAfter(j),w=(0,ts.T3)()&&k;return u?(0,i.jsxs)("div",{className:"x11yfylt x78zum5 xg2d0mh",children:[(0,i.jsx)(q.z,{additionalFeedbackCallback:f,aiTrackingContext:b,categoryFeedbackCallback:g,detailedFeedbackOptions:_,externalFeedbackState:p,hideInitialText:!0,sentimentFeedbackCallback:h,setExternalFeedbackState:m,showUserActionCreditUsageInfo:w&&n!==r.lV.AI_ASSISTANT,thumbsDownLabel:(0,F.t)("figmake.chat.thumbs_down"),thumbsUpLabel:(0,F.t)("figmake.chat.thumbs_up")}),n===r.lV.AI_ASSISTANT&&(0,i.jsx)(aQ,{selectedNodeId:v,aiActionCommonProps:b,showUserActionCreditUsageInfo:w,isMostRecent:o})]}):null}function aQ({selectedNodeId:e,aiActionCommonProps:t,showUserActionCreditUsageInfo:n,isMostRecent:a}){return(0,i.jsxs)("div",{className:"x78zum5 x1q0g3np x1qughib x1iyjqo2",children:[(0,i.jsxs)("div",{className:"x78zum5 x1q0g3np",children:[(0,nl.z)("ai_assistant_force_savepoints")&&(0,nl.z)("ai_assistant_restore")&&t.file_key&&!a&&(0,i.jsx)(iD,{fileKey:t.file_key,trackingContext:t}),(0,nl.z)("make_edits_debug")&&(0,i.jsx)(s.Suspense,{fallback:null,children:(0,i.jsx)(a$,{nodeId:e,aiTrackingContext:t})})]}),(0,i.jsx)("div",{children:t.clientLifecycleId&&n&&(0,nl.z)("assistant_charge_credits")&&(0,i.jsx)(iE.O,{userActionUuid:t.clientLifecycleId,trackingContext:ik.e0.AI_CREDIT_USAGE_ASSISTANT,popoverPlacement:"bottom"})})]})}let a$=s.lazy(()=>n.e(754).then(n.bind(n,480754)));var a0=n(100873);let a1=3*window.innerHeight,a2=100;var a3=n(254362);let a5={innerScrollContainer:{k8WAf4:"x1xn8qrt",kLKAdn:null,kGO01o:null,kg3NbH:"xnjsko4",kuDDbn:null,kE3dHu:null,kP0aTx:null,kpe85a:null,$$css:!0}};function a4({chatMessagesNodeGuid:e,messagesForRendering:t,exchangeMessageIds:n,emptyState:a,dragOverlay:l,featureType:o,layerDisplayName:d,isResizingPanel:c,clientLifecycleIdMap:p,showCodeStreaming:m,codeFileChanges:h,chatController:f,resumableMakeInProgress:g,currentUserCanHandleResumableMake:x}){let _=(0,s.useRef)(null),y=(0,s.useRef)(null),v=(0,s.useRef)(null),b=(0,s.useRef)(null),C=(0,s.useRef)(new Map),j=(0,s.useRef)(new Map),k=(0,s.useRef)(void 0),[w,T]=(0,s.useState)([]),S=(0,s.useRef)(null),[I,N]=(0,s.useState)(!1),{exchange:A}=(0,Z.$W)(e),L=(0,s.useMemo)(()=>void 0!==A&&A.messages.length>0,[A]),{handleScroll:M,showScrollToBottomButton:O,handleScrollToBottomClick:R,requestScrollToBottom:P,onScrollToBottom:D,isFirstMountScrollComplete:F,userHasControl:z}=function({scrollContainerRef:e,scrollEndRef:t,nearBottomThreshold:n=.3,scrollToBottomOnMount:i=!1,numScrollToBottomRetries:a=5,chatController:r}){let[l,o]=(0,s.useState)(!1),[d,c]=(0,s.useState)(!1),[u,p]=(0,s.useState)(!1),[m,h]=(0,s.useState)(!1),[f,g]=(0,s.useState)(!1),x=(0,s.useRef)({scrollTop:0,scrollHeight:0}),_=(0,s.useRef)(0),y=(0,s.useRef)(0),v=r?.pagination,b=r?.getMessages().length??0,C=(0,s.useRef)(null);(0,s.useEffect)(()=>()=>{C.current&&clearTimeout(C.current),_.current&&(clearTimeout(_.current),_.current=null)},[]);let j=(0,s.useCallback)(t=>{if(!e.current)return!1;let{scrollTop:i,scrollHeight:s,clientHeight:a}=e.current,r=void 0!==t?t:a*n;return s-i-a<r},[n,e]),k=(0,s.useCallback)((t=a2)=>{if(!e.current)return!1;let{scrollTop:n}=e.current;return n<t},[e]),w=(0,s.useCallback)((n="smooth",i=t3.lQ)=>{if(!e.current||_.current)return;if(e.current&&j(5)){i();return}let s=()=>{_.current&&(clearTimeout(_.current),_.current=null),p(!1),requestAnimationFrame(()=>i())},r=0,l=()=>{r++;let i=e.current;if(!i){s();return}if(r>2&&"smooth"===n){let{scrollTop:e,scrollHeight:t,clientHeight:n}=i;t-e-n>a1&&(i.scrollTop=t-a1)}if(requestAnimationFrame(()=>t.current?.scrollIntoView({behavior:n})),r>=a){s();return}_.current=setTimeout(()=>{requestAnimationFrame(()=>{if(!i){s();return}j(5)?s():l()})},"smooth"===n?300:50)};l()},[t,e,j,a]),E=(0,s.useCallback)(()=>{d||l?(p(!0),j()||h(!0)):(w(),h(!1))},[j,d,w,l]);return(0,s.useEffect)(()=>{if(!f){if(!i){g(!0);return}if(b>0){w("instant",()=>g(!0));return}if((!r||r?.isInitialized&&!v?.isLoading)&&0===b){g(!0);return}}},[i,f,w,b,r,v?.isLoading]),{showScrollToBottomButton:m,handleScroll:(0,s.useCallback)((e,t)=>{C.current&&clearTimeout(C.current);let{scrollTop:n,scrollHeight:i}=x.current,s=e-n,a=_.current,r=e=>{a||o(e)};if(e!==n&&t.scrollHeight===i){if(s<0){if(c(!0),r(!0),j()||h(u),k(500)&&v&&v.hasMore&&!v.isLoading){let e=Date.now();e-y.current>300&&(y.current=e,v.loadNextPage())}}else c(!1),s>=0&&j()&&(r(!1),h(!1),u&&w());j()&&h(!1)}x.current={scrollTop:e,scrollHeight:t.scrollHeight},a||(C.current=window.setTimeout(()=>{c(!1),C.current=null},200))},[j,k,v,u,w]),handleScrollToBottomClick:(0,s.useCallback)(()=>{o(!1),h(!1),w()},[w]),requestScrollToBottom:E,onScrollToBottom:w,isFirstMountScrollComplete:f,userHasControl:l,isScrollingUp:d,pendingScrollToBottom:u,isNearBottom:j}}({scrollContainerRef:_,scrollEndRef:v,scrollToBottomOnMount:!0,chatController:f}),B=(0,ip.iZ)();!function(e){let{messagesForRendering:t,currentUserId:n,onScrollToBottom:i,requestScrollToBottom:a,scrollContainerRef:r,userHasControl:l,stagedMessages:o,setStagedMessages:d,stagedMessagesContainerRef:c,isProcessingPagination:u,setIsProcessingPagination:p}=e,m=(0,s.useRef)(t.length),h=(0,s.useRef)(t[t.length-1]?.uniqueId),f=(0,s.useRef)(t[0]?.uniqueId);(0,s.useEffect)(()=>{let e=t[0],s=t[t.length-1],o=e?.uniqueId,u=s?.uniqueId,g=t.length,x=f.current,_=h.current,y=m.current;if(y>0&&void 0!==x&&g>y&&o!==x){d(t.slice(0,g-y)),p(!0);let e=e=>requestAnimationFrame(()=>{e?.(),p(!1)}),n=r.current;if(n){let t=n.scrollTop,i=0,s=()=>{i++;let a=c.current;if(!a||!n)return;let r=a.getBoundingClientRect().height;if(r>0){let i=t+r;e(()=>n.scrollTop=i)}else i<10?requestAnimationFrame(s):e()};requestAnimationFrame(s)}else e()}else if(u&&u!==_&&g>y){let e=s?.type==="user"&&s?.user?.id===n,t=s?.type==="system";if(l)a();else{let n=!1,s=r.current;if(s){let{scrollTop:e,scrollHeight:t,clientHeight:i}=s;n=t-e-i<100}e||t||n?i():a()}}f.current=o,h.current=u,m.current=g},[t,n,i,a,r,d,c,u,p,o.length,l])}({messagesForRendering:t,currentUserId:B?.id,onScrollToBottom:D,requestScrollToBottom:P,scrollContainerRef:_,userHasControl:z,stagedMessages:w,setStagedMessages:T,stagedMessagesContainerRef:S,isProcessingPagination:I,setIsProcessingPagination:N});let G=(0,s.useMemo)(()=>O?(0,i.jsx)(eD.E,{className:"x78zum5 x6s0dn4 xl56j7k x10l6tqk x1td3qas x10w6t97 x1c7jfne x1nrll8i xuuh30 x1yjdb4r x16rqkct x16a2w50 x1ypdohk x1epfdc x1vjfegm xk82a7y",onClick:R,children:(0,i.jsx)(io.t,{})}):null,[O,R]),U=s.useMemo(()=>w.length>0?t.slice(w.length):t,[w.length,t]),V=(0,s.useCallback)(e=>{if(0===U.length)return 0;let t=U[e];if(!t)return 600;let n=rt(t);return C.current.get(n)||600},[U]),H=(0,s.useCallback)(()=>(_.current?.scrollTop??0)-(S.current?.getBoundingClientRect().height??0),[]),K=(0,ir.z)({size:U.length-1,parentRef:_,estimateSize:V,overscan:10,scrollOffsetFn:H});y.current=K;let W=(0,ic.A)(()=>{y.current&&!k.current&&y.current.measure()},16),q=(0,s.useCallback)((e,t)=>{j.current.set(e,t),C.current.get(e)!==t.height&&(C.current.set(e,t.height),W())},[W]);(0,s.useEffect)(()=>{let e=k.current;if(!e&&c&&(j.current.clear(),K.virtualItems.forEach(e=>{let n=rt(t[e.index+w.length]),i=_.current?.querySelector(`[data-virtual-index="${n}"]`);if(i){let e=re(i);j.current.set(n,e)}}),b.current)){let e=re(b.current),n=t[t.length-1];if(n){let t=rt(n);j.current.set(t,e)}}e&&!c&&(j.current.clear(),y.current&&y.current.measure()),k.current=c},[c,K.virtualItems,t.length,w.length,t]);let{versionNumbersByUniqueId:X,currentVersionUniqueId:Y}=function(e,t){let n=!!t?.pagination,i=n?t?.getNodeChatMessages()??[]:[],a=(0,a0.t)(i,rn,ri),r=(0,id.k9)(()=>{if(!n)return e;let t=(0,u.Kl)(e,e=>!e.isExchangeMessage&&!e.isOptimisticMessage)+1;return[...a,...e.slice(t)]},[n,a,e]),{versionNumbersByUniqueId:l,currentVersionUniqueId:o}=(0,s.useMemo)(()=>{let{codeVersionNumbers:t,currentVersionMessageIndex:n}=(0,az.c$)(r),i=new Map;r.forEach((e,n)=>{let s=rt(e);i.set(s,t[n]??0)});let s=n>=0&&n<r.length?rt(r[n]):null,a=(0,az.c$)(e).codeVersionNumbers,l=new Map;return e.forEach((e,t)=>{let n=rt(e);l.set(n,a[t]??0)}),{versionNumbersByUniqueId:i,currentVersionUniqueId:s}},[e,r]);return{versionNumbersByUniqueId:l,currentVersionUniqueId:o}}(t,f),J=0===t.length?(0,i.jsx)("div",{className:"x78zum5 xdt5ytf x98rzlu x1iyjqo2 xs83m0k x1r8uery xysyzu8 xl56j7k",children:a}):(0,i.jsxs)(iu.P,{className:"x78zum5 xdt5ytf x98rzlu x1iyjqo2 xs83m0k x1r8uery xb3r6kr xjkvuk6",scrollContainerRef:_,onScroll:M,innerClassName:E.Ay.classNames(a5.innerScrollContainer),children:[(0,i.jsx)("div",{ref:S,style:{visibility:w.length>0&&I?"hidden":void 0},children:w.map((t,s)=>{let a=rt(t),r=j.current.get(a);return(0,i.jsx)(a8,{isLast:!1,setSize:q,isResizingPanel:c,frozenDimensions:r,featureType:o,index:s,uniqueId:a,isFirstMountScrollComplete:F,children:(0,i.jsx)(a9,{chatController:f,chatMessagesNodeGuid:e,clientLifecycleIdMap:p,codeFileChanges:h,codeVersionNumber:X.get(a)??0,exchangeMessageIds:n,featureType:o,isCurrentVersion:!1,isLast:!1,layerDisplayName:d,message:t,requestScrollToBottom:P,showCodeStreaming:m})},`staged-${a}`)})}),(0,i.jsx)("div",{style:{height:`${K.totalSize}px`,width:"100%",position:"relative"},className:"x78zum5 xdt5ytf",children:K.virtualItems.map(t=>{let s=U[t.index];if(!s)return null;let a=t.index+w.length,r=rt(s),l=j.current.get(r);return(0,i.jsx)(a8,{featureType:o,frozenDimensions:l,index:a,isFirstMountScrollComplete:F,isLast:!1,isResizingPanel:c,setMeasureRef:t.measureRef,setSize:q,start:t.start,uniqueId:r,children:(0,i.jsx)(a9,{chatController:f,chatMessagesNodeGuid:e,clientLifecycleIdMap:p,codeFileChanges:h,codeVersionNumber:X.get(rt(s))??0,exchangeMessageIds:n,featureType:o,isCurrentVersion:rt(s)===Y,isLast:!1,layerDisplayName:d,message:s,requestScrollToBottom:P,showCodeStreaming:m})},r)})}),t.length>0&&(()=>{let s=t[t.length-1],a=rt(s),r=t.length-1;return(0,i.jsx)(a8,{featureType:o,frozenDimensions:j.current.get(a),index:r,isFirstMountScrollComplete:F,isLast:!0,isResizingPanel:c,setMeasureRef:e=>{b.current=e},setSize:q,uniqueId:a,children:(0,i.jsx)(a9,{chatController:f,chatMessagesNodeGuid:e,clientLifecycleIdMap:p,codeFileChanges:h,codeVersionNumber:X.get(a)??0,exchangeMessageIds:n,featureType:o,isCurrentVersion:a===Y,isLast:!0,layerDisplayName:d,message:s,requestScrollToBottom:P,showCodeStreaming:m})},"last-message")})(),o===r.lV.AI_ASSISTANT&&t.length>0&&t[t.length-1]?.type==="user"&&(0,i.jsx)("div",{className:"x10dr8xq x1hr3lfm x78zum5 xdt5ytf",children:(0,i.jsx)(aV,{})},"post-user-thinking"),g&&!x&&!L&&(0,i.jsx)("div",{...{0:{className:"x10dr8xq x1hr3lfm x78zum5 xdt5ytf"},1:{className:"x10dr8xq x78zum5 xdt5ytf x4l9tsp"}}[!!(o===r.lV.FIGMAKE&&il.v.getFeatureGate("make_chat_ui_improvements"))<<0],children:(0,i.jsx)(aH,{})},"post-user-thinking"),(0,i.jsx)("div",{ref:v},"messages-end")]});return(0,i.jsxs)("div",{className:"x1n2onr6 x78zum5 xdt5ytf x5yr21d xh8yej3","data-testid":"code-chat-messages",style:{visibility:F?"visible":"hidden"},children:[J,G,l&&(0,i.jsx)("div",{className:"x10l6tqk x13vifvy xu96u03 x3m8u43 x1ey2m1c xhtitgo",children:l})]})}let a6=null,a7=new WeakMap,a8=s.memo(function(e){let{setSize:t,isResizingPanel:n,frozenDimensions:a,index:l,uniqueId:o,setMeasureRef:d,start:c,isLast:u,isFirstMountScrollComplete:p,featureType:m}=e,h=(0,s.useRef)(l),[f,g]=s.useState(!1),x=(0,s.useRef)(0),_=p&&(n?a:f);(0,s.useEffect)(()=>{h.current=l},[l]);let y=(0,s.useRef)(!1),v=(0,s.useRef)(null);(0,s.useEffect)(()=>{let e=v.current;if(!e||n||!o)return;let i=(a6||(a6=new ResizeObserver(e=>{requestAnimationFrame(()=>{for(let t of e){let e=a7.get(t.target);e&&e(t)}})})),a6);return a7.set(e,e=>{let n=e.contentRect.height;n>0&&Math.abs(n-x.current)>.5&&(x.current=n,t(o,{width:e.contentRect.width,height:n}),g(!0))}),i.observe(e),()=>{i.unobserve(e),a7.delete(e)}},[t,n,o]),(0,s.useEffect)(()=>{if((u||!y.current)&&v.current&&!n&&o){y.current=!0;let e=re(v.current);e.height&&(t(o,e),g(!0)),d&&d(v.current)}},[u,t,d,n,o]);let b=n&&a?{width:`${a.width}px`,height:`${a.height}px`}:{},C=o??l;return(0,i.jsx)("div",{ref:v,"data-virtual-index":C,style:{...c?{position:"absolute",top:c,left:0,width:"100%"}:{},...b,visibility:_?"visible":"hidden"},children:(0,i.jsx)("div",{...{0:{className:"x10dr8xq x1hr3lfm x78zum5 xdt5ytf"},1:{className:"x10dr8xq x78zum5 xdt5ytf x4l9tsp"}}[!!(m===r.lV.FIGMAKE&&il.v.getFeatureGate("make_chat_ui_improvements"))<<0],tabIndex:-1,children:e.children})})});function a9({message:e,featureType:t,codeVersionNumber:n,isLast:a,chatMessagesNodeGuid:r,clientLifecycleIdMap:l,codeFileChanges:o,layerDisplayName:d,exchangeMessageIds:c,requestScrollToBottom:u,showCodeStreaming:p,isCurrentVersion:m,chatController:h}){let f=(0,U.q5)(),g=f?.key||null,x=(0,s.useMemo)(()=>(0,X.qE)(g,r),[g,r]),_=f?.name,y=rt(e);switch(e.type){case"user":return(0,i.jsx)(ix,{user:e.user,featureType:t,plainText:e.plainText,imports:e.imports,inspectedElement:e.inspectedElement,inspectedComponent:e.inspectedComponent,inspectedLibrary:e.inspectedLibrary,selectedNodeIds:e.selectedNodeIds},`${e.type}-${y}`);case"system":switch(e.systemMessageType){case"restore":return(0,i.jsx)(a3.V,{chatController:h,chatMessagesNodeGuid:r,codeVersionNumber:n,featureType:t,isCurrentVersion:m,layerDisplayName:d,message:e,title:e.title||_,trackingContext:{persistentEntityId:x,clientLifecycleId:l.get(e.id)??""}},`${e.type}-${y}`);case"manual_edit":if(e.id===a3.ct&&o)return(0,i.jsx)(a3.Re,{chatController:h,chatMessagesNodeGuid:r,featureType:t,codeFileChanges:o,layerDisplayName:d,codeVersionNumber:n},`${e.type}-${y}`);return(0,i.jsx)(a3.pr,{chatController:h,chatMessagesNodeGuid:r,codeVersionNumber:n,featureType:t,isCurrentVersion:m,layerDisplayName:d,message:e,title:e.title||_,trackingContext:{persistentEntityId:x,clientLifecycleId:l.get(e.id)??""}},`${e.type}-${y}`);case"duplicated_file":return(0,i.jsx)(a3.M_,{},`${e.type}-${y}`);case"deleted_chat_history":return(0,i.jsx)(a3.a_,{message:e},`${e.type}-${y}`);default:return null}case"assistant":let v=e.messages[e.messages.length-1],b=e.clientLifecycleId??l.get(v?.id||"")??"",C=c.has(v?.id||"");return(0,i.jsx)(aG,{chatController:h,chatMessagesNodeGuid:r,codeVersionNumber:n,featureType:t,hasExchangeMessages:c.size>0,isAutoErrorFix:e.isAutoErrorFix??!1,isCurrentVersion:m,isInProgress:C,isMostRecent:a,layerDisplayName:d??void 0,messages:e.messages,scrollToBottom:u,showCodeStreaming:p,title:e.title||_,trackingContext:{persistentEntityId:x,clientLifecycleId:b}})}}function re(e){if(!e)return{width:0,height:0};let t=e.getBoundingClientRect();return{width:t.width,height:t.height}}function rt(e){return e.uniqueId??(0,r.wm)({id:"id"in e?e.id:void 0,timestamp:Number(e.sentAt64)})}let rn={usersById:null,loading:!1,hasError:!1},ri={};var rs=n(560985),ra=n(500275);let rr=(e,t,n,i)=>{let s=e.codeFiles.map(e=>{let n=t.get(e.codeFileGuid);return n?(k.l7.ai("set-code-file-path",()=>{let e=j.z6l?.isMultiFileCodeLayersEnabled()||(0,nl.z)("bake_canvas");n.codeFilePath=e&&i?`${i}/${ra.zM}`:ra.zM}),{fullFilePath:n.codeFileFullPathWithoutScheme,code:n.sourceCode,codeFileGuid:n.guid}):(console.error("codeFileNode not found",{codeFileAttachment:e}),null)}).filter(e=>!!e);return{type:"node",guid:e.nodeGuid,codeFiles:s,communityAttribution:n.get(e.nodeGuid),image:e.image??void 0}},rl=e=>({type:"image",guid:e.nodeGuid,image:e.image,imageHash:(0,nl.z)("bake_image_include_hash")?e.imageHash??void 0:void 0}),ro=e=>({type:"diff",guid:e.nodeGuid,diffs:e.diffs,image:e.image??void 0}),rd={hidden:{opacity:0,scale:.8},visible:{opacity:1,scale:1,transition:{duration:.3}},exit:{opacity:0,scale:.8,transition:{duration:.2}}},rc={animate:e=>({opacity:[.5,1,.5],y:[0,-2,0],transition:{duration:1,repeat:Number.POSITIVE_INFINITY,ease:"easeOut",times:[0,.5,1],delay:e}})};function ru({visible:e}){return(0,i.jsx)(S.N,{mode:"wait",children:e&&(0,i.jsx)(I.P.div,{className:"x78zum5 x6s0dn4 x1v8gsql xc7ga6q x1i2kgm6 x1db2dqx",animate:"visible",exit:"exit",initial:"hidden",variants:rd,children:(0,i.jsxs)("div",{className:"x78zum5 x195vfkc xpqajaz",children:[(0,i.jsx)(I.P.span,{className:"x1g8rjiy xuoj239 x1vc12gn xorixrz",custom:0,animate:"animate",variants:rc}),(0,i.jsx)(I.P.span,{className:"x1g8rjiy xuoj239 x1vc12gn xorixrz",custom:.25,animate:"animate",variants:rc}),(0,i.jsx)(I.P.span,{className:"x1g8rjiy xuoj239 x1vc12gn xorixrz",custom:.5,animate:"animate",variants:rc})]})})})}function rp({typingUsers:e}){return(0,i.jsx)("div",{className:"xqtp20y x1vjfegm x1n2onr6",children:(0,i.jsxs)("div",{className:"x10l6tqk x2rgi x131sewu x78zum5 xh8yej3 x13a6bvl",children:[(0,i.jsx)(ru,{visible:e.length>0}),(0,i.jsx)(S.N,{mode:"wait",children:e.map((e,t)=>(0,i.jsx)(m.K,{"aria-label":e.name,"data-tooltip-show-above":!0,children:(0,i.jsx)(I.P.div,{className:"x1qgsegg xaatb59 xlofgcs x16rqkct",style:{marginLeft:t>0?"-6px":"0"},animate:"visible",exit:"exit",initial:"hidden",variants:rd,children:(0,i.jsx)(th.H8,{user:e})})},e.sessionID))})]})})}function rm(){return(0,i.jsxs)("svg",{width:"41",height:"41",viewBox:"0 0 41 41",fill:"none",children:[(0,i.jsx)("rect",{x:"0.776855",y:"0.777344",width:"40",height:"40",rx:"5",fill:"white"}),(0,i.jsx)("rect",{x:"2.77686",y:"2.77734",width:"36",height:"36",rx:"4",fill:"url(#paint0_linear_9279_71495)"}),(0,i.jsx)("circle",{cx:"28.2769",cy:"13.2773",r:"5.5",fill:"#FFD966"}),(0,i.jsx)("path",{d:"M10.7964 19.4661L2.77686 28.4176V35.7773C2.77686 37.4342 4.12 38.7773 5.77686 38.7773H34.7769L17.4119 19.4604C15.6442 17.4939 12.5608 17.4966 10.7964 19.4661Z",fill:"#009951"}),(0,i.jsx)("defs",{children:(0,i.jsxs)("linearGradient",{id:"paint0_linear_9279_71495",x1:"20.7769",y1:"2.77734",x2:"20.7769",y2:"38.7773",gradientUnits:"userSpaceOnUse",children:[(0,i.jsx)("stop",{stopColor:"#6EC2FF"}),(0,i.jsx)("stop",{offset:"0.117896",stopColor:"#6FC2FF"}),(0,i.jsx)("stop",{offset:"0.213837",stopColor:"#72C4FF"}),(0,i.jsx)("stop",{offset:"0.2912",stopColor:"#76C6FF"}),(0,i.jsx)("stop",{offset:"0.353363",stopColor:"#7CC8FF"}),(0,i.jsx)("stop",{offset:"0.403704",stopColor:"#84CBFF"}),(0,i.jsx)("stop",{offset:"0.4456",stopColor:"#8CCFFF"}),(0,i.jsx)("stop",{offset:"0.48243",stopColor:"#95D2FF"}),(0,i.jsx)("stop",{offset:"0.51757",stopColor:"#9FD7FF"}),(0,i.jsx)("stop",{offset:"0.5544",stopColor:"#A9DBFF"}),(0,i.jsx)("stop",{offset:"0.596296",stopColor:"#B4DFFF"}),(0,i.jsx)("stop",{offset:"0.646637",stopColor:"#BEE4FF"}),(0,i.jsx)("stop",{offset:"0.7088",stopColor:"#C9E8FF"}),(0,i.jsx)("stop",{offset:"0.786163",stopColor:"#D3ECFF"}),(0,i.jsx)("stop",{offset:"0.882104",stopColor:"#DCF0FF"}),(0,i.jsx)("stop",{offset:"1",stopColor:"#E5F4FF"})]})})]})}function rh(){return(0,i.jsx)(S.N,{children:(0,i.jsxs)(I.P.div,{className:"x1n2onr6 xh8yej3 x5yr21d x1yjdb4r x78zum5 xdt5ytf x6s0dn4 xl56j7k",initial:{opacity:0},animate:{opacity:.95},exit:{opacity:0,transition:{delay:.1}},transition:{duration:.2},children:[(0,i.jsxs)("div",{className:"x1n2onr6 xrostsh xng8ra x78zum5 x6s0dn4 xl56j7k",children:[(0,i.jsx)(I.P.div,{className:"x10l6tqk xu96u03",style:{originX:.5,originY:.5},initial:{rotate:0,x:34,y:2,scale:.8,opacity:0},animate:{rotate:-20,x:20,y:4,scale:1,opacity:.95},exit:{rotate:-23,x:20,y:4,scale:.8,opacity:0,transition:{delay:.1}},transition:{duration:.3,type:"spring",delay:.1},children:(0,i.jsx)(rm,{})}),(0,i.jsx)(I.P.div,{className:"x1vjfegm",style:{originX:.5,originY:.5},initial:{scale:.8,y:0,opacity:0},animate:{scale:1,y:0,opacity:.95},exit:{scale:.8,y:0,opacity:0,transition:{delay:.1}},transition:{duration:.4,type:"spring"},children:(0,i.jsx)(rm,{})}),(0,i.jsx)(I.P.div,{className:"x10l6tqk x3m8u43",style:{originX:.5,originY:.5},initial:{rotate:0,x:-34,y:4,scale:.8,opacity:0},animate:{rotate:23,x:-22,y:4,scale:1,opacity:.95},exit:{rotate:23,x:-22,y:2,scale:.8,opacity:0,transition:{delay:.1}},transition:{duration:.4,type:"spring",delay:.1},children:(0,i.jsx)(rm,{})})]}),(0,i.jsxs)(I.P.div,{className:"xw7yly9 x78zum5 xdt5ytf x6s0dn4",children:[(0,i.jsx)(I.P.p,{className:"x1wtuluy x1vzchgk x123g5w4 x1akne3o x1ghz6dp",initial:{opacity:0,y:8},animate:{opacity:.95,y:0},exit:{opacity:0,y:0,transition:{delay:0}},transition:{duration:.2,ease:"easeOut"},children:(0,F.t)("figmake.code_chat.drag_upload_overlay.title")}),(0,i.jsx)(I.P.p,{className:"x17hqfcz xemv814 x1ma9mv9 x1n0bwc9 x1xmf6yo x2b8uid x1jkqq1h",initial:{opacity:0,y:8},animate:{opacity:.95,y:0},exit:{opacity:0,y:0,transition:{delay:0}},transition:{duration:.2,delay:.1,ease:"easeOut"},children:(0,F.t)("figmake.code_chat.drag_upload_overlay.description")})]})]})})}var rf=n(178623),rg=n(20267),rx=n(677958),r_=n(307829),ry=n(454851),rv=n(694415),rb=n(490346),rC=n(523588),rj=n(392659),rk=n(620480),rw=n(361170),rE=n(422872),rT=n(571430),rS=n(235711),rI=n(295253),rN=n(498726),rA=n(143277),rL=n(103345),rM=n(441030),rO=n(329965),rR=n(350434),rP=n(244205),rD=n(61102),rF=n(654200),rz=n(854095);function rB({targetKey:e,isShowing:t,onComplete:n}){return(0,i.jsx)(rD.rq,{arrowPosition:rF.F_.BOTTOM,description:(0,F.tx)("figmake.design_system_imports.selected_design_system_overlay.description"),emphasized:!0,isShowing:t,onClose:n,onTargetLost:n,primaryCta:{label:(0,F.tx)("figmake.design_system_imports.learn_more"),href:rz.kC,type:"link",variantOverride:"white",ctaTrackingDescriptor:rP.c.DS_IMPORT_LEARN_MORE},targetKey:e,title:(0,F.tx)("figmake.design_system_imports.selected_design_system_overlay.title"),trackingContextName:"Make Design System Imports > Selected Design System Overlay"})}var rG=n(264834);let rU=(0,rS.r1)("seen_figmake_selected_design_system_onboarding");function rV({isViewOnly:e,hasMessages:t,disabled:n,chatController:r}){let l;let o=(0,ee.hl)(),c=(0,w.md)(rU),{libraryImport:u}=(0,td.S1)({chatController:r}),{show:m,isShowing:h,complete:f}=(0,rE.e)({overlay:rM.q6k,priority:rA.N.DEFAULT_MODAL},[c]),g=(0,U.tS)();s.useEffect(()=>{if(e)return;let t=(0,d.$d)();t[rz.dY]||t[rz.x1]||k.l7.ai("code-chat",()=>{ev.getActiveTSSceneGraph()?.createNewCodeFile({path:rz.dY,sourceCode:"",entryPoint:null,isEntrypointCodeFile:!1,onError:e=>{M.$D(p.e.MAKE,e)},enableDuplicateCheck:nl.z("bake_dup_code_files"),createCodeComponent:!1})})},[e]);let x=(0,U.q5)(),_=(0,tt.X$)("LibraryImportButton"),y=(0,tt.YY)(_).unwrapOr(!1),v=(0,rO.S)(),b=(0,s.useRef)(null),C=(0,a.wA)();s.useEffect(()=>{u&&!w.zl.get(em.FX)&&m({canShow:e=>!e})},[u,m]);let j=u?.frozen?u:null,{getTriggerProps:E,manager:T}=r_.b(),S=(0,rR.j)(),I=y&&(0,nl.z)("bake_starter_limit"),A=(0,ee.hl)()?rG.W:rO.u,L=()=>{if(I){C(B.to({type:rL.DV,data:{team:x?.team??null,resource:rN.Bi.CODE_CHAT_LIBRARY_IMPORT,currentPlan:rT.F.Plan.STARTER,upsellPlan:rT.F.Plan.PRO,editorType:te._Y.FIGMAKE,upsellSource:rI.b.CODE_CHAT_LIBRARY_IMPORT}}));return}let e=b.current;if(!e)return;if(v){C(B.ES(A));return}N.az.trackDefinedEvent("ds_import.library_import_button_clicked",{...(0,td.FN)(u),file_key:g||""});let n=e.getBoundingClientRect(),i=new rw.Mi(n.left,n.top);C(B.to({type:A,data:{defaultPosition:{left:i.x,bottom:window.innerHeight-i.y+10},hasExistingChatMessages:t,chatController:r}}))},O=E(),R=O.onMouseDown;if(O.onMouseDown=e=>{e.preventDefault(),e.stopPropagation(),N.az.trackDefinedEvent("ds_import.settings_button_clicked",{...(0,td.FN)(u),file_key:g||""}),f(),R(e)},(0,nl.z)("bake_ds_import_extract"))return(0,i.jsx)("div",{ref:b,children:(0,i.jsx)(ry.d,{"aria-label":(0,F.t)("sites.modal.select_library"),"aria-expanded":v,"data-tooltip-show-above":!0,disabled:n,htmlAttributes:{"data-onboarding-key":er.t$},onClick:L,children:(0,i.jsx)(rv.l,{})})});let P=(0,i.jsxs)(r_.bL,{manager:T,children:[(0,s.createElement)(eD.E,{...{0:{className:"x1ia1hqs x14msgrb xi46uaa xfrllxf xe0pwq x19ypqd9 x1u2bih1 xuk1p4z xv2f06h xvy4d1p xxk0z11 x78zum5 x6s0dn4 xl56j7k xxhr3t"},1:{className:"x1ia1hqs x14msgrb xi46uaa xfrllxf xe0pwq x19ypqd9 x1u2bih1 xuk1p4z xvy4d1p xxk0z11 x78zum5 x6s0dn4 xl56j7k xxhr3t x1yjdb4r"}}[!!(!n&&j)<<0],disabled:n,key:"editButton",...O,"data-onboarding-key":er.oD},(0,i.jsx)(rb.g,{})),(0,i.jsxs)(r_.mc,{children:[(0,i.jsxs)(r_.q7,{onClick:()=>{N.az.trackDefinedEvent("ds_import.edit_styles_menu_item_clicked",{...(0,td.FN)(u),file_key:g||""}),S(rz.VK)},children:[(0,i.jsx)(r_.Q$,{children:(0,i.jsx)(rC.J,{})}),(0,i.jsxs)("div",{children:[(0,F.t)("sites.modal.edit_styles_menu_title"),(0,i.jsx)(r_.ME,{children:(0,F.t)("sites.modal.edit_styles_menu_subtitle")})]})]}),(0,i.jsxs)(r_.q7,{onClick:()=>{N.az.trackDefinedEvent("ds_import.edit_guidelines_menu_item_clicked",{...(0,td.FN)(u),file_key:g||""}),S(rz.dY,rz.x1)},children:[(0,i.jsx)(r_.Q$,{children:(0,i.jsx)(rj.L,{})}),(0,i.jsxs)("div",{children:[(0,F.t)("sites.modal.edit_guidelines_menu_title"),(0,i.jsx)(r_.ME,{children:(0,F.t)("sites.modal.edit_guidelines_menu_subtitle")})]})]})]})]}),D=u?.libraries;return(D&&D.length>0&&D.every(e=>e&&e.library_key)&&(1===D.length?l=D[0].library_name:D.length>1&&(l=(0,F.t)("figmake.ds_imports.library_selector_multiple_libraries"))),o)?(0,i.jsxs)("div",{ref:b,children:[(0,i.jsx)(rB,{targetKey:er.oD,isShowing:h,onComplete:f}),(0,i.jsx)(ry.d,{"aria-label":(0,F.t)("sites.modal.select_library"),"aria-expanded":v,"data-tooltip-show-above":!0,disabled:n,htmlAttributes:{"data-onboarding-key":er.oD},onClick:L,children:(0,i.jsx)(rv.l,{})})]}):j?(0,i.jsxs)("div",{ref:b,className:"xrlp15q x1nmd3yn xm735u9 xkbmbem x3wk4up xmkeg23 x1y0btm7 x7z60cl xpzoddv x1v8gsql xxk0z11 x3nfvp2 x1q0g3np x6s0dn4 xxhr3t x2lah0s",children:[(0,s.createElement)(eD.E,{className:"xuk1p4z xv2f06h x1hb7l2i x1a2w583 xjppbhk xsz7qvg x1lqa7cf x1ug7bdz xxhr3t",disabled:!0,key:"libraryImportButton",onClick:t3.lQ},(0,i.jsx)("div",{className:"x10739mo xlup9mm xb3r6kr xlyipyv xuxw1ft",children:l})),P]}):l?(0,i.jsxs)("div",{ref:b,...{0:{className:"x3nfvp2 x1q0g3np xxk0z11 x6s0dn4 xxhr3t x2lah0s xrlp15q x1nmd3yn xm735u9 xkbmbem x3wk4up xmkeg23 x1y0btm7 x7z60cl xpzoddv"},1:{className:"xrlp15q x1nmd3yn xm735u9 xkbmbem x3wk4up xmkeg23 x1y0btm7 x7z60cl xpzoddv x1v8gsql xxk0z11 x3nfvp2 x1q0g3np x6s0dn4 xxhr3t x2lah0s"}}[!!n<<0],children:[(0,i.jsx)(rB,{targetKey:er.oD,isShowing:h,onComplete:f}),(0,s.createElement)(eD.E,{...{0:{className:"x1hb7l2i x1a2w583 xjppbhk xsz7qvg x1lqa7cf xuk1p4z xv2f06h xxhr3t"},1:{className:"xuk1p4z xv2f06h x1hb7l2i x1a2w583 xjppbhk xsz7qvg x1lqa7cf x1ug7bdz xxhr3t"}}[!!n<<0],disabled:n,key:"libraryImportButton",onClick:L},(0,i.jsx)("div",{className:"x10739mo xlup9mm xb3r6kr xlyipyv xuxw1ft",children:l}),(0,i.jsx)("div",{className:"x1kky2od x78zum5 xl56j7k xb3r6kr",children:(0,i.jsx)(rk.r,{})})),P]}):(0,i.jsx)("div",{ref:b,children:(0,i.jsx)(ry.d,{"aria-label":(0,F.t)("sites.modal.select_library"),"aria-expanded":v,"data-tooltip-show-above":!0,disabled:n,htmlAttributes:{"data-onboarding-key":er.t$},onClick:L,children:(0,i.jsx)(rv.l,{})})})}var rH=n(981872);function rK({disabled:e}){let{usedMakeLibraryIds:t}=(0,td.cH)(),n=(0,U.q5)(),r=(0,tt.No)(),l=(0,tt.YY)(r).unwrapOr(!1),o=(0,rO.S)(),d=(0,s.useRef)(null),c=(0,a.wA)(),{getTriggerProps:u}=r_.b(),p=l&&(0,nl.z)("bake_starter_limit"),m=u(),h=m.onMouseDown;m.onMouseDown=e=>{e.preventDefault(),e.stopPropagation(),N.az.trackDefinedEvent("ds_import.settings_button_clicked",{library_keys:t.join(","),file_key:n?.key??""}),h(e)};let f=t&&t.length>0,g=f?t.length:0,x=f?1===g?(0,F.t)("figmake.empty_state.make_kit_selected"):(0,F.t)("figmake.empty_state.make_kits_selected",{count:g}):(0,F.t)("figmake.empty_state.select_a_make_kit");return(0,i.jsx)("div",{ref:d,...{0:{},1:{className:"xdozpx"}}[!!f<<0],children:(0,i.jsx)(ry.d,{"aria-label":x,"aria-expanded":o,"data-tooltip":x,disabled:e,onClick:()=>{if(p){c(B.to({type:rL.DV,data:{team:n?.team??null,resource:rN.Bi.CODE_CHAT_LIBRARY_IMPORT,currentPlan:rT.F.Plan.STARTER,upsellPlan:rT.F.Plan.PRO,editorType:te._Y.FIGMAKE,upsellSource:rI.b.CODE_CHAT_LIBRARY_IMPORT}}));return}let e=d.current;if(!e)return;if(o){c(B.ES(rG.W));return}N.az.trackDefinedEvent("ds_import.library_import_button_clicked",{library_keys:t.join(","),file_key:n?.key??""});let i=e.getBoundingClientRect(),s=new rw.Mi(i.left,i.top);c(B.to({type:rG.W,data:{defaultPosition:{left:s.x,bottom:window.innerHeight-s.y+10}}}))},children:f?(0,i.jsx)(rH.r,{}):(0,i.jsx)(rv.l,{})})})}var rW=n(915242),rq=n(316339);let rX={ENHANCE_PROMPT:"enhance-prompt-button",CONNECTORS:"add-connectors-button",ATTACH_IMAGE:"attach-image-button"},rY=T.z.object({sentimentProvided:T.z.boolean(),dismissedAt:T.z.null().or(T.z.number()),createdAt:T.z.number()}),rZ=T.z.record(T.z.string(),rY),rJ=(0,w.E2)(L.H.FIGMAKE_FEEDBACK_MODAL_KEY,{},rZ,{subscribeToChanges:!0});function rQ({disabled:e,onClick:t,onUndo:n,isEnhanced:s}){return(0,nl.z)("bake_enhance_prompt")?(0,i.jsx)(S.N,{mode:"wait",children:s?(0,i.jsx)(I.P.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{duration:.2,ease:"easeInOut"},children:(0,i.jsx)(m.K,{"aria-label":(0,F.t)("figmake.chat_box.undo_enhance_prompt"),"data-tooltip-show-above":!0,disabled:e,onClick:n,children:(0,i.jsx)(g.H,{})})},"undo"):(0,i.jsx)(I.P.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{duration:.2,ease:"easeInOut"},children:(0,i.jsx)(m.K,{"aria-label":(0,F.t)("figmake.chat_box.enhance_prompt"),"data-tooltip-show-above":!0,"data-testid":rX.ENHANCE_PROMPT,disabled:e,onClick:t,children:(0,i.jsx)(x.K,{})})},"enhance")}):(0,i.jsx)(i.Fragment,{})}function r$({enableAssetImport:e,enableImageAttachment:t,enableDsImport:n,enableConnections:r,createLoadedAttachment:l,attachments:o,isViewOnly:d,chatMessagesNodeGuid:c,codeInstanceGuid:u,enhancePrompt:h,isEnhancing:f,generationInProgress:g,hasMessages:x,chatController:b}){let C=(0,a.wA)(),j=(0,w.md)(Y.mK),k=s.useRef(null),[E,T]=(0,w.fp)((0,Z.mC)(c)),[S,I]=s.useState(""),[N,A]=s.useState(!1),L=(0,eh.g7)(),O=(0,eh.Gu)(),R=!!(0,w.md)($.$X),D=!!(0,w.md)($.ww),z=(0,ee.El)()&&(R||D),[G,U]=(0,w.fp)(eg.EO),V=(0,nr.ee)(),K=s.useCallback(async e=>{let t=e.target.files?.[0];t&&(await (0,rW.z)(t,l),k.current&&(k.current.value=""))},[l]),W=s.useCallback(async()=>{try{for await(let e of(I(E),h(E)))T(e);A(!0)}catch(e){I(""),A(!1),(0,M.$D)(p.e.MAKE,e instanceof Error?e:Error(String(e)))}},[h,E,T]),q=s.useCallback(()=>{T(S),A(!1),I("")},[S,T]);s.useEffect(()=>{N&&""===E&&(A(!1),I(""))},[E,N]);let X=V?(0,F.t)("sites.panel.make.add_context"):o.length>=eE.qQ?(0,F.t)("sites.panel.make.attach_limit_reached",{limit:eE.qQ}):(0,F.t)("sites.panel.make.attach_design"),J=e?(0,i.jsx)(m.K,{onClick:()=>{C(B.to({type:eI,data:{chatMessagesNodeGuid:c}}))},"aria-label":X,"data-tooltip-show-above":!0,disabled:d||o.length>=eE.qQ,htmlAttributes:{"data-onboarding-key":er.wj},children:(0,i.jsx)(_.e,{})}):null,Q=t?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("input",{type:"file",className:"x1s85apg",ref:k,accept:H.xp.join(","),"data-testid":"image-attachment-input",onChange:K}),(0,i.jsx)(m.K,{"aria-label":o.length>=eE.qQ?(0,F.t)("sites.panel.make.attach_limit_reached",{limit:eE.qQ}):(0,F.t)("sites.panel.make.attach_image"),"data-tooltip-show-above":!0,"data-testid":rX.ATTACH_IMAGE,disabled:d||o.length>=eE.qQ,onClick:()=>{k.current?.click()},children:(0,i.jsx)(y.s,{})})]}):null,et=r?(0,i.jsx)(m.K,{"aria-label":(0,F.t)("figmake.mcp_clients.connectors"),"data-tooltip-show-above":!0,"data-testid":rX.CONNECTORS,onClick:()=>{U({...G,isVisible:!0})},children:(0,i.jsx)(v,{})}):null;return t||e?L?(0,i.jsx)("div",{className:"x78zum5 x1q0g3np x6s0dn4 x167g77z",children:Q}):(0,i.jsxs)("div",{className:"x78zum5 x1q0g3np x6s0dn4 x167g77z",children:[(0,nl.z)("bake_chat_attach_menu")?(0,i.jsx)(rs.D,{enableAssetImport:e,enableImageAttachment:t,enableConnections:r,attachments:o,isViewOnly:d,chatMessagesNodeGuid:c,createLoadedAttachment:l,shouldProcessDroppedAttachments:!0}):(0,i.jsxs)(i.Fragment,{children:[J,Q,et]}),(0,i.jsx)(rQ,{disabled:d||(0,P.jN)(E)||f,onClick:W,onUndo:q,isEnhanced:N}),n&&((0,ee.hl)()?(0,i.jsx)(rK,{disabled:g||d}):(0,i.jsx)(rV,{isViewOnly:d,hasMessages:x,disabled:g||d,chatController:b})),j&&u&&(0,i.jsx)(r0,{sitesPreview:j,codeInstanceGuid:u,isViewOnly:d,isFigmakeFileEmptyOrLoading:!1!==O,isComponentShowcaseSelected:z})]}):(0,i.jsx)("div",{})}function r0({sitesPreview:e,codeInstanceGuid:t,isViewOnly:n,isFigmakeFileEmptyOrLoading:s,isComponentShowcaseSelected:a}){return(0,i.jsx)(i.Fragment,{children:(0,nl.z)("bake_point_and_edit")?(0,i.jsx)(ep,{disabled:n||s,sitesPreview:e,onboardingKey:er.kx,showTooltipAbove:!0}):(0,nl.z)("bake_click_to_inspect")?(0,i.jsx)(el.l,{disabled:n||s||a,sitesPreview:e,onboardingKey:er.kx,showTooltipAbove:!0,codeInstanceGuid:t}):null})}async function r1(e,t,n){let{nodeGuid:i,uniqueId:s}=t,a=e.get(i);if(!a)return t;let r=performance.now();try{let e=await (0,l.rt)(a);if(!e)throw Error("Failed to downgrade Figma node to image");let t={status:"success",nodeGuid:a.guid,image:e,imageHash:null,type:"IMAGE",uniqueId:s,wasImageConvertedFromFigmaNode:!0};return n({step:j.doA.CONVERT_FIGMA_NODE_TO_IMAGE,attachmentType:"FIGMA_NODE",attachmentId:s,nodeGuid:i,elapsedMs:performance.now()-r}),t}catch(e){return(0,M.$D)(p.e.MAKE_EDITING,e,{extra:{nodeGuid:a.guid}}),n({step:j.doA.CONVERT_FIGMA_NODE_TO_IMAGE,attachmentType:"FIGMA_NODE",attachmentId:s,nodeGuid:i,elapsedMs:performance.now()-r,error:e.message}),t}}function r2({message:e}){let t=(0,U.q5)(),{codeLibraryInstance:n}=(0,eh.oA)(),[a,l]=(0,s.useState)(!0),o=(0,w.md)((0,Z.mC)(n?.guid??"")),d=(0,X.Pd)(t?.key??"",n?.guid??"",e.id),{feedbackState:c,setFeedbackState:u,sentimentFeedbackCallback:p,additionalFeedbackCallback:f,productType:g}=(0,J.q)({persistentEntityId:(0,X.qE)(t?.key??"",n?.guid??""),clientLifecycleId:d},t?.key??null,r.lV.FIGMAKE,e.id,n?.guid),x=w.zl.get(rJ),_=(0,s.useCallback)(e=>{if(t?.key){if(x&&Object.keys(x).length>=100){let e=Object.entries(x).sort(([,e],[,t])=>e.createdAt-t.createdAt)[0];if(e){let[t]=e;delete x[t]}}w.zl.set(rJ,{...x,[t.key]:e})}},[x,t]),y=(0,s.useCallback)(async(e,t)=>{_({sentimentProvided:!0,dismissedAt:null,createdAt:Date.now()}),await p(e,t),l(!1)},[p,_]),v=(0,s.useCallback)(()=>{_({sentimentProvided:!1,dismissedAt:Date.now(),createdAt:Date.now()}),l(!1)},[_]);return!a||o?null:(0,i.jsxs)("div",{"data-testid":"code-chat-feedback-modal",className:"x10l6tqk x1ey2m1c xdofvl6 xq1n1xh x1yztbdb x1yjdb4r xe8ttls x9h44rk x1kpx6y5 xfo81ep x78zum5 x1q0g3np x6s0dn4 x1qughib x1v2ro7d",children:[(0,i.jsxs)("div",{className:"x78zum5 x1q0g3np x6s0dn4 x167g77z",children:[(0,i.jsx)(b.g,{className:"xoqga94 x1iog12x"}),(0,i.jsx)(h.T,{role:"alert",className:"x1g2dr8m xiqqdae xkezfkh x1giz659 x14kxzw3",children:(0,F.t)("figmake.feedback_modal.title")})]}),(0,i.jsxs)("div",{className:"x78zum5 x1q0g3np x6s0dn4 x167g77z",children:[(0,i.jsx)("div",{className:"xet2fuk x78zum5 x6s0dn4 x1v2ro7d",children:(0,i.jsx)(q.z,{aiTrackingContext:{action:W.JT.CODE_CHAT,source:r.lV.FIGMAKE,clientLifecycleId:d,quick_actions_session_id:null,file_key:t?.key??null,product_type:g},sentimentFeedbackCallback:y,additionalFeedbackCallback:f,hideInitialText:!0,externalFeedbackState:c,setExternalFeedbackState:u,thumbsUpLabel:(0,F.t)("figmake.chat.thumbs_up"),thumbsDownLabel:(0,F.t)("figmake.chat.thumbs_down")})}),(0,i.jsx)("div",{className:"xtc4nxu x1ydjwli",children:(0,i.jsx)(m.K,{"data-testid":"code-chat-feedback-modal-close-button",onClick:()=>v(),"aria-label":(0,F.t)("figmake.feedback_modal.close"),children:(0,i.jsx)(C.X,{})})})]})]})}function r3({setInput:e,chatMessagesNodeGuid:t,chatController:n,codeInstanceGuid:a,exchangeMessageIds:l,layerDisplayName:p,codeFileChanges:m,sendMessage:h,emptyState:g,sendDisabled:x,enableAssetImport:_=!1,enableImageAttachment:y=!1,chatBoxLeftExtraContent:v,chatBoxRightExtraContent:b,showChatHeader:C=!1,featureType:E,enableDragUpload:T=!1,enableDsImport:S=!1,enableConnections:I=!1,isResizingPanel:L,isLastUserMessageAutoErrorFix:M,messagesForRendering:P,clientLifecycleIdMap:B,showCodeStreaming:W,rootPath:q,onChatInputBlur:J,onChatInputFocus:er,typingUsers:el=[],forceReadOnly:eo,hideChatBox:ed,canCancelGeneration:ec,generationInProgress:eu,resumableMakeInProgress:ep,currentUserCanHandleResumableMake:ex,cleanUpResumableMake:e_}){let ey=(0,Q.ry)()||eo,eb=(0,nl.z)("bake_client_side_context_limit"),{codeLibraryInstance:eC}=(0,eh.oA)(),ej=(0,w.Xr)(em.St),ek=(0,G.eY)(),ew=(0,w.md)(Y.mK),eI=(0,w.Xr)(Z.oy),{Sprig:eN}=(0,O.A)(),eA=function(e){let t=(0,ip.iZ)();return t?e.filter(e=>"user"===e.type&&e.user.id===t.id).length:0}(P.filter(e=>"user"===e.type&&!l.has(e.id))),eL=function({chatController:e}){let t=[];if((0,ee.hl)()){let{usedMakeLibraryIds:e}=(0,en.c)();t=e??[]}else{let{libraryImport:n}=(0,et.S)({chatController:e});t=n?.libraries.map(e=>e.library_key)??[]}return t}({chatController:n}),{exchange:eM,user:eO}=(0,Z.$W)(t),eR=(0,s.useRef)(null),eP=(0,s.useRef)(null),eD=(0,nj.YT)(),eF=(0,U.q5)(),ez=eF?.key,eB=(0,s.useMemo)(()=>(0,X.qE)(ez||null,t),[ez,t]);s.useEffect(()=>{eR.current&&"keyboard"!==f.F.type&&eR.current.focus()},[]),(0,nj.vG)(t);let eG=(0,s.useCallback)(n=>{if(!eR.current)return;let i=eR.current.selectionStart,s=eR.current.selectionEnd,a=w.zl.get((0,Z.mC)(t));e(a.substring(0,i)+n+a.substring(s))},[t,e]),eU=(0,s.useCallback)((e,t,n,i)=>{N.az.trackDefinedEvent("ai_for_production.code_chat_design_node_pasted",{featureType:E,hasInstances:n>0,number_of_nodes:t,number_of_instances:n,persistent_entity_id:eB,file_key:ez,attachmentId:i})},[E,eB,ez]),eV=(0,s.useCallback)((e,t,n,i)=>{N.az.trackDefinedEvent("ai_for_production.code_chat_design_node_paste_completed",{featureType:E,elapsedMs:n,hasInstances:t>0,number_of_nodes:e,number_of_instances:t,persistent_entity_id:eB,file_key:ez,attachmentId:i})},[E,eB,ez]),eH=(0,s.useCallback)(({step:e,attachmentType:t,attachmentId:n,nodeGuid:i,elapsedMs:s,error:a,nodeCount:r,instanceCount:l})=>{e===j.doA.START&&"FIGMA_NODE"===t&&void 0!==r&&void 0!==l?eU(i,r,l,n):e===j.doA.PASTE_COMPLETED&&"FIGMA_NODE"===t&&void 0!==r&&void 0!==l&&eV(r,l,s,n),e===j.doA.START&&w.zl.set((0,eE.wd)(i),performance.now()),N.az.trackDefinedEvent("ai_for_production.code_chat_figma_attachment_funnel",{step:j.doA[e],featureType:E,attachmentType:t,attachmentId:n,fileKey:ez,nodeGuid:i,elapsedMs:s,error:a,nodeCount:r,instanceCount:l,persistentEntityId:eB})},[E,eB,ez,eU,eV]);(0,eS.p)(t,eG,eH,{sitesPreview:ew??void 0,fileKey:ez??"",fileName:w.zl.get(U.yV)?.name||""});let{attachments:eK,setAttachments:eW,stashAllAttachments:eq,createLoadedAttachment:eX,attachmentsReady:eY}=(0,eE._9)(t),eZ=s.useMemo(()=>eK.some(e=>"success"===e.status&&"FIGMA_NODE"===e.type&&e.image),[eK]),eJ=s.useCallback(async()=>{eW(await (0,u.lX)(eK,async e=>"success"===e.status&&"FIGMA_NODE"===e.type?await r1(ek,e,eH):e))},[eK,ek,eW,eH]),{selectedElement:eQ,selectedElementCodeSnippet:e$}=(0,ei.fl)(),e0=(0,ei.sG)(),e1=(0,nl.z)("bake_byods_extraction_showcase")&&e0&&!eQ,e2=(0,ei.YC)(),{setChatError:e3,chatError:e5,clearChatError:e4}=(0,nx.tk)(t),e6=(0,n_.kV)(t),[e7,e8]=s.useState(!0),e9=(0,w.md)(nj.Ng),te=s.useRef(!1);s.useMemo(()=>{(()=>{let e=w.zl.get((0,Z.mC)(t)).length,{figmaNodeLength:n,imageTokens:i,figmaNodeCount:s,imageCount:a}=eK.reduce((e,t)=>{if("success"!==t.status)return e;if("FIGMA_NODE"===t.type){let n=t.codeFiles.reduce((e,t)=>e+t.code.length,0);return{figmaNodeLength:e.figmaNodeLength+n,imageTokens:e.imageTokens,figmaNodeCount:e.figmaNodeCount+1,imageCount:e.imageCount}}if("IMAGE"===t.type){let n=t.image?.length/750||0;return{figmaNodeLength:e.figmaNodeLength,imageTokens:e.imageTokens+n,figmaNodeCount:e.figmaNodeCount,imageCount:e.imageCount+1}}return e},{figmaNodeLength:0,imageTokens:0,figmaNodeCount:0,imageCount:0}),r=eQ&&e$?(0,es.F)(eQ,e$):void 0,l=e/3,o=n/3,d=(r?JSON.stringify(r).length:0)/3,c=l+o+d+(e1?JSON.stringify(e0).length:0)/3+i,u=c<=15e4;u!==te.current&&(u||N.az.trackDefinedEvent("ai_for_production.code_chat_client_side_context_limit_exceeded",{total_number_of_tokens_estimate:c,image_tokens_estimate:i,figma_node_tokens_estimate:o,text_tokens_estimate:l,point_and_prompt_tokens_estimate:d,text_character_count:e,image_attachment_count:a,figma_node_attachment_count:s,direct_selection_count:eQ?1:0,file_key:ez,persistent_entity_id:eB}),te.current=u,e8(u))})()},[eB,ez,t,eK,eQ,e$,e1,e0]),s.useEffect(()=>{e7||e5?.error.message===nx.T_.MAX_CONTENT_LENGTH_EXCEEDED?e7&&e5?.error.message===nx.T_.MAX_CONTENT_LENGTH_EXCEEDED&&e4():(0,nl.z)("bake_downgrade_figma_nodes_to_images")&&eZ?(e3({error:Error(nx.T_.MAX_CONTEXT_LENGTH_EXCEEDED_IMAGE_FALLBACK)}),eJ()):e3({error:Error(nx.T_.MAX_CONTENT_LENGTH_EXCEEDED)})},[e7,e5,e3,e4,eZ,eJ]);let{communityAttribution:tt}=(0,eT.Pe)(),tn=(0,ef.Oc)(),ti=(0,z.Tv)(),ts=async({message:e,errors:t,hidden:n,origin:i,isUserInput:s=!1})=>{if(!ey&&!e9&&(e||n))try{e4(),e6();let a=function(e,t,n){let i=(0,ev.getActiveTSSceneGraph)();return e.filter(e=>"success"===e.status).map(e=>{switch(e.type){case"FIGMA_NODE":return rr(e,i,t,n);case"IMAGE":return rl(e);case"DIFF":return ro(e)}})}(eK,tt,q);(0,nl.z)("make_import_improvements_experimental")&&function(e){let t;e.forEach(e=>{"node"===e.type&&e.codeFiles&&e.codeFiles.forEach(e=>{if(void 0===e.code)return;let n=e.code,i=!1;if(n=n.replace(/^(?!export\s)(async\s+)?function\s+(\w+)/gm,e=>(i=!0,`export ${e}`)),i&&e.fullFilePath){let t=(0,d._J)(e.fullFilePath);t&&t.sourceCode!==n&&k.l7.ai("export-functions",()=>{t.sourceCode=n})}let s=e.code.match(/export\s+default\s+function\s+(\w+)/);s&&s[1]&&!t&&(t={functionName:s[1],filePath:e.fullFilePath})})});let n=P&&P.length>0;if(t&&eC&&!n){let e=t.filePath.replace(/^\//,"").replace(/\.tsx?$/,""),n=`import ${t.functionName} from "./${e}";

export default function App() {
  return <${t.functionName} />;
}`,i=(0,o.iB)(),s=(0,d._J)(i);s&&k.l7.ai("update-app-tsx",()=>{s.sourceCode=n}),ej(!0)}}(a),eq();let l=eQ&&e$?(0,es.F)(eQ,e$):void 0,c=ti.filter(e=>!!ek.get(e)),u={plainText:e,libraryKey:eL&&eL.length>0?eL[0]:void 0,libraryKeys:eL,imports:a,inspectedElement:l,inspectedComponent:e1?e0:void 0,inspectedLibrary:e2,errors:t,hidden:n,selectedNodeIds:c,origin:i},p=e||"",m=(0,rq.u)(p,a,eQ?.elementAndParentSources);await h(u,m);let f=eL[0];if(f){let e={fileKey:ez||"",libraryKey:f,library_keys:eL.join(",")};(0,nl.z)("bake_ds_import_l3a")?(0,K.ZR)(f).then(t=>{N.az.trackDefinedEvent("ds_import.library_used_in_generation",{...e,includeComponents:t.data.meta.has_generated_components})}):N.az.trackDefinedEvent("ds_import.library_used_in_generation",{...e})}eD("success",{message:p}),(0,nl.z)("bake_sprig")&&E===r.lV.FIGMAKE&&s&&eA>=2&&eN("track","bake_survey_1_3_chats_sent")}catch(e){eD("error",{error:e instanceof Error?e.message:"Unknown error"}),e3(e instanceof Error?{error:e}:{error:Error("Unknown error")})}},ta=(0,A.F)(ts);(0,s.useEffect)(()=>{let e=()=>{ta.current({message:w.zl.get((0,Z.mC)(t)),isUserInput:!0})};return ea.Uy.on("submit",e),()=>{ea.Uy.removeListener("submit",e)}},[ta,t]);let tr=(0,V.KP)(),tl=void 0!==eM&&eM.messages.length>0||ep,to=(0,$.Wn)(t);!function({chatMessagesNodeGuid:e,featureType:t}){let{exchange:n,user:i}=(0,Z.$W)(e),a=void 0!==n&&n.messages.length>0,l=(0,w.md)(eg.kU),o=(0,U.tS)(),d=(0,ip.iZ)(),c=(0,nw.Z)();s.useEffect(()=>{if(!a&&!l||!o||a&&i?.userID!==d?.id||c)return;let e=e=>{let i;e.preventDefault(),e.returnValue=!0;let s=n?.messages[0];s&&s.type===j.K$p.USER_MESSAGE&&(i=(0,r.MK)(s.textContent).requestUuid),N.az.trackDefinedEvent("ai_for_production.unsaved_changes_warning_shown",{fileKey:o,featureType:t,requestUuid:i,userMessageId:s?.id})};return window.addEventListener("beforeunload",e),()=>window.removeEventListener("beforeunload",e)},[a,l,c,o,t,n?.messages,i?.userID,d?.id])}({chatMessagesNodeGuid:t,featureType:E});let td=(0,eh.g7)(),{enhancePrompt:tc,isEnhancing:tu}=function(e){let[t,n]=(0,s.useState)(!1),{setChatError:i,clearChatError:a}=(0,nx.tk)(e);return{enhancePrompt:(0,s.useCallback)(async function*(e){let t;if(!e.trim())return e;n(!0),a();try{t=(await rf.Ay.shared.figmakeEnhancePrompt({prompt:e},{...(0,rg.Ay)()})).getReader();let n="";for(;;){let{done:e,value:i}=await t.read();if(e)break;n+=i.delta,yield n}return n}catch(t){let e=t instanceof Error?t:Error("Failed to enhance prompt");throw i({error:Error(nx.T_.PROMPT_ENHANCEMENT_FAILED)}),e}finally{t?.releaseLock(),n(!1)}},[i,a]),isEnhancing:t}}(t),tp=!tl&&eY&&!to&&(e7||!eb)&&!tu&&!e9&&(!n||n.isInitialized);(0,rx.R)({enabled:!!(E===r.lV.FIGMAKE&&tp&&eF?.canEdit),chatController:n,setInput:e,sendMessage:ts});let tm=P?.length?(0,F.t)("living_designs.chat.placeholder.iterate"):(0,F.t)("living_designs.chat.placeholder.blank_slate"),[th,tf]=s.useState(!1),tg=async e=>{if(ey||e9||!y||!T||0===e.files.length||e.files.length>eE.qQ)return;let t=Array.from(e.files).filter(e=>e&&H.xp.some(t=>e.type.startsWith(t.replace("*",""))));if(eK.filter(e=>"error"!==e.status).length+t.length>eE.qQ){(0,eE.hH)(j.FDn.MAXIMUM_ATTACHMENTS_EXCEEDED),tf(!1);return}let n=t.map(async e=>{await (0,rW.z)(e,eX)});await Promise.all(n),tf(!1)},tx=n?.getMessages(),t_=tx?.filter(e=>e.type===j.K$p.USER_MESSAGE&&!r.H5(e.textContent).hidden),ty=tx?.[tx.length-1];ty?.type===j.K$p.ASSISTANT_MESSAGE&&""===(0,r.H5)(ty.textContent).plainText&&0===ty.toolCalls.length&&0===ty.toolResults.length&&tx&&tx.length>1&&(ty=tx[tx.length-2]);let tv=ty?.type===j.K$p.ASSISTANT_MESSAGE&&ty.toolCalls.some(e=>(0,c.Eb)(e.toolName)),tb=(0,eh.wp)(),tC=w.zl.get(rJ),tj=ez&&tC?.[ez]||{sentimentProvided:!1,dismissedAt:null},tk=!tj?.dismissedAt||new Date(tj.dismissedAt).getTime()+6048e5<Date.now(),tw=!(0,R.I7)("exp_make_feedback_modal").getConfig().get("is_full_view",!0)&&t_?.length===1&&!eM?.messages.length&&!tv&&!tb&&tk&&!tj.sentimentProvided;return(0,i.jsxs)("div",{className:"x78zum5 xdt5ytf xh8yej3 x5yr21d",ref:eP,children:[(0,i.jsxs)("div",{className:"x1n2onr6 xh8yej3 x5yr21d x78zum5 xdt5ytf",children:[C&&(0,i.jsx)(ia,{showAiBetaBadge:E!==r.lV.FIGMAKE}),(0,i.jsx)(a4,{chatController:n,chatMessagesNodeGuid:t,clientLifecycleIdMap:B,codeFileChanges:m,currentUserCanHandleResumableMake:ex,dragOverlay:th?(0,i.jsx)(rh,{}):void 0,emptyState:g,exchangeMessageIds:l,featureType:E,isResizingPanel:L,layerDisplayName:p,messagesForRendering:P,resumableMakeInProgress:ep,showCodeStreaming:W}),(0,i.jsx)(rp,{typingUsers:el}),(0,i.jsx)("div",{className:"x10l6tqk xu96u03 x3m8u43 x1vqgdyp x47corl x1ey2m1c xdu2321"}),tw&&(0,i.jsx)(r2,{message:t_[t_.length-1]})]}),ed?null:(0,i.jsx)(D.Y,{isDragTarget:()=>T,onTargetDragEnter:()=>tf(!0),onTargetDragLeave:()=>tf(!1),onTargetDrop:tg,children:(0,i.jsx)(n9,{ref:e=>{eR.current=e,eI(e)},canCancelGeneration:eO?.sessionID===tr&&!ep||ec,canSend:tp&&!x,chatBoxLeftExtraContent:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r$,{attachments:eK,chatController:n,chatMessagesNodeGuid:t,codeInstanceGuid:a,createLoadedAttachment:eX,enableAssetImport:_,enableConnections:I,enableDsImport:S,enableImageAttachment:y,enhancePrompt:tc,generationInProgress:tl||eu||!1,hasMessages:P.length>0,isEnhancing:tu,isViewOnly:ey}),v??null]}),chatBoxRightExtraContent:b,chatContainerRef:eP,chatMessageCount:P.length,chatMessagesNodeGuid:t,cleanUpResumableMake:e_,errorFixingDisabled:tl||eu,featureType:E,generationInProgress:tl||eu,inspectedElement:eQ,isDraggingAttachment:th,isLastUserMessageAutoErrorFix:M,onBlur:J,onFocus:er,placeholderText:tm,sendMessage:({message:e,errors:n,origin:i})=>ts({message:e??w.zl.get((0,Z.mC)(t)),errors:n,isUserInput:!0,origin:i,hidden:(0,nl.z)("make_fewer_error_fix_attempts")&&i===r.zm.FIX_ERRORS_BUTTON}),showPasteDesignsCallout:tn&&_&&!ey&&!e9&&0===P.length&&0===eK.length&&!td})})]})}},329965:(e,t,n)=>{n.d(t,{u:()=>ei,S:()=>en});var i=n(104076),s=n(716976),a=n(237420),r=n(542653),l=n(88314),o=n(826220),d=n(268389),c=n(293422),u=n(307829),p=n(454851),m=n(694415),h=n(853943),f=n(73795),g=n(795033),x=n(120440),_=n(883765),y=n(653899),v=n(848561),b=n(259161),C=n(192075),j=n(366535),k=n(211862),w=n(624155),E=n(959834),T=n(288054),S=n(782307),I=n(634491),N=n(183379),A=n(7659),L=n(431810),M=n(636609),O=n(810149),R=n(612691),P=n(533144),D=n(628384),F=n(4154),z=n(686586),B=n(707490),G=n(359103),U=n(631571),V=n(929302),H=n(950187),K=n(282794);let W=(0,E.Ju)(function(e){let t=V.hS({open:e.open,onClose:e.onClose}),{library:n,onClose:r,createLibraryImport:l}=e,o=(0,a.wA)(),u=(0,k.tS)();(0,y.h)(()=>{_.az.trackDefinedEvent("ds_import.library_warning_modal_shown",{library_key:n.library_key,file_key:u||""})});let p=s.useCallback(()=>{_.az.trackDefinedEvent("ds_import.library_warning_modal_continue_clicked",{library_key:n.library_key,file_key:u||""}),l(n),o((0,j.AS)()),r()},[l,o,n,r,u]);return(0,i.jsx)(H.bL,{manager:t,width:"lg",height:"fixed",children:(0,i.jsxs)(d.vo,{children:[(0,i.jsx)(d.Y9,{children:(0,i.jsx)(d.hE,{children:(0,C.t)("figmake.ds_imports.library_selector_warning_modal.title")})}),(0,i.jsx)(d.nB,{children:(0,i.jsxs)("div",{className:"x78zum5 xdt5ytf xou54vl x1xmf6yo x1e56ztr",children:[(0,i.jsxs)("div",{className:"x78zum5 xou54vl x6s0dn4",children:[(0,i.jsx)(K.D,{thumbnailUrl:n.thumbnail_url,coverThumbnail:!0,name:n.library_name}),(0,i.jsxs)("div",{className:"x78zum5 xdt5ytf x1jnr06f",children:[(0,i.jsx)("span",{className:"x17hqfcz xemv814 x1ma9mv9",children:n.library_name}),(0,i.jsx)("span",{className:"x1n0bwc9 xclx6tv x17akokd x1qxcl5b",children:n.team_name})]})]}),(0,i.jsx)("p",{children:(0,C.t)("figmake.ds_imports.library_selector_warning_modal.body")})]})}),(0,i.jsx)(d.wi,{children:(0,i.jsx)(d.jk,{children:(0,i.jsx)(c.$n,{onClick:p,children:(0,C.t)("figmake.ds_imports.library_selector_warning_modal.continue")})})})]})})},"ChatLibrarySelectorWarningModal");var q=n(264834),X=n(854095);let Y={textSecondary:{kMwMTN:"x1n0bwc9",$$css:!0}};function Z({closeModal:e,hasExistingChatMessages:t,chatController:n}){let a=(0,S.z)(),{libraryImport:r,libraryRequestStatus:o,libraryResults:d}=(0,D.S)({chatController:n}),c=s.useMemo(()=>a(d||[]),[d,a]),u=r?.frozen,p=s.useMemo(()=>new Set(r?.libraries.map(e=>e.library_key)||[]),[r?.libraries]);return"errors"===o?(0,i.jsx)(ee,{}):"loading"===o?(0,i.jsx)(M.$,{className:"x1y1aw1k xjkvuk6 xh8yej3 x78zum5 xdt5ytf x167g77z",children:(0,l.y1)(3).map(e=>(0,i.jsx)(L.Q,{},e))}):0===p.size&&0===d.length?(0,i.jsx)(ee,{}):(0,i.jsx)(M.$,{className:"x1y1aw1k xjkvuk6 xh8yej3 x78zum5 xdt5ytf x167g77z",children:(0,i.jsx)("div",{children:(0,i.jsx)(I.Tp,{entrypoint:T.r6.FIGMAKE,initialTab:void 0,initialUpdatesModalScope:w.aD.CURRENT,children:(0,i.jsx)(v.dP,{children:c.map((s,a)=>{let r=p.has(s.library_key);return(0,i.jsx)(Q,{library:s,index:a,isSelected:r,hasExistingChatMessages:t,closeModal:e,chatController:n,status:u?"FROZEN":"READY_FOR_IMPORT"},`ImportReadyLibraryListItem-${s.library_key}`)})})})})})}var J=(e=>(e.READY_FOR_IMPORT="READY_FOR_IMPORT",e.FROZEN="FROZEN",e))(J||{});function Q({library:e,index:t,isSelected:n,hasExistingChatMessages:s,closeModal:r,chatController:l,status:o}){let d=(0,a.wA)(),c=(0,k.tS)(),{createLibraryImport:u,isLibraryTogglePending:p}=(0,D.S)({chatController:l}),m=(0,R.z)("bake_ds_import_multi_library_support"),h=p(e.library_key);if(m){let s;switch(o){case"READY_FOR_IMPORT":s=(0,i.jsx)($,{library:e,isSelected:n,chatController:l});break;case"FROZEN":s=void 0}return(0,i.jsx)(A.V,{header:e.library_name,subheader:e.team_name,thumbnailUrl:e.thumbnail_url,coverThumbnail:!0,callToAction:s,name:e.library_name,onClick:void 0,kbPath:[N.m3.TabBodySection.Body,t]})}return(0,i.jsx)(A.V,{header:e.library_name,subheader:e.team_name,thumbnailUrl:e.thumbnail_url,coverThumbnail:!0,callToAction:void 0,name:e.library_name,onClick:()=>{h||"READY_FOR_IMPORT"!==o||(_.az.trackDefinedEvent("ds_import.library_selector_overlay_library_selected",{library_key:e.library_key,file_key:c||""}),s&&!m?(r(),d(j.to({type:W,data:{library:e,chatController:l,createLibraryImport:u}}))):(u(e),r()))},kbPath:[N.m3.TabBodySection.Body,t]})}function $({library:e,isSelected:t,chatController:n}){let s=(0,R.z)("bake_ds_import_multi_library_support"),{toggleLibrarySelection:a,isLibraryTogglePending:r}=(0,D.S)({chatController:n});if(!s)return null;let l=r(e.library_key),o=t?(0,C.t)("sites.modal.make_kits_remove_button_text"):(0,C.t)("sites.modal.make_kits_add_button_text");return(0,i.jsx)(c.$n,{variant:t?"secondary":"primary",disabled:l,onClick:()=>a(e),children:o})}function ee(){let e=(0,g.Xr)(B.jx),t=(0,g.md)(U.FX),n=(0,k.tS)();return(0,y.h)(()=>{_.az.trackDefinedEvent("ds_import.library_selector_empty_state_seen",{file_key:n||""})}),(0,i.jsx)("div",{className:"x9f619 x167g77z xh8yej3 x5yr21d x78zum5 x6s0dn4 xl56j7k xwib8y2",children:(0,i.jsxs)("div",{className:"xhwf2h4 x167g77z x78zum5 xdt5ytf x6s0dn4 xl56j7k x2b8uid",children:[(0,i.jsx)(m.l,{}),(0,i.jsx)("div",{...x.Ay.props(f.g.textBodyMediumStrong),children:(0,C.t)("sites.modal.no_libraries_found")}),(0,i.jsxs)("div",{...x.Ay.props(f.g.textBodyMedium,Y.textSecondary),children:[(0,C.t)("sites.modal.select_library_banner_subtitle"),"\xa0",(0,i.jsx)(b.Ph,{href:X.kC,newTab:!0,children:(0,C.t)("sites.modal.learn_more")})]}),!t&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"x78zum5 x1q0g3np xl56j7k x2b8uid x6s0dn4",children:[(0,i.jsx)("div",{className:"x1dmp6jm xqtp20y xmkeg23 x1y0btm7 x7z60cl"}),"\xa0",(0,i.jsx)("div",{...x.Ay.props(f.g.textBodyMedium,Y.textSecondary),children:(0,C.t)("sites.modal.or")}),"\xa0",(0,i.jsx)("div",{className:"x1dmp6jm xqtp20y xmkeg23 x1y0btm7 x7z60cl"})]}),(0,i.jsx)("div",{...x.Ay.props(f.g.textBodyMedium,Y.textSecondary),children:(0,C.t)("sites.modal.add_guidelines_text")}),(0,i.jsx)(c.$n,{variant:"primary",onClick:()=>{_.az.trackDefinedEvent("ds_import.library_selector_empty_state_guidelines_clicked",{file_key:n||""});let t=(0,r.$d)(),i=t[X.dY]||t[X.x1]||null;i&&((0,P.Zr)(i),e(B.Ic.CODE),i.codeFilePath&&(0,O.ci)(i.codeFilePath))},children:(0,C.t)("sites.modal.add_guidelines_button_text")})]})]})})}function et(){let{getTriggerProps:e,manager:t}=u.b(),n=(0,a.wA)(),r=s.useCallback(()=>{n(j.ES(ei))},[n]);return(0,i.jsxs)(u.bL,{manager:t,children:[(0,i.jsx)(p.d,{...e(),"aria-label":(0,C.t)("figmake.empty_state.settings"),children:(0,i.jsx)(h.J,{})}),(0,i.jsxs)(u.mc,{children:[(0,i.jsx)(G.R,{onClickCallback:r}),(0,i.jsx)(G.P8,{onClickCallback:r})]})]})}let en=()=>(0,a.d4)(e=>(0,F.hl)()?!!e.modalShown&&e.modalShown.type===q.W.type:!!e.modalShown&&e.modalShown.type===ei.type),ei=(0,E.Ju)(function(e){let{defaultPosition:t,hasExistingChatMessages:n,chatController:r}=e,l=(0,a.wA)(),c=s.useCallback(()=>{l((0,j.AS)())},[l]);s.useEffect(()=>(z.Uy.on("submit",c),()=>{z.Uy.removeListener("submit",c)}),[c]);let{libraryImport:u}=(0,D.S)({chatController:r}),p=u?.frozen,m=(0,C.t)("sites.modal.select_library");return(0,i.jsx)(o.bL,{defaultPosition:t,width:400,maxHeight:326,onClose:c,children:(0,i.jsxs)(d.vo,{children:[(0,i.jsxs)(d.Y9,{children:[(0,i.jsx)(d.hE,{children:m}),(0,i.jsx)(d.jk,{children:(0,i.jsx)(et,{})})]}),(0,i.jsx)(d.nB,{padding:0,children:(0,i.jsx)("div",{...{0:{className:"x78zum5 xdt5ytf xou54vl xsbggsw xh8yej3 x9f619"},1:{className:"x78zum5 xdt5ytf xou54vl xh8yej3 x9f619 x159c2z0 x99ztlj x1s3m9h8"}}[!!p<<0],children:(0,i.jsx)(Z,{closeModal:c,hasExistingChatMessages:n,chatController:r})})})]})})},"ChatLibrarySelectorOverlay",E.ZU.YES)},560985:(e,t,n)=>{n.d(t,{D:()=>K});var i=n(104076),s=n(716976),a=n(237420),r=n(307829),l=n(420680);let o=(0,s.memo)(function(e){return(0,i.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,"data-fpl-icon-size":"24",children:(0,i.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",d:"M13.5 5A2.5 2.5 0 0 1 16 7.5c0 .82-.397 1.544-1.006 2a2.5 2.5 0 0 1 1.006 2 2.5 2.5 0 0 1-2.5 2.5 2.5 2.5 0 0 1-1.5-.504V15.5a2.5 2.5 0 0 1-5 0c0-.82.396-1.544 1.005-2a2.493 2.493 0 0 1 0-4A2.5 2.5 0 0 1 7 7.5 2.5 2.5 0 0 1 9.5 5zm3.5 9a.5.5 0 0 1 .5.5v1h1a.5.5 0 0 1 0 1h-1v1a.5.5 0 0 1-1 0v-1h-1a.5.5 0 0 1 0-1h1v-1a.5.5 0 0 1 .5-.5m-7.5 0a1.5 1.5 0 1 0 1.5 1.5V14zm0-4a1.5 1.5 0 0 0 0 3H11v-3zm4 0a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3m-4-4a1.5 1.5 0 1 0 0 3H11V6zM12 9h1.5a1.5 1.5 0 0 0 0-3H12z"})})});var d=n(945437),c=n(180),u=n(795033),p=n(120440),m=n(883765),h=n(192075),f=n(366535),g=n(211862),x=n(298056),_=n(789596),y=n(107799),v=n(929302),b=n(950187),C=n(268389),j=n(577823),k=n(36970),w=n(790009),E=n(266808),T=n(738180),S=n.n(T),I=n(876621),N=n(373547),A=n(959834),L=n(266230);let M={illustration:{kzqmXN:"xvni27",kZKoxP:"xdd8jsf",kaIpWk:"x9h44rk",kC7eKd:"x16v0e3u",k1xSpc:"x78zum5",kjj79g:"xl56j7k",kGNEyG:"x6s0dn4",$$css:!0},illustrationLightMode:{kGVxlE:"xgk9eko",$$css:!0},illustrationFrame:{kVAEAm:"x10l6tqk",k87sOh:"xys9btg",kbCHJM:"xu96u03",kLqNvP:null,kt4wiu:null,k3aq6I:"xetamn0",$$css:!0},illustrationDesign:{kVAEAm:"x10l6tqk",k87sOh:"x13vifvy",kbCHJM:"xn08lp5",kLqNvP:null,kt4wiu:null,k3aq6I:"xdzgsf4",$$css:!0}};function O({customStyle:e,children:t}){let n=(0,N.DP)();return(0,i.jsx)("div",{...p.Ay.props(M.illustration,"light"===n&&M.illustrationLightMode,e),children:(0,i.jsx)("div",{className:"x1useyqa xsdox4t x1ctf4ec x1sjmt1f x78zum5 xl56j7k x6s0dn4",children:t})})}let R=(0,A.Ju)(function({onClose:e,open:t,chatMessagesNodeGuid:n}){let a=(0,g.q5)(),r=v.hS({open:t,onClose:e}),[l,o]=(0,s.useState)(!1),{attachments:d}=(0,L._9)(n),c=s.useRef(!1),p=(0,u.Xr)(y.Ki),[f,_]=(0,u.fp)(y.Be);return s.useEffect(()=>{f&&(_(!1),c.current&&(m.az.trackDefinedEvent("figmake.attach_design_attachment_added",{fileKey:a?.key,type:"paste"}),e())),c.current=!0},[e,f,_,a?.key]),(0,i.jsx)(b.bL,{manager:r,width:"fit-content",children:(0,i.jsxs)(C.vo,{children:[(0,i.jsx)(C.Y9,{children:(0,i.jsx)(C.hE,{children:(0,h.tx)("figmake.attachments.attach_design_modal_title")})}),(0,i.jsx)(C.nB,{children:(0,i.jsx)(w.J,{brand:"design",children:(0,i.jsx)(I.Y,{isDragTarget:()=>d.length<L.qQ,onTargetDragEnter:()=>o(!0),onTargetDragLeave:()=>o(!1),onTargetDrop:t=>{if(0===t.files.length){o(!1);return}let[n,i]=S()(Array.from(t.files),e=>x.xp.some(t=>e.type.startsWith(t.replace("*",""))));if(i.length>0){(0,L.hH)(E.FDn.UNSUPPORTED_FILE_TYPE),o(!1);return}if(d.filter(e=>"error"!==e.status).length+n.length>L.qQ){(0,L.hH)(E.FDn.MAXIMUM_ATTACHMENTS_EXCEEDED),o(!1),e();return}n.length>0&&p(n),m.az.trackDefinedEvent("figmake.attach_design_attachment_added",{fileKey:a?.key,type:"drag_and_drop"}),o(!1),e()},children:(0,i.jsxs)("div",{...{0:{className:"x7hzu26 x1ef8nbk x19y5rnk xmkeg23 xbsl7fq x83n4p2 x7z60cl xl0cjzi x1l76qip x1mu97ne xgqtt45 x193iq5w x78zum5 xl56j7k x6s0dn4 xdt5ytf"},1:{className:"x7hzu26 x1ef8nbk x19y5rnk xmkeg23 x1l76qip x1mu97ne xgqtt45 x193iq5w x78zum5 xl56j7k x6s0dn4 xdt5ytf x1y0btm7 x1va2ikv"}}[!!l<<0],tabIndex:-1,children:[(0,i.jsxs)("div",{className:"x13oubkp xr931m4 x1n2onr6 x12sbs06",children:[(0,i.jsx)(O,{customStyle:M.illustrationFrame,children:(0,i.jsx)(j.W,{style:{"--color-icon":"var(--color-icon-brand)",height:"32px",width:"32px"}})}),(0,i.jsx)(O,{customStyle:M.illustrationDesign,children:(0,i.jsx)(k.L,{style:{"--color-icon":"var(--color-icon-brand)",height:"32px",width:"32px"}})})]}),(0,i.jsx)("div",{className:"xrlp15q x1nmd3yn xm735u9 xkbmbem x3wk4up x1n0bwc9 xumn273 x2b8uid",children:(0,h.tx)("figmake.attachments.attach_design_modal_body")})]})})})})]})})},"AttachDesignModal",A.ZU.YES);var P=n(7720),D=n(166887),F=n(816565),z=n(68902),B=n(436539);function G(){let{mcpClients:e,isLoading:t}=(0,B.Qh)(),n=(0,u.Xr)(z.EO),a=(0,D.hC)(),l=s.useCallback(()=>{a("ai_chat_mcp.settings_directory_opened",{featureEntrypoint:"figmake"}),n({screen:z.ck.LIST_MCP_CLIENTS,selectedMcpServer:null,isVisible:!0})},[n,a]);if(t)return null;let o=e.sort((e,t)=>e.server.name.localeCompare(t.server.name));return o.length<=5?(0,i.jsxs)(i.Fragment,{children:[o.map(e=>(0,i.jsx)(U,{client:e},e.id)),(0,i.jsxs)(r.q7,{onClick:l,children:[(0,i.jsx)(r.Q$,{children:(0,i.jsx)(P.K,{})}),(0,i.jsx)("div",{children:0===o.length?(0,h.t)("figmake.mcp_clients.add_connectors"):(0,h.t)("figmake.mcp_clients.manage_connectors")})]})]}):(0,i.jsxs)(r.g8,{children:[(0,i.jsxs)(r.ZP,{children:[(0,i.jsx)(r.Q$,{children:(0,i.jsx)(P.K,{})}),(0,i.jsx)("div",{children:(0,h.t)("figmake.mcp_clients.connectors")})]}),(0,i.jsxs)(r.MJ,{children:[o.map(e=>(0,i.jsx)(U,{client:e},e.id)),(0,i.jsx)(r.q7,{onClick:l,children:(0,h.t)("figmake.mcp_clients.manage_connectors_overflow")})]})]})}function U({client:e}){let t=(0,u.Xr)(z.EO);return(0,i.jsx)(r.q7,{onClick:()=>{t({screen:z.ck.INSPECT_MCP_CLIENT,selectedMcpServer:e.server,isVisible:!0})},children:(0,i.jsxs)("div",{className:"x78zum5 x6s0dn4 xh8yej3 xip9j14 x1xn8yn6",children:[(0,i.jsx)(r.Q$,{children:e.server.logoUrl?(0,i.jsx)(F.oW,{className:"x1xp8n7a xmix8c7 x19y5rnk x19kjcj4 x10d6zji",src:e.server.logoUrl,alt:e.server.name}):(0,i.jsx)(P.K,{})}),(0,i.jsx)("div",{children:e.server.name})]})},e.id)}var V=n(702319),H=n(915242);function K({enableAssetImport:e,enableImageAttachment:t,enableConnections:n,attachments:p,isViewOnly:v,chatMessagesNodeGuid:b,createLoadedAttachment:C,shouldProcessDroppedAttachments:j,toggleComponent:k}){let w=(0,g.q5)(),E=(0,a.wA)(),T=s.useRef(null),{getTriggerProps:S,manager:I}=r.b(),[N,A]=(0,u.fp)(y.Ki),M=(0,V.ee)();s.useEffect(()=>{j&&N&&N.length>0&&(async()=>{try{let e=N.map(async e=>{await (0,H.z)(e,C)});await Promise.all(e)}catch(e){console.error(e)}finally{A(null)}})()},[j,N,C,A]);let O=s.useCallback(async e=>{let t=e.target.files?.[0];t&&(await (0,H.z)(t,C),T.current&&(T.current.value=""))},[C]),P=e?(0,i.jsxs)(r.q7,{onClick:()=>{m.az.trackDefinedEvent("figmake.attach_design_clicked",{fileKey:w?.key}),E(f.to({type:R,data:{chatMessagesNodeGuid:b}}))},disabled:v||p.length>=L.qQ,children:[(0,i.jsx)(r.Q$,{children:(0,i.jsx)(o,{})}),(0,i.jsx)("div",{className:"xifkd7f",children:(0,h.t)("figmake.attachments.attach_a_design")})]}):null,D=t?(0,i.jsxs)(r.q7,{disabled:v||p.length>=L.qQ,onClick:()=>{T.current?.click()},children:[(0,i.jsx)(r.Q$,{children:(0,i.jsx)(d.T,{})}),(0,i.jsx)("div",{className:"xifkd7f",children:(0,h.t)("figmake.attachments.upload_image")})]}):null,F=M&&n?(0,i.jsx)(G,{}):null;if(!t&&!e&&!n)return null;let z=M?(0,h.t)("sites.panel.make.add_context"):(0,h.t)("sites.panel.make.attach_design"),B=()=>{m.az.trackDefinedEvent("figmake.add_button_clicked",{fileKey:w?.key})},U=v||!M&&p.length>=L.qQ;return(0,i.jsxs)(r.bL,{manager:I,children:[k?(0,i.jsx)(k,{...S({onClick:B}),disabled:U,"data-onboarding-key":_._g}):(0,i.jsx)(l.K,{...S({onClick:B}),"aria-label":z,"data-tooltip-show-above":!0,"data-onboarding-key":_.wj,disabled:U,children:(0,i.jsx)(c.$,{})}),t&&(0,i.jsx)("input",{type:"file",className:"x1s85apg",ref:T,accept:x.xp.join(","),"data-testid":"image-attachment-input",onChange:O}),(0,i.jsxs)(r.mc,{children:[(0,i.jsxs)(r.YJ,{children:[P,D]}),F]})]})}},622107:(e,t,n)=>{n.d(t,{$:()=>ee});var i=n(104076),s=n(65545),a=n(242069),r=n(998432),l=n(951002),o=n(322028),d=n(795033),c=n(190028),u=n(436295),p=n(352630),m=n(259161),h=n(192075),f=n(502907),g=n(260745),x=n(514359),_=n(217862),y=n(649693),v=n(958251),b=n(20267),C=n(249445),j=n(211862),k=n(944350),w=n(904017),E=n(382137),T=n(163018),S=n(544107),I=n(295253),N=n(771717),A=n(590662),L=n(141330),M=n(434956),O=n(730236),R=n(307858),P=n(700126),D=n(612691),F=n(108025),z=n(373224);function B({featureType:e}){let t=(0,w.No)(),n=t.unwrapOr(null)?.tier||null,r=(0,j.q5)(),l=r?.teamId??"",o=(0,R.$Y)(l),d=function(e,t){switch(e){case k._Y.FIGMAKE:return I.b.FIGMAKE_METER_LIMIT_TOAST;case k._Y.DESIGN:if(t===a.lV.AI_ASSISTANT)return I.b.ASSISTANT_METER_LIMIT_TOAST;return null;case k._Y.SITES:return I.b.LIVING_DESIGNS_METER_LIMIT_TOAST;default:return null}}((0,j.XO)()??null,e),c=(0,_.y)(l,d,function(e){switch(e){case I.b.FIGMAKE_METER_LIMIT_TOAST:return C.C6.FIGMAKE_METER_LIMIT_TOAST;case I.b.ASSISTANT_METER_LIMIT_TOAST:return C.C6.ASSISTANT_METER_LIMIT_TOAST;case I.b.LIVING_DESIGNS_METER_LIMIT_TOAST:return C.C6.LIVING_DESIGNS_METER_LIMIT_TOAST;default:return C.C6.PLAN_COMPARISON_MODAL}}(d));return n===s.Agb.STARTER&&(0,D.z)("bake_starter_limit")&&o?(0,i.jsx)(p.$z,{variant:"primary",onClick:c,children:(0,h.tx)("figmake.meter_limit.view_plans")}):null}function G(){let{handleUpgrade:e,getIsUpgradeHandlerLoading:t}=(0,E.wH)({entryPoint:g.tc.CODE_CHAT_LIMIT,folderId:null}),n=(0,j.XO)()??null,s=(0,v.Ci)(n);return s?t()?(0,i.jsx)(p.$z,{variant:"primary",disabled:!0,children:(0,h.tx)("figmake.meter_limit.request_upgrade")}):(0,i.jsx)(p.$z,{variant:"primary",onClick:e({licenseType:s,editorType:n,upgradeReason:z.i.CODE_CHAT_LIMIT,entryPoint:g.tc.CODE_CHAT_LIMIT}),children:(0,h.tx)("figmake.meter_limit.request_upgrade")}):null}function U(){let{getPendingRequest:e}=(0,E.wH)({entryPoint:g.tc.CODE_CHAT_LIMIT,folderId:null}),t=(0,j.XO)()??null,n=(0,v.Ci)(t);if(!n||![k.G_.FIGMAKE,k.G_.DESIGN].includes(n))return null;let s=e(n);return s?(0,i.jsx)(M.K,{pendingUpgradeRequest:s}):(0,i.jsx)(p.$z,{variant:"primary",disabled:!0,children:(0,h.tx)("fullscreen.toolbar.request.request_sent")})}function V(){let e=(0,j.XO)()??null,t=(0,v.Ci)(e),n=(0,S.a7)(t),{meterResetDate:i,meteringWindow:s}=(0,A.Ig)(n);if(!i)return{resetDate:null,formattedResetDate:null,meteringWindow:null};let a=(0,b.A0)(i);if(!a)return{resetDate:null,formattedResetDate:null,meteringWindow:null};let r=(0,c.A)(a).format("LL");return{resetDate:a,formattedResetDate:r,meteringWindow:s}}function H(){let{formattedResetDate:e,meteringWindow:t}=V();return e?t===r.co.DAILY?(0,h.tx)("figmake.meter_limit.plans_ai_credit_limit_reached_reset_imminent"):(0,h.tx)("figmake.meter_limit.plans_ai_credit_limit_reached",{resetDate:e}):null}function K(){let{formattedResetDate:e}=V();return e?(0,h.tx)("figmake.meter_limit.reached_your_current_credits_limit",{resetDate:e}):(0,h.tx)("figmake.meter_limit.primary")}function W(){let{resetDate:e}=V(),{getPlanAndPlanUser:t,getIsUpgradeHandlerLoading:n}=(0,E.wH)({entryPoint:g.tc.CODE_CHAT_LIMIT,folderId:null}),i=(0,j.XO)()??null,s=(0,v.Ci)(i);if(!s||!e||n())return null;let{planUser:a}=t(s);if(!a)return(0,h.tx)("figmake.meter_limit.seat_type_generic_credit_limit_reached",{resetDate:e});{let t=a.currentSeat?.billableProductKey??y.Gu.VIEW;return(0,h.tx)("figmake.meter_limit.seat_type_credit_limit_reached",{seatType:(0,f.JT)(t),resetDate:e})}}function q(){let e=(0,T.NB)({forAiMetering:!0});return null===e.data?null:(0,f.JT)(e.data)}function X(){let{meteringWindow:e,resetDate:t}=V(),n=T.nJ({forAiMetering:!0})?.data?.name;return t&&n?e===r.co.DAILY?(0,h.tx)("ai_credits_meter.out_of_daily_credits_in_plan_upgrade_plan",{planName:n}):(0,h.tx)("ai_credits_meter.out_of_credits_in_plan_upgrade_plan",{planName:n,resetDate:t}):null}function Y(){return(0,S.T3)()?(0,i.jsx)(X,{}):(0,i.jsx)(H,{})}function Z(){let{resetDate:e}=V(),t=q(),n=(0,T.nJ)({forAiMetering:!0});if(!e||!n?.data)return null;let a=n.data.name;return n.data.tier===s.Agb.STUDENT?(0,h.tx)("ai_credits_meter.seat_in_edu_plan_is_out_of_credits_until_they_reset",{planName:a,resetDate:e,learnMoreLink:(0,i.jsx)(m.Ph,{newTab:!0,trusted:!0,href:L._t,children:(0,h.tx)("general.learn_more")})}):n.data.activeTrialLicenseTypes?.includes(k.G_.FIGMAKE)||!t?(0,h.tx)("ai_credits_meter.seat_in_plan_is_out_of_credits_until_they_reset_no_seat_type",{planName:a,resetDate:e,learnMoreLink:(0,i.jsx)(m.Ph,{newTab:!0,trusted:!0,href:L._t,children:(0,h.tx)("general.learn_more")})}):(0,h.tx)("ai_credits_meter.seat_in_plan_is_out_of_credits_until_they_reset",{seatType:t,planName:a,resetDate:e,learnMoreLink:(0,i.jsx)(m.Ph,{newTab:!0,trusted:!0,href:L._t,children:(0,h.tx)("general.learn_more")})})}function J(){return(0,S.T3)()?(0,i.jsx)(Z,{}):(0,i.jsx)(K,{})}function Q(){let{resetDate:e,meteringWindow:t}=V(),n=q(),i=T.nJ({forAiMetering:!0})?.data?.name;return e&&n&&i?t===r.co.DAILY?(0,h.tx)("ai_credits_meter.out_of_daily_credits_for_seat_type_in_plan",{seatType:n,planName:i}):(0,h.tx)("ai_credits_meter.out_of_credits_for_seat_type_in_plan",{seatType:n,planName:i,resetDate:e}):null}function $(){return(0,S.T3)()?(0,i.jsx)(Q,{}):(0,i.jsx)(W,{})}function ee({testId:e,renderer:t,featureType:n}){let s=(0,P.l)(),a=(0,w.No)(),r=a.unwrapOr(null)?.tier||null,c=(0,F.Tk)(n),p=c?.restriction,f=c?.meteringWindow,g=(0,x.yy)(),_=(0,d.md)(j.Hu),y=_?.workspace_id??null,v=g?.id??null,b=(0,N.P)(v,y),C="loaded"===b.status&&"Unassigned"!==b.data?b.data?.name??"":"";if(!p||p===F.ee.DISABLE_WITHOUT_TOAST||p===F.ee.DISABLE_WHILE_LOADING)return null;let k=function(e,t,n,s){switch(e){case F.ee.UNAVAILABLE_ON_EDU_PLANS:return{title:(0,h.tx)("figmake.view_only.unavailable_on_edu")};case F.ee.UNAVAILABLE_FOR_EDU_USER:return{title:(0,h.tx)("figmake.view_only.you_dont_have_access",{learnMoreLink:(0,i.jsx)(m.Ph,{newTab:!0,trusted:!0,href:u.R,children:(0,h.tx)("general.learn_more")})}),icon:(0,i.jsx)(o.s,{})};case F.ee.MAKE_UNAVAILABLE_ON_PLAN:return{title:(0,h.tx)("figmake.view_only.unavailable_on_plan",{learnMoreLink:(0,i.jsx)(m.Ph,{newTab:!0,trusted:!0,href:u._,children:(0,h.tx)("general.learn_more")})}),icon:(0,i.jsx)(o.s,{})};case F.ee.MAKE_UNAVAILABLE_ON_SEAT:return{title:(0,h.tx)("figmake.view_only.unavailable_on_seat",{learnMoreLink:(0,i.jsx)(m.Ph,{newTab:!0,trusted:!0,href:u._,children:(0,h.tx)("general.learn_more")})}),icon:(0,i.jsx)(o.s,{})};case F.ee.INTERIM_VIEW_ONLY_COMING_SOON:return{title:(0,h.tx)("figmake.view_only.coming_soon_title"),content:()=>(0,h.tx)("figmake.view_only.check_back_in_coming_weeks_learn_more",{learnMoreLink:(0,i.jsx)(m.Ph,{newTab:!0,trusted:!0,href:u._,children:(0,h.tx)("general.learn_more")})}),icon:(0,i.jsx)(o.s,{})};case F.ee.VIEW_ONLY_ASK_TO_EDIT:return{title:void 0,content:()=>(0,h.tx)("figmake.view_only.banner_message"),button:(0,i.jsx)(O.RJ,{viewOnly:!0,variant:"primary"}),icon:null};case F.ee.METER_LIMIT:return{title:void 0,content:()=>(0,i.jsx)(J,{})};case F.ee.METER_LIMIT_UPGRADE_PLAN:return{content:()=>(0,i.jsx)(Y,{}),button:(0,i.jsx)(B,{featureType:s}),icon:null};case F.ee.METER_LIMIT_UPGRADE_SEAT:return{title:void 0,content:()=>(0,i.jsx)($,{}),button:(0,i.jsx)(G,{}),icon:null};case F.ee.METER_LIMIT_UPGRADE_SEAT_PENDING:return{title:void 0,content:()=>(0,i.jsx)($,{}),button:(0,i.jsx)(U,{}),icon:null};case F.ee.PLAN_AI_DISABLED:return{title:(0,h.tx)("living_designs.chat.disabled_reason.title.not_available"),content:()=>n?(0,h.tx)("living_designs.chat.disabled_reason.subtitle.ai_disabled_in_org_or_workspace",{planName:t,workspaceName:n}):(0,h.tx)("living_designs.chat.disabled_reason.subtitle.ai_disabled_in_plan",{planName:t})};case F.ee.DISABLE_CATCH_ALL:return{title:(0,h.tx)("living_designs.chat.disabled_reason.title.not_available")};case F.ee.DISABLE_WHILE_LOADING:case F.ee.DISABLE_WITHOUT_TOAST:return{title:null};default:(0,l.xb)(e)}}(p,g?.name||_?.name||"",C,n);return(0,i.jsx)(t,{testId:e,config:k,trackingProperties:{meteringWindow:f,codeChatRestriction:p,isViewOnly:s,tier:r}})}},906540:(e,t,n)=>{n.d(t,{U:()=>j});var i=n(104076),s=n(716976),a=n(242069),r=n(967325),l=n(542653),o=n(266808),d=n(824570),c=n(434511),u=n(211862),p=n(141524),m=n(577932),h=n(107799),f=n(462416),g=n(743558),x=n(385446),_=n.n(x),y=n(100873),v=n(254362);let b={hideTextBetweenToolCalls:!0},C={hideTextBetweenToolCalls:!1,isExchangeMessages:!0},j=(0,c.j)(function({setInput:e,chatMessagesNode:t,chatController:n,chatMessagesNodeGuid:c,codeInstanceGuid:x,layerDisplayName:j,sendMessage:k,emptyState:w,sendDisabled:E,enableAssetImport:T=!1,enableImageAttachment:S=!1,showChatHeader:I=!1,featureType:N,enableDragUpload:A=!1,enableDsImport:L=!1,enableConnections:M=!1,isResizingPanel:O,showCodeStreaming:R,rootPath:P,onChatInputBlur:D,onChatInputFocus:F,forceReadOnly:z,hideChatBox:B,resumableMakeInProgress:G,currentUserCanHandleResumableMake:U,cleanUpResumableMake:V}){let H=(0,u.tS)(),K=n.getMessages(),W=function(e){let[t,n]=(0,s.useState)([]),{exchange:i}=(0,h.$W)(e?.guid),a=(0,s.useRef)([]);return s.useEffect(()=>{let e=i?.messages||[];_()(e,a.current)||(a.current=e,n(e))},[i?.messages]),t}(t),q=(0,h.s0)(c),X=(0,g.E)(t,n,N,{shouldIncludeFile:N===a.lV.FIGMAKE?l.ru:void 0}),Y=(0,s.useMemo)(()=>{if(!K)return null;for(let e=K.length-1;e>=0;e--){let t=K[e];if(t?.type===o.K$p.USER_MESSAGE)return t}return null},[K]),Z=(0,s.useMemo)(()=>!!Y&&Y.type===o.K$p.USER_MESSAGE&&(0,r.gG)((0,a.MK)(Y.textContent)),[Y]),J=(0,s.useMemo)(()=>{let e=new Set,t=[];for(let t of K)e.add((0,a._$)(t));for(let n of W){let i=(0,a._$)(n);e.has(i)||t.push(n)}return t},[K,W]),Q=(0,s.useMemo)(()=>K.map(e=>e.userId)||[],[K]),$=(0,d.zN)((0,p.zy)(Q)),ee=(0,y.t)(K,$,b,n),et=(0,s.useMemo)(()=>J.map(e=>e.userId)||[],[J]),en=(0,d.zN)((0,p.zy)(et)),ei=(0,y.t)(J,en,C),es=(0,s.useMemo)(()=>[...ee,...ei],[ee,ei]),ea=(0,s.useMemo)(()=>{let{changedFiles:e,hasBaseline:t,error:n}=X;return e.length>0&&t&&!n&&0===W.length?[...es,{type:"system",id:v.ct,isOptimisticMessage:!0,uniqueId:`${v.ct}-optimistic`,systemMessageType:"manual_edit",changedFiles:e,codeSnapshotKey:void 0,fileVersionId:void 0,title:void 0}]:es},[es,X,W.length]),er=(0,s.useMemo)(()=>{let e,t;let n=new Map;return ea.forEach(i=>{switch(i.type){case"assistant":if(i.messages.length>0){let e=i.messages[i.messages.length-1];t=e?.id}break;case"system":t=i.id;break;case"user":t&&e&&n.set(t,(0,m.Pd)(H,c,e)),t=void 0,e=i.id}}),t&&e&&n.set(t,(0,m.Pd)(H,c,e)),n},[ea,H,c]),el=(0,s.useMemo)(()=>new Set(W.map(e=>e.id)),[W]);return(0,i.jsx)(f.ry,{canCancelGeneration:G&&U,chatController:n,chatMessagesNodeGuid:c,cleanUpResumableMake:V,clientLifecycleIdMap:er,codeFileChanges:X,codeInstanceGuid:x,currentUserCanHandleResumableMake:U,emptyState:w,enableAssetImport:T,enableConnections:M,enableDragUpload:A,enableDsImport:L,enableImageAttachment:S,exchangeMessageIds:el,featureType:N,forceReadOnly:z,generationInProgress:G,hideChatBox:B,isLastUserMessageAutoErrorFix:Z,isResizingPanel:O,layerDisplayName:j,messagesForRendering:ea,onChatInputBlur:D,onChatInputFocus:F,resumableMakeInProgress:G,rootPath:P,sendDisabled:E,sendMessage:k,setInput:e,showChatHeader:I,showCodeStreaming:R,typingUsers:q})},"CodeChat")},297174:(e,t,n)=>{n.d(t,{N:()=>s,l:()=>i});let i=(0,n(252285).H)(null);function s(e){var t;return e?"code"===e.type?e.fullFilePath:"editedFiles"===e.type||"deletedFiles"===e.type?e.files.join(", "):("view_tool"===e.toolName||"write_tool"===e.toolName||"fast_apply_tool"===e.toolName||"edit_tool"===e.toolName||"delete_tool"===e.toolName||"insert_tool"===e.toolName)&&(t=e.partialArgs.path)&&t.includes(".")?e.partialArgs.path:null:null}},803120:(e,t,n)=>{n.d(t,{u:()=>y});var i=n(716976),s=n(242069),a=n(967325),r=n(266808),l=n(795033),o=n(173955),d=n(211862),c=n(592726),u=n(293172),p=n(580276),m=n(107799),h=n(635533),f=n(702319),g=n(612691),x=n(121363),_=n(589977);function y({chatMessagesNode:e,chatController:t,disabled:n=!1,featureType:y}){let[v,b]=i.useState(!1),{exchange:C}=(0,m.$W)(e?.guid||"");i.useEffect(()=>{C&&!v&&b(!0)},[C,v]);let[j,k]=(0,l.fp)((0,h.o0)(e?.guid||"")),w=(0,l.md)((0,h.Nm)(e?.guid||"")),E=t.getMessages(),T=(0,l.md)(u.Xl),S=(0,l.md)(u.p7),I=(0,c.iZ)(),N=(0,d.tS)(),A=i.useMemo(()=>E?(0,a.EY)(E):null,[E]),[L,M]=i.useState(new Map),O=i.useMemo(()=>{if(E&&E.length>0){let e=E[E.length-1];if(e?.type===r.K$p.TOOL_MESSAGE&&e?.toolCalls.some(e=>s.AD.includes(e.toolName)))return!0}if(C?.messages&&C?.messages.length>0){let e=C.messages[C.messages.length-1];if(e?.type===r.K$p.TOOL_MESSAGE&&e?.toolCalls.some(e=>s.AD.includes(e.toolName)))return!0}return!1},[E,C]),R=(0,x.L)(),P=y===s.lV.FIGMAKE?R:void 0,D=(0,p.Xu)(),F=(0,f.ee)(),z=(0,g.z)("make_fewer_error_fix_attempts")?1:2;return{triggerSelfHeal:i.useCallback(async(e,i,r)=>{let l=await (0,o.ly)("auto-error-fix");if(l)try{if(j||n||!v||!t.isInitialized||!r||D&&(T||S===u.Ut.DEPLOYING||O)||0===i.length||!A||!w||"user"===w||Date.now()-r>2e3||(L.get(A)||0)>=z)return;await function({chatController:e,lastUserMessageId:t,errors:n,onStart:i,handleSubmitMessage:s}){let r=Array.from(new Set(n));i();let l=t;if(!l){let t=e.getMessages();l=(0,a.EY)(t)??null}return s({userMessageContent:{plainText:"",hidden:!0,errors:r},rawUserChatDetails:void 0,autoFixingUserMessageId:l,changedFiles:[]})}({chatController:t,lastUserMessageId:A,errors:i,onStart:()=>{k(!0),M(e=>(e.set(A,(e.get(A)||0)+1),e))},handleSubmitMessage:({userMessageContent:n,autoFixingUserMessageId:i,rawUserChatDetails:a,changedFiles:r})=>(0,_.v)({userMessageContent:n,user:I,chatMessagesNode:e,chatController:t,rawUserChatDetails:a,featureType:y,setInput:()=>{},fileKey:N,autoFixingUserMessageId:i,onFinish:()=>{k(!1)},canUseSupabase:D,changedFiles:r,model:P,requestInitiator:s.bG.SYSTEM,isMcpClientEnabled:F})})}finally{await l.release()}},[j,n,v,D,A,w,L,t,T,S,O,k,I,y,N,P,z,F])}}},807471:(e,t,n)=>{n.d(t,{VC:()=>a,Xt:()=>r,kV:()=>l});var i=n(716976),s=n(795033);let a=(0,n(252285).q)(),r=e=>(0,s.md)(a(e||"")),l=e=>{let t=(0,s.Xr)(a(e||""));return(0,i.useCallback)(()=>{t(void 0)},[t])}},24441:(e,t,n)=>{n.d(t,{L:()=>r});var i=n(439279);n(120440);var s=n(127082);let a={defaultTypography:{kLWn49:"xno9bf3",kGuDYH:"x17akokd",k63SB2:"x1yuz8eb",kb6lSQ:"xqp8s7e",$$css:!0},figmakeTypography:{kLWn49:"x1fc57z9",kGuDYH:"x1lh6uom",k63SB2:"x1yuz8eb",kb6lSQ:"xuf8qxk",$$css:!0},userMessageTypography:{kLWn49:"xno9bf3",kGuDYH:"x17akokd",k63SB2:"x1yuz8eb",kb6lSQ:"xqp8s7e",$$css:!0},figmakeUserMessageTypography:{kLWn49:"x17fgdl5",kGuDYH:"x1lh6uom",k63SB2:"x1yuz8eb",kb6lSQ:"xuf8qxk",$$css:!0},figmakeUserMessageTypographyNewUI:{kLWn49:"xdod15v",kb6lSQ:"x12638g3",$$css:!0},artifactTypography:{kMwMTN:"x1n0bwc9",kLWn49:"xno9bf3",kGuDYH:"x17akokd",k63SB2:"x1yuz8eb",kb6lSQ:"xqp8s7e",$$css:!0},figmakeArtifactTypography:{kMwMTN:"x1n0bwc9",kLWn49:"x1o2sk6j",kGuDYH:"x1lh6uom",k63SB2:"x1yuz8eb",kb6lSQ:"xuf8qxk",$$css:!0},artifactActiveTypography:{kMwMTN:"x1ptu4o3",kLWn49:"x14kxzw3",kGuDYH:"xiqqdae",k63SB2:"x6xwguf",kb6lSQ:"xqp8s7e",$$css:!0},figmakeArtifactActiveTypography:{kMwMTN:"x1ptu4o3",kLWn49:"x1o2sk6j",kGuDYH:"x1lh6uom",k63SB2:"x6xwguf",kb6lSQ:"xr8fz4w",$$css:!0}};function r(){let e=(0,s.Oc)(),t=i.v.getFeatureGate("make_chat_ui_improvements"),n=e?[a.figmakeUserMessageTypography,t&&a.figmakeUserMessageTypographyNewUI]:a.userMessageTypography,r=e?a.figmakeArtifactTypography:a.artifactTypography;return{userMessageTypographyStyle:n,artifactActiveTypographyStyle:e?a.figmakeArtifactActiveTypography:a.artifactActiveTypography,artifactTypographyStyle:r,defaultTypographyStyle:e?a.figmakeTypography:a.defaultTypography}}},743558:(e,t,n)=>{n.d(t,{E:()=>T,q:()=>S});var i=n(716976),s=n(130249),a=n(242069),r=n(614641),l=n(542653),o=n(638004),d=n(266808),c=n(170627),u=n(980852),p=n(795033),m=n(666875),h=n(550209),f=n(354114),g=n(211862),x=n(252285),_=n(635533),y=n(503208),v=n(913434),b=n(612691),C=n(329232),j=n(196293),k=n(842771),w=n(963433);let E=(0,x.H)({files:{}});function T(e,t,n,s){let o=e?.guid||"",c=(0,g.q5)(),u=c?.key||null,[h,f]=(0,p.fp)((0,y.o)(o)),[x,_]=(0,p.fp)(E(o)),C=t.chatSdkState?.threadId??null,T=i.useRef(null),{entryPointCodeInstance:S}=(0,w.oA)(),I=n===a.lV.FIGMAKE,N=I?S:e,A=(0,k.IO)(N),L=t.getMessages(),M=function(e){let[t,{flush:n}]=(0,m.A)(e,500),s=Object.keys(e).length,a=Object.keys(t).length;return i.useEffect(()=>{s!==a&&n()},[s,a,n]),t}(x.files);i.useEffect(()=>{if(!u){f({codeSnapshotKey:null,files:{},isLoading:!1,error:!0,lastAttemptedKey:null}),T.current=null;return}let e=function(e){for(let t=e.length-1;t>=0;t--){let n=e[t];if(n.type===d.K$p.ASSISTANT_MESSAGE)return(0,a.lr)(n.textContent||"").codeSnapshot;if(n.type===d.K$p.SYSTEM_MESSAGE){let e=(0,a.U1)(n.textContent||"");if(e?.type==="manual_edit"||e?.type==="restore")return e.codeSnapshot}}}(L),i=p.zl.get((0,y.o)(o));if(!e){i.codeSnapshotKey&&(f({codeSnapshotKey:null,files:{},isLoading:!1,error:!0,lastAttemptedKey:null}),T.current=null);return}let{codeSnapshotKey:s,blobstoreContentKey:r}=e;s&&T.current!==s&&(i.codeSnapshotKey!==s||i.error)&&(!i.error||i.lastAttemptedKey!==s)&&(async()=>{T.current=s,f({codeSnapshotKey:s,files:{},isLoading:!0,error:!1,lastAttemptedKey:s});try{let{files:e}=await (0,v.lm)({fileKey:u,codeSnapshotKey:s,blobstoreArgs:{threadId:C,blobstoreContentKey:r},featureType:n,chatSdkPhase1Enabled:t.chatSdkPhase1Enabled});T.current===s&&(f({codeSnapshotKey:s,files:e,isLoading:!1,error:!1,lastAttemptedKey:s}),T.current=null)}catch(e){console.warn("Failed to fetch snapshot files:",e),T.current===s&&(f({codeSnapshotKey:null,files:{},isLoading:!1,error:!0,lastAttemptedKey:s}),T.current=null)}})()},[L,u,f,o,C,n,t.chatSdkPhase1Enabled]),i.useEffect(()=>{if(!e){_({files:{}});return}let t=d.z6l?.isMultiFileCodeLayersEnabled(),i={multi_file_code_layers:t,bake_canvas:(0,b.z)("bake_canvas")},s=(0,r.Pq)(n,e,i),a=I?(0,l.qx)():(t||(0,b.z)("bake_canvas"))&&e.codeFilePath?(0,l.qx)(s):(0,l.qx)(),o={};a.forEach(e=>{let t=e.codeFileFullPathWithoutScheme;s&&(t=t.replace(s+"/","")),o[t]=e.sourceCode||""}),_({files:o})},[e,I,A,_,n]);let[O,R]=i.useState([]),[P,D]=i.useState(!1),[F,z]=i.useState(!1),[B,G]=i.useState(!1);return i.useEffect(()=>{h.isLoading?(G(!0),D(null!==h.codeSnapshotKey),z(!1)):h.error||!h.codeSnapshotKey?(z(h.error),G(!1),R([])):async function(){try{let e=await (0,j.ft)(h.files,M,s?.shouldIncludeFile);R(e),D(!0),G(!1),z(!1)}catch(e){z(!0),G(!1)}}()},[M,h.codeSnapshotKey,h.error,h.files,h.isLoading,s?.shouldIncludeFile]),{changedFiles:O,isLoading:B,error:F,hasBaseline:P}}function S({chatMessagesNodeGuid:e,featureType:t}){let[n]=(0,p.fp)((0,y.o)(e)),m=(0,g.tS)(),x=e=>{let t=C.O.get(e.guid);t&&(t.hasSystemEdited=!0)};return{restoreFile:(0,i.useCallback)(i=>{if(e&&n.codeSnapshotKey&&n.files[i]&&m)return()=>{let m=(0,u.getActiveTSSceneGraph)().get(e);if(!m)return;let g=n.files[i];if(!g){console.error("No baseline content found for file:",i);return}let y=d.z6l?.isMultiFileCodeLayersEnabled();c.l7.user("restore-individual-file",()=>{let e={multi_file_code_layers:y,bake_canvas:(0,b.z)("bake_canvas")},n=(0,r.Pq)(t,m,e),d=t===a.lV.FIGMAKE?(0,l.$d)():(y||(0,b.z)("bake_canvas"))&&m.codeFilePath?(0,l.$d)(n):(0,l.$d)(),c=(0,s.m0)(n,i),{codeFile:u}=(0,r.Ur)(d,n,c,g,void 0,{trackSystemEditedSession:x,reportErrorToSentry:e=>{(0,h.$D)(o.e.MAKE,e)},enableDuplicateCheck:(0,b.z)("bake_dup_code_files")});u&&(u.sourceCode=g,p.zl.set((0,_.Nm)(m.guid),"user")),f.Y5.commit()})}},[n.files,n.codeSnapshotKey,e,t,m])}}},989917:(e,t,n)=>{n.d(t,{nm:()=>U});var i=n(716976),s=n(237420),a=n(130249),r=n(547115),l=n(242069),o=n(614641),d=n(882931),c=n(500275),u=n(542653),p=n(951002),m=n(638004),h=n(266808),f=n(170627),g=n(980852),x=n(795033),_=n(883765),y=n(846033),v=n(743072),b=n(550209),C=n(432099),j=n(192075),k=n(58212),w=n(638641),E=n(809565),T=n(354114),S=n(211862),I=n(592726),N=n(252285),A=n(107799),L=n(635533),M=n(503208),O=n(234429),R=n(913434),P=n(612691),D=n(329232),F=n(836543),z=(e=>(e.FAILED_TO_RETRIEVE_CODE_FILES="FAILED_TO_RETRIEVE_CODE_FILES",e))(z||{});class B extends Error{constructor(e,t,n){super(t),this.type=e,this.status=n,this.name="RestoreVersionError"}}let G=(0,N.q)();function U({codeSnapshotKey:e,codeSnapshotBlobstoreContentKey:t,chatMessagesNodeGuid:n,featureType:a,persistentEntityId:l,clientLifecycleId:o,restoreToVersionTitle:d,chatController:c}){let u=(0,I.iZ)(),p=(0,S.q5)(),h=p?.key||null,f=(0,s.wA)(),[y,b]=(0,x.fp)(G(n)),C=c?.chatSdkState?.threadId??null,E=(0,F.A)();return{codeRestoreVersion:i.useMemo(()=>{if(h&&e&&u&&n&&p?.canEdit)return async()=>{if(y){f(k.F.enqueue({message:(0,j.t)("figmake.chat.version_restore_in_progress")}));return}let i=v.J.startUserFlow({name:"make_restore_snapshot",team:m.e.MAKE,priority:r.bx.P1});try{b(!0),f(k.F.enqueue({message:(0,j.t)("figmake.chat.a11y_restoring_a_previous_version"),role:"status"}));let s=(0,g.getActiveTSSceneGraph)().get(n);if(!s||!c)throw Error(`Chat messages not found: ${n}`);await V({fileKey:h,codeSnapshotKey:e,blobstoreArgs:{threadId:C,blobstoreContentKey:t},user:u,featureType:a,chatMessagesNode:s,chatController:c,userFlow:i,restoreToVersionTitle:d}),E({showVisualBells:!1}),_.az.trackDefinedEvent("ai_for_production.version_restore_clicked",{success:!0,codeSnapshotKey:e,fileKey:h,featureType:a,persistentEntityId:l,clientLifecycleId:o}),f(k.F.enqueue({message:(0,j.t)("figmake.chat.a11y_restoring_version_completed"),role:"status"}))}catch(n){let t=n instanceof B?n.type:"";_.az.trackDefinedEvent("ai_for_production.version_restore_clicked",{success:!1,errorType:t,errorMessage:n.message,codeSnapshotKey:e,fileKey:h,featureType:a,persistentEntityId:l,clientLifecycleId:o}),n instanceof B&&"FAILED_TO_RETRIEVE_CODE_FILES"===n.type&&409===n.status?f(k.F.enqueue({message:(0,j.t)("figmake.chat.version_restore_try_again_soon"),icon:w.zX.EXCLAMATION})):f(k.F.enqueue({message:(0,j.t)("figmake.chat.version_restore_failed"),error:!0}))}finally{b(!1),i.end()}}},[c,n,o,C,t,e,E,f,a,h,y,p?.canEdit,l,d,b,u])}}async function V({fileKey:e,codeSnapshotKey:t,blobstoreArgs:n,user:i,featureType:s,chatMessagesNode:r,chatController:g,userFlow:_,restoreToVersionTitle:v}){let j;try{j=(await (0,R.lm)({fileKey:e,codeSnapshotKey:t,blobstoreArgs:n,featureType:s,chatSdkPhase1Enabled:g.chatSdkPhase1Enabled})).files,x.zl.set((0,M.o)(r.guid),{codeSnapshotKey:t,files:j,isLoading:!1,error:!1,lastAttemptedKey:t})}catch(t){let e=t instanceof C.Dr?t.status:void 0;throw new B("FAILED_TO_RETRIEVE_CODE_FILES",t.message,e)}let k=h.z6l?.isMultiFileCodeLayersEnabled(),w=(0,o.Pq)(s,r,{multi_file_code_layers:k,bake_canvas:(0,P.z)("bake_canvas")}),S=s===l.lV.FIGMAKE,I=(k||(0,P.z)("bake_canvas"))&&r.codeFilePath,N=s===l.lV.FIGMAKE_IN_DESIGN,F={codeSnapshotKey:t,blobstoreContentKey:n.blobstoreContentKey},z=(0,O.Zi)(i,F,v),G=S?(0,u.qx)():I||N?(0,u.qx)(w):(0,u.qx)(),U=Object.fromEntries(G.map(e=>[e.codeFileFullPathWithoutScheme,e])),V=x.zl.get(E.J)??0;f.Hq.ai("restore-version",()=>{(0,p.vA)(void 0!==h.glU,"Fullscreen must be defined");let e=e=>{let t=D.O.get(e.guid);t&&(t.hasSystemEdited=!0)};if(S||I||N){let{entrypointFilePath:t}=function(e,t){let n;let i=[];for(let s of e)(0,o.sx)(s,t)?n=s:(s.codeFilePath=`${c.GX}${s.codeFileFullPathWithoutScheme}`,i.push(s));return(0,o.zK)(i),{entrypointFilePath:n?.codeFileFullPathWithoutScheme}}(G,s),n=Object.fromEntries((0,u.qx)(w).map(e=>[e.codeFileFullPathWithoutScheme,e])),i=Object.entries(j),l=i[0],d=t?(0,a.m0)(w,t):void 0,p=1===i.length&&l&&t&&l[0]!==d;for(let[t,s]of i){let i=p&&d?d:(0,a.m0)(w,t),{codeFile:l}=(0,o.Ur)(n,w,i,s,void 0,{trackSystemEditedSession:e,reportErrorToSentry:e=>{(0,b.$D)(m.e.MAKE,e)},enableDuplicateCheck:(0,P.z)("bake_dup_code_files")});l&&(l.sourceCode=s,x.zl.set((0,L.Nm)(r.guid),"assistant"))}}else{let t=Object.entries(j);(0,p.vA)(1===G.length,"Code layer must have exactly one code file"),(0,p.vA)(1===t.length,"Code layer snapshot must have exactly one code file");let[n,i]=t[0],{codeFile:s}=(0,o.Ur)(U,w,G[0].codeFileFullPathWithoutScheme,i,void 0,{trackSystemEditedSession:e,reportErrorToSentry:e=>{(0,b.$D)(m.e.MAKE,e)},enableDuplicateCheck:(0,P.z)("bake_dup_code_files")});s&&(s.sourceCode=i,x.zl.set((0,L.Nm)(r.guid),"assistant"))}g.appendMessages([z]),T.Y5.commit();let t=(0,o.iB)(),n=s===l.lV.FIGMAKE?(0,u._J)(t):G[0];n&&(0,d.J)(n),(0,A.wi)(r.guid,{switchTo:null})}),await (0,y.j4)({commitContext:"restore_snapshot",nodeChatMessage:z,chatController:g,fileKey:e,startFileSeqNum:V,userFlow:_})}},447556:(e,t,n)=>{n.d(t,{Ng:()=>j,TH:()=>E,YT:()=>S,aQ:()=>k,vG:()=>A});var i=n(716976),s=n(237420),a=n(951002),r=n(266808),l=n(795033),o=n(188220),d=n(883765),c=n(837975),u=n(246144),p=n(192075),m=n(58212),h=n(638641),f=n(172996),g=n(211862),x=n(592726),_=n(571737),y=n(107799),v=n(108025),b=n(769887),C=n(382827);let j=(0,l.eU)(!1),k=(0,l.eU)(!1),w=(0,l.eU)(!1),E=(0,l.eU)(null),T=(0,l.eU)(null);function S(){let[e,t]=(0,l.fp)(E),[n,s]=(0,l.fp)(T),a=(0,i.useRef)(!1),r=(0,i.useCallback)((t,{error:i,message:s}={})=>{if(e){let a={...e,status:t,...i&&{error:i}},r=e.type,l=["send-comments-to-make","send-to-make-from-figjam"].includes(r),o=!!e.selectedNodeId&&"send-to-make-from-figjam"!==r;if(l){let e="success"===t&&s!==n;d.az.trackDefinedEvent("activation.send_to_make.generated_prompt_submitted",{...a,didEditInitialMessage:e})}o&&d.az.trackDefinedEvent("activation.send_to_make_from_design.prompt_with_attachments",a)}},[e,n]);return(0,i.useCallback)((n,{error:i,message:l}={})=>{null===e||a.current||(a.current=!0,"success"===n?r("success",{message:l}):i&&r("error",{error:i}),t(null),s(null))},[t,e,r,s])}async function I({fileKey:e,selectedNodeIds:t}){if(!t||0===t.length)throw Error("copyNodeToMakeFromDesign: selectedNodeIds are undefined or empty");let n=await (0,b.R)({fileKey:e,selectedGuids:t});r.glU?.applyNodesFromBuffer(n,e,t,!0)}function N(e){switch(e.type){case"send-comments-to-make":case"send-to-make-from-figjam":if(!e.selectedNodeId)return[];return[e.selectedNodeId];case"send-to-make-from-design":case"send-to-make-from-devmode":return e.selectedNodeIds}}function A(e){let t=(0,s.wA)(),n=(0,C.EI)(),{disabled:b,loading:k}=(0,v.y3)(),S=(0,g.tS)(),A=(0,l.md)(f.Fk),[L,M]=(0,l.fp)(w),O=(0,l.Xr)((0,y.mC)(e)),R=function(){let e=(0,i.useRef)("");return e.current||(e.current=(0,o.g)()),e.current}(),P=(0,l.Xr)(f.$K),D=r.Ez5?.figmakeState(),F=(0,l.Xr)(j),z=(0,l.Xr)(E),B=(0,l.Xr)(T),G=(0,x.TA)(),U=!b&&!k&&n,V=(0,i.useCallback)(()=>{t(m.F.enqueue({message:(0,p.t)("figmake.send_to_make.generating_prompt"),type:"send-to-make-prompt-generating",icon:h.zX.SPINNER,preventDismissal:!0}))},[t]),H=(0,i.useCallback)(()=>{t(m.F.dequeue({matchType:"send-to-make-prompt-generating"})),t(m.F.enqueue({message:(0,p.t)("figmake.send_to_make_from_design.error.something-went-wrong"),type:"send-to-make-from-design-failed",icon:h.zX.EXCLAMATION,error:!0,timeoutOverride:3e3}))},[t]),K=(0,i.useCallback)(e=>{t(m.F.enqueue({message:e?(0,p.t)("figmake.send_to_make_from_design.visual_bell.copying_complex_frames"):(0,p.t)("figmake.send_to_make_from_design.visual_bell.copying_frames"),type:"send-to-make-from-design-load",icon:h.zX.SPINNER,preventDismissal:!0,timeoutOverride:3e5}))},[t]),W=(0,i.useCallback)(()=>{t(m.F.dequeue({matchType:"send-to-make-from-design-load"})),t(m.F.enqueue({message:(0,p.t)("figmake.send_to_make_from_design.error.something-went-wrong"),type:"send-to-make-from-design-failed",icon:h.zX.EXCLAMATION,error:!0,timeoutOverride:3e3}))},[t]),q=(0,i.useCallback)(()=>{t(m.F.dequeue({matchType:"send-to-make-from-design-load"})),t(m.F.enqueue({message:(0,p.t)("figmake.send_to_make_from_design.visual_bell.complete"),type:"send-to-make-from-design-complete",icon:h.zX.CHECK,timeoutOverride:3e3}))},[t]),X=(0,i.useCallback)(e=>{let t=N(e);return{userId:G??"",makeFileKey:S??"",fileKey:e.fileKey,fileVersion:e.fileVersion,pageGuid:e.pageGuid,selectedNodeId:t.join(","),exceedsMakePasteThreshold:e.exceedsMakePasteThreshold,source:e.source,type:e.type}},[G,S]),Y=(0,i.useCallback)(async(e,t)=>{let n=N(e);try{await I({fileKey:e.fileKey,selectedNodeIds:n}),d.az.trackDefinedEvent("activation.send_to_make_from_design.file_bootstrapped_from_design",{...t,status:"success"}),q()}catch(e){(0,u.x1)("sendToMakeFromDesign","copyNodeToMakeFromDesign failed with some error",{...t,error:e?.message??JSON.stringify(e)},{reportAsSentryError:!0}),d.az.trackDefinedEvent("activation.send_to_make_from_design.file_bootstrapped_from_design",{...t,status:"error",error:e?.message??JSON.stringify(e)}),F(!1),W()}},[q,W,F]);(0,c.R)(()=>{if(L)return;M(!0),(0,a.KF)(!!A,"makeCreationData is undefined. This should never happen"),(0,a.KF)("send-comments-to-make"===A.type,"makeCreationData type is not send-comments-to-make"),F(!0),V();let e=X(A);z({...e}),(0,_.W)(A.comments,"comments",R).then(n=>{if(O(n.prompt),B(n.prompt),t(m.F.dequeue({matchType:"send-to-make-prompt-generating"})),!A.selectedNodeId){P(l.Ut),F(!1),M(!1),q();return}K(A.exceedsMakePasteThreshold),Y(A,e).finally(()=>{P(l.Ut),M(!1)})}).catch(e=>{P(l.Ut),F(!1),M(!1),H()})},[G,S,U,A,D,L],()=>!!G&&!!S&&U&&!!A&&!!D&&!L&&"send-comments-to-make"===A.type),(0,c.R)(()=>{if(L)return;M(!0),(0,a.KF)(!!A,"makeCreationData is undefined. This should never happen"),(0,a.KF)("send-to-make-from-design"===A.type||"send-to-make-from-devmode"===A.type,"makeCreationData type is not send-to-make-from-design or send-to-make-from-devmode"),F(!0),K(A.exceedsMakePasteThreshold);let e=X(A);z({...e}),Y(A,e).finally(()=>{P(l.Ut),M(!1)})},[G,S,U,A,D,L],()=>!!G&&!!S&&U&&!!A&&!!D&&!L&&("send-to-make-from-design"===A.type||"send-to-make-from-devmode"===A.type)),(0,c.R)(()=>{if(!L){if(M(!0),(0,a.KF)(!!A,"makeCreationData is undefined. This should never happen"),(0,a.KF)("send-to-make-from-figjam"===A.type,"makeCreationData type is not send-to-make-from-figjam"),z({...X(A)}),1===A.textNodes.length&&A.textNodes[0]){let e=A.textNodes[0];Promise.resolve().then(()=>{O(e),B(e),P(l.Ut),F(!1),M(!1),q()});return}F(!0),V(),(0,_.W)(A.textNodes,"figjam-stickies",R).then(e=>{O(e.prompt),B(e.prompt),t(m.F.dequeue({matchType:"send-to-make-prompt-generating"})),P(l.Ut),F(!1),M(!1),q()}).catch(e=>{P(l.Ut),F(!1),M(!1),H()})}},[G,S,U,A,D,L],()=>!!G&&!!S&&U&&!!A&&!!D&&!L&&"send-to-make-from-figjam"===A.type)}},699374:(e,t,n)=>{n.d(t,{S:()=>s});var i=n(716976);function s({textareaRef:e,maxHeight:t}){return(0,i.useCallback)(()=>{if(e&&"current"in e&&e.current){let n=e.current;n.style.height="auto";let i=window.getComputedStyle(n),s=parseFloat(i.paddingTop),a=parseFloat(i.paddingBottom),r=Math.min(n.scrollHeight-s-a,t);return n.style.height=`${r}px`,n.style.overflowY=r>=t?"auto":"hidden",r}},[t,e])}},787692:(e,t,n)=>{n.d(t,{O:()=>u,Z:()=>c});var i=n(716976),s=n(795033),a=n(776111),r=n(211862),l=n(944350),o=n(808242),d=n(612691);function c(){return!!u()}function u(){let e=(0,s.md)(r.ze),t=(0,o.Vc)(e),n=!!(0,d.z)("resumable_makes_cortex_killswitch");return(0,i.useMemo)(()=>{if((0,a.nl)()||n)return!1;switch(t?.data?.tier){case l.Ag.ORG:case l.Ag.ENTERPRISE:return!!(0,d.z)("resumable_makes_org_enterprise");case l.Ag.PRO:case l.Ag.STUDENT:return!!(0,d.z)("resumable_makes_pro_student");case l.Ag.STARTER:return!!(0,d.z)("resumable_makes");default:return}},[n,t?.data?.tier])}},657672:(e,t,n)=>{n.d(t,{R:()=>d});var i=n(716976),s=n(686549),a=n(633065),r=n(166887),l=n(178623),o=n(20267);function d({onAuthSuccess:e,onAuthFailure:t}){let[n,d]=i.useState({isAuthorizing:!1,server:null,window:null}),c=(0,o.Ay)(),u=(0,r.hC)(),p=i.useRef(!1),m=i.useCallback(async t=>{p.current||(p.current=!0,u("ai_chat_mcp.server_login_success",{mcpServerId:t.id,featureEntrypoint:"figmake"}),await e(t))},[e,u]),h=i.useCallback(e=>{p.current||(p.current=!0,u("ai_chat_mcp.server_login_failure",{mcpServerId:e.id,featureEntrypoint:"figmake"}),t(e))},[t,u]),f=i.useCallback(async e=>{let t=await l.Ay.mcp.listTools({id:e.id},c);return t.needsAuthorization?{needsAuth:!0,authorizationUrl:t.authorizationUrl}:{needsAuth:!1}},[c]),g=i.useCallback(async(e,t)=>{try{let{needsAuth:n}=await f(e);n||(m(e),d({isAuthorizing:!1,server:null,window:null})),n&&t.isLastAuthCheck&&(h(e),d({isAuthorizing:!1,server:null,window:null}))}catch(t){console.error("Error checking server authorization:",t),h(e),d({isAuthorizing:!1,server:null,window:null})}},[f,h,m]);return i.useEffect(()=>{let{isAuthorizing:e,window:t,server:i}=n;if(!e||!t)return;let s=setInterval(()=>{t.closed&&(clearInterval(s),g(i,{isLastAuthCheck:!0}))},500),a=()=>{"visible"===document.visibilityState&&g(i,{isLastAuthCheck:!1})};return document.addEventListener("visibilitychange",a),()=>{clearInterval(s),document.removeEventListener("visibilitychange",a)}},[n,g]),i.useEffect(()=>{let{isAuthorizing:e,server:t}=n;if(!e||!(0,a.y3)())return;let i=setInterval(async()=>{document.hasFocus()&&await g(t,{isLastAuthCheck:!1})},1e3),s=setTimeout(()=>{g(t,{isLastAuthCheck:!0})},3e5);return()=>{clearInterval(i),clearTimeout(s)}},[n,g]),{initiateOauth:i.useCallback(async e=>{let t;p.current=!1,u("ai_chat_mcp.server_login_initiated",{mcpServerId:e.id,featureEntrypoint:"figmake"});try{let n=await f(e);if(!n.needsAuth){await m(e);return}t=n.authorizationUrl}catch(t){console.error("Error checking server authorization:",t),h(e);return}let n=(0,s.FJ)(t,"_blank");if(!n&&!(0,a.y3)()){console.error("Failed to open OAuth window"),h(e);return}d({isAuthorizing:!0,server:e,window:n})},[f,h,m,u])}}},436539:(e,t,n)=>{n.d(t,{Qh:()=>y,Rr:()=>j,g8:()=>b,oJ:()=>x,pA:()=>k,q6:()=>C});var i=n(716976),s=n(242069),a=n(795033),r=n(166887),l=n(833805),o=n(178623),d=n(20267),c=n(211862),u=n(893393),p=n(932567),m=n(107799),h=n(68902),f=n(518520);let g=u.M4.Query({fetch:async e=>(await p.p.getMcpServers(e.fileKey??void 0)).data.meta.servers});function x(){let e=(0,a.md)(c.ze),[t,{refetch:n}]=(0,u.IT)(g({fileKey:e})),i="loading"===t.status;return{mcpServers:t.data??[],isLoading:i,refetch:n}}let _=u.M4.Query({fetch:async e=>(await p.p.getMcpClients(e.fileKey??void 0)).data.meta.clients});function y(e=!0){let t=(0,a.md)(c.ze),[n,{refetch:s}]=(0,u.IT)(_({fileKey:t}),{enabled:e}),r="loading"===n.status,o=n.data??[];return(0,l.En)(o.map(e=>v({server:e.server}))),i.useEffect(()=>{r||n.data?.forEach(e=>h.rz(e.server.id))},[r,n.data]),{mcpClients:o,isLoading:r,refetch:s}}let v=u.M4.Query({fetch:async e=>{let t=(0,d.Ay)(),{server:n}=e,i=await o.Ay.mcp.listTools({id:n.id},t);return i.needsAuthorization?[]:i.tools.tools}});function b(e){let[t,{refetch:n}]=(0,u.IT)(v({server:e})),i="loading"===t.status,s="errors"===t.status;return{tools:t.data??[],isLoading:i,isError:s,refetch:n}}function C(){let e=(0,r.hC)();return i.useCallback(async(t,n,i,s,a)=>{e("ai_chat_mcp.tool_run_initiated",{toolName:s,mcpServerId:t,featureEntrypoint:"figmake",autoRunEnabled:a.autoRunEnabled,clientLifecycleId:a.clientLifecycleId,persistentEntityId:a.persistentEntityId,toolCallId:n});try{let r=await o.Ay.mcp.callTool({serverId:t,toolName:s,toolArgs:i},(0,d.Ay)()),l={success:!0,message:`Successfully executed MCP tool '${s}' from server '${t}'`,data:JSON.stringify(r.result?.content)};return e("ai_chat_mcp.tool_run_success",{toolName:s,mcpServerId:t,featureEntrypoint:"figmake",clientLifecycleId:a.clientLifecycleId,persistentEntityId:a.persistentEntityId,toolCallId:n}),l}catch(r){console.error("Error calling MCP tool:",r);let i=r instanceof Error?r.message:"string"==typeof r?r:"Unknown error";return e("ai_chat_mcp.tool_run_failure",{toolName:s,mcpServerId:t,featureEntrypoint:"figmake",clientLifecycleId:a.clientLifecycleId,persistentEntityId:a.persistentEntityId,toolCallId:n}),{success:!1,message:`Failed to execute MCP tool: ${i}`,data:void 0}}},[e])}function j(e,t){let n=(0,a.Xr)(h.iw),s=(0,f.Y)(),l=C(),o=(0,r.hC)(),d=(0,a.md)((0,m.Z3)(t));return i.useEffect(()=>{function t(){e.forEach(e=>{n({toolCallId:e,toolResult:void 0})})}return d?.signal.addEventListener("abort",t),()=>{d?.signal.removeEventListener("abort",t)}},[d,e,n]),{executeBatchToolCalls:i.useCallback(async(e,t)=>{s({results:await Promise.all(e.map(async({toolCallId:e,serverId:i,fullToolName:s,serverToolName:a,toolArgs:r})=>{let o=await l(i,e,r,a,t);return n({toolCallId:e,toolResult:o}),{toolCallId:e,toolName:s,toolResult:o}}))})},[n,s,l]),cancelBatchToolCalls:function(e,t){s({results:e.map(e=>{o("ai_chat_mcp.tool_run_cancelled",{toolName:e.serverToolName,mcpServerId:e.serverId,featureEntrypoint:"figmake",clientLifecycleId:t.clientLifecycleId,persistentEntityId:t.persistentEntityId,toolCallId:e.toolCallId});let i={success:!1,message:`User dismissed mcp tool call - ${e.fullToolName}`,data:void 0};return n({toolCallId:e.toolCallId,toolResult:i}),{toolCallId:e.toolCallId,toolName:e.fullToolName,toolResult:i}})})}}}function k(e=!0){let{mcpClients:t,isLoading:n}=y(e),r=(0,a.md)(h.RN),o=(0,a.md)(h.KU),d=(0,l.En)(t.map(e=>v({server:e.server})));return i.useMemo(()=>{if(!e||n)return 0;let i=0;for(let e=0;e<t.length;e++){let n=t[e],a=d[e];if(!n||r[n.server.id]?.disabled===!0||!a||"loaded"!==a.status)continue;let{readToolsDisabled:l,writeToolsDisabled:c}=r[n.server.id]||{};for(let e of a.data??[]){let t=e.annotations?.readOnlyHint;if(l&&t||c&&!t)continue;let a=(0,s.YW)(n.server.name,e.name);o[a]?.disabled!==!0&&i++}}return i},[e,t,d,n,r,o])}},174026:(e,t,n)=>{n.d(t,{q:()=>d});var i=n(716976),s=n(242069),a=n(795033),r=n(883765),l=n(819851);let o=(0,n(252285).H)({});function d(e,t,n,d,c){let[u,p]=(0,a.fp)(o(c)),m=`${c||"unknown"}-${d}`,h=u[m]||{selectedFeedback:null,shouldShowAdditionalFeedback:!1},f=i.useCallback(e=>{p({...u,[m]:e})},[p,u,m]),{persistentEntityId:g,clientLifecycleId:x}=e,_=(0,l.ow)(),y=n===s.lV.FIGMAKE?"figmake":n===s.lV.CODE_IN_SITES?"sites":_?"figjam":"design",v=i.useCallback((e,i,s)=>{x&&r.az.trackDefinedEvent("ai_for_production.chat_feedback",{feedbackType:e,productType:y,feedback:i,messageId:s,fileKey:t||void 0,featureType:n,persistentEntityId:g,clientLifecycleId:x})},[t,n,x,g,y]);return{feedbackState:h,setFeedbackState:f,sentimentFeedbackCallback:i.useCallback((e,t)=>{v(e.toString(),t,d)},[v,d]),additionalFeedbackCallback:i.useCallback((e,t)=>{v(e.toString(),t,d)},[v,d]),categoryFeedbackCallback:i.useCallback((e,t)=>{v(e.toString(),t,d)},[v,d]),productType:y}}},100873:(e,t,n)=>{n.d(t,{t:()=>o});var i=n(716976),s=n(242069),a=n(967325),r=n(266808),l=n(580276);function o(e,t,n,o){return(0,i.useMemo)(()=>{let i=[],d=e;o&&o.pagination&&o.pagination.hasMore&&(d=function(e){let t=e.findIndex(e=>{if(e.type===r.K$p.USER_MESSAGE)return!0;if(e.type===r.K$p.SYSTEM_MESSAGE){let t=(0,s.U1)(e.textContent||"");return t&&!t.hidden}return!1});return t<0?[]:t>0?e.slice(t):e}(d));let c=!1;for(let e=0;e<d.length;e++){let o=d[e];switch(o.type){case r.K$p.USER_MESSAGE:{let e=function(e,t){let n=t.usersById?.[e.userId];if(!n)return{renderableMessage:null,isAutoErrorFix:!1};let i=(0,s.MK)(e.textContent||""),r=(0,a.gG)(i);return i.hidden?{renderableMessage:null,isAutoErrorFix:r}:{renderableMessage:{type:"user",user:n,id:e.id,uniqueId:(0,s._$)(e),plainText:i.plainText||"",imports:i.imports,inspectedElement:i.inspectedElement,inspectedComponent:i.inspectedComponent,inspectedLibrary:i.inspectedLibrary,selectedNodeIds:i.selectedNodeIds,libraryKey:i.libraryKey,sentAt64:e.sentAt64?.toString()},isAutoErrorFix:r}}(o,t);e.renderableMessage&&i.push(e.renderableMessage),c=e.isAutoErrorFix;continue}case r.K$p.SYSTEM_MESSAGE:{let e=function(e){let t=(0,s.U1)(e.textContent||"");if(!t)return null;let n={type:"system",id:e.id,uniqueId:(0,s._$)(e),systemMessageType:t.type,title:"title"in t?t.title:void 0,sentAt64:e.sentAt64?.toString()};switch(t.type){case"restore":return{...n,systemMessageType:"restore",codeSnapshotKey:t.codeSnapshot?.codeSnapshotKey,fileVersionId:t.codeSnapshot?.fileVersionId};case"manual_edit":return{...n,systemMessageType:"manual_edit",changedFiles:t.changedFiles,codeSnapshotKey:t.codeSnapshot?.codeSnapshotKey,fileVersionId:t.codeSnapshot?.fileVersionId};case"duplicated_file":return{...n,systemMessageType:"duplicated_file",fileKeyHash:t.fileKeyHash};case"deleted_chat_history":return{...n,systemMessageType:"deleted_chat_history",userId:t.userId,timestamp:t.timestamp};default:return{...n,systemMessageType:"generic",plainText:t.plainText||""}}}(o);e&&i.push(e),c=!1;continue}case r.K$p.ASSISTANT_MESSAGE:{let{assistantMessages:t,title:a,lastGroupMessageIndex:u}=function(e,t,n){let i=(0,s.BM)([n]),a=(0,s.lr)(n.textContent||"").title,o=t,d=!1;for(let n=t+1;n<e.length;n++){let t=e[n];if(!t)break;let c=(0,s.lr)(t.textContent||"");a||=c.title;let u=!0===c.hidden,p=t.type===r.K$p.SYSTEM_MESSAGE,m=t.type===r.K$p.ASSISTANT_MESSAGE,h=t.type===r.K$p.TOOL_MESSAGE;if(!(m||u&&p||h))break;if(o=n,h){if(function(e,t){let n=t.toolResults;if(!n||0===n.length)return!1;let i=e[e.length-1];if(!i)return!1;let a=(0,s.BM)([i])[0];if(!a)return!1;for(let i of(e.push(...(0,s.BM)([t])),n))if(a.toolCalls.find(e=>e.toolCallId===i.toolCallId&&e.toolName===i.toolName)&&(a.toolResults.push(i),(0,l.d4)(i.toolName)))return!0;return!1}(i,t)){d=!0;break}}else i.push(...(0,s.BM)([t]));if(d)break}return{assistantMessages:i,title:a,lastGroupMessageIndex:o}}(d,e,o),p=function(e,t={}){let{hideTextBetweenToolCalls:n=!1}=t,i=[],a=new Set,l=new Map;return(e.forEach(e=>{(e.type===r.K$p.ASSISTANT_MESSAGE||e.type===r.K$p.TOOL_MESSAGE)&&e.toolResults?.forEach(e=>{l.set(e.toolCallId,e)})}),e.forEach(e=>{if(e.type===r.K$p.ASSISTANT_MESSAGE){let n=(0,s.lr)(e.textContent),r={id:e.id,sentAt64:e.sentAt64},o=[];switch(n.signedReasoning&&o.push({...r,type:"reasoning",reasoning:n.signedReasoning.text}),n.mode){case"code":n.codeFilePath&&o.push({...r,type:"code",code:n.code,file:n.codeFilePath});break;case"message":o.push({...r,type:"message",message:n.plainText});break;case"visible_message":var t;o.push({...r,type:"visible_message",message:(t=n.plainText)?t.replace(/<figma[^>]*>([\s\S]*?)<\/figma>/g,(e,t)=>e.includes("\n")?"":e):t,codeSnapshot:n.codeSnapshot});break;case"plan":o.push({...r,type:"plan",plan:n.plainText,title:n.title||""});break;case"summary":o.push({...r,type:"summary",summary:n.plainText,codeSnapshot:n.codeSnapshot});break;case"work":o.push({...r,type:"work",work:n.plainText});break;default:n.plainText.length>0&&o.push({...r,type:"message",message:n.plainText})}if(e.toolCalls){let t=function(e,t,n,i){let a=[],r=[];for(let l of e)if("call_mcp_tool"!==l.toolName||t.has(l.toolCallId)){if((0,s.Eb)(l.toolName)&&(l.toolName.startsWith(s.lh)||l.toolName.startsWith(s.Jz))&&!t.has(l.toolCallId)){let e=(0,s.Vm)(l);e&&a.push(e);let t=n.get(l.toolCallId);if(t){let e=(0,s.Xy)(t);e&&r.push(e)}}}else try{let e=JSON.parse(l.argsJson),t=e.tool_name,o=e.tool_input,d=e.serverId,c=e.serverLogoUrl,u=e.serverName;if(t&&null!=o&&d&&c){let e={type:"toolCall",toolCallId:l.toolCallId,toolName:t,partialArgs:{...o,serverId:d,serverLogoUrl:c,serverName:u,userId:i}};a.push(e);let p=n.get(l.toolCallId);if(p){let e=(0,s.Xy)(p);e&&r.push(e)}}}catch(e){}if(a.length>0)return{type:"mcpClientSideToolCall",toolCalls:a,toolResults:r}}(e.toolCalls,a,l,e.userId);t&&(o.push({...r,...t}),t.toolCalls.forEach(e=>{a.add(e.toolCallId)})),e.toolCalls.forEach(e=>{if("call_mcp_tool"!==e.toolName){if("run_mcp_tool"===e.toolName){if(a.has(e.toolCallId))return;a.add(e.toolCallId);let t=(0,s.Vm)(e);if(!t)return;let n={...r,type:"mcpServerSideToolCall",toolCall:t},i=l.get(e.toolCallId);if(i){let e=(0,s.Xy)(i);e&&(n.toolResult=e)}o.push(n);return}if((0,s.Eb)(e.toolName)){if(a.has(e.toolCallId))return;a.add(e.toolCallId);let t=(0,s.Vm)(e);if(!t)return;let n={...r,type:"clientSideToolCall",toolCall:t},i=l.get(e.toolCallId);if(i){let e=(0,s.Xy)(i);e&&(n.toolResult=e)}o.push(n)}else o.push({...r,type:"toolCall",name:e.toolName})}})}i.push(...o)}}),n)?function(e){let t=-1;for(let n=e.length-1;n>=0;n--)if(e[n]?.type==="visible_message"){t=n;break}return e.filter((n,i)=>{if("visible_message"!==n.type||t===i)return!0;let s=e[i-1],a=e[i+1],r=s?.type==="toolCall"||s?.type==="clientSideToolCall",l=a?.type==="toolCall"||a?.type==="clientSideToolCall";return!r||!l})}(i):i}(t,n);i.push({type:"assistant",uniqueId:(0,s._$)(o),messages:p,isAutoErrorFix:c,title:a,sentAt64:o.sentAt64?.toString()}),c=!1,e=u;continue}case r.K$p.TOOL_MESSAGE:continue}}return n.isExchangeMessages&&i.forEach(e=>{e.isExchangeMessage=!0}),i},[e,o,t,n])}},350434:(e,t,n)=>{n.d(t,{j:()=>d});var i=n(716976),s=n(542653),a=n(795033),r=n(810149),l=n(533144),o=n(707490);let d=()=>{let e=(0,a.Xr)(o.jx);return i.useCallback((t,n)=>{let i=(0,s.$d)(),a=i[t]||(n?i[n]:null);a&&((0,l.Zr)(a),e(o.Ic.CODE),a.codeFilePath&&(0,r.ci)(a.codeFilePath))},[e])}},231918:(e,t,n)=>{n.d(t,{E:()=>z,p:()=>B});var i=n(716976),s=n(638004),a=n(266808),r=n(170627),l=n(681958),o=n(795033),d=n(385446),c=n.n(d),u=n(883765),p=n(328341),m=n(550209),h=n(74620),f=n(211862),g=n(331497),x=n(719947),_=n(266230),y=n(313447),v=n(323460),b=n(500275),C=n(980852),j=n(260495),k=n(482911),w=n(997477),E=n(178623),T=n(749620);let S=new class{constructor(){this.worker=null,this.pendingRequests=new Map,this.handleWorkerMessage=e=>{let{type:t,id:n}=e.data,i=this.pendingRequests.get(n);if(!i){console.warn("Received response for unknown request:",n);return}this.pendingRequests.delete(n),"AST_DIFF_RESULT"===t?i.resolve(e.data.result):"AST_DIFF_ERROR"===t&&i.reject(Error(e.data.error))},this.handleWorkerError=e=>{for(let[t,n]of(console.error("Worker error:",e),this.pendingRequests))n.reject(Error("Worker error: "+e.message));this.pendingRequests.clear()}}getWorker(){return this.worker||(this.worker=(0,T.x)(Fig.astDiffWorkerURL),this.worker.addEventListener("message",this.handleWorkerMessage.bind(this)),this.worker.addEventListener("error",this.handleWorkerError.bind(this))),this.worker}processASTDiff(e,t,n={}){let i=this.getWorker(),s=crypto.randomUUID(),a={type:"AST_DIFF",id:s,oldCode:e,newCode:t,options:n};return new Promise((e,t)=>{this.pendingRequests.set(s,{resolve:e,reject:t}),i.postMessage(a)})}terminate(){this.worker&&(this.worker.terminate(),this.worker=null),this.pendingRequests.clear()}};var I=(e=>(e.Added="added",e.Removed="removed",e.Modified="modified",e))(I||{});async function N(e,t){await new Promise(n=>{let i=setInterval(()=>{e.sourceCode.startsWith("// Converting designs to code")||t.sourceCode.startsWith("// Converting designs to code")||(clearInterval(i),n(!0))},50)});try{let n=e.sourceCode.replace(/import .* from .*\n/g,"").trim(),i=t.sourceCode.replace(/import .* from .*\n/g,"").trim(),s=await S.processASTDiff(i,n,{ignoreComments:!0,ignoreWhitespace:!0,ignoreFormatting:!0}),a=await (0,w.w0)("make_apply_diff_strategy"),r=a.getValue("strategy","llm"),l=a.getValue("modelOverride",null),o=null;return"llm"===r?o=(await E.Ay.internal.explainDiff({diffs:s.filteredDiff,modelOverride:l??void 0})).explanation:"local"===r&&(o=s.filteredDiff.map(e=>{let t=function(e){let t=e.nodeName?.toLowerCase()??"",n=e.value?.toLowerCase()??"";return n.includes("bg-")||n.includes("text-")||t.includes("color")?"Color":n.match(/^(w-|h-|top-|left-|right-|bottom-|p-|px-|py-|pt-|pr-|pb-|pl-|m-|mx-|my-|mt-|mr-|mb-|ml-)/)||t.includes("width")||t.includes("height")||t.includes("padding")||t.includes("margin")?"Positioning":n.match(/^(font-|text-\d|leading-|tracking-)/)||t.includes("font")||t.includes("weight")?"Formatting":e.state===I.Added?"New Element":e.state===I.Removed?"Removal":"Change"}(e),n=function(e){let{tree:t,description:n}=function(e){let t=e.match(/className\.(\S+)\s+of\s+(<\w+>)\s+in\s+(.+)/);if(t){let[,,e,n]=t,i=n.split(" -> ").reverse().join(" -> ");return{element:e,tree:`\`${i} -> ${e}\``,description:e.replace(/[<>]/g,"")}}let n=e.match(/(<\w+>)\s+in\s+(.+)/);if(n){let[,e,t]=n,i=t.split(" -> ").reverse().join(" -> ");return{element:e,tree:`\`${i} -> ${e}\``,description:e.replace(/[<>]/g,"")}}return{element:e,tree:e,description:e}}(e.nodeName??""),i=[t,e.sourceFile?`source: \`${e.sourceFile}:${e.sourceLine}:${e.sourceColumn}\``:""].filter(Boolean).join(", ");if(e.state===I.Added)return`${n} (tree: ${i}) added with value \`${e.value}\``;if(e.state===I.Removed)return`${n} (tree: ${i}) removed value \`${e.value}\``;if(e.oldValue&&e.value){let t=e.nodeName?.match(/className\.(\w+)/);if(t){let s=t[1];return`${n} (tree: ${i}) ${s} changed from \`${e.oldValue}\` to \`${e.value}\``}return`${n} (tree: ${i}) changed from \`${e.oldValue}\` to \`${e.value}\``}return`${n} (tree: ${i}) changed to \`${e.value}\``}(e);return`  - **${t}**: ${n}`}).join("\n")),o}catch(e){return console.error("AST diff processing failed:",e),null}}var A=n(612691),L=n(199062);async function M(e,t,n,i,s,l){let o;let d=performance.now();l({step:a.doA.START_HTML_TO_DESIGN,attachmentType:"FIGMA_NODE",attachmentId:i,nodeGuid:s.guid,elapsedMs:0});let c=await t?.sitesPreview?.sendMessage("getDOMNodes",{});if(!e||!c)return;let u=await (0,y.N5)(c,{scene:n,decodeImage:j.UD,tracking:a.HzA.TRACK,rootFrameName:t?.fileName},{attachBuildDataToNodes:{enabled:!0,fileKey:t?.fileKey}});return l({step:a.doA.END_HTML_TO_DESIGN,attachmentType:"FIGMA_NODE",attachmentId:i,nodeGuid:s.guid,elapsedMs:performance.now()-d}),r.l7.ai("figmake",()=>{let e=u.createCodeLayerFromDesign("make-diff-on-paste",!1,b.n0,i);if(1!==e.length){let e=Error("Expected exactly one code layer to be created");throw l({step:a.doA.ROUNDTRIP_CREATE_CODE_LAYER_FROM_DESIGN,attachmentType:"FIGMA_NODE",attachmentId:i,nodeGuid:s.guid,elapsedMs:performance.now()-d,error:e.message}),e}l({step:a.doA.ROUNDTRIP_CREATE_CODE_LAYER_FROM_DESIGN,attachmentType:"FIGMA_NODE",attachmentId:i,nodeGuid:s.guid,elapsedMs:performance.now()-d}),o=e[0]}),o}async function O(e,t,n,i,s,a){let r=a.get(e),l=a.get(t);if(!r||!l)return;let d=await N(r,l),c={status:"success",nodeGuid:n.guid,image:null,type:"DIFF",diffs:d??"",uniqueId:i??(0,v.lA)()};s(e=>e.map(e=>(0,_.ak)(e,n.guid)?c:e)),u.az.trackDefinedEvent("ai_for_production.chat_attachment_added",{attachmentType:"DIFF",fileKey:o.zl.get(f.yV)?.key??void 0,imageSize:0})}async function R(e,t,n,i,s){let l,d;let c=(0,C.getActiveTSSceneGraph)(),u=(0,k.I8)(e),p=e.getPluginData("make_to_design_build_data","sourceMakeFile"),m=(0,A.z)("bake_m2d_roundtrip"),h=m&&null!==p&&p===s?.fileKey;r.l7.ai("figmake custom fonts",()=>{u.forEach(e=>{e.fontFamily&&e.fontWeight&&(0,L.HL)({fontFamily:e.fontFamily,styleName:e.fontWeight,postscript:e.postscript||""})})});let f=performance.now();try{l=function(e,t,n,i,s){let l;if(r.l7.ai("figmake",()=>{let r=e.createCodeLayerFromDesign("paste",n,b.n0,t);if(0===r.length){let n=Error("Failed to create code layer from design");throw i({step:a.doA.CREATE_CODE_LAYER_FROM_DESIGN,attachmentType:"FIGMA_NODE",attachmentId:t,nodeGuid:e.guid,elapsedMs:performance.now()-s,error:n.message}),n}if(r.length>1){let n=Error("More than one code layer was created");throw i({step:a.doA.CREATE_CODE_LAYER_FROM_DESIGN,attachmentType:"FIGMA_NODE",attachmentId:t,nodeGuid:e.guid,elapsedMs:performance.now()-s,error:n.message}),n}l=r[0]}),!l)throw Error("Code layer GUID is undefined after creation");return l}(e,i,!h,n,f)}catch(u){let s=o.zl.get(_.Ah).find(t=>(0,_.ak)(t,e.guid));t(t=>t.filter(t=>!(0,_.ak)(t,e.guid))),r.Hq.system("figmake",()=>{let t=c.get(e.guid);t&&t.removeSelfAndChildren()});let l=s?.designToCodeErrors,d=a.FDn.DESIGN_2_REACT_OTHER;l&&l[0]&&(d=l[0]),n({step:a.doA.CREATE_CODE_LAYER_FROM_DESIGN,attachmentType:"FIGMA_NODE",attachmentId:i,nodeGuid:e.guid,elapsedMs:performance.now()-f,error:d.toString()}),(0,_.hH)(a.FDn.DESIGN_2_REACT_OTHER);return}m&&(d=await M(h,s,c,i,e,n)),n({step:a.doA.CREATE_CODE_LAYER_FROM_DESIGN,attachmentType:"FIGMA_NODE",attachmentId:i,nodeGuid:e.guid,elapsedMs:performance.now()-f}),await (0,j.Jr)().loadAllImagesUnder([l],a.MoD.ALL,"rev-image-paste"),d&&await (0,j.Jr)().loadAllImagesUnder([d],a.MoD.ALL,"rev-image-diff-paste"),d&&await O(l,d,e,i,t,c)}async function P(e,t,n,i){let s=performance.now();try{let r=await (0,v.rt)(e),l=await (0,v.Zz)(e);if(a.glU?.addImageNodeAsImageImport(e.id),!r)throw Error("Failed to export image attachment from internal canvas node");i({step:a.doA.EXTRACT_IMAGE_ATTACHMENT,attachmentType:"IMAGE",attachmentId:t,nodeGuid:e.guid,elapsedMs:performance.now()-s});let d={status:"success",nodeGuid:e.guid,image:r,imageHash:l,type:"IMAGE",uniqueId:t};n(t=>t.map(t=>(0,_.ak)(t,e.guid)?d:t)),i({step:a.doA.FINISH_ATTACHMENT,attachmentType:"IMAGE",attachmentId:t,nodeGuid:e.guid,elapsedMs:performance.now()-s}),u.az.trackDefinedEvent("ai_for_production.chat_attachment_added",{attachmentType:"IMAGE",fileKey:o.zl.get(f.yV)?.key??void 0,imageSize:r.length,attachmentId:t})}catch(n){throw i({step:a.doA.EXTRACT_IMAGE_ATTACHMENT,attachmentType:"IMAGE",attachmentId:t,nodeGuid:e.guid,elapsedMs:performance.now()-s,error:n.message}),n}}var D=n(287441),F=n(447556);async function z(e,t,n,i,d,c,p,h){if(!e||0===e.length)return;let g="",y=[];for(let n of e){let e=t.get(n);e&&("TEXT"===e.type?(g&&(g+="\n"),g+=e.characters,r.l7.system("clean-up-chat-box-pasted-text-node",()=>{e.removeSelfAndChildren()})):y.push(n))}if(a.n1M?.clearPastedDesign(),y.length>0&&o.zl.get(_.Ah).filter(e=>"error"!==e.status).length+y.length>_.qQ){(0,_.hH)(a.FDn.MAXIMUM_ATTACHMENTS_EXCEEDED);return}g&&i(g),y.length>0&&h?.(y);let v=o.zl.get(F.TH),b=o.zl.get(F.Ng),C=[],j=[];for(let e of y){let i=c(e),r=t.get(e);if(!r){let t=Error("Pasted node not found in scene");(0,m.$D)(s.e.MAKE_EDITING,t,{extra:{nodeGuid:e,attachmentId:i}}),d({step:a.doA.START,attachmentType:"UNKNOWN",attachmentId:i,nodeGuid:e,elapsedMs:0,error:t.message});continue}p?.fileKey&&await (0,D.K6)(e,p.fileKey)&&o.zl.set(D.dt,t=>{let n=new Set(t);return n.add(e),n});let h=(0,x.A)(r)?"IMAGE":"FIGMA_NODE";(0,m.Bc)({pending_make_attachment_id:i,pending_make_attachment_type:h});let g=performance.now();try{if("FIGMA_NODE"===h){let{count:t,instanceCount:s}=function(e){let t=0,n=0,i=0;return(0,l.hV)(e,e=>{t++;try{e?.isInstance&&n++}catch(e){i++}}),{count:t,instanceCount:n,couldNotCount:i}}(r);d({step:a.doA.START,attachmentType:h,attachmentId:i,nodeGuid:e,elapsedMs:0,nodeCount:t,instanceCount:s}),await R(r,n,d,i,p),d({step:a.doA.PASTE_COMPLETED,attachmentType:h,attachmentId:i,nodeGuid:e,elapsedMs:performance.now()-g,nodeCount:t,instanceCount:s})}else d({step:a.doA.START,attachmentType:h,attachmentId:i,nodeGuid:e,elapsedMs:0}),await P(r,i,n,d),d({step:a.doA.PASTE_COMPLETED,attachmentType:h,attachmentId:i,nodeGuid:e,elapsedMs:performance.now()-g});b&&j.push(e)}catch(t){d({step:a.doA.PASTE_COMPLETED,attachmentType:h,attachmentId:i,nodeGuid:e,elapsedMs:performance.now()-g,error:t.message}),n(t=>t.map(t=>(0,_.ak)(t,e)?{...t,status:"error"}:t)),b&&C.push(`nodeGuid: ${e}, error: ${t.message}`),(0,m.$D)(s.e.MAKE_EDITING,t,{extra:{pastedItemType:h,attachmentId:i}}),u.az.trackDefinedEvent("ai_for_production.chat_attachment_failed",{attachmentType:h,fileKey:o.zl.get(f.yV)?.key??void 0,attachmentId:i,errorMessage:t.message}),(0,_.hH)(a.FDn.DESIGN_2_REACT_OTHER)}finally{(0,m.Bc)({pending_make_attachment_id:void 0,pending_make_attachment_type:void 0})}}b&&(v&&u.az.trackDefinedEvent("activation.send_to_make_from_design.frame_pasted_as_attachment",{...v,status:C.length>0?"error":"success",...C.length>0?{error:C.join("\n")}:{selectedNodeId:j.join(",")}}),o.zl.set(F.Ng,!1),o.zl.set(F.aQ,!0))}function B(e,t,n,s){let r=(0,h.eY)(),l=a.Ez5?.figmakeState(),o=(0,g.ut)(l?.pastedNodeGuids,[]),d=(0,p.ZC)(o),{setAttachments:u,claimAPendingAttachmentOrMakeOne:m,createPendingAttachmentsForNodes:f}=(0,_._9)(e);i.useEffect(()=>{o.length>0&&!c()(o,d)&&z(o,r,u,t,n,m,s,f)},[r,u,t,m,n,o,d,f,s])}},965883:(e,t,n)=>{n.d(t,{M:()=>_});var i=n(716976),s=n(237420),a=n(266808),r=n(812714),l=n(795033),o=n(883765),d=n(719913),c=n(192075),u=n(58212),p=n(638641),m=n(211862),h=n(144386),f=n(566303),g=n(769887),x=n(266230);function _(){let e=(0,m.q5)(),t=(0,s.wA)();return i.useCallback(async n=>{if((0,r.kc)().allow_node_links_in_make)try{let i=(n.clipboardData||window.clipboardData).getData("Text");if(!i||!(0,f.D)(i))return;let s=i.trim(),r=new URL(s).pathname;if(r.startsWith("/design/")){let i=(0,d.zv)(r),m=(0,h.zU)(s);if(!i||!m){(0,x.hH)(a.FDn.USER_PASTED_DESIGN_LINK_WITHOUT_NODE_ID);return}if(l.zl.get(x.qG)){(0,x.hH)(a.FDn.MAXIMUM_ATTACHMENTS_EXCEEDED);return}try{n.preventDefault(),t(u.F.enqueue({message:(0,c.t)("figmake.send_to_make_from_design.visual_bell.copying_frames"),type:"send-to-make-from-design-load",icon:p.zX.SPINNER,preventDismissal:!0,timeoutOverride:3e5})),await y(i,m),o.az.trackDefinedEvent("figmake.node_pasted_from_url",{fileKey:e?.key??"",pastedNodeGuid:m,sourceFileKey:i}),t(u.F.dequeue({matchType:"send-to-make-from-design-load"})),t(u.F.enqueue({message:(0,c.t)("figmake.send_to_make_from_design.visual_bell.complete"),type:"send-to-make-from-design-complete",icon:p.zX.CHECK,timeoutOverride:3e3}))}catch(e){t(u.F.dequeue({matchType:"send-to-make-from-design-load"})),(0,x.hH)(a.FDn.USER_PASTED_DESIGN_LINK_WITHOUT_ACCESS)}}}catch(e){console.error("Error in handling URL paste:",e)}},[e,t])}async function y(e,t){let n=await (0,g.R)({fileKey:e,selectedGuids:[t]});a.glU?.applyNodesFromBuffer(n,e,[t],!0)}},264834:(e,t,n)=>{n.d(t,{W:()=>K});var i=n(104076),s=n(716976),a=n(237420),r=n(88314),l=n(293422),o=n(826220),d=n(268389),c=n(80969),u=n(307829),p=n(454851),m=n(694415),h=n(853943),f=n(73795),g=n(795033),x=n(120440),_=n(883765),y=n(653899),v=n(848561),b=n(192075),C=n(366535),j=n(211862),k=n(624155),w=n(959834),E=n(288054),T=n(634491),S=n(183379),I=n(7659),N=n(431810),A=n(636609),L=n(147353),M=n(199062),O=n(439700),R=n(686586),P=n(359103),D=n(908461),F=n(33946);let z={textSecondary:{kMwMTN:"x1n0bwc9",$$css:!0}};function B({closeModal:e}){let t=s.useRef(null);s.useEffect(()=>{t.current&&t.current.focus()},[]);let[n,a]=s.useState("");return(0,i.jsx)(A.$,{className:"x1y1aw1k xjkvuk6 xh8yej3 x78zum5 xdt5ytf x167g77z",children:(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"xnm25rq x1ug7bdz x1iorvi4 xwib8y2",children:(0,i.jsx)(c.D,{ref:t,value:n,onChange:e=>{a(e)},"aria-label":(0,b.t)("general.search"),placeholder:(0,b.t)("sites.modal.search_all_make_kits")})}),(0,i.jsx)(T.Tp,{entrypoint:E.r6.FIGMAKE,initialTab:void 0,initialUpdatesModalScope:k.aD.CURRENT,children:(0,i.jsx)(v.dP,{children:(0,i.jsx)(G,{closeModal:e,searchQuery:n})})})]})})}function G({closeModal:e,searchQuery:t}){let{usedMakeLibraryIds:n}=(0,M.cH)(),{queryResult:s,queryStatus:a}=(0,O.x)({query:t}),l="loading"===a&&0===s.length;return"errors"===a?(0,i.jsx)(V,{closeModal:e}):l?(0,i.jsx)(i.Fragment,{children:(0,r.y1)(3).map(e=>(0,i.jsx)(N.Q,{},e))}):s?.length===0?(0,i.jsx)(V,{closeModal:e}):(0,i.jsx)(T.Tp,{entrypoint:E.r6.FIGMAKE,initialTab:void 0,initialUpdatesModalScope:k.aD.CURRENT,children:(0,i.jsx)(v.dP,{children:s?.map((e,t)=>i.jsx(I.V,{header:e.library_name,subheader:e.team_name,thumbnailUrl:e.thumbnail_url,coverThumbnail:!0,callToAction:i.jsx(U,{library:e,isSelected:n.includes(e.id)}),name:e.library_name,onClick:void 0,kbPath:[S.m3.TabBodySection.Body,t]},`MakeLibraryListItem-${e.library_key}`))})})}function U({library:e,isSelected:t}){let{toggleLibrarySelection:n,isLibraryTogglePending:s}=(0,M.cH)();if(t)return null;let a=s(e.id),r=t?(0,b.t)("sites.modal.make_kits_remove_button_text"):(0,b.t)("sites.modal.make_kits_add_button_text");return(0,i.jsx)(l.$n,{variant:t?"secondary":"primary",disabled:a,onClick:()=>n(e),children:r})}function V({closeModal:e}){let t=(0,j.tS)(),n=(0,L.y2)(),a=(0,g.Xr)(D.j),r=s.useCallback(()=>{n(),a(F.p.LIBRARIES),e()},[n,e,a]);return(0,y.h)(()=>{_.az.trackDefinedEvent("ds_import.library_selector_empty_state_seen",{file_key:t||""})}),(0,i.jsx)("div",{className:"x9f619 x167g77z xh8yej3 x5yr21d x78zum5 x6s0dn4 xl56j7k x4i7bpe x1sgudl8",children:(0,i.jsxs)("div",{className:"xhwf2h4 x167g77z x78zum5 xdt5ytf x6s0dn4 xl56j7k x2b8uid",children:[(0,i.jsx)(m.l,{}),(0,i.jsx)("div",{...x.Ay.props(f.g.textBodyMediumStrong),children:(0,b.t)("sites.modal.no_make_libraries_added")}),(0,i.jsx)("div",{...x.Ay.props(f.g.textBodyMedium,z.textSecondary),children:(0,b.t)("sites.modal.no_make_libraries_added_subtitle")}),(0,i.jsx)("div",{className:"x1xmf6yo",children:(0,i.jsx)(l.$n,{variant:"primary",onClick:r,children:(0,b.t)("sites.modal.select_library_cta")})})]})})}function H(){let{getTriggerProps:e,manager:t}=u.b(),n=(0,a.wA)(),r=s.useCallback(()=>{n(C.ES(K))},[n]);return(0,i.jsxs)(u.bL,{manager:t,children:[(0,i.jsx)(p.d,{...e(),"aria-label":(0,b.t)("figmake.empty_state.settings"),children:(0,i.jsx)(h.J,{})}),(0,i.jsxs)(u.mc,{children:[(0,i.jsx)(P.R,{onClickCallback:r}),(0,i.jsx)(P.P8,{onClickCallback:r})]})]})}let K=(0,w.Ju)(function(e){let{defaultPosition:t}=e,n=(0,a.wA)(),r=s.useCallback(()=>{n((0,C.AS)())},[n]);s.useEffect(()=>(R.Uy.on("submit",r),()=>{R.Uy.removeListener("submit",r)}),[r]);let c=(0,b.t)("sites.modal.make_kits_header"),u=(0,L.y2)(),p=(0,g.Xr)(D.j),m=s.useCallback(()=>{u(),p(F.p.LIBRARIES),r()},[u,r,p]),h=(0,i.jsx)("div",{className:"x78zum5 x1l2rt3b xdd8jsf xl56j7k x6s0dn4 x883omv",children:(0,i.jsxs)("div",{className:"x78zum5 xlrdbfi x1qughib x6s0dn4 x2lah0s",children:[(0,i.jsxs)("div",{className:"x78zum5 xdt5ytf x1cy8zhl",children:[(0,i.jsx)("div",{...x.Ay.props(f.g.textBodyMediumStrong),children:(0,b.t)("sites.modal.make_kits_footer_title")}),(0,i.jsx)("div",{...x.Ay.props(f.g.textBodyMedium,z.textSecondary),children:(0,b.t)("sites.modal.make_kits_footer_subtitle")})]}),(0,i.jsx)(l.$n,{variant:"secondary",onClick:m,children:(0,b.t)("sites.modal.make_kits_import_library_button_text")})]})});return(0,i.jsx)(o.bL,{defaultPosition:t,width:400,maxHeight:378,onClose:r,children:(0,i.jsxs)(d.vo,{children:[(0,i.jsxs)(d.Y9,{children:[(0,i.jsx)(d.hE,{children:c}),(0,i.jsx)(d.jk,{children:(0,i.jsx)(H,{})})]}),(0,i.jsx)(d.nB,{padding:0,children:(0,i.jsx)("div",{className:"x78zum5 xdt5ytf xou54vl xsbggsw xh8yej3 x9f619",children:(0,i.jsx)(B,{closeModal:r})})}),(0,i.jsx)(d.wi,{children:h})]})})},"MakeLibrarySelectorOverlay",w.ZU.YES)},702319:(e,t,n)=>{n.d(t,{Gt:()=>m,KS:()=>h,ee:()=>f,xA:()=>p,y8:()=>c});var i=n(65545),s=n(408825),a=n(394549),r=n(211862),l=n(700126),o=n(861598),d=n(612691);function c(e){let t={...e};return delete t.serverId,delete t.serverLogoUrl,delete t.userId,delete t.serverName,t}let u=s.z.union([s.z.object({success:s.z.boolean(),message:s.z.string(),data:s.z.string()}),s.z.object({success:s.z.boolean(),message:s.z.string(),result:s.z.any()})]).transform(e=>{let t="data"in e?e.data:"result"in e?JSON.stringify(e.result):void 0;return{success:e.success,message:e.message,data:t}});function p({hasDismissedToolCall:e,isExecutingTool:t,isMostRecentMessage:n,isCurrentUserInitiator:i,toolResult:s}){return t?o.lh.LOADING:e?o.lh.CANCELLED:s?s.success?o.lh.SUCCESS:o.lh.FAILED:!n&&i?o.lh.CANCELLED:o.lh.IDLE}function m({status:e,result:t,completeToolName:n}){return e===o.lh.CANCELLED&&!t||t?.message===`User dismissed mcp tool call - ${n}`}function h(e,t){if(e)return e;if(t){let e=u.safeParse(t.result);if(e.success)return e.data}}function f(){let e=(0,r.q5)(),t=e?.planPublicInfo?.tier,n=e?.plan?.isMcpClientDisabled,s=n?.status==="loaded"&&n.data,o=(0,a.BE)(),c=(0,l.l)();return!!o&&!c&&(!!(0,d.z)("bake_mcp_client")||(t===i.Agb.ENTERPRISE?(0,d.z)("bake_mcp_client_ent")&&!s:t===i.Agb.ORG?(0,d.z)("bake_mcp_client_org")&&!s:t===i.Agb.PRO||t===i.Agb.STUDENT?(0,d.z)("bake_mcp_client_pro")&&!s:(0,d.z)("bake_mcp_client_starter")&&!s))}},308233:(e,t,n)=>{n.d(t,{Pc:()=>k,J5:()=>w,R:()=>j});var i=n(104076),s=n(801519),a=n(716976),r=n(747618),l=n(420680),o=n(94292),d=n(417167),c=n(820400),u=n(266808),p=n(795033);n(120440);var m=n(390036),h=n(630615),f=n(192075),g=n(78350),x=n(359379),_=n(863995),y=n(386958);function v({assetType:e,assets:t,label:n,labelPlural:s,mediaByGuid:r}){let{onExportAll:u}=(0,x.p0)({assetType:e,assets:t,mediaByGuid:r}),p=Object.keys(t).length,f=Object.values(t),[g,_]=a.useState(!1),v=a.useRef(null),{visibleItems:C,showMoreButton:j}=(0,h.y)({items:f,pageSize:3,shouldResetOnSelectionChange:!0});return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"x78zum5 xilkfi8 x6s0dn4 x1nfngrj x1ef8nbk xkh2ocl",children:[(0,i.jsxs)("div",{className:"x78zum5 x1iyjqo2 x2lah0s x1r8uery x6s0dn4 x1akne3o",children:[(0,i.jsx)(o._,{})," ",(0,i.jsx)("span",{className:"xilkfi8 xclx6tv x17akokd x1j61x8r x1qxcl5b xno9bf3 x1akne3o",children:(0,m.td)(p,n,s)})]}),(0,i.jsx)("div",{ref:v,children:(0,i.jsx)(l.K,{"aria-label":(0,x.IP)(e),htmlAttributes:{"data-tooltip":(0,x.IP)(e),"data-tooltip-type":"text"},onClick:()=>_(e=>!e),children:(0,i.jsx)(d.n,{})})}),(0,i.jsx)(l.K,{"aria-label":(0,x.aX)(e),htmlAttributes:{"data-tooltip":(0,x.aX)(e),"data-tooltip-type":"text"},onClick:u,children:(0,i.jsx)(c.W,{})})]}),C.map(e=>(0,i.jsx)(b,{asset:e,mediaByGuid:r},e.assetId)),j&&(0,i.jsx)("div",{className:"x1vi7shn xxyw1jk",children:j}),g&&(0,i.jsx)(x.SG,{assetType:e,rowRef:v,onClose:()=>_(!1),pickerPosition:v.current?(0,y.VZ)(v.current,248,!1):void 0})]})}function b({asset:e,mediaByGuid:t}){let n=t?.[e.assetId];return(0,i.jsx)("div",{className:"x78zum5 xdt5ytf x1qjc9v5 xkh2ocl x1nfngrj x19y5rnk xf7z5ut x4vwp2a",children:(0,i.jsx)(x.$1,{assetInfo:e,media:n,addPadding:!1},e.assetId)})}function C({nodeId:e,assetTypes:t}){let[n,s]=(0,p.fp)(g.g);(0,a.useEffect)(()=>{u.w3z?.requestAssetScanForAiChat(e)},[e]);let[l,o]=(0,a.useState)(void 0);(0,a.useEffect)(()=>{n.has(e)&&(o(u.w3z?.getAssetsForAiChat(e)),s(t=>new Set([...t].filter(t=>t!==e))))},[e,n,s]);let d=(0,x.tR)();if(!l)return null;let c={},m=!1;if((t=t||r.IG).forEach(e=>{switch(e){case"ASSET_ICON":l.icons&&Object.keys(l.icons).length>0&&(c[_.PW.ASSET_ICON]=l.icons,m=!0);break;case"ASSET_ILLUSTRATION":l.illustrations&&Object.keys(l.illustrations).length>0&&(c[_.PW.ASSET_ILLUSTRATION]=l.illustrations,m=!0);break;case"ASSET_IMAGE":l.images&&Object.keys(l.images).length>0&&(c[_.PW.ASSET_IMAGE]=l.images,m=!0);break;case"ASSET_GIF":l.gifs&&Object.keys(l.gifs).length>0&&(c[_.PW.ASSET_GIF]=l.gifs,m=!0)}},[]),!m)return null;let h=c[_.PW.ASSET_ICON],y=c[_.PW.ASSET_GIF],b=c[_.PW.ASSET_IMAGE],C=c[_.PW.ASSET_ILLUSTRATION];return(0,i.jsxs)("div",{className:"x78zum5 xdt5ytf x1qjc9v5 xt0e3qv x16v0e3u xmkeg23 x1y0btm7 x7z60cl x1mxnbhz xyzh45r",children:[h&&(0,i.jsx)(v,{assetType:_.PW.ASSET_ICON,assets:h,mediaByGuid:d,label:(0,f.t)("dev_handoff.assets.icon"),labelPlural:(0,f.t)("dev_handoff.assets.icons")}),y&&(0,i.jsx)(v,{assetType:_.PW.ASSET_GIF,assets:y,mediaByGuid:d,label:(0,f.t)("dev_handoff.assets.gif"),labelPlural:(0,f.t)("dev_handoff.assets.gifs")}),b&&(0,i.jsx)(v,{assetType:_.PW.ASSET_IMAGE,assets:b,mediaByGuid:d,label:(0,f.t)("dev_handoff.assets.image"),labelPlural:(0,f.t)("dev_handoff.assets.images")}),C&&(0,i.jsx)(v,{assetType:_.PW.ASSET_ILLUSTRATION,assets:C,mediaByGuid:d,label:(0,f.t)("dev_handoff.assets.illustration"),labelPlural:(0,f.t)("dev_handoff.assets.illustrations")})]})}class j extends s.Kp{static getType(){return"figma-asset-dialog"}static clone(e){return new j(e.__nodeId,e.__assetTypes,e.__key)}constructor(e,t,n){super(n),this.__nodeId=e,this.__assetTypes=t}getNodeId(){return this.__nodeId}getAssetTypes(){return this.__assetTypes}createDOM(e){let t=document.createElement("div"),n=e?.theme?.figmaAssetDialog||e?.theme?.figmaAssetDialog;return n&&(t.className=n),t}decorate(){let e=this.__assetTypes.split(",");return(0,i.jsx)(C,{nodeId:this.__nodeId,assetTypes:e})}updateDOM(){return!1}static importJSON(e){let{nodeId:t,assetTypes:n}=e;return k({nodeId:t,assetTypes:n})}exportJSON(){return{type:"figma-asset-dialog",nodeId:this.__nodeId,assetTypes:this.__assetTypes,version:1,children:[],direction:null,format:"",indent:0}}}function k({nodeId:e,assetTypes:t}){let n=new j(e,t);return(0,s.pT)(n)}function w(e){return e instanceof j}},532153:(e,t,n)=>{n.d(t,{Y:()=>s,f:()=>a});var i=n(308233);function s({nodeId:e,assetTypes:t}){return`<figma-asset-dialog node-id="${e}" asset-types="${t.join(",")}" />`}let a={dependencies:[i.R],export:(e,t)=>{if(!(0,i.J5)(e))return null;let n=e.getNodeId(),s=e.getAssetTypes();return`<figma-asset-dialog node-id="${n}" asset-types="${s}" />`},importRegExp:/<figma-asset-dialog node-id="([^"]+)" asset-types="([^"]+)" ?\/>/,regExp:/<figma-asset-dialog node-id="([^"]+)" asset-types="([^"]+)" ?\/>$/,replace:(e,t)=>{let[,n,s]=t;if(!n||!s)return;let a=(0,i.Pc)({nodeId:n,assetTypes:s});e.replace(a)},trigger:">",type:"text-match"}},254362:(e,t,n)=>{n.d(t,{a_:()=>N,M_:()=>I,ct:()=>T,Re:()=>S,pr:()=>E,V:()=>w});var i=n(104076),s=n(673349),a=n(795033),r=n(120440),l=n(652539),o=n(192075),d=n(211862),c=n(141524),u=n(344946),p=n(716976),m=n(242069),h=n(684742),f=n(527494),g=n(988083),x=n(24441),_=n(743558);let y={container:{k1xSpc:"x78zum5",kVAM5u:"x7z60cl",kaIpWk:"x9h44rk",kMzoRj:"xmkeg23",ksu8eU:"x1y0btm7",k8WAf4:"x1vvogim",kg3NbH:"xaope02",kLWn49:"x1o2sk6j",kXwgrk:"xdt5ytf",kMwMTN:"x1n0bwc9",$$css:!0}};function v({changes:e,startExpanded:t=!1,maxHeight:n,chatMessagesNodeGuid:s,featureType:a,allowIndividualFileRestore:l=!1}){let[d,c]=(0,p.useState)(t),{defaultTypographyStyle:u}=(0,x.L)(),{restoreFile:g}=(0,_.q)({chatMessagesNodeGuid:s,featureType:a||m.lV.FIGMAKE}),v=l?g:void 0;if(0===e.length)return null;if(1===e.length){let t=e[0];return t?(0,i.jsx)("div",{...r.Ay.props(y.container,u),style:n?{maxHeight:n,overflowY:"auto"}:void 0,children:(0,i.jsx)(b,{change:t,getRestoreCallback:v})}):null}return(0,i.jsxs)("div",{...r.Ay.props(y.container,u),style:n?{maxHeight:n,overflowY:"auto"}:void 0,children:[(0,i.jsxs)(h.E,{className:"x78zum5 x6s0dn4 x167g77z x1ypdohk x87ps6o x1qughib x1n0bwc9",onClick:()=>c(!d),children:[(0,i.jsx)("span",{children:(0,o.t)("figmake.edits.edited_files",{fileCount:e.length})}),(0,i.jsx)("span",{...{0:{className:"xtc4nxu x1bmturs"},1:{className:"xtc4nxu x1bmturs x1iffjtl"}}[!!d<<0],children:(0,i.jsx)(f.a,{})})]}),d&&(0,i.jsx)("div",{className:"x78zum5 xdt5ytf x167g77z x1vvogim xnjsko4",children:e.map((e,t)=>(0,i.jsx)(b,{change:e,getRestoreCallback:v},`${e.path}-${t}`))})]})}function b({change:e,getRestoreCallback:t}){let n;let s=t?.(e.path);return(0,i.jsxs)("div",{className:"x78zum5 x6s0dn4 x167g77z x1qughib xjwf9q1",children:[(0,i.jsx)("span",{className:"x98rzlu xb3r6kr xlyipyv xuxw1ft",title:e.path,children:(n=e.path).split("/").pop()??n}),(0,i.jsxs)("span",{className:"x1jnr06f x78zum5 x6s0dn4",children:[e.addedLines>0&&(0,i.jsx)("span",{className:"xq6u9c4",children:(0,o.t)("figmake.edits.lines_added",{count:e.addedLines})}),e.removedLines>0&&(0,i.jsx)("span",{className:"x172n1ly",children:(0,o.t)("figmake.edits.lines_removed",{count:e.removedLines})}),s&&(0,i.jsx)(h.E,{className:"xfawy5m x12oqio5 xet2fuk x1ypdohk xjbqb8w x12tve8b x1n0bwc9 x1c5oinq xfn42iu xng3xce x1r7ld26 x78zum5 x6s0dn4 xl56j7k xvy4d1p xxk0z11",onClick:s,children:(0,i.jsx)(g.H,{className:"x1wt4b31 x1kky2od xlup9mm"})})]})]})}var C=n(989917),j=n(913434),k=n(114344);function w({message:e,chatMessagesNodeGuid:t,codeVersionNumber:n,featureType:s,trackingContext:a,title:l,layerDisplayName:d,isCurrentVersion:c,chatController:p}){let{defaultTypographyStyle:m}=(0,x.L)(),{codeSnapshotKey:h,blobstoreContentKey:f}=(0,j.Lt)(e)??{},{codeRestoreVersion:g}=(0,C.nm)({codeSnapshotKey:h,codeSnapshotBlobstoreContentKey:f,chatMessagesNodeGuid:t,featureType:s,restoreToVersionTitle:l,chatController:p,...a}),_=(0,i.jsx)(u.F,{type:"code_version",isCurrentVersion:c,codeVersionNumber:n,restoreVersion:g,chatMessagesNodeGuid:t,layerDisplayName:d,versionTitle:l});return(0,i.jsxs)("div",{className:"x78zum5 xdt5ytf xou54vl",children:[(0,i.jsx)("div",{...r.Ay.props(m),children:(0,o.t)("figmake.chat.restoring_a_previous_version")}),_]})}function E({message:e,chatMessagesNodeGuid:t,codeVersionNumber:n,featureType:s,trackingContext:a,title:l,layerDisplayName:d,isCurrentVersion:c,chatController:p}){let{defaultTypographyStyle:m}=(0,x.L)(),h=l&&(0,o.t)("figmake.chat.edited_version",{versionTitle:l}),{codeSnapshotKey:f,blobstoreContentKey:g}=(0,j.Lt)(e)??{},{codeRestoreVersion:_}=(0,C.nm)({chatController:p,codeSnapshotKey:f,codeSnapshotBlobstoreContentKey:g,chatMessagesNodeGuid:t,featureType:s,restoreToVersionTitle:h,...a}),y=(0,i.jsx)(u.F,{type:"code_version",isCurrentVersion:c,codeVersionNumber:n,restoreVersion:_,chatMessagesNodeGuid:t,layerDisplayName:d,versionTitle:h});return(0,i.jsxs)("div",{className:"x78zum5 xdt5ytf xou54vl",children:[(0,i.jsx)("div",{...r.Ay.props(m),children:(0,o.t)("figmake.edits.manual_edit_message")}),(0,i.jsx)(v,{changes:e.changedFiles,startExpanded:!0,chatMessagesNodeGuid:t}),y]})}let T="in-progress-manual-edit";function S({chatMessagesNodeGuid:e,chatController:t,featureType:n,codeFileChanges:l,layerDisplayName:c,codeVersionNumber:p}){let{defaultTypographyStyle:m}=(0,x.L)(),{changedFiles:h,error:f,hasBaseline:g}=l,_=t?.getMessages(),y=(0,a.md)(d.yV);if(f||!g||0===h.length)return null;let b=(_?(0,s.eB)(_):void 0)||y?.name,C=b&&(0,o.t)("figmake.chat.edited_version",{versionTitle:b}),j=async()=>{},k=(0,i.jsx)(u.F,{type:"code_version",isCurrentVersion:!0,codeVersionNumber:p,restoreVersion:j,chatMessagesNodeGuid:e,layerDisplayName:c,versionTitle:C});return(0,i.jsxs)("div",{className:"x78zum5 xdt5ytf xou54vl","data-testid":"system-chat-message-in-progress-manual-edit",children:[(0,i.jsx)("div",{...r.Ay.props(m),children:(0,o.t)("figmake.edits.manual_edit_message")}),(0,i.jsx)(v,{changes:h,startExpanded:!0,chatMessagesNodeGuid:e,featureType:n,allowIndividualFileRestore:!0}),k]})}function I(){return(0,i.jsxs)("div",{className:"x78zum5 xdt5ytf xou54vl","data-testid":"system-chat-message-duplicated-file",children:[(0,i.jsx)("p",{className:"xuzfeq1 x8yk33q x1e00guj x18zpg43 x22v61l",children:(0,o.t)("figmake.duplicated_file_system_message")}),(0,i.jsx)(A,{})]})}function N({message:e}){let{user:t}=(0,c.wW)(e.userId??null),n=t?.handle;if(!e.timestamp)return null;let s=new Date(e.timestamp),a=(0,o.t)("figmake.chat_management.messages.chat_history_cleared_timestamp",{time:s.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),date:s.toLocaleDateString([],{month:"long",day:"numeric",year:"numeric"})});return(0,i.jsx)("div",{className:"x78zum5 xdt5ytf xou54vl","data-testid":"system-chat-message-deleted-chat-history",children:(0,i.jsx)("div",{className:"x1n0bwc9 x1k4tb9n",children:(0,o.t)("figmake.chat_management.messages.chat_history_cleared",{timestamp:a})+(n?(0,o.t)("figmake.chat_management.messages.chat_history_cleared_user",{username:n}):"")})})}function A(){return(0,i.jsx)("div",{className:"x78zum5 xdt5ytf x1cy8zhl x1jnr06f x9h44rk xmkeg23 x1y0btm7 x7z60cl x1y1aw1k xyfqnmn xwib8y2 x163pfp",children:(0,i.jsxs)("div",{className:"x78zum5 x1q0g3np x6s0dn4 x167g77z",children:[(0,i.jsx)("div",{className:"xvy4d1p xxk0z11 x78zum5 xl56j7k x6s0dn4",children:(0,i.jsx)(l.B,{svg:k.A,useOriginalSrcFills_DEPRECATED:!0,svgWidth:"14px",svgHeight:"14px"})}),(0,i.jsx)("p",{className:"xrbesu5 x12cwyba x1l993ej x1ejgcx7 x1aos5ly","data-testid":"system-chat-message-supabase-disconnected-cta",children:(0,o.t)("figmake.supabase.duplicated_file.cta")})]})})}},861598:(e,t,n)=>{n.d(t,{VD:()=>s,lh:()=>a,t4:()=>i});var i=(e=>(e.PENDING="pending",e.SUCCESS="success",e.FAILURE="failure",e))(i||{}),s=(e=>(e.TOOL_CALL_SUCCESS="tool_call_success",e.TOOL_CALL_CANCELLED="tool_call_cancelled",e.TOOL_CALL_DISABLED="tool_call_disabled",e.TOOL_CALL_PENDING="tool_call_pending",e))(s||{}),a=(e=>(e.IDLE="idle",e.LOADING="loading",e.SUCCESS="success",e.FAILED="failed",e.CANCELLED="cancelled",e))(a||{})},234429:(e,t,n)=>{n.d(t,{IO:()=>o,Zi:()=>r,xD:()=>l});var i=n(242069),s=n(266808),a=n(733200);function r(e,t,n){let r=(0,i.ic)(s.K$p.SYSTEM_MESSAGE,e.id,()=>((0,a.vA)(void 0!==s.glU,"Fullscreen must be defined"),s.glU.generateUniqueID()));return r.textContent=(0,i.J6)({type:"restore",codeSnapshot:t,plainText:"",title:n}),r}function l(e,t,n,r){let l=(0,i.ic)(s.K$p.SYSTEM_MESSAGE,e.id,()=>((0,a.vA)(void 0!==s.glU,"Fullscreen must be defined"),s.glU.generateUniqueID()));return l.textContent=(0,i.J6)({type:"manual_edit",changedFiles:t,codeSnapshot:n,plainText:"",title:r}),l}function o(e,t){let n=(0,i.ic)(s.K$p.SYSTEM_MESSAGE,e.id,()=>((0,a.vA)(void 0!==s.glU,"Fullscreen must be defined"),s.glU.generateUniqueID()));return n.textContent=(0,i.J6)({type:"duplicated_file",fileKeyHash:t,plainText:""}),n}},385823:(e,t,n)=>{n.d(t,{c:()=>a,t:()=>s});var i=n(569989);function s(e){return e.startsWith(i.lh)}function a(e){return e.startsWith(i.Jz)}},121363:(e,t,n)=>{n.d(t,{L:()=>o,P:()=>d});var i=n(107027),s=n(795033),a=n(707490),r=n(286247),l=n(816542);function o(){let e=(0,r.lg)(),t=(0,s.md)(a.CJ);if(e)switch(t){case a.pB.EXPERIMENTAL:return l.u;case a.pB.DEFAULT:default:return}}function d(){return i.H.CLAUDE_4_SONNET}},316339:(e,t,n)=>{n.d(t,{u:()=>s});var i=n(542653);function s(e,t,n){let s={rawUserMessage:e,attachments:[]};if(t.length>0&&t.forEach(e=>{s.attachments.push({type:e.type,nodeGuid:e.guid,label:"",imageSize:e.image?.length})}),n){let e=(0,i._J)(n[0].fullFilePath);s.attachments.push({type:"inspectedElement",nodeGuid:e?.guid||"",label:"",inspectedElementSources:n})}return s}},589977:(e,t,n)=>{let i,s;n.d(t,{v:()=>ev});var a=n(130249),r=n(547115),l=n(242069),o=n(614641),d=n(542653),c=n(673349),u=n(569989);function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class m{configure(e){this.callbacks=e.callbacks,this.deltaReducer=e.deltaReducer}async cancel(e="cancelled"){await this.callbacks?.onCancel?.(e),this.abortController.abort()}async abortIfClientCancelled(){this.callbacks?.shouldCancel?.()&&await this.cancel()}async consume(e){let t,n,i;try{n=e.getReader();let s=async e=>{try{null==t&&(t=performance.now(),this.callbacks?.onFirstDelta?.());let n=this.deltaReducer?.(e);n&&void 0!==n&&await this.callbacks?.onDeltaApplied?.(e,n)}catch(e){throw console.warn("[DeltaStreamController] Error in handleDelta:",e),e}};try{for(;;){let e=await Promise.race([n.read(),this.cancelPromise]);if(this.abortController.signal.aborted||this.callbacks?.shouldCancel?.()){i=this.callbacks?.getCancelReason?.(),await n.cancel(),await this.callbacks?.onCancel?.(i??"aborted");return}let{done:t,value:a}=e;if(a&&await s(a),t)break}}catch(e){throw console.error("[DeltaStreamController] Error in consume:",e),e}}catch(e){console.error("[DeltaStreamController] Error in consume method:",e),this.callbacks?.onError?.(e,{}),n&&await n.cancel()}finally{this.callbacks?.onDone?.()}}constructor(){p(this,"abortController",void 0),p(this,"cancelPromise",void 0),p(this,"deltaReducer",void 0),p(this,"callbacks",void 0),this.abortController=new AbortController,this.cancelPromise=new Promise(e=>{this.abortController.signal.addEventListener("abort",()=>{e()},{once:!0})})}}var h=n(570112),f=n(998432),g=n(772197),x=n(951002),_=n(638004),y=n(266808),v=n(170627),b=n(795033),C=n(188220),j=n(733200),k=n(926899),w=n(846033),E=n(520199),T=n(755444),S=n(743072),I=n(550209),N=n(192075),A=n(178623),L=n(20267),M=n(809565),O=n(354114),R=n(968169),P=n(173485),D=n(72189),F=n(211862),z=n(248043),B=n(893393),G=n(925168),U=n(577932),V=n(312071),H=n(533144),K=n(581006),W=n(107799),q=n(786519),X=n(635533),Y=n(68902),Z=n(297174),J=n(872966),Q=n(266230),$=n(51656),ee=n(807471),et=n(157067),en=n(329232),ei=n(287441),es=n(842771),ea=n(886597),er=n(253066),el=n(980852),eo=n(688812),ed=n(812714),ec=n(985416);let eu=(0,ec.Wh)(()=>(0,b.eU)("")),ep=(0,ec.Wh)(()=>(0,b.eU)(""));var em=n(234429),eh=n(913434),ef=n(612691);async function eg({chatMessagesNode:e,user:t,userMessageContent:n,chatFeatureType:i,chatSdkPhase1Enabled:s}){if(s&&i===l.lV.FIGMAKE&&e&&t&&n){let i={id:"optimistic-user-message",type:y.K$p.USER_MESSAGE,userId:t.id,textContent:(0,l.J6)(n),toolCalls:[],toolResults:[],sentAt:Date.now(),sentAt64:Date.now().toString()},s=(0,W.A5)(e.guid);s?(0,W.YZ)({...s,messages:[...s.messages,i]}):(0,W.YZ)({node:e.guid,messages:[i],fileUpdates:[],isTyping:!1}),await new Promise(e=>setTimeout(e,0))}}var ex=n(385823),e_=n(825543);class ey{constructor(e){this.chatMessagesNode=e.chatMessagesNode,this.fileKey=e.fileKey,this.userMessageContent=e.userMessageContent,this.preventInputRestoreOnAbort=e.preventInputRestoreOnAbort,this.setInput=e.setInput,this.instanceNode=e.instanceNode,this.onFinishCallback=e.onFinish,this.featureType=e.featureType,this.chatController=e.chatController,this.inProgressMakeIdentifier=e.inProgressMakeIdentifier,this.currentUserCanHandleResumableMake=e.currentUserCanHandleResumableMake,this.isResumableMake=!!e.inProgressMakeIdentifier,this.userFlow=e.userFlow,this.chatSdkParams=e.chatSdkParams,this.isMcpClientEnabled=e.isMcpClientEnabled,this.persistentEntityId=(0,U.qE)(e.fileKey||"",e.chatMessagesNode?.guid||""),(0,j.vA)(void 0!==y.glU,"Fullscreen must be defined"),this.userMessageId=e.autoFixingUserMessageId||y.glU.generateUniqueID(),this.userFlow.addContext({persistentEntityId:this.persistentEntityId,userMessageId:this.userMessageId}),this.streamController=new m,this.webCallbacks={onSetupComplete:this.webCallbackOnSetupComplete.bind(this),onSystemEditedSession:this.webCallbackOnSystemEditedSession.bind(this),onNodeBuilderError:this.webCallbackOnNodeBuilderError.bind(this),onStreamError:this.webCallbackOnStreamError.bind(this),onDelta:this.webCallbackOnDelta.bind(this),onDone:this.webCallbackOnDone.bind(this)},this.translationFns={getChatCommunityAttributionComment:this.translationFnGetChatCommunityAttributionComment.bind(this)},this.translatedStrings={figmakeChatUnsplashAttributionAttributionComment:(0,N.t)("figmake.chat.unsplash_attribution.attribution_comment"),figmakeChatShadcnAttributionAttributionComment:(0,N.t)("figmake.chat.shadcn_attribution.attribution_comment")},this.cancel={getCancelReason:this.cancelGetCancelReason.bind(this),onCancelCleanup:this.cancelOnCancelCleanup.bind(this)}}cleanupAbortedRequest(){this.chatMessagesNode&&((0,W.wi)(this.chatMessagesNode.guid,{switchTo:"preview"}),this.userMessageContent&&!this.preventInputRestoreOnAbort&&this.setInput(this.userMessageContent.plainText),(0,Q.WH)(),(0,e_.ep)())}async getInProgressMakeStatus(){return(await A.Ay.shared.getResumableMakeStatus({},L.Ay())).status?.requestStatus??null}async cleanUpPotentiallyAbortedResumableMake(){if(this.isResumableMake&&!this.currentUserCanHandleResumableMake&&"COMPLETE"!==await this.getInProgressMakeStatus()){if(this.chatMessagesNode){let e=b.zl.get((0,W.Z3)(this.chatMessagesNode.guid));e?.abort()}this.cleanupAbortedRequest()}}webCallbackOnSetupComplete(e,t){(0,W.YZ)({node:e,messages:t,fileUpdates:[],isTyping:!1})}webCallbackOnSystemEditedSession(e){let t=en.O.get(e.guid);t&&(t.hasSystemEdited=!0)}webCallbackOnNodeBuilderError(e,t){(0,I.$D)(_.e.MAKE,e,t)}webCallbackOnStreamError(e){let{error:t}=e;(0,J.Ho)(t,this.featureType,J.a5.SEND_MESSAGE),(0,U.rW)(t,this.userFlow,this.isResumableMake,{foundry_enabled:(0,ef.z)("make_foundry"),make_chat_sdk:this.chatController.chatSdkPhase1Enabled,mcp_client_enabled:this.isMcpClientEnabled,resumable_make_enabled:e.resumableMakeEnabled}),this.chatMessagesNode&&(S.J.addAction("make_send_message.stream_error",_.e.MAKE,r.$b.ERROR,{error:t.message,cortexClientGeneratedRequestUuid:e.clientLifecycleId,persistentEntityId:e.persistentEntityId,clientLifecycleId:e.clientLifecycleId,featureType:this.featureType.toString()}),t instanceof f.G1||t instanceof g.CortexErrorV2?b.zl.set((0,$.QK)(this.chatMessagesNode.guid),{error:t,cortexClientGeneratedRequestUuid:e.clientLifecycleId}):b.zl.set((0,$.QK)(this.chatMessagesNode.guid),{error:t}),this.cleanupAbortedRequest()),this.fileKey&&b.zl.set(K.m1,K.vO.ERROR)}webCallbackOnDone(e){(0,ef.z)("bake_max_steps_error_handling")&&"tool-calls"===e.finishReason&&!e.toolCalls.some(e=>(0,u.Eb)(e.toolName))&&this.chatMessagesNode&&b.zl.set((0,ee.VC)(this.chatMessagesNode.guid),e.finishReason),(0,U.oL)(e),this.fileKey&&b.zl.set(K.m1,K.vO.AWAITING_COMMIT)}webCallbackOnDelta(e,t,n,i){t.planTitle&&b.zl.set(q.n,t.planTitle),t.artifact&&function(e,t,n,i){let s=t.guid,a=(0,Z.l)(s);if("code"===e.type){let t=e.file;b.zl.set(a,{type:"code",fullFilePath:t})}else if("toolCall"===e.type)b.zl.set(a,e);else if("toolCallDelta"===e.type){let e=i.getCurrentToolCall();e&&b.zl.set(a,{...e})}else"message"===e.type||"summary"===e.type||"visible_message"===e.type?b.zl.set(a,null):"plan"===e.type?(b.zl.set(a,null),e.title&&!(0,ef.z)("bake_title")&&b.zl.set(q.n,e.title)):"editedFiles"===e.type&&b.zl.set(a,{type:"editedFiles",files:e.files})}(e,n,this.featureType,i),(0,W.YZ)({node:n.guid,messages:t.messages,fileUpdates:Object.entries(t.fileUpdates).map(([e,t])=>({name:e,contents:t})),isTyping:!1})}translationFnGetChatCommunityAttributionComment(e){return(0,N.t)("figmake.chat.community_attribution.attribution_comment",{creatorName:e.creatorName,hubFileName:e.hubFileName,hubFileLink:`${(0,T.Ay)().figma_url}${(0,z.X$)(e.hubFileId)}`,licenseName:"CC BY 4.0",licenseLink:"https://creativecommons.org/licenses/by/4.0/"})}cancelGetCancelReason(){let e;let t=b.zl.get(F.ze);if(this.chatMessagesNode){let n=b.zl.get((0,W.Z3)(this.chatMessagesNode.guid));n?.signal.aborted?e="user_cancelled":t!==this.fileKey?e="user_left":this.chatMessagesNode.isAlive||(e="node_missing")}else e="node_missing";return this.userFlow.addContext({reason:e,status:"cancelled"}),e}cancelOnCancelCleanup(){this.chatMessagesNode&&this.userFlow.measureDuration("cancelCleanup",()=>{(0,W.wi)(this.chatMessagesNode.guid,{switchTo:"preview"}),this.userMessageContent&&!this.preventInputRestoreOnAbort&&this.setInput(this.userMessageContent.plainText),(0,Q.WH)(),(0,e_.ep)()})}generateUniqueId(){return(0,j.vA)(void 0!==y.glU,"Fullscreen must be defined"),y.glU.generateUniqueID()}generateRequestUuid(){return(0,T.b5)()?(0,C.g)():void 0}selectFile(e){(0,V.nU)(e)}setCodeChatArtifact(e){this.chatMessagesNode&&b.zl.set((0,Z.l)(this.chatMessagesNode.guid),{type:"code",fullFilePath:e})}clearImportData(){v.l7.ai("code-chat-clear-import-data",()=>{this.chatController.editMessages(e=>(0,c.Li)((0,l.BM)(e)))})}getSources(){if(!this.chatMessagesNode)return{};let e=(0,o.Pq)(this.featureType,this.chatMessagesNode,{multi_file_code_layers:y.z6l?.isMultiFileCodeLayersEnabled(),bake_canvas:(0,ef.z)("bake_canvas")}),t=this.featureType===l.lV.FIGMAKE?(0,d.$d)():(0,d.$d)(e);return t?Object.fromEntries(Object.entries(t).map(([t,n])=>[(0,a.m0)(e,t),n.sourceCode])):{}}async initSupabase(){let e=b.zl.get(F.ze);if(!e)return;let{connectedProject:t,isConnectedNonOwner:n}=await B.M4.fetch((0,ea.TT)({fileKey:e})),i=t?.secrets?.map(e=>e.name),s={projectId:t?.id,publicAnonKey:t?.public_anon_key,makeNamespace:t?.make_namespace,isConnectedNonOwner:!!n,secrets:i};if(s?.projectId&&s?.publicAnonKey&&s?.makeNamespace){var a,r;!function(e,t,n,i){let s=(0,el.getActiveTSSceneGraph)();if(!s.getInternalCanvas())return;let a=(0,d._J)(`/${eo.o3}`),r=(0,d._J)(`/${eo.Or}`),l=(0,d._J)(`/${eo.ww}`);v.Hq.system("create-supabase-starter-files",()=>{if(r)i.checkProjectChanged()&&(r.sourceCode=(0,eo.OP)(e,t));else{let n=s.createNewCodeFile({path:eo.Or,sourceCode:"",entryPoint:null,isEntrypointCodeFile:!1,onError:i.reportErrorToSentry,enableDuplicateCheck:i.enableDuplicateCheck});if(!n)return;let a=s.get(n);if(!a)return;a.sourceCode=(0,eo.OP)(e,t)}if(!a){let t=s.createNewCodeFile({path:eo.o3,sourceCode:"",entryPoint:null,isEntrypointCodeFile:!1,onError:i.reportErrorToSentry,enableDuplicateCheck:i.enableDuplicateCheck});if(!t)return;let a=s.get(t);if(!a)return;a.sourceCode=(0,eo._u)(n,e)}if(!l){let e=s.createNewCodeFile({path:eo.ww,sourceCode:"",entryPoint:null,isEntrypointCodeFile:!1,onError:i.reportErrorToSentry,enableDuplicateCheck:i.enableDuplicateCheck});if(!e)return;let t=s.get(e);if(!t)return;t.sourceCode=(0,eo.mE)(n)}y.glU?.commit(),i.updateProject(e,t)})}(a=s.projectId,r=s.publicAnonKey,s.makeNamespace,{checkProjectChanged:()=>b.zl.get(eu)!==a||b.zl.get(ep)!==r,updateProject:(e,t)=>{b.zl.set(eu,e),b.zl.set(ep,t)},reportErrorToSentry:e=>(0,I.$D)(_.e.MAKE,e),enableDuplicateCheck:(0,ed.kc)().bake_dup_code_files})}return(0,er.r)(),s}async flushAndGetSequenceNumber(){return await (0,P.co)()}get preview(){return b.zl.get(K.mK)}getStreamFn(e,t){return function(e,t){let n;switch(e){case l.lV.FIGMAKE:n=t?A.Ay.shared.retrieveInProgressMake:A.Ay.shared.generateFigMake;break;case l.lV.FIGMAKE_IN_DESIGN:case l.lV.CODE_IN_SITES:case l.lV.AI_ASSISTANT:n=A.Ay.shared.generateLivingDesigns;break;default:(0,x.xb)(e)}return(e,t,i)=>n(e,t,i)}(e,t)}onTitle(e){b.zl.set(q.n,e)}async onBegin(e,t){this.fileKey&&b.zl.set(K.m1,K.vO.IN_PROGRESS);let n="userMessageContent"in e?e.userMessageContent:void 0,i="userMessageContent"in e?e.rawUserChatDetails:void 0,s=e instanceof l.zx,a=t.getMessages(),{user:r,changedFiles:o}=e.context;this.fileKey&&!s&&o&&o.length>0&&await this.createManualEditSystemMessage({user:r,changedFiles:o,chatMessagesNode:this.chatMessagesNode,chatController:this.chatController,featureType:this.featureType,fileKey:this.fileKey});let d=!!(0,ef.z)("bake_m2d")&&(0,ei.Q3)(this.userMessageContent),c=i?(0,l.am)(i):void 0;this.userFlow.addContext({nodeId:this.instanceNode?.guid,featureType:this.featureType.toString(),clientLifecycleId:e.clientLifecycleId,persistentEntityId:this.persistentEntityId,containsRoundtripNode:d,messageLength:c?.inputMessageLength,designAttachmentCount:c?.designAttachmentCount,imageAttachmentCount:c?.imageAttachmentCount,minAttachmentImageSize:c?.minAttachmentImageSize,chatStats:function(e){let t={numMessages:0,numToolCalls:0,numToolResults:0,numUserMessages:0,numAssistantMessages:0,numSystemMessages:0,numToolMessages:0,numActiveUsers:0,chatDaysOld:0},n=e.getMessages();if(n.length<1)return t;let i=new Set;for(let e of n)t.numMessages+=1,t.numToolCalls+=e.toolCalls.length,t.numToolResults+=e.toolResults.length,e.type===y.K$p.USER_MESSAGE?(t.numUserMessages+=1,i.add(e.userId)):e.type===y.K$p.ASSISTANT_MESSAGE?t.numAssistantMessages+=1:e.type===y.K$p.SYSTEM_MESSAGE?t.numSystemMessages+=1:e.type===y.K$p.TOOL_MESSAGE&&(t.numToolMessages+=1);t.numActiveUsers=i.size;let s=n[0];try{let e=Date.now()-parseInt(s.sentAt64);t.chatDaysOld=Math.round(e/864e5)}catch(e){t.chatDaysOld=-1}return t}(this.chatController)}),(0,U.rH)(this.featureType,a.length,this.persistentEntityId,e.clientLifecycleId,this.fileKey,d,this.isResumableMake,c,{foundry_enabled:(0,ef.z)("make_foundry"),make_chat_sdk:this.chatController.chatSdkPhase1Enabled,mcp_client_enabled:this.isMcpClientEnabled,resumable_make_enabled:e.context.featureFlags.resumable_make},n?.origin),(0,j.vA)(void 0!==y.glU,"Fullscreen must be defined"),(0,et.Ic)(),this.instanceNode&&this.userFlow.measureDuration("update_code_snapshot_state",()=>{D.u.updateCodeSnapshotState(this.instanceNode.guid,y.Lxv.LLM_IN_PROGRESS,!0,0,!1)})}async commit(e){let t=!0;if(this.inProgressMakeIdentifier&&this.isResumableMake&&!await this.getInProgressMakeStatus()&&(t=!1),this.enableDuplicateCheck){let n=e.exchangedMessages.find(e=>e.type===y.K$p.USER_MESSAGE);if(n){let e=(0,l.MK)(n.textContent);e.requestUuid&&(0,c.G2)(this.chatController,e.requestUuid,c.cF)&&(t=!1)}}if(t){let{expectedCodeSnapshotKey:t}=(0,h.E)({exchangedMessages:e.exchangedMessages,chatMessagesNode:this.chatMessagesNode,chatController:this.chatController,chatCompressions:e.aiChatCompressions,fileUpdates:e.fileUpdates,fileKey:this.fileKey,featureType:this.featureType,featureFlags:{multi_file_code_layers:y.z6l?.isMultiFileCodeLayersEnabled(),bake_canvas:(0,ef.z)("bake_canvas"),make_skip_preview_refresh_on_no_change:(0,ef.z)("make_skip_preview_refresh_on_no_change"),make_chat_sdk_phase1:this.chatController.chatSdkPhase1Enabled},clientDependencies:this,modelConfigVersion:e.modelConfigVersion,codeLibraryFormat:this.featureType===l.lV.FIGMAKE?(0,d.ft)():void 0});this.fileKey&&b.zl.set(K.m1,K.vO.COMMITTED);let n=this.chatSdkParams;if(n&&!(0,ef.z)("make_chat_sdk_commit_serverside")){let i=this.assignMessageIndices({aiChatMessages:e.exchangedAiChatMessages,chatSdkParams:n});await this.commitToDatabase({aiChatMessagesWithIndices:i,aiChatCompressions:e.aiChatCompressions,expectedCodeSnapshotKey:t,chatSdkParams:n})}}}assignMessageIndices({aiChatMessages:e,chatSdkParams:t}){if(!e)return;let n=this.chatController.getNodeChatMessages();if(!n){this.reportErrorToSentry(Error("assignMessageIndices received aiChatMessages but nodeChatMessages was undefined"),{fileKey:this.fileKey,threadId:t.aiChatThreadId});return}let i={};for(let[e,t]of n.entries())i[(0,l._$)(t)]=e;return e.map(e=>{if(!e.convertedFromScenegraph)return this.reportErrorToSentry(Error("aiChatMessage.convertedFromScenegraph is false; message will not be committed to database"),{fileKey:this.fileKey,threadId:t.aiChatThreadId}),null;if(!e.guid)return this.reportErrorToSentry(Error("guid undefined; message will not be committed to database"),{fileKey:this.fileKey,threadId:t.aiChatThreadId}),null;let n=i[(0,l.ob)(e)];return void 0===n?(this.reportErrorToSentry(Error(`messageIndex not found for guid ${e.guid} and createdAtMs ${e.createdAtMs}; message will not be committed to database`),{fileKey:this.fileKey,threadId:t.aiChatThreadId}),null):{...e,messageIndex:n}}).filter(e=>null!==e)}async commitToDatabase({aiChatMessagesWithIndices:e,aiChatCompressions:t,expectedCodeSnapshotKey:n,chatSdkParams:i}){if(e){let t=e;n&&(t=structuredClone(e).map(e=>("assistant"!==e.role||e.content.push({type:"code-chat-legacy-s3-code-snapshot",codeSnapshotKey:n}),e)));try{await i.commitMessagesToDatabase(t)}catch(e){this.reportErrorToSentry(new E.Tv(`Failed to commit messages to database: ${e}`),{fileKey:this.fileKey,threadId:i.aiChatThreadId});return}}t&&await i.commitCompressions(t),(0,ef.z)("make_chat_sdk_trigger_validations")&&i.triggerValidations().catch(e=>{this.reportErrorToSentry(new E.Tv("Failed to trigger validations"),{fileKey:this.fileKey,threadId:i.aiChatThreadId,error:e instanceof Error?e.message:String(e)})})}async onComplete(e){"success"===e.status&&(this.userFlow.addContext({numFileUpdates:Object.keys(e.fileUpdates).length,status:"success"}),(0,U.No)({featureType:this.featureType,clientLifecycleId:e.clientLifecycleId,persistentEntityId:this.persistentEntityId,fileUpdates:e.fileUpdates}),function(e){if(!window.AudioContext&&!window.webkitAudioContext||!((0,ef.z)("make_ai_play_sound_when_done")&&(0,R.UK)().aiSoundNotificationsEnabled.getCopy()))return;if(function(e){if(!e)return!1;let t=b.zl.get((0,Z.l)(e));if(t&&"toolName"in t&&"string"==typeof t.toolName){if(!(0,ex.t)(t.toolName))return!1;if((0,ef.z)("bake_mcp_auto_run")){let{serverName:e,serverToolName:n}=(0,u.Tr)(t.toolName);if((0,Y.IN)(e,n))return!1}return!0}return!1}(e)){let e=(0,T.ck)("bdd09dc4f2b8b0ed5a25d91b64a8e18314454a99");void 0===s&&(s=new Audio(e)),s.play().catch(e=>{console.error("Could not play tool call sound:",e)});return}let t=(0,T.ck)("f8397f9039d99d6277682f02c7a4155a56bf95fd");void 0===i&&(i=new Audio(t)),i.play().catch(e=>{console.error("Could not play generation complete sound:",e)})}(this.chatMessagesNode?.guid),e.shouldClearConsoleMessages&&(0,es.px)(),G.H.setUserFlag("has_prompted_in_figma_make",!0)),("success"===e.status||"aborted"===e.status)&&(await this.cleanUpPotentiallyAbortedResumableMake(),function(e){if(!(0,ef.z)("bake_byods_extraction_showcase")){(0,W.wi)(e,{switchTo:"preview"});return}let t=(0,W.A5)(e);if(t){let n=t.messages.slice().reverse().find(e=>e.type===y.K$p.USER_MESSAGE);if(n?.textContent){let t=(0,l.MK)(n.textContent),i=t?.inspectedComponent?.filePath,s=t?.inspectedLibrary?.folderPath;if(i){let t=(0,d._J)(i);if(t){(0,W.wi)(e,{switchTo:"code"}),(0,V.nU)(t,!0);return}}else if(s){(0,W.wi)(e,{switchTo:"code"}),b.zl.set(H.ww,s);return}}}(0,W.wi)(e,{switchTo:"preview"})}(this.chatMessagesNode?.guid||""),b.zl.set((0,X.o0)(this.chatMessagesNode?.guid||""),!1)),this.instanceNode&&D.u.markCodeNodesDirty(new Set([this.instanceNode.guid])),this.onFinishCallback?.(),setTimeout(()=>{this.fileKey&&b.zl.set(K.m1,K.vO.IDLE)},0)}async createManualEditSystemMessage(e){let t;let{user:n,changedFiles:i,chatMessagesNode:s,chatController:u,featureType:p,fileKey:m}=e,h=u.getMessages();if(0===h.length)return;let f=(0,c.eB)(h)||b.zl.get(F.yV)?.name,g=y.z6l?.isMultiFileCodeLayersEnabled(),x=(0,ef.z)("bake_canvas"),C=(0,o.Pq)(p,s,{multi_file_code_layers:g,bake_canvas:x}),j=p===l.lV.FIGMAKE?(0,d.$d)():(g||x)&&s.codeFilePath?(0,d.$d)(C):(0,d.$d)(),k={files:{},entrypoint:void 0};Object.entries(j).forEach(([e,t])=>{k.files[(0,a.m0)(C,e)]=t.sourceCode,t.isEntrypointCodeFile&&(k.entrypoint=(0,a.m0)(C,e))});let E=S.J.startUserFlow({name:"make_commit_manual_edit",team:_.e.MAKE,priority:r.bx.P1});try{t=await (0,eh.Oy)({fileKey:m,codeFiles:k,featureType:p})??void 0}catch(e){console.warn("Failed to create code snapshot for manual edit message:",e)}let T=(0,em.xD)(n,i,t,f),I=b.zl.get(M.J)??0;v.Hq.ai("add-manual-edit-system-message",()=>{u.appendMessages([T]),O.Y5.commit()}),await (0,w.j4)({commitContext:"manual_edit",nodeChatMessage:T,chatController:u,fileKey:m,startFileSeqNum:I,userFlow:E}),E.end()}getClientLifecycleId(e,t,n){return(0,U.Pd)(e,t,n)}getCodeLibraryComponents(){return(0,o.f3)({bake_ds_import_l3a:(0,ef.z)("bake_ds_import_l3a")})}trackSystemEditedSession(e){let t=en.O.get(e.guid);t&&(t.hasSystemEdited=!0)}setCodeLastEditedBy(e){b.zl.set((0,X.Nm)(e),"assistant")}async createCodeSnapshot(e){return await (0,eh.Oy)(e)}reportErrorToSentry(e,t){(0,I.$D)(_.e.AI_FOR_PRODUCTION,e,t)}mirrorCommunityAttributionDisplay(){(0,et.gC)()}clearCommunityAttribution(){(0,et.En)()}get enableDuplicateCheck(){return(0,ef.z)("bake_dup_code_files")}}async function ev({userMessageContent:e,clientSideToolResults:t,user:n,chatMessagesNode:i,chatController:s,rawUserChatDetails:a,featureType:o,setInput:d,fileKey:c,autoFixingUserMessageId:u,onFinish:p,canUseSupabase:m,changedFiles:h,model:f,instanceNode:g,requestInitiator:x,mcpPreferences:v,inProgressMakeIdentifier:C,isResumableMakeEnabled:j,preventInputRestoreOnAbort:T,currentUserCanHandleResumableMake:I,isMcpClientEnabled:N}){if(s.isInitialized||console.error("Chat controller is not initialized. If you're seeing this message, please add a check to safely wait for chatController.isInitialized before calling handleSubmitMessage."),!n||!i)throw Error("handleSubmitMessage must take either a user or a chatMessagesNode");await eg({chatMessagesNode:i,user:n,userMessageContent:e,chatFeatureType:o,chatSdkPhase1Enabled:s.chatSdkPhase1Enabled});let A=!!s.chatSdkState?.isOldFile,O=S.J.startUserFlow({name:"make_send_message",team:_.e.MAKE,priority:r.bx.P1,context:{featureType:o.toString(),messageLength:e?.plainText.length,hidden:e?.hidden,modelConfigVersion:e?.modelConfigVersion,requestInitiator:x,model:f,attachmentsCount:a?.attachments?.length,chatSdk:{isOldFile:!!A}}}),R=function(e,t,n,i){let s=t.chatSdkState?.threadId??null,a=t.chatSdkState?.isOldFile,r=(0,l.ls)(e)&&t.chatSdkPhase1Enabled,o=n&&s;if(r&&o){let e=b.zl.get(M.J)??0;i.addContext({aiChatThreadId:s,chatSdkIsOldFile:!!a}),(0,E.nH)("handleSubmitMessage()",{threadId:s,startFileSeqNum:e,isOldFile:a});let t={enabled:r,fileKey:n,threadId:s,userFlow:i};return{aiChatThreadId:s,isOldFile:!!a,logChatSdk:E.nH,uploadContentToBlobstore:(0,k._)(t),commitMessagesToDatabase:(0,w.aF)({...t,startFileSeqNum:e,commitContext:"send_message"}),createPendingMessageParts:(0,w.Z0)(t),commitCompressions:(0,w.FO)({...t,isOldFile:!!a}),triggerValidations:(0,w.Nl)({...t,isOldFile:!!a})}}r&&(0,E.fL)(new E.Tv("handleSubmitMessage called with missing aiChatThreadId or fileKey. Falling back to non-Chat-SDK mode."),"handle_submit_message",{featureType:e.toString(),fileKey:n,threadId:s,isOldFile:a})}(o,s,c,O),P=new ey({chatMessagesNode:i,fileKey:c,userMessageContent:e,preventInputRestoreOnAbort:T??!1,setInput:d,instanceNode:g,onFinish:p,featureType:o,chatController:s,inProgressMakeIdentifier:C,currentUserCanHandleResumableMake:I,userFlow:O,chatSdkParams:R,isMcpClientEnabled:N});i&&b.zl.set((0,W.Z3)(i.guid),P.streamController.abortController);try{let r={user:n,chatMessagesNode:i,chatController:s,featureType:o,fileKey:c,canUseSupabase:m,changedFiles:h,model:f,instanceNode:g||void 0,featureFlags:{multi_file_code_layers:y.z6l?.isMultiFileCodeLayersEnabled(),bake_canvas:(0,ef.z)("bake_canvas"),bake_canvas_server_files_client:(0,ef.z)("bake_canvas_server_files_client"),bake_ds_import_l3a:(0,ef.z)("bake_ds_import_l3a"),bake_smooth_chat_streaming:(0,ef.z)("bake_smooth_chat_streaming"),bake_title:(0,ef.z)("bake_title"),make_chat_sdk_phase1:s.chatSdkPhase1Enabled,make_chat_sdk_commit_serverside:(0,ef.z)("make_chat_sdk_commit_serverside"),make_chat_sdk_last_msg_only:(0,ef.z)("make_chat_sdk_last_msg_only"),bake_dup_code_files:(0,ef.z)("bake_dup_code_files"),make_attach_snapshot:(0,ef.z)("make_attach_snapshot"),make_skip_preview_refresh_on_no_change:(0,ef.z)("make_skip_preview_refresh_on_no_change"),ai_assistant_blobstore:(0,ef.z)("ai_assistant_blobstore"),resumable_make:j,make_chat_sdk_trigger_validations:(0,ef.z)("make_chat_sdk_trigger_validations")},cortexAuth:(0,L.Ay)(),dependencies:P,requestInitiator:x,mcpPreferences:v,inProgressMakeIdentifier:C,getInProgressMakeStatus:C&&P.getInProgressMakeStatus?()=>P.getInProgressMakeStatus():void 0},d=t&&t.length>0?new l.eh(r,t):u?new l.zx(r,e,a,u):new l._X(r,e,a);return await (0,l.Oz)(d)}finally{i&&b.zl.set((0,W.Z3)(i.guid),void 0),O.end()}}},566303:(e,t,n)=>{n.d(t,{D:()=>a});var i=n(390036),s=n(104035);function a(e){let t=e.match(/(http|ftp|https):\/\/([\w_-]+(?:(?:\.[\w_-]+)+))([\w.,@?^=%&:\/~+#-]*[\w@?^=%&\/~+#-])/g);return!!(t&&[...t].findIndex(e=>(function(e){if((0,i.gU)(e)){let t=new URL(e);if((0,s.F4)(t.hostname))return!0}return!1})(e))>-1)}},170604:(e,t,n)=>{n.d(t,{Ey:()=>d,WL:()=>a,c$:()=>r,hi:()=>l,wu:()=>o});var i=n(385823);let s={edit_tool:!0,fast_apply_tool:!0,write_tool:!0,insert_tool:!0,delete_tool:!0,diffTool:!0,rewriteTool:!0,install_package:!0,view_tool:!1,read:!1,supabase_connect:!1,create_supabase_secret:!1,unsplash_tool:!1,file_search:!1,get_guidelines_outline:!1,todo_list_tool:!1,add_todos_tool:!1,changelog_tool:!1,get_guidelines_section:!1,theme_tool:!1,think:!1,zeroToOneTool:!1,docsTool:!1,deprecatedTool:!1,bash:!1,call_mcp_tool:!1,discover_tools:!1,run_mcp_tool:!1};function a(e){return e.some(e=>{if("toolCall"!==e.type)return!1;let t=e.name;return!((0,i.t)(t)||(0,i.c)(t))&&t in s&&s[t]})}function r(e){let t=0,n=-1,i=[];return{codeVersionNumbers:e.map((e,s)=>{if("system"===e.type){if("restore"===e.systemMessageType||"manual_edit"===e.systemMessageType)return n=s,t++,i.push({versionNumber:t,messageIndex:s,title:e.title,message:e,sentAt64:e.sentAt64}),t}else if("assistant"===e.type){let r=e.messages.some(e=>"summary"===e.type),l=a(e.messages);return(r||l)&&(n=s,t++,i.push({versionNumber:t,messageIndex:s,title:e.title,message:e,sentAt64:e.sentAt64})),t}return 0}),currentVersionMessageIndex:n,versions:i}}function l(e,t){return e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()?"Today":e.toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})}function o(e){let t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),i=String(e.getDate()).padStart(2,"0");return`${t}-${n}-${i}`}function d(e,t){return e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()?e.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}):e.toLocaleTimeString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})}},315922:(e,t,n)=>{n.d(t,{_:()=>N});var i=n(104076),s=n(716976),a=n(420680),r=n(322530),l=n(487899),o=n(936612),d=n(913372),c=n(662376),u=n(980852),p=n(795033);n(120440);var m=n(930508),h=n(991535),f=n(849757),g=n(192075),x=n(739710),_=n(460418),y=n(390392),v=n(963433),b=n(588961),C=n(275325),j=n(581006),k=n(454333),w=n(842771);let E="devtools_code_console--tabPanelScrollContainer--BVJaw";function T(){let[e]=(0,w.jT)(),[t]=(0,b.PM)(),n=(0,p.md)(j.Cb),a=(0,s.useMemo)(()=>(e??[]).concat(t.map(e=>{let t=parseInt(e.timestamp);return{type:"error",sender:"system",phase:w.S4.RUNTIME,message:`${C.f.SUPABASE} ${e.event_message}`,timestamp:isNaN(t)?0:t}})),[e,t]),r=(0,s.useMemo)(()=>(function(e){let t=e.sort((e,t)=>e.timestamp-t.timestamp),n=[];for(let e of t){if(0===n.length){n.push({...e,count:1});continue}let t=n[n.length-1];t&&e.type===t.type&&e.message===t.message?t.count=t.count+1:n.push({...e,count:1})}return n})(a.filter(e=>e.message.includes(n))),[a,n]),[l,o]=(0,s.useState)(r),d=(0,s.useMemo)(()=>(0,h.n)(20,e=>{o(e)}),[]);return((0,s.useEffect)(()=>{d(r)},[d,r]),l)?(0,i.jsx)("div",{tabIndex:-1,children:l.map((e,t)=>(0,i.jsxs)(s.Fragment,{children:[0!==t&&(0,i.jsx)(A,{}),(0,i.jsx)(L,{consoleMessage:e})]},t))}):null}function S({value:e,onChange:t}){let n=s.useRef(null);return(0,i.jsxs)("label",{className:"devtools_code_console--filter--Txqal",children:[(0,i.jsx)(o.S,{className:"devtools_code_console--filterIcon--X3LB-"}),(0,i.jsx)("input",{className:"devtools_code_console--filterInput--FzveZ",type:"text",value:e,onChange:e=>t(e.target.value),ref:n,placeholder:(0,g.t)("sites.code_component.console.filter")})]})}function I(){let[e,t]=(0,w.jT)(),[n,s]=(0,p.fp)(j.Cb);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(S,{value:n,onChange:s}),(0,i.jsx)("div",{}),(0,i.jsx)(a.K,{"aria-label":(0,g.t)("sites.code_component.console.clear"),htmlAttributes:{"data-tooltip":(0,g.t)("sites.code_component.console.clear"),"data-tooltip-type":"text"},onClick:()=>{t([]),(0,b.ZO)()},children:(0,i.jsx)(d.J,{})})]})}function N({codeSelectionToRender:e,windowRef:t,showPropertiesTab:n=!0}){let[l,o]=(0,p.fp)(j.Vo),[d,h]=(0,p.fp)(j.rO),[b,C]=(0,s.useState)(void 0);s.useEffect(()=>{let e=()=>{t?.current&&C(.4*t.current.clientHeight)};e();let n=new ResizeObserver(e);return t?.current&&n.observe(t.current),()=>{n.disconnect()}},[t]);let[w,S,N]=r.t.useManagedTabs({properties:n,console:!0},l,e=>o(e)),{figmakeInFullscreen:A}=(0,v.Ve)(),L=n?(0,g.t)("sites.code_component.drawer.hide"):(0,g.t)("sites.code_component.drawer.hide_console_only"),[M,O]=(0,p.fp)(j.YD),R=e?.type==="instance",P=e?.type==="behavior",D=P?e.targetNodeGuid:void 0,F=R?e.allCodeInstanceNodeIds:D?[D]:[],z=P?u.getActiveTSSceneGraph().get(e.codeBehaviorNodeGuid)?.codeComponentId??"":"",B=(0,y.xN)(z,F),{assignmentValuesByDefId:G}=(0,_.an)(F,x.OE.ASSIGNMENT,!0);return(0,i.jsx)(i.Fragment,{children:M&&!A&&(0,i.jsxs)(m.G,{className:"devtools_code_console--panel--yn97N",side:"top",maxSize:b,onDragEnd:e=>{h(e)},minSize:80,defaultSize:d,children:[(0,i.jsxs)("div",{className:"devtools_code_console--headerRow--2O6aI",children:[(0,i.jsx)("div",{className:"devtools_code_console--headerRowTabs--Qo6UD",children:(0,i.jsxs)(r.t.TabStrip,{manager:N,children:[(0,i.jsx)(r.t.Tab,{...w.properties,children:(0,g.tx)("sites.code_component.properties")}),(0,i.jsx)(r.t.Tab,{...w.console,children:(0,g.tx)("sites.code_component.console")})]})}),(0,i.jsxs)("div",{className:"devtools_code_console--headerRowIcons--fc3Yi",children:["console"===N.activeTab&&(0,i.jsx)(I,{}),(0,i.jsx)(a.K,{"aria-label":L,htmlAttributes:{"data-tooltip":L,"data-tooltip-type":"text"},onClick:()=>{O(!1)},children:(0,i.jsx)(c.A,{})})]})]}),(0,i.jsxs)("div",{className:"devtools_code_console--tabPanelContainer--w2g7B",children:[0===Object.keys(B?.typedPropDefs??G).length?(0,i.jsx)(r.t.TabPanel,{...S.properties,height:"fill",children:(0,i.jsx)(k.F,{})}):(0,i.jsx)(r.t.TabPanel,{...S.properties,height:"fill",children:(0,i.jsx)(f.P,{className:E,useBottomPinning:!0,children:(0,i.jsx)(k.D,{guids:F,hideVariableBinding:e?.type==="behavior",recordingKey:"codeWindowPropertiesPanel",entrypoint:"code-editor",windowRef:t,behaviorPropAssignmentHelpers:B})})}),(0,i.jsx)(r.t.TabPanel,{...S.console,height:"fill",children:(0,i.jsx)(f.P,{className:E,useBottomPinning:!0,children:(0,i.jsx)(T,{})})})]})]})})}function A(){return(0,i.jsx)("div",{className:"xjm9jq1 x2i9t41 xrxpjvj x176lpz5"})}function L({consoleMessage:e}){let t=e.message,n="error"===e.type,s="warn"===e.type;n?t=`\u274C ${t}`:s&&(t=`\u26A0\uFE0F ${t}`);let a=e.count>1;return(0,i.jsxs)("div",{...{0:{className:"xwjs1nl x1k6wstc x1diqk0a xtd9kr2 x1hx0egp x1vvkbs x1yn0g08 x126k92a x78zum5 x1cy8zhl x1nfngrj x77yl0c xm5cgt7"},2:{className:"xwjs1nl x1k6wstc x1diqk0a x1hx0egp x1vvkbs x1yn0g08 x126k92a x78zum5 x1cy8zhl x1nfngrj x77yl0c xm5cgt7 x172n1ly"},1:{className:"xwjs1nl x1k6wstc x1diqk0a x1hx0egp x1vvkbs x1yn0g08 x126k92a x78zum5 x1cy8zhl x1nfngrj x77yl0c xm5cgt7 x12fzf0q"},3:{className:"xwjs1nl x1k6wstc x1diqk0a x1hx0egp x1vvkbs x1yn0g08 x126k92a x78zum5 x1cy8zhl x1nfngrj x77yl0c xm5cgt7 x12fzf0q"}}[!!n<<1|!!s<<0],"data-testid":"console-message",children:[a&&(0,i.jsx)(l.F,{...{0:{className:"x19y5rnk x176lpz5 x1n0bwc9"},2:{className:"x19y5rnk x3yuajn x172n1ly"},1:{className:"x19y5rnk x1mt81i5 x12fzf0q"},3:{className:"x19y5rnk x1mt81i5 x12fzf0q"}}[!!n<<1|!!s<<0],children:(0,i.jsx)("span",{className:"xuxw1ft xlyipyv x1w7y96w x1ti5iz4",children:e.count})}),(0,i.jsx)("span",{children:t})]})}},946408:(e,t,n)=>{n.d(t,{m:()=>iT});var i=n(104076),s=n(716976),a=n(419822),r=n(980852),l=n(120440),o=n(725837),d=n(249586),c=n(755270),u=n(343807),p=n(250700),m=n(542653),h=n(951002),f=n(812714),g=n(795033),x=n(883765),_=n(211862),y=n(948515),v=n(581006),b=n(635533),C=n(492130),j=n(533144),k=n(703375),w=n(651189),E=n(842771),T=n(127082),S=n(48104),I=n(383926);function N({isFullscreen:e,codeSelectionToRender:t}){let n=(0,g.md)(j.p_),i=(0,g.md)(j.l6),a=(0,g.md)(j.Xs),r=(0,g.md)(j.xJ),l=(0,g.md)(j.UL),o=(0,g.md)(j.iK),d=t.codeInstanceNodeGuid,c=t?.type==="behavior"?t.targetNodeGuid:void 0;return(0,s.useMemo)(()=>({id:d,size:e?i:n,breakpoint:e?r:a,clipContents:e?!!o:!!l,behaviorTargetId:c}),[e,i,n,r,a,o,l,d,c])}var A=n(667693),L=n(638004),M=n(266808),O=n(550209),R=n(39034),P=n(269535);async function D({instanceSwapPropertyGuids:e,nodeId:t,codeBehaviorTargetNodeId:n,perfTracker:i}){let s=Object.values(e).concat(t?[t]:[],n?[n]:[]);i.record("preview_website_bundle_start");let{bundle:a,assetInstructions:r}=await (0,P.LE)(s,{skipCodeFilesystem:!n,skipInstanceUpdate:!0});i.record("preview_website_bundle_stop"),i.record("asset_generation_start");let l=await (0,R.Ct)(r);return a.files={...a.files,...l},i.record("asset_generation_stop"),a}var F=n(165749),z=n(659390),B=n(697360),G=n(135308);class U{constructor(e,t,n,i){this.sitesPreview=null,this.readyIframe=null,this.isPreviewDirty=!0,this.instanceSwapPropertyGuids={},this.designToCodeGenerating=!0,this.chatMessageInProgress=!1,this.iframeElement=null,this.shouldRenderWhenIframeReady=!1,this.previewHistory=new F.A,this.requiresBuild=!1,this.requiresConsoleClear=!1,this.dirtyTimeout=void 0,this.codeBundle=null,this.hasTriggeredRecovery=!1,this.productType=e,this.setIframeKey=i,this.perfTracker=t,this.previewUpdateTracker=n,this.sitePreviewIframeManager=new S.fj({productType:e,previewSurfaceForLogging:"component_preview"})}mountIframe(e){this.iframeElement!==e&&(this.sitesPreview&&this.unmount(),this.iframeElement=e,this.sitesPreview=this.sitePreviewIframeManager.createSitesPreview({history:this.previewHistory,skipSetPreviewedNode:!0,options:{skipPreviewUpdateListener:!0,generateFullAssets:!0,withBaseStyles:this.withBaseStyles,usingSandbox:!1,labs:{runtimeDebugTools:!1}}}),this.sitePreviewIframeManager.attachHandlers({onIframeReady:()=>{this.readyIframe=e,this.onReadyIframe?.(e),((0,m.ft)()>=1&&(0,f.kc)().make_foundry||this.shouldRenderWhenIframeReady)&&(this.shouldRenderWhenIframeReady=!1,this.render())},onBuildError:e=>{this.onError?.(e,E.S4.BUILD)},onRuntimeError:e=>{this.onError?.(e,E.S4.RUNTIME)},onHMRBeforeUpdate:()=>{(0,E.px)()},onHMRAfterUpdate:()=>{this.onUpdate?.()},onConsoleLog:(e,t,n)=>this.onConsoleLog?.(e,t,n),onInspectElementEvent:e=>{this.sitesPreview?.directManipulationEditor.processEvent(e,this.codeBundle??null)},onPointAndEditInspectorEvent:B.rW,onImportModuleStart:()=>{this.perfTracker.record("import_module_start")},onImportModuleEnd:()=>{this.perfTracker.record("import_module_stop")},onIframeRecoveryNeeded:(e,t)=>{if((0,f.kc)().sts_iframe_recovery){if(this.hasTriggeredRecovery){(0,f.kc)().internal_only_debug_tools&&console.warn(`[Sites Preview] iframe ${e} occurred but recovery already attempted`);return}(0,O.$D)(L.e.SITES_WEB_RUNTIME,t??Error(`iframe recovery triggered due to ${e}`),{extra:{errorType:e}}),this.hasTriggeredRecovery=!0,this.previewUpdateTracker.triggerReload("error-recovery-triggered-reload"),this.setIframeKey(e=>e+1)}}}),this.onSitesPreview?.(this.sitesPreview),this.sitePreviewIframeManager.mountIframe(e,{useReactDev:!0}))}unmount(){this.sitePreviewIframeManager.reset(),this.readyIframe=null,this.onReadyIframe?.(null),this.sitesPreview=null,this.onSitesPreview?.(null)}dispose(){this.dirtyTimeout&&(clearTimeout(this.dirtyTimeout),this.dirtyTimeout=void 0),this.onSitesPreview=void 0,this.onReadyIframe=void 0,this.onError=void 0,this.onUpdate=void 0,this.onConsoleLog=void 0,this.onConsoleClear=void 0,this.onBuildStart=void 0,this.onBuildResult=void 0,this.onRenderComplete=void 0,this.onPreviewDirty=void 0,this.unmount()}async build(){try{this.onBuildStart?.(),this.perfTracker.record("code_bundle_start");let e=this.getNode(),t=(0,E.gz)({node:e,tailwind:!0,jsxDev:this.jsxDev??!1,shadcn:this.shadcn??!1,noWrapper:this.noWrapper??!1,bundleFlags:{attachJSXSource:!!(0,f.kc)().bake_m2d_roundtrip,pointAndEdit:"make"===this.sitePreviewIframeManager.productType&&!!(0,f.kc)().bake_point_and_edit}}),n=await t.finally(()=>this.perfTracker.record("code_bundle_stop"));this.codeBundle=n,this.codeBehaviorTargetNodeId&&await this.validateCodeBehaviorDataForCodeBundle(),this.referencedWebsiteBundle=await D({instanceSwapPropertyGuids:this.instanceSwapPropertyGuids,nodeId:this.nodeId,codeBehaviorTargetNodeId:this.codeBehaviorTargetNodeId,perfTracker:this.perfTracker});let i=M.z6l?.getCodeLibrarySizeMetadata();return this.perfTracker.setBuildMetadata({isBuildSuccessful:!0,bundleJsLength:n?.esm?.length,bundleCssLength:n?.css?.length,...i??{}}),this.onConsoleClear?.(),n&&this.onBuildResult?.(n),!0}catch(t){this.onConsoleClear?.(),this.onError?.(t,E.S4.BUILD),this.previewUpdateTracker.handleBuildError(t instanceof Error?t:Error(String(t))),this.isPreviewDirty&&(this.isPreviewDirty=!1,this.onPreviewDirty?.(this.isPreviewDirty));let e=M.z6l?.getCodeLibrarySizeMetadata();return this.perfTracker.setBuildMetadata({isBuildSuccessful:!1,errorMessage:t.toString?.(),...e??{}}),!1}}async render(){let e=this.codeBundle;if(!this.readyIframe||!this.sitesPreview)return"not_ready";if(!e||!this.referencedWebsiteBundle)return"invalid_build";let t=e.esm,n=e.css;if(!t||!this.codeExportName)return"invalid_build";this.isPreviewDirty&&(this.isPreviewDirty=!1,this.onPreviewDirty?.(this.isPreviewDirty)),this.perfTracker.record("render_start");try{let i=await this.sitesPreview?.renderComponent({nodeId:this.nodeId,entrypoint:{type:"local",code:t},codeBuildId:e.codeBuildId,codeBehaviorTargetNodeId:this.codeBehaviorTargetNodeId,codeExportName:this.codeExportName,props:this.props??{},styles:n,withBaseStyles:this.withBaseStyles,instanceSwapPropertyGuids:this.instanceSwapPropertyGuids,referencedWebsiteBundle:this.referencedWebsiteBundle,activeBreakpoint:this.activeBreakpoint,clipContents:this.clipContents,allowScaling:this.allowScaling,scaleLinearly:this.scaleLinearly,width:this.width,height:this.height});this.previewUpdateTracker.completeRender(i),i.success?this.onRenderComplete?.({type:y.m.SUCCESS,timedOut:i.timedOut||!1}):(this.onError?.(i.error,E.S4.RUNTIME),this.onRenderComplete?.({type:y.m.FAILED,timedOut:!1,phase:i.phase}))}catch(t){let e=t instanceof Error?t:Error(String(t));this.previewUpdateTracker.completeRender({success:!1,error:e,phase:"render"}),this.onError?.(e,E.S4.RUNTIME),this.onRenderComplete?.({type:y.m.FAILED,timedOut:!1,phase:"render"})}return this.perfTracker.record("render_stop"),"rendered"}forceRefresh(){this.iframeElement=null,this.requiresBuild=!0}updateOptions(e){let t=new Set(this.imagePropAssetHashes),n=e.imagePropAssetHashes?.every(e=>t.has(e));this.requiresBuild=this.requiresBuild||this.buildNumber!==e.buildNumber||this.nodeId!==e.nodeId||!(0,A.c2)(this.instanceSwapPropertyGuids,e.instanceSwapPropertyGuids)||!n||void 0!==this.codeBehaviorTargetNodeId&&!(0,A.c2)(this.props,e.props),this.requiresConsoleClear=this.nodeId!==e.nodeId,this.requiresBuild&&!this.isPreviewDirty&&(this.isPreviewDirty=!0,this.onPreviewDirty?.(this.isPreviewDirty)),this.sitesPreview&&e.onSitesPreview&&!this.onSitesPreview&&e.onSitesPreview(this.sitesPreview),this.onSitesPreview=e.onSitesPreview,this.onReadyIframe=e.onReadyIframe,this.onPreviewDirty=e.onPreviewDirty,this.onError=e.onError,this.onUpdate=e.onUpdate,this.onConsoleLog=e.onConsoleLog,this.onConsoleClear=e.onConsoleClear,this.onBuildStart=e.onBuildStart,this.onBuildResult=e.onBuildResult,this.onRenderComplete=e.onRenderComplete;let i=e=>({buildNumber:e.buildNumber,nodeId:e.nodeId,codeBehaviorTargetNodeId:e.codeBehaviorTargetNodeId,codeExportName:e.codeExportName,props:e.props,instanceSwapPropertyGuids:e.instanceSwapPropertyGuids,imagePropAssetHashes:e.imagePropAssetHashes,activeBreakpoint:e.activeBreakpoint,clipContents:e.clipContents,withBaseStyles:e.withBaseStyles,jsxDev:e.jsxDev,shadcn:e.shadcn,noWrapper:e.noWrapper,allowScaling:e.allowScaling,scaleLinearly:e.scaleLinearly,width:e.width,height:e.height,designToCodeGenerating:e.designToCodeGenerating,chatMessageInProgress:e.chatMessageInProgress});JSON.stringify(i(this))!==JSON.stringify(i(e))&&(this.buildNumber=e.buildNumber,this.nodeId=e.nodeId,this.codeBehaviorTargetNodeId=e.codeBehaviorTargetNodeId,this.codeExportName=e.codeExportName,this.props=e.props,this.instanceSwapPropertyGuids=e.instanceSwapPropertyGuids,this.imagePropAssetHashes=e.imagePropAssetHashes,this.activeBreakpoint=e.activeBreakpoint,this.clipContents=e.clipContents,this.withBaseStyles=e.withBaseStyles,this.jsxDev=e.jsxDev,this.shadcn=e.shadcn,this.noWrapper=e.noWrapper,this.allowScaling=e.allowScaling,this.scaleLinearly=e.scaleLinearly,this.width=e.width,this.height=e.height,this.designToCodeGenerating=e.designToCodeGenerating,this.chatMessageInProgress=e.chatMessageInProgress,this.requiresConsoleClear&&this.onConsoleClear?.(),this.dirtyTimeout&&(clearTimeout(this.dirtyTimeout),this.dirtyTimeout=void 0),this.chatMessageInProgress&&this.previewUpdateTracker.cancelCurrentUpdate(),!this.requiresBuild||this.designToCodeGenerating||this.chatMessageInProgress?this.render():(this.previewUpdateTracker.bundleChanged({isMakeEmpty:(0,z.A)((0,p.N)())}),this.dirtyTimeout=setTimeout(()=>{this.dirtyTimeout=void 0,this.requiresBuild=!1,this.build().then(e=>e?this.readyIframe?this.render():(this.shouldRenderWhenIframeReady=!0,"not_ready"):"invalid_build").then(()=>{this.perfTracker.trackFigmentEvent()})},1e3)))}getNode(){if(!this.nodeId)throw Error("Node ID is not set");let e=(0,r.getActiveTSSceneGraph)().get(this.nodeId);if(!e||!e.isAlive)throw Error("Node no longer exists in the scene");return e}async validateCodeBehaviorDataForCodeBundle(){if(this.sitesPreview&&this.codeBundle?.esm){let{exportedCodeComponents:e}=await this.sitesPreview.analyzeCodeFile({code:this.codeBundle.esm,codeBuildId:this.codeBundle.codeBuildId});for(let t of e)t.hasInteractionDataSymbol&&(0,G.K)(t.codeBehaviorData)}}}var V=n(208265),H=n.n(V);let K=5*6e4;class W{constructor({fileKey:e,surface:t,codeLibraryFormat:n}){this.fileKey=null,this.firstUpdate=!0,this.currentUpdate=null,this.nextTriggeredUpdateReason=null,this.fileKey=e,this.surface=t,this.codeLibraryFormat=n}cancelCurrentUpdate(){this.resetCurrentUpdate()}triggerReload(e){this.nextTriggeredUpdateReason=e}bundleChanged({isMakeEmpty:e}){if(this.currentUpdate)return;let t=this.nextTriggeredUpdateReason;this.nextTriggeredUpdateReason=null,this.currentUpdate={updateType:this.firstUpdate?"initial-live":t||"bundle-change-triggered-rerender",startedAt:new Date,isMakeEmpty:e,triggeredUpdateTimeoutId:setTimeout(()=>{this.trackMetricFailure("triggered-update-timeout"),this.resetCurrentUpdate()},K)},this.firstUpdate=!1}handleBuildError(e){this.currentUpdate&&this.flushCurrentUpdate({success:!1,hitRenderTimeout:!1,failedStep:"build",errorMessage:e.message},{completedAt:new Date})}completeRender(e){if(this.currentUpdate){if(e.success)this.flushCurrentUpdate({success:!0,hitRenderTimeout:e.timedOut??!1,failedStep:void 0},{completedAt:new Date});else switch(e.phase){case"import":this.flushCurrentUpdate({success:!1,hitRenderTimeout:!1,failedStep:"build",errorMessage:e.error.message},{completedAt:new Date});break;case"render":this.flushCurrentUpdate({success:!1,hitRenderTimeout:!1,failedStep:"render",errorMessage:e.error.message},{completedAt:new Date});break;default:(0,h.S9)(e.phase,null,"Unknown iframe render result phase"),this.flushCurrentUpdate({success:!1,hitRenderTimeout:!1,failedStep:"unknown"},{completedAt:new Date})}}}flushCurrentUpdate(e,{completedAt:t}){if(!this.currentUpdate)return;if(!this.currentUpdate.updateType){this.trackMetricFailure("missing-update-type"),this.resetCurrentUpdate();return}let n=t.getTime()-this.currentUpdate.startedAt.getTime(),i=(()=>{switch(this.currentUpdate.updateType){case"initial-cached":return"initial-cached";case"initial-live":return"initial-live";case"hmr-triggered-update":return"hmr-update";case"hmr-triggered-reload":case"user-triggered-reload":case"user-error-triggered-reload":case"error-recovery-triggered-reload":case"bundle-change-triggered-rerender":case"initial-transition-to-live":return"reload";default:return(0,h.S9)(this.currentUpdate.updateType,"reload","Unknown update type")}})();x.az.trackDefinedMetric("foundry.preview_update",{...e,updateType:this.currentUpdate.updateType,isMakeEmpty:this.currentUpdate.isMakeEmpty,fileKey:this.fileKey??void 0,surface:this.surface,engine:"esbuild",codeLibraryFormat:this.codeLibraryFormat.toString()}),x.az.trackDefinedMetric("foundry.preview_update_latency",{...H()(e,["success","hitRenderTimeout"]),updateType:i,isMakeEmpty:this.currentUpdate.isMakeEmpty,fileKey:this.fileKey??void 0,surface:this.surface,engine:"esbuild",codeLibraryFormat:this.codeLibraryFormat.toString(),durationMs:n??0}),this.resetCurrentUpdate()}trackMetricFailure(e){x.az.trackDefinedEvent("foundry.preview_update_tracking_failure",{fileKey:this.fileKey??void 0,surface:this.surface,reason:e,engine:"esbuild",codeLibraryFormat:this.codeLibraryFormat.toString()})}resetCurrentUpdate(){this.currentUpdate?.triggeredUpdateTimeoutId&&clearTimeout(this.currentUpdate.triggeredUpdateTimeoutId),this.currentUpdate=null}}var q=n(890373),X=n(192075),Y=n(986430),Z=n(754245),J=n(444713),Q=n(983685),$=n(237420),ee=n(265149),et=n(58212),en=n(168544),ei=n(835307),es=n(322023),ea=n(396326),er=n(459033),el=n(293422),eo=n(325570),ed=n(863058),ec=n(492005),eu=n(98358),ep=n(550881),em=n(809828),eh=n(553065),ef=n(349311),eg=n(950241),ex=n(492737),e_=n(965815),ey=n(862567);function ev({children:e,menuRef:t}){let n=(0,ex.U1)(t);return(0,i.jsx)("div",{"data-is-figmake":"true",className:ey.xE,children:(0,i.jsx)(e_.W1,{menuRef:n,darkModePreferred:!0,editorTheme:"seascape",children:e})})}let eb=s.createContext(null);function eC(){let e=s.useContext(eb);if(!e)throw Error("useToolbarContext must be used within a ToolbarProvider");return e}function ej({children:e,...t}){return(0,i.jsx)(eb.Provider,{value:t,children:e})}var ek=n(766441),ew=n(17933),eE=n(761500);function eT({target:e,children:t}){let{directManipulationEditor:n}=eC(),[a,r]=(0,Q.XH)(n),{getContainerProps:l,getTriggerProps:o}=ew.fP({type:"menu",isOpen:a,onOpenChange:r,softDismiss:!0,placement:"bottom",middleware:[(0,ek.cY)({mainAxis:16}),(0,ek.UU)({padding:16}),(0,ek.BN)()]}),d=s.cloneElement(e,{...o()});return(0,i.jsxs)("div",{children:[(0,i.jsx)(eE.R,{children:d}),(0,i.jsx)(ew.mc,{...l(),children:t})]})}let eS={scrubbableInputIconWrapper:{kfzvcC:"x47corl",$$css:!0}},eI=["border-radius","border-top-left-radius","border-top-right-radius","border-bottom-left-radius","border-bottom-right-radius","border-start-start-radius","border-start-end-radius","border-end-start-radius","border-end-end-radius"];function eN(){let{directManipulationEditor:e}=eC(),[t]=(0,Q.XH)(e);return(0,i.jsx)(eT,{target:(0,i.jsx)(em.ar,{"aria-label":(0,X.t)("figmake.toolbar.corner_radius"),tooltip:(0,X.t)("figmake.toolbar.corner_radius"),tooltipType:ef.Ib.TEXT,showCaret:!0,isActive:t,children:(0,i.jsx)(eo.a,{})}),children:(0,i.jsx)(eA,{})})}function eA(){let{classNameEditingController:e,directManipulationEditor:t}=eC(),n=(0,$.wA)(),a=(0,g.md)(t.selectedElementComputedStylesWithLocalEdits),r=parseInt(a["border-top-left-radius"]??"0",10),o=parseInt(a["border-top-right-radius"]??"0",10),d=parseInt(a["border-bottom-left-radius"]??"0",10),c=parseInt(a["border-bottom-right-radius"]??"0",10),u=s.useMemo(()=>({"top-left":r,"top-right":o,"bottom-left":d,"bottom-right":c}),[r,o,d,c]),p=(0,Q.zV)(t,eI),m=s.useCallback(()=>{e.resetClassNamesForPropertiesAndCommitToCode(eI,"border-radius")},[e]),h=u["top-left"]===u["top-right"]&&u["top-left"]===u["bottom-left"]&&u["top-left"]===u["bottom-right"],f=h?u["top-left"]:eh.oV,[x,_]=s.useState(!h),y=s.useMemo(()=>(0,i.jsx)(em.ar,{"aria-label":(0,X.t)("figmake.toolbar.corner_radius.individual_corner_radius"),tooltip:(0,X.t)("figmake.toolbar.corner_radius.individual_corner_radius"),tooltipType:ef.Ib.TEXT,isActive:x,onClick:()=>_(e=>!e),children:(0,i.jsx)(ed.Q,{...l.Ay.props(eS.scrubbableInputIconWrapper)})}),[x]),v=s.useCallback((t,n)=>{let i=function(e){let t=e["top-left"]===e["top-right"],n=e["bottom-left"]===e["bottom-right"],i=e["top-left"]===e["bottom-left"],s=e["top-right"]===e["bottom-right"];if(e["top-left"]===e["top-right"]&&e["top-left"]===e["bottom-left"]&&e["top-left"]===e["bottom-right"]){let t=e["top-left"],n=`${t}px`;return[{className:`rounded-[${t}px]`,cssRules:[{property:"border-radius",propertiesExpandedFromShorthand:["border-top-left-radius","border-top-right-radius","border-bottom-left-radius","border-bottom-right-radius"],value:n,computedStylesValue:n}]}]}return t&&n?["top","bottom"].map(t=>{let n=e[`${t}-left`],i=`${n}px`,s=t[0];return{className:`rounded-${s}-[${n}px]`,cssRules:[{property:`border-${t}-left-radius`,propertiesExpandedFromShorthand:[],value:i,computedStylesValue:i},{property:`border-${t}-right-radius`,propertiesExpandedFromShorthand:[],value:i,computedStylesValue:i}]}}):i&&s?["left","right"].map(t=>{let n=e[`top-${t}`],i=`${n}px`,s=t[0];return{className:`rounded-${s}-[${n}px]`,cssRules:[{property:`border-top-${t}-radius`,propertiesExpandedFromShorthand:[],value:i,computedStylesValue:i},{property:`border-bottom-${t}-radius`,propertiesExpandedFromShorthand:[],value:i,computedStylesValue:i}]}}):Object.entries(e).map(([e,t])=>{let n=e.split("-").map(e=>e[0]).join(""),i=`${t}px`;return{className:`rounded-${n}-[${t}px]`,cssRules:[{property:`border-${e}-radius`,propertiesExpandedFromShorthand:[],value:i,computedStylesValue:i}]}})}(t);e.addClassesToInspectedElements(i,n,"border-radius")},[e]),b=s.useCallback((e,t)=>{v({...u,...e},t)},[u,v]),C=s.useMemo(()=>(0,i.jsx)(el.$n,{variant:"secondary",disabled:!p,onClick:m,children:(0,X.t)("figmake.toolbar.reset")}),[p,m]);return(0,i.jsx)(ev,{children:(0,i.jsx)("div",{className:"x78zum5 xdt5ytf xc7ga6q xy13l1i x167g77z x9f619 x1dz1jew",children:(0,i.jsx)("div",{className:"x78zum5 xdt5ytf x167g77z",children:x?(0,i.jsxs)("div",{className:"xrvj5dj x167g77z x6s0dn4 x619ttb xh8yej3 xm8sf7i",children:[(0,i.jsx)(eg.gq,{value:u["top-left"],dispatch:n,onValueChange:(e,t)=>{b({"top-left":e},t)},smallNudgeAmount:1,bigNudgeAmount:10,"data-tooltip-type":ef.Ib.TEXT,"data-tooltip":(0,X.t)("figmake.toolbar.corner_radius.top_left"),children:(0,i.jsx)(eo.a,{...l.Ay.props(eS.scrubbableInputIconWrapper)})}),(0,i.jsx)(eg.gq,{value:u["top-right"],dispatch:n,onValueChange:(e,t)=>{b({"top-right":e},t)},smallNudgeAmount:1,bigNudgeAmount:10,"data-tooltip-type":ef.Ib.TEXT,"data-tooltip":(0,X.t)("figmake.toolbar.corner_radius.top_right"),children:(0,i.jsx)(ec.$,{...l.Ay.props(eS.scrubbableInputIconWrapper)})}),y,C,(0,i.jsx)(eg.gq,{value:u["bottom-left"],dispatch:n,onValueChange:(e,t)=>{b({"bottom-left":e},t)},smallNudgeAmount:1,bigNudgeAmount:10,"data-tooltip-type":ef.Ib.TEXT,"data-tooltip":(0,X.t)("figmake.toolbar.corner_radius.bottom_left"),children:(0,i.jsx)(eu.w,{...l.Ay.props(eS.scrubbableInputIconWrapper)})}),(0,i.jsx)(eg.gq,{value:u["bottom-right"],dispatch:n,onValueChange:(e,t)=>{b({"bottom-right":e},t)},smallNudgeAmount:1,bigNudgeAmount:10,"data-tooltip-type":ef.Ib.TEXT,"data-tooltip":(0,X.t)("figmake.toolbar.corner_radius.bottom_right"),children:(0,i.jsx)(ep.t,{...l.Ay.props(eS.scrubbableInputIconWrapper)})})]}):(0,i.jsxs)("div",{className:"xrvj5dj x167g77z x6s0dn4 x619ttb xh8yej3 x1yv05lk",children:[(0,i.jsx)(eg.gq,{bigNudgeAmount:10,"data-tooltip":(0,X.t)("figmake.toolbar.corner_radius"),"data-tooltip-type":ef.Ib.TEXT,dispatch:n,onValueChange:(e,t)=>{b({"top-left":e,"top-right":e,"bottom-left":e,"bottom-right":e},t)},smallNudgeAmount:1,value:f,children:(0,i.jsx)(ed.Q,{...l.Ay.props(eS.scrubbableInputIconWrapper)})}),y,C]})})})})}var eL=n(287211),eM=n(600032),eO=n(180989),eR=n(968169),eP=n(176836),eD=n(863995),eF=n(596628),ez=n(639497);function eB(e){let{classNameEditingController:t,directManipulationEditor:n}=eC(),a=(0,g.md)(n.selectedElementComputedStylesWithLocalEdits),[r]=(0,Q.XH)(n),l=a[e.property],o=s.useMemo(()=>{let t;if(l&&!t)try{let e=(0,eM.Ay)(l).rgba();t={type:"SOLID",color:{r:e[0]/255,g:e[1]/255,b:e[2]/255,a:e[3]},opacity:e[3]}}catch(t){x.az.trackDefinedEvent("figmake.color_control_parse_error",{color:l,property:e.property,error:t instanceof Error?t.message:String(t)})}return t},[e.property,l]),d=s.useCallback((n,i=eD.zk.YES)=>{let s="bg-";"color"===e.property?s="text-":"border-color"===e.property&&(s="border-");let a=Math.round(255*n.r),r=Math.round(255*n.g),l=Math.round(255*n.b),o=1===n.a?`rgb(${a}, ${r}, ${l})`:`rgba(${a}, ${r}, ${l}, ${n.a})`,d=`${s}[${o.replace(/ /g,"")}]`;t.addClassesToInspectedElements([{className:d,cssRules:[{property:e.property,propertiesExpandedFromShorthand:[],value:o,computedStylesValue:o}]}],i,e.property)},[t,e.property]),c=function(e){switch(e){case"color":return(0,X.t)("figmake.toolbar.font_color");case"background-color":return(0,X.t)("figmake.toolbar.background_color");case"border-color":return(0,X.t)("figmake.toolbar.border_color");default:(0,h.xb)(e)}}(e.property);return(0,i.jsx)(eT,{target:(0,i.jsx)(em.ar,{"aria-label":c,tooltip:c,tooltipType:ef.Ib.TEXT,showCaret:!0,isActive:r,children:(0,i.jsx)(eO.A,{paint:o})}),children:(0,i.jsx)(eG,{onColorChange:d,paint:o})})}function eG({paint:e,onColorChange:t}){return(0,i.jsx)(ev,{children:(0,i.jsx)(eV,{paint:e,onChange:t})})}let eU={type:"SOLID",color:{r:0,g:0,b:0,a:1},opacity:1,blendMode:"NORMAL"};function eV({paint:e,onChange:t}){let n=e?(0,eh.gl)(e)?eU:e:eU,a=(0,eP.Ou)(n),r=(0,eR.Ku)(),{currentTool:l,dropdownShown:o}=(0,eL.R)(e=>({currentTool:e.mirror.appModel.currentTool,dropdownShown:e.dropdownShown})),d=(0,$.wA)(),c=s.useRef(null);return a?(0,i.jsx)("div",{className:ez.n1,ref:c,children:(0,i.jsx)(eF.S7,{canAcceptStyles:!1,canAcceptVariables:!1,color:a.color,colorFormat:r,containerRef:c,currentTool:l,dispatch:d,dropdownShown:o,dropperDisabled:!0,onColorChange:t,theme:"dark"})}):null}var eH=n(254786),eK=n(390579),eW=n(813499),eq=n(170627),eX=n(653899),eY=n(850701),eZ=n(778320),eJ=n(477833),eQ=n(772523),e$=n(746005),e0=n(55416),e1=n(386958),e2=n(858559),e3=n(478125),e5=n(684742);let e4=s.forwardRef(function({children:e,iconSuffix:t,...n},s){return(0,i.jsx)(e5.E,{ref:s,...n,...{0:{className:"xxk0z11 x19y5rnk x16qho6y xv2f06h xfn42iu xng3xce x1r7ld26 x8rdmch xctkrei"},2:{className:"xxk0z11 x19y5rnk xu5wzci xfn42iu xng3xce x1r7ld26 x8rdmch xctkrei"},1:{className:"xxk0z11 x19y5rnk x16qho6y xv2f06h xfn42iu xng3xce x1r7ld26 x8rdmch"},3:{className:"xxk0z11 x19y5rnk xu5wzci xfn42iu xng3xce x1r7ld26 x8rdmch"}}[!!n["aria-expanded"]<<1|!!t<<0],children:(0,i.jsxs)("div",{className:"xz16r55 x78zum5 x6s0dn4",children:[e,t]})})});var e6=n(466465),e7=n(175495),e8=n(773494);let e9="rev-font-family-picker";function te(){let{container:e,classNameEditingController:t,directManipulationEditor:n,componentPreview:a}=eC(),r=(0,g.md)(n.selectedElementComputedStylesWithLocalEdits),[l,d]=(0,Q.XH)(n),c=s.createRef(),u=(0,$.d4)(e=>e.fonts),p=s.useMemo(()=>(0,e0.pn)(u),[u]),m=(0,$.wA)(),h=(0,e$.Xo)(),f="sans-serif",x=r["font-family"],_=x?(0,e6.m$)(x,f):f,y=Object.keys(u).some(e=>e.toLocaleLowerCase()===_?.toLocaleLowerCase())?_:"sans-serif",v=s.useCallback((t,n)=>{if(c.current){let{x:i,y:s}=(0,e1.VZ)(c.current,n),a=e.getBoundingClientRect();i<a.left?i=a.left:i+n>a.left+e.clientWidth&&(i=a.left+e.clientWidth-n),m(eY.u1({id:t,initialX:i,initialY:s+16}))}},[e,m,c]),b=s.useCallback(()=>{m(eY.XE())},[m]),C=s.useCallback(()=>{d(!l),l?b():v(e9,300)},[b,l,v,d]);(0,eX.h)(()=>{h&&h.id===e9&&b()}),(0,s.useEffect)(()=>{(!h||h.id!==e9)&&l&&d(!1)},[l,h,d]);let j=s.useRef(null);(0,e8.Y)(b,{closeOnEsc:!0,ignore:e=>!!(j.current&&j.current.contains(e))});let k=s.useRef(null),w=s.useCallback(async(e,n,i=eD.zk.YES)=>{let s=(0,e6.DY)(e,u);if(s){let n;if(s.fontSource===eW.jXp.GOOGLE){let e=`${e7.FF}/${s.fontId}`;n={family:s.fontFamily,style:s.styleName,italic:s.style?.italic??!1,source:"url",url:e}}else{let e=o.D.getState(),t=new Blob([await (0,eZ.M1)({source:s.fontSource,id:s.fontId,postscriptName:s.style.postscript,fileKey:e.openFile?.key,teamId:e.currentTeamId,orgId:e.currentUserOrgId})],{type:"font/woff2"});n={family:s.fontFamily,style:s.styleName,italic:s.style?.italic??!1,source:"blob",blob:t}}a.sendMessage("injectFontLoadingCSS",n),t.addClassesToInspectedElements([{className:`font-[${e.replace(/ /g,"_")}]`,cssRules:[{property:"font-family",propertiesExpandedFromShorthand:[],value:e,computedStylesValue:e}]}],i,"font-family"),(0,eQ.dZ)(i)&&eq.l7.user("direct-manipulation",()=>{(0,e6.HL)(s,k)})}},[t,a,u]),E=(0,e3.UG)();return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(eE.R,{children:(0,i.jsx)(e4,{"aria-label":(0,X.t)("figmake.toolbar.font_family"),iconSuffix:(0,i.jsx)(eK.O,{}),onClick:C,ref:c,children:(0,i.jsx)("div",{className:"x1f4nttd xuxw1ft xb3r6kr xlyipyv x1dmp6jm",children:y})})}),(0,i.jsx)("div",{ref:j,className:"x1f4nttd x11yfylt",children:(0,i.jsx)(e2.Cn,{currentFont:y,dispatch:m,dropdown:null,fonts:u,googleFontPreviews:E,onFontChange:w,pickerId:e9,pickerShown:h,recordingKey:e9,restrictedFontSet:eJ.Qr.GOOGLE_FONTS,selectedNodeIds:[],versionsForStyles:p})})]})}var tt=n(945437),tn=n(816565),ti=n(52532),ts=n(298056),ta=n(915242);let tr={kKwaWg:"x1e87kdn",$$css:!0},tl={imagePreviewWrapper:{kVAEAm:"x1n2onr6",kzqmXN:"x1oysuqx",kZKoxP:"xhjk10j",k1xSpc:"x78zum5",kaIpWk:"x1sxf85j",kMzoRj:"xmkeg23",ksu8eU:"x1y0btm7",kVAM5u:"x7z60cl",kjj79g:"xl56j7k",kGNEyG:"x6s0dn4",kogj98:"x1hlb6i2",kSiTet:"x197sbye",$$css:!0},imagePreviewWrapperWithBackground:e=>[tr,{"--x-backgroundImage":`url('${e}')`}]};function to(){let{imageSwapEnabled:e,directManipulationEditor:t}=eC(),n=(0,g.md)(t.selectedElementInfoAtom),[a]=(0,Q.XH)(t),[r,l]=s.useState(),o=r??n?.thumbnailSrc??n?.imgSrc,d=e?{}:{"--color-icon":q.Tj.iconDisabled};return(0,i.jsx)(eT,{target:(0,i.jsx)(em.ar,{"aria-label":(0,X.t)("figmake.toolbar.image"),tooltip:(0,X.t)("figmake.toolbar.image"),tooltipType:ef.Ib.TEXT,showCaret:!0,caretStyle:d,isActive:a,disabled:!e,children:(0,i.jsx)("div",{className:"xvy4d1p x78zum5 xl56j7k x6s0dn4 xy3p2pi x9f619 xb3r6kr x18xcxx1 xmkeg23 x1y0btm7 x1co876m",children:o?(0,i.jsx)(tn.oW,{src:o,alt:(0,X.t)("figmake.toolbar.image"),...{0:{className:"xh8yej3 xl1xv1r x1y5e3q9"},1:{className:"xh8yej3 xl1xv1r x1y5e3q9 xifi7vn x1ks1olk"}}[!e<<0]}):(0,i.jsx)(tt.T,{...{0:{},1:{className:"xge78cn"}}[!e<<0]})})}),children:(0,i.jsx)(td,{currentImage:o,setCurrentImage:l})})}function td({currentImage:e,setCurrentImage:t}){let{imageEditingController:n,directManipulationEditor:a}=eC(),r=s.useRef(null),o=(0,s.useCallback)(async e=>{if(e.image){let i=await n.updateImage(e,a.bundledSourceCode,a.codeFileNodeIdsWithRecentlyAddedImageAssetImports,"upload");if(i.success)for(let n of(t(e.image),i.modifiedCodeFileNodeIds))a.codeFileNodeIdsWithRecentlyAddedImageAssetImports.add(n)}},[n,t,a]),d=s.useCallback(async e=>{let t=e.target.files?.[0];t&&(await (0,ta.z)(t,o),r.current&&(r.current.value=""))},[o]);return(0,i.jsxs)(ev,{children:[(0,i.jsxs)("div",{...l.Ay.props(tl.imagePreviewWrapper,tl.imagePreviewWrapperWithBackground((0,ti.A)())),children:[(0,i.jsx)("input",{type:"file",ref:r,accept:ts.xp.join(","),onChange:d,className:"x1s85apg"}),(0,i.jsx)(tn.oW,{src:e,alt:(0,X.t)("figmake.toolbar.upload_alt"),className:"x193iq5w xmz0i5r x19kjcj4 x1tbiz1a x1xsqp64 xiy17q3"})]}),(0,i.jsx)("div",{className:"x10l6tqk x13vifvy xu96u03 x3m8u43 x1ey2m1c xur7f20 x1hc1fzr x78zum5 xl56j7k x1o2pa38 x6s0dn4",children:(0,i.jsx)(el.$n,{variant:"primary",onClick:()=>{r.current?.click()},type:"submit",children:(0,X.t)("figmake.toolbar.upload")})})]})}var tc=n(276800),tu=n(224781),tp=n(336518),tm=n(523588),th=n(80484);let tf={disabledIcon:{"--color-icon":"xz8z4lq",$$css:!0},selectedIcon:{"--color-icon":"x1aue78i",kWkggS:"xcr9a89",kaIpWk:"x4pvk5x",kGVxlE:"xx9uh04",$$css:!0}};function tg({value:e,setValue:t,disabled:n}){let s=(0,i.jsx)("div",{...l.Ay.props(n?tf.disabledIcon:"style"===e?tf.selectedIcon:tf.disabledIcon),children:(0,i.jsx)(tm.J,{})}),a=(0,i.jsx)("div",{...l.Ay.props(n?tf.disabledIcon:"prompt"===e?tf.selectedIcon:tf.disabledIcon),children:(0,i.jsx)(th.K,{})});return(0,i.jsx)(eE.R,{children:(0,i.jsxs)(tu.bL,{value:e,onChange:n?tc.lQ:t,legend:(0,i.jsx)(tp.q,{children:(0,X.t)("figmake.toolbar.toggle_style")}),children:[(0,i.jsx)(tu.c$,{value:"style",icon:s,"aria-label":n?(0,X.t)("figmake.toolbar.classnameEditingDisabled"):(0,X.t)("figmake.toolbar.toggle_style")}),(0,i.jsx)(tu.c$,{value:"prompt",icon:a,"aria-label":n?(0,X.t)("figmake.toolbar.classnameEditingDisabled"):(0,X.t)("figmake.toolbar.toggle_prompt")})]})})}var tx=n(241019);function t_(){let{directManipulationEditor:e}=eC(),t=(0,g.md)(e.editingSnippetAtom,{deferToFrame:!0}).snippet,n=(0,s.useCallback)(()=>{e.goToSource()},[e]);return(0,i.jsx)(eE.R,{children:(0,i.jsx)(em.ar,{"aria-label":(0,X.t)("figmake.toolbar.goToSource"),tooltip:(0,X.t)("figmake.toolbar.goToSource"),tooltipType:ef.Ib.TEXT,onClick:n,disabled:!t,children:(0,i.jsx)(tx.I,{})})})}var ty=n(14069),tv=n(94906),tb=n(796448),tC=n(18398),tj=n(829781),tk=n(952973),tw=n(568308),tE=n(680291);function tT(){let{directManipulationEditor:e}=eC(),[t]=(0,Q.XH)(e);return(0,i.jsx)(eT,{target:(0,i.jsx)(em.ar,{"aria-label":(0,X.t)("figmake.toolbar.spacing"),tooltip:(0,X.t)("figmake.toolbar.spacing"),tooltipType:ef.Ib.TEXT,showCaret:!0,isActive:t,children:(0,i.jsx)(ty.R,{})}),children:(0,i.jsx)(tN,{})})}let tS=["padding-top","padding-right","padding-bottom","padding-left","padding-inline-start","padding-inline-end","padding-block-start","padding-block-end"],tI=["margin-top","margin-right","margin-bottom","margin-left","margin-inline-start","margin-inline-end","margin-block-start","margin-block-end"];function tN(){let{classNameEditingController:e,directManipulationEditor:t}=eC(),n=(0,g.md)(t.selectedElementComputedStylesWithLocalEdits),a=parseInt(n["padding-left"]??"0",10),r=parseInt(n["padding-right"]??"0",10),o=parseInt(n["padding-top"]??"0",10),d=parseInt(n["padding-bottom"]??"0",10),c=parseInt(n["margin-left"]??"0",10),u=parseInt(n["margin-right"]??"0",10),p=parseInt(n["margin-top"]??"0",10),m=parseInt(n["margin-bottom"]??"0",10),h={left:a,right:r,top:o,bottom:d},f={left:c,right:u,top:p,bottom:m},x=h.left===h.right,_=h.top===h.bottom,y=x?h.left:eh.oV,v=_?h.top:eh.oV,b=f.left===f.right,C=f.top===f.bottom,j=b?f.left:eh.oV,k=C?f.top:eh.oV,[w,E]=s.useState(!x||!_),[T,S]=s.useState(!b||!C),I=(0,Q.zV)(t,tS),N=s.useCallback(()=>{e.resetClassNamesForPropertiesAndCommitToCode(tS,"padding")},[e]),A=(0,Q.zV)(t,tI),L=s.useCallback(()=>{e.resetClassNamesForPropertiesAndCommitToCode(tI,"margin")},[e]),M=s.useMemo(()=>(0,i.jsx)(em.ar,{"aria-label":(0,X.t)("figmake.toolbar.padding.individual_paddings"),tooltip:(0,X.t)("figmake.toolbar.padding.individual_paddings"),tooltipType:ef.Ib.TEXT,isActive:w,onClick:()=>E(e=>!e),children:(0,i.jsx)(tv.s,{})}),[w]),O=s.useMemo(()=>(0,i.jsx)(em.ar,{"aria-label":(0,X.t)("figmake.toolbar.margin.individual_margins"),tooltip:(0,X.t)("figmake.toolbar.margin.individual_margins"),tooltipType:ef.Ib.TEXT,isActive:T,onClick:()=>S(e=>!e),children:(0,i.jsx)(tv.s,{})}),[T]),R=s.useCallback((t,n,i)=>{let s=function(e,t){let n=t.left===t.right,i=t.top===t.bottom,s=n&&i&&t.left===t.top,a="padding"===e?"p":"m";if(s){let n=t.left,i=`${n}px`;return[{className:`${a}-[${n}px]`,cssRules:[{property:e,propertiesExpandedFromShorthand:[`${e}-top`,`${e}-right`,`${e}-bottom`,`${e}-left`],value:i,computedStylesValue:i}]}]}return n&&i?["x","y"].map(n=>{let i="x"===n,s=i?t.left:t.top,r=`${s}px`;return{className:`${a}${n}-[${s}px]`,cssRules:[{property:i?`${e}-left`:`${e}-top`,propertiesExpandedFromShorthand:[],value:r,computedStylesValue:r},{property:i?`${e}-right`:`${e}-bottom`,propertiesExpandedFromShorthand:[],value:r,computedStylesValue:r}]}}):["top","right","bottom","left"].map(n=>{let i=t[n],s=`${i}px`,r=n[0];return{className:`${a}${r}-[${i}px]`,cssRules:[{property:`${e}-${n}`,propertiesExpandedFromShorthand:[],value:s,computedStylesValue:s}]}})}(t,n);e.addClassesToInspectedElements(s,i,t)},[e]),P=s.useCallback((e,t,n,i)=>{R(n,{...e,...t},i)},[R]),D=(0,$.wA)();return(0,i.jsx)(ev,{children:(0,i.jsxs)("div",{className:"x78zum5 xdt5ytf xc7ga6q xy13l1i x167g77z xafpxmx x9f619",children:[(0,i.jsxs)("div",{className:"x78zum5 xdt5ytf x167g77z",children:[(0,i.jsxs)("div",{className:"x1l7klhg xh8yej3 x1f4nttd x78zum5 x1qughib x6s0dn4",children:[(0,X.t)("figmake.toolbar.padding"),(0,i.jsx)(el.$n,{variant:"secondary",disabled:!I,onClick:N,children:(0,X.t)("figmake.toolbar.reset")})]}),w?(0,i.jsxs)("div",{className:"xrvj5dj xbyi07e x167g77z x6s0dn4 x619ttb xh8yej3",children:[(0,i.jsx)(eg.gq,{value:h.left,dispatch:D,onValueChange:(e,t)=>{P(h,{left:e},"padding",t)},smallNudgeAmount:1,bigNudgeAmount:10,"data-tooltip-type":ef.Ib.TEXT,"data-tooltip":(0,X.t)("figmake.toolbar.padding.left"),children:(0,i.jsx)(tj.R,{...l.Ay.props(eS.scrubbableInputIconWrapper)})}),(0,i.jsx)(eg.gq,{value:h.top,dispatch:D,onValueChange:(e,t)=>{P(h,{top:e},"padding",t)},smallNudgeAmount:1,bigNudgeAmount:10,"data-tooltip-type":ef.Ib.TEXT,"data-tooltip":(0,X.t)("figmake.toolbar.padding.top"),children:(0,i.jsx)(tk.z,{...l.Ay.props(eS.scrubbableInputIconWrapper)})}),M,(0,i.jsx)(eg.gq,{value:h.right,dispatch:D,onValueChange:(e,t)=>{P(h,{right:e},"padding",t)},smallNudgeAmount:1,bigNudgeAmount:10,"data-tooltip-type":ef.Ib.TEXT,"data-tooltip":(0,X.t)("figmake.toolbar.padding.right"),children:(0,i.jsx)(tw.M,{...l.Ay.props(eS.scrubbableInputIconWrapper)})}),(0,i.jsx)(eg.gq,{value:h.bottom,dispatch:D,onValueChange:(e,t)=>{P(h,{bottom:e},"padding",t)},smallNudgeAmount:1,bigNudgeAmount:10,"data-tooltip-type":ef.Ib.TEXT,"data-tooltip":(0,X.t)("figmake.toolbar.padding.bottom"),children:(0,i.jsx)(tE.v,{...l.Ay.props(eS.scrubbableInputIconWrapper)})})]}):(0,i.jsxs)("div",{className:"xrvj5dj xbyi07e x167g77z x6s0dn4 x619ttb xh8yej3",children:[(0,i.jsx)(eg.gq,{value:y,dispatch:D,onValueChange:(e,t)=>{P(h,{left:e,right:e},"padding",t)},smallNudgeAmount:1,bigNudgeAmount:10,"data-tooltip-type":ef.Ib.TEXT,"data-tooltip":(0,X.t)("figmake.toolbar.padding.horizontal"),children:(0,i.jsx)(tb.y,{...l.Ay.props(eS.scrubbableInputIconWrapper)})}),(0,i.jsx)(eg.gq,{value:v,dispatch:D,onValueChange:(e,t)=>{P(h,{top:e,bottom:e},"padding",t)},smallNudgeAmount:1,bigNudgeAmount:10,"data-tooltip-type":ef.Ib.TEXT,"data-tooltip":(0,X.t)("figmake.toolbar.padding.vertical"),children:(0,i.jsx)(tC.K,{...l.Ay.props(eS.scrubbableInputIconWrapper)})}),M]})]}),(0,i.jsxs)("div",{className:"x78zum5 xdt5ytf x167g77z",children:[(0,i.jsxs)("div",{className:"x1l7klhg xh8yej3 x1f4nttd x78zum5 x1qughib x6s0dn4",children:[(0,X.t)("figmake.toolbar.margin"),(0,i.jsx)(el.$n,{variant:"secondary",disabled:!A,onClick:L,children:(0,X.t)("figmake.toolbar.reset")})]}),T?(0,i.jsxs)("div",{className:"xrvj5dj xbyi07e x167g77z x6s0dn4 x619ttb xh8yej3",children:[(0,i.jsx)(eg.gq,{value:f.left,dispatch:D,onValueChange:(e,t)=>{P(f,{left:e},"margin",t)},smallNudgeAmount:1,bigNudgeAmount:10,"data-tooltip-type":ef.Ib.TEXT,"data-tooltip":(0,X.t)("figmake.toolbar.margin.left"),children:(0,i.jsx)(tj.R,{...l.Ay.props(eS.scrubbableInputIconWrapper)})}),(0,i.jsx)(eg.gq,{value:f.top,dispatch:D,onValueChange:(e,t)=>{P(f,{top:e},"margin",t)},smallNudgeAmount:1,bigNudgeAmount:10,"data-tooltip-type":ef.Ib.TEXT,"data-tooltip":(0,X.t)("figmake.toolbar.margin.top"),children:(0,i.jsx)(tk.z,{...l.Ay.props(eS.scrubbableInputIconWrapper)})}),O,(0,i.jsx)(eg.gq,{value:f.right,dispatch:D,onValueChange:(e,t)=>{P(f,{right:e},"margin",t)},smallNudgeAmount:1,bigNudgeAmount:10,"data-tooltip-type":ef.Ib.TEXT,"data-tooltip":(0,X.t)("figmake.toolbar.margin.right"),children:(0,i.jsx)(tw.M,{...l.Ay.props(eS.scrubbableInputIconWrapper)})}),(0,i.jsx)(eg.gq,{value:f.bottom,dispatch:D,onValueChange:(e,t)=>{P(f,{bottom:e},"margin",t)},smallNudgeAmount:1,bigNudgeAmount:10,"data-tooltip-type":ef.Ib.TEXT,"data-tooltip":(0,X.t)("figmake.toolbar.margin.bottom"),children:(0,i.jsx)(tE.v,{...l.Ay.props(eS.scrubbableInputIconWrapper)})})]}):(0,i.jsxs)("div",{className:"xrvj5dj xbyi07e x167g77z x6s0dn4 x619ttb xh8yej3",children:[(0,i.jsx)(eg.gq,{value:j,dispatch:D,onValueChange:(e,t)=>{P(f,{left:e,right:e},"margin",t)},smallNudgeAmount:1,bigNudgeAmount:10,"data-tooltip-type":ef.Ib.TEXT,"data-tooltip":(0,X.t)("figmake.toolbar.margin.horizontal"),children:(0,i.jsx)(tb.y,{...l.Ay.props(eS.scrubbableInputIconWrapper)})}),(0,i.jsx)(eg.gq,{value:k,dispatch:D,onValueChange:(e,t)=>{P(f,{top:e,bottom:e},"margin",t)},smallNudgeAmount:1,bigNudgeAmount:10,"data-tooltip-type":ef.Ib.TEXT,"data-tooltip":(0,X.t)("figmake.toolbar.margin.vertical"),children:(0,i.jsx)(tC.K,{...l.Ay.props(eS.scrubbableInputIconWrapper)})}),O]})]})]})})}var tA=n(725407),tL=n(199051),tM=n(406622),tO=n(697417),tR=n(255140);function tP(){let{classNameEditingController:e,directManipulationEditor:t}=eC(),n=(0,g.md)(t.selectedElementComputedStylesWithLocalEdits),[a]=(0,Q.XH)(t),r=s.useMemo(()=>({LEFT:{label:(0,X.t)("fullscreen.type_panel.align_left"),icon:()=>(0,i.jsx)(tA.h,{})},CENTER:{label:(0,X.t)("fullscreen.type_panel.align_center"),icon:()=>(0,i.jsx)(tL.N,{})},RIGHT:{label:(0,X.t)("fullscreen.type_panel.align_right"),icon:()=>(0,i.jsx)(tM.K,{})},JUSTIFIED:{label:(0,X.t)("inspect_panel.properties.justify"),icon:()=>(0,i.jsx)(tO.h,{})}}),[]),l=n["text-align"],o="LEFT";switch(l){case"left":default:o="LEFT";break;case"center":o="CENTER";break;case"right":o="RIGHT";break;case"justified":o="JUSTIFIED"}let d=s.useCallback(t=>{let n=t.toLowerCase();e.addClassesToInspectedElements([{className:function(){switch(t){case"LEFT":return"text-left";case"CENTER":return"text-center";case"RIGHT":return"text-right";case"JUSTIFIED":return"text-justify"}}(),cssRules:[{property:"text-align",propertiesExpandedFromShorthand:[],value:n,computedStylesValue:n}]}],eD.zk.YES,"text-align")},[e]);return(0,i.jsx)(eT,{target:(0,i.jsx)(em.ar,{"aria-label":(0,X.t)("whiteboard.inline_menu.text_alignment"),tooltip:(0,X.t)("whiteboard.inline_menu.text_alignment"),tooltipType:ef.Ib.TEXT,showCaret:!0,isActive:a,children:o?(0,eh.gl)(o)?(0,i.jsx)(tA.h,{}):r[o].icon():(0,i.jsx)(tA.h,{})}),children:(0,i.jsx)(tD,{horizontalAlignment:o,horizontalAlignmentOptions:r,updateHorizontalAlignment:d})})}function tD({horizontalAlignment:e,horizontalAlignmentOptions:t,updateHorizontalAlignment:n}){return(0,i.jsx)(ev,{children:(0,i.jsx)(tR.W,{maxColumns:4,children:(0,i.jsx)(tF,{alignment:e,alignmentOptions:t,onAlignmentChanged:e=>n(e,eD.zk.YES)})})})}function tF({alignment:e,alignmentOptions:t,onAlignmentChanged:n}){let a=s.useMemo(()=>Object.entries(t),[t]);return(0,i.jsx)(i.Fragment,{children:a.map(([t,{label:s,icon:a}])=>(0,i.jsx)(em.ar,{"aria-label":s,isActive:(0,eh.hS)(e)&&e===t,onClick:()=>n(t),children:a()},t))})}var tz=n(183465),tB=n(892942),tG=n(40076);function tU(){let{classNameEditingController:e,directManipulationEditor:t}=eC(),n=(0,g.md)(t.selectedElementComputedStylesWithLocalEdits)["font-weight"],a=!!(n&&("bold"===n||parseInt(n,10)>600)),r=s.useCallback(()=>{let t=!a;e.addClassesToInspectedElements([{className:t?"font-bold":"font-normal",cssRules:[{property:"font-weight",propertiesExpandedFromShorthand:[],value:t?"bold":"normal",computedStylesValue:t?"700":"400"}]}],eD.zk.YES,"font-weight")},[e,a]);return(0,i.jsx)(eE.R,{children:(0,i.jsx)(em.ar,{"aria-label":(0,X.t)("cooper.inline_menu.bold"),tooltip:"toggle-bold",tooltipType:ef.Ib.LOOKUP,isActive:a,onClick:r,children:(0,i.jsx)(tz.j,{})})})}function tV(){let{classNameEditingController:e,directManipulationEditor:t}=eC(),n="italic"===(0,g.md)(t.selectedElementComputedStylesWithLocalEdits)["font-style"],a=s.useCallback(()=>{let t=!n,i=t?"italic":"normal";e.addClassesToInspectedElements([{className:t?"italic":"not-italic",cssRules:[{property:"font-style",propertiesExpandedFromShorthand:[],value:i,computedStylesValue:i}]}],eD.zk.YES,"font-style")},[e,n]);return(0,i.jsx)(eE.R,{children:(0,i.jsx)(em.ar,{"aria-label":(0,X.t)("cooper.inline_menu.italic"),tooltip:"text-toggle-italic",tooltipType:ef.Ib.LOOKUP,isActive:n,onClick:a,children:(0,i.jsx)(tB.s,{})})})}function tH(){let{classNameEditingController:e,directManipulationEditor:t}=eC(),n=(0,g.md)(t.selectedElementComputedStylesWithLocalEdits)["text-decoration"],a=n?.indexOf("underline")!==-1,r=s.useCallback(()=>{let t=!a,n=t?"underline":"none";e.addClassesToInspectedElements([{className:t?"underline":"no-underline",cssRules:[{property:"text-decoration-line",propertiesExpandedFromShorthand:[],value:n,computedStylesValue:n}]}],eD.zk.YES,"text-decoration")},[e,a]);return(0,i.jsx)(eE.R,{children:(0,i.jsx)(em.ar,{"aria-label":(0,X.t)("type_settings.decoration.underline"),tooltip:"text-toggle-underline",tooltipType:ef.Ib.LOOKUP,isActive:a,onClick:r,children:(0,i.jsx)(tG.W,{})})})}var tK=n(92652),tW=n(536358),tq=n(697157);function tX({size:e,onSizeChanged:t}){let n=s.useRef((0,eh.gl)(e)?null:new t$(e));s.useEffect(()=>{(0,eh.gl)(e)?n.current=null:(n.current||(n.current=new t$(e)),n.current.onCurrentValueUpdated(e))},[e,n]);let a=s.useCallback(()=>{n.current&&t(n.current.prevValue())},[t,n]),r=s.useCallback(()=>{n.current&&t(n.current.nextValue())},[t,n]),l="cooperInlineMenuFontSize";return(0,i.jsxs)("div",{className:"text_size_nudge_input--nudgeInputContainer--KyT8p","data-testid":"cooper-inline-text-size-control",children:[(0,i.jsx)(e5.E,{className:"text_size_nudge_input--decrementButton--vmC4E text_size_nudge_input--nudgeButtonBase--ctjk3",onClick:a,disabled:(0,eh.gl)(e)||e<=tQ,"aria-label":(0,X.t)("cooper.inline_menu.decrease_input"),recordingKey:`${l}.decrease`,children:(0,i.jsx)(tK.O,{width:16,height:16})}),(0,i.jsx)("div",{className:"text_size_nudge_input--valueDisplayContainer--10GGe",children:(0,i.jsx)(tY,{size:e,onSizeChanged:t,recordingKey:l})}),(0,i.jsx)(e5.E,{className:"text_size_nudge_input--incrementButton--f85OX text_size_nudge_input--nudgeButtonBase--ctjk3",onClick:r,disabled:(0,eh.gl)(e),"aria-label":(0,X.t)("cooper.inline_menu.increase_input"),recordingKey:`${l}.increase`,children:(0,i.jsx)(tW.e,{width:16,height:16})})]})}function tY({size:e,onSizeChanged:t,recordingKey:n}){let a=s.createRef(),[r,l]=s.useState(tZ(e));return s.useEffect(()=>{l(tZ(e))},[e]),(0,i.jsx)(tq.i,{ref:a,className:"text_size_nudge_input--textSizeInput--pGLXJ",type:"text",value:r,recordingKey:n,onFocus:()=>{a.current?.select()},onChange:e=>{l(e.target.value)},onBlur:()=>{let n=parseFloat(r);if(isNaN(n)||n<tQ){l(tZ(e));return}t(parseFloat(n.toFixed(2)))},onKeyDown:e=>{"Enter"===e.key&&e.currentTarget.blur()}})}function tZ(e){return(0,eh.gl)(e)?(0,X.t)("common.mixed"):String(Math.round(e))}let tJ=[7,8,9,10,11,12,13,14,15,16,20,24,32,36,40,48,64,96,128],tQ=1;class t${constructor(e){this.currentValue=0,this.prevValueIndex=void 0,this.nextValueIndex=void 0,this.currentValue=e,this.textSizePresetsLookup={},tJ.forEach((e,t)=>{this.textSizePresetsLookup[e]=t})}onCurrentValueUpdated(e){if(e<1)throw Error(`Text size cannot be less than 1, got ${e}`);this.currentValue=e;let t=this.textSizePresetsLookup[this.currentValue];if(void 0!==t){let e=t-1;this.prevValueIndex=e<0?void 0:e;let n=t+1;this.nextValueIndex=n>=tJ.length?void 0:n}else{let[e,t]=this.findClosestIndices(tJ,this.currentValue);this.prevValueIndex=e,this.nextValueIndex=t}}nextValue(){if(void 0!==this.prevValueIndex&&void 0!==this.nextValueIndex)return tJ[this.nextValueIndex];if(void 0!==this.prevValueIndex&&void 0===this.nextValueIndex)return this.currentValue+32;if(void 0===this.prevValueIndex&&void 0!==this.nextValueIndex){let e=tJ[0];if(this.currentValue===e)return tJ[this.nextValueIndex];let t=this.currentValue+1;return t>=e?e:t}throw Error("Both next and prev value indices are undefined. Check that you have called onCurrentValueUpdated at least once")}prevValue(){if(void 0!==this.prevValueIndex&&void 0!==this.nextValueIndex)return tJ[this.prevValueIndex];if(void 0!==this.prevValueIndex&&void 0===this.nextValueIndex){let e=tJ[tJ.length-1];if(this.currentValue===e)return tJ[this.prevValueIndex];let t=this.currentValue-32;return t<=e?e:Math.max(t,tQ)}if(void 0===this.prevValueIndex&&void 0!==this.nextValueIndex)return Math.max(this.currentValue-1,tQ);throw Error("Both next and prev value indices are undefined. Check that you have called onCurrentValueUpdated at least once")}findClosestIndices(e,t){let n=0,i=e.length-1;if(t<e[n])return[void 0,0];if(t>e[i])return[i,void 0];for(;n<=i;){let s=Math.floor((n+i)/2);if(e[s]===t)return[s,s];e[s]<t?n=s+1:i=s-1}return[i,n]}}function t0(){let{directManipulationEditor:e,classNameEditingController:t}=eC(),n=(0,g.md)(e.selectedElementComputedStylesWithLocalEdits)["font-size"],a=n?parseInt(n,10):16,r=s.useCallback(e=>{t.addClassesToInspectedElements([{className:`text-[${e}px]`,cssRules:[{property:"font-size",propertiesExpandedFromShorthand:[],value:`${e}px`,computedStylesValue:`${e}px`}]}],eD.zk.YES,"font-size")},[t]);return(0,i.jsx)(eE.R,{children:(0,i.jsx)(tX,{size:a,onSizeChanged:r})})}var t1=n(242069),t2=n(663166),t3=n(420680),t5=n(217380),t4=n(350102),t6=n(390036),t7=n(915013),t8=n(592726),t9=n(580276),ne=n(107799),nt=n(129575),nn=n(51656),ni=n(743558),ns=n(121363),na=n(316339),nr=n(589977),nl=n(108025),no=n(351394);function nd({disabled:e,codeNodeId:t}){let[n,a]=s.useState(""),{selectedElement:l,selectedElementCodeSnippet:o}=(0,Q.fl)(),[d,c]=(0,E.jT)(),{setChatError:u,clearChatError:p}=(0,nn.tk)(t),h=(0,t8.iZ)(),x=(0,_.tS)(),y=(0,t9.Xu)(),b=s.useMemo(()=>(0,r.getActiveTSSceneGraph)().get(t),[t]),C=(0,T.Oc)(),j=C?t1.lV.FIGMAKE:t1.lV.CODE_IN_SITES,k=(0,nt.KF)(j,b),{changedFiles:w}=(0,ni.E)(b,k,j,{shouldIncludeFile:C?m.ru:void 0}),S=(0,ns.L)(),I=j===t1.lV.FIGMAKE?S:(0,ns.P)(),N=(e,t)=>{let i=e.plainText;i||(i=e.hidden?"":n);let s={...e,plainText:i};return a(""),(0,nr.v)({featureType:j,userMessageContent:s,user:h,chatMessagesNode:b,chatController:k,rawUserChatDetails:t,setInput:a,fileKey:x,canUseSupabase:y,changedFiles:w,model:I,autoFixingUserMessageId:null,requestInitiator:t1.bG.USER,isMcpClientEnabled:!1})},A=async({message:e,errors:t,hidden:n})=>{if(!L&&(e||n))try{(0,f.kc)().bake_point_and_edit&&M?.pointAndEditControl({type:"sendChatMessage"}),p();let i=l&&o?(0,no.F)(l,o):void 0,s=(0,na.u)(e||"",[],l?.elementAndParentSources);await N({plainText:e,inspectedElement:i,errors:t,hidden:n},s),t&&c([])}catch(e){u(e instanceof Error?{error:e}:{error:Error("Unknown error")})}},L=(0,nl.ry)(),M=(0,g.md)(v.mK),O=(0,t7.KP)(),{exchange:R,user:P}=(0,ne.$W)(t),D=void 0!==R&&R.messages.length>0,F=P?.sessionID===O,z=s.useRef(null),B=!(0,t6.jN)(n)&&!D&&k.isInitialized,G=(0,g.md)((0,ne.Z3)(t)),U=s.useCallback(()=>{if(z&&"current"in z&&z.current){let e=z.current;e.style.height="auto";let t=Math.min(e.scrollHeight,32);e.style.height=`${t}px`,e.style.overflowY=t>=32?"auto":"hidden"}},[]);s.useEffect(()=>{U()},[n,U]);let V=s.useCallback(e=>{let t=e.target;U(),a(t.value)},[a,U]),H=({message:e,errors:t})=>A({message:e??n,errors:t}),K=D?(0,i.jsx)("div",{...{0:{className:"x16rqkct x2lah0s xgbcquw"},1:{className:"x16rqkct x2lah0s xu5wzci"}}[!!B<<0],children:(0,i.jsx)(t3.K,{"aria-label":(0,X.t)("living_designs.chat.stop_button.alt_text"),onClick:()=>{G&&G.abort((0,t2.NK)(t2.XD.USER_ABORTED))},disabled:!F,children:(0,i.jsx)(t4.Q,{className:"xwa2v1s"})})}):(0,i.jsx)("div",{...{0:{className:"x16rqkct x2lah0s xgbcquw"},1:{className:"x16rqkct x2lah0s xu5wzci"}}[!!B<<0],children:(0,i.jsx)(t3.K,{type:"submit","aria-label":(0,X.t)("living_designs.chat.send_button.alt_text"),onClick:()=>{H({}),(0,f.kc)().bake_point_and_edit?M?.pointAndEditControl({type:"sendChatMessage"}):M?.setDirectManipulationEnabled({enabled:!1})},disabled:!B,children:(0,i.jsx)(t5.W,{className:"xwa2v1s"})})});return(0,i.jsx)("form",{onSubmit:e=>{e.preventDefault(),B&&A({})},children:(0,i.jsxs)("div",{className:"x1vqgdyp x1n2onr6 xrvj5dj x52fmzj xb3r6kr x6s0dn4",children:[(0,i.jsx)("div",{className:"xrvj5dj x6s0dn4",children:(0,i.jsx)("textarea",{rows:1,ref:z,className:"xtt52l0 x1hshjfz xt970qd xdqyycr xfifm61 x1dz1jew xjbqb8w x1f4nttd",disabled:L||e,maxLength:5e3,onChange:V,onKeyDown:e=>{e.stopPropagation(),"Enter"===e.key&&!e.shiftKey&&(e.preventDefault(),B&&(H({}),(0,f.kc)().bake_point_and_edit?M?.pointAndEditControl({type:"sendChatMessage"}):M?.setDirectManipulationEnabled({enabled:!1})))},placeholder:(0,X.t)("living_designs.chat.placeholder.iterate"),value:n})}),(0,i.jsx)("div",{className:"x78zum5 x1q0g3np x1qughib x6s0dn4 xt970qd xaope02",children:(0,i.jsx)("div",{style:{display:"flex",alignItems:"center",gap:8,minWidth:0},children:(0,i.jsx)("div",{style:{flexShrink:0},children:K})})})]})})}var nc=n(556773),nu=n(500275),np=n(773999),nm=n(246144),nh=n(427515),nf=n(664615);let ng="image_";class nx{constructor(e,t,n){this.componentPreview=e,this.displayErrorVisualBell=t,this.forceRefresh=n}async updateImage(e,t,n,i){let s=this.componentPreview.directManipulationEditor,a=g.zl.get(s.selectedElementInfoAtom);if(!a)return(0,nm.x1)("direct_manipulation","No element found to update image"),this.displayErrorVisualBell("on_save"),{success:!1,modifiedCodeFileNodeIds:[]};let l=e.image;if(!l)return(0,nm.x1)("direct_manipulation","No image found to update image"),this.displayErrorVisualBell("on_save"),{success:!1,modifiedCodeFileNodeIds:[]};let o=await s.fetchNewCodeSnippets();if(!o)return(0,nm.x1)("direct_manipulation","Unable to edit the image"),this.displayErrorVisualBell("on_save"),{success:!1,modifiedCodeFileNodeIds:[]};let d=(0,r.getActiveTSSceneGraph)(),{folderPath:c,fileName:u}=o,p=(0,nu.$v)(d,c,u),m={success:!1},f={success:!1};if(p){let r=o.editingInfo.srcAttribute,c=a.imgSrc;if(!d.getInternalCanvas())return{success:!1,modifiedCodeFileNodeIds:[]};let u=d.get(e.nodeGuid);if(!u)return{success:!1,modifiedCodeFileNodeIds:[]};let g=u.fills.find(e=>"IMAGE"===e.type)?.image;if(!g||!g.hash||!g.name)return{success:!1,modifiedCodeFileNodeIds:[]};let x=(0,eP.qg)({hash:g.hash}),_={hash:x,name:g.name},y=`${ng}${x}`,v=!1;return((0,nh.a)(()=>{eq.l7.user("direct-manipulation",()=>{let e=!1;switch(r.type){case"static":{let e=r.isWithinInitializerBraces?y:`{${y}}`,t="string"===r.staticValueType&&(0,nf.W)(p,o.collaborativeSourceCodeVersion,r.valueIncludingQuotesStartIndex,r.valueIncludingQuotes,e);m={success:t,codeFileNode:p,message:t?`Replaced image ${r.value} with ${y}`:`Failed to replace image ${r.value} with ${y}`},v=!0;break}case"dynamic-identifier":if(r.isConstFromImport){let t=(0,nf.W)(p,o.collaborativeSourceCodeVersion,r.valueStartIndex,r.value,y);m={success:t,codeFileNode:p,message:t?`Replaced image ${r.value} with ${y}`:`Failed to replace image ${r.value} with ${y}`},e=!1,v=!0;break}e=!0;break;case"dynamic":e=!0;break;case"not-set":case"unknown":m={success:!1,message:`Cannot handle image src type ${r.type}`};break;default:(0,h.xb)(r)}if(e&&c){let e=n_({selectedElementCodeFileNode:p,codeFileNodeIdsWithRecentlyAddedImageAssetImports:n,scenegraph:d,bundledSourceCode:t,previousElementUrl:c});if(null!==e){let{stringLiteralOccurrences:t,collaborativeSourceCodeVersion:n,codeFileNodeGuid:i,previousImage:s}=e,a=d.get(i);if(a){let e;for(let i of(t.reverse(),t)){let{startIndex:t,matchedString:s}=i;if(!(0,nf.W)(a,n,t,s,y)){e=`Failed to replace image ${s} with ${y}`;break}}m=e?{success:!1,message:e}:{success:!0,codeFileNode:a,message:`Replaced image ${s.type} with ${y}`}}}}let i=m.codeFileNode,s=i?.collaborativeSourceCode;if(m.success&&i&&s){let e=(0,t1.r9)({imageHash:x,imageVariableName:y,extension:"png"})+"\n";i.setImageImports([_]);let t=s.createInsertionOp(0,e.length,e,0);f={success:t,addedImportLine:!0,message:t?`Updated import statement to include ${y}`:`Failed to update import statement to include ${y}`}}else f={success:!0,message:`Import statement already includes ${y}`}})}),m.success&&f.success)?(c||v?this.componentPreview.sendMessage("editInspectedElementImage",{hash:x,previousElementUrl:c,dataUrl:l,sourceCodeJSXCallId:v?o.sourceCodeJSXCallId:void 0}):this.forceRefresh(),s.updateAnalyticsRecordImageSwappedFromSource(i),{success:!0,modifiedCodeFileNodeIds:[]}):((0,nm.x1)("direct_manipulation","Failed to update image",{inspectedElementInfo:a,status:m,importStatus:f}),this.displayErrorVisualBell("on_save"),{success:!1,modifiedCodeFileNodeIds:[]})}return{success:!1,modifiedCodeFileNodeIds:[]}}}function n_({selectedElementCodeFileNode:e,codeFileNodeIdsWithRecentlyAddedImageAssetImports:t,scenegraph:n,bundledSourceCode:i,previousElementUrl:s}){let a=function(e){let t=e.match(/#filename=([a-zA-Z0-9]+)(?:\.[^?#]+)?/);if(t?.[1]){let e=t[1];return{type:"asset",assetId:e,assetVariableName:`${ng}${e}`}}return{type:"url",url:e}}(s);function r({previousImage:e,...t}){switch(e.type){case"asset":return function({sourceCode:e,codeFileNodeGuid:t,collaborativeSourceCodeVersion:n,previousImage:i}){let s=(function(e,t){let n=(0,np.eY)(t),i=RegExp(`\\b${n}\\b`,"g"),s=i.exec(e);if(!s)return[];let a=[];do{let e=s.index,n=e+s[0].length;a.push({startIndex:e,endIndex:n,matchedString:t})}while(s=i.exec(e))return a})(e,i.assetVariableName).filter(t=>!function(e,t){let n=t;for(;n>0&&10!==e.charCodeAt(n-1);)n--;return/^\s*import\b/.test(e.slice(n))}(e,t.startIndex));return s.length>0?{stringLiteralOccurrences:s,codeFileNodeGuid:t,collaborativeSourceCodeVersion:n,previousImage:i}:null}({previousImage:e,...t});case"url":return function({sourceCode:e,codeFileNodeGuid:t,collaborativeSourceCodeVersion:n,previousImage:i}){let s=[ny(e,`"${i.url}"`),ny(e,`'${i.url}'`)].flatMap(e=>e);return s.length>0?{stringLiteralOccurrences:s,codeFileNodeGuid:t,collaborativeSourceCodeVersion:n,previousImage:i}:null}({previousImage:e,...t});default:(0,h.xb)(e)}}let l=e.collaborativeSourceCode;if(l){let t=r({sourceCode:l.computeCurrentText(),codeFileNodeGuid:e.guid,collaborativeSourceCodeVersion:l.getCurrentVersionAsString(),previousImage:a});if(t)return t}if("asset"===a.type)for(let i of t){if(i===e.guid)continue;let t=n.get(i),s=t?.collaborativeSourceCode;if(!t||!s)continue;let l=r({sourceCode:s.computeCurrentText(),codeFileNodeGuid:t.guid,collaborativeSourceCodeVersion:s.getCurrentVersionAsString(),previousImage:a});if(l)return l}if(i)for(let e of new nc.M(i).listFiles()){if(!e.metadata?.guid||!e.metadata?.version)continue;let t=r({sourceCode:e.contents.toString(),codeFileNodeGuid:e.metadata.guid,collaborativeSourceCodeVersion:e.metadata.version,previousImage:a});if(t)return t}return null}function ny(e,t){let n;let i=[],s=0;for(;-1!==(n=e.indexOf(t,s));){let e=n,a=e+t.length;i.push({startIndex:e,endIndex:a,matchedString:t}),s=n+1}return i}let nv={kMwMTN:"x1uw1ob",kGuDYH:"x17akokd",k63SB2:"xopfts3",kZKoxP:"xg7h5cd",kLqNvP:"",kt4wiu:"",kLWn49:"xno9bf3",kmVPX3:"x1mh6rdz",kg3NbH:"",kuDDbn:"",kE3dHu:"",kP0aTx:"",kpe85a:"",k8WAf4:"",kLKAdn:"",kGO01o:"",kfzvcC:"x67bb7w",kVAEAm:"xixxii4",kzqmXN:"xeq5yr9",kY2c9j:"x4smtjo",$$css:!0},nb={container:e=>[nv,{kbCHJM:null!=e.left?"xgq9j65":e.left,k87sOh:null!=e.top?"xjbys53":e.top,$$css:!0},{"--x-left":(e=>"number"==typeof e?e+"px":null!=e?e:void 0)(e.left),"--x-top":(e=>"number"==typeof e?e+"px":null!=e?e:void 0)(e.top)}]};function nC(e,t,n){let i=n.getBoundingClientRect(),s=i.width/n.offsetWidth,a=t.current?.getBoundingClientRect(),r=a?.width||0,l=a?.height||0,o=e.top-l,d=i.x+e.left+e.width/2-r/2;return(o=i.y+e.top+e.height+12)+l>i.height+i.y&&(o=i.y+i.height-l-36),o<i.y&&(o=i.y+12),d<i.x&&(d=i.x),d+r>i.width+i.x&&(d=i.x+i.width-r),d*=s,{top:o*=s,left:d}}function nj({elementBoundingBox:e,container:t,elementInfo:n,chatNodeId:a,codeInstanceNodeId:r,preview:o,refreshPreview:d}){let c=s.useRef(null),u=s.useRef(null),p=s.useRef(null),m=s.useRef(null),h=s.useRef(null),f=s.useRef(null),[x,_]=s.useState("style"),y=n.tagName.toLowerCase(),v=s.useMemo(()=>(function(e,t){let n=(0,eH.S)(e,t),s=function(e){let t=[];e.forEach(e=>{switch(e){case eH.m.Text:t.push(nk);break;case eH.m.Image:t.push(nS);break;case eH.m.Border:t.push(nE);break;case eH.m.Spacing:t.push(nT);break;case eH.m.Container:t.push(nw);case eH.m.Shadow:}});let n=[];for(let[e,s]of t.entries())0!==e&&n.push((0,i.jsx)(en.c,{},e)),n.push((0,i.jsx)(s,{},s.name));return n}(n);return{controlTypes:n,components:s}})(y,n.isTextContainer),[y,n.isTextContainer]),b=function(e,t){let n=(0,g.md)(e.directManipulationEnabledAtom),i=(0,g.md)(e.editingSnippetAtom,{deferToFrame:!0});return n?i.snippet?(0,es.$5)(i.snippet)&&t.length>0?er.D.Enabled:er.D.Disabled:i.isLoading?er.D.Loading:er.D.Disabled:er.D.Disabled}(o.directManipulationEditor,v.components),C=(0,g.md)(o.directManipulationEditor.editingSnippetAtom,{deferToFrame:!0}).snippet,j=s.useRef(!1),k=(0,$.wA)(),w=s.useCallback(e=>{if(j.current)return;j.current=!0;let t="on_selection"===e?(0,X.t)("figmake.toolbar.error.inconsistency"):(0,X.t)("figmake.toolbar.error.save");k(et.F.enqueue({message:t,error:!0,button:{action:()=>{d()},text:(0,X.t)("figmake.refresh")}}))},[k,d]),E=(0,s.useMemo)(()=>new ea.q(o.directManipulationEditor,async(e,t)=>{let n=await o.sendMessage("editInspectedElementClassNames",e);o.directManipulationEditor.updateAnalyticsRecordClassNameEditResult(e,n,t)},w),[o,w]),T=(0,s.useMemo)(()=>new nx(o,w,d),[o,w,d]),[S,I]=s.useState(nC(e,c,t)),[N,A]=s.useState(null);(0,ee.wY)(c,()=>{I(nC(e,c,t)),A(c.current)}),s.useLayoutEffect(()=>{c.current&&(I(nC(e,c,t)),A(c.current))},[e,t]);let L=b===er.D.Enabled,M=(0,ei.Fk)((e,t,n,i)=>t.includes(eH.m.Image)&&function(e,t,n,i,s){if(!t)return!1;let{folderPath:a,fileName:r}=t,l=(0,nu.$v)(e,a,r);if(!l)return!1;let o=t.editingInfo.srcAttribute;return"static"===o.type||"dynamic-identifier"===o.type&&!!o.isConstFromImport||(("dynamic-identifier"===o.type||"dynamic"===o.type)&&n?null!==n_({selectedElementCodeFileNode:l,codeFileNodeIdsWithRecentlyAddedImageAssetImports:s,scenegraph:e,bundledSourceCode:i,previousElementUrl:n}):("not-set"===o.type||o.type,!1))}(e,n,i,o.directManipulationEditor.bundledSourceCode,o.directManipulationEditor.codeFileNodeIdsWithRecentlyAddedImageAssetImports),v.controlTypes,C,n.imgSrc,r,o.directManipulationEditor);o.directManipulationEditor.updateAnalyticsSelectedElementCanEditImage(M,n.figmaFiberId);let O=L?x:"prompt";return b===er.D.Loading?null:(0,i.jsx)("div",{...l.Ay.props(nb.container(S)),children:(0,i.jsx)(ej,{classNameEditingController:E,classNameEditingEnabled:b,componentPreview:o,container:t,directManipulationEditor:o.directManipulationEditor,imageEditingController:T,imageSwapEnabled:M,toolbar:N,children:(0,i.jsxs)(ev,{menuRef:c,children:[(0,i.jsx)("div",{ref:u,className:"x78zum5 xc26acl xeq5yr9 x1vqgdyp x9f619 xilkfi8",children:(0,i.jsx)(tg,{disabled:!L,value:O,setValue:_})}),(0,i.jsx)(en.c,{}),(0,i.jsx)("div",{style:{width:`${("style"===O?h:f).current?.offsetWidth}px`},className:"xffdob0 x13w7htt xrvj5dj x1xe40qn",children:(0,i.jsx)("div",{ref:p,style:{marginTop:"style"===O?"0px":"-60px"},className:"x1vqgdyp x1on81qs xt4q7o6",children:(0,i.jsxs)("div",{style:{width:`${("style"===O?h:f).current?.offsetWidth}px`},className:"xffdob0 x13w7htt xg7h5cd x6ikm8r",children:[(0,i.jsx)("div",{ref:h,className:"x78zum5 xc26acl xeq5yr9 x1vqgdyp",children:v.components}),(0,i.jsx)("div",{ref:f,className:"x78zum5 xc26acl xeq5yr9 x1vqgdyp",children:(0,i.jsx)(nd,{disabled:"prompt"!==O,codeNodeId:a})})]})})}),(0,i.jsx)(en.c,{}),(0,i.jsx)("div",{ref:m,className:"x78zum5 xc26acl xeq5yr9 x1vqgdyp x9f619 x1cmmqis",children:(0,i.jsx)(t_,{})})]},`toolbar-${n.figmaFiberId}`)})},`container-${n.figmaFiberId}`)}function nk(){return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"x78zum5 x1q0g3np x6s0dn4 xl56j7k xt970qd xfn1xvj",children:(0,i.jsxs)("div",{className:"xxk0z11 x78zum5 x1q0g3np x6s0dn4 xl56j7k xy6u8y9 x4pvk5x",children:[(0,i.jsx)(te,{}),(0,i.jsx)("div",{className:"x5yr21d x1i1rx1s xq5lo5s"}),(0,i.jsx)("div",{className:"x1x862rh",children:(0,i.jsx)(eB,{property:"color"})})]})}),(0,i.jsx)(en.c,{}),(0,i.jsx)(t0,{}),(0,i.jsx)(en.c,{}),(0,i.jsx)(tU,{}),(0,i.jsx)(tV,{}),(0,i.jsx)(tH,{}),(0,i.jsx)(en.c,{}),(0,i.jsx)(tP,{})]})}function nw(){return(0,i.jsx)(eB,{property:"background-color"})}function nE(){return(0,i.jsx)(eN,{})}function nT(){return(0,i.jsx)(tT,{})}function nS(){return(0,i.jsx)(to,{})}let nI={boundingBox:{kVAEAm:"x10l6tqk",kfzvcC:"x47corl",kB7OPa:"x9f619",$$css:!0},boundingBoxSelected:{kMzoRj:"xmkeg23",kjGldf:null,k2ei4v:null,kZ1KPB:null,ke9TFa:null,kWqL5O:null,kLoX6v:null,kEafiO:null,kt9PQ7:null,ksu8eU:"x1y0btm7",kJRH4f:null,kVhnKS:null,k4WBpm:null,k8ry5P:null,kSWEuD:null,kDUl1X:null,kPef9Z:null,kfdmCh:null,kVAM5u:"x1va2ikv",kzOINU:null,kGJrpR:null,kaZRDh:null,kBCPoo:null,k26BEO:null,k5QoK5:null,kLZC3w:null,kL6WhQ:null,kmVPX3:"x1i3ajwb",kg3NbH:null,kuDDbn:null,kE3dHu:null,kP0aTx:null,kpe85a:null,k8WAf4:null,kLKAdn:null,kGO01o:null,$$css:!0},boundingBoxHovered:{kMzoRj:"xmkeg23",kjGldf:null,k2ei4v:null,kZ1KPB:null,ke9TFa:null,kWqL5O:null,kLoX6v:null,kEafiO:null,kt9PQ7:null,ksu8eU:"x1y0btm7",kJRH4f:null,kVhnKS:null,k4WBpm:null,k8ry5P:null,kSWEuD:null,kDUl1X:null,kPef9Z:null,kfdmCh:null,kVAM5u:"xbes0tg",kzOINU:null,kGJrpR:null,kaZRDh:null,kBCPoo:null,k26BEO:null,k5QoK5:null,kLZC3w:null,kL6WhQ:null,kmVPX3:"x1i3ajwb",kg3NbH:null,kuDDbn:null,kE3dHu:null,kP0aTx:null,kpe85a:null,k8WAf4:null,kLKAdn:null,kGO01o:null,$$css:!0},boundingBoxSelectedSimilar:{kMzoRj:"xmkeg23",kjGldf:null,k2ei4v:null,kZ1KPB:null,ke9TFa:null,kWqL5O:null,kLoX6v:null,kEafiO:null,kt9PQ7:null,ksu8eU:"xbsl7fq",kJRH4f:null,kVhnKS:null,k4WBpm:null,k8ry5P:null,kSWEuD:null,kDUl1X:null,kPef9Z:null,kfdmCh:null,kVAM5u:"xbes0tg",kzOINU:null,kGJrpR:null,kaZRDh:null,kBCPoo:null,k26BEO:null,k5QoK5:null,kLZC3w:null,kL6WhQ:null,kSiTet:"x18km98s",kmVPX3:"x1i3ajwb",kg3NbH:null,kuDDbn:null,kE3dHu:null,kP0aTx:null,kpe85a:null,k8WAf4:null,kLKAdn:null,kGO01o:null,$$css:!0},boundingBoxHoveredSimilar:{kMzoRj:"xmkeg23",kjGldf:null,k2ei4v:null,kZ1KPB:null,ke9TFa:null,kWqL5O:null,kLoX6v:null,kEafiO:null,kt9PQ7:null,ksu8eU:"xbsl7fq",kJRH4f:null,kVhnKS:null,k4WBpm:null,k8ry5P:null,kSWEuD:null,kDUl1X:null,kPef9Z:null,kfdmCh:null,kVAM5u:"xbes0tg",kzOINU:null,kGJrpR:null,kaZRDh:null,kBCPoo:null,k26BEO:null,k5QoK5:null,kLZC3w:null,kL6WhQ:null,kSiTet:"xbyyjgo",kmVPX3:"x1i3ajwb",kg3NbH:null,kuDDbn:null,kE3dHu:null,kP0aTx:null,kpe85a:null,k8WAf4:null,kLKAdn:null,kGO01o:null,$$css:!0},tagNameLabel:{kVAEAm:"x10l6tqk",k87sOh:"xcrr8yc",kbCHJM:"x1ojtbga",kMwMTN:"x140t73q",k8WAf4:"xj8oexa",kg3NbH:"xfn1xvj",kGuDYH:"x4z9k3i",k63SB2:"x117nqv4",kIxVMA:"x2b5lcy",ksF3WI:"x1lzl9kk",kYm2EN:"xjppbhk",kqGeR4:"xfrllxf",kP9fke:"x1kyqaxf",$$css:!0},tagNameLabelSelected:{kWkggS:"xf2r6mj",$$css:!0},tagNameLabelHovered:{kWkggS:"x1g19c89",$$css:!0}},nN={selected:nI.boundingBoxSelected,hovered:nI.boundingBoxHovered,selectedSimilar:nI.boundingBoxSelectedSimilar,hoveredSimilar:nI.boundingBoxHoveredSimilar},nA={selected:nI.tagNameLabelSelected,hovered:nI.tagNameLabelHovered,selectedSimilar:void 0,hoveredSimilar:void 0};function nL({rect:e,selectionType:t,tagName:n}){return!e||0===e.width||0===e.height||isNaN(e.width)||isNaN(e.height)||isNaN(e.left)||isNaN(e.top)?null:(0,i.jsx)("div",{...l.xk(nI.boundingBox,nN[t]),style:{left:e.left,top:e.top,width:e.width,height:e.height},children:!!n&&["selected","hovered"].includes(t)&&(0,i.jsx)("div",{...l.xk(nI.tagNameLabel,nA[t]),children:n})})}function nM({preview:e,isVisible:t,refreshPreview:n,chatNodeId:a,codeInstanceNodeId:r}){let l=e.iframe,o=e.directManipulationEditor,d=(0,g.md)(o.latestInspectedElementUIEvent),c=(0,g.md)(J.sH),u=(0,g.md)(J.gn),p=null!==d,m=p&&!!l,[h,f]=s.useState(!0);if(s.useEffect(()=>{if(l&&!p&&f(!0),!m)return;let t=()=>{f(!0)},n=()=>{f(!1)},i=t=>{if("Escape"===t.key&&!(0,Q.pn)(e.directManipulationEditor)){e.setDirectManipulationEnabled({enabled:!1}),f(!0);return}e.directManipulationEditor.handleKeyDown(t)};return l.addEventListener("mouseenter",t),l.addEventListener("mouseleave",n),document.addEventListener("keydown",i),()=>{l.removeEventListener("mouseenter",t),l.removeEventListener("mouseleave",n),document.removeEventListener("keydown",i)}},[m,l,p,e,e.directManipulationEditor]),!m)return null;let x=l.getBoundingClientRect().width/l.offsetWidth;u&&(x/=c);let _=e=>e?{width:Math.floor(e.width*x),height:Math.floor(e.height*x),left:e.left*x,top:e.top*x}:null,{hoveredElement:y,selectedElement:v,selectedSimilarElements:b,hoveredSimilarElements:C}=d,j=_(v?.rect??null);return(0,i.jsxs)("div",{className:"x10l6tqk x13vifvy xu96u03 x3m8u43 x1ey2m1c x47corl xb3r6kr x1vjfegm",children:[h&&C.map((e,t)=>(0,i.jsx)(nL,{rect:_(e),selectionType:"hoveredSimilar"},`hoveredSimilar-${t}`)),b.map((e,t)=>(0,i.jsx)(nL,{rect:_(e),selectionType:"selectedSimilar"},`selectedSimilar-${t}`)),h&&y&&(0,i.jsx)(nL,{rect:_(y.rect),selectionType:"hovered",tagName:y.tagName},"hovered"),v&&j&&(0,i.jsxs)(i.Fragment,{children:[t&&(0,Z.createPortal)((0,i.jsx)(nj,{elementBoundingBox:j,elementInfo:v,chatNodeId:a,codeInstanceNodeId:r,container:l,preview:e,refreshPreview:n},"toolbar"),document.body),(0,i.jsx)(nL,{rect:j,selectionType:"selected",tagName:v.tagName},"selected")]})]})}function nO({children:e,menuRef:t}){let n=(0,ex.U1)(t);return(0,i.jsx)("div",{"data-is-figmake":"true",className:ey.xE,children:(0,i.jsx)(e_.W1,{menuRef:n,darkModePreferred:!0,editorTheme:"seascape",children:e})})}function nR({target:e,children:t}){let[n,a]=s.useState(!1),{getContainerProps:r,getTriggerProps:l}=ew.fP({type:"menu",isOpen:n,onOpenChange:a,softDismiss:!0,placement:"bottom",middleware:[(0,ek.cY)({mainAxis:16}),(0,ek.UU)({padding:16}),(0,ek.BN)()]}),o=s.cloneElement(e,{...l()});return(0,i.jsxs)("div",{children:[(0,i.jsx)(eE.R,{children:o}),(0,i.jsx)(ew.mc,{...r(),children:t})]})}function nP(){let[e]=s.useState(!1);return(0,i.jsx)(nR,{target:(0,i.jsx)(em.ar,{"aria-label":(0,X.t)("figmake.toolbar.corner_radius"),tooltip:(0,X.t)("figmake.toolbar.corner_radius"),tooltipType:ef.Ib.TEXT,showCaret:!0,isActive:e,children:(0,i.jsx)(eo.a,{})}),children:(0,i.jsx)(nD,{})})}function nD(){let{selectedFeatures:e}=(0,B.jK)(),{topLeft:t,topRight:n,bottomLeft:a,bottomRight:r}=e?.borderRadius??{},l=(0,$.wA)(),o=t===n&&t===a&&t===r,d=o?t:eh.oV,[c,u]=s.useState(!o),p=s.useMemo(()=>(0,i.jsx)(em.ar,{"aria-label":(0,X.t)("figmake.toolbar.corner_radius.individual_corner_radius"),tooltip:(0,X.t)("figmake.toolbar.corner_radius.individual_corner_radius"),tooltipType:ef.Ib.TEXT,isActive:c,onClick:()=>u(e=>!e),children:(0,i.jsx)(ed.Q,{className:"x47corl"})}),[c]),m=s.useCallback((e,t)=>{console.warn("updateBorderRadiusValues needs implementation",e,t)},[]),h=s.useCallback((e,t)=>{m({topLeft:e,topRight:e,bottomLeft:e,bottomRight:e},t)},[m]);return(0,i.jsx)(nO,{children:(0,i.jsx)("div",{className:"x78zum5 xdt5ytf xc7ga6q xy13l1i x167g77z xafpxmx x9f619",children:(0,i.jsx)("div",{className:"x78zum5 xdt5ytf x167g77z",children:c?(0,i.jsxs)("div",{className:"xrvj5dj x167g77z x6s0dn4 x619ttb xh8yej3 xbyi07e",children:[(0,i.jsx)(eg.gq,{value:t,dispatch:l,onValueChange:(e,t)=>{m({topLeft:e},t)},smallNudgeAmount:1,bigNudgeAmount:10,"data-tooltip-type":ef.Ib.TEXT,"data-tooltip":(0,X.t)("figmake.toolbar.corner_radius.top_left"),children:(0,i.jsx)(eo.a,{className:"x47corl"})}),(0,i.jsx)(eg.gq,{value:n,dispatch:l,onValueChange:(e,t)=>{m({topRight:e},t)},smallNudgeAmount:1,bigNudgeAmount:10,"data-tooltip-type":ef.Ib.TEXT,"data-tooltip":(0,X.t)("figmake.toolbar.corner_radius.top_right"),children:(0,i.jsx)(ec.$,{className:"x47corl"})}),p,(0,i.jsx)(eg.gq,{value:a,dispatch:l,onValueChange:(e,t)=>{m({bottomLeft:e},t)},smallNudgeAmount:1,bigNudgeAmount:10,"data-tooltip-type":ef.Ib.TEXT,"data-tooltip":(0,X.t)("figmake.toolbar.corner_radius.bottom_left"),children:(0,i.jsx)(eu.w,{className:"x47corl"})}),(0,i.jsx)(eg.gq,{value:r,dispatch:l,onValueChange:(e,t)=>{m({bottomRight:e},t)},smallNudgeAmount:1,bigNudgeAmount:10,"data-tooltip-type":ef.Ib.TEXT,"data-tooltip":(0,X.t)("figmake.toolbar.corner_radius.bottom_right"),children:(0,i.jsx)(ep.t,{className:"x47corl"})})]}):(0,i.jsxs)("div",{className:"xrvj5dj x167g77z x6s0dn4 x619ttb xh8yej3 x16zb2db",children:[(0,i.jsx)(eg.gq,{bigNudgeAmount:10,"data-tooltip":(0,X.t)("figmake.toolbar.corner_radius"),"data-tooltip-type":ef.Ib.TEXT,dispatch:l,onValueChange:h,smallNudgeAmount:1,value:d,children:(0,i.jsx)(ed.Q,{className:"x47corl"})}),p]})})})})}let nF={r:0,g:0,b:0,a:1};function nz(){let{selectedFeatures:e}=(0,B.jK)(),t=e?.color??nF,n=s.useCallback((e,t=eD.zk.YES)=>{console.warn("onColorChange needs implementation",e,t)},[]);return(0,i.jsx)(nU,{initialColor:t,label:(0,X.t)("figmake.toolbar.font_color"),onColorChange:n})}function nB(){let{selectedFeatures:e}=(0,B.jK)(),t=e?.backgroundColor??nF,n=s.useCallback((e,t=eD.zk.YES)=>{console.warn("onBackgroundColorChange needs implementation",e,t)},[]);return(0,i.jsx)(nU,{initialColor:t,label:(0,X.t)("figmake.toolbar.background_color"),onColorChange:n})}function nG(){let{selectedFeatures:e}=(0,B.jK)(),t=e?.borderColor??nF,n=s.useCallback((e,t=eD.zk.YES)=>{console.warn("onBorderColorChange needs implementation",e,t)},[]);return(0,i.jsx)(nU,{initialColor:t,label:(0,X.t)("figmake.toolbar.border_color"),onColorChange:n})}function nU({initialColor:e,label:t,onColorChange:n}){let[a]=s.useState(!1),r=s.useMemo(()=>{let t;return e&&!t&&(t={type:"SOLID",color:e,opacity:e.a}),t},[e]);return(0,i.jsx)(nR,{target:(0,i.jsx)(em.ar,{"aria-label":t,tooltip:t,tooltipType:ef.Ib.TEXT,showCaret:!0,isActive:a,children:(0,i.jsx)(eO.A,{paint:r})}),children:(0,i.jsx)(nO,{children:(0,i.jsx)(nV,{color:e,onChange:n})})})}function nV({color:e,onChange:t}){let n=(0,eR.Ku)(),{currentTool:a,dropdownShown:r}=(0,eL.R)(e=>({currentTool:e.mirror.appModel.currentTool,dropdownShown:e.dropdownShown})),l=(0,$.wA)(),o=s.useRef(null);return(0,i.jsx)("div",{className:ez.n1,ref:o,children:(0,i.jsx)(eF.S7,{canAcceptStyles:!1,canAcceptVariables:!1,color:e,colorFormat:n,containerRef:o,currentTool:a,dispatch:l,dropdownShown:r,dropperDisabled:!0,onColorChange:t,theme:"dark"})})}function nH(){let[e]=s.useState(!1);return(0,i.jsx)(nR,{target:(0,i.jsx)(em.ar,{"aria-label":(0,X.t)("figmake.toolbar.spacing"),tooltip:(0,X.t)("figmake.toolbar.spacing"),tooltipType:ef.Ib.TEXT,showCaret:!0,isActive:e,children:(0,i.jsx)(ty.R,{})}),children:(0,i.jsx)(nK,{})})}function nK(){let{selectedFeatures:e}=(0,B.jK)(),{padding:t,margin:n}=e??{},a=t?.left===t?.right,r=t?.top===t?.bottom,l=a?t?.left:eh.oV,o=r?t?.top:eh.oV,d=n?.left===n?.right,c=n?.top===n?.bottom,u=d?n?.left:eh.oV,p=c?n?.top:eh.oV,[m,h]=s.useState(!a||!r),[f,g]=s.useState(!d||!c),x=s.useMemo(()=>(0,i.jsx)(em.ar,{"aria-label":(0,X.t)("figmake.toolbar.padding.individual_paddings"),tooltip:(0,X.t)("figmake.toolbar.padding.individual_paddings"),tooltipType:ef.Ib.TEXT,isActive:m,onClick:()=>h(e=>!e),children:(0,i.jsx)(tv.s,{})}),[m]),_=s.useMemo(()=>(0,i.jsx)(em.ar,{"aria-label":(0,X.t)("figmake.toolbar.margin.individual_margins"),tooltip:(0,X.t)("figmake.toolbar.margin.individual_margins"),tooltipType:ef.Ib.TEXT,isActive:f,onClick:()=>g(e=>!e),children:(0,i.jsx)(tv.s,{})}),[f]),y=s.useCallback(function({previousValues:e,newValues:t,shouldCommit:n,propertyName:i}){n&&console.warn("changeValue needs implementation",i,{...e,...t})},[]),v=(0,$.wA)();return(0,i.jsx)(nO,{children:(0,i.jsxs)("div",{className:"x78zum5 xdt5ytf xc7ga6q xy13l1i x167g77z xafpxmx x9f619",children:[(0,i.jsxs)("div",{className:"x78zum5 xdt5ytf x167g77z",children:[(0,i.jsx)("div",{className:"x1l7klhg xh8yej3 x1f4nttd x78zum5 x1qughib x6s0dn4",children:(0,X.t)("figmake.toolbar.padding")}),m?(0,i.jsxs)("div",{className:"xrvj5dj xbyi07e x167g77z x6s0dn4 x619ttb xh8yej3",children:[(0,i.jsx)(eg.gq,{value:t?.left,dispatch:v,onValueChange:(e,n)=>{y({previousValues:t,newValues:{left:e},shouldCommit:n,propertyName:"padding"})},smallNudgeAmount:1,bigNudgeAmount:10,"data-tooltip-type":ef.Ib.TEXT,"data-tooltip":(0,X.t)("figmake.toolbar.padding.left"),children:(0,i.jsx)(tj.R,{className:"x47corl"})}),(0,i.jsx)(eg.gq,{value:t?.top,dispatch:v,onValueChange:(e,n)=>{y({previousValues:t,newValues:{top:e},shouldCommit:n,propertyName:"padding"})},smallNudgeAmount:1,bigNudgeAmount:10,"data-tooltip-type":ef.Ib.TEXT,"data-tooltip":(0,X.t)("figmake.toolbar.padding.top"),children:(0,i.jsx)(tk.z,{className:"x47corl"})}),x,(0,i.jsx)(eg.gq,{value:t?.right,dispatch:v,onValueChange:(e,n)=>{y({previousValues:t,propertyName:"padding",newValues:{right:e},shouldCommit:n})},smallNudgeAmount:1,bigNudgeAmount:10,"data-tooltip-type":ef.Ib.TEXT,"data-tooltip":(0,X.t)("figmake.toolbar.padding.right"),children:(0,i.jsx)(tw.M,{className:"x47corl"})}),(0,i.jsx)(eg.gq,{value:t?.bottom,dispatch:v,onValueChange:(e,n)=>{y({previousValues:t,propertyName:"padding",newValues:{bottom:e},shouldCommit:n})},smallNudgeAmount:1,bigNudgeAmount:10,"data-tooltip-type":ef.Ib.TEXT,"data-tooltip":(0,X.t)("figmake.toolbar.padding.bottom"),children:(0,i.jsx)(tE.v,{className:"x47corl"})})]}):(0,i.jsxs)("div",{className:"xrvj5dj xbyi07e x167g77z x6s0dn4 x619ttb xh8yej3",children:[(0,i.jsx)(eg.gq,{value:l,dispatch:v,onValueChange:(e,n)=>{y({previousValues:t,newValues:{left:e,right:e},shouldCommit:n,propertyName:"padding"})},smallNudgeAmount:1,bigNudgeAmount:10,"data-tooltip-type":ef.Ib.TEXT,"data-tooltip":(0,X.t)("figmake.toolbar.padding.horizontal"),children:(0,i.jsx)(tb.y,{className:"x47corl"})}),(0,i.jsx)(eg.gq,{value:o,dispatch:v,onValueChange:(e,n)=>{y({previousValues:t,newValues:{top:e,bottom:e},shouldCommit:n,propertyName:"padding"})},smallNudgeAmount:1,bigNudgeAmount:10,"data-tooltip-type":ef.Ib.TEXT,"data-tooltip":(0,X.t)("figmake.toolbar.padding.vertical"),children:(0,i.jsx)(tC.K,{className:"x47corl"})}),x]})]}),(0,i.jsxs)("div",{className:"x78zum5 xdt5ytf x167g77z",children:[(0,i.jsx)("div",{className:"x1l7klhg xh8yej3 x1f4nttd x78zum5 x1qughib x6s0dn4",children:(0,X.t)("figmake.toolbar.margin")}),f?(0,i.jsxs)("div",{className:"xrvj5dj xbyi07e x167g77z x6s0dn4 x619ttb xh8yej3",children:[(0,i.jsx)(eg.gq,{value:n?.left,dispatch:v,onValueChange:(e,t)=>{y({previousValues:n,newValues:{left:e},shouldCommit:t,propertyName:"margin"})},smallNudgeAmount:1,bigNudgeAmount:10,"data-tooltip-type":ef.Ib.TEXT,"data-tooltip":(0,X.t)("figmake.toolbar.margin.left"),children:(0,i.jsx)(tj.R,{className:"x47corl"})}),(0,i.jsx)(eg.gq,{value:n?.top,dispatch:v,onValueChange:(e,t)=>{y({previousValues:n,newValues:{top:e},shouldCommit:t,propertyName:"margin"})},smallNudgeAmount:1,bigNudgeAmount:10,"data-tooltip-type":ef.Ib.TEXT,"data-tooltip":(0,X.t)("figmake.toolbar.margin.top"),children:(0,i.jsx)(tk.z,{className:"x47corl"})}),_,(0,i.jsx)(eg.gq,{value:n?.right,dispatch:v,onValueChange:(e,t)=>{y({previousValues:n,propertyName:"margin",newValues:{right:e},shouldCommit:t})},smallNudgeAmount:1,bigNudgeAmount:10,"data-tooltip-type":ef.Ib.TEXT,"data-tooltip":(0,X.t)("figmake.toolbar.margin.right"),children:(0,i.jsx)(tw.M,{className:"x47corl"})}),(0,i.jsx)(eg.gq,{value:n?.bottom,dispatch:v,onValueChange:(e,t)=>{y({previousValues:n,newValues:{bottom:e},shouldCommit:t,propertyName:"margin"})},smallNudgeAmount:1,bigNudgeAmount:10,"data-tooltip-type":ef.Ib.TEXT,"data-tooltip":(0,X.t)("figmake.toolbar.margin.bottom"),children:(0,i.jsx)(tE.v,{className:"x47corl"})})]}):(0,i.jsxs)("div",{className:"xrvj5dj xbyi07e x167g77z x6s0dn4 x619ttb xh8yej3",children:[(0,i.jsx)(eg.gq,{value:u,dispatch:v,onValueChange:(e,t)=>{y({previousValues:n,newValues:{left:e,right:e},shouldCommit:t,propertyName:"margin"})},smallNudgeAmount:1,bigNudgeAmount:10,"data-tooltip-type":ef.Ib.TEXT,"data-tooltip":(0,X.t)("figmake.toolbar.margin.horizontal"),children:(0,i.jsx)(tb.y,{className:"x47corl"})}),(0,i.jsx)(eg.gq,{value:p,dispatch:v,onValueChange:(e,t)=>{y({previousValues:n,newValues:{top:e,bottom:e},shouldCommit:t,propertyName:"margin"})},smallNudgeAmount:1,bigNudgeAmount:10,"data-tooltip-type":ef.Ib.TEXT,"data-tooltip":(0,X.t)("figmake.toolbar.margin.vertical"),children:(0,i.jsx)(tC.K,{className:"x47corl"})}),_]})]})]})})}var nW=n(36758);function nq(){let{selectedJsxSource:e,preview:t}=(0,B.jK)(),n=s.useCallback(()=>{e&&t.pointAndEditControl({type:"commandExec",command:{type:"deleteElement",sourceId:e.sourceId,newValue:!0,oldValue:!1}})},[e,t]);return(s.useEffect(()=>{let t=t=>{"Backspace"===t.key&&e&&(t.preventDefault(),t.stopPropagation(),n())};if(e)return window.addEventListener("keydown",t),()=>{window.removeEventListener("keydown",t)}},[e,n]),e)?(0,i.jsx)(eE.R,{children:(0,i.jsx)(em.ar,{"aria-label":(0,X.t)("figmake.toolbar.delete_element"),tooltip:(0,X.t)("figmake.toolbar.delete_element"),tooltipType:ef.Ib.TEXT,onClick:n,children:(0,i.jsx)(nW.i,{})})}):null}function nX(){let{selectedJsxSource:e}=(0,B.jK)(),[t,n]=(0,g.fp)(v.JL),{filePath:s,pos:a,len:l}=e??{};return(0,i.jsx)(eE.R,{children:(0,i.jsx)(em.ar,{"aria-label":(0,X.t)("figmake.toolbar.goToSource"),tooltip:(0,X.t)("figmake.toolbar.goToSource"),tooltipType:ef.Ib.TEXT,onClick:()=>(function(e,t,n,i){if(!e||void 0===t||void 0===n)return;let s=e.split("/"),a=s.length>1?s.slice(0,-1).join("/"):"",l=s[s.length-1];if(l)try{let e=(0,r.getActiveTSSceneGraph)(),s=(0,nu.$v)(e,a,l);if(!s)return;M.Ez5?.openCodeWindowForNode(s.guid),i({codeFileGuid:s.guid,fromCharIndex:t,toCharIndex:t+n})}catch(e){(0,nm.x1)("Failed to go to source:",e)}})(s,a,l,n),children:(0,i.jsx)(tx.I,{})})})}let nY=(0,n(755444).CZ)("font");function nZ(){let{selectedFeatures:e,selectedJsxSource:t,preview:n}=(0,B.jK)();if(!t)return null;let s=e?.fontWeight==="bold";return(0,i.jsx)(eE.R,{children:(0,i.jsx)(em.ar,{"aria-label":(0,X.t)("cooper.inline_menu.bold"),tooltip:"toggle-bold",tooltipType:ef.Ib.LOOKUP,isActive:s,onClick:()=>{n.pointAndEditControl({type:"commandExec",command:{type:"fontWeight",sourceId:t.sourceId,newValue:s?"normal":"bold",oldValue:s?"bold":"normal"}})},children:(0,i.jsx)(tz.j,{})})})}function nJ(){let{selectedFeatures:e,selectedJsxSource:t,preview:n}=(0,B.jK)();if(!t)return null;let s=e?.fontStyle==="italic";return(0,i.jsx)(eE.R,{children:(0,i.jsx)(em.ar,{"aria-label":(0,X.t)("cooper.inline_menu.italic"),tooltip:"text-toggle-italic",tooltipType:ef.Ib.LOOKUP,isActive:s,onClick:()=>{n.pointAndEditControl({type:"commandExec",command:{type:"fontStyle",sourceId:t.sourceId,newValue:s?"normal":"italic",oldValue:s?"italic":"normal"}})},children:(0,i.jsx)(tB.s,{})})})}function nQ(){let{selectedFeatures:e}=(0,B.jK)(),t=e?.textDecoration==="underline",n=s.useCallback(()=>{console.warn("updateUnderlineState needs implementation")},[]);return(0,i.jsx)(eE.R,{children:(0,i.jsx)(em.ar,{"aria-label":(0,X.t)("type_settings.decoration.underline"),tooltip:"text-toggle-underline",tooltipType:ef.Ib.LOOKUP,isActive:t,onClick:n,children:(0,i.jsx)(tG.W,{})})})}function n$(){let{selectedFeatures:e,selectedJsxSource:t,preview:n}=(0,B.jK)(),[a]=s.useState(!1),r=s.useMemo(()=>[{textAlign:"left",label:(0,X.t)("fullscreen.type_panel.align_left"),icon:()=>(0,i.jsx)(tA.h,{})},{textAlign:"center",label:(0,X.t)("fullscreen.type_panel.align_center"),icon:()=>(0,i.jsx)(tL.N,{})},{textAlign:"right",label:(0,X.t)("fullscreen.type_panel.align_right"),icon:()=>(0,i.jsx)(tM.K,{})},{textAlign:"justify",label:(0,X.t)("inspect_panel.properties.justify"),icon:()=>(0,i.jsx)(tO.h,{})}],[]);if(!t)return null;let l=r.find(t=>t.textAlign===e?.textAlign)??r[0];return(0,i.jsx)(nR,{target:(0,i.jsx)(em.ar,{"aria-label":(0,X.t)("whiteboard.inline_menu.text_alignment"),tooltip:(0,X.t)("whiteboard.inline_menu.text_alignment"),tooltipType:ef.Ib.TEXT,showCaret:!0,isActive:a,children:l.icon()}),children:(0,i.jsx)(nO,{children:(0,i.jsx)(tR.W,{maxColumns:4,children:r.map(({textAlign:e,label:s,icon:a})=>(0,i.jsx)(em.ar,{"aria-label":s,isActive:l.textAlign===e,onClick:()=>n.pointAndEditControl({type:"commandExec",command:{type:"textAlign",sourceId:t.sourceId,newValue:e,oldValue:l.textAlign}}),children:a()},e))})})})}function n0(){let{selectedFeatures:e,selectedJsxSource:t,preview:n}=(0,B.jK)();if(!t)return null;let s=e?.fontSize??16;return(0,i.jsx)(eE.R,{children:(0,i.jsx)(tX,{size:s,onSizeChanged:e=>{n.pointAndEditControl({type:"commandExec",command:{type:"fontSize",sourceId:t.sourceId,newValue:e,oldValue:s}})}})})}function n1(){let e=(0,$.wA)(),[t]=s.useState(!1),{selectedFeatures:n,selectedJsxSource:a,preview:r}=(0,B.jK)(),l=(0,$.d4)(e=>e.fonts),o=(0,e3.UG)(),d=s.useMemo(()=>(0,e0.pn)(l),[l]),c=s.createRef();if(!a||!l)return null;let u=n?.fontFamily?.fontFamily??"sans-serif";return(0,i.jsx)(nR,{target:(0,i.jsx)(em.JE,{"aria-label":(0,X.t)("whiteboard.inline_menu.font_family_label",{currentFont:u}),tooltip:(0,X.t)("whiteboard.inline_menu.font_family"),tooltipType:ef.Ib.TEXT,disabled:t,children:(0,i.jsx)("div",{className:"xuxw1ft xb3r6kr xlyipyv x1dmp6jm",children:u})}),children:(0,i.jsx)(nO,{children:(0,i.jsx)(e2.iN,{currentFont:u,dispatch:e,dropdown:null,fonts:l,googleFontPreviews:o,hidden:!1,onFontChange:(e,t,i=eD.zk.YES)=>{if(i){let t=(0,e6.DY)(e,l),i=`${nY}/${t?.fontId}`;r.pointAndEditControl({type:"commandExec",command:{type:"fontFamily",sourceId:a.sourceId,newValue:{fontFamily:e,style:t?.styleName,url:i},oldValue:n?.fontFamily}})}},pickerShown:null,recordingKey:"font-family-control",restrictedFontSet:eJ.Qr.GOOGLE_FONTS,searchBarInputRef:c,selectedNodeIds:[],versionsForStyles:d})})})}let n2={kMwMTN:"x1uw1ob",kGuDYH:"x17akokd",k63SB2:"xopfts3",kZKoxP:"xg7h5cd",kLqNvP:"",kt4wiu:"",kLWn49:"xno9bf3",kmVPX3:"x1mh6rdz",kg3NbH:"",kuDDbn:"",kE3dHu:"",kP0aTx:"",kpe85a:"",k8WAf4:"",kLKAdn:"",kGO01o:"",kfzvcC:"x67bb7w",kVAEAm:"xixxii4",kzqmXN:"xeq5yr9",kY2c9j:"x4smtjo",$$css:!0},n3={container:e=>[n2,{kbCHJM:null!=e.left?"xgq9j65":e.left,k87sOh:null!=e.top?"xjbys53":e.top,$$css:!0},{"--x-left":(e=>"number"==typeof e?e+"px":null!=e?e:void 0)(e.left),"--x-top":(e=>"number"==typeof e?e+"px":null!=e?e:void 0)(e.top)}]};function n5(){let e=s.useRef(null),t=s.useRef(null),n=s.useRef(null),a=s.useRef(null),[r,o]=s.useState({left:-9999,top:-9999}),{editMode:d,preview:c,selectedControls:u,selectedElementRect:p}=(0,B.jK)();if(s.useLayoutEffect(()=>{c.iframe&&e.current&&p&&o(function(e,t,n){let i=n.getBoundingClientRect(),s=i.width/n.offsetWidth,a=t.getBoundingClientRect(),r=a?.width||0,l=a?.height||0,o=e.y-l,d=i.x+e.x+e.width/2-r/2;return(o=i.y+e.y+e.height+12)+l>i.height+i.y&&(o=i.y+i.height-l-36),o<i.y&&(o=i.y+12),d<i.x&&(d=i.x),d+r>i.width+i.x&&(d=i.x+i.width-r),d*=s,{top:o*=s,left:d}}(p,e.current,c.iframe))},[c.iframe,p]),!u||!p)return null;let m=u.includes("text"),h=u.includes("flex")||u.includes("grid")||u.includes("block");return(0,i.jsx)("div",{...l.Ay.props(n3.container(r)),children:(0,i.jsxs)(nO,{menuRef:e,children:[(0,i.jsx)("div",{style:{width:`${("style"===d?n:a).current?.offsetWidth}px`},className:"xffdob0 x13w7htt xrvj5dj x1xe40qn",children:(0,i.jsx)("div",{ref:t,style:{marginTop:"style"===d?"0px":"-60px"},className:"x1vqgdyp x1on81qs xt4q7o6",children:(0,i.jsx)("div",{children:(0,i.jsxs)("div",{ref:n,className:"x78zum5 xc26acl xeq5yr9 x1vqgdyp",children:[h&&(0,i.jsx)(n6,{}),m&&(0,i.jsx)(n4,{})]})})})}),(0,i.jsxs)("div",{className:"x78zum5 xc26acl xeq5yr9 x1vqgdyp x9f619 x1cmmqis",children:[(0,i.jsx)(nX,{}),(0,i.jsx)(en.c,{}),(0,i.jsx)(nq,{})]})]})},"point-and-edit-toolbar")}function n4(){return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"x78zum5 x1q0g3np x6s0dn4 xl56j7k xt970qd xfn1xvj",children:(0,i.jsxs)("div",{className:"xxk0z11 x78zum5 x1q0g3np x6s0dn4 xl56j7k xy6u8y9 x4pvk5x",children:[(0,i.jsx)(n1,{}),(0,i.jsx)("div",{className:"x5yr21d x1i1rx1s xq5lo5s"}),(0,i.jsx)("div",{className:"x1x862rh",children:(0,i.jsx)(nz,{})})]})}),(0,i.jsx)(en.c,{}),(0,i.jsx)(n0,{},"font-size"),(0,i.jsx)(en.c,{}),(0,i.jsx)(nZ,{},"font-weight"),(0,i.jsx)(nJ,{},"font-style"),(0,i.jsx)(nQ,{},"underline"),(0,i.jsx)(en.c,{}),(0,i.jsx)(n$,{},"text-align"),(0,i.jsx)(en.c,{})]})}function n6(){return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(nB,{}),(0,i.jsx)(en.c,{}),(0,i.jsx)(nG,{}),(0,i.jsx)(nP,{}),(0,i.jsx)(en.c,{}),(0,i.jsx)(nH,{}),(0,i.jsx)(en.c,{})]})}function n7({chatNodeId:e,preview:t}){let n=(0,B.lA)(),[a,r]=s.useState("style"),l={chatNodeId:e,preview:t,editMode:a,setEditMode:r,enabled:n.enabled,selectedControls:n.selectedControls,selectedElementRect:n.selectedElementRect,selectedFeatures:n.selectedFeatures,selectedJsxSource:n.selectedJsxSource};return s.useEffect(()=>{let e=t.iframe;if(!e)return;let i=()=>{(0,B.wG)({enabled:!1})},s=()=>{t.pointAndEditControl({type:"appPointerEnter"})},a=()=>{t.pointAndEditControl({type:"appPointerLeave"})},r=e=>{"Escape"===e.key&&t.pointAndEditControl({type:"appEscape"})};return n.enabled&&(document.addEventListener("keydown",r),document.addEventListener("pointerenter",s),document.addEventListener("pointerleave",a)),e.addEventListener("load",i),()=>{document.removeEventListener("keydown",r),document.removeEventListener("pointerenter",s),document.removeEventListener("pointerleave",a),e.removeEventListener("load",i)}},[t,n.enabled]),(0,i.jsx)(B.ZW.Provider,{value:l,children:l.enabled&&(0,Z.createPortal)((0,i.jsx)(n5,{},"point-and-edit-toolbar"),document.body)})}var n8=n(923594);function n9({state:e,sitesPreview:t,chatNodeId:n,codeSelectionToRender:s,isVisible:a,onRefresh:r}){return e===C.d.BUILD_ERROR||e===C.d.RUNTIME_ERROR?(0,i.jsx)("div",{className:"xh8yej3 x47corl",children:(0,i.jsx)(n8.rH,{})}):t&&n&&"instance"===s.type?(0,f.kc)().bake_point_and_edit?a?(0,i.jsx)(n7,{chatNodeId:n,preview:t}):null:(0,i.jsx)(nM,{preview:t,isVisible:a,refreshPreview:r,chatNodeId:n,codeInstanceNodeId:s.codeInstanceNodeGuid}):null}function ie({codeSelectionToRender:e,state:t,sitesPreview:n,isVisible:a,disablePointerEvents:r,chatNodeId:l,dirty:o,hasInitialRender:d,iframeReady:c,iframeKey:u,iframeSrc:p,onIframeRef:m,onRefresh:h}){let f=(0,T.Oc)(),g=(0,Y.P)(),x=(0,s.useRef)(m);x.current=m;let _=(0,s.useCallback)(e=>{x.current(e)},[]);return(0,i.jsx)("div",{className:"x78zum5 xdt5ytf x5yr21d xh8yej3 x1n2onr6",style:{backgroundColor:f?q.Tj.bg:q.Tj.bgSecondary},children:(0,i.jsx)("div",{className:"x5yr21d xh8yej3 x1n2onr6",children:(0,i.jsxs)("div",{className:"x10l6tqk x13vifvy x3m8u43 x1ey2m1c xu96u03 x9f619",style:{display:"flex",transition:"opacity 0.2s ease-in-out, filter 0.2s ease-in-out",filter:o?"blur(2px)":"none",pointerEvents:o?"none":"auto",opacity:c?1:0},children:[(0,i.jsx)(n9,{state:t,sitesPreview:n,chatNodeId:l,codeSelectionToRender:e,isVisible:a,onRefresh:h}),(0,i.jsx)("iframe",{title:(0,X.t)("sites.code_component.preview_title"),src:p,ref:_,allow:g,...{0:{className:"x1bpp3o7 xh8yej3 x5yr21d x1lliihq"},4:{className:"x1bpp3o7 xh8yej3 x5yr21d x1lliihq x47corl"},2:{className:"x1bpp3o7 xh8yej3 x5yr21d x1s85apg"},6:{className:"x1bpp3o7 xh8yej3 x5yr21d x47corl x1s85apg"},1:{className:"x1bpp3o7 xh8yej3 x5yr21d x1s85apg"},5:{className:"x1bpp3o7 xh8yej3 x5yr21d x47corl x1s85apg"},3:{className:"x1bpp3o7 xh8yej3 x5yr21d x1s85apg"},7:{className:"x1bpp3o7 xh8yej3 x5yr21d x47corl x1s85apg"}}[!!r<<2|!!(t===C.d.BUILD_ERROR||t===C.d.RUNTIME_ERROR)<<1|!d<<0]},u)]})})})}function it({state:e,disablePointerEvents:t,props:n,codeFileGuid:a,codeExportName:l,withBaseStyles:o,showViewOptions:d=!1,codeSelectionToRender:c,chatNodeId:u,instanceSwapPropertyGuids:A,imagePropAssetHashes:L,onChangePreviewState:M,jsxDev:O=!1,isFullscreen:R=!1,isVisible:P,onError:D,onBuild:F,productType:z,onRegisterIframeRefresh:B,onRegisterSitesPreview:G,surface:V}){let H=(0,T.Oc)(),K=(0,s.useRef)(null),q=(0,s.useRef)(null),[X,Y]=(0,g.fp)(j.Y_),Z=(0,g.md)(S.jD),J=N({isFullscreen:R,codeSelectionToRender:c}),Q="instance"===c.type?(0,r.getActiveTSSceneGraph)().get(c.codeInstanceNodeGuid):(0,r.getActiveTSSceneGraph)().get(c.codeBehaviorNodeGuid),$=(0,E.DM)(Q),ee=(0,E.IO)(Q),[,et]=(0,E.jT)(),[en,ei]=(0,g.fp)((0,b.df)(Q?.guid??"")),es=(0,g.md)(_.ze),[ea,er]=(0,s.useState)(0),[el]=(0,s.useState)(()=>{let e=(0,m.ft)();return new U(z,new k.b({isFoundry:!1,surface:V,codeLibraryFormat:e}),new W({fileKey:es,surface:V,codeLibraryFormat:e}),er)}),[eo,ed]=(0,s.useState)(el.sitesPreview),[ec,eu]=(0,s.useState)(el.readyIframe),[ep,em]=(0,s.useState)(el.isPreviewDirty),[eh,ef]=(0,s.useState)(!1);(0,s.useEffect)(()=>()=>{el.dispose()},[el]);let eg=(0,s.useCallback)(e=>{eu(e)},[]),ex=(0,s.useCallback)(()=>{M(C.d.BUILDING),(0,f.kc)().bake_point_and_edit||eo?.setDirectManipulationEnabled({enabled:!1}),F?.()},[M,F,eo]),e_=(0,s.useCallback)(e=>{M(C.d.LOADED),ei(Date.now()),q.current=e,(0,f.kc)().bake_point_and_edit&&eo?.pointAndEditControl({type:"hmrAfterUpdate"})},[M,ei,eo]),ey=(0,s.useCallback)(e=>{let t=()=>{let t=e.type!==y.m.FAILED,n=(0,p.N)().getSourceCodeHash();x.az.trackDefinedMetric("foundry.preview_render_result",{success:t,fileKey:es??"",hitRenderTimeout:e.timedOut,isCachedPreview:!1,sourceCodeHash:n,productType:z,errorPhase:e.phase??"n/a",buildType:"local",codeLibraryFormat:"0"})};switch(e.type){case y.m.FAILED:t();return;case y.m.SUCCESS:break;default:(0,h.S9)(e.type,"Unknown iframe render result type")}ef(!0),M(C.d.LOADED),t()},[M,es,z]),ev=(0,s.useCallback)(e=>{g.zl.set(v.mK,e),ed(e)},[ed]),eb=(0,s.useCallback)(async(e,t)=>{let n=en;t===E.S4.BUILD&&ei(n=Date.now()),M(t===E.S4.BUILD?C.d.BUILD_ERROR:C.d.RUNTIME_ERROR);let i={type:"error",sender:"system",message:e.stack?q.current?.sourceMap?await (0,w.H)(e.stack,q.current.sourceMap):e.stack:`${e.name}: ${e.message}`,phase:t,timestamp:Date.now()},s=[...(0,E.Yb)(),i];et(e=>[...e,i]);let a=s.filter(e=>"error"===e.type).map(e=>e.message);D?.(e,t,a,n)},[q,en,M,et,D,ei]),eC=(0,s.useCallback)(async(e,t,n)=>{let i;"error"===e?i=(n=q.current?.sourceMap?await (0,w.H)(n,q.current.sourceMap):n).startsWith("Warning:")?{type:"warn",sender:t,message:n,timestamp:Date.now()}:{type:"error",sender:t,message:n,phase:E.S4.RUNTIME,timestamp:Date.now()}:(!(0,I.q)(n)||(0,I.D)())&&(i={type:e,sender:t,message:n,timestamp:Date.now()}),i&&et(e=>[...e||[],i])},[q,et]),ej=(0,s.useCallback)(()=>{et([])},[et]),ek=H||!(0,f.kc)().code_layers_zoom_controls,ew=(0,j.Wn)(a),eE=(0,g.md)(v.m1),eT=(()=>{switch(eE){case v.vO.IN_PROGRESS:case v.vO.AWAITING_COMMIT:return!0;case v.vO.COMMITTED:case v.vO.ERROR:case v.vO.IDLE:return!1;default:return(0,h.S9)(eE,!1,"Unknown chat message state")}})();(0,s.useLayoutEffect)(()=>{el.updateOptions({designToCodeGenerating:ew,chatMessageInProgress:eT,buildNumber:ee,nodeId:J.id,codeBehaviorTargetNodeId:J.behaviorTargetId,codeExportName:l,props:n,instanceSwapPropertyGuids:A,imagePropAssetHashes:L,activeBreakpoint:J.breakpoint,clipContents:J.clipContents,withBaseStyles:o,jsxDev:O,shadcn:ek,noWrapper:ek,allowScaling:!ek||void 0!==J.behaviorTargetId,scaleLinearly:d&&X,width:ek?void 0:J.size?.x,height:ek?void 0:J.size?.y,onSitesPreview:ev,onReadyIframe:eg,onPreviewDirty:em,onError:eb,onConsoleLog:eC,onConsoleClear:ej,onBuildStart:ex,onBuildResult:e_,onRenderComplete:ey})},[ew,eT,ee,c.codeInstanceNodeGuid,l,n,A,L,J,o,O,ek,ev,eg,em,eb,eC,ej,ex,e_,ey,X,d,el]);let eS=s.useCallback(e=>{K.current=e,e?el.mountIframe(e):el.unmount()},[el]),eI=(0,s.useRef)($),eN=(0,s.useRef)(M),eA=(0,s.useRef)(el);eI.current=$,eN.current=M,eA.current=el;let eL=(0,s.useCallback)(()=>{eA.current.previewUpdateTracker.triggerReload("user-triggered-reload"),eI.current(),eN.current(C.d.BUILDING),eA.current.forceRefresh(),ef(!1),(0,E.px)(),K.current&&er(e=>e+1)},[]);return(0,s.useEffect)(()=>{B&&B(eL)},[B,eL]),(0,s.useEffect)(()=>{G&&G(eo)},[G,eo]),(0,i.jsx)(ie,{chatNodeId:u,codeSelectionToRender:c,dirty:ep,disablePointerEvents:t,hasInitialRender:eh,iframeKey:ea.toString(),iframeReady:!!ec&&ec===K.current,iframeSrc:Z,isVisible:P,onIframeRef:eS,onRefresh:$,sitesPreview:eo,state:e})}var ii=n(130249),is=n(328341),ia=n(827030),ir=n(638641),il=n(431146),io=n(275325),id=n(846337),ic=n.n(id),iu=n(235011),ip=n(301510),im=n(385446),ih=n.n(im),ig=n(737552);let ix=["The above error occurred in"],i_=[io.f.NPM],iy="preview_sandbox-loading";function iv({state:e,disablePointerEvents:t,props:n,codeExportName:a,codeFileExportName:l,withBaseStyles:o,showViewOptions:d=!1,codeSelectionToRender:c,chatNodeId:u,instanceSwapPropertyGuids:b,onChangePreviewState:k,isFullscreen:w=!1,isVisible:A,sandbox:M,onError:R,onBuild:P,productType:z,onRegisterIframeRefresh:G,onRegisterSitesPreview:U}){let V=(0,T.Oc)(),H=(0,m.ft)(),K=(0,$.wA)(),W=N({isFullscreen:w,codeSelectionToRender:c}),q=(0,s.useRef)(null),Y=(0,_.tS)(),Z=(0,s.useRef)(null),J=(0,g.md)(S.jD),[Q,ee]=(0,s.useState)(!1),[en,es]=(0,s.useState)(0),ea=M.perfTracker,er=M.previewUpdateTracker,[,el]=(0,E.jT)(),eo=(0,g.md)(ne.Qt),[ed,ec]=(0,s.useState)(!1),eu=(0,ia.Bg)(iy),ep=(0,is.ZC)(M.state),[em,eh]=(0,s.useState)(null),[ef,eg]=(0,g.fp)(j.Y_),[ex,e_]=(0,s.useState)(null),[ey,ev]=(0,s.useState)(null),eb=V||!(0,f.kc)().code_layers_zoom_controls,eC=(0,s.useRef)(null),ej=function({instanceSwapPropertyGuids:e,nodeId:t,codeBehaviorTargetNodeId:n,perfTracker:i}){let[a,r]=(0,s.useState)(null),l=(0,ip.w)(i),o=(0,ig.fh)(e,ih()),d=(0,ei.wA)(e=>{let t=(0,t1.zN)(e);return t?.imageImports?.map(e=>e.hash)??[]});return(0,s.useEffect)(()=>{D({instanceSwapPropertyGuids:o,nodeId:t,codeBehaviorTargetNodeId:n,perfTracker:l.current}).then(e=>{r({success:!0,bundle:e})}).catch(e=>{r({success:!1,error:e instanceof Error?e:Error(e?.toString()??"Unknown error")})})},[l,o,d,t,n]),a}({instanceSwapPropertyGuids:b,nodeId:W.id,codeBehaviorTargetNodeId:W.behaviorTargetId,perfTracker:ea}),ek=(0,s.useCallback)(()=>{Z.current&&es(e=>e+1)},[]),ew=(0,s.useCallback)(()=>{er.triggerReload("user-triggered-reload"),ek(),(0,E.px)()},[ek,er]),eE=(0,s.useCallback)((e,t)=>{if(M.state===il.TT.CACHED_PREVIEW){Y&&x.az.trackDefinedEvent("foundry.cache_preview_render",{fileKey:Y,sourceCodeHash:(0,p.N)().getSourceCodeHash(),success:!1,codeLibraryFormat:H.toString()});return}k(t===E.S4.BUILD?C.d.BUILD_ERROR:C.d.RUNTIME_ERROR);let n={type:"error",sender:"system",message:(()=>{let t=e.stack??"";if(!((e.stack?.split("\n")??[])[0]??"").includes(e.message)){let n=e.name&&"Error"!==e.name?`${e.name}: ${e.message}`:e.message;t=`${n}
${t}`}return t.trim()})(),phase:t,timestamp:Date.now()},i=[...(0,E.Yb)(),n];el(e=>[...e,n]);let s=i.filter(e=>"error"===e.type).map(e=>e.message);R?.(e,t,s,ex?.getTime()??null)},[k,el,ex,R,M,Y,H]),eT=(0,s.useCallback)(()=>{ee(!0),(0,E.px)({prefixesToKeep:i_,sendersToKeep:["system"]})},[]),eS=(0,s.useCallback)(e=>{er.handleBuildError(e),eE?.(e,E.S4.BUILD)},[eE,er]),eI=(0,s.useCallback)(e=>{er.handleRuntimeError(e),eE?.(e,E.S4.RUNTIME)},[eE,er]),eN=(0,s.useCallback)((e,t)=>{let n=(0,r.getActiveTSSceneGraph)().get(W.id);n&&n.isAlive&&q.current&&(M.state===il.TT.PROVISIONED||M.state===il.TT.REPROVISIONING)&&t?.directManipulationEditor.processEvent(e,{objectPath:ii.og(n.codeFileFullPath),entries:p.N().asTransferableEntries(),codeBuildId:q.current})},[W.id,M.state]),eA=(0,s.useCallback)(()=>{eC.current&&eC.current.getTime()+1e3>Date.now()||(er.startHMRUpdate(),(0,E.px)({prefixesToKeep:i_,sendersToKeep:["system"]}))},[er]),eL=(0,s.useCallback)(({codeBuildId:e})=>{if(eC.current&&eC.current.getTime()+1e3>Date.now()){eC.current=null;return}er.completeHMRUpdate(),e_(new Date),k(C.d.LOADED),q.current=e},[k,er]),eM=(0,s.useCallback)((e,t,n)=>{let i=(()=>{switch(e){case"debug":case"log":case"warn":if("system"===t&&!(0,I.D)())return null;return{type:e,sender:t,message:n,timestamp:Date.now()};case"error":if("user"===t)return{type:"error",sender:t,message:n,phase:E.S4.RUNTIME,timestamp:Date.now()};if(n.startsWith("Warning:"))return{type:"warn",sender:t,message:n,timestamp:Date.now()};if(n.startsWith("[vite] Failed to reload")){eC.current=new Date;let e=Error(n);return e.stack=void 0,eE(e,E.S4.BUILD),null}if(ix.some(e=>n.startsWith(e)))return null;return{type:"error",sender:t,message:n,phase:E.S4.RUNTIME,timestamp:Date.now()};default:return(0,h.S9)(e,"Unknown console log type"),null}})();i&&el(e=>[...e,i])},[el,eE]),eO=(0,s.useCallback)(()=>{ea.record("import_module_start")},[ea]),eR=(0,s.useCallback)(()=>{ea.record("import_module_stop")},[ea]),eP=(0,s.useCallback)(()=>{ea.record("cached_preview_iframe_load_start")},[ea]),eD=(0,s.useCallback)(()=>{ea.record("cached_preview_iframe_load_stop")},[ea]),eF=(0,s.useCallback)(()=>{er.triggerReload("error-recovery-triggered-reload"),ek()},[ek,er]),ez=(0,s.useCallback)(e=>{"error-requiring-refresh"===e?er.triggerReload("user-error-triggered-reload"):(0,h.S9)(e,"Unknown iframe dirty reason"),ek()},[ek,er]),{attachIframeRenderer:eB,detachIframeRenderer:eG,sitesPreview:eU}=function({entrypoint:e,websiteBundleResult:t,codeNodeInfo:n,hideCodeLayersZoomControls:i,showViewOptions:a,codeExportName:r,codeFileExportName:l,withBaseStyles:o,scaleLinearly:d,props:c,instanceSwapPropertyGuids:u,renderHandlers:p,iframeHandlers:m,productType:x}){let[_,b]=(0,s.useState)(null),C=(0,iu.MF)(new S.fj({productType:x,previewSurfaceForLogging:"component_preview"})),[j,k]=(0,s.useState)(C.sitesPreview),w=(0,ip.w)(p),E=(0,ip.w)(m),T=(0,s.useRef)(!1),I=(0,s.useRef)(!1),[N,A]=(0,s.useState)(!1),M=(0,s.useCallback)(()=>{j&&(A(!1),b(new y.A(j)),E.current.onReady?.())},[j,E]),R=(0,s.useCallback)((e,t)=>{if((0,f.kc)().sts_iframe_recovery){if(T.current){(0,f.kc)().internal_only_debug_tools&&console.warn(`${io.f.SITES_PREVIEW} iframe ${e} occurred but recovery already attempted`);return}(0,O.$D)(L.e.SITES_WEB_RUNTIME,t??Error(`iframe recovery triggered due to ${e}`),{extra:{errorType:e}}),T.current=!0,E.current.onIframeRecoveryNeeded?.(e,t)}},[E]),P=(0,s.useCallback)(e=>{E.current.onInspectElementEvent?.(e,j)},[E,j]),D=(0,s.useCallback)(e=>{E.current.onPointAndEditInspectorEvent?.(e)},[E]),z=(0,s.useCallback)(({codeBuildId:e})=>{I.current?(I.current=!1,E.current.onIframeDirty("error-requiring-refresh")):E.current.onHMRAfterUpdate?.({codeBuildId:e})},[E]),B=(0,s.useCallback)(()=>{C.attachHandlers({...ic()(E.current,"onIframeDirty"),onIframeReady:M,onIframeRecoveryNeeded:R,onInspectElementEvent:P,onPointAndEditInspectorEvent:D,onHMRAfterUpdate:z})},[E,M,P,D,z,R,C]),G=(0,s.useCallback)(({iframe:e})=>{A(!1),C.reset(),C.mountIframe(e,{useReactDev:!0});let t=C.createSitesPreview({history:new F.A,skipSetPreviewedNode:!0,options:{skipPreviewUpdateListener:!0,generateFullAssets:!0,withBaseStyles:o,usingSandbox:!0,labs:{runtimeDebugTools:!1}}});B(),k(t)},[B,k,C,o]),U=(0,s.useCallback)(()=>{b(null),C.reset(),k(null)},[b,C,k]);return(0,s.useEffect)(()=>{B()},void 0),(0,s.useEffect)(()=>{if(_){if(e){if(t){if(t.success){let s=!i||void 0!==n.behaviorTargetId,p=i?void 0:n.size?.x,m=i?void 0:n.size?.y;_.update({primitives:{nodeId:n.id,codeBehaviorTargetNodeId:n.behaviorTargetId,codeExportName:r,codeFileExportName:l,withBaseStyles:o,clipContents:n.clipContents,allowScaling:s,scaleLinearly:a&&d,width:p,height:m},deepEqual:{props:c??{},instanceSwapPropertyGuids:u,activeBreakpoint:n.breakpoint},pure:{referencedWebsiteBundle:t.bundle}},{deepEqual:{entrypoint:e}}),_?.render({onlyIfChanged:!0,onRenderStart:({reason:e})=>w.current.onRenderStart({reason:e})}).then(e=>{switch(N||e.type!==y.m.FAILED||(I.current=!0),e.type===y.m.SUCCESS&&A(!0),e.type){case y.m.NO_CHANGES:case y.m.NOT_INITIALIZED:case y.m.CANCELED:break;case y.m.SUCCESS:case y.m.FAILED:w.current.onRenderComplete(e);break;default:h.S9(e,null,"Unknown iframe render result type")}})}else _.update(t.error)}else _.update(null)}else _.update(null)}},void 0),(0,s.useEffect)(()=>{g.zl.set(v.mK,j)},[j]),(0,s.useEffect)(()=>()=>{_?.destroy()},[_]),{attachIframeRenderer:G,detachIframeRenderer:U,sitesPreview:j}}({entrypoint:em,websiteBundleResult:ej,codeNodeInfo:W,hideCodeLayersZoomControls:eb,showViewOptions:d,codeExportName:a,codeFileExportName:l,withBaseStyles:o,scaleLinearly:ef,props:n,instanceSwapPropertyGuids:b,productType:z,renderHandlers:{onRenderStart:({reason:e})=>{ea.record("render_start"),er.startTriggeredUpdate({isCachedPreview:em?.type==="snapshot",reason:e}),(0,f.kc)().bake_point_and_edit||eU?.setDirectManipulationEnabled({enabled:!1}),P?.()},onRenderComplete:e=>{switch(er.completeTriggeredUpdate(e),e.type){case y.m.SUCCESS:ea.setBuildMetadata({isBuildSuccessful:!0}),ea.record("render_stop"),ea.trackFigmentEvent(),x.az.trackDefinedMetric("foundry.preview_render_result",{success:!0,fileKey:Y??"",hitRenderTimeout:e.timedOut??!1,isCachedPreview:e.isCachedPreview,sourceCodeHash:e.sourceCodeHash,productType:z,errorPhase:"n/a",buildType:"foundry",codeLibraryFormat:H.toString()}),q.current=e.codeBuildId,e_(new Date),ev(e.isCachedPreview?"snapshot":"sandbox"),k(C.d.LOADED);break;case y.m.FAILED:ea.setBuildMetadata({isBuildSuccessful:!1}),ea.record("render_stop"),ea.trackFigmentEvent(),x.az.trackDefinedMetric("foundry.preview_render_result",{success:!1,fileKey:Y??"",hitRenderTimeout:!1,isCachedPreview:e.isCachedPreview,sourceCodeHash:e.sourceCodeHash,productType:z,errorPhase:e.phase,buildType:"foundry",codeLibraryFormat:H.toString()}),eE?.(e.error,E.S4.BUILD);break;default:(0,h.S9)(e,"Unknown iframe render result type")}}},iframeHandlers:{onReady:eT,onBuildError:eS,onRuntimeError:eI,onHMRBeforeUpdate:eA,onHMRAfterUpdate:eL,onConsoleLog:eM,onImportModuleStart:eO,onImportModuleEnd:eR,onCachedPreviewIframeLoadStart:eP,onCachedPreviewIframeLoadEnd:eD,onInspectElementEvent:eN,onPointAndEditInspectorEvent:B.rW,onIframeRecoveryNeeded:eF,onIframeDirty:ez}}),eV=(0,s.useMemo)(()=>eU?.directManipulationEditor.directManipulationEnabledAtom??(0,g.eU)(!1),[eU]),eH=(0,g.md)(eV),eK=s.useCallback(e=>{Z.current!==e&&(k(C.d.BUILDING),ev(null),ee(!1),eG(),Z.current=e,e&&eB({iframe:e}))},[eB,eG,k]);(0,s.useEffect)(()=>{(0,E.px)()},[W.id]),(0,s.useEffect)(()=>{G&&G(ew)},[G,ew]),(0,s.useEffect)(()=>{U&&U(eU)},[U,eU]),(0,s.useEffect)(()=>{switch(M.state){case il.TT.FAILED:case il.TT.PROVISIONING:case il.TT.REPROVISIONING:eh(null);break;case il.TT.CACHED_PREVIEW:eh({type:"snapshot",jsUrl:M.cachedPreview.jsUrl,cssUrl:M.cachedPreview.cssUrl});break;case il.TT.PROVISIONED:eh({type:"sandbox",jsUrl:M.url}),(ep===il.TT.REPROVISIONING||ep===il.TT.FAILED)&&ek();break;default:(0,h.S9)(M,"Unknown sandbox state")}},[M,ep,ek]),(0,s.useEffect)(()=>{if(ed)return;let e=(0,p.N)(),t=()=>{ec(!0)};return e.on("entriesChanged",t),()=>{e.off("entriesChanged",t)}},[ed]);let eW=ed||eo||eH;return(0,s.useEffect)(()=>{switch(M.state){case il.TT.PROVISIONING:break;case il.TT.FAILED:case il.TT.REPROVISIONING:eu&&K(et.F.dequeue({matchType:iy}));break;case il.TT.PROVISIONED:eu&&"sandbox"===ey&&K(et.F.dequeue({matchType:iy}));break;case il.TT.CACHED_PREVIEW:!eu&&eW&&K(et.F.enqueue({type:iy,message:(0,X.t)("figmake.loading.live.preview"),icon:ir.zX.SPINNER,preventDismissal:!0,timeoutOverride:1/0}));break;default:(0,h.S9)(M,"Unknown sandbox state")}},[eW,M,ey,eu,K]),(0,s.useEffect)(()=>()=>{eu&&K(et.F.dequeue({matchType:iy}))},[K,eu]),(0,i.jsx)(ie,{chatNodeId:u,codeSelectionToRender:c,dirty:!1,disablePointerEvents:t,hasInitialRender:!!ey,iframeKey:en.toString(),iframeReady:Q,iframeSrc:J,isVisible:A,onIframeRef:eK,onRefresh:ew,sitesPreview:eU,state:e})}function ib(e){return e.sandbox?(0,i.jsx)(iv,{...e,sandbox:e.sandbox,surface:e.surface}):(0,i.jsx)(it,{...e,surface:e.surface})}var iC=n(315922);let ij=(0,s.memo)(function(e){return(0,i.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,"data-fpl-icon-size":"24",children:(0,i.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",fillRule:"evenodd",d:"M16.5 7h-9a.5.5 0 0 0-.5.5v9a.5.5 0 0 0 .5.5h9a.5.5 0 0 0 .5-.5v-9a.5.5 0 0 0-.5-.5m-9-1A1.5 1.5 0 0 0 6 7.5v9A1.5 1.5 0 0 0 7.5 18h9a1.5 1.5 0 0 0 1.5-1.5v-9A1.5 1.5 0 0 0 16.5 6zm1.646 4.146a.5.5 0 0 0 0 .708L10.293 12l-1.147 1.146a.5.5 0 0 0 .708.708l1.5-1.5a.5.5 0 0 0 0-.708l-1.5-1.5a.5.5 0 0 0-.708 0M12.5 13a.5.5 0 0 0 0 1h2a.5.5 0 0 0 0-1z",clipRule:"evenodd"})})});var ik=n(816689);function iw(){let[e]=(0,E.jT)(),t=e?.filter(e=>"error"===e.type),[n,a]=(0,g.fp)(v.YD),r=(0,g.Xr)(v.Vo),[l,o]=s.useState(!1);return n||!t||0===t.length||l?null:(0,i.jsxs)("button",{className:"x10l6tqk x191j7n5 x1nrll8i xuuh30 x78zum5 xl56j7k x6s0dn4 x1jnr06f x1ihmbg5 xxvmw7z x1sxf85j xt970qd xfn1xvj x3brusf",onClick:()=>{r("console"),a(!0)},children:[(0,i.jsx)(ij,{}),(0,i.jsx)("div",{children:(0,X.t)("living_designs.chat.errors.error_count",{count:t.length})}),(0,i.jsx)("button",{className:"x1ljf5od xjbqb8w",onClick:e=>{e.stopPropagation(),o(!0)},children:(0,i.jsx)(ik.f,{})})]})}function iE(){return(0,i.jsx)("div",{className:"x10l6tqk x10a8y8t x1vjfegm x78zum5 xl56j7k x6s0dn4 x47corl","data-testid":"html-preview-loading-overlay",children:(0,i.jsx)(a.k,{})})}function iT({codeSelectionToRender:e,chatNodeId:t,jsxDev:n=!1,onPreviewStateChange:a,showViewOptions:l=!1,windowRef:c,isFullscreen:p,useProgressBarWhenLoading:m,isVisible:h,sandbox:f,onError:g,onBuild:x,disableDrawer:_=!1,disablePointerEvents:y=!1,onRegisterIframeRefresh:v,onRegisterSitesPreview:b,surface:j}){let{componentPreviewState:k,setComponentPreviewState:w}=(0,C.k)(),S=e?"instance"===e.type?(0,r.getActiveTSSceneGraph)().get(e.codeInstanceNodeGuid):(0,r.getActiveTSSceneGraph)().get(e.codeBehaviorNodeGuid):null,I=S?.isCodeComponent?S:S?.backingCodeComponent,N=S?.isCodeFile?S:I?.exportedFromCodeFile,A=N?(0,u.n)(f,N):void 0,{properties:L,instanceSwapPropertyGuids:M}=(0,E.Aw)(e),O=(0,s.useCallback)(e=>{w(e),a?.(e)},[a,w]);(0,E.pO)();let R=(0,T.Oc)(),P=(0,s.useMemo)(()=>{let e=[];for(let t of Object.values(L))"object"==typeof t&&"image"in t&&void 0!==t.image&&(e.push(t.image),void 0!==t.animatedImage&&e.push(t.animatedImage));return e},[L]),D=(0,s.useRef)(null),F=o.D.getState(),z=(0,d.v5)(F.selectedView,null);if((0,E.jS)(S),!e||!S)return null;let B=(0,u.d)(S);return(0,i.jsxs)("div",{className:"x78zum5 xdt5ytf x5yr21d xh8yej3 x1n2onr6",ref:D,children:[(0,i.jsx)(ib,{chatNodeId:t,codeExportName:B,codeFileExportName:A,codeFileGuid:N?.guid,codeSelectionToRender:e,disablePointerEvents:y,imagePropAssetHashes:P,instanceSwapPropertyGuids:M,isFullscreen:p,isVisible:h,jsxDev:n,onBuild:x,onChangePreviewState:O,onError:g,onRegisterIframeRefresh:v,onRegisterSitesPreview:b,productType:z,props:L,sandbox:f,showViewOptions:l,state:k,surface:j,withBaseStyles:!R}),(0,i.jsx)(iS,{codeSelectionToRender:e,componentPreviewState:k,disableDrawer:_,isFigmake:R,useProgressBarWhenLoading:m,windowRef:c})]})}function iS({codeSelectionToRender:e,componentPreviewState:t,disableDrawer:n,isFigmake:s,useProgressBarWhenLoading:a,windowRef:r}){let l=t===C.d.INITIAL||t===C.d.BUILDING;return(0,i.jsxs)(i.Fragment,{children:[!s&&!n&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(iC._,{codeSelectionToRender:e,windowRef:r}),(0,i.jsx)(iw,{})]}),l&&(a?(0,i.jsx)(c.g,{}):(0,i.jsx)(iE,{}))]})}},454333:(e,t,n)=>{n.d(t,{D:()=>g,F:()=>x});var i=n(104076),s=n(716976),a=n(607468),r=n(980852);n(120440);var l=n(641518),o=n(361170),d=n(192075),c=n(739710),u=n(460418),p=n(218111),m=n(406483),h=n(700126),f=n(390392);function g({guids:e,recordingKey:t,hideVariableBinding:n,entrypoint:d="default",windowRef:g,behaviorPropAssignmentHelpers:x}){let _=(0,h.l)(),{typedPropDefsExcludingHidden:y,assignmentValuesByDefId:v}=(0,u.an)(e,c.OE.ASSIGNMENT,!0),{propAssignments:b,typedPropDefs:C,submitBehaviorAssignment:j,clearBehaviorVariableBinding:k,behaviorAssignmentInfo:w}=x??{propAssignments:v,typedPropDefs:y,submitBehaviorAssignment:void 0,clearBehaviorVariableBinding:void 0,behaviorAssignmentInfo:void 0};x&&(0,f.hZ)(C);let E=n||!!x,[T,S]=(0,s.useState)(!1);return((0,s.useEffect)(()=>{S(!0)},[]),T)?(0,i.jsx)("div",{className:"x87ps6o",children:(0,i.jsx)(p.c,{assignmentValues:b,behaviorAssignmentInfo:w,clearBehaviorVariableBinding:k,containerWidth:c.O2.RESIZABLE_SIDEBAR,entrypointForInstanceSwapPicker:m.S.InstancePickerEntrypoint.INSTANCE_SWAP_PROP_INSTANCE_PANEL,forBubbledProps:!1,getInstanceSwapPickerPosition:(e,t,n,i)=>{let s=g?.current?.getBoundingClientRect(),a=e.getBoundingClientRect();return new o.Mi(a.left-(s?.left??0),a.top-(s?.top??0)+a.height+8)},guids:x?[]:e,hideBindingButton:E,hideIcon:E,instanceSwapPickerIdPrefix:"code-editor"===d?"code-editor-instance-swap-prop-assignment-picker-":void 0,recordingKey:l.Pt(t,"propDefs",a.uN.TYPED),sceneGraph:(0,r.getActiveTSSceneGraph)(),submitBehaviorAssignment:j,typedPropDefs:C,viewOnly:_})}):null}function x(){return(0,i.jsx)("div",{className:"xh8yej3 x5yr21d xl56j7k x78zum5 x6s0dn4 x1n0bwc9 x2b8uid",children:(0,d.t)("sites.code_component.drawer.properties_empty_state")})}},651189:(e,t,n)=>{n.d(t,{H:()=>s});var i=n(146238);async function s(e,t){if(!e||!t)return e;try{let n=JSON.parse(t),s=await new i.SourceMapConsumer(n),a=e.split("\n").map(e=>{let t;let n=(t=e.match(/at\s+(.+?)\s+\((.+?):(\d+):(\d+)\)/))?{fnName:t[1],fileName:t[2],lineNumber:parseInt(t[3],10),columnNumber:parseInt(t[4],10)}:(t=e.match(/at\s+?(.+?):(\d+):(\d+)/))?{fnName:void 0,fileName:t[1],lineNumber:parseInt(t[2],10),columnNumber:parseInt(t[3],10)}:null;if(!n)return e;let i=s.originalPositionFor({line:n.lineNumber,column:n.columnNumber});return i.source&&null!==i.line?n.fnName?`    at ${n.fnName} (${i.source}:${i.line}:${i.column||0}${i.name?` [${i.name}]`:""})`:`    at ${i.source}:${i.line}:${i.column||0}${i.name?` [${i.name}]`:""}`:null}).filter(e=>null!==e),r=a.findIndex(e=>e.includes("figma:react-base"));if(-1!==r)return a.slice(0,r).join("\n");return a.join("\n")}catch(t){return console.warn("Error applying sourcemap:",t),e}}},354515:(e,t,n)=>{n.d(t,{Ld:()=>s,R$:()=>a,Wg:()=>r});var i=n(795033);let s=300,a=500,r=(0,i.eU)(s)},914939:(e,t,n)=>{n.d(t,{Ct:()=>d,E6:()=>u,UV:()=>c,mm:()=>o,ne:()=>l});var i=n(795033),s=n(172996),a=n(985416),r=n(949277);let l=(0,a.Wh)(()=>(0,i.eU)(null)),o=(0,a.Wh)(()=>(0,i.eU)(null)),d=(0,a.Wh)(()=>(0,i.eU)(new Set)),c=(0,i.eU)(!1),u=(0,a.Wh)(()=>(0,i.eU)(e=>{let t=e(s.FF),n=e(l),i=e(o);return(0,r.jU)(t,n,i)}))},593598:(e,t,n)=>{n.d(t,{B:()=>l});var i=n(716976),s=n(795033),a=n(620720),r=n(914939);function l(){let[e,t]=(0,s.fp)(r.ne),[n,l]=(0,s.fp)(r.mm);return i.useEffect(()=>{null===n&&(l("loading"),(0,a.N6)().then(e=>{t(e.data.meta),l("loaded")}).catch(e=>{l("error")}))},[n,l,t]),{allDsImportReadyLibraries:e,allDsImportReadyLibrariesRequestStatus:n}}},970818:(e,t,n)=>{n.d(t,{V:()=>v});var i=n(716976),s=n(250700),a=n(542653),r=n(812714),l=n(795033),o=n(211862),d=n(620720),c=n(533144),u=n(302934),p=n(5642),m=n(4154),h=n(657859),f=n(196293),g=n(861621),x=n(631571);let _=null;function y(e,t){let n=e.split("/").pop()?.replace(".tsx","")||"component";return`${n}_${t}`}function v(){let e=(0,o.tS)(),t=(0,l.md)(c.ww),n=(0,l.md)(c.$X),v=(0,i.useMemo)(()=>(0,h.Af)(t??n??""),[t,n]);(0,i.useEffect)(()=>{(0,m.El)()&&e&&(async()=>{try{let e=(0,a.$d)(),t=Object.values(e).filter(e=>e.sourceCodeComponentOrStateGroupKey&&null!=e.sourceCodeComponentOrStateGroupVersion).map(e=>({component_or_state_group_key:e.sourceCodeComponentOrStateGroupKey,version:e.sourceCodeComponentOrStateGroupVersion}));if(0===t.length)return;for(let n of(await (0,d.AZ)(t))){if(!n.display_component||!n.display_variants||!n.code_type||!n.display_component_type)continue;let t=Object.values(e).filter(e=>e.sourceCodeComponentOrStateGroupKey===n.component_or_state_group_key&&e.sourceCodeComponentOrStateGroupVersion===n.version);if(0===t.length)continue;let i=t[0];if(!i)continue;let s=i.codeFileFullPathWithoutScheme?.replace(".tsx","")||"";if(s.startsWith("/")&&(s=s.slice(1)),!s)continue;let a=s.split("/").pop()??"";(0,u.Io)({displayFiles:(0,p.c)(a,n,s),libraryKey:i.sourceCodeLibraryKey??"",version:String(n.version)})}}catch(e){console.error("[useHydrateShowcaseFiles] Failed to hydrate showcase files:",e)}})()},[e]);let b=(0,l.Xr)(x.RS),C=(0,s.N)().version,j=(0,l.md)(x.BX),{bundle:k,identifierMap:w,error:E,isBuilding:T,failedFiles:S}=function({showcaseFiles:e,codeFilesWithExamples:t}){let[n,o]=(0,i.useState)(null),[d,c]=(0,i.useState)({}),[u,p]=(0,i.useState)(null),[m,v]=(0,i.useState)(!1),[b,C]=(0,i.useState)({}),j=(0,s.N)().version,k=(0,l.md)(x.BX);return(0,i.useEffect)(()=>{if((0,r.kc)().bake_byods_editing_showcase_single_file&&k>0)return;if(!(0,r.kc)().bake_byods_extraction_showcase){o(null),c({}),p(null),v(!1),C({});return}let n=!1;o(null),p(null),C({});let i=(0,r.kc)().bake_byods_editing_showcase_single_file&&t&&t.length>0;if(!(i||e&&e.length>0)){c({});return}return async function(){try{let l=(0,s.N)(),d=i?function(e){let t={};for(let{codeFile:n,examples:i}of e)for(let e of i){let i=`${n.codeFileFullPath}#${e.codeExportName}`,s=y(n.codeFileFullPath,e.codeExportName);t[i]=s}return t}(t):function(e){let t={};for(let n of e){let e=function(e){let t=(e.entry.schemePath.replace("file://","").split("/").pop()||"").replace(g.Vc,"").replace(g.Om,"").replace(/\.tsx?$/,"").replace(/-/g,"_");return`showcase_${t}_${e.type}`}(n);t[n.entry.schemePath]=e}return t}(e||[]),u=i?t[0]?.codeFile.codeFileFullPathWithoutScheme:e?.[0]?.entry.path?.replace("file://",""),m=(0,h.Af)(u||"");if(n)return;if(_?.vfsVersion===l.version&&_.libraryName===m){o(_.bundle),c(_.identifierMap),p(null),v(!1);return}async function r(){let e;await (0,f.fM)(l.asTransferableEntries());let n={...d},s={},r=Object.keys(n).length,o=0;for(;o<=r;){let l=i?function(e){let t={};for(let{codeFile:n,examples:i}of e)for(let e of i)t[y(n.codeFileFullPath,e.codeExportName)]=n.codeFileFullPath;return t}(t):function(e){let t={};for(let[n,i]of Object.entries(e))t[i]=n;return t}(n);try{let t=(0,a.ft)();e=await (0,f.pS)({entrypointsOrIdentifierToFileName:l,tailwind:!0,minify:!1,shadcn:!0,noWrapper:!0,codeLibraryFormat:t});break}catch(i){console.error(`[BUNDLE] Bundle failed (attempt ${o+1}/${r+1})`),console.error("[BUNDLE] Error message:",i.message);let e=function(e){let t=[];for(let n of e.matchAll(/virtual-fs:(file:\/\/\/[^:]+\.tsx)/g)){let e=n[1];if(!e)continue;let i=e.replace(g.Vc,"").replace(g.Om,"").replace(g.fE,"").replace(g.tz,"").replace(/\.tsx$/,""),s=`${i}${g.Vc}`,a=`${i}${g.Om}`;t.push(s),t.push(a)}return t}(i.message||"");if(0===e.length)throw i;let t=function(e,t,n,i){let s=0;for(let a of Object.keys(e))n.includes(a)&&(t[a]=i||"Build error",delete e[a],s++);return s}(n,s,e,i.message);if(0===t||0===Object.keys(n).length)throw i;o++}}if(!e)throw Error("Failed to bundle after max retries");let c=function(e=""){return[e,"html, body { background-color: transparent !important; }",`
    html, body {
      height: 100% !important;
      width: 100% !important;
      overflow-y: auto !important;
      margin: 0;
      padding: 0;
      scrollbar-gutter: stable; /* Reserve space for vertical scrollbar */
      display: flex;
      align-items: safe center; /* Centers when content is small, allows scrolling to top when tall */
      justify-content: center;
    }
    body:has(.showcase-grid-container) {
      align-items: flex-start;
    }
    /* Style scrollbar for Chrome/Safari/Opera - always visible but transparent by default */
    html::-webkit-scrollbar,
    body::-webkit-scrollbar {
      width: 8px;
    }
    html::-webkit-scrollbar-track,
    body::-webkit-scrollbar-track {
      background: transparent;
    }
    html::-webkit-scrollbar-thumb,
    body::-webkit-scrollbar-thumb {
      background: transparent;
      border-radius: 4px;
    }
    /* Show scrollbar thumb on hover */
    html:hover::-webkit-scrollbar-thumb,
    body:hover::-webkit-scrollbar-thumb {
      background: rgba(0, 0, 0, 0.3);
    }
    html:hover::-webkit-scrollbar-thumb:hover,
    body:hover::-webkit-scrollbar-thumb:hover {
      background: rgba(0, 0, 0, 0.5);
    }
    /* Firefox - thin scrollbar always, but naturally allocates space */
    html, body {
      scrollbar-width: thin;
      scrollbar-color: transparent transparent;
    }
    html:hover, body:hover {
      scrollbar-color: rgba(0, 0, 0, 0.3) transparent;
    }
    #container, #container > div {
      height: auto !important;
      width: 100% !important;
      max-width: 100% !important;
    }
  `].join("\n")}(e.css);return{bundle:{esm:e.esm,css:c,sourceMap:e.sourceMap},identifierMap:n,failedFiles:s}}v(!0),p(null);let x=await r();if(n)return;_={bundle:x.bundle,identifierMap:x.identifierMap,vfsVersion:l.version,libraryName:m},o(x.bundle),c(x.identifierMap),C(x.failedFiles),v(!1)}catch(e){if(n)return;p(e),o(null),v(!1)}}(),()=>{n=!0}},[e,t,j,k]),{bundle:n,identifierMap:d,error:u,isBuilding:m,failedFiles:b}}({showcaseFiles:(0,i.useMemo)(()=>(0,h.F1)(),[C]),codeFilesWithExamples:(0,i.useMemo)(()=>(0,r.kc)().bake_byods_editing_showcase_single_file?(0,h.mJ)(v):[],[C,j,v])});(0,i.useEffect)(()=>{(0,m.El)()&&b({bundle:k,identifierMap:w,error:E,isBuilding:T,failedFiles:S})},[k,w,E,T,S,b])}},628384:(e,t,n)=>{n.d(t,{S:()=>v});var i=n(716976),s=n(951002),a=n(795033),r=n(211862),l=n(914939),o=n(4154),d=n(620720),c=n(302934),u=n(764001),p=n(142214),m=n(949277);async function h(e,t,n,i){if((0,o.r9)()){i?.(!0);try{let{interactive_code_info:i,tokens_css:s,font_styles:a}=await (0,d.P)(e,n);if(!i.length&&!s)return;(0,c.h$)(t,e,i,s,a)}finally{i?.(!1)}}}let f=(e,t)=>{(0,m.T_)(e,t,"remove"),(0,c.qY)(t)};var g=n(963433),x=n(593598),_=n(673349),y=n(266808);function v({chatController:e}){(0,o.hl)()&&(0,s.d_)("useLibraryImport should not be used when bake_library_creation is enabled. Use useMakeLibraryImport instead.");let{allDsImportReadyLibraries:t,allDsImportReadyLibrariesRequestStatus:n}=(0,x.B)(),d="disabled";switch(n){case"loading":d="loading";break;case"error":d="errors";break;case"loaded":d="loaded"}let c=(0,r.tS)(),{codeLibraryInstance:v}=(0,g.oA)(),[b,C]=(0,a.fp)(l.Ct),[,j]=(0,a.fp)(l.UV),k=e?.getMessages()??[],w=t??[],E=function({codeLibraryInstance:e,fallbackLibraryImport:t,libraryResults:n,libraryRequestStatus:s}){return i.useMemo(()=>{if(e?.sourceCodeLibraryKeys&&e.sourceCodeLibraryKeys.length>0&&e.sourceCodeLibraryKeys[0]){let i=e.sourceCodeLibraryKeys.filter(e=>!!e);if(i.length>0){let e=(0,m.z1)({selectedKeys:i,frozen:!!t,libraryResults:n,libraryRequestStatus:s});if(e)return e}}return t},[e,t,n,s])}({codeLibraryInstance:v,fallbackLibraryImport:function({chatMessages:e,libraryResults:t,libraryRequestStatus:n}){return i.useMemo(()=>{if(!e)return null;let i=[];return(e.forEach(e=>{if(e.type===y.K$p.USER_MESSAGE){let t=(0,_.MK)(e.textContent);t.libraryKey?i=[t.libraryKey]:t.libraryKeys}}),0===i.length)?null:(0,m.z1)({selectedKeys:i,frozen:!0,libraryResults:t,libraryRequestStatus:n})??null},[e,t,n])}({chatMessages:k,libraryResults:w,libraryRequestStatus:d}),libraryResults:w,libraryRequestStatus:d}),T=i.useCallback(e=>{if(!v)return;let t=e.library_key;if(!b.has(t)){C(new Set([...b,t]));try{!function(e,t,n,i,s){let a=n.sourceCodeLibraryKeys||[];a.includes(e)?f(n,e):((0,m.T_)(n,e,"add"),(0,u.g)(t),(0,p.fk)(a.length,t.global_css),h(t.library_key,t.library_name,i,s))}(t,e,v,c||"",j)}finally{setTimeout(()=>{C(e=>{let n=new Set(e);return n.delete(t),n})},100)}}},[c,v,b,C,j]);return{libraryImport:E,createLibraryImport:i.useCallback(e=>{v&&!b.has(e.library_key)&&(!function(e,t){(t.sourceCodeLibraryKeys||[]).forEach(n=>{n!==e.library_key&&f(t,n)})}(e,v),T(e))},[v,b,T]),toggleLibrarySelection:T,isLibraryTogglePending:i.useCallback(e=>b.has(e),[b]),libraryRequestStatus:d,libraryResults:w}}},439700:(e,t,n)=>{n.d(t,{x:()=>u});var i=n(716976),s=n(666875),a=n(211862),r=n(893393),l=n(620720),o=n(4154),d=n(963433);let c=r.M4.Query({key:"makeLibraries",fetch:async({orgId:e,query:t,sourceKeys:n})=>{let{source:i,org:s,workspace:a,team:r}=(await (0,l.aQ)({org_id:e,query:t,source_code_library_keys:null!=n&&n.length>0?n:void 0})).data.meta;return[...i,...s,...a,...r].map(e=>({...e,design_library_key:e.library_key,library_name:e.name,library_key:e.id,thumbnail_url:e.cover_image_url||null,team_name:e.team_name||null}))}});function u({query:e}={}){let{codeLibraryInstance:t}=(0,d.oA)(),n=(0,a.q5)(),l=null!=n,p=n?.parentOrgId,m=t?.sourceCodeLibraryKeys!=null,h=t?.sourceCodeLibraryKeys.filter(e=>!!e)??[],f=(0,i.useMemo)(()=>h,[m]),[g]=(0,s.A)(e,500),[x]=(0,r.IT)(c({orgId:p,query:null!=g&&g.length>0?g:void 0,sourceKeys:f}),{enabled:l&&(0,o.hl)()}),_=new Set(f);return{queryResult:[...(x.data??[]).filter(e=>_.has(e.library_key)),...(x.data??[]).filter(e=>!_.has(e.library_key))],queryStatus:x.status}}},878697:(e,t,n)=>{n.d(t,{c:()=>g});var i=n(716976),s=n(951002),a=n(795033),r=n(914939),l=n(4154),o=n(949277),d=n(620720),c=n(302934),u=n(366604);async function p(e,t,n){(0,u.pI)(t),n?.(!0);try{let{interactive_code_info:n,tokens_css:i,font_styles:s}=await (0,d.Sy)(e);if(!n.length&&!i)return;(0,c.Xi)({libraryName:t,makeLibraryId:e,interactiveCodeInfo:n,tokensCSS:i,fontStyles:s})}finally{n?.(!1),(0,u.pk)(t)}}let m=(e,t)=>{(0,o.$b)(e,t,"remove"),(0,c.qY)(t)};var h=n(963433),f=n(439700);function g(){(0,l.hl)()||(0,s.d_)("useMakeLibraryImport should not be used when bake_library_creation is disabled. Use useDsLibraryImport instead.");let{queryResult:e,queryStatus:t}=(0,f.x)(),{codeLibraryInstance:n}=(0,h.oA)(),[d,c]=(0,a.fp)(r.Ct),[,u]=(0,a.fp)(r.UV),g=n?(0,o.HK)(n):[],x=i.useCallback(e=>{if(!(!n||g.includes(e.id))){c(new Set([...d,e.id]));try{var t;t=e.id,(0,o.HK)(n).includes(t)?m(n,t):((0,o.$b)(n,t,"add"),p(t,e.library_name,u))}finally{setTimeout(()=>{c(t=>{let n=new Set(t);return n.delete(e.id),n})},100)}}},[g.join(","),n,d,c,u]);return{usedMakeLibraryIds:g,createLibraryImport:i.useCallback(e=>{n&&!d.has(e.id)&&x(e)},[n,d,x]),toggleLibrarySelection:x,isLibraryTogglePending:i.useCallback(e=>d.has(e),[d]),libraryRequestStatus:t,libraryResults:e}}},199062:(e,t,n)=>{n.d(t,{HL:()=>m.H,FN:()=>p.FN,UV:()=>d.UV,Bo:()=>a.B,gL:()=>u,S1:()=>i.S,cH:()=>s.c});var i=n(628384),s=n(878697),a=n(593598),r=n(795033),l=n(837975),o=n(172996),d=n(914939),c=n(963433);function u({chatController:e}){let{libraryImport:t,toggleLibrarySelection:n}=(0,i.S)({chatController:e}),s=(0,r.md)(d.E6),a=(0,r.Xr)(o.$K),{codeLibraryInstance:u}=(0,c.oA)(),p=t?.libraries.some(e=>e.library_key===s?.library_key);(0,l.R)(()=>{s&&u&&(p||(n(s),a(r.Ut)))},[s,n,a,u,p],()=>!!s&&!!u)}n(970818);var p=n(949277);n(657859);var m=n(764001);n(861621)},366604:(e,t,n)=>{n.d(t,{Et:()=>d,el:()=>m,pI:()=>u,pk:()=>p});var i=n(795033),s=n(620720),a=n(810149),r=n(533144),l=n(302934),o=n(4154);async function d(e,t,n,r){if((0,o.hl)()){u(t);try{let{interactive_code_info:o,tokens_css:d,font_styles:c}=await (0,s.P)(n,r);if(!o.length&&!d){p(t);return}(0,l.rL)({libraryName:t,libraryKey:n,makeLibraryId:e,interactiveCodeInfo:o,tokensCSS:d,fontStyles:c}),p(t);let{libraryCodeFilesPath:u,libraryFolderPath:m}=(0,l.EU)(t);i.zl.set(a.wy,e=>{let t=new Set(e);return t.add(m),t.add(u),t})}catch(e){throw p(t),e}}}function c(e){let{libraryCodeFilesPath:t}=(0,l.EU)(e);return`${t}/_loading.ts`}function u(e){let t=c(e);(0,l.YX)(t)}function p(e){let t=c(e);(0,l.S6)(t)}function m(e){let{libraryCodeFilesPath:t}=(0,l.EU)(e);i.zl.set(r.ww,t)}},657859:(e,t,n)=>{n.d(t,{Af:()=>l,F1:()=>o,lG:()=>d,mJ:()=>c});var i=n(250700),s=n(542653),a=n(812714),r=n(861621);function l(e){if(!e)return"";let t=e.split("/").filter(Boolean);return t.length>0?"/"+t[0]:e}function o(e=""){if(!(0,a.kc)().bake_byods_extraction_showcase)return[];let t=e?l(e):"",n=(0,i.N)().listFiles({path:t,includeSoftDeleted:!1});return[...n.filter(e=>e.path.endsWith(r.Vc)&&e.metadata.codeLibraryId&&e.metadata.guid?.startsWith(r.fy)).map(e=>({entry:e,type:"variant"})),...n.filter(e=>e.path.endsWith(r.Om)&&e.metadata.codeLibraryId&&e.metadata.guid?.startsWith(r.fy)).map(e=>({entry:e,type:"all_variants"}))]}function d(e){return e?`${e.replace(".tsx","")}${r.Om}`:null}function c(e){return(0,a.kc)().bake_byods_editing_showcase_single_file&&e?Object.values((0,s.$d)(e)).filter(e=>e.codeExamples&&e.codeExamples.length>0).map(e=>{let t=Array.from(e.codeExamples);return{codeFile:e,examples:t}}):[]}},396326:(e,t,n)=>{n.d(t,{q:()=>p});var i=n(500275),s=n(951002),a=n(170627),r=n(980852),l=n(246144),o=n(772523),d=n(427515),c=n(322023),u=n(664615);class p{constructor(e,t,n){this.editor=e,this.sendEditToPreview=t,this.displayErrorVisualBell=n}async addClassesToInspectedElements(e,t,n){this.editor.addLocalComputedStyleEditToSelectedNodes(e);let i=(0,o.dZ)(t),s=await this.editor.getCachedOrFetchCodeSnippets(!i);if(null===s){(0,l.x1)("direct_manipulation","No snippets found for addClassToInspectedElements",{},{reportAsSentryError:!0}),this.displayErrorVisualBell(i?"on_save":"on_selection");return}for(let t of s){let s=null;for(let i of e)s=this.addClassToInspectedElementAndPreview(i,t,s,n);i&&null!==s&&(s=(0,c.OI)({classNames:s,classToStyles:this.editor.selectedElementsClassToStyles}),await this.commitToCode({classNames:s,snippet:t}),this.editor.updateAnalyticsRecordClassNameEdit(n))}}addClassToInspectedElementAndPreview(e,t,n,i){if(null===n){let e=t.editingInfo.classNameAttribute;switch(e.type){case"static":n=e.value;break;case"not-set":n="";break;case"dynamic":case"dynamic-identifier":case"unknown":return(0,l.x1)("direct_manipulation","Unsupported jsx for addClassToInspectedElement",{type:e.type},{reportAsSentryError:!0}),this.displayErrorVisualBell("on_save"),n;default:(0,s.xb)(e)}}n=(0,c.t8)({existingClassNames:n,classToStyles:this.editor.selectedElementsClassToStyles,classToAdd:e});let a={};for(let t of e.cssRules){let e=t.property,n={property:e,value:t.value};for(let i of t.propertiesExpandedFromShorthand.length>0?t.propertiesExpandedFromShorthand:[e])a[i]=n}this.editor.addClassStyleFromLocalEdit(e.className,{className:e.className,styles:a,hasUnsupportedStyles:!1,type:"tailwind"});let r={};for(let t of e.cssRules)for(let e of t.propertiesExpandedFromShorthand.length>0?t.propertiesExpandedFromShorthand:[t.property])r[e]=t.computedStylesValue;let o={sourceCodeClassNames:n,sourceCodeJSXCallId:t.sourceCodeJSXCallId,classNameToInject:e.className,cssToInject:(0,c.L_)(e),expectedCSSProperties:Object.keys(r).length>0?r:void 0,analyticsPropertyName:i};return this.sendEditToPreview(o,!1),n}async commitToCode({classNames:e,allowedRetries:t=1,snippet:n}){let{folderPath:o,fileName:c}=n,p=(0,i.$v)((0,r.getActiveTSSceneGraph)(),o,c),m=!1;if(p){let t=n.editingInfo.classNameAttribute;(0,d.a)(()=>{a.l7.user("direct-manipulation",()=>{switch(t.type){case"static":(0,u.W)(p,n.collaborativeSourceCodeVersion,t.valueStartIndex,t.value,e)||(m=!0);break;case"not-set":{let i=` className="${e}"`;(0,u.W)(p,n.collaborativeSourceCodeVersion,t.insertIndex,"",i)||(m=!0);break}case"dynamic":case"dynamic-identifier":case"unknown":(0,l.x1)("direct_manipulation","Unsupported jsx for commitToCode",{type:t.type},{reportAsSentryError:!0}),this.displayErrorVisualBell("on_save");break;default:(0,s.xb)(t)}})})}if(m){if(t>0){let n=await this.editor.getCachedOrFetchCodeSnippets(!1),i=n?.find(e=>e.sourceCodeJSXCallId==e.sourceCodeJSXCallId);if(!i){(0,l.x1)("direct_manipulation","Could not refresh snippet for commitToCode retry",{},{reportAsSentryError:!0}),this.displayErrorVisualBell("on_save");return}await this.commitToCode({classNames:e,allowedRetries:t-1,snippet:i})}else(0,l.x1)("direct_manipulation","Unsuccessful code edit",{},{reportAsSentryError:!0}),this.displayErrorVisualBell("on_save")}else setTimeout(()=>{this.editor.fetchNewCodeSnippets()},0)}async resetClassNamesForPropertiesAndCommitToCode(e,t){let n=await this.editor.getCachedOrFetchCodeSnippets(!1);if(null===n){(0,l.x1)("direct_manipulation","No snippet found for resetClassNames",{},{reportAsSentryError:!0}),this.displayErrorVisualBell("on_save");return}for(let i of n){let n=null,a=i.editingInfo.classNameAttribute;switch(a.type){case"static":n=a.value;break;case"not-set":n="";break;case"dynamic":case"dynamic-identifier":case"unknown":(0,l.x1)("direct_manipulation","Unsupported jsx for resetClassNames",{type:a.type},{reportAsSentryError:!0}),this.displayErrorVisualBell("on_save");return;default:(0,s.xb)(a)}let r={sourceCodeClassNames:n=(0,c.Lh)({existingClassNames:n,classToStyles:this.editor.selectedElementsClassToStyles,propertiesToReset:e}),sourceCodeJSXCallId:i.sourceCodeJSXCallId,classNameToInject:void 0,cssToInject:void 0,expectedCSSProperties:void 0,analyticsPropertyName:t};this.sendEditToPreview(r,!0),await this.commitToCode({classNames:n,snippet:i})}this.editor.clearLocalComputedStyleEditForSelectedNodes(e)}}},254786:(e,t,n)=>{n.d(t,{S:()=>o,m:()=>i});var i=(e=>(e.Text="text",e.Container="container",e.Border="border",e.Image="image",e.Spacing="spacing",e.Shadow="shadow",e))(i||{});let s=["p","h1","h2","h3","h4","h5","h6","span","label","button","a","input","textarea","select","option","ul","ol","li"],a=["body","div","header","footer","main","section","nav","article"],r=["img","video"],l={image:[...r],text:[...s],container:[...a,"button"],border:[...a,...r,"button","input","textarea"],spacing:[...s,...a,...r],shadow:[...a,...r]};function o(e,t){let n=[];return Object.entries(l).forEach(([i,s])=>{(s.includes(e.toLowerCase())||t&&"text"===i)&&n.push(i)}),n}},351394:(e,t,n)=>{n.d(t,{F:()=>i});function i(e,t){return{filePath:t.fullFilePath,snippetStartLine:t.jsxSnippet.snippetStartLine,tagLine:t.jsxSnippet.tagLine,snippet:t.jsxSnippet.code,tagName:e.tagName,fileImports:t.imports,componentHeader:t.componentHeader}}},466465:(e,t,n)=>{n.d(t,{DY:()=>c,HL:()=>d,m$:()=>u,xF:()=>o});var i=n(716976),s=n(237420),a=n(266808),r=n(980852),l=n(55416);function o(){let e=(0,s.d4)(e=>e.fonts);return(0,i.useMemo)(()=>{let t={};for(let[n,i]of Object.entries(e)){let e=Object.fromEntries(Object.entries(i).filter(([e,t])=>t.source===a.jXp.GOOGLE));Object.keys(e).length>0&&(t[n]=e)}return t},[e])}function d(e,t){if(t.current){if(t.current.fontName?.family===e.fontFamily)return;t.current.removeSelfAndChildren(),t.current=null}let n=a.t8O?.getLocalTextStyleFontInfo();if(n){for(let t of n)if(t.family===e.fontFamily&&t.style===e.styleName)return}let i=(0,r.getActiveTSSceneGraph)().createStyle("TEXT");i.fontName={family:e.fontFamily,style:e.styleName,postscript:e.style.postscript},i.name=e.fontFamily,t.current=i}function c(e,t){let n=t[e];if(!n)return;let i=(0,l.a)(n);if(void 0===i)return;let s=n[i];if(!s)return;let a="Regular",r=s.styles[a];if(!r&&(a=Object.keys(s.styles)[0])&&(r=s.styles[a]),r&&a&&r.id)return{fontFamily:e,fontVersion:i,styleName:a,style:r,fontId:r.id,fontSource:s.source}}function u(e,t){let n=e.match(/("(?:[^"\\]|\\.)*"|'(?:[^'\\]|\\.)*'|[^,]+)/g);return n&&0!==n.length&&n.map(e=>e.trim().replace(/^["']|["']$/g,""))[0]||t}},855492:(e,t,n)=>{n.d(t,{p:()=>o});var i=n(104076),s=n(859120);n(120440);let a=e=>`var(${e})`,r={bg:"--animation-bg",fill:"--animation-fill",stroke:"--animation-stroke",strokeLight:"--animation-stroke-light"},l={light:{[r.strokeLight]:a("--ramp-violet-200"),[r.stroke]:a("--ramp-violet-300"),[r.fill]:a("--ramp-violet-100"),[r.bg]:a("--color-bg")},dark:{[r.strokeLight]:a("--color-border"),[r.stroke]:a("--color-border"),[r.fill]:a("--color-bg-secondary"),[r.bg]:a("--color-bg")}};function o(){let e=(0,s.G)(),t=(0,i.jsxs)("svg",{width:"417",height:"321",viewBox:"0 0 417 321",fill:"none",children:[(0,i.jsxs)("g",{clipPath:"url(#clip0_8424_179506)",children:[(0,i.jsx)("line",{x1:"0.5",y1:"2.0461e-08",x2:"0.499987",y2:"321",stroke:a(r.strokeLight)}),(0,i.jsx)("line",{x1:"32.5",y1:"1",x2:"32.5",y2:"321",stroke:a(r.strokeLight)}),(0,i.jsx)("line",{x1:"64.5",y1:"1",x2:"64.5",y2:"321",stroke:a(r.strokeLight)}),(0,i.jsx)("line",{x1:"96.5",y1:"1",x2:"96.5",y2:"321",stroke:a(r.strokeLight)}),(0,i.jsx)("line",{x1:"128.5",y1:"1",x2:"128.5",y2:"321",stroke:a(r.strokeLight)}),(0,i.jsx)("line",{x1:"160.5",y1:"1",x2:"160.5",y2:"321",stroke:a(r.strokeLight)}),(0,i.jsx)("line",{x1:"192.5",y1:"1",x2:"192.5",y2:"321",stroke:a(r.strokeLight)}),(0,i.jsx)("line",{x1:"224.5",y1:"1",x2:"224.5",y2:"321",stroke:a(r.strokeLight)}),(0,i.jsx)("line",{x1:"256.5",y1:"1",x2:"256.5",y2:"321",stroke:a(r.strokeLight)}),(0,i.jsx)("line",{x1:"288.5",y1:"1",x2:"288.5",y2:"321",stroke:a(r.strokeLight)}),(0,i.jsx)("line",{x1:"320.5",y1:"1",x2:"320.5",y2:"321",stroke:a(r.strokeLight)}),(0,i.jsx)("line",{x1:"352.5",y1:"1",x2:"352.5",y2:"321",stroke:a(r.strokeLight)}),(0,i.jsx)("line",{x1:"384.5",y1:"1",x2:"384.5",y2:"321",stroke:a(r.strokeLight)}),(0,i.jsx)("line",{x1:"416.5",y1:"1",x2:"416.5",y2:"321",stroke:a(r.strokeLight)}),(0,i.jsx)("line",{x1:"416",y1:"0.5",x2:"-9.081e-08",y2:"0.499983",stroke:a(r.strokeLight)}),(0,i.jsx)("line",{x1:"416",y1:"32.5",x2:"-9.081e-08",y2:"32.5",stroke:a(r.strokeLight)}),(0,i.jsx)("line",{x1:"416",y1:"64.5",x2:"-9.081e-08",y2:"64.5",stroke:a(r.strokeLight)}),(0,i.jsx)("line",{x1:"416",y1:"96.5",x2:"-9.081e-08",y2:"96.5",stroke:a(r.strokeLight)}),(0,i.jsx)("line",{x1:"416",y1:"128.5",x2:"-9.081e-08",y2:"128.5",stroke:a(r.strokeLight)}),(0,i.jsx)("line",{x1:"416",y1:"160.5",x2:"-9.081e-08",y2:"160.5",stroke:a(r.strokeLight)}),(0,i.jsx)("line",{x1:"416",y1:"192.5",x2:"-9.081e-08",y2:"192.5",stroke:a(r.strokeLight)}),(0,i.jsx)("line",{x1:"416",y1:"224.5",x2:"-9.081e-08",y2:"224.5",stroke:a(r.strokeLight)}),(0,i.jsx)("line",{x1:"416",y1:"256.5",x2:"-9.081e-08",y2:"256.5",stroke:a(r.strokeLight)}),(0,i.jsx)("line",{x1:"416",y1:"288.5",x2:"-9.081e-08",y2:"288.5",stroke:a(r.strokeLight)}),(0,i.jsx)("line",{x1:"416",y1:"320.5",x2:"-9.081e-08",y2:"320.5",stroke:a(r.strokeLight)}),(0,i.jsx)("rect",{width:"573",height:"441",transform:"translate(-79 -61)",fill:"url(#paint0_radial_8424_179506)"}),(0,i.jsx)("rect",{x:"138.1",y:"98.4353",width:"133",height:"91",rx:"13.5",transform:"rotate(8 138.1 98.4353)",fill:a(r.bg),stroke:a(r.stroke),strokeDasharray:"4 4"}),(0,i.jsx)("rect",{x:"141.5",y:"114.5",width:"133",height:"91",rx:"13.5",fill:a(r.bg),stroke:a(r.stroke)}),(0,i.jsx)("rect",{x:"150",y:"123",width:"74",height:"74",rx:"5",fill:a(r.fill)}),(0,i.jsx)("rect",{x:"232",y:"123",width:"34",height:"74",rx:"5",fill:a(r.fill)})]}),(0,i.jsxs)("defs",{children:[(0,i.jsxs)("radialGradient",{id:"paint0_radial_8424_179506",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(286.5 220.5) rotate(90) scale(220.5 286.5)",children:[(0,i.jsx)("stop",{stopColor:a(r.bg),stopOpacity:"0"}),(0,i.jsx)("stop",{offset:"0.117896",stopColor:a(r.bg),stopOpacity:"0.0737185"}),(0,i.jsx)("stop",{offset:"0.213837",stopColor:a(r.bg),stopOpacity:"0.153748"}),(0,i.jsx)("stop",{offset:"0.2912",stopColor:a(r.bg),stopOpacity:"0.2384"}),(0,i.jsx)("stop",{offset:"0.353363",stopColor:a(r.bg),stopOpacity:"0.325985"}),(0,i.jsx)("stop",{offset:"0.403704",stopColor:a(r.bg),stopOpacity:"0.414815"}),(0,i.jsx)("stop",{offset:"0.4456",stopColor:a(r.bg),stopOpacity:"0.5032"}),(0,i.jsx)("stop",{offset:"0.48243",stopColor:a(r.bg),stopOpacity:"0.589452"}),(0,i.jsx)("stop",{offset:"0.51757",stopColor:a(r.bg),stopOpacity:"0.671881"}),(0,i.jsx)("stop",{offset:"0.5544",stopColor:a(r.bg),stopOpacity:"0.7488"}),(0,i.jsx)("stop",{offset:"0.596296",stopColor:a(r.bg),stopOpacity:"0.818519"}),(0,i.jsx)("stop",{offset:"0.646637",stopColor:a(r.bg),stopOpacity:"0.879348"}),(0,i.jsx)("stop",{offset:"0.7088",stopColor:a(r.bg),stopOpacity:"0.9296"}),(0,i.jsx)("stop",{offset:"0.786163",stopColor:a(r.bg),stopOpacity:"0.967585"}),(0,i.jsx)("stop",{offset:"0.882104",stopColor:a(r.bg),stopOpacity:"0.991615"}),(0,i.jsx)("stop",{offset:"1",stopColor:a(r.bg)})]}),(0,i.jsx)("clipPath",{id:"clip0_8424_179506",children:(0,i.jsx)("rect",{width:"417",height:"321",fill:a(r.bg)})})]})]});return(0,i.jsx)("div",{className:"x78zum5 xdt5ytf x6s0dn4 x1n2onr6",style:l[e.color],children:t})}},359103:(e,t,n)=>{n.d(t,{R:()=>eb,P8:()=>ev,R1:()=>ep,x6:()=>eu,q3:()=>eh,iE:()=>eg,e0:()=>eC,Dq:()=>ex,dB:()=>e_,mt:()=>em});var i=n(104076),s=n(716976),a=n(237420),r=n(439279),l=n(293422),o=n(420680),d=n(307829),c=n(454851),u=n(4921),p=n(232120),m=n(501950),h=n(961877),f=n(101441),g=n(598643),x=n(411631),_=n(767791),y=n(915464),v=n(247187),b=n(266808),C=n(812714),j=n(795033);n(120440);var k=n(883765),w=n(754038),E=n(219199),T=n(208882),S=n(350819),I=n(944520),N=n(11395),A=n(147643),L=n(192075),M=n(366535),O=n(139366),R=n(201482),P=n(211862),D=n(377026),F=n(349311),z=n(343398),B=n(619794),G=n(524101),U=n(560201),V=n(350434),H=n(854095),K=n(631571),W=n(963433),q=n(908461),X=n(33946),Y=n(127082),Z=n(542653),J=n(929302),Q=n(950187),$=n(268389);let ee=(0,s.memo)(function(e){return(0,i.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,"data-fpl-icon-size":"24",children:(0,i.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",fillRule:"evenodd",d:"M13.646 8.146a.5.5 0 0 0 0 .708L16.793 12l-3.147 3.146a.5.5 0 0 0 .708.708l3.5-3.5a.5.5 0 0 0 0-.708l-3.5-3.5a.5.5 0 0 0-.708 0m-3.292 0a.5.5 0 0 0-.708 0l-3.5 3.5a.5.5 0 0 0 0 .708l3.5 3.5a.5.5 0 0 0 .708-.708L7.207 12l3.147-3.146a.5.5 0 0 0 0-.708",clipRule:"evenodd"})})});var et=n(959834),en=n(389006);let ei=(0,et.Ju)(function({editingFileType:e,onClose:t}){let[n,a]=s.useState(!0),r=J.hS({open:n,onClose:()=>{a(!1),t?.()}}),o=(0,Z.$d)(),d=o[H.dY]||o[H.x1]||null,c=o[H.VK]||null,u="guidelines"===e?d:c;return(0,i.jsx)(Q.bL,{manager:r,width:"fit-content",height:"full",children:(0,i.jsxs)($.vo,{className:"x1nldzm0",children:[(0,i.jsx)($.Y9,{children:(0,i.jsx)($.hE,{children:(0,i.jsxs)("div",{className:"x78zum5 x6s0dn4 x8439ig",children:[(0,i.jsx)(ee,{}),u?.name]})})}),(0,i.jsx)($.nB,{children:(0,i.jsx)(en.RL,{codeFile:u,fullHeight:!0,showHeader:!1})}),(0,i.jsx)($.wi,{children:(0,i.jsx)($.jk,{children:(0,i.jsx)(l.$n,{variant:"primary",onClick:()=>{a(!1),t?.()},children:(0,L.t)("figmake.empty_state.settings.done")})})})]})})},"EmptyStateSettingsModal");var es=n(686586),ea=n(707490),er=n(932282),el=n(789596);function eo(e,t,n=S.qB.SIGN_IN){let i=(0,z.Y9)();return s.useCallback(()=>{(0,N.UK)(e),i({origin:t,formState:n})},[i,e,t,n])}function ed(){let e=eo("SIGN_UP_BUTTON_BANNER",w.ty.FIGMA_REV_LOGGED_OUT_HEADER,S.qB.SIGN_UP);return(0,i.jsx)(l.WW,{htmlAttributes:{"data-test-id":"email-btn"},onClick:e,children:(0,L.tx)("footer_banner.sign_up_with_email")})}function ec(){let e=(0,a.wA)();return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(R.H,{large:!0,brandTextColor:!0,onClick:()=>{(0,N.UK)("GOOGLE_SSO_BUTTON"),(0,w.Rm)({dispatch:e,origin:w.ty.FIGMA_REV_LOGGED_OUT_HEADER_WITH_GOOGLE,redirectUrl:E.Ay.location.pathname}).then(t=>{"login"===t.type&&e(T.My({userId:t.user.id}))},t=>{(0,I.g)("google_signup_error",w.ty.FIGMA_REV_LOGGED_OUT_HEADER_WITH_GOOGLE,{error:t.message}),(0,C.kc)().ff_show_auth_modal_on_google_sso_error&&(0,w.Y2)({dispatch:e,origin:w.ty.FIGMA_REV_LOGGED_OUT_HEADER_WITH_GOOGLE,message:t.message,redirectUrl:E.Ay.location.pathname,errorType:t.errorType})})},children:(0,L.t)("footer_banner.continue_with_google")}),(0,i.jsx)(B.P,{origin:w.DT.LOGGED_OUT_FILE,overrideUseFedCMPrompt:!1})]})}function eu(){return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(ed,{}),(0,i.jsx)("div",{className:"xmkeg23 x1y0btm7 x7z60cl x7xtdkp",children:(0,i.jsx)(ec,{})})]})}function ep(){let e=eo("SHARE_BUTTON",w.ty.FIGMA_REV_LOGGED_OUT_HEADER);return(0,i.jsx)(l.WW,{variant:"primary",onClick:e,children:(0,L.t)("fullscreen.toolbar.multiplayer.share")})}function em(){let{canDuplicate:e}=(0,G.tz)(),t=(0,Y.aI)();return e&&t}function eh({blockWithAuthModal:e}){let{duplicateFile:t}=(0,G.tz)(),n=em(),s=eo(b.rcl.PAGE_DUPLICATE,w.ty.FIGMA_REV_LOGGED_OUT_HEADER);return n?(0,i.jsx)(l.WW,{variant:"secondary",onClick:e?s:t,htmlAttributes:{"data-onboarding-key":el.S$},children:(0,L.t)("figmake.make_a_copy")}):(0,i.jsx)(i.Fragment,{})}let ef=(0,U.ex)("figmake_open_fullscreen_preview_new_tab",function(){return(0,i.jsxs)("div",{className:"x78zum5 xdt5ytf xl56j7k x6s0dn4",children:[(0,i.jsx)("div",{children:(0,L.t)("figmake.open_new_tab_preview")}),(0,i.jsx)("div",{className:"xkrz9af xt970qd x5k8d2m",children:(0,L.t)("figmake.open_new_tab_preview_footer")})]})});function eg({openInSameTab:e=!1,disabled:t=!1,asLargeVariant:n=!1}){let a=r.v.getFeatureGate("make_header_ui_v2"),{openFigmakeFullscreenInNewTab:l,openFigmakeFullscreenInSameTab:d}=(0,W.Ve)(),c=(0,P.tS)(),u=s.useCallback(()=>{k.az.trackDefinedEvent("ai_for_production.figmake_open_preview_in_new_tab_clicked",{fileKey:c??""}),l()},[l,c]),h=s.useCallback(()=>{k.az.trackDefinedEvent("ai_for_production.figmake_open_preview_in_same_tab_clicked",{fileKey:c??""}),d()},[d,c]),f=n?A.J:o.K,g=a&&!e?p.V:m.X;return(0,i.jsx)(f,{onClick:e?h:u,"aria-label":(0,L.t)("figmake.open_new_tab_preview"),"data-testid":"open-fullscreen-preview-button",disabled:t,htmlAttributes:{"data-tooltip":ef,"data-tooltip-type":F.Ib.SPECIAL,"data-tooltip-offset-y":2,"data-onboarding-key":el.NR},children:(0,i.jsx)(g,{})})}function ex(){let{getTriggerProps:e,manager:t}=d.b(),n=(0,L.t)("figmake.empty_state.settings"),a=(0,W.h5)(),r=(0,W.C5)(),l=(0,j.Xr)(q.j),o=(0,j.Xr)(ea.jx),u=(0,P.tS)(),p=s.useCallback(()=>{k.az.trackDefinedEvent("figmake.header_settings_make_settings_menu_item_clicked",{fileKey:u??"",inSettingsView:a}),a?r(D.f0.FILE):(r(D.f0.SETTINGS),l(X.p.WEBSITE))},[u,a,r,l]),m=s.useCallback(()=>{k.az.trackDefinedEvent("figmake.header_settings_access_code_editor_menu_item_clicked",{fileKey:u??""}),o(ea.Ic.CODE),(0,es.R2)()},[u,o]);return(0,i.jsxs)(d.bL,{manager:t,children:[(0,i.jsx)(c.d,{size:"lg","data-testid":"settings-menu-button","aria-label":n,recordingKey:"figmakeSettingsMenuButton",...e({onClick:()=>{k.az.trackDefinedEvent("figmake.header_settings_menu_clicked",{fileKey:u??""})}}),children:(0,i.jsx)(h.W,{})}),(0,i.jsxs)(d.mc,{"data-testid":"settings-menu-container",children:[(0,i.jsxs)(d.q7,{onClick:p,recordingKey:"makeSettingsMenuItem",children:[(0,i.jsx)(d.Q$,{children:(0,i.jsx)(f.P,{})}),(0,L.t)("figmake.metadata.modal_button_site")]}),(0,i.jsx)(eb,{}),(0,i.jsx)(ev,{}),(0,i.jsxs)(d.q7,{onClick:m,children:[(0,i.jsx)(d.Q$,{children:(0,i.jsx)(g.D,{})}),(0,L.t)("figmake.settings.menu_item.code.label")]})]})]})}function e_(){let[e,t]=(0,j.fp)(ea.Kg),n=(0,a.wA)(),r=s.useCallback(()=>{e&&n(O.js()),t(!e)},[n,e,t]),l=e?(0,L.t)("figmake.hide_comments"):(0,L.t)("figmake.show_comments");return(0,C.kc)().comments_in_make?(0,i.jsx)(u.f,{variant:"highlighted",checked:e,onChange:r,onIcon:(0,i.jsx)(x.O,{}),offIcon:(0,i.jsx)(x.O,{}),"aria-label":l,"data-tooltip":l,size:"lg"}):null}function ey(){let{codeLibraryInstance:e}=(0,W.oA)();return(0,j.md)(K.FX)||!!e?.shouldHidePreviewForMakeKitCreation}function ev({onClickCallback:e}){let t=(0,a.wA)(),n=(0,V.j)(),r=(0,P.tS)(),l=ey(),o=s.useCallback(()=>{l?(k.az.trackDefinedEvent("figmake.empty_state_settings_edit_styles_clicked",{}),t(M.to({type:ei,data:{editingFileType:"styles"}}))):(k.az.trackDefinedEvent("ds_import.edit_styles_menu_item_clicked",{file_key:r||""}),n(H.VK)),e?.()},[t,l,n,r,e]);return(0,i.jsxs)(d.q7,{onClick:o,children:[(0,i.jsx)(d.Q$,{children:(0,i.jsx)(_.U,{})}),(0,L.t)("figmake.empty_state.settings.edit_styles")]})}function eb({onClickCallback:e}){let t=(0,a.wA)(),n=(0,V.j)(),r=ey(),l=(0,P.tS)(),o=s.useCallback(()=>{r?(k.az.trackDefinedEvent("figmake.empty_state_settings_edit_guidelines_clicked",{}),t(M.to({type:ei,data:{editingFileType:"guidelines"}}))):(k.az.trackDefinedEvent("ds_import.edit_guidelines_menu_item_clicked",{file_key:l||""}),n(H.dY,H.x1)),e?.()},[t,r,n,l,e]);return(0,i.jsxs)(d.q7,{onClick:o,children:[(0,i.jsx)(d.Q$,{children:(0,i.jsx)(y.m,{})}),(0,L.t)("figmake.empty_state.settings.edit_guidelines")]})}function eC({asLargeVariant:e}={}){let{handleRefresh:t}=(0,er.u)();if(!t)return null;let n=e?A.J:o.K;return(0,i.jsx)(n,{onClick:t,"aria-label":(0,L.t)("figmake.refresh"),htmlAttributes:{"data-tooltip":(0,L.t)("figmake.refresh"),"data-tooltip-type":F.Ib.TEXT},children:(0,i.jsx)(v.T,{})})}},932282:(e,t,n)=>{n.d(t,{h:()=>r,u:()=>l});var i=n(104076),s=n(716976);let a=(0,s.createContext)(null);function r({children:e,value:t}){return(0,i.jsx)(a.Provider,{value:t,children:e})}function l(){let e=(0,s.useContext)(a);if(!e)throw Error("useHeaderContext must be used within HeaderProvider");return e}},617057:(e,t,n)=>{n.d(t,{mP:()=>$,fY:()=>Q,VW:()=>J});var i=n(716976),s=n(951002),a=n(638004),r=n(913834),l=n(795033),o=n(188220),d=n(166887),c=n(586398),u=n(550209),p=n(432099),m=n(354114),h=n(211862),f=n(140948),g=n(700126),x=n(581006),_=n(635533),y=n(492130),v=n(707490),b=n(237420),C=n(192075),j=n(58212),k=n(638641);let w="html-to-design-processing",E="copied-to-clipboard",T="error",S="html-to-design-copy-manual";var I=n(997477),N=n(313447),A=n(266808),L=n(170627),M=n(980852),O=n(812714),R=n(883765),P=n(698266),D=n(823736),F=n(260495),z=n(669436),B=n(113139);let G=new class{constructor(){this.HtmlToDesignValidator=(0,B.vh)()}convertHtmlToDesign(e){let{fileKey:t,html:n,width:i,height:s}=e;return this.HtmlToDesignValidator.validate(async({xr:e})=>await e.post(`/api/${t}/html-to-design`,{html:n,width:i,height:s}))}};var U=n(287441),V=(e=>(e[e.API=0]="API",e[e.LOCAL=1]="LOCAL",e))(V||{});async function H(e,t){let n;let i=e.sitesPreview,a=new P.M4;a.start();let r=(0,o.g)(),l=(0,U.X0)({h2dSessionId:r,fileKey:e.fileKey,mode:1===e.mode?"local":"api",featureType:"html_to_clipboard",onPageHide:()=>{l.trackError(N.G3.END_ABORTED,Error("pagehide"))}});l.track(N.G3.START);let d=()=>{if(t?.aborted)throw t?.reason};try{if(1===e.mode){let s=await i.sendMessage("getDOMNodes",{},{rejectOnAbort:!0});d();let a=JSON.stringify(s)?.length||0;if(l.track(N.G3.SERIALIZE_HTML,{serializedJsonLength:a}),!s?.root)throw Error("No DOM data received from preview iframe");let r=(0,O.kc)().bake_m2d_roundtrip?e.referenceId??await q(e.fileKey):void 0;d();let o=await (0,N.N5)(s,{decodeImage:F.UD,rootFrameName:e.fileName,scene:(0,M.getActiveTSSceneGraph)(),tracking:A.HzA.IGNORE,trackPerformance:l,trackDefinedEvent:(0,N.G$)(R.az.trackDefinedEvent)},{attachBuildDataToNodes:{enabled:!!(0,O.kc)().bake_m2d_roundtrip,fileKey:e.fileKey,referenceId:r??void 0},abortSignal:t});await new Promise(e=>requestAnimationFrame(()=>requestAnimationFrame(e))),await (0,F.Jr)().imageUploadPromise(),l.track(N.G3.IMAGE_UPLOAD_COMPLETE),d(),n=o.guid}else if(0===e.mode){let{html:t,rect:s}=await i.getHTMLForElement(),a=(await G.convertHtmlToDesign({fileKey:e.fileKey,html:t,width:Math.ceil(s.width),height:Math.ceil(s.height)})).data.meta.buffer;n=W(a)}else(0,s.xb)(e);let r=e.copyId;r&&(await (0,U.FH)({sourceNodeGuid:n,copyId:r,sourceFileKey:e.fileKey,persistentEntityId:e.persistentEntityId||""}),d());let o=null;try{o=L.l7.system("clipboard-payload",()=>A.glU?A.glU.getClipboardDataForGuids([n])??null:null)}finally{L.l7.system("delete-node",()=>{let e=(0,M.getActiveTSSceneGraph)();e.get(n)?.removeSelfAndChildren()})}if(!o)throw Error("Failed to generate clipboard payload");let c=a.getElapsedTime();return a.stop(),R.az.trackDefinedEvent("figmake.m2d_conversion_time",{fileKey:e.fileKey,mode:1===e.mode?"local":"api",target:"clipboard",elapsedTimeMs:c}),l.track(N.G3.COPY_TO_CLIPBOARD),l.trackFromStart(N.G3.END_SUCCESS),o}catch(e){throw"AbortError"===e.name?l.trackError(N.G3.END_ABORTED,e):l.trackError(N.G3.END_FAILURE,e),e}finally{l.removeEventListeners()}}async function K(e){let t;let n=new P.M4;n.start();let i=(0,o.g)(),a=(0,U.X0)({h2dSessionId:i,fileKey:e.fileKey,mode:1===e.mode?"local":"api",featureType:"html_to_canvas_node",onPageHide:()=>{a.trackError(N.G3.END_ABORTED,Error("pagehide"))}});a.track(N.G3.START);try{if(1===e.mode){let n=await e.sitesPreview.sendMessage("getDOMNodes",{},{rejectOnAbort:!0}),i=JSON.stringify(n)?.length||0;if(a.track(N.G3.SERIALIZE_HTML,{serializedJsonLength:i}),!n?.root)throw Error("No DOM data received from preview iframe");let s=(0,O.kc)().bake_m2d_roundtrip?e.referenceId??(e.fileKey?await q(e.fileKey):void 0):void 0;t=(await (0,N.N5)(n,{decodeImage:F.UD,rootFrameName:e.fileName,scene:(0,M.getActiveTSSceneGraph)(),tracking:A.HzA.TRACK,trackPerformance:a,trackDefinedEvent:R.az.trackDefinedEvent},{attachBuildDataToNodes:{enabled:!!(0,O.kc)().bake_m2d_roundtrip,fileKey:e.fileKey,referenceId:s??void 0}})).guid}else if(0===e.mode){let{html:n,rect:i}=await e.sitesPreview.getHTMLForElement(),s=(await G.convertHtmlToDesign({fileKey:e.fileKey,html:n,width:Math.ceil(i.width),height:Math.ceil(i.height)})).data.meta.buffer;t=W(s)}else(0,s.xb)(e);let i=e.canvasNodeGuid,r=L.l7.system("move-internal-node-to-canvas",()=>{let e=(0,M.getActiveTSSceneGraph)(),n=e.get(t);if(!n)throw Error("Html to design created node that was not found");let s=n.size.x,a=n.size.y,r=(i?e.get(i)?.parentGuid:e.getCurrentPage()?.guid)??"",l=function(e,t,n){if(!A.qmM)throw Error("InteractionCpp is not defined");let i=A.qmM.findBestBoundsForNewNodeRelativeToNode(e,t,n);return{x:i.origin.x,y:i.origin.y}}(i??"",s,a);return e.get(r)?.appendChild(n),n.x=l.x,n.y=l.y,n.guid}),l=n.getElapsedTime();return n.stop(),R.az.trackDefinedEvent("figmake.m2d_conversion_time",{fileKey:e.fileKey,mode:1===e.mode?"local":"api",target:"canvas",elapsedTimeMs:l}),a.track(N.G3.ADD_TO_CANVAS),a.trackFromStart(N.G3.END_SUCCESS),r}catch(e){throw a.trackError(N.G3.END_FAILURE,e),e}finally{a.removeEventListeners()}}function W(e){let t=(0,D.Ze)(e);if(!t)throw Error("Failed to decode clipboard buffer");return L.l7.user("paste-buffer-to-internal-canvas",()=>{let e=(0,M.getActiveTSSceneGraph)(),n=e.createNode("FRAME");n.stackMode="VERTICAL",n.stackPrimarySizing="RESIZE_TO_FIT_WITH_IMPLICIT_SIZE",n.stackCounterSizing="RESIZE_TO_FIT_WITH_IMPLICIT_SIZE";let i=e.getInternalCanvas();if(i)i.appendChild(n);else throw Error("Internal canvas not found");if(!A.glU?.directlyPasteSuggestion(t,n.parentGuid??"",null,n.guid))throw n.removeSelfAndChildren(),Error("Failed to paste buffer to canvas");let s=n.childrenNodes[0]?.clone(),a=s&&e.get(s);if(!a)throw n.removeSelfAndChildren(),Error("Failed to paste buffer to canvas");return i.appendChild(a),n.removeSelfAndChildren(),a.guid})}async function q(e){try{let{data:t}=await z.S.getOrCreateReferenceId({fileKey:e});return t.meta.reference_id}catch{throw Error("Failed to get or create reference id for roundtrip")}}var X=n(963433);let Y=(0,l.eU)(!1),Z=(0,f.bt)(e=>e.mirror.appModel.multiplayerSessionState);function J(){return(0,l.md)(Y)}function Q(){let{componentPreviewState:e}=(0,y.k)(),t=(0,l.md)(x.mK),{codeLibraryInstance:n}=(0,X.oA)(),i=(0,l.md)((0,_.o0)(n?.guid??"")),s=(0,c.wK)(),a=(0,l.md)(Z)===r.kul.JOINED;return(0,l.md)(v.jx)===v.Ic.PREVIEW&&e===y.d.LOADED&&!!t?.getHTMLForElement&&!i&&s&&a}function $(){let e=(0,d.hC)(),t=function(){let{getDynamicConfig:e}=(0,I.bY)("m2d_conversion_method");return(0,i.useMemo)(()=>e().get("method",V.LOCAL,e=>e===V.API||e===V.LOCAL),[e])}(),n=(0,h.tS)(),r=(0,h.IA)()??void 0,c=(0,g.l)(),[f,_]=(0,l.fp)(Y),{showProcessing:y,showSuccess:v,showError:N,showHtmlSizeError:A,showManualCopy:L,dismissProcessingBell:M}=function(){let e=(0,b.wA)(),t=i.useRef(null),n=i.useCallback(()=>{t.current&&(clearTimeout(t.current),t.current=null),e(j.F.dequeue({matchType:w}))},[e]),s=i.useCallback(n=>{t.current=window.setTimeout(()=>{e(j.F.enqueue({type:w,message:(0,C.t)("figmake.m2d.converting_make_to_design"),icon:k.zX.SPINNER,timeoutOverride:1/0,onDismiss:n}))},300)},[e]),a=i.useCallback(t=>{n(),e(j.F.enqueue({type:E,message:"clipboard"===t?(0,C.t)("figmake.m2d.copied_to_clipboard"):(0,C.t)("figmake.m2d.pasted_to_canvas")}))},[e,n]);return{showProcessing:s,showSuccess:a,showError:i.useCallback(()=>{n(),e(j.F.enqueue({type:T,message:(0,C.t)("figmake.m2d.failed_to_copy"),icon:k.zX.EXCLAMATION}))},[e,n]),showHtmlSizeError:i.useCallback(()=>{n(),e(j.F.enqueue({type:"html-too-large",message:(0,C.t)("figmake.m2d.html_too_large"),icon:k.zX.EXCLAMATION}))},[e,n]),showManualCopy:i.useCallback(t=>{n(),e(j.F.enqueue({type:S,message:(0,C.t)("figmake.m2d.click_to_copy_to_clipboard"),icon:k.zX.CLIPBOARD,timeoutOverride:1/0,button:{primary:{text:(0,C.t)("figmake.m2d.copy_button"),action:()=>{(async()=>{try{await t(),e(j.F.dequeue({matchType:S})),e(j.F.enqueue({type:E,message:(0,C.t)("figmake.m2d.copied_to_clipboard"),icon:k.zX.CHECK}))}catch{e(j.F.enqueue({type:T,message:(0,C.t)("figmake.m2d.failed_to_copy"),icon:k.zX.EXCLAMATION}))}})()}},secondary:{text:(0,C.t)("general.cancel"),action:()=>{e(j.F.dequeue({matchType:S}))}}}}))},[e,n]),dismissProcessingBell:n}}(),O=(0,l.md)(x.mK);i.useEffect(()=>()=>{M()},[M]);let R=Q();return{handleHtmlToDesign:i.useCallback(async i=>{let{target:l,fileName:d,persistentEntityId:h}=i;if(f||!n||!R)return;if(!O?.getHTMLForElement)throw Error("Snapshot HTML is not available for preview");_(!0);let g=new AbortController;y(()=>{g.abort(),M(),_(!1)});try{if("canvas"===l)await K({mode:t,sitesPreview:O,fileName:d,fileKey:n,referenceId:r}),v("canvas");else if("clipboard"===l){let i;let s=(0,o.g)();try{i=await H({mode:t,sitesPreview:O,fileName:d,fileKey:n,referenceId:r,copyId:s,persistentEntityId:h},g.signal),e("figmake.m2d_node_copied_to_clipboard",{persistentEntityId:h,copyId:s,error:!1,isFileViewOnly:c})}catch(t){throw"AbortError"!==t.name&&e("figmake.m2d_node_copied_to_clipboard",{persistentEntityId:h,copyId:s,error:!0,isFileViewOnly:c}),t}if(g.signal.aborted)return;let a=async(t,n)=>{try{if(!await m.Y5.writeToClipboard(t.text,t.metadata,t.buffer,t.textHtml))throw Error("Failed to write to clipboard");e("figmake.m2d_data_written_to_clipboard",{persistentEntityId:h,copyId:s,error:!1,isManual:n})}catch(t){throw e("figmake.m2d_data_written_to_clipboard",{persistentEntityId:h,copyId:s,error:!0,isManual:n}),t}};try{"undefined"!=typeof document&&"visible"===document.visibilityState&&document.hasFocus()?(await a(i,!1),v("clipboard")):L(()=>a(i,!0))}catch(e){L(()=>a(i,!0))}}else(0,s.xb)(l)}catch(e){if(!g.signal.aborted){if(e instanceof p.Dr&&(413===e.status||408===e.status)){A();return}e instanceof Error&&(0,u.$D)(a.e.MAKE,e,{tags:{target:l,mode:t}}),N()}}finally{_(!1),M(),g.abort()}},[O,n,r,f,_,R,y,v,N,A,L,M,t,c,e]),isProcessing:f,isEnabled:R}}},287441:(e,t,n)=>{n.d(t,{FH:()=>u,K6:()=>m,Q3:()=>h,X0:()=>f,dt:()=>p});var i=n(170627),s=n(980852),a=n(795033),r=n(883765),l=n(134873),o=n(985416);let d="figmake";async function c(e){return await (0,l.qV)(e)}async function u(e){let t=(0,s.getActiveTSSceneGraph)().get(e.sourceNodeGuid);if(!t)return;let n=await c(e.sourceFileKey);i.l7.system("set-plugin-data",()=>{let i=JSON.stringify({copyId:e.copyId,sourceFileKey:e.sourceFileKey,persistentEntityId:e.persistentEntityId,fileKeyHash:n});t.setPluginData(d,"m2d_track",i)})}let p=(0,o.Wh)(()=>(0,a.eU)(new Set));async function m(e,t){let n=(0,s.getActiveTSSceneGraph)().get(e);if(!n)return!1;let i=n.getPluginData(d,"m2d_node");return!!i&&i===await c(t)}function h(e){if(!e?.imports)return!1;let t=a.zl.get(p);return e.imports.some(e=>!!("node"===e.type&&t.has(e.guid)))}function f(e){let t=performance.now(),n=t,i={},s=!1,a=()=>{s||(s=!0,e.onPageHide())},l={once:!0};window.addEventListener("pagehide",a,l),window.addEventListener("beforeunload",a,l);let o=e=>{s?(0,r.sx)("html2design.html_to_design_performance",e,{sendAsBeacon:!0}):r.az.trackDefinedEvent("html2design.html_to_design_performance",e)};return{track:(t,s)=>{let a=performance.now(),r=a-n;n=a,s&&Object.assign(i,s),o({step:t,elapsedTimeMs:r,fileKey:e.fileKey,h2dSessionId:e.h2dSessionId,mode:e.mode,featureType:e.featureType,...i})},trackFromStart:(n,s)=>{let a=performance.now();s&&Object.assign(i,s),o({step:n,elapsedTimeMs:a-t,fileKey:e.fileKey,h2dSessionId:e.h2dSessionId,mode:e.mode,featureType:e.featureType,...i})},trackError:(n,s)=>{let a=performance.now(),r=s instanceof Error?s.message:String(s);o({step:n,elapsedTimeMs:a-t,fileKey:e.fileKey,h2dSessionId:e.h2dSessionId,mode:e.mode,featureType:e.featureType,...i,error:!0,errorMessage:r})},removeEventListeners:()=>{window.removeEventListener("pagehide",a),window.removeEventListener("beforeunload",a)}}}},697360:(e,t,n)=>{n.d(t,{ZW:()=>c,jK:()=>u,lA:()=>l,rW:()=>d,wG:()=>o});var i=n(716976),s=n(795033),a=n(196293);let r=(0,s.eU)({enabled:!1});function l(){return(0,s.md)(r)}function o(e){s.zl.set(r,e)}async function d(e){try{switch(e.type){case"commitEdits":await (0,a.fT)(e.edits);break;case"state":o(e.state)}}catch(e){console.error("handlePointAndEditInspectorEvent",e)}}let c=i.createContext(null);function u(){let e=i.useContext(c);if(!e)throw Error("usePointAndEditController must be used within a PointAndEditController");return e}},652931:(e,t,n)=>{n.d(t,{Ay:()=>g});var i=n(104076),s=n(716976),a=n(286138),r=n(859120);n(120440);var l=n(858959),o=n(784220),d=n(192075);let c={ENTER_TO_LOOP:600,LAYOUT_STEP:600,EXPAND_TO_ICON:300,ICON_TO_CODE:300,CODE_DURATION:6e3,CODE_EXIT:300,ICONS_DURATION:6e3,ICONS_EXIT:300,RESET_PAUSE:800},u=e=>`var(${e})`,p={bg:"--animation-bg",stroke:"--animation-stroke",strokeLight:"--animation-stroke-light",fill:"--animation-fill",icon:"--animation-icon"},m={light:{[p.bg]:u("--color-bg"),[p.stroke]:u("--ramp-violet-400"),[p.strokeLight]:u("--ramp-violet-300"),[p.fill]:u("--ramp-violet-100"),[p.icon]:u("--color-icon-brand")},dark:{[p.bg]:u("--color-bg"),[p.stroke]:u("--color-border"),[p.strokeLight]:u("--color-border"),[p.fill]:u("--color-bg-secondary"),[p.icon]:u("--color-icon-secondary")}};function h(e,t="top"){let n="light"===e?"255, 255, 255":"44, 44, 44",i=[{position:0,alpha:1},{position:.1179,alpha:.991615},{position:.2138,alpha:.967585},{position:.2912,alpha:.9296},{position:.3534,alpha:.879348},{position:.4037,alpha:.818519},{position:.4456,alpha:.7488},{position:.4824,alpha:.671881},{position:.5176,alpha:.589452},{position:.5544,alpha:.5032},{position:.5963,alpha:.414815},{position:.6466,alpha:.325985},{position:.7088,alpha:.2384},{position:.7862,alpha:.153748},{position:.8821,alpha:.0737185},{position:1,alpha:0}].map(e=>`rgba(${n}, ${e.alpha}) ${100*e.position}%`).join(", ");return`linear-gradient(${"top"===t?"to bottom":"to top"}, ${i})`}let f={light:{top:h("light","top"),bottom:h("light","bottom")},dark:{top:h("dark","top"),bottom:h("dark","bottom")}};function g({frozenPhase:e}){let[t,n]=(0,s.useState)(e||"enter"),[a,o]=(0,s.useState)(0),d=(0,s.useRef)(0),h=(0,r.G)();(0,s.useEffect)(()=>{let i;if(e)return;let s=e=>{n(()=>e)};return({enter:()=>{i=setTimeout(()=>s("loop"),c.ENTER_TO_LOOP)},loop:()=>{i=setTimeout(()=>{o(e=>{let t=(e+1)%5;return 0===t&&(d.current+=1,d.current>=1&&setTimeout(()=>s("exit"),200)),t})},c.LAYOUT_STEP)},exit:()=>s("expand"),expand:()=>{i=setTimeout(()=>s("icon"),c.EXPAND_TO_ICON)},icon:()=>{i=setTimeout(()=>s("code"),c.ICON_TO_CODE)},code:()=>{i=setTimeout(()=>s("codeExit"),c.CODE_DURATION)},codeExit:()=>{i=setTimeout(()=>s("fallingIcons"),c.CODE_EXIT)},fallingIcons:()=>{i=setTimeout(()=>s("fallingIconsExit"),c.ICONS_DURATION)},fallingIconsExit:()=>{i=setTimeout(()=>s("reset"),c.ICONS_EXIT)},reset:()=>{i=setTimeout(()=>s("enter"),c.RESET_PAUSE)},fixingErrors:()=>{}})[t](),()=>clearTimeout(i)},[t,a,e]),(0,s.useEffect)(()=>{e||(n(()=>"enter"),o(0),d.current=0)},[e]);let f={initial:{width:79},step1:{width:120,transition:{duration:.4,ease:"easeOut"}},step2:{width:79,transition:{duration:.4,ease:"easeOut"}},expand:{width:250,height:170,x:1,y:1,transition:{duration:.6,type:"spring",bounce:0}},reset:{width:79,height:79.0029,x:0,y:0,transition:{duration:.6,type:"spring"}}},g={initial:{width:79,x:172.499},step1:{width:120,x:131.499},step2:{width:79,x:172.499}},y={initial:{width:159,x:0},step1:{width:118,x:0},step2:{width:159,x:0}},C=()=>{switch(a){case 0:default:return"initial";case 1:return"step1";case 2:return"step2"}},j=()=>{switch(a){case 3:return"step1";case 4:return"step2";default:return"initial"}},k={hidden:{opacity:0,scale:1,y:8},show:{opacity:1,scale:1,y:0,transition:{duration:.4,type:"spring"}},exit:{opacity:0,scale:.6,y:8,transition:{duration:.4,type:"spring"}}},w={...k,exit:{opacity:0,scale:.6,y:-8,transition:{duration:.4,type:"spring"}}},E={...k,exit:{width:250,height:170,x:1,y:1,scale:1,opacity:1,transition:{ease:"easeOut",duration:.3}}},T=()=>{switch(t){case"exit":case"expand":return"exit";case"icon":case"code":case"codeExit":case"fixingErrors":case"fallingIcons":case"fallingIconsExit":return"hidden";case"reset":return"show";default:return}};return(0,i.jsx)("div",{className:"xdpfuu1 x1jn0hjm x1yjdb4r x78zum5 xdt5ytf x6s0dn4 xl56j7k",style:m[h.color],children:(0,i.jsx)("div",{className:"xwzcjdk xs4flsr xe8ttls x1rea2x4",children:(0,i.jsxs)("div",{className:"x78zum5 xdt5ytf x6s0dn4 x1rea2x4",children:[(0,i.jsxs)("div",{className:"x1ymmuzg x1ri49h8 x1n2onr6 x1rea2x4",children:["expand"===t||"icon"===t||"fixingErrors"===t||"code"===t||"codeExit"===t||"fallingIcons"===t||"fallingIconsExit"===t?(0,i.jsx)(l.P.div,{className:"x10l6tqk xqyf9gi x1a842fp x4pepcl x1yjdb4r xoegz02",initial:{opacity:0},animate:{opacity:"fallingIconsExit"===t||"reset"===t?0:1},transition:{duration:.3}}):null,(0,i.jsxs)(l.P.svg,{width:"252",height:"172",viewBox:"0 0 252 172",fill:"none",xmlns:"http://www.w3.org/2000/svg",variants:{hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.15,delayChildren:.1,type:"spring",duration:.4}}},initial:"hidden",animate:"show",style:{position:"relative",zIndex:9},children:[(0,i.jsx)(l.P.g,{variants:E,children:(0,i.jsx)(l.P.rect,{animate:"loop"===t?f[C()]:"expand"===t||"icon"===t||"code"===t||"codeExit"===t||"fallingIcons"===t||"fallingIconsExit"===t||"fixingErrors"===t?f.expand:"reset"===t?f.reset:f.initial,height:"79.0029",initial:f.initial,rx:"12.5015",stroke:u(p.stroke),strokeDasharray:"6 6",strokeWidth:"0.997067",transition:{type:"spring",stiffness:300,damping:25,duration:.3},x:"0.498534",y:"0.498534"})}),(0,i.jsx)(l.P.g,{variants:w,animate:T(),children:(0,i.jsx)(l.P.rect,{y:"0.498534",height:"79.0029",rx:"12.5015",stroke:u(p.stroke),strokeWidth:"0.997067",strokeDasharray:"6 6",initial:{x:92.4985,width:159.003},animate:"loop"===t?{x:1===a?132.4985:92.4985,width:({initial:{width:159,x:0},step1:{width:118,x:12},step2:{width:159,x:0}})[C()].width}:{x:92.4985,width:159.003},transition:{duration:.4,ease:"easeOut"}})}),(0,i.jsx)(l.P.g,{variants:w,animate:T(),children:(0,i.jsx)(l.P.rect,{animate:"loop"===t?{width:y[j()].width}:y.initial,height:"79.0029",initial:y.initial,rx:"12.5015",stroke:u(p.stroke),strokeDasharray:"6 6",strokeWidth:"0.997067",transition:{duration:.4,ease:"easeOut"},x:"0.498534",y:"92.4985"})}),(0,i.jsx)(l.P.g,{variants:w,animate:T(),children:(0,i.jsx)(l.P.rect,{y:"92.4985",height:"79.0029",rx:"12.5015",stroke:u(p.stroke),strokeWidth:"0.997067",strokeDasharray:"6 6",initial:{x:172.499,width:79},animate:"loop"===t?{x:g[j()].x,width:g[j()].width}:{x:172.499,width:79},transition:{duration:.4,ease:"easeOut"}})})]}),(0,i.jsx)(v,{animationPhase:t}),(0,i.jsx)(_,{animationPhase:t}),(0,i.jsx)(b,{animationPhase:t})]}),(0,i.jsx)(x,{animationPhase:t})]})})})}function x({animationPhase:e}){let[t,n]=(0,s.useState)(0);(0,s.useEffect)(()=>{let e=setInterval(()=>{n(e=>(e+1)%4)},350);return()=>clearInterval(e)},[]);let r=e=>"fixingErrors"===e?(0,d.t)("figmake.thinking_state.fixing_errors"):"expand"===e||"icon"===e||"code"===e?(0,d.t)("figmake.thinking_state.label_3"):"codeExit"===e||"fallingIcons"===e||"fallingIconsExit"===e?(0,d.t)("figmake.thinking_state.label_2"):(0,d.t)("figmake.thinking_state.label_1"),c=(0,s.useMemo)(()=>r(e),[e]);return(0,i.jsxs)("div",{className:"xqui205 xemv814 xno9bf3 x1betce5 x1n0bwc9 x1kpxq89 x78zum5 xl56j7k x87ps6o",style:{display:"flex",alignItems:"baseline"},children:[(0,i.jsx)(a.E,{"aria-live":"polite",children:c}),(0,i.jsx)("div",{"aria-hidden":"true",children:(0,i.jsx)(o.N,{mode:"wait",children:(0,i.jsxs)(l.P.span,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:-8},transition:{duration:.3,ease:"easeOut"},children:[(0,i.jsx)("span",{children:c}),(0,i.jsx)(l.P.span,{style:{display:"inline-block",width:"0.3em",textAlign:"left",marginLeft:"0"},"aria-hidden":"true",children:".".repeat(t)})]},c)})})]})}function _({animationPhase:e}){let t="code"===e||"fixingErrors"===e,n="codeExit"===e,s=(0,r.G)();return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(l.P.div,{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"200px",height:"140px",overflow:"hidden",zIndex:7},variants:{initial:{opacity:0},show:{opacity:1,transition:{duration:.4}},exit:{opacity:0,transition:{duration:.4}}},initial:"initial",animate:n?"exit":t?"show":"initial",children:(0,i.jsx)(l.P.div,{style:{position:"absolute",width:"100%"},variants:{initial:{y:128,opacity:1,transition:{duration:.4,type:"spring"}},animate:{y:-300,opacity:1,transition:{duration:8,ease:"linear",repeat:1/0,repeatType:"loop"}},exit:{y:-300,opacity:0,transition:{duration:.4,type:"spring"}}},initial:"initial",animate:n?"exit":t?"animate":"initial",children:(0,i.jsxs)("svg",{width:"189",height:"400",viewBox:"0 0 189 400",fill:"none",children:[(0,i.jsx)("rect",{x:"0.5",y:"0.5",width:"110",height:"11",rx:"3.5",fill:u(p.fill),stroke:u(p.strokeLight),strokeDasharray:"4 4"}),(0,i.jsx)("rect",{x:"0.5",y:"23.5",width:"159",height:"11",rx:"3.5",fill:u(p.fill),stroke:u(p.strokeLight),strokeDasharray:"4 4"}),(0,i.jsx)("rect",{x:"0.5",y:"47.5",width:"77",height:"11",rx:"3.5",fill:u(p.fill),stroke:u(p.strokeLight),strokeDasharray:"4 4"}),(0,i.jsx)("rect",{x:"0.5",y:"70.5",width:"188",height:"11",rx:"3.5",fill:u(p.fill),stroke:u(p.strokeLight),strokeDasharray:"4 4"}),(0,i.jsx)("rect",{x:"0.5",y:"94.5",width:"141",height:"11",rx:"3.5",fill:u(p.fill),stroke:u(p.strokeLight),strokeDasharray:"4 4"}),(0,i.jsx)("rect",{x:"0.5",y:"117.5",width:"110",height:"11",rx:"3.5",fill:u(p.fill),stroke:u(p.strokeLight),strokeDasharray:"4 4"}),(0,i.jsx)("rect",{x:"0.5",y:"140.5",width:"165",height:"11",rx:"3.5",fill:u(p.fill),stroke:u(p.strokeLight),strokeDasharray:"4 4"}),(0,i.jsx)("rect",{x:"0.5",y:"170.5",width:"110",height:"11",rx:"3.5",fill:u(p.fill),stroke:u(p.strokeLight),strokeDasharray:"4 4"}),(0,i.jsx)("rect",{x:"0.5",y:"193.5",width:"159",height:"11",rx:"3.5",fill:u(p.fill),stroke:u(p.strokeLight),strokeDasharray:"4 4"}),(0,i.jsx)("rect",{x:"0.5",y:"217.5",width:"77",height:"11",rx:"3.5",fill:u(p.fill),stroke:u(p.strokeLight),strokeDasharray:"4 4"}),(0,i.jsx)("rect",{x:"0.5",y:"240.5",width:"188",height:"11",rx:"3.5",fill:u(p.fill),stroke:u(p.strokeLight),strokeDasharray:"4 4"}),(0,i.jsx)("rect",{x:"0.5",y:"264.5",width:"141",height:"11",rx:"3.5",fill:u(p.fill),stroke:u(p.strokeLight),strokeDasharray:"4 4"}),(0,i.jsx)("rect",{x:"0.5",y:"287.5",width:"110",height:"11",rx:"3.5",fill:u(p.fill),stroke:u(p.strokeLight),strokeDasharray:"4 4"}),(0,i.jsx)("rect",{x:"0.5",y:"310.5",width:"165",height:"11",rx:"3.5",fill:u(p.fill),stroke:u(p.strokeLight),strokeDasharray:"4 4"})]})})}),(0,i.jsx)(l.P.div,{style:{position:"absolute",width:"238px",height:"82px",left:"8px",top:"4px",background:f[s.color].top,zIndex:8,pointerEvents:"none"},initial:{opacity:0},animate:{opacity:t?1:0},transition:{duration:.4}}),(0,i.jsx)(l.P.div,{style:{position:"absolute",width:"238px",height:"62px",left:"8px",top:"110px",background:f[s.color].bottom,zIndex:8,pointerEvents:"none"},initial:{opacity:0},animate:{opacity:t?1:0},transition:{duration:.4}})]})}let y={duration:.4,type:"spring"};function v({animationPhase:e}){let t={initial:{opacity:0,scale:0,x:12,y:124,transition:y},show:{opacity:1,scale:1,x:12,y:124,transition:y},exit:{opacity:0,scale:.6,x:12,y:124,transition:{...y,delay:.1}}};return(0,i.jsxs)(l.P.svg,{width:"36",height:"36",viewBox:"0 0 36 36",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{position:"absolute",top:0,left:0,zIndex:9,background:u(p.bg),borderRadius:36,transformOrigin:"center"},variants:t,initial:"initial",animate:"codeExit"===e?"exit":"icon"===e||"code"===e||"fixingErrors"===e?"show":"initial",children:[(0,i.jsx)("rect",{x:"0.5",y:"0.5",width:"35",height:"35",rx:"17.5",fill:u(p.bg),fillOpacity:"0.3"}),(0,i.jsx)("rect",{x:"0.5",y:"0.5",width:"35",height:"35",rx:"17.5",stroke:u(p.strokeLight)}),(0,i.jsx)("path",{d:"M14.8779 13.0316C15.0963 12.8874 15.3927 12.9116 15.585 13.1038C15.777 13.2961 15.8014 13.5926 15.6572 13.8109L15.585 13.8988L11.4824 18.0013L15.585 22.1038C15.8044 22.3235 15.8045 22.6792 15.585 22.8988C15.3654 23.1181 15.0096 23.1181 14.79 22.8988L10.29 18.3988C10.1847 18.2934 10.1251 18.1503 10.125 18.0013C10.125 17.8894 10.1585 17.7805 10.2197 17.6888L10.29 17.6038L14.79 13.1038L14.8779 13.0316ZM20.415 13.1029C20.6073 12.9107 20.9037 12.8864 21.1221 13.0306L21.21 13.1029L25.71 17.6029L25.7803 17.6878C25.8416 17.7796 25.875 17.8883 25.875 18.0003C25.875 18.1494 25.8154 18.2923 25.71 18.3978L21.21 22.8978C20.9903 23.1174 20.6347 23.1174 20.415 22.8978C20.1954 22.6781 20.1955 22.3225 20.415 22.1029L24.5176 18.0003L20.415 13.8978L20.3428 13.8099C20.1986 13.5916 20.2229 13.2951 20.415 13.1029Z",fill:u(p.icon)})]})}function b({animationPhase:e}){let t=(e,t,n,i,s)=>({initial:{x:e,y:-50,rotate:t,opacity:1,scale:1},animate:{x:e,y:[-64,236],rotate:n,opacity:1,scale:1,transition:{duration:2.2,ease:"linear",repeat:1/0,repeatDelay:0,repeatType:"loop",delay:i,times:[0,1]}},exit:{x:e,y:[-64,236],opacity:0,rotate:n,scale:.6,transition:{duration:.4,type:"spring"}}}),n=t(34,0,-5,0,0),s=t(138,-5,5,.2,0),a=t(75,0,-15,.5,.1),o=t(183,-5,5,.7,.15),d=t(20,0,15,1,.2),c=t(128,-5,5,1.2,.25),u=t(70,0,-12,1.5,.25),p=t(164,-6,6,1.7,.3),m=()=>{switch(e){case"fallingIcons":return"animate";case"fallingIconsExit":case"reset":return"exit";default:return"initial"}},h=(0,r.G)();return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(l.P.div,{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:252,height:172,zIndex:7,overflow:"hidden"},animate:{opacity:"fallingIconsExit"===e||"reset"===e?0:1},transition:{duration:.3},children:[(0,i.jsx)(l.P.div,{style:{position:"absolute"},variants:d,initial:"initial",animate:m(),children:(0,i.jsx)(C,{})}),(0,i.jsx)(l.P.div,{style:{position:"absolute"},variants:s,initial:"initial",animate:m(),children:(0,i.jsx)(j,{})}),(0,i.jsx)(l.P.div,{style:{position:"absolute"},variants:u,initial:"initial",animate:m(),children:(0,i.jsx)(w,{})}),(0,i.jsx)(l.P.div,{style:{position:"absolute"},variants:n,initial:"initial",animate:m(),children:(0,i.jsx)(E,{})}),(0,i.jsx)(l.P.div,{style:{position:"absolute"},variants:c,initial:"initial",animate:m(),children:(0,i.jsx)(k,{})}),(0,i.jsx)(l.P.div,{style:{position:"absolute"},variants:a,initial:"initial",animate:m(),children:(0,i.jsx)(S,{})}),(0,i.jsx)(l.P.div,{style:{position:"absolute"},variants:o,initial:"initial",animate:m(),children:(0,i.jsx)(I,{})}),(0,i.jsx)(l.P.div,{style:{position:"absolute"},variants:p,initial:"initial",animate:m(),children:(0,i.jsx)(T,{})})]}),(0,i.jsx)(l.P.div,{style:{position:"absolute",width:"238px",height:"92px",left:"8px",top:"-10px",background:f[h.color].top,zIndex:7,pointerEvents:"none"}}),(0,i.jsx)(l.P.div,{style:{position:"absolute",width:"238px",height:"62px",left:"8px",top:"110px",background:f[h.color].bottom,zIndex:7,pointerEvents:"none"}})]})}function C(){return(0,i.jsxs)("svg",{width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",children:[(0,i.jsxs)("g",{clipPath:"url(#clip0_7376_774364)",children:[(0,i.jsx)("path",{d:"M6.66699 19.9998C6.66699 19.5089 7.06496 19.1109 7.55588 19.1109H32.4448C32.9357 19.1109 33.3337 19.5089 33.3337 19.9998C33.3337 20.4908 32.9357 20.8887 32.4448 20.8887H7.55588C7.06496 20.8887 6.66699 20.4908 6.66699 19.9998Z",fill:u(p.icon)}),(0,i.jsx)("path",{d:"M20.0003 6.6665C20.4912 6.6665 20.8892 7.06447 20.8892 7.55539L20.8892 32.4443C20.8892 32.9352 20.4912 33.3332 20.0003 33.3332C19.5094 33.3332 19.1114 32.9352 19.1114 32.4443L19.1114 7.55539C19.1114 7.06447 19.5094 6.6665 20.0003 6.6665Z",fill:u(p.icon)}),(0,i.jsx)("path",{d:"M29.4284 10.5717C29.7755 10.9189 29.7755 11.4817 29.4284 11.8288L11.8293 29.4279C11.4822 29.7751 10.9194 29.7751 10.5722 29.4279C10.2251 29.0808 10.2251 28.518 10.5722 28.1708L28.1713 10.5717C28.5185 10.2246 29.0813 10.2246 29.4284 10.5717Z",fill:u(p.icon)}),(0,i.jsx)("path",{d:"M10.5729 10.5718C10.92 10.2246 11.4828 10.2246 11.83 10.5718L29.4291 28.1709C29.7762 28.518 29.7762 29.0808 29.4291 29.4279C29.0819 29.7751 28.5191 29.7751 28.172 29.4279L10.5729 11.8288C10.2258 11.4817 10.2258 10.9189 10.5729 10.5718Z",fill:u(p.icon)})]}),(0,i.jsx)("defs",{children:(0,i.jsx)("clipPath",{id:"clip0_7376_774364",children:(0,i.jsx)("rect",{width:"26.6667",height:"26.6667",fill:"white",transform:"translate(6.66699 6.6665)"})})})]})}function j(){return(0,i.jsxs)("svg",{width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",children:[(0,i.jsx)("g",{clipPath:"url(#clip0_7376_774366)",children:(0,i.jsx)("path",{d:"M13.333 7.49951H26.667C28.0474 7.49969 29.1668 8.61906 29.167 9.99951V29.5815C29.167 30.3037 28.3103 30.6848 27.7744 30.2007L21.1172 24.187C20.4827 23.6139 19.5173 23.6139 18.8828 24.187L12.2256 30.2007C11.6897 30.6848 10.833 30.3037 10.833 29.5815V9.99951C10.8332 8.61906 11.9526 7.49969 13.333 7.49951Z",stroke:u(p.icon),strokeWidth:"1.66667"})}),(0,i.jsx)("defs",{children:(0,i.jsx)("clipPath",{id:"clip0_7376_774366",children:(0,i.jsx)("rect",{width:"26.6667",height:"26.6667",fill:u(p.bg),transform:"translate(6.66699 6.6665)"})})})]})}function k(){return(0,i.jsxs)("svg",{width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",children:[(0,i.jsx)("mask",{id:"path-1-inside-1_7376_774367",fill:"white",children:(0,i.jsx)("path",{d:"M20 6.6665C27.3636 6.6665 33.3327 12.6359 33.333 19.9995C33.333 27.3633 27.3638 33.3335 20 33.3335C17.6248 33.3335 15.3954 32.7111 13.4639 31.6226L8.99609 33.1128C7.69316 33.5471 6.45339 32.3073 6.8877 31.0044L8.37695 26.5347C7.28885 24.6034 6.66699 22.3741 6.66699 19.9995C6.66726 12.6359 12.6364 6.6665 20 6.6665Z"})}),(0,i.jsx)("path",{d:"M20 6.6665L20 4.99984H20V6.6665ZM33.333 19.9995L34.9997 19.9995L34.9997 19.9995L33.333 19.9995ZM20 33.3335L20 35.0002H20L20 33.3335ZM13.4639 31.6226L14.2822 30.1706L13.638 29.8076L12.9365 30.0415L13.4639 31.6226ZM8.99609 33.1128L9.52314 34.6939L9.52345 34.6938L8.99609 33.1128ZM6.8877 31.0044L8.46883 31.5314L8.4689 31.5312L6.8877 31.0044ZM8.37695 26.5347L9.95816 27.0615L10.1918 26.3604L9.829 25.7165L8.37695 26.5347ZM6.66699 19.9995L5.00033 19.9995V19.9995H6.66699ZM20 6.6665L20 8.33317C26.4431 8.33317 31.6661 13.5564 31.6663 19.9996L33.333 19.9995L34.9997 19.9995C34.9994 11.7155 28.2842 4.99984 20 4.99984L20 6.6665ZM33.333 19.9995H31.6663C31.6663 26.443 26.4432 31.6668 20 31.6668L20 33.3335L20 35.0002C28.2844 35.0002 34.9997 28.2836 34.9997 19.9995H33.333ZM20 33.3335V31.6668C17.9196 31.6668 15.9711 31.1224 14.2822 30.1706L13.4639 31.6226L12.6456 33.0745C14.8197 34.2998 17.33 35.0002 20 35.0002V33.3335ZM13.4639 31.6226L12.9365 30.0415L8.46874 31.5318L8.99609 33.1128L9.52345 34.6938L13.9912 33.2036L13.4639 31.6226ZM8.99609 33.1128L8.46905 31.5317L8.46883 31.5314L6.8877 31.0044L5.30656 30.4773C4.43794 33.0832 6.91728 35.5626 9.52314 34.6939L8.99609 33.1128ZM6.8877 31.0044L8.4689 31.5312L9.95816 27.0615L8.37695 26.5347L6.79575 26.0078L5.30649 30.4776L6.8877 31.0044ZM8.37695 26.5347L9.829 25.7165C8.87765 24.028 8.33366 22.0796 8.33366 19.9995H6.66699H5.00033C5.00033 22.6687 5.70006 25.1789 6.9249 27.3528L8.37695 26.5347ZM6.66699 19.9995L8.33366 19.9996C8.33389 13.5564 13.5569 8.33317 20 8.33317V6.6665V4.99984C11.7158 4.99984 5.00062 11.7155 5.00033 19.9995L6.66699 19.9995Z",fill:u(p.icon),mask:"url(#path-1-inside-1_7376_774367)"})]})}function w(){return(0,i.jsx)("svg",{width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",children:(0,i.jsx)("path",{d:"M20.3008 8.3374C26.6049 8.49711 31.666 13.6578 31.666 20.0005L31.6621 20.3013C31.5022 26.6052 26.3424 31.6663 20 31.6665L19.6982 31.6626C13.4947 31.5049 8.49424 26.5049 8.33691 20.3013L8.33301 20.0005C8.33301 13.5574 13.557 8.33385 20 8.3335L20.3008 8.3374ZM20 10.0005C14.4775 10.0008 10 14.4779 10 20.0005C10.0004 25.5228 14.4777 30.0001 20 30.0005C25.5225 30.0003 29.9996 25.5229 30 20.0005C30 14.4777 25.5227 10.0007 20 10.0005ZM25.3779 21.6733C25.622 21.7048 25.842 21.8433 25.9756 22.0542C26.1282 22.2957 26.1468 22.5989 26.0244 22.8569C24.9887 25.0369 22.8027 26.5682 20.248 26.6616L20 26.6655C17.4227 26.6654 15.1891 25.203 14.0801 23.0659L13.9756 22.8569C13.8533 22.5989 13.8719 22.2956 14.0244 22.0542C14.1771 21.8129 14.443 21.6666 14.7285 21.6665H25.2715L25.3779 21.6733ZM16.2744 23.3325C17.1903 24.3557 18.5203 24.9994 20 24.9995L20.3701 24.9858C21.7008 24.8885 22.8867 24.2697 23.7256 23.3325H16.2744ZM16.667 14.9995C17.5873 14.9997 18.3329 15.7462 18.333 16.6665C18.333 17.5869 17.5873 18.3333 16.667 18.3335C15.7465 18.3335 15 17.587 15 16.6665C15.0001 15.7461 15.7466 14.9995 16.667 14.9995ZM23.333 14.9995C24.2534 14.9995 24.9999 15.7461 25 16.6665C25 17.587 24.2535 18.3335 23.333 18.3335C22.4127 18.3333 21.667 17.5869 21.667 16.6665C21.6671 15.7462 22.4127 14.9997 23.333 14.9995Z",fill:u(p.icon)})})}function E(){return(0,i.jsx)("svg",{width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",children:(0,i.jsx)("path",{d:"M21.3291 11.0493C23.8048 8.61828 27.7764 8.54181 30.3457 10.8208L30.5898 11.0493C33.0574 13.4725 33.1348 17.348 30.8213 19.8618L30.5898 20.1001L20 30.4976L9.41113 20.1001C6.86394 17.5989 6.86394 13.5505 9.41113 11.0493C11.8869 8.61826 15.8585 8.54168 18.4277 10.8208L18.6719 11.0493L19.416 11.7808L20 12.354L20.584 11.7808L21.3291 11.0493Z",stroke:u(p.icon),strokeWidth:"1.66667"})})}function T(){return(0,i.jsx)("svg",{width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",children:(0,i.jsx)("path",{d:"M19.0352 5.30728C19.6528 4.86836 20.4988 4.89969 21.084 5.40103L32.751 15.401C33.1204 15.7177 33.333 16.1801 33.333 16.6667V31.6667C33.3328 32.587 32.5864 33.3336 31.666 33.3336H25C24.0798 33.3335 23.3332 32.5869 23.333 31.6667V21.6667H16.666V31.6667C16.6658 32.5869 15.9202 33.3335 15 33.3336H8.33301C7.41279 33.3335 6.66619 32.5869 6.66602 31.6667V16.6667C6.66602 16.1803 6.8789 15.7177 7.24805 15.401L18.915 5.40103L19.0352 5.30728ZM8.33301 16.6667V31.6667H15V19.9997H25V31.6667H31.666V16.6667L20 6.66666L8.33301 16.6667Z",fill:u(p.icon)})})}function S(){return(0,i.jsx)("svg",{width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",children:(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M29.5131 13.2457C30.8458 15.1227 31.5882 17.3443 31.6611 19.6277C31.6648 19.7453 31.6668 19.863 31.667 19.9809C31.667 19.9873 31.6671 19.9936 31.6672 19.9998C31.6672 21.8408 30.1747 23.3332 28.3337 23.3332C27.3381 23.3332 26.4445 22.8967 25.8337 22.2047V14.9998C25.8337 14.5396 25.4606 14.1665 25.0003 14.1665C24.5401 14.1665 24.167 14.5396 24.167 14.9998V15.9174C23.1082 14.8369 21.6326 14.1665 20.0003 14.1665C16.7787 14.1665 14.167 16.7782 14.167 19.9998C14.167 23.2215 16.7787 25.8332 20.0003 25.8332C21.9338 25.8332 23.6476 24.8925 24.709 23.4439C25.6199 24.4023 26.907 24.9998 28.3337 24.9998C31.0475 24.9998 33.2563 22.8379 33.3317 20.1424C33.3327 20.1275 33.3332 20.1125 33.3333 20.0973C33.3335 20.0729 33.3336 20.0485 33.3337 20.0241C33.3337 20.016 33.3337 20.0079 33.3337 19.9998C33.3337 19.9927 33.3337 19.9855 33.3337 19.9783C33.3293 17.2275 32.4736 14.5365 30.8721 12.2808C29.0862 9.76561 26.4835 7.9474 23.5074 7.13601C20.5313 6.32463 17.3659 6.57028 14.5506 7.8311C11.7353 9.09192 9.44429 11.2899 8.06788 14.0505C6.69148 16.8112 6.31487 19.9637 7.00223 22.9708C7.68958 25.978 9.39837 28.6538 11.8374 30.5424C14.2765 32.4309 17.2949 33.4153 20.3784 33.3278C23.1437 33.2494 25.8078 32.3133 28.0073 30.6613C28.039 30.6375 28.0707 30.6135 28.1022 30.5894C28.4677 30.3097 28.503 29.7811 28.2011 29.4337C27.9222 29.1129 27.4532 29.0593 27.0933 29.2708C27.0781 29.2797 27.063 29.2891 27.0482 29.299C27.0341 29.3085 27.0201 29.3183 27.0064 29.3286C25.0818 30.7741 22.7507 31.5932 20.3312 31.6618C17.6331 31.7384 14.992 30.877 12.8578 29.2246C10.7236 27.5721 9.22843 25.2307 8.62699 22.5995C8.02556 19.9682 8.35509 17.2098 9.55944 14.7942C10.7638 12.3786 12.7684 10.4554 15.2318 9.35219C17.6952 8.24897 20.4649 8.03403 23.069 8.74399C25.6731 9.45395 27.9505 11.0449 29.5131 13.2457ZM24.167 19.9998C24.167 22.301 22.3015 24.1665 20.0003 24.1665C17.6992 24.1665 15.8337 22.301 15.8337 19.9998C15.8337 17.6987 17.6992 15.8332 20.0003 15.8332C22.3015 15.8332 24.167 17.6987 24.167 19.9998Z",fill:u(p.icon)})})}function I(){return(0,i.jsx)("svg",{width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",children:(0,i.jsx)("path",{d:"M20 6.6665C12.6364 6.6665 6.66699 12.6358 6.66699 19.9998C6.66699 27.3639 12.6364 33.3332 20 33.3332C27.3637 33.3332 33.3337 27.3639 33.3337 19.9998C33.3337 12.6358 27.3637 6.6665 20 6.6665ZM20 8.33317C26.4431 8.33317 31.667 13.5564 31.667 19.9998C31.667 22.8207 30.5955 25.3998 28.8223 27.3332C27.6031 25.1332 25.3337 23.6665 22.7087 23.4332C24.3753 22.4998 25.4837 20.7332 25.4837 18.7498C25.4837 15.7498 23.0003 13.3332 20.0003 13.3332C17.0003 13.3332 14.517 15.7498 14.517 18.7498C14.517 20.7332 15.6253 22.4998 17.292 23.4332C14.667 23.6665 12.3976 25.1332 11.1784 27.3332C9.40521 25.3998 8.33366 22.8207 8.33366 19.9998C8.33366 13.5564 13.5569 8.33317 20 8.33317ZM16.1837 18.7498C16.1837 16.6665 17.9003 14.9998 20.0003 14.9998C22.1003 14.9998 23.817 16.6665 23.817 18.7498C23.817 20.8332 22.1003 22.4998 20.0003 22.4998C17.9003 22.4998 16.1837 20.8332 16.1837 18.7498ZM12.9587 28.6665C13.9587 26.1665 16.7503 24.1665 20.0003 24.1665C23.2503 24.1665 26.042 26.1665 27.042 28.6665C24.9587 30.4998 22.6003 31.6665 20 31.6665C17.3997 31.6665 15.042 30.4998 12.9587 28.6665Z",fill:u(p.icon)})})}},444713:(e,t,n)=>{n.d(t,{L9:()=>w,WW:()=>g,Yd:()=>T,Yh:()=>k,dD:()=>v,fw:()=>j,g_:()=>E,gn:()=>_,sH:()=>C,u3:()=>b});var i=n(104076),s=n(716976),a=n(237420),r=n(225654),l=n(790009),o=n(795033);n(120440);var d=n(192075),c=n(435049),u=n(506192),p=n(985416),m=n(813371),h=n(954741),f=(e=>(e.ANDROID_COMPACT="ANDROID_COMPACT",e.ANDROID_MEDIUM="ANDROID_MEDIUM",e.CUSTOM="CUSTOM",e.IPHONE_16="IPHONE_16",e.IPHONE_16_PRO="IPHONE_16_PRO",e.IPHONE_16_PRO_MAX="IPHONE_16_PRO_MAX",e.IPHONE_16_PLUS="IPHONE_16_PLUS",e.IPHONE_SE="IPHONE_SE",e))(f||{});let g={ANDROID_COMPACT:{width:412,height:917},ANDROID_MEDIUM:{width:700,height:840},CUSTOM:{width:void 0,height:void 0},IPHONE_16:{width:393,height:852},IPHONE_16_PRO:{width:402,height:874},IPHONE_16_PRO_MAX:{width:440,height:956},IPHONE_16_PLUS:{width:430,height:932},IPHONE_SE:{width:320,height:568}},x="IPHONE_16",_=(0,p.rt)(!1),y=(0,p.rt)(x),v=(0,p.rt)(g[x].height||852),b=(0,p.rt)(g[x].width||393),C=(0,p.rt)(1),j=320,k=320,w=3e3,E=3e3;function T(){let e=(0,a.wA)(),[t,n]=(0,o.fp)(_),[p,f]=(0,o.fp)(v),[C,T]=(0,o.fp)(b),[S,I]=(0,o.fp)(y),N=(0,u.Um)(),A=(0,i.jsx)(r.X,{className:"x52n8ys"}),L=s.useCallback(e=>{e&&f(Math.min(Math.max(e,j),w))},[f]),M=s.useCallback(e=>{e&&T(Math.min(Math.max(e,k),E))},[T]),O=s.useCallback(e=>{I(e);let t=g[e];M(t?.width),L(t?.height)},[L,M,I]);if(s.useEffect(()=>{C!==g[S]?.width&&O("CUSTOM")},[S,C,O]),!t)return null;let R={ANDROID_COMPACT:(0,d.t)("figmake.mobile_preview.options.android_compact"),ANDROID_MEDIUM:(0,d.t)("figmake.mobile_preview.options.android_medium"),CUSTOM:(0,d.t)("figmake.mobile_preview.options.custom"),IPHONE_16:(0,d.t)("figmake.mobile_preview.options.iphone_16"),IPHONE_16_PRO:(0,d.t)("figmake.mobile_preview.options.iphone_16_pro"),IPHONE_16_PRO_MAX:(0,d.t)("figmake.mobile_preview.options.iphone_16_pro_max"),IPHONE_16_PLUS:(0,d.t)("figmake.mobile_preview.options.iphone_16_plus"),IPHONE_SE:(0,d.t)("figmake.mobile_preview.options.iphone_se")};return(0,i.jsxs)("div",{className:"x78zum5 x6s0dn4 x1n2onr6 x1qughib xxk0z11 x1yjdb4r xso031l x1y0btm7 x7z60cl xe8ttls","data-testid":"mobile-preview-toolbar",children:[(0,i.jsx)("div",{className:"x78zum5 x6s0dn4 x1i9suas x1ncir08 x2lah0s",children:(0,i.jsx)(h.l6,{dispatch:e,dropdownAlignment:"left",dropdownShown:N,dropdownWidth:240,formatter:{format:e=>R[e??x]},id:"mobile-preview-option",neverConstrain:!0,onChange:e=>{O(e)},openBelowTarget:!0,property:S??x,children:Object.entries(g).map(([e])=>{let t=g[e].width,n=g[e].height;return(0,i.jsx)(h.c$,{value:e,selected:S===e,children:(0,i.jsxs)("div",{className:"x11r6d5e xh8yej3 x140o2bo",children:[(0,i.jsx)("div",{className:"x1n9xxwz xxymvpz xb3r6kr xlyipyv xuxw1ft xygnafs",children:R[e]}),t&&n?(0,i.jsx)(l.J,{mode:"dark",children:(0,i.jsx)("div",{className:"x1n9xxwz xxymvpz x1hr2gdg x1n0bwc9 xuxw1ft",children:(0,d.t)("figmake.mobile_preview.labels.aspect_ratio",{width:t,height:n})})}):null]})},e)})})}),(0,i.jsxs)("div",{className:"x10l6tqk x1nrll8i xwa60dl x11lhmoz x78zum5 x167g77z x1vjfegm",children:[(0,i.jsxs)("div",{className:"x1n2onr6 x29ncy0 x1rg5ohu",children:[(0,i.jsx)("span",{className:"x10l6tqk xncym2f x19up5dg xwa60dl x1cb1t30 x52n8ys x47corl x1j6dyjg x1vjfegm",children:(0,d.t)("figmake.mobile_preview.labels.width")}),(0,i.jsx)(m.Q7,{className:"xd3ty66 x1v8gsql xmkeg23 x1y0btm7 x9r1u3d x3sae66 xl0cjzi",property:C,formatter:new c.KD,allowEmpty:!1,autoFocus:!1,disabled:!1,onChange:e=>{M(e)}})]}),(0,i.jsxs)("div",{className:"x1n2onr6 x29ncy0 x1rg5ohu",children:[(0,i.jsx)("span",{className:"x10l6tqk xncym2f x19up5dg xwa60dl x1cb1t30 x52n8ys x47corl x1j6dyjg x1vjfegm",children:(0,d.t)("figmake.mobile_preview.labels.height")}),(0,i.jsx)(m.Q7,{className:"xd3ty66 x1v8gsql xmkeg23 x1y0btm7 x9r1u3d x3sae66 xl0cjzi",property:p,formatter:new c.KD,allowEmpty:!1,autoFocus:!1,disabled:!1,onChange:e=>{L(e)}})]})]}),(0,i.jsx)("button",{className:"x78zum5 x6s0dn4 xl56j7k x1td3qas x10w6t97 x2lah0s xjbqb8w xv2f06h x12oqio5 x1t3whoi",onClick:()=>n(!1),children:A})]})}},407465:(e,t,n)=>{n.d(t,{m:()=>y});var i=n(104076),s=n(716976),a=n(276800),r=n(795033),l=n(120440),o=n(641518),d=n(365120),c=n(708560),u=n(347105),p=n(444713),m=n(223928);let h=Math.max(...Object.values(p.WW).map(e=>e.height).filter(e=>void 0!==e)),f={k3aq6I:"xsqj5wx",k3nNDw:"x1dp6rp6",$$css:!0},g={kzqmXN:"x5lhr3w",kZKoxP:"x16ye13r",$$css:!0},x={k3aq6I:"xsqj5wx",$$css:!0},_={deviceWithHandles:{kVAEAm:"x1n2onr6",k1xSpc:"x78zum5",kGNEyG:"x6s0dn4",kjj79g:"x1nhvcw1",kXwgrk:"xdt5ytf",$$css:!0},deviceWithHandlesScaledZoom:e=>[{kKQXaZ:null!=e?"x12651j4":e,$$css:!0},{"--x-zoom":null!=e?e:void 0}],deviceWithHandlesScaledTransform:e=>[f,{"--x-transform":`scale(${e})`}],device:{kaIpWk:"xqx0amy",kVQacm:"xb3r6kr",kWkggS:"x1v8gsql",k1xSpc:"x78zum5",kGNEyG:"x6s0dn4",kjj79g:"xl56j7k",keoZOQ:"xw7yly9",kVAEAm:"x1n2onr6",$$css:!0},deviceWithDimensions:(e,t)=>[g,{"--x-width":(e=>"number"==typeof e?e+"px":null!=e?e:void 0)(`${e}px`),"--x-height":(e=>"number"==typeof e?e+"px":null!=e?e:void 0)(`${t}px`)}],resizeHandleScaled:e=>[x,{"--x-transform":`scale(${e})`}],noop:{k1xSpc:"xjp7ctv",$$css:!0}};function y({children:e}){let[t]=(0,r.fp)(p.gn),[n,a]=(0,r.fp)(p.u3),[o,d]=(0,r.fp)(p.dD),[u,m]=(0,r.fp)(p.sH),[f,g]=s.useState(void 0),[x,y]=s.useState(0),b=s.useRef(null),C=s.useMemo(()=>"zoom"in document.createElement("div").style,[]);s.useEffect(()=>{if(!t)return;let e=()=>{b.current&&y(b.current.getBoundingClientRect().height)};e();let n=new ResizeObserver(e);return b.current&&n.observe(b.current),()=>{n.disconnect()}},[b,t]);let j=()=>({top:0,left:0,right:n,bottom:o}),k=(e,t)=>{(e[c.OP.LEFT]||e[c.OP.RIGHT])&&a(Math.min(Math.max(t.right-t.left,p.Yh),p.g_)),e[c.OP.BOTTOM]&&d(Math.min(Math.max(t.bottom,p.fw),p.L9))};s.useEffect(()=>{x&&m(Math.min(Math.max(.5,(x-40)/h),1))},[x,m,u]);let w=1/u;return(0,i.jsxs)("div",{...{0:{className:"xjp7ctv"},1:{className:"xh8yej3 x5yr21d x1n2onr6 xb3r6kr"}}[!!t<<0],ref:b,children:[(0,i.jsx)("div",{...{0:{className:"xjp7ctv"},1:{className:"xh8yej3 x5yr21d x1v8gsql xb3r6kr"}}[!!t<<0],children:(0,i.jsxs)("div",{...l.Ay.props(t?[_.deviceWithHandles,C?_.deviceWithHandlesScaledZoom(u):_.deviceWithHandlesScaledTransform(u)]:_.noop),children:[(0,i.jsxs)("div",{...{0:{className:"xjp7ctv"},1:{className:"x78zum5 x6s0dn4 x1n2onr6"}}[!!t<<0],children:[t&&(0,i.jsx)("div",{...l.Ay.props(_.resizeHandleScaled(w)),children:(0,i.jsx)(v,{getCurrentContainerBounds:j,resizeTo:k,isResizing:f,setIsResizing:g,direction:c.OP.LEFT})}),(0,i.jsx)("div",{...l.Ay.props(t?[_.device,_.deviceWithDimensions(n,o)]:_.noop),children:(0,i.jsx)("div",{...{0:{className:"xjp7ctv"},1:{className:"xh8yej3 x5yr21d xb3r6kr x1n2onr6 xqx0amy"}}[!!t<<0],children:e})}),t&&(0,i.jsx)("div",{...l.Ay.props(_.resizeHandleScaled(w)),children:(0,i.jsx)(v,{getCurrentContainerBounds:j,resizeTo:k,isResizing:f,setIsResizing:g,direction:c.OP.RIGHT})})]}),t&&(0,i.jsx)("div",{...l.Ay.props(_.resizeHandleScaled(w)),children:(0,i.jsx)(v,{getCurrentContainerBounds:j,resizeTo:k,isResizing:f,setIsResizing:g,direction:c.OP.BOTTOM})})]})}),t&&f&&(0,i.jsx)("div",{className:"x10l6tqk x10a8y8t x1vjfegm x71s49j"})]})}function v({resizeTo:e,getCurrentContainerBounds:t,isResizing:n,setIsResizing:s,direction:r}){let l=`resizeHandle-${r}`,{startResizing:p}=(0,u.Q)({resizeTo:e,getCurrentContainerBounds:t,isResizing:n,setIsResizing:s,setResizeDirections:a.lQ,lockAspectRatio:!1,hidden:!1,recordingKey:l,mirrorResizeHorizontally:!0}),h=o.rf(l,"mousedown",e=>{e.stopPropagation(),e.preventDefault(),p([r],{x:e.clientX,y:e.clientY})}),f=r===c.OP.BOTTOM?m.C6:m.I9;return(0,i.jsx)(d.S.div,{className:f,onMouseDown:h,children:(0,i.jsx)("div",{className:"x1evwjr3"})})}},923594:(e,t,n)=>{n.d(t,{UA:()=>l,rH:()=>r,w7:()=>o});var i=n(104076),s=n(890373);n(120440);var a=n(192075);function r(){return(0,i.jsxs)("div",{className:"x78zum5 xdt5ytf x6s0dn4 x1jnr06f xl56j7k x5yr21d xh8yej3",children:[(0,i.jsx)(d,{}),(0,i.jsxs)("div",{className:"x78zum5 xdt5ytf x6s0dn4 x1jnr06f x1racy4e",children:[(0,i.jsx)("div",{className:"xiqqdae xkezfkh",children:(0,a.tx)("figmake.error_overlay.header")}),(0,i.jsx)("div",{className:"x17akokd x1n0bwc9 x2b8uid",children:(0,a.tx)("figmake.error_overlay.subtitle")})]})]})}function l(){return(0,i.jsxs)("div",{className:"x78zum5 xdt5ytf x6s0dn4 x1jnr06f xl56j7k x5yr21d xh8yej3",children:[(0,i.jsx)(d,{}),(0,i.jsxs)("div",{className:"x78zum5 xdt5ytf x6s0dn4 x1jnr06f x1racy4e",children:[(0,i.jsx)("div",{className:"xiqqdae xkezfkh",children:(0,a.tx)("figmake.error_overlay.header")}),(0,i.jsx)("div",{className:"x17akokd x1n0bwc9 x2b8uid",children:(0,a.tx)("figmake.error_overlay.subtitle_library")})]})]})}function o(){return(0,i.jsxs)("div",{className:"x78zum5 xdt5ytf x6s0dn4 x1jnr06f xl56j7k x5yr21d xh8yej3",children:[(0,i.jsx)(d,{}),(0,i.jsxs)("div",{className:"x78zum5 xdt5ytf x6s0dn4 x1jnr06f x1racy4e",children:[(0,i.jsx)("div",{className:"xiqqdae xkezfkh",children:(0,a.tx)("figmake.embed.error_overlay.header")}),(0,i.jsx)("div",{className:"x17akokd x1n0bwc9 x2b8uid",children:(0,a.tx)("figmake.embed.error_overlay.subtitle")})]})]})}function d(){return(0,i.jsx)("div",{className:"x1n2onr6 x1jn9k7v x1llg2sp",children:(0,i.jsxs)("svg",{className:"x10l6tqk x41qcxd xbzw7ph",width:"417",height:"423",viewBox:"0 0 417 423",fill:"none",children:[(0,i.jsx)("path",{d:"M1 1V32H32V1H1ZM1 289V320H32V289H1ZM33 289V320H64V289H33ZM65 289V320H96V289H65ZM97 289V320H128V289H97ZM129 289V320H160V289H129ZM161 289V320H192V289H161ZM193 289V320H224V289H193ZM225 289V320H256V289H225ZM257 289V320H288V289H257ZM289 289V320H320V289H289ZM321 289V320H352V289H321ZM353 289V320H384V289H353ZM385 289V320H416V289H385ZM1 257V288H32V257H1ZM33 257V288H64V257H33ZM65 257V288H96V257H65ZM97 257V288H128V257H97ZM129 257V288H160V257H129ZM161 257V288H192V257H161ZM193 257V288H224V257H193ZM225 257V288H256V257H225ZM257 257V288H288V257H257ZM289 257V288H320V257H289ZM321 257V288H352V257H321ZM353 257V288H384V257H353ZM385 257V288H416V257H385ZM1 225V256H32V225H1ZM33 225V256H64V225H33ZM65 225V256H96V225H65ZM97 225V256H128V225H97ZM129 225V256H160V225H129ZM161 225V256H192V225H161ZM193 225V256H224V225H193ZM225 225V256H256V225H225ZM257 225V256H288V225H257ZM289 225V256H320V225H289ZM321 225V256H352V225H321ZM353 225V256H384V225H353ZM385 225V256H416V225H385ZM1 193V224H32V193H1ZM33 193V224H64V193H33ZM65 193V224H96V193H65ZM97 193V224H128V193H97ZM129 193V224H160V193H129ZM161 193V224H192V193H161ZM193 193V224H224V193H193ZM225 193V224H256V193H225ZM257 193V224H288V193H257ZM289 193V224H320V193H289ZM321 193V224H352V193H321ZM353 193V224H384V193H353ZM385 193V224H416V193H385ZM1 161V192H32V161H1ZM33 161V192H64V161H33ZM65 161V192H96V161H65ZM97 161V192H128V161H97ZM129 161V192H160V161H129ZM161 161V192H192V161H161ZM193 161V192H224V161H193ZM225 161V192H256V161H225ZM257 161V192H288V161H257ZM289 161V192H320V161H289ZM321 161V192H352V161H321ZM353 161V192H384V161H353ZM385 161V192H416V161H385ZM1 129V160H32V129H1ZM33 129V160H64V129H33ZM65 129V160H96V129H65ZM97 129V160H128V129H97ZM129 129V160H160V129H129ZM161 129V160H192V129H161ZM193 129V160H224V129H193ZM225 129V160H256V129H225ZM257 129V160H288V129H257ZM289 129V160H320V129H289ZM321 129V160H352V129H321ZM353 129V160H384V129H353ZM385 129V160H416V129H385ZM1 97V128H32V97H1ZM33 97V128H64V97H33ZM65 97V128H96V97H65ZM97 97V128H128V97H97ZM129 97V128H160V97H129ZM161 97V128H192V97H161ZM193 97V128H224V97H193ZM225 97V128H256V97H225ZM257 97V128H288V97H257ZM289 97V128H320V97H289ZM321 97V128H352V97H321ZM353 97V128H384V97H353ZM385 97V128H416V97H385ZM1 65V96H32V65H1ZM33 65V96H64V65H33ZM65 65V96H96V65H65ZM97 65V96H128V65H97ZM129 65V96H160V65H129ZM161 65V96H192V65H161ZM193 65V96H224V65H193ZM225 65V96H256V65H225ZM257 65V96H288V65H257ZM289 65V96H320V65H289ZM321 65V96H352V65H321ZM353 65V96H384V65H353ZM385 65V96H416V65H385ZM1 33V64H32V33H1ZM33 33V64H64V33H33ZM65 33V64H96V33H65ZM97 33V64H128V33H97ZM129 33V64H160V33H129ZM161 33V64H192V33H161ZM193 33V64H224V33H193ZM225 33V64H256V33H225ZM257 33V64H288V33H257ZM289 33V64H320V33H289ZM321 33V64H352V33H321ZM353 33V64H384V33H353ZM385 33V64H416V33H385ZM33 32H64V1H33V32ZM65 32H96V1H65V32ZM97 32H128V1H97V32ZM129 32H160V1H129V32ZM161 32H192V1H161V32ZM193 32H224V1H193V32ZM225 32H256V1H225V32ZM257 32H288V1H257V32ZM289 32H320V1H289V32ZM321 32H352V1H321V32ZM353 32H384V1H353V32ZM385 32H416V1H417V321H0V0H416V1H385V32Z",fill:"url(#paint0_radial_11338_118262)"}),(0,i.jsx)("rect",{x:"141.5",y:"114.5",width:"133",height:"91",rx:"13.5",fill:s.Tj.bg,stroke:s.Tj.bgDesktopFullscreenDisabled,strokeDasharray:"4 4"}),(0,i.jsx)("rect",{x:"150",y:"131",width:"116",height:"66",rx:"5",fill:s.Tj.bgSecondary}),(0,i.jsx)("rect",{x:"198.233",y:"183.723",width:"3.7211",height:"7.44221",transform:"rotate(-90 198.233 183.723)",fill:s.Tj.bgDisabledSecondary}),(0,i.jsx)("rect",{x:"205.676",y:"183.723",width:"3.7211",height:"7.44221",transform:"rotate(-90 205.676 183.723)",fill:s.Tj.bgDisabledSecondary}),(0,i.jsx)("rect",{x:"195.443",y:"152.094",width:"3.7211",height:"13.9541",fill:s.Tj.bgDisabledSecondary}),(0,i.jsx)("rect",{x:"214.979",y:"158.605",width:"3.7211",height:"7.44221",fill:s.Tj.bgDisabledSecondary}),(0,i.jsx)("rect",{x:"188",y:"147.443",width:"3.7211",height:"3.7211",fill:s.Tj.bgDisabledSecondary}),(0,i.jsx)("rect",{x:"191.722",y:"143.721",width:"3.7211",height:"3.7211",fill:s.Tj.bgDisabledSecondary}),(0,i.jsx)("rect",{x:"195.443",y:"140",width:"3.7211",height:"3.7211",fill:s.Tj.bgDisabledSecondary}),(0,i.jsx)("rect",{x:"221.49",y:"150.231",width:"3.7211",height:"3.7211",transform:"rotate(90 221.49 150.231)",fill:s.Tj.bgDisabledSecondary}),(0,i.jsx)("rect",{x:"217.769",y:"146.51",width:"3.7211",height:"3.7211",transform:"rotate(90 217.769 146.51)",fill:s.Tj.bgDisabledSecondary}),(0,i.jsx)("rect",{x:"225.211",y:"150.23",width:"3.7211",height:"3.7211",transform:"rotate(90 225.211 150.23)",fill:s.Tj.bgDisabledSecondary}),(0,i.jsx)("rect",{x:"228.933",y:"146.51",width:"3.7211",height:"3.7211",transform:"rotate(90 228.933 146.51)",fill:s.Tj.bgDisabledSecondary}),(0,i.jsx)("circle",{cx:"153",cy:"125",r:"2",fill:s.Tj.bgDisabledSecondary}),(0,i.jsx)("circle",{cx:"160",cy:"125",r:"2",fill:s.Tj.bgDisabledSecondary}),(0,i.jsx)("circle",{cx:"167",cy:"125",r:"2",fill:s.Tj.bgDisabledSecondary}),(0,i.jsx)("rect",{x:"257.5",y:"101.5",width:"33",height:"33",rx:"16.5",fill:s.Tj.bg}),(0,i.jsx)("rect",{x:"257.5",y:"101.5",width:"33",height:"33",rx:"16.5",stroke:s.Tj.bgDesktopFullscreenDisabled,strokeDasharray:"4 4"}),(0,i.jsx)("path",{d:"M272.359 111.938C273.131 110.763 274.869 110.763 275.641 111.938L275.715 112.059L280.592 120.73L280.657 120.854C281.271 122.142 280.336 123.663 278.878 123.663H269.123C267.618 123.663 266.67 122.042 267.408 120.73L272.286 112.059L272.359 111.938ZM274.844 112.55C274.474 111.892 273.527 111.892 273.157 112.55L268.28 121.221C267.94 121.826 268.328 122.564 268.988 122.654L269.123 122.663H278.878L279.013 122.654C279.629 122.57 280.008 121.921 279.78 121.343L279.721 121.221L274.844 112.55ZM274.001 119.763C274.301 119.763 274.544 120.007 274.545 120.307C274.545 120.608 274.301 120.852 274.001 120.852C273.7 120.852 273.456 120.608 273.456 120.307C273.456 120.007 273.7 119.763 274.001 119.763ZM274.001 114.421C274.277 114.421 274.5 114.645 274.501 114.921V118.307C274.501 118.583 274.277 118.807 274.001 118.807C273.724 118.807 273.501 118.583 273.501 118.307V114.921C273.501 114.645 273.725 114.421 274.001 114.421Z",fill:s.Tj.bgDesktopFullscreenDisabled}),(0,i.jsx)("defs",{children:(0,i.jsxs)("radialGradient",{id:"paint0_radial_11338_118262",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(201.861 160.5) rotate(90.346) scale(138.026 214.208)",children:[(0,i.jsx)("stop",{stopColor:s.Tj.iconSecondary,stopOpacity:"0.4"}),(0,i.jsx)("stop",{offset:"1",stopColor:s.Tj.bg,stopOpacity:"0"})]})})]})})}},705071:(e,t,n)=>{n.d(t,{r:()=>g,Y:()=>f});var i=n(104076),s=n(4921),a=n(716976);let r=(0,a.memo)(function(e){return(0,i.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,"data-fpl-icon-size":"24L",children:(0,i.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",d:"M18 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6l-.204-.01A2 2 0 0 1 4 18V6a2 2 0 0 1 1.796-1.99L6 4zM5 16v2a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2zM6 5a1 1 0 0 0-1 1v9h14V6a1 1 0 0 0-1-1z"})})}),l=(0,a.memo)(function(e){return(0,i.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,"data-fpl-icon-size":"24",children:(0,i.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",fillRule:"evenodd",d:"M7.5 7h9a.5.5 0 0 1 .5.5V14H7V7.5a.5.5 0 0 1 .5-.5M6 15V7.5A1.5 1.5 0 0 1 7.5 6h9A1.5 1.5 0 0 1 18 7.5v9a1.5 1.5 0 0 1-1.5 1.5h-9A1.5 1.5 0 0 1 6 16.5zm11 0v1.5a.5.5 0 0 1-.5.5h-9a.5.5 0 0 1-.5-.5V15z",clipRule:"evenodd"})})});var o=n(795033);n(120440);var d=n(635629),c=n(192075),u=n(588961),p=n(581006),m=n(707490),h=n(842771);function f(){let[e]=(0,o.fp)(m.jx);return e===m.Ic.CODE}function g({openText:e,hideText:t,asLargeVariant:n}){let[a,m]=(0,o.fp)(p.YD),[f]=(0,h.jT)(),[g]=(0,u.PM)(),x=f?.filter(e=>"error"===e.type),_=g.filter(e=>"error"===e.level),y=x&&x.length>0||_&&_.length>0,v=a?t:e,b=y?(0,c.t)("figmake.toolbar.console_drawer_button.error_indicator_a11y_description"):"",C=(0,i.jsxs)("div",{className:"x1n2onr6",children:[y&&(0,i.jsx)("div",{className:"x10l6tqk xndqk7f x1pzoy33 x51ohtg xqu0tyb x16rqkct xxvmw7z xmkeg23 x1y0btm7 xdkfplz","data-testid":"console-error-indicator"}),n?(0,i.jsx)(r,{}):(0,i.jsx)(l,{})]}),j=n?d.y:s.f;return(0,i.jsx)(j,{"aria-description":b,"aria-label":v,checked:a,htmlAttributes:{"data-tooltip":v,"data-tooltip-type":"text"},offIcon:C,onChange:()=>m(!a),onIcon:C,recordingKey:"toggleConsoleDrawerButton",variant:"highlighted"})}},488419:(e,t,n)=>{n.d(t,{l:()=>c});var i=n(104076),s=n(716976),a=n(4921),r=n(911259),l=n(795033),o=n(635629),d=n(192075);function c({disabled:e,sitesPreview:t,asLargeVariant:n,onboardingKey:c,showTooltipAbove:u,codeInstanceGuid:p}){let m=(0,l.md)(t.directManipulationEditor.directManipulationEnabledAtom),h=s.useCallback(()=>{t.setDirectManipulationEnabled({enabled:!m,codeInstanceGuid:p})},[t,m,p]),f=n?o.y:a.f,g=(0,i.jsx)(r.Z,{});return(0,i.jsx)(f,{"aria-label":(0,d.t)("figmake.chat.click_to_inspect.label"),checked:m,disabled:e,htmlAttributes:{"data-onboarding-key":c,"data-tooltip-show-above":u||void 0,"data-tooltip-show-below":!u||void 0},offIcon:g,onChange:h,onIcon:g,variant:"highlighted"})}},20949:(e,t,n)=>{n.d(t,{n:()=>u});var i=n(104076),s=n(4921),a=n(341727),r=n(795033),l=n(635629),o=n(192075),d=n(349311),c=n(444713);function u({asLargeVariant:e}={}){let[t,n]=(0,r.fp)(c.gn),p=e?l.y:s.f,m=(0,i.jsx)(a.J,{});return(0,i.jsx)(p,{variant:"highlighted",checked:t,onIcon:m,offIcon:m,recordingKey:"toggleMobilePreviewButton","aria-label":(0,o.t)("figmake.mobile_preview"),htmlAttributes:{"data-tooltip":(0,o.t)("figmake.mobile_preview"),"data-tooltip-type":d.Ib.TEXT},onChange:()=>n(!t)})}},418886:(e,t,n)=>{n.d(t,{O:()=>x});var i=n(104076),s=n(716976),a=n(929302),r=n(950187),l=n(268389),o=n(989941),d=n(452981),c=n(293422),u=n(795033),p=n(4865),m=n(171660),h=n(178623),f=n(20267),g=n(211862);let x=(0,n(959834).Ju)(function(e){let t=a.hS({open:e.open,onClose:e.onClose}),[n,x]=(0,s.useState)(!1),[_,y]=(0,s.useState)(null),[v,b]=(0,s.useState)(null),[C,j]=(0,s.useState)(null),[k,w]=(0,s.useState)(!1),E=u.zl.get(g.ze),T=E?(0,p.F)(E):"",S=async()=>{try{x(!0),y(null),b(null),j(null);let e=await h.Ay.foundry.sandbox({forceProvision:k,originHost:"example.com"},(0,f.Ay)());j(e),b("Successfully fetched sandbox")}catch(e){y(`Error listing nimbus sandboxes: ${e instanceof Error?e.message:String(e)}`)}finally{x(!1)}};return(0,i.jsx)(r.bL,{manager:t,width:"lg",children:(0,i.jsxs)(l.vo,{children:[(0,i.jsx)(l.Y9,{children:(0,i.jsx)(l.hE,{children:"Foundry"})}),(0,i.jsx)(l.nB,{children:(0,i.jsxs)("div",{style:{padding:"16px"},children:[_&&(0,i.jsx)("div",{style:{marginBottom:"20px",padding:"12px",backgroundColor:"rgba(235, 87, 87, 0.1)",border:"1px solid rgba(235, 87, 87, 0.3)",borderRadius:"6px"},children:(0,i.jsx)(m.E,{color:"danger",children:_})}),v&&(0,i.jsx)("div",{style:{marginBottom:"20px",padding:"12px",backgroundColor:"rgba(39, 174, 96, 0.1)",border:"1px solid rgba(39, 174, 96, 0.3)",borderRadius:"6px"},children:(0,i.jsx)(m.E,{color:"success",children:v})}),(0,i.jsxs)("div",{style:{marginBottom:"20px",padding:"12px",backgroundColor:"rgba(13, 153, 255, 0.1)",border:"1px solid rgba(13, 153, 255, 0.3)",borderRadius:"6px"},children:[(0,i.jsx)("div",{style:{fontWeight:"bold",marginBottom:"4px",fontSize:"14px"},children:(0,i.jsx)(m.E,{children:"md5(file_key):"})}),(0,i.jsx)("div",{style:{fontFamily:"monospace",fontSize:"12px",color:"#666"},children:(0,i.jsx)(m.E,{children:T||"No file key available"})})]}),(0,i.jsxs)("div",{style:{marginTop:"20px",padding:"16px",backgroundColor:"rgba(75, 0, 130, 0.05)",border:"1px solid rgba(75, 0, 130, 0.2)",borderRadius:"8px"},children:[(0,i.jsx)("div",{style:{fontWeight:"bold",marginBottom:"16px",fontSize:"16px"},children:(0,i.jsx)(m.E,{children:"Nimbus Foundry"})}),(0,i.jsx)("div",{style:{marginBottom:"16px"},children:(0,i.jsx)(o.S,{checked:k,onChange:e=>w(e),label:(0,i.jsx)(d.J,{children:"Force provision new sandbox"})})}),(0,i.jsx)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:12},children:(0,i.jsx)("div",{style:{width:320},children:(0,i.jsx)(c.$n,{variant:"secondary",onClick:S,disabled:n,children:n?"Loading...":"Get Nimbus Sandbox"})})})]}),C&&(0,i.jsxs)("div",{style:{marginTop:"20px",padding:"12px",backgroundColor:"rgba(0, 0, 0, 0.05)",border:"1px solid rgba(0, 0, 0, 0.1)",borderRadius:"6px"},children:[(0,i.jsx)("div",{style:{fontWeight:"bold",marginBottom:"8px"},children:"API Response:"}),C.preview_url&&(0,i.jsxs)("div",{style:{marginBottom:"12px"},children:[(0,i.jsx)("div",{style:{fontWeight:"bold",marginBottom:"4px"},children:"Preview URL:"}),(0,i.jsx)("a",{href:C.preview_url,target:"_blank",rel:"noopener noreferrer",style:{color:"#0d99ff",textDecoration:"underline"},children:C.preview_url})]}),(0,i.jsx)("pre",{style:{fontSize:"12px",overflow:"auto",margin:0},children:JSON.stringify(C,null,2)})]})]})})]})})},"FoundryDebugModal")},321039:(e,t,n)=>{n.d(t,{b:()=>f});var i=n(104076),s=n(716976),a=n(929302),r=n(950187),l=n(268389),o=n(293422),d=n(171660),c=n(959834);function u(e=8){let t="bcdfghjklmnpqrstvwxyz",n="aeiou",i="";for(let s=0;s<e;s++)s%2==0?i+=t.charAt(Math.floor(Math.random()*t.length)):i+=n.charAt(Math.floor(Math.random()*n.length));return i}let p="Add to the array: ${value.letter}",m='Add to the array: "index: ${index()}, randomNumber: ${randomNumber()}, randomString: ${randomString()}"',h=JSON.stringify((()=>{let e=[];for(let t=68;t<=90;t++)e.push({letter:String.fromCharCode(t)});return e})(),null,2),f=(0,c.Ju)(function(e){let t=a.hS({open:e.open,onClose:e.onClose}),[n,c]=(0,s.useState)(!1),[f,g]=(0,s.useState)(!1),[x,_]=(0,s.useState)("Create an array with values A, B, C"),[y,v]=(0,s.useState)(!1),[b,C]=(0,s.useState)(p),[j,k]=(0,s.useState)(h),[w,E]=(0,s.useState)(5),[T,S]=(0,s.useState)(0),[I,N]=(0,s.useState)(""),[A,L]=(0,s.useState)("stop"),[M,O]=(0,s.useState)("continue"),[R,P]=(0,s.useState)(!1),[D,F]=(0,s.useState)(!1),z=(0,s.useRef)(null),B=(0,s.useRef)(!1);(0,s.useEffect)(()=>{B.current=f},[f]),(0,s.useEffect)(()=>{y?b===m&&C(p):b===p&&C(m)},[y,b]);let G=(0,s.useMemo)(()=>{if(!y)return null;try{let e=JSON.parse(j);return Array.isArray(e)?e:[]}catch{return[]}},[j,y]),U=(0,s.useMemo)(()=>y?G?.length??0:1e3,[y,G]),V=(0,s.useCallback)(e=>{let t=document.querySelector('[data-testid="code-chat-chat-box"]'),n=document.querySelector('[data-testid="code-chat-send-button"]');if(t&&n){let i=Object.getOwnPropertyDescriptor(window.HTMLTextAreaElement.prototype,"value")?.set;i?.call(t,e);let s=new Event("input",{bubbles:!0});return t.dispatchEvent(s),setTimeout(()=>{n.disabled||n.click()},100),!0}return!1},[]),H=(0,s.useCallback)(()=>null!==document.querySelector('[data-testid="code-chat-stop-button"]'),[]),K=(0,s.useCallback)(()=>null!==document.querySelector('[data-testid="code-chat-error-message"]'),[]),W=(0,s.useCallback)(()=>Array.from(document.querySelectorAll("button")).some(e=>e.textContent?.includes("Fix these errors")||e.textContent?.includes("Fix these warnings")),[]),q=(0,s.useCallback)(()=>{let e=Array.from(document.querySelectorAll("button")).find(e=>e.textContent?.includes("Fix these errors")||e.textContent?.includes("Fix these warnings"));return!!e&&(e.click(),!0)},[]),X=(0,s.useCallback)(()=>new Promise(e=>{let t=setInterval(()=>{if(K()){clearInterval(t),e("chat-error");return}if(W()){clearInterval(t),e("console-error");return}H()||(clearInterval(t),e("completed"))},500)}),[H,K,W]),Y=(0,s.useCallback)(async(e,t)=>{if("stop"===A)throw Error(`Chat error occurred on ${t}`);if("retry"===A){if(N(`Chat error on ${t}, retrying in 5 seconds...`),await new Promise(e=>setTimeout(e,5e3)),!V(e))throw Error(`Failed to retry ${t}`);let n=await X();if("completed"!==n)throw Error(`Chat error persisted after retry on ${t}`);return n}return"chat-error"},[A,V,X]),Z=(0,s.useCallback)(async e=>{if("stop"===M)throw Error(`Console error occurred on ${e}`);if("fix"===M){if(N(`Console error on ${e}, clicking "Fix these errors"...`),!q())throw Error('Failed to click "Fix these errors" button');await X()}},[M,q,X]),J=(0,s.useCallback)(async()=>{c(!0),g(!0),B.current=!0,S(0),N("");try{if(R)N("Skipping initial prompt...");else{if(N("Sending initial prompt..."),!V(x))throw Error("Failed to find chat input");let e=await X();"chat-error"===e&&(e=await Y(x,"initial prompt")),"console-error"===e&&await Z("initial prompt")}let e=y?Math.min(w,G?.length??0):w;if(0===e)throw Error("No messages to send. Please set number of messages greater than 0.");for(let t=0;t<e;t++){if(!B.current){N("Stopped by user");break}S(t+1);let n=y&&G?G[t]:null,i=function(e,t,n){return e.replace(/\$\{(.*?)\}/g,(e,i)=>{let s=i.trim();if("index()"===s)return String(n);if("randomNumber()"===s)return String(Math.floor(1e3*Math.random()));if(s.startsWith("randomString(")){let e=s.match(/randomString\((\d+)\)/);return u(e?parseInt(e[1],10):8)}if("randomString()"===s)return u();if(s.startsWith("value.")&&t){let e=s.substring(6);return void 0!==t[e]?String(t[e]):""}return e})}(b,n,t);if(N(`Sending message ${t+1} of ${e}...`),await new Promise(e=>setTimeout(e,1e3)),!V(i))throw Error("Failed to send message");let s=await X();if("chat-error"===s&&(s=await Y(i,`message ${t+1}`),"chat-error"===s)){N(`Skipping message ${t+1} due to chat error...`);continue}"console-error"===s&&await Z(`message ${t+1}`)}N(B.current?"All messages sent successfully!":"Automation stopped")}catch(e){N(`Error: ${e instanceof Error?e.message:"Unknown error"}`)}finally{c(!1),g(!1)}},[x,b,w,G,V,X,Y,Z,R,y]),Q=()=>{B.current=!1,g(!1),N("Stopping..."),null!==z.current&&(clearInterval(z.current),z.current=null)};return(0,s.useEffect)(()=>()=>{B.current&&!D&&(B.current=!1)},[D]),(0,i.jsx)(r.bL,{manager:t,width:"lg",children:(0,i.jsxs)(l.vo,{children:[(0,i.jsx)(l.Y9,{children:(0,i.jsx)(l.hE,{children:"Generate Make Chat History"})}),(0,i.jsx)(l.nB,{children:(0,i.jsxs)("div",{style:{padding:"16px"},children:[(0,i.jsx)("div",{style:{marginBottom:"20px"},children:(0,i.jsx)(d.E,{children:"Automatically send messages to the LLM to create a file with chat history. When enabled, this tool will send the next message when the previous one completes."})}),(0,i.jsxs)("div",{style:{marginBottom:"16px",padding:"12px",backgroundColor:"rgba(0, 0, 0, 0.02)",borderRadius:"6px"},children:[(0,i.jsxs)("div",{style:{marginBottom:"8px",display:"flex",alignItems:"center",gap:"8px"},children:[(0,i.jsx)(d.E,{children:"Initial Prompt"}),(0,i.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"4px",cursor:"pointer"},children:[(0,i.jsx)("input",{type:"checkbox",checked:R,onChange:e=>P(e.target.checked),style:{cursor:"pointer"}}),(0,i.jsx)(d.E,{children:"Skip initial prompt"})]})]}),(0,i.jsx)("textarea",{value:x,onChange:e=>_(e.target.value),placeholder:"Enter initial prompt",rows:2,disabled:R,style:{width:"100%",padding:"8px",border:"1px solid rgba(0, 0, 0, 0.1)",borderRadius:"4px",fontFamily:"inherit",resize:"vertical",opacity:R?.5:1,cursor:R?"not-allowed":"text"}})]}),(0,i.jsxs)("div",{style:{marginBottom:"16px",padding:"12px",backgroundColor:"rgba(0, 0, 0, 0.02)",borderRadius:"6px"},children:[(0,i.jsxs)("div",{style:{marginBottom:"8px",display:"flex",alignItems:"center",gap:"8px"},children:[(0,i.jsx)(d.E,{children:"Repeat Prompt Template"}),(0,i.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"4px",cursor:"pointer"},children:[(0,i.jsx)("input",{type:"checkbox",checked:y,onChange:e=>v(e.target.checked),style:{cursor:"pointer"}}),(0,i.jsx)(d.E,{children:"Use values array"})]})]}),(0,i.jsx)("textarea",{value:b,onChange:e=>C(e.target.value),placeholder:y?"Enter repeat prompt template (use ${value.field} syntax)":"Enter repeat prompt template (use ${index()}, ${randomNumber()}, ${randomString()} functions)",rows:2,style:{width:"100%",padding:"8px",border:"1px solid rgba(0, 0, 0, 0.1)",borderRadius:"4px",fontFamily:"monospace",resize:"vertical"}}),(0,i.jsx)("div",{style:{marginTop:"4px",color:"#666"},children:(0,i.jsx)(d.E,{children:y?"Use ${value.fieldName} to reference values from the JSON array":"Use ${index()}, ${randomNumber()}, or ${randomString()} / ${randomString(length)} functions"})})]}),y&&(0,i.jsxs)("div",{style:{marginBottom:"16px",padding:"12px",backgroundColor:"rgba(0, 0, 0, 0.02)",borderRadius:"6px"},children:[(0,i.jsx)("div",{style:{marginBottom:"8px"},children:(0,i.jsx)(d.E,{children:"Values (JSON Array)"})}),(0,i.jsx)("textarea",{value:j,onChange:e=>k(e.target.value),placeholder:"Enter JSON array of values",rows:10,style:{width:"100%",padding:"8px",border:"1px solid rgba(0, 0, 0, 0.1)",borderRadius:"4px",fontFamily:"monospace",resize:"vertical"}}),(0,i.jsx)("div",{style:{marginTop:"4px",color:"#666"},children:(0,i.jsx)(d.E,{children:G&&G.length>0?`Valid JSON array with ${G.length} items`:"Invalid JSON array"})})]}),(0,i.jsxs)("div",{style:{marginBottom:"16px",padding:"12px",backgroundColor:"rgba(0, 0, 0, 0.02)",borderRadius:"6px"},children:[(0,i.jsx)("div",{style:{marginBottom:"8px"},children:(0,i.jsx)(d.E,{children:"Number of Messages"})}),(0,i.jsx)("input",{type:"number",value:w,onChange:e=>E(Math.min(U,Math.max(1,+e.target.value))),placeholder:"Number of messages",min:"1",max:U,style:{width:"100%",padding:"8px",border:"1px solid rgba(0, 0, 0, 0.1)",borderRadius:"4px"}}),(0,i.jsx)("div",{style:{marginTop:"4px",color:"#666"},children:(0,i.jsx)(d.E,{children:y?`Maximum: ${U} (based on values array length)`:`Maximum: ${U}`})})]}),(0,i.jsxs)("div",{style:{marginBottom:"16px",padding:"12px",backgroundColor:"rgba(0, 0, 0, 0.02)",borderRadius:"6px"},children:[(0,i.jsx)("div",{style:{marginBottom:"8px"},children:(0,i.jsx)(d.E,{children:"On Chat Error"})}),(0,i.jsxs)("select",{value:A,onChange:e=>L(e.target.value),style:{width:"100%",padding:"8px",border:"1px solid rgba(0, 0, 0, 0.1)",borderRadius:"4px",backgroundColor:"white"},children:[(0,i.jsx)("option",{value:"stop",children:"Stop automation"}),(0,i.jsx)("option",{value:"continue",children:"Skip and continue to next message"}),(0,i.jsx)("option",{value:"retry",children:"Retry message after 5 seconds"})]}),(0,i.jsx)("div",{style:{marginTop:"4px",color:"#666"},children:(0,i.jsx)(d.E,{children:"What to do when LLM returns an error (network, rate limit, etc.)"})})]}),(0,i.jsxs)("div",{style:{marginBottom:"20px",padding:"12px",backgroundColor:"rgba(0, 0, 0, 0.02)",borderRadius:"6px"},children:[(0,i.jsx)("div",{style:{marginBottom:"8px"},children:(0,i.jsx)(d.E,{children:"On Console Error"})}),(0,i.jsxs)("select",{value:M,onChange:e=>O(e.target.value),style:{width:"100%",padding:"8px",border:"1px solid rgba(0, 0, 0, 0.1)",borderRadius:"4px",backgroundColor:"white"},children:[(0,i.jsx)("option",{value:"stop",children:"Stop automation"}),(0,i.jsx)("option",{value:"continue",children:"Ignore and continue sending messages"}),(0,i.jsx)("option",{value:"fix",children:'Click "Fix these errors" button'})]}),(0,i.jsx)("div",{style:{marginTop:"4px",color:"#666"},children:(0,i.jsx)(d.E,{children:"What to do when runtime/compilation errors appear in console"})})]}),(0,i.jsxs)("div",{style:{marginBottom:"16px",padding:"12px",backgroundColor:"rgba(0, 0, 0, 0.02)",borderRadius:"6px"},children:[(0,i.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer"},children:[(0,i.jsx)("input",{type:"checkbox",checked:D,onChange:e=>F(e.target.checked),style:{cursor:"pointer"}}),(0,i.jsx)(d.E,{children:"Continue generation after closing modal"})]}),(0,i.jsx)("div",{style:{marginTop:"4px",color:"#666",marginLeft:"28px"},children:(0,i.jsx)(d.E,{children:"When unchecked, closing the modal will stop the automation. When checked, generation will continue in the background."})})]}),(0,i.jsxs)("div",{style:{display:"flex",gap:"12px",borderTop:"1px solid rgba(0, 0, 0, 0.1)",paddingTop:"16px"},children:[f?(0,i.jsx)(o.$n,{variant:"destructive",onClick:Q,disabled:n,children:n?"...":"Stop Generation"}):(0,i.jsx)(o.$n,{variant:"primary",onClick:()=>{J()},disabled:n||y&&(!G||0===G.length),children:n?"...":"Start Generation"}),(0,i.jsx)(o.$n,{variant:"secondary",onClick:()=>{f&&!D&&Q(),e.onClose()},children:"Cancel"})]}),(f||I)&&(0,i.jsx)("div",{style:{marginTop:"16px",padding:"12px",backgroundColor:f?"rgba(39, 174, 96, 0.1)":I.startsWith("Error")?"rgba(235, 87, 87, 0.1)":"rgba(0, 0, 0, 0.05)",border:f?"1px solid rgba(39, 174, 96, 0.3)":I.startsWith("Error")?"1px solid rgba(235, 87, 87, 0.3)":"1px solid rgba(0, 0, 0, 0.1)",borderRadius:"6px"},children:f?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(d.E,{color:"success",children:"Auto-generation in progress"}),(0,i.jsx)("div",{style:{marginTop:"8px"},children:(0,i.jsxs)(d.E,{children:["Progress: ",T," / ",w," messages sent"]})}),I&&(0,i.jsx)("div",{style:{marginTop:"4px"},children:(0,i.jsx)(d.E,{children:I})})]}):(0,i.jsx)(d.E,{color:I.startsWith("Error")?"danger":void 0,children:I})})]})})]})})},"GenerateMakeChatHistoryModal")},857995:(e,t,n)=>{n.d(t,{D:()=>k});var i=n(104076),s=n(716976),a=n(542653),r=n(929302),l=n(950187),o=n(268389),d=n(293422),c=n(686549),u=n(113139),p=n(432099),m=n(171660),h=n(211862),f=n(288747),g=n(592726),x=n(893393),_=n(104836),y=n(304425),v=n(959834),b=n(886597),C=n(10074);let j=(0,u.vh)(),k=(0,v.Ju)(function(e){let t=r.hS({open:e.open,onClose:e.onClose}),n=(0,h.q5)().key,[v,k]=(0,s.useState)(null),[w,E]=(0,s.useState)(null),[T,S]=(0,s.useState)([]),[I,N]=(0,s.useState)(null),[A,L]=(0,s.useState)(""),[M,O]=(0,s.useState)(""),[R,P]=(0,s.useState)(""),[D,F]=(0,x.IT)((0,b.TT)({fileKey:n})),z=(0,x.gY)(b.rY),B=(0,b.lA)(n),G=D.data?.connectedProject,U="loaded"!==D.status,V=B.authenticated,H=!!B.isLoading,[K,W]=(0,s.useState)(!1),q=(0,f.dq)(),X=(0,_.ol)(),Y=(0,g.TA)()||"";(0,s.useEffect)(()=>{U||H?W(!0):W(!1)},[U,H]);let Z=async()=>{try{W(!0),k(null),await y.R.deauthorizeFile({fileKey:n}),F.refetch()}catch(e){k(`Failed to revoke authorization: ${e}`)}finally{W(!1)}},J=async()=>{try{W(!0),k(null);let e=C.Yr;q?e+=`?org_id=${encodeURIComponent(q)}&user_id=${encodeURIComponent(Y)}`:X?.id&&(e+=`?team_id=${encodeURIComponent(X.id)}&user_id=${encodeURIComponent(Y)}`);let t=(0,c.FJ)(e,"_blank");await new Promise(e=>{window.addEventListener("message",n=>{n.data&&"child-redirect-complete"===n.data.type&&(t?.close(),e(!0))})})}catch(e){k("Failed to authorize oauth app")}finally{W(!1)}};(0,s.useEffect)(()=>{(async()=>{if(!H&&V&&!U&&V&&!G)try{L("Loading projects..."),W(!0);let e=await j.validate(async({xr:e})=>await e.get(`/api/integrations/supabase/${n}/existing_projects`));S(e.data.meta||[])}catch(e){k(`Failed to fetch projects: ${e}`)}finally{W(!1),L("")}})()},[G,U,V,H,n]);let Q=async()=>{if(!I){k("Please select a project first");return}try{W(!0),k(null);let e=T.find(e=>e.id===I);if(!e){k("Selected project not found");return}await p.Ay.post(`/api/integrations/supabase/${n}/connect`,u.td.toAPIParameters({supabase_project_id:e.id,supabase_org_id:e.organization_id})),await F.refetch()}catch(e){k(`Failed to connect to project: ${e}`)}finally{W(!1)}},$=async()=>{try{W(!0),k(null),await z({fileKey:n})}catch(e){k(`Failed to disconnect from project: ${e}`)}finally{W(!1)}},ee=async()=>{try{W(!0),k(null),E(null);let e=(0,a.$d)(),t={};for(let[n,i]of Object.entries(e))if(n.includes("/supabase/functions/server/")){let e=n.split("/").pop(),s=i.sourceCode;e&&s&&(t[e]=s)}if(!t["index.tsx"]){k("/supabase/functions/server/index.tsx not found");return}await p.Ay.post(`/api/integrations/supabase/${n}/edge_functions/make-server/deploy`,{files:t}),E("Deployed function - it may take a few seconds to spin up")}catch(e){k(`Failed to publish edge function: ${e}`)}finally{W(!1)}},et=async()=>{try{W(!0),k(null),E(null),await p.Ay.post(`/api/integrations/supabase/${n}/project/pause`),E("Paused project - you may need to refresh status to see updates")}catch(e){k(`Failed to pause project: ${e}`)}finally{W(!1)}},en=async()=>{try{W(!0),k(null),E(null),await p.Ay.post(`/api/integrations/supabase/${n}/project/restore`),E("Restored project - you may need to refresh status to see updates")}catch(e){k(`Failed to restore project: ${e}`)}finally{W(!1)}},ei=async()=>{try{if(W(!0),k(null),E(null),!M.trim()){k("Secret name cannot be empty");return}if(!R.trim()){k("Secret value cannot be empty");return}await p.Ay.post(`/api/integrations/supabase/${n}/secrets`,u.td.toAPIParameters({secret_name:M,secret_value:R})),O(""),P(""),E("Secret added")}catch(e){k(`Failed to add secret: ${e}`)}finally{W(!1)}};return(0,i.jsx)(l.bL,{manager:t,width:"lg",children:(0,i.jsxs)(o.vo,{children:[(0,i.jsx)(o.Y9,{children:(0,i.jsx)(o.hE,{children:"Supabase"})}),(0,i.jsx)(o.nB,{children:(0,i.jsxs)("div",{style:{padding:"16px"},children:[v&&(0,i.jsx)("div",{style:{marginBottom:"20px",padding:"12px",backgroundColor:"rgba(235, 87, 87, 0.1)",border:"1px solid rgba(235, 87, 87, 0.3)",borderRadius:"6px"},children:(0,i.jsx)(m.E,{color:"danger",children:v})}),w&&(0,i.jsx)("div",{style:{marginBottom:"20px",padding:"12px",backgroundColor:"rgba(39, 174, 96, 0.1)",border:"1px solid rgba(39, 174, 96, 0.3)",borderRadius:"6px"},children:(0,i.jsx)(m.E,{color:"success",children:w})}),V?(0,i.jsxs)(i.Fragment,{children:[G?(0,i.jsxs)("div",{style:{marginBottom:"16px"},children:[(0,i.jsxs)("div",{style:{padding:"12px",backgroundColor:"rgba(0, 0, 0, 0.05)",borderRadius:"6px",marginBottom:"12px"},children:[(0,i.jsx)("div",{style:{fontWeight:"bold",marginBottom:"8px"},children:(0,i.jsx)(m.E,{children:`Connected: ${G.name}`})}),(0,i.jsx)("div",{style:{fontSize:"12px",color:"#666"},children:(0,i.jsx)(m.E,{children:`ID: ${G.id} \u2022 Status: ${G.status}`})})]}),"ACTIVE_HEALTHY"===G.status&&(0,i.jsxs)("div",{style:{marginTop:"12px",marginBottom:"12px",border:"1px solid rgba(0, 0, 0, 0.05)",borderRadius:"4px",padding:"12px",backgroundColor:"rgba(0, 0, 0, 0.02)"},children:[(0,i.jsx)("div",{style:{fontSize:"13px",marginBottom:"12px"},children:(0,i.jsx)(m.E,{children:"Add Secret"})}),(0,i.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{style:{marginBottom:"4px",fontSize:"12px",color:"rgba(0, 0, 0, 0.6)"},children:(0,i.jsx)(m.E,{children:"Secret Name"})}),(0,i.jsx)("input",{type:"text",value:M,onChange:e=>O(e.target.value),placeholder:"Enter secret name",style:{width:"95%",padding:"6px 8px",border:"1px solid rgba(0, 0, 0, 0.1)",borderRadius:"4px",fontSize:"13px",outline:"none",transition:"border-color 0.2s ease"}})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{style:{marginBottom:"4px",fontSize:"12px",color:"rgba(0, 0, 0, 0.6)"},children:(0,i.jsx)(m.E,{children:"Secret Value"})}),(0,i.jsx)("input",{type:"password",value:R,onChange:e=>P(e.target.value),placeholder:"Enter secret value",style:{width:"95%",padding:"6px 8px",border:"1px solid rgba(0, 0, 0, 0.1)",borderRadius:"4px",fontSize:"13px",outline:"none",transition:"border-color 0.2s ease"}})]}),(0,i.jsxs)("div",{style:{alignSelf:"flex-start",display:"flex",gap:"10px"},children:[(0,i.jsx)(d.$n,{variant:"secondary",onClick:ei,disabled:K,children:K?"...":"Add secret"}),(0,i.jsx)(d.$n,{variant:"secondary",onClick:()=>(0,c.FJ)(`https://supabase.com/dashboard/project/${G.id}/functions/secrets`),disabled:K,children:K?"...":"View secrets \u2197\uFE0F"})]})]})]})]}):(0,i.jsx)("div",{style:{marginBottom:"16px"},children:A.length>0?(0,i.jsx)(m.E,{children:A}):0===T.length?(0,i.jsx)(m.E,{children:"No projects available. Create a project in your Supabase dashboard first."}):(0,i.jsxs)("div",{style:{marginBottom:16},children:[(0,i.jsx)("div",{style:{marginBottom:8,fontWeight:"bold"},children:(0,i.jsx)(m.E,{children:"Select a project to connect:"})}),(0,i.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:8,maxHeight:"200px",overflowY:"auto",padding:"8px",border:"1px solid #e0e0e0",borderRadius:"4px"},children:T.map(e=>(0,i.jsxs)("label",{style:{display:"flex",alignItems:"center",cursor:"pointer",padding:"4px 0"},children:[(0,i.jsx)("input",{type:"radio",name:"project",value:e.id,checked:I===e.id,onChange:()=>N(e.id),style:{marginRight:8}}),(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{style:{fontWeight:"bold"},children:(0,i.jsx)(m.E,{children:e.name})}),(0,i.jsx)("div",{style:{fontSize:"12px",color:"#666"},children:(0,i.jsx)(m.E,{children:`ID: ${e.id} \u2022 Status: ${e.status}`})})]})]},e.id))})]})}),(0,i.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",gap:"12px",borderTop:"1px solid rgba(0, 0, 0, 0.1)",paddingTop:"16px"},children:[!G&&(0,i.jsx)(d.$n,{variant:"primary",onClick:Q,disabled:K||!I,children:K?"...":"Connect to selected project"}),(0,i.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",gap:"12px",marginTop:G?"8px":"0"},children:[G?.status==="ACTIVE_HEALTHY"&&(0,i.jsx)(d.$n,{variant:"primary",onClick:ee,disabled:K,children:K?"...":"Deploy backend"}),G&&(0,i.jsx)(d.$n,{variant:"secondary",onClick:()=>(0,c.FJ)(`https://supabase.com/dashboard/project/${G.id}/functions/make-server-${n.substring(0,5)}/logs`),disabled:K,children:K?"...":"Server logs \u2197\uFE0F"}),G&&(0,i.jsx)(d.$n,{variant:"secondary",onClick:F.refetch,disabled:K,children:K?"...":"Refresh status"}),G?.status==="ACTIVE_HEALTHY"&&(0,i.jsx)(d.$n,{variant:"secondary",onClick:et,disabled:K,children:K?"...":"Pause"}),G?.status==="INACTIVE"&&(0,i.jsx)(d.$n,{variant:"secondary",onClick:en,disabled:K,children:K?"...":"Restore"}),G&&(0,i.jsx)(d.$n,{variant:"secondary",onClick:$,disabled:K,children:K?"...":"Disconnect"})]}),V&&(0,i.jsx)("div",{style:{width:"100%",marginTop:"12px",borderTop:"1px solid rgba(0, 0, 0, 0.1)",paddingTop:"12px"},children:(0,i.jsx)(d.$n,{variant:"destructive",onClick:Z,disabled:K,children:K?"...":"Revoke Supabase authorization"})})]})]}):(0,i.jsx)("div",{style:{display:"flex",justifyContent:"center",padding:"16px 0"},children:(0,i.jsx)(d.$n,{variant:"primary",onClick:J,disabled:K,children:K?"...":"Authorize with Supabase"})})]})})]})})},"SupabaseDebugModal")},518520:(e,t,n)=>{n.d(t,{S:()=>h,Y:()=>f});var i=n(242069),s=n(266808),a=n(795033),r=n(211862),l=n(592726),o=n(580276),d=n(68902),c=n(129575),u=n(702319),p=n(121363),m=n(589977);function h(){let e=(0,r.tS)(),t=i.lV.FIGMAKE,n=(0,c.YP)({}),h=n.chatMessagesNode,f=(0,l.iZ)(),g=(0,o.Xu)(),x=(0,a.md)(d.LR),_=(0,u.ee)(),y=(0,p.L)();return({toolCallId:a,toolName:r,toolResult:l})=>{s.glU&&f&&h&&n.isInitialized&&(0,m.v)({clientSideToolResults:[{toolCallId:a,toolName:r,result:l}],user:f,chatMessagesNode:h,chatController:n,rawUserChatDetails:void 0,featureType:t,setInput:()=>{},fileKey:e,autoFixingUserMessageId:null,onFinish:()=>{},model:y,canUseSupabase:g,requestInitiator:i.bG.USER,mcpPreferences:x,isMcpClientEnabled:_})}}function f(){let e=(0,r.tS)(),t=i.lV.FIGMAKE,n=(0,c.YP)({}),h=n.chatMessagesNode,f=(0,l.iZ)(),g=(0,o.Xu)(),x=(0,a.md)(d.LR),_=(0,u.ee)(),y=(0,p.L)();return({results:a})=>{if(!s.glU||!f||!h||!n.isInitialized)return;let r=a.map(e=>({toolCallId:e.toolCallId,toolName:e.toolName,result:e.toolResult}));(0,m.v)({clientSideToolResults:r,user:f,chatMessagesNode:h,chatController:n,rawUserChatDetails:void 0,featureType:t,setInput:()=>{},fileKey:e,autoFixingUserMessageId:null,onFinish:()=>{},model:y,canUseSupabase:g,requestInitiator:i.bG.USER,mcpPreferences:x,isMcpClientEnabled:_})}}},108429:(e,t,n)=>{n.d(t,{K:()=>K});var i=n(104076),s=n(419822),a=n(684742),r=n(293422),l=n(180),o=n(795033);n(120440);var d=n(833805),c=n(115989),u=n(192075),p=n(211862),m=n(893393),h=n(304425),f=n(577932),g=n(518520),x=n(32404),_=n(996715),y=n(972700),v=n(647178),b=n(716976),C=n(237420),j=n(929302),k=n(950187),w=n(268389),E=n(420680),T=n(475477),S=n(368581),I=n(452981),N=n(739713),A=n(366535),L=n(959834),M=n(293172),O=n(622018),R=n(847714),P=n(886597),D=n(649431),F=n(10074);function z({activeProjects:e,projectIdToPause:t,setProjectIdToPause:n}){let s=(0,o.md)(M.kz);return(0,i.jsx)(S.b,{legend:(0,i.jsx)("p",{className:"xxrns5j x1q8tae1 x1vg90ec x1eab18d x1yyillh",children:(0,u.t)("figmake.settings.pause_project.radio.label")}),value:t,onChange:n,readonly:!!s,children:e.map(e=>(0,i.jsx)(S.c,{value:e.id,label:(0,i.jsx)(I.J,{children:(0,i.jsx)(B,{project:e})})},e.id))})}function B({project:e}){return(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"xxrns5j x1q8tae1 x1vg90ec x1eab18d x1yyillh",children:e.name}),(0,i.jsx)("p",{className:"xrlp15q x1nmd3yn xm735u9 xkbmbem x3wk4up x1n0bwc9",children:(0,u.tx)("figmake.settings.pause_project.created",{timestamp:(0,i.jsx)(c.h1,{date:e.created_at})})})]},e.id)}function G({props:e,projectIdToPause:t}){let n=(0,p.tS)(),[s,a]=(0,o.fp)(M.kz),l=(0,y.h5)({toolCallId:e.toolCallId,toolName:e.toolName,trackingContext:e.trackingContext,source:e.source}),d=async()=>{if(!n){console.error("No open file key found");return}if(!t){console.error("No selected project found");return}a(t);try{await h.R.pauseProject({fileKey:n,projectId:t});let i=setInterval(async()=>{let s=await m.M4.fetch((0,P.GO)({fileKey:n,projectId:t}),{policy:"networkOnly"});s?.status.toLowerCase()===x.TL.INACTIVE&&(e.onClose(),clearInterval(i),(0,D.l4)(),a(null),e.connectToExistingProject?e.connectToExistingProject():l())},2e3)}catch(e){a(null),(0,v.ZH)(e)}};return s?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("p",{className:"xrlp15q x1nmd3yn xm735u9 xkbmbem x3wk4up x1n0bwc9",children:(0,u.t)("figmake.supabase.pausing_project.subtitle")}),(0,i.jsx)(r.$n,{variant:"secondary",onClick:()=>e.onClose(),disabled:!0,children:(0,u.t)("figmake.pause_project_modal.button.cancel")}),(0,i.jsx)(O.lV,{variant:"destructive",children:(0,u.t)("figmake.pause_project_modal.button.loading")})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.$n,{variant:"secondary",onClick:()=>e.onClose(),children:(0,u.t)("figmake.pause_project_modal.button.cancel")}),(0,i.jsx)(r.$n,{variant:"destructive",onClick:d,disabled:!t,children:(0,u.t)("figmake.pause_project_modal.button.submit")})]})}let U=(0,L.Ju)(function(e){let t=j.hS({...e}),{organization:n}=(0,x.mS)(),{activeProjects:s}=(0,x.YY)(),a=(0,C.wA)(),r=!!e.toolCallId&&!!e.toolName,[l,o]=(0,b.useState)(void 0);return(0,i.jsx)(k.bL,{manager:t,width:394,children:(0,i.jsxs)(w.vo,{children:[(0,i.jsxs)(w.Y9,{children:[r&&(0,i.jsx)(E.K,{"aria-label":(0,u.t)("figmake.supabase.pause_project_modal.back"),onClick:()=>{e.onClose(),a((0,A.to)({type:R.Z,data:{toolCallId:e.toolCallId,toolName:e.toolName,trackingContext:e.trackingContext,source:e.source},showModalsBeneath:!0}))},children:(0,i.jsx)(N.C,{})}),(0,i.jsx)(w.hE,{children:(0,u.t)("figmake.pause_project_modal.title")})]}),(0,i.jsx)(w.nB,{scrolling:"manual",children:(0,i.jsxs)("div",{className:"x78zum5 xdt5ytf xou54vl",children:[(0,i.jsx)("div",{children:(0,u.tx)("figmake.pause_project_modal.body_with_link",{upgradeLink:(0,i.jsx)(T.N,{href:(0,F.$X)(n?.id||""),newTab:!0,children:(0,u.t)("figmake.pause_project_modal.upgrade_link")})})}),(0,i.jsx)(z,{activeProjects:s,projectIdToPause:l,setProjectIdToPause:o})]})}),(0,i.jsx)(w.wi,{children:(0,i.jsx)(w.jk,{className:"x78zum5 x1q0g3np x13a6bvl x167g77z x1xn8qrt xdqyycr xh8yej3 x9f619",children:(0,i.jsx)(G,{props:e,projectIdToPause:l})})})]})})},"PauseProjectModal");function V({toolCallId:e,toolName:t,connectToExistingProject:n,trackingContext:i,source:s}){let a=(0,C.wA)();return()=>a((0,A.to)({type:U,data:{toolCallId:e,toolName:t,connectToExistingProject:n,trackingContext:i,source:s},showModalsBeneath:!0}))}let H=(0,L.Ju)(function(e){let t=j.hS({open:e.open,onClose:e.onClose}),n=(0,y.h5)({toolCallId:e.toolCallId,toolName:e.toolName,trackingContext:e.trackingContext,source:e.source});return(0,i.jsx)(k.bL,{manager:t,width:386,children:(0,i.jsxs)(w.vo,{children:[(0,i.jsx)(w.Y9,{children:(0,i.jsx)(w.hE,{children:(0,u.t)("figmake.supabase_cost_warning_modal.title")})}),(0,i.jsx)(w.nB,{children:(0,i.jsx)("div",{children:(0,i.jsxs)("p",{className:"xrlp15q x1nmd3yn xm735u9 xkbmbem x3wk4up",children:[(0,u.t)("figmake.supabase_cost_warning_modal.body")," ",(0,i.jsx)(T.N,{href:F.Sy,newTab:!0,children:(0,u.t)("general.learn_more")})]})})}),(0,i.jsx)(w.wi,{children:(0,i.jsxs)(w.jk,{className:"x78zum5 x1q0g3np x13a6bvl x167g77z x1xn8qrt xdqyycr xh8yej3 x9f619",children:[(0,i.jsx)(r.$n,{variant:"secondary",onClick:e.onClose,children:(0,u.t)("figmake.supabase.cancel")}),(0,i.jsx)(r.$n,{variant:"destructive",onClick:()=>{e.onClose(),n()},children:(0,u.t)("figmake.supabase_cost_warning_modal.submit")})]})})]})})},"SupabaseCostWarningModal");function K({onSubmit:e,toolCallId:t,toolName:n,trackingContext:r,source:l}){let{existingProjects:o,isLoading:d}=(0,x.tE)(),c=function({onSubmit:e,toolCallId:t,toolName:n,trackingContext:i,source:s}){let{needsToPauseProject:a}=(0,x.Lz)(),r=(0,y.h5)({toolCallId:t,toolName:n,trackingContext:i,source:s}),l=V({toolCallId:t,toolName:n,trackingContext:i,source:s}),o=function({toolCallId:e,toolName:t,trackingContext:n,source:i}){let s=(0,C.wA)();return()=>s((0,A.to)({type:H,data:{toolCallId:e,toolName:t,trackingContext:n,source:i},showModalsBeneath:!0}))}({toolCallId:t,toolName:n,trackingContext:i,source:s}),d=function(){let{organization:e}=(0,x.mS)();return e?.plan!=="free"}();return()=>{if(e&&e(),d){o();return}if(a){l();return}r()}}({onSubmit:e,toolCallId:t,toolName:n,trackingContext:r,source:l});if(d)return(0,i.jsx)(s.k,{});let p=o.filter(e=>e.status.toLowerCase()!==x.TL.REMOVED);return(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"xt970qd x1hr3lfm",children:(0,i.jsx)(a.E,{"aria-label":(0,u.t)("figmake.settings.connect_existing_project.create_project.button"),onClick:c,children:(0,i.jsxs)("div",{className:"x78zum5 x1q0g3np x6s0dn4 x1v2ro7d",children:[(0,i.jsx)(X,{}),(0,i.jsx)("p",{className:"xxrns5j x1q8tae1 x1vg90ec x1eab18d x1yyillh",children:(0,u.t)("figmake.settings.connect_existing_project.create_project.button")})]})})}),(0,i.jsx)("div",{className:"xyamay9 x1l90r2v",children:(0,i.jsx)(O.cG,{})}),(0,i.jsx)("div",{className:"x78zum5 xdt5ytf xou54vl xt970qd x1hr3lfm xl56j7k x1cy8zhl",children:p.map(s=>(0,i.jsx)(W,{project:s,onSubmit:e,toolCallId:t,toolName:n,trackingContext:r,source:l},s.id))})]})}function W({project:e,onSubmit:t,toolCallId:n,toolName:s,trackingContext:a,source:l}){let y=e.status.toLowerCase()===x.TL.INACTIVE||e.status.toLowerCase()===x.TL.PAUSING,b=function({onSubmit:e,project:t,isPaused:n,toolCallId:i,toolName:s,source:a,trackingContext:r}){let{needsToPauseProject:l}=(0,x.Lz)(),c=(0,p.tS)(),{organization:u}=(0,x.mS)(),y=u?.id,[,b]=(0,d.IT)((0,P.TT)({fileKey:c})),[,C]=(0,d.IT)((0,P.YF)({fileKey:c})),j=(0,g.S)(),k=(0,o.Xr)(_.Kj),w=async()=>{if(!c||!y){console.error("No open file key or organization ID found");return}e&&e(),k({project:t,state:"connecting"});try{await h.R.connectFile({fileKey:c,supabaseProjectId:t.id,supabaseOrgId:y})}catch(e){(0,v.AW)(e),k(null)}if((0,f.uF)(r||{persistentEntityId:"",clientLifecycleId:""},a,c,"existing"),await b.refetch(),n){try{await h.R.restoreFile({fileKey:c})}catch(e){(0,v.oT)(e),k(null)}E()}else T()},E=()=>{let e=setInterval(async()=>{let t=await m.M4.fetch((0,P.TT)({fileKey:c}),{policy:"networkOnly"});t?.connectedProject?.status.toLowerCase()===x.TL.ACTIVE_HEALTHY&&(clearInterval(e),T(),C.refetch())},2e3)},T=()=>{k(null),i&&s&&j({toolCallId:i,toolName:s,toolResult:{success:!0,message:"Connected to Supabase."}})},S=V({toolCallId:i,toolName:s,connectToExistingProject:w,trackingContext:r,source:a});return async()=>{n&&l?(e&&e(),S()):await w()}}({project:e,isPaused:y,onSubmit:t,toolCallId:n,toolName:s,trackingContext:a,source:l});return(0,i.jsxs)("div",{className:"x78zum5 x1q0g3np x6s0dn4 x1v2ro7d xh8yej3",children:[(0,i.jsx)(O.mj,{variant:"existing_project",inactive:y}),(0,i.jsxs)("div",{className:"x78zum5 x1q0g3np x1qughib x6s0dn4 x1v2ro7d xh8yej3",children:[(0,i.jsxs)("div",{className:"x78zum5 xdt5ytf x1cy8zhl",children:[(0,i.jsx)("p",{className:"xxrns5j x1q8tae1 x1vg90ec x1eab18d x1yyillh",children:e.name}),(0,i.jsxs)("div",{className:"x78zum5 x1q0g3np x1cy8zhl x1jnr06f",children:[(0,i.jsx)(q,{isPaused:y}),(0,i.jsx)("span",{children:"\xb7"}),(0,i.jsx)("span",{className:"xrlp15q x1nmd3yn xm735u9 xkbmbem x3wk4up x1n0bwc9",children:(0,u.tx)("figmake.settings.pause_project.created",{timestamp:(0,i.jsx)(c.h1,{date:e.created_at})})})]})]}),(0,i.jsx)(r.$n,{variant:"secondary",onClick:b,children:(0,u.t)("figmake.settings.connect_existing_project.project.button")})]})]},e.id)}function q({isPaused:e}){return e?(0,i.jsx)("span",{className:"xxrns5j x1q8tae1 x1vg90ec x1eab18d x1yyillh x1n0bwc9",children:(0,u.t)("figmake.settings.connect_existing_project.status.project.paused")}):(0,i.jsx)("span",{className:"xxrns5j x1q8tae1 x1vg90ec x1eab18d x1yyillh xq6u9c4",children:(0,u.t)("figmake.settings.connect_existing_project.status.project.active")})}function X(){return(0,i.jsx)("div",{className:"x78zum5 x1td3qas x10w6t97 xfawy5m xl56j7k x6s0dn4 x1sxf85j x30nh5c",children:(0,i.jsx)(l.$,{})})}},847714:(e,t,n)=>{n.d(t,{Z:()=>c});var i=n(104076),s=n(929302),a=n(950187),r=n(268389);n(120440);var l=n(192075),o=n(959834),d=n(108429);let c=(0,o.Ju)(function(e){let t=s.hS({open:e.open,onClose:e.onClose});return(0,i.jsx)(a.bL,{manager:t,width:386,children:(0,i.jsxs)(r.vo,{children:[(0,i.jsx)(r.Y9,{children:(0,i.jsx)(r.hE,{children:(0,l.t)("figmake.connect_existing_projects_modal.title")})}),(0,i.jsx)(r.nB,{children:(0,i.jsx)("div",{className:"x1y1aw1k x1l90r2v",children:(0,i.jsx)(d.K,{onSubmit:e.onClose,toolCallId:e.toolCallId,toolName:e.toolName,trackingContext:e.trackingContext,source:e.source})})})]})})},"SupabaseConnectExistingProjectsModal")},972700:(e,t,n)=>{n.d(t,{AP:()=>D,h5:()=>F});var i=n(104076),s=n(716976),a=n(237420),r=n(929302),l=n(950187),o=n(268389),d=n(293422),c=n(368422),u=n(684742),p=n(4921),m=n(814330),h=n(236901),f=n(699474),g=n(120440),x=n(377842),_=n(192075),y=n(366535),v=n(506192),b=n(211862),C=n(893393),j=n(304425),k=n(959834),w=n(954741),E=n(577932),T=n(518520),S=n(886597),I=n(622018),N=n(10074),A=n(647178);function L({value:e,setValue:t,disabled:n}){let s=(0,_.t)("figmake.settings.create_project_modal.project_name.label"),a=(0,_.t)("figmake.settings.create_project_modal.project_name.placeholder");return(0,i.jsxs)("div",{className:"x78zum5 xdt5ytf x1v2ro7d",children:[(0,i.jsx)("div",{className:"x78zum5 x1q0g3np x1qughib",children:(0,i.jsx)("label",{htmlFor:s,className:"xxrns5j x1q8tae1 x1vg90ec x1eab18d x1yyillh",children:s})}),(0,i.jsx)("div",{className:"x78zum5 xdt5ytf x1jnr06f",children:(0,i.jsx)(c.p,{type:"text",id:s,value:e,onChange:t,placeholder:a,size:"lg",disabled:n})})]})}function M({value:e,setValue:t,helperText:n,disabled:a}){let r=(0,_.t)("figmake.settings.create_project_modal.db_pass.label"),l=(0,_.t)("figmake.settings.create_project_modal.db_pass.placeholder"),[o,d]=s.useState(!1),[g,y]=s.useState(!1);return(0,i.jsxs)("div",{className:"x78zum5 xdt5ytf x1v2ro7d",children:[(0,i.jsxs)("div",{className:"x78zum5 x1q0g3np x1qughib",children:[(0,i.jsx)("label",{htmlFor:r,className:"xxrns5j x1q8tae1 x1vg90ec x1eab18d x1yyillh",children:r}),(0,i.jsxs)(u.E,{onClick:e=>{e.preventDefault(),t((0,x.b)()),y(!0),d(!0),setTimeout(()=>{d(!1)},500)},className:"x1lcq9ky x1n0bwc9 x78zum5 x1q0g3np",children:[(0,i.jsx)(m._,{...{0:{className:"xmauxvm"},1:{className:"xzpxq2u xxkxylk xmauxvm"}}[!!o<<0]}),(0,i.jsx)("span",{children:(0,_.t)("figmake.settings.create_project_modal.password.generate")})]})]}),(0,i.jsxs)("div",{className:"x1n2onr6 x1rg5ohu",children:[(0,i.jsx)(c.p,{type:g?"text":"password",id:r,value:e,onChange:t,placeholder:l,size:"lg",disabled:a}),(0,i.jsx)("span",{className:"x10l6tqk x19up5dg xbfrwjf xmauxvm",children:(0,i.jsx)(p.f,{checked:g,onIcon:(0,i.jsx)(h.T,{}),offIcon:(0,i.jsx)(f.A,{}),"aria-label":(0,_.t)("figmake.settings.create_project_modal.password.view_hide"),htmlAttributes:{"data-tooltip":(0,_.t)("figmake.settings.create_project_modal.password.view_hide"),"data-tooltip-type":"text"},onChange:()=>y(e=>!e)})})]}),n&&(0,i.jsx)("div",{className:"xrlp15q x1nmd3yn xm735u9 xkbmbem x3wk4up x1n0bwc9",children:n})]})}var O=(e=>(e.US_EAST_1="us-east-1",e.US_EAST_2="us-east-2",e.US_WEST_1="us-west-1",e.AP_SOUTHEAST_1="ap-southeast-1",e.AP_NORTHEAST_1="ap-northeast-1",e.AP_NORTHEAST_2="ap-northeast-2",e.AP_SOUTHEAST_2="ap-southeast-2",e.EU_WEST_1="eu-west-1",e.EU_WEST_2="eu-west-2",e.EU_WEST_3="eu-west-3",e.EU_NORTH_1="eu-north-1",e.EU_CENTRAL_1="eu-central-1",e.EU_CENTRAL_2="eu-central-2",e.CA_CENTRAL_1="ca-central-1",e.AP_SOUTH_1="ap-south-1",e.SA_EAST_1="sa-east-1",e))(O||{});function R({selectedRegion:e,setSelectedRegion:t}){let n=(0,a.wA)(),s=(0,v.Um)(),r=e=>{switch(e){case"us-east-1":return(0,_.t)("figmake.settings.create_project_modal.region.us_east_1");case"us-east-2":return(0,_.t)("figmake.settings.create_project_modal.region.us_east_2");case"us-west-1":return(0,_.t)("figmake.settings.create_project_modal.region.us_west_1");case"ap-southeast-1":return(0,_.t)("figmake.settings.create_project_modal.region.ap_southeast_1");case"ap-northeast-1":return(0,_.t)("figmake.settings.create_project_modal.region.ap_northeast_1");case"ap-northeast-2":return(0,_.t)("figmake.settings.create_project_modal.region.ap_northeast_2");case"ap-southeast-2":return(0,_.t)("figmake.settings.create_project_modal.region.ap_southeast_2");case"eu-west-1":return(0,_.t)("figmake.settings.create_project_modal.region.eu_west_1");case"eu-west-2":return(0,_.t)("figmake.settings.create_project_modal.region.eu_west_2");case"eu-west-3":return(0,_.t)("figmake.settings.create_project_modal.region.eu_west_3");case"eu-north-1":return(0,_.t)("figmake.settings.create_project_modal.region.eu_north_1");case"eu-central-1":return(0,_.t)("figmake.settings.create_project_modal.region.eu_central_1");case"eu-central-2":return(0,_.t)("figmake.settings.create_project_modal.region.eu_central_2");case"ca-central-1":return(0,_.t)("figmake.settings.create_project_modal.region.ca_central_1");case"ap-south-1":return(0,_.t)("figmake.settings.create_project_modal.region.ap_south_1");case"sa-east-1":return(0,_.t)("figmake.settings.create_project_modal.region.sa_east_1");default:throw Error("Unknown region")}};return(0,i.jsxs)("div",{className:"x78zum5 xdt5ytf x1v2ro7d",children:[(0,i.jsx)("label",{id:"supabase-project-database-region-select",className:"xxrns5j x1q8tae1 x1vg90ec x1eab18d x1yyillh",children:(0,_.t)("figmake.settings.create_project_modal.region.label")}),(0,i.jsx)(w.l6,{ariaLabelledBy:"supabase-project-database-region-select",inputClassName:g.Ay.classNames(P.select),id:"supabase-project-database-region-select",property:e,formatter:{format:r},onChange:t,dispatch:n,dropdownShown:s,children:Object.values(O).map(e=>(0,i.jsx)(w.c$,{value:e,children:r(e)},e))})]})}let P={select:{kZKoxP:"x1kowl60",kC7eKd:"x6sinrp",ku1ltF:null,kHypHr:null,kWkggS:null,kKwaWg:null,kl9DO0:null,k1YJky:null,kDwdnV:null,kAiEkY:null,kz484i:null,kgSjnq:null,$$css:!0}},D=(0,k.Ju)(function(e){let[t,n]=(0,s.useState)(!1),a=r.hS({...e,preventUserClose:t}),c=(0,b.q5)(),[u,p]=(0,s.useState)(c?.name||""),[m,h]=(0,s.useState)(""),[f,g]=(0,s.useState)(),[x,y]=(0,s.useState)("us-east-1"),[v,k]=(0,s.useState)(!1),[w,O]=(0,s.useState)(!0),[P,D]=(0,s.useState)(!1),F=(0,T.S)(),{toolCallId:z,toolName:B,onClose:G}=e,U=(0,s.useCallback)(()=>{k(!1),n(!1),D(!1),z&&B&&F({toolCallId:z,toolName:B,toolResult:{success:!0,message:"Connected to Supabase."}}),G()},[z,B,F,G]);!function(e,t,{intervalMsBetweenAttempts:n=2e3,enabled:i=!1,maxAttempts:a=5}={}){let r=(0,s.useRef)(!1);(0,s.useEffect)(()=>{if(!i||r.current)return;let s=!1;r.current=!0;let l=0,o=e=>new Promise(t=>setTimeout(t,e));return(async()=>{for(;!s&&l<a;){l++;try{if(await e()){t();break}}catch(e){console.error(e)}finally{await o(n)}}})(),()=>{s=!0,r.current=!1}},[i,n,e,a,t])}((0,s.useCallback)(async()=>{if(!c)return!1;let{connectedProject:e}=await C.M4.fetch((0,S.TT)({fileKey:c.key}),{policy:"networkOnly"});return!!e?.public_anon_key},[c]),U,{intervalMsBetweenAttempts:2e3,enabled:P}),(0,s.useEffect)(()=>{u.length>0&&m.length>0?O(!1):O(!0),m.length>=4&&g(void 0)},[u,m]);let V=async()=>{if(!c)return;if(m.length<4){g("dbPassTooShort");return}n(!0),k(!0);let t=await j.R.createProject({fileKey:c.key,projectName:u,dbPass:m,region:x}).then(e=>{let{id:t,organization_id:n,name:i,region:s,created_at:a,status:r}=e.data.meta;return{id:t,organization_id:n,name:i,region:s,created_at:a,status:r}}).catch(e=>{(0,A.YH)(e)});if(!t||!await j.R.connectFile({fileKey:c.key,supabaseProjectId:t.id,supabaseOrgId:t.organization_id}).catch(e=>{(0,A.AW)(e)})){k(!1);return}(0,E.uF)(e.trackingContext||{persistentEntityId:"",clientLifecycleId:""},e.source,c.key,"new"),D(!0)},H="dbPassTooShort"===f?(0,_.tx)("figmake.settings.create_project_modal.db_pass.too_short"):(0,_.tx)("figmake.settings.create_project_modal.db_pass.context",{learnMoreLink:(0,i.jsx)("a",{target:"_blank",href:N.kS,children:(0,_.t)("general.learn_more")})});return(0,i.jsx)(l.bL,{manager:a,width:386,children:(0,i.jsxs)(o.Rq,{onSubmit:V,children:[(0,i.jsx)(o.Y9,{children:(0,i.jsx)(o.hE,{children:(0,_.t)("figmake.settings.create_project_modal.title")})}),(0,i.jsx)(o.nB,{scrolling:"manual",children:(0,i.jsxs)("div",{className:"x1vvogim xnjsko4 x78zum5 xdt5ytf x1c1vhfx",children:[(0,i.jsx)(L,{value:u,setValue:p,disabled:v}),(0,i.jsx)(R,{selectedRegion:x,setSelectedRegion:y}),(0,i.jsx)(M,{value:m,setValue:h,helperText:H,disabled:v})]})}),(0,i.jsx)(o.wi,{children:(0,i.jsxs)(o.jk,{className:"x78zum5 x1q0g3np x13a6bvl x167g77z x1xn8qrt xdqyycr xh8yej3 x9f619",children:[v&&(0,i.jsx)("p",{className:"xrlp15q x1nmd3yn xm735u9 xkbmbem x3wk4up x1n0bwc9",children:(0,_.t)("figmake.supabase.creating_project.subtitle")}),(0,i.jsx)(d.$n,{variant:"secondary",onClick:()=>a.props.close({source:"button"}),children:(0,_.t)("figmake.settings.create_project_modal.button.cancel")}),v?(0,i.jsx)(I.lV,{variant:"primary",children:(0,_.t)("figmake.settings.create_project_modal.button.submit.loading")}):(0,i.jsx)(d.$n,{variant:"primary",type:"submit",disabled:w,children:(0,_.t)("figmake.settings.create_project_modal.button.submit")})]})})]})})},"CreateProjectModal");function F({toolCallId:e,toolName:t,trackingContext:n,source:i}){let s=(0,a.wA)();return()=>s((0,y.to)({type:D,data:{toolCallId:e,toolName:t,trackingContext:n,source:i},showModalsBeneath:!0}))}},647178:(e,t,n)=>{n.d(t,{AW:()=>u,EQ:()=>h,YH:()=>o,ZH:()=>d,fQ:()=>c,lN:()=>m,oT:()=>p,wH:()=>l});var i=n(638004),s=n(550209),a=n(253066),r=n(649431);function l(e){(0,a.r)(),(0,s.$D)(i.e.AI_FOR_PRODUCTION,e)}function o(e){if(e.message.match(/^(.*?)Project with name (.+?) already exists in your organization\.$/)){(0,r.ym)();return}if(e.message.match(/^(.*)maximum limits for the number of active free projects(.*)$/)){(0,r.ZK)();return}(0,r.u)(),l(e)}function d(e){(0,r.it)(),l(e)}function c(e){l(e)}function u(e){(0,r.jx)(),l(e)}function p(e){(0,r.n9)(),l(e)}function m(e){(0,r.m8)(),l(e)}class h extends Error{constructor(){super("No index.tsx file found in the code files"),this.name="NoIndexFileError"}}},622018:(e,t,n)=>{n.d(t,{cG:()=>P,jc:()=>M,lV:()=>O,ls:()=>R,Gt:()=>N,p1:()=>A,mj:()=>T});var i=n(104076),s=n(293422),a=n(419822),r=n(188426);n(120440);var l=n(652539),o=n(772963),d=n(192075),c=n(142914),u=n(716976),p=n(237420),m=n(638004),h=n(454851),f=n(853943),g=n(686549),x=n(550209),_=n(506192),y=n(211862),v=n(349311),b=n(304425),C=n(346886),j=n(10074);function k({connectedOrg:e}){let t=(0,y.tS)()||"",n=(0,p.wA)(),s=(0,_.BK)("CONNECTED_ORG_MORE_MENU"),a=u.useCallback(async()=>{try{await b.R.deauthorizeFile({fileKey:t})}catch(e){(0,x.$D)(m.e.AI_FOR_PRODUCTION,e)}},[t]),r=u.useMemo(()=>[{displayText:(0,d.t)("figmake.settings.connected_project.dropdown.manage_organization"),callback:()=>{(0,g.FJ)((0,j.n1)(e.id))}},{displayText:"",separator:!0},{displayText:(0,d.t)("figmake.settings.connected_org.dropdown.disconnect"),callback:()=>{a()}}],[e,a]),l=u.useRef(null),o=l.current?.getBoundingClientRect();return o||(s.showing&&(0,x.$D)(m.e.AI_PRODUCTIVITY,Error("FigMake connected project view: dropdownBoundingRect is null")),o=new DOMRect(0,0,0,0)),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(h.d,{"aria-expanded":s.showing,ref:l,"aria-label":(0,d.t)("figmake.settings.connected_org.dropdown.label"),onClick:()=>s.toggle(),htmlAttributes:{"data-tooltip-type":v.Ib.TEXT,"data-tooltip":(0,d.t)("figmake.settings.connected_org.dropdown.label")},children:(0,i.jsx)(f.J,{})}),s.showing&&(0,i.jsx)(C.j,{dispatch:n,parentRect:o,onSelectItem:e=>{e.callback&&e.callback()},showPoint:!1,items:r,lean:"left"})]})}var w=n(32404),E=n(114344);function T({inactive:e,variant:t="connected_project"}){return(0,i.jsx)("div",{...{0:{className:"x78zum5 xl56j7k x6s0dn4 x1sxf85j x1606gwu x100vrsf x1vqgdyp xmkeg23 x1y0btm7 x7z60cl"},2:{className:"x78zum5 xl56j7k x6s0dn4 x1sxf85j x1v8gsql x100vrsf x1vqgdyp xmkeg23 x1y0btm7 x7z60cl"},1:{className:"x78zum5 xl56j7k x6s0dn4 x1sxf85j x1606gwu x1td3qas x10w6t97"},3:{className:"x78zum5 xl56j7k x6s0dn4 x1sxf85j x1v8gsql x1td3qas x10w6t97"}}[!!e<<1|!("existing_project"!==t)<<0],children:(0,i.jsx)(l.B,{svg:E.A,useOriginalSrcFills_DEPRECATED:!0,svgWidth:"16px",svgHeight:"16px",...{0:{},1:{className:"xy712c7"}}[!!e<<0]})})}function S(){let{organization:e}=(0,w.mS)();return(0,i.jsx)("div",{className:"x1tamke2 xh8yej3 x9f619",children:(0,i.jsxs)("div",{className:"x78zum5 x1q0g3np x1qughib x6s0dn4 xh8yej3",children:[(0,i.jsxs)("div",{className:"x78zum5 xdt5ytf x1nhvcw1 xdpxx8g",children:[e&&(0,i.jsx)(o.G,{className:"xrbesu5 x12cwyba x1l993ej x1ejgcx7 x1aos5ly x256u9z xuxw1ft xb3r6kr xlyipyv",text:e?.name}),(0,i.jsx)("p",{className:"xrlp15q x1nmd3yn xm735u9 xkbmbem x3wk4up x1n0bwc9",children:(0,d.t)("figmake.settings.project.org_info.title")})]}),e&&(0,i.jsx)(k,{connectedOrg:e})]})})}function I(){return(0,i.jsxs)("div",{className:"x78zum5 xdt5ytf x1qughib x1cy8zhl xdpxx8g x1y8v6su x1tamke2 xh8yej3 x9f619",children:[(0,i.jsx)("p",{className:"xrbesu5 x12cwyba x1l993ej x1ejgcx7 x1aos5ly",children:(0,d.t)("figmake.settings.project.header.title")}),(0,i.jsx)("p",{className:"xrlp15q x1nmd3yn xm735u9 xkbmbem x3wk4up x1n0bwc9",children:(0,d.t)("figmake.settings.project.header.subtitle")})]})}function N({showDefaultHeader:e=!1,children:t}){return(0,i.jsxs)(i.Fragment,{children:[e?(0,i.jsx)(I,{}):(0,i.jsx)(S,{}),(0,i.jsx)(P,{}),t]})}function A({badge:e,actions:t,inactive:n,header:s,subheader:a}){return(0,i.jsx)("div",{className:"x1tamke2",children:(0,i.jsxs)("div",{className:"x78zum5 x1q0g3np x1qughib x6s0dn4 xh8yej3",children:[(0,i.jsxs)("div",{className:"x78zum5 x1q0g3np x1nhvcw1 x6s0dn4 x1v2ro7d",children:[(0,i.jsx)(T,{inactive:n}),(0,i.jsxs)("div",{className:"x78zum5 xdt5ytf x1nhvcw1 x1cy8zhl",children:[(0,i.jsxs)("div",{className:"x78zum5 x1q0g3np x6s0dn4 x167g77z",children:[(0,i.jsx)(o.G,{className:"xrbesu5 x12cwyba x1l993ej x1ejgcx7 x1aos5ly x1racy4e xuxw1ft xb3r6kr xlyipyv",text:s}),e]}),a||(0,i.jsx)(L,{})]})]}),(0,i.jsx)("div",{className:"x78zum5 x1q0g3np x6s0dn4 x167g77z",children:t})]})})}function L(){return(0,i.jsx)(o.G,{className:"xrlp15q x1nmd3yn xm735u9 xkbmbem x3wk4up x1n0bwc9 x256u9z xuxw1ft xb3r6kr xlyipyv",text:(0,d.t)("figmake.settings.project.project_info.title")})}function M({url:e,linkText:t}){return(0,i.jsxs)("a",{className:"x78zum5 x1q0g3np x1qughib x6s0dn4 x1wt4b31 xebhuq6",target:"_blank",href:e,children:[(0,i.jsx)(r.S,{}),(0,i.jsx)("p",{className:"xrlp15q x1nmd3yn xm735u9 xkbmbem x3wk4up",children:t})]})}function O({variant:e,children:t}){return(0,i.jsx)(s.$n,{variant:e,disabled:!0,children:(0,i.jsxs)("div",{className:"x78zum5 x1q0g3np x6s0dn4",children:[(0,i.jsx)(a.k,{}),(0,i.jsx)("p",{className:"xrlp15q x1nmd3yn xm735u9 xkbmbem x3wk4up",children:t})]})})}function R({size:e}){let t=(0,w.RK)();return t?(0,i.jsx)(c.H8,{user:t,size:e}):null}function P(){return(0,i.jsx)("div",{className:"x178xt8z x13fuv20 x16ufvko xh8yej3"})}},588961:(e,t,n)=>{n.d(t,{GA:()=>u,PM:()=>h,ZO:()=>m});var i=n(716976),s=n(795033),a=n(833805),r=n(211862),l=n(985416),o=n(580276),d=n(886597),c=n(32404);let u=(0,l.Wh)(()=>(0,s.eU)("")),p=(0,l.Wh)(()=>(0,s.eU)([]));function m(){s.zl.set(p,[])}function h(){let e=(0,r.tS)(),t=(0,o.Xu)(),[n,l]=(0,s.fp)(p),m=(0,s.md)(u),{connectedProject:h}=(0,c.GC)(),[f]=(0,a.IT)((0,d.gZ)({fileKey:e,functionName:"make-server"}),{enabled:!!h&&t});return(0,i.useEffect)(()=>{if(!f.data||0===f.data.length)return;let e=f.data.filter(e=>void 0!==e.version).map(e=>parseInt(e.version)).filter(e=>!isNaN(e)),t=e.length>0?Math.max(...e):-1,n=parseInt(m);isNaN(n)||(t=Math.max(n,t)),l(e=>[...e,...f.data].filter((e,t,n)=>t===n.findIndex(t=>t.id===e.id)).filter(e=>{let n=parseInt(e.timestamp);return(isNaN(n)||n>Date.now()-3e5)&&(!e.version||e.version===t.toString()||-1===t)}))},[f,m,l]),[n,l]}},649431:(e,t,n)=>{n.d(t,{A9:()=>_,SR:()=>y,ZK:()=>u,it:()=>f,jx:()=>m,l4:()=>g,m8:()=>v,n9:()=>h,rq:()=>x,u:()=>p,ym:()=>c});var i=n(686549),s=n(725837),a=n(192075),r=n(58212),l=n(638641),o=n(10074),d=(e=>(e.PROJECT_NAME_TAKEN="supabase-project-name-taken",e.ACTIVE_FREE_PROJECT_LIMIT="supabase-active-free-project-limit",e.PROJECT_CREATION_UNSUCCESSFUL="supabase-project-creation-unsuccessful",e.PROJECT_CONNECTION_UNSUCCESSFUL="supabase-project-connection-unsuccessful",e.PROJECT_RESTORE_UNSUCCESSFUL="supabase-project-restore-unsuccessful",e.PAUSING_PROJECT_UNSUCCESSFUL="supabase-pausing-project-unsuccessful",e.PAUSING_PROJECT_SUCCESSFUL="supabase-pausing-project-successful",e.DEPLOY_UNSUCCESSFUL="supabase-deploy-unsuccessful",e.DEPLOY_SUCCESSFUL="supabase-deploy-successful",e.NOTHING_TO_DEPLOY="supabase-nothing-to-deploy",e.AUTHENTICATION_UNSUCCESSFUL="supabase-authentication-unsuccessful",e))(d||{});function c(){s.D.dispatch(r.F.enqueue({message:(0,a.t)("figmake.supabase.errors.project_name_taken"),type:"supabase-project-name-taken",icon:l.zX.EXCLAMATION,timeoutOverride:3e3,error:!0}))}function u(){s.D.dispatch(r.F.enqueue({message:(0,a.t)("figmake.supabase.errors.project_creation_unsuccessful.need_to_pause"),type:"supabase-active-free-project-limit",icon:l.zX.EXCLAMATION,timeoutOverride:3e3,error:!0,button:{text:(0,a.t)("figmake.supabase.errors.project_creation_unsuccessful.need_to_pause.button"),action:()=>{(0,i.FJ)(o.v7,"_blank")}}}))}function p(){s.D.dispatch(r.F.enqueue({message:(0,a.t)("figmake.supabase.errors.project_creation_unsuccessful"),type:"supabase-project-creation-unsuccessful",icon:l.zX.EXCLAMATION,timeoutOverride:3e3,error:!0}))}function m(){s.D.dispatch(r.F.enqueue({message:(0,a.t)("figmake.supabase.errors.project_connection_unsuccessful"),type:"supabase-project-connection-unsuccessful",icon:l.zX.EXCLAMATION,timeoutOverride:3e3,error:!0}))}function h(){s.D.dispatch(r.F.enqueue({message:(0,a.t)("figmake.supabase.errors.project_restore_unsuccessful"),type:"supabase-project-restore-unsuccessful",icon:l.zX.EXCLAMATION,timeoutOverride:3e3,error:!0}))}function f(){s.D.dispatch(r.F.enqueue({message:(0,a.t)("figmake.supabase.errors.pausing_project_unsuccessful"),type:"supabase-pausing-project-unsuccessful",icon:l.zX.EXCLAMATION,timeoutOverride:3e3,error:!0}))}function g(){s.D.dispatch(r.F.enqueue({message:(0,a.t)("figmake.supabase.errors.pausing_project_successful"),type:"supabase-pausing-project-successful",icon:l.zX.CHECK,timeoutOverride:3e3}))}function x(){s.D.dispatch(r.F.enqueue({message:(0,a.t)("figmake.supabase.errors.deploy_unsuccessful"),type:"supabase-deploy-unsuccessful",icon:l.zX.EXCLAMATION,timeoutOverride:3e3,error:!0}))}function _(){s.D.dispatch(r.F.enqueue({message:(0,a.t)("figmake.supabase.errors.deploy_successful"),type:"supabase-deploy-successful",icon:l.zX.CHECK,timeoutOverride:3e3}))}function y(){s.D.dispatch(r.F.enqueue({message:(0,a.t)("figmake.supabase.errors.nothing_to_deploy"),type:"supabase-nothing-to-deploy",icon:l.zX.EXCLAMATION,timeoutOverride:3e3,error:!0}))}function v(){s.D.dispatch(r.F.enqueue({message:(0,a.t)("figmake.supabase.errors.authentication_unsuccessful"),type:"supabase-authentication-unsuccessful",icon:l.zX.EXCLAMATION,timeoutOverride:3e3,error:!0}))}},836543:(e,t,n)=>{n.d(t,{A:()=>g});var i=n(542653),s=n(795033),a=n(188220),r=n(211862),l=n(893393),o=n(304425),d=n(293172),c=n(842771),u=n(963433),p=n(647178),m=n(886597),h=n(588961),f=n(649431);function g(){let e=(0,s.Xr)(d.p7),{entryPointCodeInstance:t}=(0,u.oA)(),n=(0,c.vD)(t?.guid??null),g=(0,c.DM)(n),x=(0,r.tS)(),_=(0,s.Xr)(d.Xl),y=(0,s.Xr)(d.GV),v=(0,s.Xr)(h.GA),[,b]=(0,h.PM)();return async t=>{let{showVisualBells:n}=t;if(!x){console.error("No open file key found");return}try{e(d.Ut.DEPLOYING);let t=(0,i.$d)(),s={};for(let[e,n]of Object.entries(t))if(e.includes("/supabase/functions/server/")){let t=e.split("/").pop(),i=n.sourceCode;t&&i&&(s[t]=i)}if(!s["index.tsx"])throw new p.EQ;let a=await o.R.deployEdgeFunction({fileKey:x,files:s});v(a.data.meta.version),(0,h.ZO)(),setTimeout(()=>{l.M4.fetch((0,m.gZ)({fileKey:x,functionName:"make-server"}),{policy:"networkOnly"})},5e3),g(),n&&(0,f.A9)()}catch(t){if(t instanceof p.EQ){n&&(0,f.SR)();return}n&&(0,f.rq)(),(0,p.wH)(t);let e={id:(0,a.g)(),event_message:`Error while deploying: ${t instanceof Error?t.message:String(t)}`,timestamp:Date.now().toString(),level:"error"};b(t=>[...t,e])}finally{e(d.Ut.INIT),_(!1),y(!1)}}}},429033:(e,t,n)=>{n.d(t,{m:()=>y});var i=n(547115),s=n(242069),a=n(638004),r=n(266808),l=n(170627),o=n(795033),d=n(846033),c=n(743072),u=n(134873),p=n(809565),m=n(354114),h=n(211862),f=n(592726),g=n(234429),x=n(963433),_=n(580276);function y({chatController:e}){let t=(0,h.q5)(),n=t?.key,y=(0,f.iZ)(),v=t?.trackTags,b=v?.isDuplicatedFromSupabaseConnectedFile,C=b?.status==="loaded"&&b.data,{codeLibraryInstance:j}=(0,x.oA)(),k=e.isInitialized?e.getNodeChatMessages():void 0;(0,_.p3)()&&n&&j&&k&&(async()=>{let t=await (0,u.qV)(n),h=k.some(e=>{if(e.type!==r.K$p.SYSTEM_MESSAGE)return!1;let n=(0,s.U1)(e.textContent);return n?.type==="duplicated_file"&&n.fileKeyHash===t});if(C&&!h&&t&&y){let s=c.J.startUserFlow({name:"make_duplicated_file",team:a.e.MAKE,priority:i.bx.P1}),r=(0,g.IO)(y,t),u=o.zl.get(p.J)??0;l.Hq.ai("add-duplicated-file-system-message",()=>{e.appendMessages([r]),m.Y5.commit()}),await (0,d.j4)({commitContext:"duplicated_file",nodeChatMessage:r,chatController:e,fileKey:n,startFileSeqNum:u,userFlow:s}),s.end()}})()}},872990:(e,t,n)=>{n.d(t,{J:()=>o,T:()=>d});var i=n(716976),s=n(812714),a=n(394549),r=n(141330),l=n(290407);function o(){let{isSlidesAiEnabled:e}=(0,a.u4)();return e&&(0,s.kc)().piper_outline_to_deck}function d(){i.useEffect(()=>()=>{(0,l.B3)(r.JT.SLIDES_GENERATE_OUTLINE),(0,l.B3)(r.JT.SLIDES_OUTLINE_TO_DECK)},[])}},451324:(e,t,n)=>{n.d(t,{Jh:()=>r,QD:()=>a,Ro:()=>i,jK:()=>s});let i=["auto","pitch","product_showcase","product_management","sales","proposal","research_report","knowledge","meeting","portfolio"],s=[5,10,15,20,25],a=["minimal","concise","detailed","extensive"],r={usecase:"auto",slideCount:5,textDensity:"concise"}},717828:(e,t,n)=>{n.d(t,{EG:()=>p,JY:()=>m,mG:()=>c,sH:()=>h,wd:()=>u});var i=n(716976),s=n(795033),a=n(985416),r=n(76635);let l={step:"NOT_STARTED",data:{deckOptions:n(451324).Jh}},o=(0,a.Wh)(()=>(0,s.um)(l,(e,t)=>{switch(t.type){case"SET_STEP":if(!function(e,t){let n="GENERATION_LOADING"===e.step||"DONE"===e.step;switch(t){case"NOT_STARTED":case"OUTLINE":return!n;case"GENERATION_LOADING":return e.data?.outline!==void 0;case"GENERATION_ON_CANVAS":return"GENERATION_LOADING"===e.step;case"DONE":return"GENERATION_LOADING"===e.step||"GENERATION_ON_CANVAS"===e.step}}(e,t.step))return e;if("NOT_STARTED"===t.step)return l;return{...e,step:t.step};case"SET_PROMPT":if(!d(e))return e;return{...e,data:{...e.data,prompt:t.prompt}};case"SET_OUTLINE":if(!d(e))return e;return{...e,data:{...e.data,outline:t.outline}};case"SET_TEMPLATE_LIBRARY_KEY":if(!d(e))return e;return{...e,data:{...e.data,templateLibraryKey:t.templateLibraryKey}};case"SET_USECASE":return{...e,data:{...e.data,deckOptions:{...e.data?.deckOptions,usecase:t.usecase}}};case"SET_SLIDE_COUNT":return{...e,data:{...e.data,deckOptions:{...e.data?.deckOptions,slideCount:t.slideCount}}};case"SET_TEXT_DENSITY":return{...e,data:{...e.data,deckOptions:{...e.data?.deckOptions,textDensity:t.textDensity}}}}}));function d(e){return"OUTLINE"===e.step}function c(){return(0,s.md)(o).step}function u(){switch(c()){case"NOT_STARTED":case"GENERATION_ON_CANVAS":case"DONE":return!1;case"OUTLINE":case"GENERATION_LOADING":return!0}}function p(){return(0,s.md)(o).data}function m(){let[e,t]=(0,s.fp)(o),n=i.useCallback(()=>{t({type:"SET_STEP",step:"OUTLINE"})},[t]),a=i.useCallback(()=>{t({type:"SET_STEP",step:"GENERATION_LOADING"})},[t]),r=i.useCallback(()=>{t({type:"SET_STEP",step:"GENERATION_ON_CANVAS"})},[t]),l=i.useCallback(()=>{t({type:"SET_STEP",step:"DONE"})},[t]),d=i.useCallback(()=>{t({type:"SET_STEP",step:"NOT_STARTED"})},[t]),c=i.useCallback(e=>{t({type:"SET_PROMPT",prompt:e})},[t]),u=i.useCallback(e=>{t({type:"SET_TEMPLATE_LIBRARY_KEY",templateLibraryKey:e})},[t]),p=i.useCallback(e=>{t({type:"SET_OUTLINE",outline:e})},[t]),m=i.useCallback(e=>{t({type:"SET_USECASE",usecase:e})},[t]),h=i.useCallback(e=>{t({type:"SET_SLIDE_COUNT",slideCount:e})},[t]),f=i.useCallback(e=>{t({type:"SET_TEXT_DENSITY",textDensity:e})},[t]);return{step:e.step,data:e.data,start:n,createDeck:a,showDeckGenerationOnCanvas:r,finish:l,reset:d,setPrompt:c,setOutline:p,setTemplateLibraryKey:u,setUsecase:m,setSlideCount:h,setTextDensity:f}}function h(){let{data:e,setTemplateLibraryKey:t}=m(),n=e?.templateLibraryKey,s=(0,r.WS)(),a=s.data||[],l="loaded"===s.status&&a.length>0,o=a[0],d=(0,r.S7)();return n?d=n:l&&o&&(d=o.library_key),i.useEffect(()=>{d!==n&&t(d)},[d,n,t]),d}},117739:(e,t,n)=>{n.d(t,{Gd:()=>C,g2:()=>T,M0:()=>j,Hn:()=>k,Wb:()=>E,v0:()=>w});var i=n(104076),s=n(716976),a=n(266808),r=n(264993),l=n(795033),o=n(196717),d=n(211862),c=n(141330),u=n(290407),p=n(598369),m=n(996253),h=n(388190),f=n(76635),g=n(511570),x=n.n(g),_=n(373547);function y(){let e="dark"===(0,_.DP)();return(0,i.jsx)("div",{className:x()("slides_ai_shimmer_overlay--shimmer--R2Ru3",e?"slides_ai_shimmer_overlay--shimmerDark--hd6lU":"slides_ai_shimmer_overlay--shimmerLight--PGzix")})}var v=n(94909),b=n(769887);function C(e){if(e)return e.pageGuids;let t=l.zl.get(m.V6);return(()=>{switch(t.type){case m.i6.ALL:return t.allPages;case m.i6.SINGLE:return[t.page];default:return[]}})().map(e=>e.guid)}function j(e){let t=(0,l.md)(m.bY).figjamEntryPointData,n=t?.figjamFileKey||e,i=t?.selectedGuids;return(0,s.useCallback)(()=>{if(n)return(0,b.R)({fileKey:n,selectedGuids:i})},[n,i])}function k(e){let t=(0,f.yt)(e[0]),n=(0,s.useRef)(!1);return(0,s.useCallback)(()=>{if(!l.zl.get(d.ze))return;let i=l.zl.get(o.BT);if(!n.current&&0===i.flat().length&&e.length>0){n.current=!0;let i=e[0];if(!i)return;t(i,{row:0,col:0},a.zkO.USER,"figjam-board-to-deck-default-slide",h.Ji.BOARD_TO_DECK)}},[t,e])}function w(){let e=function(){let e=(0,l.md)(m.ux),t=(0,f.WS)(),n=t.data||[],i="loaded"===t.status&&n.length>0,s=n[0],a=(0,f.S7)();return e||(i&&s?s.library_key:a)}(),t=(0,f.NG)(e),n="loaded"===t.status;return{areSlidePresetsLoaded:n,slidePresetModules:n?t.data:[]}}function E(){let e=(0,s.useRef)(null),t=(0,s.useRef)(new Set);return{showPlaceholderOverlay:(0,s.useCallback)(n=>{if(n&&n!==r.AD&&e.current!==n){for(let e of t.current)(0,p.ks)(e);e.current=n,t.current.add(n),(0,p.Vm)(n,(0,i.jsx)(y,{}))}},[]),removeAllPlaceholderOverlays:(0,s.useCallback)(()=>{for(let e of t.current)(0,p.ks)(e);t.current.clear(),e.current=null},[])}}function T(){(0,s.useEffect)(()=>()=>{let{state:e}=(0,u.pP)(c.JT.BOARD_TO_DECK);e===u.qy.RUNNING&&(0,u.cT)(c.JT.BOARD_TO_DECK),(0,v.$K)()},[])}},842582:(e,t,n)=>{n.d(t,{D:()=>F});var i=n(716976),s=n(237420),a=n(266808),r=n(795033),l=n(146283),o=n(192075),d=n(619070),c=n(211862),u=n(141330),p=n(290407),m=n(714136),h=n(616802),f=n(996253),g=n(117739),x=n(832885),_=n(170627),y=n(980852),v=n(376475),b=n(178623),C=n(987224),j=n(809565),k=n(719097),w=n(291507),E=n(769887),T=n(388190),S=n(338052),I=n(94909);async function N({slidePresetModules:e,abortController:t,batchSize:n=2,dispatch:i}){let s=[],r=[];a.Zdr?.createHiddenFrameForPresets();for(let o=0;o<e.length;o+=n){if(t.signal.aborted)return r;for(let t of e.slice(o,o+n))try{let e=new Promise(e=>{(0,T.Zx)({module:t,editScopeType:a.zkO.USER,editScopeLabel:"use-slides-ai-preset-selection",callback:t=>{r.push(t),e()},dispatch:i})});s.push(e)}catch(e){l.k.error("Failed to insert preset",e)}Promise.allSettled(s).then(()=>{t.signal.aborted&&D(r)}),await P(Promise.allSettled(s),t.signal)}return t.signal.aborted||a.Zdr?.selectPresetsFromTemplate(),r}async function A({figjamFileKey:e,selectedGuids:t=[],pageGuids:n=[],abortController:i}){if(!a.Zdr)return[];let s=await P((0,E.R)({fileKey:e,selectedGuids:t.slice(0,x.S)}),i.signal);return i.signal.aborted?[]:JSON.parse(a.Zdr.getCanvasDataJsonFromBuffer(s,n))}class L{constructor(e,t,n){this.currentItem=void 0,this.hasRenamedFile=!1,this.lastSlideGuid="",this.abortController=e,this.showPlaceholderOverlay=t,this.getNextItem=n,this.intervalId=this.start()}start(){return setInterval(()=>this.update(),100)}isActive(){return 0!==this.intervalId}update(){if(!a.Zdr)return;if(this.abortController.signal.aborted||!r.zl.get(c.ze)){this.cancel();return}if(this.currentItem||(this.currentItem=this.getNextItem(),!this.currentItem))return;let e=a.Zdr.generateSlides(this.currentItem.slideItem);if(!this.abortController.signal.aborted){if(this.showPlaceholderOverlay(a.Zdr.getPlaceholderNodeId()),e.length>0){e.unshift(this.lastSlideGuid);for(let t=0;t<e.length-1;++t){let n=e[t];n&&R(O(n))}let t=e[e.length-1];t&&(this.lastSlideGuid=t)}this.currentItem.resolve(),this.currentItem=void 0}}cancel(){this.isActive()&&(this.cleanUp(),(0,I.Y)())}completeSuccessfully(){this.cleanUp(),(0,I.Sk)()}processError(e){this.cleanUp(),(0,I.D1)(e)}cleanUp(){this.isActive()&&(clearInterval(this.intervalId),this.intervalId=0)}}async function M({canvasData:e,processTitle:t,showPlaceholderOverlay:n,abortController:i}){let s=[],a=new L(i,n,()=>s.shift());try{let n=await b.Ay.slides.createSlides({version:"1.1",data:e},{orgId:r.zl.get(C._s),teamId:r.zl.get(c.As)||null,fileKey:r.zl.get(c.ze)||null,fileSeq:r.zl.get(j.J)?.toString()||null,userId:r.zl.get(k.kS)||null,trackingSessionId:(0,v.fF)()});if(i.signal.aborted||!r.zl.get(c.ze)){n.cancel();return}let l=[],o=!1;for await(let e of new b.c6(n)){if(!a.isActive())return;let n=e;o||"TITLE"!==n.slideType||(o=!0,t(n.content.find(e=>"h1"===e.type)?.content||"")),l.push(new Promise(e=>{s.push({slideItem:n,resolve:e})}))}if(await P(Promise.allSettled(l),i.signal),i.signal.aborted)return;a.completeSuccessfully()}catch(e){a.processError(e)}}let O=(0,S.n)(e=>{if(!e)return[];let t=(0,y.getActiveTSSceneGraph)().get(e);if(!t)return[];let n=[];return t.childrenNodes.forEach(e=>{(function e(t,n){t&&("TEXT"===t.type?n.push(t):t.childrenNodes.forEach(t=>e(t,n)))})(e,n)}),n}),R=(0,S.n)(e=>{_.l7.user("figjam-to-slide-deck-text-opacity",()=>{e.forEach(e=>{e.opacity>0||e.setOpacityWithAnimation(1,w._E.forLinear(.5),"slides-ai-animate-slide-text")})}),e.length=0});async function P(e,t){if(!t)return e;if(t.aborted)throw Error("Aborted");let n=new Promise((e,n)=>{let i=()=>{n(Error("Aborted"))};t.addEventListener("abort",i),t.addEventListener("abort",()=>{t.removeEventListener("abort",i)})});return await Promise.race([e,n])}function D(e){e&&_.l7.user("remove-hidden-preset-nodes",()=>{for(let t of e){let e=(0,y.getActiveTSSceneGraph)().get(t);if(e)try{e.removeSelfAndChildren()}catch(e){console.warn("Failed to remove preset",e)}}})}function F(){let e=(0,r.md)(f.oQ)??void 0,t=(0,r.md)(f.bY),n=t?.figjamEntryPointData,a=n?.figjamFileKey??e,{areSlidePresetsLoaded:l,slidePresetModules:o}=(0,g.v0)(),d=(0,g.Hn)(o),{showPlaceholderOverlay:_,removeAllPlaceholderOverlays:y}=(0,g.Wb)(),v=(0,s.wA)(),b=(0,r.md)(c.ze),C=t?.source??x.E.SLIDES_TEMPLATE;(0,r.Xr)(m.zF)(C);let j=(0,h.D)(o[0]?.library_key),k=(0,i.useMemo)(()=>({figjamFileKey:a,figjamEntryPointData:n,areSlidePresetsLoaded:l,slidePresetModules:o,addFirstPresetToEmptyDeck:d,showPlaceholderOverlay:_,removeAllPlaceholderOverlays:y,dispatch:v,openFileKey:b,subscribeToLibrary:j}),[a,n,l,o,d,_,y,v,b,j]),w=(0,p.RL)(u.JT.BOARD_TO_DECK,z,{figjamFileKey:a});return{startAction:(0,i.useCallback)(()=>{(0,p.B3)(u.JT.BOARD_TO_DECK),w.start(k)},[k,w]),figjamFileKey:a}}let z=async({abortController:e,params:t})=>{let{figjamFileKey:n,figjamEntryPointData:i,areSlidePresetsLoaded:s,slidePresetModules:u,addFirstPresetToEmptyDeck:p,showPlaceholderOverlay:m,removeAllPlaceholderOverlays:h,dispatch:f,openFileKey:x,subscribeToLibrary:_}=t,y=(0,g.Gd)(i),v=i?.selectedGuids,b=!n;if(e.signal.aborted||b||!s||!x)return;u?.length||l.k.warn("No slide preset modules found...");let C=[];try{if(a.Ez5&&a.Ez5.uiState().leftPanelCollapsedUI3.set(!0),(0,I.tO)(),!a.Zdr)return;a.Zdr.showLoadingState();let t=a.Zdr.getPlaceholderNodeId();m(t);let[i,s]=await P(Promise.allSettled([A({figjamFileKey:n,selectedGuids:v,pageGuids:y,abortController:e}),N({slidePresetModules:u,abortController:e,dispatch:f})]),e.signal);if("rejected"===s.status){l.k.error("Failed to ingest templates",s.reason),(0,I.D0)((0,o.t)("slides.present_summary.visual_bells.error_unknown"));return}if(C=s.value,"rejected"===i.status){l.k.error("Failed to fetch canvas data from file",i.reason),(0,I.D0)((0,o.t)("slides.present_summary.visual_bells.error_unknown"));return}_&&_(),await M({canvasData:i.value,processTitle:e=>{e&&f(d.Nw({file:{key:x},name:`${e} ${(0,o.t)("slides.templates.presentation")}`}))},showPlaceholderOverlay:m,abortController:e})}catch(t){if(e.signal.aborted){(0,I.Y)();return}(0,I.D0)((0,o.t)("slides.present_summary.visual_bells.error_unknown")),l.k.error("Failed to generate slides",t)}finally{h(),x!==r.zl.get(c.ze)||p(),a.Zdr?.finishDeckGeneration(),D(C)}}},94909:(e,t,n)=>{n.d(t,{$K:()=>x,D0:()=>b,D1:()=>j,Sk:()=>C,Y:()=>v,tO:()=>_});var i=n(104076),s=n(998432),a=n(772197),r=n(146283),l=n(725837),o=n(192075),d=n(58212),c=n(638641),u=n(141330),p=n(290407),m=n(141325);let h="slides-ai-generation-started",f="slides-ai-generation-error",g="slides-ai-generation-completed";function x(){l.D.dispatch(d.F.dequeue({matchType:h})),l.D.dispatch(d.F.dequeue({matchType:f})),l.D.dispatch(d.F.dequeue({matchType:g}))}function _(){l.D.dispatch(d.F.enqueue({message:(0,o.t)("slides.present_summary.visual_bells.loading"),type:h,icon:c.zX.SPINNER,button:{text:(0,o.t)("slides.present_summary.visual_bells.stop"),action:()=>{l.D.dispatch(d.F.dequeue({matchType:h})),(0,p.cT)(u.JT.BOARD_TO_DECK)}},timeoutOverride:3e5}))}function y(e,t,n){l.D.dispatch(d.F.dequeue({matchType:h})),l.D.dispatch(d.F.enqueue({message:e,type:n,icon:t,timeoutOverride:3e3}))}function v(){y((0,o.t)("slides.present_summary.visual_bells.canceled_indirectly"),c.zX.EXCLAMATION,"slides-ai-generation-canceled")}function b(e){y(e,c.zX.EXCLAMATION,f)}function C(){l.D.dispatch(d.F.dequeue({matchType:h})),l.D.dispatch(d.F.enqueue({type:g,icon:c.zX.GREEN_CHECK,content:(0,i.jsx)(m.ZO,{}),onDismiss:()=>{l.D.dispatch(d.F.dequeue({matchType:g}))},timeoutOverride:6e4}))}function j(e){r.k.error(e);let t={content_length_limit_exceeded:(0,o.t)("slides.present_summary.visual_bells.error_content_limit_exceeded"),rate_limit_exceeded:(0,o.t)("slides.present_summary.visual_bells.error_rate_limited"),service_issue:(0,o.t)("slides.present_summary.visual_bells.error_vendor"),offline:(0,o.t)("slides.present_summary.visual_bells.error_offline"),unsafe_or_harmful_content:(0,o.t)("slides.present_summary.visual_bells.content_moderation"),unauthorized:(0,o.t)("slides.present_summary.visual_bells.error_unknown"),generic:(0,o.t)("slides.present_summary.visual_bells.error_unknown"),ai_opt_out_error:(0,o.t)("slides.present_summary.visual_bells.error_opt_out"),meter_exceeded:(0,o.t)("slides.present_summary.visual_bells.error_meter_exceeded"),create_slides_out_of_date:(0,o.t)("slides.present_summary.visual_bells.error_out_of_date"),not_implemented:(0,o.t)("ai.error.not_implemented")},n="generic";if(e instanceof a.CortexErrorV2)a.ClientContentLengthLimitExceededError.isInstance(e)||a.ProviderContentLengthLimitExceededError.isInstance(e)?n="content_length_limit_exceeded":a.ProviderRateLimitExceededError.isInstance(e)||a.ProviderOverloadedError.isInstance(e)||a.CortexRateLimitExceededError.isInstance(e)?n="rate_limit_exceeded":a.ProviderServiceIssueError.isInstance(e)||a.ProviderServiceBusyError.isInstance(e)?n="service_issue":a.OutOfDateFeatureVersionError.isInstance(e)?"create_slides"===e.featureName&&(n="create_slides_out_of_date"):a.MeterExceededError.isInstance(e)?n="meter_exceeded":a.OfflineError.isInstance(e)?n="offline":a.UnsafeOrHarmfulPromptError.isInstance(e)||a.ProviderUnsafeOrHarmfulContentError.isInstance(e)?n="unsafe_or_harmful_content":a.UnauthorizedError.isInstance(e)?n="unauthorized":a.NotImplementedError.isInstance(e)?n="not_implemented":e?.statusCode===404?n="service_issue":e?.statusCode===429||e?.statusCode===529?n="rate_limit_exceeded":e?.statusCode===403&&(n="ai_opt_out_error");else if(e instanceof s.G1)switch(e.type){case"content_length_limit_exceeded":case"rate_limit_exceeded":case"service_issue":case"create_slides_out_of_date":case"meter_exceeded":case"offline":case"unsafe_or_harmful_content":case"unauthorized":n=e.type;break;default:switch(e.data?.status){case 404:n="service_issue";break;case 429:n="rate_limit_exceeded";break;case 403:n="ai_opt_out_error"}}b(t[n]??(0,o.t)("slides.present_summary.visual_bells.error_unknown"))}},614806:(e,t,n)=>{n.d(t,{G:()=>y,V:()=>v});var i=n(104076),s=n(716976),a=n(684742),r=n(390579),l=n(180),o=n(170627),d=n(980852),c=n(795033),u=n(674524);n(120440);var p=n(236631),m=n(192075),h=n(349311),f=n(38473),g=n(746818),x=n(996253),_=n(76635);let y="carousel-add-slide-button",v=s.forwardRef(function({recordingKey:e,...t},n){let{toggleTemplatePicker:s,closeTemplatePicker:v}=(0,_.uu)(),b=(0,c.md)(x.Ei),C=o.nc.user("ssv-carousel",()=>{v();let e=(0,d.getActiveTSSceneGraph)();(0,f.oY)(e,"carousel_add_slide_button")});return(0,i.jsxs)("div",{"data-element-target":y,className:"xh8yej3 xxk0z11 x78zum5 xl56j7k",children:[(0,i.jsxs)(a.E,{ref:n,...{0:{className:"x1icplyp x1yjdb4r x78zum5 xl56j7k x6s0dn4 x1iyjqo2 x9f619 x5yr21d x71s49j xmkeg23 x1y0btm7 x7z60cl xgfja2r x11pwa6s xd3ty66 x1blczqt x1a2w583 xjppbhk x1bqy6mi"},1:{className:"x1icplyp x78zum5 xl56j7k x6s0dn4 x1iyjqo2 x9f619 x5yr21d x71s49j xmkeg23 x1y0btm7 x7z60cl xgfja2r x11pwa6s xd3ty66 x1blczqt x1a2w583 xjppbhk x1bqy6mi x30nh5c"}}[!!b<<0],onClick:s,htmlAttributes:{"data-fullscreen-intercept":!0,"data-tooltip":(0,m.t)("slides.carousel.add-slide-from-template"),"data-tooltip-type":h.Ib.TEXT,"data-onboarding-key":g.MB},"aria-label":(0,m.t)("slides.carousel.add-slide-from-template"),recordingKey:(0,u.Pt)(e,"newSlideButton"),...t,children:[(0,i.jsx)("p",{className:p.s.noWrap.$,children:(0,m.t)("slides.carousel.new_slide")}),(0,i.jsx)(r.O,{})]}),(0,i.jsx)(a.E,{className:"x1yjdb4r x15cczae x1icplyp xmkeg23 x1y0btm7 x7z60cl x78zum5 x6s0dn4 x1ia1hqs xgs1500 x828b17 xfrllxf",onClick:C,recordingKey:(0,u.Pt)(e,"addSlideButton"),htmlAttributes:{"data-fullscreen-intercept":!0,"data-tooltip":(0,m.t)("slides.carousel.add-blank-slide"),"data-tooltip-type":h.Ib.TEXT,"data-tooltip-shortcut-key":"create-slide","data-testid":"addSlideButton"},"aria-label":(0,m.t)("slides.carousel.add-blank-slide"),children:(0,i.jsx)(l.$,{})})]})})},750488:(e,t,n)=>{n.d(t,{_:()=>G,i:()=>U});var i=n(104076),s=n(716976),a=n(237420),r=n(266808),l=n(795033),o=n(725837),d=n(653899),c=n(755444),u=n(17140),p=n(555013),m=n(192075),h=n(147046),f=n(443192),g=n(244205),x=n(422872),_=n(477536),y=n(381059),v=n(724320),b=n(354114),C=n(104836),j=n(143277),k=n(563554),w=n(856520),E=n(381888),T=n(116450),S=n(61102),I=n(654200),N=n(684745),A=n(441030),L=n(382827),M=n(318145),O=n(996253),R=n(438517),P=n(944350),D=n(382137),F=n(816565);function z(){return(0,i.jsx)(F.oW,{src:(0,c.ck)("b5ff672e289f44685a5e04d3de9f17f154fb2455"),alt:"Figma Slides carousel",width:332})}var B=n(746818);function G(){let e=(0,l.Xr)(O.VZ),t=(0,L.jY)(),n=(0,N.Bk)(),{show:a,isShowing:r,complete:o}=(0,x.e)({overlay:A.Yqi,priority:j.N.HIGH_PRIORITY_MODAL}),c=(0,s.useMemo)(()=>n?[U,V,H,K,W,q]:[U,V,H,K,q],[n]),{currentStep:u,next:p}=(0,_.A)({numSteps:c.length,onComplete:o}),m=s.useMemo(()=>{let a=()=>{p(),e(!0)},l=c.map((e,i)=>s.createElement(e,{onClickPrimaryCta:t||0!==i?p:a,onClickSecondaryCta:o,isShowing:r,totalSteps:n?5:4,isOnboarding:!0}));return t||l.splice(1,0,(0,i.jsx)(M.g,{})),l},[c,t,p,e,o,r,n]);return((0,d.h)(()=>{a()}),r&&m)?(0,i.jsx)(w.U,{currentStep:u,isShowing:r,children:m}):null}function U({onClickPrimaryCta:e,onClickSecondaryCta:t,isShowing:n,isOnboarding:r}){let d;let x=(0,l.Xr)(O.VZ),_=(0,l.md)(y.d2),b=function(){let{getPlanAndPlanUser:e}=(0,D.wH)(),{plan:t,planUser:n}=e(P.G_.SLIDES);return t?.tier!==P.Ag.STARTER&&t?.tier!==P.Ag.STUDENT&&(n?.seatTypeLicenseTypes?.includes(P.G_.SLIDES)??!1)}(),j=(0,a.wA)(),w=_.data===k.qo.ORG,E=l.zl.get(v.Z),S=l.zl.get(C.Me),I=o.D.getState().openFile,N=!I||!I.canEdit,A=(0,c.sL)(),L=(0,u.lt)({currentOrg:E,currentTeam:S,isViewer:N,file:I}),M="/sub-processors/",R="/ssa/",F="ja"===(0,c.mm)()[0]?(0,m.tx)("slides.onboarding.welcome.title.jp"):(0,m.tx)("slides.onboarding.welcome.title");d=b?(0,m.tx)("slides.onboarding.ga.billable_seat.welcome.description"):(0,m.tx)("slides.onboarding.ga.welcome.description");let B=w?L?(0,m.tx)("slides.onboarding.welcome.org.footer.no_ai",{services_agreement:(0,i.jsx)(p.CY,{href:R,target:"_blank",trusted:!0,children:(0,m.tx)("slides.onboarding.services_agreement")})}):(0,m.tx)("slides.onboarding.welcome.org.footer.ai",{subprocessors:(0,i.jsx)(p.CY,{href:M,target:"_blank",trusted:!0,children:(0,m.tx)("slides.onboarding.subprocessors")}),services_agreement:(0,i.jsx)(p.CY,{href:R,target:"_blank",trusted:!0,children:(0,m.tx)("slides.onboarding.services_agreement")})}):L?void 0:(0,m.tx)("slides.onboarding.welcome.starter.footer",{subprocessors:(0,i.jsx)(p.CY,{href:M,target:"_blank",trusted:!0,children:(0,m.tx)("slides.onboarding.subprocessors")})});(0,s.useEffect)(()=>{r&&!A&&j?.(f.b({seen_slides_onboarding:!1}))});let G=()=>{e(),j?.(f.b({seen_slides_onboarding:!0,...!A&&{agreed_to_slides_ai_terms:!0}})),r&&x(!0)},U=()=>{if(A){G();return}j?.(h.sf({view:"recentsAndSharing"})),t()};return N?null:(0,i.jsx)(T._l,{description:(0,i.jsx)("span",{style:{whiteSpace:"pre-line"},children:d}),disclaimerFooter:A?void 0:B,isShowing:n,media:(0,i.jsx)(z,{}),onClose:U,preventUserClose:!A,primaryCta:{type:"button",label:(0,m.tx)("slides.onboarding.welcome.primary_cta"),onClick:G,ctaTrackingDescriptor:g.c.NEXT},secondaryCta:A?void 0:{type:"button",label:(0,m.tx)("slides.onboarding.welcome.secondary_cta"),onClick:U,ctaTrackingDescriptor:g.c.CLOSE},title:F,trackingContextName:"Slides Onboarding > Welcome"})}function V({onClickPrimaryCta:e,onClickSecondaryCta:t,isShowing:n,totalSteps:s}){return(0,i.jsx)(S.rq,{arrowPosition:I.F_.BOTTOM,description:(0,m.tx)("slides.onboarding.new_slide.description"),isShowing:n,media:(0,i.jsx)(E.y,{src:(0,c.ck)("2811dcf7f07f10fbc8543106336765058bc83266"),alt:"slides template picker",aspectRatio:240/135}),onClose:t,primaryCta:{type:"button",label:(0,m.tx)("slides.onboarding.callout.next"),onClick:e,ctaTrackingDescriptor:g.c.NEXT},secondaryCta:{type:"button",label:(0,m.tx)("slides.onboarding.callout.close"),onClick:t,ctaTrackingDescriptor:g.c.CLOSE},shouldDisableAnimation:!0,stepCounter:{stepNum:1,totalNumSteps:s},targetKey:B.MB,title:(0,m.tx)("slides.onboarding.new_slide.title"),trackingContextName:"Slides Onboarding > New Slide"})}function H({onClickPrimaryCta:e,onClickSecondaryCta:t,isShowing:n,totalSteps:s}){return(0,i.jsx)(S.rq,{description:(0,m.tx)("slides.onboarding.views.description"),isShowing:n,media:(0,i.jsx)(E.y,{src:(0,c.ck)("8ad8b13cac28f9fb6eaaed9cad7c621684fadd6b"),alt:"Grid view in Slides",aspectRatio:240/135}),onClose:t,primaryCta:{type:"button",label:(0,m.tx)("slides.onboarding.callout.next"),onClick:()=>{b.Y5.triggerAction("enter-focus-view"),e()},ctaTrackingDescriptor:g.c.NEXT},secondaryCta:{type:"button",label:(0,m.tx)("slides.onboarding.callout.close"),onClick:t,ctaTrackingDescriptor:g.c.CLOSE},shouldDisableAnimation:!0,stepCounter:{stepNum:2,totalNumSteps:s},targetKey:B.b_,title:(0,m.tx)("slides.onboarding.views.title"),trackingContextName:"Slides Onboarding > Views"})}function K({onClickPrimaryCta:e,onClickSecondaryCta:t,isShowing:n,totalSteps:s}){let a=(0,N.Bk)(),l=(0,R.E)();return(0,i.jsx)(S.rq,{description:(0,m.tx)("slides.onboarding.nondesigner.tools.description"),isShowing:n,media:(0,i.jsx)(E.y,{src:(0,c.ck)("aca6af2d36ffc1a4f65a12247f598a7598a530b7"),alt:"Apps in Slides",aspectRatio:240/135}),onClose:t,primaryCta:{type:"button",label:(0,m.tx)("slides.onboarding.callout.next"),onClick:()=>{e(),a&&l(r.nQ7.DESIGN)},ctaTrackingDescriptor:g.c.NEXT},secondaryCta:{type:"button",label:(0,m.tx)("slides.onboarding.callout.close"),onClick:()=>{t()},ctaTrackingDescriptor:g.c.CLOSE},shouldCenterArrow:I.EL.BEST_EFFORT,shouldDisableAnimation:!0,shouldHideArrow:!0,stepCounter:{stepNum:3,totalNumSteps:s},targetKey:B.hx,title:(0,m.tx)("slides.onboarding.nondesigner.tools.title"),trackingContextName:"Slides Onboarding > Tools"})}function W({onClickPrimaryCta:e,onClickSecondaryCta:t,isShowing:n,totalSteps:s}){let a=(0,R.E)();return(0,i.jsx)(S.rq,{description:(0,m.tx)("slides.onboarding.designer.tools.description"),isShowing:n,media:(0,i.jsx)(E.y,{src:(0,c.ck)("5064800f3f60febf8b2ad2ad8ba4efdd6167eeaa"),alt:"Design tool toggle",aspectRatio:240/135}),onClose:t,primaryCta:{type:"button",label:(0,m.tx)("slides.onboarding.callout.next"),onClick:()=>{e(),a(r.nQ7.DESIGN)},ctaTrackingDescriptor:g.c.NEXT},secondaryCta:{type:"button",label:(0,m.tx)("slides.onboarding.callout.close"),onClick:()=>{t()},ctaTrackingDescriptor:g.c.CLOSE},shouldCenterArrow:I.EL.BEST_EFFORT,shouldDisableAnimation:!0,shouldHideArrow:!0,stepCounter:{stepNum:4,totalNumSteps:s},targetKey:B.uy,title:(0,m.tx)("slides.onboarding.designer.tools.title"),trackingContextName:"Slides Onboarding > Design Mode"})}function q({onClickSecondaryCta:e,isShowing:t,totalSteps:n}){return(0,i.jsx)(S.rq,{description:(0,m.tx)("slides.onboarding.share.description"),isShowing:t,media:(0,i.jsx)(E.y,{src:(0,c.ck)("a3ed241305c3e13d9ec5cab6e9a88db7572695c5"),alt:"presenter mode in Slides",aspectRatio:240/135}),onClose:e,onTargetLost:e,primaryCta:{type:"button",label:(0,m.tx)("slides.onboarding.callout.done"),onClick:e,ctaTrackingDescriptor:g.c.DONE},shouldDisableAnimation:!0,stepCounter:{stepNum:n,totalNumSteps:n},targetKey:B.J5,title:(0,m.tx)("slides.onboarding.share.title"),trackingContextName:"Slides Onboarding > Present"})}},166375:(e,t,n)=>{n.d(t,{AC:()=>h,D0:()=>x,Mp:()=>_,Z4:()=>g,sQ:()=>f,tx:()=>p,xl:()=>m});var i=n(716976),s=n(237420),a=n(266808),r=n(883765),l=n(553065),o=n(211862),d=n(76365),c=n(237400);function u(){let e=(0,o.tS)()??"",t=(0,c.Jb)()??"",n=(0,s.d4)(d.AF);return{fileKey:e,slideId:t,nodeId:n?.guid}}function p(){let e=u();return i.useCallback((t,n)=>{r.az.trackDefinedEvent("slides.modify_object_animation.type",{...e,oldValue:t,newValue:n})},[e])}function m(){let e=u();return i.useCallback((t,n)=>{r.az.trackDefinedEvent("slides.modify_object_animation.duration",{...e,oldValue:t,newValue:n})},[e])}function h(){let e=u();return i.useCallback((t,n)=>{let i=e=>void 0===e?void 0:(0,l.gl)(e)?"MIXED":e===a.luZ.TRIGGER?"TRIGGER":"AFTER_PREVIOUS";r.az.trackDefinedEvent("slides.modify_object_animation.start_condition",{...e,oldValue:i(t),newValue:i(n)})},[e])}function f(){let e=u();return i.useCallback((t,n)=>{r.az.trackDefinedEvent("slides.modify_object_animation.phase",{...e,oldValue:t,newValue:n})},[e])}function g(){let e=u();return i.useCallback(()=>{r.az.trackDefinedEvent("slides.reorder_object_animation",e)},[e])}function x(){let e=u();return i.useCallback(()=>{r.az.trackDefinedEvent("slides.delete_object_animation",e)},[e])}function _(){let e=u();return i.useCallback(t=>{r.az.trackDefinedEvent("slides.preview_object_animation",{...e,numAnimations:t})},[e])}},566122:(e,t,n)=>{n.d(t,{eB:()=>u,hT:()=>c,kP:()=>i,uc:()=>p});var i,s=n(158402),a=n(382629),r=n(638004),l=n(266808),o=n(264993),d=n(550209),c=(e=>(e.SECTION_HEADER="section header",e.ANIMATION="animation",e))(c||{});function u(e){return"section header"===e.type}function p(e){return"animation"===e.type}(e=>{let t="CUSTOM_CUBIC",n=[.17,0,.2,1];function i(e,t){let n=t??(0,o.sH)(l.glU?.generateUniqueID());if(!n)throw Error("Failed to generate unique ID for object animation interaction");return{id:n,event:{interactionType:"ON_CLICK"},actions:e}}e.fromPrototypeInteractions=function(e){let i=[],s=0;for(let r of e){if(!r.id)continue;let e=r.id,o=(r.actions||[]).map(e=>"OBJECT_ANIMATION"===e.connectionType&&e.transitionNodeID&&void 0!==e.animationType&&"NONE"!==e.animationType?{connectionType:e.connectionType,transitionNodeID:e.transitionNodeID,transitionDuration:e.transitionDuration??.3,animationType:e.animationType,animationPhase:e.animationPhase??"IN",easingType:e.easingType??t,easingFunction:e.easingFunction??n}:null).filter(a.Vq);0!==o.length&&(o.forEach((t,n)=>{0===n?(i.push({type:"section header",interactionIndex:s}),i.push({type:"animation",action:t,startCondition:l.luZ.TRIGGER,interactionId:e,interactionIndex:s})):i.push({type:"animation",action:t,startCondition:l.luZ.AFTER_PREVIOUS,interactionId:e,interactionIndex:s})}),s++)}return i.length>0&&i.push({type:"section header",interactionIndex:s}),i},e.toPrototypeInteractions=function(e){let t=[],n=null;for(let c of function(e){let t=new Set,n=new Set;return e.map(e=>{if(u(e))return null;if("OBJECT_ANIMATION"!==e.action.connectionType||!e.action.transitionNodeID)return(0,d.$D)(r.e.SLIDES,Error("Invalid object animation action"),{extra:{action:e.action}}),null;let n=(0,s.Gu)(e.action.transitionNodeID);return n?t.has(n)?((0,d.$D)(r.e.SLIDES,Error("Duplicate object animation transition node ID found:"),{extra:{action:e.action}}),null):(t.add(n),e):null}).filter(a.Vq).map((e,t)=>{if(0===t&&e.startCondition!==l.luZ.TRIGGER){let t=(0,o.sH)(l.glU?.generateUniqueID());if(!t)throw Error("Failed to generate unique ID for object animation interaction");return{...e,startCondition:l.luZ.TRIGGER,interactionId:t,interactionIndex:0}}if(e.startCondition!==l.luZ.TRIGGER)return e;{let t=(0,s.Gu)(e.interactionId);if(!(!t||n.has(t)))return n.add(t),e;{let t=(0,o.sH)(l.glU?.generateUniqueID());if(!t)throw Error("Failed to generate unique ID for object animation interaction");return{...e,interactionId:t}}}})}(e))if(c.startCondition===l.luZ.TRIGGER)n=i([c.action],c.interactionId),t.push(n);else{if(!n)throw Error("Expected current interaction to be non-null");n.actions?.push(c.action)}return t},e.createBaseInteraction=i,e.createTestAction=function(e){return{connectionType:"OBJECT_ANIMATION",transitionNodeID:(0,o.sH)(e),transitionDuration:.3,animationType:"FADE",animationPhase:"IN",easingType:t,easingFunction:n}}})(i||(i={}))},133662:(e,t,n)=>{n.d(t,{E:()=>x,l:()=>_});var i=n(104076),s=n(237420),a=n(158402),r=n(307829),l=n(266808),o=n(170627),d=n(287211),c=n(278491),u=n(330378),p=n(354114),m=n(989034),h=n(166375),f=n(566122),g=n(897692);function x({boundingRect:e,selectedView:t,targetObjectAnimation:n}){let a=(0,s.wA)(),{appModel:r,sceneGraph:l,sceneGraphSelection:o}=(0,d.R)(e=>({appModel:e.mirror.appModel,sceneGraph:e.mirror.sceneGraph,sceneGraphSelection:e.mirror.sceneGraphSelection})),{slideId:u,targetNodeId:p}=n,h=y({sceneGraph:l,slideId:u,targetNodeId:p}),f={left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height,width:e.width,height:e.height};return(0,i.jsx)("div",{className:c.Dm,children:(0,i.jsx)(m.Q,{appModel:r,dispatch:a,lean:"left",menuItems:h,recordingKey:"slidesAnimationContextMenu",removeDisabledItems:!0,sceneGraph:l,sceneGraphSelection:o,selectedView:t,showPoint:!1,targetRect:f})})}function _({targetObjectAnimation:e,manager:t}){let{sceneGraph:n}=(0,d.R)(e=>({sceneGraph:e.mirror.sceneGraph})),{slideId:s,targetNodeId:a}=e,l=y({sceneGraph:n,slideId:s,targetNodeId:a});return(0,i.jsx)(r.bL,{manager:t,children:(0,i.jsx)(r.mc,{children:l.map(e=>(0,i.jsx)(r.q7,{onClick:()=>{e.callback&&e.callback()},children:(0,u.A)(e.name)},e.name))})})}function y({sceneGraph:e,slideId:t,targetNodeId:n}){let i=[],s=e.get(t),r=s?.objectAnimations??[],d=f.kP.fromPrototypeInteractions(r),c=(0,h.Z4)(),u=(0,h.D0)(),m=d.findIndex(e=>(0,f.uc)(e)&&(0,a.Gu)(e.action.transitionNodeID)===n);if(m<0)return i;let x=d[m];if(!s||!x)return i;let _=d[m-1],y=d[m+1];if(_&&(0,f.eB)(_)){let e=d[m-2];e&&(0,f.uc)(e)&&i.push({name:"slides-merge-object-animation-with-above",callback:()=>{o.l7.user("slides-merge-object-animation-with-above",()=>{let t=(0,g.Eo)(x,e,_,d);t&&(c(),s.objectAnimations=t)})}})}if(x.startCondition===l.luZ.TRIGGER&&y&&(0,f.eB)(y)){let e=d[m+2];e&&(0,f.uc)(e)&&i.push({name:"slides-merge-object-animation-with-below",callback:()=>{o.l7.user("slides-merge-object-animation-with-below",()=>{let t=(0,g.Eo)(x,y,e,d);t&&(c(),s.objectAnimations=t)})}})}return x.startCondition===l.luZ.AFTER_PREVIOUS&&(!y||(0,f.eB)(y))&&i.push({name:"slides-separate-object-animation",callback:()=>{o.l7.user("slides-separate-object-animation",()=>{let e=(0,g.zQ)(x,{type:f.hT.SECTION_HEADER,interactionIndex:x.interactionIndex+1},d);e&&(c(),s.objectAnimations=e)})}}),i.push({name:"slides-delete-object-animation",callback:()=>{o.l7.user("slides-delete-object-animation",()=>{u(),s.removeObjectAnimation(n),p.Y5.commit()})},recordingKey:"delete"}),i}},897692:(e,t,n)=>{n.d(t,{Eo:()=>c,zQ:()=>d});var i=n(667693),s=n(266808),a=n(264993),r=n(246144),l=n(566122);function o(e,t){if(!e&&!t)return!0;if(e&&t){if((0,l.uc)(e)&&(0,l.uc)(t))return(0,i.c2)(e.action.transitionNodeID,t.action.transitionNodeID);if((0,l.eB)(e)&&(0,l.eB)(t))return e.interactionIndex===t.interactionIndex}return!1}function d(e,t,n){let i=[];for(let r of n)o(r,e)||(o(r,t)?(i.push({...e,startCondition:s.luZ.TRIGGER,interactionId:a.Hr}),i.push(t)):i.push(r));let r=i.map((e,t,n)=>{let i=t-1>=0&&n[t-1]&&(0,l.eB)(n[t-1]);return(0,l.uc)(e)&&i?{...e,startCondition:s.luZ.TRIGGER}:e});return l.kP.toPrototypeInteractions(r)}function c(e,t,n,i){if(o(e,t)||o(e,n))return l.kP.toPrototypeInteractions(i);if(!function(e,t,n){let i=n.findIndex(t=>o(t,e)),s=n.findIndex(e=>o(e,t));return void 0===e&&0===s||void 0===t&&i===n.length-1||-1!==i&&-1!==s&&i+1===s}(t,n,i))return(0,r.x1)("Slides reorder object animations","prevItem and nextItem are not in the correct order",{prevItem:t,nextItem:n,oldItems:i},{reportAsSentryError:!0}),null;for(let e=0;e<i.length;e++)if(o(i[e],t)){if(!o(i[e+1],n))return null;break}let a=[];for(let r of i)o(r,e)||(t&&o(r,t)?(a.push(t),a.push({...e,startCondition:(0,l.uc)(t)?s.luZ.AFTER_PREVIOUS:s.luZ.TRIGGER})):n&&o(r,n)&&(0,l.uc)(n)?a.push({...n,startCondition:s.luZ.AFTER_PREVIOUS}):a.push(r));return l.kP.toPrototypeInteractions(a)}},907884:(e,t,n)=>{n.d(t,{$3:()=>E,Ay:()=>T,dk:()=>k,gv:()=>S,k0:()=>w});var i=n(716976),s=n(998432),a=n(772197),r=n(170627),l=n(264993),o=n(980852),d=n(795033),c=n(725837),u=n(328341),p=n(192075),m=n(58212),h=n(638641),f=n(20267),g=n(141330),x=n(290407),_=n(20226),y=n(20415);class v extends Error{constructor(){super(),this.reportToSentry=!1,this.name="SwitchedSlideError",this.type="switched_slide"}}class b extends Error{constructor(){super(),this.reportToSentry=!1,this.name="SwitchedToGridViewError",this.type="switched_to_grid_view"}}class C extends Error{constructor(){super(),this.reportToSentry=!1,this.name="NotEnoughContentError",this.type="not_enough_content"}}class j extends Error{constructor(){super(),this.reportToSentry=!1,this.name="UneditedSlideError",this.type="unedited_slide"}}let k=[v,C,j,s.G1,a.CortexErrorV2];function w(e,t){let n=function(e){if(e instanceof v)return(0,p.t)("slides.speaker_notes.error.switched-slides");if(e instanceof b)return(0,p.t)("slides.speaker_notes.error.switched-to-grid-view");if(e instanceof C)return(0,p.t)("slides.speaker_notes.error.add-more-content");if(e instanceof j)return(0,p.t)("slides.speaker_notes.error.unmodified_slide");if(!(e instanceof s.G1||e instanceof a.CortexErrorV2))return(0,p.t)("slides.speaker_notes.error.default");if(e instanceof a.PayloadTooLargeError)return(0,p.t)("slides.speaker_notes.error.payload_too_large");let t={offline:(0,p.t)("slides.speaker_notes.error.connection"),rate_limit_exceeded:(0,p.t)("slides.speaker_notes.error.rate_limit"),text_tool_no_text:(0,p.t)("slides.speaker_notes.error.add-more-content"),content_length_limit_exceeded:(0,p.t)("slides.speaker_notes.error.token_limit"),payload_too_large:(0,p.t)("slides.speaker_notes.error.payload_too_large"),unsafe_or_harmful_content:(0,p.t)("slides.speaker_notes.error.inappropriate_input"),service_issue:(0,p.t)("slides.speaker_notes.error.openai_down"),ai_opt_out_error:(0,p.t)("slides.speaker_notes.error.opt_out"),unauthorized:(0,p.t)("slides.speaker_notes.error.default"),generic:(0,p.t)("slides.speaker_notes.error.default"),not_implemented:(0,p.t)("ai.error.not_implemented")};if((0,f._0)(e)){let t=(0,f.PI)(e);return t?(0,p.t)("slides.speaker_notes.error.meter_limit",{resetDate:t}):(0,p.t)("slides.speaker_notes.error.rate_limit")}return t[function(e){if(e instanceof a.CortexErrorV2){if(a.ClientContentLengthLimitExceededError.isInstance(e)||a.ProviderContentLengthLimitExceededError.isInstance(e))return"content_length_limit_exceeded";if(a.MeterExceededError.isInstance(e))return"meter_exceeded";if(a.ProviderRateLimitExceededError.isInstance(e)||a.ProviderOverloadedError.isInstance(e)||a.CortexRateLimitExceededError.isInstance(e))return"rate_limit_exceeded";if(a.ClientNoTextSelectedError.isInstance(e))return"text_tool_no_text";else if(a.ProviderServiceIssueError.isInstance(e)||a.ProviderServiceBusyError.isInstance(e))return"service_issue";else if(a.OfflineError.isInstance(e))return"offline";else if(a.UnsafeOrHarmfulPromptError.isInstance(e)||a.ProviderUnsafeOrHarmfulContentError.isInstance(e))return"unsafe_or_harmful_content";else if(a.UnauthorizedError.isInstance(e))return"unauthorized";else if(a.NotImplementedError.isInstance(e))return"not_implemented";else if(e?.statusCode===404)return"service_issue";else if(e?.statusCode===429||e?.statusCode===529)return"rate_limit_exceeded";else if(e?.statusCode===403)return"ai_opt_out_error"}else if(e instanceof s.G1)switch(e.type){case"content_length_limit_exceeded":case"payload_too_large":case"meter_exceeded":case"rate_limit_exceeded":case"text_tool_no_text":case"service_issue":case"offline":case"unsafe_or_harmful_content":case"ai_opt_out_error":case"unauthorized":return e.type;case"generic":switch(e.data?.status){case 404:return"service_issue";case 429:return"rate_limit_exceeded";case 403:return"ai_opt_out_error"}}return"generic"}(e)]||(0,p.t)("slides.speaker_notes.error.default")}(e),i=function(e){switch(e.type){case"meter_exceeded":case"content_length_limit_exceeded":case"payload_too_large":case"service_issue":case"ai_opt_out_error":case"unsafe_or_harmful_content":case"switched_slide":case"switched_to_grid_view":case"not_enough_content":case"unedited_slide":return!1;default:return!0}}(e);c.D.dispatch(m.F.enqueue({icon:h.zX.CLOSE_FILLED,message:n,type:"speaker-notes-visual-bell",button:i&&t?{text:(0,p.t)("slides.speaker_notes.draft_again"),action:()=>t()}:void 0,onDismiss:()=>{}}))}function E(e){let t=(0,o.getActiveTSSceneGraph)().get(e);if(t&&t.editInfo&&t?.editInfo?.createdAt===t?.editInfo?.lastEditedAt)throw new j}function T(e){if(0===e.length)throw new C}function S(e,t){let n=(0,u.ZC)(e),s=n!==e&&(0,l.fn)((0,l.sH)(e))&&(0,l.fn)((0,l.sH)(n)),a=(0,u.ZC)(t)!==t&&!t;(0,i.useEffect)(()=>{(0,x.pP)(g.JT.SLIDES_GENERATE_SPEAKER_NOTES).state===x.qy.RUNNING&&n&&(s?I(new v,n):a&&I(new b,n))},[a,s,n])}function I(e,t){(0,x.cT)(g.JT.SLIDES_GENERATE_SPEAKER_NOTES),w(e);let n=d.zl.get(_.TD);if(t&&n){let e=JSON.stringify(n.toJSON());r.l7.ai("generate-slide-speaker-notes",()=>{(0,y.lq)(t,e)})}}},572253:(e,t,n)=>{n.d(t,{O:()=>w});var i=n(638004),s=n(266808),a=n(980852),r=n(812714),l=n(795033),o=n(725837),d=n(550209),c=n(192075),u=n(58212),p=n(138421),m=n(178623),h=n(20267),f=n(354114),g=n(141330),x=n(290407),_=n(714136),y=n(20226),v=n(625635),b=n(907884),C=n(125715),j=n(20415);let k=e=>{let t=(0,p.mz)(),n=(0,a.getActiveTSSceneGraph)().get(e);if(!n)return t;let i=n.absoluteTransform.m12,s=n.absoluteBoundingBox.h,r=.1*s,l=i+r,o=i+s-r;return t.filter(e=>(0,j.O)(e,24,l,o))},w=async({params:e,abortController:t,clientLifecycleId:n})=>{let{source:a}=e,p=o.D.getState().openFile?.key,E=l.zl.get(y.ed),T=l.zl.get(y.hD);if(!T){(0,d.$D)(i.e.AI_PRODUCTIVITY,Error("Editor is null when trying to generate speaker notes"));return}let S=T.getEditorState();l.zl.set(y.TD,S);let I=(s.Ez5?.editorPreferences().speakerNotesHeight.getCopy()??0)===0;(0,C.x)({eventName:"started",fileKey:p,slideId:E,source:a});let N=!1;try{let e;(0,b.$3)(E),s.Ez5?.singleSlideView()&&I&&(0,j.ud)(s.CNR?.initialSpeakerNotesHeightInViewport()??0),T.setEditorState(T.getEditorState());let i={...(0,h.Ay)(),clientLifecycleId:n},a=k(E);(0,b.Ay)(a),(0,j.gH)();let l=a.map(e=>({text:e.characters,x:e.absoluteTransform.m02,y:e.absoluteTransform.m12}));(0,r.kc)().figjam_ai_piper_speaker_notes_image_filtering?(0,v.yU)(E)&&(e=await (0,j.Yu)(E),N=!0):(e=await (0,j.Yu)(E),N=!0);let d={texts:l,image:e},g=await m.Ay.slides.speakerNotes(d,i),x=new m.c6(g);if(t.signal.aborted){(0,C.x)({eventName:"stopped",fileKey:p,slideId:E,imageIncluded:N});return}let _="";for await(let e of x){if(t.signal.aborted){(0,C.x)({eventName:"stopped",fileKey:p,slideId:E,imageIncluded:N});return}_+=e.delta,(_=_.replace(/(.) -/g,"$1\n -")).length>0&&(0,j.hp)(_,"history-merge")}f.Y5.commit(),o.D.dispatch(u.F.enqueue({message:(0,c.t)("slides.speaker_notes.draft_generated"),role:"status",type:"speaker-notes-generated",timeoutOverride:2e3})),(0,C.x)({eventName:"finished",fileKey:p,slideId:E,imageIncluded:N});return}catch(e){T.setEditorState(S),(0,b.k0)(e,()=>{(function(){let e=C.f.TRY_AGAIN;l.zl.set(_.zF,e),(0,x.B3)(g.JT.SLIDES_GENERATE_SPEAKER_NOTES),(0,x.Ag)(g.JT.SLIDES_GENERATE_SPEAKER_NOTES,w,{source:e})})()}),(0,C.x)({eventName:"failed",fileKey:p,slideId:E,imageIncluded:N,errorType:e.type||e.marker}),(0,x.cT)(g.JT.SLIDES_GENERATE_SPEAKER_NOTES),b.dk.some(t=>e instanceof t)||(0,d.$D)(i.e.AI_PRODUCTIVITY,Error(`Unexpected error encountered while generating speaker notes: ${e.message}`));return}}},125715:(e,t,n)=>{n.d(t,{f:()=>s,x:()=>a});var i=n(883765),s=(e=>(e.QUICK_ACTIONS="quick_actions",e.EDITOR_PLACEHOLDER="editor_placeholder",e.TRY_AGAIN="try_again",e))(s||{});function a(e){(0,i.sx)("slides_generate_speaker_notes_event",e)}},20415:(e,t,n)=>{n.d(t,{B_:()=>v,Hk:()=>C,O:()=>k,Yu:()=>w,ap:()=>y,gH:()=>_,hp:()=>g,k8:()=>b,lq:()=>x,ud:()=>j});var i=n(716976),s=n(638004),a=n(266808),r=n(594532),l=n(980852),o=n(725694),d=n(371868),c=n(795033),u=n(801519),p=n(246144),m=n(141330),h=n(290407),f=n(20226);function g(e,t="history-push"){let n=c.zl.get(f.hD);n&&n.update(()=>{(0,o.Wn)(e,[o.mK,o.NB])},{tag:t})}function x(e,t){let n=(0,l.getActiveTSSceneGraph)().get(e);if(n)try{n.slideSpeakerNotes=t}catch(e){(0,p.x1)(s.e.SLIDES,"Failed to set slide speaker notes",{error:e})}}function _(){let e=c.zl.get(f.hD);e&&e.dispatchCommand(u.SK,void 0)}function y(){let[e]=(0,d.DF)(),t=(0,c.Xr)(f.hD);return(0,i.useEffect)(()=>{t(e)},[e,t]),null}function v(){let[e]=(0,d.DF)(),t=b();return(0,i.useEffect)(()=>{t?e.setEditable(!1):e.setEditable(!0)},[e,t]),null}function b(){return(0,h.wj)(m.JT.SLIDES_GENERATE_SPEAKER_NOTES).state===h.qy.RUNNING}function C(){a.Ez5?.editorPreferences().speakerNotesHeight.set(0)}function j(e){a.Ez5?.editorPreferences().speakerNotesHeight.set(e)}function k(e,t,n,i){let s=e.absoluteTransform.m12>n&&e.absoluteTransform.m12+e.absoluteBoundingBox.h<i,a=e.fontSize>t;return e.visible&&(a||s)}async function w(e){let t=(0,l.getActiveTSSceneGraph)().get(e);if(t)return await (0,r.vr)(t)}},405817:(e,t,n)=>{n.d(t,{yx:()=>j,YQ:()=>k,oJ:()=>C,gu:()=>b,v8:()=>y,kM:()=>v});var i=n(104076),s=n(716976),a=n(795033),r=n(511570),l=n.n(r),o=n(284467),d=n(236631),c=n(996253),u=n(388190),p=n(76635),m=n(876509),h=n(692769);let f="loading_state--container--ouiBF";var g=n(107560);function x(){let e=(0,p.r$)(),t=(0,a.md)(c.bY),n=(0,u.xP)(),s=l()({[g.C9]:e===u.Ji.OVERLAY_MODAL,[g._P]:!n&&(e===u.Ji.PICKER||e===u.Ji.OUTLINE_TO_DECK),[g.mf]:n&&(e===u.Ji.PICKER||e===u.Ji.OUTLINE_TO_DECK),[g.cb]:t.type===c.Vf.TEMPLATE_PICKER,[d.s.m8.$]:!n,[d.s.m4.$]:n});return(0,i.jsx)(o.Qp,{className:s,animationType:o.JR.LIGHT_SHIMMER})}function _(){let e=(0,p.r$)(),t=l()({[g.XD]:e===u.Ji.PICKER||e===u.Ji.OUTLINE_TO_DECK,[g.I8]:e===u.Ji.OVERLAY_MODAL});return(0,i.jsx)(o.Qp,{className:t,animationType:o.JR.LIGHT_SHIMMER})}function y(){let e=(0,u.xP)();return(0,i.jsx)(o.Qp,{className:l()("loading_state--title--YIpQO",{[d.s.m8.$]:!e,[d.s.m4.$]:e}),animationType:o.JR.LIGHT_SHIMMER})}function v({removePadding:e=!1,numSections:t=3,numTemplates:n}){let r=(0,a.md)(c.bY).type===c.Vf.TEMPLATE_PICKER?3:4,p=(0,u.xP)();return(0,i.jsx)("div",{className:l()("loading_state--loadingStateContainer--dcv3D",{[d.s.px8.$]:!e}),children:Array.from({length:t}).map((e,t)=>(0,i.jsxs)(s.Fragment,{children:[(0,i.jsx)(y,{}),(0,i.jsx)(m.p9,{children:Array.from({length:n??r}).map((e,t)=>(0,i.jsxs)("div",{className:d.s.flex.flexColumn.$,children:[(0,i.jsx)(x,{}),(0,i.jsx)(o.Wi,{className:l()(d.s.h16.w100.$,{[d.s.mx8.$]:!p,[d.s.mx4.$]:p}),animationType:o.JR.LIGHT_SHIMMER})]},t))})]},t))})}function b(){return(0,i.jsx)("div",{className:f,children:(0,i.jsx)(m.p9,{children:Array.from({length:14}).map((e,t)=>(0,i.jsx)(x,{},t))})})}function C(){return(0,i.jsx)("div",{className:f,children:(0,i.jsx)(m.y0,{children:Array.from({length:16}).map((e,t)=>(0,i.jsx)(_,{},t))})})}function j(){return(0,i.jsx)("div",{className:l()(h.Vg,d.s.px16.pb16.pt8.gap16.overflowHidden.hFull.$),children:Array.from({length:11}).map((e,t)=>(0,i.jsx)(k,{},t))})}function k(){return(0,i.jsxs)("div",{className:d.s.flex.flexColumn.gap4.$,children:[(0,i.jsx)(o.Qp,{className:"loading_state--file--g4dxg",animationType:o.JR.LIGHT_SHIMMER}),(0,i.jsx)(o.Wi,{className:"loading_state--fileTitle--ATrhd",animationType:o.JR.LIGHT_SHIMMER}),(0,i.jsx)(o.Wi,{className:"loading_state--fileSubtitle--9Lkb7",animationType:o.JR.LIGHT_SHIMMER})]})}},476721:(e,t,n)=>{n.d(t,{Y:()=>a});var i=n(104076),s=n(236631);function a({children:e,dataTestId:t}){return(0,i.jsx)("div",{className:s.s.flex.flexColumn.hFull.$,"data-testid":t,children:e})}},932738:(e,t,n)=>{n.d(t,{q:()=>eD});var i=n(104076),s=n(716976),a=n(795033),r=n(470876),l=n(996253),o=n(511570),d=n.n(o),c=n(755444),u=n(849757),p=n(236631),m=n(192075),h=n(211862),f=n(717828),g=n(405817),x=n(476721),_=n(336206),y=n(266808),v=n(170627),b=n(876509),C=n(554153);function j({closePicker:e}){let t=t=>{v.l7.user("create-new-slide-with-default-theme",()=>{y.Ez5?.slideThemeLibBindings().insertDefaultLocalTheme(t,null)}),e()};return(0,i.jsxs)(b.MR,{title:(0,m.t)("slides.templates.dev_environment_only"),children:[(0,i.jsx)(C.FA,{thumbnailWidth:"184px",thumbnailHeight:"101px",name:(0,m.t)("slides.templates.light"),thumbnailUrl:(0,c.ck)("4a01804a5d4ad3a2d38ea604c0d8d63520e9b97b"),onPointerDown:()=>t(y.zMY.LIGHT)},"light"),(0,i.jsx)(C.FA,{thumbnailWidth:"184px",thumbnailHeight:"101px",name:(0,m.t)("slides.templates.dark"),thumbnailUrl:(0,c.ck)("01a1fc814ce18d9da3ba738aef79acc82c752ab7"),onPointerDown:()=>t(y.zMY.DARK)},"dark")]})}var k=n(37214),w=n(388190),E=n(76635),T=n(516813),S=n(237420),I=n(293422),N=n(141773),A=n(249586),L=n(944350),M=n(530299),O=n(331497),R=n(806054),P=n(872769),D=n(598430),F=n(171396);function z({onSeeAllClick:e}){return(0,i.jsx)("button",{className:d()("see_all_button--seeAllButton--TAlLw",p.s.font11.fontMedium.fontInter.flexShrink0.$),onClick:e,children:(0,m.tx)("slides.templates.view_type.see_all")})}var B=n(926108);function G({currentTeam:e}){let t=(0,E.fK)(),n=(0,a.Xr)(l.bY),{templates:s,isLoading:o,templateBrowseEntity:d,...c}=(0,r.wv)(L._Y.SLIDES,t);if(o||!d||"team"!==d.type||!s.length)return null;let u="numTemplatesForTeam"in c&&c.numTemplatesForTeam>t;return(0,i.jsx)(K,{title:(0,m.tx)("slides.templates.template_picker.header_with_name",{orgOrTeamName:e.name}),previewData:s,onSeeAllClick:u?()=>n({type:l.Vf.TEAM,teamId:e.id,displayName:e.name}):void 0})}function U({currentOrg:e}){let t=(0,E.fK)(),{templates:n,isLoading:s,templateBrowseEntity:o}=(0,r.wv)(L._Y.SLIDES,t),d=(0,a.Xr)(l.bY);if(s||!n.length||!o||"org"!==o.type)return null;let c=n&&n.length>=t?()=>d({type:l.Vf.ORG}):void 0;return(0,i.jsx)(K,{title:(0,m.tx)("slides.templates.theme_picker.org_template_header",{orgName:e.name}),previewData:n,onSeeAllClick:c})}function V(){let{shelves:e,status:t}=(0,B.v)(),n=(0,a.Xr)(l.bY),s=(0,E.fK)();return"loading"===t?(0,i.jsx)(g.kM,{removePadding:!0,numSections:2}):e&&0!==e.length?(0,i.jsx)(i.Fragment,{children:e.map(({shelfId:e,shelf:t,templates:a})=>{let r=a.slice(0,s);return 0===r.length?null:(0,i.jsx)(K,{title:(0,m.Yd)(t.i18n_meta.title,t.title),previewData:r,onSeeAllClick:a.length>s?()=>n({type:l.Vf.HUB_FILE,shelfId:t.id}):void 0},e)})}):null}function H(){let e=(0,N.eE)(P.$A.Slides),t=(0,R.TI)(P.$A.Slides),n=(0,E.fK)(),s=(0,S.wA)(),a=(0,h.q5)(),l=(0,r.J3)(),o=(0,r.JU)(l),d=l===r.kN.FILE_IN_DRAFTS,c=0===(0,O.ut)(y.Ez5?.canvasGrid()?.canvasGridArray,[]).length,u=(0,M.oh)(D.cd.fetchTemplatesMetadata.loadingKeyForPayload({key:P.$A.Slides}));return 0===t?null:u||!a?(0,i.jsx)(g.kM,{numSections:1,numTemplates:t,removePadding:!0}):(0,i.jsx)(K,{title:(0,m.t)("slides.templates.recents"),previewData:e.slice(0,n),onPublishTemplateClick:o&&!c?()=>{(0,F.ZW)({dispatch:s,file:{key:a.key,name:a.name,folder_id:a.folderId,team_id:a.teamId,editor_type:a.editorType,parent_org_id:a.parentOrgId},source:"template-picker",fileNeedsMovingBeforePublish:d}),(0,A.Cu)({name:"publish-template-template-modal",fileKey:a.key})}:void 0})}function K({title:e,previewData:t,onSeeAllClick:n,onPublishTemplateClick:s}){let a=n?(0,i.jsx)(z,{onSeeAllClick:n}):s?(0,i.jsx)(I.$n,{onClick:s,recordingKey:"template-picker-publish-template",variant:"secondary",children:(0,m.tx)("slides.templates.button.publish_template")}):void 0;return(0,i.jsx)(b.MR,{title:e,rightHeaderCta:a,children:t.map(e=>(0,i.jsx)(C.AK,{template:e},e.template.id))})}var W=n(280350),q=n(652539),X=n(411017),Y=n(625002);function Z({isSearchQueryLoading:e,trimmedSearchQuery:t,searchQueryResult:n,requestLoadMore:s}){let{onShowSeparatorScroll:a}=(0,E.gH)();return e&&0===n.length?(0,i.jsx)("div",{className:p.s.p8.$,children:(0,i.jsx)(g.gu,{})}):0===n.length?(0,i.jsxs)("div",{className:p.s.p10.flex.flex1.flexColumn.itemsCenter.alignCenter.textBodyMedium.colorTextDisabled.$,children:[(0,i.jsx)(q.B,{className:p.s.h200.$,svg:Y.A,useOriginalSrcFills_DEPRECATED:!0}),(0,i.jsx)("div",{children:(0,m.tx)("slides.templates.search.empty",{searchTerm:(0,i.jsx)("span",{className:p.s.fontBold.$,children:t})})}),(0,i.jsx)("div",{children:(0,m.tx)("slides.templates.search.empty.tip")})]}):(0,i.jsx)(u.P,{className:p.s.px8.hFull.$,onScroll:a,children:(0,i.jsxs)("div",{className:p.s.pt8.$,children:[(0,i.jsx)(b.p9,{children:n.map(e=>(0,i.jsx)(C.AK,{template:e},(0,X.NH)(e)))}),(0,i.jsx)(W.a,{onIntersectionChange:({isIntersecting:e})=>{e&&s()}})]})})}var J=n(692769);function Q({closePicker:e}){let{loading:t}=(0,T.mp)(),n=(0,E.r$)(),{scrollPosition:o,scrollRef:d,onScroll:m,resetScrollTop:x}=(0,E.d$)(l.Vf.ALL),{onShowSeparatorScroll:_}=(0,E.gH)(),y=(0,a.md)(l.q7),v=(0,h.tS)(),b=(0,r.Gi)(),{start:C}=(0,f.JY)(),S=(0,a.Xr)(l.bY);return((0,s.useEffect)(()=>()=>x([l.Vf.ALL]),[x]),t||y&&!v)?(0,i.jsx)(g.kM,{}):(0,i.jsxs)(u.P,{className:p.s.px8.hFull.$,scrollContainerRef:d,initialScrollTop:o,onScroll:(e,t)=>{m(e,t),_(e,t)},children:[n===w.Ji.OVERLAY_MODAL&&(0,i.jsx)(k.v,{onStartFromFigJamSelected:function(){S({type:l.Vf.FILE_PICKER,parentType:l.Vf.ALL})},onStartFromTextOutlineSelected:function(){C()}}),(0,i.jsx)(H,{}),b?.type==="org"&&(0,i.jsx)(U,{currentOrg:b.entity}),b?.type==="team"&&(0,i.jsx)(G,{currentTeam:b.entity}),(0,i.jsx)(V,{}),(0,c.IX)()&&(0,i.jsx)(j,{closePicker:e})]})}function $({closePicker:e,showCloseButton:t}){let{trimmedSearchQuery:n,searchQuery:s,setSearchQuery:a,isSearchQueryLoading:r,searchQueryResult:l,requestLoadMore:o}=(0,E.$N)(),{showSeparator:c}=(0,E.gH)();return(0,i.jsxs)(x.Y,{children:[(0,i.jsx)("div",{className:d()({[J.me]:c}),children:(0,i.jsx)(_.tJ,{searchQuery:s,setSearchQuery:a,showCloseButton:!!t,placeholder:(0,m.t)("slides.templates.search_templates")})}),n?(0,i.jsx)(Z,{isSearchQueryLoading:r,trimmedSearchQuery:n,searchQueryResult:l,requestLoadMore:o}):(0,i.jsx)(Q,{closePicker:e})]})}var ee=n(893393),et=n(395556),en=n(546122),ei=n(251843);function es({shelfId:e}){let[{data:t,status:n}]=(0,ee.IT)((0,ei.Q)(e)),s=(0,a.Xr)(l.bY),{scrollPosition:r,scrollRef:o,onScroll:d}=(0,E.d$)(l.Vf.HUB_FILE),c=()=>s({type:l.Vf.ALL});return"loading"===n?(0,i.jsxs)(x.Y,{children:[(0,i.jsx)(en.Z,{isLoading:!0,title:"",onClick:c}),(0,i.jsx)(g.kM,{})]}):t?(0,i.jsxs)(x.Y,{children:[(0,i.jsx)(en.Z,{title:(0,m.Yd)(t.i18n_meta.title,t.title),onClick:c}),(0,i.jsx)(u.P,{className:p.s.px8.pt16.hFull.$,scrollContainerRef:o,initialScrollTop:r,onScroll:d,children:(0,i.jsx)(b.p9,{children:t.shelf_content.map(t=>(0,i.jsx)(C.AK,{template:{type:et.n.HubFile,category:e,template:t}},t.id))})})]}):null}var ea=n(276800),er=n(638004),el=n(246144),eo=n(58212),ed=n(638641),ec=n(31296),eu=n(898821),ep=n(625635);function em({libraryKey:e}){let t=(0,E.NG)(e),[n,r]=(0,a.fp)(l.bY),o=null===(0,h.tS)(),d=(0,E.r$)(),c=(0,E.S7)(),u=(0,a.Xr)(l.ux),m=(0,a.Xr)(l.oQ);return((0,s.useEffect)(()=>{o||["loading","loaded"].includes(t.status)||(0,el.Lo)(er.e.SLIDES,`Query result status has unexpected value: ${t.status}`)},[o,t.status]),"loading"===t.status||o)?(0,i.jsxs)(x.Y,{children:[(0,i.jsx)(en.Z,{title:"",isLoading:!0,onClick:()=>{r(n.type===l.Vf.TEMPLATE?n.parentView:{type:l.Vf.ALL}),u(null),m(null)},showSeparator:!1}),(0,i.jsx)("div",{className:p.s.px16.overflowHidden.$,children:(0,i.jsx)(g.oJ,{})}),d===w.Ji.OVERLAY_MODAL&&!c&&(0,i.jsx)(ec.PW,{createOutline:ea.lQ,addAllSlides:ea.lQ,disabled:!0})]}):(0,i.jsx)(eh,{libraryKey:e,modules:t.data||[]})}function eh({libraryKey:e,modules:t}){let n=(0,E.r$)(),[r,o]=(0,a.fp)(l.bY),d=(0,a.Xr)(l.ux),c=(0,a.Xr)(l.oQ),{showSeparator:u}=(0,E.gH)(),p=(0,S.wA)(),h=t&&t.length>0,f=(0,ep.e)(),g=(0,eu.E)({libraryKey:e,modules:t??[]}),_=r.type===l.Vf.TEMPLATE&&r.shouldRemoveSourceLibraryKeyOnFail,y=(0,E.BX)(f);if((0,s.useEffect)(()=>{if(!h&&r.type===l.Vf.TEMPLATE){if(_){y(),o({type:l.Vf.ALL});return}e?((0,el.x1)(er.e.SLIDES,"Expected to find at least one module in slides template",{libraryKey:e},{reportAsSentryError:!0}),p(eo.F.enqueue({type:"slides-template",message:(0,m.t)("slides.templates.toast.no_longer_available"),error:!0,icon:ed.zX.EXCLAMATION}))):(0,el.x1)(er.e.SLIDES,"No library key found for slides template",{},{reportAsSentryError:!0}),o({type:l.Vf.ALL})}},[p,h,e,t,y,o,_,r.type]),!h)return null;let v=t[0],C=v.file_name||"",j=v.publisher_name;return(0,i.jsxs)(x.Y,{children:[(0,i.jsx)(en.Z,{title:C,publisherName:j,onClick:()=>{o(r.type===l.Vf.TEMPLATE?r.parentView:{type:l.Vf.ALL}),d(null),c(null)},showSeparator:u,children:(0,i.jsx)(ef,{addAllSlides:g})}),(0,i.jsx)(b.Dh,{modules:t}),n===w.Ji.OVERLAY_MODAL&&(0,i.jsx)(ec.PW,{createOutline:()=>{d(v.library_key),o({type:l.Vf.FILE_PICKER,parentType:l.Vf.TEMPLATE})},addAllSlides:g})]})}function ef({addAllSlides:e}){return(0,E.r$)()===w.Ji.PICKER?(0,i.jsx)(eg,{children:(0,i.jsx)(I.$n,{variant:"secondary",onClick:e,children:(0,m.tx)("slides.templates.add_all_slides")})}):null}function eg({children:e}){return(0,i.jsx)("div",{className:p.s.mr8.mlAuto.$,children:e})}var ex=n(812714),e_=n(151240),ey=n(754039);function ev({title:e,templates:t,onRequestMore:n,onSeeAllClick:s}){return(0,i.jsxs)(b.MR,{title:e,rightHeaderCta:s?(0,i.jsx)(z,{onSeeAllClick:s}):void 0,children:[t.map(e=>(0,i.jsx)(C.AK,{template:e},(0,X.gp)(e))),(0,i.jsx)(W.a,{onIntersectionChange:n})]})}function eb({currentOrg:e}){let{isLoadingTeamTemplates:t,templatesByTeam:n,requestLoadMore:o,requestLoadMoreForTeam:d}=(0,r.GR)(e,L._Y.SLIDES),c=(0,ey.G7)(e),m=(0,E.fK)(),{teamTemplates:h,isLoading:f,requestLoadMoreForOrg:_}=(0,r.e2)({orgId:e.id,areWorkspacesEnabled:c,numTemplatesPerTeam:m,editorType:L._Y.SLIDES,filterByIds:null}),y=(0,ex.kc)().pro_templates_lg,v=y?h:n,b=(0,a.Xr)(l.bY),{scrollPosition:C,scrollRef:j,onScroll:k}=(0,E.d$)(l.Vf.ORG),w=v?.[v.length-1]?.teamId??null,T=(0,s.useRef)(null);(0,e_.X)({containerRef:j,targetRef:T,targetKey:w,onIntersectionChange:y?_:o});let S=()=>b({type:l.Vf.ALL});return(y?f:t)?(0,i.jsxs)(x.Y,{children:[(0,i.jsx)(en.Z,{isLoading:!0,title:"",onClick:S}),(0,i.jsx)(g.kM,{})]}):(0,i.jsxs)(x.Y,{children:[(0,i.jsx)(en.Z,{title:e.name,onClick:S}),(0,i.jsx)(u.P,{className:p.s.px8.hFull.$,scrollContainerRef:j,initialScrollTop:C,onScroll:k,children:v.map(t=>(0,i.jsx)("div",{ref:w===t.teamId?T:null,children:(0,i.jsx)(ev,{title:t.teamName??e.name,templates:t.templates,onRequestMore:()=>{y||d(t.teamId)},onSeeAllClick:y&&t.totalTemplatesByTeam>m?()=>b({type:l.Vf.TEAM,teamId:t.teamId,displayName:t.teamName??e.name}):void 0},t.teamId)},t.teamId))})]})}var eC=n(288747);function ej({templates:e,scrollContainerRef:t,onRequestMore:n}){let a=e?.[e.length-1]?.id,r=(0,s.useRef)(null);return(0,e_.X)({containerRef:t,targetRef:r,targetKey:a,onIntersectionChange:n}),(0,i.jsx)(b.MR,{children:e.map(e=>(0,i.jsx)("div",{ref:e.id===a?r:void 0,children:(0,i.jsx)(C.AK,{template:{type:et.n.TeamTemplateLg,template:e}},e.id)},e.id))})}function ek({teamId:e,displayName:t}){let{requestLoadMoreForTeam:n,templatesByTeam:s}=(0,r.li)({teamId:e,editorType:L._Y.SLIDES}),o=(0,a.Xr)(l.bY),{scrollPosition:d,scrollRef:c,onScroll:m}=(0,E.d$)(l.Vf.TEAM),h=(0,eC.dq)();return(0,i.jsxs)(x.Y,{children:[(0,i.jsx)(en.Z,{title:t,onClick:()=>{h?o({type:l.Vf.ORG}):o({type:l.Vf.ALL})}}),s?(0,i.jsx)(u.P,{className:p.s.p8.hFull.$,scrollContainerRef:c,initialScrollTop:d,onScroll:m,children:(0,i.jsx)(ej,{scrollContainerRef:c,templates:s.templates,onRequestMore:n})}):(0,i.jsx)("div",{className:p.s.p8.$,children:(0,i.jsx)(g.gu,{})})]})}var ew=n(624622),eE=n(296430),eT=n(776111),eS=n(833805);function eI({showCloseButton:e}){let{searchQuery:t,setSearchQuery:n}=(0,E.$N)(),[s,r]=(0,a.fp)(l.bY),o=!!(s.type===l.Vf.TEMPLATE_PICKER&&s.figjamEntryPointData),d=(0,S.d4)(e=>e.mirror.appModel.multiplayerSessionState===y.kul.JOINED)||(0,eT.nl)();return(0,i.jsxs)(x.Y,{dataTestId:"template-picker-view",children:[o?(0,i.jsx)(_.tJ,{searchQuery:t,setSearchQuery:n,showCloseButton:!0,placeholder:(0,m.t)("slides.templates.search_templates")}):(0,i.jsx)(_.ui,{searchQuery:t,setSearchQuery:n,onBack:function(){r({type:l.Vf.FILE_PICKER,parentType:l.Vf.TEMPLATE_PICKER})},showCloseButton:!!e,placeholder:(0,m.t)("slides.templates.template_picker.search_templates")}),d?(0,i.jsx)(eN,{footer:e=>(0,i.jsx)(ec.wJ,{templateSelected:e})}):(0,i.jsx)(g.kM,{removePadding:!0})]})}function eN({footer:e}){let{trimmedSearchQuery:t,isSearchQueryLoading:n,searchQueryResult:s,requestLoadMore:r}=(0,E.$N)(),o=(0,a.md)(l.ux),{showSeparator:c}=(0,E.gH)();return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:d()(p.s.p16.flex.flexColumn.gap2.$,{[J.me]:t&&c}),children:(0,i.jsx)(_._8,{icon:(0,i.jsx)("div",{style:{"--color-icon":"var(--color-icon-menu-onselected)"},className:p.s.colorBgBrand.h14.w14.bRadius2.flex.alignCenter.itemsCenter.$,children:(0,i.jsx)(eE.X,{})}),title:(0,m.t)("slides.templates.template_picker.title"),subtitle:(0,m.t)("slides.templates.template_picker.subtitle")})}),t?(0,i.jsx)(Z,{isSearchQueryLoading:n,trimmedSearchQuery:t,searchQueryResult:s,requestLoadMore:r}):(0,i.jsx)(eL,{}),e(!!o)]})}var eA=(e=>(e[e.RECENTS=1]="RECENTS",e[e.HUB_FILE=2]="HUB_FILE",e[e.ORG=3]="ORG",e))(eA||{});function eL(){let e=(0,eC.sZ)(),[t,n]=s.useState([]),[a,r]=s.useState(null),[{data:o}]=(0,eS.IT)((0,ei._)()),c=(0,N.eE)(P.$A.Slides),{scrollPosition:u,scrollRef:h,onScroll:f}=(0,E.d$)(l.Vf.TEMPLATE_PICKER),{showSeparator:g,onShowSeparatorScroll:x}=(0,E.gH)(),_=s.useCallback((e,t)=>{f(e,t),x(e,t)},[f,x]);(0,s.useEffect)(()=>{let t=[];if(c.length>0&&t.push({type:1,id:"recents",label:(0,m.t)("slides.templates.recents")}),o)for(let e of o)t.push({type:2,shelf:e,id:`hub-${e.id}`,label:e.title});e&&t.push({type:3,id:"org",label:(0,m.t)("slides.templates.org_templates")}),n(t),t.length>0&&r(t[0].id)},[c,e,o]);let y=e=>()=>{r(e)},v={scrollContainerRef:h,initialScrollTop:u,onScroll:_},b=t.find(e=>e.id===a);return b?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:d()(p.s.flex.flexRow.gap6.alignCenter.itemsCenter.px16.pb16.$,{[J.me]:g}),children:t.map(e=>(0,i.jsx)("button",{className:d()(p.s.textBodyMedium.colorText.spacingWide.alignCenter.px8.h24.$,{[J.eg]:a===e.id,[p.s.textBodyMediumStrong.$]:a===e.id,[p.s.colorTextSecondary.$]:a!==e.id}),onClick:y(e.id),children:2===e.type?(0,m.Yd)(e.shelf.i18n_meta.title,e.shelf.title):e.label},e.id))}),(t=>{switch(t.type){case 2:return(0,i.jsx)(eP,{shelf:t.shelf,...v});case 1:return(0,i.jsx)(eM,{...v});case 3:if(!e)throw Error("Something went wrong in tab calculation");return(0,i.jsx)(eR,{currentOrg:e,...v})}})(b)]}):null}function eM({scrollContainerRef:e,initialScrollTop:t,onScroll:n}){let s=(0,N.eE)(P.$A.Slides);return 0===s.length?null:(0,i.jsx)(u.P,{className:p.s.px8.hFull.$,scrollContainerRef:e,initialScrollTop:t,onScroll:n,children:(0,i.jsx)(b.p9,{children:s.map(e=>(0,i.jsx)(C.AK,{template:e},(0,X.NH)(e)))})})}function eO({teamId:e,displayName:t,onBackClick:n}){let{requestLoadMoreForTeam:a,templatesByTeam:l}=(0,r.li)({teamId:e,editorType:L._Y.SLIDES}),o=(0,s.useRef)(null);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(en.Z,{title:t,onClick:n,showSeparator:!1}),l?(0,i.jsx)(u.P,{scrollContainerRef:o,className:p.s.px8.hFull.$,children:(0,i.jsx)(ej,{scrollContainerRef:o,templates:l.templates,onRequestMore:a})}):(0,i.jsx)(g.gu,{})]})}function eR({currentOrg:e,scrollContainerRef:t,initialScrollTop:n,onScroll:a}){let{isLoadingTeamTemplates:l,templatesByTeam:o,requestLoadMore:d,requestLoadMoreForTeam:c}=(0,r.GR)(e,L._Y.SLIDES),m=(0,ey.G7)(e),{teamTemplates:h,isLoading:f,requestLoadMoreForOrg:x}=(0,r.e2)({orgId:e.id,areWorkspacesEnabled:m,numTemplatesPerTeam:6,editorType:L._Y.SLIDES,filterByIds:null}),_=(0,ex.kc)().pro_templates_lg,y=_?h:o,v=y?.[y.length-1]?.teamId??null,b=(0,s.useRef)(null);(0,e_.X)({containerRef:t,targetRef:b,targetKey:v,onIntersectionChange:_?x:d});let[C,j]=s.useState(null);return C?(0,i.jsx)(eO,{teamId:C,displayName:e.name,onBackClick:()=>j(null)}):(_?f:l)?(0,i.jsx)(g.kM,{}):(0,i.jsx)(u.P,{className:p.s.px8.hFull.$,scrollContainerRef:t,initialScrollTop:n,onScroll:a,children:y.map(t=>(0,i.jsx)("div",{ref:v===t.teamId?b:null,children:(0,i.jsx)(ev,{title:t.teamName??e.name,templates:t.templates,onRequestMore:()=>{_||c(t.teamId)},onSeeAllClick:_&&t.totalTemplatesByTeam>6?()=>{j(t.teamId)}:void 0},t.teamId)},t.teamId))})}function eP({shelf:e,scrollContainerRef:t,initialScrollTop:n,onScroll:s}){let[{status:a}]=(0,eS.IT)((0,ei._)());if("loading"===a)return(0,i.jsx)(g.kM,{});let r=e.id;return(0,i.jsx)(u.P,{className:p.s.px8.hFull.$,scrollContainerRef:t,initialScrollTop:n,onScroll:s,children:(0,i.jsx)(b.p9,{children:e.shelf_content.map(e=>{let t={type:et.n.HubFile,category:r,template:e};return(0,i.jsx)(C.AK,{template:t},e.id)})})})}function eD({showCloseButton:e}){let t=(0,a.md)(l.bY),n=(0,a.Xr)(l.VZ),o=(0,a.Xr)(l.Ei),d=(0,a.Xr)(l.OR),c=(0,a.Xr)(l.xw),u=(0,r.Gi)();switch((0,s.useEffect)(()=>()=>{d(""),c()},[c,d]),t.type){case l.Vf.ALL:return(0,i.jsx)($,{showCloseButton:e,closePicker:()=>{o(!1),n(!1)}});case l.Vf.ORG:if(u?.type!=="org")throw Error("User is not allowed to browse org templates");return(0,i.jsx)(eb,{currentOrg:u.entity});case l.Vf.TEAM:if(!u)throw Error("User is not allowed to browse team templates");return(0,i.jsx)(ek,{teamId:t.teamId,displayName:t.displayName});case l.Vf.TEMPLATE:return(0,i.jsx)(em,{libraryKey:t.libraryKey});case l.Vf.HUB_FILE:return(0,i.jsx)(es,{shelfId:t.shelfId});case l.Vf.FILE_PICKER:return(0,i.jsx)(ew.gT,{showCloseButton:e});case l.Vf.TEMPLATE_PICKER:return(0,i.jsx)(eI,{showCloseButton:e});default:return null}}},31296:(e,t,n)=>{n.d(t,{PW:()=>v,X_:()=>C,jc:()=>j,wJ:()=>y});var i=n(104076),s=n(293422),a=n(433359),r=n(160444),l=n(795033),o=n(511570),d=n.n(o),c=n(236631),u=n(192075),p=n(141330),m=n(578420),h=n(842582),f=n(996253),g=n(516813),x=n(577431),_=n(692769);function y({templateSelected:e}){let{startAction:t,figjamFileKey:n}=(0,h.D)();return(0,i.jsx)(k,{children:(0,i.jsx)(s.$n,{iconPrefix:(0,i.jsx)(a.m,{}),variant:"primary",onClick:t,disabled:!n,children:(0,u.tx)(e?"slides.templates.template_picker.submit.button.with_template":"slides.templates.template_picker.submit.button.without_template")})})}function v({createOutline:e,addAllSlides:t,disabled:n}){let{isCreateSlidesOutlineEnabled:a}=(0,g.mp)();return(0,i.jsxs)("div",{className:d()(c.s.flex.itemsCenter.justifyEnd.py8.pr16.gap8.$,_.qr),children:[a&&(0,i.jsx)(s.$n,{iconPrefix:(0,i.jsx)(r.C,{}),variant:"secondary",onClick:e,disabled:n,children:(0,u.tx)("slides.templates.outline_with_template.button")}),(0,i.jsx)(s.$n,{variant:"secondary",onClick:t,disabled:n,children:(0,u.tx)("slides.templates.add_all_slides")})]})}function b({children:e}){return(0,i.jsx)(k,{children:(0,i.jsxs)("div",{className:c.s.flex.gap8.itemsCenter.$,children:[(0,i.jsx)(x.B,{}),e]})})}function C(){let e=(0,l.md)(f.V6),{startAction:t,figjamFileKey:n}=(0,h.D)();return(0,i.jsx)(b,{children:(0,i.jsx)(s.$n,{iconPrefix:(0,i.jsx)(a.m,{}),variant:"primary",onClick:t,disabled:!n||e.type===f.i6.NONE,children:(0,u.tx)("slides.templates.file_picker.submit_button.generate")})})}function j(){let e=(0,l.md)(f.V6),t=(0,l.Xr)(f.bY),n=(0,l.md)(f.oQ);return(0,i.jsx)(b,{children:(0,i.jsx)(s.$n,{variant:"primary",onClick:()=>{t({type:f.Vf.TEMPLATE_PICKER})},disabled:!n||e.type===f.i6.NONE,children:(0,u.tx)("slides.templates.file_picker.submit_button.pick_template")})})}function k({children:e}){return(0,i.jsxs)("div",{className:d()(c.s.flex.itemsCenter.justifyBetween.pl12.pr8.py8.$,_.qr),children:[(0,i.jsx)("div",{className:c.s.flex.itemsCenter.justifyStart.gap8.$,children:(0,i.jsx)(m.yi,{helpUrlVariant:p.JT.BOARD_TO_DECK})}),e]})}},876509:(e,t,n)=>{n.d(t,{Dh:()=>u,MR:()=>m,p9:()=>p,y0:()=>h});var i=n(104076),s=n(511570),a=n.n(s),r=n(849757),l=n(236631),o=n(192075),d=n(76635),c=n(554153);function u({modules:e}){let{onShowSeparatorScroll:t}=(0,d.gH)();if(!e.length)return null;let n=e[0].library_key;return(0,i.jsx)(r.P,{className:l.s.px16.hFull.$,onScroll:t,children:(0,i.jsx)(h,{children:e.map((t,n)=>(0,i.jsx)(c.ag,{module:t,"aria-label":(0,o.t)("slides.templates.template_picker.slide_button.aria_label",{index:n+1,total:e.length})},t.id))},n)})}function p({children:e}){return(0,i.jsx)("div",{className:l.s.flex.flexWrap.pb8.gap0.$,children:e})}function m({title:e,children:t,rightHeaderCta:n}){let s=e||!!n;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:a()({[l.s.flex.justifyBetween.alignLeft.itemsCenter.pt16.pb8.px8.$]:s}),children:[e&&(0,i.jsx)("div",{className:l.s.font13.colorText.fontSemiBold.fontInter.noWrap.overflowHidden.ellipsis.pr4.$,children:e}),n]}),(0,i.jsx)(p,{children:t})]})}function h({children:e}){return(0,i.jsx)("div",{className:l.s.flex.flexWrap.pb16.gap8.$,children:e})}},336206:(e,t,n)=>{n.d(t,{_8:()=>g,tJ:()=>h,ui:()=>f});var i=n(104076),s=n(511570),a=n.n(s),r=n(915459),l=n(236631),o=n(76635),d=n(420680),c=n(662376),u=n(192075);function p({onClick:e}){return(0,i.jsx)(d.K,{"aria-label":(0,u.t)("common.close"),onClick:e,children:(0,i.jsx)(c.A,{})})}var m=n(692769);function h({searchQuery:e,setSearchQuery:t,showCloseButton:n,placeholder:s}){let{canDismiss:d,maybeUseLightTemplateOnDismiss:c}=(0,o.vN)();return(0,i.jsxs)("div",{className:l.s.flex.flexRow.itemsCenter.pl8.pr12.py8.gap12.$,children:[(0,i.jsx)(r.IW,{className:a()(m.ON,l.s.wFull.borderBox.bRadius6.colorBgSecondary.$),query:e,clearSearch:()=>t(""),onChange:t,placeholder:s,focusOnMount:!0,withSmallXIcon:!0}),n&&d&&(0,i.jsx)(p,{onClick:c})]})}function f({searchQuery:e,setSearchQuery:t,onBack:n,showCloseButton:s,placeholder:d}){let{canDismiss:c,maybeUseLightTemplateOnDismiss:u}=(0,o.vN)();return(0,i.jsxs)("div",{className:a()(l.s.flex.flexRow.itemsCenter.pl8.pr12.py8.gap12.$),children:[(0,i.jsx)(r.RE,{className:a()(m.ON,l.s.wFull.borderBox.bRadius6.colorBgSecondary.$),query:e,clearSearch:()=>t(""),onChange:t,onBack:n,placeholder:d,focusOnMount:!0,withSmallXIcon:!0}),s&&c&&(0,i.jsx)(p,{onClick:u})]})}function g({icon:e,title:t,subtitle:n}){return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:l.s.flex.flexRow.gap6.lh24.itemsCenter.$,children:[e,(0,i.jsx)("h1",{className:l.s.colorText.fontInter.font14.fontNormal.fontSemiBold.spacingCompact.$,children:t})]}),(0,i.jsx)("h2",{className:l.s.colorTextSecondary.textBodyMedium.$,children:n})]})}},577431:(e,t,n)=>{n.d(t,{B:()=>g});var i=n(104076),s=n(716976),a=n(237420),r=n(266808),l=n(795033),o=n(776111),d=n(679359),c=n(236631),u=n(192075),p=n(506192),m=n(954741),h=n(117739),f=n(996253);function g(){let e=(0,a.wA)(),t=(0,p.Um)(),n=(0,l.md)(f.oQ),[d,g]=s.useState([]),[_,y]=(0,l.fp)(f.V6),v=(0,h.M0)(n);return(s.useEffect(()=>{!(0,o.nl)()&&n&&(y({type:f.i6.NONE}),(async()=>{let e=await v();if(!e)return;let t=r.Zdr?.getPagesFromBuffer(e)??[],n=t[0];n&&(g(t.map(e=>({guid:e.guid,name:e.name}))),y({type:f.i6.SINGLE,page:{guid:n.guid,name:n.name}}))})())},[n,y,v]),n)?_.type===f.i6.NONE?(0,i.jsx)(x,{}):(0,i.jsx)("div",{"data-testid":"page-selector",children:(0,i.jsxs)(m.l6,{ariaLabel:(0,u.t)("slides.templates.file_picker.page_selector.label"),className:"slides_template_page_selector--pageSelector--PuTJR",dispatch:e,dropdownShown:t,dropdownWidth:208,formatter:{format:e=>{switch(e.type){case f.i6.SINGLE:return e.page.name;case f.i6.ALL:return(0,u.t)("slides.templates.file_picker.page_selector.all_pages");default:return""}},isEqual:(e,t)=>e.type===t.type&&(e.type!==f.i6.SINGLE||t.type!==f.i6.SINGLE||e.page.guid===t.page.guid&&e.page.name===t.page.name)},id:"slides-ai-file-picker-page-select",inputClassName:c.s.fontMedium.colorText.ellipsis.alignTop.maxW150.$,onChange:e=>{y(e)},property:_,children:[(0,i.jsx)(m.c$,{value:{type:f.i6.NONE},disabled:!0,ignoreCheck:!0,children:(0,u.t)("slides.templates.file_picker.page_selector.label")}),d.map(e=>(0,i.jsx)(m.c$,{value:{type:f.i6.SINGLE,page:e},children:e.name},e.guid)),(0,i.jsx)(m.sK,{}),(0,i.jsx)(m.c$,{value:{type:f.i6.ALL,allPages:d},children:(0,u.t)("slides.templates.file_picker.page_selector.all_pages")},-1)]})}):null}function x(){return(0,i.jsxs)("div",{className:"slides_template_page_selector--pageSelectorLoadingState--oaDQH",children:[(0,i.jsx)("div",{className:c.s.fontMedium.overflowHidden.colorTextSecondary.$,children:(0,u.t)("slides.templates.file_picker.page_selector.loading")}),(0,i.jsx)(d.kt,{})]})}},354621:(e,t,n)=>{n.d(t,{x:()=>f});var i=n(104076),s=n(890373),a=n(192075),r=n(760238),l=n(684742),o=n(208754),d=n(162954),c=n(120440);function u(e){let{index:t,item:n,label:s,buttonId:a,showCellOutline:o,actionOnPointerDown:d,onActivateItem:c,renderItem:u}=e;return(0,i.jsx)(r.fh,{...{0:{},1:{className:"x1lliihq xeuugli x1de99jn xaatb59 x1uczgqu x8wkva7"}}[!!o<<0],children:(0,i.jsx)(l.E,{type:"button","aria-label":s,onClick:c?e=>c(n,t,e):void 0,actionOnPointerDown:d,className:"x1lliihq xh8yej3 x16tdsg8 xjbqb8w xc342km xng3xce x9r1u3d x1717udv x1ypdohk",children:u({item:n,index:t,active:!1,id:a})})})}function p(e){let{items:t,renderItem:n,getItemLabel:s,labelledById:a,columns:r=3,gridGap:l,onActivateItem:p,actionOnPointerDown:h,idPrefix:f="template-picker-grid",containerStyle:g,ariaLabel:x,showCellOutline:_=!0}=e;return(0,i.jsx)(d.bL,{"aria-label":a?void 0:x,"aria-labelledby":a||void 0,...c.Ay.props(m.grid,g),children:(()=>{let e=function(e,t){let n=[];for(let i=0;i<e.length;i+=t)n.push(e.slice(i,i+t));return n}(t,r),a=e.length>1;return e.map((e,t)=>(0,i.jsx)(o.fI,{className:"xrvj5dj xh8yej3 x1nfngrj x15r87gk",style:{gridTemplateColumns:`repeat(${r}, minmax(0, 1fr))`,...l&&{gap:l},...l&&a&&t>0&&{marginBlockStart:l}},children:e.map((e,a)=>{let l=t*r+a,o=s(e,l),d=`${f}-cell-${l}`;return(0,i.jsx)(u,{index:l,item:e,label:o,buttonId:d,showCellOutline:_,actionOnPointerDown:h,onActivateItem:p,renderItem:n},`cell-${l}`)})},`row-${t}`))})()})}let m={grid:{k3XXqK:"x1t137rt",kzqmXN:"xh8yej3",$$css:!0}};var h=n(411017);function f(e){return"getItemLabel"in e?(0,i.jsx)(p,{gridGap:s.jH.spacer3,...e}):(0,i.jsx)(p,{gridGap:s.jH.spacer3,getItemLabel:e=>(0,a.t)("slides.templates.view_template.aria_label",{templateName:(0,h.gY)(e)}),...e})}},554153:(e,t,n)=>{n.d(t,{AK:()=>G,FA:()=>z,ag:()=>F});var i=n(104076),s=n(716976),a=n(237420),r=n(276800),l=n(684742),o=n(266808),d=n(170627),c=n(926653),u=n(795033);n(120440);var p=n(511570),m=n.n(p),h=n(686549),f=n(361170),g=n(816565),x=n(679359),_=n(236631),y=n(192075),v=n(977159),b=n(489175),C=n(249586),j=n(411017),k=n(211862),w=n(757887),E=n(96329),T=n(592726),S=n(82483),I=n(40133),N=n(20226),A=n(616802),L=n(42499),M=n(996253),O=n(388190),R=n(76635),P=n(107560);let D=(0,v.f)();function F({module:e,...t}){let n=(0,T.TA)(),r=(0,R.r$)(),l=(0,u.Xr)(M.VZ),c=(0,u.Xr)(M.Ei),p=(0,u.md)(N.v2),g=(0,k.tS)(),x=(0,a.wA)(),y="insert-slide-module",v=(0,A.D)(e.library_key),b=d.nc.user(y,(t,n,i)=>{(0,O.CH)({module:e,viewType:r,getGridCoord:o.Ez5?.getInsertGridCoord??(()=>({row:0,col:0})),dispatch:x,subscribeToLibrary:v})(t,n,i)}),{onInsertableResourcePointerDown:j,dragState:S}=(0,E.j)({resource:e,isList:!1,sourceForTracking:"slides-templates-panel",clickToInsert_DEPRECATED:!0,insertAsChildOfCanvas:!0,insertionCallback:b,afterSuccessfulInsert:()=>{c(!1),l(!1)},selectAfterInsert:!1}),I=d.nc.user(y,j),L=s.useMemo(()=>p?new f.Mi(o.CNR?.singleSlideThumbnailWidth()??0,o.CNR?.singleSlideThumbnailHeight()??0):void 0,[p]),F=s.useMemo(()=>{let t=e.thumbnail_url;if(t)return n?(0,h.NQ)(t,"fuid",n):t},[e.thumbnail_url,n]);return(0,i.jsxs)("div",{className:m()(_.s.flex.alignCenter.justifyCenter.gap8.$,{[P.e4]:r===O.Ji.PICKER||r===O.Ji.OUTLINE_TO_DECK,[P.pz]:r===O.Ji.OVERLAY_MODAL,[P.a3]:!p}),children:[(0,i.jsx)(w.q,{dragState:r===O.Ji.PICKER?S:null,isList:!1,overrideDragPreviewSize:L}),(0,i.jsx)(z,{thumbnailUrl:F,onPointerDown:t=>{I(t),(0,C.Cu)({moduleId:e.id,moduleFileKey:D(e),fileKey:g,name:"slide_template_tile",productType:"slides"})},"aria-label":t["aria-label"]},e.node_id)]})}function z({name:e,thumbnailUrl:t,thumbnailWidth:n,thumbnailHeight:s,onPointerDown:a,showLoadingSpinner:r=!1,disabled:o=!1,removeBorder:d=!1,...c}){return(0,i.jsxs)(l.E,{className:m()(_.s.flex.flexColumn.itemsStart.hFull.wFull.$,P.ln),onClick:o?void 0:a,actionOnPointerDown:!0,"aria-label":c["aria-label"],htmlAttributes:{"data-testid":"insertableSlideTile"},children:[(0,i.jsxs)("div",{...{0:{className:"x78zum5 x1n2onr6 xb3r6kr xl56j7k x6s0dn4"},1:{className:"x78zum5 x1n2onr6 xb3r6kr xl56j7k x6s0dn4 x9f619 xmkeg23 x1y0btm7 x7z60cl x1sxf85j"}}[!d<<0],style:{width:n??"100%",height:s??"100%"},children:[r&&(0,i.jsx)(x.kt,{className:P.S}),(0,i.jsx)(g.oW,{onDragStart:b.wo,className:P.uP,src:t,alt:e,loading:"lazy"})]}),e&&(0,i.jsx)("div",{className:_.s.font11.fontInter.colorTextSecondary.$,children:e})]})}function B({text:e,dataTestId:t,onPointerDown:n,imageContainerContent:s,additionalClassname:a,showSelectedState:r=!1}){let l=(0,R.r$)(),o=(0,u.md)(M.bY);return(0,i.jsx)("div",{"data-testid":t,className:m()(_.s.p8.$,a),children:(0,i.jsx)(S.sU,{image:(0,i.jsx)("div",{onPointerDown:n,children:(0,i.jsx)(S.WM,{className:m()({[P.zs]:l===O.Ji.PICKER||l===O.Ji.OUTLINE_TO_DECK,[P.$y]:l===O.Ji.OVERLAY_MODAL,[P.VY]:o.type===M.Vf.TEMPLATE_PICKER,[P.iH]:r}),removeBorder:!0,backgroundColor:"none",children:s})}),bottomRow:(0,i.jsx)(S.dY.MetadataContainer,{children:(0,i.jsx)(S.dY.TextMetadataLayout,{onClick:n,primaryText:(0,i.jsx)("div",{className:_.s.font11.colorText.ellipsis.overflowHidden.$,children:e})})}),bottomRowClassName:m()({[P.y5]:l===O.Ji.PICKER||l===O.Ji.OUTLINE_TO_DECK,[P.gx]:l===O.Ji.OVERLAY_MODAL})})})}function G({template:e}){return(0,u.md)(M.bY).type===M.Vf.TEMPLATE_PICKER?(0,i.jsx)(U,{template:e}):(0,i.jsx)(V,{template:e})}function U({template:e}){let{name:t,imageUrl:n,libraryKey:s}=(0,j.fG)()(e),[a,r]=(0,u.fp)(M.ux);if(!s)return null;let l=()=>r((0,c.l)(s));return(0,i.jsx)(B,{text:t,dataTestId:"slidesTemplateCoverTile",onPointerDown:l,imageContainerContent:(0,i.jsx)(z,{thumbnailUrl:n,onPointerDown:l,removeBorder:a===(0,c.l)(s)},t),additionalClassname:P.JB,showSelectedState:a===(0,c.l)(s)})}function V({template:e}){let{name:t,imageUrl:n,libraryKey:s}=(0,j.fG)()(e),a=(0,R.r$)(),l=(0,L.N)();if(!s)return null;let o=t=>{t.stopPropagation(),l(e)},d=a===O.Ji.OUTLINE_TO_DECK?"Select template":(0,y.tx)("slides.templates.view_template");return(0,i.jsx)(B,{text:t,dataTestId:"slidesTemplateCoverTile",onPointerDown:o,imageContainerContent:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(S.Wh.Cover,{children:(0,i.jsx)("div",{className:P.n_})}),(0,i.jsx)(S.Wh.Center,{children:(0,i.jsx)(I.i,{insertTemplate:r.lQ,isInsertingTemplate:!1,shouldUseOpaqueBackground:!0,children:d})}),(0,i.jsx)(z,{thumbnailUrl:n,onPointerDown:o},t)]})})}},37214:(e,t,n)=>{n.d(t,{v:()=>b});var i=n(104076),s=n(716976),a=n(65545),r=n(180),l=n(92053),o=n(296430),d=n(192075),c=n(684742),u=n(511570),p=n.n(u),m=n(111297),h=n(249586);function f({buttons:e,editorType:t,wrapperStyle:n}){return(0,i.jsx)("div",{className:p()("template_picker_start_from_row--startFromRowWrapper--0Lb6d",n),children:e.map(e=>(0,i.jsx)(m.fu,{name:`${t}_template_start_from_button.${e.id}`,children:(0,i.jsx)(g,{onClick:e.onClick,title:e.title,subtitle:e.subtitle,icon:e.icon,buttonStyle:e.buttonStyle,iconStyle:e.iconStyle,dataTestId:e.dataTestId,editorType:t,id:e.id})},e.id))})}function g({onClick:e,title:t,subtitle:n,icon:s,buttonStyle:a,iconStyle:r,dataTestId:l,editorType:o,id:d}){let u=(e=>{if("dashedBorder"===e)return"template_picker_start_from_row--dashedBorder--TTsy3"})(a),m=(e=>{switch(e){case"startFromOutlineIcon":return"template_picker_start_from_row--startFromOutlineIcon--ISgoj";case"startFromScratchIcon":return"template_picker_start_from_row--startFromScratchIcon--DCuku";case"makeATemplate":return"template_picker_start_from_row--makeATemplate--5KCvB";default:return}})(r);return(0,i.jsxs)(c.E,{className:p()("template_picker_start_from_row--startFromRowButton--1YHog",u),onClick:()=>{(0,h.Cu)({name:`${o}.templates.${d}`,triggeredFrom:`${o}_template_modal`}),e()},"data-testid":l,children:[(0,i.jsx)("span",{className:m,children:s}),(0,i.jsxs)("div",{className:"template_picker_start_from_row--textContainer--WZymg",children:[(0,i.jsx)("p",{className:"template_picker_start_from_row--titleText--Kwe64",children:t}),(0,i.jsx)("p",{className:"template_picker_start_from_row--subtitleText--4-ZA7",children:n})]})]})}var x=n(470876),_=n(872990),y=n(76635),v=n(516813);function b({onStartFromFigJamSelected:e,onStartFromTextOutlineSelected:t,usePadding:n=!0}){let{isCreateSlidesOutlineEnabled:c}=(0,v.mp)(),u=(0,_.J)(),{canDismiss:p,maybeUseLightTemplateOnDismiss:m}=(0,y.vN)(),{setUserDraftTemplateKeyForCurrentFile:h}=(0,y.Iv)(),g=(0,x.J3)(),b=(0,x.JU)(g),C=(0,s.useMemo)(()=>{let n=[];return(p&&n.push({id:"start_from_scratch",onClick:m,icon:(0,i.jsx)(r.$,{}),title:(0,d.t)("slides.templates.start_from.scratch.title"),subtitle:(0,d.t)("slides.templates.start_from.scratch.subtitle"),buttonStyle:"dashedBorder",iconStyle:"startFromScratchIcon",dataTestId:"start-from-scratch"}),u?n.push({id:"outline_to_deck",onClick:t,icon:(0,i.jsx)(l.R,{}),title:(0,d.t)("slides.templates.start_from.outline.title"),subtitle:(0,d.t)("slides.templates.start_from.outline_to_deck.subtitle"),iconStyle:"startFromOutlineIcon",dataTestId:"outline-to-deck"}):c&&n.push({id:"start_from_outline",onClick:e,icon:(0,i.jsx)(l.R,{}),title:(0,d.t)("slides.templates.start_from.outline.title"),subtitle:(0,d.t)("slides.templates.start_from.outline.subtitle"),iconStyle:"startFromOutlineIcon",dataTestId:"start-from-outline"}),b&&n.push({id:"make_a_template",onClick:()=>{m(),h()},icon:(0,i.jsx)(o.X,{}),title:(0,d.t)("slides.templates.make_a_template.title"),subtitle:(0,d.t)("slides.templates.make_a_template.subtitle"),iconStyle:"makeATemplate",dataTestId:"make-a-template"}),1===n.length&&n[0]?.id==="start_from_scratch")?[]:n},[p,u,c,m,e,t,b,h]);return(0,i.jsx)(f,{buttons:C,editorType:a._YF.SLIDES,wrapperStyle:n?"start_from_row--wrapper--NoxFQ":void 0})}},546122:(e,t,n)=>{n.d(t,{Z:()=>m,z:()=>i});var i,s=n(104076),a=n(420680),r=n(739713),l=n(511570),o=n.n(l),d=n(236631),c=n(192075),u=n(405817),p=n(692769);function m({title:e,onClick:t,children:n,isLoading:l,publisherName:m,showSeparator:h=!0}){return(0,s.jsxs)("div",{className:o()(d.s.borderBox.flex.flexRow.itemsCenter.p8.minH48.$,{[p.me]:h}),children:[(0,s.jsx)(a.K,{"aria-label":(0,c.t)("slides.templates.back"),onClick:t,children:(0,s.jsx)(r.C,{"data-not-draggable":!0,"data-does-not-dismiss-modal":!0})}),(0,s.jsxs)("div",{className:p.Tn,children:[l?(0,s.jsx)(u.v8,{}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.TemplateTitle,{title:e}),m&&(0,s.jsx)(i.MetadataPublisher,{publisherName:m})]}),n]})]})}(e=>{e.TemplateTitle=function({title:e}){return(0,s.jsxs)("div",{className:p.GM,children:[(0,c.tx)("slides.templates.templates_modal.templates_title"),(0,s.jsx)("span",{className:p.HE,children:" / "}),e]})},e.MetadataPublisher=function({publisherName:e}){return(0,s.jsx)("div",{className:p.m_,children:(0,c.tx)("slides.templates.templates_modal.published_by",{publisherName:e})})}})(i||(i={}))},898821:(e,t,n)=>{n.d(t,{E:()=>C});var i=n(716976),s=n(237420),a=n(266808),r=n(170627),l=n(264993),o=n(812714),d=n(361170),c=n(192075),u=n(921540),p=n(619070),m=n(285626),h=n(354114),f=n(211862),g=n(331497),x=n(616802),_=n(722555),y=n(388190),v=n(76635),b=n(625635);function C({libraryKey:e,modules:t}){let n=(0,f.q5)(),C=(0,v.r$)(),j=(0,v.m4)(),k=(0,s.wA)(),w=(0,b.e)(),E=(0,g.ut)(a.Ez5?.canvasGrid().canvasGridArray,[]),T=(0,x.D)(e);return(0,i.useCallback)(()=>{let e=t[0];if(!t.length||!e)return;let i=function({focusedNodeId:e,canvasGrid:t}){let n={row:0,col:0},i=t.flat().length>0,s=a.Ez5?.getInsertGridCoord({x:-1/0,y:-1/0})??n;if(e&&e!==l.AD){let t=a.Ez5?.canvasGrid().coordForChild(e)??n;s={row:t.row,col:t.col+1}}else s=i?{row:(a.Ez5?.canvasGrid().getLastChildCoord()??n).row+1,col:0}:n;return s}({focusedNodeId:w,canvasGrid:E});j(),k((0,m.yy)({modules:t,canvasPosition:new d.Mi,percentageOffset:new d.Mi,insertAsChildOfCanvas:!0,afterSlideModulesInsertion:(e,t)=>{r.l7.user("add-all-slides",()=>{e.forEach((e,n)=>{(0,y.h0)({module:e,insertedItems:t[n]??[],viewType:C,getGridCoord:()=>({row:i.row,col:i.col+n}),subscribeToLibrary:T})});let n=t[0]?.[0];n&&(0,_.fL)(n),h.Y5.commit()})}})),r.l7.user("add-all-slides",()=>{a.Ez5?.slideThemeLibBindings().setDocumentTemplateLibraryKey(e.library_key)}),function({dispatch:e,openFile:t,firstModule:n,hasSlides:i}){(0,o.kc)().piper_auto_rename&&t?.key&&n?.file_name&&!i&&t.name===(0,c.t)("fullscreen.fullscreen_view_selector.untitled")&&e(p.Nw({file:{key:t.key},name:n.file_name}))}({openFile:n,firstModule:e,hasSlides:!!E.flat().length,dispatch:k}),function({dispatch:e,firstModule:t}){t?.isHubFile&&t?.hub_file_id&&e((0,u.k8)({hubFileId:t.hub_file_id})),(0,y.qm)(e,t)}({dispatch:k,firstModule:e})},[w,E,j,k,t,C,T,n])}},42499:(e,t,n)=>{n.d(t,{N:()=>p});var i=n(716976),s=n(926653),a=n(795033),r=n(249586),l=n(411017),o=n(717828),d=n(996253),c=n(388190),u=n(76635);let p=()=>{let e=(0,l.fG)(),t=(0,u.r$)(),[n,p]=(0,a.fp)(d.bY),m=(0,o.JY)(),h=(0,a.Xr)(d.DM);return(0,i.useCallback)(i=>{let{libraryKey:a}=e(i);a&&((0,r.Cu)({fileKey:a,name:"template_cover_tile",productType:"slides"}),t===c.Ji.OUTLINE_TO_DECK?(m.setTemplateLibraryKey((0,s.l)(a)),h(!1)):p({type:d.Vf.TEMPLATE,libraryKey:a,parentView:n}))},[e,t,n,m,p,h])}},926108:(e,t,n)=>{n.d(t,{v:()=>l});var i=n(716976),s=n(833805),a=n(395556),r=n(251843);function l(){let[{data:e,status:t}]=(0,s.IT)((0,r._)());return{shelves:(0,i.useMemo)(()=>e&&"loaded"===t?e.map(e=>{let t=e.shelf_content.map(t=>({type:a.n.HubFile,template:t,category:e.id}));return{shelfId:e.id,shelf:e,templates:t}}):[],[e,t]),status:t}}},311898:(e,t,n)=>{n.d(t,{DY:()=>K,Fr:()=>ee,Q7:()=>eu,yq:()=>Z});var i=n(104076),s=n(716976),a=n(237420),r=n(293422),l=n(322530),o=n(383424),d=n(433359),c=n(361248),u=n(913834),p=n(795033),m=n(120440),h=n(833805),f=n(397261),g=n(151240),x=n(192075),_=n(470876),y=n(141773),v=n(411017),b=n(211862),C=n(944350),j=n(530299),k=n(689016),w=n(395556),E=n(872769),T=n(598430),S=n(141330),I=n(578420),N=n(842582),A=n(405817),L=n(336206),M=n(577431),O=n(354621),R=n(996253),P=n(251843),D=n(76635),F=n(624622),z=n(834881),B=n(130489),G=n(944124),U=n(558571),V=n(579374);let H={filePickerGridContainer:{kmVPX3:"xf7z5ut",kg3NbH:null,kuDDbn:null,kE3dHu:null,kP0aTx:null,kpe85a:null,k8WAf4:null,kLKAdn:null,kGO01o:null,$$css:!0}};function K(){return(0,i.jsxs)("div",{className:"x78zum5 xdt5ytf x5yr21d",children:[(0,i.jsx)(W,{}),(0,i.jsx)(q,{})]})}function W(){return(0,i.jsx)("div",{className:"xi4r6k5 xpezlj7",children:(0,i.jsx)(L._8,{icon:(0,i.jsx)(f.w4,{size:16,type:f.y1.WHITEBOARD}),title:(0,x.t)("slides.templates.file_picker.title"),subtitle:(0,x.t)("slides.templates.file_picker.subtitle")})})}function q(){let{debouncedSearchQuery:e,status:t,files:n}=(0,D._8)(C._Y.WHITEBOARD);return!function({figFileSearchStatus:e}){let t=(0,a.d4)(e=>e.mirror.appModel.multiplayerSessionState===u.kul.JOINED),n=null===(0,b.tS)();return e===D.J_.LOADING||!t||!!n}({figFileSearchStatus:t})?t!==D.J_.SUCCESS?(0,i.jsx)(Y,{query:e,figFileSearchStatus:t}):(0,i.jsx)(o.P,{fill:!0,theme:{content:m.Ay.classNames(H.filePickerGridContainer)},children:(0,i.jsx)("div",{className:"xc8icb0 xrvj5dj x15vz560 x12lumcd",children:n.map(e=>(0,i.jsx)(F.xL,{file:e},e.key))})}):(0,i.jsx)(X,{})}function X(){return(0,i.jsxs)("div",{className:"xc8icb0 xrvj5dj x15vz560 x12lumcd xf7z5ut x1i71x30",children:[Array.from({length:6}).map((e,t)=>(0,i.jsx)(A.YQ,{},t)),(0,i.jsx)(A.YQ,{})]})}function Y({query:e,figFileSearchStatus:t}){let n=null;switch(t){case D.J_.NO_QUERY_RESULTS:n=(0,x.tx)("slides.templates.file_picker.no_files_match",{searchQuery:(0,i.jsx)("p",{className:"xrbesu5 x12cwyba x1l993ej x1ejgcx7 x1aos5ly x1akne3o",children:e})});break;case D.J_.NO_RECENT_FILES:n=(0,x.tx)("slides.templates.file_picker.no_recent_files")}return(0,i.jsx)("div",{className:"xuzfeq1 x8yk33q x1e00guj x18zpg43 x22v61l x1akne3o x78zum5 x6s0dn4 xl56j7k xh8yej3 x1m3v4wt x1sdyfia",children:n})}function Z({parentViewType:e}){return e===R.Vf.TEMPLATE?(0,i.jsx)(J,{}):(0,i.jsx)(Q,{})}function J(){let e=(0,p.md)(R.V6),{startAction:t,figjamFileKey:n}=(0,N.D)();return(0,i.jsx)($,{children:(0,i.jsx)(r.$n,{iconPrefix:(0,i.jsx)(d.m,{}),variant:"primary",onClick:t,disabled:!n||e.type===R.i6.NONE,children:(0,x.t)("slides.templates.file_picker.submit_button.generate")})})}function Q(){let e=(0,p.md)(R.V6),t=(0,p.Xr)(R.bY),n=(0,p.md)(R.oQ),a=s.useCallback(()=>{t({type:R.Vf.TEMPLATE_PICKER})},[t]);return(0,i.jsx)($,{children:(0,i.jsx)(r.$n,{variant:"primary",onClick:a,disabled:!n||e.type===R.i6.NONE,children:(0,x.tx)("slides.templates.file_picker.submit_button.pick_template")})})}function $({children:e}){return(0,i.jsxs)(ep,{children:[(0,i.jsx)(M.B,{}),e]})}function ee(){let{trimmedSearchQuery:e}=(0,D.$N)(),[t,n]=(0,p.fp)(R.ux),a=s.useCallback(e=>{n(t=>!e||t&&t===e?null:e)},[n]);return e?(0,i.jsx)(et,{selectedTemplateLibraryKey:t,toggleSelectedTemplateKey:a}):(0,i.jsx)(en,{selectedTemplateLibraryKey:t,toggleSelectedTemplateKey:a})}function et({selectedTemplateLibraryKey:e,toggleSelectedTemplateKey:t}){let n=(0,v.fG)();return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(ei,{}),(0,i.jsx)(o.P,{fill:!0,theme:{content:m.Ay.classNames(V.D.content)},children:(0,i.jsx)(z.j,{renderTemplateTile:({item:t})=>(0,i.jsx)(ed,{template:t,selectedTemplateKey:e}),onTemplateSelected:e=>t(n(e).libraryKey)})})]})}function en({selectedTemplateLibraryKey:e,toggleSelectedTemplateKey:t}){let n=function(){let e=(0,y.eE)(E.$A.Slides),[{data:t}]=(0,h.IT)((0,P._)()),{type:n,name:i}=(0,_.Gi)()??{};return s.useMemo(()=>{let s={};if(e.length>0&&(s["recents-tab"]={type:1,label:(0,x.t)("slides.templates.recents")}),t)for(let e of t)s[`hub-${e.id}-tab`]={type:2,shelf:e,label:e.title};return n&&i&&(s[n]={type:3,label:(0,x.t)("slides.templates.template_picker.header_with_name",{orgOrTeamName:i})}),s},[e,t,n,i])}(),a=s.useMemo(()=>Object.fromEntries(Array.from(Object.keys(n)).map(e=>[e,!0])),[n]),[r,o,d]=l.t.useTabs(a),{scrollPosition:c,scrollRef:u,onScrollFpl:p}=(0,D.d$)(R.Vf.TEMPLATE_PICKER);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(es,{tabPropsMap:r,tabManager:d,tabs:n}),(0,i.jsx)(ea,{selectedTemplateLibraryKey:e,toggleSelectedTemplateKey:t,tabPanelPropsMap:o,tabs:n,scrollPosition:c,scrollRef:u,onScrollFpl:p})]})}function ei({children:e}){return(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"xi4r6k5 xpezlj7",children:(0,i.jsx)(L._8,{icon:(0,i.jsx)("span",{className:"x1v9usgg x6jxa94 x78zum5 x6s0dn4 xl56j7k x7vbk4z xu5wzci",children:(0,i.jsx)(c.Q,{})}),title:(0,x.t)("slides.templates.template_picker.title"),subtitle:(0,x.t)("slides.templates.template_picker.subtitle")})}),e]})}function es({tabPropsMap:e,tabManager:t,tabs:n}){return(0,i.jsx)(ei,{children:(0,i.jsx)("div",{className:"xbfr8j9 x1vamu9a",children:(0,i.jsx)(l.t.TabStrip,{manager:t,children:Array.from(Object.entries(e)).map(([e,t])=>n[e]?(0,s.createElement)(l.t.Tab,{...t,key:e},n[e].label):null)})})})}function ea({selectedTemplateLibraryKey:e,toggleSelectedTemplateKey:t,tabPanelPropsMap:n,tabs:a,scrollPosition:r,scrollRef:o,onScrollFpl:d}){return(0,i.jsx)(i.Fragment,{children:Array.from(Object.entries(a).map(([a,c])=>{if(!n[a])return null;let u=null;switch(c.type){case 1:u=(0,i.jsx)(er,{selectedTemplateKey:e,onTemplateKeySelected:t,scrollPosition:r,scrollRef:o,onScrollFpl:d});break;case 2:u=(0,i.jsx)(el,{shelf:c.shelf,selectedTemplateKey:e,onTemplateKeySelected:t,scrollPosition:r,scrollRef:o,onScrollFpl:d});break;case 3:u=(0,i.jsx)(eo,{selectedTemplateKey:e,onTemplateKeySelected:t,scrollPosition:r,scrollRef:o,onScrollFpl:d})}return(0,s.createElement)(l.t.TabPanel,{...n[a],key:a},u)}))})}function er({selectedTemplateKey:e,onTemplateKeySelected:t,scrollPosition:n,scrollRef:s,onScrollFpl:a}){let r=(0,y.eE)(E.$A.Slides),{numColumns:l}=(0,V.d)(),d=(0,v.fG)(),c=(0,j.oh)(T.cd.fetchTemplatesMetadata.loadingKeyForPayload({key:E.$A.Slides}));return(0,i.jsx)(o.P,{fill:!0,ref:s,defaultScrollTop:n,onScroll:a,theme:{content:m.Ay.classNames(V.D.content)},children:c?(0,i.jsx)(B.H,{}):(0,i.jsx)(O.x,{items:r,columns:l,renderItem:({item:t})=>(0,i.jsx)(ed,{template:t,selectedTemplateKey:e}),onActivateItem:e=>t(d(e).libraryKey)})})}function el({shelf:e,selectedTemplateKey:t,onTemplateKeySelected:n,scrollPosition:a,scrollRef:r,onScrollFpl:l}){let{numColumns:d}=(0,V.d)(),c=(0,v.fG)(),u=s.useMemo(()=>e.shelf_content.map(t=>({type:w.n.HubFile,category:e.id,template:t})),[e]);return(0,i.jsx)(o.P,{fill:!0,ref:r,defaultScrollTop:a,onScroll:l,theme:{content:m.Ay.classNames(V.D.content)},children:(0,i.jsx)(O.x,{items:u,columns:d,renderItem:({item:e})=>(0,i.jsx)(ed,{template:e,selectedTemplateKey:t}),onActivateItem:e=>n(c(e).libraryKey)})})}function eo({selectedTemplateKey:e,onTemplateKeySelected:t,scrollPosition:n,scrollRef:a,onScrollFpl:r}){let{numColumns:l}=(0,V.d)(),d=(0,v.fG)(),{templatesByTeam:c,isLoading:u,requestLoadMoreTemplates:p}=(0,k.c)({templateSize:10,teamSize:4}),h=s.useRef(null);return((0,g.X)({containerRef:a,targetRef:h,onIntersectionChange:({isIntersecting:e})=>{e&&p()}}),c)?(0,i.jsxs)(o.P,{fill:!0,ref:a,defaultScrollTop:n,onScroll:r,theme:{root:m.Ay.classNames(V.D.content)},children:[u&&0===c.length?(0,i.jsx)(B.H,{}):c.map(n=>(0,i.jsx)(G.W,{sectionHeaderTitle:n.teamName??"",children:(0,i.jsx)(O.x,{columns:l,items:n.templates,renderItem:({item:t})=>(0,i.jsx)(U.al,{template:t,borderStyle:e===d(t).libraryKey?"brand":void 0},t.template.id),onActivateItem:e=>t(d(e).libraryKey)})},n.teamId)),(0,i.jsx)("div",{ref:h})]}):null}function ed({template:e,selectedTemplateKey:t}){let n=(0,v.fG)();return(0,i.jsx)(U.al,{template:e,borderStyle:t===n(e).libraryKey?"brand":void 0},e.template.id)}var ec=(e=>(e[e.RECENTS=1]="RECENTS",e[e.HUB_FILE=2]="HUB_FILE",e[e.TEAM_TEMPLATES=3]="TEAM_TEMPLATES",e))(ec||{});function eu(){let e=(0,p.md)(R.ux),{startAction:t,figjamFileKey:n}=(0,N.D)(),s=(0,x.t)(e?"slides.templates.template_picker.submit.button.with_template":"slides.templates.template_picker.submit.button.without_template");return(0,i.jsx)(ep,{children:(0,i.jsx)(r.$n,{iconPrefix:(0,i.jsx)(d.m,{}),variant:"primary",onClick:t,disabled:!n,children:s})})}function ep({children:e}){return(0,i.jsxs)("div",{className:"xh8yej3 x78zum5 x6s0dn4 x1qughib",children:[(0,i.jsx)(I.yi,{helpUrlVariant:S.JT.BOARD_TO_DECK}),(0,i.jsx)("div",{className:"x78zum5 x6s0dn4 x1nfngrj",children:e})]})}},635132:(e,t,n)=>{n.d(t,{M:()=>ec,j:()=>eu});var i=n(104076),s=n(716976),a=n(268389),r=n(795033),l=n(120440),o=n(140490),d=n(996253),c=n(383424),u=n(833805),p=n(395556),m=n(354621),h=n(42499),f=n(251843),g=n(76635),x=n(130489),_=n(558571),y=n(579374);function v({shelfId:e}){let[{data:t,status:n}]=(0,u.IT)((0,f.Q)(e)),{numColumns:s}=(0,y.d)(),a=(0,h.N)(),{scrollPosition:r,scrollRef:o,onScrollFpl:v}=(0,g.d$)(d.Vf.HUB_FILE);return(0,i.jsx)(c.P,{fill:!0,theme:{content:l.Ay.classNames(y.D.content)},ref:o,defaultScrollTop:r,onScroll:v,children:"loading"!==n&&t?(0,i.jsx)(m.x,{columns:s,items:t.shelf_content.map(t=>({type:p.n.HubFile,category:e,template:t})),renderItem:({item:e})=>(0,i.jsx)(_.al,{template:e},e.template.id),onActivateItem:a},e):(0,i.jsx)(x.H,{numItems:3*s,showTitlePlaceholder:!1})})}var b=n(151240),C=n(689016),j=n(944124);function k(){let{pickerViewType:e,numColumns:t,numTemplatesToPreview:n}=(0,y.d)(),{templatesByTeam:a,isLoading:o,requestLoadMoreTemplates:u}=(0,C.U)(e.type===d.Vf.TEAM?{queryType:"team",teamId:e.teamId}:{queryType:"org",numTemplatesPerTeam:n,filterByIds:null,includeMyTeamsOnly:!1}),p=(0,h.N)(),f=(0,s.useRef)(null),{scrollPosition:v,scrollRef:k,onScrollFpl:w}=(0,g.d$)(e.type);(0,b.X)({containerRef:k,targetRef:f,onIntersectionChange:({isIntersecting:e})=>{e&&u()}});let E=(0,r.Xr)(d.bY),T=s.useCallback((e,t)=>{E({type:d.Vf.TEAM,teamId:e,displayName:t})},[E]);return o?(0,i.jsx)(x.H,{numItems:3*t,showTitlePlaceholder:e.type===d.Vf.ORG}):a?(0,i.jsxs)(c.P,{fill:!0,ref:k,defaultScrollTop:v,onScroll:w,theme:{content:l.Ay.classNames(y.D.content)},children:[a.map(s=>{let a=e.type===d.Vf.ORG?s.teamName:void 0,r=s.totalTemplatesByTeam>n?()=>T(s.teamId,s.teamName??""):void 0;return(0,i.jsx)(j.W,{sectionHeaderTitle:a,sectionHeaderOnClick:r,children:(0,i.jsx)(m.x,{columns:t,items:s.templates,renderItem:({item:e})=>(0,i.jsx)(_.al,{template:e},e.template.id),onActivateItem:p})},s.teamId)}),(0,i.jsx)("div",{ref:f})]},e.type):null}var w=n(237420),E=n(266808),T=n(170627),S=n(361170),I=n(192075),N=n(977159),A=n(249586),L=n(211862),M=n(757887),O=n(96329),R=n(20226),P=n(616802),D=n(388190);function F({libraryKey:e}){let{numColumns:t,viewType:n}=(0,y.d)(),a=(0,g.NG)(e),{scrollPosition:r,scrollRef:o,onScrollFpl:u}=(0,g.d$)(d.Vf.TEMPLATE),p=s.useRef(new Map),h=s.useCallback(e=>t=>{void 0!==e&&(t?p.current.set(e,t):p.current.delete(e))},[]),f=s.useMemo(()=>a.data??[],[a.data]);return(0,i.jsx)(c.P,{fill:!0,ref:o,defaultScrollTop:r,onScroll:u,theme:{content:l.Ay.classNames(y.D.content)},children:"loading"===a.status?(0,i.jsx)(x.H,{numItems:3*t,showTitlePlaceholder:!1}):(0,i.jsx)(m.x,{columns:t,items:f,renderItem:({item:e})=>(0,i.jsx)(z,{ref:h(e.id),module:e,viewType:n}),onActivateItem:(e,t,n)=>{e.id&&p.current.get(e.id)?.onActivate(n)},actionOnPointerDown:!0,getItemLabel:(e,t)=>(0,I.t)("slides.templates.template_picker.slide_button.aria_label",{index:t+1,total:f.length})})})}let z=s.forwardRef(function({module:e,viewType:t},n){let{onModuleTileActivated:a,dragState:l}=function({module:e,viewType:t}){let n=(0,w.wA)(),i=(0,L.tS)(),a=(0,P.D)(e.library_key),l=function(){let e=(0,r.Xr)(d.VZ),t=(0,r.Xr)(d.Ei);return s.useCallback(()=>{e(!1),t(!1)},[e,t])}(),o=s.useCallback((i,s,r)=>{T.l7.user(B,()=>{(0,D.CH)({module:e,viewType:t,getGridCoord:E.Ez5?.getInsertGridCoord??(()=>({row:0,col:0})),dispatch:n,subscribeToLibrary:a})(i,s,r)})},[n,e,t,a]),{onInsertableResourcePointerDown:c,dragState:u}=(0,O.j)({resource:e,isList:!1,sourceForTracking:"slides-templates-panel",clickToInsert_DEPRECATED:!0,insertAsChildOfCanvas:!0,insertionCallback:o,afterSuccessfulInsert:l,selectAfterInsert:!1,allowKeyboardInsert:!0});return{onModuleTileActivated:s.useCallback(t=>T.l7.user(B,()=>{c(t),(0,A.Cu)({moduleId:e.id,moduleFileKey:(0,N.f)()(e),fileKey:i,name:"slide_template_tile",productType:"slides"})}),[c,e,i]),dragState:u}}({module:e,viewType:t}),o=t===D.Ji.PICKER,c=function(){let e=(0,r.md)(R.v2);return s.useMemo(()=>e?new S.Mi(E.CNR?.singleSlideThumbnailWidth()??0,E.CNR?.singleSlideThumbnailHeight()??0):void 0,[e])}();return s.useImperativeHandle(n,()=>({onActivate:a})),(0,i.jsxs)(i.Fragment,{children:[o?(0,i.jsx)(M.q,{dragState:l,isList:!1,overrideDragPreviewSize:c}):null,(0,i.jsx)(_._0,{module:e,showAddModuleOverlay:!l})]})}),B="insert-slide-module";var G=n(470876),U=n(944350),V=n(717828),H=n(405817),K=n(37214),W=n(926108),q=n(834881),X=n(293422),Y=n(913834),Z=n(141773),J=n(530299),Q=n(331497),$=n(806054),ee=n(872769),et=n(598430),en=n(171396);function ei({onClickTemplateCoverTile:e}){let{numColumns:t}=(0,y.d)(),n=(0,Z.eE)(ee.$A.Slides),a=(0,$.TI)(ee.$A.Slides),r=(0,J.oh)(et.cd.fetchTemplatesMetadata.loadingKeyForPayload({key:ee.$A.Slides})),l=n.slice(0,4),o=function(){let e=(0,w.wA)(),t=(0,L.q5)(),n=(0,G.J3)(),i=(0,G.JU)(n),a=n===G.kN.FILE_IN_DRAFTS,r=0===(0,Q.ut)(Y.Ez5?.canvasGrid()?.canvasGridArray,[]).length,l=s.useCallback(()=>{t&&(0,en.ZW)({dispatch:e,file:{key:t.key,name:t.name,folder_id:t.folderId,team_id:t.teamId,editor_type:t.editorType,parent_org_id:t.parentOrgId},source:"template-picker",fileNeedsMovingBeforePublish:a})},[e,t,a]);if(i&&!r)return l}(),d=o?(0,i.jsx)(X.$n,{onClick:o,recordingKey:"template-picker-publish-template",variant:"secondary",children:(0,I.t)("slides.templates.button.publish_template")}):void 0;return 0===a?null:(0,i.jsx)(j.W,{sectionHeaderTitle:(0,I.t)("slides.templates.recents"),sectionHeaderActions:d,children:r?(0,i.jsx)(x.H,{}):(0,i.jsx)(m.x,{columns:t,items:l,renderItem:({item:e})=>(0,i.jsx)(_.al,{template:e},e.template.id),onActivateItem:e})})}function es(){let{scrollPosition:e,scrollRef:t,onScrollFpl:n,resetScrollTop:a}=(0,g.d$)(d.Vf.ALL);return(0,s.useEffect)(()=>()=>a([d.Vf.ALL]),[a]),(0,i.jsx)(c.P,{fill:!0,theme:{content:l.Ay.classNames(y.D.content)},ref:t,defaultScrollTop:e,onScroll:n,children:(0,i.jsx)(ea,{})})}function ea(){let{numColumns:e,numTemplatesToPreview:t,viewType:n}=(0,y.d)(),s=(0,h.N)(),a=(0,r.Xr)(d.bY),{start:l}=(0,V.JY)(),{trimmedSearchQuery:o}=(0,g.$N)();return"loading"===status?(0,i.jsx)(H.kM,{removePadding:!0}):o?(0,i.jsx)(q.j,{renderTemplateTile:({item:e})=>(0,i.jsx)(_.al,{template:e},e.template.id),onTemplateSelected:s}):(0,i.jsxs)(i.Fragment,{children:[n===D.Ji.OVERLAY_MODAL&&(0,i.jsx)("div",{className:"xp6roeo",children:(0,i.jsx)(K.v,{onStartFromFigJamSelected:function(){a({type:d.Vf.FILE_PICKER,parentType:d.Vf.ALL})},onStartFromTextOutlineSelected:function(){l()},usePadding:!1})}),(0,i.jsxs)("div",{className:"x78zum5 xdt5ytf x1i71x30",children:[(0,i.jsx)(ei,{onClickTemplateCoverTile:s}),(0,i.jsx)(er,{numColumns:e,numTemplatesToPreview:t,onClickTemplateCoverTile:s}),(0,i.jsx)(el,{numColumns:e,numTemplatesToPreview:t,onClickTemplateCoverTile:s})]})]})}function er({numColumns:e,numTemplatesToPreview:t,onClickTemplateCoverTile:n}){let a=(0,r.Xr)(d.bY),{templates:l,isLoading:o,templateBrowseEntity:c,...u}=(0,G.wv)(U._Y.SLIDES,t),p=(u&&"numTemplatesForTeam"in u?u.numTemplatesForTeam:l.length)>=t,h=(0,s.useCallback)(()=>{if(c)switch(c.type){case"team":a({type:d.Vf.TEAM,teamId:c.entity.id,displayName:c.entity.name});break;case"org":a({type:d.Vf.ORG})}},[c,a]);return!o&&l.length&&c?(0,i.jsx)(j.W,{sectionHeaderTitle:c.entity.name,sectionHeaderOnClick:p?h:void 0,children:o?(0,i.jsx)(x.H,{}):(0,i.jsx)(m.x,{columns:e,items:l,renderItem:({item:e})=>(0,i.jsx)(_.al,{template:e},e.template.id),onActivateItem:n})}):null}function el({numColumns:e,numTemplatesToPreview:t,onClickTemplateCoverTile:n}){let{shelves:s,status:a}=(0,W.v)(),l=(0,r.Xr)(d.bY);return"loaded"!==a?null:(0,i.jsx)(i.Fragment,{children:s.map(({shelf:s,templates:r})=>(0,i.jsx)(j.W,{sectionHeaderTitle:(0,I.Yd)(s.i18n_meta.title,s.title),sectionHeaderOnClick:r.length>t?()=>{l({type:d.Vf.HUB_FILE,shelfId:s.id})}:void 0,children:"loaded"!==a?(0,i.jsx)(x.H,{}):(0,i.jsx)(m.x,{columns:e,items:r.slice(0,t),renderItem:({item:e})=>(0,i.jsx)(_.al,{template:e},e.template.id),onActivateItem:n})},`shelf-${s.id}`))})}var eo=n(311898);function ed(){let e=(0,r.md)(d.bY);switch(e.type){case d.Vf.ALL:return(0,i.jsx)(es,{});case d.Vf.TEMPLATE:return(0,i.jsx)(F,{libraryKey:e.libraryKey});case d.Vf.TEAM:case d.Vf.ORG:return(0,i.jsx)(k,{});case d.Vf.HUB_FILE:return(0,i.jsx)(v,{shelfId:e.shelfId});case d.Vf.FILE_PICKER:return(0,i.jsx)(eo.DY,{});case d.Vf.TEMPLATE_PICKER:return(0,i.jsx)(eo.Fr,{});default:return null}}function ec(){let e=(0,s.useRef)(null);return(0,i.jsx)(o.u,{label:"SlidesTemplateModalPickerBody",children:(0,i.jsx)(a.nB,{scrolling:"manual",padding:0,ref:e,children:(0,i.jsx)(ed,{})})})}function eu(){return(0,i.jsx)(o.u,{label:"SlidesTemplateSidebarPickerBody",children:(0,i.jsx)("div",{className:"x5yr21d",children:(0,i.jsx)(ed,{})})})}},834881:(e,t,n)=>{n.d(t,{j:()=>x});var i=n(104076),s=n(716976),a=n(383424),r=n(73795),l=n(120440),o=n(151240),d=n(652539),c=n(192075),u=n(709615),p=n(354621),m=n(76635),h=n(558571),f=n(579374),g=n(625002);function x({renderTemplateTile:e,onTemplateSelected:t}){let{trimmedSearchQuery:n,isSearchQueryLoading:a,searchQueryResult:r,requestLoadMore:l}=(0,m.$N)(),{numColumns:o}=(0,f.d)();return((0,s.useEffect)(()=>{n&&!a&&u.Lj.announceTemplatesSearchResults(r.length,n)},[a,r.length,n]),a&&0===r.length)?null:0===r.length?(0,i.jsx)(y,{searchQuery:n}):(0,i.jsx)(_,{templates:r,numColumns:o,requestLoadMore:l,onTemplateSelected:t,renderTemplateTile:e})}function _({templates:e,numColumns:t,requestLoadMore:n,onTemplateSelected:r}){let l=e[e.length-1]?.template?.id,d=s.useRef(null),c=s.useRef(null);return(0,o.X)({containerRef:c,targetRef:d,targetKey:l,onIntersectionChange:n}),(0,i.jsx)(a.P,{fill:!0,ref:c,children:(0,i.jsx)(p.x,{columns:t,items:e,renderItem:({item:e})=>(0,i.jsx)(h.al,{template:e}),onActivateItem:e=>r(e)})})}function y({searchQuery:e}){return(0,i.jsxs)("div",{className:"xrlp15q x1nmd3yn xm735u9 xkbmbem x3wk4up x78zum5 x1iyjqo2 xdt5ytf x6s0dn4 xl56j7k x2b8uid xge78cn",children:[(0,i.jsx)(v,{}),(0,i.jsx)("div",{children:(0,c.tx)("slides.templates.search.empty",{searchTerm:(0,i.jsx)("span",{...l.Ay.props(r.g.textBodyMediumStrong),children:e})})}),(0,i.jsx)("div",{children:(0,c.tx)("slides.templates.search.empty.tip")})]})}function v(){return(0,i.jsx)(d.B,{className:"x1m3v4wt",svg:g.A,useOriginalSrcFills_DEPRECATED:!0})}},327931:(e,t,n)=>{n.d(t,{u:()=>b});var i=n(104076),s=n(716976),a=n(268389),r=n(795033),l=n(898821),o=n(996253),d=n(388190),c=n(76635),u=n(311898),p=n(293422),m=n(160444),h=n(511570),f=n.n(h),g=n(236631),x=n(192075),_=n(516813),y=n(692769);function v({createOutline:e,addAllSlides:t,disabled:n}){let{isCreateSlidesOutlineEnabled:s}=(0,_.mp)();return(0,i.jsxs)("div",{className:f()(g.s.flex.itemsCenter.justifyEnd.gap8.wFull.$,y.qr),children:[s&&(0,i.jsx)(p.$n,{iconPrefix:(0,i.jsx)(m.C,{}),variant:"secondary",onClick:e,disabled:n,children:(0,x.tx)("slides.templates.outline_with_template.button")}),(0,i.jsx)(p.$n,{variant:"secondary",onClick:t,disabled:n,children:(0,x.tx)("slides.templates.add_all_slides")})]})}function b(){let e=(0,r.md)(o.bY),t=(0,c.r$)(),n=null;switch(e.type){case o.Vf.TEMPLATE:t===d.Ji.OVERLAY_MODAL&&(n=(0,i.jsx)(C,{libraryKey:e.libraryKey}));break;case o.Vf.FILE_PICKER:n=(0,i.jsx)(u.yq,{parentViewType:e.parentType});break;case o.Vf.TEMPLATE_PICKER:n=(0,i.jsx)(u.Q7,{})}return null===n?null:(0,i.jsx)(a.wi,{children:n})}function C({libraryKey:e}){let t=(0,r.Xr)(o.bY),n=(0,r.Xr)(o.ux),a=(0,c.NG)(e),d=s.useMemo(()=>a.data||[],[a.data]),u=(0,l.E)({libraryKey:e,modules:d}),p=s.useCallback(()=>{d.length>0&&d[0]&&(n(d[0].library_key),t({type:o.Vf.FILE_PICKER,parentType:o.Vf.TEMPLATE}))},[d,n,t]),m="loading"===a.status,h=d.length>0;return(0,i.jsx)(v,{createOutline:p,addAllSlides:u,disabled:m||!h})}},725457:(e,t,n)=>{n.d(t,{du:()=>T,SE:()=>E});var i=n(104076),s=n(716976),a=n(268389),r=n(293422),l=n(420680),o=n(80969),d=n(434335),c=n(795033),u=n(120440),p=n(192075),m=n(352630);function h(e){let{title:t,headingId:n,headingLevel:s=2,onBack:a,backAriaLabel:r,actions:o,description:c,containerStyle:p,contentStyle:h,headerStyle:f,titleStyle:g,backButtonStyle:x,backButtonTrackingProperties:_,titleProps:y}=e,v=`h${s}`;return(0,i.jsxs)("div",{...u.Ay.props(p),children:[(0,i.jsxs)("div",{...u.Ay.props(h),children:[(0,i.jsxs)("div",{...u.Ay.props(f),children:[a&&(0,i.jsx)("div",{...u.Ay.props(x),children:_?(0,i.jsx)(m.Me,{"aria-label":r||"",onClick:a,trackingProperties:_,children:(0,i.jsx)(d.t,{})}):(0,i.jsx)(l.K,{type:"button","aria-label":r??"",onClick:a,children:(0,i.jsx)(d.t,{})})}),(0,i.jsx)(v,{id:n,...y,...u.Ay.props(g),children:t})]}),o]}),c]})}var f=n(470876),g=n(288747),x=n(944350),_=n(893393),y=n(546122),v=n(898821),b=n(996253),C=n(251843),j=n(388190),k=n(76635),w=n(579374);function E(){return(0,i.jsx)("div",{className:"xf7z5ut xso031l x1q0q8m5 xertd99",children:(0,i.jsx)(S,{showCloseButton:!1})})}function T(){return(0,i.jsx)(a.Y9,{children:(0,i.jsx)(S,{showCloseButton:!0})})}function S({showCloseButton:e}){let{pickerViewType:t}=(0,w.d)();switch(t.type){case b.Vf.ALL:return(0,i.jsx)(I,{showCloseButton:e});case b.Vf.ORG:return(0,i.jsx)(N,{});case b.Vf.TEAM:return(0,i.jsx)(A,{title:t.displayName});case b.Vf.TEMPLATE:return(0,i.jsx)(L,{libraryKey:t.libraryKey});case b.Vf.HUB_FILE:return(0,i.jsx)(M,{shelfId:t.shelfId});case b.Vf.FILE_PICKER:return(0,i.jsx)(O,{showCloseButton:e});case b.Vf.TEMPLATE_PICKER:return(0,i.jsx)(R,{showCloseButton:e});default:return null}}function I({showCloseButton:e}){let{searchQuery:t,setSearchQuery:n}=(0,k.$N)();return(0,i.jsx)(D,{searchQuery:t,setSearchQuery:n,showCloseButton:e,placeholder:(0,p.t)("slides.templates.search_templates")})}function N(){let e=(0,f.Gi)(),t=(0,c.Xr)(b.bY);return(0,i.jsx)(P,{title:e?.name??"",onBack:()=>t({type:b.Vf.ALL})})}function A({title:e}){let t=(0,g.dq)(),n=(0,c.Xr)(b.bY);return(0,i.jsx)(P,{title:e,onBack:()=>{t?n({type:b.Vf.ORG}):n({type:b.Vf.ALL})}})}function L({libraryKey:e}){let{viewType:t,pickerViewType:n}=(0,w.d)(),s=(0,c.Xr)(b.bY),a=(0,c.Xr)(b.ux),l=(0,c.Xr)(b.oQ),o=(0,k.NG)(e),d=(0,v.E)({libraryKey:e,modules:o.data??[]}),u=o.data??[];return(0,i.jsx)(P,{title:u[0]?.file_name??"",publisherName:u[0]?.publisher_name,onBack:()=>{s(n.type===b.Vf.TEMPLATE?n.parentView:{type:b.Vf.ALL}),a(null),l(null)},actions:t===j.Ji.PICKER?(0,i.jsx)(r.$n,{variant:"secondary",onClick:d,children:(0,p.tx)("slides.templates.add_all_slides")}):void 0})}function M({shelfId:e}){let t=(0,c.Xr)(b.bY),[{data:n,status:s}]=(0,_.IT)((0,C.Q)(e));return n&&"loaded"===s?(0,i.jsx)(P,{title:(0,p.Yd)(n.i18n_meta.title,n.title),onBack:()=>t({type:b.Vf.ALL})}):null}function O({showCloseButton:e}){let{pickerViewType:t}=(0,w.d)(),n=(0,c.Xr)(b.bY),{searchQuery:s,setSearchQuery:a}=(0,k._8)(x._Y.WHITEBOARD),r=(0,c.Xr)(b.oQ),[l,o]=(0,c.fp)(b.ux);return(0,i.jsx)(D,{searchQuery:s,setSearchQuery:a,placeholder:(0,p.t)("slides.templates.file_picker.search_files"),showCloseButton:e,onBack:()=>{t.type===b.Vf.FILE_PICKER&&(a(""),l&&t.parentType===b.Vf.TEMPLATE?n({type:b.Vf.TEMPLATE,libraryKey:l,parentView:{type:b.Vf.ALL}}):(n({type:b.Vf.ALL}),o(null),r(null)))}})}function R({showCloseButton:e}){let{trimmedSearchQuery:t,searchQuery:n,setSearchQuery:a}=(0,k.$N)(),r=(0,c.Xr)(b.bY),{pickerViewType:l}=(0,w.d)(),o=!!(l.type===b.Vf.TEMPLATE_PICKER&&l.figjamEntryPointData),d=s.useCallback(()=>{t&&a(""),r({type:b.Vf.FILE_PICKER,parentType:b.Vf.TEMPLATE_PICKER})},[r,t,a]);return s.useEffect(()=>{a("")},[a]),(0,i.jsx)(D,{searchQuery:n,setSearchQuery:a,placeholder:(0,p.t)("slides.templates.search_templates"),showCloseButton:e,onBack:o?void 0:d})}function P({title:e,publisherName:t,onBack:n,actions:s}){return(0,i.jsx)(h,{actions:s,backAriaLabel:(0,p.t)("slides.templates.back"),backButtonStyle:F.backButton,containerStyle:F.container,contentStyle:F.content,headerStyle:F.header,headingId:"slides-template-header-v2",onBack:n,title:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(y.z.TemplateTitle,{title:e}),!!t&&(0,i.jsx)(y.z.MetadataPublisher,{publisherName:t})]}),titleStyle:F.headerTitle})}function D({searchQuery:e,setSearchQuery:t,onBack:n,showCloseButton:s,placeholder:a}){return(0,i.jsxs)("div",{className:"xh8yej3 x9f619 x78zum5 x1q0g3np x6s0dn4 x1nfngrj xiifnmf xeuugli",children:[!!n&&(0,i.jsx)(l.K,{size:"md",variant:"ghost",onClick:n,"aria-label":(0,p.t)("slides.templates.back"),children:(0,i.jsx)(d.t,{})}),(0,i.jsx)("div",{...{0:{className:"x1iyjqo2"},1:{className:"x1iyjqo2 x1cmmqis"}}[!!s<<0],children:(0,i.jsx)(o.D,{id:"slides-template-search-bar",value:e,onChange:t,placeholder:a,size:"lg"})})]})}let F={container:{kzqmXN:"xh8yej3",kB7OPa:"x9f619",$$css:!0},content:{k1xSpc:"x78zum5",kXwgrk:"x1q0g3np",kGNEyG:"x6s0dn4",kjj79g:"x1qughib",kOIVth:"x1nfngrj",khm7nJ:null,k1C7PZ:null,$$css:!0},header:{k1xSpc:"x78zum5",kXwgrk:"x1q0g3np",kGNEyG:"x6s0dn4",kOIVth:"x1nfngrj",khm7nJ:null,k1C7PZ:null,kzQI83:"xiifnmf",k7Eaqz:"xeuugli",$$css:!0},headerTitle:{k1xSpc:"x78zum5",kXwgrk:"x1q0g3np",kGNEyG:"x6s0dn4",kVQacm:"xb3r6kr",kXHlph:null,kORKVm:null,kg5iWk:"xlyipyv",khDVqt:"xuxw1ft",$$css:!0},backButton:{k1xSpc:"x78zum5",kaIpWk:"x19y5rnk",krdFHd:null,kfmiAY:null,kVL7Gh:null,kT0f0o:null,kIxVMA:null,ksF3WI:null,kqGeR4:null,kYm2EN:null,$$css:!0}}},130489:(e,t,n)=>{n.d(t,{H:()=>o});var i=n(104076),s=n(716976),a=n(354621),r=n(558571),l=n(579374);function o({numItems:e,showTitlePlaceholder:t=!0}){let{numColumns:n}=(0,l.d)(),o=s.useMemo(()=>Array.from({length:e??n},(e,t)=>t+1),[e,n]);return(0,i.jsx)(a.x,{columns:n,items:o,renderItem:()=>(0,i.jsx)(r.YH,{showTitlePlaceholder:t}),getItemLabel:e=>`${e}`})}},944124:(e,t,n)=>{n.d(t,{W:()=>c});var i=n(104076),s=n(120440),a=n(684742),r=n(780312),l=n(527494),o=n(352630);function d(e){let{title:t,onClick:n,recordingKey:d,actions:c,leading:u,trackingProperties:p,ariaLabel:m,headingLevel:h=3,chevron:f="large",containerStyle:g,headerStyle:x,buttonStyle:_,titleStyle:y,iconStyle:v}=e,b=`h${h}`;if(!n)return(0,i.jsxs)("div",{...s.Ay.props(g),children:[(0,i.jsxs)("div",{...s.Ay.props(x),children:[u,(0,i.jsx)(b,{...s.Ay.props(y),children:t})]}),c]});let C="small"===f?r.R:l.a;return(0,i.jsxs)("div",{...s.Ay.props(g),children:[p?(0,i.jsxs)(o.e6,{onClick:n,recordingKey:d,...s.Ay.props(_),trackingProperties:p,"aria-label":m,children:[u,(0,i.jsx)(b,{...s.Ay.props(y),children:t}),(0,i.jsx)(C,{...s.Ay.props(v)})]}):(0,i.jsxs)(a.E,{type:"button",onClick:n,"aria-label":m,...s.Ay.props(_),children:[u,(0,i.jsx)(b,{...s.Ay.props(y),children:t}),(0,i.jsx)(C,{...s.Ay.props(v)})]}),c]})}function c(e){let{sectionHeaderTitle:t,sectionHeaderActions:n,sectionHeaderOnClick:s,children:a}=e;return(0,i.jsxs)("div",{className:"x78zum5 xdt5ytf",children:[t?(0,i.jsx)(d,{title:t,headingLevel:2,titleStyle:u.headerTitle,containerStyle:u.headerContainer,headerStyle:u.headerStyle,buttonStyle:u.buttonStyle,onClick:s,actions:n}):null,a]})}let u={headerContainer:{k1xSpc:"x78zum5",kGNEyG:"x6s0dn4",kjj79g:"x1qughib",koQZXg:"x1bvt8p6",keTefX:null,k71WvV:null,kGO01o:"xp6roeo",kpe85a:"xctkrei",kZCmMZ:null,kwRFfy:null,$$css:!0},headerTitle:{kMv6JI:"xxrns5j",kGuDYH:"x1q8tae1",k63SB2:"x1vg90ec",kLWn49:"x1eab18d",kb6lSQ:"x1yyillh",kE3dHu:"x8rdmch",kZCmMZ:null,kwRFfy:null,kMwMTN:"x1akne3o",kVQacm:"xb3r6kr",kXHlph:null,kORKVm:null,kg5iWk:"xlyipyv",khDVqt:"xuxw1ft",$$css:!0},buttonStyle:{k1xSpc:"x78zum5",kZKoxP:"x10w6t97",kB7OPa:"x9f619",kaIpWk:"x19y5rnk",krdFHd:null,kfmiAY:null,kVL7Gh:null,kT0f0o:null,kIxVMA:null,ksF3WI:null,kqGeR4:null,kYm2EN:null,kWkggS:"xv2f06h xcwp83q",kzqmXN:"xeq5yr9",ks0D6T:"x193iq5w",$$css:!0},headerStyle:{k1xSpc:"x78zum5",kZKoxP:"x10w6t97",kB7OPa:"x9f619",kGNEyG:"x6s0dn4",kzqmXN:"xh8yej3",$$css:!0}}},558571:(e,t,n)=>{n.d(t,{YH:()=>_,_0:()=>h,al:()=>m});var i=n(104076),s=n(716976),a=n(180),r=n(120440),l=n(686549),o=n(816565),d=n(192075),c=n(489175),u=n(411017),p=n(592726);function m(e){let{template:t,...n}=e,{imageUrl:s,name:a}=(0,u.fG)()(t);return(0,i.jsx)(f,{imgUrl:s??void 0,name:a,overlay:(0,i.jsx)("div",{className:"xrlp15q x1nmd3yn xm735u9 xkbmbem x3wk4up xu5wzci x1tk3asg x19y5rnk xf67zum",children:(0,d.t)("slides.templates.view_template")}),fallback:(0,i.jsx)("div",{className:"xh8yej3 x5yr21d x78zum5 x6s0dn4 xl56j7k x1v8gsql"}),...n})}function h(e){let{module:t,showAddModuleOverlay:n,...s}=e;return(0,i.jsx)(f,{imgUrl:t.thumbnail_url,overlay:n?(0,i.jsx)(a.$,{className:"xwa2v1s"}):void 0,appendCurrentUserId:!0,...s})}function f({imgUrl:e,name:t,borderStyle:n="default",overlay:a,fallback:d,appendCurrentUserId:u=!1}){let m=(0,p.TA)(),[h,f]=s.useState(!1),_=s.useMemo(()=>{if(e)return m&&u?(0,l.NQ)(e,"fuid",m):e},[e,m,u]);s.useEffect(()=>{f(!1)},[_]);let y=s.useCallback(()=>{f(!0)},[]),v=(!_||h)&&d;return(0,i.jsxs)("div",{className:"xh8yej3 x78zum5 xdt5ytf x1cy8zhl x1nfngrj",children:[(0,i.jsxs)("div",{...r.Ay.props(g.imageContainer,x[n]),children:[v?d:(0,i.jsx)(o.oW,{className:"xh8yej3 x5yr21d",onDragStart:c.wo,onError:y,src:_,alt:t,loading:"lazy"}),a&&(0,i.jsx)("div",{className:"template_cover_tile--imageOverlay--V-tX1",children:a})]}),t?(0,i.jsx)("div",{className:"xrlp15q x1nmd3yn xm735u9 xkbmbem x3wk4up x1akne3o xb3r6kr xlyipyv xuxw1ft xh8yej3",children:t}):null]})}let g={imageContainer:{kB7OPa:"x9f619",kaIpWk:"x19y5rnk",krdFHd:null,kfmiAY:null,kVL7Gh:null,kT0f0o:null,kIxVMA:null,ksF3WI:null,kqGeR4:null,kYm2EN:null,kMeerF:"x1qgsegg",k3XXqK:"xaatb59",kjBf7l:"xru40mv",kVQacm:"xb3r6kr",kXHlph:null,kORKVm:null,kVAEAm:"x1n2onr6",kzqmXN:"xh8yej3",kOBAk4:"x186iv6y",$$css:!0}},x={default:{kjBf7l:"xru40mv",$$css:!0},brand:{kMeerF:"x1de99jn",kjBf7l:"x166z8dh",$$css:!0}};function _({showTitlePlaceholder:e=!0}){return(0,i.jsxs)("div",{className:"xh8yej3 x78zum5 xdt5ytf x1cy8zhl x1nfngrj",children:[(0,i.jsx)("div",{className:"x19y5rnk x1v8gsql xh8yej3 x186iv6y"}),e&&(0,i.jsx)("div",{className:"xlup9mm x3hqpx7 x1v8gsql"})]})}},579374:(e,t,n)=>{n.d(t,{D:()=>d,d:()=>o});var i=n(716976),s=n(795033);n(120440);var a=n(996253),r=n(388190),l=n(76635);function o(){let e=(0,l.r$)(),t=(0,s.md)(a.bY),n=(0,l.r$)()===r.Ji.OVERLAY_MODAL?4:2,o=(0,l.fK)();return(0,i.useMemo)(()=>({viewType:e,numColumns:n,pickerViewType:t,numTemplatesToPreview:o}),[e,n,t,o])}let d={content:{kmVPX3:"x1nn34kk",kg3NbH:null,kuDDbn:null,kE3dHu:null,kP0aTx:null,kpe85a:null,k8WAf4:null,kLKAdn:null,kGO01o:null,kB7OPa:"x9f619",$$css:!0}}},318145:(e,t,n)=>{n.d(t,{g:()=>$,h:()=>J});var i=n(104076),s=n(716976),a=n(237420),r=n(266808),l=n(795033),o=n(511570),d=n.n(o),c=n(140490),u=n(587710),p=n(278491),m=n(111297),h=n(172996),f=n(344354),g=n(235711),x=n(520960),_=n(74620),y=n(211862),v=n(288747),b=n(331497),C=n(792028),j=n(872769),k=n(598430),w=n(141330),E=n(290407),T=n(441030),S=n(717828),I=n(382827),N=n(614806),A=n(746818),L=n(146169),M=n(773494),O=n(932738),R=n(929302),P=n(950187),D=n(268389),F=n(983500),z=n(236631),B=n(354174),G=n(635132),U=n(327931),V=n(725457),H=n(76635),K=n(404343);function W({children:e}){let{canDismiss:t,maybeUseLightTemplateOnDismiss:n}=(0,H.vN)();return(0,i.jsx)(B.d_,{className:d()("slides_template_modal--templateModal--GmDGm",p.Qx),size:(0,F.hG)(K.uRR),onHide:n,tintedModalBackground:!0,disableClickOutsideToHide:!t,enableEscapeToClose:t,"data-testid":"slides-template-modal",children:(0,i.jsx)("div",{className:z.s.overflowHidden.$,style:{height:"600px"},children:e})})}function q(){let{maybeUseLightTemplateOnDismiss:e}=(0,H.vN)(),t=R.wQ({defaultOpen:!0,onClose:e});return(0,i.jsx)(P.bL,{width:(0,F.hG)(K.uRR),height:"fixed",manager:t,"data-testid":"slides-template-modal",children:(0,i.jsxs)(D.vo,{style:{height:600},children:[(0,i.jsx)(V.du,{}),(0,i.jsx)(G.M,{}),(0,i.jsx)(U.u,{})]})})}var X=n(996253),Y=n(388190),Z=n(692769);function J(){return(0,i.jsx)(c.u,{label:"SlidesTemplatePicker",children:(0,i.jsx)(Q,{})})}function Q(){let[e,t]=(0,l.fp)(X.Ei),{top:n,left:r,height:o,width:c}=(0,Y.do)(),h=(0,a.wA)(),f=(0,v.sZ)(),g=s.useRef(null),_=(0,Y.xP)();return((0,M.Y)(()=>{_||t(!1)},{closeOnEsc:!0,ignore:[g,(0,x.Tc)("slides-template-button"),(0,x.Tc)(N.G),(0,x.Tc)(L.l)]}),(0,s.useEffect)(()=>{h(k.cd.fetchTemplatesMetadata({key:j.$A.Slides,orgId:f?.id})),h(u.sz({shelfType:C.cS.SLIDES_TEMPLATE_MODAL}))},[f?.id,h]),!e||_)?null:(0,i.jsx)(m.fu,{name:"Slides Template Picker",children:(0,i.jsx)("div",{className:d()(Z.ij,p.Dm),style:{top:n,left:r,width:c,height:o},ref:g,"data-testid":"slides-template-picker",children:(0,i.jsx)(H.Jn.Provider,{value:Y.Ji.PICKER,children:(0,i.jsx)(O.q,{})})})})}function $(){let e=(0,_.p8)("isReadOnly"),t=(0,I.jY)(),n=!!(0,H.S7)(),s=(0,b.ut)(r.Ez5?.canvasGrid().canvasGridArray,[]).flat().length>0,a=(0,l.md)(X.q7),o=(0,I.EI)(),d=(0,l.md)(f.D),c=(0,l.md)((0,g.r1)(A.Kt)).data,u=(0,l.md)(X.VZ),p=(0,l.md)(h.u2),{state:x}=(0,E.wj)(w.JT.BOARD_TO_DECK),v=(0,y.tS)(),C=(0,S.wd)();return a||p&&p.fileKey&&!a||e||!c||C||!o||t||n||s||d&&d!==T.DFF.id&&!u||x===E.qy.RUNNING?null:(0,i.jsx)(m.fu,{name:"Slides Template Overlay Modal",properties:{productType:"slides",fileKey:v},children:(0,i.jsx)(H.Jn.Provider,{value:Y.Ji.OVERLAY_MODAL,children:(0,Y.xP)()?(0,i.jsx)(q,{}):(0,i.jsx)(W,{children:(0,i.jsx)(O.q,{showCloseButton:!0})})})})}},624622:(e,t,n)=>{n.d(t,{gT:()=>T,xL:()=>N});var i=n(104076),s=n(237420),a=n(266808),r=n(795033),l=n(511570),o=n.n(l),d=n(449572),c=n(140490),u=n(397261),p=n(849757),m=n(236631),h=n(192075),f=n(211862),g=n(592726),x=n(944350),_=n(59849),y=n(245653),v=n(405817),b=n(476721),C=n(31296),j=n(336206),k=n(996253),w=n(76635),E=n(692769);function T(e){return(0,i.jsx)(c.u,{label:"FilePickerView",children:(0,i.jsx)(S,{...e})})}function S({showCloseButton:e}){let[t,n]=(0,r.fp)(k.bY),{files:s,searchQuery:a,debouncedSearchQuery:l,setSearchQuery:d,status:c}=(0,w._8)(x._Y.WHITEBOARD),[p,f]=(0,r.fp)(k.ux),g=(0,r.Xr)(k.oQ),{showSeparator:_}=(0,w.gH)();return t.type!==k.Vf.FILE_PICKER?null:(0,i.jsxs)(b.Y,{dataTestId:"file-picker-view",children:[(0,i.jsx)(j.ui,{searchQuery:a,setSearchQuery:d,onBack:function(){t.type===k.Vf.FILE_PICKER&&(p&&t.parentType===k.Vf.TEMPLATE?n({type:k.Vf.TEMPLATE,libraryKey:p,parentView:{type:k.Vf.ALL}}):(n({type:k.Vf.ALL}),f(null),g(null)))},showCloseButton:!!e,placeholder:(0,h.t)("slides.templates.file_picker.search_files")}),(0,i.jsx)("div",{className:o()(m.s.pt16.pb24.px16.flex.flexColumn.gap2.$,{[E.me]:_}),children:(0,i.jsx)(j._8,{icon:(0,i.jsx)(u.w4,{size:16,type:u.y1.WHITEBOARD}),title:(0,h.t)("slides.templates.file_picker.title"),subtitle:(0,h.t)("slides.templates.file_picker.subtitle")})}),(0,i.jsx)(I,{status:c,debouncedSearchQuery:l,files:s}),t.parentType===k.Vf.TEMPLATE?(0,i.jsx)(C.X_,{}):(0,i.jsx)(C.jc,{})]})}function I({status:e,debouncedSearchQuery:t,files:n}){let{scrollPosition:r,scrollRef:l,onScroll:d}=(0,w.d$)(k.Vf.FILE_PICKER),{onShowSeparatorScroll:c}=(0,w.gH)(),u=(0,s.d4)(e=>e.mirror.appModel.multiplayerSessionState===a.kul.JOINED),h=null===(0,f.tS)();return e===w.J_.LOADING||!u||h?(0,i.jsx)(v.yx,{}):e!==w.J_.SUCCESS?(0,i.jsx)("div",{className:m.s.flex.itemsCenter.justifyCenter.hFull.wFull.colorText.textBodyLarge.pre.$,children:(0,i.jsx)(L,{debouncedSearchQuery:t,status:e})}):(0,i.jsx)(p.P,{className:o()(m.s.px8.hFull.$),onScroll:(e,t)=>{d(e,t),c(e,t)},scrollContainerRef:l,initialScrollTop:r,children:(0,i.jsx)("div",{className:o()(E.Vg,m.s.pb12.$),children:n.map(e=>(0,i.jsx)(N,{file:e},e.key))})})}function N(e){return(0,i.jsx)(c.u,{label:"FileTile",children:(0,i.jsx)(A,{...e})})}function A({file:e}){let t=(0,g.iZ)(),[n,s]=(0,r.fp)(k.oQ),{disabled:a,tooltipText:l}=function(e){let t=(0,d.bc)(_.bgg,{fileKey:e});if("loaded"!==t.status)return{disabled:!0,tooltipText:void 0};if(t.data.file?.viewerExportRestricted&&t.data.file?.canEdit===!1)return{disabled:!0,tooltipText:(0,h.t)("slides.template.file_picker.viewer_export_restricted_disabled")};let n=t.data.file?.org,i=t.data.file?.sharedContainerSetting?.aiSetting==="enabled";if(null!=n&&(n?.k12GoogleOrg||!i))return{disabled:!0,tooltipText:(0,h.t)("slides.template.file_picker.ai_disabled.org")};let s=t.data.file?.team;return s?.aiFeaturesDisabledAt?{disabled:!0,tooltipText:(0,h.t)("slides.template.file_picker.ai_disabled.team")}:{disabled:!1,tooltipText:void 0}}(e.key);return(0,i.jsx)("div",{className:o()(m.s.pt8.px8.$,E.Fj),children:(0,i.jsx)(y.GQ,{activeFileUsers:[],currentUser:t,disableIconOverlays:!0,disabled:a,file:e,isSelected:!a&&n===e.key,onClick:t=>{t.stopPropagation(),a||s(e.key)},overrideOnClick:!0,subtitle:(0,i.jsx)(y.lJ,{file:e}),titleFontSize:11,tooltipText:l})})}function L({debouncedSearchQuery:e,status:t}){return t===w.J_.NO_QUERY_RESULTS?(0,h.tx)("slides.templates.file_picker.no_files_match",{searchQuery:(0,i.jsx)("p",{className:m.s.colorText.textBodyLargeStrong.$,children:e})}):t===w.J_.NO_RECENT_FILES?(0,i.jsx)("h1",{className:m.s.colorText.textBodyLarge.$,children:(0,h.tx)("slides.templates.file_picker.no_recent_files")}):null}},146169:(e,t,n)=>{n.d(t,{R:()=>h,l:()=>m});var i=n(104076),s=n(716976),a=n(293422),r=n(180),l=n(795033),o=n(90499),d=n(192075),c=n(349311),u=n(746818),p=n(76635);let m="toolbar-add-slide-button",h=s.forwardRef(function(e,t){let n=(0,l.md)(o.o),{toggleTemplatePicker:s}=(0,p.uu)();return n?null:(0,i.jsx)(a.$n,{ref:t,onClick:s,iconPrefix:(0,i.jsx)(r.$,{}),variant:"secondary",recordingKey:"toolbar.addSlideButton",htmlAttributes:{"data-testid":"addSlideButton","data-element-target":m,"data-onboarding-key":u.MB,"data-tooltip":(0,d.t)("slides.carousel.add-slide-from-template"),"data-tooltip-type":c.Ib.TEXT,"data-fullscreen-intercept":!0},...e,children:(0,d.tx)("slides.carousel.new_slide")})})},924150:(e,t,n)=>{n.d(t,{qM:()=>P,RS:()=>L,cR:()=>O,FT:()=>A});var i=n(104076),s=n(716976),a=n(420680),r=n(684742),l=n(293422),o=n(739713),d=n(225654),c=n(266808),u=n(795033),p=n(511570),m=n.n(p),h=n(191452),f=n(166887),g=n(641518),x=n(555013),_=n(581133),y=n(236631),v=n(192075),b=n(278491),C=n(249586),j=n(520960),k=n(354114),w=n(144386),E=n(349311),T=n(769887),S=n(773494);let I="slides_insert_embed_modal--sectionContainer--r1D85",N="slides_insert_embed_modal--recentPrototypeThumbnail--2N-ss",A=(0,u.eU)(-1),L="slide-insert-embed-modal-button";async function M({fileKey:e,nodeId:t}){let n=await (0,T.R)({fileKey:e});return n&&c.DCy?.getPrototypeFileStructureData(e,n,t)||{}}function O(){let e=(0,f.U)(),[t,n]=(0,u.fp)(A),a=(0,s.useRef)(null),r=(0,s.useCallback)((e=!1)=>{e&&k.Y5.triggerAction("set-tool-default",null),n(-1)},[n]);(0,S.Y)(()=>r(!0),{closeOnEsc:!0,ignore:[a,(0,j.Tc)(L)]});let[l,o]=(0,s.useState)(0),d=(0,s.useCallback)(async t=>{let n=(0,w.pb)(t),i=(0,w.zU)(t);if(!n)return;let s=await M({fileKey:n,nodeId:i});e("embedded_prototype_file_structure_data",{fileKey:n,nodeId:i,...s})},[e]),c=(0,s.useCallback)(e=>{k.Y5.triggerActionInUserEditScope("insert-interactive-element-into-active-slide",{type:"EMBED",url:e}),r(),d(e)},[r,d]),p=(0,h.O8)(),m=0===l?(0,v.t)("slides.flapp.embed.widget_modal_title"):(0,v.t)("slides.flapp.embed.prototype_modal_title");return(0,i.jsx)(P,{closeWidow:r,ref:a,center:t,children:(0,i.jsx)(D,{title:m,showBackButton:0!==l,onBackClicked:()=>o(0),onCloseClicked:r,children:0===l?(0,i.jsx)(F,{closeModal:r,navigateToPrototypeStep:()=>o(1)}):(0,i.jsx)(B,{recentPrototypes:p,onAddPrototypeRequested:c})})})}var R=(e=>(e[e.LANDING=0]="LANDING",e[e.PROTOTYPE=1]="PROTOTYPE",e))(R||{});let P=(0,s.forwardRef)(function(e,t){let[n]=(0,u.fp)(_.f),a=n?.current?.getBoundingClientRect(),r=(a?.height??0)>0,l=(0,s.useMemo)(()=>r?{bottom:window.innerHeight-(a?.y??0)+8}:{bottom:72},[r,a?.y]);return(0,i.jsx)("div",{ref:t,style:{position:"fixed",width:"fit-content",margin:"auto",left:e.center,transform:"translateX(-50%)",...l},className:m()("slides_insert_embed_modal--dockedToolbeltWindow--lJ7x1 text--fontPos13--xW8hS text--_fontBase--QdLsd",b.Dm),children:(0,i.jsx)("div",{style:{minWidth:e.minWidth??a?.width??396},children:e.children})})});function D({children:e,title:t,showBackButton:n,onBackClicked:s,onCloseClicked:r}){return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:m()("slides_insert_embed_modal--headerContainer--5xFbR",n?y.s.pl8.$:y.s.pl16.$),children:[(0,i.jsxs)("div",{className:y.s.textBodyMediumStrong.flex.itemsCenter.$,children:[n?(0,i.jsx)(a.K,{onClick:s,"aria-label":(0,v.t)("general.back"),children:(0,i.jsx)(o.C,{})}):null,(0,i.jsx)("p",{children:t})]}),(0,i.jsx)(a.K,{"aria-label":(0,v.t)("common.close"),onClick:r,children:(0,i.jsx)(d.X,{})})]}),(0,i.jsx)(U,{}),(0,i.jsx)("div",{className:"slides_insert_embed_modal--contentContainer--5pDam",children:e})]})}function F({closeModal:e,navigateToPrototypeStep:t}){let s=t=>{t(),e()},a="liveInteractionModal";return(0,i.jsxs)("div",{className:"slides_insert_embed_modal--widgetContainer--LvggL",children:[(0,i.jsx)("div",{className:y.s.textBodyMedium.colorTextSecondary.pb16.$,children:(0,v.tx)("slides.flapp.embed.widget_modal_description")}),(0,i.jsxs)("div",{className:"slides_insert_embed_modal--widgetGrid---WhKd",children:[(0,i.jsx)(z,{thumbnail:n(947615),title:(0,v.t)("slides.flapp.embed.widget_poll"),onSelected:()=>s(()=>k.Y5.triggerActionInUserEditScope("insert-interactive-element-into-active-slide",{type:"POLL"})),recordingKey:g.Pt(a,"poll")}),(0,i.jsx)(z,{thumbnail:n(795595),title:(0,v.t)("slides.flapp.embed.widget_stamps"),onSelected:()=>s(()=>k.Y5.triggerActionInUserEditScope("insert-interactive-element-into-active-slide",{type:"FACEPILE"})),recordingKey:g.Pt(a,"facepile")}),(0,i.jsx)(z,{thumbnail:n(317240),title:(0,v.t)("slides.flapp.embed.widget_alignment"),onSelected:()=>s(()=>k.Y5.triggerActionInUserEditScope("insert-interactive-element-into-active-slide",{type:"ALIGNMENT"})),recordingKey:g.Pt(a,"alignment")}),(0,i.jsx)(z,{thumbnail:n(377832),title:(0,v.t)("slides.flapp.embed.widget_prototype"),onSelected:t,recordingKey:g.Pt(a,"prototype")})]})]})}function z({thumbnail:e,title:t,onSelected:n,recordingKey:s}){return(0,i.jsxs)(r.E,{className:y.s.flex.flexColumn.gap8.$,onClick:n,recordingKey:s,children:[(0,i.jsx)("img",{className:"slides_insert_embed_modal--widgetThumbnail--u966s",src:e,alt:t,draggable:!1}),(0,i.jsx)("p",{className:y.s.wFull.textBodyMediumStrong.alignLeft.$,children:t})]})}function B({recentPrototypes:e,onAddPrototypeRequested:t}){return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(V,{}),(0,i.jsx)(K,{prototypes:e,maxCount:3,onPrototypeClick:t}),(0,i.jsx)(H,{onAddPrototypeUrlClicked:t})]})}function G({prototypeUrl:e,onClick:t}){let n=(0,w.Ik)(e),s=n||!e?void 0:(0,v.t)("slides.flapp.embed.add_button_invalid_link_tooltip");return(0,i.jsx)("div",{"data-tooltip-type":E.Ib.TEXT,"data-tooltip":s,"data-tooltip-show-above":!0,"data-tooltip-show-immediately":!0,children:(0,i.jsx)(l.$n,{variant:"primary",disabled:!n,onClick:()=>{e&&t(e.trim())},children:(0,v.tx)("slides.flapp.embed.add_button_label")})})}function U(){return(0,i.jsx)("div",{className:y.s.wFull.colorBgTertiary.h1.$})}function V(){return(0,i.jsx)("div",{className:m()(y.s.colorTextSecondary.textBodyMedium.$,I),children:(0,v.tx)("slides.flapp.embed.modal_description")})}function H({onAddPrototypeUrlClicked:e}){let[t,n]=(0,s.useState)(),a=(0,v.t)("slides.flapp.embed.add_prototype_link_hint",{prototype_link_prefix:(0,w.qS)()});return(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:y.s.textBodyMediumStrong.$,children:(0,v.tx)("slides.flapp.embed.add_prototype_link_header")}),(0,i.jsxs)("div",{className:"slides_insert_embed_modal--prototypePasteContainer--PozcZ",children:[(0,i.jsx)(x.ks,{className:"slides_insert_embed_modal--prototypeLinkInput--9Jynj",type:"url",onChange:e=>{n(e.target.value)},value:t,placeholder:a}),(0,i.jsx)(G,{prototypeUrl:t,onClick:()=>{t&&((0,C.Cu)({name:"slides.flapps.embed.add_prototype_link_button_clicked",fileKey:(0,w.pb)(t),productType:"slides"}),e(t))}})]})]})}function K({prototypes:e,maxCount:t,onPrototypeClick:n}){let a=(0,s.useMemo)(()=>e.data?.slice(-t)?.reverse(),[e,t]);return!a||a.length<1?null:(0,i.jsx)("div",{className:I,children:(0,i.jsxs)("div",{className:y.s.textBodyMediumStrong.$,children:[(0,v.tx)("slides.flapp.embed.recent_prototypes_header"),a.map(e=>(0,i.jsx)(W,{thumbnailUrl:e.thumbnail_url,title:e.name,subtitle:e.fig_file.name,onClick:()=>{(0,C.Cu)({name:"slides.flapps.embed.recent_prototype_tile_clicked",fileKey:e.file_key,productType:"slides"}),n(e.url)}},`${e.name}_${e.file_key}`))]})})}function W({thumbnailUrl:e,title:t,subtitle:n,onClick:s}){return(0,i.jsxs)(r.E,{className:"slides_insert_embed_modal--recentPrototypeTileContainer--ig9io",onClick:s,children:[e?(0,i.jsx)("img",{className:N,alt:"Prototype thumbnail",src:e,loading:"lazy",draggable:!1}):(0,i.jsx)("div",{className:N}),(0,i.jsxs)("div",{className:y.s.alignLeft.$,children:[(0,i.jsx)("p",{className:y.s.textBodyMediumStrong.$,children:t}),(0,i.jsx)("p",{className:y.s.textBodySmall.colorTextSecondary.$,children:n})]})]})}},792045:(e,t,n)=>{n.d(t,{Ix:()=>h,bs:()=>p,zF:()=>m});var i=n(104076),s=n(716976),a=n(795033),r=n(615257),l=n(236631),o=n(520960),d=n(354114),c=n(773494),u=n(924150);let p=(0,a.eU)(-1),m="slide-insert-shape-modal-button";function h({activateTool:e,activeToolId:t,areAnyShapesActive:n,shapes:h}){let[f,g]=(0,a.fp)(p),x=(0,s.useCallback)((e=!1)=>{e&&d.Y5.triggerAction("set-tool-default",null),g(-1)},[g]),_=(0,s.useRef)(null);return(0,c.Y)(()=>x(!n),{closeOnEsc:!0,ignore:[_,(0,o.Tc)(m)]}),(0,i.jsx)(u.qM,{closeWidow:x,ref:_,minWidth:152,center:f,children:(0,i.jsx)("div",{className:l.s.flex.flexWrap.p8.itemsCenter.contentCenter.gap8.$,style:{width:152},children:h.map(n=>(0,i.jsx)(r.$V,{tooltipText:n.text,tooltipShortcut:n.shortcutText,isActive:t===n.toolId,onMouseDown:()=>e(n.toolId),recordingKey:`slides-shape-${n.toolId}`,children:n.icon},n.toolId))})})}},438517:(e,t,n)=>{n.d(t,{E:()=>g});var i=n(237420),s=n(266808),a=n(795033),r=n(225125),l=n(965685),o=n(147046),d=n(850701),c=n(249586),u=n(772523),p=n(211862),m=n(684745),h=n(924150),f=n(792045);function g({logToggle:e}={}){let t=function(){let e=(0,i.wA)(),t=(0,a.Xr)(h.FT),n=(0,a.Xr)(f.bs);return()=>{e(o.oB()),e(d.XE()),e(d.Uv()),t(-1),n(-1)}}(),n=(0,m.Bk)(),x=(0,p.tS)(),{Sprig:_}=(0,r.A)();return i=>{(n||i!==s.nQ7.DESIGN)&&(t(),function(e){let t=a.zl.get(l.Kh);e===s.nQ7.DESIGN&&((0,u.NT)(s.FAf.DESIGN),t===s.NLJ.COMMENTS&&s.glU?.triggerAction("set-tool-default",null))}(i),i===s.nQ7.DESIGN?s.glU?.triggerAction("enter-slides-design-mode",null):s.glU?.triggerAction("enter-slides-mode",null),e&&i===s.nQ7.DESIGN?((0,c.Cu)({trackingContext:"slides_toggle_back_to_slides",productType:"slides",fileKey:x}),_("track","slides_toggle_back_to_slides")):e&&i===s.nQ7.SELF&&(0,c.Cu)({trackingContext:"slides_toggle_design",productType:"slides",fileKey:x}))}}},897024:(e,t,n)=>{function i(){return null}n.d(t,{V_:()=>o,Te:()=>r,Ab:()=>s,Ug:()=>l,oI:()=>a}),n(9109),n(903964),new(n(722458)).b({name:"string_management",dependencies:[],exports:{"./components":"./components.ts","./ast":"./ast.ts","./ast/schema":"./ast/schema.ts","./public_helpers":"./public_helpers.ts","./public_hooks":"./public_hooks.ts","./public_types":"./public_types.ts"},sideEffects:!1,friendFiles:[]});let s=i,a=i,r=i,l=i,o=i},832832:(e,t,n)=>{n.d(t,{gk:()=>a,go:()=>s,iA:()=>r});var i=n(266808);function s(e){if("TEXT"!==e.type)return!1;let t=e.getVariableConsumptionMap().TEXT_DATA;return null!=t&&null==t.isMixed&&t.type===i.Z_n.MANAGED_STRING_ALIAS}function a(e){return s(e)&&e.getVariableConsumptionMap().TEXT_DATA||null}n(156774);let r=Object.freeze({})},5822:(e,t,n)=>{n.d(t,{J7:()=>f,bY:()=>g,hG:()=>p,hQ:()=>m});var i=n(104076),s=n(716976),a=n(951002),r=n(266808),l=n(795033),o=n(246144),d=n(570756),c=n(851715),u=n(4521),p=(e=>(e[e.NONE=0]="NONE",e[e.SUMMARIZE_STICKIES=1]="SUMMARIZE_STICKIES",e[e.SORT_STICKIES_BY_TOPIC=2]="SORT_STICKIES_BY_TOPIC",e[e.SORT_STICKIES_BY_COLOR=3]="SORT_STICKIES_BY_COLOR",e[e.SORT_STICKIES_BY_AUTHOR=4]="SORT_STICKIES_BY_AUTHOR",e[e.SORT_STICKIES_BY_STAMP_COUNT=5]="SORT_STICKIES_BY_STAMP_COUNT",e[e.SORT_STICKIES_BY_STAMP_TYPE=6]="SORT_STICKIES_BY_STAMP_TYPE",e[e.MIND_MAP_GENERATE_IDEAS=7]="MIND_MAP_GENERATE_IDEAS",e))(p||{});let m=(0,l.eU)(0),h=(0,l.eU)(null,(e,t,n)=>{t(m,n)});function f(e){l.zl.set(h,e)}function g(){let[e,t]=(0,l.fp)(m),n=(0,s.useRef)(null),p=function(){let{summarizeCanvasSelection:e}=(0,u.ss)(r.cfv.ABOVE,void 0,"QUICK_ACTION"),t=(0,d.PX)(),{expandSelectedMindmapNode:n}=(0,c.S)();return i=>{switch(i){case 0:(0,o.xi)("AI Actions",'Unexpected AI action "none" requested');break;case 1:e();break;case 2:case 3:case 4:case 5:case 6:{let e=function(e){switch(e){case 2:return d.Uj.CLUSTER;case 3:return d.Uj.CLUSTER_BY_COLOR;case 4:return d.Uj.CLUSTER_BY_AUTHOR;case 5:return d.Uj.CLUSTER_BY_STAMP_COUNT;case 6:return d.Uj.CLUSTER_BY_STAMP_TYPE;default:return}}(i);if(!e){(0,o.xi)("AI Actions","Unexpected AI action requested",{action:i});return}t({type:e,disabled:!1,displayText:""});break}case 7:n();break;default:(0,a.xb)(i)}}}();return(0,s.useEffect)(()=>{(async()=>{if(0!==e&&e!==n.current){n.current=e;try{p(e),await new Promise(e=>setTimeout(e,1e3))}finally{t(0),n.current=null}}})()},[e,t,p]),(0,i.jsx)(i.Fragment,{})}},827651:(e,t,n)=>{n.d(t,{Cw:()=>C,Su:()=>v,v:()=>y});var i=n(104076),s=n(716976),a=n(276800),r=n(795033),l=n(192075),o=n(111297),d=n(422872),c=n(692042),u=n(143277),p=n(563554),m=n(6449),h=n(894981),f=n(654200),g=n(132078),x=n(441030),_=n(570756);let y=(0,r.eU)(!1),v="organize";function b({onClose:e}){let t=(0,_.Cb)(),n=(0,c.LE)({subscribeToUpdates_expensive:t});return s.useEffect(()=>{t||e()},[t,e]),(0,i.jsx)("div",{style:{opacity:n?0:1,transition:"ease-in-out 0.1s all"},children:(0,i.jsx)(g.Dv,{targetType:"dom",targetKey:v,topPadding:-6,isBold:!0,fixedWidth:316,arrowPosition:f.F_.BOTTOM,onTargetLost:a.lQ,children:(0,i.jsx)(h.mI,{bodyText:(0,i.jsx)("span",{style:{maxWidth:184},children:(0,l.tx)("whiteboard.organize_menu.onboarding_text_base",{boldText:(0,i.jsx)("b",{children:(0,l.tx)("whiteboard.organize_menu.onboarding_text_bold_text")})})}),buttonText:(0,l.tx)("whiteboard.organize_menu.onboarding_dismiss_button_text"),onButtonClick:()=>{e()}})})})}function C(){let[e,t]=(0,r.fp)(y),{show:n,isShowing:a,complete:l}=(0,d.e)({overlay:x.YiU,priority:u.N.SECONDARY_MODAL});return s.useEffect(()=>{n({canShow:()=>e})},[e,n]),(0,i.jsx)(m.M,{isShowing:a,testId:"FigJamAISummarizationEntrpointPointerOverlay",children:(0,i.jsx)(o.fu,{name:p.e0.AI_INLINE_MENU_ORGANIZE_SUMMARY_TOOLTIP,children:(0,i.jsx)(b,{onClose:()=>{t(!1),l()}})})})}},520447:(e,t,n)=>{n.d(t,{S:()=>b,o:()=>v});var i=n(104076),s=n(716976),a=n(240831);let r=(0,s.memo)(function(e){return(0,a.O)()?(0,i.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,"data-fpl-icon-size":"24L",children:(0,i.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",fillRule:"evenodd",d:"M12 4.5a7.5 7.5 0 0 0-7.484 7A.527.527 0 0 1 4 12a.48.48 0 0 1-.486-.5A8.5 8.5 0 0 1 19 7.177V5.5a.5.5 0 0 1 1 0v3a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1 0-1h1.845A7.5 7.5 0 0 0 12 4.5M7.5 16H5.655a7.5 7.5 0 0 0 13.829-3.5c.018-.275.24-.5.516-.5s.502.224.485.5A8.5 8.5 0 0 1 5 16.823V18.5a.5.5 0 0 1-1 0v-3a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 0 1m2-7a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 1 0V10h1.5v4H11a.5.5 0 0 0 0 1h2a.5.5 0 0 0 0-1h-.5v-4H14v.5a.5.5 0 0 0 1 0v-1a.5.5 0 0 0-.5-.5z",clipRule:"evenodd"})}):(0,i.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,"data-fpl-icon-size":"24L",children:(0,i.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",fillRule:"evenodd",d:"M11.5 4A7.5 7.5 0 0 0 4 11.5c0 .27-.213.5-.484.5h-.032A.477.477 0 0 1 3 11.53v-.03a8.5 8.5 0 0 1 16-4.004V5.5a.5.5 0 1 1 1 0v3a.5.5 0 0 1-.5.5h-3a.5.5 0 1 1 0-1h1.635A7.5 7.5 0 0 0 11.5 4m-4 12h-2a7.501 7.501 0 0 0 13.439-3.532.53.53 0 0 1 .515-.468.48.48 0 0 1 .484.53A8.501 8.501 0 0 1 5 16.978V18.5a.5.5 0 0 1-1 0v-3a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 0 1m2-7a.5.5 0 0 0-.5.5v.8a.5.5 0 0 0 1 0V10h1v3h-.3a.5.5 0 1 0 0 1h1.6a.5.5 0 0 0 0-1H12v-3h1v.3a.5.5 0 1 0 1 0v-.8a.5.5 0 0 0-.5-.5z",clipRule:"evenodd"})})});var l=n(266808),o=n(170627),d=n(812714),c=n(795033),u=n(192075),p=n(297869),m=n(553065),h=n(754446),f=n(200503),g=n(415567),x=n(426984),_=n(965815),y=n(892864);function v(e){let t=(0,g.uQ)()||"",n=(0,h.kl)("embedData"),i=decodeURIComponent(m.E7(n)?.originalText||""),a=(0,p.tq)(n),r=(0,c.Xr)(f.n);return s.useCallback(()=>{i&&(a(p.yc.CONVERT_TO_TEXT),r({type:"MINIMIZE"}),(0,o.l7)(e,"convert-embed-to-text",()=>l.glU?.replaceNodeWithText(t,i)))},[i,a,r,t,e])}function b(e){let t=(0,c.md)(f.n),n=(0,g.uQ)()||"",s=(0,h.kl)("embedData"),a=decodeURIComponent(m.E7(s)?.originalText||""),o=v(l.zkO.USER);return s&&n&&a&&(!t||e.inModal)?(0,d.kc)().figjam_a11y_inline_toolbar?(0,i.jsx)(x.V,{variant:"button",tooltip:(0,u.t)("whiteboard.embeds.inline_menu.change_back_to_text"),ariaLabel:(0,u.t)("whiteboard.embeds.inline_menu.change_back_to_text"),onClick:o,recordingKey:"embedConvertToTextControl",children:(0,i.jsx)(r,{})}):(0,i.jsx)(_.K0,{svg:y.A,active:"NONE",tooltip:(0,u.t)("whiteboard.embeds.inline_menu.change_back_to_text"),onClick:o,recordingKey:"embedConvertToTextControl"}):null}},889958:(e,t,n)=>{n.d(t,{e:()=>v,f:()=>y});var i=n(104076),s=n(716976),a=n(237420),r=n(232120),l=n(812714),o=n(795033),d=n(192075),c=n(952460),u=n(297869),p=n(553065),m=n(754446),h=n(200503),f=n(426984),g=n(965815),x=n(305639);let _=()=>{let e=(0,m.kl)("embedData");return decodeURIComponent(p.E7(e)?.url||p.E7(e)?.srcUrl||"")};function y(){let e=(0,a.wA)(),t=_(),n=(0,m.kl)("embedData"),i=(0,u.tq)(n);return s.useCallback(()=>{t&&(i(u.yc.OPEN_PREVIEW),e((0,c.RK)({rawInput:t})))},[t,e,i])}function v(e){let t=(0,o.md)(h.n),n=_(),s=y();return n&&(e.inModal||!t)?(0,l.kc)().figjam_a11y_inline_toolbar?(0,i.jsx)(f.V,{variant:"button",tooltip:(0,d.t)("whiteboard.embeds.inline_menu.open_link"),ariaLabel:(0,d.t)("whiteboard.embeds.inline_menu.open_link"),onClick:s,recordingKey:"embedOpenExternalControl",children:(0,i.jsx)(r.V,{})}):(0,i.jsx)(g.K0,{svg:x.A,active:"NONE",tooltip:(0,d.t)("whiteboard.embeds.inline_menu.open_link"),onClick:s,recordingKey:"embedOpenExternalControl"}):null}},55650:(e,t,n)=>{n.d(t,{nG:()=>V,tT:()=>q});var i=n(104076),s=n(716976),a=n(237420),r=n(276800),l=n(307829),o=n(962856),d=n(240803),c=n(324438);let u=(0,s.memo)(function(e){return(0,i.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,"data-fpl-icon-size":"24L",children:(0,i.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",fillRule:"evenodd",d:"M5.5 5h4a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-4a.5.5 0 0 1-.5-.5v-4a.5.5 0 0 1 .5-.5M4 5.5A1.5 1.5 0 0 1 5.5 4h4A1.5 1.5 0 0 1 11 5.5v4A1.5 1.5 0 0 1 9.5 11h-4A1.5 1.5 0 0 1 4 9.5zm12.015 7.94L15.5 15.5l-2.06.515c-.505.126-.505.844 0 .97l2.06.515.515 2.06c.126.505.844.505.97 0l.515-2.06 2.06-.515c.505-.126.505-.844 0-.97L17.5 15.5l-.515-2.06c-.126-.505-.844-.505-.97 0M9.5 14h-4a.5.5 0 0 0-.5.5v4a.5.5 0 0 0 .5.5h4a.5.5 0 0 0 .5-.5v-4a.5.5 0 0 0-.5-.5m-4-1A1.5 1.5 0 0 0 4 14.5v4A1.5 1.5 0 0 0 5.5 20h4a1.5 1.5 0 0 0 1.5-1.5v-4A1.5 1.5 0 0 0 9.5 13zm9-8h4a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-4a.5.5 0 0 1-.5-.5v-4a.5.5 0 0 1 .5-.5m-1.5.5A1.5 1.5 0 0 1 14.5 4h4A1.5 1.5 0 0 1 20 5.5v4a1.5 1.5 0 0 1-1.5 1.5h-4A1.5 1.5 0 0 1 13 9.5z",clipRule:"evenodd"})})});var p=n(812714),m=n(795033);n(120440);var h=n(188220),f=n(511570),g=n.n(f),x=n(219199),_=n(578854),y=n(856909),v=n(652539),b=n(236631),C=n(192075),j=n(171660),k=n(443192),w=n(111297),E=n(235711),T=n(349311),S=n(954741),I=n(973369);function N(){return(0,i.jsx)(o.E,{variant:"defaultFilled",size:"md",children:(0,C.tx)("qa.ai")})}var A=n(964549),L=n(792794),M=n(827651),O=n(426984),R=n(570756),P=n(965815),D=n(97919),F=n(726135),z=n(735248),B=n(759863),G=n(228231);let U="figjam_organize_sort_stickies_sub_menu",V="https://help.figma.com/hc/articles/16822138920343-Use-AI-tools-in-Figma",H="used_figjam_ai_quick_actions",K=(0,E.r1)(H);function W(e){switch(e){case R.Uj.SUMMARIZE:return"summarize";case R.Uj.CLUSTER:return"sort stickies";case R.Uj.CREATE_FIGMA_SLIDES_OUTLINE:return"copy to slides";case R.Uj.SEND_TO_MAKE_FROM_FIGJAM:return"send to make";case R.Uj.CLUSTER_BY_AUTHOR:return"sort by author";case R.Uj.CLUSTER_BY_COLOR:return"sort by color";case R.Uj.CLUSTER_BY_STAMP_COUNT:return"sort by stamp count";case R.Uj.CLUSTER_BY_STAMP_TYPE:return"sort by stamp type";case R.Uj.OPEN_CLUSTER_BY_MORE_MENU:return"sort by more dropdown button";case R.Uj.TIDY_UP:return"tidy up";case R.Uj.WRAP_IN_SECTION:return"wrap in section";default:return"other organize action"}}function q(){let e=(0,R.Yh)(),t=e.filter(e=>!e?.disabled&&!e?.isInClusterSubmenu),n=e.filter(e=>e?.disabled&&!e?.isInClusterSubmenu),r=(0,h.g)(),u=(0,R.PX)(),[f,g]=(0,m.fp)(R.Y),x=(0,R.Wb)(),_=(0,R.Pn)();s.useEffect(()=>x,[x]),s.useEffect(()=>{f||_()},[f,_]);let y=(0,R.z1)(),v=function(){let e=(0,R.Yh)(),t=(0,R.QL)(),n=(0,R.E0)(),i=[...e];for(let e of(n&&(i=[...i,...t]),i))if(e&&R.IW[e.type])return!0;return!1}(),j=(0,C.t)("whiteboard.inline_menu.organize_dropdown_options_aria_label"),E=[...t,...n],{getTriggerProps:S,manager:I}=l.b(),A=(0,a.wA)(),M=s.useCallback(e=>{u(e)},[u]),P=(0,L.CI)(),z=(0,m.md)(K).data;return(0,p.kc)().figjam_a11y_inline_toolbar?(0,i.jsx)(w.fu,{name:"organize_menu_dropdown",children:(0,i.jsxs)(l.bL,{manager:I,children:[(0,i.jsx)(O.V,{variant:"menu",getTriggerProps:()=>S({onClick:()=>{v&&A(k.b({[H]:!0}))}}),tooltip:(0,C.t)("whiteboard.inline_menu.organize_dropdown_button_aria_label"),ariaLabel:(0,C.t)("whiteboard.inline_menu.organize_dropdown_button_aria_label"),dataTestId:"inline_menu_organize_dropdown_button",recordingKey:"inline_menu_organize_dropdown_button",trackingProperties:{text:"organize dropdown button"},isMenuOpen:I.isOpen,children:(0,i.jsxs)("div",{className:"x78zum5 x6s0dn4 x1jnr06f",children:[(0,i.jsx)(c.t,{}),(0,C.tx)("whiteboard.inline_menu.organize_button_text"),!z&&P&&(0,i.jsx)(w.fu,{name:"organize_actions_onboarding_badge",children:(0,i.jsx)(o.E,{variant:"brandFilled",children:(0,C.t)("whiteboard.inline_menu.ai_quick_actions_onboarding_badge_2")})})]})}),(0,i.jsxs)(l.mc,{children:[(0,i.jsx)(l.YJ,{children:E.map(e=>{if(!e)return null;let{type:t,disabled:n,displayText:s,fplIcon:a,disabledTooltipText:r,tooltipOverrides:o}=e,c=o?.tooltip||(n&&r?r:void 0),u=o?.tooltipType||T.Ib.TEXT,p=(0,R.Ef)(e);return t===R.Uj.OPEN_CLUSTER_BY_MORE_MENU?(0,i.jsx)($,{disabled:n},t):(0,i.jsxs)(l.q7,{disabled:n,onClick:()=>M(e),recordingKey:J(t),"data-testid":J(t),"aria-label":s,htmlAttributes:{"data-tooltip":c,"data-tooltip-type":u,"data-tooltip-show-right":!0,"data-tooltip-text-left":!0,"data-tooltip-tip-align-left":!0},children:[a&&(0,i.jsx)(l.Q$,{children:(0,i.jsx)("div",{className:"x30jfuo",children:a})}),s,p&&(0,i.jsx)(l.Ov,{children:(0,i.jsx)(d.o,{eventListeners:["onClick","onPointerUp","onMouseUp"],children:(0,i.jsx)(N,{})})})]},t)})}),(0,i.jsx)(l.N_,{href:V,newTab:!0,trusted:!0,children:(0,i.jsx)(F._,{})})]})]})}):(0,i.jsx)(w.fu,{name:"organize_menu_dropdown",children:(0,i.jsx)(D.Fn,{OptionWrapper:function({children:e}){return(0,i.jsx)("div",{className:"organize_actions_control--flexColumn--p-Sra","aria-label":j,id:r,role:"listbox",tabIndex:-1,"data-fullscreen-intercept":!0,children:e})},additionalContentsBottom:(0,i.jsx)("div",{className:b.s.mt4.$}),additionalContentsTop:(0,i.jsx)("div",{className:b.s.mt4.$}),onChange:(e,t)=>{t.preventDefault(),t.stopPropagation(),u(e)},options:E,overrideMenuOpenState:{isOpenOverride:f,setIsOpenOverride:g},popoverClassName:"organize_actions_control--popover--l143N",positionX:e=>e.x,renderButton:({onClick:e,onKeyDown:t,ref:n})=>(0,i.jsx)(X,{disabled:!1,onClick:e,onKeyDown:e=>y(e,t),buttonRef:n,ariaWrapperId:r,trackingProperties:{text:"organize dropdown button"},dropdownContainsAiOption:v}),renderOption:Z,value:void 0})})}let X=(0,w.tf)(function({onClick:e,onKeyDown:t,buttonRef:n,ariaWrapperId:l,disabled:o,dropdownContainsAiOption:d}){let c=(0,a.wA)(),u=(0,m.md)(K).data,p=(0,L.CI)(),[h,f]=s.useState(0),x=(0,C.t)("whiteboard.inline_menu.organize_dropdown_button_aria_label");return(0,i.jsx)(P.$n,{ref:n,ariaControls:l,ariaLabel:x,buttonChildrenStyle:{justifyContent:"initial",width:"initial"},buttonStyle:{width:"auto",paddingRight:24},caret:"down",disabled:o,onClick:o?r.lQ:()=>{e(),d&&c(k.b({[H]:!0}))},onKeyDown:t,onboardingKey:M.Su,recordingKey:"inline_menu_organize_dropdown_button",role:"combobox",testId:"inline_menu_organize_dropdown_button",tooltip:o?I.w:void 0,tooltipType:o?T.Ib.SPECIAL:void 0,children:(0,i.jsxs)("div",{className:"organize_actions_control--withBadge--2qE6m",children:[(0,i.jsx)("div",{className:"organize_actions_control--buttonIconContainer--7BE5y",children:(0,i.jsx)(v.B,{svg:G.A,className:g()("organize_actions_control--svgIcon--Y27OU",{"organize_actions_control--svgIconDisabled--siNy6":o})})}),(0,C.tx)("whiteboard.inline_menu.organize_button_text"),!u&&p&&(0,i.jsx)(w.fu,{name:"organize_actions_onboarding_badge",children:(0,i.jsx)("div",{style:{paddingLeft:8},ref:e=>{f(e?.offsetWidth||h)},children:(0,i.jsx)(y.Ex,{text:(0,C.t)("whiteboard.inline_menu.ai_quick_actions_onboarding_badge_2"),color:y.zE.FIGJAM,size:y.vj.SMALL,className:"organize_actions_control--onboardingBadge--NG7o-",dataTestId:"figjam_ai_quick_actions_onboarding_badge"})})})]})})});function Y({isFocused:e}){let t=(0,L.v1)(),n=(0,R.PX)(),a=(0,R.QL)(),l=(0,m.md)(R.u3),[o,d]=(0,m.fp)(R.UI),[c,u]=(0,m.fp)(R.kw),[p,h]=s.useState(!1);return(s.useEffect(()=>{let e=setTimeout(()=>{h(!0)},200);return()=>{clearTimeout(e)}},[h]),s.useEffect(()=>{e?u(!0):u(!1)},[e,u]),t)?(0,i.jsxs)("div",{onMouseEnter:()=>{p&&d(!0)},onMouseLeave:()=>{d(!1)},"data-testid":"whiteboard_organize_sort_sub_menu_wrapper",children:[(0,i.jsx)(Q,{ariaLabel:(0,C.t)("whiteboard.inline_menu.arrange_stickies_dropdown_button_aria_label"),disabled:!1,displayText:(0,C.t)("whiteboard.inline_menu.sort_by_dropdown_button_text_2"),id:`${R.Uj.OPEN_CLUSTER_BY_MORE_MENU}-menu-option`,isAiOption:!1,isFocused:e,isSubMenu:!0,onClick:()=>{o||d(!o)},onKeyDown:()=>{d(!o)},svgSrc:z.A,trackingProperties:{text:W(R.Uj.OPEN_CLUSTER_BY_MORE_MENU)},type:R.Uj.OPEN_CLUSTER_BY_MORE_MENU},`${R.Uj.OPEN_CLUSTER_BY_MORE_MENU}-menu-option`),o&&(0,i.jsx)(w.fu,{name:U,children:(0,i.jsx)("div",{className:"organize_actions_control--submenuPopover--3lKOZ",children:(0,i.jsx)("div",{className:"organize_actions_control--submenuContainer--TmBn7",children:(0,i.jsx)(P.W1,{children:(0,i.jsx)("div",{className:b.s.flex.flexColumn.py6.w200.$,"aria-label":(0,C.t)("whiteboard.inline_menu.arrange_stickies_dropdown_button_aria_label"),role:"listbox",tabIndex:-1,"data-fullscreen-intercept":!0,children:a.map((e,t)=>Z({value:e,onClick:()=>n(e),onKeyDown:r.lQ,isSelected:!1,isFocused:l===t}))})})})})})]}):null}let Z=e=>{let{value:t,onClick:n,id:s,isFocused:a,onKeyDown:r}=e;if(!t)return null;let l=(0,R.Ef)(t),{type:o,disabled:d,displayText:c,svgSrc:u,disabledTooltipText:p,tooltipOverrides:m}=t,h=W(o);return o===R.Uj.OPEN_CLUSTER_BY_MORE_MENU?(0,i.jsx)(Y,{isFocused:a},R.Uj.OPEN_CLUSTER_BY_MORE_MENU):(0,i.jsx)(Q,{disabled:d,disabledTooltipText:p,displayText:c,id:s,isAiOption:l,isFocused:a,onClick:n,onKeyDown:r,svgSrc:u,tooltipOverrides:m,trackingProperties:{text:h},type:o},`${o}-menu-option`)};function J(e){return`inline_menu_organize_option-${e}`}let Q=(0,w.tf)(function({id:e,type:t,displayText:n,svgSrc:s,disabledTooltipText:a,disabled:l,onClick:o,onKeyDown:c,isFocused:u,tooltipOverrides:p,isAiOption:m,isSubMenu:h,ariaLabel:f}){let y=p?.tooltip||(l&&a?a:""),C=p?.tooltipType||T.Ib.TEXT;return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("div",{"aria-label":f??n,"aria-selected":"false",className:g()("organize_actions_control--optionContainer--RtoCw",{"organize_actions_control--optionContainerDisabled--mB76I":l,"organize_actions_control--optionContainerIsFocused--8x27n":u}),"data-tooltip":y,"data-tooltip-offset-x":6,"data-tooltip-show-right":!0,"data-tooltip-text-left":!0,"data-tooltip-tip-align-left":!0,"data-tooltip-type":C,id:e,role:"option",tabIndex:-1,children:(0,i.jsx)(S.c$,{children:(0,i.jsxs)("div",{className:b.s.flex.justifyBetween.itemsCenter.gap8.$,children:[(0,i.jsx)(j.E,{truncate:!0,children:n}),m&&(0,i.jsx)(d.o,{eventListeners:["onClick","onPointerUp","onMouseUp"],children:(0,i.jsx)(A.v,{location:"INLINE_TOOLBAR",hoverStyleClassName:g()({"organize_actions_control--aiBetaBadge--F1z9L":!l}),onPointerUp:()=>{(0,_.Lf)(V)||x.Ay.unsafeRedirect(V,"_blank")}})}),h&&(0,i.jsx)("span",{className:b.s.pl4.mr0.$,children:(0,i.jsx)(v.B,{svg:B.A})})]}),additionalStylesClassName:void 0,"data-testid":J(t),dataTestId:J(t),disabled:l,fullWidth:!0,height:32,ignoreCheck:!0,onKeyDown:l?r.lQ:c,onMouseUp:l?r.lQ:o,recordingKey:J(t),selected:!1,style:{width:"95%",marginBottom:0},svg:s,value:t},`option-${t}`)})})});function $({disabled:e}){let t=(0,L.v1)(),n=(0,R.QL)(),s=(0,R.PX)();return t?(0,i.jsx)(w.fu,{name:U,children:(0,i.jsxs)(l.g8,{children:[(0,i.jsxs)(l.ZP,{disabled:e,recordingKey:J(R.Uj.OPEN_CLUSTER_BY_MORE_MENU),"data-testid":J(R.Uj.OPEN_CLUSTER_BY_MORE_MENU),"aria-label":(0,C.t)("whiteboard.inline_menu.arrange_stickies_dropdown_button_aria_label"),children:[(0,i.jsx)(l.Q$,{children:(0,i.jsx)("div",{className:"x30jfuo",children:(0,i.jsx)(u,{})})}),(0,C.t)("whiteboard.inline_menu.sort_by_dropdown_button_text_2")]}),(0,i.jsx)(l.MJ,{children:(0,i.jsx)(l.YJ,{children:n.map(e=>{if(!e)return null;let{type:t,disabled:n,displayText:a,svgSrc:r}=e,o=(0,R.Ef)(e);return(0,i.jsxs)(l.q7,{disabled:n,onClick:()=>s(e),recordingKey:J(t),"data-testid":J(t),"aria-label":a,children:[r&&(0,i.jsx)(l.Q$,{children:(0,i.jsx)("div",{className:"x30jfuo",children:(0,i.jsx)(v.B,{svg:r})})}),a,o&&(0,i.jsx)(l.Ov,{children:(0,i.jsx)(d.o,{eventListeners:["onClick","onPointerUp","onMouseUp"],children:(0,i.jsx)(N,{})})})]},t)})})})]})}):null}},491943:(e,t,n)=>{n.d(t,{I:()=>s,p:()=>i});class i{constructor(){this.lastCursorLocations={},this.CANVAS_SPACE_SPEED_THRESHOLD=2,this.cursorHandsOnRight=new Set}getHandsOnRight(){return this.cursorHandsOnRight}updateSingleCursor(e,t,n){let i=this.lastCursorLocations[n];i&&(t.x>i.x+this.CANVAS_SPACE_SPEED_THRESHOLD&&this.cursorHandsOnRight.add(n),t.x<i.x-this.CANVAS_SPACE_SPEED_THRESHOLD&&this.cursorHandsOnRight.delete(n)),e[n]=t}updateCursors(e,t,n,i){let s={};for(let n of e)t.toString()!==n.sessionId&&this.updateSingleCursor(s,n.mouse.canvasSpacePosition,n.sessionId);for(let e of(n&&this.updateSingleCursor(s,{x:i.x,y:i.y},t.toString()),this.lastCursorLocations=s,this.cursorHandsOnRight.keys()))s[e]||this.cursorHandsOnRight.delete(e)}}function s(e,t){return e.has(t)}},787981:(e,t,n)=>{n.d(t,{p:()=>p});var i=n(104076),s=n(716976),a=n(225654);n(120440);var r=n(511570),l=n.n(r),o=n(431632),d=n(352630),c=n(192075),u=n(111297);let p=(0,s.memo)(function(e){let{leftContent:t,content:n,rightContent:s,trackingContext:r="DLT Banner",onClose:p,isFloatingBanner:f,shouldHide:g}=e;return(0,o.h8)({isFigjamDLTBanner:!0,bannerType:e.bannerType}),(0,i.jsx)(u.fu,{name:r,children:(0,i.jsxs)("div",{className:l()(f?"dlt_banner--floatingBanner--Gv-Xd":"dlt_banner--banner--nGI-J",{"dlt_banner--hide--MO-Ze":g}),children:[(0,i.jsx)(m,{leftContent:t}),(0,i.jsx)(h,{content:n}),s,s&&p&&(0,i.jsx)("div",{className:"x1xc55vz"}),p?(0,i.jsx)(d.Me,{"aria-label":(0,c.t)("common.close"),onClick:p,recordingKey:"dltBannerCloseButton",htmlAttributes:{"data-testid":"dltBannerCloseButton"},trackingEventName:"dlt_banner_closed",children:(0,i.jsx)(a.X,{})}):null]})})}),m=(0,s.memo)(function(e){let{icon:t,text:n}=e.leftContent??{},s=t&&(0,i.jsx)("div",{className:"dlt_banner--icon--gtxyL",children:t}),a=n&&(0,i.jsx)("b",{children:n});return(0,i.jsxs)("div",{className:l()("dlt_banner--leftContent--5Yk4A text--fontPos12--YsUAh text--_fontBase--QdLsd",n&&t?"dlt_banner--leftContentIconAndText--QjRmB":n?"dlt_banner--leftContentOnlyText--4VC-I":t?"dlt_banner--leftContentOnlyIcon--Nb45Y":"dlt_banner--leftContentEmpty--dXeoN"),children:[s,a]})}),h=(0,s.memo)(function(e){let{content:t}=e;return(0,i.jsx)("div",{className:"dlt_banner--mainContent--eTkSu text--fontPos12--YsUAh text--_fontBase--QdLsd",children:t})})},80852:(e,t,n)=>{n.d(t,{X:()=>Z,O:()=>en});var i=n(104076),s=n(716976),a=n(237420),r=n(276800),l=n(266808),o=n(812714),d=n(795033),c=n(511570),u=n.n(c),p=n(653899),m=n(681398),h=n(192075),f=n(443192),g=n(422872),x=n(477536),_=n(381059),y=n(235711),v=n(354114),b=n(968169),C=n(74620),j=n(143277),k=n(856520),w=n(951824),E=n(122559),T=n(919853),S=n(287211),I=n(147046),N=n(373235),A=n(506192),L=n(564941),M=n(61102),O=n(643330),R=n(337726);function P({dismissModal:e,targetKey:t=R.oi.ZOOM}){let n=(0,a.wA)(),r=(0,S.R)(({mirror:{appModel:e}})=>e.showUi),o=(0,A.Um)(),d=(0,s.useRef)(!1),c=(0,N.q)(),u=(0,s.useCallback)(()=>{e(),n(I.oB())},[e,n]);return(0,s.useEffect)(()=>{d.current&&!(0,L.TY)(o)&&e()},[e,o]),(0,s.useEffect)(()=>{if(c&&!d.current){if((0,L.TY)(o))n(I.ho({type:L.pi,data:{selectionToUpdate:l.m7W.PREFERENCES}}));else{let e=r?42:0;n(I.j7({type:L.pi,data:{targetRect:{top:0,right:e,bottom:e,left:0,width:e,height:e},togglePreferences:!0},hasOwnEscKeyHandler:!0}))}d.current=!0}},[n,o,c,r]),(0,i.jsx)(M.rq,{isShowing:!0,trackingContextName:"new_user_pan_zoom_pref_tooltip",onClose:u,targetKey:t,emphasized:!0,title:(0,h.tx)("mouse_controls_modal.new_user.title"),description:(0,h.tx)("mouse_controls_modal.new_user.description"),arrowPosition:O.F_.LEFT_TITLE})}var D=n(441030),F=n(787981);function z(){return(0,i.jsxs)("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",children:[(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.80079 15.0786V10.2857H5.80079V15.0786L6.94724 13.9322L7.65434 14.6393L5.30079 16.9928L2.94724 14.6393L3.65434 13.9322L4.80079 15.0786Z",fill:"#8638E5"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.80077 20.2071V25H4.80077V20.2071L3.65433 21.3536L2.94722 20.6464L5.30077 18.2929L7.65433 20.6464L6.94722 21.3536L5.80077 20.2071Z",fill:"#8638E5"}),(0,i.jsx)("path",{d:"M8.22183 11.7644C7.44078 10.9834 7.44078 9.71705 8.22183 8.93601C9.00288 8.15496 10.2692 8.15496 11.0503 8.93601L18.8284 16.7142L16 19.5426L8.22183 11.7644Z",fill:"white"}),(0,i.jsx)("path",{d:"M8.57538 11.4109C7.9896 10.8251 7.9896 9.87535 8.57538 9.28956C9.16117 8.70377 10.1109 8.70377 10.6967 9.28956L18.1213 16.7142L16 18.8355L8.57538 11.4109Z",stroke:"black",strokeOpacity:"0.9"}),(0,i.jsx)("path",{d:"M13.171 12.4716C12.39 11.6905 12.39 10.4242 13.171 9.64316C13.9521 8.86211 15.2184 8.86211 15.9995 9.64316L20.9492 14.5929L18.1208 17.4213L13.171 12.4716Z",fill:"white"}),(0,i.jsx)("path",{d:"M13.5246 12.118C12.9388 11.5322 12.9388 10.5825 13.5246 9.99671C14.1104 9.41093 15.0601 9.41093 15.6459 9.99671L20.2421 14.5929L18.1208 16.7142L13.5246 12.118Z",stroke:"black",strokeOpacity:"0.9"}),(0,i.jsx)("path",{d:"M15.9992 11.0574C15.2181 10.2764 15.2181 9.01002 15.9992 8.22897C16.7802 7.44793 18.0466 7.44793 18.8276 8.22897L23.0702 12.4716L20.2418 15.3L15.9992 11.0574Z",fill:"white"}),(0,i.jsx)("path",{d:"M16.3527 10.7038C15.7669 10.1181 15.7669 9.16831 16.3527 8.58253C16.9385 7.99674 17.8883 7.99674 18.474 8.58253L22.3631 12.4716L20.2418 14.5929L16.3527 10.7038Z",stroke:"black",strokeOpacity:"0.9"}),(0,i.jsx)("path",{d:"M19.5353 10.3502C18.7543 9.5692 18.7543 8.30287 19.5353 7.52182C20.3164 6.74077 21.5827 6.74077 22.3637 7.52182L25.1922 10.3502L22.3637 13.1787L19.5353 10.3502Z",fill:"white"}),(0,i.jsx)("path",{d:"M19.8889 9.9967C19.3031 9.41091 19.3031 8.46116 19.8889 7.87538C20.4746 7.28959 21.4244 7.28959 22.0102 7.87538L24.4851 10.3502L22.3637 12.4716L19.8889 9.9967Z",stroke:"black",strokeOpacity:"0.9"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.9665 21.544C9.78861 21.9888 10.0272 22.4908 10.4843 22.6337L16.5493 24.5303C19.3396 25.4028 22.3727 25.0002 24.8389 23.43L25.2536 23.0152L25.256 23.0144L25.8992 22.3711C29.0234 19.2469 29.0234 14.1816 25.8992 11.0574L25.1921 10.3502L16 19.5423L16.3172 19.8596C16.4619 20.0043 16.3217 20.2472 16.124 20.1942L13.8709 19.5897C12.2623 19.1581 10.585 19.9977 9.9665 21.544Z",fill:"white"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.9665 21.544C9.78861 21.9888 10.0272 22.4908 10.4843 22.6337L16.5493 24.5303C19.3396 25.4028 22.3727 25.0002 24.8389 23.43L25.2536 23.0152L25.256 23.0143L28.0205 20.2498C29.9732 18.2972 29.9732 15.1313 28.0205 13.1787L25.1921 10.3502L16 19.5423L16.3172 19.8596C16.4619 20.0043 16.3217 20.2472 16.124 20.1942L13.8709 19.5897C12.2623 19.1581 10.585 19.9977 9.9665 21.544Z",fill:"white"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.8709 19.5897C12.2623 19.1581 10.585 19.9977 9.9665 21.544C9.78861 21.9888 10.0272 22.4908 10.4843 22.6337L16.5493 24.5303C19.3396 25.4028 22.3727 25.0002 24.8389 23.43L25.2536 23.0152L25.256 23.0143L28.0205 20.2498C29.9732 18.2972 29.9732 15.1313 28.0205 13.1787L25.1921 10.3502L16 19.5423L16.3172 19.8596C16.462 20.0043 16.3217 20.2472 16.124 20.1942L13.8709 19.5897ZM17.3246 19.6318L25.1921 11.7644L27.3134 13.8858C28.8755 15.4479 28.8755 17.9806 27.3134 19.5427L24.7125 22.1436L24.7101 22.1445L24.2113 22.6433C22.0103 24.008 19.3228 24.3498 16.8477 23.5758L10.9742 21.7391C11.4561 20.7767 12.5552 20.2721 13.6117 20.5555L15.8649 21.16C16.8504 21.4244 17.5982 20.4627 17.3246 19.6318Z",fill:"black",fillOpacity:"0.9"}),(0,i.jsx)("rect",{x:"15.292",y:"17.4214",width:"2",height:"4",transform:"rotate(-45 15.292 17.4214)",fill:"white"}),(0,i.jsx)("path",{d:"M16.2617 18.3853C16.7382 18.8834 17.3334 19.5012 17.3555 19.7388L17.7643 19.562L16.2617 18.3853Z",fill:"white"}),(0,i.jsx)("rect",{x:"17.4141",y:"15.3",width:"2",height:"4",transform:"rotate(-45 17.4141 15.3)",fill:"white"}),(0,i.jsx)("rect",{x:"19.5352",y:"13.1787",width:"2",height:"4",transform:"rotate(-45 19.5352 13.1787)",fill:"white"}),(0,i.jsx)("rect",{x:"23.0703",y:"13.8859",width:"2",height:"4",transform:"rotate(-45 23.0703 13.8859)",fill:"white"}),(0,i.jsx)("rect",{x:"21.6562",y:"11.0574",width:"2",height:"4",transform:"rotate(-45 21.6562 11.0574)",fill:"white"}),(0,i.jsx)("path",{d:"M20.9492 20.2498L28.0203 13.1787V13.1787C29.9729 15.1313 29.9729 18.2971 28.0203 20.2498L25 23.27L24.5 23.5L20.9492 20.2498Z",fill:"white"}),(0,i.jsx)("path",{d:"M27.3137 13.8858C27.509 14.0811 27.8256 14.0811 28.0208 13.8858C28.2161 13.6906 28.2161 13.374 28.0208 13.1787L27.3137 13.8858ZM24.4853 11.0574L27.3137 13.8858L28.0208 13.1787L25.1924 10.3503L24.4853 11.0574Z",fill:"black",fillOpacity:"0.9"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M24.8514 23.4906L24.0517 23.882L23.6121 22.9839L24.4118 22.5924L24.8514 23.4906Z",fill:"white"}),(0,i.jsx)("path",{d:"M24.8516 23.4907C25.0996 23.3693 25.2022 23.0698 25.0808 22.8218C24.9594 22.5738 24.6599 22.4711 24.4119 22.5926L24.8516 23.4907ZM24.0519 23.8822L24.8516 23.4907L24.4119 22.5926L23.6122 22.984L24.0519 23.8822Z",fill:"black",fillOpacity:"0.9"})]})}function B(){return(0,i.jsxs)("svg",{width:"17",height:"24",viewBox:"0 0 17 24",fill:"none",children:[(0,i.jsx)("rect",{width:"16.8",height:"24",rx:"8.4",fill:"white"}),(0,i.jsx)("rect",{x:"0.5",y:"0.5",width:"15.8",height:"23",rx:"7.9",stroke:"black",strokeOpacity:"0.9"}),(0,i.jsx)("rect",{x:"6",y:"4.80005",width:"4.8",height:"8.4",rx:"2.4",fill:"#9747FF"}),(0,i.jsx)("rect",{x:"6.5",y:"5.30005",width:"3.8",height:"7.4",rx:"1.9",stroke:"black",strokeOpacity:"0.9"})]})}function G(){return(0,i.jsxs)("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",children:[(0,i.jsx)("rect",{width:"16.8007",height:"24",rx:"8.40036",transform:"matrix(-0.965926 -0.258819 -0.258795 0.965932 25.2197 6.58252)",fill:"white"}),(0,i.jsx)("rect",{x:"-0.61236",y:"0.353557",width:"15.8007",height:"23",rx:"7.90036",transform:"matrix(-0.965926 -0.258819 -0.258795 0.965932 24.1074 6.43607)",stroke:"black",strokeOpacity:"0.9"}),(0,i.jsx)("path",{d:"M14.0391 15.7617L21.5291 17.7686L23.2014 14.0238L22.377 9.61005L19.7149 6.10149L16.8341 5.32959L14.0391 15.7617Z",fill:"#9747FF"}),(0,i.jsx)("rect",{x:"-0.61236",y:"0.353557",width:"15.8007",height:"23",rx:"7.90036",transform:"matrix(-0.965926 -0.258819 -0.258795 0.965932 24.1074 6.43607)",stroke:"black",strokeOpacity:"0.9"}),(0,i.jsx)("rect",{width:"4.8002",height:"8.4",rx:"2.4001",transform:"matrix(-0.965926 -0.258819 -0.258795 0.965932 18.1826 9.66602)",fill:"white"}),(0,i.jsx)("rect",{x:"-0.61236",y:"0.353557",width:"3.8002",height:"7.4",rx:"1.9001",transform:"matrix(-0.965926 -0.258819 -0.258795 0.965932 17.0703 9.51957)",stroke:"black",strokeOpacity:"0.9"})]})}function U(){return(0,i.jsxs)("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",children:[(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.3535 6.50001H19V7.50001H21.3535L20.2071 8.64645L20.9142 9.35356L23.2677 7.00001L20.9142 4.64645L20.2071 5.35356L21.3535 6.50001Z",fill:"#8638E5"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.64649 6.50001H10V7.50001H7.64649L8.79293 8.64645L8.08583 9.35356L5.73227 7.00001L8.08583 4.64645L8.79293 5.35356L7.64649 6.50001Z",fill:"#8638E5"}),(0,i.jsx)("path",{d:"M11 8C11 6.89543 11.8954 6 13 6V6C14.1046 6 15 6.89543 15 8V19H11V8Z",fill:"white"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14 18V8C14 7.44772 13.5523 7 13 7C12.4477 7 12 7.44772 12 8V18H14ZM13 6C11.8954 6 11 6.89543 11 8V19H15V8C15 6.89543 14.1046 6 13 6Z",fill:"black",fillOpacity:"0.9"}),(0,i.jsx)("path",{d:"M8 13.8C8 13.3582 8.35817 13 8.8 13C10.5673 13 12 14.4327 12 16.2V27H10L8.71523 23.7881C8.24275 22.6069 8 21.3464 8 20.0742V13.8Z",fill:"white"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11 26V16.2C11 15.0524 10.1213 14.11 9 14.009V20.0742C9 21.2192 9.21848 22.3536 9.64371 23.4167L10.677 26H11ZM10 27L8.71523 23.7881C8.24275 22.6069 8 21.3464 8 20.0742V13.8C8 13.3582 8.35817 13 8.8 13C10.5673 13 12 14.4327 12 16.2V27H10Z",fill:"black",fillOpacity:"0.9"}),(0,i.jsx)("path",{d:"M14 6C14 4.89543 14.8954 4 16 4V4C17.1046 4 18 4.89543 18 6V19H14V6Z",fill:"white"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17 18V6C17 5.44772 16.5523 5 16 5C15.4477 5 15 5.44772 15 6V18H17ZM16 4C14.8954 4 14 4.89543 14 6V19H18V6C18 4.89543 17.1046 4 16 4Z",fill:"black",fillOpacity:"0.9"}),(0,i.jsx)("path",{d:"M17 13C17 11.8954 17.8954 11 19 11V11C20.1046 11 21 11.8954 21 13V19H17V13Z",fill:"white"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20 18V13C20 12.4477 19.5523 12 19 12C18.4477 12 18 12.4477 18 13V18H20ZM19 11C17.8954 11 17 11.8954 17 13V19H21V13C21 11.8954 20.1046 11 19 11Z",fill:"black",fillOpacity:"0.9"}),(0,i.jsx)("path",{d:"M20 15C20 13.8954 20.8954 13 22 13V13C23.1046 13 24 13.8954 24 15V19H20V15Z",fill:"white"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M23 18V15C23 14.4477 22.5523 14 22 14C21.4477 14 21 14.4477 21 15V18H23ZM22 13C20.8954 13 20 13.8954 20 15V19H24V15C24 13.8954 23.1046 13 22 13Z",fill:"black",fillOpacity:"0.9"}),(0,i.jsx)("path",{d:"M11 19H24V21.7689C24 22.5866 23.8997 23.4011 23.7014 24.1943L23 27H11V19Z",fill:"white"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M23 20H12V26H22.2192L22.7313 23.9518C22.9098 23.2379 23 22.5048 23 21.7689V20ZM23 27H11V19H24V21.7689C24 22.5866 23.8997 23.4011 23.7014 24.1943L23 27Z",fill:"black",fillOpacity:"0.9"}),(0,i.jsx)("path",{d:"M11 19H22V27H11V19Z",fill:"white"}),(0,i.jsx)("path",{d:"M15 17C15 17.2761 14.7761 17.5 14.5 17.5C14.2239 17.5 14 17.2761 14 17C14 16.7239 14.2239 16.5 14.5 16.5C14.7761 16.5 15 16.7239 15 17Z",fill:"white"}),(0,i.jsx)("path",{d:"M12 19C12 19.2761 11.7761 19.5 11.5 19.5C11.2239 19.5 11 19.2761 11 19C11 18.7239 11.2239 18.5 11.5 18.5C11.7761 18.5 12 18.7239 12 19Z",fill:"white"}),(0,i.jsx)("path",{d:"M18 17C18 17.2761 17.7761 17.5 17.5 17.5C17.2239 17.5 17 17.2761 17 17C17 16.7239 17.2239 16.5 17.5 16.5C17.7761 16.5 18 16.7239 18 17Z",fill:"white"}),(0,i.jsx)("path",{d:"M21 18C21 18.2761 20.7761 18.5 20.5 18.5C20.2239 18.5 20 18.2761 20 18C20 17.7239 20.2239 17.5 20.5 17.5C20.7761 17.5 21 17.7239 21 18Z",fill:"white"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.5 17.5C14.7761 17.5 15 17.2761 15 17C15 16.7239 14.7761 16.5 14.5 16.5C14.2239 16.5 14 16.7239 14 17C14 17.2761 14.2239 17.5 14.5 17.5Z",fill:"black",fillOpacity:"0.9"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.5 19.5C11.7761 19.5 12 19.2761 12 19C12 18.7239 11.7761 18.5 11.5 18.5C11.2239 18.5 11 18.7239 11 19C11 19.2761 11.2239 19.5 11.5 19.5Z",fill:"black",fillOpacity:"0.9"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.5 17.5C17.7761 17.5 18 17.2761 18 17C18 16.7239 17.7761 16.5 17.5 16.5C17.2239 16.5 17 16.7239 17 17C17 17.2761 17.2239 17.5 17.5 17.5Z",fill:"black",fillOpacity:"0.9"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20.5 18.5C20.7761 18.5 21 18.2761 21 18C21 17.7239 20.7761 17.5 20.5 17.5C20.2239 17.5 20 17.7239 20 18C20 18.2761 20.2239 18.5 20.5 18.5Z",fill:"black",fillOpacity:"0.9"}),(0,i.jsx)("path",{d:"M10 26H23V26.6C23 26.8209 22.8209 27 22.6 27H10.4C10.1791 27 10 26.8209 10 26.6V26Z",fill:"white"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.6941 24.8912C9.95025 24.788 10.2415 24.9121 10.3447 25.1682L10.84 26.3984C10.9431 26.6545 10.8191 26.9458 10.5629 27.049C10.3068 27.1521 10.0155 27.0281 9.91238 26.7719L9.41704 25.5417C9.3139 25.2856 9.43794 24.9943 9.6941 24.8912Z",fill:"white"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M23.0231 24.8459C22.7554 24.7781 22.4835 24.9402 22.4157 25.2079L22.0949 26.4752C22.0271 26.7429 22.1892 27.0148 22.4569 27.0826C22.7246 27.1503 22.9965 26.9883 23.0643 26.7206L23.3851 25.4533C23.4529 25.1856 23.2908 24.9136 23.0231 24.8459Z",fill:"white"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.6941 24.8912C9.95025 24.788 10.2415 24.9121 10.3447 25.1682L10.84 26.3984C10.9431 26.6545 10.8191 26.9458 10.5629 27.049C10.3068 27.1521 10.0155 27.0281 9.91238 26.7719L9.41704 25.5417C9.3139 25.2856 9.43794 24.9943 9.6941 24.8912Z",fill:"black",fillOpacity:"0.9"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M23.0231 24.8459C22.7554 24.7781 22.4835 24.9402 22.4157 25.2079L22.0949 26.4752C22.0271 26.7429 22.1892 27.0148 22.4569 27.0826C22.7246 27.1503 22.9965 26.9883 23.0643 26.7206L23.3851 25.4533C23.4529 25.1856 23.2908 24.9136 23.0231 24.8459Z",fill:"black",fillOpacity:"0.9"}),(0,i.jsx)("path",{d:"M20 18H23V21H20V18Z",fill:"white"}),(0,i.jsx)("path",{d:"M12 17H15V21H12V17Z",fill:"white"}),(0,i.jsx)("path",{d:"M16 17H19V21H16V17Z",fill:"white"}),(0,i.jsx)("path",{d:"M21 16H23V21H21V16Z",fill:"white"}),(0,i.jsx)("path",{d:"M18 16H20V26H18V16Z",fill:"white"}),(0,i.jsx)("path",{d:"M15 16H17V26H15V16Z",fill:"white"}),(0,i.jsx)("path",{d:"M12 16H14V26H12V16Z",fill:"white"})]})}let V="figjam_pan_zoom_onboarding--icon--TaGJG",H="figjam_pan_zoom_onboarding--bannerContainer--CsV0q",K={NEW_USER_PAN:"figjam_seen_new_user_dlt_pan",NEW_USER_ZOOM:"figjam_seen_new_user_dlt_zoom"};function W({children:e}){return(0,i.jsx)("span",{className:"figjam_pan_zoom_onboarding--boldedBannerText--Zx-EN",children:e})}function q(e){let{onNext:t,onManualDismiss:n}=e,r=(0,a.wA)(),o=(0,s.useCallback)(()=>{r(f.b({[K.NEW_USER_ZOOM]:!0}))},[r]),d=(0,s.useCallback)(()=>{o(),n()},[o,n]),c=(0,s.useCallback)(()=>{o(),t()},[o,t]);return(0,s.useEffect)(()=>(l.glU?.setUsedZoomAction(!1),v.Y5.fromFullscreen.on("zoomActionMessageForOnboarding",c),()=>{v.Y5.fromFullscreen.removeListener("zoomActionMessageForOnboarding",c)}),[r,c]),(0,i.jsx)(F.p,{trackingContext:"FigJam New User Zoom Banner",content:(0,i.jsx)("div",{className:H,children:(0,h.tx)("rcs.figjam_zoom.to_zoom_pinch_your_trackpad_or_hold_and_scroll",{boldTextPinch:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{className:u()("figjam_pan_zoom_onboarding--zoomIcon--efDh8",V),children:(0,i.jsx)(z,{})}),(0,i.jsx)(W,{children:(0,h.tx)("rcs.figjam_zoom.to_zoom_pinch_your_trackpad_or_hold_and_scroll_bold_text_pinch")})]}),boldTextScroll:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{className:V,children:(0,i.jsx)(B,{})}),(0,i.jsx)(W,{children:(0,h.tx)("rcs.figjam_zoom.to_zoom_pinch_your_trackpad_or_hold_and_scroll_bold_text_scroll")})]})})}),rightContent:(0,i.jsx)(Y,{onChangePreferences:e.onChangePreferences}),onClose:d})}function X(e){let{onManualDismiss:t}=e,[n,r]=(0,s.useState)(!1),o=(0,a.wA)();(0,p.h)(()=>{setTimeout(()=>{r(!0)},1e3)});let d=(0,s.useCallback)(()=>{o(f.b({[K.NEW_USER_PAN]:!0}))},[o]),c=(0,s.useCallback)(()=>{d(),t()},[d,t]);return((0,s.useEffect)(()=>{if(n)return l.glU?.setUsedPanAction(!1),v.Y5.fromFullscreen.on("panActionMessageForOnboarding",c),()=>{v.Y5.fromFullscreen.removeListener("panActionMessageForOnboarding",c)}},[o,n,c]),n)?(0,i.jsx)(F.p,{trackingContext:"FigJam New User Pan Banner",content:(0,i.jsx)("div",{className:H,children:(0,h.tx)("rcs.figjam_pan.move_instructions",{boldTextSwipe:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{className:V,children:(0,i.jsx)(U,{})}),(0,i.jsx)(W,{children:(0,h.tx)("rcs.figjam_pan.move_instructions_bold_text_swipe")})]}),boldTextRightClick:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{className:V,children:(0,i.jsx)(G,{})}),(0,i.jsx)(W,{children:(0,h.tx)("rcs.figjam_pan.hold_right_click")})]})})}),rightContent:(0,i.jsx)(Y,{onChangePreferences:e.onChangePreferences}),onClose:c}):null}function Y({onChangePreferences:e}){return(0,i.jsx)("button",{onClick:e,className:"figjam_pan_zoom_onboarding--changePreferencesButton--0z5Xs text--fontPos11--2LvXf text--_fontBase--QdLsd",children:(0,h.tx)("rcs.figjam_pan_zoom_change_prefs")})}function Z(){let e=(0,C.aV)(),t=(0,T.Td)(),n=(0,a.d4)(e=>e.isMakeSomethingV2Active);return t||e||n?null:(0,i.jsx)(et,{})}let J=(0,y.r1)(K.NEW_USER_PAN),Q=(0,y.r1)(K.NEW_USER_ZOOM),$=(0,y.Fu)("figjam_editor_onboarded"),ee=[function(e){let{isOverlayShowing:t,next:n,complete:s,onChangePreferences:a}=e;return t?(0,i.jsx)(q,{onNext:n,onManualDismiss:s,onChangePreferences:a}):null},function(e){let{isOverlayShowing:t,complete:n,onChangePreferences:s}=e;return t?(0,i.jsx)(X,{onNext:n,onManualDismiss:n,onChangePreferences:s}):null}];function et(){let e=(0,d.md)(J),t=(0,d.md)(Q),n=(0,d.md)($),a=(0,d.md)(_.Fy),l=(0,d.md)(_.g5),o=(0,d.md)(_.NT),c=(0,d.md)(E.w),[u,p]=(0,s.useState)(!1),h=(0,x.A)({numSteps:ee.length,onComplete:r.lQ}),{show:f,complete:y,isShowing:v}=(0,g.e)({overlay:D.eD$,priority:j.N.DEFAULT_MODAL},[e,t,n,a,l,o]);(0,s.useEffect)(()=>{let e=[E.tX.NOT_STARTED,E.tX.COMPLETED].includes(c),t=h.currentStep===ee.length-1;v||!e||t||f({canShow:(e,t,n,i,s,a)=>{let r=!m.Xb&&!m.aR,l=(0,w.d)({emailValidatedAt:s,jobTitle:a});return![E.tX.USE_CASE_STEPS,E.tX.MODAL_SHOWING].includes(c)&&(!!n||l)&&!i&&!e&&!t&&r}})},[v,c,f,h.currentStep]);let b=(0,s.useCallback)(()=>{p(!0)},[p]),C=(0,s.useCallback)(()=>{p(!1)},[p]);return v?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(k.U,{currentStep:h.currentStep,children:ee.map((e,t)=>s.createElement(e,{isOverlayShowing:h.currentStep===t,next:h.next,complete:y,onChangePreferences:b})),isShowing:!0}),u?(0,i.jsx)(P,{dismissModal:C,targetKey:1===h.currentStep?R.oi.PAN:R.oi.ZOOM}):null]}):null}function en(){return(0,o.kc)().figjam_nav_new_user_onboarding&&(0,b.UK)().scrollWheelZoom.getCopy()&&(0,b.UK)().rightClickPan.getCopy()}},403607:(e,t,n)=>{n.d(t,{C:()=>o,U:()=>d});var i=n(104076);let s="M14.9998 22.0001C16.6567 22.0001 17.9998 23.3433 17.9998 25.0001V29.0001C17.9998 30.657 16.6567 32.0001 14.9998 32.0001H10.9998C9.39474 32.0001 8.08406 30.7396 8.00376 29.1544L7.99985 29.0001V25.0001C7.99985 23.3433 9.34299 22.0001 10.9998 22.0001H14.9998ZM27.9998 26.0001H31.9998V28.0001H27.9998V32.0001H25.9998V28.0001H21.9998V26.0001H25.9998V22.0001H27.9998V26.0001ZM10.9998 24.0001L10.8973 24.005C10.3932 24.0563 9.99985 24.4824 9.99985 25.0001V29.0001L10.0047 29.1027C10.0526 29.5731 10.4269 29.9473 10.8973 29.9952L10.9998 30.0001H14.9998L15.1024 29.9952C15.5728 29.9473 15.9471 29.5731 15.995 29.1027L15.9998 29.0001V25.0001C15.9998 24.4824 15.6065 24.0563 15.1024 24.005L14.9998 24.0001H10.9998ZM11.7372 7.44836C12.5227 6.80757 13.6816 6.85379 14.4139 7.58605L18.4139 11.5861L18.5516 11.7374C19.1924 12.523 19.1462 13.6819 18.4139 14.4142L14.4139 18.4142C13.6816 19.1464 12.5227 19.1927 11.7372 18.5519L11.5858 18.4142L7.58579 14.4142C6.80474 13.6331 6.80474 12.3671 7.58579 11.5861L11.5858 7.58605L11.7372 7.44836ZM26.9998 8.00012C29.7613 8.00012 31.9998 10.2387 31.9998 13.0001C31.9998 15.7615 29.7613 18.0001 26.9998 18.0001C24.2384 18.0001 21.9998 15.7615 21.9998 13.0001C21.9998 10.2387 24.2384 8.00012 26.9998 8.00012ZM8.99985 13.0001L12.9998 17.0001L16.9998 13.0001L12.9998 9.00012L8.99985 13.0001ZM26.9998 10.0001C25.343 10.0001 23.9998 11.3433 23.9998 13.0001C23.9998 14.657 25.343 16.0001 26.9998 16.0001C28.6567 16.0001 29.9998 14.657 29.9998 13.0001C29.9998 11.3433 28.6567 10.0001 26.9998 10.0001Z";function a(){return(0,i.jsxs)("svg",{width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",children:[(0,i.jsx)("rect",{width:"40",height:"40",rx:"8",fill:"white"}),(0,i.jsx)("rect",{x:"0.5",y:"0.5",width:"39",height:"39",rx:"7.5",stroke:"black",strokeOpacity:"0.2"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:s,fill:"black",fillOpacity:"0.9"})]})}function r(){return(0,i.jsxs)("svg",{width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",children:[(0,i.jsx)("rect",{width:"40",height:"40",rx:"8",fill:"#F5F5F5"}),(0,i.jsx)("rect",{x:"0.5",y:"0.5",width:"39",height:"39",rx:"7.5",stroke:"black",strokeOpacity:"0.2"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:s,fill:"black",fillOpacity:"0.9"})]})}function l(){return(0,i.jsxs)("svg",{width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",children:[(0,i.jsx)("rect",{width:"40",height:"40",rx:"8",fill:"#9747FF"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:s,fill:"white"})]})}function o(){return(0,i.jsxs)("svg",{width:"42",height:"42",viewBox:"0 0 42 42",fill:"none",children:[(0,i.jsx)("rect",{x:"1",y:"1",width:"40",height:"40",rx:"5",fill:"white"}),(0,i.jsx)("rect",{x:"0.583333",y:"0.583333",width:"40.8333",height:"40.8333",rx:"5.41667",stroke:"black",strokeOpacity:"0.1",strokeWidth:"0.833333"}),(0,i.jsx)("g",{transform:"translate(21,21) scale(0.85) translate(-21,-21)",children:(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:s,fill:"black",fillOpacity:"0.9"})})]})}function d(){return{Inactive:a,GrayHover:r,Active:l}}},570756:(e,t,n)=>{n.d(t,{Uj:()=>D,IW:()=>F,Ef:()=>K,u3:()=>B,UI:()=>z,Y:()=>U,kw:()=>G,z1:()=>J,PX:()=>Z,Yh:()=>q,QL:()=>X,Wb:()=>V,Pn:()=>H,Cb:()=>Y,E0:()=>W});var i=n(104076),s=n(716976),a=n(276800),r=n(984588),l=n(958324),o=n(29611),d=n(433359),c=n(322028),u=n(170627),p=n(812714),m=n(795033),h=n(221586),f=n(17140),g=n(192075),x=n(330378),_=n(84463),y=n(354114),v=n(54092),b=n(237420),C=n(412267),j=n(208740),k=n(349311),w=n(973369),E=n(516813),T=n(571267),S=n(210170),I=n(792794),N=n(4521),A=n(712559),L=n(339098),M=n(796779),O=n(853229),R=n(116128),P=n(371621),D=(e=>(e.SUMMARIZE="summarize",e.CLUSTER="cluster_by_topic",e.TIDY_UP="tidy_up",e.WRAP_IN_SECTION="wrap_in_section",e.CLUSTER_BY_AUTHOR="cluster_by_author",e.CLUSTER_BY_COLOR="cluster_by_color",e.CLUSTER_BY_STAMP_COUNT="cluster_by_stamp_count",e.CLUSTER_BY_STAMP_TYPE="cluster_by_stamp_type",e.OPEN_CLUSTER_BY_MORE_MENU="open_cluster_by_more_menu",e.CREATE_FIGMA_SLIDES_OUTLINE="create_figma_slides_outline",e.SEND_TO_MAKE_FROM_FIGJAM="send_to_make_from_figjam",e))(D||{});let F={summarize:!0,cluster_by_topic:!0,create_figma_slides_outline:!0,tidy_up:!1,wrap_in_section:!1,cluster_by_author:!1,cluster_by_color:!1,cluster_by_stamp_count:!1,cluster_by_stamp_type:!1,open_cluster_by_more_menu:!1,send_to_make_from_figjam:!0},z=(0,m.eU)(!1),B=(0,m.eU)(null),G=(0,m.eU)(!1),U=(0,m.eU)(!1);function V(){let e=H(),[t,n]=(0,m.fp)(U),i=(0,m.Xr)(G);return s.useCallback(()=>{e(),n(!1),i(!1)},[e,n,i])}function H(){let[e,t]=(0,m.fp)(B),[n,i]=(0,m.fp)(z);return s.useCallback(()=>{t(null),i(!1)},[t,i])}function K(e){return!!e&&(F[e.type]||!1)}function W(){return(0,I.v1)()}function q(){let e=(0,f.q8)(),t=(0,p.kc)().figjam_synthesize_handbrake||!1,n=[],s=(0,I.V)()&&!e,a=(0,I.cF)(),u=(0,E.IR)(),m=(0,_.J)(),h=W(),y=(0,v.Zr)("create-section-from-selection"),b=(0,v.Zr)("tidy-up"),C=(0,v.Zr)("align-top"),j={tooltip:w.w,tooltipType:k.Ib.SPECIAL};return h&&n.push({type:"open_cluster_by_more_menu",disabled:!1,isInClusterSubmenu:!1,displayText:"",disabledTooltipText:""}),s&&n.push({type:"summarize",disabled:!a||t,displayText:(0,g.t)("whiteboard.inline_menu.ai_quick_actions_summarize_button"),svgSrc:L.A,fplIcon:(0,i.jsx)(r.x,{}),disabledTooltipText:(0,g.t)("whiteboard.inline_menu.ai_quick_actions_summarize_disabled_tooltip",{minSelectedStickies:2}),tooltipOverrides:t?j:void 0,isInClusterSubmenu:!1}),b&&C&&n.push({type:"tidy_up",disabled:!1,displayText:(0,x.A)("tidy-up"),svgSrc:P.A,fplIcon:(0,i.jsx)(l.D,{}),tooltipOverrides:{tooltip:"tidy-up",tooltipType:k.Ib.LOOKUP}}),y&&n.push({type:"wrap_in_section",disabled:!1,displayText:(0,x.A)("create-section-from-selection"),svgSrc:O.A,fplIcon:(0,i.jsx)(o.P,{}),tooltipOverrides:{tooltip:"create-section-from-selection",tooltipType:k.Ib.LOOKUP}}),u&&n.push({type:"create_figma_slides_outline",disabled:t,displayText:(0,g.t)("whiteboard.inline_menu.ai_quick_actions_create_slides_outline"),svgSrc:M.A,fplIcon:(0,i.jsx)(d.m,{}),disabledTooltipText:(0,g.t)("whiteboard.inline_menu.ai_quick_actions_create_slides_outline_disabled_tooltip",{minSelectedStickies:2}),tooltipOverrides:t?j:void 0,isInClusterSubmenu:!1}),m&&n.push({type:"send_to_make_from_figjam",disabled:t,displayText:(0,g.t)("whiteboard.inline_menu.send_to_make_from_figjam"),svgSrc:R.A,fplIcon:(0,i.jsx)(c.s,{}),disabledTooltipText:(0,g.t)("whiteboard.inline_menu.send_to_make_from_figjam_disabled_tooltip",{minSelectedStickies:1}),tooltipOverrides:t?j:void 0,isInClusterSubmenu:!1}),n}function X(){return[...function(){let e=(0,f.q8)(),t=(0,I.v1)();if(e)return[];let n=!!(0,p.kc)().figjam_synthesize_handbrake,i=[],s=(0,g.t)("whiteboard.inline_menu.ai_quick_actions_sort_stickies_disabled_tooltip",{minSelectedStickies:2}),a={tooltip:w.w,tooltipType:k.Ib.SPECIAL};return i.push({type:"cluster_by_topic",disabled:!t||n,displayText:(0,g.t)("whiteboard.inline_menu.ai_quick_actions_sort_stickies_by_topic_2"),disabledTooltipText:s,tooltipOverrides:n?a:void 0,isInClusterSubmenu:!0}),i}(),...function(){let e=(0,I.v1)(),t=(0,g.t)("whiteboard.inline_menu.ai_quick_actions_sort_stickies_disabled_tooltip",{minSelectedStickies:2}),n=[];return n.push({type:"cluster_by_color",disabled:!e,isInClusterSubmenu:!0,displayText:(0,g.t)("whiteboard.inline_menu.ai_quick_actions_sort_stickies_by_color_2"),disabledTooltipText:t}),n.push({type:"cluster_by_author",disabled:!e,isInClusterSubmenu:!0,displayText:(0,g.t)("whiteboard.inline_menu.ai_quick_actions_sort_stickies_by_author_2"),disabledTooltipText:t}),n.push({type:"cluster_by_stamp_count",disabled:!e,isInClusterSubmenu:!0,displayText:(0,g.t)("whiteboard.inline_menu.ai_quick_actions_sort_stickies_by_stamp_count_2"),disabledTooltipText:t}),n.push({type:"cluster_by_stamp_type",disabled:!e,isInClusterSubmenu:!0,displayText:(0,g.t)("whiteboard.inline_menu.ai_quick_actions_sort_stickies_by_stamp_type_2"),disabledTooltipText:t}),n}()].filter(e=>e?.isInClusterSubmenu&&"open_cluster_by_more_menu"!==e.type)}function Y(){return!!q().find(e=>e?.type==="summarize"||e?.type==="cluster_by_topic"||e?.type==="open_cluster_by_more_menu")}function Z(){let e=(0,m.md)(A.f).positionRelativeToSelection,{summarizeCanvasSelection:t}=(0,N.ss)(e,void 0,"INLINE_TOOLBAR"),{clusterCanvasSelection:n}=(0,S.f)(),{cluster:i}=(0,S.J)(T.Gq,!1),{cluster:r}=(0,S.J)(T.MS,!1),{cluster:l}=(0,S.J)(T.bM,!0),{cluster:o}=(0,S.J)(T.ON,!1),d=(0,E.iX)(),c=function({entryPoint:e,newFileFrom:t}){let n=(0,b.wA)();return(0,s.useCallback)(()=>{(0,C.C)({type:"send-to-make-from-figjam",entryPoint:e,newFileFrom:t,dispatch:n})},[n,e,t])}({entryPoint:"FigJam Organize Menu",newFileFrom:j.f6.SEND_TO_MAKE_FROM_FIGJAM_ORGANIZE_MENU}),p=V();return e=>{let s=a.lQ,m="";if(e){switch(e.type){case"cluster_by_author":s=i,m="inline-menu-organize-cluster-by-author";break;case"cluster_by_color":s=r,m="inline-menu-organize-cluster-by-color";break;case"cluster_by_stamp_count":s=l,m="inline-menu-organize-cluster-by-stamp-count";break;case"cluster_by_stamp_type":s=o,m="inline-menu-organize-cluster-by-stamp-type";break;case"summarize":s=t,m="inline-menu-organize-summarize";break;case"create_figma_slides_outline":s=d,m="inline-menu-organize-create-figma-slides-outline";break;case"send_to_make_from_figjam":s=c,m="inline-menu-organize-send-to-make";break;case"cluster_by_topic":s=n,m="inline-menu-organize-cluster";break;case"tidy_up":s=()=>y.Y5.triggerActionInUserEditScope("tidy-up"),m="inline-menu-organize-tidy-up";break;case"wrap_in_section":s=()=>y.Y5.triggerActionInUserEditScope("create-section-from-selection"),m="inline-menu-organize-wrap-in-section"}u.l7.user(m,s),"open_cluster_by_more_menu"!==e.type&&p()}}}function J(){let[e,t]=(0,m.fp)(z),[n,i]=(0,m.fp)(B),[s,a]=(0,m.fp)(G),r=X(),l=Z();return(a,o)=>{if(a.shiftKey||a.altKey||a.ctrlKey){o(a);return}if(e)switch(a.keyCode){case h.Uz.ESCAPE:t(!1),i(null);break;case h.Uz.DOWN_ARROW:null===n?i(0):n+1<r.length&&i(n+1);break;case h.Uz.UP_ARROW:null===n?i(r.length-1):n-1>=0&&i(n-1);break;case h.Uz.RIGHT_ARROW:null===n&&i(0);break;case h.Uz.LEFT_ARROW:i(null),t(!1);break;case h.Uz.ENTER:null!==n&&n<r.length&&(a.preventDefault(),a.stopPropagation(),l(r[n]))}else if(s)switch(a.keyCode){case h.Uz.RIGHT_ARROW:t(!0);break;case h.Uz.LEFT_ARROW:t(!1);break;default:o(a)}else o(a)}}},199984:(e,t,n)=>{n.d(t,{V3:()=>M,ML:()=>q,w:()=>L,HG:()=>O,tt:()=>R});var i=n(104076),s=n(716976),a=n(237420),r=n(286138),l=n(420680),o=n(225654),d=n(266808),c=n(138564),u=n(858959),p=n(784220),m=n(430),h=n(641518),f=n(849757),g=n(192075),x=n(659062),_=n(562951),y=n(520960),v=n(141524),b=n(835307),C=n(410187),j=n(849038),k=n(279915),w=n(526818),E=n(174318),T=n(223837),S=n(692042);function I({nodePosition:e,isExpanded:t,children:n}){let a=(0,S._X)({subscribeToUpdates_expensive:!0}),r=(0,s.useMemo)(()=>(0,S.Yb)(a,e.absoluteBounds),[e.absoluteBounds,a]),l=(0,s.useMemo)(()=>(0,S.ZT)(r,a),[r,a]),o=(0,s.useMemo)(()=>{if(!r)return{};let e=r.x+a.x,n=r.y+a.y;return{width:r.width,height:r.height,position:"fixed",transform:`translate(${e}px, ${n}px)`,pointerEvents:"none",zIndex:t?1:0}},[a.x,a.y,r,t]);return l?(0,i.jsx)("div",{style:o,children:(0,i.jsx)("div",{style:{pointerEvents:"all"},children:n({viewportZoom:a.zoomScale})})}):null}var N=n(404343),A=n(895528);let L=32,M=7.5,O=256,R=e=>`${e}-votes`;var P=(e=>(e.DEFAULT="default",e.HOVERED="hovered",e.SELECTED="selected",e.DIMMED="dimmed",e))(P||{}),D=(e=>(e.LARGE="large",e.MEDIUM="medium",e.SMALL="small",e.X_SMALL="xSmall",e))(D||{});function F({clientHeight:e,scrollHeight:t,scrollTop:n}){return 1>Math.abs(t-e-n)}function z({nodeVoteInfo:e,isMostVoted:t,isSelected:n,isHoveredInModal:a,isOtherPinSelected:r,selectPin:l,deselectPin:o,nodePosition:c,currentUserId:u}){let[p,m]=(0,s.useState)(!1),[h,f]=(0,s.useState)(p),[g,x]=(0,s.useState)(!1);(0,s.useEffect)(()=>{if(!p){f(!1);return}let e=setTimeout(()=>f(!0),100);return()=>clearTimeout(e)},[p]);let _=(0,s.useCallback)(()=>l(e.guid),[l,e.guid]),y=(0,s.useCallback)(()=>o(e.guid),[o,e.guid]),v=n?"selected":h||a?"hovered":r?"dimmed":"default",b="selected"===v||"hovered"===v;return(0,s.useEffect)(()=>{b&&!g?(d.ofk.setVoteStampsHiddenOnVotedNode(e.guid,!0),x(!0)):!b&&g&&(d.ofk.setVoteStampsHiddenOnVotedNode(e.guid,!1),x(!1))},[b,g,e.guid]),(0,i.jsx)(I,{nodePosition:c,isExpanded:["selected","hovered"].includes(v),children:({viewportZoom:n})=>(0,i.jsx)(B,{recordingKey:`votePin-nodeId${e.guid}`,nodeVoteInfo:e,isMostVoted:t,pinState:v,setIsHovered:m,selectPin:_,deselectPin:y,viewportSize:n>.75?"large":n>.5?"medium":n>.25?"small":"xSmall",currentUserId:u})})}let B=s.memo(function({nodeVoteInfo:e,isMostVoted:t,pinState:n,setIsHovered:a,selectPin:d,deselectPin:m,viewportSize:_,currentUserId:v,recordingKey:b}){let C=(0,s.useRef)(null),j=(0,s.useRef)(null),[k,w]=(0,s.useState)(0),[T,S]=(0,s.useState)(!1),[I,O]=(0,s.useState)(!0),[P,D]=(0,s.useState)(0),[z,B]=(0,s.useState)(!1),H=(0,E.oC)(e),W={large:{paddingTop:"2px",paddingBottom:"2px",paddingLeft:"10px",paddingRight:"10px"},medium:{paddingTop:"1px",paddingBottom:"1px",paddingLeft:"8px",paddingRight:"8px"},small:{paddingTop:"0px",paddingBottom:"0px",paddingLeft:"7px",paddingRight:"7px"},xSmall:{paddingTop:"0px",paddingBottom:"0px",paddingLeft:"6px",paddingRight:"6px"}}[_],q={large:1,medium:.9,small:.8,xSmall:.7}[_];(0,s.useEffect)(()=>{if("selected"!==n)return;let e=e=>{(0,y.n3)(e.target,C.current)||m()};return window.addEventListener("click",e),()=>window.removeEventListener("click",e)},[n,m,e.guid]),s.useLayoutEffect(()=>{"selected"===n&&C.current?.focus()},[n]);let X=t?x.sx.colorBgvotingtertiary.$.backgroundColor:x.sx.colorBg.$.backgroundColor,Y={default:{transform:`scale(${q})`,backgroundColor:X,borderColor:X,opacity:1,...W},dimmed:{transform:`scale(${q})`,backgroundColor:X,borderColor:X,opacity:.5,...W},hovered:{transform:"scale(1)",backgroundColor:X,borderColor:X,opacity:1,paddingTop:"8px",paddingBottom:"12px",paddingLeft:"16px",paddingRight:"0px"},selected:{transform:"scale(1)",backgroundColor:X,...x.sx.colorBorderSelectedStrong.$,opacity:1,paddingTop:"8px",paddingBottom:"12px",paddingLeft:"16px",paddingRight:"0px"}},Z={default:{width:"0px",height:"0px",marginLeft:"0px",marginRight:"0px",opacity:0},dimmed:{width:"0px",height:"0px",marginLeft:"0px",marginRight:"0px",opacity:0},hovered:{width:N.$tX,height:N.$tX,marginLeft:"8px",marginRight:"12px",opacity:0},selected:{width:N.$tX,height:N.$tX,marginLeft:"8px",marginRight:"12px",opacity:1}},J=(0,s.useMemo)(()=>{let t=(0,E.zi)(v);return Object.entries(e.userIdToNodeVotes).sort((e,n)=>t(e[0],n[0]))},[e.userIdToNodeVotes,v]),Q=J.length>3,$=Q?J.slice(0,2):J,ee=Q?J.slice(2):[],et={hovered:{height:`${L}px`},selected:{height:"auto"}},en=(0,s.useCallback)(e=>{let t=0!==e;t!==T&&S(t);let n=j.current?.getScrollHeight(),i=j.current?.getTrackHeight(),s=void 0===n||void 0===i||F({clientHeight:i,scrollHeight:n,scrollTop:e});s!==I&&O(s)},[T,I]),ei=(0,s.useCallback)(e=>{if(!e||!j.current){S(!1),O(!0);return}let t=j.current.getScrollTop(),n=j.current.getScrollHeight(),i=j.current.getTrackHeight();S(0!==t),O(F({clientHeight:i,scrollHeight:n,scrollTop:t}))},[]);return(0,i.jsxs)(c.x,{transition:{duration:.1,ease:"easeInOut"},children:[(0,i.jsxs)("div",{ref:C,"aria-expanded":"selected"===n,className:A.UD,id:R(e.guid),onClick:h.rf(b,"click",d),onMouseEnter:()=>a(!0),onMouseLeave:()=>a(!1),role:"button",style:{transform:`translateX(${10-k}px)`},tabIndex:0,children:["selected"===n&&(0,i.jsx)(r.E,{children:(0,g.t)("voting.pin.container_announcement")}),(0,i.jsxs)(u.P.div,{className:A.yM,initial:!1,animate:n,variants:Y,children:[(0,i.jsxs)("p",{className:A.wx,children:[(0,i.jsx)(G,{numTotalVotes:H,isMostVoted:t}),(0,i.jsx)(u.P.span,{className:A.cG,initial:!1,animate:n,variants:Z,children:"selected"===n&&(0,i.jsx)(l.K,{onClick:e=>{e.stopPropagation(),m(),a(!1)},"aria-label":(0,g.t)("general.close"),children:(0,i.jsx)(o.X,{})})})]}),(0,i.jsx)(p.N,{children:["selected","hovered"].includes(n)&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(u.P.div,{className:A.W0,animate:"selected"===n&&T&&!z?"scrolled":"notScrolled",initial:{marginTop:"0px",opacity:0},variants:{notScrolled:{marginTop:"4px",opacity:0},scrolled:{marginTop:"4px",opacity:1}},exit:{marginTop:"0px",opacity:0}}),(0,i.jsx)(u.P.div,{className:A.sI,initial:{width:"0px",height:"0px",opacity:0,transform:`scale(${1/q})`},animate:{width:"240px",height:"auto",opacity:1,transform:"scale(1)"},exit:{width:"0px",height:"0px",opacity:0,transform:`scale(${1/q})`},children:(0,i.jsx)(f.P,{ref:j,maxHeight:L*M,width:240,allowScrollAndZoomOver:!0,onScroll:en,onCanScrollChange:ei,forceRerenderCount:P,children:(0,i.jsxs)("ul",{className:A.hQ,children:[$.map(([e,t])=>(0,i.jsx)(V,{userId:e,nodeVotes:t},e)),Q&&(0,i.jsxs)(u.P.div,{initial:!1,animate:n,variants:et,onAnimationStart:()=>B(!0),onAnimationComplete:()=>{B(!1),D(e=>e+1)},children:["hovered"===n&&(0,i.jsx)(K,{overflowCount:J.length-$.length}),"selected"===n&&ee.map(([e,t])=>(0,i.jsx)(V,{userId:e,nodeVotes:t},e))]})]})})}),(0,i.jsx)(u.P.div,{className:A.W0,animate:"selected"!==n||I||z?"hide":"show",initial:{opacity:0},variants:{show:{opacity:1},hide:{opacity:0}},exit:{opacity:0}})]})})]})]}),(0,i.jsx)(U,{reportWidth:w,numTotalVotes:H,isMostVoted:t,scale:q,padding:W})]})});function G({numTotalVotes:e,isMostVoted:t}){return(0,i.jsxs)("span",{className:A.TK,children:[(0,i.jsx)("span",{children:(0,g.tx)("voting.pin.votes",{numVotes:e})}),t&&(0,i.jsx)("img",{src:w.Ys,className:A.C0,alt:(0,g.t)("voting.pin.medal_img_alt")})]})}function U({reportWidth:e,numTotalVotes:t,isMostVoted:n,scale:a,padding:r}){let l=s.useRef(null);return s.useLayoutEffect(()=>{let t=l.current;if(t){let{width:n}=t.getBoundingClientRect();window.myEl=t,e(n)}},[l,t,n,a,r.paddingLeft,r.paddingRight,r.paddingTop,r.paddingBottom,e]),(0,i.jsx)("div",{className:A.D9,style:{transform:`scale(${a})`},"aria-hidden":!0,children:(0,i.jsx)("span",{style:r,ref:l,children:(0,i.jsx)(G,{numTotalVotes:t,isMostVoted:n})})})}function V({userId:e,nodeVotes:t}){let n=t.length>3,s=n?t.slice(0,2):t,a=t.length-2;return(0,i.jsxs)("li",{className:A.QE,children:[(0,i.jsx)(H,{userId:e}),(0,i.jsxs)("div",{className:A.WK,children:[s.map(e=>(0,i.jsx)(W,{stampId:e},e)),n&&(0,i.jsx)("span",{className:A._v,children:a})]})]},e)}function H({userId:e}){let{user:t,loading:n}=(0,v.wW)(e);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(k.v,{userId:e,user:t,loading:n,size:24,loadingClassName:A.SD}),(0,i.jsx)(k.m,{userId:e,user:t,loading:n,defaultClassName:A.nT,loadingClassName:A.fK})]})}function K({overflowCount:e}){return(0,i.jsxs)("li",{className:A.Qf,children:[(0,i.jsx)("div",{className:A.EA,children:(0,i.jsx)(w.xL,{})}),(0,i.jsx)("span",{className:A.iG,children:(0,g.tx)("voting.pin.voter_list_overflow",{numOverflowingVoters:e})})]})}function W({stampId:e}){let t=(0,m.fU)(),n=(0,b.Fk)((e,t)=>{let n=e.get(t);return n?n.name:null},e),s=(()=>{let e=j.WJ.find(e=>e.label===n);return e&&(0,C.k6)(e,t)||j.tR})(),a=n?(0,g.t)("voting.pin.stamp_preview_alt_with_type",{stampType:n}):(0,g.t)("voting.pin.stamp_preview_alt_without_type");return(0,i.jsx)("img",{className:A.O8,src:s,alt:a})}function q({votedNodes:e,votingStage:t,selectedNodeId:n,currentUserId:r}){let l=(0,a.wA)(),o=(0,a.d4)(e=>e.voting.hoveredInModalVotePinId),c=(0,s.useMemo)(()=>(0,E.yn)(e),[e]),u=(0,s.useCallback)(e=>l(_.w9({votePinId:e})),[l]),p=(0,s.useCallback)(e=>l(_.rT({votePinId:e})),[l]),m=function({votedNodes:e}){let[t,n]=(0,s.useState)({}),i=(0,s.useMemo)(()=>e.map(e=>e.guid),[e]);return(0,s.useEffect)(()=>{if(!i.length){n({});return}let e="vote-pins",t=(0,T.EE)(e,i,e=>{n(t=>({...t,[e.nodeId]:e.position}))});return n(Object.entries(t.currentNodePosition).reduce((e,[t,n])=>(n&&(e[t]=n.position),e),{})),()=>{(0,T.lB)(e)}},[i]),t}({votedNodes:e});return(0,i.jsx)(i.Fragment,{children:e.map(e=>{let s=m[e.guid];if(!s)return null;let a=1===c.size&&c.has(e.guid)&&t===d.W8Y.ENDED;return(0,i.jsx)(z,{currentUserId:r,deselectPin:p,isHoveredInModal:o===e.guid,isMostVoted:a,isOtherPinSelected:!!n&&n!==e.guid,isSelected:n===e.guid,nodePosition:s,nodeVoteInfo:e,selectPin:u},e.guid)})})}},526818:(e,t,n)=>{n.d(t,{BV:()=>o,CB:()=>S,Cu:()=>L,D5:()=>_,EW:()=>h,G7:()=>a,Gg:()=>A,H$:()=>O,H0:()=>c,HK:()=>P,I5:()=>G,JK:()=>T,Mi:()=>j,N$:()=>d,QD:()=>z,QZ:()=>D,R8:()=>M,Un:()=>E,Vq:()=>F,Yl:()=>x,Ys:()=>r,_K:()=>g,ak:()=>C,c1:()=>N,dA:()=>w,dH:()=>m,h9:()=>f,kj:()=>y,lm:()=>I,pt:()=>b,qn:()=>k,rQ:()=>v,sJ:()=>B,xL:()=>l,xf:()=>p,yc:()=>u,zp:()=>R});var i=n(104076),s=n(755444);let a=(0,s.ck)("054596349bf8a2ae155aa7818cf2a3cbf483a9f4"),r=(0,s.ck)("295306027f272a9b0931ddec9321361f7cd8299b");function l(){return(0,i.jsx)("svg",{width:"20",height:"14",viewBox:"0 0 20 14",fill:"none",children:(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.5 3.5C8.5 4.88071 7.38071 6 6 6C4.61929 6 3.5 4.88071 3.5 3.5C3.5 2.11929 4.61929 1 6 1C7.38071 1 8.5 2.11929 8.5 3.5ZM9.5 3.5C9.5 5.433 7.933 7 6 7C4.067 7 2.5 5.433 2.5 3.5C2.5 1.567 4.067 0 6 0C7.933 0 9.5 1.567 9.5 3.5ZM17 5C17 6.10457 16.1046 7 15 7C13.8954 7 13 6.10457 13 5C13 3.89543 13.8954 3 15 3C16.1046 3 17 3.89543 17 5ZM18 5C18 6.65685 16.6569 8 15 8C13.3431 8 12 6.65685 12 5C12 3.34315 13.3431 2 15 2C16.6569 2 18 3.34315 18 5ZM13.2108 10.4215C13.7492 10.1518 14.3569 10 15 10C17.2091 10 19 11.7909 19 14H20C20 11.2386 17.7614 9 15 9C14.1612 9 13.3706 9.20657 12.6763 9.57162C12.8743 9.83933 13.0532 10.1234 13.2108 10.4215ZM12 14H11C11 11.2386 8.76142 9 6 9C3.23858 9 1 11.2386 1 14H0C0 10.6863 2.68629 8 6 8C9.31371 8 12 10.6863 12 14Z"})})}function o({color:e="#699BF7"}){return(0,i.jsxs)("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",children:[(0,i.jsx)("g",{clipPath:"url(#clip0_4137_211384)",children:(0,i.jsxs)("g",{clipPath:"url(#clip1_4137_211384)",children:[(0,i.jsx)("rect",{width:"64",height:"64",transform:"translate(0 16.3726) rotate(-15)",fill:e}),(0,i.jsx)("rect",{x:"12.7651",y:"25.3755",width:"44",height:"6",transform:"rotate(-15 12.7651 25.3755)",fill:"black",fillOpacity:"0.15"}),(0,i.jsx)("rect",{x:"15.871",y:"36.9666",width:"32",height:"6",transform:"rotate(-15 15.871 36.9666)",fill:"black",fillOpacity:"0.15"})]})}),(0,i.jsxs)("defs",{children:[(0,i.jsx)("clipPath",{id:"clip0_4137_211384",children:(0,i.jsx)("rect",{width:"40",height:"72",fill:"white"})}),(0,i.jsx)("clipPath",{id:"clip1_4137_211384",children:(0,i.jsx)("rect",{width:"64",height:"64",fill:"white",transform:"translate(0 16.3726) rotate(-15)"})})]})]})}function d(){return(0,i.jsxs)("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",children:[(0,i.jsxs)("g",{clipPath:"url(#clip0_4119_210884)",children:[(0,i.jsx)("rect",{x:"1.93188",y:"17.8704",width:"40",height:"40",rx:"8",transform:"rotate(-15 1.93188 17.8704)",fill:"white"}),(0,i.jsx)("rect",{x:"4.65869",y:"35.7747",width:"4",height:"4",transform:"rotate(-15 4.65869 35.7747)",fill:"black",fillOpacity:"0.8"}),(0,i.jsx)("path",{d:"M6.55591 33.1958L4.61477 25.9514C3.47123 21.6836 5.43444 17.4495 9.59547 16.3346L33.1641 10.0194C37.3251 8.90444 41.1423 11.5897 42.2859 15.8574L44.227 23.1019",stroke:"black",strokeOpacity:"0.2"}),(0,i.jsx)("path",{d:"M8.62646 40.9232L10.5676 48.1676C11.7111 52.4354 15.5284 55.1206 19.6894 54.0057L43.258 47.6905C47.419 46.5755 49.3822 42.3414 48.2387 38.0737L46.2976 30.8293",stroke:"black",strokeOpacity:"0.2"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M32.2731 19.058L14.8865 23.7167L15.4041 25.6486L23.1315 23.578L28.3079 42.8965L30.2398 42.3789L25.0634 23.0604L32.7908 20.9898L32.2731 19.058Z",fill:"black",fillOpacity:"0.8"})]}),(0,i.jsx)("defs",{children:(0,i.jsx)("clipPath",{id:"clip0_4119_210884",children:(0,i.jsx)("rect",{width:"40",height:"72",fill:"white"})})})]})}function c(){return(0,i.jsxs)("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",children:[(0,i.jsxs)("g",{clipPath:"url(#clip0_4119_210979)",children:[(0,i.jsx)("rect",{fill:"white",height:"10",rx:"2",stroke:"#0D99FF",strokeLinecap:"square",strokeWidth:"2",transform:"rotate(-15.0378 0.87391 13.0737)",width:"10",x:"0.87391",y:"13.0737"}),(0,i.jsx)("rect",{fill:"white",height:"10",rx:"2",stroke:"#0D99FF",strokeLinecap:"square",strokeWidth:"2",transform:"rotate(-15.0378 17.4791 74.8821)",width:"10",x:"17.4791",y:"74.8821"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M47.6782 27.9006L46.2859 22.7045L48.2177 22.1868L49.5833 27.2831L54.6798 25.9175L55.1974 27.8493L50.0013 29.2416L49.5104 27.4096L47.6782 27.9006ZM32.6806 33.8827L27.4845 35.275L26.9668 33.3431L32.0632 31.9775L30.6977 26.8814L32.6296 26.3637L34.0219 31.5598L34.1216 31.5331L47.5783 27.9274L49.5101 27.4097L50.0278 29.3416L53.6335 42.7982L54.1511 44.7301L52.2193 45.2477L38.7626 48.8534L36.8308 49.3711L36.8308 49.3711L38.6628 48.8802L40.0551 54.0763L38.1232 54.594L36.7577 49.4977L31.6615 50.8632L31.1438 48.9314L36.3399 47.5391L36.3131 47.4392L32.7074 33.9826L32.1898 32.0507L32.1897 32.0508L32.6806 33.8827ZM48.0959 29.8592L34.6393 33.4649L38.245 46.9216L51.7016 43.3159L48.0959 29.8592ZM54.278 44.8033L59.3744 43.4378L58.8568 41.5059L53.6607 42.8982L54.1515 44.73L52.3193 45.221L53.7116 50.4171L55.6435 49.8994L54.278 44.8033Z",fill:"#0D99FF"}),(0,i.jsx)("rect",{x:"7",y:"16.6052",width:"64",height:"64",transform:"rotate(-15.0378 7 16.6052)",stroke:"#0D99FF",strokeWidth:"2"})]}),(0,i.jsx)("defs",{children:(0,i.jsx)("clipPath",{id:"clip0_4119_210979",children:(0,i.jsx)("rect",{width:"40",height:"72",fill:"white"})})})]})}function u(){return(0,i.jsxs)("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",children:[(0,i.jsxs)("g",{clipPath:"url(#clip0_4121_211214)",children:[(0,i.jsx)("rect",{fill:"white",height:"10",rx:"2",stroke:"#9747FF",strokeLinecap:"square",strokeWidth:"2",transform:"rotate(-15.0378 0.87391 13.0737)",width:"10",x:"0.87391",y:"13.0737"}),(0,i.jsx)("rect",{fill:"white",height:"10",rx:"2",stroke:"#9747FF",strokeLinecap:"square",strokeWidth:"2",transform:"rotate(-15.0378 17.4789 74.8821)",width:"10",x:"17.4789",y:"74.8821"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M35.8154 33.1697L40.4705 25.1453L48.5141 29.7671L43.859 37.7915L35.8154 33.1697ZM37.1696 49.4156L29.1452 44.7605L33.767 36.7169L41.7914 41.372L37.1696 49.4156ZM53.4151 48.061L48.76 56.0855L40.7164 51.4636L45.3715 43.4392L53.4151 48.061ZM60.0855 36.4702L52.0611 31.8151L47.4393 39.8587L55.4637 44.5138L60.0855 36.4702Z",fill:"#8638E5"}),(0,i.jsx)("rect",{x:"7",y:"16.6052",width:"64",height:"64",transform:"rotate(-15.0378 7 16.6052)",stroke:"#9747FF",strokeWidth:"2"})]}),(0,i.jsx)("defs",{children:(0,i.jsx)("clipPath",{id:"clip0_4121_211214",children:(0,i.jsx)("rect",{width:"40",height:"72",fill:"white"})})})]})}function p(){return(0,i.jsxs)("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",children:[(0,i.jsxs)("g",{clipPath:"url(#clip0_4591_210267)",children:[(0,i.jsx)("rect",{x:"-2",y:"15.4233",width:"48",height:"48",rx:"9.6",transform:"rotate(-15 -2 15.4233)",fill:"white"}),(0,i.jsx)("rect",{x:"-1.26515",y:"15.8476",width:"46.8",height:"46.8",rx:"9",transform:"rotate(-15 -1.26515 15.8476)",stroke:"black",strokeOpacity:"0.2",strokeWidth:"1.2"}),(0,i.jsx)("circle",{cx:"31.4811",cy:"24.4658",r:"4.2",transform:"rotate(-15 31.4811 24.4658)",stroke:"black",strokeOpacity:"0.8",strokeWidth:"2.4"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.606 20.7418L36.1064 13.909C37.3868 13.566 38.7028 14.3258 39.0458 15.6061L45.8786 41.1065C46.2217 42.3868 45.4619 43.7028 44.1816 44.0459L42.4018 44.5228L21.5894 30.0419L20.6167 29.3651L19.9277 30.3293L13.2094 39.7307L8.90894 23.6812C8.56588 22.4009 9.32568 21.0849 10.606 20.7418ZM14.0138 42.7329L15.7418 49.1817C16.0848 50.462 17.4008 51.2218 18.6812 50.8787L39.368 45.3357L21.1914 32.6888L14.0138 42.7329ZM6.59072 24.3024C5.9046 21.7418 7.4242 19.1097 9.98483 18.4236L35.4853 11.5908C38.0459 10.9047 40.6779 12.4243 41.364 14.9849L48.1969 40.4854C48.883 43.046 47.3634 45.678 44.8028 46.3641L19.3023 53.197C16.7417 53.8831 14.1097 52.3635 13.4235 49.8028L6.59072 24.3024Z",fill:"black",fillOpacity:"0.8"})]}),(0,i.jsx)("defs",{children:(0,i.jsx)("clipPath",{id:"clip0_4591_210267",children:(0,i.jsx)("rect",{width:"40",height:"72",fill:"white"})})})]})}function m({color:e="#699BF7"}){return(0,i.jsxs)("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",children:[(0,i.jsx)("g",{clipPath:"url(#clip0_4121_211235)",children:(0,i.jsx)("rect",{y:"16.5644",width:"64",height:"64",rx:"3",transform:"rotate(-15 0 16.5644)",fill:e})}),(0,i.jsx)("defs",{children:(0,i.jsx)("clipPath",{id:"clip0_4121_211235",children:(0,i.jsx)("rect",{width:"40",height:"72",fill:"white"})})})]})}function h({color:e="#699BF7"}){return(0,i.jsxs)("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",children:[(0,i.jsx)("g",{clipPath:"url(#clip0_4171_210078)",children:(0,i.jsx)("rect",{x:"-5.5",y:"14.4346",width:"88.7204",height:"72.0853",rx:"25.2992",transform:"rotate(-15 -5.5 14.4346)",fill:e})}),(0,i.jsx)("defs",{children:(0,i.jsx)("clipPath",{id:"clip0_4171_210078",children:(0,i.jsx)("rect",{width:"40",height:"72",fill:"white"})})})]})}function f({color:e="#699BF7"}){return(0,i.jsxs)("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",children:[(0,i.jsx)("g",{clipPath:"url(#clip0_4171_210088)",children:(0,i.jsx)("path",{d:"M16.5562 8.25247C16.8973 6.92671 18.0926 6 19.4615 6L89.4516 6C91.4118 6 92.8454 7.84915 92.357 9.74752L73.765 82.0085C73.4239 83.3342 72.2286 84.2609 70.8596 84.2609H0.869569C-1.09063 84.2609 -2.52423 82.4118 -2.0358 80.5134L16.5562 8.25247Z",fill:e})}),(0,i.jsx)("defs",{children:(0,i.jsx)("clipPath",{id:"clip0_4171_210088",children:(0,i.jsx)("rect",{width:"40",height:"72",fill:"white"})})})]})}function g({color:e="#699BF7"}){return(0,i.jsxs)("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",children:[(0,i.jsx)("g",{clipPath:"url(#clip0_4173_210152)",children:(0,i.jsx)("path",{d:"M75.9438 8.25247C75.6027 6.92671 74.4074 6 73.0385 6L3.04841 6C1.08821 6 -0.34539 7.84915 0.143036 9.74752L18.735 82.0085C19.0761 83.3342 20.2714 84.2609 21.6404 84.2609H91.6304C93.5906 84.2609 95.0242 82.4118 94.5358 80.5134L75.9438 8.25247Z",fill:e})}),(0,i.jsx)("defs",{children:(0,i.jsx)("clipPath",{id:"clip0_4173_210152",children:(0,i.jsx)("rect",{width:"40",height:"72",fill:"white"})})})]})}function x({color:e="#699BF7"}){return(0,i.jsxs)("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",children:[(0,i.jsx)("g",{clipPath:"url(#clip0_4119_210848)",children:(0,i.jsx)("circle",{cx:"40",cy:"46",r:"40",fill:e})}),(0,i.jsx)("defs",{children:(0,i.jsx)("clipPath",{id:"clip0_4119_210848",children:(0,i.jsx)("rect",{width:"40",height:"72",fill:"white"})})})]})}function _({color:e="#699BF7"}){return(0,i.jsxs)("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",children:[(0,i.jsx)("g",{clipPath:"url(#clip0_4119_210856)",children:(0,i.jsx)("g",{clipPath:"url(#clip1_4119_210856)",children:(0,i.jsx)("path",{d:"M18.693 6.40686C19.2012 4.50766 21.9085 3.78226 23.2982 5.17292L82.5015 64.4167C83.7556 65.6717 82.9788 67.752 81.0647 68.2649L0.211739 89.9294C-1.70237 90.4423 -3.41521 89.029 -2.95662 87.3152L18.693 6.40686Z",fill:e})})}),(0,i.jsxs)("defs",{children:[(0,i.jsx)("clipPath",{id:"clip0_4119_210856",children:(0,i.jsx)("rect",{width:"40",height:"72",fill:"white"})}),(0,i.jsx)("clipPath",{id:"clip1_4119_210856",children:(0,i.jsx)("rect",{width:"89.0428",height:"77.1705",fill:"white",transform:"translate(-22.3394 16.0794) rotate(-15)"})})]})]})}function y({color:e="#699BF7"}){return(0,i.jsxs)("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",children:[(0,i.jsx)("g",{clipPath:"url(#clip0_4121_211255)",children:(0,i.jsx)("path",{d:"M51.3523 84.6094C52.5437 86.3294 55.5163 86.0834 56.4088 84.191L94.4305 3.57293C95.2359 1.86524 93.7104 0.0603115 91.6086 0.234234L2.83059 7.58081C0.728861 7.75473 -0.479214 9.78588 0.59593 11.3379L51.3523 84.6094Z",fill:e})}),(0,i.jsx)("defs",{children:(0,i.jsx)("clipPath",{id:"clip0_4121_211255",children:(0,i.jsx)("rect",{width:"40",height:"72",fill:"white"})})})]})}function v({color:e="#699BF7"}){return(0,i.jsxs)("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",children:[(0,i.jsxs)("g",{clipPath:"url(#clip0_4119_210865)",children:[(0,i.jsx)("ellipse",{cx:"36.0212",cy:"10.0459",rx:"36.2221",ry:"8.35894",transform:"rotate(-15 36.0212 10.0459)",fill:e}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M72.0853 4.68736C67.4361 9.37258 54.7615 15.1933 39.2535 19.3486C21.2873 24.2612 6.9678 24.914 1.84497 22.4498L15.4556 73.2452L15.4564 73.2483L15.4564 73.2483C16.6513 77.7075 33.2845 77.1251 52.6077 71.9474C71.9309 66.7698 86.6269 58.9575 85.4321 54.4984L72.0853 4.68736Z",fill:e})]}),(0,i.jsx)("defs",{children:(0,i.jsx)("clipPath",{id:"clip0_4119_210865",children:(0,i.jsx)("rect",{width:"40",height:"72",fill:"white"})})})]})}function b({color:e="#699BF7"}){return(0,i.jsxs)("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",children:[(0,i.jsxs)("g",{clipPath:"url(#clip0_4171_210106)",children:[(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.30957 14.019C11.2258 17.2597 17.7809 30.6301 22.2705 47.3855C27.6619 67.5064 28.033 84.8893 23.0994 86.2112C22.8341 86.2823 22.5589 86.3055 22.2747 86.2826L22.3557 86.5848L94.06 67.3717L94.072 67.3685L94.0839 67.3652L94.4168 67.276L94.4086 67.2455C98.6089 65.2803 97.911 48.5964 92.7387 29.2931C87.5664 9.98975 79.8288 -4.80791 75.2087 -4.40965L75.2005 -4.44026L6.30957 14.019Z",fill:e}),(0,i.jsx)("ellipse",{rx:"37.1231",ry:"8.56687",transform:"matrix(-0.258819 -0.965926 -0.965926 0.258819 12.747 50.7267)",fill:e})]}),(0,i.jsx)("defs",{children:(0,i.jsx)("clipPath",{id:"clip0_4171_210106",children:(0,i.jsx)("rect",{width:"40",height:"72",fill:"white"})})})]})}function C({color:e="#699BF7"}){return(0,i.jsxs)("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",children:[(0,i.jsxs)("g",{clipPath:"url(#clip0_4121_211283)",children:[(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M67.808 -0.216748L71.1184 12.1379L84.015 60.2684C84.2789 61.2533 83.6944 62.2656 82.7096 62.5295L14.95 80.6856C13.9636 80.9499 12.9501 80.3633 12.6879 79.3764L0.985107 35.3241L17.2244 30.9728C18.2736 30.6916 18.8962 29.6132 18.6151 28.564L14.2374 12.2262L65.5469 -1.52218C66.5318 -1.78607 67.5441 -1.20161 67.808 -0.216748ZM14.1879 12.2394L12.5651 12.6743L12.5663 12.6788L14.1879 12.2394Z",fill:e}),(0,i.jsx)("path",{d:"M0.453613 33.7343L15.3437 29.7445C16.2999 29.4883 16.8674 28.5054 16.6112 27.5492L12.6214 12.6591L0.453613 33.7343Z",fill:e})]}),(0,i.jsx)("defs",{children:(0,i.jsx)("clipPath",{id:"clip0_4121_211283",children:(0,i.jsx)("rect",{width:"40",height:"72",fill:"white"})})})]})}function j({color:e="#699BF7"}){return(0,i.jsxs)("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",children:[(0,i.jsxs)("g",{clipPath:"url(#clip0_4121_211302)",children:[(0,i.jsx)("path",{d:"M1.59945 13.1347C1.69191 12.2997 2.28702 11.6068 3.09854 11.3894L33.2368 3.31384C34.0484 3.09639 34.9102 3.39889 35.4078 4.07583L43.442 15.006L0.106658 26.6177L1.59945 13.1347Z",fill:e}),(0,i.jsx)("path",{d:"M0.49585 28.071L77.3176 7.48667C78.4055 7.19517 79.5237 7.84077 79.8152 8.92866L93.0608 58.3616C93.3523 59.4495 92.7067 60.5677 91.6188 60.8592L16.7668 80.9157C15.6789 81.2072 14.5607 80.5616 14.2692 79.4737L0.49585 28.071Z",fill:e})]}),(0,i.jsx)("defs",{children:(0,i.jsx)("clipPath",{id:"clip0_4121_211302",children:(0,i.jsx)("rect",{width:"40",height:"72",fill:"white"})})})]})}function k({color:e="#699BF7"}){return(0,i.jsxs)("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",children:[(0,i.jsx)("g",{clipPath:"url(#clip0_1508_10125)",children:(0,i.jsx)("path",{d:"M114.56 0.523225L5.97986 10.0227C2.09706 10.3624 -0.43629 14.2562 0.826349 17.9436L23.8419 80.1745C24.7355 82.7842 27.2933 84.4483 30.0413 84.2079L103.746 77.7596C106.494 77.5192 108.724 75.4361 109.151 72.7109L121.01 7.42886C121.613 3.57818 118.442 0.183524 114.56 0.523225Z",fill:e})}),(0,i.jsx)("defs",{children:(0,i.jsx)("clipPath",{id:"clip0_1508_10125",children:(0,i.jsx)("rect",{width:"40",height:"72",fill:"white"})})})]})}function w({color:e="#699BF7"}){return(0,i.jsxs)("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",children:[(0,i.jsx)("g",{clipPath:"url(#clip0_1_2)",children:(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.0018 18.1129C2.35849 15.712 3.7829 13.2449 6.18378 12.6015L8.11564 12.0839L28.0447 86.4602L26.1128 86.9778C23.712 87.6211 21.2448 86.1967 20.6015 83.7958L3.0018 18.1129ZM30.9425 85.6837L11.0134 11.3074L67.0371 -3.70406L86.9662 70.6722L30.9425 85.6837ZM89.864 69.8958L69.9349 -4.48052L71.8667 -4.99815C74.2676 -5.64147 76.7348 -4.21705 77.3781 -1.81617L94.9778 63.8668C95.6211 66.2677 94.1967 68.7348 91.7958 69.3781L89.864 69.8958Z",fill:e})}),(0,i.jsx)("defs",{children:(0,i.jsx)("clipPath",{id:"clip0_1_2",children:(0,i.jsx)("rect",{width:"40",height:"72",fill:"white"})})})]})}function E({color:e="#699BF7"}){return(0,i.jsxs)("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",children:[(0,i.jsx)("g",{clipPath:"url(#clip0_1508_9936)",children:(0,i.jsx)("path",{d:"M1.28373 39.4007L27.401 4.53364C29.0584 2.33788 31.9967 1.55056 34.5299 2.62346L74.5817 19.7606C76.9322 20.7561 78.3955 23.1298 78.2289 25.677L74.5428 65.0534C74.3751 67.6187 72.5917 69.7921 70.1085 70.4574L30.506 81.0689C28.0228 81.7343 25.3917 80.7438 23.9638 78.606L1.08334 46.3481C-0.334505 44.2255 -0.254107 41.4381 1.28373 39.4007Z",fill:e})}),(0,i.jsx)("defs",{children:(0,i.jsx)("clipPath",{id:"clip0_1508_9936",children:(0,i.jsx)("rect",{width:"40",height:"72",fill:"white"})})})]})}function T({color:e="#699BF7"}){return(0,i.jsxs)("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",children:[(0,i.jsx)("g",{clipPath:"url(#clip0_1508_9948)",children:(0,i.jsx)("path",{d:"M77.1821 12.7227L54.9038 -0.139714C53.5257 -0.935364 51.8879 -1.15098 50.3509 -0.739117L23.3659 6.49148C21.8288 6.90334 20.5183 7.90893 19.7227 9.28704L6.8603 31.5654C6.06465 32.9435 5.84904 34.5812 6.2609 36.1183L13.4915 63.1032C13.9034 64.6403 14.9089 65.9508 16.2871 66.7465L38.5654 79.6089C39.9435 80.4045 41.5812 80.6201 43.1183 80.2083L70.1032 72.9777C71.6403 72.5658 72.9508 71.5602 73.7465 70.1821L86.6089 47.9038C87.4045 46.5257 87.6201 44.888 87.2083 43.3509L79.9777 16.3659C79.5658 14.8288 78.5602 13.5183 77.1821 12.7227Z",fill:e})}),(0,i.jsx)("defs",{children:(0,i.jsx)("clipPath",{id:"clip0_1508_9948",children:(0,i.jsx)("rect",{width:"40",height:"72",fill:"white"})})})]})}function S({color:e="#699BF7"}){return(0,i.jsxs)("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",children:[(0,i.jsx)("g",{clipPath:"url(#clip0_1508_9990)",children:(0,i.jsx)("path",{d:"M4.38961 47.4437L8.7529 18.3221C9.07419 15.9214 10.8074 13.9494 13.147 13.3225L79.3093 -4.40567C81.6489 -5.03256 84.1359 -4.1913 85.6145 -2.2729L103.954 20.7655C104.931 22.033 105.361 23.6381 105.149 25.2242L100.785 54.3458C100.464 56.7465 98.7309 58.7186 96.3914 59.3454L30.229 77.0736C27.8895 77.7005 25.4024 76.8592 23.9238 74.9408L5.58431 51.9024C4.60744 50.635 4.17733 49.0298 4.38961 47.4437Z",fill:e})}),(0,i.jsx)("defs",{children:(0,i.jsx)("clipPath",{id:"clip0_1508_9990",children:(0,i.jsx)("rect",{width:"40",height:"72",fill:"white"})})})]})}function I({color:e="#699BF7"}){return(0,i.jsxs)("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",children:[(0,i.jsx)("g",{clipPath:"url(#clip0_1508_10069)",children:(0,i.jsx)("path",{d:"M78.3034 46.7945L75.2573 11.9772C74.9685 8.67607 72.0583 6.23413 68.7572 6.52293L5.97724 12.0155C2.67614 12.3043 0.234196 15.2145 0.523004 18.5156L3.56912 53.3329C3.75676 55.4776 5.07913 57.3574 7.03428 58.2588L40.0733 74.3612C42.003 75.2509 44.2594 75.0535 46.0054 73.8422L75.7463 52.2473C77.5152 51.0201 78.4911 48.9392 78.3034 46.7945Z",fill:e})}),(0,i.jsx)("defs",{children:(0,i.jsx)("clipPath",{id:"clip0_1508_10069",children:(0,i.jsx)("rect",{width:"40",height:"72",fill:"white"})})})]})}function N({color:e="#699BF7"}){return(0,i.jsxs)("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",children:[(0,i.jsx)("g",{clipPath:"url(#clip0_1508_10082)",children:(0,i.jsx)("path",{d:"M53.8362 -0.906348L28.8877 3.49274C25.6243 4.06816 23.4453 7.18012 24.0207 10.4435L25.9888 21.6046C26.5642 24.868 24.3852 27.98 21.1218 28.5554L9.96064 30.5234C6.69727 31.0988 4.51826 34.2108 5.09368 37.4741L9.49277 62.4226C10.0682 65.686 13.1801 67.865 16.4435 67.2896L27.6047 65.3216C30.868 64.7461 33.98 66.9252 34.5554 70.1885L36.5234 81.3496C37.0988 84.613 40.2108 86.792 43.4741 86.2166L68.4226 81.8175C71.686 81.2421 73.865 78.1301 73.2896 74.8668L71.3216 63.7056C70.7462 60.4423 72.9252 57.3303 76.1885 56.7549L87.3497 54.7869C90.613 54.2115 92.792 51.0995 92.2166 47.8362L87.8175 22.8877C87.2421 19.6243 84.1302 17.4453 80.8668 18.0207L69.7057 19.9887C66.4423 20.5641 63.3304 18.3851 62.7549 15.1218L60.7869 3.96061C60.2115 0.697243 57.0996 -1.48177 53.8362 -0.906348Z",fill:e})}),(0,i.jsx)("defs",{children:(0,i.jsx)("clipPath",{id:"clip0_1508_10082",children:(0,i.jsx)("rect",{width:"40",height:"72",fill:"white"})})})]})}function A({color:e="#699BF7"}){return(0,i.jsxs)("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",children:[(0,i.jsx)("g",{clipPath:"url(#clip0_1508_10095)",children:(0,i.jsx)("path",{d:"M53.9511 20.3098L42.1525 3.16336C39.1912 0.00572091 33.9624 0.927699 32.2597 4.90774L27.0372 25.0555C26.4488 26.4308 25.3678 27.5367 24.0063 28.1564L3.71302 33.8825C-0.294145 35.7063 -1.03771 41.0813 2.32381 43.9245L20.084 54.7429C21.247 55.7266 21.9924 57.1158 22.1689 58.6287L21.3874 79.2433C21.8923 83.5712 26.6965 85.9346 30.4331 83.6935L46.7061 70.2694C47.9748 69.5084 49.4799 69.243 50.9323 69.5242L70.8153 76.573C75.0931 77.401 78.7991 73.537 77.7934 69.2974L70.0084 50.1933C69.6568 48.7113 69.8821 47.1509 70.6385 45.8288L83.6275 29.5885C85.8139 25.767 83.2768 20.9705 78.8875 20.6272L57.8597 22.1872C56.3683 22.0705 54.9743 21.401 53.9511 20.3098Z",fill:e})}),(0,i.jsx)("defs",{children:(0,i.jsx)("clipPath",{id:"clip0_1508_10095",children:(0,i.jsx)("rect",{width:"40",height:"72",fill:"white"})})})]})}function L({color:e="#699BF7"}){return(0,i.jsxs)("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",children:[(0,i.jsx)("g",{clipPath:"url(#clip0_1508_10138)",children:(0,i.jsx)("path",{d:"M12.85 78.4563L1.39908 13.5151C0.701528 9.55913 4.01276 6.04841 8.00276 6.51361L106.493 17.9966C109.127 18.3037 111.247 20.3031 111.707 22.9144L118.224 59.876C118.8 63.1393 116.621 66.2513 113.357 66.8267L19.8007 83.3233C16.5373 83.8987 13.4254 81.7197 12.85 78.4563Z",fill:e})}),(0,i.jsx)("defs",{children:(0,i.jsx)("clipPath",{id:"clip0_1508_10138",children:(0,i.jsx)("rect",{width:"40",height:"72",fill:"white"})})})]})}function M({color:e="#699BF7"}){return(0,i.jsxs)("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",children:[(0,i.jsx)("g",{clipPath:"url(#clip0_1508_10170)",children:(0,i.jsx)("path",{d:"M3.52293 10.7657C3.23413 7.46464 5.67607 4.55445 8.97717 4.26564L88.0582 -2.65305C91.3593 -2.94186 94.2695 -0.499919 94.5583 2.80118L98.93 52.7701C99.3106 57.1197 95.0142 60.5495 90.7364 59.6753C85.6875 58.6434 79.1215 57.7867 72.6631 58.3517C59.3871 59.5132 46.8006 72.394 33.8579 73.5263C25.4977 74.2577 16.8948 72.2143 12.2232 70.8232C10.0275 70.1694 8.54803 68.2028 8.34835 65.9205L3.52293 10.7657Z",fill:e})}),(0,i.jsx)("defs",{children:(0,i.jsx)("clipPath",{id:"clip0_1508_10170",children:(0,i.jsx)("rect",{width:"40",height:"72",fill:"white"})})})]})}function O({color:e="#699BF7"}){return(0,i.jsxs)("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",children:[(0,i.jsx)("g",{clipPath:"url(#clip0_1508_10181)",children:(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.3176 14.6705C1.88439 9.71881 5.54731 5.35352 10.499 4.92031L74.9606 -0.719357C77.7924 -0.967105 80.3366 0.794636 81.185 3.38441L12.8314 9.36458C8.98009 9.70152 6.13115 13.0967 6.4681 16.948L10.3685 61.53L7.72221 60.9899C6.90554 60.8233 6.29563 60.1395 6.22298 59.3092L2.3176 14.6705ZM13.0928 12.3532L15.0852 12.1789L81.6029 6.35932L83.1972 6.21983C86.4983 5.93102 89.4085 8.37296 89.6973 11.6741L93.3699 53.6516C93.7502 57.9988 89.453 61.4325 85.1642 60.627C80.8923 59.8246 75.5894 59.2269 70.3662 59.6838C64.4909 60.1979 58.7686 63.3152 53.0827 66.4127C47.4685 69.4711 41.8899 72.5101 36.2345 73.0049C29.1375 73.6258 21.8422 71.9786 17.6488 70.7666C15.4459 70.1298 13.96 68.1595 13.7601 65.8752L13.4347 62.1558L9.63099 18.679L9.45668 16.6866C9.26414 14.4858 10.8921 12.5457 13.0928 12.3532Z",fill:e})}),(0,i.jsx)("defs",{children:(0,i.jsx)("clipPath",{id:"clip0_1508_10181",children:(0,i.jsx)("rect",{width:"40",height:"72",fill:"white"})})})]})}function R({color:e="#699BF7"}){return(0,i.jsxs)("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",children:[(0,i.jsx)("g",{clipPath:"url(#clip0_1508_10194)",children:(0,i.jsx)("path",{d:"M13.5958 79.9017C8.77167 80.3237 5.46072 75.1516 7.86364 70.9473L21.5019 47.0847C22.744 44.9115 22.5064 42.1954 20.9058 40.2709L3.33102 19.1391C0.234531 15.4159 2.59704 9.74744 7.42117 9.32538L90.1645 2.08628C92.2987 1.89955 94.3706 2.86499 95.6004 4.61925L115.109 32.4478C116.341 34.205 116.541 36.4863 115.633 38.4307L101.253 69.2241C100.346 71.1653 98.4734 72.4758 96.3391 72.6626L13.5958 79.9017Z",fill:e})}),(0,i.jsx)("defs",{children:(0,i.jsx)("clipPath",{id:"clip0_1508_10194",children:(0,i.jsx)("rect",{width:"40",height:"72",fill:"white"})})})]})}function P({color:e="#699BF7"}){return(0,i.jsxs)("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",children:[(0,i.jsx)("g",{clipPath:"url(#clip0_2094_1753)",children:(0,i.jsx)("path",{d:"M16.731 20.0212C13.2433 16.3882 7.10166 18.409 6.4527 23.4032L1.37881 62.4502C0.884517 66.2541 4.03759 69.5386 7.85853 69.1999L47.08 65.7235C52.0965 65.2788 54.3663 59.2248 50.8786 55.5917L46.4318 50.9596L85.863 13.1058C88.2534 10.811 88.331 7.01278 86.0361 4.62231L69.0925 -13.0273C66.7977 -15.4178 62.9995 -15.4953 60.609 -13.2005L21.1778 24.6533L16.731 20.0212Z",fill:e})}),(0,i.jsx)("defs",{children:(0,i.jsx)("clipPath",{id:"clip0_2094_1753",children:(0,i.jsx)("rect",{width:"40",height:"72",fill:"white"})})})]})}function D({color:e="#699BF7"}){return(0,i.jsxs)("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",children:[(0,i.jsx)("g",{clipPath:"url(#clip0_2094_1725)",children:(0,i.jsx)("path",{d:"M52.9651 15.8477L35.2998 41.0764L59.9709 58.3513C64.1126 51.7654 65.9172 43.6796 64.4598 35.4144C63.0477 27.4063 58.8158 20.6037 52.9651 15.8477ZM49.7126 13.5191L32.0232 38.7821L6.79163 21.1147C11.5638 14.9703 18.5448 10.5091 26.81 9.05173C35.0608 7.59689 43.133 9.39265 49.7126 13.5191ZM4.53573 24.4182L29.7289 42.0587L12.4783 66.6951C6.35043 61.9235 1.90212 54.9524 0.447277 46.7016C-0.962241 38.7078 0.67945 30.8817 4.53573 24.4182ZM15.779 68.955C22.2492 72.8262 30.089 74.4763 38.0971 73.0642C46.0909 71.6547 52.8835 67.4354 57.6382 61.601L33.0055 44.353L15.779 68.955Z",fill:e})}),(0,i.jsx)("defs",{children:(0,i.jsx)("clipPath",{id:"clip0_2094_1725",children:(0,i.jsx)("rect",{width:"40",height:"72",fill:"white"})})})]})}function F({color:e="#699BF7"}){return(0,i.jsxs)("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",children:[(0,i.jsxs)("g",{clipPath:"url(#clip0_2094_1739)",children:[(0,i.jsx)("path",{d:"M28.644 8.74898L34.0412 39.3575L64.2193 34.0363C62.5252 26.3602 58.0606 19.2724 51.1138 14.4082C44.3027 9.63898 36.299 7.84315 28.644 8.74898Z",fill:e}),(0,i.jsx)("path",{d:"M25.4365 9.29133L30.8376 39.9224L0.206747 45.3234C-0.826765 37.5308 0.944422 29.3435 5.80863 22.3967C10.6728 15.45 17.7605 10.9854 25.4365 9.29133Z",fill:e}),(0,i.jsx)("path",{d:"M0.79417 48.523L31.4025 43.126L36.7236 73.3038C28.9311 74.3373 20.7439 72.5661 13.7972 67.7019C6.98606 62.9327 2.56115 56.0261 0.79417 48.523Z",fill:e}),(0,i.jsx)("path",{d:"M39.9232 72.7164C47.4263 70.9495 54.3331 66.5246 59.1023 59.7134C63.8715 52.9023 65.6673 44.8987 64.7616 37.2438L34.606 42.5611L39.9232 72.7164Z",fill:e})]}),(0,i.jsx)("defs",{children:(0,i.jsx)("clipPath",{id:"clip0_2094_1739",children:(0,i.jsx)("rect",{width:"40",height:"72",fill:"white"})})})]})}function z({color:e="#699BF7"}){return(0,i.jsxs)("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",children:[(0,i.jsx)("g",{clipPath:"url(#clip0_2094_1770)",children:(0,i.jsx)("path",{d:"M16.7681 5.48015C8.61136 6.30146 2.66482 13.5796 3.48613 21.7363L5.92497 45.9576C6.74628 54.1143 14.0244 60.0609 22.1811 59.2396L22.4765 59.2098L23.2086 66.48C23.4012 68.393 25.6685 69.2962 27.1238 68.0396L39.3133 57.5145L68.2606 54.5998C76.4174 53.7785 82.3639 46.5004 81.5426 38.3436L79.1038 14.1224C78.2825 5.96563 71.0043 0.01909 62.8476 0.840394L16.7681 5.48015Z",fill:e})}),(0,i.jsx)("defs",{children:(0,i.jsx)("clipPath",{id:"clip0_2094_1770",children:(0,i.jsx)("rect",{width:"40",height:"72",fill:"white"})})})]})}function B({color:e="#699BF7"}){return(0,i.jsxs)("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",children:[(0,i.jsx)("g",{clipPath:"url(#clip0_2094_1787)",children:(0,i.jsx)("path",{d:"M4.01281 14.3118C3.61202 11.0224 5.95368 8.03096 9.24306 7.63016L9.73939 7.56969L10.5256 14.022L4.07329 14.8081L4.01281 14.3118ZM4.43614 17.7861L12.7213 85.7832C13.122 89.0726 16.1135 91.4143 19.4029 91.0135L19.8992 90.953L10.8884 16.9999L4.43614 17.7861ZM13.8664 16.6371L22.8772 90.5902L106.757 80.3698C110.046 79.969 112.388 76.9776 111.987 73.6882L103.702 5.69107L13.8664 16.6371ZM103.339 2.71309L103.279 2.21676C102.878 -1.07262 99.8864 -3.41428 96.597 -3.01349L12.7174 7.20684L13.5035 13.6591L103.339 2.71309Z",fill:e})}),(0,i.jsx)("defs",{children:(0,i.jsx)("clipPath",{id:"clip0_2094_1787",children:(0,i.jsx)("rect",{width:"40",height:"72",fill:"white"})})})]})}function G(){return(0,i.jsxs)("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",children:[(0,i.jsx)("g",{clipPath:"url(#clip0_5859_244544)",children:(0,i.jsxs)("g",{clipPath:"url(#clip1_5859_244544)",children:[(0,i.jsx)("rect",{x:"-0.191895",y:"16.3726",width:"64",height:"64.7102",rx:"4",transform:"rotate(-15 -0.191895 16.3726)",fill:"#2F2746"}),(0,i.jsx)("rect",{x:"12.5732",y:"25.3755",width:"44",height:"6",transform:"rotate(-15 12.5732 25.3755)",fill:"#514670"}),(0,i.jsx)("rect",{x:"23.4062",y:"34.8961",width:"32",height:"6",transform:"rotate(-15 23.4062 34.8961)",fill:"#514670"}),(0,i.jsx)("rect",{x:"26.5122",y:"46.4872",width:"32",height:"6",transform:"rotate(-15 26.5122 46.4872)",fill:"#514670"}),(0,i.jsx)("rect",{x:"21.8906",y:"60.1488",width:"6",height:"6",transform:"rotate(-15 21.8906 60.1488)",fill:"#514670"})]})}),(0,i.jsxs)("defs",{children:[(0,i.jsx)("clipPath",{id:"clip0_5859_244544",children:(0,i.jsx)("rect",{width:"40",height:"72",fill:"white"})}),(0,i.jsx)("clipPath",{id:"clip1_5859_244544",children:(0,i.jsx)("rect",{x:"-0.191895",y:"16.3726",width:"64",height:"64.7102",rx:"4",transform:"rotate(-15 -0.191895 16.3726)",fill:"white"})})]})]})}},174318:(e,t,n)=>{n.d(t,{$_:()=>T,Av:()=>E,DG:()=>j,FJ:()=>M,Ld:()=>w,Pd:()=>R,YR:()=>O,e_:()=>S,hr:()=>I,oC:()=>N,yn:()=>A,zi:()=>L});var i=n(716976),s=n(237420),a=n(266808),r=n(795033),l=n(681398),o=n(192075),d=n(366535),c=n(244399),u=n(571430),p=n(354114),m=n(211862),h=n(944350),f=n(104836),g=n(498726),x=n(103345),_=n(191265),y=n(211261),v=n(880820),b=n(226762),C=n(428827);function j(e){let t=(0,o.t)("voting.modal.voting_setup_responsive_placeholder_prompt",{numVotes:e.userVoteLimit});return e.title||t}let k=()=>!((0,l.wg)()||(0,l.o4)());function w(){let e=(0,C.jz)();return!!(e?.length&&e?.length>0)}function E(){let e=S(),t=!!(0,C.C3)(),n=k()&&("eligible"===e||"eligibleWithUpgrade"===e),[s,a]=i.useState(t&&n);return i.useEffect(()=>{if(!t){a(!1);return}n&&a(!0)},[t,n]),n||s}var T=(e=>(e.FEATURE_DISABLED="featureDisabled",e.ELIGIBLE_WITH_MOVE_FILE_TO_PAID_TEAM="eligibleWithMoveFileToPaidTeam",e.ELIGIBLE_WITH_UPGRADE="eligibleWithUpgrade",e.ELIGIBLE="eligible",e))(T||{});function S(){let e=(0,m.q5)(),t=(0,s.d4)(t=>e&&e.teamId?t.teams[e.teamId]:null),n=(0,s.d4)(e=>e.isFreeUser),i=(0,c.DG)(e?.key||"").enabled,a=e?.isTryFile,r=!!e&&(e.canEdit||i);return a||!r?"featureDisabled":e.parentOrgId?"eligible":t?(0,f.PS)(t)?"eligible":"eligibleWithUpgrade":n?"eligibleWithUpgrade":"eligibleWithMoveFileToPaidTeam"}function I(){let e=(0,s.d4)(e=>e.mirror.appModel.votingSessionInfo),t=p.BI.getUserId(),n=t&&e.userIdToVoteStampIds[t]?.length||0;return e.userVoteLimit-n}function N(e){return Object.values(e.userIdToNodeVotes).reduce((e,t)=>e+t.length,0)}function A(e){return new Set(e.reduce((e,t)=>{let n=N(t),i=e.voteCount;return n<i?e:n>i?{voteCount:n,nodes:[t]}:{voteCount:i,nodes:[...e.nodes,t]}},{voteCount:0,nodes:[]}).nodes.map(e=>e.guid))}function L(e){return function(t,n){return t===e?-1:n===e?1:t.localeCompare(n)}}function M(){let e=(0,s.d4)(e=>e.mirror.appModel.votingSessionInfo.votingStage),t=(0,r.Xr)(y.Qs);i.useEffect(()=>{(e===a.W8Y.JOINED||e===a.W8Y.NOT_JOINED)&&t({type:"SET_VIEW",payload:y.iN.DEFAULT})},[e,t])}function O(){let e=(0,s.d4)(e=>e.mirror.appModel.votingSessionInfo.votingStage),t=(0,r.Xr)(y.Qs),n=(0,_.$)(),l=(0,v.qU)();i.useEffect(()=>{e!==a.W8Y.ENDED||n||(t({type:"VOTING_ENDED"}),(0,b.D)(l))},[e,t,n,l])}function R(e){let t=S(),n=(0,m.q5)(),a=(0,s.d4)(e=>n&&n.teamId?e.teams[n.teamId]??null:null),r=(0,s.wA)();return i.useCallback(()=>{if("eligibleWithUpgrade"===t)r(d.to({type:x.DV,data:{team:a,resource:g.Bi.VOTING,editorType:h._Y.WHITEBOARD,currentPlan:u.F.Plan.STARTER,upsellPlan:u.F.Plan.PRO}}));else if("eligible"===t)return e(),!0;return!1},[r,t,a,e])}},178266:(e,t,n)=>{n.d(t,{Z:()=>d});var i=n(104076),s=n(716976),a=n(454851),r=n(111297),l=n(349311);let o=(0,s.memo)((0,s.forwardRef)(function({tooltip:e,isActive:t,onClick:n,recordingKey:s,dataElementTarget:r,onboardingKey:o,disabled:d,dataTestId:c,children:u},p){return(0,i.jsx)(a.d,{ref:p,"aria-expanded":t,htmlAttributes:{"data-tooltip-type":e.type,"data-testid":c,"data-tooltip":e.type===l.Ib.TEXT?e.text:e.key,"data-element-target":r,"data-fullscreen-intercept":!0,"data-onboarding-key":o},onClick:n,recordingKey:s,"aria-label":e.type===l.Ib.TEXT?e.text:e.ariaLabel,disabled:d,children:u})})),d=(0,r.tf)(o)},632650:(e,t,n)=>{n.d(t,{f:()=>h});var i=n(104076),s=n(511570),a=n.n(s),r=n(236631),l=n(192075),o=n(111297),d=n(211862),c=n(395556),u=n(959834),p=n(354174),m=n(784527);let h=(0,u.Ju)(function({sectionId:e,initialTemplateId:t,initialShelfId:n,onConfirm:s,onCancel:u}){let h=(0,d.tS)();return(0,i.jsx)(o.fu,{name:"section_preset_picker_confirmation_modal_shown",properties:{fileKey:h,sectionId:e,initialTemplateCategory:n,initialTemplateId:t,templateType:c.n.HubFile},children:(0,i.jsx)(p.yX,{confirmationTitle:(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:a()(r.s.fontSemiBold.font15.$,m.UP),children:(0,l.tx)("whiteboard.section_preset_picker.confirmation_modal.header")}),(0,l.tx)("whiteboard.section_preset_picker.confirmation_modal.description")]}),confirmText:(0,l.t)("whiteboard.section_preset_picker.confirmation_modal.confirm_text"),cancelText:(0,l.t)("whiteboard.section_preset_picker.confirmation_modal.cancel_text"),onConfirm:s,onCancel:u})})},"SectionPresetPickerConfirmationModal")},313742:(e,t,n)=>{n.d(t,{AE:()=>H,B8:()=>P,HB:()=>F,Kq:()=>B,OP:()=>D,U_:()=>z,Yg:()=>M,ar:()=>O,es:()=>G,jR:()=>W,ke:()=>R,uB:()=>U,yX:()=>V});var i=n(716976),s=n(237420),a=n(266808),r=n(812714),l=n(795033),o=n(440327),d=n(428147),c=n(366535),u=n(571430),p=n(354114),m=n(484495),h=n(211862),f=n(664326),g=n(433802),x=n(592726),_=n(944350),y=n(331497),v=n(904017),b=n(295253),C=n(498726),j=n(564914),k=n(278151),w=n(955715),E=n(489396),T=n(103345),S=n(338052),I=n(233067),N=n(516960),A=n(452532),L=n(573552);function M(){return(0,y.ut)(a.Ez5?.figjamState().isShapesSidebarOpen,!1)}function O(){let[e,t]=(0,l.fp)(I.oh);return i.useCallback(()=>{a.Ez5?.figjamState().isShapesSidebarOpen.set(!0),t({type:"close",source:I.Yg.OpenedShapesSidebar})},[t])}function R(){let e=(0,l.Xr)(N.oW),t=(0,l.Xr)(N.Ai),[n,s]=(0,l.fp)(N.Hf);return i.useCallback(()=>{(0,A.ko)({event:A.fT.ClosedPanel,searchState:n}),s({state:"inactive"}),e(""),t(!1),a.Ez5?.figjamState().isShapesSidebarOpen.set(!1)},[n,s,e,t])}function P(){let e=(0,x.TA)(),t=(0,l.md)(N.Rg),[n,s]=(0,l.fp)(N.Gn);(0,i.useEffect)(()=>{if(e)return;let i=()=>{s(n.map(e=>{if(e.lastAddedAtByUserId&&t in e.lastAddedAtByUserId){let{[t]:n,...i}=e.lastAddedAtByUserId;return{...e,lastAddedAtByUserId:i}}return e}).filter(e=>e.lastAddedAtByUserId&&Object.keys(e.lastAddedAtByUserId).length>0))};return window.addEventListener("beforeunload",i),()=>window.removeEventListener("beforeunload",i)},[e,n,t,s]);let a=e??t;return i.useMemo(()=>n.filter(e=>a in(e.lastAddedAtByUserId??{})).map(e=>e.id),[n,a])}function D(e,t){let n=(0,E.dF)(e);return t?`${n} - ${t}`:n}function F(e){let t=(0,l.md)(o.yE);if(!(0,s.d4)(e=>e?.mirror?.appModel?.currentTool===a.NLJ.SHAPE_WHITEBOARD_PLATFORM)||!t)return!1;let n=e.type===j.PW.COMPONENT?e.component_key:e.key,i=e.type,r=e.userFacingVersion.toString();return e.library_key===t.libraryKey&&r===t.assetVersion&&n===t.assetKey&&i===t.assetType}function z(){return(0,i.useCallback)(e=>{let t=e.relatedTarget;if(!t||t.classList.contains("focus-target"))return;let n=t.classList.contains(L.Fu);for(;!n&&t.parentElement;)n=(t=t.parentElement).classList.contains(L.Fu);n||a.glU?.triggerActionEnumInUserEditScope(a.rcl.SET_TOOL_DEFAULT_FIGJAM,{})},[])}function B({insertAction:e,recordingKey:t}){let n=(0,i.useMemo)(()=>({resource:{},clickToInsert_DEPRECATED:!1,onDragStart:()=>p.Y5.triggerActionEnum(a.rcl.SET_TOOL_DEFAULT)}),[]);return(0,f.t)(n,{insertAction:e,getDragPreviewSrc:()=>"",onPointerDownCallback:A.Ln,onPointerUpCallback:A.UH,dragPreviewPointerPosition:g.N.CENTERED,recordingKey:t})}function G(){let e=(0,v.X$)("useAreAdvancedShapesLocked");return(0,v.YY)(e).unwrapOr(!1)}function U(){let e=(0,h.q5)(),t=(0,s.wA)();return(0,i.useCallback)(()=>{e&&t((0,c.to)({type:d.V,data:{upsellSource:b.b.SHAPES_SIDEBAR,teamId:e.team?.id,openCheckoutInNewTab:!0}}))},[e,t])}function V(){let e=(0,h.q5)(),t=(0,s.wA)(),n=u.F.useShouldHideStarterCtaForOpenFile();return(0,i.useCallback)(()=>{e&&t((0,c.to)({type:T.DV,data:{team:e.team,resource:C.Bi.ADVANCED_SHAPES,action:k.ZN.INSERT_ADVANCED_SHAPE,editorType:_._Y.WHITEBOARD,currentPlan:u.F.Plan.STARTER,upsellPlan:u.F.Plan.PRO,hideUpsellPlanCta:n}}))},[e,t,n])}function H(){return K((0,m.w)())}let K=(0,S.n)(e=>"developer"===e);function W(e){(0,i.useEffect)(()=>{if(!(0,r.kc)().fpl_figjam_keyboard_controls)return;let t=e=>{"Escape"===e.key&&(e.stopPropagation(),e.preventDefault(),(0,w.$z)())},n=e.current;if(n)return n.addEventListener("keydown",t),()=>n.removeEventListener("keydown",t)},[e])}},517178:(e,t,n)=>{n.d(t,{C:()=>d,V:()=>c});var i=n(716976),s=n(266808),a=n(883765),r=n(965685),l=n(822764),o=n(313742);function d(){let e=(0,o.ar)();return i.useCallback(t=>{a.az.trackDefinedEvent("figjam_advanced_diagramming.shapes_sidebar_open",{}),e(),s.glU&&(t?.setToolToDefault??!0)&&s.glU.triggerActionEnum(s.rcl.SET_TOOL_DEFAULT,{})},[e])}function c(){let e=(0,l.LR)();return i.useCallback(()=>{(0,r.$v)("toggle-menu"),e()},[e])}},875997:(e,t,n)=>{n.d(t,{g:()=>o});var i=n(716976),s=n(237420),a=n(795033),r=n(211862),l=n(768300);function o(){let e=(0,r.tS)(),t=(0,s.d4)(e=>e.fileVersion),n=(0,a.Xr)(l.ME);return(0,i.useCallback)((i,s)=>n({fileKey:e,fileVersion:t,template:i},s),[e,t,n])}},674135:(e,t)=>{var n,i;function s(e){return null!=e&&"object"==typeof e&&"message"in e&&"string"==typeof e.message&&e.message.includes("IPC")}function a(e){try{return e()}catch(e){if(s(e)){console.warn("suppressingErrorsCausedByWindowClose: ignoring IPC error:",e);return}throw e}}function r(e,t){return a(()=>{let n=e.__figmaFloatingWindow;if(null==n)throw Error("withFloatingWindowAPI: bindings not found");return t(n)})}Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(t,{FloatingWindowHorizontalZone:function(){return i},FloatingWindowVerticalZone:function(){return n},isErrorCausedByWindowClose:function(){return s},suppressingErrorsCausedByWindowClose:function(){return a},withFloatingWindowAPI:function(){return r}}),function(e){e[e.NN=0]="NN",e[e.N=1]="N",e[e.S=2]="S",e[e.SS=3]="SS"}(n||(n={})),function(e){e[e.WW=0]="WW",e[e.W=1]="W",e[e.E=2]="E",e[e.EE=3]="EE"}(i||(i={}))},630213:e=>{e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAE0SURBVHgBnVJJboQwEGw8nhUOnDiCuPKq/CDkBUleEM0PkkfxAOAEEhIcEDukC8WIMIlGmpIsjF3VXd1tjRhxHL+O4+hP02Sez2eyLIvWSNOUqqoiTdNyXp+2bb/IKIo+uq7z+74nFtNut6Mt2raluq5JCGFKKf0wDAvBWZ4g4i/dAzicBNtnyVnMYRjuCtQCoJGXy4U4/ULY7/dzPYrE9uYzwzCWQIfDgbRp4xG1BEFAx+Nx/m+ahjzPIzRtDbm1hQZBhKhrq1sIehA3GXlOs721ddR5w0uSZMKclkjcKNM0Z8sqUFEU8xiwB1CGRAcRVdWi6zqdTqdf0bMso7IsFyHGJ/CMYAWHav0FdffDzWH+Cnv/CbZicLmML+E4zhu/zyuPIIfF9RgUcIY7cFj87rqu/w2Oa5mJ2/ljqgAAAABJRU5ErkJggg=="},317240:e=>{e.exports="data:image/png;base64,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"},795595:e=>{e.exports="data:image/png;base64,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"},947615:e=>{e.exports="data:image/png;base64,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"},377832:e=>{e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAZwAAAD8CAYAAABDwhLXAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAABjjSURBVHgB7d3NbxXHmsfxtrGB2A4hEgglECV3TV7uMrCZWZHs7oxEss4VZD+BfYA/ICR3HZKbNSBNZkdgdTfAEiLIIlJyUUyCRiEKEJs3A57z9NxCjx+qqtvYp/BT5/uRjM/p0+ecbtPdv6rq6uqxJmJxcXHz/Pz8B+Pj4/82ePznwaTXGgAA0i6MjY1defTo0f/MzMx8FZthzE4YBM1/DELm74M3bm4AAFi+K4McOWKDZ1w/uX379qeDX/9N2AAAVuC1QY78/c6dO4f0xMc1nEHNRl443AAAsEoGwfPZ1NTUR+1j+Wdubu4DSaMGAIDV95/T09Nft4EzqN38s6FjAABgOG7cv3//T+v+Vbv5oAEAYDg2TkxM/O/4wF8aAACGaHFx8d/HB/+81gAAMFxvjQ3O3yw2AAAM2XgDAEABBA4AoAgCBwBQBIEDACiCwAEAFEHgAACKIHAAAEUQOACAIggcAEARBA4AoAgCBwBQBIEDACiCwAEAFEHgAACKIHAAAEUQOACAIggcAEARBA4AoAgCBwBQBIEDACiCwAEAFEHgAACKIHAAAEUQOACAIggcAEARBA4AoAgCBwBQBIEDACiCwAEAFEHgAACKIHAAAEUQOACAIggcAEARBA4AoAgCBwBQBIEDACiCwAEAFEHgAACKIHAAAEUQOACAIggcAEARBA4AoAgCBwBQBIEDACiCwAEAFEHgAACKmGiADouLi9HpY2NjT7wm03LvC6/r12Kf00W/J/X+MD32nbHPCc9j8+a+Q8+vv7PPOvadrr8nte52nq75U8sfxNbDrqN+r30/YFHDGVH2IBKeh9+PHj1qH+uf1LxB7OBk3xt7f+yAG3ufJstnhYOdPRCGdYl9v31sp+nvy03X36k/wy5L6m9h18Mub2q5Yssfliv8jcLv8LoNFfu+1Hd1fWdY7tTftOv/FPUbm5+fZwsYEalSbuq1vqX0mqz2Oq6lv1nXsqy0pmmnxWpf1IpGG01qI0iXdGM1m/Hx8fZ5rBah5Q4sqQNXV1PYcpq4wnS7HF3Nen3Wqc/j3AF6OcsS/t56nj7fkSKfl6oBxgoQsf+/2LKkPsdOD+tja376c3UA2b8T6kXgVC530Is1nciB6uHDh4+fh4OXDafcASL1eggzfUDKvd9+57p169pl00038lkpdr7YQc8uq8wn3xHmCZ8f/g727xLm18uhPzO8Ls/1Y/35Dx48SK5D7m9t/zYhZMLj8P+m/5byO8xnD/qp0LHf3xVA+m+hvz+2XqkgQp0InBFhD/DhuRx85IB3//799rccEMOBVQdNrqSaaqLL1Txiy6cPmim570rpG3B9n9vpXaGgQztMC+ti1yn23TosQ2DYANV0gKSWy35n7PNy/7+WrdXIj/x/ys/k5GQzMTHR/pb5UgFGbad+nMOpmD6ghN9hh5ZguXfvXjP4/28PBtPT0+2PHBTkIAGslGxjd+/ebX9kO5Og3LhxY/uja440r40OAqdCtrQcgiZMl9rMH3/80WzYsKHZsmVLs379+gYYNtnurl+/3v6emZlpCzohcHToEDz1InAqE6vVhN+hxHnnzp3m5ZdfbkuaQGkSOL/88ktb4JEfCR57nid23gf+ETgViZ2jCY/l/IwEjezE27Zto9kMz5QUfq5du9Zuj1NTU+32GOtsgLpw4Wcl7Il93ZwmbedyvkYeS82GsMGzJtvgjh072m309u3bSzqriLDd5jp7wB8CpyJ25wxdY6UJY25urnnppZcaYC2R2rbUvBcWFp4414j6EDgVsNc06J1WSo43b95sXn31VWo2WHNkm5Rat3RiCdd/xQKHEKoDgVOJ2Pmb0ElAOgfQEw1rlZzDkW1Uajr6oltCpj4ETgV07UYP1Bg6CkizBbCWbd26tT2XE5qBbS9L1IHAcSy2U+rrbqS0KF1Oqd1grZNtVC46DsP82F6WqAOBUwE9TI0+8SonYmX0AMADuRhUttlUDYdmNv8IHOdiY2+J0DuNizvhhRSOdODYgOG6HP8YvNMxO8qv3knDoJxyQhbwQJrVdPdoQa2mLtRwnMpds6C7RNMVGl6E0cJTwzPBPwLHudh9RsJvdlR4o2+NjfoQOE7FblBmOw8A3uiLP+19g9im/eMcjlNdvXcoKcKj1HnJ8BodB3yjhlMRSoDwzhakYtPYzv0icByyO1ys6aHPbYEBL3QzG7Ucvwgch+xtCGLYMeFVV0GJgpRfBE4lYt2k2THhTex+OEG4HTX8InAcCrUXTqKiNrpmnuryD78IHIdiIRPbOQkjeKN7qcWGtWG79o3AcSzXo0d2SrpFw6NY7d12jIFPBI5jXTsfOye8yQ3XFKv5wBcCx6HcTkfTA2rE+co6EDgOpZob7DyUBOGN7YlGr8u6EDhO6XM2sR2Upgd4ZIdk0j3W5EcCSX7gE/9zztlmBv2cHRMe2cE6deGJMQJ944jkVGoEXd2bhxoOPAvbsC5EcR7HNwLHKX3xZ+51wJvcNp17HWsfgeOQveZGT9dt3tRw4I3dbmMXNLNd+8X9cByKtXHj/126dKn55ptvmnPnzjWXL19ubt261XiyadOmZufOnc3rr7/e7N+/v9mxY0czSnShKdUxBn6Nzc/Pc7RyRt9+IAxyGAY6DI8XFhaaX3/9tXnrrbeaUTA7O9scOnSoDZuavP/++83BgwdHJnguXrzYbN26tZmcnHzcRVp+r1u37nHo0BnGL/7nHEo1l9kOA6NSKpSazJ49e6oLG3H8+PFm79697TqOgtgYanp7p6nYNwLHIV3D0VI912oWwsZb09lySO1N1nEUQsfWXlK9MOET53Ac6tsxoPadUw7E+/bte2L6rl272qao3bt3J5uitm/fvuT5zz//3AxT3++TdZLzT0ePHm0fa1LTOXPmTNXNa6mau70AFD5Rw3Eq16Q2KmIHZTnfcfLkyTZwPB6YX3nllXbZz58/366LJrW4jz/+uKlZqtauX6eW4xeB41xuEM+aS4ISNHJ+Q5MD9IEDB5payLrY0JHzVLU3reVGz4g9hx8EjmOxjgGjUvo7duzYkudSM6gpbAJZJ2ki1E6dOtXUyjadUZOvC4HjWOwiuVHqmabVGDaBNLFpco6nVra7f9eFoPCFwHHKlgT1jjkKF4TawJEOArWyNZyam9RsBwHUhcCpQCgNBqNwHY7tBl1zzy1pLtRq7gLehVEHfCNwnLK1mFhzGm3d8CiMmqFx4WcduA7HoVDKi7Vx69dHaQgQe51L6fev9e/zQgdLoAtT1HB8o4bjUFeTGW3g8Cy23caCCP4QOJXRtR3ujAiPYkM00ZRWBwLHoVxpjxIgvEvV0EehM0ztOIfjVDiHI2KDeY7aTjnssdCetVE656Nr5uGaHEKmDtRwHLIlvVgTBGNOwaNYrYYOA/UgcByywRIw5hS86yokUYjyjcBxKNeLxz4GvOnqfQm/CBznUh0HaH6AR3LtWKo5eBSGbKodgeNQLkyo6cCz0GFAb99cg1MPAseh3DUJ7JTwLNYlOtYpBj4ROM6lxpwCPIp18Q8YQcM/AsehPj3TYoN5Amudvc0GTcR14cJPh/oO88EO+vTkFgCff/55c/Xq1eaFF15o9u/fX/UtEDzQ932iMOUTgeOQbnZIlQC58PPpyQ3O9u7du+S+MxI+cufNgwcPEjxD1HUHW8LGN5rUHOpq48bK7Nu3L3qTs+PHj7dBJOGD4QjdokWspxp8I3Ccip1AHeWx1FbL2bNnm9nZ2eTr8trhw4ebt99+u+pbPT8r4R5PQp/L0U1pbNt+EThOpW5UhZWRczbarl27nrjFs5Dg2bNnT/PRRx898R6sTK42Q1OxbwSOczZ4CKDVJWFz/vz55siRI9HgoZltdcXuVEt36HoQOE7FTqbq3/YxVkZ6qZ04caLtOGDRzLZ62GbrRuA4lGtW4DzO8EgN59NPP21Onz5NM9sQcTFzvQgch3K9d+jZM3w7d+6kmW2IUgPSUoDyj8BxLte0xg46XH2a2aTGE+tijbjc6Ods0/4ROJXhBGtZXc1sck6Hms7qodbuG4FTEUYaeHZyzWzHjh1r0E+fbZbClF8EjlPcL2Rtkma29957b8k0mtSWp6unJQUpvxhLzSl79XWs8wABVJY0nx06dKg5d+7ckulS+0E/tiBlr8mBbwSOQyFcwt0Ru+bDcEkN5pNPPkk2nUmtB/3EuvXrzgIUpHwjcByzNRsCpjzpAi21mliz2aZNm9rRpWO92NAtN4gnoeMTgeOQHdwwPLYBxE45PKnms0DGYPvss8+4lcEKcGuC+hA4TtmhbKSt++HDh9F5sHq6ms9CN2kJHDyd2B0/GSOwDgSOc/ZGbJQCh6er+ezDDz9sz9fIYzy90FFAn6+hA0EdCByn7L3fwzT5CZ0JCJ7VQfNZWV3XkFGo8ovAcSjWBdqGDxd+ro5Tp061NZsYms+Gg55o9SJwKqHHmqIE+PRseNB8VpYuPDGIZ31oFHUo1k3Utm9Tu3k6UmvJ1VjktTNnzjQHDhwgbIZAn6sJhShdgKLm7huBUwlGGlg9X3755RPXzkgQnTx5sv3hXM3w6N6WYRuOjaQBn2hSc84O3c51OCsnNRc5NyO1mO+++659znmaMmxtxm7DFKR8I3CcioWLbW7oGvoGeVKrid1yAM8OIw34RpOaU6kmBnZEeBYbqskWrNjG/SJwnLJdoWMdCQBvdKDY3wHbt18EjlN2BF3O3aAWNlAYSaMeBI5DXVdhjwLbJfnq1atNrWZnZ5c8r707tu3ib5vRqOH4ReA4lNv5RmWQQ3tTs7Nnzza1GrUbutnOLqlBPOEPgeNUrDltlJoebDfl1PAzNTh69OiS5zUHTqp7P0FTBwLHIdv9WV8gp6fV3PTw7rvvLnkutQC5bUBtZJ1sk5oMq1Mzey2OfQ1+ETgO2WHb5UePEB3rTlobKeW/8847S6ZJTaCm0JF1sbUbGQGh5pEOYgWn3OvwZWx+fp4ig0M6VCRs5Ec/XlhYaH777bfmjTfeaGolJf89e/Y8McCmXKwpowTs3r3b3cFZ1klqa9JEaM/dhOF1ag6cCxcuNNu2bWsmJibazgMSLuvWrXv8ONVVGj4QOA7pE6ixsAmBc/369ebNN99saib3qpHQGQWnT5+uvsPAxYsXm61bt7aBE4ImhI0NHfhDk5pjsauytVHYMeUALAfimoegkW7QoxA2Qo9+nmoS5jyOXwSOU6kwsU1to0AOxCdOnHhihOcayHkquR3CKIRNELslgX4NftGk5lTuHI4M7x7O4dTepGbJOZAvvviiuXTpUtvcFruB2lomtRkJFzn/JGEzSkEjvv3222bLli3N5OTk4+Y03aQmaFbzi9GinbPX4ISS4ajukNK0dvjw4QY+2S7/YVrofSnndeAXTWrO2VIfQ4CgNqkxA+EPgeNQ3zZtmh3gTe62G7HaD3whcByKBUlsCHd2TniTqqUzSnQdCJwKxJoa7Ii7gBexW22kbqMOXzgqOWcH7Ay4vTQ8sjUafZEzYeMfgVOR2LhTgCd9OgiwXftF4DhnL47jviHwzJ6riW3H1HL8InCcStVmUsO6Ax7YZrTUPPCJwHEqdmJVo70bHvW5jozt2i8CxyE7zlRqB+SqbHjTp/szNRy/CByHbLNDrJeakDHVAE9yA3ZSs/GPwKlAbFgbwCM7UrTG+Un/CByHYhfA6etu2CFRI0Yb8I/Accx2H6VLNGoQ64HJ7aXrQOA41Le7KDsmvMrV0qnB+0XgOJZr02anhGexwWjhH4HjWKwJjWY1eJfbdgke3wgcp7qaHNgx4VHqguWuC53hA4HjUNdN18L93+XCzwcPHjSAB7KtTkxMtNtu7nwkhSm/CByHctcoaLLz3r9/vwE8uHPnzpKwSW3n1HD8InAcszum7j4qO+7k5GRz69atBvDg9u3bzfr165dM46LmuhA4DvUZ6kN2UKnhEDjw4ubNm+02mwoYQsc/AsehvhfBSS1HmtTu3r3bAGvZvXv3moWFhTZwgq774sAfAsc52w1aN0HIzvvcc881165da4C1TLbRjRs3toWkHG674RuB41ysFKh/S5v43Nxc2z4OrEVSu5mfn28DJ5x/tAUojdqOXwSOc6kdU9dypqenmx9//JEu0lhzZJv8/vvv25q4rd3YbZqajX8EjmOheUHvlPYaBnksJUfpsfbTTz81wFoiBSHZPqUmLttu2H5jBaiu5jasffwPOpfqNmp33KmpqbbpQkqT1HTwrMk2+MMPP7Q3CZTACXenzXWDpobjH4FTgVhJ0P6WprWZmZn2vjmXL19uwwd4FuScomyDEjqyTUrY6BpMrAOMng6/xgYn6yg2VECCRF+fI8/tj5Qm5Xc4SSs7+/bt29sSJjBs0j1/dna2DRw5rxjO20jg6NCxBSaRqvXAFwLHOXsRaBi4M4SMDZ/wXEqXcgCQ4UQ2bNjQbN68uW12kxDS10IATytsY3Lx8Y0bN9ptTYJGtjfZxiRkbMDYsCFw6kLgOKfbtUPYhGkhZEQ4b2NrPTJdLrjTv2XHltpQ6JSgb2kddnx5r54W67wQvtvOo+ftum2wvB6aWuyIwV0jZsv7UiMP6/fH7r3StUx6OfS69Fk2PY/9Lv1czxNbl9xyppYht2z2e1LLaP92urBjT+5LsMiPdArQHQNi4WKnEzb1oSjrXOzArQMhHBB0AOgDghwE5IAQaj46tPTn9FmOvid1YwfKXAjY1+zrfT43vMcGZW75Uu8N84Tpdtm6As0uV5/H4XOWEzq5QNXT+wRXV1DZ5Qy/beeVWE0m1oRmP6urEAAfCJxKpGoQtmRsgyccROW3njd2YLPftZLl7JrWNT22XLn3BKE31NMsm+5JFQu/la7XMOS+K7Yey6mlpT5TP7Y1HluDiQWSrdkQNvUgcCoU2znDzm2bqELoyME0Fjar0Yxj39tVi9EHcH2wijXNDfvajFgzk2bDxq5jOKCm/o6pWmSqlmWbuPrUQGLrpN8XW6dc0OcCLDYtVsPJPW+aJlrbgX8ETsX0DhsOmra5LLwWHoswTx+58CgpVlrv2xwo+jZrPc3yxIJCf3YsNPsEcNd69PnM2DzCfk/qPalakq2lxMIkVaux30nw1IPAqYwt8eodWYeKCLUae1ALllO7iVnsOKcSa77JHei7vj93LiE3bywIUu/Lfbd9j23KTM2/Gt+v39sVOLlpqVpo13tz250OGv2ZOmzt/5sNMtSBwKlI6uA1Fmk+0dftjEWahSwdTPZgkGtuSn1W7kD2tGLL1fXZuVpD6v2pmsJya1X2+5f7ffq13AE6Vtuy77eflaLfb5dHN9mG+cK0WC0nfF5qu1mt7QJrB4FTmVTtwe68uoktzJ87qNlzKfpAstjRHJULwFiJuk/NJzdPX6mDcJiWWt6YXG3Kfp6eFvteO49djth0vU6pv2ts27Bi202fv6/9HhtEen1sSKfWFfXhOpyKxQ6SIWTsgS5Xu7GfFTt4iuUcmHPBEZtXP7fLnJJbjtR8fZapT+jlQjj3ObF5upZ5Ocuam97nc3P/T6m/Rexx7DW7faE+BM4IsAeXVLikajtdIRLYg429bkUfWPT5pFzJNhZ0enrf5Qrv0ctpl9FKhUZsffoEW2z9wnt1rbHP/Dn2/7pPLSk8jxVQUoGS+u6u6amwQf0InBGRCo1cjaarlC5iJf3UtK7vTH1G7HP6lNxjy2Efd31/V+D2nR7726XWTa+ffk+fg33sO+1n6M8P021Pxdhy5baBPsthPy+23qgbgTNibO1C66rJ5A6MuQDou1x9D9Cp93WFRJ91yz3uuxxd8+XWK/Y5fdeja76VfHfuO7s+M/fZGC0EzgiypV07XT9PzZNrOllOKbzr82JSpeLYwW85TW+lPc2699XVrKbnW27Pur61v9j8sWXA6KCX2gjKhYWwbfp2nlTTVlcTSaz0bc9bxALOflffg1WsdN3VfKWn6c+ILUufz+s62Ke+M9YEZp93/R303zj3nfpv2vf/IvY7tQ10rTdGBzUcAEAR3PETAFAEgQMAKILAAQAUQeAAAIogcAAARRA4AIAiCBwAQBEEDgCgCAIHAFAEgQMAKILAAQAUQeAAAIogcAAARRA4AIAiCBwAQBEEDgCgCAIHAFAEgQMAKILAAQAUQeAAAIogcAAARRA4AIAiCBwAQBEEDgCgCAIHAFAEgQMAKILAAQAUQeAAAIogcAAARRA4AIAiCBwAQBEEDgCgCAIHAFAEgQMAKILAAQAUQeAAAIogcAAARRA4AIAiJHCuNAAADNeV8bGxsQsNAADDdXH80aNH/2gAABiixcXFr8d+//33zevXr//n4PnmBgCAVTZoSbsyNTX1p/EXX3zxxsOHD//aAAAwBIOWtCPyu+2ltmnTpq8HE/7WAACwuo7MzMx8JQ8ed4t+/vnn/yukEAAAKzU4b/O36enpw+H5mJ1hbm7ug/Hx8UODGV9rAABYvhuDn78OwuZrPXEsNbcEz+BEz18GD18b/Py5AQAg7crg58KgsvKPQdB8NciPG3aG/wPCVN5Z9OwolwAAAABJRU5ErkJggg=="},247985:(e,t,n)=>{n.d(t,{M:()=>r});var i=n(240831),s=n(716976),a=n(104076);let r=(0,s.memo)(function(e){return(0,i.O)()?(0,a.jsx)("svg",{width:"16",height:"16",fill:"none",viewBox:"0 0 16 16",...e,"data-fpl-icon-size":"16",children:(0,a.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",fillRule:"evenodd",d:"M7.293 2.293a1 1 0 0 1 1.414 0l4 4a1 1 0 0 1 0 1.414l-1.146 1.147a.5.5 0 1 1-.707-.708L12 7 8 3 4 7l1.146 1.146a.5.5 0 1 1-.707.708L3.293 7.707a1 1 0 0 1 0-1.414zm-2.147 8.353a.501.501 0 0 0 .708.708L7.5 9.707V13.5a.5.5 0 0 0 1 0V9.707l1.646 1.647a.5.5 0 1 0 .708-.708l-2.5-2.5a.5.5 0 0 0-.708 0z",clipRule:"evenodd"})}):(0,a.jsx)("svg",{width:"16",height:"16",fill:"none",viewBox:"0 0 16 16",...e,"data-fpl-icon-size":"16",children:(0,a.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",fillRule:"evenodd",d:"M7.854 2.146a.5.5 0 0 0-.708 0l-5 5a.5.5 0 0 0 0 .708l1.5 1.5a.5.5 0 1 0 .708-.707L3.207 7.5 7.5 3.207 11.793 7.5l-1.147 1.147a.5.5 0 0 0 .707.707l1.5-1.5a.5.5 0 0 0 0-.708zm-3.208 8.5a.5.5 0 0 0 .707.708L7 9.707V13.5a.5.5 0 0 0 1 0V9.707l1.646 1.647a.5.5 0 0 0 .707-.707l-2.5-2.5a.5.5 0 0 0-.707 0z",clipRule:"evenodd"})})})},878178:(e,t,n)=>{n.d(t,{i:()=>r});var i=n(240831),s=n(716976),a=n(104076);let r=(0,s.memo)(function(e){return(0,i.O)()?(0,a.jsx)("svg",{width:"16",height:"16",fill:"none",viewBox:"0 0 16 16",...e,"data-fpl-icon-size":"16",children:(0,a.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",fillRule:"evenodd",d:"M7.3 5.163a3.5 3.5 0 0 0-3.6 0l-.2.12v5.85a4.5 4.5 0 0 1 4 0v-5.85zm1.2.12v5.85a4.5 4.5 0 0 1 4 0v-5.85l-.2-.12a3.5 3.5 0 0 0-3.6 0zm-.286 7.169.043-.023.442-.265a3.5 3.5 0 0 1 3.602 0l.442.265a.5.5 0 0 0 .757-.44v-6.98a.5.5 0 0 0-.195-.406l-.057-.037-.433-.26a4.5 4.5 0 0 0-4.63 0L8 4.416l-.185-.11a4.5 4.5 0 0 0-4.63 0l-.434.26a.5.5 0 0 0-.25.445v6.98a.5.5 0 0 0 .376.494.5.5 0 0 0 .38-.056l.442-.265a3.5 3.5 0 0 1 3.602 0l.442.265a.5.5 0 0 0 .113.05.5.5 0 0 0 .358-.027",clipRule:"evenodd"})}):(0,a.jsx)("svg",{width:"16",height:"16",fill:"none",viewBox:"0 0 16 16",...e,"data-fpl-icon-size":"16",children:(0,a.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",fillRule:"evenodd",d:"M6.8 5.476a3.5 3.5 0 0 0-3.6 0l-.2.12v5.85a4.5 4.5 0 0 1 4 0v-5.85zm1.2.12v5.85a4.5 4.5 0 0 1 4 0v-5.85l-.2-.12a3.5 3.5 0 0 0-3.6 0zm-.286 7.168.043-.023.442-.265a3.5 3.5 0 0 1 3.602 0l.442.265a.5.5 0 0 0 .757-.44v-6.98a.5.5 0 0 0-.195-.405l-.057-.038-.433-.26a4.5 4.5 0 0 0-4.63 0L7.5 4.73l-.185-.11a4.5 4.5 0 0 0-4.63 0l-.434.26a.5.5 0 0 0-.25.445v6.98a.5.5 0 0 0 .376.493.5.5 0 0 0 .38-.056l.442-.265a3.5 3.5 0 0 1 3.602 0l.442.265a.5.5 0 0 0 .113.05.5.5 0 0 0 .358-.027",clipRule:"evenodd"})})})},836658:(e,t,n)=>{n.d(t,{k:()=>a});var i=n(716976),s=n(104076);let a=(0,i.memo)(function(e){return(0,s.jsx)("svg",{width:"16",height:"16",fill:"none",viewBox:"0 0 16 16",...e,"data-fpl-icon-size":"16",children:(0,s.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",d:"M9.643 2.522a.5.5 0 0 1 .335.623l-3 10a.5.5 0 0 1-.957-.288l3-10a.5.5 0 0 1 .622-.335M4.146 5.147a.5.5 0 0 1 .707.707L2.707 8.001l2.146 2.147a.5.5 0 0 1-.707.707l-2.5-2.5a.5.5 0 0 1 0-.708zm7 0a.5.5 0 0 1 .707 0l2.5 2.5a.5.5 0 0 1 0 .707l-2.5 2.5a.5.5 0 0 1-.707-.706L13.293 8l-2.147-2.147a.5.5 0 0 1 0-.707"})})})},440043:(e,t,n)=>{n.d(t,{t:()=>a});var i=n(716976),s=n(104076);let a=(0,i.memo)(function(e){return(0,s.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,"data-fpl-icon-size":"24",children:(0,s.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",fillRule:"evenodd",d:"M9.207 5.793a1 1 0 0 0-1.414 0l-2 2a1 1 0 0 0 0 1.414l2 2a1 1 0 0 0 1.414 0l2-2a1 1 0 0 0 0-1.414zM6.5 8.5l.707.707.586.586.707.707.707-.707.586-.586.707-.707-.707-.707-.586-.586L8.5 6.5l-.707.707-.586.586zm9 2.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5M17 8.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0M15.5 13a.5.5 0 0 1 .5.5V15h1.5a.5.5 0 1 1 0 1H16v1.5a.5.5 0 1 1-1 0V16h-1.5a.5.5 0 0 1 0-1H15v-1.5a.5.5 0 0 1 .5-.5m-6 0h-2A1.5 1.5 0 0 0 6 14.5v2A1.5 1.5 0 0 0 7.5 18h2a1.5 1.5 0 0 0 1.5-1.5v-2A1.5 1.5 0 0 0 9.5 13M7 14.5a.5.5 0 0 1 .5-.5h2a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1-.5-.5z",clipRule:"evenodd"})})})},92053:(e,t,n)=>{n.d(t,{R:()=>a});var i=n(716976),s=n(104076);let a=(0,i.memo)(function(e){return(0,s.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,"data-fpl-icon-size":"24L",children:(0,s.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",fillRule:"evenodd",d:"M5 6h14a1 1 0 0 1 1 1v8a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1M3 7a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-1.982l.945 2.31a.5.5 0 0 1-.926.38l-1.1-2.69H8.063l-1.1 2.69a.5.5 0 1 1-.926-.379L6.982 17H5a2 2 0 0 1-2-2zm4.7 3.2.315-1.26c.126-.505.844-.505.97 0L9.3 10.2l1.26.315c.505.126.505.844 0 .97L9.3 11.8l-.315 1.26c-.126.505-.844.505-.97 0L7.7 11.8l-1.26-.315c-.505-.126-.505-.844 0-.97zM12.5 9a.5.5 0 0 0 0 1h5a.5.5 0 0 0 0-1zm0 3a.5.5 0 0 0 0 1h4a.5.5 0 0 0 0-1z",clipRule:"evenodd"})})})},94906:(e,t,n)=>{n.d(t,{s:()=>a});var i=n(716976),s=n(104076);let a=(0,i.memo)(function(e){return(0,s.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,"data-fpl-icon-size":"24",children:(0,s.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",fillRule:"evenodd",d:"M8 9.5a.5.5 0 0 0-1 0v5a.5.5 0 0 0 1 0zm9 0a.5.5 0 0 0-1 0v5a.5.5 0 0 0 1 0zm-8-2a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5m.5 8.5a.5.5 0 0 0 0 1h5a.5.5 0 0 0 0-1z",clipRule:"evenodd"})})})},14069:(e,t,n)=>{n.d(t,{R:()=>a});var i=n(716976),s=n(104076);let a=(0,i.memo)(function(e){return(0,s.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,"data-fpl-icon-size":"24",children:(0,s.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",fillRule:"evenodd",d:"M19 6.5a.5.5 0 0 0-1 0v10a.5.5 0 0 0 1 0zm-13 0a.5.5 0 0 0-1 0v10a.5.5 0 0 0 1 0zm10.854 4.646a.5.5 0 0 1 0 .708l-2.5 2.5a.5.5 0 0 1-.708-.708L15.293 12H8.707l1.647 1.646a.5.5 0 0 1-.708.708l-2.5-2.5a.5.5 0 0 1 0-.708l2.5-2.5a.5.5 0 0 1 .708.708L8.707 11h6.586l-1.647-1.646a.5.5 0 0 1 .708-.708z",clipRule:"evenodd"})})})},775301:(e,t,n)=>{n.d(t,{G:()=>a});var i=n(716976),s=n(104076);let a=(0,i.memo)(function(e){return(0,s.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,"data-fpl-icon-size":"24",children:(0,s.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",fillRule:"evenodd",d:"M10.908 15.5h-.158a.25.25 0 0 0-.25.25v1c0 .414.336.75.75.75h1.5a.75.75 0 0 0 .75-.75v-1a.25.25 0 0 0-.25-.25zm3.325-.522c.17-.194.29-.426.35-.668.115-.468.329-.94.593-1.517l.015-.032c.23-.502.5-1.089.668-1.707A4.004 4.004 0 0 0 12 6a4 4 0 0 0-3.86 5.054c.17.618.439 1.205.669 1.707l.015.033c.264.576.477 1.048.593 1.516.06.242.18.474.35.668-.167.213-.267.48-.267.772v1a1.75 1.75 0 0 0 1.5 1.732v.018a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.518 1.75 1.75 0 0 0 1.5-1.732v-1c0-.291-.1-.56-.267-.772m-1.14-.478c.25 0 .46-.186.52-.43.141-.575.398-1.134.654-1.694.24-.523.48-1.047.628-1.585q.104-.379.105-.791a3 3 0 1 0-5.895.791c.147.538.387 1.062.628 1.585.256.56.513 1.119.655 1.694.06.244.269.43.52.43zM11 10a1 1 0 0 1 1-1 .5.5 0 0 0 0-1 2 2 0 0 0-2 2 .5.5 0 0 0 1 0",clipRule:"evenodd"})})})},529652:(e,t,n)=>{n.d(t,{A:()=>a});var i=n(716976),s=n(104076);let a=(0,i.memo)(function(e){return(0,s.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,"data-fpl-icon-size":"24",children:(0,s.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",fillRule:"evenodd",d:"m18.015 5.441-.315 1.26-1.26.315c-.505.126-.505.844 0 .97l1.26.315.315 1.26c.126.505.844.505.97 0L19.3 8.3l1.26-.315c.505-.126.505-.844 0-.97L19.3 6.7l-.315-1.26c-.126-.505-.844-.505-.97 0M8.5 10.001a.5.5 0 0 0 0 1h7a.5.5 0 1 0 0-1zM8 13.5a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5M14.5 7a.5.5 0 0 1 0 1h-7A1.5 1.5 0 0 0 6 9.5v6A1.5 1.5 0 0 0 7.5 17h9a1.5 1.5 0 0 0 1.5-1.5v-4a.5.5 0 0 1 1 0v4a2.5 2.5 0 0 1-2.5 2.5h-9A2.5 2.5 0 0 1 5 15.5v-6A2.5 2.5 0 0 1 7.5 7z",clipRule:"evenodd"})})})},721853:(e,t,n)=>{n.d(t,{z:()=>a});var i=n(716976),s=n(104076);let a=(0,i.memo)(function(e){return(0,s.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,"data-fpl-icon-size":"24",children:(0,s.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",d:"M12 5c3.867 0 7 3.212 7 7.177 0 3.167-2.004 5.859-4.769 6.81-.35.071-.482-.153-.482-.341 0-.243.01-1.015.01-1.974 0-.673-.22-1.104-.473-1.328 1.558-.18 3.194-.79 3.194-3.544 0-.789-.27-1.427-.717-1.929.07-.18.314-.915-.071-1.901-.011-.004-.599-.19-1.925.735a6.3 6.3 0 0 0-1.75-.242 6.3 6.3 0 0 0-1.75.242c-1.32-.911-1.908-.74-1.924-.735-.385.987-.14 1.721-.07 1.901a2.83 2.83 0 0 0-.718 1.929c0 2.745 1.627 3.364 3.185 3.544-.201.18-.385.493-.447.96-.403.188-1.408.493-2.038-.592-.13-.216-.525-.744-1.076-.735-.587.009-.236.34.009.475.297.17.638.807.717 1.014.14.403.595 1.175 2.354.843 0 .6.008 1.165.008 1.336 0 .19-.131.404-.481.341C7.004 18.036 5 15.352 5 12.176 5 8.213 8.133 5 12 5"})})})},481535:(e,t,n)=>{n.d(t,{e:()=>a});var i=n(716976),s=n(104076);let a=(0,i.memo)(function(e){return(0,s.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,"data-fpl-icon-size":"24L",children:(0,s.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",d:"M14 4a3 3 0 0 1 1.656 5.5A3 3 0 0 1 14 15a2.98 2.98 0 0 1-2-.769V17a3 3 0 1 1-4.657-2.5 2.996 2.996 0 0 1 0-5A3 3 0 0 1 9 4zm3.5 11a.5.5 0 0 1 .5.5V17h1.5a.5.5 0 0 1 0 1H18v1.5a.5.5 0 0 1-1 0V18h-1.5a.5.5 0 0 1 0-1H17v-1.5a.5.5 0 0 1 .5-.5M9 15a2 2 0 1 0 2 2v-2zm0-5a2 2 0 1 0 0 4h2v-4zm5 0a2 2 0 1 0 0 4 2 2 0 0 0 0-4M9 5a2 2 0 1 0 0 4h2V5zm3 4h2a2 2 0 1 0 0-4h-2z"})})})},911259:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(716976),s=n(104076);let a=(0,i.memo)(function(e){return(0,s.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,"data-fpl-icon-size":"24L",children:(0,s.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",d:"M11.293 11.293a1 1 0 0 1 1.059-.23l8 3 .146.07a1 1 0 0 1-.102 1.785l-.154.052-3.418.854-.854 3.418a1 1 0 0 1-1.906.11l-3-8a1 1 0 0 1 .23-1.06m-2.11 5.968a.49.49 0 0 1 .642-.25c.248.103.385.386.282.634L9.16 19.93a.5.5 0 0 1-.923-.384zM15 20l1-4 4-1-8-3zm-8.782-6.242c.248-.103.53.032.634.28a.49.49 0 0 1-.25.643l-2.282.946a.5.5 0 0 1-.382-.924zm-2.552-5.25a.5.5 0 0 1 .654-.27l2.279.944a.49.49 0 0 1 .25.643c-.104.248-.386.383-.634.28l-2.278-.943a.5.5 0 0 1-.27-.653m15.88-.27a.5.5 0 0 1 .382.924l-2.28.944c-.248.103-.53-.033-.634-.28a.49.49 0 0 1 .25-.644zM8.508 3.668a.5.5 0 0 1 .653.27l.943 2.277c.102.248-.033.53-.28.633a.49.49 0 0 1-.643-.25L8.238 4.32a.5.5 0 0 1 .271-.653m6.193.27a.5.5 0 0 1 .924.382l-.944 2.278a.49.49 0 0 1-.643.25c-.248-.103-.383-.385-.28-.633z"})})})},500753:(e,t,n)=>{n.d(t,{k:()=>a});var i=n(716976),s=n(104076);let a=(0,i.memo)(function(e){return(0,s.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,"data-fpl-icon-size":"24",children:(0,s.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",fillRule:"evenodd",d:"M6.5 7h10a.5.5 0 0 1 .5.5.5.5 0 0 0 .5.5c.26 0 .5-.193.5-.453V7.5A1.5 1.5 0 0 0 16.5 6h-10A1.5 1.5 0 0 0 5 7.5v9A1.5 1.5 0 0 0 6.5 18h5.047c.26 0 .453-.24.453-.5a.5.5 0 0 0-.5-.5h-5a.5.5 0 0 1-.5-.5V10h5.73c.186 0 .345-.137.405-.313.105-.306-.097-.687-.42-.687H6V7.5a.5.5 0 0 1 .5-.5m8 3h3a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-7a.5.5 0 0 1 .5-.5m-1.5.5A1.5 1.5 0 0 1 14.5 9h3a1.5 1.5 0 0 1 1.5 1.5v7a1.5 1.5 0 0 1-1.5 1.5h-3a1.5 1.5 0 0 1-1.5-1.5zm3 6.5a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1",clipRule:"evenodd"})})})},7720:(e,t,n)=>{n.d(t,{K:()=>a});var i=n(716976),s=n(104076);let a=(0,i.memo)(function(e){return(0,s.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,"data-fpl-icon-size":"24",children:(0,s.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",d:"M11.44 6.662a2.026 2.026 0 0 1 2.996 0 2.35 2.35 0 0 1 .596 1.919 2.03 2.03 0 0 1 1.762.597l.038.04.026.027.038.042c.788.885.776 2.286-.038 3.154l-4.336 4.624a.16.16 0 0 0 0 .213l.89.95a.475.475 0 0 1 0 .64.406.406 0 0 1-.599 0l-.89-.95a1.105 1.105 0 0 1 0-1.491l4.335-4.625a1.42 1.42 0 0 0 0-1.918l-.024-.027-.024-.024a1.215 1.215 0 0 0-1.774.024l-3.62 3.863-.017.015a.405.405 0 0 1-.583-.015.474.474 0 0 1 0-.64l3.62-3.861a1.42 1.42 0 0 0 0-1.918 1.216 1.216 0 0 0-1.797 0l-4.794 5.113-.016.017a.405.405 0 0 1-.583-.017.473.473 0 0 1 0-.639zm1.198 1.277a.406.406 0 0 1 .6 0 .474.474 0 0 1 0 .64L9.692 12.36a1.42 1.42 0 0 0 0 1.918c.496.53 1.301.53 1.798 0l3.545-3.782a.406.406 0 0 1 .6 0 .474.474 0 0 1 0 .64l-3.547 3.782a2.026 2.026 0 0 1-2.957.04l-.039-.04c-.827-.882-.827-2.314 0-3.196z"})})})},360677:(e,t,n)=>{n.d(t,{R:()=>a});var i=n(716976),s=n(104076);let a=(0,i.memo)(function(e){return(0,s.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,"data-fpl-icon-size":"24",children:(0,s.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",d:"m9.4 16.5.28-1.12c.083-.333.557-.333.64 0l.28 1.12 1.12.28c.333.083.333.557 0 .64l-1.12.28-.28 1.12c-.083.333-.557.333-.64 0L9.4 17.7l-1.12-.28c-.333-.083-.333-.557 0-.64zm5.377-10.195a2.177 2.177 0 1 1 1.947 3.893l-3.606 1.803 3.606 1.803a2.177 2.177 0 0 1-1.948 3.894l-.243-.122a2.45 2.45 0 0 1-1.329-2.537l.249-1.753-7.677-3.838a.5.5 0 0 1 .448-.894L12 11.44l1.453-.725-.249-1.752a2.45 2.45 0 0 1 1.33-2.537zm-.584 8.876a1.45 1.45 0 0 0 .787 1.5l.243.123a1.177 1.177 0 1 0 1.053-2.106l-1.88-.94zm-4.417-2.627a.5.5 0 0 1 .447.894l-4 2a.5.5 0 0 1-.447-.894zm7.027-4.83a1.176 1.176 0 0 0-1.578-.525l-.245.122a1.45 1.45 0 0 0-.787 1.501l.203 1.422 1.88-.94c.582-.29.817-.998.527-1.58"})})})},622820:(e,t,n)=>{n.d(t,{X:()=>a});var i=n(716976),s=n(104076);let a=(0,i.memo)(function(e){return(0,s.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,"data-fpl-icon-size":"24L",children:(0,s.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",d:"M4.5 16a.5.5 0 0 1 .5.5V18a1 1 0 0 0 1 1h1.5a.5.5 0 0 1 0 1H6a2 2 0 0 1-2-2v-1.5a.5.5 0 0 1 .5-.5m8.593-1.184c-.425-1.081.643-2.147 1.723-1.723l4.342 1.705h.001c1.17.46 1.105 2.137-.095 2.508l-1.343.414-.413 1.343h-.001c-.36 1.165-1.944 1.26-2.461.202l-.047-.107-1.706-4.34zm1.358-.793a.33.33 0 0 0-.428.428l1.707 4.341a.33.33 0 0 0 .622-.023l.569-1.85 1.849-.568a.33.33 0 0 0 .023-.622zm1.651-7.018A1 1 0 0 1 17 8v2l-.005.102a1 1 0 0 1-.893.893L16 11h-5v5l-.005.102A1 1 0 0 1 10 17H8a1 1 0 0 1-.995-.898L7 16V8a1 1 0 0 1 1-1h8zM8 16h2v-1h-.5a.5.5 0 0 1 0-1h.5v-1h-.5a.5.5 0 0 1 0-1h.5v-1H8zm0-6h2V8H8zm3 0h1v-.5a.5.5 0 0 1 1 0v.5h1v-.5a.5.5 0 0 1 1 0v.5h1V8h-5zM7.5 4a.5.5 0 0 1 0 1H6a1 1 0 0 0-1 1v1.5a.5.5 0 0 1-1 0V6a2 2 0 0 1 2-2zM18 4a2 2 0 0 1 2 2v1.5a.5.5 0 0 1-1 0V6a1 1 0 0 0-1-1h-1.5a.5.5 0 0 1 0-1z"})})})},350102:(e,t,n)=>{n.d(t,{Q:()=>a});var i=n(716976),s=n(104076);let a=(0,i.memo)(function(e){return(0,s.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,"data-fpl-icon-size":"24",children:(0,s.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",fillRule:"evenodd",d:"M16.5 7h-9a.5.5 0 0 0-.5.5v9a.5.5 0 0 0 .5.5h9a.5.5 0 0 0 .5-.5v-9a.5.5 0 0 0-.5-.5m-9-1A1.5 1.5 0 0 0 6 7.5v9A1.5 1.5 0 0 0 7.5 18h9a1.5 1.5 0 0 0 1.5-1.5v-9A1.5 1.5 0 0 0 16.5 6z",clipRule:"evenodd"})})})},716438:(e,t,n)=>{n.d(t,{c:()=>a});var i=n(716976),s=n(104076);let a=(0,i.memo)(function(e){return(0,s.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,"data-fpl-icon-size":"24",children:(0,s.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",d:"M15 11a.5.5 0 0 1 .462.308l1.666 4 .834 2a.5.5 0 0 1-.924.384L16.333 16h-3.166l-.705 1.692a.5.5 0 0 1-.924-.384l.834-2 1.666-4 .034-.067A.5.5 0 0 1 14.5 11zM9.5 5a.5.5 0 0 1 .5.5V7h3.5a.5.5 0 0 1 0 1h-1.282l-.054.16c-.503 1.487-1.088 2.537-2.031 3.705l1.527 1.91a.501.501 0 1 1-.781.624l-1.407-1.758c-.69.77-1.538 1.631-2.618 2.713a.5.5 0 0 1-.708-.707c1.147-1.148 2.012-2.03 2.692-2.8L7.21 9.814a.5.5 0 1 1 .781-.626l1.501 1.878c.773-.986 1.249-1.867 1.668-3.065H5.5a.5.5 0 0 1 0-1H9V5.5a.5.5 0 0 1 .5-.5m4.083 10h2.334l-1.167-2.8zm3.432-8.559c.126-.505.844-.505.97 0l.315 1.26 1.26.315c.505.126.505.844 0 .97l-1.26.315-.315 1.26c-.126.505-.844.505-.97 0L16.7 9.3l-1.26-.315c-.505-.126-.505-.844 0-.97L16.7 7.7z"})})})},994963:(e,t,n)=>{n.d(t,{$:()=>a});var i=n(716976),s=n(104076);let a=(0,i.memo)(function(e){return(0,s.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,"data-fpl-icon-size":"24",children:(0,s.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",fillRule:"evenodd",d:"M9.28 13.017c-.394 1.016.61 2.015 1.625 1.615l1.688-.666a1.5 1.5 0 0 0 .51-.335l3.743-3.742.707-.707a1.5 1.5 0 0 0 0-2.121l-.707-.708a1.5 1.5 0 0 0-2.122 0l-.707.708-3.74 3.74a1.5 1.5 0 0 0-.338.518zm1.258.684a.25.25 0 0 1-.325-.323l.659-1.698a.5.5 0 0 1 .112-.172l3.387-3.387 1.414 1.414-3.389 3.389a.5.5 0 0 1-.17.112zm5.954-4.873-1.414-1.414.354-.353a.5.5 0 0 1 .707 0l.707.707a.5.5 0 0 1 0 .707zM11.5 6a.5.5 0 0 1 0 1h-4a.5.5 0 0 0-.5.5v9a.5.5 0 0 0 .5.5h9a.5.5 0 0 0 .5-.5v-4a.5.5 0 0 1 1 0v4a1.5 1.5 0 0 1-1.5 1.5h-9A1.5 1.5 0 0 1 6 16.5v-9A1.5 1.5 0 0 1 7.5 6z",clipRule:"evenodd"})})})},96804:(e,t,n)=>{n.d(t,{HZ:()=>i,Mv:()=>a});let i={ELEMENT_NODE:1,TEXT_NODE:3},s=0,a=new Set(["text","search","tel","url","email","password","number"]),r=[{style:"borderTopStyle",width:"borderTopWidth",color:"borderTopColor"},{style:"borderRightStyle",width:"borderRightWidth",color:"borderRightColor"},{style:"borderBottomStyle",width:"borderBottomWidth",color:"borderBottomColor"},{style:"borderLeftStyle",width:"borderLeftWidth",color:"borderLeftColor"}],l={alignContent:"normal",alignItems:"normal",alignSelf:"auto",backgroundAttachment:"scroll",backgroundBlendMode:"normal",backgroundClip:"border-box",backgroundColor:"rgba(0, 0, 0, 0)",backgroundImage:"none",backgroundOrigin:"padding-box",backgroundPositionX:"0%",backgroundPositionY:"0%",backgroundRepeat:"repeat",backgroundSize:"auto",borderBottomColor:"rgb(0, 0, 0)",borderBottomLeftRadius:"0px",borderBottomRightRadius:"0px",borderBottomStyle:"none",borderBottomWidth:"0px",borderCollapse:"separate",borderImageOutset:"0",borderImageRepeat:"stretch",borderImageSlice:"100%",borderImageSource:"none",borderImageWidth:"1",borderLeftColor:"rgb(0, 0, 0)",borderLeftStyle:"none",borderLeftWidth:"0px",borderRightColor:"rgb(0, 0, 0)",borderRightStyle:"none",borderRightWidth:"0px",borderSpacing:"0px",borderTopColor:"rgb(0, 0, 0)",borderTopLeftRadius:"0px",borderTopRightRadius:"0px",borderTopStyle:"none",borderTopWidth:"0px",bottom:"auto",boxShadow:"none",boxSizing:"content-box",clip:"auto",color:"rgb(0, 0, 0)",colorScheme:"normal",columnCount:"auto",columnFill:"balance",columnGap:"normal",columnRuleColor:"rgb(0, 0, 0)",columnRuleStyle:"none",columnRuleWidth:"0px",columnSpan:"none",columnWidth:"auto",contain:"none",containerType:"normal",contentVisibility:"visible",display:"",filter:"none",flexBasis:"auto",flexDirection:"row",flexGrow:"0",flexShrink:"1",flexWrap:"nowrap",fontFamily:"Times",fontFeatureSettings:"normal",fontKerning:"auto",fontOpticalSizing:"auto",fontPalette:"normal",fontSize:"16px",fontSizeAdjust:"none",fontStretch:"100%",fontStyle:"normal",fontWeight:"400",gridAutoColumns:"auto",gridAutoFlow:"row",gridAutoRows:"auto",gridColumnEnd:"auto",gridColumnStart:"auto",gridRowEnd:"auto",gridRowStart:"auto",gridTemplateAreas:"none",gridTemplateColumns:"none",gridTemplateRows:"none",height:"auto",isolation:"auto",justifyItems:"normal",justifySelf:"auto",justifyContent:"normal",left:"auto",letterSpacing:"normal",lineBreak:"auto",lineHeight:"normal",listStyleImage:"none",listStylePosition:"outside",listStyleType:"disc",marginBottom:"0px",marginLeft:"0px",marginRight:"0px",marginTop:"0px",maxHeight:"none",maxWidth:"none",minHeight:"0px",minWidth:"0px",objectFit:"fill",opacity:"1",overflow:"visible",overflowX:"visible",overflowY:"visible",position:"static",paddingBottom:"0px",paddingLeft:"0px",paddingRight:"0px",paddingTop:"0px",right:"auto",rowGap:"normal",strokeDasharray:"none",strokeDashoffset:"0px",strokeLinecap:"butt",strokeLinejoin:"miter",strokeMiterlimit:"4",strokeOpacity:"1",strokeWidth:"1px",textAlign:"start",textDecorationColor:"rgb(0, 0, 0)",textDecorationLine:"none",textDecorationStyle:"solid",textIndent:"0px",textShadow:"none",textTransform:"none",top:"auto",transform:"none",transformOrigin:"auto",transitionProperty:"all",visibility:"visible",whiteSpace:"normal",width:"auto",willChange:"auto",zIndex:"auto"}},2188:(e,t,n)=>{async function i(e){let t=JSON.parse(e),n=await Promise.all(Object.entries(t.assets).map(async([e,t])=>[e,{url:t.url,blob:t.blob?new Blob([await s(t.blob.base64Blob)],{type:t.blob.type}):null}]));return{root:t.root,documentTitle:t.documentTitle,documentRect:t.documentRect,viewportRect:t.viewportRect,devicePixelRatio:t.devicePixelRatio,assets:new Map(n)}}n.d(t,{rS:()=>i});async function s(e){let t=await fetch(e);return await t.arrayBuffer()}},313447:(e,t,n)=>{n.d(t,{G3:()=>i,G$:()=>p.G$,N5:()=>eA,Me:()=>y});var i,s=n(96804),a=n(170627),r=n(920498),l=n(951002);let o=new Set(["HTML","BODY","DIV","SPAN","P","H1","H2","H3","H4","H5","H6","UL","OL","MAIN","ARTICLE","ASIDE","FOOTER","HEADER","NAV","SECTION","FORM"]);function d(e){if(!o.has(e.tag))return{visibleWithoutCSS:!0};let t=new Set;for(let n in e.styles){let i=e.styles[n];(function(e,t){switch(e){case"backgroundImage":case"boxShadow":case"opacity":case"backgroundClip":case"transform":case"backgroundColor":case"borderBottomWidth":case"borderLeftWidth":case"borderRightWidth":case"borderTopWidth":case"borderImageSource":case"borderBottomLeftRadius":case"borderBottomRightRadius":case"borderTopLeftRadius":case"borderTopRightRadius":case"filter":case"visibility":return!0;case"display":return"none"===t;case"overflow":case"overflowX":case"overflowY":return(t??"visible")!=="visible";case"clip":case"alignContent":case"alignItems":case"alignSelf":case"backgroundAttachment":case"backgroundBlendMode":case"backgroundOrigin":case"backgroundPositionX":case"backgroundPositionY":case"backgroundRepeat":case"backgroundSize":case"borderBottomColor":case"borderBottomStyle":case"borderCollapse":case"borderImageOutset":case"borderImageRepeat":case"borderImageSlice":case"borderImageWidth":case"borderLeftColor":case"borderLeftStyle":case"borderRightColor":case"borderRightStyle":case"borderSpacing":case"borderTopColor":case"borderTopStyle":case"bottom":case"boxSizing":case"clip":case"color":case"colorScheme":case"columnCount":case"columnFill":case"columnGap":case"columnRuleColor":case"columnRuleStyle":case"columnRuleWidth":case"columnSpan":case"columnWidth":case"contain":case"containerType":case"contentVisibility":case"flexBasis":case"flexDirection":case"flexGrow":case"flexShrink":case"flexWrap":case"fontFamily":case"fontFeatureSettings":case"fontKerning":case"fontOpticalSizing":case"fontPalette":case"fontSize":case"fontSizeAdjust":case"fontStretch":case"fontStyle":case"fontWeight":case"gridAutoColumns":case"gridAutoFlow":case"gridAutoRows":case"gridColumnEnd":case"gridColumnStart":case"gridRowEnd":case"gridRowStart":case"gridTemplateAreas":case"gridTemplateColumns":case"gridTemplateRows":case"height":case"isolation":case"justifyItems":case"justifySelf":case"justifyContent":case"left":case"letterSpacing":case"lineBreak":case"lineHeight":case"listStyleImage":case"listStylePosition":case"listStyleType":case"marginBottom":case"marginLeft":case"marginRight":case"marginTop":case"maxHeight":case"maxWidth":case"minHeight":case"minWidth":case"objectFit":case"position":case"paddingBottom":case"paddingLeft":case"paddingRight":case"paddingTop":case"right":case"rowGap":case"strokeDasharray":case"strokeDashoffset":case"strokeLinecap":case"strokeLinejoin":case"strokeMiterlimit":case"strokeOpacity":case"strokeWidth":case"textAlign":case"textDecorationColor":case"textDecorationLine":case"textDecorationStyle":case"textIndent":case"textShadow":case"textTransform":case"top":case"transformOrigin":case"transitionProperty":case"whiteSpace":case"width":case"willChange":case"zIndex":return!1;default:(0,l.xb)(e)}})(n,i)&&t.add(n)}return{styles:t,visibleWithoutCSS:!1}}let c=new Set(["BR","NOSCRIPT","HEAD","STYLE","SCRIPT"]);function u(e){return"DIV"!==e&&"SPAN"!==e}var p=n(325274),m=n(781144),h=n(266808),f=n(88314),g=n(58599),x=n(600032);let _={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkgrey:"#A9A9A9",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",green:"#008000",greenyellow:"#ADFF2F",grey:"#808080",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"};function y(e,t){if(!e)return null;if("string"!=typeof e)return e;let n=t??1,i=function(e,t=1){let n=RegExp("color\\(\\s*display-p3\\s*(?<red>[-+]?[0-9]*\\.?[0-9]+)\\s+(?<green>[-+]?[0-9]*\\.?[0-9]+)\\s+(?<blue>[-+]?[0-9]*\\.?[0-9]+)\\s*(?:\\/\\s*(?<alpha>[-+]?[0-9]*\\.?[0-9]+%?))?\\s*\\)"),i=e.match(n);if(i&&i.groups&&"red"in i.groups&&"green"in i.groups&&"blue"in i.groups){let{red:e,green:n,blue:s,alpha:a}=i.groups;return{r:parseFloat(e),g:parseFloat(n),b:parseFloat(s),a:a?parseFloat(a):t}}return null}(e,n)??function(e,t=1){let n=_[e.toLowerCase()];return n?v(n,!1,t):null}(e,n)??function(e,t=1){let n;return(n=A.exec(e=e.trim()))?C(E(n[1]),E(n[2]),E(n[3]),null==n[4]?t:S(n[4])):(n=L.exec(e))?C(w(n[1]),w(n[2]),w(n[3]),null==n[4]?t:S(n[4])):(n=M.exec(e))?function(e,t,n,i){if(0===t)return C(n,n,n,i);let s=n<.5?n*(1+t):n+t-n*t,a=2*n-s,r=[0,0,0];for(let t=0;t<3;++t){let n=e+-(1/3*(t-1));n<0&&++n,n>1&&--n,6*n<1?r[t]=a+(s-a)*6*n:2*n<1?r[t]=s:3*n<2?r[t]=a+(s-a)*(2/3-n)*6:r[t]=a}return C(r[0],r[1],r[2],i)}(I(n[1]),E(n[2]),E(n[3]),null==n[4]?t:S(n[4])):(n=O.exec(e))?function(e,t,n,i){let s=(100*e+16)/116,a=t/500+s,r=s-n/200,l=e=>{let t=e**3;return t>b?t:(e-16/116)/7.787};s=l(s);let o=e=>e>.0031308?1.055*e**(1/2.4)-.055:12.92*e,d=o(3.2404542*(a=95.047*l(a)/100)+-1.5371385*s+-.4985314*(r=108.883*l(r)/100)),c=o(-.969266*a+1.8760108*s+.041556*r),u=o(.0556434*a+-.2040259*s+1.0572252*r);return C(N(d),N(c),N(u),i)}(E(n[1]),parseFloat(n[2]),parseFloat(n[3]),null==n[4]?t:S(n[4])):(n=R.exec(e))?(0,g.I0)({l:T(n[1],.01),c:T(n[2],.004),h_turn:I(n[3]),a:null==n[4]?t:S(n[4])}):(n=P.exec(e))?(0,g.oq)({l:T(n[1],.01),ax:T(n[2],.01),bx:parseFloat(n[3]),a:null==n[4]?t:S(n[4])}):null}(e,n)??v(e,null!=t,n);return null==i&&(0,p.sx)("html2design.unparseable_value",{valueType:"color",value:e}),i}function v(e,t=!1,n=1){let i=/[^0-9a-f]*([0-9a-f]*)/i.exec(e.trim());if(!i)return null;let s=i[1];if(s.length>=8&&t)return C(k(s.substring(0,2)),k(s.substring(2,4)),k(s.substring(4,6)),k(s.substring(6,8)));if(7===s.length&&t)return C(k(s.substring(0,2)),k(s.substring(2,4)),k(s.substring(4,6)),j(s[6]));if(s.length>=6)return C(k(s.substring(0,2)),k(s.substring(2,4)),k(s.substring(4,6)),n);if(5===s.length&&t)return C(j(s[0]),j(s[1]),j(s[2]),k(s.substring(3,5)));if(4===s.length&&t)return C(j(s[0]),j(s[1]),j(s[2]),j(s[3]));if(s.length>=3)return C(j(s[0]),j(s[1]),j(s[2]),n);if(2===s.length){let e=k(s);return C(e,e,e,n)}else if(1===s.length){let e=j(s);return C(e,e,e,n)}return null}let b=(6/29)**3;function C(e,t,n,i=1){return isNaN(e)||isNaN(t)||isNaN(n)||isNaN(i)?null:{r:e,g:t,b:n,a:i}}function j(e){return k(`${e}${e}`)}function k(e){return N(parseInt(e,16)/255)}function w(e){return N(parseFloat(e)/255)}function E(e){return N(.01*parseFloat(e))}function T(e,t){return e.endsWith("%")?N(parseFloat(e)*t):parseFloat(e)}function S(e){return e?e.includes("%")?E(e):N(parseFloat(e)):1}function I(e){let t=parseFloat(e),n=0;return n=e.includes("grad")?.9*t:e.includes("rad")?180*t/Math.PI:e.includes("turn")?360*t:t,(n=(0,f._g)(n,360))/360}function N(e){return(0,f.qE)(e,0,1)}let A=/^(?:rgba?\()?\s*([-+]?[0-9]*\.?[0-9]+)%\s*?[, ]\s*([-+]?[0-9]*\.?[0-9]+)%\s*?[, ]\s*([-+]?[0-9]*\.?[0-9]+)%\s*?(?:[,\/ ]\s*([-+]?[0-9]*\.?[0-9]+%?))?\s*\)?\s*;?$/,L=/^(?:rgba?\()?\s*([0-9]*\.?[0-9]+)\s*?[, ]\s*([0-9]*\.?[0-9]+)\s*?[, ]\s*([0-9]*\.?[0-9]+)\s*?(?:[,\/ ]\s*([-+]?[0-9]*\.?[0-9]+%?))?\s*\)?\s*;?$/,M=/^(?:hsla?\()?\s*([-+]?[0-9]*\.?[0-9]+(?:deg|rad|grad|turn)?)\s*?[, ]\s*([-+]?[0-9]*\.?[0-9]+)%\s*?[, ]\s*([-+]?[0-9]*\.?[0-9]+)%\s*?(?:[,\/ ]\s*([-+]?[0-9]*\.?[0-9]+%?))?\s*\)?\s*;?$/,O=/^(?:lab?\()?\s*([0-9]*\.?[0-9]+)%\s*?[, ]\s*([-+]?[0-9]*\.?[0-9]+)\s*?[, ]\s*([-+]?[0-9]*\.?[0-9]+)\s*?(?:[,\/ ]\s*([-+]?[0-9]*\.?[0-9]+%?))?\s*\)?\s*;?$/,R=/^(?:oklch?\()\s*([0-9]*\.?[0-9]+%?)\s*?[, ]\s*([-+]?[0-9]*\.?[0-9]+%?)\s*?[, ]\s*([-+]?[0-9]*\.?[0-9]+(?:deg|rad|grad|turn)?)\s*?(?:[,\/ ]\s*([-+]?[0-9]*\.?[0-9]+))?\s*\)?\s*;?$/,P=/^(?:oklab?\()\s*([0-9]*\.?[0-9]+%?)\s*?[, ]\s*([-+]?[0-9]*\.?[0-9]+%?)\s*?[, ]\s*([-+]?[0-9]*\.?[0-9]+)\s*?(?:[,\/ ]\s*([-+]?[0-9]*\.?[0-9]+%?))?\s*\)?\s*;?$/,D=e=>{let t=y(e);if(null==t)return null;let{r:n,g:i,b:s,a}=t;return{type:"SOLID",color:{r:n,g:i,b:s,a:1},opacity:a}},F=e=>{try{let t=(0,x.Ay)(e).rgba();return{type:"SOLID",color:{r:t[0]/255,g:t[1]/255,b:t[2]/255,a:t[3]},opacity:t[3]}}catch{return(0,p.sx)("html2design.unparseable_value",{valueType:"color",value:e}),null}},z=(e,{useChromaJs:t=!1}={})=>t?F(e):D(e);var B=n(812084),G=n(319929);let U={family:"Arimo",style:"Regular",postscript:"Arimo-Regular"};function V(e,t,n,i=[]){let s=(0,B.PW)(t.fontSize??"16px");(0,l.vA)(null!=s,`Expected font size to be parsed: ${t.fontSize}`);let{fontName:a,letterSpacingOffset:r}=X(t,{fontSize:s})??{fontName:U,letterSpacingOffset:0};(0,l.vA)(null!=a,`Expected font to be parsed: ${t.fontFamily}`),n.fontName=a,n.fontSize=s,n.textCase=function(e){switch(e){case"uppercase":return"UPPER";case"lowercase":return"LOWER";case"capitalize":return"TITLE";case"none":case"-moz-initial":case"inherit":case"initial":return"ORIGINAL";case"revert":case"revert-layer":case"unset":case"full-width":case"full-size-kana":case"math-auto":return(0,p.sx)("html2design.unsupported_property_value",{property:"text-transform",value:e}),"ORIGINAL";default:(0,p.Zb)("text-transform",e)}}(t.textTransform??"none"),n.lineHeight=H(t.lineHeight??"normal"),n.letterSpacing=function(e,t=0){let n=(0,G.Or)(e??"normal");return n?.units==="PIXELS"?{units:"PIXELS",value:t+n.value}:n?.units==="PERCENT"?n:{units:"PIXELS",value:t}}(t.letterSpacing??"0px",r),n.textAlignHorizontal=function(e){switch(e){case"start":case"left":case"-moz-initial":case"inherit":case"initial":case null:case"-webkit-left":return"LEFT";case"end":case"right":case"-webkit-right":return"RIGHT";case"center":case"-webkit-center":return"CENTER";case"justify":return"JUSTIFIED";case"revert":case"revert-layer":case"unset":case"match-parent":case"-webkit-match-parent":return(0,p.sx)("html2design.unsupported_property_value",{property:"text-align",value:e}),"LEFT";default:(0,p.Zb)("text-align",e)}}(t.textAlign??"left"),n.textDecoration=function(e){let{textDecorationLine:t="none"}=e;return"underline"===t?"UNDERLINE":"line-through"===t?"STRIKETHROUGH":("none"!=t&&(0,p.sx)("html2design.unsupported_property_value",{property:"text-decoration",value:t}),"NONE")}(t),n.fills=[...i,z(t.color??"rgb(0, 0, 0)")],n.characters=function(e,t){let n=e.whiteSpace??"normal";switch(n){case void 0:case"normal":case"nowrap":case"initial":case"-moz-initial":return t.replace(/\s+/g," ").trim();case"pre":case"pre-wrap":case"-moz-pre-wrap":case"break-spaces":return t;case"pre-line":return t.replace(/[^\S\n]+/g," ").replace(/^[ ]+|[ ]+$/gm,"");case"inherit":case"revert":case"revert-layer":case"unset":case"balance":case"balance":case"collapse":case"discard":case"discard-after":case"discard-before":case"discard-inner":case"none":case"preserve":case"preserve-breaks":case"preserve-spaces":case"pretty":case"stable":case"wrap":return(0,p.sx)("html2design.unsupported_property_value",{property:"white-space",value:n}),t;default:(0,p.Zb)("white-space",n)}}(t,e)}function H(e){let t=(0,G.Or)(e??"");return null==t||"AUTO"===t.units||"RAW"===t.units?{units:"PERCENT",value:100}:t}let K={Arial:"Arimo","Arial Rounded MT":"Arimo","SF Pro":"Arimo","SF Pro Rounded":"Arimo",Helvetica:"Arimo","Segoe UI Variable":"Arimo",Times:"Tinos","New York":"Tinos","Times New Roman":"Tinos",Consolas:"Cousine","SF Mono":"Cousine",Menlo:"Cousine",serif:"Tinos","ui-serif":"Tinos","sans-serif":"Arimo","ui-sans-serif":"Arimo","ui-rounded":"Arimo",monospace:"Cousine","ui-monospace":"Cousine","system-ui":"Arimo"},W=navigator.userAgent.includes("Macintosh"),q={macos:{serif:"Times","sans-serif":"Helvetica",monospace:"Menlo","system-ui":"Inter","ui-serif":"New York","ui-sans-serif":"Inter","ui-monospace":"Inter","ui-rounded":"Inter"},other:{serif:"Times New Roman","sans-serif":"Arial",monospace:"Consolas","system-ui":"Segoe UI Variable","ui-serif":"Times New Roman","ui-sans-serif":"Arial","ui-monospace":"Consolas","ui-rounded":"Arial Rounded MT"}};function X(e,t,n=W?"macos":"other"){let i=((e.fontFamily??"Times")||"").split(/,(?=(?:[^"']*["'][^"']*["'])*[^"']*$)/).map(e=>e.trim().replace(/^["']|["']$/g,"")).filter(Boolean);for(let s of i){let i=null,a=parseInt(e.fontWeight??"400"),l="italic"==e.fontStyle,o=s.includes(":")?s.split(":"):null;if(i=(o?(0,r.vt)(o[0],o[1]):null)??(0,r.ye)(s,a,l)??(0,r.ye)(q[n][s],a,l)??(0,r.ye)(K[s],a,l))return{fontName:{...i,postscript:i.family},letterSpacingOffset:J(s,i.family,t.fontSize,n)}}return(0,p.sx)("html2design.unsupported_property_value",{property:"font-family",value:i.join(", ")}),null}async function Y(e){let t={};!function e(n){if(n.styles?.fontFamily){var i,a;t[i=n.styles.fontFamily]??(t[i]={});let e=n.styles.fontWeight??"400",s="italic"===n.styles.fontStyle;(a=t[n.styles.fontFamily])[e]??(a[e]=s?"italic":null),"italic"===t[n.styles.fontFamily][e]&&s&&(t[n.styles.fontFamily][e]="both")}for(let t of n.childNodes??[])t.nodeType===s.HZ.ELEMENT_NODE&&e(t)}(e.root);let n=[U];for(let[e,i]of Object.entries(t))for(let[t,s]of Object.entries(i)){{let i=X({fontFamily:e,fontWeight:t,fontStyle:"italic"},{fontSize:16});i&&n.push({family:i.fontName.family,style:i.fontName.style})}if(null===s||"both"===s){let i=X({fontFamily:e,fontWeight:t,fontStyle:"normal"},{fontSize:16});i&&n.push({family:i.fontName.family,style:i.fontName.style})}}await Promise.all(n.map(r.EV))}let Z=[{size:6,value:82},{size:9,value:38},{size:10,value:24},{size:11,value:12},{size:12,value:0},{size:13,value:-12},{size:14,value:-22},{size:15,value:-32},{size:16,value:-40},{size:17,value:-52},{size:20,value:-46},{size:22,value:-24},{size:24,value:6},{size:28,value:28},{size:32,value:26},{size:36,value:21},{size:50,value:14},{size:64,value:7},{size:80,value:0},{size:100,value:0},{size:138,value:0}],J=(e,t,n,i)=>{if("macos"===i&&("system-ui"===e||"ui-sans-serif"===e)){var s,a,r;if(n<=Z[0].size)return Z[0].value/2048*n;if(n>Z.at(-1).size)return 0;let e=Z.findLast(e=>e.size<=n);if(null==e)return 0;if(e.size===n)return e.value/2048*n;let t=Z.find(t=>t.size>e.size);return(0,l.vA)(null!=t,`Expected next trak for fontSize: ${n}`),s=e.size,a=e.value,r=t.size,(a+(n-s)*(t.value-a)/(r-s))/2048*n}return 0};var Q=n(141869);!function(e){e.START="start",e.SERIALIZE_HTML="serialize_html",e.OPTIMISTIC_FONT_LOADING="optimistic_font_loading",e.PREPROCESS_DOCUMENT="preprocess_document",e.DECODE_ASSETS="image_loading",e.VISIT_ELEMENTS="visit_elements",e.FINISH_FONT_LOADING="finish_font_loading",e.IMAGE_UPLOAD_COMPLETE="image_upload_complete",e.ADD_TO_CANVAS="add_to_canvas",e.COPY_TO_CLIPBOARD="copy_to_clipboard",e.END_SUCCESS="end_success",e.END_FAILURE="end_failure",e.END_ABORTED="end_aborted"}(i||(i={}));var $=n(813499),ee=n(142326),et=n(368111),en=n(91406);function ei(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class es{constructor(){ei(this,"description","Input values or placeholders are rendered as text nodes."),ei(this,"onPostVisit",(e,t,n,i)=>{if(t.nodeType!==s.HZ.ELEMENT_NODE)return;let a="INPUT"===t.tag&&s.Mv.has(t.attributes.type),r="TEXTAREA"===t.tag;if(!a&&!r)return;let l=t.attributes.value||t.attributes.placeholder;if(!l)return;let o=e.scene.createNode("TEXT",{tracking:e.tracking});return V(l,t.attributes.placeholder&&t.pseudoElementStyles?.placeholder?t.pseudoElementStyles.placeholder:t.styles,o),o.x=t.rect.x,o.y=t.rect.y,o.resizeWithConstraints(t.rect.width,t.rect.height),o.textAutoResize="WIDTH_AND_HEIGHT",o.update(),n.stackPrimarySizing="FIXED",n.stackCounterSizing="FIXED",n.stackMode="HORIZONTAL",n.stackPrimaryAlignItems="MIN",n.stackCounterAlignItems="INPUT"===t.tag?"CENTER":"MIN",(0,en.e)(n,t),n.appendChild(o),[{element:t,node:n}]})}}class ea{onPostVisit(e,t,n,i){let a;if(!(t.nodeType===s.HZ.ELEMENT_NODE&&1===i.length&&i[0].element.nodeType===s.HZ.TEXT_NODE))return;let r=i[0].element;if((0,l.vA)(r.nodeType===s.HZ.TEXT_NODE),"flex"===t.styles.display)a="FLEXBOX";else{if(1!==r.lineCount||r.rect.y-t.rect.y!==n.borderTopWeight+((0,B.PW)(t.styles.paddingTop)??0))return;a="SINGLE_LINE_TOP"}let o=i[0].node;return(0,ee.uE)(n,t),(0,en.e)(n,t),o.textAutoResize="WIDTH_AND_HEIGHT",n.appendChild(o),"SINGLE_LINE_TOP"===a&&(o.stackChildPrimaryGrow=0,o.stackHorizontalLayoutSize=$.mKm.HUG_CONTENT,1.05*o.size.x<=n.size.x-n.stackLeftPadding-n.stackRightPadding-(n.bordersTakeSpace?n.borderLeftWeight+n.borderRightWeight:0)&&(o.stackHorizontalLayoutSize=$.mKm.FILL_CONTAINER)),[{element:t,node:n}]}constructor(){ei(this,"description","When we see a single text child in an element, we use auto-layout to position the text node within the parent element, translating flexbox and text-align properties to the corresponding auto-layout properties.")}}class er{onPostVisit(e,t,n,i){if(t.nodeType!==s.HZ.ELEMENT_NODE)return;let{display:a,flexWrap:r="nowrap",flexDirection:o="row",alignItems:d="normal"}=t.styles;if("flex"!==a||"nowrap"!==r)return;let c=(0,ee.CP)(o);if(!c||i.some(({element:e})=>{if(e.nodeType!==s.HZ.ELEMENT_NODE)return!0;let{position:t="static",alignSelf:n="auto"}=e.styles;return"static"!==t||"auto"!==n&&"stretch"!==n&&"normal"!==n}))return;let u=(0,ee.el)(i,c),m=0;try{m=(0,ee.oL)(u,c)}catch{return}if(!(0,ee.PO)(u,c,(0,ee.Wz)(d)??"MIN"))return;(0,ee.uE)(n,t),n.stackSpacing=m;let h=Math.min(...i.map(e=>e.element.rect.x))-t.rect.x-n.borderLeftWeight,f=t.rect.x+t.rect.width-Math.max(...i.map(e=>e.element.rect.x+e.element.rect.width))-n.borderRightWeight,g=Math.min(...i.map(e=>e.element.rect.y))-t.rect.y-n.borderTopWeight,x=t.rect.y+t.rect.height-Math.max(...i.map(e=>e.element.rect.y+e.element.rect.height))-n.borderBottomWeight;if("CENTER"===n.stackPrimaryAlignItems)switch(c){case"HORIZONTAL":h>f?(h-=f,f=0):(f-=h,h=0);break;case"VERTICAL":g>x?(g-=x,x=0):(x-=g,g=0);break;default:(0,l.xb)(c)}let _=!1,y=!1;for(let e of u){n.appendChild(e.node);let{flexGrow:t="0",height:i,width:s,alignSelf:a="auto"}=e.element.styles;"0"!==t&&("1"!==t&&(0,p.sx)("html2design.unsupported_property_value",{property:"flex-grow",value:t}),e.node.stackChildPrimaryGrow=1,_=!0);let r="stretch"===a||"normal"===a,l="stretch"===d||"normal"===d;null==("HORIZONTAL"===c?i:s)&&(r||"auto"===d&&l)&&(e.node.stackChildAlignSelf="STRETCH",y=!0)}if(!_&&"MIN"===n.stackPrimaryAlignItems&&("HORIZONTAL"===c?h===f:g===x)){let e=null;for(let t of u)(!e||("HORIZONTAL"===c?t.element.rect.width>=e?.element.rect.width:t.element.rect.height>=e?.element.rect.height))&&(e=t);e&&(e.node.stackChildPrimaryGrow=1,_=!0)}switch(c){case"HORIZONTAL":_||("MAX"===n.stackPrimaryAlignItems&&(h=0),"MIN"!==n.stackPrimaryAlignItems||(f=0)),y||("MIN"!==n.stackCounterAlignItems&&(g=0),"MAX"===n.stackCounterAlignItems||(x=0));break;case"VERTICAL":y||("MIN"!==n.stackCounterAlignItems&&(h=0),"MAX"===n.stackCounterAlignItems||(f=0)),_||("MAX"===n.stackCounterAlignItems&&(g=0),"MIN"!==n.stackCounterAlignItems||(x=0));break;default:(0,l.xb)(c)}return n.stackRightPadding=f,n.stackLeftPadding=h,n.stackTopPadding=g,n.stackBottomPadding=x,[{element:t,node:n}]}constructor(){ei(this,"description","Flexbox post-visit strategy, converting flexbox elements to stacks.")}}class el{onPostVisit(e,t,n,i){if(t.nodeType!==s.HZ.ELEMENT_NODE||(t.styles.display??"block")!=="block"||0===i.length||i.some(({element:e})=>e.nodeType!==s.HZ.ELEMENT_NODE)||!(0,ee.PO)(i,"VERTICAL","MIN")||!(0,ee.PO)(i,"VERTICAL","MAX"))return;let a=(0,ee.el)(i,"VERTICAL"),r=0;try{r=(0,ee.oL)(a,"VERTICAL")}catch{return}for(let e of(n.stackMode="VERTICAL",n.stackPrimarySizing="FIXED",n.stackCounterSizing="FIXED",n.stackPrimaryAlignItems="MIN",n.stackSpacing=r,n.bordersTakeSpace=!1,n.stackLeftPadding=i[0].element.rect.x-t.rect.x,n.stackTopPadding=a[0].element.rect.y-t.rect.y,n.stackRightPadding=t.rect.x+t.rect.width-i[0].element.rect.x-i[0].element.rect.width,a))e.node.stackChildAlignSelf="STRETCH",n.appendChild(e.node);return[{element:t,node:n}]}constructor(){ei(this,"description","Full width post-visit strategy, converting full width elements to stacks.")}}class eo{constructor(){ei(this,"description","Apply auto-layout grid if CSS grid is used"),ei(this,"onPostVisit",(e,t,n,i)=>{if(t.nodeType!==s.HZ.ELEMENT_NODE||i.length<1||i.some(({element:e})=>e.nodeType!==s.HZ.ELEMENT_NODE))return;let{display:a,gridAutoFlow:r="row",gridTemplateAreas:l="none",gridAutoColumns:o="auto",gridTemplateRows:d="none",gridTemplateColumns:c="none",rowGap:u="0px",columnGap:p="0px"}=t.styles,m=(0,B.PW)(u),h=(0,B.PW)(p);if("grid"!==a||"row"!==r||"none"===c||"none"!==l||"auto"!==o||"none"===d&&"none"===c||null==m||null==h)return;let f=(0,et.J)(c),g=(0,et.J)(d);if(!f||!g||f.some(e=>"PIXELS"!==e.unit)||g.some(e=>"PIXELS"!==e.unit))return;let x=f.length,_=g?g.length:Math.ceil(i.length/f.length),y=e=>e%x,v=e=>Math.floor(e/x),b=(0,ee.el)(i,"VERTICAL"),C=b[0].element.rect.x-t.rect.x,j=b[0].element.rect.y-t.rect.y,k=t.rect.x+n.borderRightWeight+t.rect.width-Math.max(...b.map(({element:{rect:e}})=>e.x+e.width))-n.borderRightWeight,w=t.rect.y+n.borderBottomWeight+t.rect.height-Math.max(...b.map(({element:{rect:e}})=>e.y+e.height))-n.borderBottomWeight;for(let e=0;e<b.length;e++){let{element:n}=b[e];if(n.rect.width!==f[y(e)].value)return;let i=Math.floor(e/x),s=t.rect.y+j+m*i+g.reduce((e,{value:t},n)=>n<i?e+t:e,0);if(n.rect.y!==s)return;let{gridColumnStart:a="auto",gridRowStart:r="auto",gridColumnEnd:l="auto",gridRowEnd:o="auto"}=t.styles;if("auto"!==a||"auto"!==r||"auto"!==l||"auto"!==o)return}if(n.stackMode="GRID",n.stackPrimarySizing="FIXED",n.stackCounterSizing="FIXED",n.setGridRowCount(_),n.setGridColumnCount(x),n.gridRowGap=m,n.gridColumnGap=h,n.stackTopPadding=j,n.stackLeftPadding=C,n.stackRightPadding=k,n.stackBottomPadding=w,f.some(e=>"PIXELS"===e.unit&&e.value!==f[0].value))for(let e=0;e<f.length-1;e++)n.setGridTrackSize("column",e,f[e].value);if(g.some(e=>"PIXELS"===e.unit&&e.value!==g[0].value))for(let e=0;e<g.length-1;e++)n.setGridTrackSize("row",e,g[e].value);for(let e=0;e<b.length;e++){let{node:t,element:i}=b[e];n.appendChild(t),t.setGridChildPosition(v(e),y(e)),i.rect.width===f[y(e)].value&&(t.stackChildPrimaryGrow=1),g&&i.rect.height!==g[v(e)].value||(t.stackChildAlignSelf="STRETCH")}return[{element:t,node:n}]})}}class ed{onPostVisit(e,t,n,i){for(let{node:e}of i)e.x-=t.rect.x,e.y-=t.rect.y,n.appendChild(e);return[{element:t,node:n}]}constructor(){ei(this,"description","Default post-visit strategy for elements, appending children to the parent node.")}}var ec=n(371383),eu=n(645118),ep=n(980852);function em(e,t,n){var i,s;let a;let r=Math.abs(Math.cos(n)),l=Math.abs(Math.sin(n));a=0===r?t.height:0===l?t.width:t.width*t.height/(t.width*l+t.height*r);let o=e.map(e=>{let t;return e.position?.unit==="PERCENT"?t=e.position.value/100:e.position?.unit==="PIXELS"&&(t=a>0?e.position.value/a:0),{color:y(e.color),position:t}});(i=o[0]).position??(i.position=0),(s=o[o.length-1]).position??(s.position=1);for(let e=0;e<o.length;e++)if(null==o[e].position){let t=e>0?o[e-1].position:0,n=0;for(let t=e;t<o.length&&null==o[t].position;t++)n++;let i=((e+n<o.length?o[e+n].position:1)-t)/(n+1);for(let s=0;s<n;s++)o[e+s].position=t+i*(s+1);e+=n-1}let d=o.map(e=>({color:e.color,colorVar:{value:{colorValue:e.color},dataType:"COLOR",resolvedDataType:"COLOR"},position:e.position}));return{stops:o,stopsVar:d}}function eh(e){let t=e.match(/^to\s+((?:left|right)(?:\s+(?:top|bottom))?|(?:top|bottom)(?:\s+(?:left|right))?)$/);if(!t||2!==t.length)return(0,p.sx)("html2design.unsupported_property_value",{property:"background-image",value:`linear-gradient(${e})`}),null;let[,n]=t;switch(n){case"top":return[{x:.5,y:1},{x:.5,y:0}];case"bottom":return[{x:.5,y:0},{x:.5,y:1}];case"left":return[{x:1,y:.5},{x:0,y:.5}];case"right":return[{x:0,y:.5},{x:1,y:.5}];case"left top":case"top left":return[{x:1,y:1},{x:0,y:0}];case"right top":case"top right":return[{x:0,y:1},{x:1,y:0}];case"left bottom":case"bottom left":return[{x:1,y:0},{x:0,y:1}];case"right bottom":case"bottom right":return[{x:0,y:0},{x:1,y:1}];default:return(0,p.sx)("html2design.unsupported_property_value",{property:"background-image",value:`linear-gradient(${e})`}),null}}function ef(e,t){return"auto"===e?null:"PERCENT"===e.unit?1/(e.value/100):"PIXELS"===e.unit?t/e.value:void(0,l.xb)(e.unit)}function eg(e,t,n){return null==e?0:"PIXELS"===e.unit?0===e.value&&0===t?0:e.value/t:"PERCENT"===e.unit?(1-n)*(e.value/100):void(0,l.xb)(e.unit)}function ex(e,t){let n=e.substring(t.length+1,e.length-1).trim(),i=(0,B.Gg)(n);if(0===i.length)return{params:"",stops:[]};let s="",a=i,r=i[0].trim();return(/\b(at|from|in|to|circle|ellipse|closest-corner|closest-side|farthest-corner|farthest-side)\b/i.test(r)||/^[+-]?(?:\d+\.?\d*|\.\d+)(?:e[+-]?\d+)?(deg|grad|rad|turn)\b/i.test(r))&&(s=r,a=i.slice(1)),{params:s,stops:a.map(e=>(function(e){let t=(0,B.Gg)(e.trim()," ");if(0===t.length)return(0,p.sx)("html2design.unparseable_value",{valueType:"color-stop",value:e}),null;let n=(0,B.wh)(t[1]);return null==n?{color:t[0]}:{color:t[0],position:n}})(e.trim())).filter(e=>null!=e)}}function e_(e){return null==e?[]:(0,B.Gg)(e,",").map(e=>(0,B.wh)(e)||((0,p.sx)("html2design.unsupported_property_value",{property:"background-position-x",value:e}),null))}function ey(e,t,n){return(0,B.PW)(e)??(t===n?(0,B.KS)(e,{axisSizeInPixels:t})??0:0)}function ev(e){let t=e.trim().match(/^([^(]+)\((.*)\)$/);if(!t||3!==t.length)return(0,p.sx)("html2design.unsupported_property_value",{property:"filter",value:e}),null;let[,n,i]=t,s=(0,B.Gg)(i," ");switch(n){case"blur":{let e=(0,G.tX)(s[0]);if(null==e)return(0,p.sx)("html2design.unsupported_property_value",{property:"filter",value:`blur(${s[0]})`}),null;return{type:"FOREGROUND_BLUR",radius:e*=2}}case"drop-shadow":{let[e,t,n,i]=s;return{type:"DROP_SHADOW",color:y(e)??{r:0,g:0,b:0,a:1},offset:{x:(0,G.tX)(t)??0,y:(0,G.tX)(n)??0},radius:((0,G.tX)(i)??0)*2,spread:0}}default:return(0,p.sx)("html2design.unsupported_property_value",{property:"filter",value:e}),null}}let eb={HEADER:"Header",NAV:"Navigation",MAIN:"Main Content",FOOTER:"Footer",ASIDE:"Sidebar",SECTION:"Section",ARTICLE:"Article",H1:"Heading 1",H2:"Heading 2",H3:"Heading 3",H4:"Heading 4",H5:"Heading 5",H6:"Heading 6",P:"Paragraph",SPAN:"Text",DIV:"Container",BLOCKQUOTE:"Quote",CODE:"Code",PRE:"Code Block",FORM:"Form",INPUT:"Input",TEXTAREA:"Text Area",SELECT:"Dropdown",OPTION:"Option",OPTGROUP:"Option Group",BUTTON:"Button",LABEL:"Label",FIELDSET:"Field Set",LEGEND:"Legend",IMG:"Image",VIDEO:"Video",AUDIO:"Audio",CANVAS:"Canvas",SVG:"Icon",PICTURE:"Picture",SOURCE:"Source",A:"Link",DETAILS:"Details",SUMMARY:"Summary",DIALOG:"Dialog",UL:"List",OL:"Numbered List",LI:"List Item",DL:"Definition List",DT:"Definition Term",DD:"Definition Description",TABLE:"Table",THEAD:"Table Header",TBODY:"Table Body",TFOOT:"Table Footer",TR:"Table Row",TH:"Header Cell",TD:"Table Cell",CAPTION:"Table Caption",COLGROUP:"Column Group",COL:"Column",STRONG:"Bold Text",B:"Bold Text",EM:"Italic Text",I:"Italic Text",U:"Underlined Text",S:"Strikethrough Text",DEL:"Deleted Text",INS:"Inserted Text",MARK:"Highlighted Text",SUB:"Subscript",SUP:"Superscript",HR:"Horizontal Rule",BR:"Line Break"};var eC=n(709961);function ej(e){let[t,n,i,s,a,r]=(0,B.Gg)(e.trim()," "),l=y(t);if(null==l)return null;let o=(0,G.tX)(n)??0,d=(0,G.tX)(i)??0,c=(0,G.tX)(s)??0,u=(0,G.tX)(a)??0;return 0===c&&0===u&&0===o&&0===d?null:{type:"inset"===r?"INNER_SHADOW":"DROP_SHADOW",color:l,offset:{x:o,y:d},radius:c,spread:u,showShadowBehindNode:!1}}function ek(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let ew="make_to_design_build_data";class eE{onVisit(e,t,n){if(!n||t.nodeType!==s.HZ.TEXT_NODE)return;let i=e.scene.createNode("TEXT",{tracking:e.tracking}),a=function(e,t){let n=e.createNode("TEXT",{tracking:h.HzA.IGNORE});n.leadingTrim="CAP_HEIGHT",n.x=0,n.y=0,V("Hg",t,n),n.lineHeight={units:"PERCENT",value:100},n.update();let i=n.y;n.x=0,n.y=0,n.lineHeight=H(t.lineHeight??"normal"),n.update(),n.leadingTrim="NONE",n.update();let s=-n.y;return n.removeSelfAndChildren(),s-i}(e.scene,n.styles);return i.x=t.rect.x,i.y=t.rect.y-a,V(t.text,n.styles,i,e.parentBackgroundClipTextFills),i.name=i.characters.slice(0,50)||"Text",i.resizeWithConstraints(Math.ceil(t.rect.width),t.rect.height),1===t.lineCount?i.textAutoResize="WIDTH_AND_HEIGHT":i.textAutoResize="HEIGHT",i.update(),e.attachBuildDataToNodes&&eS(t,i),{node:i}}constructor(){ek(this,"description","Default strategy for text nodes, using fixed width and hugging height.")}}class eT{maybeCreateNodeFromSVG(e,t,n){if("SVG"===t.tag&&t.content)return e.createNodeFromSVG(t.content);if("IMG"===t.tag){let i=n.svgs.get(t.attributes.src);if(i)return e.createNodeFromSVG(i)}return null}onVisit(e,t,n){if(t.nodeType!==s.HZ.ELEMENT_NODE)return;let i=this.maybeCreateNodeFromSVG(e.scene,t,e.assets),a=i??e.scene.createNode("FRAME");a.x=t.rect.x,a.y=t.rect.y,i?a.rescale(t.rect.width/a.size.x):a.resizeWithConstraints(t.rect.width,t.rect.height),a.name=function(e,t){if(null!=t&&t.owningReactComponent!=e.owningReactComponent&&e.owningReactComponent)return e.owningReactComponent;if(e.attributes.role){let t=e.attributes.role.toLowerCase(),n={button:"Button",dialog:"Dialog",navigation:"Navigation",banner:"Banner",main:"Main Content",contentinfo:"Footer",complementary:"Sidebar",search:"Search",form:"Form",img:"Image",tab:"Tab",tabpanel:"Tab Panel",tablist:"Tab List",menu:"Menu",menuitem:"Menu Item",menubar:"Menu Bar",toolbar:"Toolbar",tooltip:"Tooltip",alert:"Alert",status:"Status",progressbar:"Progress Bar",slider:"Slider",spinbutton:"Spin Button",checkbox:"Checkbox",radio:"Radio Button",switch:"Switch"};if(n[t])return n[t]}if("IMG"===e.tag){let t=e.attributes.alt;return t&&t.trim()?`Image (${t.trim()})`:"Image"}if("INPUT"===e.tag)return({text:"Text Input",email:"Email Input",password:"Password Input",tel:"Phone Input",url:"URL Input",search:"Search Input",number:"Number Input",range:"Range Slider",date:"Date Picker","datetime-local":"DateTime Picker",time:"Time Picker",week:"Week Picker",month:"Month Picker",color:"Color Picker",file:"File Upload",checkbox:"Checkbox",radio:"Radio Button",submit:"Submit Button",reset:"Reset Button",button:"Button",hidden:"Hidden Input"})[e.attributes.type?.toLowerCase()||"text"]||"Input";let n=eb[e.tag];if(n)return n;let i=e.tag.toLowerCase();return i.charAt(0).toUpperCase()+i.slice(1)}(t,n),(0,eC.D)(a,t);let{backgroundFills:r,textFills:o}=function(e,t){!function(e){let t=e.backgroundClip;t&&"text"!==t&&"border-box"!==t&&(0,p.sx)("html2design.unsupported_property_value",{property:"background-clip",value:e.backgroundClip})}(e.styles);let n=e.styles.backgroundColor?z(e.styles.backgroundColor,{useChromaJs:!0}):null,i=e.styles.backgroundImage?function(e,t,n){let i=[],s=n.rect,a=function(e){let t=e.trim();return["none","initial","inherit","unset","revert","revert-layer"].includes(t)?[]:(0,B.Gg)(t).map(e=>{var t;return(t=(t=e.trim()).trim()).startsWith("url(")?function(e){let t=e.match(/url\(\s*(['"]?)(.+?)\1\s*\)/);return t?{type:"url",value:t[2]}:{type:"url",value:""}}(t):t.startsWith("linear-gradient(")?function(e){let{params:t,stops:n}=ex(e,"linear-gradient");return{type:"linear-gradient",direction:t||"to bottom",stops:n}}(t):t.startsWith("radial-gradient(")?function(e){let{params:t,stops:n}=ex(e,"radial-gradient"),i=t.match(/\b(circle|ellipse)\b/i)?.at(1),s=function(e){let t=e.trim().split(/\s+/).map(t=>{switch(t){case"center":return{value:.5,unit:"POSITION"};case"top":return{value:0,axis:"y",unit:"POSITION"};case"bottom":return{value:1,axis:"y",unit:"POSITION"};case"left":return{value:0,axis:"x",unit:"POSITION"};case"right":return{value:1,axis:"x",unit:"POSITION"}}let n=(0,B.wh)(t);return n?.unit==="PERCENT"?{value:n.value/100,unit:"PERCENT"}:n?.unit==="PIXELS"&&0===n.value?{value:0,unit:"PERCENT"}:((0,p.sx)("html2design.unparseable_value",{valueType:"radial-gradient-position",value:e}),null)}).filter(e=>null!=e);if(0===t.length)return{x:.5,y:.5};if(1===t.length)return"y"===t[0].axis?{x:.5,y:t[0].value}:{x:t[0].value,y:.5};if(2===t.length){if(t[0].axis&&t[0].axis===t[1].axis)throw Error(`Invalid radial gradient position: ${e}`);return t[0].axis||t[1].axis?"x"===t[0].axis||"y"===t[1].axis?{x:t[0].value,y:t[1].value}:"y"===t[0].axis||"x"===t[1].axis?{x:t[1].value,y:t[0].value}:((0,p.sx)("html2design.unparseable_value",{valueType:"radial-gradient-position",value:e}),null):{x:t[0].value,y:t[1].value}}if(4===t.length){if(!t[0].axis||!t[2].axis||t[0].axis===t[2].axis||"PERCENT"!==t[1].unit||"PERCENT"!==t[3].unit)return(0,p.sx)("html2design.unparseable_value",{valueType:"radial-gradient-position",value:e}),null;let n=1===t[0].value,i=1===t[2].value,s=n?1-t[1].value:t[1].value,a=i?1-t[3].value:t[3].value;return"x"===t[0].axis?{x:s,y:a}:{x:a,y:s}}return(0,p.sx)("html2design.unparseable_value",{valueType:"radial-gradient-position",value:e}),null}(t.match(/\bat\b/i)?t.trim().replace(/.*\bat\s+/i,"").replace(/\s*\bin.*$/i,""):"center");if(null==s)return null;let a=function(e){switch(e.toLowerCase()){case"closest-side":return{type:"radial-extent",value:"closest-side"};case"closest-corner":return{type:"radial-extent",value:"closest-corner"};case"farthest-side":return{type:"radial-extent",value:"farthest-side"};case"farthest-corner":case"":return{type:"radial-extent",value:"farthest-corner"}}let t=(0,B.Gg)(e," ").map(B.wh).filter(e=>null!=e);return 2===t.length?{type:"two-dimensions",width:t[0],height:t[1]}:1===t.length&&"PIXELS"===t[0].unit?{type:"one-dimension",value:{value:t[0].value,unit:"PIXELS"}}:((0,p.sx)("html2design.unparseable_value",{valueType:"radial-gradient-size",value:e}),null)}(t.replace(/\b(?:at|in)\b.*$/i,"").replace(/\b(?:circle|ellipse)\b/i,"").trim());return null==a?null:(i||(i="one-dimension"===a.type?"circle":"ellipse"),{type:"radial-gradient",shape:i,size:a,position:s,stops:n})}(t):t.startsWith("conic-gradient(")?function(e){let t,n,{params:i,stops:s}=ex(e,"conic-gradient");if(i){if(i.startsWith("at ")&&(i="from 0deg "+i),i.includes(" at ")){let[e,s]=i.split(" at ");t=e.trim()||void 0,n=s.trim()}else/^[\d\.]+(deg|rad|grad|turn)/.test(i)?t=Array.from(i.matchAll(/([\d\.]+(?:deg|rad|grad|turn))+/gm)).map(e=>e[1]).join(" "):n=i.trim()}return{type:"conic-gradient",angle:t,position:n,stops:s}}(t):t.startsWith("image-set(")?function(e){let t=e.substring(10,e.length-1).trim();return{type:"image-set",images:(0,B.Gg)(t).map(e=>{let t,n;let i=(e=e.trim()).match(/url\(\s*(['"]?)(.+?)\1\s*\)/);if(!i)return{url:""};let s=i[2],a=e.replace(i[0],"").trim(),r=a.match(/(\d+(?:\.\d+)?x|(?:\d+(?:\.\d+)?)(?:dpi|dpcm|dppx))/);r&&(t=r[0]);let l=a.match(/type\(\s*(['"])(.+?)\1\s*\)/);return l&&(n=l[2]),{url:s,resolution:t,type:n}})}}(t):((0,p.sx)("html2design.unsupported_property_value",{property:"background-image",value:t}),null)})}(e);for(let e=0;e<a.length;e++){let r;let o=a[e];if(null==o)continue;let d=function(e){return null==e?[]:(0,B.Gg)(e,",").map(t=>{switch(t=t.trim().toLowerCase().replace(/\s+/g," ")){case"cover":return"cover";case"contain":return"contain";case"auto":case"auto auto":return}let n=(0,B.Gg)(t," ");if(n.length>0){let e="auto"===n[0]?"auto":(0,B.wh)(n[0]),t="auto";if(n.length>1&&(t="auto"===n[1]?"auto":(0,B.wh)(n[1])),null!=e&&null!=t)return{width:e,height:t}}(0,p.sx)("html2design.unparseable_value",{valueType:"background-size",value:e})})}(n.styles.backgroundSize),c=d[Math.min(e,d.length-1)],u=e_(n.styles.backgroundPositionX),m=e_(n.styles.backgroundPositionY),h={x:u[Math.min(e,u.length-1)],y:m[Math.min(e,m.length-1)]},f=null;switch(o.type){case"linear-gradient":{let{transform:e,angleRad:t}=function(e){let[t,n]=eh(e)??function(e){let t;let n=(0,B.VX)(e);if(null==n)return null;switch(n.unit){case"DEGREES":t=n.value*Math.PI/180;break;case"GRADIANS":t=n.value*Math.PI/200;break;case"RADIANS":t=n.value;break;case"TURNS":t=2*n.value*Math.PI;break;default:(0,l.xb)(n.unit)}let i=Math.sin(t),s=-Math.cos(t),a={x:.5,y:.5},r=Math.min(Math.abs(i)>1e-12?.5/Math.abs(i):Number.POSITIVE_INFINITY,Math.abs(s)>1e-12?.5/Math.abs(s):Number.POSITIVE_INFINITY),o={x:a.x+r*i,y:a.y+r*s},d={x:a.x-r*i,y:a.y-r*s},c=e=>Math.max(0,Math.min(1,e));return[{x:c(d.x),y:c(d.y)},{x:c(o.x),y:c(o.y)}]}(e)??eh("to bottom");return{transform:(0,ec.cN)("gradient-linear",[t,n,{x:t.x-(n.y-t.y),y:t.y+(n.x-t.x)}]),angleRad:Math.atan2(n.y-t.y,n.x-t.x)}}(o.direction);r=s,f={type:"GRADIENT_LINEAR",opacity:1,visible:!0,blendMode:"NORMAL",...em(o.stops,s,t),transform:(0,eu.D6)(e)};break}case"radial-gradient":{let e=function(e,t){if(t.width<=0||t.height<=0)return(0,p.sx)("html2design.unsupported_property_value",{property:"background-image",value:"radial-gradient with 0 width or height"}),null;let n=e.position,i={x:n.x,y:n.y},s={x:n.x,y:n.y};switch(e.size.type){case"radial-extent":let a=e.position.y*t.height,r=e.position.x*t.width,o=t.height-a,d=t.width-r,c="closest-corner"===e.size.value?{x:r<d?0:1,y:a<o?0:1}:{x:r<d?1:0,y:a<o?1:0};switch(e.shape){case"circle":switch(e.size.value){case"closest-side":let u=Math.min(r,d,a,o);i.x=n.x-u/t.width,s.y=n.y-u/t.height;break;case"farthest-side":let m=Math.max(r,d,a,o);i.x-=m/t.width,s.y-=m/t.height;break;case"closest-corner":case"farthest-corner":let h=n.x-c.x,f=n.y-c.y,g=Math.hypot(h*t.width,f*t.height);i.x-=g/t.width,s.y-=g/t.height;break;default:(0,l.xb)(e.size)}break;case"ellipse":switch(e.size.value){case"closest-side":s.y=a<o?0:1,i.x=r<d?0:1;break;case"farthest-side":s.y=a<o?1:0,i.x=r<d?1:0;break;case"closest-corner":case"farthest-corner":let x=Math.hypot(c.x-n.x,c.y-n.y);i.x-=x,s.y-=x;break;default:(0,l.xb)(e.size)}break;default:(0,l.xb)(e.shape)}break;case"one-dimension":if("circle"!==e.shape)return(0,p.sx)("html2design.unsupported_property_value",{property:"background-image",value:`radial-gradient(${e.shape} ${e.size.value.value}px)`}),null;s.y-=e.size.value.value/t.height,i.x-=e.size.value.value/t.width;break;case"two-dimensions":if("ellipse"!==e.shape)return(0,p.sx)("html2design.unsupported_property_value",{property:"background-image",value:`radial-gradient(${e.shape} ${e.size.width.value}px ${e.size.height.value}px)`}),null;"PERCENT"===e.size.width.unit?i.x-=e.size.width.value/100:i.x-=e.size.width.value/t.width,"PERCENT"===e.size.height.unit?s.y-=e.size.height.value/100:s.y-=e.size.height.value/t.height;break;default:(0,l.xb)(e.size)}return(0,ec.cN)("gradient-radial",[n,s,i])}(o,s);if(null==e)return null;r=s,f={type:"GRADIENT_RADIAL",visible:!0,opacity:1,blendMode:"NORMAL",...em(o.stops,s,0),transform:(0,eu.D6)(e)};break}case"url":let g=t.get(o.value);if(null==g)return(0,p.sx)("html2design.unsupported_property_value",{property:"background-image",value:`url(${o.value})`}),null;r=g.fullResolution,f=function(e,t,n){let i=(0,ep.getActiveTSSceneGraph)().createNode("FRAME");i.fills=[];let s=e=>e?.unit==="PERCENT"&&50===e.value,a=!s(n.x)||!s(n.y);"cover"!==t||a?"contain"!==t||a?i.insertImageInFillPaint(e,"STRETCH"):i.insertImageInFillPaint(e,"FIT"):i.insertImageInFillPaint(e,"FILL");let[r]=i.fills;return i.removeSelfAndChildren(),r}(g,c,h);break;case"conic-gradient":case"repeating-linear-gradient":case"repeating-radial-gradient":case"repeating-conic-gradient":case"image-set":(0,p.sx)("html2design.unsupported_property_value",{property:"background-image",value:o.type});continue;default:(0,l.xb)(o)}"IMAGE"===f.type?function(e,t={width:"auto",height:"auto"},n,i,s){if("IMAGE"===e.type&&("FILL"===e.imageScaleMode||"FIT"===e.imageScaleMode))return;let a=null,r=null;if("cover"===t||"contain"===t){let e=Math["cover"===t?"max":"min"](i.width/s.width,i.height/s.height);a=i.width/(e*s.width),r=i.height/(e*s.height)}else a=ef(t.width,i.width),r=ef(t.height,i.height);if(null==a&&null==r)a=i.width/s.width,r=i.height/s.height;else if(null==a){let e=s.width/s.height;a=i.width/i.height/e*r}else null==r&&(r=s.width/s.height*i.height/i.width*a);e.transform={m00:a,m01:0,m02:eg(n.x,i.width,a),m10:0,m11:r,m12:eg(n.y,i.height,r)}}(f,c,h,s,r):(null!=c&&(0,p.sx)("html2design.unsupported_property",{property:"background-size"}),(null!=h.x||null!=h.y)&&(0,p.sx)("html2design.unsupported_property",{property:"background-position"})),i.push(f)}return i.toReversed()}(e.styles.backgroundImage,t,e):null,s=[...null!=n?[n]:[],...null!=i?i:[]];return"text"===e.styles.backgroundClip?{textFills:s.length>0?s:void 0}:{backgroundFills:s.length>0?s:void 0}}(t,e.assets.imageSets);a.fills=r??[],o&&(e={...e,parentBackgroundClipTextFills:e.parentBackgroundClipTextFills?[...e.parentBackgroundClipTextFills,...o]:o}),function(e,t){let{width:n,height:i}=t.rect,{borderLeftWidth:s,borderRightWidth:a,borderTopWidth:r,borderBottomWidth:l,borderTopLeftRadius:o,borderTopRightRadius:d,borderBottomLeftRadius:c,borderBottomRightRadius:u,borderLeftColor:m="rgb(0, 0, 0)",borderTopColor:h="rgb(0, 0, 0)",borderRightColor:f="rgb(0, 0, 0)",borderBottomColor:g="rgb(0, 0, 0)"}=t.styles,x=(0,B.PW)(s)??0,_=(0,B.PW)(a)??0,y=(0,B.PW)(r)??0,v=(0,B.PW)(l)??0;if(0!==x||0!==_||0!==y||0!==v){e.bordersTakeSpace=!1,e.borderStrokeWeightsIndependent=!0,e.borderLeftWeight=x,e.borderRightWeight=_,e.borderTopWeight=y,e.borderBottomWeight=v,e.stackLeftPadding+=e.borderLeftWeight,e.stackRightPadding+=e.borderRightWeight,e.stackTopPadding+=e.borderTopWeight,e.stackBottomPadding+=e.borderBottomWeight;let t=x>0?m:y>0?h:_>0?f:v>0?g:null,n=t?z(t):null;e.strokePaints=n?{data:[n],blobs:[]}:{data:[],blobs:[]},(x&&m!==t||y&&h!==t||_&&f!==t||v&&g!==t)&&(0,p.sx)("html2design.unsupported_property",{property:"border-left-color"})}e.rectangleCornerRadiiIndependent=!0,e.rectangleTopLeftCornerRadius=ey(o,n,i),e.rectangleTopRightCornerRadius=ey(d,n,i),e.rectangleBottomLeftCornerRadius=ey(c,n,i),e.rectangleBottomRightCornerRadius=ey(u,n,i)}(a,t),function(e,t){let{boxShadow:n="none"}=t.styles;if("none"===n)return;0===e.fills.length&&(e.fills=[{type:"SOLID",color:{r:1,g:1,b:1,a:1e-5},opacity:1e-5}]),e.fills.every(e=>e.color?.a===0||0===e.opacity)&&(e.fills=e.fills.map(e=>({...e,opacity:Math.max(e.opacity||0,1e-5),color:e.color?{...e.color,a:Math.max(e.color.a||0,1e-5)}:e.color})));let i=(0,B.Gg)(n).map(ej).filter(e=>null!=e).reverse();e.effects=[...i,...e.effects],e.effects.some(e=>null!=e.spread&&e.spread>0)&&(0,p.sx)("html2design.unsupported_property_value",{property:"box-shadow",value:n})}(a,t),function(e,t){let{filter:n="none"}=t.styles;if("none"===n)return;let i=(0,B.Gg)(n," ").map(ev).filter(e=>null!=e).reverse();e.effects=[...i,...e.effects]}(a,t);let d=parseFloat(t.styles.opacity??"1");if(isNaN(d)||(a.opacity=d),"hidden"===t.styles.visibility&&(a.visible=!1),"CANVAS"===t.tag&&t.placeholderUrl){let n=e.assets.imageSets.get(t.placeholderUrl);n?a.insertImageInFillPaint(n,"FIT"):a.fills=[{type:"IMAGE",image:{name:"Checker",hash:eN(eI)},imageThumbnail:{name:"Checker",hash:eN(eI)},imageScaleMode:"FILL"}]}if("IMG"===t.tag&&!i){let n=e.assets.imageSets.get(t.attributes.currentSrc);n&&a.insertImageInFillPaint(n,"contain"==t.styles.objectFit?"FIT":"FILL")}return e.attachBuildDataToNodes&&eS(t,a),{node:a,ctx:e}}constructor(){ek(this,"description","Default strategy for frame nodes, using fixed width and height.")}}function eS(e,t){if(e?.source&&t.setPluginData(ew,"source",JSON.stringify(e.source)),e.nodeType===s.HZ.ELEMENT_NODE&&e.styles){let n=["alignContent","alignItems","alignSelf","justifyContent","justifyItems","justifySelf","display","width","height","top","left","position","paddingBottom","paddingLeft","paddingRight","paddingTop","marginBottom","marginLeft","marginRight","marginTop"],i=Object.fromEntries(Object.entries(e.styles).filter(([e,t])=>n.includes(e)&&t));t.setPluginData(ew,"styles",JSON.stringify(i))}}let eI="ece298d0ec2c16f10310d45724b276a6035cb503";function eN(e){let t=new Uint8Array(20);for(let n=0;n<40;n+=2)t[n/2]=parseInt(e.slice(n,n+2),16);return t}async function eA(e,t,n={}){(0,p.Mc)(t);let{scene:l,tracking:o}=t,h=()=>{if(n.abortSignal?.aborted)throw n.abortSignal?.reason};await Y(e),h(),t.trackPerformance?.track(i.OPTIMISTIC_FONT_LOADING),function e(t){t.childNodes&&0!==t.childNodes.length&&(t.childNodes=t.childNodes.filter(n=>{if(n.nodeType===s.HZ.ELEMENT_NODE){let i=n.tag?.toUpperCase();if(c.has(i)||"INPUT"===n.tag&&"hidden"===n.attributes.type||"none"===n.styles.display)return!1;let{clip:s="auto"}=n.styles;if(("absolute"===n.styles.position||"fixed"===n.styles.position)&&"rect(0px, 0px, 0px, 0px)"===s)return!1;let a=d(n);if(a.visibleWithoutCSS)return!0;if(0===a.styles.size&&n.childNodes?.length===0&&(t.styles.display??"block")==="block")return!1;e(n)}else if(n.nodeType===s.HZ.TEXT_NODE&&(!n.text||!/\S/.test(n.text||"")))return!1;return!0}))}(e.root),(0,m.o)(e.root),(0,Q.b)(e.root),function e(t){if(t.nodeType!==s.HZ.ELEMENT_NODE||!t.childNodes||0===t.childNodes.length||"SVG"===t.tag)return;for(let n of t.childNodes)e(n);if(1!==t.childNodes.length)return;let n=t.childNodes[0];if(n.nodeType!==s.HZ.ELEMENT_NODE||"SVG"===n.tag)return;let i=d(t);if(i.visibleWithoutCSS)return;let a=function(e,t,n=1){let i=(e,t)=>Math.abs(e-t)<n;return i(e.x,t.x)&&i(e.y,t.y)&&i(e.width,t.width)&&i(e.height,t.height)}(t.rect,n.rect);if(!a&&i.styles.size>0&&(n.styles.overflow??"visible")!=="visible")return;let r=i.styles.size>(i.styles.has("backgroundColor")?1:0);if(!a&&r)return;let l=new Set,o=!1;if(a&&null!=t.styles.backgroundColor&&null!=n.styles.backgroundColor&&n.styles.backgroundColor.startsWith("rgb(")?l.add("backgroundColor"):!a&&null!=n.styles.backgroundColor&&t.styles.backgroundColor===n.styles.backgroundColor&&n.styles.backgroundColor.startsWith("rgb(")?(o=!0,l.add("backgroundColor")):!a&&t.styles.backgroundColor?.startsWith("rgb(")&&null==n.styles.backgroundColor?o=!0:a||i.styles.size,!(null!=t.styles.backgroundColor&&null==n.styles.backgroundColor&&null!=n.styles.boxShadow||Array.from(i.styles).some(e=>!l.has(e)&&null!=n.styles[e]))){for(let e of i.styles)if(!l.has(e)){if(null==n.styles[e]){n.styles[e]=t.styles[e];continue}throw Error(`Child already has a style ${e}`)}for(let e in u(t.tag)&&!u(n.tag)&&(n.tag=t.tag),n.owningReactComponent??(n.owningReactComponent=t.owningReactComponent),o&&(n.rect=t.rect),t)delete t[e];Object.assign(t,n)}}(e.root),t.trackPerformance?.track(i.PREPROCESS_DOCUMENT);let f=await eL(t,e.assets,h);h(),t.trackPerformance?.track(i.DECODE_ASSETS,{imageCount:f.imageCount,imageTotalBytes:f.imageTotalBytes});let g=0,x=0,_=a.Dn.system("html-to-figma",()=>{let i;let a=[new eE,new eT],r=[new es,new ea,new er,new eo,new el,new ed].filter(e=>null!=e),d=function e(t,n,i,s,a){let r=n(t,s,a);if(null==r)return[];let{ctx:l=t,node:o}=r,d=[];if(1===s.nodeType)for(let t of s.childNodes){let a=e(l,n,i,t,s);d.push(...a)}return i(l,s,o,d)??d}({assets:f,scene:l,tracking:o,attachBuildDataToNodes:n.attachBuildDataToNodes},(e,t,n)=>{t.nodeType===s.HZ.ELEMENT_NODE?g++:t.nodeType===s.HZ.TEXT_NODE&&x++;let i=[];for(let s of a)try{let i=s.onVisit?.(e,t,n);if(i)return i}catch(e){console.error(`Failed to apply strategy: ${s.constructor.name}`,e),i.push(e)}let r=`No strategy found for element: ${t.nodeType}`;if(1===i.length){let e=i[0],t=e instanceof Error?e.message:String(e);r+=` (cause: ${t})`}else if(i.length>1){let e=i.map(e=>e instanceof Error?e.message:String(e)).join(", ");r+=` (causes: ${e})`}throw Error(r)},(e,t,n,i)=>{for(let s of r)try{let a=s.onPostVisit?.(e,t,n,i);if(a)return a.map(({element:t,node:n})=>({ctx:e,element:t,node:n}))}catch(e){console.error(`Failed to apply post-visit strategy: ${s.constructor.name}`,e,n?.id)}return[]},e.root);if(0===d.length)throw Error("No elements were converted from HTML to Figma");if(1===d.length)i=d[0].node;else for(let{node:e}of(i=l.createNode("FRAME",{tracking:o}),d))i.appendChild(e);if(i.name=t.rootFrameName??e.documentTitle??"Document",n.addViewportFrame){let t=l.createNode("FRAME",{tracking:o});t.name="Viewport",t.x=e.viewportRect.x,t.y=e.viewportRect.y,t.appendChild(i),i=t}return i.resizeWithConstraints(e.documentRect.width,e.documentRect.height),0===i.fills.length&&(i.fills=[{type:"SOLID",color:{r:1,g:1,b:1,a:1}}]),n.attachBuildDataToNodes?.enabled&&n.attachBuildDataToNodes.fileKey&&(i.setPluginData(ew,"sourceMakeFile",n.attachBuildDataToNodes.fileKey),n.attachBuildDataToNodes.referenceId&&i.setPluginData(ew,"sourceMakeReferenceId",n.attachBuildDataToNodes.referenceId)),l.updateAll(),i});return t.trackPerformance?.track(i.VISIT_ELEMENTS,{elementCount:g,textNodeCount:x}),await (0,r.FP)(),h(),t.trackPerformance?.track(i.FINISH_FONT_LOADING),(0,p.jM)(),_}async function eL(e,t,n){let i=0,s=0;for(let[,e]of t.entries())e.blob&&e.blob.type.startsWith("image/")&&e.blob.size>0&&(i++,s+=e.blob.size);let a=await eO(e,t);n();let r=await eM(t);return n(),{imageSets:a,svgs:r,imageCount:i,imageTotalBytes:s}}async function eM(e){let t=new Map;for(let[n,i]of e.entries())i.blob?.type==="image/svg+xml"&&t.set(n,await i.blob.text());return t}async function eO(e,t){let n=new Map;for(let[i,s]of t.entries()){if(null==s.blob||0===s.blob.size)continue;if(!s.blob.type.startsWith("image/")){console.warn(`Skipping asset ${i} with invalid type: ${s.blob.type}`);continue}let t=new Uint8Array(await s.blob.arrayBuffer());try{n.set(i,await e.decodeImage(t,s.blob.type,"image"))}catch(e){(0,p.sx)("html2design.image_decode_failure",{error:e instanceof Error?e.message:String(e),mimeType:s.blob.type})}}return n}},142326:(e,t,n)=>{n.d(t,{CP:()=>l,PO:()=>c,Wz:()=>r,el:()=>o,oL:()=>d,uE:()=>u});var i=n(325274),s=n(812084),a=n(951002);function r(e){switch(e){case"flex-start":case"normal":case"stretch":return"MIN";case"center":return"CENTER";case"flex-end":return"MAX";default:return(0,i.sx)("html2design.unsupported_property_value",{property:"align-items",value:e}),null}}function l(e){switch(e){case"column":case"column-reverse":return"VERTICAL";case"row":case"row-reverse":return"HORIZONTAL";default:return(0,i.sx)("html2design.unsupported_property_value",{property:"flex-direction",value:e}),null}}function o(e,t){return[...e].sort((e,n)=>"HORIZONTAL"===t?e.element.rect.x-n.element.rect.x||e.element.rect.y-n.element.rect.y:e.element.rect.y-n.element.rect.y||e.element.rect.x-n.element.rect.x)}function d(e,t){let n=(e,t,n)=>"HORIZONTAL"===n?t.rect.x-e.rect.x-e.rect.width:t.rect.y-e.rect.y-e.rect.height,i=e.length>1?n(e[0].element,e[1].element,t):0;if(i<0)throw Error("Children are overlapping");if(e.length>2){for(let s=2;s<e.length-1;s++)if(i!=n(e[s-1].element,e[s].element,t))throw Error("Gaps between children are not consistent")}return i}function c(e,t,n,i=2){let s=(e,t)=>Math.abs(e-t)<i;switch(t){case"HORIZONTAL":switch(n){case"MIN":return e.every(({element:t})=>s(t.rect.y,e[0].node.y));case"MAX":return e.every(({element:t})=>s(t.rect.y+t.rect.height,e[0].element.rect.y+e[0].element.rect.height));case"CENTER":return e.every(({element:t})=>s(t.rect.y+t.rect.height/2,e[0].element.rect.y+e[0].element.rect.height/2));case"BASELINE":return!1;default:(0,a.xb)(n)}case"VERTICAL":switch(n){case"MIN":return e.every(({element:t})=>s(t.rect.x,e[0].element.rect.x));case"MAX":return e.every(({element:t})=>s(t.rect.x+t.rect.width,e[0].element.rect.x+e[0].element.rect.width));case"CENTER":return e.every(({element:t})=>s(t.rect.x+t.rect.width/2,e[0].element.rect.x+e[0].element.rect.width/2));case"BASELINE":return!1;default:(0,a.xb)(n)}default:(0,a.xb)(t)}}function u(e,t){let{flexDirection:n="row",justifyContent:a="flex-start",alignItems:o="flex-start",rowGap:d="0px",columnGap:c="0px"}=t.styles,u=function(e){switch(e){case"flex-start":return"MIN";case"flex-end":return"MAX";case"center":return"CENTER";case"space-between":return"SPACE_BETWEEN";case"space-around":return"SPACE_EVENLY";default:return(0,i.sx)("html2design.unsupported_property_value",{property:"justify-content",value:e}),null}}(a)??"MIN",p=r(o)??"MIN",m=l(n);m&&(e.stackPrimarySizing="FIXED",e.stackCounterSizing="FIXED",e.stackMode=m,e.stackPrimaryAlignItems=u,("column-reverse"===n||"row-reverse"===n)&&(e.stackPrimaryAlignItems=function(e){switch(e){case"MIN":return"MAX";case"MAX":return"MIN";default:return e}}(e.stackPrimaryAlignItems)),e.stackCounterAlignItems=p,e.stackSpacing=(0,s.PW)("HORIZONTAL"===e.stackMode?c:d)??0,e.bordersTakeSpace=!0)}},368111:(e,t,n)=>{n.d(t,{J:()=>s});var i=n(812084);function s(e){if(!e)return null;let t=e=>{let t=e.match(/^minmax\(\s*0(?:px|%)?\s*,\s*(.+)\s*\)$/i);t&&2==t.length&&(e=t[1]);let n=e.match(/^(\d+)fr$/i);return n&&2===n.length?{value:parseInt(n[1]),unit:"FRACTIONAL"}:(0,i.wh)(e)};return(0,i.Gg)(e," ").map(e=>e.trim()).filter(e=>!(!e||e.startsWith("[")&&e.endsWith("]"))).flatMap(e=>{let n=e.match(/^repeat\(\s*(\d+)\s*,\s*(.+)\s*\)$/i);if(n&&3===n.length){let e=t(n[2]);return Array(parseInt(n[1])).fill(e)}return t(e)})}},325274:(e,t,n)=>{n.d(t,{G$:()=>o,Mc:()=>s,Zb:()=>l,jM:()=>a,sx:()=>r});let i=null;function s(e){i=e.trackDefinedEvent??null}function a(){i=null}function r(e,t){i&&i(e,t)}function l(e,t){throw r("html2design.unsupported_property_value",{property:e,value:t}),Error(`Unreachable property value: ${e} = ${t}`)}function o(e){let t=new Set;return(...n)=>{let i=`${n[0]}:${JSON.stringify(n[1])}`;t.has(i)||(t.add(i),e(...n))}}},709961:(e,t,n)=>{function i(e,t){!function(e){let t=null!=e.styles.overflowX&&"visible"!==e.styles.overflowX,n=null!=e.styles.overflowY&&"visible"!==e.styles.overflowY;return t||n}(t)?e.frameMaskDisabled=!0:e.frameMaskDisabled=!1}n.d(t,{D:()=>i})},91406:(e,t,n)=>{n.d(t,{e:()=>s});var i=n(812084);function s(e,t){let{paddingLeft:n,paddingRight:s,paddingTop:a,paddingBottom:r}=t.styles;e.stackLeftPadding=(0,i.PW)(n)??0,e.stackRightPadding=(0,i.PW)(s)??0,e.stackTopPadding=(0,i.PW)(a)??0,e.stackBottomPadding=(0,i.PW)(r)??0}},781144:(e,t,n)=>{n.d(t,{o:()=>function e(t,n={containingBlock:t,viewportElement:t,scrollContainer:t}){for(let s of Array.from(t.childNodes))if(s.nodeType===i.HZ.ELEMENT_NODE){let{position:i="static"}=s.styles,a=null;if("absolute"===i?a=n.containingBlock:"fixed"===i?a=n.viewportElement:"sticky"===i?a=n.scrollContainer:"relative"===i&&(a=t),null!=a){let e=t.childNodes.indexOf(s);t.childNodes.splice(e,1),a.childNodes.push(s)}let r={...n};(function(e){let{position:t="static"}=e.styles;if("relative"===t||"absolute"===t||"fixed"===t||"sticky"===t)return!0;let{transform:n="none"}=e.styles;if("none"!==n)return!0;let{filter:i="none"}=e.styles;if("none"!==i)return!0;let{contain:s="none"}=e.styles;if(["layout","paint","strict","content"].some(e=>s.includes(e)))return!0;let{containerType:a="normal"}=e.styles;if("normal"!==a)return!0;let{willChange:r="auto"}=e.styles;if(r.includes("transform")||r.includes("filter"))return!0;let{contentVisibility:l="visible"}=e.styles;return"auto"===l})(s)&&(r.containingBlock=s),function(e){let{overflow:t="visible",overflowX:n="visible",overflowY:i="visible"}=e.styles;return"visible"!==t||"visible"!==n||"visible"!==i}(s)&&(r.scrollContainer=s),e(s,r)}}});var i=n(96804)},812084:(e,t,n)=>{n.d(t,{Gg:()=>l,KS:()=>r,PW:()=>a,VX:()=>o,wh:()=>s});var i=n(325274);let s=e=>{if("string"!=typeof e)return null;let t=e.match(/^(-?\d*\.?\d+)(e[\-\+]?\d+)?(px|%)?$/);return t?{value:parseFloat(t[1]+(t[2]||"")),unit:"%"===t[3]?"PERCENT":"PIXELS"}:((0,i.sx)("html2design.unparseable_value",{valueType:"length",value:e}),null)},a=e=>{let t=s(e);return t&&"PIXELS"===t.unit?t.value:null},r=(e,t)=>{let n=s(e);return n&&"PERCENT"===n.unit?n.value*t.axisSizeInPixels/100:null};function l(e,t=","){let n=[],i="",s=0;for(let a=0;a<e.length;a++){let r=e[a];"("===r?(s++,i+=r):")"===r?(s--,i+=r):r===t&&0===s?(n.push(i),i=""):i+=r}return i&&n.push(i),n}function o(e){let t=e.match(RegExp("^(?<value>[+-]?(?:\\d+(?:\\.\\d+)?|\\.\\d+)(?:[eE][+-]?\\d+)?)(?<unit>grad|turn|deg|rad)$","i"));if(!t||3!==t.length)return(0,i.sx)("html2design.unparseable_value",{valueType:"angle",value:e}),null;let n=parseFloat(t[1]);if(isNaN(n))return(0,i.sx)("html2design.unparseable_value",{valueType:"angle",value:e}),null;switch(t[2].toLowerCase()){case"deg":return{unit:"DEGREES",value:n};case"rad":return{unit:"RADIANS",value:n};case"grad":return{unit:"GRADIANS",value:n};case"turn":return{unit:"TURNS",value:n};default:return(0,i.sx)("html2design.unparseable_value",{valueType:"angle",value:e}),null}}},319929:(e,t,n)=>{n.d(t,{Or:()=>s,tX:()=>a});var i=n(325274);function s(e){if("number"==typeof e)return{units:"RAW",value:e};if(e.match(/^[0-9]+(\.[0-9]+)$/))return{units:"RAW",value:parseFloat(e)};if("auto"===e)return{units:"AUTO"};let t=parseFloat(e);if(isNaN(t)){(0,i.sx)("html2design.unparseable_value",{valueType:"length",value:e});return}return e.match(/.*%\w*/)?{units:"PERCENT",value:t}:e.match(/.*px\w*/)?{units:"PIXELS",value:t}:void(0,i.sx)("html2design.unparseable_value",{valueType:"length",value:e})}function a(e){let t=s(e);return t?.units==="PIXELS"?t.value:null}},141869:(e,t,n)=>{n.d(t,{b:()=>function e(t){for(let n of t.childNodes)n.nodeType===i.HZ.ELEMENT_NODE&&e(n);let n=t.childNodes.filter(e=>e.nodeType===i.HZ.ELEMENT_NODE);if(n.length<=1)return;let s=n.map((e,t)=>({child:e,originalIndex:t,zIndex:function(e){let{zIndex:t="auto"}=e.styles;if("auto"===t)return 0;let n=parseInt(t,10);return isNaN(n)?0:n}(e)}));s.sort((e,t)=>e.zIndex!==t.zIndex?e.zIndex-t.zIndex:e.originalIndex-t.originalIndex);let a=0,r=[];for(let e of t.childNodes)e.nodeType===i.HZ.ELEMENT_NODE?(r.push(s[a].child),a++):r.push(e);t.childNodes=r}});var i=n(96804)},685128:(e,t,n)=>{n.d(t,{g:()=>_});var i=n(400045),s=n(951002),a=(n(999083),n(189142));function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class l{getMessages(){return structuredClone(this.messages)}getLatestMessage(){let e=structuredClone(this.messages[this.messages.length-1]);if(!e)throw new i.T("Empty messages array");return e}getPendingToolCalls(){return Array.from(this.pendingToolCalls.values())}ensureActiveMessageWithRole(e){if(!this.activeMessage||this.activeMessage.role!==e){let t=this.buildAiChatMessage(e);this.messages.push(t),this.activeMessage=t}return this.activeMessage}buildAiChatMessage(e){return{createdAtMs:Date.now(),role:e,content:[]}}pushToolResult(e,t,n){o(this.ensureActiveMessageWithRole("tool"),t=>"tool-result"===t.type&&t.toolCallId===e,{type:"tool-result",toolCallId:e,toolName:t,resultJSON:JSON.stringify(n)},"append")}appendClientSideToolResult(e,t,n){if(!this.pendingToolCalls.get(e))throw new i.T(`Tool call ${e} not found in pendingToolCalls`);this.pendingToolCalls.delete(e),this.pushToolResult(e,t,n),this.onUpdate?.(this.messages)}appendClientSideToolResultRef(e,t,n){switch(n.state){case"success":case"toolFailed":this.ensureActiveMessageWithRole("tool").content.push({type:"tool-result-ref",toolCallId:e,toolName:t,blobstoreContentKey:n.blobstoreContentKey});break;case"uploadFailed":this.appendClientSideToolResult(e,t,{success:!1,error:"Tool succeeded, but we failed to upload the tool result to Figma's blobstore service"});break;default:(0,s.xb)(n)}this.onUpdate?.(this.messages)}handleToolCallStartBase(e,t,n){let s=function(e,t,n){let s=n.safeParse(e);if(!s.success)throw new i.T(`Invalid stream part: ${t}: ${JSON.stringify(s.error)}`);return s.data}(e,t,n);this.streamingToolCallBuilder=new d(s.toolCallId,s.toolName)}handleToolCallDeltaBase(e,t){if(!this.streamingToolCallBuilder)throw new i.T("Received tool call delta before tool call start");if(e!==this.streamingToolCallBuilder.toolCallId)throw new i.T("Received tool call delta for wrong tool call");this.streamingToolCallBuilder.processArgsTextDelta(t);let n=this.streamingToolCallBuilder.getToolCall();this.pendingToolCalls.set(e,n),o(this.ensureActiveMessageWithRole("assistant"),e=>"tool-call"===e.type&&e.toolCallId===n.toolCallId,{type:"tool-call",toolCallId:n.toolCallId,toolName:n.toolName,argsJSON:JSON.stringify(n.args)},"append")}handleToolCallBase(e,t,n){let i={type:"tool-call",toolCallId:e,toolName:t,args:n};this.pendingToolCalls.set(i.toolCallId,i),this.streamingToolCallBuilder=void 0,o(this.ensureActiveMessageWithRole("assistant"),e=>"tool-call"===e.type&&e.toolCallId===i.toolCallId,{type:"tool-call",toolCallId:i.toolCallId,toolName:i.toolName,argsJSON:JSON.stringify(i.args??{})},"append")}constructor({initialMessages:e,logger:t,onUpdate:n}){r(this,"logger",void 0),r(this,"messages",[]),r(this,"activeMessage",void 0),r(this,"streamingToolCallBuilder",void 0),r(this,"pendingToolCalls",new Map),r(this,"onUpdate",void 0);let i=structuredClone(e),s=i[i.length-1];s&&(this.messages=i,this.activeMessage=s),this.logger=t,this.onUpdate=n,this.onUpdate(this.messages)}}function o(e,t,n,i){let s=e.content.findIndex(t);if(-1===s){"prepend"===i?e.content.unshift(n):e.content.push(n);return}e.content[s]=n}class d{processArgsTextDelta(e){let t=this.jsonStreamParser.addChunk(e);t&&(this.args=t)}getToolCall(){return{type:"tool-call",toolCallId:this.toolCallId,toolName:this.toolName,args:this.args}}constructor(e,t){r(this,"toolCallId",void 0),r(this,"toolName",void 0),r(this,"jsonStreamParser",void 0),r(this,"args",void 0),this.toolCallId=e,this.toolName=t,this.jsonStreamParser=new a.V,this.toolCallId=e,this.toolName=t,this.args={}}}var c=n(747618);class u extends l{processStreamPart(e){switch(e.type){case"text-delta":this.handleTextDelta(e);break;case"tool-call":this.handleToolCall(e);break;case"tool-call-start":this.handleToolCallStartBase(e,"tool-call-start",c.rH);break;case"tool-call-delta":this.handleToolCallDeltaBase(e.toolCallId,e.argsTextDelta);break;case"tool-result":this.handleToolResult(e);break;case"reasoning":case"reasoning-signature":case"redacted-reasoning":this.handleReasoning(e);break;case"messagesCommitted":this.lastCommittedMessageIndex=e.lastCommittedMessageIndex;break;default:(0,s.xb)(e)}this.onUpdate?.(this.messages)}getLastCommittedMessageIndex(){return this.lastCommittedMessageIndex}handleTextDelta(e){let t=this.ensureActiveMessageWithRole("assistant"),n=t.content[t.content.length-1];n&&"text"===n.type||(n={type:"text",text:""},t.content.push(n)),n.text+=e.textDelta}handleReasoning(e){let t=this.ensureActiveMessageWithRole("assistant");if("redacted-reasoning"===e.type){let n=t.content.find(e=>"redacted-reasoning"===e.type);n||(n={type:"redacted-reasoning",data:""},t.content.push(n)),n.data+=e.data}else{let n=t.content.find(e=>"reasoning"===e.type);switch(n||(n={type:"reasoning",text:"",signature:""},t.content.push(n)),e.type){case"reasoning":"textDelta"in e&&(n.text+=e.textDelta);break;case"reasoning-signature":n.signature=e.signature;break;default:(0,s.xb)(e)}}}handleToolCall(e){this.handleToolCallBase(e.toolCallId,e.toolName,e.args)}handleToolCallDelta(e){this.handleToolCallDeltaBase(e.toolCallId,e.argsTextDelta)}handleToolResult(e){this.pendingToolCalls.get(e.toolCallId)&&(this.pendingToolCalls.delete(e.toolCallId),this.pushToolResult(e.toolCallId,e.toolName,e.result))}appendUserMessage(e){let t={...e,content:e.content.map(e=>{switch(e.type){case"text":return{type:e.type,text:e.text};case"selected-node-ids":return{type:e.type,selectedNodeIds:[...e.selectedNodeIds]};case"image":return{type:e.type,image:e.image};case"jsx":return{type:e.type,jsx:e.jsx};case"code-chat-model-config-version":case"cortex-request-uuid":case"code-chat-code-import-ref":case"code-chat-image-import-ref":case"code-chat-diff-import-ref":case"code-chat-inspected-element-ref":case"code-chat-inspected-component":case"code-chat-inspected-library":case"code-chat-snapshot-restore":case"code-chat-errors":case"code-chat-library-keys":case"code-chat-origin":case"code-chat-manual-edit":case"code-chat-duplicated-file":case"code-chat-deleted-chat-history":case"code-chat-backfill-image-import":case"code-chat-backfill-code-import":case"code-chat-backfill-diff-import":case"code-chat-backfill-inspected-element":throw new i.T(`Content part ${e.type} is not implemented for Assistant.`);default:(0,s.xb)(e)}})};this.messages.push(t),this.activeMessage=t,this.onUpdate?.(this.messages)}constructor(...e){super(...e),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(this,"lastCommittedMessageIndex",void 0)}}n(569989);var p=n(419759);class m{push({toolCallId:e,trackingName:t}){this.toolCalls.push({name:t,id:e})}markSuccess(e){let t=this.toolCalls.find(t=>t.id===e);t&&(t.succeeded=!0)}markFailure(e){let t=this.toolCalls.find(t=>t.id===e);t&&(t.succeeded=!1)}getEventFields(){if(0===this.toolCalls.length)return{toolCallIds:void 0,toolCallNames:void 0,totalToolCalls:0,toolCallsSucceeded:0};let e=[],t=[],n=0;for(let i of this.toolCalls)e.push(i.id),t.push(i.name),i.succeeded&&n++;return{toolCallIds:JSON.stringify(e),toolCallNames:JSON.stringify(t),totalToolCalls:this.toolCalls.length,toolCallsSucceeded:n}}getLastToolCall(){return this.toolCalls.length>0?this.toolCalls[this.toolCalls.length-1]:void 0}constructor(){!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(this,"toolCalls",[])}}var h=n(772197),f=n(998432),g=n(490005);function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class _{handleError(e,t){let n=this.isAbortedError(e),i=e instanceof Error?e.name:"UnknownError",s=e instanceof Error?e.message:JSON.stringify(e),a=e instanceof Error?e:Error(s);return this.clientCallbacks.sloge(t,{name:i,message:s}),this.clientCallbacks.handleError&&!n&&this.clientCallbacks.handleError(a),{name:i,message:s,isAbortedError:n}}parseErrorForTracking(e){let t;let n=(0,h.determineErrorReason)(e);return e instanceof f.G1?e.data&&"status"in e.data&&(t=e.data.status):e instanceof g.G&&(t=e.statusCode),{message:e.message,name:e.name,reason:n,statusCode:t}}async streamResponse(e){return this.clientDependencies.streamResponse(e,this.trackingContext)}isAbortedError(e){return e instanceof DOMException&&"AbortError"===e.name}async getClientSideToolCallsFromResponseStream(e){let t=e.getReader();for(;;){let{done:e,value:n}=await t.read();if(e)break;this.threadBuilder.processStreamPart(n)}return this.threadBuilder.getPendingToolCalls()}async getAgentResponse({serverSideChatParams:e}){let t=e?[this.threadBuilder.getLatestMessage()]:this.threadBuilder.getMessages(),n=this.buildRequest({messages:t,serverSideChatParams:e}),i=await this.streamResponse(n);return await this.getClientSideToolCallsFromResponseStream(i)}async runAgentLoop({serverSideChatParams:e}){for(;;){let t=await this.getAgentResponse({serverSideChatParams:e});if(0===t.length)break;for(let e of t){let t=this.tools[e.toolName],{toolCallId:n,toolName:i,args:s}=e,a={toolCallId:n,toolName:t.trackingName};this.toolCallTracker.push({toolCallId:n,trackingName:t.trackingName});let{executeClientSide:r}=t;if(!r)throw Error(`Tool ${t.trackingName} has no client-side execution function`);this.clientCallbacks.trackEvent({name:p.LP.TOOL_EXECUTION_STARTED,fields:a});let l={...this.trackingContext,...a};try{let e={...await t.executeClientSide(s,l),success:!0};this.clientCallbacks.tryUploadToolResultToBlobStore?this.threadBuilder.appendClientSideToolResultRef(n,i,await this.clientCallbacks.tryUploadToolResultToBlobStore(e)):this.threadBuilder.appendClientSideToolResult(n,i,e),this.toolCallTracker.markSuccess(n),this.clientCallbacks.trackEvent({name:p.LP.TOOL_EXECUTION_RESULT,fields:{...l,success:!0}})}catch(s){let{name:e,message:t}=this.handleError(s,"Error in tool");this.toolCallTracker.markFailure(n),this.clientCallbacks.trackEvent({name:p.LP.TOOL_EXECUTION_RESULT,fields:{...l,success:!1,errorName:e,errorMessage:t}}),this.threadBuilder.appendClientSideToolResult(n,i,{success:!1,error:`${e}: ${t}`})}}}}async sendMessage({newUserMessage:e,serverSideChatParams:t}){let n=(0,p.qL)(e),i=(0,p.Qy)(e);this.clientCallbacks.trackEvent({name:p.LP.MESSAGE_SENT,fields:{numSelectedNodes:n.length,selectedNodeInfo:JSON.stringify(n),...i}}),this.threadBuilder.appendUserMessage(e);try{await this.runAgentLoop({serverSideChatParams:t});let{toolCallIds:e,toolCallNames:n,totalToolCalls:i,toolCallsSucceeded:s}=this.toolCallTracker.getEventFields();this.clientCallbacks.onUpdateThread(this.threadBuilder.getMessages(),!0);let a=this.threadBuilder.getMessages();this.clientCallbacks.trackEvent({name:p.LP.RESPONSE_RECEIVED,fields:{toolCallIds:e,toolCallNames:n,totalToolCalls:i,toolCallsSucceeded:s,status:"completed"}});let r=this.toolCallTracker.getLastToolCall();return r?.succeeded===!1&&this.clientCallbacks.trackEvent({name:p.LP.USER_FACING_ERROR,fields:{reason:"final_tool_call_failed"}}),a}catch(c){let{name:t,message:n,isAbortedError:i}=this.handleError(c,"Error in sendMessage"),{toolCallIds:s,toolCallNames:a,totalToolCalls:r,toolCallsSucceeded:l}=this.toolCallTracker.getEventFields();this.clientCallbacks.trackEvent({name:p.LP.RESPONSE_RECEIVED,fields:{toolCallIds:s,toolCallNames:a,totalToolCalls:r,toolCallsSucceeded:l,status:i?"aborted":"failed",errorName:t,errorMessage:n}});let o=c instanceof Error?c:Error(n),d=this.parseErrorForTracking(o);this.clientCallbacks.trackEvent({name:p.LP.USER_FACING_ERROR,fields:{reason:"assistant_request_failed",errorName:d.name,errorMessage:d.message,errorReason:d.reason,statusCode:d.statusCode?.toString()}}),this.clientCallbacks.onUpdateThread([e,{role:"assistant",content:[{type:"text",text:i?"The request was canceled.":"Sorry, I encountered an error while processing your request. Please try again."}],createdAtMs:Date.now()}],!0)}}async generateResponse(e){return this.threadBuilder.appendUserMessage(e),await this.getAgentResponse({serverSideChatParams:void 0}),this.threadBuilder.getMessages()}constructor({trackingContext:e,tools:t,clientDependencies:n,clientCallbacks:i,persistedMessages:s}){x(this,"tools",void 0),x(this,"trackingContext",void 0),x(this,"clientDependencies",void 0),x(this,"clientCallbacks",void 0),x(this,"toolCallTracker",void 0),x(this,"threadBuilder",void 0),this.trackingContext=e,this.tools=t,this.clientDependencies=n,this.clientCallbacks=i,this.toolCallTracker=new m,this.threadBuilder=new u({initialMessages:s,logger:console,onUpdate:e=>this.clientCallbacks.onUpdateThread(e,!1)})}}},419759:(e,t,n)=>{n.d(t,{LP:()=>i,Qy:()=>l,qL:()=>r});var i,s=n(980852);function a(e){return e.content.filter(e=>"selected-node-ids"===e.type).flatMap(e=>e.selectedNodeIds)}function r(e){let t=(0,s.getActiveTSSceneGraph)();return a(e).map(e=>({nodeId:e,depthFromCanvas:t.get(e)?.depthFromCanvas??-1}))}function l(e){let t=(0,s.getActiveTSSceneGraph)(),n=a(e),i=new Set,r=0,l=0;for(let e of n){let n=t.get(e);n&&(n.isImage?i.add("IMAGE"):i.add(n.type),n.isComponentish&&r++,n.isInstance&&l++)}return{selectionMetadata:JSON.stringify({selectionCount:n.length,selectedTypes:Array.from(i),hasComponent:r>0,hasInstance:l>0}),numComponents:r,numInstances:l}}!function(e){e.MESSAGE_SENT="message_sent",e.RESPONSE_RECEIVED="response_received",e.TOOL_EXECUTION_STARTED="tool_execution_started",e.TOOL_EXECUTION_RESULT="tool_execution_result",e.USER_FACING_ERROR="user_facing_error"}(i||(i={}))},983252:(e,t,n)=>{function i(e,t){return t.length>1&&("text"===e.harness.userMessageFormat||"text-with-components"===e.harness.userMessageFormat)}function s(e,t){for(let n of t){if("TEXT"===n.type&&n.hasMissingFont)return!0;for(let t of n.findAllWithCriteriaGUIDs({types:["TEXT"]})){let n=e.get(t);if(n?.hasMissingFont)return!0}}return!1}n.d(t,{AR:()=>i,nN:()=>s}),n(983317),n(233365),n(373009),n(765560),n(133363),n(744449),n(144302)},663166:(e,t,n)=>{n.d(t,{XD:()=>s.X,NK:()=>i.NK,xr:()=>i.xr}),n(765560),n(913834),n(983252);var i=n(233365);n(741583),n(266808),n(980852),n(983317),n(603759),n(249890),n(685128).g,n(373009),n(144302),n(991981),n(170627);var s=n(361574)},765560:(e,t,n)=>{n.d(t,{C:()=>i});class i extends Error{constructor(e){super("MakeEditsError: "+e.name),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(this,"payload",void 0),Object.setPrototypeOf(this,new.target.prototype),this.name=e.name,this.payload=e}}},741583:(e,t,n)=>{n.d(t,{h:()=>o});var i=n(249890),s=n(170627),a=n(119854),r=n(765560);let l="plugin_playground";async function o({node:e,jsxStr:t,oldJsxStr:o,serializerOptions:d,clientLifecycleId:c,timingManager:u,nodeHandlerManager:p,transformCustomJsx:m,processGenerationRequest:h,debugInfo:f}){u?.mark("deserializeStart");let g=(0,i.S$)(t),x=g?.[0];g&&g?.length>1&&(t=`<>
${t}
</>`,x=i.S$(t)?.[0],d?.modifiableIds&&e?.parentGuid&&d.modifiableIds.push(e.parentGuid));let _=await n.e(7726).then(n.bind(n,747726)),y=_.getStrictParseError(t);if(y&&f&&(f.parseError=y.formatted||y.message),!x)throw u?.mark("deserializeEnd"),Error("Invalid jsx");let v=o?i.S$(o)?.[0]:void 0;m(x),v&&m(v);let b=!v||(0,i.Vt)(v)!==(0,i.Vt)(x),C=await _.reconcileJSXElement({jsxElement:x,node:e,oldJSXElement:v,options:d,editScopeType:s.zk.AI,outerEditScopeLabel:`afi{name:make-edits,clid:${c}}`,jsxStr:t});u?.mark("deserializeEnd"),f?.reconcileIssues.push(...C.issues.map(e=>e.formatted||e.message));let j=C.node;if(!j)throw new r.C({name:"Couldn't reconcile JSX",severity:"total",cause:{issues:C.issues},retryable:!1,fallbackToDifferentModel:!1,healable:!1,friendlyErrorMessage:"Reconciliation resulted in a nullish output. This is likely due to a parsing error."});if(h&&C.generationRequests?.length)for(let e of C.generationRequests){let t=j.sceneGraph.get(e.guid);if(!t){(0,a.x1)("make-edits","Missing node",{guid:e.guid});continue}await h(e,t)}let k=p.handleNodesForRoot(j);return s.l7.ai("make-edits",()=>{if(e?.firstDraftData){j.firstDraftData=e.firstDraftData;let t=e.getSharedPluginData(l,"userPrompt");j.setSharedPluginData(l,"userPrompt",t)}}),{nodeId:j.guid,issues:C.issues,delayedEdits:k,changeMade:b,normalizedJSXStr:t,strictParseError:y}}},373009:(e,t,n)=>{n(945741),n(999083),n(421003)},361574:(e,t,n)=>{var i,s;n.d(t,{X:()=>s}),function(e){e.THINKING="thinking",e.WORKING="working",e.NONE="none"}(i||(i={})),function(e){e.USER_ABORTED="user_aborted",e.TIMED_OUT="timed_out",e.OTHER="other"}(s||(s={}))},233365:(e,t,n)=>{n.d(t,{NK:()=>o,xr:()=>d,Pg:()=>l}),n(133363),n(663166);var i=n(361574),s=n(32970);n.e(2652).then(n.bind(n,342652)).then(e=>e.jsxqueryBundleString),s.KC([s.Ik({result:s.eu("SUCCESS"),data:s.Ik({jsx:s.Yj()})}),s.Ik({result:s.eu("ERROR"),data:s.Ik({error:s.Yj(),debugLog:s.Yj().optional()})})]),`
function createDebugLogger() {
  const logs = [];
  return {
    log(message) {
      logs.push(message);
    },
    getLog() {
      return logs.join('\\n');
    }
  };
}
`.trim(),`
function executeJSXQueryWithDebug(jsx, userCode) {
  const debugLog = createDebugLogger();

  try {
    debugLog.log('Input JSX length: ' + jsx.length);
    debugLog.log('User code: ' + userCode);

    // This will be filled in by the JSXQuery bundle
    const JSXQuery = globalThis.JSXQuery;

    const jsxQueryXML = JSXQuery.JSXToJSXQueryXML(jsx);
    debugLog.log('Converted XML length: ' + jsxQueryXML.length);
    debugLog.log('Full converted XML:\\n' + jsxQueryXML);

    const result = JSXQuery.JSXQueryXMLToJQuery(jsxQueryXML);
    debugLog.log('Successfully created jQuery object');

    const { $, $xml, createFragment } = result;
    const userFunction = new Function('$', '$xml', 'createFragment', userCode);
    userFunction($, $xml, createFragment);
    debugLog.log('User function executed successfully');

    const finalJSX = JSXQuery.createJSXForJQuery($xml);
    debugLog.log('Final JSX length: ' + finalJSX.length);
    debugLog.log('Full final JSX:\\n' + finalJSX);

    return {
      result: 'SUCCESS',
      data: {
        jsx: finalJSX
      }
    };
  } catch (error) {
    debugLog.log('Error occurred: ' + error);
    debugLog.log('Error stack: ' + (error.stack || 'No stack trace'));

    return {
      result: 'ERROR',
      data: {
        error: String(error),
        debugLog: debugLog.getLog()
      }
    };
  }
}
`.trim(),n(249890),n(373009),n(765560),n(144302),n.e(413).then(n.bind(n,420413)).then(e=>e.JSXToJSXQueryXML);let a=/id=["']([^"']+)["']/;function r(e){return e.replace(/\r\n/g,"\n").replace(/[ \t]+$/gm,"").replace(/^[ \t]+/gm,"").replace(/[^\S\n]+/g," ").replace(/\n{2,}/g,"\n").replace(/\u2018/g,"'").replace(/\u2019/g,"'").replace(/\u201C/g,'"').replace(/\u201D/g,'"').replace(/\u2013/g,"-").replace(/\u2014/g,"-").replace(/\u2026/g,"...").replace(/\u2028/g," ").replace(/\u00A0/g," ").trim()}function l(e){if("FRAME"!==e.type||0!==e.childrenGuids.length||(e.strokePaints?.data.length??0)!==0||(e.effects?.length??0)!==0)return!1;let t=e.fills;if(!t||0===t.length)return!0;if(1===t.length){let e=t[0];return e?.type==="SOLID"&&e?.visible===!0&&e?.color?.r===1&&e?.color?.g===1&&e?.color?.b===1&&e?.color?.a===1}return!1}function o(e){let t={[i.X.USER_ABORTED]:"Request was aborted by the user",[i.X.TIMED_OUT]:"Request timed out",[i.X.OTHER]:"Request was aborted"};return new DOMException(`[${e}] ${t[e]}`,"AbortError")}function d(e){if(!(e instanceof DOMException)||"AbortError"!==e.name)return i.X.OTHER;let t=e.message.match(/^\[([^\]]+)\]/);if(t){let e=t[1];if(Object.values(i.X).includes(e))return e}return i.X.OTHER}RegExp("<\\/think>","gs")},144302:(e,t,n)=>{n(266808),n(999083),n(491488),n(683389)}}]);

//# debugId=029e8806-f58f-5101-a57b-55223e721ec9

//# sourceMappingURL=https://admin.figma.com/admin/webpack-artifacts/250c5fdd85a6f4e0eea67ab0818145ab532ed9b2/2684-6aea3357135ab78b.min.js.map