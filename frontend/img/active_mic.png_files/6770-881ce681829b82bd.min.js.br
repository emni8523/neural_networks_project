"use strict";
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="3c66f524-de11-5735-8ace-b3db165c3e46")}catch(e){}}();
(globalThis.webpackChunk_figma_web_bundler=globalThis.webpackChunk_figma_web_bundler||[]).push([[6770],{295539:(e,t,n)=>{n.d(t,{u:()=>te});var s=n(104076),l=n(716976),i=n(638004),x=n(812714),a=n(1188),r=n(795033),o=n(120440),u=n(692042),c=n(594440),d=n(630332),m=n(158042),h=n(74620),p=n(835307);function f(e,t){let n=_(e,t),s=l.useMemo(()=>Math.min(21,.5*n.height),[n]);return l.useMemo(()=>({x:n.x+n.width+9+8,y:n.y+s}),[n,s])}function g(e){return f((0,r.md)(m.zy)??[],e)}let y=e=>(0,p.Fk)((e,t)=>{let n=t.map(t=>e.get(t)?.absoluteBoundingBox).filter(e=>void 0!==e);if(0===n.length)return{x:0,y:0,width:0,height:0};let s=n[0].x,l=n[0].y,i=n[0].x+n[0].w,x=n[0].y+n[0].h;for(let e=1;e<n.length;e++){let t=n[e];s=Math.min(s,t.x),l=Math.min(l,t.y),i=Math.max(i,t.x+t.w),x=Math.max(x,t.y+t.h)}let a=i-s,r=x-l;return{x:s,y:l,width:a,height:r}},e);function _(e,t){let n=(0,h.eY)(),s=(0,u._X)({subscribeToUpdates_expensive:t&&e.length>0}),i=y(e);return l.useMemo(()=>n?(0,u.Yb)(s,i):{x:0,y:0,width:0,height:0},[i,n,s])}function b(e,t){let n=_(e,t),s=(0,u.MG)({subscribeToUpdates_expensive:t}),i=(0,u.TZ)({subscribeToUpdates_expensive:t});return l.useMemo(()=>0===e.length||0===n.width?null:{x:n.x+s,y:n.y+i,width:n.width,height:n.height},[n,s,i,e.length])}var v=n(651116);let k=()=>{let e=(0,v.vb)(),t=function(){let e=(0,d.xs)(),t=(0,r.md)(m.zy),{isOpen:n}=(0,m.QW)();return n&&t.length>0?t:e.length>0?e:[]}(),n=(0,u._X)({subscribeToUpdates_expensive:e}),s=_(t,e),l={...s,x:s.x+n.x,y:s.y+n.y};return e&&0!==t.length?l:null};function j({codeChatRestriction:e}){let t=k();return t?e?(0,s.jsx)(c.lM,{targetRect:t,positionXY:e=>[e.x,e.y],children:(0,s.jsx)("div",{className:"xmkeg23 x1y0btm7 x1va2ikv",style:{width:`${t.width-1}px`,height:`${t.height-1}px`}})}):(0,s.jsx)(c.lM,{targetRect:t,positionXY:e=>[e.x-4-1,e.y-4-1],children:(0,s.jsx)("div",{className:"x1n2onr6 x1sxf85j xjbqb8w xyf9f8g xmv1q7x x19wp0b7 x9tnh73 xr7n5gi xb3r6kr",style:{width:`${t.width+8}px`,height:`${t.height+8}px`},children:(0,s.jsx)("div",{...o.xk(T.rotatingGradient,T.gradientExtension(t.width,t.height))})})}):null}let w={"--gradient-extension":"x18j445q",$$css:!0},T={rotatingGradient:{kVAEAm:"x10l6tqk",k87sOh:"xfj7k5e",kbCHJM:"x4jxcl1",kCIrl2:"xsgfo7e",kLqNvP:null,kt4wiu:null,krVfgx:"x12dip0s",kKwaWg:"x11ix66q",kKVMdj:"x1aerksh",k44tkh:"x7t6ubo",ko0y90:"xa4qsjk",kyAemX:"x1esw782",kY2c9j:"x16zdwhg",kfzvcC:"x47corl",$$css:!0},gradientExtension:(e,t)=>[w,{"--x---gradient-extension":`${Math.ceil(Math.sqrt(Math.pow(e+8,2)+Math.pow(t+8,2))/2)}px`}]};var z=n(157294),N=n(108025),C=n(770522),E=n(192075),I=n(608989),q=n(349311),L=n(122010),M=n(237420),A=n(266808),S=n(489175),O=n(968169);let D=[];function R(){let e=(0,v.vb)(),t=(0,O.A6)(),n=(0,r.md)(m.zy).length,s=(0,M.d4)(({mirror:{appModel:e}})=>[A.QOV.DEFAULT,A.QOV.SELECTING_TEXT,A.QOV.CLICKING_TO_CHANGE_SELECTION].includes(e.activeUserAction)),i=(0,h.p8)("activeCanvasEditModeType"),x=function(){let e=(0,r.md)(m.zy),t=e.length,{isOpen:n}=(0,m.QW)(),s=(0,p.Fk)((e,t)=>{if(0===t.length)return 0;let n=e.get(t[0]);return n?Math.min(n.size.x,n.size.y):0},e),l=1===t&&!n,i=(0,u.Pl)({subscribeToUpdates_expensive:l});return l&&s*i<16}(),{isOpen:a}=(0,m.QW)(),o=i===A.m1T.TEXT||i===A.m1T.VECTOR||!s||x,c=function(){let e=(0,r.md)(m.zy),t=b(e??D,!0),n=function(e){let t=function(e){let t=function(e,t){let n=f(e,t),s=(0,u.MG)({subscribeToUpdates_expensive:t}),i=(0,u.TZ)({subscribeToUpdates_expensive:t});return l.useMemo(()=>0!==e.length&&n?{x:n.x+s,y:n.y+i}:null,[n,s,i,e.length])}(e,!0);return l.useMemo(()=>{if(!t)return null;let e=t.x-8,n=t.x+8,s=t.y-8,l=t.y+8,i=e-24,x=s-24;return{x:i,y:x,width:n+24-i,height:l+24-x}},[t])}(e),n=b(e,!0);return l.useMemo(()=>{if(!t)return null;let e={x:t.x,y:t.y},s={x:t.x+t.width,y:t.y},l=n?n.y+n.height:1/0,i=t.y+t.height,x={x:t.x+t.width,y:Math.min(i,l)},a=n?l:t.y+t.height,r={x:t.x,y:a};return{points:[e,s,x,r],bbox:{x:Math.min(e.x,s.x,x.x,r.x),y:Math.min(e.y,s.y,x.y,r.y),width:Math.max(e.x,s.x,x.x,r.x)-Math.min(e.x,s.x,x.x,r.x),height:Math.max(e.y,s.y,x.y,r.y)-Math.min(e.y,s.y,x.y,r.y)}}},[t,n])}(e??D),[s,i]=l.useState(!1),[x,a]=l.useState(!1),[o,c]=l.useState(!1),[d,h]=l.useState(!1),p=l.useCallback(({clientX:e,clientY:s})=>{let l={x:e,y:s},i=!!t&&l.x>=t.x&&l.x<=t.x+t.width&&l.y>=t.y&&l.y<=t.y+t.height,x=!!n&&function(e,t,n){if(e.x<n.x||e.x>n.x+n.width||e.y<n.y||e.y>n.y+n.height)return!1;let s=!1;for(let n=0,l=t.length-1;n<t.length;l=n++){let i=t[n].x,x=t[n].y,a=t[l].x,r=t[l].y;x>e.y!=r>e.y&&e.x<(a-i)*(e.y-x)/(r-x)+i&&(s=!s)}return s}(l,n.points,n.bbox);c(i),h(x)},[t,n]),g=(0,S.ft)(!0)?"pointermove":"mousemove";return(0,l.useEffect)(()=>(document.addEventListener(g,p),()=>{document.removeEventListener(g,p)}),[g,p]),l.useEffect(()=>{o?i(!0):d||i(!1)},[o,d]),l.useEffect(()=>{if(o||d){a(!1);return}a(!0);let e=setTimeout(()=>{a(!1)},400);return()=>clearTimeout(e)},[o,d]),l.useMemo(()=>o||d&&s||x&&s,[o,d,s,x])}(),d=function(){let e=(0,r.md)(m.zy),[t,n]=l.useState(!1),s=l.useRef("");return l.useEffect(()=>{let t=e.join(",");t!==s.current&&(s.current=t,n(e.length>0))},[e]),l.useEffect(()=>{if(!t)return;let e=()=>n(!1);return window.addEventListener("pointermove",e,{once:!0}),window.addEventListener("mousemove",e,{once:!0}),()=>{window.removeEventListener("pointermove",e),window.removeEventListener("mousemove",e)}},[t]),t}();return!!a||!!e&&!!t&&!(n<1)&&!o&&(!!d||!!c)}function P(){return(0,s.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",style:{zIndex:1},children:(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.71864 3.76035C7.81529 3.49917 8.18471 3.49917 8.28136 3.76035L9.30258 6.52017C9.33297 6.60229 9.39771 6.66703 9.47983 6.69742L12.2396 7.71864C12.5008 7.81529 12.5008 8.18471 12.2396 8.28136L9.47983 9.30258C9.39771 9.33297 9.33297 9.39771 9.30258 9.47983L8.28136 12.2396C8.18471 12.5008 7.81529 12.5008 7.71864 12.2396L6.69742 9.47983C6.66703 9.39771 6.60229 9.33297 6.52017 9.30258L3.76035 8.28136C3.49917 8.18471 3.49917 7.81529 3.76035 7.71864L6.52017 6.69742C6.60229 6.66703 6.66703 6.60229 6.69742 6.52017L7.71864 3.76035Z",fill:"currentColor"})})}function G(){return(0,s.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",style:{zIndex:1},children:(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",fill:"currentColor",d:"M 7.30653 3.46552 C 7.60659 2.93207 8.39319 2.93207 8.69325 3.46552 L 8.74989 3.58759 L 9.73915 6.26044 L 12.413 7.25068 C 13.1092 7.50852 13.1094 8.49297 12.413 8.75068 L 9.73915 9.73994 L 8.74989 12.4138 C 8.49206 13.1099 7.50777 13.1099 7.24989 12.4138 L 6.25965 9.73994 L 3.5868 8.75068 C 2.89034 8.49294 2.89034 7.50841 3.5868 7.25068 L 6.25965 6.26044 L 7.24989 3.58759 L 7.30653 3.46552 Z M 7.1659 6.69404 C 7.08484 6.9129 6.91215 7.08569 6.69325 7.16669 L 4.43934 8.00068 L 6.69325 8.83466 C 6.88481 8.9056 7.04144 9.04639 7.13172 9.22724 L 7.1659 9.30732 L 7.99989 11.5602 L 8.83387 9.30732 L 8.86805 9.22724 C 8.95837 9.04633 9.11488 8.90558 9.30653 8.83466 L 11.5595 8.00068 L 9.30653 7.16669 C 9.08765 7.0857 8.91495 6.91287 8.83387 6.69404 L 7.99989 4.44013 L 7.1659 6.69404 Z"})})}function U({codeChatRestriction:e,isHovered:t,setIsHovered:n}){let{isOpen:i}=(0,m.QW)(),x=l.useCallback(()=>{i?(0,m.Sz)():(0,m._C)()},[i]);var a=G;let r=(0,I.J)(),o=!!r&&(0,C.HD)(r);return(t||i)&&!e&&(a=P),(0,s.jsxs)("button",{className:"x1n2onr6 x71s49j xh8yej3 x5yr21d x78zum5 xl56j7k x6s0dn4","aria-label":(0,E.t)("ai_assistant.canvas.canvas_entrypoint_label"),"data-fullscreen-intercept":!0,"data-testid":"ai-assistant-canvas-entrypoint-button","data-tooltip":(0,E.t)("ai_assistant.canvas.canvas_entrypoint_label"),"data-tooltip-type":q.Ib.TEXT,onBlur:()=>{n(!1)},onClick:x,onFocus:()=>{n(!0)},onMouseLeave:()=>{n(!1)},onMouseOver:()=>{n(!0)},style:{background:"transparent",border:"none",padding:0},children:[(0,s.jsx)("div",{...{0:{className:"x10l6tqk xwa60dl x1nrll8i x1m9rpcv x11lhmoz x1vjfegm"},4:{className:"x10l6tqk xwa60dl x1nrll8i x11lhmoz x1vjfegm x69msao"},2:{className:"x10l6tqk xwa60dl x1nrll8i x11lhmoz x1vjfegm x17g0hv4"},6:{className:"x10l6tqk xwa60dl x1nrll8i x11lhmoz x1vjfegm x17g0hv4"},1:{className:"x10l6tqk xwa60dl x1nrll8i x11lhmoz x1vjfegm xvkybfu"},5:{className:"x10l6tqk xwa60dl x1nrll8i x11lhmoz x1vjfegm xvkybfu"},3:{className:"x10l6tqk xwa60dl x1nrll8i x11lhmoz x1vjfegm xvkybfu"},7:{className:"x10l6tqk xwa60dl x1nrll8i x11lhmoz x1vjfegm xvkybfu"}}[!!(!i&&o)<<2|!!(i&&!e)<<1|!!(e&&!i&&!t)<<0],children:(0,s.jsx)(a,{})}),(0,s.jsx)("div",{...{0:{className:"xh8yej3 x5yr21d xjbqb8w x1s85apg x67bb7w xl56j7k x6s0dn4 x1wbribv"},2:{className:"xh8yej3 x5yr21d x67bb7w xl56j7k x6s0dn4 x1wbribv xu5wzci x78zum5"},1:{className:"xh8yej3 x5yr21d x67bb7w xl56j7k x6s0dn4 x1wbribv xcr9a89 x78zum5"},3:{className:"xh8yej3 x5yr21d x67bb7w xl56j7k x6s0dn4 x1wbribv xcr9a89 x78zum5"}}[!!(i&&!e)<<1|!!(i&&e)<<0]})]})}function $({codeChatRestriction:e}){let[t,n]=l.useState(!1);return(0,s.jsx)("div",{className:"x1n2onr6 xlup9mm x1kky2od x1sxf85j xb3r6kr x78zum5 xl56j7k x6s0dn4 x15uqio4 x1ns5uhy",children:(0,s.jsx)(U,{isHovered:t,setIsHovered:n,codeChatRestriction:e})})}function V({codeChatRestriction:e}){let t=R(),n=function(e){let t=g(e),n=(0,u.MG)({subscribeToUpdates_expensive:e}),s=(0,u.TZ)({subscribeToUpdates_expensive:e});return l.useMemo(()=>({x:t.x+n,y:t.y+s}),[t,n,s])}(t);return t?(0,s.jsx)(c.lM,{targetRect:{...n,y:n.y+4,width:0,height:0},offset:0,children:(0,s.jsx)(L.m,{role:"region","aria-label":(0,E.t)("ai_assistant.canvas.canvas_entrypoint_label"),children:(0,s.jsx)($,{codeChatRestriction:e})})}):null}var B=n(188220),H=n(276800);function W(){let e=function(){let{prompt:e}=(0,m.QW)(),t=(0,r.md)(m.zy);return l.useMemo(()=>0!==e.length&&0!==t.length,[e,t])}(),t=(0,d.xs)();return e&&0===t.length}var F=n(185568),K=n(126390),Q=n(143163),Y=n(314416),X=n(60791),Z=n(679111),J=n(980852),ee=n(997629),et=n(743072),en=n(641518),es=n(246144),el=n(777083),ei=n(955513),ex=n(833290),ea=n(750371),er=n(779787),eo=n(707396),eu=n(278491),ec=n(757381),ed=n(739109),em=n(415567),eh=n(605862),ep=n(491821),ef=n(338052),eg=n(983500),ey=n(147469),e_=n(404343);function eb(e,t){let n=(0,u._X)({subscribeToUpdates_expensive:!0}),[s,i]=l.useState(null),x=g(!0),a=l.useCallback(()=>{if(!x||!e.current)return;let t=new ey.Z({top:0,bottom:(0,eg.hG)(e_.u24),left:0,right:0}),s={x:20,y:-25},l={x:x.x+s.x,y:x.y+s.y},a=t.computePositionWithinInsetBounds(e.current,l,{x:0,y:0,width:n.width,height:n.height},x,s),r={x:(a.x??l.x)+n.x,y:(a.y??l.y)+n.y},o=r.x<x.x+n.x;e.current.style.left=`${r.x}px`,e.current.style.top=`${r.y}px`,i(o?"left":"right")},[n,i,x,e]);return l.useEffect(()=>{s&&t?.current?.focus()},[s,t]),l.useEffect(()=>{a()},[a]),l.useEffect(()=>{if(!e.current)return;let t=new ResizeObserver(()=>{a()});return t.observe(e.current),()=>{t.disconnect()}},[a,e]),{position:s}}var ev=n(420680),ek=n(620480),ej=n(780312),ew=n(883765),eT=n(550209),ez=n(205084),eN=n(178623),eC=n(431222);let eE="\xa0\xa0\xa0\xa0\xa0\xa0...\xa0\xa0\xa0\xa0\xa0\xa0",eI=[{short:eE,full:eE},{short:eE,full:eE},{short:eE,full:eE},{short:eE,full:eE}];function eq({jsx:e,onPromptSelect:t,visible:n,clientLifecycleId:x}){let[a,o]=l.useState(!1),{suggestions:u,isLoading:c,error:m}=function(e,t){let[n,s]=l.useState(eI),[x,a]=l.useState(!0),[o,u]=l.useState(null),c=(0,r.md)(d.UK),m=l.useMemo(()=>{let e=(0,ez.Gq)();return e?.getPrimaryLocale(!1)||"en"},[]);return l.useEffect(()=>{if(!e){a(!1);return}(async function(){a(!0),u(null);try{let n=(await eN.Ay.shared.assistantSuggestPrompts({jsx:e,userLocale:m,globalOptions:c.globalOptions},(0,eC.sF)({clientLifecycleId:t}))).prompts||[];for(let[e,l]of(s(n),n.entries())){let{short:s,full:i}=l;ew.az.trackDefinedEvent("ai_assistant.assistant_suggested_prompt_shown",{clientLifecycleId:t,shortPrompt:s,fullPrompt:i,rank:e+1,totalPromptsShown:n.length})}}catch(e){u(e),(0,eT.$D)(i.e.AI_ASSISTANT,e)}finally{a(!1)}})()},[e,t,m,c.globalOptions]),{suggestions:n,isLoading:x,error:o}}(e,x),h=l.useCallback(()=>{o(!a)},[a]),p=l.useCallback((e,t,n)=>{x&&ew.az.trackDefinedEvent("ai_assistant.assistant_suggested_prompt_chosen",{clientLifecycleId:x,shortPrompt:e.short,fullPrompt:e.full,rank:t+1,totalPromptsShown:u.length,source:n})},[x,u.length]),f=l.useCallback((e,n)=>{p(e,n,"pill"),t(e.full)},[t,p]),g=l.useCallback((e,n)=>{p(e,n,"dropdown"),t(e.full),o(!1)},[t,p]);return!n||0===e.length||m?null:(0,s.jsxs)("div",{className:"xh8yej3 x178xt8z x13fuv20 x16ufvko x1yjdb4r x1w0pl8v x1lmr5wh x1n2onr6",children:[(0,s.jsxs)("div",{className:"x78zum5 x1q0g3np x6s0dn4 xj9xw9b x1nfngrj xf7z5ut xz9dl7a x1n2onr6",style:{paddingBottom:a?8:12},children:[(0,s.jsx)("div",{className:"x78zum5 x1q0g3np x1nfngrj x1iyjqo2 xs83m0k x1t1x2f9 xw2csxc x1rohswg xfk6m8 xyfqnmn x1cpjm7i x1hmns74 x1y3wzot x19ie1a xv3fy29 xszcg87 x4cc4f3 xkk1bqk x18qc1j8",children:a?(0,s.jsx)("div",{className:"x3vvef7 x1iyjqo2 xs83m0k x1t1x2f9 xf67zum x17akokd x1qxcl5b xno9bf3",children:(0,E.t)("ai_assistant.canvas_prompt_suggestions.suggestions_label")}):(0,s.jsx)("div",{style:{display:"contents"},children:(0,s.jsx)(eL,{suggestions:u,onPillClick:f,shimmer:c})},"pills")}),(0,s.jsx)(ev.K,{onClick:h,"aria-label":a?(0,E.t)("ai_assistant.canvas_prompt_suggestions.collapse_suggestions"):(0,E.t)("ai_assistant.canvas_prompt_suggestions.expand_suggestions"),children:a?(0,s.jsx)(ek.r,{}):(0,s.jsx)(ej.R,{})},"real-arrow")]}),a&&!c&&(0,s.jsx)(eM,{suggestions:u,onItemClick:g})]})}function eL({suggestions:e,onPillClick:t,shimmer:n}){return(0,s.jsx)(s.Fragment,{children:e.map((e,l)=>(0,s.jsx)("button",{...{0:{className:"x17akokd x1qxcl5b xno9bf3 xjwf9q1 x1n0bwc9 x6c5l4p xf67zum xmkeg23 x1y0btm7 x7z60cl xixl9f9 xuxw1ft x2lah0s xv2f06h x1m5i512"},1:{className:"x17akokd x1qxcl5b xno9bf3 xjwf9q1 x1n0bwc9 x6c5l4p xf67zum xixl9f9 xuxw1ft x2lah0s x47corl x176lpz5 xmkeg23 x1y0btm7 x7z60cl xwui1ri xmg6eyc x4hg4is xa4qsjk"}}[!!n<<0],onClick:()=>t(e,l),"aria-label":n?(0,E.t)("ai_assistant.canvas_prompt_suggestions.loading_suggestion"):(0,E.t)("ai_assistant.canvas_prompt_suggestions.select_pill_prompt",{prompt:e.short}),children:!n&&e.short},l))})}function eM({suggestions:e,onItemClick:t}){return(0,s.jsx)("div",{className:"x1hkcv85 x1odjw0f xf7z5ut xexx8yu",children:e.map((e,n)=>(0,s.jsx)("button",{className:"x78zum5 x1cy8zhl xf7z5ut x19y5rnk x1akne3o x17akokd x1qxcl5b xno9bf3 x1nhvcw1 xdpxx8g xeaf4i8 xh8yej3 x65nank xt7dq6l xk4td0m xv2f06h xfn42iu xng3xce x1r7ld26",onClick:()=>t(e,n),type:"button","aria-label":(0,E.t)("ai_assistant.canvas_prompt_suggestions.select_dropdown_prompt",{prompt:e.full}),children:e.full},n))})}let eA=()=>223-((0,x.kc)().make_edits_debug?64:0),eS="ai-assistant-canvas-prompt-box-textarea",eO={kzqmXN:"x5lhr3w",kaIpWk:"x137qmg1",krdFHd:"",kfmiAY:"",kVL7Gh:"",kT0f0o:"",kIxVMA:"",ksF3WI:"",kqGeR4:"",kYm2EN:"",kGVxlE:"xbxdop8",kWkggS:"x4zv5z4",$$css:!0},eD={window:e=>[eO,{"--x-width":(e=>"number"==typeof e?e+"px":null!=e?e:void 0)(`${e?332:300}px`)}]},eR=/[\r\n\u2028\u2029]/,eP=(0,ef.n)((e,t)=>eG(e,t)),eG=(e,t)=>(0,x.kc)().assistant_on_canvas_prompt_suggestions&&t&&t.length>0?(async()=>{let n=et.J.startUserFlow({name:"ai_assistant_serialize_jsx_for_prompt_suggestions",team:i.e.AI_GENERATION});try{let s=(0,J.getActiveTSSceneGraph)().getCurrentPage();if(!s)return"";let l=(0,X.DP)(e,{maxSerializeNodes:1e3,maxSerializeTimeMs:100,maxExtraContextNodes:0,focusNodeIds:t,includeIDs:!1,ignoreFetchingComponentData:!0,materializeInvisibleChildren:!1,jsxTrackingContext:(0,x.kc)().jsx_tracking?(0,X.DN)("serialize_jsx_for_prompt_suggestions",n):void 0});return(await (0,ee.oy)(s,l)).jsxStr}catch(e){return(0,es.xi)("assistant-suggest-prompts","Failed to serialize JSX for prompt suggestions:",{error:e}),""}finally{n.end()}})():Promise.resolve("");function eU({recordingKey:e,value:t,onAction:n,onChange:i,onClose:a,wiggleCount:u,disabled:c,clientLifecycleId:h}){let p=(0,l.useRef)(null),f=(0,l.useRef)(null),g=function(){let e=(0,em.Tv)(),[t,n]=l.useState(""),s=(0,r.md)(d.UK);return l.useEffect(()=>{(async()=>{n(await eP(s.globalOptions,e??[])??"")})()},[e,s.globalOptions]),t}(),{position:y}=eb(p,f),_=(0,m.V8)(),b=(0,ed.IQ)(),{FirstPartyExplanationPointer:v}=(0,eh.i7)(!!y,eS),[k,j]=l.useState(!1),w=l.useCallback(({clonedTextArea:e,singleLineHeight:t,value:n,getCalculatedScrollHeight:s})=>{let l,i="large";return eR.test(n)||(e.style.width=`${eA()}px`,l=Math.max(s(),t??0),i=0===n.length||t===l?"small":"large"),(void 0===l||"large"===i)&&(e.style.width="284px",l=s()),l=Math.min(l,200),"small"===i?j(!1):j(!0),l},[j]),T=l.useCallback(()=>{f.current?.focus()},[f]),z=l.useCallback(e=>{i(e),f.current?.focus()},[i]);return(0,s.jsxs)(ep.Q,{dataFullscreenIntercept:!1,children:[(0,s.jsx)(ea.p,{forceNoScroll:!0,children:(0,s.jsxs)("div",{ref:p,style:{position:"absolute",visibility:y?"visible":"hidden"},className:eu.Dm,children:[_&&(0,s.jsx)(ep.Q,{dataFullscreenIntercept:!1,children:(0,s.jsx)("div",{className:"xixxii4 x1ey2m1c x78zum5 xl56j7k x6s0dn4 xh8yej3 x1q2oy4v xpezlj7",style:b,children:(0,s.jsx)(Z.bL,{timeout:3e3,variant:"danger",onClose:()=>(0,m._k)(),children:(0,s.jsx)(Z.QB,{children:"Please wait for the current prompt to complete before submitting another."})})})}),(0,s.jsx)(eo.c,{wiggleCount:u,onWiggle:T,children:(0,s.jsxs)("div",{...o.Ay.props(eD.window((0,x.kc)().ai_assistant_ds_library_selector)),"data-testid":"ai-assistant-canvas-prompt-box",children:[(0,s.jsxs)("div",{className:"xu97haq x78zum5 x1q0g3np x167g77z xe8ttls x6s0dn4","data-onboarding-key":eS,children:[(0,s.jsx)(ec.v,{bypassModifiers:!0,calculateAdjustedHeightOnResize:w,dataTestId:"ai-assistant-canvas-prompt-box-textarea",disableBorderStyles:!1,focusOnMount:!1,innerRef:f,maxHeight:200,minHeight:24,onChange:e=>{i(e.currentTarget.value)},onEscape:a,placeholder:(0,E.t)("ai_assistant.canvas_prompt_box.placeholder"),preventSubmitOnBlur:!0,recordingKey:e,rows:1,submit:n,value:t,className:"x1tsovho x1uhom3u x1g2ur6q x1qvfvcx"}),!k&&(0,s.jsx)(e$,{onAction:n,disabled:c,recordingKey:e})]}),k&&(0,s.jsx)("div",{className:"x78zum5 x1q0g3np x13a6bvl x167g77z xe8ttls x6s0dn4 x178xt8z x13fuv20 x16ufvko",children:(0,s.jsx)(e$,{onAction:n,disabled:c,recordingKey:e})}),(0,s.jsx)(eq,{visible:!!(y&&(0,x.kc)().assistant_on_canvas_prompt_suggestions&&!k),jsx:g,onPromptSelect:z,clientLifecycleId:h})]})})]})}),(0,s.jsx)(v,{})]})}function e$({onAction:e,disabled:t,recordingKey:n}){let[i,a]=l.useState(!1);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(ex.Y,{}),(0,x.kc)().ai_assistant_ds_library_selector&&(0,s.jsx)(ei.V,{isOpen:i,onOpenChange:a}),(0,x.kc)().make_edits_debug&&(0,s.jsx)(el.N,{}),(0,s.jsx)(er.CommentsSubmitButton,{disabled:t,onClick:e,recordingKey:en.Pt(n,"generate")})]})}var eV=n(65545),eB=n(790009),eH=n(352630),eW=n(260745),eF=n(217862),eK=n(249445),eQ=n(211862),eY=n(944350),eX=n(904017),eZ=n(382137),eJ=n(295253),e0=n(434956),e1=n(307858),e7=n(373224);function e6({codeChatRestriction:e}){let t=function(e){switch(e){case N.ee.METER_LIMIT:return{text:(0,E.t)("ai_assistant.monetization.credit_limit_reached"),button:null};case N.ee.METER_LIMIT_UPGRADE_PLAN:return{text:(0,E.t)("ai_assistant.monetization.credit_limit_reached"),button:(0,s.jsx)(e9,{})};case N.ee.METER_LIMIT_UPGRADE_SEAT:return{text:(0,E.t)("ai_assistant.monetization.credit_limit_reached"),button:(0,s.jsx)(e8,{})};case N.ee.METER_LIMIT_UPGRADE_SEAT_PENDING:return{text:(0,E.t)("ai_assistant.monetization.credit_limit_reached"),button:(0,s.jsx)(e3,{})};case N.ee.PLAN_AI_DISABLED:case N.ee.DISABLE_CATCH_ALL:case N.ee.DISABLE_WHILE_LOADING:case N.ee.DISABLE_WITHOUT_TOAST:case N.ee.UNAVAILABLE_ON_EDU_PLANS:case N.ee.UNAVAILABLE_FOR_EDU_USER:case N.ee.MAKE_UNAVAILABLE_ON_PLAN:case N.ee.MAKE_UNAVAILABLE_ON_SEAT:case N.ee.INTERIM_VIEW_ONLY_COMING_SOON:case N.ee.VIEW_ONLY_ASK_TO_EDIT:default:return null}}(e),n=(0,l.useRef)(null),i=(0,l.useRef)(null),{position:x}=eb(n,i);if(!t)return null;let{text:a,button:r}=t;return(0,s.jsx)(ep.Q,{dataFullscreenIntercept:!1,children:(0,s.jsx)(ea.p,{forceNoScroll:!0,children:(0,s.jsxs)("div",{ref:n,style:{position:"absolute",width:"max-content",visibility:x?"visible":"hidden",transform:"translateY(calc(-50% + 20px))"},className:eu.Dm,children:[(0,s.jsx)("div",{...{0:{className:"x10l6tqk xnalus7 xqtp20y x1kr8tdy x13fuv20 x1v8p93f xqm4iv x1q0q8m5 x16stqrj xwa60dl x1cb1t30 x19oc2a9 x32b0ac x18lbjf4 xdjccd9"},1:{className:"x10l6tqk xnalus7 xqtp20y x1kr8tdy x13fuv20 x1v8p93f xqm4iv x1q0q8m5 x16stqrj xwa60dl x1cb1t30 x1dca7zs x19ypqd9 xynkfbc xgzdjil"}}[!("left"!==x)<<0]}),(0,s.jsx)("div",{ref:i,className:"x1n2onr6 x78zum5 x19y5rnk xl9axj6 x1p3pnes x1ypdohk",children:(0,s.jsxs)("div",{className:"x78zum5 x1q0g3np x1mh6rdz x1mzt3pk xl56j7k x6s0dn4 xg2d0mh",children:[(0,s.jsx)("p",{className:"xrlp15q x1nmd3yn xm735u9 xkbmbem x3wk4up x1kax57l x1iyjqo2 xs83m0k x1t1x2f9 xeuugli x1mzt3pk x1ti5iz4",children:a}),r]})})]})})})}function e9(){let e=(0,eX.No)(),t=e.unwrapOr(null)?.tier||null,n=(0,eQ.q5)(),l=n?.teamId??"",i=(0,e1.$Y)(l),x=eJ.b.ASSISTANT_METER_LIMIT_TOAST,a=eK.C6.UNSPECIFIED,r=(0,eF.y)(l,x,a);return t===eV.Agb.STARTER&&i?(0,s.jsx)(e2,{onClick:r,children:(0,E.tx)("figmake.meter_limit.view_plans")}):null}function e8(){let{handleUpgrade:e,getIsUpgradeHandlerLoading:t}=(0,eZ.wH)({entryPoint:eW.tc.CODE_CHAT_LIMIT,folderId:null}),n=(0,eQ.q5)();return t()?(0,s.jsx)(e2,{disabled:!0,children:(0,E.tx)("figmake.meter_limit.request_upgrade")}):(0,s.jsx)(e2,{onClick:e({licenseType:eY.G_.DESIGN,editorType:n?.editorType??null,upgradeReason:e7.i.CODE_CHAT_LIMIT,entryPoint:eW.tc.CODE_CHAT_LIMIT}),children:(0,E.tx)("figmake.meter_limit.request_upgrade")})}function e3(){let{getPendingRequest:e}=(0,eZ.wH)({entryPoint:eW.tc.CODE_CHAT_LIMIT,folderId:null}),t=e(eY.G_.DESIGN);return t?(0,s.jsx)(e0.K,{pendingUpgradeRequest:t,ButtonComponent:e2}):(0,s.jsx)(e2,{disabled:!0,children:(0,E.tx)("fullscreen.toolbar.request.request_sent")})}function e2({children:e,onClick:t,disabled:n}){return(0,s.jsx)(eB.J,{mode:"dark",children:(0,s.jsx)(eH.e6,{onClick:t,disabled:n,...{0:{className:"xrlp15q x1nmd3yn xm735u9 xkbmbem x3wk4up x1kax57l x19y5rnk xmkeg23 x1y0btm7 x1co876m xx99whi xjwf9q1"},1:{className:"xrlp15q x1nmd3yn xm735u9 xkbmbem x3wk4up x19y5rnk xmkeg23 x1y0btm7 x1co876m xx99whi xjwf9q1 xge78cn"}}[!!n<<0],children:e})})}function e4({codeChatRestriction:e,onSubmit:t}){let{isOpen:n,prompt:i}=(0,m.QW)(),x=W(),a=(0,m.I)(),{submitPrompt:o,clientLifecycleId:u}=function({onSubmit:e}){let{showChat:t}=(0,Y.U)(),{prompt:n}=(0,m.QW)(),s=(0,r.md)(m.zy),i=(0,d.xs)(),x=function(){let e=(0,l.useRef)("");return e.current||(e.current=(0,B.g)()),e.current}(),a=W(),o=(0,r.md)(d.pF),{maybeAddTopKStylesToInternalCanvas:u}=(0,K.S9)({enabled:o.options.enableStyles??!1,k:o.options.subscribedStyleCountPerType}),{maybeAddTopKVariablesToInternalCanvas:c}=(0,Q.p)({enabled:o.options.enableVariables??!1,k:o.options.subscribedVariableCountPerType});return{submitPrompt:l.useCallback(async()=>{if(!a){i.length>0&&(0,m.h2)(),(0,m.GB)();return}(0,d.VB)(s),await u(),await c(),t(),e?.(),(0,F.i)({userInput:{plainText:n,selectedNodeIds:s},clientLifecycleId:x}),(0,m.Sz)()},[t,a,n,s,i,x,u,c,e]),clientLifecycleId:x}}({onSubmit:t});return n?e?(0,s.jsx)(e6,{codeChatRestriction:e}):(0,s.jsx)(eU,{clientLifecycleId:u,disabled:!x,duplicateAndRun:!1,onAction:o,onChange:m.l,onClose:m.Sz,recordingKey:"ai_assistant_prompt_box_view",setDuplicateAndRun:H.lQ,value:i,wiggleCount:a}):null}let e5=l.lazy(()=>n.e(1649).then(n.bind(n,431649)));function te({onSubmit:e}){return(0,s.jsx)(a.tH,{boundaryKey:"AiAssistantCanvasView",fallback:a.H4.NONE_I_KNOW_WHAT_IM_DOING,sentryTags:{area:i.e.AI_ASSISTANT},children:(0,s.jsx)(z.T.Provider,{value:{recordingKey:"aiAssistantCanvasView"},children:(0,s.jsx)(l.Suspense,{fallback:null,children:(0,s.jsx)(tt,{onSubmit:e})})})})}function tt({onSubmit:e}){let t=R(),{isOpen:n}=(0,m.QW)(),i=(0,N.Tk)(),a=i?.restriction;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(j,{codeChatRestriction:a}),(0,x.kc)().assistant_cursor_ui&&(0,s.jsx)(l.Suspense,{fallback:null,children:(0,s.jsx)(e5,{})}),t&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(V,{codeChatRestriction:a}),n&&(0,s.jsx)(e4,{codeChatRestriction:a,onSubmit:e})]})]})}},998873:(e,t,n)=>{n.d(t,{K:()=>g});var s=n(104076),l=n(795033),i=n(511570),x=n.n(i),a=n(983500),r=n(451837),o=n(278491),u=n(819851),c=n(375627),d=n(968169),m=n(331497),h=n(176203),p=n(948311),f=n(404343);function g(e){let t;let n=(0,r.lz)(),i=(0,d.qw)(),g=(0,u.E3)(),{isPropertiesPanelCollapsed:y}=(0,c.iT)(),_=(0,l.md)(p.Ds),b=(0,m.J2)((0,d.UK)().renderRulers);return t={right:`calc(${g===h.nT.DevHandoff?n:i}px + ${(0,a.jz)(f.M$q)}px)`,top:`${(0,a.jz)(f.M$q)}px`},y&&(t={...t,right:`calc(${_}px + ${(0,a.jz)(f.M$q)}px)`}),b&&(t={...t,top:`calc(${(0,a.jz)(f.M$q)}px + ${(0,a.jz)(f.y9S)}px)`}),(0,s.jsx)("div",{style:t,className:x()("nav_container--flexContainer--3Us-2 nav_container--baseContainer--QideS overflow--overflowYAuto--nfK38 overflow--momentumScroll--qtsu7",o.Dm,e.className),children:e.children})}},73632:(e,t,n)=>{n.d(t,{D:()=>a,G:()=>x});var s=n(754446),l=n(510314),i=n(64004);function x(){let e=(0,l.GV)();return(0,i.M0)(e)}function a(e){let t=(0,l.GV)(),{stateGroupSelectionInfo:n}=(0,s.fC)("stateGroupSelectionInfo");return(0,i.tV)(t,n)&&1===e}},573653:(e,t,n)=>{n.d(t,{Y:()=>r});var s=n(104076),l=n(192075),i=n(170907),x=n(737139),a=n(973228);function r({onExpand:e}){return(0,s.jsx)(x.Zk,{"data-testid":"toggle-simplified-panels",className:a.aW,children:(0,s.jsx)(i.z,{onClick:e,recordingKey:"toggleSimplifiedPanels",children:(0,l.tx)("design_systems.component_properties.show_more_properties")})})}}}]);

//# debugId=3c66f524-de11-5735-8ace-b3db165c3e46

//# sourceMappingURL=https://admin.figma.com/admin/webpack-artifacts/f08fbb296601885352b40e88fcf6a647a3a208ce/6770-881ce681829b82bd.min.js.map