"use strict";
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="42e86100-9f7e-5360-afca-cb5aff26d937")}catch(e){}}();
(globalThis.webpackChunk_figma_web_bundler=globalThis.webpackChunk_figma_web_bundler||[]).push([[5995],{610757:(e,n,t)=>{t.d(n,{T:()=>l});var o=t(104076),s=t(826220),r=t(268389),i=t(764843),a=t(293422),c=t(192075);function l({onClose:e,defaultPosition:n,setShowRulesPopout:t,draftUserRules:l,setDraftUserRules:d,savedUserRules:_,onSave:p}){let m=_!==l;return(0,o.jsx)(s._L,{onClose:({source:n})=>{"outside"===n&&m||e()},defaultPosition:n,defaultWidth:358,defaultHeight:400,constraints:{minHeight:300},children:(0,o.jsxs)(r.vo,{children:[(0,o.jsx)(r.Y9,{children:(0,o.jsx)(r.hE,{children:(0,c.t)("dev_handoff.component_browser.mcp.rules_header")})}),(0,o.jsxs)(r.nB,{className:"component_browser_edit_rules_window--rulesContainer--i7cC-",children:[(0,o.jsx)("div",{className:"component_browser_edit_rules_window--rulesHelp--g0qvX",children:(0,c.t)("dev_handoff.component_browser.mcp.help.description")}),(0,o.jsx)("div",{className:"component_browser_edit_rules_window--rulesTextarea--R6sOe",children:(0,o.jsx)(i.T,{id:"user-rules",value:l,onChange:d,size:"lg","aria-label":(0,c.t)("dev_handoff.component_browser.mcp.rules_aria_label"),placeholder:(0,c.t)("dev_handoff.component_browser.mcp.rules_placeholder")})})]}),(0,o.jsx)(r.wi,{children:(0,o.jsxs)(r.jk,{children:[(0,o.jsx)(a.$n,{onClick:()=>t(!1),variant:"secondary",children:(0,c.t)("dev_handoff.component_browser.mcp.cancel_rules")}),(0,o.jsx)(a.$n,{onClick:()=>p(l),variant:"primary",disabled:!m,children:(0,c.t)("dev_handoff.component_browser.mcp.save_rules")})]})})]})})}},62847:(e,n,t)=>{t.d(n,{E:()=>i});var o=t(716976),s=t(883765),r=t(37495);function i(e,n,t){let[i,a]=(0,o.useState)(!1),c=(0,o.useMemo)(()=>(0,r.y)(e?.component?.code_connect_info?.v1?.figmadoc??""),[e?.component?.code_connect_info?.v1?.figmadoc]),l=c?.user_rules??"",[d,_]=(0,o.useState)(l),p=(0,o.useRef)({x:0,y:0});return(0,o.useEffect)(()=>{_(l)},[l]),{showRulesPopout:i,setShowRulesPopout:a,savedUserRules:l,draftUserRules:d,setDraftUserRules:_,defaultPosition:p.current,handleOpenRulesWindow:e=>{(0,s.sx)("component_browser.component_details_edit_user_rules_clicked",{componentBrowserEntrypoint:n,nodeId:t}),a(!0),p.current={x:e.clientX+100,y:e.clientY-50}}}}},300093:(e,n,t)=>{t.d(n,{D:()=>i});var o=t(812714),s=t(795033);let r=(0,s.E3)("component_browser_show_suggestions_debug",!0);function i(){let e=(0,o.kc)().dt_component_browser_suggestions_debug,[n,t]=(0,s.fp)(r);return{isSuggestionsDebugUngated:e,showSuggestionsDebug:e&&n,setShowSuggestionsDebug:t}}},359055:(e,n,t)=>{t.d(n,{Q:()=>_,U:()=>p});var o=t(716976),s=t(812714),r=t(833805),i=t(192075),a=t(961457),c=t(37495),l=t(105606),d=t(36481);function _({data:e,repositoryId:n}){let t=p({data:e,repositoryId:n}),[s]=(0,r.IT)((0,a.Fq)({libraryKey:e.component.library_key,repositoryId:t?.repositoryId??"",filePath:t?.filePath??""}),{enabled:!!t?.repositoryId&&!!t?.filePath}),c=s.data?.content,l=(0,o.useMemo)(()=>{let n=c?.split("\n")??[],t=(0,d.$e)(e.selectedFile?.title??"");return{lines:n.map((e,n)=>{let t=Math.floor((e.match(/^(\s*)/)?.[1]||"").length/2);return{code:e,lineNumber:n+1,indent:t}}),language:t}},[c,e.selectedFile?.title]),_=s.errors&&!Array.isArray(s.errors)?s.errors:void 0,m=!e.selectedFile?.metadata?.path;return{content:c,githubSourceFileContents:s,codeLines:l,sourceFetchErrorReason:(0,o.useMemo)(()=>{if(m)return(0,i.t)("dev_handoff.component_browser.source_error.no_filepath");if(!t?.repositoryId)return(0,i.t)("dev_handoff.component_browser.source_error.no_repository");if(_?.status===403)return(0,i.t)("dev_handoff.component_browser.source_error.missing_permission");switch(_?.message){case"REPOSITORY_NOT_AVAILABLE":return(0,i.t)("dev_handoff.component_browser.source_error.repository_not_available");case"REPOSITORY_NOT_FOUND":return(0,i.t)("dev_handoff.component_browser.source_error.repository_not_found");case"REPOSITORY_API_ERROR":return(0,i.t)("dev_handoff.component_browser.source_error.repository_api_error");case"FILE_NOT_FOUND":return(0,i.t)("dev_handoff.component_browser.source_error.file_not_found");default:return(0,i.t)("dev_handoff.component_browser.source_error.generic_error")}},[_,m,t?.repositoryId]),language:(0,d.$e)(e.selectedFile?.metadata?.path??"")}}function p({data:e,repositoryId:n}){let t=e.component.code_connect_info.v1.figmadoc,r=!!(0,s.kc)().dt_component_browser_mcp_debug,a=(0,l.K)(e.component.library_key,r),d=e=>{let n=e.match(/github\.com\/([^\/]+\/[^\/]+)\/(blob|tree)\/[^\/]+\/(.+)/);return n?n[3]??void 0:e},_=e.selectedFile?.metadata?.path;return(0,o.useMemo)(()=>{try{let o=(0,c.y)(t),s=r&&o?.source?a(o.source):n,i=o?.repository?.id&&o?.repository?.id.length>0?o?.repository?.id:s;if(i)return{name:e.selectedComponent?.title,repositoryId:i,filePath:_?d(_):void 0}}catch(e){return{errorMessage:(0,i.t)("dev_handoff.component_browser.error_retrieving_component_path_and_repository"),error:e}}},[t,r,a,n,e.selectedComponent?.title,_])}},921093:(e,n,t)=>{t.d(n,{o:()=>eN,W:()=>eC});var o=t(104076),s=t(716976),r=t(237420),i=t(475477),a=t(420680),c=t(286138),l=t(419822),d=t(821655),_=t(369729),p=t(293422),m=t(220199),u=t(775301),h=t(615781),g=t(859120),f=t(790009),b=t(511570),v=t.n(b),x=t(883765),w=t(816565),j=t(999473),y=t(192075),C=t(610757),N=t(62847),k=t(359055),S=t(332575),I=t(370020),T=t(349951),E=t(435219);function P({savedUserRules:e,onOpenRulesWindow:n}){return(0,o.jsx)("div",{className:"component_browser_edit_rules_button--rulesContainer--ZlPiL",children:(0,o.jsx)(p.$n,{variant:"secondary",onClick:n,children:e?(0,y.t)("dev_handoff.component_browser.mcp.edit_rules"):(0,y.t)("dev_handoff.component_browser.mcp.add_rules")})})}var D=t(260425),R=t(812714),O=t(961457),M=t(610856),F=t(37495),K=t(36481),A=t(74620),L=t(657878),B=t(893393),H=t(564914),W=t(98826),G=t(542878),U=t(3185),$=t(724991);let Y="component_browser_mcp_preview--mcpPreviewContainer--Qxnpd";function V({data:e,repositoryId:n,playgroundData:t,onOpenRulesWindow:r,savedUserRules:i}){let a=(0,s.useMemo)(()=>(0,F.y)(e.component.code_connect_info.v1.figmadoc),[e.component.code_connect_info.v1.figmadoc]);if(e.component?.code_connect_info?.v1?.type==="figmadoc"&&a){let e=t?.nodeData?.playgroundGUID;return(0,o.jsx)("div",{className:Y,children:e&&(0,o.jsx)(U.Qd,{playgroundGUID:e,showCodeOnly:!0})})}return(0,o.jsxs)("div",{className:Y,children:[t?(0,o.jsx)(q,{data:e,repositoryId:n,savedUserRules:i,playgroundData:t}):null,(0,o.jsx)(P,{savedUserRules:i,onOpenRulesWindow:r})]})}function q({data:e,repositoryId:n,savedUserRules:t,playgroundData:r}){let{sourceCode:i,language:a,queryStatus:c,errorReason:p}=function({snippetType:e="instance_specific",libraryKey:n,repositoryId:t,userRules:o,playgroundData:r,data:i}){let a=(0,k.U)({data:i,repositoryId:t}),c=function(){let e=(0,A.T3)();return(0,s.useCallback)(n=>{let t=e.get(n);if(!t)throw Error(`Node with id ${n} not found in playground scenegraph`);return(0,G.T)(t,{renderOptions:{preset:"mcp",usePlaygroundScene:!0},productType:"mcp",designToReactOptions:{variantSerializationMode:"used",disableExtractFrames:!0,svgHandling:"pathImport",diffBasedVariants:(0,R.kc)().d2r_diff_based_variants??!1}})},[e])}(),l=(0,A.T3)(),d=(0,s.useMemo)(()=>{if(!(0,R.kc)().dt_component_browser_snippet_nested_components)return[];let e=r.nodeData?.playgroundGUID;return e?(0,F.R)(e,l):[]},[r.nodeData?.playgroundGUID]),[_,p]=(0,s.useState)(""),m=a?.repositoryId||"",u=a?.filePath||"",h=(0,s.useMemo)(()=>{let e=r.nodeData;if(!e)return{};let{playgroundGUID:n,componentProps:t}=e;return n&&t?(0,M.z)(t,n,l):{}},[r]),g=i.component.code_connect_info?.v1?.label,f={snippetType:e,libraryKey:n,repositoryId:m,componentDefinitionPaths:u?[u]:[],...(0,R.kc)().dt_component_browser_snippet_nested_components&&{nestedComponents:d},label:g??void 0,userRules:o,instancePropertyValues:h,d2rCode:_,codeComponentName:i.selectedComponent?.title},[b]=(0,B.IT)((0,O.BR)(f),{enabled:!!f.repositoryId&&f.componentDefinitionPaths.length>0&&!!f.d2rCode}),v=(0,L._6)().componentKey,x=(0,W.K)(),w=x?.type===H.PW.COMPONENT||x?.type===H.PW.STATE_GROUP,j=r.nodeData?.playgroundGUID,[C,N]=(0,s.useState)(!1);s.useEffect(()=>{j&&(v||w)&&(N(!1),c(j).then(e=>{if(!e)return;let{files:n}=e;0===n.length&&(D.vF.error("No files in generated D2R for MCP preview"),N(!0)),p(n[0].contents)}).catch(e=>{D.vF.error("Error generating D2R for MCP preview",e),N(!0)}))},[c,j,v,w]);let S=function(e){let n=K.hq.has(e)?e:"plaintext";return"typescript"===n?"tsx":n}(b.data?.language),I=b.errors&&!Array.isArray(b.errors)?b.errors:void 0,T=(0,s.useMemo)(()=>{if(!f.repositoryId)return(0,y.t)("dev_handoff.component_browser.mcp_preview_error.no_repository");if(I?.status===403)return(0,y.t)("dev_handoff.component_browser.mcp_preview_error.missing_permission");switch(I?.message){case"repository_not_available":return(0,y.t)("dev_handoff.component_browser.mcp_preview_error.repository_not_available");case"unable_to_access_repository":return(0,y.t)("dev_handoff.component_browser.mcp_preview_error.unable_to_access_repository");case"repository_not_found":return(0,y.t)("dev_handoff.component_browser.mcp_preview_error.repository_not_found");case"files_not_found":return(0,y.t)("dev_handoff.component_browser.mcp_preview_error.file_not_found");case"repository_api_error":return(0,y.t)("dev_handoff.component_browser.mcp_preview_error.repository_api_error");case"snippet_generation_failed":return(0,y.t)("dev_handoff.component_browser.mcp_preview_error.generic_error")}return C||I?.message?(0,y.t)("dev_handoff.component_browser.mcp_preview_error.generic_error"):null},[f.repositoryId,I?.message,I?.status,C]);return{sourceCode:b.data?.source_code||"",language:S,queryStatus:b.status,errorReason:T}}({libraryKey:e.component.library_key,repositoryId:n,userRules:t,playgroundData:r,data:e}),m=(0,s.useRef)({sourceCode:"",language:""});i&&a&&(m.current={sourceCode:i,language:a});let u=i||m.current.sourceCode,h=a||m.current.language,g=(0,s.useMemo)(()=>({lines:(0,$.$)(u),language:h,name:""}),[u,h]);return p&&"loading"!==c?(0,o.jsx)("div",{children:(0,o.jsx)(d.Cs,{variant:"danger",children:(0,o.jsx)(_.Q,{children:p})})}):"loading"!==c&&"disabled"!==c||m.current.sourceCode?(0,o.jsx)(E.U,{includeMargin:!1,hideHeader:!0,section:g,code:[g],copyAllActionEnabled:!0,loadingBannerContent:"loading"===c?(0,y.t)("dev_handoff.component_browser.mcp.help.generating_preview"):null}):(0,o.jsx)("div",{className:"component_browser_mcp_preview--spinnerWrapper--F82lJ",children:(0,o.jsx)(l.k,{size:"lg"})})}var z=t(383424),J=t(320750),X=t(816689),Q=t(266808),Z=t(980852),ee=t(744374),en=t(121974),et=t(402776),eo=t(455788),es=t(349311),er=t(739710),ei=t(581993);let ea="component_browser_playground_panel--playgroundPanel--Wv392",ec="component_browser_playground_panel--imageContainer--wy81-",el="component_browser_playground_panel--playgroundToolbar--UxNeL",ed="component_browser_playground_panel--imageWrapper--nY5LR",e_="component_browser_playground_panel--playgroundContainer--Y4nAE",ep=s.memo(({playgroundData:e,entrypoint:n,nodeId:t})=>{let r=e?.nodeData?.playgroundGUID,[i,l]=s.useState(!1),[d,_]=s.useState(""),h=(0,ee.wS)(),g="loaded"===h.status&&"temp-scene"===h.result.dataLocation?h.result:void 0,b=s.useMemo(()=>new Z.TSSceneGraph(g?Q.juq.DETACHED_COMPONENTS:Q.juq.PLAYGROUND),[g]),j=s.useMemo(()=>{if(!e)return"";if("loaded"===h.status)return h.result.isVariant?h.result.dataStateGroupId??h.result.dataComponentId:h.result.dataComponentId;let n=e.nodeData?.playgroundGUID;return n?((0,er.Yi)([n],b)||(0,er.k4)([n],b))??"":""},[e,b,h]),{theme:C,invertTheme:N}=(0,en.I)(r??j),[k,S]=s.useState(!1),I=s.useCallback(e=>{S(e.currentTarget.scrollTop>0)},[]),T=s.useCallback(()=>{(0,x.sx)("component_browser.component_details_change_background_clicked",{componentBrowserEntrypoint:n,nodeId:t}),N();let e="light"===C?"dark":"light",o=(0,y.t)("light"===e?"dev_handoff.component_browser.theme_changed_to_light":"dev_handoff.component_browser.theme_changed_to_dark");_(d.endsWith(" ")?o:o+" ")},[n,t,N,C,d," "]),E=s.useRef(e?.nodeData?.componentProps),P=s.useCallback(()=>{let o=e?.nodeData?.componentProps,s=E.current;s!==o&&(s&&o&&s!==o&&(0,x.sx)("component_browser.component_details_playground_property_changed",{componentBrowserEntrypoint:n,nodeId:t}),E.current=o)},[n,t,e?.nodeData?.componentProps]);if(!e||!e.nodeData||!e.thumbnailData)return(0,o.jsx)(em,{theme:C});let{thumbnailData:D,nodeData:{playgroundGUID:R,componentProps:O,modeData:M}}=e,F=b.get(R);return(0,o.jsxs)("div",{className:ea,children:[(0,o.jsxs)("div",{className:e_,children:[(0,o.jsx)(f.J,{mode:C,children:(0,o.jsxs)("div",{className:v()("component_browser_playground_panel--playgroundPreviewContainer--PtDp9",{"component_browser_playground_panel--withBorderBottom--N9r-a":i}),children:[(0,o.jsx)("div",{className:el,children:(0,o.jsx)("span",{children:(0,y.t)("dev_handoff.component_browser.design_component")})}),(0,o.jsx)("div",{className:ec,children:(0,o.jsx)("div",{className:ed,children:(0,o.jsx)(w.oW,{className:"component_browser_playground_panel--componentImage--e-XpW",src:D.src,alt:(0,y.t)("design_systems.playground.thumbnail_alt"),"data-testid":"playground-thumbnail"})})}),!i&&(0,o.jsxs)("div",{className:v()(el,"component_browser_playground_panel--bottomPlaygroundToolbar--I-2uu"),children:[(0,o.jsx)(p.$n,{onClick:()=>{(0,x.sx)("component_browser.component_details_playground_opened",{componentBrowserEntrypoint:n,nodeId:t}),l(!0)},variant:"secondary",children:(0,y.t)("dev_handoff.component_browser.mcp.change_properties")}),(0,o.jsx)(a.K,{onClick:T,"aria-label":(0,y.t)("dev_handoff.component_browser.mcp.change_background"),children:"light"===C?(0,o.jsx)(m.c,{}):(0,o.jsx)(u.G,{})})]})]})}),i&&(0,o.jsxs)("div",{className:"component_browser_playground_panel--propsContainer--gBrqI",children:[(0,o.jsxs)("div",{className:v()("component_browser_playground_panel--propsContainerHeader--4CIgw",{"component_browser_playground_panel--propsContainerHeaderOverlay--QsViH":k}),children:[(0,o.jsx)("h3",{className:"component_browser_playground_panel--propsContainerHeaderText--Plx4a ellipsis--ellipsis--Tjyfa",children:(0,y.t)("dev_handoff.component_browser.component_properties")}),(0,o.jsxs)("div",{className:"component_browser_playground_panel--propsContainerHeaderButtons--r0bIm",children:[(0,o.jsx)(a.K,{onClick:()=>e?.resetNodedata(),"aria-label":(0,y.t)("design_systems.playground.reset_properties"),disabled:!e.hasChangesToReset,recordingKey:"resetPlaygroundProps",htmlAttributes:{"data-tooltip":(0,y.t)("design_systems.playground.reset_properties"),"data-tooltip-type":es.Ib.TEXT},children:(0,o.jsx)(J.m,{})}),(0,o.jsx)(a.K,{onClick:()=>l(!1),"aria-label":(0,y.t)("dev_handoff.component_browser.mcp.hide_component_props"),children:(0,o.jsx)(X.f,{})})]})]}),(0,o.jsx)("div",{className:"component_browser_playground_panel--scrollablePropsContainerOuter--PrGHn",children:(0,o.jsx)(z.P,{fill:!0,scroll:"y",onScroll:I,children:(0,o.jsx)("div",{className:"component_browser_playground_panel--scrollablePropsContainer--DUkrT",children:(0,o.jsxs)(A.q0.Provider,{value:b,children:[(0,o.jsx)("div",{className:"component_browser_playground_panel--propsSectionContainer--HTxVh",children:(0,o.jsx)(eo.x,{containerWidth:er.O2.UNBOUNDED,componentProps:O,playgroundGUID:R,productComponentGUID:j,sceneGraph:b,viewOnlyMode:F?.isState?ei.BK.VARIANT_PROPS:void 0,recordingKey:"playgroundPicker",onTypedPropChange:P,onSelectedPropertyValueHistoryChange:P})}),(0,o.jsx)("div",{className:"component_browser_playground_panel--modesSectionContainer--J9f-b",children:(0,o.jsx)(et.b,{modes:M||{}})})]})})})})]})]}),(0,o.jsx)(c.E,{children:(0,o.jsx)("span",{"aria-live":"polite","aria-atomic":"true",children:d})})]})});function em({theme:e}){return(0,o.jsx)("div",{className:ea,children:(0,o.jsx)("div",{className:e_,children:(0,o.jsx)(f.J,{mode:e,children:(0,o.jsxs)("div",{className:ec,children:[(0,o.jsx)("div",{className:el,children:(0,o.jsx)("span",{children:(0,y.t)("dev_handoff.component_browser.design_component")})}),(0,o.jsx)("div",{className:ed,children:(0,o.jsx)(l.k,{})})]})})})})}var eu=t(296952);let eh="component_browser_detail_view--codeComponentHeader--F5tTK",eg="component_browser_detail_view--sourceCodeSection--nwiP5",ef="component_browser_detail_view--componentDetailSection--peNzV",eb="component_browser_detail_view--fullHeight---elfV",ev="component_browser_detail_view--codeHeaderContainer--2YbES",ex="component_browser_detail_view--codeHeader--DxDoY",ew="component_browser_detail_view--codeDescription--CynS4";function ej({data:e,repositoryId:n,onIgnoreMapping:t,sourceIndex:s,entrypoint:r,onOpenRulesWindow:a,savedUserRules:c,playgroundData:l,mcpUserRulesEnabled:d,sourceCodeContent:_,isConnected:p}){let m=e.component?.code_connect_info?.v1?.type==="figmadoc";if(d){let t=p?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:ev,children:[(0,o.jsx)("div",{className:ex,children:(0,y.t)("dev_handoff.component_browser.mcp.mcp_preview_header")}),(0,o.jsx)("div",{className:ew,children:m?(0,y.t)("dev_handoff.component_browser.mcp.mcp_preview_description_cli"):(0,o.jsxs)(o.Fragment,{children:[(0,y.t)("dev_handoff.component_browser.mcp.mcp_preview_description")," ",(0,o.jsx)(i.N,{newTab:!0,trusted:!0,href:"https://help.figma.com/hc/articles/32132100833559-Guide-to-the-Figma-MCP-server",children:(0,y.t)("dev_handoff.component_browser.learn_more")})]})})]}),(0,o.jsx)(V,{data:e,repositoryId:n,playgroundData:l,onOpenRulesWindow:a,savedUserRules:c})]}):_?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:ev,children:[(0,o.jsx)("div",{className:ex,children:(0,y.t)("dev_handoff.component_browser.mcp.source_code_header")}),(0,o.jsx)("div",{className:ew,children:(0,y.t)("dev_handoff.component_browser.mcp.source_code_description")})]}),_]}):null;return t?(0,o.jsx)("div",{className:eg,children:t}):null}return(0,o.jsxs)("div",{className:eg,children:[_?(0,o.jsx)("div",{className:"component_browser_detail_view--fromYourCodebaseText--OmnYL",children:(0,y.t)("dev_handoff.component_browser.from_your_codebase")}):null,_]})}function ey({data:e}){let n=(0,g.G)(),[t,r]=(0,s.useState)(n.color),[i,l]=(0,s.useState)("");return(0,s.useEffect)(()=>{r(n.color)},[n.color]),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(f.J,{mode:t,children:(0,o.jsxs)("div",{className:"component_browser_detail_view--componentThumbnailPanel--tlaYl",children:[(0,o.jsx)("div",{className:"component_browser_detail_view--componentOverlay--p0M3-",children:(0,o.jsx)("div",{className:"component_browser_detail_view--componentOverlayText--auzvL",children:(0,y.t)("dev_handoff.component_browser.design_component")})}),(0,o.jsx)("div",{className:"component_browser_detail_view--imageWrapper--i16N8",children:(0,o.jsx)(w.oW,{className:"component_browser_detail_view--componentImage--f-fgj",src:e.component.thumbnail_url??"",alt:(0,y.t)("dev_handoff.component_browser.component_alt_text",{component:e.component.name})})}),(0,o.jsx)("div",{className:"component_browser_detail_view--themeToggle--kLZt7",children:(0,o.jsx)(a.K,{size:"lg",variant:"secondary","aria-label":(0,y.t)("dev_handoff.component_browser.change_theme"),onClick:()=>{let e="light"===t?"dark":"light";r(e);let n=(0,y.t)("light"===e?"dev_handoff.component_browser.theme_changed_to_light":"dev_handoff.component_browser.theme_changed_to_dark");l(i.endsWith(" ")?n:n+" ")},children:"light"===t?(0,o.jsx)(m.c,{}):(0,o.jsx)(u.G,{})})})]})}),(0,o.jsx)(c.E,{children:(0,o.jsx)("span",{"aria-live":"polite","aria-atomic":"true",children:i})})]})}function eC({data:e,fullWidth:n,isIgnored:t,isConnected:r,repositoryId:i,onIgnoreMapping:a,onDeleteMapping:c,sourceIndex:m,entrypoint:u,isLoadingSuggestions:h,suggestions:g,onActiveRowChange:f,onComponentChanged:b,onConfirmConnection:x,onConfirmSuggestion:w,onFileChanged:j,onValueChange:C,searchSessionId:N,onOpenRulesWindow:S,savedUserRules:I,playgroundData:T,mcpUserRulesEnabled:P}){let[D,R]=(0,s.useState)(void 0),{content:O,githubSourceFileContents:M,codeLines:F,sourceFetchErrorReason:K,language:A}=(0,k.Q)({data:e,repositoryId:i}),L=(0,s.useMemo)(()=>{if("loading"===M.status)return(0,o.jsx)("div",{className:"component_browser_detail_view--loadingCode--esp-4",children:(0,o.jsx)(l.k,{})});if(O){let n={lines:F.lines,language:A,name:e.selectedFile?.title??"code"};return(0,o.jsx)(E.U,{includeMargin:!1,hideHeader:!0,section:n,code:[n],copyAllActionEnabled:!0})}return r?(0,o.jsx)("div",{className:"component_browser_detail_view--errorBannerContainer--36o5d",children:(0,o.jsx)(d.Cs,{variant:e.selectedFile?.metadata?.path?"danger":"default",children:(0,o.jsx)(_.Q,{children:K})})}):null},[F.lines,O,e.selectedFile?.metadata?.path,e.selectedFile?.title,M.status,r,A,K]);return(0,o.jsxs)("div",{className:v()("component_browser_detail_view--componentDetailPanel--EXmlI",{"component_browser_detail_view--fullWidthPanel--RWHGO":n}),children:[!t&&(0,o.jsxs)("div",{className:v()(ef,{[eb]:r||L}),children:[(0,o.jsx)("div",{className:eh,children:(0,o.jsx)("div",{className:"component_browser_detail_view--codeComponentHeaderText--erwOw",children:r?(0,y.t)("dev_handoff.component_browser.code_component"):(0,y.t)("dev_handoff.component_browser.connect_component")})}),(0,o.jsx)("div",{className:"component_browser_detail_view--inputCellContainer---YImz",children:(0,o.jsx)(eu.uI,{component:e.component,currentRowIndex:m,entrypoint:u,hasEditButton:!0,inputRef:D,isLoadingSuggestions:h,isRowActive:!0,isRowHovered:!0,item:e,libraryKey:e.component.library_key,location:"side_sheet",onActiveRowChange:f,onComponentChanged:b,onConfirmConnection:x,onConfirmSuggestion:w,onDeleteMapping:c,onFileChanged:j,onSetInputRef:R,onValueChange:C,searchSessionId:N,sourceIndex:m,spacing:"compact",suggestions:g})}),(0,o.jsx)(ej,{data:e,entrypoint:u,isConnected:r,mcpUserRulesEnabled:P,onIgnoreMapping:a,onOpenRulesWindow:S,playgroundData:T,repositoryId:i,savedUserRules:I,sourceCodeContent:L,sourceIndex:m})]}),!t&&!r&&(0,o.jsxs)("div",{className:"component_browser_detail_view--skipDescriptionSection--6p1Fq",children:[(0,o.jsx)("div",{children:(0,y.t)("dev_handoff.component_browser.skip_description")}),(0,o.jsx)("div",{className:"component_browser_detail_view--buttonContainer--XrEpR",children:(0,o.jsx)(p.$n,{variant:"secondary",onClick:()=>a({row:{assetKey:e.assetKey,sourceIndex:m,component:e.component,selectedFile:e.selectedFile,selectedComponent:e.selectedComponent},trackingProps:{location:"side_sheet",entrypoint:u}}),children:(0,y.t)("dev_handoff.component_browser.skip")})})]}),t&&(0,o.jsxs)("div",{className:v()(ef,eb),children:[(0,o.jsx)("div",{className:eh,children:(0,o.jsx)("div",{className:"component_browser_detail_view--skippedCodeComponentHeaderText--iTc5X",children:(0,y.t)("dev_handoff.component_browser.code_component")})}),(0,o.jsxs)("div",{className:"component_browser_detail_view--centerSkippedContent--57P3L",children:[(0,y.t)("dev_handoff.component_browser.not_connected_to_design_component"),(0,o.jsx)(p.$n,{variant:"secondary",onClick:()=>c({codeConnectId:e.component.code_connect_info.v1.id,row:{assetKey:e.assetKey,sourceIndex:m,component:e.component,selectedFile:e.selectedFile,selectedComponent:e.selectedComponent},trackingProps:{location:"side_sheet",entrypoint:u}}),children:(0,y.t)("dev_handoff.component_browser.connect_now")})]})]})]})}function eN({data:e,shouldAnimate:n,sourceIndex:t,onClose:i,onRequestNextComponent:c,onRequestPreviousComponent:l,onDeleteMapping:d,onIgnoreMapping:_,onActiveRowChange:p,onConfirmConnection:m,onConfirmSuggestion:u,onComponentChanged:g,onFileChanged:f,onValueChange:b,onUpdateUserRules:v,repositoryId:w,isWindowed:k=!1,searchSessionId:E,entrypoint:P,isLoadingSuggestions:D,suggestions:R}){let O=(0,r.d4)(e=>e.openFile),[M,F]=(0,s.useState)(null),[K,A]=(0,s.useState)(null),L=s.useRef(null),[B,H]=(0,s.useState)(!1),W=e?.component?.code_connect_info?.v1?.state==="connected",G=e?.component?.code_connect_info?.v1?.state==="ignored",U=(0,I.ER)(O),$=(0,T.HC)(B&&U?e.sourceGuid??"":"",!0),Y=U?$:void 0;(0,s.useEffect)(()=>{F(e?.selectedFile??null),A(e?.selectedComponent??null)},[e]),(0,s.useEffect)(()=>{let e=setTimeout(()=>{H(!0)},n?S.SLIDE_ANIMATION_DURATION:0);return()=>clearTimeout(e)},[n]);let{showRulesPopout:V,setShowRulesPopout:q,savedUserRules:z,draftUserRules:J,setDraftUserRules:X,defaultPosition:Q,handleOpenRulesWindow:Z}=(0,N.E)(e,P,e.sourceGuid??""),ee=(0,o.jsx)(eC,{data:e,entrypoint:P,isConnected:W,isIgnored:G,isLoadingSuggestions:D,mcpUserRulesEnabled:U,onActiveRowChange:p,onComponentChanged:g,onConfirmConnection:m,onConfirmSuggestion:u,onDeleteMapping:d,onFileChanged:f,onIgnoreMapping:_,onOpenRulesWindow:Z,onValueChange:b,playgroundData:Y,repositoryId:w,savedUserRules:z,searchSessionId:E,sourceIndex:t,suggestions:R});return(0,o.jsxs)(j.n.div,{ref:L,className:"component_browser_detail_view--wrapper--19kfI",onKeyDown:function(n){switch(n.key){case"ArrowUp":l?.();break;case"ArrowDown":c?.();break;case"Escape":i();break;case"Backspace":n.shiftKey&&_({row:{assetKey:e.assetKey,sourceIndex:t,component:e.component,selectedFile:M,selectedComponent:K},trackingProps:{location:"side_sheet",entrypoint:P}})}},tabIndex:-1,children:[(0,o.jsxs)("div",{className:"component_browser_detail_view--content----WqK",children:[!k&&(0,o.jsx)("div",{className:"component_browser_detail_view--titleContainer--uEBHQ",children:!k&&(0,o.jsx)(a.K,{"aria-label":(0,y.t)("dev_handoff.component_browser.close_component_browser"),onClick:()=>i(),children:(0,o.jsx)(h.O,{})})}),(0,o.jsx)("div",{className:"component_browser_detail_view--panels--eIMlI",children:(0,o.jsxs)(o.Fragment,{children:[U?(0,o.jsx)(ep,{playgroundData:Y,entrypoint:P,nodeId:e.sourceGuid??""}):(0,o.jsx)(ey,{data:e}),ee]})})]}),V&&(0,o.jsx)(C.T,{onClose:()=>q(!1),defaultPosition:Q,setShowRulesPopout:q,draftUserRules:J,setDraftUserRules:X,savedUserRules:z,onSave:n=>{(0,x.sx)("component_browser.component_details_user_rules_saved",{componentBrowserEntrypoint:P,nodeId:e.sourceGuid??"",userRulesLength:n.length}),v({row:e,userRules:n})}})]})}},296952:(e,n,t)=>{t.d(n,{gP:()=>er,uI:()=>et});var o=t(104076),s=t(716976),r=t(293422),i=t(419541),a=t(475477),c=t(671170),l=t(527494),d=t(350019),_=t(812714),p=t(511570),m=t.n(p),u=t(166887),h=t(276800),g=t(140490),f=t(225125),b=t(816565),v=t(192075),x=t(300093),w=t(237420),j=t(58212);let y="component-browser-bulk-actions";function C({selectedCount:e,onBulkConnectComponents:n,onBulkIgnoreComponents:t,onDismiss:o}){let r=(0,w.wA)();return(0,s.useEffect)(()=>{if(0===e){r(j.F.dequeue({matchType:y}));return}r(j.F.enqueue({type:y,message:(0,v.t)("dev_handoff.component_browser.bulk_mapping.selected_components_bell.description",{count:e}),button:{primary:{text:(0,v.t)("dev_handoff.component_browser.bulk_mapping.selected_components_bell.action_connect"),action:()=>(n(),!0)},secondary:{text:(0,v.t)("dev_handoff.component_browser.bulk_mapping.selected_components_bell.action_ignore"),action:()=>(t(),!0)}},onDismiss:()=>{o?.()},timeoutOverride:1/0}))},[e,n,t,o,r]),null}var N=t(890229),k=t(693168),S=t(412431),I=t(37495),T=t(805733),E=t(243690),P=t(349311),D=t(120440),R=t(679359),O=t(117905);let M="component_browser_component_list--compact--3tCnY",F="component_browser_component_list--spacious--yB0HS",K="component_browser_component_list--sidesheet--qErQp",A="component_browser_component_list--componentsListTableCell--qX8vW",L="component_browser_component_list--designCell--2WgKC",B="component_browser_component_list--decoratorCell--f6ZpC",H="component_browser_component_list--fileCell--oVoAy",W="component_browser_component_list--variantsCell--yGi-I",G="component_browser_component_list--statusCell--x8DtR",U="component_browser_component_list--chevronCell--7St0s",$="component_browser_component_list--codeConnectionStatus--p3-4K",Y="component_browser_component_list--componentsListEmptyState--z0nm-",V="component_browser_component_list--checkboxCell---6UCl";function q({component:e,isLoading:n,isSuggestion:t}){let r=(0,_.kc)().dt_component_browser_improved_suggestions,i=(0,O.sD)(),a=(0,O.P8)(),c=e.code_connect_info.v1.state,l=(0,s.useMemo)(()=>{switch(c){case"connected":let{icon:e,color:n}=a.connected;return(0,o.jsx)("div",{...D.xk(z.iconWithColor(n)),"data-tooltip":i.connected,"data-tooltip-type":"text",children:(0,o.jsx)(e,{})});case"ignored":let{icon:s,color:l}=a.ignored;return(0,o.jsx)(s,{...D.xk(z.iconWithColor(l)),"data-tooltip":i.ignored,"data-tooltip-type":"text"});default:{if(r&&t){let{icon:e,color:n}=a.suggestionsAvailable;return(0,o.jsx)(e,{...D.xk(z.iconWithColor(n)),"data-tooltip":i.suggestionsAvailable,"data-tooltip-type":"text"})}let{icon:e,color:n}=a.notConnected;return(0,o.jsx)(e,{...D.xk(z.iconWithColor(n)),"data-tooltip":i.notConnected,"data-tooltip-type":"text"})}}},[c,i,a,t,r]);return n?(0,o.jsx)("span",{className:$,children:(0,o.jsx)(R.kt,{})}):(0,o.jsx)("span",{className:$,children:l})}let z={iconWithColor:e=>[{"--color-icon":null!=e?"x1g56j85":e,$$css:!0},{"--x---color-icon":null!=e?e:void 0}]};var J=t(284467);function X({width:e=102,height:n=58,spacing:t="spacious"}){let s=Math.ceil((window.innerHeight-200)/49);return(0,o.jsx)("div",{className:m()("component_browser_component_list--componentListLoadingItems--XJ359",{[M]:"compact"===t}),children:Array.from({length:s}).map((t,s)=>(0,o.jsxs)("div",{className:"component_browser_component_list--componentListLoadingRow--6VtcP",children:[(0,o.jsx)(J.Wi,{style:{width:e,height:n,borderRadius:4},animationType:J.JR.SHIMMER}),(0,o.jsx)(J.Wi,{style:{width:200},animationType:J.JR.SHIMMER}),(0,o.jsx)(J.Wi,{style:{flex:1},animationType:J.JR.SHIMMER}),(0,o.jsx)(J.Wi,{style:{width:120},animationType:J.JR.SHIMMER})]},s))})}var Q=t(601167),Z=t(39687);function ee({suggestions:e,assetKey:n}){return(0,o.jsxs)("div",{className:"suggestions_debug--suggestionsDebug--BwMJd",onClick:e=>{e.stopPropagation()},children:[(0,o.jsxs)("div",{children:["Asset key: ",(0,o.jsx)("code",{children:n})]}),(0,o.jsxs)("table",{className:"suggestions_debug--suggestionsDebugTable--RcFBw",children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{children:"Index"}),(0,o.jsx)("th",{children:"Filepath"}),(0,o.jsx)("th",{children:"Name"}),(0,o.jsx)("th",{children:"Score"}),(0,o.jsx)("th",{children:"Confidence"})]})}),(0,o.jsx)("tbody",{children:0===e.length?(0,o.jsx)("tr",{children:(0,o.jsx)("td",{colSpan:5,style:{textAlign:"center"},children:"(No suggestions)"})}):e.map((e,n)=>(0,o.jsxs)("tr",{"data-tooltip-type":P.Ib.TEXT,"data-tooltip-":!0,"data-tooltip":JSON.stringify(e,null,2),children:[(0,o.jsx)("td",{children:n}),(0,o.jsx)("td",{children:e.src_path}),(0,o.jsx)("td",{children:e.name}),(0,o.jsx)("td",{children:e.score.toFixed(3)}),(0,o.jsx)("td",{children:e.confidence_level})]},e.codebase_component_id))})]})]})}function en(e){let{currentRowIndex:n,inputRefs:t}=e,r=(0,s.useCallback)(e=>{e&&void 0!==n&&(t.current[n]=e)},[n,t]);return(0,o.jsx)(et,{...e,onSetInputRef:r,inputRef:void 0!==n?t.current[n]:void 0})}function et({spacing:e="spacious",isRowHovered:n,item:t,component:i,suggestions:a,isLoadingSuggestions:c,libraryKey:l,onComponentChanged:d,onConfirmConnection:p,onConfirmSuggestion:u,onDeleteMapping:g,onFileChanged:f,onValueChange:b,sourceIndex:w,currentRowIndex:j,location:y,entrypoint:C,onActiveRowChange:N,isRowActive:k,searchSessionId:I,hasEditButton:T,inputRef:E,onSetInputRef:D}){let[R,O]=(0,s.useState)(!1),F=i?.code_connect_info.v1.state==="ignored",K="figmadoc"===i.code_connect_info.v1.type,L="connected"===i.code_connect_info.v1.state,B=(0,_.kc)().dt_component_browser_bulk_mapping&&!(0,_.kc)().dt_component_browser_improved_suggestions&&!L&&!F&&a&&a.length>0&&!R,W=(0,s.useMemo)(()=>{if(B){let e=a[0],s=[e.src_path];return e.name&&s.push(e.name),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(Q.SN,{items:s,isSuggestion:!0,onClick:e=>{O(!0),N(t.component.node_id),e.stopPropagation()},tooltipProps:(0,S.f$)({componentName:e.name,filepath:e.src_path})}),(0,o.jsx)(Q.pK,{onConfirmConnection:n=>{u({filepath:e.src_path,componentName:e.name,item:t,currentRowIndex:j,sourceIndex:w}),n.stopPropagation()},showButton:n,children:(0,v.t)("dev_handoff.component_browser.confirm")})]})}if(K){let e=[];return t.selectedFile&&e.push(t.selectedFile.title),t.selectedComponent&&e.push(t.selectedComponent.title),(0,o.jsxs)("div",{className:"component_browser_component_list--cliContainer--9JYYV",children:[(0,o.jsx)(Q.SN,{items:e,tooltipProps:(0,S.f$)({filepath:t.selectedFile?.title,componentName:t.selectedComponent?.title,isSuggestion:t.isSelectedFromSuggestion??!1})}),T?(0,_.kc)().dt_component_browser_more_actions_menu?(0,o.jsx)(Z.a,{isCliGenerated:!0,onEdit:h.lQ,onDelete:g??h.lQ,data:t,location:y,entrypoint:C}):(0,o.jsx)("div",{className:"component_browser_component_list--disabledEditButton--yI5-Z",children:(0,o.jsx)(r.$n,{variant:"secondary",disabled:!0,htmlAttributes:{"data-tooltip-type":P.Ib.TEXT,"data-tooltip":(0,v.t)("dev_handoff.component_browser.cli_generated_message")},children:(0,v.t)("dev_handoff.component_browser.edit")})}):(0,o.jsx)(Q.$J,{})]})}if(F)return(0,o.jsx)("span",{className:"component_browser_component_list--noCodeEquivalent--ZoXWU",children:(0,v.t)("dev_handoff.component_browser.no_code_equivalent")});let e=a?.[0];return(0,o.jsx)(Q.Q3,{autosave:!1,currentRowIndex:j,entrypoint:C,hasEditButton:T,inputRef:E,isLoading:t.isLoading??!1,isLoadingSuggestions:c,isRowActive:k,isRowHovered:n,item:t,libraryKey:l,location:y,onActiveRowChange:N,onBlur:e?()=>O(!1):void 0,onComponentChanged:d,onConfirmConnection:p,onConfirmSuggestion:u,onDeleteMapping:g,onFileChanged:f,onSetInputRef:D,onValueChange:b,readonly:t?.component?.code_connect_info?.v1?.state==="connected",searchSessionId:I,selectedComponent:t.selectedComponent,selectedFile:t.selectedFile,sourceIndex:w,suggestions:a,value:t.inputValue??""})},[T,B,K,F,a,j,C,E,t,c,k,n,l,y,N,d,p,f,b,I,w,u,g,D]),{showSuggestionsDebug:G}=(0,x.D)();return(0,o.jsxs)("td",{className:m()(A,H,{"component_browser_component_list--suggestionsDebug--wvkUS":G,[M]:"compact"===e}),onClick:e=>{L||F||K||B||e.stopPropagation()},children:[W,G&&(0,o.jsx)(ee,{suggestions:a,assetKey:t.assetKey})]})}function eo(e){return(0,o.jsx)(g.u,{label:"TableRow",children:(0,o.jsx)(es,{...e})})}function es({item:e,currentRowIndex:n,onSelectComponent:t,columns:r,spacing:a,onConfirmConnection:d,onConfirmSuggestion:_,suggestions:p,isLoadingSuggestions:h,selectedComponent:g,inputRefs:f,onComponentChanged:w,onFileChanged:j,onValueChange:y,showExpandChevron:C,showLibraryNames:k,location:S,entrypoint:P,onActiveRowChange:D,isRowActive:R,selectedRows:O,onRowSelectionChange:F,searchSessionId:K,style:H,libraryKey:$}){let Y=(0,u.hC)(),[z,J]=(0,s.useState)(!1),X=e.component,Q=(0,E.B)(X.library_key).unwrapOr(null),Z=(0,T.b)({libraryKey:X.library_key,nodeId:X.node_id,isDevHandoff:!0}),ee=X.library_key===$,et=Q&&k&&!ee,eo=Z.data?.link,es=e.sourceIndex,{isSelected:er}=(e=>{let n=null;if("connected"===e.code_connect_info.v1.state)try{n=(0,I.y)(e.code_connect_info.v1.figmadoc)}catch(e){}let t=g&&(0,N.I)(e)===(0,N.I)(g),o=null,s=null;if("connected"===e.code_connect_info.v1.state&&n){let e=n.source;e&&(o=e.substring(e.lastIndexOf("/")+1)),s=n.component}return{isSelected:t,fileName:o,componentName:s}})(X),ei=!!O&&O.has(X.node_id),ea=(0,s.useCallback)(e=>{if(!F||!O)return;let n=new Set(O);e?n.add(X.node_id):n.delete(X.node_id),F(n)},[X.node_id,O,F]),{showSuggestionsDebug:ec}=(0,x.D)();return(0,o.jsxs)("tr",{onMouseEnter:()=>J(!0),onMouseLeave:()=>J(!1),className:m()("component_browser_component_list--componentsListTableRow--MWiH-",{"component_browser_component_list--isSelected--oGCS1":er,"component_browser_component_list--suggestionDebug--XWTB9":ec,"js-is-selected":er}),onClick:()=>{Y("component_browser.clicked_list_item",{componentBrowserEntrypoint:P,itemIdx:n,isIgnored:X?.code_connect_info.v1.state==="ignored",isCodeConnectCli:"figmadoc"===X.code_connect_info.v1.type,isConnected:"connected"===X.code_connect_info.v1.state}),t(e),D(X.node_id)},style:H,children:[r.includes("checkbox")&&(0,o.jsx)("td",{className:m()(A,V),onClick:e=>e.stopPropagation(),children:(0,o.jsx)(i.W,{checked:ei,muted:!0,onChange:e=>ea(e),"aria-label":`Select ${X.name}`,id:e.component.node_id})}),r.includes("design")&&(0,o.jsxs)("td",{className:m()(A,L,{[M]:"compact"===a}),children:[X.thumbnail_url&&(0,o.jsx)("div",{className:"component_browser_component_list--componentItemImageContainer--XlLnu",children:(0,o.jsx)(b.oW,{className:"component_browser_component_list--componentItemImage--l1RBu",src:X.thumbnail_url,alt:(0,v.t)("dev_handoff.component_browser.component_alt_text",{component:X.name})})}),(0,o.jsxs)("div",{className:"component_browser_component_list--nameBlock--Qm8-K",children:[(0,o.jsx)("div",{className:"component_browser_component_list--componentName--yOdtn",children:X.name}),et&&eo&&(0,o.jsx)("div",{className:"component_browser_component_list--libraryName--rDSdu",children:Q})]})]}),r.includes("decorator")&&(0,o.jsx)("td",{className:m()(A,B),children:(0,o.jsx)(c.H,{className:"component_browser_component_list--decoratorIcon--DSFkj"})}),r.includes("status")&&(0,o.jsx)("td",{className:m()(A,G),children:(0,o.jsx)(q,{component:X,isLoading:e.isLoading??!1,isSuggestion:e.isSelectedFromSuggestion??!1})}),r.includes("file")&&(0,o.jsx)(en,{component:X,currentRowIndex:n,entrypoint:P,hasEditButton:!1,inputRefs:f,isLoadingSuggestions:h,isRowActive:R,isRowHovered:z,item:e,libraryKey:X.library_key,location:S,onActiveRowChange:D,onComponentChanged:w,onConfirmConnection:d,onConfirmSuggestion:_,onFileChanged:j,onValueChange:y,searchSessionId:K,sourceIndex:es,suggestions:p}),r.includes("variants")&&(0,o.jsx)("td",{className:m()(A,W),children:"variants"in X?(0,o.jsx)("div",{className:"component_browser_component_list--countItemNumber--0qq5f",children:X.variants.length}):"--"}),r.includes("chevron")&&(0,o.jsx)("td",{className:m()(A,U),children:C&&(0,o.jsx)("div",{className:"component_browser_component_list--tableRowExpandChevron--bw780",children:(0,o.jsx)(l.a,{})})})]},X.node_id)}function er({libraryKey:e,data:n,selectedComponent:t,onSelectComponent:c,onFileChanged:l,onComponentChanged:_,onConfirmConnection:p,onConfirmSuggestion:u,onValueChange:h,isLoading:g,isLoadingSuggestions:b,inputRefs:x,searchQuery:w,columns:j,spacing:y="spacious",showExpandChevron:S=!1,showTableHeader:I=!0,showLibraryNames:T=!1,bulkSuggestions:E,location:P,entrypoint:D,selectedRows:R,onRowSelectionChange:O,onBulkConfirmSuggestions:$,searchSessionId:q,isShowingSideSheet:z,onActiveRowChange:J,activeRowKey:Q,hasConnections:Z,dropdownFilter:ee,setDropdownFilter:en}){let{Sprig:et}=(0,f.A)();(0,s.useEffect)(()=>{g||et("track",k.s)},[g,et]);let es=0===n.length,er=(0,s.useRef)(null),ei=(0,d.Te)({count:n.length,getScrollElement:()=>er.current,estimateSize:()=>85,overscan:5}),ea=t?(0,N.I)(t):null;return((0,s.useEffect)(()=>{if(ea){let e=n.findIndex(e=>(0,N.I)(e.component)===ea);-1!==e&&ei.scrollToIndex(e,{align:"auto"})}},[ea,n,ei]),g)?(0,o.jsx)("div",{className:"component_browser_component_list--componentsListLoadingContainer--WPYPK",children:(0,o.jsx)(X,{spacing:y})}):es?Z&&"notConnected"===ee?(0,o.jsxs)("div",{className:Y,children:[(0,o.jsx)("div",{className:"component_browser_component_list--componentsListNothingToConnectTitle--HpweU",children:(0,v.t)("dev_handoff.component_browser.all_connected")}),(0,o.jsx)("div",{className:"component_browser_component_list--componentsListNothingToConnectSubtext--Co7Yt",children:(0,v.t)("dev_handoff.component_browser.all_connected_subtext")})]}):(0,o.jsx)("div",{className:Y,children:w.length>0?(0,o.jsx)("span",{children:(0,v.t)("dev_handoff.component_browser.no_components_search_result",{searchQuery:w})}):({connected:{title:"dev_handoff.component_browser.start_connecting_components",description:"dev_handoff.component_browser.start_connecting_components_description",primaryButton:"dev_handoff.component_browser.get_started"},notConnected:{title:"dev_handoff.component_browser.nothing_to_see_here",description:"dev_handoff.component_browser.no_unconnected_components_description"},ignored:{title:"dev_handoff.component_browser.nothing_to_see_here",description:"dev_handoff.component_browser.no_ignored_components_description"}})[ee]?(0,o.jsxs)("div",{className:"component_browser_component_list--listEmptyContainer--hAa9P",children:[(0,o.jsx)("span",{className:"component_browser_component_list--listEmptyContainerTitle--wyRza",children:(e=>{switch(e){case"connected":return(0,v.t)("dev_handoff.component_browser.start_connecting_components");case"notConnected":case"ignored":return(0,v.t)("dev_handoff.component_browser.nothing_to_see_here");default:return""}})(ee)}),(0,o.jsx)("span",{className:"component_browser_component_list--listEmptyContainerSubtext--SoSef",children:(e=>{switch(e){case"connected":return(0,v.t)("dev_handoff.component_browser.start_connecting_components_description");case"notConnected":return(0,v.t)("dev_handoff.component_browser.no_unconnected_components_description");case"ignored":return(0,v.t)("dev_handoff.component_browser.no_ignored_components_description");default:return""}})(ee)}),(0,o.jsxs)("div",{className:"component_browser_component_list--listEmptyContainerButtons--yfjWZ",children:["notConnected"!==ee&&(0,o.jsx)(a.N.Button,{variant:"secondary",newTab:!0,href:"https://developers.figma.com/docs/code-connect/code-connect-ui-setup",children:(0,v.t)("dev_handoff.component_browser.learn_more")}),"connected"===ee&&(0,o.jsx)(r.$n,{variant:"primary",onClick:()=>en?.("all"),children:(0,v.t)("dev_handoff.component_browser.get_started")})]})]}):(0,v.t)("dev_handoff.component_browser.no_results_found")}):(0,o.jsx)("div",{className:"component_browser_component_list--componentsList--jcFMY",ref:er,children:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{style:{height:`${ei.getTotalSize()}px`},children:(0,o.jsxs)("table",{className:m()("component_browser_component_list--componentsListTable--puqS-",{[F]:"spacious"===y,[M]:"compact"===y}),children:[I&&(0,o.jsx)("thead",{className:m()("component_browser_component_list--componentsListTableHeader--Aynmf",{[F]:"spacious"===y,[M]:"compact"===y,[K]:z}),children:(0,o.jsxs)("tr",{className:"component_browser_component_list--componentsListTableHeaderRow---iaPM",children:[j.includes("checkbox")&&(0,o.jsx)("th",{className:m()(A,V),children:(0,o.jsx)(i.W,{checked:!!R&&R.size>0&&R.size===n.length,mixed:!!R&&R.size>0&&R.size<n.length,muted:!0,onChange:e=>{O&&(e?O(new Set(n.map(e=>e.component.node_id))):O(new Set))},id:"select-all-checkbox"})}),j.includes("design")&&(0,o.jsx)("th",{className:m()(A,L),children:(0,o.jsx)("div",{children:(0,v.t)("dev_handoff.component_browser.design_component")})}),j.includes("decorator")&&(0,o.jsx)("th",{className:m()(A,B)}),j.includes("file")&&(0,o.jsx)("th",{className:m()(A,H,{[M]:"compact"===y}),children:(0,o.jsx)("div",{children:(0,v.t)("dev_handoff.component_browser.code_file_column")})}),j.includes("variants")&&(0,o.jsx)("th",{className:m()(A,W),children:(0,o.jsx)("div",{children:(0,v.t)("dev_handoff.component_browser.variants")})}),j.includes("status")&&(0,o.jsx)("th",{className:m()(A,G),children:(0,o.jsx)("div",{children:(0,v.t)("dev_handoff.component_browser.status")})}),j.includes("chevron")&&(0,o.jsx)("th",{className:m()(A,U)})]})}),(0,o.jsx)("tbody",{className:m()("component_browser_component_list--componentsListTableBody--PiBLQ",{[F]:"spacious"===y,[M]:"compact"===y,[K]:z}),children:ei.getVirtualItems().map((s,r)=>{let i=n[s.index];if(!i)return null;let a=E[i.assetKey]||[];return(0,o.jsx)(eo,{columns:j,currentRowIndex:s.index,"data-index":s.index,entrypoint:D,inputRefs:x,isLoadingSuggestions:b,isRowActive:Q===i.component.node_id,item:i,libraryKey:e,location:P,onActiveRowChange:J,onComponentChanged:_,onConfirmConnection:p,onConfirmSuggestion:u,onFileChanged:l,onRowSelectionChange:O,onSelectComponent:c,onValueChange:h,searchSessionId:q,selectedComponent:t,selectedRows:R,showExpandChevron:S,showLibraryNames:T,spacing:y,style:{height:`${s.size}px`,transform:`translateY(${s.start-r*s.size}px)`},suggestions:a},s.key)})})]})}),(0,o.jsx)(C,{selectedCount:(R??new Set).size,onBulkConnectComponents:()=>{($??(()=>{}))({selectedComponents:n.filter(e=>(R??new Set).has(e.component.node_id)),bulkSuggestions:E,trackingProps:{location:P,source:"ai_codebase_suggestion",entrypoint:D,sessionId:crypto.randomUUID()}}),O?.(new Set)},onBulkIgnoreComponents:()=>{($??(()=>{}))({selectedComponents:n.filter(e=>(R??new Set).has(e.component.node_id)),bulkSuggestions:E,trackingProps:{location:P,source:"ai_codebase_suggestion",entrypoint:D,sessionId:crypto.randomUUID()},ignore:!0}),O?.(new Set)},onDismiss:()=>{O?.(new Set)}})]})})}},610856:(e,n,t)=>{t.d(n,{z:()=>a});var o=t(266808),s=t(553065),r=t(567325),i=t(739710);function a(e,n,t){if(!e)return{};let a=e[n];if(!a||!a.backingSymbol)return{};let c=e[a.backingSymbol];if(!c||!c.defs)return{};let l={};return Object.entries(c.defs).forEach(([e,n])=>{let c=n.name,d=a.assignments?.[e],_=d&&"value"in d?d.value:n.defaultValue;if(n.type===o.J0O.INSTANCE_SWAP){if(_&&"MIXED"!==_){let e=(0,i.wd)([_],t);_=e&&(0,s.hS)(e)?(0,r.kH)(e.name):"None"}}else n.type===o.J0O.IMAGE||n.type===o.J0O.SLOT?_="N/A":_&&"object"==typeof _&&"type"in _&&"value"in _&&(_=`[Variable: ${_.value}]`);l[c]=_}),a.stateVariantProps?.propertyValues&&Object.entries(a.stateVariantProps.propertyValues).forEach(([e,n])=>{l[e]=n}),l}},332575:(e,n,t)=>{t.r(n),t.d(n,{ComponentBrowserWindowDetailHeader:()=>eJ,SLIDE_ANIMATION_DURATION:()=>eU,default:()=>e7});var o=t(104076),s=t(716976),r=t(293422),i=t(420680),a=t(962856),c=t(268389),l=t(736813),d=t(434335),_=t(219671),p=t(926653),m=t(812714),u=t(511570),h=t.n(u),g=t(166887),f=t(192075),b=t(296217),v=t(68106),x=t(449572),w=t(59849),j=t(300093),y=t(921093),C=t(296952),N=t(899496),k=t(237420),S=t(307829),I=t(454851),T=t(17933),E=t(419822),P=t(475477),D=t(144949),R=t(853943),O=t(694415),M=t(527494),F=t(232120),K=t(307002),A=t(388054),L=t(437481),B=t(417167),H=t(686549),W=t(190028),G=t(833805),U=t(198464),$=t(764898),Y=t(111679),V=t(661977),q=t(407664),z=t(961457),J=t(870402),X=t(636763),Q=t(370020),Z=t(742549),ee=t(147046),en=t(805733),et=t(211862),eo=t(657878),es=t(243690),er=t(377026),ei=t(349311);let ea="github_settings_popover--githubContentWrapper--PFKpJ",ec="github_settings_popover--githubConnectedHeading--QXFr-",el="github_settings_popover--githubConnectedHeadingRow--sHAWO",ed="github_settings_popover--githubConnectedItemRow--3ey3x",e_="github_settings_popover--itemText---Gw0e",ep="github_settings_popover--githubBody--WzeQH",em="github_settings_popover--libraryRow--3vm4x",eu="github_settings_popover--currentFileSettingsHeader--go-i3",eh="github_settings_popover--libraryName--M3zpy",eg="github_settings_popover--ingestionDetail--0CGmL";function ef({handleManageGitHub:e}){let{getTriggerProps:n,manager:t}=S.b();return(0,o.jsxs)(S.bL,{manager:t,children:[(0,o.jsx)(I.d,{"aria-label":(0,f.t)("dev_handoff.component_browser.github_settings.more_options"),variant:"ghost",...n(),children:(0,o.jsx)(R.J,{})}),(0,o.jsx)(S.mc,{children:(0,o.jsx)(S.q7,{onClick:e,children:(0,f.t)("dev_handoff.component_browser.settings.disconnect")})})]})}function eb({libraryKey:e,name:n,leadingButton:t,actionButton:s,additionalClassName:r}){return(0,o.jsxs)("div",{className:h()(em,r),children:[t,(0,o.jsx)(O.l,{}),(0,o.jsx)("span",{className:eh,children:n}),(0,o.jsx)(eC,{libraryKey:e}),s]})}function ev({libraryKey:e,canEdit:n,onSelectLibrary:t}){let s=(0,es.B)(e).unwrapOr(null),r=(0,en.b)({libraryKey:e,isDevHandoff:!0,isDevModeComponentBrowser:!0,showGithubPopover:!0}),a=(0,k.wA)(),c=n&&t?(0,o.jsx)(i.K,{"aria-label":(0,f.t)("dev_handoff.component_browser.github_settings.go_to_settings"),onClick:t,children:(0,o.jsx)(M.a,{})}):(0,o.jsx)(i.K,{"aria-label":(0,f.t)("dev_handoff.component_browser.github_settings.go_to_library"),onClick:()=>{let e=r.data?.link;e&&a(Y.V3({url:e}))},children:(0,o.jsx)(F.V,{})});return(0,o.jsx)(eb,{libraryKey:e,name:s,actionButton:c})}function ex({externalLibraryKeysInFile:e,canEditForCurrentFile:n,onSelectCurrentFile:t,onSelectExternalLibrary:r,libraryKey:a}){let c=s.useMemo(()=>Array.from(e),[e]),l=function(e){let n=s.useMemo(()=>e.map(e=>({libraryKey:e})),[e]),t=(0,x.p)(w.iAs,n,{enabled:e.length>0});return s.useMemo(()=>{let e=new Map;return t.forEach(({args:n,result:t})=>{let o=t.data?.libraryKeyToFile?.fileCanAccess?.canEditV3??!1;e.set(n.libraryKey,o)}),e},[t])}(c);return(0,o.jsxs)("div",{children:[n&&(0,o.jsx)(eb,{libraryKey:a,name:(0,f.t)("dev_handoff.component_browser.github_settings.this_file"),actionButton:(0,o.jsx)(i.K,{"aria-label":(0,f.t)("dev_handoff.component_browser.github_settings.go_to_settings"),onClick:t,children:(0,o.jsx)(M.a,{})})}),c.map(e=>(0,o.jsx)(ev,{libraryKey:e,canEdit:l.get(e)??!1,onSelectLibrary:()=>{r(e)}},e))]})}function ew({position:e,getContainerProps:n,libraryKey:t,externalLibraryKeysInFile:r,scope:i}){let a=(0,b.OG)(t),c=(0,s.useCallback)(()=>{(0,H.FJ)((0,J.D)())},[]),l=a?.selectedRepositories?.[0],{directories:d}=(0,q.v)({libraryKey:t,repositoryId:l?.id||""}),_=a.status===b.w6.Connected&&d.length,p="page_or_selection"===i&&r.size>0;return(0,o.jsxs)(T.mc,{...n(),className:"github_settings_popover--container--5MKZy",style:{top:`${e.y+24+8}px`,left:`${e.x+e.width-320}px`,width:"320px"},children:[(0,o.jsxs)("div",{className:h()("github_settings_popover--githubDialogHeader--r54wW",{"github_settings_popover--bordered--HZYM7":p||_}),children:[(0,o.jsxs)("div",{className:"github_settings_popover--githubDialogHeaderLeft--tobMM",children:[(0,o.jsx)($.f,{}),(0,f.t)("dev_handoff.component_browser.github_settings.title")]}),(0,o.jsxs)("div",{className:"github_settings_popover--githubDialogHeaderRight---Jbe0",children:[!p&&(0,o.jsx)(eC,{libraryKey:t}),a.status===b.w6.Connected&&(0,o.jsx)(ef,{handleManageGitHub:c})]})]}),p?(0,o.jsx)(ej,{externalLibraryKeysInFile:r,libraryKey:t}):(0,o.jsx)(ek,{libraryKey:t,page:"single-library"})]})}function ej({externalLibraryKeysInFile:e,libraryKey:n}){let[t,r]=(0,s.useState)(!1),[a,c]=(0,s.useState)(null),l=(0,et.q5)(),_=(0,Q.Yg)(l),p=(0,s.useMemo)(()=>{let s=[(0,o.jsx)(ex,{externalLibraryKeysInFile:e,canEditForCurrentFile:_,onSelectCurrentFile:()=>r(!0),onSelectExternalLibrary:c,libraryKey:n},"library-github-settings-select")];return t?s.push((0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{className:h()(em,eu),children:[(0,o.jsx)(i.K,{"aria-label":(0,f.t)("dev_handoff.component_browser.github_settings.go_back"),onClick:()=>r(!1),children:(0,o.jsx)(d.t,{})}),(0,o.jsx)("span",{className:eh,children:(0,f.t)("dev_handoff.component_browser.github_settings.this_file")}),(0,o.jsx)(eC,{libraryKey:n})]}),(0,o.jsx)(ek,{libraryKey:n,page:"multi-library"})]},"current-file-github-settings")):a&&s.push((0,o.jsx)(ey,{libraryKey:a,onGoBack:()=>c(null)},"external-library-github-settings")),s},[_,e,n,t,a]);return(0,o.jsx)(X.v,{animate:!0,derenderTimeout:300,children:p})}function ey({libraryKey:e,onGoBack:n}){let t=(0,es.B)(e).unwrapOr(null);return(0,o.jsxs)("div",{children:[(0,o.jsx)(eb,{libraryKey:e,name:t,leadingButton:(0,o.jsx)(i.K,{"aria-label":(0,f.t)("dev_handoff.component_browser.github_settings.go_back"),onClick:n,children:(0,o.jsx)(d.t,{})}),additionalClassName:eu}),(0,o.jsx)(ek,{libraryKey:e,page:"multi-library"})]})}function eC({libraryKey:e}){let n=(0,b.s7)({libraryKey:e});return n?(0,o.jsx)(a.E,{variant:n.badgeVariant,children:n.statusString}):null}var eN=(e=>(e.SingleLibrary="single-library",e.MultiLibrary="multi-library",e))(eN||{});function ek({libraryKey:e,page:n}){let t=(0,g.hC)(),i=(0,V.e)("component_browser"),a=(0,Z.Bt)(),c=(0,b.OG)(e),[l,d]=s.useState(!1),_=(0,s.useCallback)(()=>{(0,H.FJ)((0,J.D)())},[]),p=(0,s.useCallback)(()=>{a(er.e6.REPO_SELECTOR,e)},[a,e]),u=(0,s.useCallback)(()=>{a(er.e6.DIRECTORY_SELECTOR,e),t("component_browser.clicked_change_directories",{location:"options_menu"})},[a,t,e]),v=c?.selectedRepositories?.[0],x=(0,b.s7)({libraryKey:e}),w=s.useMemo(()=>{switch(c.status){case b.w6.Connected:return u;case b.w6.NeedsInfo:return p;case b.w6.Pending:return _;case b.w6.NotSetup:default:return async()=>{d(!0);try{await i()}finally{d(!1)}}}},[u,p,_,c.status,i]),j=c?.queryStatus===U.H.LOADING,{directories:y,isLoading:C}=(0,q.v)({libraryKey:e,repositoryId:v?.id||""}),N=c.status===b.w6.Connected&&(y.length>0||(0,m.kc)().dt_component_browser_improved_suggestions),k=s.useMemo(()=>j||C||!x?(0,o.jsx)("div",{className:h()(ea,{"github_settings_popover--padded--1Kp47":"multi-library"===n}),children:(0,o.jsx)("div",{className:"github_settings_popover--spinnerWrapper--9OYe8",children:(0,o.jsx)(E.k,{size:"lg"})})}):N?(0,o.jsx)(eS,{libraryKey:e,library:c,directories:y,handleChangeRepository:p,handleChangeDirectories:u}):!1===x.showBody?null:(0,o.jsxs)("div",{className:h()(ea,{"github_settings_popover--multiLibrary--0E7NG":"multi-library"===n}),children:[(0,o.jsx)("div",{className:"github_settings_popover--githubHeading--LwoID",children:x.heading}),(0,o.jsx)("div",{className:ep,children:x.body}),(0,o.jsx)(r.IK,{variant:"secondary",onClick:w,disabled:l,children:x.cta})]}),[j,C,n,w,l,x,c,y,p,u,N,e]),S=(0,b.Pw)();return(0,o.jsxs)(o.Fragment,{children:[k,c.status===b.w6.Pending&&S&&(0,o.jsx)("div",{className:"github_settings_popover--footer--YBq13",children:(0,f.tx)("dev_handoff.component_browser.github_settings.connected.find_admins",{link:(0,o.jsx)(P.N,{href:S,newTab:!0,children:(0,f.t)("dev_handoff.component_browser.github_settings.connected.find_admins_link_text")})})})]})}function eS({libraryKey:e,library:n,directories:t,handleChangeRepository:s,handleChangeDirectories:i}){let a=n?.selectedRepositories?.[0],c=n?.availableRepositories?.length&&n.availableRepositories.length>1,{getTriggerProps:l,manager:d}=S.b(),{getTriggerProps:_,manager:p}=S.b(),[u]=(0,G.IT)((0,z.wP)(e)),g=(0,m.kc)().dt_component_browser_directory_selection&&"loaded"===u.status&&u.data&&t.length>0;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:h()(ea,{"github_settings_popover--withIndexingStatus--edDmc":g}),children:[(0,o.jsxs)("div",{className:el,children:[(0,o.jsx)("h2",{className:ec,children:(0,f.t)("dev_handoff.component_browser.github_settings.connected.repository")}),c&&(0,o.jsxs)(S.bL,{manager:d,children:[(0,o.jsx)(I.d,{"aria-label":(0,f.t)("dev_handoff.component_browser.github_settings.more_options"),variant:"ghost",...l(),children:(0,o.jsx)(R.J,{})}),(0,o.jsx)(S.mc,{children:(0,o.jsx)(S.q7,{onClick:s,children:(0,f.t)("dev_handoff.component_browser.settings.change_repository")})})]})]}),(0,o.jsxs)("div",{className:ed,children:[(0,o.jsx)(K.v,{})," ",(0,o.jsx)("span",{className:e_,children:a?.name})]}),(0,m.kc)().dt_component_browser_directory_selection&&t.length>0?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:el,children:[(0,o.jsx)("h2",{className:ec,children:(0,f.t)("dev_handoff.component_browser.github_settings.connected.directories")}),(0,o.jsxs)(S.bL,{manager:p,children:[(0,o.jsx)(I.d,{"aria-label":(0,f.t)("dev_handoff.component_browser.github_settings.more_options"),variant:"ghost",..._(),children:(0,o.jsx)(R.J,{})}),(0,o.jsx)(S.mc,{children:(0,o.jsx)(S.q7,{onClick:i,children:(0,f.t)("dev_handoff.component_browser.settings.change_github_directories")})})]})]}),t.map((e,n)=>(0,o.jsxs)("div",{className:ed,children:[(0,o.jsx)(A.e,{})," ",(0,o.jsx)("span",{className:e_,children:e})]},n))]}):(0,m.kc)().dt_component_browser_improved_suggestions&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:el,children:(0,o.jsx)("h2",{className:ec,children:(0,f.t)("dev_handoff.component_browser.github_settings.connected.directories")})}),(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{className:ep,children:(0,f.t)("dev_handoff.component_browser.github_settings.body.add_directories_cta")}),(0,o.jsx)(r.IK,{variant:"secondary",onClick:i,children:(0,f.t)("dev_handoff.component_browser.github_settings.cta.connected")})]})]})]}),g&&(0,o.jsx)("div",{className:"github_settings_popover--indexingStatusContainer--9rKwF",children:(0,o.jsx)(eI,{completedAt:u.data?.completed_at,ingestionStatus:u.data?.ingestion_status})})]})}function eI({completedAt:e,ingestionStatus:n}){switch(n){case"completed":let t=(e=>{let n;if(!e)return(0,f.t)("dev_handoff.component_browser.github_settings.indexing_completed");let t=(0,W.A)(e),o=(0,W.A)(),s=o.startOf("day").diff(t.startOf("day"),"day"),r=t.format("h.mma").toLowerCase();return n=0===s?(0,f.t)("dev_handoff.component_browser.github_settings.indexing_today"):1===s?(0,f.t)("dev_handoff.component_browser.github_settings.indexing_yesterday"):t.year()===o.year()?t.format("MMM D"):t.format("MMM D, YYYY"),(0,f.t)("dev_handoff.component_browser.github_settings.indexing_completed_at",{date:n,time:r})})(e);return(0,o.jsxs)("div",{className:eg,children:[(0,o.jsx)(L.g,{className:"github_settings_popover--ingestionCompletedIcon--QHztN"}),(0,o.jsx)("span",{children:t})]});case"in_progress":return(0,o.jsxs)("div",{className:eg,children:[(0,o.jsx)(E.k,{size:"sm"}),(0,o.jsx)("span",{children:(0,f.t)("dev_handoff.component_browser.github_settings.indexing_in_progress")})]});case"not_connected":return(0,o.jsx)("span",{children:(0,f.t)("dev_handoff.component_browser.github_settings.indexing_not_connected")})}}function eT({libraryKey:e,externalLibraryKeysInFile:n,scope:t}){let r=s.useRef(null),[i,a]=function(){let e=(0,eo._6)(),n=e.showComponentBrowserGitHubPopover||!1,t=(0,k.wA)();return[n,(0,s.useCallback)(n=>{t((0,ee.sf)({...e,showComponentBrowserGitHubPopover:n}))},[e,t])]}(),{getTriggerProps:c,getContainerProps:l}=T.fP({isOpen:i,onOpenChange:a,type:"menu",softDismiss:!0}),d=(0,b.OG)(e),_=d.status===b.w6.NeedsInfo||d.status===b.w6.Pending,p=d.status===b.w6.NotSetup;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"github_settings_popover--settingsButtonContainer--4OqJL",ref:r,children:[p?(0,o.jsx)(D.v,{leading:(0,o.jsx)("div",{className:i?"github_settings_popover--settingsIconSelected--VIVaw":"github_settings_popover--settingsIcon--UtFEN",children:(0,o.jsx)(B.n,{})}),selected:i,onClick:e=>c().onClick(e),onClose:e=>c().onClose(e),"aria-label":(0,f.t)("dev_handoff.component_browser.github_settings.open_settings"),"aria-haspopup":"menu","aria-expanded":i,htmlAttributes:{"data-tooltip":(0,f.t)("dev_handoff.component_browser.github_settings.open_settings"),"data-tooltip-type":ei.Ib.TEXT},children:(0,f.t)("dev_handoff.component_browser.github_settings.cta.not_setup")}):(0,o.jsx)(I.d,{...c(),"aria-label":(0,f.t)("dev_handoff.component_browser.settings"),htmlAttributes:{"data-tooltip":(0,f.t)("dev_handoff.component_browser.github_settings.cta.not_setup"),"data-tooltip-type":ei.Ib.TEXT},children:(0,o.jsx)(B.n,{})}),_&&(0,o.jsx)("div",{className:"github_settings_popover--warningIcon--1Sal1"})]}),(0,o.jsx)(ew,{externalLibraryKeysInFile:n,getContainerProps:l,position:r.current?.getBoundingClientRect()??{y:0,x:0,width:0,height:0},libraryKey:e,scope:t})]})}var eE=t(315361),eP=t(643077),eD=t(835307),eR=t(476949),eO=t(285466),eM=t(662376),eF=t(697157),eK=t(302727),eA=t(452981),eL=t(890229),eB=t(117905);function eH({currentSort:e,onSortChange:n,dropdownFilter:t,setDropdownFilter:s,scope:r}){let i=[{value:"alphabetically",label:(0,f.t)("dev_handoff.component_browser.sort_alphabetically"),disabled:!1},{value:"insertions",label:(0,f.t)("dev_handoff.component_browser.sort_by_insertions"),disabled:!("file"===r&&(0,m.kc)().dt_component_browser_sort_by_usage)}],a=(0,eB.sD)(),c=(0,m.kc)().dt_component_browser_bulk_mapping,l=(0,m.kc)().dt_component_browser_inline_suggestions,d=Object.entries(eL.W).filter(([e])=>c||l||"suggestionsAvailable"!==e).map(([e,{value:n}])=>({value:n,label:a[n]}));return(0,o.jsxs)("div",{className:"component_browser_filter_and_sort_by--container--td8OX",children:[(0,o.jsxs)(eK.Root,{value:t,onChange:e=>{e&&s(e)},children:[(0,o.jsx)(eK.Trigger,{width:"hug",label:(0,o.jsx)(eA.h,{children:(0,f.t)("dev_handoff.component_browser.filter")}),"data-testid":"component_browser_filter"}),(0,o.jsx)(eK.Container,{children:d.map(e=>(0,o.jsx)(eK.Option,{value:e.value,children:e.label},e.value))})]}),(0,o.jsxs)(eK.Root,{value:e,onChange:e=>{e&&n(e)},children:[(0,o.jsx)(eK.Trigger,{width:"hug",label:(0,o.jsx)(eA.h,{children:(0,f.t)("dev_handoff.component_browser.sort")}),"data-testid":"component_browser_sort"}),(0,o.jsx)(eK.Container,{children:i.map(e=>(0,o.jsx)(eK.Option,{value:e.value,disabled:e.disabled,children:e.label},e.value))})]})]})}function eW({searchQuery:e,setSearchQuery:n,dropdownFilter:t,setDropdownFilter:s,sortBy:r,setSortBy:a,scope:c}){return(0,o.jsxs)("div",{className:"component_browser_window_filters--filtersBar--ZoDLB",children:[(0,o.jsxs)("div",{className:"component_browser_window_filters--searchBar--XV7Xe",children:[(0,o.jsx)(eO.W,{}),(0,o.jsx)(eF.i,{placeholder:(0,f.t)("dev_handoff.component_browser.search_placeholder"),value:e,onChange:e=>{n(e.currentTarget.value)},className:"component_browser_window_filters--searchInput--MvScM text--fontPos11--2LvXf text--_fontBase--QdLsd",spellCheck:!1}),!!e&&(0,o.jsx)("div",{children:(0,o.jsx)(i.K,{onClick:()=>n(""),"aria-label":(0,f.t)("dev_handoff.component_browser.clear_search"),htmlAttributes:{"data-tooltip":(0,f.t)("dev_handoff.component_browser.clear_search"),"data-tooltip-type":ei.Ib.TEXT},children:(0,o.jsx)(eM.A,{})})})]}),(0,o.jsx)(eH,{currentSort:r,onSortChange:a,dropdownFilter:t,setDropdownFilter:s,scope:c})]})}var eG=t(421334);let eU=200;function e$({activeRowKey:e,canAccessLibrary:n,dropdownFilter:t,filteredComponents:r,inputRefs:i,onActiveRowChange:a,onComponentChanged:c,onConfirmConnection:l,onConfirmSuggestion:d,onDeleteMapping:_,onFileChanged:m,onIgnoreMapping:u,onSelectComponent:h,onValueChange:f,openFileLibraryKey:b,queryStatus:v,searchQuery:x,bulkSuggestions:w,searchSessionId:j,entrypoint:y,setDropdownFilter:N}){let k=(0,g.hC)(),S=(0,p.l)(b??"");return s.useEffect(()=>{k("component_browser.in_context.window_seen",{componentBrowserEntrypoint:y})},[k,y]),(0,o.jsx)(C.gP,{activeRowKey:e,bulkSuggestions:w,columns:["design","status","file","chevron"],data:r,dropdownFilter:t,entrypoint:y,inputRefs:i,isLoading:"loading"===n||"loading"===v,isLoadingSuggestions:!1,libraryKey:S,location:"in_context_list_view",onActiveRowChange:a,onComponentChanged:c,onConfirmConnection:l,onConfirmSuggestion:d,onFileChanged:m,onSelectComponent:h,onValueChange:f,searchQuery:x,searchSessionId:j,setDropdownFilter:N,showExpandChevron:!0,showLibraryNames:!0,showTableHeader:!1,spacing:"compact"})}function eY({displayedComponent:e,shouldAnimate:n,onActiveRowChange:t,onComponentChanged:s,onConfirmConnection:r,onConfirmSuggestion:i,onDeleteMapping:a,onFileChanged:c,onIgnoreMapping:l,onSelectComponent:d,onValueChange:_,onUpdateUserRules:m,openFileLibraryKey:u,searchSessionId:h,entrypoint:g,suggestions:f}){let v=(0,p.l)(u??""),x=(0,b.OG)(v),w=x?.selectedRepositories[0]?.id;return(0,o.jsx)(y.o,{data:e,entrypoint:g,isLoadingSuggestions:!1,isWindowed:!0,onActiveRowChange:t,onClose:()=>d(null),onComponentChanged:s,onConfirmConnection:r,onConfirmSuggestion:i,onDeleteMapping:a,onFileChanged:c,onIgnoreMapping:l,onUpdateUserRules:m,onValueChange:_,repositoryId:w,searchSessionId:h,shouldAnimate:n,sourceIndex:e?.sourceIndex,suggestions:f})}var eV=(e=>(e.list="list",e.detail="detail",e))(eV||{});function eq({breadcrumbs:e}){return(0,o.jsx)("div",{className:eG.DD,children:e.map((n,t)=>(0,o.jsxs)("div",{className:h()(eG.QF,t===e.length-1&&eG.HV),children:[t>0&&(0,o.jsx)(l.k,{className:eG.Vh}),(0,o.jsx)("div",{className:eG.b,children:n})]},`${n}-${t}`))})}function ez({componentCounts:e,scope:n,libraryKey:t,externalLibraryKeysInFile:i}){let a=(0,eP.nn)(),c=function(){let e=(0,Z.hA)(),n=(0,eE.Tv)(),t=e||n?.[0]||null;return(0,eD.Fk)((e,n)=>{let t=e.get(n??"");return t?.type==="SECTION"||t?.type==="FRAME"?t.name:null},t)}(),l=(0,s.useMemo)(()=>{let e=[(0,f.t)("dev_handoff.component_browser.title")];return"file"===n?e.push((0,f.t)("dev_handoff.component_browser.all_pages_title")):(e.push(a??(0,f.t)("dev_handoff.component_browser.title.this_page")),"page_or_selection"===n&&c&&e.push(c)),e},[a,c,n]),{isSuggestionsDebugUngated:d,showSuggestionsDebug:_,setShowSuggestionsDebug:p}=(0,j.D)();return(0,o.jsxs)("div",{className:eG.gn,children:[(0,o.jsx)(eq,{breadcrumbs:l}),(0,o.jsxs)("div",{className:eG.Q$,children:[d&&(0,o.jsxs)(r.$n,{variant:"secondary",onClick:()=>{p(!_)},children:[_?"Hide":"Show"," Suggestions Debug"]}),(0,o.jsx)(eR.O,{componentCounts:e}),(0,o.jsx)("div",{className:eG.jI,children:(0,o.jsx)(eT,{libraryKey:t,externalLibraryKeysInFile:i,scope:n})})]})]})}function eJ({onSelectComponent:e,selectedComponent:n}){return(0,o.jsxs)("div",{className:eG.gn,children:[(0,o.jsx)(i.K,{"aria-label":(0,f.t)("dev_handoff.component_browser.close_component_browser"),onClick:()=>e(null),children:(0,o.jsx)(d.t,{})}),(0,o.jsx)("div",{className:eG.DD,children:n.name}),(0,o.jsx)(eX,{component:n})]})}function eX({component:e}){switch(e.code_connect_info.v1.state){case"connected":let n=e.code_connect_info.v1,t=n.author_name&&n.created_at?(0,f.t)("dev_handoff.component_browser.connected_tooltip",{date:new Date(n.created_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),author:n.author_name}):(0,f.t)("dev_handoff.component_browser.connected");return(0,o.jsx)(a.E,{variant:"componentOutline","data-tooltip-type":ei.Ib.TEXT,"data-tooltip":t,children:(0,f.t)("dev_handoff.component_browser.connected")});case"not_connected":return(0,o.jsx)(a.E,{variant:"inactiveOutline",children:(0,f.t)("dev_handoff.component_browser.not_connected_to_code")});case"ignored":return(0,o.jsx)(a.E,{variant:"inactiveOutline",children:(0,f.t)("dev_handoff.component_browser.no_code_equivalent")});default:return null}}function eQ({onBulkConfirmSuggestions:e,suggestionsAvailableComponents:n,filteredComponents:t,bulkSuggestions:s,dropdownFilter:i,setDropdownFilter:a,entrypoint:l}){return"bulk_suggestions"===function({suggestionsAvailableComponents:e}){return(0,m.kc)().dt_component_browser_bulk_mapping&&e.length>0?"bulk_suggestions":null}({suggestionsAvailableComponents:n})?(0,o.jsxs)(c.wi,{children:[(0,o.jsxs)("div",{className:eG.KB,children:[(0,o.jsx)(_.N,{}),(0,o.jsx)("span",{children:(0,f.t)("dev_handoff.component_browser.possible_matches",{count:n.length})})]}),(0,o.jsx)(c.jk,{children:(0,o.jsx)(r.$n,{variant:"secondary",onClick:()=>{e({selectedComponents:t,bulkSuggestions:s,trackingProps:{location:"in_context_list_view",source:"ai_codebase_suggestion",entrypoint:l}}),("suggestionsAvailable"===i||"notConnected"===i)&&a("connected")},children:(0,f.t)("dev_handoff.component_browser.confirm_all_matches")})})]}):null}function eZ({scope:e,entrypoint:n,listState:t}){let r=(0,et._G)(),i=r??(0,p.l)(""),{activeRowKey:a,displayedComponent:l,inputRefs:d,status:_,onFileChanged:m,onComponentChanged:u,onActiveRowChange:h,onConfirmConnection:g,onConfirmSuggestion:f,onBulkConfirmSuggestions:b,onValueChange:v,onUpdateUserRules:j,onDisplayedComponentChanged:y,externalLibraryKeysInFile:C,onDeleteMapping:N,onIgnoreMapping:k,filteredComponents:S,searchQuery:I,setSearchQuery:T,sortBy:E,setSortBy:P,dropdownFilter:D,setDropdownFilter:R,componentCounts:O,bulkSuggestions:M,suggestionsAvailableComponents:F,searchSessionId:K}=t,A=(0,eo._6)(),L=function(e){let n=(0,x.bc)((0,w.iAs)({libraryKey:e??""}),{enabled:!!e});return!!e&&"errors"!==n.status&&("loading"===n.status?"loading":!!n.data?.libraryKeyToFile?.fileCanAccess)}(i??(0,p.l)("")),B=s.useRef(A.componentKey),[H,W]=s.useState(!1);s.useEffect(()=>{A.componentKey!==B.current&&W(!0)},[A.componentKey]);let G=!B.current||H,U=l&&!0===L?"detail":"list",$=(0,s.useMemo)(()=>{let t=[];return t.push((0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(eW,{searchQuery:I,setSearchQuery:T,dropdownFilter:D,setDropdownFilter:R,sortBy:E,setSortBy:P,scope:e}),(0,o.jsx)(e$,{activeRowKey:a,bulkSuggestions:M,canAccessLibrary:L,dropdownFilter:D,entrypoint:n,filteredComponents:S,inputRefs:d,onActiveRowChange:h,onComponentChanged:u,onConfirmConnection:g,onConfirmSuggestion:f,onDeleteMapping:N,onFileChanged:m,onIgnoreMapping:k,onSelectComponent:y,onValueChange:v,openFileLibraryKey:r,queryStatus:_,searchQuery:I,searchSessionId:K,setDropdownFilter:R},"list-view")]})),"detail"===U&&l&&t.push((0,o.jsx)(eY,{displayedComponent:l,entrypoint:n,onActiveRowChange:h,onComponentChanged:u,onConfirmConnection:g,onConfirmSuggestion:f,onDeleteMapping:N,onFileChanged:m,onIgnoreMapping:k,onSelectComponent:y,onUpdateUserRules:j,onValueChange:v,openFileLibraryKey:r,searchSessionId:K,shouldAnimate:G,suggestions:M[l.assetKey]||[]},"detail-view")),t},[I,T,D,R,E,P,e,a,M,L,n,S,d,h,u,g,f,N,m,k,y,v,r,_,K,U,l,j,G]);return(0,o.jsxs)(c.vo,{children:[(0,o.jsx)(c.Y9,{children:"list"===U?(0,o.jsx)(ez,{componentCounts:O,scope:e,libraryKey:i,externalLibraryKeysInFile:C}):l&&(0,o.jsx)(eJ,{onSelectComponent:y,selectedComponent:l.component})}),(0,o.jsx)(c.nB,{padding:0,className:eG.O,children:(0,o.jsx)(X.v,{animate:G,derenderTimeout:300,animationDuration:eU,children:$})}),"list"===U&&(0,o.jsx)(eQ,{onBulkConfirmSuggestions:b,suggestionsAvailableComponents:F,filteredComponents:S,bulkSuggestions:M,dropdownFilter:D,setDropdownFilter:R,entrypoint:n})]})}function e0({entrypoint:e,libraryKey:n,componentKey:t}){let s=(0,N.WA)({libraryKey:n,defaultFilter:"all",componentKey:t,entrypoint:e});return(0,o.jsx)(eZ,{scope:"file",entrypoint:e,listState:s})}function e1({entrypoint:e,libraryKey:n,componentKey:t}){let s=(0,v.Zh)({libraryKey:n,defaultFilter:"all",componentKey:t,entrypoint:e});return(0,o.jsx)(eZ,{scope:"page_or_selection",entrypoint:e,listState:s})}function e7({scope:e,entrypoint:n}){let t=(0,et._G)()??(0,p.l)(""),s=(0,eo._6)();switch(e){case"file":return(0,o.jsx)(e0,{entrypoint:n,libraryKey:t,componentKey:s.componentKey});case"page_or_selection":return(0,o.jsx)(e1,{entrypoint:n,libraryKey:t,componentKey:s.componentKey});default:throw Error(`Unhandled scope: ${e}`)}}},636763:(e,n,t)=>{t.d(n,{v:()=>d});var o=t(104076),s=t(716976),r=t(428710),i=t(490698),a=t(328341),c=t(864755);let l="component_browser_window_push_container--panel--kS6vh";function d({children:e,dataTestId:n,derenderTimeout:t=300,animate:c,animationDuration:l=200}){let d=s.useMemo(()=>e.flat().filter(e=>!!e),[e]),p=d.length-1,m=(0,a.ZC)(p),u=(0,a.ZC)(d),[h,g]=s.useState([]),f=(0,i.$)(p);s.useLayoutEffect(function(){f&&(void 0!==m&&u&&m>p?(g(u.slice(p+1)),null!==t&&setTimeout(()=>g([]),t)):m!==p&&g([]))},[e,t,p,f,u,m]);let b=s.useMemo(()=>d.concat(h),[d,h]),v=s.useMemo(()=>{let e=(0,r.decimalToPercent)(-p),n=`translateX(${e})`;return{transform:n,WebkitTransform:n,width:"100%",height:"100%",transition:c?`transform ${l}ms ease-in-out`:"none"}},[p,c,l]);return(0,o.jsx)("div",{style:v,className:"component_browser_window_push_container--container--qDOra",children:b.map((e,s)=>(0,o.jsx)(_,{current:s===p,dataTestId:n,timeout:t,children:e},s))})}function _({children:e,current:n,dataTestId:t,timeout:r}){let a=(0,i.h)(n),[d,_]=s.useState(!1);s.useLayoutEffect(()=>{a&&(n||null===r?_(!1):setTimeout(()=>{_(!0)},r))},[n,a,r]);let p={width:"100%",height:"100%"};return(0,o.jsx)(c.H,{isHidden:!n,children:(0,o.jsx)("div",{"aria-hidden":!n,style:p,className:l,"data-testid":n?t??"push-container-current-panel":void 0,children:(0,o.jsx)("div",{style:{...p,display:d?"none":void 0},className:l,children:e})})})}},724991:(e,n,t)=>{t.d(n,{$:()=>a,K:()=>c});var o=t(716976),s=t(653899),r=t(299189),i=t(74620);function a(e){return(e?.split("\n")??[]).map((e,n)=>{let t=Math.floor((e.match(/^(\s*)/)?.[1]||"").length/2);return{code:e,lineNumber:n+1,indent:t}})}function c(e){let n=(0,r.B)(),[t,c]=(0,o.useState)(null),[l,d]=(0,o.useState)(!1),_=(0,i.eY)();return(0,s.h)(()=>{d(!0),n(_.get(e)).then(n=>{if(n.codeConnectForNodes.has(e)){let t=n.codeConnectForNodes.get(e);t&&c({lines:a(t.code),language:"custom"===t.language?"plaintext":t.language,name:"CCv1 snippet",collapseAfterIndex:15})}d(!1)})}),{ccv1Snippet:t,isLoading:l}}},105606:(e,n,t)=>{t.d(n,{K:()=>i});var o=t(716976),s=t(833805),r=t(346670);function i(e,n){let[t]=(0,s.IT)((0,r.sN)(e),{enabled:n});function i(e){try{let n=e.match(/github\.com\/([^\/]+)\/([^\/]+)/);if(n&&n[2])return n[2]}catch(e){}}return(0,o.useCallback)(e=>t.data?.availableRepositories.find(n=>n.name===i(e))?.id||t.data?.availableRepositories.find(n=>n.name.includes(i(e)||""))?.id,[t.data])}},98826:(e,n,t)=>{t.d(n,{K:()=>_});var o=t(716976),s=t(237420),r=t(387092),i=t(795033),a=t(842013),c=t(177328),l=t(473106),d=t(406606);function _(){let e=(0,i.md)(d.gS),n=(0,s.d4)(c.Ls),t=(0,s.d4)(c.m3),_=(0,s.d4)(a.MH),p=(0,s.d4)(a.dM);return o.useMemo(()=>{if(!e)return null;if(e.isPublished){if(e.type===l.P.COMPONENT)return n[(0,r.Po)(e.assetKey)]??null;if(e.type===l.P.STATE_GROUP)return t[(0,r.Po)(e.assetKey)]??null}else{if(e.type===l.P.COMPONENT)return _[e.assetKey]??null;if(e.type===l.P.STATE_GROUP)return p[e.assetKey]??null}return null},[n,t,_,p,e])}}}]);

//# debugId=42e86100-9f7e-5360-afca-cb5aff26d937

//# sourceMappingURL=https://admin.figma.com/admin/webpack-artifacts/c15d83e2c0be0d2619c1777d7dd67194d8758fda/5995-4d4aefd96275be21.min.js.map