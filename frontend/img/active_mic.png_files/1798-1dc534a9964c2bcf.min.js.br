"use strict";
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="3ab0220c-11bc-5fa4-b807-90d17c2047fd")}catch(e){}}();
(globalThis.webpackChunk_figma_web_bundler=globalThis.webpackChunk_figma_web_bundler||[]).push([[1798],{285490:(e,t,n)=>{n.d(t,{Lt:()=>a,ai:()=>i,hF:()=>r,kL:()=>o});let o="whiteboard_menu_selector--container--ye4aw",i="whiteboard_menu_selector--chevron--kjs2p",r="whiteboard_menu_selector--input--GTjdY",a="whiteboard_menu_selector--select--nLTil text--fontNeg12--2PWcg text--_fontBase--QdLsd text--_negText--j9g-L"},915019:(e,t,n)=>{n.d(t,{IK:()=>l,ff:()=>c,om:()=>s});var o=n(716976),i=n(641518),r=n(361170),a=n(692042);function l(e,t,n,i,l){let s=(0,a._X)({subscribeToUpdates_expensive:!n});return o.useMemo(()=>{if(n)return l(e,t);{let n=(0,a.$g)(s,new r.Mi(e,t));return new r.Mi(n.x-i/2,n.y+30)}},[n,l,e,t,s,i])}function s(e,t,n){let[r,a]=o.useState(!1),l=i.v_(n,"keydown",o.useCallback(n=>"Shift"!==n.key?i.aH:(a(!0),e&&t)?void 0:i.aH,[e,t,a])),s=i.v_(n,"keyup",o.useCallback(n=>"Shift"!==n.key?i.aH:(a(!1),e&&t)?void 0:i.aH,[e,t,a]));return o.useEffect(()=>(document.addEventListener("keydown",l),document.addEventListener("keyup",s),()=>{document.removeEventListener("keydown",l),document.removeEventListener("keyup",s)}),[l,s]),{pressingShiftKey:r,setPressingShiftKey:a}}function c(e,t,n){let[i,r]=o.useState(0);return o.useEffect(()=>{if(!e)return;let n=n=>{!n.shiftKey&&e&&t(!1)};return document.addEventListener("mousemove",n),()=>{document.removeEventListener("mousemove",n)}},[e,t]),{shouldModalHide:o.useMemo(()=>e&&!n&&i<=1,[e,n,i]),incrementTimesInteractedWithModal:o.useCallback(()=>{r(e=>e+1)},[r])}}},7331:(e,t,n)=>{n.d(t,{X:()=>k});var o=n(104076),i=n(716976),r=n(237420),a=n(369392),l=n(298874),s=n(344725),c=n(573820),d=n(965815),p=n(266808),u=n(170627),_=n(511570),h=n.n(_),m=n(221586),g=n(823736),y=n(331497),v=n(737139),x=n(936774),I=n(34246),f=n(425045),N=n(259595);let T="stack_controls--input--gK1jo text--fontNeg12--2PWcg text--_fontBase--QdLsd text--_negText--j9g-L",E="stack_controls--scrubbableControl--b1ChI",b="stack_controls--inputSvg--wFizL",A="stack_controls--stackSpacingRow--Uus3H";function O(){let e=(0,y.J2)(p.Ez5.canvasViewState().focusedStackRegion);if(!e)return null;let{region:t,focus:n}=e;return t===p.RN9.SPACING?(0,o.jsx)(P,{focusOnMount:n}):t===p.RN9.COUNTER_SPACING?(0,o.jsx)(S,{focusOnMount:n}):(0,o.jsx)(C,{stackRegion:t,focusOnMount:n})}let j=e=>{if(e.keyCode===m.Uz.TAB){e.preventDefault(),e.currentTarget.blur();let t=e.shiftKey;p.Qa7.tabActiveStackRegion(t)}};function P({focusOnMount:e}){return(0,o.jsx)(v.fI,{className:A,children:(0,o.jsx)(N.KI,{focusOnMount:e,inputClassName:T,inputTestId:"stackSpacingControl",noBorderOnFocus:!0,onBlur:p.Qa7.clearActiveStackRegion,onCanvasUI:!0,onKeyDown:j,onPaste:D,outerClassName:E,recordingKey:"stackSpacingControl",source:"canvas",svgClassName:b})})}function S({focusOnMount:e}){return(0,o.jsx)(v.fI,{className:A,children:(0,o.jsx)(x.q,{focusOnMount:e,inputClassName:T,inputTestId:"stackCounterSpacingControl",noBorderOnFocus:!0,onBlur:p.Qa7.clearActiveStackRegion,onCanvasUI:!0,onKeyDown:j,onPaste:D,outerClassName:E,recordingKey:"stackCounterSpacingControl",source:"canvas",svgClassName:b})})}function C({stackRegion:e,focusOnMount:t}){let[n]=(0,f.HF)(e),i=Array.isArray(n)?n.length:0;return e===p.RN9.SPACING?null:(0,o.jsx)(v.fI,{className:h()("stack_controls--stackPaddingRow--40WUa",{"stack_controls--large--bJFUN":i>3}),children:(0,o.jsx)(I.s,{disableVariablesEntryPoint:!0,focusOnMount:t,inputClassName:T,inputTestId:"stackPaddingControl",noBorderOnFocus:!0,onBlur:p.Qa7.clearActiveStackRegion,onKeyDown:j,onPaste:D,outerClassName:E,paddingSelection:e,recordingKey:"stackPaddingControl",source:"canvas",svgClassName:b})})}function D(e){(0,g.gk)(e)&&(e.preventDefault(),e.currentTarget.blur(),u.l7.user("paste-in-stack",()=>{p.glU.triggerAction("paste",{})}))}let k=i.memo(function(){return(0,r.d4)(e=>e.mirror.appModel.isReadOnly)?null:(0,o.jsx)(w,{})});function w(){return(0,o.jsx)(a.k,{isShown:!0,children:(0,o.jsx)(c.IA,{children:(0,o.jsx)(R,{testID:"DesignInlineMenu"})})})}function R({testID:e}){let t=(0,r.d4)(e=>{let t=e.mirror.selectionProperties.stackMode;return 1===e.mirror.selectionProperties.numSelected&&("HORIZONTAL"===t||"VERTICAL"===t||"GRID"===t)});return(0,r.d4)(e=>{let t=e.mirror.selectionProperties.selectedWidgetInfo;return!!(1===e.mirror.selectionProperties.numSelected&&t?.propertyMenu.length)})?(0,o.jsxs)(d.W1,{size:"small",testID:e,children:[(0,o.jsx)(l.jk,{}),(0,o.jsx)(s.x,{})]}):t?(0,o.jsx)(d.W1,{testID:e,darkModePreferred:!0,children:(0,o.jsx)(O,{},"stackControls")}):null}},277159:(e,t,n)=>{n.d(t,{f:()=>g});var o=n(104076),i=n(716976),r=n(641518),a=n(361170),l=n(665261),s=n(652539),c=n(506192),d=n(215853),p=n(398585),u=n(72832),_=n(642544),h=n(201128),m=n(954184);function g({resolvedTypes:e,recordingKey:t}){let{showing:n,toggle:l,hide:u}=(0,c.BK)("expression-builder-create-variable"),_=i.useRef(null),g=r.rf(r.Pt(t,"createVariableDropdown"),"click",i.useCallback(()=>{1===e.length?f(e[0]):l()},[e,l])),[v,x]=i.useState(!1),I=i.useRef(null),f=e=>{let t=_.current?.getBoundingClientRect();t&&(I.current={initialPosition:new a.Mi(t.left,t.top),resolvedType:e},x(!0))},N=()=>{x(!1)};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("button",{ref:_,className:h.ZS,onClick:g,children:(0,o.jsx)(s.B,{svg:m.A})}),v&&(v&&I.current?(0,o.jsx)(p.U,{initialPosition:I.current.initialPosition,initialWidth:p.i,resolvedType:I.current.resolvedType,onCreateVariable:N,onClose:N}):null),n&&_.current&&(0,o.jsx)(d.Cf,{arrowOffsetFromRectLeft:14,leanPadding:0,lean:"right",targetRect:_.current.getBoundingClientRect(),children:e.map(e=>(0,o.jsx)(y,{resolvedType:e,onClose:u,showCreationModal:f,recordingKey:t},e))})]})}function y({resolvedType:e,onClose:t,showCreationModal:n,recordingKey:a}){let s=(0,_.F)(e),c=r.rf(r.Pt(a,"createVariableOption",s.name),"click",i.useCallback(()=>{n(e),t()},[t,e,n]));return(0,o.jsxs)(l.c$,{className:h.Fs,onClick:c,children:[(0,o.jsx)(u.i,{type:e,showTooltip:!1}),s.name]})}},722850:(e,t,n)=>{let o;n.d(t,{E:()=>e7});var i=n(104076),r=n(716976),a=n(237420),l=n(276800),s=n(420680),c=n(187714),d=n(140458),p=n(300558),u=n(266808),_=n(170627),h=n(264993),m=n(812714),g=n(795033),y=n(511570),v=n.n(y),x=n(983500),I=n(308424),f=n(140490),N=n(641518),T=n(550209),E=n(361170),b=n(849757),A=n(192075),O=n(278491),j=n(354114),P=n(823736),S=n(553065),C=n(74620),D=n(211862),k=n(915019),w=n(205088),R=n(208740),L=n(349311),M=n(25870),U=n(316923),K=n(883765),V=n(76616),B=n(653899),F=n(660838),H=n(559954),Y=n(911990),G=n(737139),z=n(652539),W=n(236631),X=n(560201),J=n(420906);let $=(0,X.ex)("prototype_action_info",function(){return(0,i.jsxs)("div",{className:W.s.flex.itemsCenter.justifyCenter.$,children:[(0,i.jsx)(z.B,{className:"prototype_action_info_tooltip--prototypeDestinationInfoIcon--GeQWS",svg:J.A}),(0,i.jsx)("span",{className:W.s.flexGrow1.m6.$,style:{maxWidth:144},children:(0,A.tx)("proto.prototype_panel.use_the_circular_node_to_connect_the_selected_object_to_another_frame_tooltip")})]})},()=>({unconstrainWidth:!0}));var q=n(766317),Z=n(239077),Q=n(167151),ee=n(919778),et=n(805562),en=n(39456),eo=n(337534),ei=n(746371),er=n(968169),ea=n(950241),el=n(237263),es=n(355225);function ec({onChange:e,value:t,shouldFocusKeyCaptureField:n,setShouldFocusKeyCaptureField:o}){let a;let l=(0,es._i)(t?.keyCodes),s=t=>e({keyCodes:t,triggerDevice:"KEYBOARD"}),[c,d]=r.useState(!1),p=r.useRef(null);r.useEffect(()=>{(!t||!t.keyCodes||0===t.keyCodes.length)&&n&&p.current&&(o(!1),p.current.focus(),d(!0))},[o,n,t]),r.useEffect(()=>{if(!c)return()=>{};let t=new el.L,n=t.onPress(t=>{e({keyCodes:[t.buttons[0]],triggerDevice:t.controllerType}),requestAnimationFrame(()=>{document.activeElement instanceof HTMLElement&&document.activeElement.blur()})});return t.start(),()=>{n.release(),t.end()}},[e,c]);let u=null,_=(0,es.E8)(t);return c?a=(0,i.jsx)(ed,{children:(0,A.tx)("proto.keyCapture.press_key_lowercase")}):t?.triggerDevice==="KEYBOARD"&&l?u=(0,es.U8)(l):_?u=_:a=(0,i.jsx)(ed,{children:(0,A.tx)("proto.keyCapture.click_to_set_key")}),(0,i.jsx)(G.rp,{ref:p,className:"prototype_key_capture_field--root--bD21s","data-tooltip-type":L.Ib.TEXT,"data-tooltip":u&&u.length>10?u:null,onFocus:()=>d(!0),onBlur:()=>d(!1),onKeyDown:e=>{e.preventDefault(),e.stopPropagation();let t=e.which||e.keyCode;!es.RI.has(t)&&es.pu[t]&&(t===l?.keyCode&&e.repeat?s((0,es.wb)({keyCode:t,metaKey:e.metaKey||l.metaKey,shiftKey:e.shiftKey||l.shiftKey,ctrlKey:e.ctrlKey||l.ctrlKey,altKey:e.altKey||l.altKey})):s((0,es.wb)({...e,keyCode:t})),document.activeElement instanceof HTMLElement&&document.activeElement.blur())},recordingKey:"keycapture",children:u??a})}function ed({children:e}){return(0,i.jsx)("span",{className:"prototype_key_capture_field--placeholder--gWUKF",children:e})}var ep=n(818706),eu=n(302727),e_=n(452981),eh=n(287211);n(120440);var em=n(241421),eg=n(951770),ey=n(374618);let ev=new em.VG,ex=new em.EX,eI=new em.JV,ef=new em.Eq;function eN(e){let t=(0,Q.cJ)(),{showVideoV2Triggers:n}=(0,eh.R)(e=>({allStatesInSelection:e.mirror.selectionProperties.stateGroupSelectionInfo?.mode===u.iCO.STATE,allTopLevelFramesInSelection:!!e.mirror.selectionProperties.allTopLevelFramesInSelection,showVideoV2Triggers:(0,eg.dq)(e.mirror.selectionProperties)})),o=(0,g.md)(ey.NE)?"ON_MEDIA_HIT"!==e.property?ex:ef:"ON_MEDIA_HIT"!==e.property?ev:eI,r=t=>{let r=(0,i.jsx)("div",{className:"transition_interaction_dropdown--prototypeInteractionIcon---njby",children:(0,eg.e7)(t)});return(0,i.jsx)(eu.Option,{value:String(t),disabled:!function(t){if("NONE"===t)return!0;let o=!!e.interactionsOnSelectedNodes&&e.interactionsOnSelectedNodes.every(t=>e.interactionsOnSelectedNodes&&h.aI(t.sourceNodeID,e.interactionsOnSelectedNodes[0].sourceNodeID))&&!(0,S.hS)(e.property),i=(function(){if(e.interactionsOnSelectedNodes)return new Set(e.interactionsOnSelectedNodes.map(e=>e?.event?.interactionType).filter(e=>void 0!==e))})()?.has(t)&&(0,S.hS)(e.property)&&e.property!==t;return(!o&&!i||!!["ON_KEY_DOWN","DRAG","ON_VOICE","ON_MEDIA_HIT"].includes(t))&&("AFTER_TIMEOUT"===t?!e.interactionContainsOpenLinkAction:"ON_MEDIA_HIT"===t||"ON_MEDIA_END"===t?n:(!e.interactionContainsOpenLinkAction||"ON_CLICK"===t||"MOUSE_UP"===t)&&(!e.interactionContainsUpdateMediaRuntime||"ON_HOVER"!==t&&"ON_PRESS"!==t&&"DRAG"!==t)&&(!e.interactionOnlyContainsBack||"ON_HOVER"!==t&&"ON_PRESS"!==t))}(t),children:(0,i.jsxs)("div",{className:"x78zum5 x6s0dn4 x167g77z",children:[(0,i.jsx)("div",{className:"x78zum5 x6s0dn4 x1kky2od xlup9mm",children:r}),o.format(t)]})},t)},a=(t?[]:["NONE"]).map(r),l=["ON_CLICK",...t?[]:["DRAG"],"ON_HOVER","ON_PRESS","ON_KEY_DOWN"].map(r),s=["MOUSE_ENTER","MOUSE_LEAVE","MOUSE_DOWN","MOUSE_UP"].map(r),c=(t?[]:["ON_MEDIA_HIT","ON_MEDIA_END"]).map(r),d=["AFTER_TIMEOUT"].map(r),p=[...a,!t&&(0,i.jsx)(eu.Separator,{},"select1"),...l,(0,i.jsx)(eu.Separator,{},"select2"),...s,!t&&(0,i.jsx)(eu.Separator,{},"select3"),...d,...!t&&n?[(0,i.jsx)(eu.Separator,{},"select4"),...c]:[]],_=(0,S.E7)(e.property);return(0,i.jsxs)(eu.Root,{value:_?String(_):void 0,onChange:t=>{t&&e.onChange(t)},recordingKey:N.Pt(e,"select"),children:[(0,i.jsx)(eu.Trigger,{"data-testid":"interaction-select",iconLead:_?(0,i.jsx)("div",{className:"x180r7m8",children:(0,eg.e7)(_)}):void 0,label:(0,i.jsx)(e_.h,{children:(0,A.tx)("proto.trigger")}),width:"fill",children:(0,i.jsx)("span",{"data-testid":"interaction-select-label",children:_?o.format(_):(0,S.gl)(e.property)?(0,A.tx)("fullscreen.mixed"):void 0})}),(0,i.jsx)(eu.Container,{children:p})]})}var eT=n(748624),eE=n(294044);let eb={keyCodes:[],triggerDevice:"KEYBOARD"};function eA(e,t,n){return(0,i.jsx)(ep.A,{label:e,input:t,appendedClassName:n?void 0:eE.dU})}function eO(e){let{detailPropsMultipleActions:t,interactionsOnSelectedNodesAndComponents:n,updateSelectionProperties:o}=(0,eT.Ay)(e.category),{interactionType:l,transitionTimeout:s=.8,mediaHitTime:c=0,interactionMaintained:d=!1,interactionDuration:p=.3,keyTrigger:u=eb}=t.interactionEvent,_=(0,g.md)(q.Cw),h=r.useMemo(()=>!l&&_>1||l&&_>0?S.oV:l||"NONE",[l,_]),m=(e,t)=>{if(e.connectionType===t)return e;if("CONDITIONAL"===e.connectionType)for(let n of(0,S.hS)(e.conditionalActions)&&e.conditionalActions?e.conditionalActions:[]){let e=n.actions?n.actions.find(e=>e.connectionType===t):void 0;if(void 0!==e)return e}return null},y=void 0!==t.interactionActions.find(e=>m(e,"URL")),v=void 0!==t.interactionActions.find(e=>m(e,"UPDATE_MEDIA_RUNTIME")),x=1===t.interactionActions.length&&"BACK"===t.interactionActions[0].connectionType,I=void 0!==t.interactionActions.find(e=>m(e,"CONDITIONAL"));return function(e){let t=(0,a.wA)(),n=e.updateSelectionProperties,o=(0,er.RU)(),[l,s]=r.useState(!1),c=(0,F.YT)(),d=c===F.Oz.SINGLE_COL,p=c===F.Oz.TWO_COL,u=!0===(0,S.E7)(e.maintained),_=(0,S.E7)(e.keyTrigger),h="ON_KEY_DOWN"===(0,S.E7)(e.interactionType),m="AFTER_TIMEOUT"===(0,S.E7)(e.interactionType),g="ON_MEDIA_HIT"===(0,S.E7)(e.interactionType),y=["MOUSE_IN","MOUSE_OUT","MOUSE_ENTER","MOUSE_LEAVE","MOUSE_DOWN","MOUSE_UP"].indexOf((0,S.E7)(e.interactionType)||"")>-1,v=r.useId(),x=(0,i.jsx)(eN,{ariaLabel:(0,A.t)("proto.trigger"),ariaLabelledBy:v,className:eE.sQ,interactionContainsOpenLinkAction:e.interactionContainsOpenLinkAction,interactionContainsUpdateMediaRuntime:e.interactionContainsUpdateMediaRuntime,interactionOnlyContainsBack:e.interactionOnlyContainsBack,interactionsOnSelectedNodes:e.interactionsOnSelectedNodes,onChange:o=>{V.sn.start("interaction_details_changed"),n({interactionType:o}),t((0,w._P)({name:"Prototype Interaction Type Changed",params:{newType:o,oldType:(0,S._W)(e.interactionType,"MIXED")}})),"ON_KEY_DOWN"===o&&s(!0)},property:e.interactionType,recordingKey:N.Pt(e,"interactionDropdown")}),I=d?(0,i.jsx)(ep.A,{labelId:v,label:(0,A.t)("proto.trigger"),input:x}):(0,i.jsx)("div",{className:eE.BX,children:x}),f=(0,i.jsxs)(i.Fragment,{children:[m&&eA((0,A.t)("proto.delay"),(0,i.jsx)(ea.W4,{className:eE.Lp,"data-tooltip":(0,A.t)("proto.trigger.after_delay_timeout"),"data-tooltip-type":L.Ib.TEXT,dataTestId:"timeout-input",dispatch:t,inputClassName:eE.Gl,max:20,onValueChange:e=>{n({transitionTimeout:e})},recordingKey:N.Pt(e,"timeoutInput"),scrubMultiplier:o/1e3,tooltipForScreenReadersOnly:!0,value:e.timeout,wheelMultiplier:o/1e3,children:(0,i.jsx)(eo.L,{className:eE.d4})}),d),h&&eA((0,A.t)("proto.key"),(0,i.jsx)(ec,{onChange:e=>{n({keyTrigger:e})},value:_,shouldFocusKeyCaptureField:l,setShouldFocusKeyCaptureField:s}),d),g&&eA((0,A.t)("proto.time"),(0,i.jsx)(ea.qd,{className:eE.Ym,"data-tooltip":(0,A.t)("proto.trigger.video_hit_time"),"data-tooltip-type":L.Ib.TEXT,dataTestId:"mediaHitTime-input",dispatch:t,displayFractions:!0,inputClassName:eE.vE,max:3600,onValueChange:e=>{n({mediaHitTime:e})},recordingKey:N.Pt(e,"mediaHitTimeInput"),scrubMultiplier:o/1e3,tooltipForScreenReadersOnly:!0,value:e.mediaHitTime,wheelMultiplier:o/1e3,children:(0,i.jsx)(ei.R,{})}),d),y&&eA((0,A.t)("proto.delay"),(0,i.jsx)(ea.W4,{allowEmpty:!0,className:eE.Lp,"data-tooltip":(0,A.t)("proto.trigger.after_delay_timeout"),"data-tooltip-type":L.Ib.TEXT,dataTestId:"duration-input",dispatch:t,inputClassName:eE.Gl,min:0,onValueChange:e=>{n(e&&e>0?{interactionMaintained:!0,interactionDuration:e}:{interactionMaintained:!1})},placeholder:(0,A.t)("proto.trigger.add_delay_placeholder"),recordingKey:N.Pt(e,"delayInput"),scrubMultiplier:o/1e3,tooltipForScreenReadersOnly:!0,value:u?e.interactionDuration:void 0,wheelMultiplier:o/1e3,children:(0,i.jsx)(eo.L,{className:eE.d4})}),d)]});return(0,i.jsxs)("div",{className:p?eE.eU:void 0,children:[I,f]})}({...e,updateSelectionProperties:o,interactionType:h,interactionContainsOpenLinkAction:y,interactionContainsUpdateMediaRuntime:v,interactionOnlyContainsBack:x,interactionContainsConditionalAction:I,timeout:s,maintained:d,interactionDuration:p,mediaHitTime:c,keyTrigger:u,interactionsOnSelectedNodes:n,recordingKey:N.Pt(e.recordingKey,F.Qe)})}let ej="prototype_interaction_edit_modal--contentContainer--bo2b4",eP="prototype_interaction_edit_modal--ui3TwoColContentContainer--x9vrG",eS="prototype_interaction_edit_modal--ui3SingleColContentContainer--uF-ir",eC="prototype_interaction_edit_modal--ui3CollapsedModalHeaderButtons--7yPuD",eD="prototype_interaction_edit_modal--dividerHorizontal--3wvnB",ek="prototype_interaction_edit_modal--ui3InteractionsPanelContentRight--bVfG8";function ew(e){let{selectedInteractions:t,makeUpdateSelectionPropertiesForActionIndex:n,makeUpdateMultipleDestinationNodesForActionIndex:o,differentLengthActions:a,mergedActions:l}=(0,eT.Ay)(e.category,e.filterOutNoneActions),s=void 0!==l.find(e=>"CONDITIONAL"===e.connectionType),{selectedActionIndex:c,onSelect:d}=e,p=(0,F.YT)(),u=p===F.Oz.SINGLE_COL,_=p===F.Oz.TWO_COL,{expandedRows:h,setExpandedRows:m,deleteButtonPressed:y,newActionIndexPath:x,resetNewActionIndexPath:I}=e,f=(0,g.md)(q.jM),T=(0,Q.cJ)()&&(0,ee.kc)({interactionType:e.interactionType,actions:l});r.useEffect(()=>{x&&!x?.equals([])&&(d(x.path,!0),I())},[h,m,x,I,d]);let E=r.useCallback(e=>{h.find(t=>t.equals(e))?m(h.filter(t=>!t.equals(e))):m([...h,new en.Op(e)])},[h,m]),b=r.useCallback(n=>{var o=n.dropItem;if((0,S.gl)(o)||(0,en.qQ)(n.dragItem.action))return;let i=e.interactionsOnSelectedNodes;if(!i||!t)return;for(var r=0;r<t?.length;r++){let e=t[r];if(e&&e.actions){let i=e.actions,a=(0,en.Vp)(i,c,h,o,n.position);if(a.newSelectedActionIndex&&_&&d(a.newSelectedActionIndex.path,!0),a.newActions&&(t[r].actions=a.newActions),a.newExpandedRows){if(_){let e=[];a.newActions?.forEach((t,n)=>{"CONDITIONAL"===t.connectionType&&e.push(new en.Op([n]))}),m(e)}else m(a.newExpandedRows)}}}let a=i.map(e=>t.find(t=>t.id===e.id)??e);j.Y5.updateSelectionProperties({prototypeInteractions:a})},[h,m,e.interactionsOnSelectedNodes,c,t,d,_]),O=v()({"prototype_interaction_edit_modal--panelUI3--WK3CN":!0,"prototype_interaction_edit_modal--panelUI3TwoColumn--V5gi4":_});return T?(0,i.jsx)(Z.r,{isInteractionModal:!0}):(0,i.jsx)(H.hh,{children:(0,i.jsxs)(G.Zk,{className:O,children:[e.shouldHideTitle?null:(0,i.jsx)(G.fI,{children:(0,i.jsx)(G.U8,{title:(0,A.t)("proto.interaction.interaction"),dataTooltipContentKey:$,dataTooltipTimeoutDelay:50})}),(0,i.jsx)("div",{children:(0,i.jsxs)(i.Fragment,{children:[u&&(0===f.length?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(eO,{category:e.category,recordingKey:F.dJ,headerButtons:(0,i.jsx)(i.Fragment,{})}),(0,i.jsx)("div",{className:"prototype_interaction_edit_modal--dividerHorizontalUI3--HMCeE"})]}):(0,i.jsx)(Y.Y,{direction:"horizontal",padding:{horizontal:16,vertical:8},children:(0,i.jsx)(G.JU,{children:(0,A.tx)("fullscreen.mixed")})})),a&&(0,i.jsx)(Y.Y,{direction:"horizontal",padding:{horizontal:16,vertical:8},children:(0,i.jsx)(G.nV,{children:(0,A.tx)("fullscreen.properties_panel.click_plus_to_replace_mixed_content")})}),!a&&0===f.length&&(0,i.jsx)(i.Fragment,{children:l?.map((r,a)=>i.jsx(et.P,{action:r,actionIndexPath:[a],autoOpenExpressionBuilder:e.autoOpenExpressionBuilder,autoOpenVariablePicker:e.autoOpenVariablePicker,expandedRows:h,interactionType:e.interactionType,isNarrowPanel:!s,isNestedInConditional:!1,numActions:l.length,onDeleteAction:()=>y(a),onDrop:b,onExpand:E,onNewActionAdded:e.onNewActionAdded,onSelect:e.onSelect,recordingKey:N.Pt(e.recordingKey,F.eG,a),selectedActionIndex:c,selectedInteractions:t,setAutoOpenExpressionBuilder:e.setAutoOpenExpressionBuilder,stateManagementVersion:e.stateManagementVersion,updateMultipleDestinationNodes:o(a),updateSelectionProperties:n(a)},a))})]})})]})})}var eR=n(293422),eL=n(475477),eM=n(836982),eU=n(58212),eK=n(313865);function eV({transition:e,recordingKey:t,updateSelectionProperties:n,stateManagementVersion:o,selectedInteractions:r}){let l=(0,a.wA)(),s=(0,F.YT)()===F.Oz.SINGLE_COL,c=s?eR.IK:eR.$n,d=1===o?(0,i.jsx)(c,{variant:"secondary",onClick:()=>{K.az.trackDefinedEvent("prototype.state_management_noodle_reverted",{num_interactions:r.length}),n({stateManagementVersion:0})},recordingKey:N.Pt(t,"revert-state-management-version"),htmlAttributes:{"data-testid":"revert-state-management-button"},children:(0,A.tx)("proto.state_management.revert_controls")}):(0,i.jsx)(c,{variant:"primary",onClick:()=>{for(let t of(K.az.trackDefinedEvent("prototype.state_management_noodle_upgraded",{num_interactions:r.length,preserve_scroll_position_value:!!e.preserveScroll}),r))(0,F.uU)(t.stateManagementVersion)&&t.id&&t.sourceNodeID&&eK.zZ.recordInteractionUpgraded(t.id,t.sourceNodeID);n({...(0,S.hS)(e.preserveScroll)&&(0,S.hS)(o)?{transitionResetScrollPosition:!e.preserveScroll}:{},stateManagementVersion:1}),l(eU.F.enqueue({type:"state-management-updated",message:(0,A.t)("proto.state_management.visual_bell_updated_message"),button:{text:(0,A.t)("proto.state_management.visual_bell_update_all"),action:()=>{j.Y5.triggerActionInUserEditScope("update-interactions-state-management-on-page"),l(eU.F.enqueue({type:"state-management-updated-all",message:(0,A.t)("proto.state_management.visual_bell_update_all_message")}))}}}))},recordingKey:N.Pt(t,"update-state-management-version"),children:(0,A.tx)("proto.state_management.update_controls")}),p=1===o?(0,A.tx)("proto.state_management.new_controls"):(0,A.tx)("proto.state_management.old_controls"),u=(0,i.jsx)(eL.N,{trusted:!0,newTab:!0,href:"https://help.figma.com/hc/articles/14397859494295",children:(0,A.tx)("proto.state_management.controls_help_link_new")}),_=(0,i.jsxs)("div",{className:"prototype_state_management_version_panel--containerUI3--V5tpG",children:[(0,i.jsx)(e_.J,{children:p}),(0,i.jsx)(e_.J,{children:u}),d]}),h=(0,i.jsxs)("div",{className:"prototype_state_management_version_panel--containerUI3TwoCol--AAp8u",children:[(0,i.jsx)("span",{className:"prototype_state_management_version_panel--labelWrapperUI3--37g5A",children:(0,i.jsx)(e_.J,{children:p})}),(0,i.jsx)("span",{className:"prototype_state_management_version_panel--helpLinkWrapperUI3--BttuC",children:u}),d]});return(0,i.jsx)(eM.k,{name:"prototype_state_management_version_panel",children:(0,i.jsx)(G.Zk,{className:"prototype_state_management_version_panel--panelUI3--8-Db5",children:s?_:h})})}let eB="created_noodle";function eF(e){let{shouldHideTitle:t=!1,category:n,newActionIndexPath:o}=e,r=(0,F.YT)()===F.Oz.TWO_COL,{detailProps:a,detailPropsMultipleActions:l,interactionsOnSelectedNodesAndComponents:s,updateSelectionProperties:c,selectedInteractions:d}=(0,eT.Ay)(e.category,e.filterOutNoneActions);(0,B.h)(()=>{if(void 0!==V.sn.get(eB)){let e=V.sn.stop(eB);(0,K.sx)(eB,{elapsedMs:e,numConnectors:d.length},{forwardToDatadog:!0})}});let{showPanel:p,transition:u}=(0,F.n6)(a,l,d),{interactionType:_="NONE",interactionMaintained:h=!1,interactionDuration:m=.3,keyTrigger:g=eb,transitionTimeout:y=.8,mediaHitTime:v=0}=l.interactionEvent,x=(0,F.iC)(d),I=(0,i.jsx)(ew,{autoOpenExpressionBuilder:e.autoOpenExpressionBuilder,autoOpenVariablePicker:e.autoOpenVariablePicker,category:n,deleteButtonPressed:e.deleteButtonPressed,expandedRows:e.expandedRows,filterOutNoneActions:e.filterOutNoneActions,interactionDuration:m,interactionType:_,interactionsOnSelectedNodes:s,keyTrigger:g,maintained:h,mediaHitTime:v,newActionIndexPath:o,onNewActionAdded:e.onNewActionAdded,onSelect:e.onSelect,recordingKey:N.Pt(e,F.Qe),resetNewActionIndexPath:e.resetNewActionIndexPath,selectedActionIndex:e.selectedActionIndex,setAutoOpenExpressionBuilder:e.setAutoOpenExpressionBuilder,setExpandedRows:e.setExpandedRows,shouldHideTitle:t,stateManagementVersion:x,timeout:y});return(0,i.jsxs)("div",{children:[I,!r&&p&&(0,i.jsx)(eV,{transition:u,recordingKey:N.Pt(e,"stateManagementVersionPanel"),updateSelectionProperties:c,stateManagementVersion:x,selectedInteractions:d})]})}var eH=n(472831),eY=n(694908),eG=n(506426),ez=n(643330),eW=n(813141),eX=n(577841);function eJ(e,t,n){let[o,i,r]=e.path;if(void 0===o||void 0===i||void 0===r)return;let a=t[o]?.conditionalActions;if((0,S.hS)(a)){let e=a?.[i]?.actions?.length??0;if(r>=e){if(0===e){n([o],!0);return}n([o,i,r-1],!0);return}}}function e$(e,t,n){let o=e.path[0]>=t.length,i=0===e.path.length;if(o){n([t.length-1],!0);return}if(i){n([0],!0);return}}var eq=n(389724),eZ=n(347080);let eQ=()=>{u.glU?.setSelectedInteractions([]),(0,m.kc)().prototype_ai_magic_link_show_suggestion_toast&&j.Y5.showMagicLinkSuggestedVisualBell("create_node_transition"),j.Y5.deselectProperty()},e0=(0,x.jz)("197px"),e1=(0,x.c8)("50%");function e2(e){var t;return e&&o?.height<369?o=t={...o,height:369}:o??={width:440,height:e?369:320,leftWidthPct:45}}let e7=r.memo(function(e){return(0,i.jsx)(f.u,{label:"InContextPrototypeInteractionEditModal",children:(0,i.jsx)(e4,{...e})})}),e4=r.memo(function({filterOutNoneActions:e}){let t=(0,a.d4)(e9),n=(0,eT.HS)(),{selectedInteractions:o}=(0,eT.Ay)(n,e),r=o.length>0,{pressingShiftKey:l,setPressingShiftKey:s}=(0,k.om)(t,r,F.dJ);if((0,eW.G)()||!t||!r)return null;let c=o.some(e=>e.actions?.some(e=>"CONDITIONAL"===e.connectionType));return(0,i.jsx)(e5,{category:n,containsConditional:c,pressingShiftKey:l,setPressingShiftKey:s,initialX:t.initialX,initialY:t.initialY,shouldPin:t.shouldPin,filterOutNoneActions:e})}),e5=r.memo(function({category:e,containsConditional:t,pressingShiftKey:n,initialX:l,initialY:p,shouldPin:m,setPressingShiftKey:y,filterOutNoneActions:f}){let O;let S=(0,a.wA)(),[K,V]=r.useState(!1),[,B]=(0,g.fp)(eX.x),H=(0,r.useRef)(null),Y=m||K,{shouldModalHide:G,incrementTimesInteractedWithModal:z}=(0,k.ff)(n,y,Y),W=(0,F.YT)(),X=W===F.Oz.SINGLE_COL,J=W===F.Oz.TWO_COL,[$,Z]=r.useState(new en.Op([0])),{selectedInteractions:et,differentLengthActions:eo,interactionsOnSelectedNodesAndComponents:ei,mergedActions:er,detailProps:ea,detailPropsMultipleActions:el,updateSelectionProperties:es}=(0,eT.Ay)(e,f),ec=el.interactionEvent.interactionType??"NONE",ed=(0,Q.cJ)();var ep=$.path.length>0?$:new en.Op([0]);let eu=ep.isConditional(),e_=(e,t)=>ep=new en.Op(e);ep.path[0]>=er.length&&!eu?e$($,er,e_):eu&&eJ($,er,e_);let eh=r.useCallback((e,t)=>{t?Z(new en.Op(e)):Z(new en.Op([]))},[]);r.useEffect(()=>{if(0===er.length&&!f){(0,T.us)("the interactions panel should always have actions if rendered");let e=JSON.parse(JSON.stringify(et));for(let t of e)if(t&&t.actions?.length===0){let e={connectionType:"NONE"};t.actions=[e]}let t=ei.map(t=>e.find(e=>h.aI(e.id,t.id))??t);j.Y5.updateSelectionProperties({prototypeInteractions:t})}let e=$.isConditional();if(e){if(e){eJ($,er,eh);return}}else{e$($,er,eh);return}},[er,$,eh,et,ei,f]);let{shouldShowAdvancedPrototypingPaywall:em,showAdvancedPrototypinglMultipleActionsModal:eg}=(0,F.zt)(),{showPanel:ey,transition:ev}=(0,F.n6)(ea,el,et),ex=(0,F.iC)(et);var eI=[];J?er.forEach((e,t)=>{"CONDITIONAL"===e.connectionType&&eI.push(new en.Op([t]))}):er.length<4&&er.forEach((e,t)=>{eI.push(new en.Op([t]))});let[ef,eN]=r.useState(eI),eE=r.useRef(null),eb=(0,x.jz)(eZ.prototypeInteractionModalWidth),eA=(0,x.jz)(eZ.prototypeInteractionModalExpandedWidth),eC=e2(ey).width,ek=t?eA:eb;J&&(ek=eC);let[ew,eR]=r.useState(m),eL=r.useCallback(()=>{K||(S((0,w._P)({name:"prototype_interaction_details_modal_dragged"})),V(!0))},[S,K,V]),eM=r.useCallback((e,n)=>J?new E.Mi(e-(eC-eb),n):t?new E.Mi(e-(eA-eb),n):new E.Mi(e,n),[J,t,eC,eb,eA]),eU=(0,k.IK)(l,p,m,ek,eM);r.useEffect(()=>{B(G)},[B,G]),r.useEffect(()=>{eR(m)},[m]),r.useEffect(()=>()=>{S((0,w._P)({name:"prototype_interaction_details_modal_closed"}))},[S]);let eB=(0,g.md)(q.uW);r.useEffect(()=>{ed&&eB?.focus()},[ed,eB]);let eW=r.useRef(null),[e7,e4]=r.useState(!1);r.useEffect(()=>{e7&&(e4(!1),eW.current?.scrollToBottom())},[e7,e4,eW]);let[e5,e9]=r.useState(new en.Op([])),te=(0,D.q5)(),tt=r.useCallback((e,t)=>{let n=e.event.clipboardData||window.clipboardData;switch(t){case R.zy.COPY:case R.zy.CUT:{let o=JSON.parse(JSON.stringify(et)),i=(0,eH.lg)(o),r=P.fG(te?.key||null,{prototypeInteractions:i});if(!r)break;if(P.C4(n,r,""),t===R.zy.CUT){let e=[];for(let t of et){let{sourceNodeID:n,id:o}=t;n&&o&&e.push(I.d({nodeID:n,interactionID:o}))}_.l7.user("delete-prototype-interactions",()=>u.glU?.deleteInteractions(e)),j.Y5.deselectProperty()}e.accept()}}},[te?.key,et]),tn=r.useRef(!1),[to,ti]=r.useState(!1),{firstVariableSetMode:tr,firstVariableSetID:ta}=(0,eG.b)(),tl=(0,C.p8)("currentPage"),ts=r.useCallback((e,t,n,o)=>{S((0,w._P)({name:"Prototype delete action",params:{action:e,source:"panel",connector_id:t,page_id:n,actionInConditionalAction:o}}))},[S]),tc=r.useCallback(e=>{if(ei&&et){var t=!1,n=!1;if(em)eg();else{for(let r=0;r<et?.length;r++){let a=et[r],l=[];if(a&&a.actions){var o=0,i=[];for(let r=0;r<a.actions.length;r++){let s=a.actions[r];if(r!==e)void 0!==ef.find(e=>e.equals([r]))&&i.push(new en.Op([o])),l.push(s),o++;else{let e=a.id?a.id:h.Hr;ts(s.connectionType?s.connectionType:"NONE",(0,h.dI)(e),tl),r===a.actions.length-1&&(t=!0),2===a.actions.length&&(n=!0)}eN(i)}et[r].actions=l}}let r=ei.map(e=>et.find(t=>t.id===e.id)??e);j.Y5.updateSelectionProperties({prototypeInteractions:r}),n&&eN([new en.Op([0])]),t&&J&&Z(new en.Op([e-1]))}}},[ei,et,em,eg,ef,tl,ts,J]),td=r.useCallback(e=>{if(!ei||!et||!e.path.length||void 0===e.path[0])return;let[t,n,o]=e.path,i=e.isConditional();if(em)eg();else if(i){let e=!1,i=!1,r=et.map(r=>{let a=r.actions;if(!a)return r;let l=a.map((a,l)=>{if(l!==t||"CONDITIONAL"!==a.connectionType)return a;let s=a.conditionalActions;if(!s)return a;let c=s.map((t,a)=>{if(a!==n)return t;let l=t.actions;if(!l)return t;let s=l[o];s&&ts(s.connectionType?s.connectionType:"NONE",(0,h.dI)(r.id??h.Hr),tl,!0);let c=l.filter((e,t)=>t!==o);return e=o===l.length-1,i=0===c.length,{...t,actions:c}});return{...a,conditionalActions:c}});return{...r,actions:l}}),a=ei.map(e=>r.find(t=>t.id===e.id)??e);j.Y5.updateSelectionProperties({prototypeInteractions:a}),i?Z(new en.Op([t])):!i&&e&&Z(new en.Op([t,n,o-1]))}else tc(t);document.activeElement?.blur()},[ei,et,em,eg,tc,tl,ts]),tp=ed&&(0,ee.kc)({interactionType:ec,actions:er}),tu=(0,i.jsx)(b.P,{className:J?"prototype_interaction_edit_modal--ui3TwoColScrollContainer--IWuQ4":ej,useBottomPinning:!J,ref:eW,allowScrollAndZoomOver:!0,"data-not-draggable":!0,children:(0,i.jsx)(eF,{autoOpenExpressionBuilder:to,autoOpenVariablePicker:tn,category:e,deleteButtonPressed:tc,expandedRows:ef,filterOutNoneActions:f,newActionIndexPath:e5,onNewActionAdded:e=>{e9(e)},onSelect:eh,recordingKey:J?N.Pt("leftCol",F.dJ):F.dJ,resetNewActionIndexPath:()=>{e9(new en.Op([]))},selectedActionIndex:$,setAutoOpenExpressionBuilder:ti,setExpandedRows:eN,shouldHideTitle:!0})}),t_=1===et.length,th=et[0],tm=!1;th&&(tm=!!th.actions&&th.actions.length<2,th.actions&&1===th.actions.length&&(O=th.actions[0]));let tg=!O||"NONE"===O.connectionType,ty=t_&&tm&&tg;var tv=h.Hr;let tx=(0,i.jsx)(eY.t,{skipPaywall:ty,addButtonPressed:e=>{if(!et)return;if(("CONDITIONAL"===e.connectionType||"SET_VARIABLE"===e.connectionType||"SET_VARIABLE_MODE"===e.connectionType)&&em){eg();return}"SET_VARIABLE_MODE"===e.connectionType&&(e.targetVariableSetID=ta,e.targetVariableModeID=tr),"SET_VARIABLE"===e.connectionType&&tn&&(tn.current=!0),"CONDITIONAL"===e.connectionType&&ti(!0);let t=!1;var n=null,o=!eo&&!ty&&et[0].actions&&1===et[0].actions.length;if(eo||ty)for(var i=0;i<et.length;i++){let t=et[i];t.actions=[e];let n=t.id,o=t.sourceNodeID;(0,F.uU)(t.stateManagementVersion)&&n&&o&&eK.zZ.recordInteractionUpgraded(n,o),t.stateManagementVersion=1}else for(var i=0;i<et.length;i++){let o=et[i];if(o.actions){if((0,F.uU)(o.stateManagementVersion)&&(o.id&&o.sourceNodeID&&eK.zZ.recordInteractionUpgraded(o.id,o.sourceNodeID),o.actions?.forEach(e=>{e.transitionResetScrollPosition=!e.transitionPreserveScroll})),J){if($.isConditional()){let n=$.path[0],i=$.path[1],r=$.path[2],a=o.actions?.[n],l=a.conditionalActions?.[i].actions?.length??0;n===o.actions.length-1&&r===l-1&&(t=!0),a.conditionalActions?.[i].actions?.splice(r+1,0,e)}else{let n=$.path[0]+1;n===o.actions.length&&(t=!0),o.actions?.splice(n,0,e)}}else o.actions?.push(e);tv=o.id?o.id:h.Hr}else o.actions=[e],tv=o.id?o.id:h.Hr;if(o.stateManagementVersion=1,J){let e=[...$.path];e[e.length-1]+=1,n=new en.Op([...e])}else n=new en.Op([o.actions.length-1])}let r=ei.map(e=>et.find(t=>t.id===e.id)??e);if(j.Y5.updateSelectionProperties({prototypeInteractions:r}),o||J){var a=[];r[0].actions?.forEach((e,t)=>{"CONDITIONAL"===e.connectionType&&a.push(new en.Op([t]))}),eN(a)}e4&&(!J||t)&&e4(!0),e9&&e9(n),S((0,w._P)({name:"Prototype add action",params:{action:e.connectionType?e.connectionType:"NONE",source:"panel",connector_id:(0,h.dI)(tv),page_id:tl}}))},renderButton:!0,recordingKey:F.dJ,isNestedInConditional:J&&$.isConditional()}),tI=et.some(e=>void 0!==e.actions&&e.actions?.length>1),tf=!$.isConditional()&&!tI,tN=(0,i.jsx)(s.K,{onClick:()=>td($),"aria-label":(0,A.t)("proto.prototype_panel.delete"),disabled:tf,recordingKey:N.Pt(F.dJ,"actionDeleteButton"),htmlAttributes:{"data-tooltip":(0,A.t)("proto.prototype_panel.delete"),"data-tooltip-type":L.Ib.TEXT},children:(0,i.jsx)(d.r,{})}),tT=(0,i.jsxs)("div",{className:"prototype_interaction_edit_modal--ui3FooterContainer--oYsXM",children:[tx," ",tN]}),tE=(0,i.jsx)(eq.c.Provider,{value:eq.P.LEFT,children:(0,i.jsxs)("div",{className:J?"prototype_interaction_edit_modal--ui3InteractionsPanelContentLeftResizable--16pLu":"prototype_interaction_edit_modal--ui3InteractionsPanelContentLeft--UYWSG",ref:eE,style:J?{width:`${e2(ey).leftWidthPct}%`}:void 0,children:[(0,i.jsx)(eO,{category:e,recordingKey:F.dJ,headerButtons:(0,i.jsx)(i.Fragment,{})}),(0,i.jsx)("div",{className:eD}),tu,(0,i.jsx)("div",{className:eD}),tT]})}),tb=er.length>0?(0,i.jsx)(eq.c.Provider,{value:eq.P.RIGHT,children:(0,i.jsx)(b.P,{allowScrollAndZoomOver:!0,"data-not-draggable":!0,className:J?"prototype_interaction_edit_modal--ui3ScrollContainerRight--LJr-n":void 0,children:(0,i.jsx)(e3,{selectedActionIndex:ep,handleExpandUI3:(e,t)=>{!t&&er.length>1?eN(ef.filter(t=>!t.equals(e))):ef.find(t=>t.equals(e))||eN([...ef,new en.Op(e)])},autoOpenVariablePicker:tn,autoOpenExpressionBuilder:to,setAutoOpenExpressionBuilder:ti,filterOutNoneActions:f})})}):null,tA=r.useRef(e0),[,tO]=(0,c.i)({disabled:!J,onDragStart(){eE.current&&(tA.current=eE.current.getBoundingClientRect().width)},onDrag(e){if(eE.current&&tA.current){let t=e2(ey),n=tA.current+e.delta.x,i=n/t.width*100;n<e0?i=e0/t.width*100:i>e1&&(i=e1),eE.current.style.width=`${i}%`,o={...t,leftWidthPct:i}}}}),tj=J?(0,i.jsxs)("div",{className:"prototype_interaction_edit_modal--ui3TwoColPanelContainer--e8MK8",children:[(0,i.jsxs)("div",{className:"prototype_interaction_edit_modal--ui3TwoColInnerContainer--ZvJj2",children:[tE,(0,i.jsx)("div",{className:"prototype_interaction_edit_modal--dividerVertical--Noi1C",children:(0,i.jsx)("div",{...tO({className:"prototype_interaction_edit_modal--verticalResizeHandle--xkc8V"})})}),tb]}),ey&&(0,i.jsx)(eV,{transition:ev,recordingKey:N.Pt(F.dJ,"stateManagementVersionPanel"),updateSelectionProperties:es,stateManagementVersion:ex,selectedInteractions:et})]}):tu,tP=(0,i.jsx)(ez.Ao,{ref:H,allowAutoExpanding:!0,allowResizeHeight:J,allowResizeWidth:J,allowWheelPassthrough:!0,arrowPosition:m?void 0:ez.F_.TOP,arrowRelativeX:m?void 0:ek/2,beMoreAccessible:!0,canRenderBelowViewport:!0,containerClassName:v()({[ej]:!J,[eP]:J,[eS]:X,"prototype_interaction_edit_modal--abovePropertiesPanel--hFejC":ew,"prototype_interaction_edit_modal--belowPropertiesPanel--f1Jfl":!ew,"prototype_interaction_edit_modal--hideModal--RSp-R":G}),contentContainerClassName:v()({[ej]:!J,[eP]:J,[eS]:X}),dataTestId:"in-context-prototype-interaction-edit-modal",dragHeaderOnly:!0,fullFrame:J,headerClassName:"prototype_interaction_edit_modal--multilineInteractionDetailsHeader--OE8Wr",headerSize:"small",initialHeight:J?e2(ey).height-ez.uF:void 0,initialPosition:eU,initialWidth:J?e2(ey).width:void 0,maxHeight:J?800:void 0,maxWidth:J?800:void 0,minHeight:J?ey?369:320:void 0,minWidth:J?440:void 0,onClose:eQ,onDragStart:()=>{eR(!0),eL()},onFocus:z,onResize:J?e=>{o={...e2(ey),height:e.height,width:e.width}}:void 0,recordingKey:"interactionDetailsModal",title:(t,{titleId:n})=>(0,i.jsx)("div",{className:"prototype_interaction_edit_modal--onboardingRow--UlvE0",children:tp?(0,i.jsx)(e6,{closeButton:t}):(0,i.jsx)(e8,{category:e,createActionTrigger:tx,closeButton:t,titleId:n})}),children:tj}),tS=ed?tP:(0,i.jsx)(M.vL,{name:"Prototype Draggable modal",className:"prototype_interaction_edit_modal--prototypeDraggableModal--njJ6A",handleClipboard:tt,children:tP});return(0,i.jsx)(U.ht.Provider,{value:r.useMemo(()=>({autoCloseOnScroll:!Y}),[Y]),children:tS})});function e3({selectedActionIndex:e,autoOpenVariablePicker:t,handleExpandUI3:n,autoOpenExpressionBuilder:o,setAutoOpenExpressionBuilder:r,filterOutNoneActions:a}){let s=(0,eT.HS)(),{selectedInteractions:c,mergedActions:d,makeUpdateSelectionPropertiesForActionIndex:p,makeUpdateMultipleDestinationNodesForActionIndex:u,detailPropsMultipleActions:_}=(0,eT.Ay)(s,a),h=e.path[0],m=u(h),g=p(h),y=(0,F.iC)(c),v=_.interactionEvent.interactionType??"NONE";if(e.isConditional()){let n=e.path[1],a=e.path[2];if(void 0===h||void 0===n||void 0===a)return null;let s=d[h];if(void 0===s)return null;let p=((0,S.hS)(s.conditionalActions)&&s.conditionalActions?s.conditionalActions:[])[n],u=p?.actions?.[a];return u?(0,i.jsx)("div",{className:ek,children:(0,i.jsx)(et.P,{action:u,actionIndexPath:e.path,autoOpenExpressionBuilder:o,autoOpenVariablePicker:t,expandedRows:[e],interactionType:v,isNarrowPanel:!0,isNestedInConditional:!0,numActions:d.length,onDeleteAction:l.lQ,onDrop:l.lQ,onExpand:l.lQ,onSelect:l.lQ,recordingKey:N.Pt(F.dJ,F.Qe,F.eG,h),selectedActionIndex:e,selectedInteractions:c,setAutoOpenExpressionBuilder:r,stateManagementVersion:y,updateMultipleDestinationNodes:m.appendActionIndex(n).appendActionIndex(a),updateSelectionProperties:g.appendActionIndex(n).appendActionIndex(a)},a)}):null}if(void 0===h)return null;let x=d[h];return void 0===x?null:(0,i.jsx)("div",{className:ek,children:(0,i.jsx)(et.P,{action:x,actionIndexPath:[h],autoOpenExpressionBuilder:o,autoOpenVariablePicker:t,expandedRows:[e],interactionType:v,isNarrowPanel:!0,isNestedInConditional:!1,numActions:d.length,onDeleteAction:l.lQ,onDrop:l.lQ,onExpand:n,onSelect:l.lQ,recordingKey:N.Pt(F.dJ,F.Qe,F.eG,h),selectedActionIndex:e,selectedInteractions:c,setAutoOpenExpressionBuilder:r,stateManagementVersion:y,updateMultipleDestinationNodes:m,updateSelectionProperties:g},h)})}function e8({category:e,closeButton:t,createActionTrigger:n,titleId:o}){let r=(0,a.wA)(),{selectedInteractions:l}=(0,eT.Ay)(e),c=(0,F.YT)(),d=(()=>{if(1!==l.length)return 0;let e=l[0],t={nodeID:e.sourceNodeID,interactionID:e.id};return(u.X3B?.getMatchingInteractions(I.d(t))??[]).length})(),_=(0,m.kc)().prototype_hide_matching_noodles&&1===l.length&&d>1&&(0,i.jsx)(s.K,{actionOnPointerDown:!0,onClick:()=>{if(1!==l.length)return;let e=l[0],t={nodeID:e.sourceNodeID,interactionID:e.id},n=u.X3B?.getMatchingInteractions(I.d(t))??[];u.glU?.selectInteractionsAndSourceNodes(n);let o=(0,A.t)("proto.interaction_details.visual_bell.selected_n_matching_interactions",{total_num_interactions:n.length});j.Y5.showVisualBellWithUndo("selected-matching-noodles",o,!1),r((0,w._P)({name:"prototype_select_matching_interactions",params:{num_connectors:n.length}}))},"aria-label":(0,A.t)("proto.interaction_details.select_n_matching_interactions",{total_num_interactions:d}),htmlAttributes:{tabIndex:-1,onMouseEnter:()=>{if(1!==l.length)return;let e=l[0],t={nodeID:e.sourceNodeID,interactionID:e.id},n=u.X3B?.getMatchingInteractions(I.d(t))??[];u.glU?.hoverInteractions(n)},onMouseLeave:()=>u.glU?.hoverInteractions([]),"data-tooltip":(0,A.t)("proto.interaction_details.select_n_matching_interactions",{total_num_interactions:d}),"data-tooltip-type":L.Ib.TEXT},children:(0,i.jsx)(p.A,{})});switch(c){case F.Oz.TWO_COL:return(0,i.jsxs)("div",{className:"prototype_interaction_edit_modal--ui3ExpandedModalHeader--Ka7aM",children:[(0,i.jsx)("span",{id:o,children:(0,A.tx)("proto.interaction_details.header")}),(0,i.jsxs)("div",{className:"prototype_interaction_edit_modal--ui3ExpandedModalHeaderButtons--UqykU",children:[_,t]})]});case F.Oz.SINGLE_COL:return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{id:o,children:(0,A.tx)("proto.interaction_details.header")}),(0,i.jsxs)("div",{className:eC,children:[_,n,t]})]})}}function e6({closeButton:e}){return(0,i.jsxs)(i.Fragment,{children:[(0,A.tx)("proto.sites_interaction_link_details.header"),(0,i.jsx)("div",{className:eC,children:e})]})}let e9=e=>e.pickerShown?.id===O.o$?e.pickerShown:null},474575:(e,t,n)=>{n.d(t,{y7:()=>ej,a1:()=>eM,wU:()=>eB,dT:()=>eF});var o=n(104076),i=n(716976),r=n(237420),a=n(276800),l=n(452981),s=n(454851),c=n(420680),d=n(438557),p=n(247172),u=n(140458),_=n(266808),h=n(170627),m=n(264993),g=n(681958),y=n(812714),v=n(795033),x=n(511570),I=n.n(x),f=n(983500),N=n(166887),T=n(328341),E=n(308424),b=n(641518),A=n(859277),O=n(361170),j=n(619511),P=n(652539),S=n(192075),C=n(850701),D=n(278491),k=n(241421),w=n(819851),R=n(354114),L=n(553065),M=n(951770),U=n(374618),K=n(211862),V=n(76365),B=n(863995),F=n(761768),H=n(349311),Y=n(386958),G=n(540864),z=n(137007),W=n(240347);function X(e){return e??"Default"}let J=i.createContext({getNodeName:X}),$=i.memo(function({getNodeName:e=X,children:t}){let n=i.useMemo(()=>({getNodeName:e}),[e]);return(0,o.jsx)(J.Provider,{value:n,children:t})});var q=n(660838),Z=n(355225),Q=n(748624),ee=n(203775),et=n(140490),en=n(205088),eo=n(564941),ei=n(842909),er=n(141330),ea=n(290407),el=n(946847),es=n(288971),ec=n(86421),ed=n(153477);function ep(){return(0,o.jsx)(et.u,{label:"MagicLinkEntry",children:(0,o.jsx)(eu,{})})}function eu(){let e=(0,r.wA)(),t=(0,r.d4)(e=>(0,eo.Yh)(e.mirror.appModel,er.JT.MAGIC_LINK));if(!(0,ei.PE)())return null;let n=(0,S.t)("fullscreen.toolbar.prototyping-add-interactions-tooltip-ga");return(0,o.jsx)("span",{className:"magic_link--magicLinkButton--CWefW","data-testid":"magic-link-entry",children:(0,o.jsx)(c.K,{recordingKey:b.Pt("prototypeInteractionList","magicLinkButton"),"aria-label":n,onClick:()=>{(0,es.$I)({moduleToOpen:{type:"custom",module:(0,o.jsx)(ec.p,{}),name:el.Sn.MAGIC_LINK,beforeModuleOpen:()=>{e((0,en.Zh)({name:"prototype.ai_magic_link_entry_clicked",params:{source:"properties_panel"}})),(0,ea.B3)(er.JT.MAGIC_LINK),t&&(0,ea.Ag)(er.JT.MAGIC_LINK,ed.e,{})}},trackingData:{source:"prototype_magic_link_triggered"}})},htmlAttributes:{"data-tooltip":n,"data-tooltip-show-above":!0},children:(0,o.jsx)(ee.S,{})})})}var e_=n(737139),eh=n(101362),em=n(82991),eg=n(478208),ey=n(236631);let ev=(0,n(560201).ex)("prototype_info",function(e){let{tooltipText:t}=e;return(0,o.jsx)("div",{className:ey.s.flex.justifyCenter.itemsCenter.$,children:(0,o.jsx)("span",{className:ey.s.m6.flexGrow1.$,style:{maxWidth:144},children:t})})},e=>({tooltipText:e.getAttribute("data-tooltip-text")}));var ex=n(766317),eI=n(702043),ef=n(556936),eN=n(472831),eT=n(347080),eE=n(57540);let eb=new k.JV,eA=new k.Eq,eO=new k.sX,ej=i.memo(function({filterInteractionCategory:e,iAmNotA11yCompliant_FIXME:t}){let n=(0,r.wA)(),a=(0,r.d4)(Q.Cy),l=(0,r.d4)(Q.n9),s=(0,r.d4)(Q.DV),c=(0,r.d4)(eD),d=(0,r.d4)(V.dK),p=(0,r.d4)(V.Xt),u=(0,Q.a2)(),y=(0,Q.R)(),v=(0,r.d4)(ew),x=(0,r.d4)(eC),I=Object.keys(p).length>1,T=eR(),b=function(){let e=eR(),t=(0,r.d4)(ek);return!!e&&!!t&&t.selectionOverrides[_.YnC.PROTOTYPE_INTERACTIONS]}(),A=(0,K.q5)(),j=(0,N.U)(),P=(0,w.cJ)(),S=i.useMemo(()=>new k.cP(d),[d]),L=i.useCallback(e=>S.format(e),[S]),M=i.useRef(null),U=e=>{R.Y5.updateSelectionProperties({prototypeInteractions:e},{shouldCommit:B.zk.NO_BUT_TRACK_AS_EDIT}),R.Y5.commit()},H=(0,W.Zj)(Object.keys(p)),G=(0,o.jsx)(eP,{currentSelectedProperty:c,dispatch:n,filterInteractionCategory:e,headerAccessory:H&&(0,o.jsx)(ep,{}),iAmNotA11yCompliant_FIXME:t,inSites:P,inheritedInternalInteractionGroups:y,interactionGroups:u,isOrInInstance:T,isValidPrototypingSourceSelected:v,mixed:I,onAddProperty:e=>{e.stopPropagation();let t=[],n=[];for(let e of Object.keys(p)){let o=_.glU.generateUniqueID();if(!o)return;let i=m.sH(o);if(!i)return;let r={id:i,sourceNodeID:m.sH(e)??m.Hr,event:{interactionType:eM(u,void 0,P)}};r.stateManagementVersion=1,r.actions=[{connectionType:"NONE"}],t.push(r);let a=(0,g.kh)(d,e);n.push(a?a.guid:"")}let o=t.map(e=>E.d({nodeID:e.sourceNodeID,interactionID:e.id}));if(o.length>0){_.glU.setSelectedInteractions(o);let e=(0,Y.cn)(M.current);eF(new O.Mi(e.x,e.y+(0,f.jz)(eT.rightNavGridRowHeight)),!1)}let i=[...a,...t,...l];j("prototype_interaction_added",{interactionCount:i.length,sourceTlfIds:JSON.stringify(n)}),U(i)},onChange:(e,t)=>{let n=e.map(e=>e.interactions).reduce((e,t)=>e.concat(t),[]),o=new Set,i=[];for(let e of n){let t=m.dI(e.id);if(t&&!o.has(t))i.push(e);else{if(!(t=_.glU.generateUniqueID()))continue;let n=m.sH(t);if(!n)continue;i.push({...e,id:n})}t&&o.add(t)}t===F.J.NORMAL?i=[...i,...l]:t===F.J.INHERITED_INTERNAL&&(i=[...a,...i]),U(i)},onDeleteProperty:(e,t)=>{let n=(t===F.J.NORMAL?u:y).filter((t,n)=>e.has(n)),o=[];for(let e of n)o.push(...e.interactions);let i=eB(o);h.l7.user("delete-prototype-interactions",()=>_.glU.deleteInteractions(i)),R.Y5.deselectProperty()},openFile:A,shouldIgnoreKeyboardEvents:s.length>0||c.type!==_.rrT.PROTOTYPE_INTERACTION&&c.type!==_.rrT.PROTOTYPE_INHERITED_INTERNAL_INTERACTION,showResetInteractionsButton:b,toggleScrollBehaviorPicker:()=>{if(x?.id===D.AO)n(C.XE());else{let e=(0,Y.cn)(M.current);n(C.u1({id:D.AO,initialX:e.x,initialY:e.y}))}}});return(0,o.jsx)($,{getNodeName:L,children:P?G:(0,o.jsx)(e_.Zk,{"data-onboarding-key":"prototypePanel",ref:M,"data-testid":"prototype-interaction-list",children:G})})});function eP(e){let t=i.useRef(!1),n=!!e.filterInteractionCategory,r=!n||e.filterInteractionCategory===F.J.NORMAL,s=e.isOrInInstance&&e.inheritedInternalInteractionGroups.length>0,c=n?e.filterInteractionCategory===F.J.INHERITED_INTERNAL&&s:s,d=(0,o.jsx)("div",{className:"prototype_interaction_list--categoryRow--Xxfm4",children:(0,o.jsx)(l.J,{className:"prototype_interaction_list--categoryLabel--0dGOM",children:(0,S.tx)("proto.interaction_list.variant_interactions")})}),p=e.iAmNotA11yCompliant_FIXME?z.TA:z.WI;return(0,o.jsxs)(o.Fragment,{children:[r&&(0,o.jsx)(p,{addProperty:e.onAddProperty,boldHeaderRow:e.interactionGroups.length>=1||e.inheritedInternalInteractionGroups.length>=1,currentSelectedProperty:e.currentSelectedProperty,dispatch:e.dispatch,headerAccessory:e.headerAccessory,hideAddButton:!e.isValidPrototypingSourceSelected,onChange:t=>e.onChange(t,F.J.NORMAL),onDeleteProperty:t=>e.onDeleteProperty(t,F.J.NORMAL),onResetInteractions:h.nc.user("reset-instance-interactions",()=>_.glU.resetSymbolOverrides(_.YnC.PROTOTYPE_INTERACTIONS)),openFile:e.openFile,overrideAddPropertyTooltip:(0,S.t)("proto.prototype_panel.add"),pickerShown:null,propertyList:e.interactionGroups,recordingKey:"prototypeInteractionList",renderProperty:(n,i,r,a,l,s,c,d,p)=>(0,o.jsx)(eS,{autoOpenVariablePicker:t,category:F.J.NORMAL,dispatch:e.dispatch,hasFocus:l,inSites:e.inSites,index:i,interactionGroup:n,interactionGroups:e.interactionGroups,onMouseDown:c,onMouseMove:d,onMouseUp:p,recordingKey:b.Pt("prototypeInteractionList",i),selected:r,singletonRow:e.interactionGroups.length<=1}),selectedPropertyType:_.rrT.PROTOTYPE_INTERACTION,shouldIgnoreKeyboardEvents:e.shouldIgnoreKeyboardEvents,showResetInteractionsButton:e.showResetInteractionsButton,stylePickerShown:{isShown:!1},title:e.inSites?"":(0,S.t)("proto.title_interactions"),toggleScrollBehaviorPicker:e.toggleScrollBehaviorPicker}),c&&d,c&&(0,o.jsx)(p,{addProperty:a.lQ,currentSelectedProperty:e.currentSelectedProperty,dispatch:e.dispatch,hideAddButton:!0,onChange:t=>e.onChange(t,F.J.INHERITED_INTERNAL),onDeleteProperty:t=>e.onDeleteProperty(t,F.J.INHERITED_INTERNAL),openFile:e.openFile,pickerShown:null,propertyList:e.inheritedInternalInteractionGroups,recordingKey:b.Pt("prototypeInheritedInternalInteractionList"),renderProperty:(n,i,r,a,l,s,c,d,p)=>(0,o.jsx)(eS,{autoOpenVariablePicker:t,category:F.J.INHERITED_INTERNAL,dispatch:e.dispatch,hasFocus:l,inSites:e.inSites,index:i,interactionGroup:n,interactionGroups:e.inheritedInternalInteractionGroups,onMouseDown:c,onMouseMove:d,onMouseUp:p,recordingKey:b.Pt("prototypeInheritedInternalInteractionList",i),selected:r,singletonRow:e.inheritedInternalInteractionGroups.length<=1}),selectedPropertyType:_.rrT.PROTOTYPE_INHERITED_INTERNAL_INTERACTION,shouldIgnoreKeyboardEvents:e.shouldIgnoreKeyboardEvents,stylePickerShown:{isShown:!1},title:"",toggleScrollBehaviorPicker:e.toggleScrollBehaviorPicker})]})}function eS({interactionGroups:e,interactionGroup:t,index:n,hasFocus:a,selected:l,singletonRow:g,onMouseDown:x,onMouseMove:f,onMouseUp:O,dispatch:w,category:L,recordingKey:K,inSites:B}){let{getNodeName:z}=i.useContext(J),W=(0,r.d4)(Q.DV),X=(0,Q.a2)(),$=(0,r.d4)(eC),Z=$?.id===D.o$?$:null,ee=(0,r.d4)(V.dK),[et,en]=i.useState(!1),eo=(0,v.md)(U.NE)?eA:eb,ei=i.useContext(eI.qd),er=function(e,t){let n=new Set(t.map(e=>{let t=E.s(e);return t?m.dI(t.interactionID):""}).filter(e=>""!==e));for(let t of e.interactions){let e=m.dI(t.id);if(e&&n.has(e))return!0}return!1}(t,W),[ea,el]=(0,v.fp)(ex.jM),es=(0,v.md)(ex.uW),ec=i.useRef(null),ed=i.useRef(null),ep=i.useCallback(()=>{let e=B?ed.current:ec.current;eF((0,Y.cn)(e),!1)},[B]),eu=i.useCallback(()=>{_.glU.setSelectedInteractions([]),w(C.XE()),R.Y5.deselectProperty()},[w]),e_=n=>{if(!ec||!ed)return;B&&es?.focus();let o=eV(t),i=n.metaKey||n.ctrlKey;if(i)er?o=W.filter(e=>!o.includes(e)):o.push(...W);else if(!B&&n.shiftKey){var r;let n,i;let a=(r=t.key,e.findIndex(({key:e})=>e===r));if(-1===a)return;let l=function(e,t){let n=1/0,o=e;for(let i of t){let t=Math.abs(e-i);t<n&&(o=i,n=t)}return o}(a,function(e,t){let n=new Set,o=new Set(t);for(let t=0;t<e.length;t++)eV(e[t]).some(e=>o.has(e))&&n.add(t);return n}(e,W)),s=(n=a,i=l,a>l&&(n=l,i=a),e.slice(n,i+1));for(let e of(o=[...W],s))o.push(...eV(e))}if(_.glU.setSelectedInteractions(o),R.Y5.updateAppModel({currentSelectedProperty:{type:L===F.J.NORMAL?_.rrT.PROTOTYPE_INTERACTION:_.rrT.PROTOTYPE_INHERITED_INTERNAL_INTERACTION,indices:[]}}),o.length){let e=Z&&Z.shouldPin;if(B){let t=ea.length+o.length>1;i?(i||t)&&w(C.XE()):(el([]),e||ep())}else e||ep()}else eu()},ey=(0,r.d4)(G.ZM),eT=!1,eO=null,ej=null;for(let e of t.interactions)if(!eO&&e.actions&&e.actions.length>0)eO=e.actions[0],ej=e;else if(eK(eO,z,!0,ey)!=eK((e.actions??[])[0],z,!0,ey)){eT=!0;break}let eP=()=>{let e=eB(t.interactions);_.glU.hoverInteractions(e),en(!0)},eS=()=>{_.glU.hoverInteractions([]),en(!1)},eD=new k.js(!0,ey),ek=(0,k.mj)(eO),ew=ej?.actions?.length??0,eR=ew>1?(0,S.t)("sites.panel.interaction_summary",{numActions:ew}):eT||!eO||"NONE"===ek?void 0:eD.format(ek),{tooltipText:eL,showTooltip:eM}=(0,eN.QY)(eR),eH=e=>{e.stopPropagation()},eY=e=>{e.stopPropagation();let n=eB(t.interactions);h.l7.user("delete-prototype-interactions",()=>_.glU.deleteInteractions(n)),R.Y5.deselectProperty(),R.Y5.commit()},eG=!1,ez=!1;if(L===F.J.NORMAL){for(let e of t.interactions){if(!e.actions||0===e.actions.length)continue;let t=e.actions[0];if(!t||"SWAP_STATE"!==t.navigationType)continue;let n="";if(t.transitionNodeID){let e=ee.get(m.dI(t.transitionNodeID));if(e){if(e.isState)n=e.parentGuid||"";else{eG=!0;break}}}let o=_.glU.getContainingStateGroupOrSelf(m.dI(e.sourceNodeID??m.Hr))||"";if(""===o||""!==n&&o!==n){eG=!0;break}}let n=["ON_CLICK","MOUSE_DOWN","MOUSE_UP"].includes(t.event.interactionType??""),o=e.some(e=>"ON_HOVER"===e.event.interactionType);ez=n&&o}eG=L!==F.J.INHERITED_INTERNAL&&eG;let eW=function(e,t,n){if(e!==F.J.INHERITED_INTERNAL)return null;let o=n.find(e=>e.key===t.key&&e.interactions.length===t.interactions.length&&1===t.interactions.length&&function(e,t){let n=void 0!==e.actions&&e.actions.length>=1,o=void 0!==t.actions&&t.actions.length>=1;if(!n||!o)return!1;let i=e.actions.every(e=>"UPDATE_MEDIA_RUNTIME"===e.connectionType),r=e.actions.every(e=>m.fn(e.transitionNodeID));var a=!1;for(let e of t.actions)if("INTERNAL_NODE"===e.connectionType&&"SWAP_STATE"===e.navigationType){a=!0;break}return i&&r&&a}(e.interactions[0],t.interactions[0]));return o?.interactions[0]??null}(L,t,e),eX=(0,T.ZC)(eW),eJ=(0,N.U)();if(i.useEffect(()=>{null===eX&&eW&&eJ("prototype_interaction_conflict_override_created",{interaction_type:t.interactions[0].event?.interactionType,action_type:eW.event?.interactionType})}),t.event.interactionType&&ei&&ei!==(0,q.hD)(t.event.interactionType)||"mouse"===ei&&(0,ef.zL)(t.interactions)||B&&(0,y.kc)().sts_links_v2&&(0,ef.pL)(t.interactions))return null;let e$=L===F.J.INHERITED_INTERNAL&&X.some(e=>e.key===t.key)&&!eW,eq=l&&a,eZ=er&&!l,eQ=(0,o.jsx)(p.e,{}),e0=eG||ez||e$,e1=eG?(0,S.t)("proto.prototype_panel.this_interaction_must_swap_from_a_variant_to_another_variant_within_the_same_component_set_tooltip"):ez?(0,S.t)("proto.prototype_panel.prototype_multiple_interactions_mouse_and_hover_tooltip"):e$?(0,S.t)("proto.prototype_panel.this_interaction_will_not_be_triggered_as_interactions_on_instances_are_triggered_before_inherited_internal_interactions_tooltip"):"",e2=(0,o.jsx)(em.ic,{ref:ed,"data-testid":`prototypeInteractionItem-${n}`,hideGrabber:!0,onMouseEnter:eP,onMouseLeave:eS,onClick:e_,recordingKey:b.Pt(K,"draggableRow"),selected:er,"aria-selected":er,children:(0,o.jsx)(eg.s2,{label:null,leftIcon:(0,o.jsx)(s.d,{"aria-expanded":eZ&&!!Z,recordingKey:b.Pt(K,"interactionIcon"),htmlAttributes:{onMouseDown:eH,"data-tooltip-type":H.Ib.TEXT,"data-tooltip":e0?e1:eU(t.event,eo,!!B)},"aria-label":e0?e1:eU(t.event,eo,!!B),children:e0?eQ:(0,M.e7)(t.event.interactionType)}),input:(0,o.jsxs)(A.D8,{onMouseDown:eH,recordingKey:b.Pt(K,"interactionText"),className:"prototype_interaction_list--ellipsis--ro1zN ellipsis--ellipsis--Tjyfa",onMouseEnter:eM,children:[eU(t.event,eo,!!B),eR&&(0,o.jsxs)("span",{"data-tooltip-type":H.Ib.TEXT,"data-tooltip":eL,className:"prototype_interaction_list--summaryText--hGpp4",children:["\xa0\xb7\xa0",eR]})]}),rightIcon:(0,o.jsx)(j.k,{isVisible:et,children:(0,o.jsx)(c.K,{onClick:eY,"aria-label":(0,S.t)("proto.prototype_panel.remove_interaction_aria_label",{interactionType:eU(t.event,eo,!!B).toLocaleLowerCase()}),"data-tooltip":(0,S.t)("proto.prototype_panel.remove_interaction_tooltip"),recordingKey:b.Pt(K,"removeButton"),htmlAttributes:{onMouseDown:eH},children:(0,o.jsx)(u.r,{})})})})});if(B)return e2;let e7=(0,o.jsxs)(d.u,{className:I()({"prototype_interaction_list--interactionButton--q-58Q":!0,"prototype_interaction_list--interactionButtonSelected--8YX9A":eq,"prototype_interaction_list--interactionButtonSelectedSecondary--Nx73L":eZ}),onClick:e_,htmlAttributes:{onKeyDown:e=>{"Enter"!==e.key&&(" "!==e.key||e.shiftKey)||e_(e)},onMouseDown:eH},"aria-haspopup":"dialog","aria-expanded":!!Z,recordingKey:K,children:[e0&&(0,o.jsx)(P.B,{className:"prototype_interaction_list--warningIcon--Mgr5O",svg:eE.A,"data-tooltip-type":H.Ib.SPECIAL,"data-tooltip":ev,"data-tooltip-text":e1}),(0,o.jsx)("div",{className:e0?"prototype_interaction_list--interactionNameShort--5UMLL prototype_interaction_list--interactionName--zQsSL":"prototype_interaction_list--interactionName--zQsSL",children:eU(t.event,eo,!!B)}),(0,M.av)((0,k.mj)(eO)),(0,o.jsx)("div",{className:"prototype_interaction_list--targetText--UMXyE",dir:"auto",children:eT?(0,S.t)("proto.variant_actions.mixed"):L===F.J.INHERITED_INTERNAL?(0,S.t)("proto.variant_actions.change_to"):eK(eO,z,!0,ey)})]}),e4=(0,o.jsx)(j.k,{isVisible:et,children:(0,o.jsx)("span",{className:"prototype_interaction_list--removeButton--g6aiQ",children:(0,o.jsx)(c.K,{onClick:eY,"aria-label":(0,S.t)("proto.prototype_panel.remove_interaction_aria_label",{interactionType:eU(t.event,eo,!!B).toLocaleLowerCase()}),"data-tooltip":(0,S.t)("proto.prototype_panel.remove_interaction_tooltip"),recordingKey:b.Pt(K,"removeButton"),htmlAttributes:{onMouseDown:eH},children:(0,o.jsx)(u.r,{})})})});return(0,o.jsx)(eh.vA,{ref:ec,htmlAttributes:{"data-testid":`prototypeInteractionItem-${n}`,onMouseEnter:eP,onMouseLeave:eS,onMouseMove:f,onMouseUp:O,onMouseDown:x},input:e7,icon:e4,selected:l||er,hasFocus:eq,singletonRow:g,recordingKey:b.Pt(K,"draggableRow")})}function eC(e){return e.pickerShown}function eD(e){return e.mirror.appModel.currentSelectedProperty}function ek(e){return e.mirror.selectionProperties.resettableInstanceOverrides}function ew(e){return e.mirror.selectionProperties.isValidPrototypingSourceSelected??!0}function eR(){let e=(0,r.d4)(V.Xt),t=(0,r.d4)(V.dK);for(let n of Object.keys(e)){let e=t.get(n);if(e&&("INSTANCE"===e.type||e.isInstanceSublayer))return!0}return!1}let eL=["ON_CLICK","DRAG","ON_HOVER","ON_PRESS","MOUSE_ENTER","MOUSE_LEAVE","MOUSE_DOWN","MOUSE_UP"];function eM(e,t,n){let o=new Set;for(let{event:t}of e)o.add(t.interactionType);for(let e of eL)if(!o.has(e)&&(!n||"DRAG"!==e)&&("BACK"!==t||"ON_HOVER"!==e&&"ON_PRESS"!==e))return e;return"ON_KEY_DOWN"}function eU(e,t,n){let o=t.format(e.interactionType??"NONE");if("ON_KEY_DOWN"===e.interactionType&&e.keyTrigger&&e.keyTrigger.keyCodes){let t=(0,Z._i)(e.keyTrigger.keyCodes),i=(0,Z.E8)(e.keyTrigger,!0);if("KEYBOARD"===e.keyTrigger.triggerDevice&&t)return n?(0,Z.U8)(t):o+" ("+(0,Z.U8)(t)+")";if(i)return n?i:o+" ("+i+")"}return o}function eK(e,t,n,o){let i=new k.js(n,o);if(!e)return i.format("NONE");let r=(0,k.mj)(e);switch(r){case"NONE":case"GO_BACK":case"CLOSE_OVERLAY":case"SET_VARIABLE":case"SET_VARIABLE_MODE":case"CONDITIONAL":return i.format(r);case"OPEN_URL":if(null!=e.connectionURL){if((0,L.gl)(e.connectionURL))return(0,S.t)("fullscreen.mixed");return e.connectionURL.replace(/https?:\/\//,"")}return i.format("NONE");case"UPDATE_MEDIA_PLAY":case"UPDATE_MEDIA_PAUSE":case"UPDATE_MEDIA_TOGGLE_PLAY_PAUSE":case"UPDATE_MEDIA_MUTE":case"UPDATE_MEDIA_UNMUTE":case"UPDATE_MEDIA_TOGGLE_MUTE_UNMUTE":case"UPDATE_MEDIA_SKIP_FORWARD":case"UPDATE_MEDIA_SKIP_BACKWARD":case"UPDATE_MEDIA_SKIP_TO":return eO.format(e)}return e.transitionNodeID?(0,L.gl)(e.transitionNodeID)?(0,S.t)("fullscreen.mixed"):t(m.dI(e.transitionNodeID)):i.format("NONE")}function eV(e){return e.interactions.filter(e=>e.id&&e.sourceNodeID).map(e=>E.d({nodeID:e.sourceNodeID,interactionID:e.id}))}function eB(e){let t=[];for(let n of e){let{sourceNodeID:e,id:o}=n;e&&o&&t.push(E.d({nodeID:e,interactionID:o}))}return t}function eF(e,t){R.Y5.triggerAction("show-prototype-interaction-edit-modal",{args:{source:_.yxn.PROPERTIES_PANEL,x:e.x,y:e.y,isBehaviorsOnly:t}})}},159080:(e,t,n)=>{n.d(t,{x:()=>tx,k:()=>tI});var o=n(104076),i=n(716976),r=n(237420),a=n(266808),l=n(264993),s=n(287211),c=n(228172),d=n(511570),p=n.n(d),u=n(308424),_=n(641518),h=n(236631),m=n(192075),g=n(241421),y=n(819851),v=n(354114),x=n(553065),I=n(506192),f=n(205088),N=n(761768),T=n(415567),E=n(989941),b=n(452981),A=n(170627),O=n(361170),j=n(41076),P=n(863995),S=n(386958),C=n(950241),D=n(391145),k=n(964182),w=n(813371),R=n(818706),L=n(331497);function M(e){i.useEffect(()=>{let t=a.Ez5?.prototypingEditorState().colorPickerEyedropperVarData;if(t)return(0,L.lu)(t,{onChangeImmediate(){let n=t.getCopy();n&&e(n)}})},[e])}var U=n(737139),K=n(954741),V=n(788613),B=n(404343);let F=j.TI;function H({children:e}){return(0,o.jsx)(V.TN,{children:e})}function Y({interactionType:e,recordingKey:t,actionIndexPath:n,nodeId:c}){let[d,p]=i.useState(!1),[u,h]=i.useState(new O.Mi),g=(0,r.wA)(),y="{ "+n.join(", ")+" }",{destinationOverlayBackgroundColor:v,destinationOverlayBackgroundType:I,destinationOverlayPositionType:N,destinationOverlayBackgroundInteraction:T}=(0,s.R)(e=>({destinationOverlayBackgroundColor:e.mirror.selectionProperties.actionIndexPathToOverlaySettings?.[y]?.destinationOverlayBackgroundColor,destinationOverlayBackgroundType:e.mirror.selectionProperties.actionIndexPathToOverlaySettings?.[y]?.destinationOverlayBackgroundType,destinationOverlayPositionType:e.mirror.selectionProperties.actionIndexPathToOverlaySettings?.[y]?.destinationOverlayPositionType,destinationOverlayBackgroundInteraction:e.mirror.selectionProperties.actionIndexPathToOverlaySettings?.[y]?.destinationOverlayBackgroundInteraction})),j=i.useRef(null),L=i.useCallback(()=>{p(!1)},[p]),K=i.useCallback(()=>{if(d)L();else{p(!0);let e=j.current;h((0,S.cn)(e))}},[d,L]),V=i.useCallback(e=>{let t=e?"SOLID_COLOR":"NONE";A.l7.user("overlay-background-type-edit-scope",()=>{a.X3B?.setOverlayBackgroundType(l.dI(c),t)}),g((0,f._P)({name:"Overlay background visible changed",params:{backgroundType:t}}))},[g,c]),B=i.useCallback(e=>{let t=e?"CLOSE_ON_CLICK_OUTSIDE":"NONE";A.l7.user("overlay-background-interaction-edit-scope",()=>{a.X3B?.setOverlayBackgroundInteraction(l.dI(c),t)}),g((0,f._P)({name:"Overlay background interaction changed",params:{backgroundInteraction:t}}))},[g,c]),Y=i.useCallback(()=>(0,x._W)(v,{r:0,g:0,b:0,a:.25}),[v]),G=i.useCallback((e,t)=>{t!==P.zk.NO&&A.l7.user("overlay-background-color-edit-scope",()=>{a.X3B?.setOverlayBackgroundColor(l.dI(c),e)})},[c]);M(e=>{G(e.value,P.zk.YES)});let z=i.useCallback((e,t)=>{G(e,P.zk.YES)},[G]),W=i.useCallback((e,t)=>{let n=Y();G({r:n.r,g:n.g,b:n.b,a:e},t)},[Y,G]),J=i.useCallback(e=>{A.l7.user("overlay-position-type-edit-scope",()=>{a.X3B?.setOverlayPositionType(l.dI(c),e)}),g((0,f._P)({name:"Overlay position changed",params:{position:e}}))},[g,c]),$=Y(),q=Y().a,Z=(0,x.E7)(N),Q="CLOSE_ON_CLICK_OUTSIDE"===(0,x.E7)(T),ee="SOLID_COLOR"===(0,x.E7)(I),et=(0,o.jsxs)("div",{className:"overlay_panel--colorValueContainer--gJtb9 paint_panels--colorValueContainer--DGeSP raw_components--borderFocusWithin--BaipZ paint_panels--_baseColorValueContainer--t-UIV raw_components--base--T7G0z raw_components--singleRowHeight--dKM4t",children:[(0,o.jsx)(D.J,{onClick:ee?K:()=>{},color:$,opacity:q,recordingKey:_.Pt(t,"chit"),className:"overlay_panel--chit--Zn66r paint_panels--chit--twQEy"}),(0,o.jsx)(w.AN,{className:"overlay_panel--colorInputUI3--ozOrK paint_panels--colorInput--nSz13",noLeftBorder:!0,formatter:F,property:$,disabled:!ee,onChange:z,recordingKey:_.Pt(t,"colorInput"),noBorderOnFocus:!0}),(0,o.jsx)(C.Pd,{className:"overlay_panel--opacity--vrrjV paint_panels--opacityInputContainer--oqlsk",value:q,onValueChange:W,dispatch:g,disabled:!ee,noBorderOnFocus:!0,recordingKey:_.Pt(t,"opacity")})]});return(0,o.jsxs)(U.Zk,{className:"overlay_panel--overlayPanelUI3--GLqgD",children:[(0,o.jsx)(X,{overlayPositionType:Z,onOverlayPositionTypeChange:J,recordingKey:t}),!("ON_HOVER"===e||"ON_PRESS"===e)&&(0,o.jsx)(H,{children:(0,o.jsx)(E.S,{label:(0,o.jsx)(b.J,{children:(0,m.tx)("proto.close_when_clicking_outside")}),recordingKey:_.Pt(t,"closeOnClickOutside"),onChange:B,checked:Q})}),(0,o.jsx)(H,{children:(0,o.jsx)(E.S,{label:(0,o.jsx)(b.J,{children:(0,m.tx)("proto.overlay_panel.background")}),recordingKey:_.Pt(t,"addBackgroundBehindOverlay"),onChange:V,checked:ee})}),ee&&(0,o.jsx)(R.A,{ref:j,label:(0,m.t)("proto.overlay_panel.background"),input:et}),d&&(0,o.jsx)(k.h,{disabledVariableIds:new Set,initialPosition:u,color:$,boundVariable:null,onChange:G,onClose:L,recordingKey:_.Pt(t,"colorPicker")})]})}let G=K.l6,z=K.c$;class W extends i.PureComponent{constructor(){super(...arguments),this.titleFormatter=new g.Cr,this.renderOverlayPositionOption=(e,t)=>(0,o.jsx)(z,{value:e,recordingKey:_.Pt(this.props,e)},t)}render(){let e=["CENTER","TOP_LEFT","TOP_CENTER","TOP_RIGHT","BOTTOM_LEFT","BOTTOM_CENTER","BOTTOM_RIGHT"].map(this.renderOverlayPositionOption);return(0,o.jsxs)(G,{ariaLabelledBy:this.props.ariaLabelledBy,chevronClassName:"overlay_panel--chevron--7RTA-",className:this.props.className,dispatch:this.props.dispatch,dropdownShown:this.props.dropdownShown,dropdownWidth:B.DxS,formatter:this.titleFormatter,id:this.props.recordingKey??"overlay-position_select",inputClassName:"overlay_panel--input--tGHHB",onChange:this.props.onChange,property:this.props.property,recordingKey:_.Pt(this.props,"select"),children:[e,(0,o.jsx)(K.sK,{}),this.renderOverlayPositionOption("MANUAL",10)]})}}function X({overlayPositionType:e,onOverlayPositionTypeChange:t,recordingKey:n}){let a=(0,r.wA)(),l=(0,I.Um)(),s=i.useId(),c=(0,o.jsx)(W,{ariaLabelledBy:s,className:"overlay_panel--overlayPositionDropdown--ZxxSI",property:e,dispatch:a,dropdownShown:l,onChange:t,recordingKey:_.Pt(n,"overlayPositionDropdown")});return(0,o.jsx)(R.A,{label:(0,m.t)("proto.overlay_panel.position"),labelId:s,input:c})}W.displayName="OverlayPositionDropdown";var J=n(825923),$=n(684742),q=n(513674),Z=n(74620),Q=n(316923),ee=n(39456),et=n(660838),en=n(856876),eo=n(140490),ei=n(652539),er=n(911990),ea=n(805562),el=n(694908);let es="prototype_conditional_controls--conditionalRowUI3--rQlu6",ec="prototype_conditional_controls--conditionIcon--Npk57";var ed=n(609746),ep=n(969560),eu=n(764361);function e_(e){return(0,o.jsx)(eo.u,{label:"ConditionalBlock",children:(0,o.jsx)(eh,{...e})})}function eh({onDeleteAction:e,updateMultipleDestinationNodes:t,updateSelectionProperties:n,updateCondition:i,updateActions:r,onAddAction:l,autoOpenVariablePicker:s,isSelected:c,handleMouseDownUI3:d,...p}){let u=p.conditionalActions,h=u?.actions?u?.actions:[],g=u?.condition?u?.condition:void 0,y=(0,et.YT)()===et.Oz.TWO_COL,v=y?es:"prototype_conditional_controls--conditionalRowIf--25FqB prototype_conditional_controls--conditionalRow--u0PaS",I=(0,o.jsx)(Q.KN,{resolvedType:a.rXF.BOOLEAN,targetVariableData:g,updateSelectionProperties:n,recordingKey:p.recordingKey,updateConditionInConditionalAction:i,showVariableThumbnails:!0,isNarrowPanel:!0}),f=(0,o.jsx)("div",{className:"prototype_conditional_controls--addButton--vlYLn",children:(0,o.jsx)(el.t,{addButtonPressed:l,recordingKey:_.Pt(p.recordingKey,"addActionToIfButton"),renderButton:!0,isNestedInConditional:!0})}),N=(0,o.jsxs)(o.Fragment,{children:[y?(0,o.jsx)("span",{className:"prototype_conditional_controls--conditionIconUI3--zcwx0",children:(0,m.tx)("proto.else")}):(0,o.jsx)(ei.B,{className:ec,svg:ed.A}),!y&&h.length>0&&(0,o.jsx)("div",{className:"prototype_conditional_controls--addButtonForElse--ogBWu prototype_conditional_controls--addButton--vlYLn",children:(0,o.jsx)(el.t,{addButtonPressed:l,recordingKey:_.Pt(p.recordingKey,"addActionToElseButton"),renderButton:!y,isNestedInConditional:!0})})]}),T=y?(0,o.jsx)($.E,{className:"prototype_conditional_controls--elseBlockRowUI3--VXjmO",onClick:d,children:N}):(0,o.jsx)(U.fI,{className:y?es:"prototype_conditional_controls--conditionalRow--u0PaS",children:N});return(0,o.jsxs)(o.Fragment,{children:[p.ifStatement&&(0,o.jsx)("div",{className:v,children:!y&&(0,o.jsxs)(er.Y,{direction:"horizontal",spacing:4,children:[(0,o.jsx)("span",{className:y?"prototype_conditional_controls--conditionalRowConditionUI3--M2mOx":"prototype_conditional_controls--conditionalRowCondition--kn-f7",children:(0,o.jsxs)(er.Y,{direction:"horizontal",spacing:0,children:[(0,o.jsx)(ei.B,{className:ec,svg:ep.A}),(0,o.jsx)(er.Y,{direction:"horizontal",spacing:0,children:(0,x.hS)(g)&&I}),(0,o.jsx)(ei.B,{className:"prototype_conditional_controls--icon--JV1i0",svg:eu.default})]})}),!y&&h.length>0&&f]})}),!p.ifStatement&&T,h&&h.map((i,r)=>(0,o.jsx)(ea.P,{action:i,actionIndexPath:[p.actionIndexPath[0],p.actionIndexPath[1],r],autoOpenVariablePicker:s,expandedRows:p.expandedRows,interactionType:p.interactionType,isNestedInConditional:!0,numActions:h.length,onAddAction:l,onDeleteAction:()=>e(r),onDrop:p.onDrop,onExpand:p.onExpand,onSelect:p.onSelect,recordingKey:_.Pt(p.recordingKey,"conditional-action-row",r),selectedActionIndex:p.selectedActionIndex,selectedInteractions:p.selectedInteractions,stateManagementVersion:p.stateManagementVersion,updateMultipleDestinationNodes:t.appendActionIndex(r),updateSelectionProperties:n.appendActionIndex(r)},r)),0===h.length&&(0,o.jsx)(ea.P,{action:p.emptyAction,actionIndexPath:[p.actionIndexPath[0],p.actionIndexPath[1],0],autoOpenVariablePicker:s,expandedRows:p.expandedRows,interactionType:p.interactionType,isNestedInConditional:!0,numActions:h.length,onAddAction:l,onDeleteAction:()=>e(0),onDrop:p.onDrop,onExpand:p.onExpand,onSelect:p.onSelect,recordingKey:_.Pt(p.recordingKey,"conditional-action-row",0),selectedActionIndex:p.selectedActionIndex,selectedInteractions:p.selectedInteractions,stateManagementVersion:p.stateManagementVersion,updateMultipleDestinationNodes:t.appendActionIndex(0),updateSelectionProperties:n.appendActionIndex(0)},0)]})}function em(e,t,n){return function(o){var i=[...t];i.length>e?i[e].condition=o:i.push({condition:0===e?o:void 0,actions:[]},{condition:1===e?o:void 0,actions:[]}),n({conditionalActions:i})}}function eg({onDrop:e,onSelect:t,onExpand:n,action:i,updateMultipleDestinationNodes:a,updateSelectionProperties:l,interactionType:s,recordingKey:c,stateManagementVersion:d,selectedInteractions:p,actionIndexPath:u,selectedActionIndex:h,expandedRows:g,autoOpenVariablePicker:y,onNewActionAdded:v,handleMouseDownUI3:I}){let N=(0,r.wA)(),T=(0,Z.p8)("currentPage"),E=(0,et.YT)()===et.Oz.TWO_COL,b=E?h.equals(u):void 0,{shouldShowAdvancedPrototypingPaywall:A,showAdvancedPrototypingConditionalActionsModal:O}=(0,et.zt)(),j=(0,x.hS)(i.conditionalActions)&&i.conditionalActions?i.conditionalActions:[],P=e=>function(t){var n=[...j];n.length>e?n[e].actions=[...t]:n.push({actions:t}),l({conditionalActions:n})},S=e=>function(t){var n=[...j],o=0;if(n.length>e){var i=n[e].actions;i?i.push(t):i=[t],o=i.length}else n.push({actions:0===e?[t]:[]},{actions:1===e?[t]:[]}),o=1;"SET_VARIABLE"===t.connectionType&&(y.current=!0),l({conditionalActions:n}),v&&v(new ee.Op([u[0],e,o-1])),N((0,f._P)({name:"Prototype add action",params:{action:t.connectionType?t.connectionType:"NONE",source:"panel",page_id:T,actionInConditionalAction:!0}}))},C=e=>function(t){if(A)O();else{var n=[...j];let o=j[e],i=[];if(o&&o.actions)for(let e=0;e<o.actions.length;e++){let n=o.actions[e];e!==t?i.push(n):N((0,f._P)({name:"Prototype delete action",params:{action:n.connectionType?n.connectionType:"NONE",source:"panel",page_id:T,actionInConditionalAction:!0}}))}n[e].actions=i,l({conditionalActions:n})}},D=j.length>0?j[0]:void 0,k=j.length>1?j[1]:void 0;return(0,o.jsxs)("div",{style:E?{position:"relative"}:void 0,children:[(0,x.gl)(i.conditionalActions)&&(0,o.jsx)(q.Y1,{children:(0,o.jsx)($.E,{className:"prototype_conditional_controls--mixedConditionalText--6O32b",onClick:()=>{var e=[];e.push({},{}),l({conditionalActions:e})},children:(0,m.t)("fullscreen.properties_panel.click_to_replace_mixed_content")})}),(0,x.hS)(i.conditionalActions)&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(e_,{actionIndexPath:[u[0],0],autoOpenVariablePicker:y,conditionalActions:D,emptyAction:{ifStatement:!0,action:i},expandedRows:g,handleMouseDownUI3:I,ifStatement:!0,interactionType:s,isSelected:b,onAddAction:S(0),onDeleteAction:C(0),onDrop:e,onExpand:n,onSelect:t,recordingKey:_.Pt(c,"conditional-block",0),selectedActionIndex:h,selectedInteractions:p,stateManagementVersion:d,updateActions:P(0),updateCondition:em(0,j,l),updateMultipleDestinationNodes:a.appendActionIndex(0),updateSelectionProperties:l.appendActionIndex(0)},0),(0,o.jsx)(e_,{actionIndexPath:[u[0],1],autoOpenVariablePicker:y,conditionalActions:k,emptyAction:{ifStatement:!1,action:i},expandedRows:g,handleMouseDownUI3:I,ifStatement:!1,interactionType:s,isSelected:b,onAddAction:S(1),onDeleteAction:C(1),onDrop:e,onExpand:n,onSelect:t,recordingKey:_.Pt(c,"conditional-block",1),selectedActionIndex:h,selectedInteractions:p,stateManagementVersion:d,updateActions:P(1),updateCondition:em(1,j,l),updateMultipleDestinationNodes:a.appendActionIndex(1),updateSelectionProperties:l.appendActionIndex(1)},1)]})]})}function ey({updateSelectionProperties:e,conditionalActions:t,autoOpenExpressionBuilder:n,setAutoOpenExpressionBuilder:i,...r}){let l=t.length>0?t[0]:void 0,s=l?.condition?l?.condition:void 0,c=p()({"prototype_conditional_controls--standaloneIfConditional--GLFDU":!0,"prototype_conditional_controls--placeholderText--esG0u":!s});return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(R.A,{input:null,label:(0,m.t)("proto.condition")}),(0,o.jsx)(en.LG,{appendedClassName:"prototype_conditional_controls--conditionalActionRightPadding--xpK6Z",label:null,input:(0,x.hS)(s)?(0,o.jsx)("div",{className:c,children:(0,o.jsx)(Q.KN,{resolvedType:a.rXF.BOOLEAN,targetVariableData:s,updateSelectionProperties:e.appendActionIndex(0),recordingKey:r.recordingKey,updateConditionInConditionalAction:em(0,t,e),autoOpenExpressionBuilder:n,setAutoOpenExpressionBuilder:i,showVariableThumbnails:!0,isNarrowPanel:!0})}):null})]})}var ev=n(302727),ex=n(681958),eI=n(783728),ef=n.n(eI),eN=n(607804);class eT{constructor(e,t){this.nodeFormatter=e,this.scene=t,this.format=e=>{let t=this.nodeFormatter.format(e);if(this.scene&&e!==l.AD&&null!=e){let n=this.scene.get(e);if(n?.isResponsiveSet)return"/"===t?(0,m.t)("sites.panel.home"):t}return t}}}var eE=n(772523),eb=n(211862),eA=n(76365),eO=n(998619),ej=n(226486),eP=n(520266),eS=n(167151);function eC(e){let t=i.useMemo(()=>new g.cP(e.scene),[e.scene]),[n,r]=i.useState([]),[s,c]=i.useState([]),d=(0,eS.cJ)(),p=i.useCallback(()=>{let t=a.baT.ALL;"SCROLL_TO"===e.action?t=a.baT.SCROLL_TO:"SWAP_STATE_TO"===e.action?t=a.baT.STATES:"NAVIGATE_TO"===e.action&&d&&(t=a.baT.RESPONSIVE_SETS);let{viableIds:n,disabledIds:o}=a.X3B.getTransitionDestinationsOnActiveCanvas(t);return r(n),c(o),Promise.resolve()},[e.action,d]),u=e.nodeId===x.oV?x.oV:l.dI(e.nodeId),h=n;(0,x.hS)(u)&&u!==l.AD&&-1===h.indexOf(u)&&(h=h.concat([u]));let y="SCROLL_TO"!==e.action?h.filter(e=>t.hasNameForNode(e)).map(e=>(0,o.jsx)(ev.Option,{value:e,children:t.format(e)},`enabled-${e}`)):((n,i)=>{let r=ef()(n.filter(e=>t.hasNameForNode(e)),t=>t===i&&(0,x.hS)(i)?ex.Ql(e.scene,t)?.guid:e.scene.get(t)?.parentGuid),a=Object.keys(r);(0,ex.X4)(a,t.format.bind(t));let{tlfId:l,index:s}=(0,ex.H_)(e.scene,a);return l&&s&&(a.splice(s,1),a=[l,...a]),a.reduce((e,n,i)=>(0!==i&&e.push((0,o.jsx)(ev.Separator,{},i)),e.push((0,o.jsx)(ev.Option,{value:n+" ",disabled:!0,children:t.format(n)},`disabled-${n}`)),r[n].forEach((n,i)=>e.push((0,o.jsx)(ev.Option,{value:n,disabled:!1,children:t.format(n)},`enabled-${n+i}`))),e),[])})(h,u),v=s.filter(e=>t.hasNameForNode(e)).map(e=>(0,o.jsx)(ev.Option,{value:e,disabled:!0,children:t.format(e)},`disabled-${e}`)),I=(0,x.hS)(u)&&u!==l.AD?u:void 0;i.useEffect(()=>{p()},[p]);let f=i.useMemo(()=>new eT(t,e.scene),[t,e.scene]);return(0,o.jsxs)(ev.Root,{value:I,onChange:t=>{t&&e.onChange(t)},onSelectionChange:e=>{eE.Uc(e??"")},onOpenChange:e=>{e&&p()},recordingKey:_.Pt(e,"select"),children:[(0,o.jsx)(ev.Trigger,{label:(0,o.jsx)(b.h,{children:(0,m.tx)("proto.destination")}),"data-testid":"destination-select",width:"fill",children:I?f.format(I):(0,x.hS)(u)?f.format(u):"Mixed"}),(0,o.jsxs)(ev.Container,{children:[y||null,0!==s.length&&0!==h.length&&(0,o.jsx)(ev.Separator,{}),v]})]})}let eD=i.memo(function(e){let t=(0,eb.tS)(),n=(0,eb._G)(),l=(0,r.d4)(ek),s=(0,r.d4)(eA.Sh),c=(0,r.d4)(eA.dK),d=(0,eN.to)(),p=(0,eO.D)(s,c),u=(0,r.d4)(ew),_=i.useMemo(()=>(0,eP.cP)(u,t,n,d,e.actionIndexPath),[u,t,n,e.actionIndexPath,d]),h=i.useMemo(()=>(0,eP.cP)(l,t,n,d),[l,t,n,d]),m=_||h;if(!m||m.mode!==a.iCO.STATE_OR_STATE_INSTANCE_SUBLAYER)return null;let{allStates:g,stateGroupModel:y,selectedStates:v,selectedStatesPropertyValues:x}=m,I=y.propertySortOrder||[],f=y.propertyValues;return f?(0,o.jsx)(ej.lS,{allStates:g,extended:!0,hideErrorsPanel:!0,onSelectProperty:t=>{let n={};for(let e of Object.keys(t)){let o=t[e].symbol.node_id;for(let t of(n[e]=o,p[e]||[]))n[t]=o;for(let e of s)n[e]||(n[e]=o)}e.onChange(n)},recordingKey:e.recordingKey,selectedStates:v,selectedStatesPropertyValues:x,shouldIndent:!0,sortedProperties:I,stateGroupPropertyValues:f}):null});function ek(e){return e.mirror.selectionProperties.stateGroupSelectionInfo}function ew(e){return e.mirror.selectionProperties.prototypeDestinationStateGroupSelectionInfo}var eR=n(389724),eL=n(812714),eM=n(653899),eU=n(859277),eK=n(797715),eV=n(371952),eB=n(540864),eF=n(277159),eH=n(316325),eY=n(13073),eG=n(668700),ez=n(447563),eW=n(487375),eX=n(632796),eJ=n(643330);let e$="prototype_set_variable_controls--dropdownAndIconContainer--6m3Tw",eq="prototype_set_variable_controls--placeholderText--PBIqf";function eZ({targetVariableData:e,targetVariable:t,updateSelectionProperties:n,autoOpenVariablePicker:s,...c}){let d=i.useRef(null),u=(0,r.wA)(),g=(0,r.d4)(e=>e.variablePickerShown),y=(0,eV.tZ)((0,x.hS)(t)&&"id"in t?t.id:void 0),v=(0,eV.u)((0,x.hS)(t)&&"id"in t?t.id:void 0),[I,N]=i.useState("");(0,eM.h)(()=>{s&&!0===s.current&&(E(),s.current=!1)});let T=(0,eV.BQ)((0,x.hS)(t)&&"id"in t?t.id:void 0)??(0,eH.m9)((0,x.hS)(t)&&"nodeFieldAlias"in t?t.nodeFieldAlias:void 0);i.useEffect(()=>{void 0!==e&&T&&"MIXED"!==T&&(0,x.hS)(e)&&e.resolvedType!==T.resolvedType&&!((0,eH.tz)(e.resolvedType)&&(0,eH.tz)(T.resolvedType))&&n({targetVariableData:void 0})},[T,n,e]);let E=()=>{let e=d.current.getBoundingClientRect();u((0,eK.C)({type:"variable-picker-set-variable-action",isShown:!0,resolvedType:a.rXF.STRING,initialPosition:new O.Mi(e.left-20,e.top),key:c.recordingKey,onVariableSelected:P}))},b=i.useCallback(()=>{u((0,eK.B)())},[u]),[A,j]=i.useState(!1),P=i.useCallback(t=>{if(void 0!==t&&t.node_id){let o={targetVariable:{id:t.node_id}},i=a.CWU?.getVariableResolvedValue(t.node_id,new Map);!e&&t.resolvedType===a.rXF.COLOR&&i&&(o.targetVariableData=i??void 0),n(o),u((0,f.Zh)({name:"prototype.variable_selected",params:{collectionId:t.variableSetId,variableId:t.node_id,variableType:t.resolvedType}})),j(!0)}},[u,e,n]),S=i.useCallback(e=>{e.value.stablePath.map(e=>l.sH(e))&&(n({targetVariable:{nodeFieldAlias:{stablePathToNode:e.value.stablePath,nodeField:"COMPONENT_PROP_ASSIGNMENTS",indexOrKey:e.value.explicitDefId}}}),j(!0))},[n]),C=i.useMemo(()=>({type:"LOCAL_VARIABLES",layout:"list",includeExtendedCollections:!0}),[]),D=i.useRef(null);M(e=>{n({targetVariableData:e})});let k="nodeFieldAlias"in t?(0,eH.aA)(t.nodeFieldAlias.stablePathToNode,t.nodeFieldAlias.indexOrKey):void 0,w=k?(0,eH.Xx)(k.varValue.resolvedType):null,L=null;if((0,x.gl)(t))L=null;else if(T?.resolvedType===a.rXF.COLOR)L=(0,x.gl)(e)?(0,o.jsx)("div",{className:"prototype_set_variable_controls--targetVariableDataMixedContainer--H6uGu",children:(0,m.t)("fullscreen.mixed")}):(0,o.jsx)(eX.gJ,{variableValue:e??T,onChange:e=>{n({targetVariableData:e})},recordingKey:_.Pt(c.recordingKey,"variableValueInput"),setVariableAction:!0,innerContainerClassName:"prototype_set_variable_controls--variableColorInputContainer--NaOmp"});else{let t=a.rXF.BOOLEAN;v?t=v.resolvedType:k&&(t=k.varValue.resolvedType===a.rXF.TEXT_DATA?a.rXF.STRING:k.varValue.resolvedType),L=(0,o.jsx)("div",{children:(0,o.jsx)("div",{className:e$,children:(0,o.jsx)(Q.KN,{resolvedType:t,targetVariableData:e,autoOpenExpressionBuilder:A,setAutoOpenExpressionBuilder:j,updateSelectionProperties:n,recordingKey:c.recordingKey,isNarrowPanel:c.isNarrowPanel,showVariableThumbnails:!0})})})}let U=p()({"prototype_set_variable_controls--targetVariableDropdownUI3--Pz71q":!0,[eq]:!(y||k)}),K=(0,r.d4)(eB.ZM)?(0,m.t)("proto.select_variable_unified"):(0,m.t)("proto.select_variable.short"),V=(0,o.jsx)(eU.D8,{recordingKey:_.Pt(c.recordingKey,"selectTargetVariable"),onClick:E,children:(0,o.jsx)("div",{ref:d,children:(0,o.jsx)(er.Y,{children:(0,o.jsx)("div",{className:U,children:(0,o.jsx)("div",{className:e$,children:(0,x.gl)(t)?(0,o.jsx)("div",{className:p()(h.s.pt2.$,h.s.pb2.$),children:(0,m.t)("fullscreen.mixed")}):y?(0,o.jsx)(eW.wG,{text:y,thumbnailValue:T,isDeleted:!!v&&(0,eY.eF)(v)}):k?(0,o.jsx)(eW.wG,{text:k.name,thumbnailValue:w,isDeleted:!1,colorTheme:eW.J2.COMPONENT}):(0,o.jsx)("div",{className:p()(h.s.pt2.$,h.s.pb2.$,"prototype_set_variable_controls--placeholderTextColorUI3--Pc-4N"),children:K})})})})})}),B=(0,o.jsx)(R.A,{input:V,label:(0,m.t)("proto.target")}),F=p()({"prototype_set_variable_controls--setVariableToContainerUI3--pGbDe":!0,[eq]:!e&&T?.resolvedType!==a.rXF.COLOR}),H=(0,o.jsx)("div",{className:F,"data-testid":"set-variable-container",children:L}),Y=null!==L?(0,o.jsx)(R.A,{label:(0,m.t)("proto.variable.value"),input:H}):null;return(0,o.jsxs)("div",{children:[B,g.isShown&&"variable-picker-set-variable-action"===g.type&&g.key===c.recordingKey?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(eJ.Ao,{title:"",headerSize:"hidden",initialPosition:g.initialPosition,onClose:b,dragHeaderOnly:!1,initialWidth:216,canRenderBelowViewport:!0,children:(0,o.jsx)(ez.$8,{currentView:C,disabledVariableIds:new Set,onClose:b,onComponentPropSelected:(0,eL.kc)().ds_variable_props_proto?S:void 0,onSearchInputChange:N,onVariableSelected:P,pickerType:"set-variable",recordingKey:_.Pt(c.recordingKey,"variablePickerForSelection"),renderSetControls:()=>(0,o.jsx)(eG.Z,{currentView:C,subscribedLibraries:[],setControlRightButtons:(0,o.jsx)(eF.f,{resolvedTypes:[a.rXF.BOOLEAN,a.rXF.STRING,a.rXF.FLOAT,a.rXF.COLOR]}),recordingKey:_.Pt(c.recordingKey,"variablePickerForSelection")}),searchInputRef:D,searchQuery:I,selectedItem:v})}),(0,o.jsx)(ez.$3,{onClose:b})]}):null,Y]})}var eQ=n(506426),e0=n(680909),e1=n(762801),e2=n(751309),e7=n(836982),e4=n(313865),e5=n(475477);function e3(){let e=(0,o.jsx)(e5.N,{newTab:!0,href:"https://help.figma.com/hc/articles/14397859494295",htmlAttributes:{rel:"noopener noreferrer",onMouseDown:e=>{e.stopPropagation(),e.preventDefault()}},children:(0,m.tx)("proto.state_management.info_tooltip_learn_more")}),t=(0,o.jsx)("span",{children:(0,o.jsx)("strong",{children:(0,m.tx)("proto.animation_panel.preserve_scroll_position")})});return(0,o.jsx)(o.Fragment,{children:(0,m.tx)("proto.state_management.info_tooltip",{PreserveScrollPositionBold:t,LearnMoreLink:e})})}function e8({transition:e,navigationType:t,recordingKey:n,showPreserveScrollPosition:a,showResetVideoState:l,showResetInteractiveComponentState:s,updateSelectionProperties:c,stateManagementVersion:d,selectedInteractions:p}){let u=(0,r.wA)(),h=(0,y.Em)(),g=i.useContext(eR.c),v=(0,et.YT)()===et.Oz.TWO_COL&&g===eR.P.LEFT,I=e1.iv({placement:"bottom"});if(v)return null;let N=(0,et.LH)(d),T=(0,o.jsx)(E.S,{onChange:t=>{u((0,f._P)({name:"Preserve Scroll Changed",params:{newValue:t}})),c({...function(e){if((0,x.hS)(e.preserveScroll))return{transitionPreserveScroll:e.preserveScroll}}({...e,preserveScroll:t})})},checked:!0===e.preserveScroll,mixed:(0,x.gl)(e.preserveScroll),recordingKey:_.Pt(n,"preserve-scroll-check"),label:(0,o.jsx)(b.J,{children:(0,m.tx)("proto.animation_panel.preserve_scroll_position")})}),A=(0,o.jsx)(V.TN,{children:T}),O=(0,o.jsx)(E.S,{onChange:t=>{u((0,f._P)({name:"Reset Scroll Position Changed",params:{newValue:t,noodleUpgradedThisSession:e4.zZ.haveAnyInteractionsBeenUpgraded(p)}})),c({...function(e){if((0,x.hS)(e.resetScrollPosition))return{transitionResetScrollPosition:e.resetScrollPosition}}({...e,resetScrollPosition:t})})},checked:!0===e.resetScrollPosition,mixed:(0,x.gl)(e.resetScrollPosition),recordingKey:_.Pt(n,"reset-scroll-position-check"),label:(0,o.jsx)(b.J,{children:(0,m.tx)("proto.animation_panel.reset_scroll_position")})}),j=(0,o.jsxs)("div",{className:"prototype_state_management_panel--stateManagementPanelTooltipUI3--x5MQ3",children:[(0,o.jsx)(e1.Uj,{...I.getTriggerProps(),"aria-label":(0,m.t)("proto.state_management.info_tooltip_learn_more"),children:(0,o.jsx)(e2.B,{})}),(0,o.jsx)(e1.mc,{manager:I,children:(0,o.jsx)(e1.UC,{maxWidth:240,children:(0,o.jsx)(e3,{})})})]}),P=(0,o.jsxs)(V.TN,{children:[O," ",h&&j]}),S=(0,o.jsx)(E.S,{onChange:t=>{u((0,f._P)({name:"Reset Component State Changed",params:{newValue:t,noodleUpgradedThisSession:e4.zZ.haveAnyInteractionsBeenUpgraded(p)}})),c({...function(e){if((0,x.hS)(e.resetInteractiveComponents))return{transitionResetInteractiveComponents:e.resetInteractiveComponents}}({...e,resetInteractiveComponents:t})})},checked:!0===e.resetInteractiveComponents,mixed:(0,x.gl)(e.resetInteractiveComponents),recordingKey:_.Pt(n,"reset-component-state-check"),label:(0,o.jsx)(b.J,{children:(0,m.tx)("proto.animation_panel.reset_component_state")})}),C=(0,o.jsx)(V.TN,{children:S}),D=(0,o.jsx)(E.S,{onChange:t=>{u((0,f._P)({name:"Reset Video Position Changed",params:{newValue:t}})),c({...function(e){if((0,x.hS)(e.resetVideoPosition))return{transitionResetVideoPosition:e.resetVideoPosition}}({...e,resetVideoPosition:t})})},checked:!0===e.resetVideoPosition,mixed:(0,x.gl)(e.resetVideoPosition),recordingKey:_.Pt(n,"reset-video-position-check"),label:(0,o.jsx)(b.J,{children:(0,et.LH)(d)?(0,m.tx)("proto.state_management.reset_video_state"):(0,m.tx)("proto.animation_panel.reset_video_state")})}),k=(0,o.jsx)(V.TN,{children:D}),w=(0,o.jsxs)(U.Zk,{className:`prototype_state_management_panel--stateManagementPanel--sYaaj ${(0,et.kM)(d)&&"prototype_state_management_panel--stateManagementPanelWithVersion--AovOP"}`,children:[(0,et.uU)(d)&&a&&A,l&&(0,et.uU)(d)&&k,N&&P,N&&s&&C,N&&l&&k,(0,x.gl)(d)&&(0,o.jsx)(er.Y,{direction:"horizontal",padding:{horizontal:12,vertical:12},children:(0,o.jsx)(U.nV,{children:(0,m.tx)("proto.state_management.mixed_state_update")})})]});return(0,o.jsx)(e7.k,{name:"prototype_state_management_panel",children:(0,o.jsxs)(e0.bL,{defaultOpen:!1,children:[(0,o.jsx)(e0.Y9,{children:(0,o.jsx)(e0.JU,{recordingKey:_.Pt(n,"expand-caret"),actionOnPointerDown:!0,children:(0,m.tx)("proto.state")},"expand-caret")}),(0,o.jsx)(e0.UC,{children:w})]})})}let e6=K.c$,e9=K.l6,te=l.AD;class tt extends g.cP{format(e){return e===te||null===e?(0,m.t)("proto.target_video_node_name_formatter.this_video"):super.format(e)}}function tn(e){let{viableSameFrameVideoIds:t,disabledSameFrameVideoIds:n,scene:a,dropdownShown:s,targetVideoNodeID:c,isVideoSelected:d,onChange:p}=e,u=(0,r.wA)(),[h,y]=i.useState(()=>d?new tt(a):new g.cP(a));t.sort((e,t)=>{let n=h.format(e),o=h.format(t);return n.localeCompare(o)}),d&&t.unshift(te);let v=t.length>0&&n.length>0,I=`prototype-target-video-select-${e.recordingKey}`,f=i.useId(),N=(0,o.jsxs)(e9,{ariaLabelledBy:f,chevronClassName:"prototype_target_video_dropdown--chevron--jgz53",className:"prototype_target_video_dropdown--targetVideoDropdown--6hKF-",dataTestId:"target-video-select",dispatch:u,dropdownAlignment:"left",dropdownShown:s,formatter:h,id:I,inputClassName:"prototype_target_video_dropdown--input--infAK",onChange:p,onOptionFocus:e=>{eE.Uc(e??"")},property:(0,x.gl)(c)?c:l.dI(c),recordingKey:_.Pt(e,"select"),children:[t.filter(e=>h.hasNameForNode(e)).map((t,n)=>(0,o.jsx)(e6,{value:t,recordingKey:_.Pt(e,`viable-option-${n}`),disabled:!1},`enabled-${n}`)),v&&(0,o.jsx)(K.sK,{}),n.filter(e=>h.hasNameForNode(e)).map((t,n)=>(0,o.jsx)(e6,{value:t,recordingKey:_.Pt(e,`viable-option-${n}`),disabled:!0},`disabled-${n}`))]});return(0,o.jsx)(R.A,{input:N,label:(0,m.t)("proto.video_dropdown.label"),labelId:f})}var to=n(555013);function ti({action:e,recordingKey:t,onURLChange:n,onOpenInNewTabChange:i}){let r=(0,o.jsx)(to.ks,{className:"prototype_open_url_action_options--urlInputUI3--H-JfT",dataTestId:"url-input",placeholder:(0,m.t)("proto.interaction.example_com"),value:(0,x.gl)(e.connectionURL)?(0,m.t)("fullscreen.mixed"):(0,x._W)(e.connectionURL,""),onChange:n,recordingKey:_.Pt(t,"urlTextInput"),autoFocus:!1}),a=(0,o.jsx)(E.S,{label:(0,o.jsx)(b.J,{children:(0,m.tx)("proto.action_open_url_in_new_tab")}),onChange:i,recordingKey:_.Pt(t,"open-url-in-new-tab-check"),checked:void 0===e.openUrlInNewTab||!0===e.openUrlInNewTab});return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(R.A,{label:(0,m.t)("proto.open_url.text_input_label"),input:r}),(0,o.jsx)(V.TN,{children:a})]})}var tr=n(968169),ta=n(349311),tl=n(294044);function ts({updateSelectionProperties:e,action:t,extraScrollOffset:n,showScrollToOptions:a,recordingKey:l,setPropertiesForAnchorLink:s,hideXOffset:d,renderWithIconSpacing:p}){let{smallNudgeAmount:u,bigNudgeAmount:h}=(0,tr.sT)(),g=(0,r.wA)(),y=(t,n)=>(o,i)=>{if(t){if(s){s({extraScrollOffset:{...t,[n]:o}});return}e({extraScrollOffset:{...t,[n]:o}},{shouldCommit:i})}},v=(0,x._W)(n,{x:0,y:0}),I=i.useId();if(!a||"SCROLL_TO"!==t)return null;let f=(0,o.jsx)(C.gq,{bigNudgeAmount:h,"data-tooltip":(0,m.t)("proto.trigger.y_offset"),"data-tooltip-type":ta.Ib.TEXT,dispatch:g,inputClassName:tl.oM,onValueChange:y(v,"y"),recordingKey:_.Pt(l,"extraScrollOffsetY"),scrubMultiplier:u,smallNudgeAmount:u,tooltipForScreenReadersOnly:!1,value:v.y,wheelMultiplier:u,children:(0,o.jsx)("span",{className:tl.QK,children:(0,m.tx)("proto.scroll_options.scroll_offset.y")})}),N=(0,o.jsx)(C.gq,{bigNudgeAmount:h,"data-tooltip":(0,m.t)("proto.trigger.x_offset"),"data-tooltip-type":ta.Ib.TEXT,dispatch:g,inputClassName:tl.oM,onValueChange:y(v,"x"),recordingKey:_.Pt(l,"extraScrollOffsetX"),scrubMultiplier:u,smallNudgeAmount:u,tooltipForScreenReadersOnly:!1,value:v.x,wheelMultiplier:u,children:(0,o.jsx)("span",{className:tl.QK,children:(0,m.tx)("proto.scroll_options.scroll_offset.x")})});if(d){let e=(0,m.t)("proto.scroll_options.offset");return p?(0,o.jsx)(c.DE,{label:null,input:(0,o.jsxs)("div",{className:tl.G_,children:[(0,o.jsx)("div",{id:I,"aria-hidden":"true",className:tl.aB,"data-non-interactive":!0,children:e}),(0,o.jsx)("div",{className:tl.w1,children:f})]}),icon:null}):(0,o.jsx)(R.A,{label:e,input:f})}return(0,o.jsx)(V.Cm,{label:(0,o.jsx)(R.F,{tooltip:(0,m.t)("proto.scroll_options.offset"),children:(0,m.t)("proto.scroll_options.offset")}),leftInput:N,rightInput:f})}var tc=n(746371);let td="prototype_video_action_options--chevron--mkNyv",tp="prototype_video_action_options--input--3-cEi",tu=K.c$,t_=K.l6,th=new g.js,tm=new g.Z6;function tg({action:e,onChange:t,updateSelectionProperties:n,dropdownShown:a,recordingKey:l}){let s=(0,g.Od)(e),c=(0,x.E7)(e.mediaAction),d="UPDATE_MEDIA_RUNTIME"===(0,x.E7)(e.connectionType),p="SKIP_TO"===c,u="SKIP_FORWARD"===c||"SKIP_BACKWARD"===c,h="PLAY"===c||"PAUSE"===c||"TOGGLE_PLAY_PAUSE"===c,y="MUTE"===c||"UNMUTE"===c||"TOGGLE_MUTE_UNMUTE"===c,v=(0,r.wA)(),I=(0,tr.RU)(),N=i.useCallback(e=>{n({mediaSkipToTime:e}),v((0,f._P)({name:"Media skip to time changed",params:{value:e}}))},[v,n]),T=`prototype-media-action-select-${l}`,E="prototype_video_action_options--shortDropdown--NOXXv",b=a&&a.type===T?th:tm,A=i.useId(),O=(0,o.jsxs)(t_,{ariaLabelledBy:A,chevronClassName:td,className:E,dataTestId:"media-play-pause-select",dispatch:v,dropdownShown:a,formatter:b,id:T,inputClassName:tp,onChange:t,property:s,recordingKey:_.Pt(l,"select"),children:[(0,o.jsx)(tu,{value:"UPDATE_MEDIA_TOGGLE_PLAY_PAUSE",recordingKey:_.Pt(l,"toggle-play-pause-option"),disabled:!1},"UPDATE_MEDIA_TOGGLE_PLAY_PAUSE"),(0,o.jsx)(tu,{value:"UPDATE_MEDIA_PLAY",recordingKey:_.Pt(l,"play-option"),disabled:!1},"UPDATE_MEDIA_PLAY"),(0,o.jsx)(tu,{value:"UPDATE_MEDIA_PAUSE",recordingKey:_.Pt(l,"pause-option"),disabled:!1},"UPDATE_MEDIA_PAUSE")]}),j=i.useId(),P=(0,o.jsxs)(t_,{ariaLabelledBy:j,chevronClassName:td,className:E,dataTestId:"media-mute-unmute-select",dispatch:v,dropdownShown:a,formatter:b,id:T,inputClassName:tp,onChange:t,property:s,recordingKey:_.Pt(l,"select"),children:[(0,o.jsx)(tu,{value:"UPDATE_MEDIA_TOGGLE_MUTE_UNMUTE",recordingKey:_.Pt(l,"toggle-mute-unmute-option"),disabled:!1},"UPDATE_MEDIA_TOGGLE_MUTE_UNMUTE"),(0,o.jsx)(tu,{value:"UPDATE_MEDIA_MUTE",recordingKey:_.Pt(l,"mute-option"),disabled:!1},"UPDATE_MEDIA_MUTE"),(0,o.jsx)(tu,{value:"UPDATE_MEDIA_UNMUTE",recordingKey:_.Pt(l,"unmute-option"),disabled:!1},"UPDATE_MEDIA_UNMUTE")]}),S=i.useId(),D=(0,o.jsxs)(t_,{ariaLabelledBy:S,chevronClassName:td,className:E,dataTestId:"media-skip-by-select",dispatch:v,dropdownShown:a,dropdownWidth:160,formatter:b,id:T,inputClassName:tp,onChange:t,property:s,recordingKey:_.Pt(l,"select"),children:[(0,o.jsx)(tu,{value:"UPDATE_MEDIA_SKIP_FORWARD",recordingKey:_.Pt(l,"skip-forward-option"),disabled:!1},"UPDATE_MEDIA_SKIP_FORWARD"),(0,o.jsx)(tu,{value:"UPDATE_MEDIA_SKIP_BACKWARD",recordingKey:_.Pt(l,"skip-backward-option"),disabled:!1},"UPDATE_MEDIA_SKIP_BACKWARD")]}),k=(0,o.jsx)(C.qd,{className:"prototype_video_action_options--timestampContainer---DdaI","data-tooltip":(0,m.t)("proto.trigger.timestamp_to_set_to"),"data-tooltip-type":ta.Ib.TEXT,dataTestId:"mediaSkipToTime-input",dispatch:v,displayFractions:!0,inputClassName:"prototype_video_action_options--timestamp--luOrs",max:3600,onValueChange:N,recordingKey:_.Pt(l,"mediaSkipToTimeInput"),scrubMultiplier:I/1e3,tooltipForScreenReadersOnly:!0,value:e.mediaSkipToTime||0,wheelMultiplier:I/1e3,children:(0,o.jsx)(tc.R,{})}),w="SKIP_BACKWARD"===c?(0,m.t)("proto.trigger.duration_to_jump_backward"):(0,m.t)("proto.trigger.duration_to_jump_forward"),L=(0,o.jsx)(C.dE,{className:"prototype_video_action_options--timeAmountContainer--5kpHn","data-tooltip":w,"data-tooltip-type":ta.Ib.TEXT,dataTestId:"mediaSkipByAmount-input",dispatch:v,max:3600,onValueChange:e=>{n({mediaSkipByAmount:e}),v((0,f._P)({name:"Media skip by amount changed",params:{value:e}}))},recordingKey:_.Pt(l,"mediaSkipByAmountInput"),scrubMultiplier:I/1e3,tooltipForScreenReadersOnly:!0,value:e.mediaSkipByAmount||5,wheelMultiplier:I/1e3});return d?h?(0,o.jsx)(R.A,{input:O,label:(0,m.t)("proto.video_options.behavior"),labelId:A}):y?(0,o.jsx)(R.A,{input:P,label:(0,m.t)("proto.video_options.behavior"),labelId:j}):u?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(R.A,{input:D,label:(0,m.t)("proto.video_options.direction"),labelId:S}),(0,o.jsx)(R.A,{input:L,label:(0,m.t)("proto.video_options.offset")})]}):p?(0,o.jsx)(R.A,{input:k,label:(0,m.t)("proto.video_options.timestamp")}):(0,o.jsxs)(U.fI,{children:[h&&O,y&&P,u&&D,u&&L,p&&k]}):null}var ty=n(748624);let tv=({onUpdateTransitionNodeID:e})=>{let t=(0,r.wA)();return i.useCallback((n,o)=>{let i=l.sH(n);i&&e(i),t((0,f._P)({name:"Prototype navigation destination changed",params:{source:"panel",connectorIds:JSON.stringify(o),destinationTlfId:n}}))},[t,e])};function tx({action:e,recordingKey:t,interactionType:n,onActionChange:c,updateMultipleDestinationNodes:d,updateSelectionProperties:m,stateManagementVersion:v,autoOpenVariablePicker:E,autoOpenExpressionBuilder:b,setAutoOpenExpressionBuilder:A,...O}){let j=(0,r.wA)(),P=(0,I.Um)(),{scene:S}=(0,s.R)(e=>({scene:e.mirror.sceneGraph})),C=(0,y.cJ)(),D=(0,et.YT)(),k=D===et.Oz.SINGLE_COL,w=D===et.Oz.TWO_COL,R=i.useContext(eR.c),L=w&&R===eR.P.RIGHT,M="SET_VARIABLE"===(0,x.E7)(e.connectionType),U="SET_VARIABLE_MODE"===(0,x.E7)(e.connectionType),K="CONDITIONAL"===(0,x.E7)(e.connectionType),V="INTERNAL_NODE"===(0,x.E7)(e.connectionType),B="INTERNAL_NODE"===(0,x.E7)(e.connectionType)&&"SWAP_STATE"===(0,x.E7)(e.navigationType),F="URL"===(0,x.E7)(e.connectionType),H=V||"BACK"===(0,x.E7)(e.connectionType)||"CLOSE"===(0,x.E7)(e.connectionType),Y="UPDATE_MEDIA_RUNTIME"===(0,x.E7)(e.connectionType),G=(0,r.d4)(e=>{let t=e.mirror.selectionProperties.numSelected,n=e.mirror.selectionProperties.numVideosSelected;return 1===t&&!!n}),z=(0,T.uQ)(),W=[],X=[];if(z&&a.X3B){let{viableIds:e,disabledIds:t}=a.X3B.getVideoNodesOnSameTlfAsNode(z);W=e,X=t}let $=l.dI((0,x.E7)(e.transitionNodeID)),q=null!=$&&$!==l.AD,Z=V&&(!(0,x.hS)(e.transitionNodeID)||q)&&!(C&&!B&&"SCROLL_TO"!==(0,x.E7)(e.navigationType)),Q=(0,x.E7)(e.navigationType),ee=V&&"OVERLAY"===(0,x.E7)(Q),en=(0,et.hU)(e.transitionType,e.easingType,e.easingFunction,e.transitionDuration,e.transitionShouldSmartAnimate,e.transitionPreserveScroll,e.transitionResetVideoPosition,e.openUrlInNewTab,e.transitionResetScrollPosition,e.transitionResetInteractiveComponents),eo=H&&!ee&&("INSTANT"===en.behavior||"DISSOLVE"===en.behavior),ei=!Y&&(0,et.oc)(e),er=(0,et.GB)(e),ea=(0,et.uU)(v)?eo||ei:(0,et.Fp)(v,e.connectionType,e.navigationType),{selectedInteractions:el}=(0,ty.Ay)(N.J.NORMAL),es=el.map(e=>e.sourceNodeID&&e.id?u.d({nodeID:e.sourceNodeID,interactionID:e.id}):void 0).filter(e=>void 0!==e),ec=tv({onUpdateTransitionNodeID:e=>{m({transitionNodeID:e})}}),ed=e=>ec(e,es),ep=i.useCallback(e=>{d(e),j((0,f._P)({name:"Variant based prototyping UI changed",params:{source:"panel"}})),j((0,f._P)({name:"Prototype navigation destination changed",params:{source:"panel",connectorIds:JSON.stringify(es)}}))},[d,j,es]),eu=i.useCallback(e=>{m({connectionURL:e.target.value})},[m]),e_=(0,g.Od)(e),eh=p()({[tl.Ti]:O.isNestedInConditional&&!k&&!L}),em=V&&!B;return(0,o.jsxs)("div",{className:eh,children:[em&&(0,o.jsx)(tI,{action:e,interactionType:n,updateSelectionProperties:m,recordingKey:t,actionIndexPath:O.actionIndexPath}),F&&(0,o.jsx)(ti,{action:e,recordingKey:t,onOpenInNewTabChange:e=>{m({openUrlInNewTab:e}),j((0,f._P)({name:"Open Url In New Tab Changed",params:{value:e}}))},onURLChange:eu}),Y&&(0,o.jsx)(tn,{dropdownShown:P,scene:S,targetVideoNodeID:e.transitionNodeID||l.Hr,recordingKey:_.Pt(t,"targetVideoDropdown"),viableSameFrameVideoIds:W,disabledSameFrameVideoIds:X,isVideoSelected:G,onChange:ed}),(0,o.jsx)(tg,{dropdownShown:P,action:e,onChange:c,updateSelectionProperties:m,recordingKey:t}),M&&(0,o.jsx)("div",{children:(0,o.jsx)(eZ,{action:e_,autoOpenVariablePicker:E,className:tl.PB,dispatch:j,isNarrowPanel:O.isNestedInConditional||O.isNarrowPanel,isNestedInConditional:O.isNestedInConditional,nodeId:e.transitionNodeID||l.Hr,onChange:ed,recordingKey:_.Pt(t,"setVariableControls"),targetVariable:e.targetVariable||{id:""},targetVariableData:e.targetVariableData,updateSelectionProperties:m})}),U&&(0,o.jsx)("div",{children:(0,o.jsx)(eQ.I,{dispatch:j,targetVariableSetID:e.targetVariableSetID,targetVariableModeID:e.targetVariableModeID,deprecatedTargetVariableSetKey:e.targetVariableSetKey,variableSetTargetExtensionId:e.variableSetTargetExtensionId,updateSelectionProperties:m,recordingKey:_.Pt(t,"setVariableControls"),actionIndexPath:O.actionIndexPath.join(",")})}),K&&(L?(0,o.jsx)(ey,{recordingKey:_.Pt(t,"conditionalActionSection","conditional-block",0),autoOpenExpressionBuilder:b,setAutoOpenExpressionBuilder:A,updateSelectionProperties:m,conditionalActions:(0,x.hS)(e.conditionalActions)&&e.conditionalActions?e.conditionalActions:[]}):(0,o.jsx)(eg,{action:e,actionIndexPath:O.actionIndexPath,autoOpenVariablePicker:E,expandedRows:O.expandedRows,handleMouseDownUI3:O.handleMouseDownUI3,interactionType:n,onDrop:O.onDrop,onExpand:O.onExpand,onNewActionAdded:O.onNewActionAdded,onSelect:O.onSelect,recordingKey:_.Pt(t,"conditionalActionSection"),selectedActionIndex:O.selectedActionIndex,selectedInteractions:O.selectedInteractions,stateManagementVersion:v,updateMultipleDestinationNodes:d,updateSelectionProperties:m})),B&&(0,o.jsx)("div",{className:h.s.ml0.$,children:(0,o.jsx)(eD,{onChange:ep,nodeId:e.transitionNodeID||l.Hr,recordingKey:_.Pt(t,"consumption"),actionIndexPath:O.actionIndexPath})}),Z&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:tl.x}),(0,o.jsx)(J.X7,{transition:en,interactionType:n,navigationType:e.navigationType,recordingKey:_.Pt(t,"animationPanel"),updateSelectionProperties:m,isNarrowPanel:O.isNestedInConditional||O.isNarrowPanel,stateManagementVersion:v})]}),ea&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:tl.x}),(0,o.jsx)(e8,{connectionType:e.connectionType,navigationType:e.navigationType,recordingKey:_.Pt(t,"stateManagementPanel"),selectedInteractions:O.selectedInteractions,showPreserveScrollPosition:eo,showResetInteractiveComponentState:!!er,showResetVideoState:!!ei,stateManagementVersion:v,transition:en,updateSelectionProperties:m})]})]})}function tI({action:e,interactionType:t,updateSelectionProperties:n,actionIndexPath:r,recordingKey:a,setPropertiesForAnchorLink:d,hideXOffset:p,renderWithIconSpacing:h}){let{scene:y}=(0,s.R)(e=>({scene:e.mirror.sceneGraph})),I="INTERNAL_NODE"===(0,x.E7)(e.connectionType),f=(0,g.Od)(e),T=l.dI((0,x.E7)(e.transitionNodeID)),E=null!=T&&T!==l.AD,b=I&&"OVERLAY"===(0,x.E7)(e.navigationType)&&E,A=(0,x.E7)(e.navigationType),O=I&&"OVERLAY"===(0,x.E7)(A),j=I&&(O||"SWAP"===(0,x.E7)(A)),P=i.useId(),{selectedInteractions:S}=(0,ty.Ay)(N.J.INHERITED_INTERNAL),C=S.map(e=>e.sourceNodeID&&e.id?u.d({nodeID:e.sourceNodeID,interactionID:e.id}):void 0).filter(e=>void 0!==e),D=tv({onUpdateTransitionNodeID:e=>{if(d){d({transitionNodeID:e});return}n?n({transitionNodeID:e}):v.Y5.updateSelectionProperties({transitionNodeID:e})}}),k=(0,o.jsx)(eC,{action:f,ariaLabelledBy:P,nodeId:e.transitionNodeID||l.Hr,onChange:e=>D(e,C),recordingKey:_.Pt(a,"destinationDropdown"),scene:y}),w=(0,o.jsx)(ts,{action:f,showScrollToOptions:"SCROLL_TO"===f,extraScrollOffset:e.extraScrollOffset,updateSelectionProperties:n||v.Y5.updateSelectionProperties,recordingKey:_.Pt(a,"scrollOptionsPanel"),setPropertiesForAnchorLink:d,hideXOffset:p,renderWithIconSpacing:h}),L=r?(0,o.jsx)(Y,{interactionType:t,updateSelectionProperties:n||v.Y5.updateSelectionProperties,recordingKey:_.Pt(a,"overlaySettings"),actionIndexPath:r,nodeId:e.transitionNodeID||l.Hr}):null,M=j?(0,m.t)("proto.overlay"):(0,m.t)("proto.destination"),U=h?(0,o.jsx)(c.DE,{label:null,input:(0,o.jsxs)("div",{className:tl.G_,children:[(0,o.jsx)("div",{id:P,"aria-hidden":"true",className:tl.aB,"data-non-interactive":!0,children:M}),(0,o.jsx)("div",{className:tl.w1,children:k})]}),icon:null}):(0,o.jsx)(R.A,{labelId:P,label:M,input:k});return(0,o.jsxs)(o.Fragment,{children:[U,w,b&&L]})}},805562:(e,t,n)=>{n.d(t,{P:()=>et});var o=n(104076),i=n(716976),r=n(237420);let a=(0,i.memo)(function(e){return(0,o.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,"data-fpl-icon-size":"24",children:(0,o.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",fillRule:"evenodd",d:"M11.5 6a.5.5 0 0 1 .5.5V11a1 1 0 0 0 1 1h4.5a.5.5 0 0 1 0 1H13a2 2 0 0 1-2-2V6.5a.5.5 0 0 1 .5-.5",clipRule:"evenodd"})})});var l=n(795033),s=n(511570),c=n.n(s),d=n(559954),p=n(308424),u=n(641518),_=n(365120),h=n(192075),m=n(241421),g=n(506192),y=n(205088),v=n(302727),x=n(452981),I=n(790009),f=n(266808),N=n(812714);n(120440);var T=n(997477),E=n(553065),b=n(951770),A=n(540864),O=n(167151);function j({formatter:e,value:t,disabled:n}){return(0,o.jsx)(v.Option,{value:t,disabled:n,children:(0,o.jsxs)("div",{className:"x78zum5 x6s0dn4 x167g77z",children:[(0,o.jsx)("div",{className:"x78zum5 x6s0dn4 x1kky2od xlup9mm",children:(0,o.jsx)(I.J,{mode:"dark",children:"MIXED"===t?(0,o.jsx)("div",{className:"x1kky2od xlup9mm"}):(0,o.jsx)(P,{action:t})})}),(0,o.jsx)("div",{children:"MIXED"===t?(0,h.tx)("fullscreen.mixed"):e.format(t)})]})})}function P({action:e}){return(0,o.jsx)("div",{className:"prototype_action_dropdown--prototypeActionIcon--qChhY",children:(0,b.av)(e)})}function S(e){let t=`prototype-action-select-${e.recordingKey}`,n=e.dropdownShown&&e.dropdownShown.type===t,i=(0,E.E7)(e.action),a=(0,b.av)(i),l=(0,r.d4)(A.ZM),s=new m.js(!0,l),c=new m.Z6(!0,l),d=!(0,r.d4)(e=>e.mirror.selectionProperties.isValidPrototypingSourceSelected??!0);return(0,o.jsx)("div",{id:t,children:(0,o.jsxs)(v.Root,{onChange:e.onChange,value:e.action,recordingKey:u.Pt(e,"select"),children:[(0,o.jsx)(v.Trigger,{"data-testid":"action-select",disabled:d,iconLead:(0,o.jsx)("div",{className:"x180r7m8",children:a}),label:(0,o.jsx)(x.h,{children:(0,h.tx)("proto.action")}),width:"fill",children:(0,E.gl)(e.action)?(0,h.t)("fullscreen.mixed"):null}),(0,o.jsx)(v.Container,{children:function(e,t){let n=(0,O.cJ)(),i=(0,o.jsx)(j,{formatter:t,value:"NONE",disabled:!1},"NONE"),r=(0,o.jsx)(j,{formatter:t,value:"NAVIGATE_TO",disabled:!1},"NAVIGATE_TO"),a=(0,o.jsx)(j,{formatter:t,value:"SWAP_STATE_TO",disabled:f.glU?.isSelectionContainedInStateOrStateInstance()!==!0},"SWAP_STATE_TO"),l=(0,o.jsx)(j,{formatter:t,value:"GO_BACK",disabled:!1},"GO_BACK"),s=(0,o.jsx)(j,{formatter:t,value:"SCROLL_TO",disabled:!1},"SCROLL_TO"),c=(0,o.jsx)(j,{formatter:t,value:"OPEN_URL",disabled:!1},"OPEN_URL"),d=(0,o.jsx)(j,{formatter:t,value:"OPEN_OVERLAY",disabled:!1},"OPEN_OVERLAY"),p=(0,o.jsx)(j,{formatter:t,value:"SWAP_WITH",disabled:!1},"SWAP_WITH"),u=(0,o.jsx)(j,{formatter:t,value:"CLOSE_OVERLAY",disabled:!1},"CLOSE_OVERLAY"),_=(0,o.jsx)(j,{formatter:t,value:"SET_VARIABLE",disabled:!1},"SET_VARIABLE"),h=(0,N.kc)().prototype_set_mode_action&&(0,o.jsx)(j,{formatter:t,value:"SET_VARIABLE_MODE",disabled:!1},"SET_VARIABLE_MODE"),m=!e.isNestedInConditional&&(0,o.jsx)(j,{formatter:t,value:"CONDITIONAL",disabled:!1},"CONDITIONAL"),g=(0,o.jsx)(v.Separator,{},"first-divider"),y=(0,o.jsx)(v.Separator,{},"second-divider"),x=(0,o.jsx)(v.Separator,{},"third-divider"),{getConfig:I}=(0,T.I7)("exp_prototyping_reorder_actions"),b=!!I().getValue("new_ordering",!1),A=n?[a,l,s,g,_,m]:b?[i,g,r,a,l,s,c,y,_,h,m,x,d,p,u]:[i,g,r,a,l,s,c,y,d,p,u,x,_,h,m];if(e.showVideoActions&&!n){let e=[(0,o.jsx)(v.Separator,{},"fourth-divider"),(0,o.jsx)(j,{formatter:t,value:"UPDATE_MEDIA_PLAY_PAUSE_OPTIONS",disabled:!1},"UPDATE_MEDIA_PLAY_PAUSE_OPTIONS"),(0,o.jsx)(j,{formatter:t,value:"UPDATE_MEDIA_MUTE_UNMUTE_OPTIONS",disabled:!1},"UPDATE_MEDIA_MUTE_UNMUTE_OPTIONS"),(0,o.jsx)(j,{formatter:t,value:"UPDATE_MEDIA_SKIP_TO",disabled:!1},"UPDATE_MEDIA_SKIP_TO"),(0,o.jsx)(j,{formatter:t,value:"UPDATE_MEDIA_SKIP_BY_OPTIONS",disabled:!1},"UPDATE_MEDIA_SKIP_BY_OPTIONS")];A=A.concat(e)}return(0,E.gl)(e.action)&&(A=[(0,o.jsx)(j,{formatter:t,value:"MIXED",disabled:!0},"MIXED"),(0,o.jsx)(v.Separator,{},"mixed-divider")].concat(A)),A.filter(Boolean)}(e,n?s:c)})]})})}var C=n(951002),D=n(684742),k=n(264993),w=n(513674),R=n(236631),L=n(371952),M=n(316923),U=n(316325),K=n(389724),V=n(660838),B=n(13073),F=n(487375),H=n(294044);let Y="prototype_action_verbose_title--actionNameInsertion--aF4kI",G="prototype_action_verbose_title--actionName--qWJL3",z="prototype_action_verbose_title--actionNameUI3--JAYsG",W=()=>{let e=(0,r.d4)(e=>e.mirror.sceneGraph);return i.useMemo(()=>new m.cP(e),[e])};function X({action:e,isNestedInConditional:t,isNarrowPanel:n,onClick:r}){let a=(0,V.YT)()===V.Oz.TWO_COL,l=i.useContext(K.c),s=a&&l===K.P.LEFT,d=t||n,p=(0,L.u)((0,E.hS)(e.targetVariable)&&e.targetVariable&&"id"in e.targetVariable?e.targetVariable?.id:void 0),u=(0,E.hS)(e.targetVariable)&&e.targetVariable&&"nodeFieldAlias"in e.targetVariable?(0,U.aA)(e.targetVariable.nodeFieldAlias.stablePathToNode,e.targetVariable.nodeFieldAlias.indexOrKey):void 0,_=p?.name??u?.name,g=W(),y=new m.Z6(!0),v=(0,m._X)(e),x=(0,E.E7)(v),I=(0,b.av)(x),N=e=>{if(!e.connectionType||(0,E.gl)(e.connectionType))return null;let t=c()({[G]:!0,[z]:a}),n=c()({"prototype_action_verbose_title--actionDestination--JZ-gU":!0,"prototype_action_verbose_title--actionDestinationUI3--ZGxbq":a});switch(e.connectionType){case"NONE":case"SET_VARIABLE_MODE":case"OBJECT_ANIMATION":return null;case"INTERNAL_NODE":case"BACK":case"CLOSE":case"UPDATE_MEDIA_RUNTIME":{let i=e.transitionNodeID;if((0,E.gl)(i))return(0,o.jsx)("div",{className:t,children:(0,h.t)("proto.variant_actions.mixed")});if(void 0===i||k.aI(i,k.Hr))return null;let r=k.dI(i),a=g.format(r);return(0,o.jsx)("div",{className:n,children:a})}case"URL":{let i=e.connectionURL;if(!i)return null;if((0,E.gl)(i))return(0,o.jsx)("div",{className:t,children:(0,h.t)("proto.variant_actions.mixed")});return(0,o.jsx)("div",{className:n,children:i})}case"SET_VARIABLE":if(!e.targetVariableData||(0,E.gl)(e.targetVariableData))return null;return(0,o.jsx)("div",{className:"prototype_action_verbose_title--setVariablePreviewContainer--6omxy",children:(0,o.jsx)(M.y3,{targetVariableData:e.targetVariableData,showVariableThumbnails:!1,isNarrowPanel:d,isInConditional:!0})});case"CONDITIONAL":{if((0,E.gl)(e)||(0,E.gl)(e.conditionalActions)||!e.conditionalActions)return null;let t=e.conditionalActions.length>0?e.conditionalActions[0].condition:void 0;return(0,o.jsx)(M.y3,{targetVariableData:t,isInConditional:!0,showVariableThumbnails:!1})}default:(0,C.xb)(e.connectionType)}},T=c()({[R.s.block.bgTransparent.$]:!0,"prototype_action_verbose_title--buttonResetTextAlign--gy69p":!0,"prototype_action_verbose_title--buttonFocusOutline--YmAoD":!0,[H.Li]:d&&!a,[H.O8]:!d&&!a,[H.kE]:a}),A=c()({"prototype_action_verbose_title--iconContainer--jqarD":!0,"prototype_action_verbose_title--iconContainerUI3--yBP0-":a});return(0,o.jsx)(D.E,{className:T,onClick:r,children:(0,o.jsxs)(w.Y1,{horizontalAlignItems:"space-between",width:"fill-parent",children:[(0,o.jsx)("div",{className:A,children:I}),(e=>{let t=x?y.format(x):"Undefined",n=c()({[G]:!0,[z]:a});if(((0,E.gl)(e.connectionType)||(0,E.gl)(v))&&(t=(0,h.t)("fullscreen.mixed")),!e.connectionType||(0,E.gl)(e.connectionType)||"NONE"===e.connectionType||"BACK"===e.connectionType||"CLOSE"===e.connectionType)return(0,o.jsx)("div",{className:n,children:t});var i=N(e);switch(e.connectionType){case"INTERNAL_NODE":if("SWAP_STATE"===e.navigationType)return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:n,children:(0,h.t)("proto.action_change_to")}),i]});if(i){if("OVERLAY"===e.navigationType)return(0,o.jsx)("div",{className:Y,children:(0,h.tx)("proto.action_overlay_title",{overlayFrameName:(0,o.jsx)("span",{children:i})})});if("SWAP"===e.navigationType)return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:n,children:(0,h.t)("proto.action_swap_overlay_title")}),i]})}return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:n,children:t}),i]});case"UPDATE_MEDIA_RUNTIME":return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:n,children:t}),i]});case"URL":return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:n,children:i?(0,h.t)("proto.action_url_title"):(0,h.t)("proto.action_open_link")}),i]});case"SET_VARIABLE":{let r=e.targetVariableData&&(0,E.hS)(e.targetVariableData)&&e.targetVariableData.resolvedType===f.rXF.COLOR,l=c()({"prototype_action_verbose_title--actionNameInsertionColor--isir- prototype_action_verbose_title--actionNameInsertion--aF4kI":!0,"prototype_action_verbose_title--actionNameInsertionColorUI3--Apj0i":a});if(_&&i)return(0,o.jsx)("div",{className:r?l:Y,children:(0,h.tx)("proto.action_set_variable_title",{variableName:(0,o.jsx)("span",{className:"prototype_action_verbose_title--variableNameContainer--XeJX2",children:(0,o.jsx)(F.wG,{text:_,isDeleted:!!p&&(0,B.eF)(p),disableHover:s})}),variableValue:(0,o.jsx)("span",{className:"prototype_action_verbose_title--variableDestinationContainer--RXbKo prototype_action_verbose_title--variableNameContainer--XeJX2",children:i})})});return(0,o.jsx)("div",{className:n,children:t})}case"SET_VARIABLE_MODE":return(0,o.jsx)("div",{className:n,children:(0,h.t)("proto.action_set_variable_mode")});case"CONDITIONAL":return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:n,children:a?(0,h.t)("proto.if"):(0,h.t)("proto.action_conditional_title")}),i]});case"OBJECT_ANIMATION":return(0,o.jsx)(o.Fragment,{});default:(0,C.xb)(e.connectionType)}})(e)]})})}var J=n(506426),$=n(159080),q=n(694908),Z=n(39456),Q=n(818706);let ee=Symbol("ACTION_ROW");function et({updateMultipleDestinationNodes:e,updateSelectionProperties:t,onDeleteAction:n,stateManagementVersion:s,selectedInteractions:v,autoOpenVariablePicker:x,autoOpenExpressionBuilder:I,setAutoOpenExpressionBuilder:f,...N}){let T=(0,r.wA)(),{shouldShowAdvancedPrototypingPaywall:E,showAdvancedPrototypingVariablesModal:b,showAdvancedPrototypingConditionalActionsModal:A}=(0,V.zt)(),O=(0,g.Um)(),j=(0,V.hP)(),{firstVariableSetMode:P,firstVariableSetID:C}=(0,J.b)(),D=N.action,k=N.isNestedInConditional&&(0,Z.qQ)(N.action),w=!!D.connectionType&&"CONDITIONAL"===D.connectionType,R=(0,V.YT)(),L=R===V.Oz.SINGLE_COL,M=R===V.Oz.TWO_COL,U=i.useContext(K.c),B=M&&U===K.P.RIGHT,F=M&&U===K.P.LEFT;var Y=N.selectedActionIndex.equals(N.actionIndexPath);let G=1===N.selectedActionIndex.path.length&&N.isNestedInConditional&&N.actionIndexPath[0]===N.selectedActionIndex.path[0];var z=void 0===N.expandedRows||void 0!==N.expandedRows.find(e=>e.equals(N.actionIndexPath));z=!!L||!F||w;let[W,et]=i.useState(!1);i.useEffect(()=>{if(w){let e=setTimeout(()=>{et(!0)},0);return()=>clearTimeout(e)}et(!0)},[w]);let en=w&&!z,eo=w&&z,ei=i.useRef(null),[er,ea]=(0,l.fp)(V.hV),{position:el,dragItem:es}=(0,d.h4)(()=>({type:ee,element:ei,item:{action:N.action,actionIndexPath:new Z.Op(N.actionIndexPath)},dropPositionThreshold:eo?.2:en?1/3:.5,getDeepestTargetOnly:!0,canDrag:!!F||!z,onDrop(e){N.onDrop(e),ea(!0)}})),ec=i.useMemo(()=>{let e=ei.current;if(!e||!el||B)return;if(es&&"CONDITIONAL"===es.connectionType&&N.isNestedInConditional||(0,Z.qQ)(es)){ea(!1);return}let t=k?d.Nz.BEFORE:el;var n=void 0;let o=e.offsetParent?.firstElementChild?.scrollTop??0;return t===d.Nz.BEFORE?n=e.offsetTop-o:t===d.Nz.AFTER&&(n=e.offsetTop+e.offsetHeight-o),ea(!0),n},[el,B,es,N.isNestedInConditional,k,ea]),ed=el&&w&&!z&&el===d.Nz.INSIDE&&"CONDITIONAL"!==es.connectionType,ep=u.rf(N.recordingKey,"click",e=>{N.onSelect(N.actionIndexPath,!0)}),eu=u.rf(N.recordingKey,"mousedown",e=>{(0,Z.qQ)(N.action)||N.onSelect(N.actionIndexPath,!0)}),e_=e=>{var n=!0,o=!1;switch(e){case"NONE":t({connectionType:"NONE"});break;case"NAVIGATE_TO":t({connectionType:"INTERNAL_NODE",navigationType:"NAVIGATE"});break;case"OPEN_OVERLAY":t({connectionType:"INTERNAL_NODE",navigationType:"OVERLAY"});break;case"SCROLL_TO":t({connectionType:"INTERNAL_NODE",navigationType:"SCROLL_TO"});break;case"SWAP_WITH":t({connectionType:"INTERNAL_NODE",navigationType:"SWAP"});break;case"SWAP_STATE_TO":t({connectionType:"INTERNAL_NODE",navigationType:"SWAP_STATE"});break;case"GO_BACK":t({connectionType:"BACK"});break;case"CLOSE_OVERLAY":t({connectionType:"CLOSE"});break;case"OPEN_URL":t({connectionType:"URL"});break;case"SET_VARIABLE":E?(n=!1,b()):(t({connectionType:"SET_VARIABLE"}),x.current=!0);break;case"SET_VARIABLE_MODE":E?(n=!1,b()):t({connectionType:"SET_VARIABLE_MODE",targetVariableSetID:C,targetVariableModeID:P});break;case"UPDATE_MEDIA_PLAY":t({connectionType:"UPDATE_MEDIA_RUNTIME",mediaAction:"PLAY"});break;case"UPDATE_MEDIA_PAUSE":t({connectionType:"UPDATE_MEDIA_RUNTIME",mediaAction:"PAUSE"});break;case"UPDATE_MEDIA_PLAY_PAUSE_OPTIONS":case"UPDATE_MEDIA_TOGGLE_PLAY_PAUSE":t({connectionType:"UPDATE_MEDIA_RUNTIME",mediaAction:"TOGGLE_PLAY_PAUSE"});break;case"UPDATE_MEDIA_MUTE":t({connectionType:"UPDATE_MEDIA_RUNTIME",mediaAction:"MUTE"});break;case"UPDATE_MEDIA_UNMUTE":t({connectionType:"UPDATE_MEDIA_RUNTIME",mediaAction:"UNMUTE"});break;case"UPDATE_MEDIA_MUTE_UNMUTE_OPTIONS":case"UPDATE_MEDIA_TOGGLE_MUTE_UNMUTE":t({connectionType:"UPDATE_MEDIA_RUNTIME",mediaAction:"TOGGLE_MUTE_UNMUTE"});break;case"UPDATE_MEDIA_SKIP_BY_OPTIONS":case"UPDATE_MEDIA_SKIP_FORWARD":t({connectionType:"UPDATE_MEDIA_RUNTIME",mediaAction:"SKIP_FORWARD"});break;case"UPDATE_MEDIA_SKIP_BACKWARD":t({connectionType:"UPDATE_MEDIA_RUNTIME",mediaAction:"SKIP_BACKWARD"});break;case"UPDATE_MEDIA_SKIP_TO":t({connectionType:"UPDATE_MEDIA_RUNTIME",mediaAction:"SKIP_TO"});break;case"CONDITIONAL":o=!0,E?(n=!1,A()):(t({connectionType:"CONDITIONAL"}),f&&f(!0))}if(M&&N.onExpand(N.actionIndexPath,o),n){let t=v.filter(e=>!!e.sourceNodeID&&!!e.id).map(e=>p.d({nodeID:e.sourceNodeID,interactionID:e.id}));T((0,y._P)({name:"Prototype action changed",params:{action:e,source:"panel",connectorIds:JSON.stringify(t)}}))}},eh=N.isNestedInConditional?H.It:H.ft,em=c()({[H.wu]:!F,[H.zX]:F&&er}),eg=(0,o.jsx)(a,{className:H._2});if(k&&N.onAddAction)return(0,o.jsxs)("div",{className:F?H.LW:void 0,children:[ec&&(0,o.jsx)("hr",{className:eh,style:{transform:`translateY(${ec}px)`}}),F&&N.isNestedInConditional&&eg,(0,o.jsx)("div",{className:em,ref:ei,children:(0,o.jsx)(q.t,{addButtonPressed:N.onAddAction,recordingKey:u.Pt(N.recordingKey,"addAction"),isNestedInConditional:!0})})]});let ey=(0,m._X)(D),ev="NONE"!==ey,ex=(z||!ev)&&!F,eI=N.numActions>1,ef=c()({[H.$l]:!0,[H.KY]:F&&!N.isNestedInConditional,[H.Iw]:F&&!N.isNestedInConditional&&er,[H.DM]:F&&N.isNestedInConditional,[H.vs]:F&&N.isNestedInConditional&&er,[H.M9]:F&&N.isNestedInConditional&&G&&er,[H.I_]:F&&w&&!Y&&er,[H.PE]:Y&&F&&!N.isNestedInConditional,[H.Ze]:ed}),eN=c()({[H.rn]:!0,[H.Gu]:F,[H.Yo]:N.isNestedInConditional&&!B}),eT=(0,o.jsx)(X,{action:D,isNestedInConditional:N.isNestedInConditional,isNarrowPanel:N.isNarrowPanel&&eI,onClick:ep}),eE=(0,o.jsx)(S,{dispatch:T,dropdownShown:O,onChange:e_,action:ey,recordingKey:u.Pt(N.recordingKey,"actionDropdown"),showVideoActions:j,isNestedInConditional:N.isNestedInConditional}),eb=ex?eE:eT,eA=(0,o.jsx)(_.S.div,{className:eN,children:L||B?(0,o.jsx)(Q.A,{label:(0,h.t)("proto.action"),input:eb}):eb}),eO=c()({[H.Oe]:!0,[H.h2]:Y,[H.Ob]:w});return(0,o.jsxs)("div",{className:ef,ref:ei,children:[void 0!==ec&&(0,o.jsx)("hr",{className:eh,style:{transform:`translateY(${ec}px)`}}),F?(0,o.jsxs)("div",{className:eO,children:[N.isNestedInConditional&&eg,eA]}):eA,z&&W&&(0,o.jsx)($.x,{action:D,actionIndexPath:N.actionIndexPath,autoOpenExpressionBuilder:I,autoOpenVariablePicker:x,expandedRows:N.expandedRows,handleMouseDownUI3:eu,interactionType:N.interactionType,isNarrowPanel:N.isNarrowPanel,isNestedInConditional:N.isNestedInConditional,onActionChange:e_,onDrop:N.onDrop,onExpand:N.onExpand,onNewActionAdded:N.onNewActionAdded,onSelect:N.onSelect,recordingKey:N.recordingKey,selectedActionIndex:N.selectedActionIndex,selectedInteractions:v,setAutoOpenExpressionBuilder:f,stateManagementVersion:s,updateMultipleDestinationNodes:e,updateSelectionProperties:t})]})}},694908:(e,t,n)=>{n.d(t,{h:()=>I,t:()=>f});var o=n(104076),i=n(716976),r=n(237420),a=n(180),l=n(511570),s=n.n(l),c=n(641518),d=n(352630),p=n(192075),u=n(241421),_=n(951770),h=n(506192),m=n(278052),g=n(346886),y=n(167151),v=n(660838),x=n(294044);let I=e=>`interaction-panel-create-action-${e}`;function f(e){let t=I(e.recordingKey);var{showing:n,toggle:l,hide:f}=(0,h.BK)(t);let N=(0,i.useRef)(null),{recordingKey:T,addButtonPressed:E,presetInteractions:b,isLayoutNodeSelected:A}=e,{shouldShowAdvancedPrototypingPaywall:O,showAdvancedPrototypinglMultipleActionsModal:j}=(0,v.zt)(),P=(0,i.useCallback)(()=>{!e.skipPaywall&&O?j():l()},[e.skipPaywall,O,j,l]),S=(0,v.YT)()===v.Oz.TWO_COL,C=(0,v.hP)(),D=(0,y.cJ)(),k=(0,v.He)({showVideoActions:C,isNestedInConditional:e.isNestedInConditional,isSites:D,isUI3:!0,showPresetActions:!!e.presetInteractions,isLayoutNodeSelected:A}),w=(0,r.wA)(),R=(0,i.useCallback)(e=>{E((0,v.Bs)(e)),f()},[E,f]),L=s()({[x.x1]:e.renderButton,[x.xm]:!e.renderButton&&!S,[x.U3]:!e.renderButton&&S}),M=[];k.forEach(e=>{(0,v.vc)(e)?M.push(m.w):e===v.Xk&&b?.length?M.push(...b,m.w):M.push(function({actionType:e,clickCb:t,recordingKey:n,isUI3:o}){let i=(0,_.av)(e),r=new u.Z6(o),a=e?r.format(e):"Undefined";return{type:e,className:x.BP,callback:()=>t(e),icon:i,displayText:a,recordingKey:c.Pt(n,"createActionOption",e),"data-onboarding-key":`create-action-${e}`}}({clickCb:R,recordingKey:T,actionType:e,isUI3:!0}))});let U=e.isNestedInConditional?(0,p.t)("proto.prototype_panel.add_nested_action"):D?(0,p.t)("sites.panel.add_interaction"):(0,p.t)("proto.prototype_panel.add");return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(d.e6,{ref:N,recordingKey:c.Pt(T,"createActionDropdown"),className:L,onClick:P,"aria-label":(0,p.t)("proto.prototype_panel.create_action_button"),htmlAttributes:{"data-tooltip":U,"data-tooltip-type":"text"},children:e.renderButton?(0,o.jsx)(a.$,{}):(0,p.tx)("fullscreen.properties_panel.click_plus_to_add_new_action")}),n&&N.current&&(0,o.jsx)(g.j,{dataTestId:e.dataTestId,dispatch:w,hidePointWhenContentOffScreen:!0,items:M,lean:"center",minWidth:130,onSelectItem:e=>e.callback?.(),parentRect:N.current.getBoundingClientRect(),recordingKey:"actionDropdown",showPoint:!0})]})}},796141:(e,t,n)=>{n.d(t,{Z0:()=>tc});var o=n(104076),i=n(716976),r=n(237420),a=n(951002),l=n(662812),s=n(264993),c=n(641518),d=n(836982),p=n(192075),u=n(244205),_=n(111297),h=n(406954),m=n(354114),g=n(968169),y=n(772523),v=n(553065),x=n(754446),I=n(205088),f=n(563554),N=n(546547),T=n(369049),E=n(240347),b=n(224781),A=n(336518),O=n(302727),j=n(452981);let P=(0,i.memo)(function(e){return(0,o.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,"data-fpl-icon-size":"24",children:(0,o.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",fillRule:"evenodd",d:"M15 5H9a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1M9 4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2z",clipRule:"evenodd"})})}),S=(0,i.memo)(function(e){return(0,o.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,"data-fpl-icon-size":"24",children:(0,o.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",fillRule:"evenodd",d:"M18 8H6a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V9a1 1 0 0 0-1-1M6 7a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2z",clipRule:"evenodd"})})});var C=n(795033),D=n(337059),k=n(41076),w=n(349311),R=n(950241),L=n(501883),M=n(361170),U=n(850701),K=n(278491),V=n(386958),B=n(391145),F=n(964182),H=n(813371),Y=n(788613);function G(e){let t=i.useRef(null),{dispatch:n,pickerShown:r,prototypeBackgroundColor:a}=e,l=i.useCallback(()=>{let e=t.current;if(r&&r.id===K.$T)n(U.XE());else if(e&&e instanceof HTMLElement){let t=(0,V.cn)(e);n(U.u1({id:K.$T,initialX:t.x,initialY:t.y}))}},[n,r]),s=i.useCallback((e,t)=>{n((0,I._P)({name:"Prototype Background Modified"})),m.Y5.updateSelectionProperties({prototypeBackgroundColor:e},{shouldCommit:t})},[n]),d=(0,v._W)(a,{r:0,g:0,b:0,a:1}),u=(0,o.jsxs)("div",{className:"prototype_background_panel--colorValueContainer--CEbzl paint_panels--colorValueContainer--DGeSP raw_components--borderFocusWithin--BaipZ paint_panels--_baseColorValueContainer--t-UIV raw_components--base--T7G0z raw_components--singleRowHeight--dKM4t",children:[(0,o.jsx)(B.J,{onClick:l,color:d,opacity:d.a,recordingKey:c.Pt(e,"chit"),className:"prototype_background_panel--chit--F--d0 paint_panels--chit--twQEy"}),(0,o.jsx)(j.h,{htmlFor:"prototype-background-color-picker",children:(0,p.t)("presets.device_panel.background_color")}),(0,o.jsx)(H.AN,{id:"prototype-background-color-picker",className:"prototype_background_panel--color--e5Pc8 paint_panels--colorInput--nSz13",noLeftBorder:!0,formatter:k.TI,property:d,onChange:s,recordingKey:c.Pt(e,"colorInput"),noBorderOnFocus:!0})]});return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(Y.TN,{ref:t,children:u}),r&&r.id===K.$T&&(0,o.jsx)(F.h,{disabledVariableIds:new Set,initialPosition:new M.Mi(r.initialX??0,r.initialY??0),color:d,boundVariable:null,onChange:s,recordingKey:c.Pt(e,"colorPicker")})]})}var z=n(737139),W=n(152783),X=n(423006);let J="prototype_device_panel--deviceOption--rvW-q",$="prototype_device_panel--inactiveLabel--UEKyk raw_components--iconInsideBorderFocusWithin--2g7fO",q="prototype_device_panel--labelInactive--pv4Sf";class Z extends i.PureComponent{constructor(){super(...arguments),this.deviceInfo=()=>D.hY[this.props.prototypeDevice.presetIdentifier],this.shouldShowModelDropdown=()=>{let e=this.deviceInfo();return D.yr[e?.deviceName||""].length>1},this.onModelChange=e=>{if(!this.deviceInfo())return;let t=D.hY[e];if(!t)return;let n=this.props.prototypeDevice.rotation;m.Y5.updateSelectionProperties({prototypeDevice:{type:"PRESET",size:t.framePresetSize,presetIdentifier:e,rotation:n}})},this.renderModelDropdown=(e,t,n)=>{if(!e)return;let i=(0,o.jsx)(et,{presetIdentifier:this.deviceInfo().presetIdentifier,onChange:this.onModelChange,recordingKey:c.Pt(this.props,"modelDropdown")}),r=t?(0,o.jsx)(Y.dx,{left:i,right:n}):(0,o.jsx)(Y.TN,{children:i});return(0,o.jsxs)("div",{children:[!this.props.isUI3&&(0,o.jsx)(z.hl,{children:(0,o.jsx)(z.nV,{className:q,children:(0,p.tx)("presets.device_panel.model")})}),this.props.isUI3?r:(0,o.jsx)(z.fI,{children:i})]})},this.cssForCurrentDeviceRotation=()=>{if("NONE"===this.props.prototypeDevice.type)return;let e="";switch("MICROSOFT_SURFACE_PRO_4"===this.props.prototypeDevice.presetIdentifier&&(e="scale(0.65)"),this.props.prototypeDevice.rotation){case"NONE":default:return;case"CCW_90":return`rotate(-90deg) ${e}`}},this.renderDevicePreview=()=>{let e=this.deviceInfo();if(!e)return;let t=(0,v._W)(this.props.prototypeBackgroundColor,{r:0,g:0,b:0,a:0}),n=k.z5.format(t),i=t.r>.9&&t.g>.9&&t.b>.9,r=`1px solid ${i?"#EFEFEF":"transparent"}`,a=(0,o.jsx)("div",{className:"prototype_device_panel--devicePreview--T2Tzn",style:{backgroundColor:n,border:r},children:(0,o.jsx)("img",{className:"prototype_device_panel--deviceImage--Wpr8Y",src:e.thumbnailUrl,style:{transform:this.cssForCurrentDeviceRotation()},alt:`${e.getI18nDeviceName()}`})});return(0,o.jsxs)("div",{children:[!this.props.isUI3&&(0,o.jsx)(z.hl,{children:(0,o.jsx)(z.nV,{className:q,children:(0,p.tx)("presets.device_panel.preview")})}),this.props.isUI3?(0,o.jsx)(Y.TN,{appendedClassName:X.Rk,children:a}):(0,o.jsx)("div",{className:"prototype_device_panel--devicePreviewContainer--pC-H4",children:a})]})},this.onChangeOrientation=e=>{let t=this.props.prototypeDevice;if("NONE"===t.type)return;let n=t.size.y>t.size.x,o=t.rotation;o=n?"PORTRAIT"===e?"NONE":"CCW_90":"PORTRAIT"===e?"CCW_90":"NONE",m.Y5.updateSelectionProperties({prototypeDevice:{...t,rotation:o}})},this.currentDeviceOrientation=()=>{let e=this.props.prototypeDevice;return"NONE"===e.type?"PORTRAIT":e.size.y>e.size.x?"NONE"===e.rotation?"PORTRAIT":"LANDSCAPE":"NONE"===e.rotation?"LANDSCAPE":"PORTRAIT"}}render(){let e=this.props.prototypeDevice,t=(0,o.jsx)(ee,{dispatch:this.props.dispatch,prototypeDevice:this.props.prototypeDevice,isUI3:this.props.isUI3,recordingKey:c.Pt(this.props,"deviceDropdown")}),n=(0,o.jsxs)(b.bL,{onChange:this.onChangeOrientation,recordingKey:c.Pt(this.props,"orientationControl"),value:this.currentDeviceOrientation(),legend:(0,o.jsx)(A.q,{children:(0,p.t)("presets.device_panel.rotation")}),children:[(0,o.jsx)(b.c$,{"aria-label":(0,p.t)("presets.device_panel.rotation.portrait"),value:"PORTRAIT",icon:(0,o.jsx)(P,{})}),(0,o.jsx)(b.c$,{"aria-label":(0,p.t)("presets.device_panel.rotation.landscape"),value:"LANDSCAPE",icon:(0,o.jsx)(S,{})})]}),i=(0,D.$X)(e.type||"NONE",e.presetIdentifier),r=(0,o.jsxs)(z.fI,{children:[t,i&&n]}),a=this.deviceInfo()&&this.shouldShowModelDropdown(),l=i&&!a?(0,o.jsx)(Y.dx,{left:t,right:n}):(0,o.jsx)(Y.TN,{children:t}),s=(0,o.jsx)(Q,{prototypeDevice:this.props.prototypeDevice,dispatch:this.props.dispatch,smallNudgeAmount:this.props.smallNudgeAmount,bigNudgeAmount:this.props.bigNudgeAmount,recordingKey:c.Pt(this.props,"deviceSizeInputs")});return(0,o.jsxs)(z.Zk,{children:[(0,o.jsx)(z.fI,{className:"prototype_device_panel--panelTitleRowOuter--wkKKy collapsible_property_panel--panelTitleRowOuter--i5K0R",children:(0,o.jsx)(L.xw,{innerRef:this.props.titleRef,extended:this.props.isUI3,doNotReserveSpaceForChevron:!0,forceNoChevron:!0,children:this.props.isUI3?(0,p.tx)("presets.device_panel.prototype_settings"):(0,p.tx)("presets.device_panel.device")})}),this.props.isUI3?l:r,this.renderModelDropdown(!!a,i,n),this.props.isUI3&&"CUSTOM"===this.props.prototypeDevice.type&&s,this.props.isUI3&&(0,o.jsx)(G,{pickerShown:this.props.pickerShown,dispatch:this.props.dispatch,prototypeBackgroundColor:this.props.prototypeBackgroundColor,recordingKey:c.Pt(this.props,"backgroundPanel")}),this.renderDevicePreview(),!this.props.isUI3&&"CUSTOM"===this.props.prototypeDevice.type&&s]})}}function Q(e){let t=i.useCallback(t=>{m.Y5.updateSelectionProperties({prototypeDevice:{type:"CUSTOM",size:{x:t,y:e.prototypeDevice.size.y},rotation:e.prototypeDevice.rotation}})},[e.prototypeDevice.size.y,e.prototypeDevice.rotation]),n=i.useCallback(t=>{m.Y5.updateSelectionProperties({prototypeDevice:{type:"CUSTOM",size:{x:e.prototypeDevice.size.x,y:t},rotation:e.prototypeDevice.rotation}})},[e.prototypeDevice.size.x,e.prototypeDevice.rotation]),r=(0,o.jsx)(R.$j,{bigNudgeAmount:e.bigNudgeAmount,className:"prototype_device_panel--scrubbableInputLeftCol--P2T66 prototype_device_panel--scrubbableInput--0TFVb","data-tooltip":(0,p.t)("presets.device_panel.device_width_tooltip"),"data-tooltip-type":w.Ib.TEXT,dispatch:e.dispatch,inputClassName:"prototype_device_panel--leftColInput--pAJSy prototype_device_panel--input--vNirJ",onValueChange:t,recordingKey:c.Pt(e,"deviceWidth"),smallNudgeAmount:e.smallNudgeAmount,tooltipForScreenReadersOnly:!0,value:e.prototypeDevice.size.x,children:(0,o.jsx)("span",{className:$,children:(0,p.tx)("proto.device_panel.width")})}),a=(0,o.jsx)(R.$j,{bigNudgeAmount:e.bigNudgeAmount,className:"prototype_device_panel--scrubbableInput--0TFVb","data-tooltip":(0,p.t)("presets.device_panel.device_height_tooltip"),"data-tooltip-type":w.Ib.TEXT,dispatch:e.dispatch,inputClassName:"prototype_device_panel--input--vNirJ",onValueChange:n,recordingKey:c.Pt(e,"deviceHeight"),smallNudgeAmount:e.smallNudgeAmount,tooltipForScreenReadersOnly:!0,value:e.prototypeDevice.size.y,children:(0,o.jsx)("span",{className:$,children:(0,p.tx)("proto.device_panel.height")})});return(0,o.jsx)(Y.dx,{left:r,right:a})}Z.displayName="PrototypeDevicePanel";class ee extends c.o6{constructor(){super(...arguments),this.formatter={format:e=>"NONE"===e?this.props.isUI3?(0,p.t)("proto.frame_preset_panel.no_device"):(0,p.t)("proto.frame_preset_panel.none"):"CUSTOM"===e?(0,p.t)("proto.frame_preset_panel.custom_size"):"PRESENTATION"===e?(0,p.t)("proto.frame_preset_panel.presentation"):e.getI18nDeviceName(),isEqual:(e,t)=>"NONE"===e||"CUSTOM"===e||"PRESENTATION"===e||"NONE"===t||"CUSTOM"===t||"PRESENTATION"===t?e===t:e.presetIdentifier===t.presetIdentifier},this.onChange=e=>{(0,I.$J)(e,this.props.prototypeDevice);let t=this.props.prototypeDevice.type,n=t;n="NONE"===e?"NONE":"PRESENTATION"===e?"PRESENTATION":"CUSTOM"===e?"CUSTOM":"PRESET",this.props.dispatch((0,I._P)({name:"Prototype Device Type Changed",params:{oldType:this.props.prototypeDevice.presetIdentifier||t,newType:e.presetIdentifier||n,isInlinePreviewOpened:C.zl.get(W.hg).modalStatus===W.bi.OPEN}}))},this.renderPresetOption=(e,t)=>{let n=(0,D.Fh)(e,this.props.prototypeDevice);if(null===n)return null;let i=n.framePresetSize;return(0,o.jsx)(O.Option,{value:n.presetIdentifier,children:(0,o.jsxs)("div",{className:J,children:[(0,o.jsx)("span",{children:n.getI18nDeviceName()}),(0,o.jsxs)("span",{children:[i.x,"\u200A\xd7\u200A",i.y]})," "]})},t)}}render(){let e;let t="string"==typeof(e="NONE"===this.props.prototypeDevice.type?"NONE":"PRESENTATION"===this.props.prototypeDevice.type?"PRESENTATION":"CUSTOM"===this.props.prototypeDevice.type?"CUSTOM":D.hY[this.props.prototypeDevice.presetIdentifier]||"NONE")?e:e.presetIdentifier;return(0,o.jsxs)(O.Root,{onChange:e=>{"NONE"===e||"PRESENTATION"===e||"CUSTOM"===e?this.onChange(e):this.onChange((0,D.Fh)(e,this.props.prototypeDevice))},recordingKey:c.Pt(this.props,"select"),value:t,children:[(0,o.jsx)(O.Trigger,{label:(0,o.jsx)(j.h,{children:(0,p.tx)("proto.frame_preset_panel.device")}),width:"fill",children:this.formatter.format(e)}),(0,o.jsxs)(O.Container,{children:[(0,o.jsx)(O.Option,{value:"NONE",children:(0,p.tx)("proto.frame_preset_panel.no_device")}),(0,o.jsx)(O.Separator,{}),D.r6.map(this.renderPresetOption),(0,o.jsx)(O.Separator,{}),D.J_.map(this.renderPresetOption),(0,o.jsx)(O.Separator,{}),D.AG.map(this.renderPresetOption),(0,o.jsx)(O.Separator,{}),D.$w.map(this.renderPresetOption),(0,o.jsx)(O.Separator,{}),(0,o.jsx)(O.Option,{value:"CUSTOM",children:(0,o.jsxs)("div",{className:J,children:[(0,o.jsx)("span",{children:(0,p.tx)("proto.frame_preset_panel.custom_size")}),(0,o.jsx)("span",{children:(0,p.tx)("proto.frame_preset_panel.fit")})]})}),(0,o.jsx)(O.Option,{value:"PRESENTATION",children:(0,o.jsxs)("div",{className:J,children:[(0,o.jsx)("span",{children:(0,p.tx)("proto.frame_preset_panel.presentation")}),(0,o.jsx)("span",{children:(0,p.tx)("proto.frame_preset_panel.fill")})]})}),(0,o.jsx)(O.Separator,{}),D.dr.map(this.renderPresetOption)]})]})}}ee.displayName="DeviceDropdown";class et extends c.o6{constructor(){super(...arguments),this.formatter={format:e=>{let t=D.hY[e];return t?t.getI18nStyleName():(0,p.t)("proto.frame_preset_panel.missing")},isEqual:(e,t)=>e===t},this.renderStyleOption=(e,t)=>{let n=e.presetIdentifier;return(0,o.jsx)(O.Option,{value:n,children:D.hY[n].getI18nStyleName()},t)}}render(){let e=D.hY[this.props.presetIdentifier];if(!e)return null;let t=D.yr[e.deviceName],n=this.props.presetIdentifier;return(0,o.jsxs)(O.Root,{onChange:this.props.onChange,recordingKey:c.Pt(this.props,"select"),value:n,children:[(0,o.jsx)(O.Trigger,{label:(0,o.jsx)(j.h,{children:(0,p.tx)("proto.frame_preset_panel.device.model")}),width:"fill",children:this.formatter.format(n)}),(0,o.jsx)(O.Container,{children:t.map(this.renderStyleOption)})]})}}et.displayName="ModelDropdown";var en=n(645626),eo=n(474575),ei=n(843893),er=n(989941),ea=n(4921);let el=(0,i.memo)(function(e){return(0,o.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,"data-fpl-icon-size":"24",children:(0,o.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",fillRule:"evenodd",d:"M9.146 6.146a.5.5 0 0 1 .708 0l2 2a.5.5 0 0 1 0 .708l-2 2a.5.5 0 0 1-.708-.708L10.293 9H9a3 3 0 1 0 0 6h.5a.5.5 0 0 1 0 1H9a4 4 0 0 1 0-8h1.293L9.146 6.854a.5.5 0 0 1 0-.708M14 8.5a.5.5 0 0 1 .5-.5h.5a4 4 0 0 1 0 8h-1.293l1.147 1.146a.5.5 0 0 1-.708.708l-2-2a.5.5 0 0 1 0-.708l2-2a.5.5 0 0 1 .708.708L13.707 15H15a3 3 0 1 0 0-6h-.5a.5.5 0 0 1-.5-.5",clipRule:"evenodd"})})}),es=(0,i.memo)(function(e){return(0,o.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,"data-fpl-icon-size":"24",children:(0,o.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",fillRule:"evenodd",d:"M17.854 6.854a.5.5 0 0 0-.708-.708l-11 11a.5.5 0 0 0 .708.708zm-8.708-.708a.5.5 0 0 1 .708 0l2 2a.5.5 0 0 1 0 .708l-2 2a.5.5 0 0 1-.708-.708L10.293 9H9a3 3 0 0 0-2.143 5.1.5.5 0 0 1-.714.7A4 4 0 0 1 9 8h1.293L9.146 6.854a.5.5 0 0 1 0-.708m8.004 3.047a.5.5 0 0 1 .707.008A4 4 0 0 1 15 16h-1.293l1.147 1.145a.5.5 0 0 1-.708.708l-2-2a.5.5 0 0 1 0-.708l2-2a.5.5 0 0 1 .708.708L13.707 15H15a3 3 0 0 0 2.143-5.1.5.5 0 0 1 .007-.707",clipRule:"evenodd"})})});var ec=n(669417);let ed=(0,i.memo)(function(e){return(0,o.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,"data-fpl-icon-size":"24",children:(0,o.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",d:"M13 18a1 1 0 0 1-1.707.707l-2.44-2.44.708-.707L12 18v-4.88l1-1zm3.146-11.854a.5.5 0 0 1 .707.707l-11 11a.5.5 0 0 1-.707-.707zm-4.853-.853A1 1 0 0 1 13 6v1.879l-1 1v-2.88L9 9H6.5a.5.5 0 0 0-.5.5v5c0 .108.034.207.09.288l-.71.71A1.5 1.5 0 0 1 5 14.5v-5A1.5 1.5 0 0 1 6.5 8h2.086zm4.483 4.05a3.5 3.5 0 0 1-1.215 5.991c-.29.093-.56-.143-.561-.447v-.029c0-.238.17-.437.393-.522a2.501 2.501 0 0 0 .674-4.283zM14 11.294c0-.344.35-.576.588-.325a1.494 1.494 0 0 1 0 2.063c-.238.25-.588.019-.588-.326z"})})});var ep=n(228172),eu=n(652539),e_=n(145060),eh=n(983040),em=n(621897);function eg({videoPlayback:{mediaLoop:e,muted:t}}){let n=null;return(0,v.gl)(e)&&(0,v.gl)(t)?n=(0,p.tx)("proto.prototype_panel.replace_mixed_muted_and_loop_video_playback",{loopSvg:(0,o.jsx)(eu.B,{svg:eh.A,className:e_.eT}),speakerSvg:(0,o.jsx)(eu.B,{svg:em.A,className:e_.To})}):(0,v.gl)(e)?n=(0,p.tx)("proto.prototype_panel.replace_mixed_video_playback",{svg:(0,o.jsx)(eu.B,{svg:eh.A,className:e_.eT})}):(0,v.gl)(t)&&(n=(0,p.tx)("proto.prototype_panel.replace_mixed_video_playback",{svg:(0,o.jsx)(eu.B,{svg:em.A,className:e_.To})})),n?(0,o.jsx)(z.fI,{children:(0,o.jsx)(z.nV,{className:e_.pc,children:n})}):null}let ey=e=>(0,v.gl)(e)?"mixed":e,ev=e=>!0===e,ex=function(e){let t=(0,o.jsx)("span",{children:(0,o.jsx)(er.S,{label:(0,o.jsx)(j.J,{htmlAttributes:{"data-tooltip":(0,p.t)("proto.prototype_panel.default_video_playback_state"),"data-tooltip-type":w.Ib.TEXT},children:(0,p.tx)("proto.prototype_panel.autoplay")}),onChange:t=>{e.updateSelectionProperties({videoAutoplay:t}),e.dispatch((0,I._P)({name:"Node video autoplay Changed",params:{newAutoplay:t,oldAutoplay:ey(e.videoPlayback.autoplay),numVideosSelected:e.videoPlayback.numVideosSelected}}))},checked:ev(e.videoPlayback.autoplay),mixed:(0,v.gl)(e.videoPlayback.autoplay),recordingKey:c.Pt(e,"autoPlayToggle")})}),n=(0,o.jsx)(ea.f,{checked:ev(e.videoPlayback.mediaLoop),mixed:(0,v.gl)(e.videoPlayback.mediaLoop),onIcon:(0,o.jsx)(el,{}),offIcon:(0,o.jsx)(es,{}),onChange:()=>{let t=!ev(e.videoPlayback.mediaLoop);e.updateSelectionProperties({videoMediaLoop:t}),e.dispatch((0,I._P)({name:"Node video loop changed",params:{newLoop:t,oldLoop:ey(e.videoPlayback.mediaLoop),numVideosSelected:e.videoPlayback.numVideosSelected}}))},"data-testid":"videoLoopToggle",recordingKey:c.Pt(e,"videoLoopToggle"),"aria-label":(0,p.t)("proto.prototype_panel.loop"),htmlAttributes:{"data-tooltip":(0,p.t)("proto.prototype_panel.loop"),"data-tooltip-type":w.Ib.TEXT}}),i=(0,o.jsx)(ea.f,{checked:ev(!e.videoPlayback.muted),mixed:(0,v.gl)(e.videoPlayback.muted),onIcon:(0,o.jsx)(ec.W,{}),offIcon:(0,o.jsx)(ed,{}),onChange:()=>{let t=!e.videoPlayback.muted;e.updateSelectionProperties({videoMuted:t}),e.dispatch((0,I._P)({name:"Node video muted changed",params:{newMuteValue:t,oldMuteValue:ey(e.videoPlayback.muted),numVideosSelected:e.videoPlayback.numVideosSelected}}))},"data-testid":"videoSoundToggle",recordingKey:c.Pt(e,"videoSoundToggle"),"aria-label":(0,p.t)("proto.prototype_panel.sound"),htmlAttributes:{"data-tooltip":(0,p.t)("proto.prototype_panel.sound"),"data-tooltip-type":w.Ib.TEXT}}),r=(0,o.jsx)(ep.pG,{input:t,leftIcon:n,rightIcon:i,label:null});return(0,o.jsxs)(z.Zk,{children:[(0,o.jsx)(z.fI,{children:(0,o.jsx)(L.xw,{extended:!0,children:(0,p.tx)("proto.prototype_panel.video")})}),r,(0,o.jsx)(eg,{videoPlayback:e.videoPlayback})]})};var eI=n(170907),ef=n(382629),eN=n(944082),eT=n(266808),eE=n(170627),eb=n(812714),eA=n(287211),eO=n(241421),ej=n(331497),eP=n(954741),eS=n(572427),eC=n(236631),eD=n(560201),ek=n(94747),ew=n(330785);function eR(e){let{type:t}=e;return(0,o.jsxs)("div",{className:eC.s.flex.justifyCenter.itemsCenter.$,children:[(0,o.jsx)(eu.B,{className:eC.s.flexGrow1.mx12.$,useOriginalSrcFills_DEPRECATED:!0,svg:"horizontal"===t?ek.A:ew.A}),(0,o.jsx)("span",{className:eC.s.flexGrow1.m6.$,style:{maxWidth:144},children:(0,p.tx)("proto.prototype_panel.content_needs_to_be_bigger_than_the_frame_tooltip")})]})}let eL=(0,eD.ex)("prototype_scroll_horizontal_info",eR,()=>({type:"horizontal",unconstrainWidth:!0})),eM=(0,eD.ex)("prototype_scroll_vertical_info",eR,()=>({type:"vertical",unconstrainWidth:!0})),eU=(0,eD.ex)("prototype_scroll_marquee_info",function(){return(0,o.jsx)("div",{className:eC.s.flex.justifyCenter.itemsCenter.$,children:(0,o.jsx)("span",{className:eC.s.flexGrow1.m6.$,style:{maxWidth:144},children:(0,p.tx)("proto.prototype_panel.overflow_scrolling_not_available_for_frames_with_marquee")})})},()=>({}));var eK=n(167151);let eV="scroll_behavior_panel--rowContainer--H2KeC",eB="scroll_behavior_panel--scrollPosition--YAyUM",eF="scroll_behavior_panel--labelContainer--EQ4zs";function eH(e){let{disableOverflowBehaviorItem:t,disableScrollBehaviorItem:n,dropdownShown:r}=e,[a,l]=function(){let e=(0,ej.ut)(eT.Ez5?.propertiesPanelState().shownPropertiesPanels,[])[eT.ibQ.OVERFLOW_ITEM],t=(0,eK.cJ)(),n=(0,x.kl)("isSection"),o=(0,x.kl)("anyTopLevelFramesInSelection");return[e,!t&&!n&&!o]}(),s=i.useId(),u=(0,o.jsx)(eS.iE,{titleTx:(0,p.tx)("proto.scroll_panel.scroll_behavior_title")});return a||l?(0,o.jsx)(d.k,{name:"scroll_behavior_panel",children:(0,o.jsxs)(z.Zk,{children:[u,l&&(0,o.jsx)(o.Fragment,{children:(0,eb.kc)().ce_tv_fpl_select?(0,o.jsx)(eX,{disabled:n,recordingKey:c.Pt(e,"scrollBehavior")}):(0,o.jsxs)("div",{className:eV,children:[(0,o.jsx)("div",{className:"scroll_behavior_panel--inactiveLabelContainer--lQjAi",children:(0,o.jsx)("span",{id:s,className:"scroll_behavior_panel--inactiveLabel--IexW8",children:(0,p.tx)("proto.scroll_panel.position_dropdown.position")})}),(0,o.jsx)(eJ,{ariaLabelledBy:s,recordingKey:c.Pt(e,"scrollBehavior"),dropdownShown:r,disabled:n})]})}),a&&(0,o.jsx)(eG,{disabled:t,recordingKey:c.Pt(e,"scrollDirection")})]})}):null}let eY=["NONE","HORIZONTAL","VERTICAL","BOTH"];function eG({disabled:e,recordingKey:t}){let n=(0,r.wA)(),[a]=(0,x.lJ)("showWontScrollWarning"),[l]=(0,x.lJ)("scrollDirection"),s=e$(),c=i.useCallback(()=>s?eU:"HORIZONTAL"===l?eL:eM,[s,l]),d=i.useId(),u=i.useCallback(e=>{n((0,I._P)({name:"Overflow Behavior changed",params:{newDirection:e,oldDirection:(0,v._W)(l,"MIXED")}})),m.Y5.updateSelectionProperties({scrollDirection:e})},[n,l]);return i.useMemo(()=>(0,o.jsxs)("div",{className:eV,children:[(0,o.jsx)(j.J,{variant:"secondary",htmlFor:d,className:eF,children:(0,p.tx)("proto.scroll_panel.overflow_dropdown.overflow")}),a&&(0,o.jsx)("div",{className:"scroll_behavior_panel--infoIcon--FeXbf","data-tooltip-type":w.Ib.SPECIAL,"data-tooltip":c(),"data-tooltip-show-immediately":!0,children:(0,o.jsx)(eN.i,{})}),(0,o.jsx)("div",{className:a?"scroll_behavior_panel--scrollDirectionShort--w6iSo":"scroll_behavior_panel--scrollDirection--XSmzK",children:(0,o.jsxs)(O.Root,{onChange:u,value:l||"NONE",recordingKey:t,children:[(0,o.jsx)(O.ManuallyLabeledTrigger,{"data-testid":"scroll-direction-dropdown",disabled:e||s,id:d,width:"fill"}),(0,o.jsx)(O.Container,{children:eY.map(e=>(0,o.jsx)(O.Option,{value:e,children:eO.Rk.format(e)},e))})]})})]}),[d,a,c,u,l,t,e,s])}let ez=eP.l6,eW=eP.c$;function eX({disabled:e,recordingKey:t}){let n=(0,r.wA)(),a=(0,x.kl)("scrollBehavior")||"SCROLLS",l=i.useCallback(e=>{let t;switch(n((0,I._P)({name:"Node Scroll Behavior Changed",params:{newValue:e}})),e){case"FIXED_WHEN_CHILD_OF_SCROLLING_FRAME":t=eT.KjJ.FIXED;break;case"STICKY_SCROLLS":t=eT.KjJ.STICKY_SCROLLS;break;case"SCROLLS":t=eT.KjJ.SCROLLS}eE.l7.user("set-scroll-behavior",()=>eT.X3B&&eT.X3B.aggressivelySetScrollBehaviorOfSelection(t)),m.Y5.commit()},[n]),{fixedScrollingDisabled:s}=eq(),c=i.useId();return i.useMemo(()=>(0,o.jsxs)("div",{className:eV,children:[(0,o.jsx)(j.J,{variant:"secondary",htmlFor:c,className:eF,children:(0,p.tx)("proto.scroll_panel.position_dropdown.position")}),(0,o.jsx)("div",{className:eB,children:(0,o.jsxs)(O.Root,{onChange:l,value:a,recordingKey:t,children:[(0,o.jsx)(O.ManuallyLabeledTrigger,{"data-testid":"scroll-behavior-dropdown",disabled:e,id:c,width:"fill"}),(0,o.jsxs)(O.Container,{children:[(0,o.jsx)(O.Option,{value:"SCROLLS",children:eO.Ge.format("SCROLLS")}),(0,o.jsx)(O.Option,{value:"FIXED_WHEN_CHILD_OF_SCROLLING_FRAME",disabled:s,children:eO.Ge.format("FIXED_WHEN_CHILD_OF_SCROLLING_FRAME")}),(0,o.jsx)(O.Option,{value:"STICKY_SCROLLS",children:eO.Ge.format("STICKY_SCROLLS")})]})]})})]}),[c,l,a,t,e,s])}function eJ(e){let t=(0,r.wA)(),n=(0,x.kl)("scrollBehavior"),{fixedScrollingDisabled:i}=eq(),a="scroll-behavior-select",l=e.dropdownShown&&e.dropdownShown.type===a?eO.Ge:eO.wi;return(0,o.jsxs)(ez,{ariaLabelledBy:e.ariaLabelledBy,className:eB,dataTestId:"scroll-behavior-dropdown",disabled:e.disabled,dispatch:t,dropdownClassName:"scroll_behavior_panel--fullWidth--reSmx",dropdownShown:e.dropdownShown,formatter:l,id:a,onChange:e=>{t((0,I._P)({name:"Node Scroll Behavior Changed",params:{newValue:e}}));let n="FIXED_WHEN_CHILD_OF_SCROLLING_FRAME"===e?eT.KjJ.FIXED:"STICKY_SCROLLS"===e?eT.KjJ.STICKY_SCROLLS:eT.KjJ.SCROLLS;eE.l7.user("set-scroll-behavior",()=>eT.X3B?.aggressivelySetScrollBehaviorOfSelection(n)),m.Y5.commit()},property:n||"SCROLLS",recordingKey:e.recordingKey,children:[(0,o.jsx)(eW,{value:"SCROLLS"}),(0,o.jsx)(eW,{value:"FIXED_WHEN_CHILD_OF_SCROLLING_FRAME",disabled:i}),(0,o.jsx)(eW,{value:"STICKY_SCROLLS"})]})}let e$=()=>{let[e]=(0,x.lJ)("marquee");return!!(0,ef.EA)(e)},eq=()=>(0,eA.R)(e=>{let t=e.mirror.selectionProperties;return{fixedScrollingDisabled:!t.nodesAreAllNotInStacksOrAbsolutePositioned||!t.allHaveScrollableFrameAsParent}});var eZ=n(293422);n(120440);var eQ=n(174730),e0=n(944350),e1=n(84463),e2=n(412267),e7=n(208740),e4=n(108692),e5=n(322028),e3=n(520843);let e8={[e0._Y.SLIDES]:{getStandaloneCtaText:()=>(0,p.t)("send_to_editor_type.standalone_cta.slides"),getDropdownOptionLabel:()=>(0,p.t)("send_to_editor_type.label.slides"),getDropdownOptionIcon:()=>(0,o.jsx)(e4.o,{})},[e0._Y.FIGMAKE]:{getStandaloneCtaText:()=>(0,p.t)("send_to_editor_type.standalone_cta.make"),getDropdownOptionLabel:()=>(0,p.t)("send_to_editor_type.label.make"),getDropdownOptionIcon:()=>(0,o.jsx)(e5.s,{})},[e0._Y.COOPER]:{getStandaloneCtaText:()=>(0,p.t)("send_to_editor_type.standalone_cta.buzz"),getDropdownOptionLabel:()=>(0,p.t)("send_to_editor_type.label.buzz"),getDropdownOptionIcon:()=>(0,o.jsx)(e3.h,{})},[e0._Y.DESIGN]:null,[e0._Y.WHITEBOARD]:null,[e0._Y.SITES]:null};function e6(){let e=function(e){let t=(0,r.wA)(),n=(0,e1.V)(),o=i.useCallback(()=>{(0,e2.C)({type:"send-to-make-from-design",newFileFrom:e7.f6.SEND_TO_MAKE_FROM_DESIGN_PROPS_PANEL,entryPoint:e,dispatch:t})},[t,e]);return i.useMemo(()=>n?{editorType:e0._Y.FIGMAKE,onClick:o}:null,[o,n])}("Send to Figma Make Prototype Panel"),t=(0,eQ.f)("dismissed_figma_make_prototype_announcement"),n=e8[e0._Y.FIGMAKE];return e&&t&&n?(0,o.jsx)(z.Zk,{className:"xz9dl7a xsag5q8",children:(0,o.jsx)(ep.Ad,{label:null,input:(0,o.jsx)(_.fu,{name:"Send to Figma Make from Prototype Panel",children:(0,o.jsx)(eZ.IK,{variant:"secondary",onClick:e.onClick,children:n.getStandaloneCtaText()})})})}):null}var e9=n(691201),te=n(328437),tt=n(201898),tn=n(903582),to=n(380641),ti=n(691234);function tr(){return(0,o.jsx)(T.u,{idForTests:"create-connection-hint",title:(0,p.t)("proto.onboarding.creating_a_connection"),userFlag:"dismissed_create_connection_hint",icon_DEPRECATED:tn.A,iconFallback:to.A,hintText:(0,p.t)("proto.onboarding.select_a_frame_or_object_hint")})}function ta(){return(0,o.jsx)(T.u,{idForTests:"delete-connection-hint",title:(0,p.t)("proto.onboarding.removing_a_connection"),userFlag:"dismissed_delete_connection_hint",icon_DEPRECATED:te.A,iconFallback:tt.A,hintText:(0,p.t)("proto.onboarding.to_delete_a_connection_click_and_drag_on_either_end")})}function tl(){return(0,o.jsx)(T.u,{idForTests:"play-button-hint",title:(0,p.t)("proto.onboarding.running_your_prototype"),userFlag:"dismissed_play_button_hint",icon_DEPRECATED:ti.A,hintText:(0,p.t)("proto.onboarding.use_the_play_button_hint")})}function ts({dismissedCreateConnectionHint:e,dismissedDeleteConnectionHint:t,dismissedPlayButtonHint:n,numTransitionsOnCurrentPage:r}){let a=0===r&&!e,l=0!==r&&!t,s=!n,c=i.useMemo(()=>a?u.c.CREATING_A_CONNECTION:l?u.c.REMOVING_A_CONNECTION:s?u.c.RUNNING_YOUR_PROTOTYPE:null,[a,l,s]);return c?(0,o.jsx)(_.fu,{name:"Prototype Onboarding Hint Panel V1",properties:{trackingDescriptor:c},children:(0,o.jsx)(z.Zk,{children:(0,o.jsxs)("div",{children:[a&&(0,o.jsx)(tr,{}),l&&(0,o.jsx)(ta,{}),s&&(0,o.jsx)(tl,{})]})})}):null}let tc=(0,_.kp)(function(e){let{dropdownShown:t,pickerShown:n,shouldUseSelectedStyleProperties:u,userFlags:_}=e,{isInstanceSelected:f,isInstanceSublayerSelected:T,isCodeInstanceSelected:b,isSectionSelected:A,isTopLevelFrameAndValidPrototypeSourceSelected:O,isValidPrototypingSourceSelected:j,numSelected:P,numTransitionsOnCurrentPage:S,numVideosSelected:C,prototypeBackgroundColor:D,prototypeDevice:k,prototypeStartingPointsInfo:w,transitionNodeID:R}=function(e){let t=e?x.pw:x.zj,n=e?x.DQ:x.fC;return{...t("prototypeDevice","prototypeBackgroundColor","numSelected","numVideosSelected","transitionNodeID","isInstanceSublayerSelected","isInstanceSelected","isCodeInstanceSelected","isValidPrototypingSourceSelected","isTopLevelFrameAndValidPrototypeSourceSelected"),...n("isSectionSelected","numTransitionsOnCurrentPage","prototypeStartingPointsInfo")}}(u),L=(0,eK.cJ)(),{bigNudgeAmount:M,smallNudgeAmount:U}=(0,g.sT)(),K=function(e){let t=(0,x.Gt)("videoMediaLoop"),n=(0,x.Gt)("videoAutoplay"),o=(0,x.Gt)("videoMuted"),i=(0,x.Gt)("numVideosSelected");if(e)return(0,a.B1)(t),(0,a.B1)(n),(0,a.B1)(o),(0,a.B1)(i),{autoplay:n,muted:o,mediaLoop:t,numVideosSelected:i}}(!!C),V=(0,v.E7)(P),B=null!==V&&V>0,F=(0,r.wA)(),H=i.useCallback(()=>{F((0,I._P)({name:"Show Prototype Settings Clicked"})),y.wr()},[F]),Y=i.useRef(!1),G=i.useRef(!1),W=i.useCallback(()=>{G.current=!0},[]),X=i.useCallback(()=>{G.current=!1},[]),J=i.useRef(null),$=i.useRef(null);i.useEffect(()=>{if(!G.current)return;if(Y.current&&J.current){J.current.focus();return}let e=(0,h.xv)($.current);e&&e.focus()},[B]);let q=!(0,v.hS)(R)||s.fn((0,v.E7)(R)),Q=!L&&!!C,ee=!L&&w&&w.length>0,et=L||q?null:(0,o.jsx)(ts,{dismissedCreateConnectionHint:!!_.dismissed_create_connection_hint,dismissedDeleteConnectionHint:!!_.dismissed_delete_connection_hint,dismissedPlayButtonHint:!!_.dismissed_play_button_hint,numTransitionsOnCurrentPage:S}),er=!L&&((j??!0)||A&&(0,E.YR)()),ea=!L;return(0,a.KF)(B||L||(0,v.hS)(k),"should not have mixed device selection"),(0,o.jsxs)("div",{ref:$,onBlur:X,onFocus:W,onPointerDown:e=>{Y.current=(0,l.n4)(e.nativeEvent)},children:[ea&&(0,o.jsx)(N.Mw,{panelName:N.ON.PROTOTYPE}),B?(0,o.jsxs)(o.Fragment,{children:[!L&&(0,o.jsx)(e6,{}),!L&&O&&(0,o.jsx)(ei.Ay,{recordingKey:c.Pt(e,"startingPointPanel")}),er&&(0,o.jsx)(eo.y7,{}),!b&&(0,o.jsx)(eH,{dropdownShown:t,disableOverflowBehaviorItem:!!(f||T),disableScrollBehaviorItem:!!T,recordingKey:c.Pt(e,"scrollBehaviorPanel")}),Q&&(0,o.jsx)(ex,{updateSelectionProperties:m.Y5.updateSelectionProperties,dispatch:F,videoPlayback:K,recordingKey:c.Pt(e,"prototypeVideoPlaybackPanel")}),!L&&(0,o.jsx)(d.k,{name:"show_prototype_settings_panel",children:(0,o.jsx)(z.Zk,{className:e9.rq,children:(0,o.jsx)(eI.z,{onClick:H,recordingKey:c.Pt(e,"prototypeSettingsButton"),children:(0,p.tx)("proto.menu.show_prototype_settings")})})})]}):(0,o.jsxs)(o.Fragment,{children:[!L&&(0,o.jsx)(Z,{bigNudgeAmount:M,dispatch:F,isUI3:!0,pickerShown:n,prototypeBackgroundColor:D,prototypeDevice:(0,I.Qx)(k),recordingKey:"devicePanel",smallNudgeAmount:U,titleRef:J},"device-panel"),ee&&(0,o.jsx)(en.A,{})]}),et,B&&(0,o.jsx)("div",{})]})},f.e0.PROTOTYPE_PANEL)},506426:(e,t,n)=>{n.d(t,{I:()=>R,b:()=>w});var o=n(104076),i=n(716976),r=n(237420),a=n(302727),l=n(452981),s=n(491488),c=n(387092),d=n(266808),p=n(812714),u=n(784414),_=n.n(u),h=n(783728),m=n.n(h),g=n(977738),y=n.n(g),v=n(492221),x=n.n(v),I=n(641518),f=n(246144),N=n(192075),T=n(553065),E=n(371952),b=n(243690),A=n(205088),O=n(660838),j=n(818706),P=n(664320),S=n(355009);let C="missing",D="MIXED",k={};function w(){let e=(0,E.h6)()||k,t=(0,P.iR)(),n=i.useMemo(()=>{let n=y()(t,(e,t)=>({collectionID:e.node_id,collectionName:e.name,modeOptions:e.modes?.map(t=>({modeId:{guid:t.id,collectionKey:e.key,extendedCollectionId:e.isExtension?e.node_id:null},name:t.name,sortPosition:t.sortPosition,isCompatible:!0,collectionName:e.name}))||[],explicitMode:null,inheritMode:null,libraryKey:e.library_key}));return _()({},e,n)},[t,e]),o=i.useMemo(()=>Object.entries(n).map(([e,t])=>({setKey:e,modeData:t,isLocal:void 0===t.libraryKey,hasExtension:t.modeOptions.some(e=>null!==e.modeId.extendedCollectionId)})),[n]),a=i.useMemo(()=>Object.values(o).filter(e=>e.modeData?.modeOptions&&e.modeData?.modeOptions.length>1),[o]),l=i.useMemo(()=>x()(a.map(e=>e.modeData.libraryKey??S.CC)),[a]),s=(0,b.U)(l),[p,u]=i.useMemo(()=>{let{_local:e,_unknownFile:t,...n}=m()(a,e=>e.isLocal?"_local":e.modeData.libraryKey&&s.data?.[e.modeData.libraryKey]===void 0?"_unknownFile":e.modeData.libraryKey),o=Object.entries(n).sort(([e],[t])=>e.localeCompare(t)).map(([e,t])=>[{libraryKey:e,fileName:s.data?.[e]??""},...t]).flat(1);return t&&(o.push({libraryKey:S.CC,fileName:(0,N.t)("variables.mode_properties_panel.used_variables.subheading")}),o.push(...t)),[e??[],o]},[s,a]),h=(0,P.d2)(),g=i.useCallback(e=>{let t=h[(0,c.yG)(e)],n=a.find(t=>t.setKey===e);if(n)return(e=>{if(e)return void 0===t&&(t=e.modeData.modeOptions.find(e=>!e.modeId.extendedCollectionId)?.modeId.guid),e.modeData.modeOptions.find(e=>e.modeId.guid!==t&&null===e.modeId.extendedCollectionId&&(t=e.modeId.guid,!0))?.modeId.guid})(n)},[h,a]),v=a.length>0?a[0]:void 0,I=v?.setKey,f=v?.modeData.collectionID,T=i.useMemo(()=>I&&g(I),[I,g]),O=(0,r.wA)();return{localVariableSets:p,allVariableSets:a,firstVariableSet:v,firstVariableSetID:f,firstVariableSetMode:T,getDefaultNewModeForVariableCollectionKey:g,reportAnalyticsEventWhenSelected:e=>{let t=d.mSn.getVariableSetInfoForSetModeAnalytics(e);O((0,A.Zh)({name:"prototype.set_mode_select_variable_set",params:{...t}}))},subscribedVariableSetsWithSections:u}}function R({targetVariableSetID:e,targetVariableModeID:t,deprecatedTargetVariableSetKey:n,variableSetTargetExtensionId:r,updateSelectionProperties:a,actionIndexPath:l}){let{getDefaultNewModeForVariableCollectionKey:c,allVariableSets:d,reportAnalyticsEventWhenSelected:p}=w(),{shouldShowAdvancedPrototypingPaywall:u,showAdvancedPrototypingVariablesModal:_}=(0,O.zt)();i.useEffect(()=>{if(!n||(0,T.gl)(n))return;let e=d.find(e=>e.setKey===n);e?((0,f.Lo)("SetVariableModeControls","updating variable set key to non-deprecated id value"),a({targetVariableSetKey:void 0,targetVariableSetID:e?.modeData.collectionID})):((0,f.Lo)("SetVariableModeControls","attempted to update variable set key to non-deprecated id value, but could not find it in the list of variable sets, will just clear out the bad data."),a({targetVariableSetKey:void 0}))},[n,d,a]);let[h,m]=i.useMemo(()=>{let t=(0,T.gl)(e)||void 0===e?e:function(e,t,n){let o=e.find(e=>e.modeData.collectionID===t&&(n?e.hasExtension&&e.modeData.modeOptions.some(e=>e.modeId.extendedCollectionId===n):e.modeData.collectionID===t));if(o)return o;let i=s.gr.toRefIfSubscribed(t);if(i)return e.find(e=>e.setKey===i.key&&!n)}(d,e,r&&!(0,T.gl)(r)?r:void 0)||C,n=(()=>{if(!(0,T.gl)(t)&&void 0!==t&&t!==C)return t})();return[t,n]},[e,r,d]),g=i.useId(),y=(0,o.jsx)(M,{selectedVariableSet:h,onChange:e=>{u?_():(p(e.modeData.collectionID),a({targetVariableSetID:e.modeData.collectionID,targetVariableModeID:c(e.setKey),variableSetTargetExtensionId:void 0}))},actionIndexPath:l}),v=(0,o.jsx)(j.A,{input:y,label:(0,N.t)("proto.set_variable_mode.collection_label"),labelId:g}),x=i.useId(),I=(0,o.jsx)(K,{ariaLabelledBy:x,selectedVariableSetKey:m&&m.setKey,selectedVariableModeID:t,onChange:e=>{if(u)_();else{let t=m?.modeData.modeOptions.find(t=>t.modeId.guid===e);a({targetVariableModeID:e,variableSetTargetExtensionId:t?.modeId.extendedCollectionId??void 0})}},actionIndexPath:l}),E=(0,o.jsx)(j.A,{input:I,label:(0,N.t)("proto.set_variable_mode.mode_label"),labelId:x});return(0,o.jsxs)("div",{children:[v,m&&E]})}function L({group:e,groupIndex:t,dropdownId:n}){return(0,o.jsx)(a.Group,{title:(0,o.jsx)(a.Title,{children:e.headerText}),children:e.values.map(e=>(0,o.jsx)(a.Option,{value:e.setKey,children:void 0===e?(0,N.t)("proto.prototype_panel.edit_set_mode.none"):e===C?(0,N.t)("proto.prototype_panel.edit_set_mode.missing_collection"):e.modeData.collectionName},e.setKey))},I.Pt(n,"group",t))}function M({selectedVariableSet:e,onChange:t,actionIndexPath:n}){let r="set-variable-mode--select-variable-set-"+n,{localVariableSets:s,allVariableSets:c,subscribedVariableSetsWithSections:d}=w(),p=i.useMemo(()=>{if(!(0,T.gl)(e)&&void 0!==e&&e!==C)return e.setKey},[e]),u=i.useMemo(()=>{let e=[];s.length>0&&e.push({headerText:(0,N.t)("variables.mode_properties_panel.assets_created_in_file.subheading"),values:s});let t={values:[]},n=()=>{t.values&&t.values.length>0&&e.push({headerText:t.headerText??"",values:t.values??[],libraryKey:t.libraryKey}),t={values:[]}};for(let e of d)"libraryKey"in e?(n(),t={headerText:e.fileName,values:[],libraryKey:e.libraryKey}):t.values?.push(e);return n(),e},[s,d]),_=i.useMemo(()=>(0,T.gl)(e)?D:p,[e,p]);return(0,o.jsxs)(a.Root,{value:_,onChange:e=>{if((0,T.gl)(e)||void 0===e||e===C)return;let n=c.find(t=>t.setKey===e);n&&t(n)},recordingKey:I.Pt(r,"select"),children:[(0,o.jsx)(a.Trigger,{label:(0,o.jsx)(l.h,{children:(0,N.t)("proto.set_variable_mode.collection_label")}),width:"fill",children:(0,T.gl)(e)?(0,N.t)("common.mixed"):void 0}),(0,o.jsxs)(a.Container,{children:[(0,T.gl)(e)&&(0,o.jsx)(a.Option,{value:D,disabled:!0,children:(0,N.t)("common.mixed")}),u.map((e,t)=>(0,o.jsx)(L,{group:e,groupIndex:t,dropdownId:r},t))]})]})}function U(e){return void 0===e?(0,N.t)("proto.prototype_panel.edit_set_mode.none"):e===D?(0,N.t)("common.mixed"):e===C?(0,N.t)("proto.prototype_panel.edit_set_mode.missing_mode"):e?.name??""}function K({selectedVariableSetKey:e,selectedVariableModeID:t,onChange:n,actionIndexPath:r}){let s="set-variable-mode--select-variable-mode-"+r,{allVariableSets:c}=w(),d=i.useMemo(()=>c.find(t=>t.setKey===e)?.modeData.modeOptions,[e,c]),u=i.useMemo(()=>{if(!d)return[];let e=[...d].sort((e,t)=>{let n=e.modeId.collectionKey+(e.modeId.extendedCollectionId??""),o=t.modeId.collectionKey+(t.modeId.extendedCollectionId??"");return String(n).localeCompare(String(o))}),t={};for(let n of e){let e=n.modeId.extendedCollectionId??n.modeId.collectionKey,o=n.collectionName,i=t?.[e];i?i.modes.push(n):t[e]={name:o,modes:[n]}}return Object.entries(t).map(([e,{name:t,modes:n}])=>[t,n])},[d]),_=i.useMemo(()=>{if((0,T.gl)(t))return D;if(void 0===t)return;let e=d?.find(e=>e.modeId.guid===t);return e?e.modeId.guid:C},[t,d]);return(0,o.jsxs)(a.Root,{value:_,onChange:e=>{e&&e!==C&&e!==D&&n(e)},recordingKey:I.Pt(s,"select"),children:[(0,o.jsx)(a.Trigger,{label:(0,o.jsx)(l.h,{children:(0,N.t)("proto.set_variable_mode.mode_label")}),width:"fill",children:_===D?(0,N.t)("common.mixed"):void 0}),(0,o.jsxs)(a.Container,{children:[_===D&&(0,o.jsx)(a.Option,{value:D,disabled:!0,children:U(D)}),_===C&&(0,o.jsx)(a.Option,{value:C,disabled:!0,children:U(C)}),(0,p.kc)().ds_extended_collections?u.map(([e,t])=>(0,o.jsx)(a.Group,{title:(0,o.jsx)(a.Title,{children:e}),children:t.map(e=>(0,o.jsx)(a.Option,{value:e.modeId.guid,children:U(e)},e.modeId.guid))},I.Pt(s,"mode-group",e||"unnamed"))):d?.map(e=>o.jsx(a.Option,{value:e.modeId.guid,children:U(e)},e.modeId.guid))]})]})}},465471:(e,t,n)=>{n.d(t,{B:()=>N});var o=n(104076),i=n(716976),r=n(237420),a=n(439279),l=n(454851),s=n(101441),c=n(674524),d=n(434511),p=n(933688),u=n(836982),_=n(192075),h=n(371952),m=n(384068),g=n(490499),y=n(349311),v=n(501883),x=n(737139),I=n(543969);function f(e){return e.modalShown?.type===I.y.type||e.modalShown?.prevModal?.type===I.y.type}let N=(0,d.j)(function(){let e=(0,m.n)({type:I.y,data:{source:"properties_panel"}}),t=(0,i.useCallback)(()=>{e()},[e]),n=(0,r.d4)(f),d=0===(0,h.Rb)().length&&!n,N=(0,g.o3)(g.nt.designNavBarView);return(0,g.o3)(g.nt.designNavBar)&&a.v.getFeatureGate("ds_variables_in_left_panel")&&!N?null:(0,o.jsx)(u.k,{name:"local_variables_panel",children:(0,o.jsx)(x.Zk,{children:(0,o.jsxs)(x.fI,{className:d?"local_variables_panel--localVariablesPanelRowFaded--atToe local_variables_panel--localVariablesPanelRow--zR8nJ draggable_list--panelHeaderRowFaded--kETRR":"local_variables_panel--localVariablesPanelRow--zR8nJ",children:[(0,o.jsx)(v.xZ,{className:"local_variables_panel--titleText--7rdD7 draggable_list--panelTitleText--SwKez",onClick:t,"data-onboarding-key":"local-variables-panel-title",children:(0,_.tx)("variables.local_variables_panel.local_variables_title")}),(0,o.jsx)(p.E,{name:"variables_modal_button",children:(0,o.jsx)(l.d,{onClick:t,recordingKey:(0,c.Pt)("localVariablesPanel","variablesModalButton"),"aria-expanded":n,"aria-label":(0,_.t)("variables.local_variables_panel.open_variables_button_tooltip"),htmlAttributes:{"data-tooltip":(0,_.t)("variables.local_variables_panel.open_variables_button_tooltip"),"data-tooltip-type":y.Ib.TEXT},children:(0,o.jsx)(s.P,{})})})]})})})},"LocalVariablesPanel")},239077:(e,t,n)=>{n.d(t,{r:()=>et});var o=n(104076),i=n(716976),r=n(237420),a=n(420680),l=n(989941),s=n(452981),c=n(590387),d=n(232120),p=n(812714),u=n(795033);n(120440);var _=n(228172),h=n(641518),m=n(192075),g=n(40903),y=n(952460),v=n(111297),x=n(553065),I=n(252677),f=n(159080),N=n(737139),T=n(900701),E=n(788613),b=n(264993),A=n(754446),O=n(748624),j=n(664320),P=n(118523),S=n(382629),C=n(266808),D=n(170627),k=n(980852),w=n(166887),R=n(308424),L=n(58212),M=n(275033),U=n(980471),K=n(239004),V=n(188154),B=n(354114),F=n(74620),H=n(660838),Y=n(803155),G=n(947507);let z=(0,u.eU)(null),W=(e,t)=>{try{X(e,t)}catch{}try{J(e,t)}catch{}},X=(e,t)=>{let n=(0,U.Bv)(t);if(n){B.Y5.triggerActionEnumInUserEditScope(C.rcl.UNBIND_SELECTION,{fieldSchemaId:n,fieldType:M._j.LINK,removeBoundData:!0});return}D.l7.user(G.Tl,()=>{for(let n of Object.keys(t)){let t=e.get(n);t&&(0,G.RZ)(t)&&(0,G.Ve)(t)}B.Y5.commit()})},J=(e,t)=>{let n=(0,U.X6)(t);D.l7.user(G.Tl,()=>{C.glU?.setHyperlinkOnCurrentSelection("",null),$(e,t),B.Y5.commit()}),n&&B.Y5.triggerActionEnumInUserEditScope(C.rcl.UNBIND_SELECTION,{fieldSchemaId:n,fieldType:M._j.LINK,removeBoundData:!0})},$=(e,t)=>{for(let n of Object.keys(t)){let t=e.get(n);t&&(0,G.RZ)(t)&&(t.prototypeInteractions=(0,G.eF)(t.prototypeInteractions))}};function q(){let e=(0,F.eY)(),t=(0,F.KH)(),n=function(){let e=(0,w.U)();return(0,i.useCallback)(t=>{let n=(0,P.zX)(t);if(n)switch(n.type){case"back":e("sites_add_link",{linkType:"BACK_LINK_PRESET"});return;case"anchor_link":e("sites_add_link",{linkType:"ANCHOR_LINK_PRESET"});return;case"url":e("sites_add_link",{linkType:"URL"});return;case"internal":e("sites_add_link",{linkType:"INTERNAL_NODE"});return}},[e])}(),o=o=>{D.l7.user(G.Tl,()=>{for(let n of Object.keys(t)){let t=e.get(n);t&&(0,G.qe)(t,o)}B.Y5.commit()}),n(o)};return{addBackLinkPreset:()=>{o({...(0,H.Bs)("GO_BACK"),simpleLink:!0})},addAnchorLinkPreset:()=>{o({...(0,H.Bs)("SCROLL_TO"),transitionNodeID:b.Hr,simpleLink:!0})},addLinkAction:o,addCMSAliasLinkAction:(n,o,i)=>{D.l7.user("dakota-set-link-binding",()=>{for(let r of Object.keys(t)){let t=e.get(r);t&&t.getNodesForCmsBinding(n).forEach(e=>e.setDakotaLinkFieldBindingOnPrototypeAction(o,i))}B.Y5.commit()})},setDakotaRepeaterChildrenToItemPageHyperlink:(n,o)=>{n&&D.l7.user("dakota-set-repeater-item-page-binding",()=>{for(let i of Object.keys(t)){let t=e.get(i);t&&t.getNodesForCmsBinding(n).forEach(e=>{e.setDakotaItemPageLinkBindingOnHyperlink(o)})}B.Y5.commit()})},addCMSRepeaterToItemPageBindingForPrototypeInteractions:(n,o)=>{n&&D.l7.user("dakota-set-repeater-item-page-binding",()=>{for(let i of Object.keys(t)){let t=e.get(i);t&&t.getNodesForCmsBinding(n).forEach(e=>{e.setRepeaterToItemPageLinkOnPrototypeInteraction(o)})}B.Y5.commit()})},setCmsItemPageLinkOnHyperlink:(n,o,i)=>{D.l7.user("dakota-set-cms-item-page-link-binding",()=>{for(let r of Object.keys(t)){let t=e.get(r);t&&t.setCmsItemPageLinkOnHyperlink(n,o,i)}B.Y5.commit()})},setCmsItemPageLinkOnPrototypeInteractions:(n,o,i)=>{D.l7.user("dakota-set-cms-item-page-link-binding",()=>{for(let r of Object.keys(t)){let t=e.get(r);t&&t.setCmsItemPageLinkOnPrototypeInteraction(n,o,i)}B.Y5.commit()})},setPropertiesForAnchorLink:({transitionNodeID:n,extraScrollOffset:o})=>{D.l7.user(G.Tl,()=>{for(let i of Object.keys(t)){let t=e.get(i);if(t){let e=t.prototypeInteractions,i=G.Nw.getClickInteraction(e),r=G.Nw.getMatchingAction(i);r&&(n&&(r.transitionNodeID=n),o&&(r.extraScrollOffset=o));let a=(0,G.l4)(e),l={prototypeInteractions:(i?[...a,i]:[...e]).map(e=>({...e,sourceNodeID:{sessionID:t.sessionID,localID:t.localID}}))};B.Y5.updateSelectionProperties(l)}}})},removeAllLinks:()=>{W(e,t)},removeHyperlink:()=>{J(e,t)},removeEmptyInteractions:()=>{$(e,t)}}}function Z({shouldLinkPanelSetHyperlink:e}){let{addBackLinkPreset:t,addAnchorLinkPreset:n,addLinkAction:o,addCMSAliasLinkAction:a,setDakotaRepeaterChildrenToItemPageHyperlink:l,addCMSRepeaterToItemPageBindingForPrototypeInteractions:s,setCmsItemPageLinkOnHyperlink:c,setCmsItemPageLinkOnPrototypeInteractions:d,removeHyperlink:_,removeEmptyInteractions:h}=q(),{setVariableConsumptionMap:g}=(0,j.R1)(),y=(0,F.eY)(),v=(0,F.KH)(),x=(0,r.d4)(O.Cy),I=function(){let e=(0,r.wA)(),t=(0,u.Xr)(z);return(0,i.useCallback)((n,o)=>{let i=(0,P.aE)(n);if(!i||0===i.length)return;let r=(0,k.getActiveTSSceneGraph)(),a=[];for(let e of i)for(let t of o){let n=r.get(t);if(n?.prototypeInteractions){let o=n.prototypeInteractions.find(t=>!!t.id&&!!e.id&&b.aI(t.id,e.id));if(o){a.push({interaction:o,sourceNodeGuid:t});break}}}t({deletedInteractions:a,selectedNodeIDs:o});let l=a.filter(({interaction:e})=>!!e.id).map(({interaction:e,sourceNodeGuid:t})=>R.d({nodeID:b.sH(t)??b.Hr,interactionID:e.id??b.Hr}));D.l7.user("delete-prototype-interaction-for-link",()=>{C.glU?.deleteInteractions(l)}),e(L.F.enqueue({message:(0,m.t)("sites.panel.link_panel.replace_click_interaction_bell.message",{numInteractions:i.length}),button:{text:(0,m.t)("sites.panel.link_panel.replace_click_interaction_bell.cta"),action:()=>{let e=u.zl.get(z);e&&(function(e){let t=(0,k.getActiveTSSceneGraph)(),n={};for(let t of e.selectedNodeIDs)n[t]=!0;D.l7.user(G.Tl,()=>{for(let{interaction:o,sourceNodeGuid:i}of(W(t,n),e.deletedInteractions)){let e=t.get(i);if(!e)continue;let n=[...e.prototypeInteractions||[],o];e.prototypeInteractions=n}B.Y5.commit()})}(e),u.zl.set(z,null))}}}))},[e,t])}(),f=(0,w.U)();return e?e=>{if((0,p.kc)().sts_links_v2&&I(x,Object.keys(v)),e?.type==="internal_cms_item_page")l(e.collectionId,e.id);else if(e?.type==="cms_link_field_alias"){if(!e.collectionId)return;D.l7.user("dakota-set-link-binding",()=>{let t={type:C.Z_n.CMS_ALIAS,resolvedType:C.rXF.LINK,value:{collectionId:e.collectionId,fieldSchemaId:e.fieldId}},n=[];for(let t of Object.keys(v)){let o=y.get(t);o&&n.push(...o.getNodesForCmsBinding(e.collectionId))}let o=1===n.length?n[0]:null;if(0===n.length||o&&o.id===Object.keys(v)[0]){let e={};e.HYPERLINK=t,g(e),o&&C.glU?.setHyperlinkUnderlineOnNode(o.id)}else n.forEach(e=>{e.updateVariableConsumption("HYPERLINK",t),C.glU?.setHyperlinkUnderlineOnNode(e.id)});B.Y5.commit()})}else e?.type==="internal_cms_item_page_item"?c(e.id,e.itemId,e.fieldSchemaId):e?.type==="back"?(((0,Y.FD)()||(0,Y.nh)())&&_(),t()):e?.type==="anchor_link"?(((0,Y.FD)()||(0,Y.nh)())&&_(),n()):D.l7.user(G.Tl,()=>{null===e?C.glU?.setHyperlinkOnCurrentSelection("",null):"url"===e.type?(C.glU?.setHyperlinkOnCurrentSelection(V.xT(e.url),e.openInNewTab??null),h&&h(),f("sites_add_link",{linkType:"URL"})):"internal"===e.type&&(C.glU?.setHyperlinkOnCurrentSelection(B.Y5.generateLinkToNode(e.id),null),h&&h(),f("sites_add_link",{linkType:"INTERNAL_NODE"})),C.glU?.hideHyperlinkEditor()})}:e=>{if(_&&((0,Y.FD)()||(0,Y.nh)())&&_(),(0,p.kc)().sts_links_v2&&I(x,Object.keys(v)),null===e)o({connectionType:"NONE"});else if("url"===e.type){o({connectionType:"URL",connectionURL:(0,V.xT)(e.url),openUrlInNewTab:e.openInNewTab});return}else if("internal"===e.type){o({connectionType:"INTERNAL_NODE",transitionNodeID:b.sH(e.id)??b.Hr,navigationType:"NAVIGATE"});return}else"cms_link_field_alias"===e.type?a(e.collectionId,{type:C.Z_n.CMS_ALIAS,resolvedType:C.rXF.LINK,value:{collectionId:e.collectionId,fieldSchemaId:e.fieldId}},e.openInNewTab):"internal_cms_item_page"===e.type?s(e.collectionId,e.id):"internal_cms_item_page_item"===e.type?d(e.id,e.itemId,e.fieldSchemaId):"back"===e.type?t():"anchor_link"===e.type&&n()}}var Q=n(556936),ee=n(919778);function et({isInteractionModal:e=!1,recordingKey:t}){let n=(0,r.d4)(P.C7),a=(0,u.Xr)(P.ZB),{setPropertiesForAnchorLink:l,removeAllLinks:s}=q(),c=function(){let e=(0,r.d4)(O.Cy),t=(0,F.eY)();return Object.keys((0,F.KH)()).every(n=>{let o=t.get(n);return o?.type==="TEXT"&&!(0,Q.ol)(e)})}(),d=function(){let e=(0,F.eY)(),t=(0,F.KH)();return(0,r.d4)(P.C7)&&Object.keys(t).every(t=>{let n=e.get(t);return n&&(0,G.RZ)(n)})}(),p=Z({shouldLinkPanelSetHyperlink:c}),_=function({shouldLinkPanelSetHyperlink:e}){let[t,n]=(0,A.lJ)("hyperlink"),{variableConsumptionMap:o}=(0,j.R1)(),i=(0,P.kE)(t,(0,P.H1)(o));return!!e&&((0,x.gl)(i)||(0,x.gl)(t))}({shouldLinkPanelSetHyperlink:c}),h=function({shouldLinkPanelSetHyperlink:e}){let t=(0,F.KH)(),n=(0,r.d4)(O.Cy),o=(0,P.bW)(n),i=(0,P.GH)(o),{variableConsumptionMap:a}=(0,j.R1)(),l=(0,P.w0)(i),s=Z({shouldLinkPanelSetHyperlink:e}),[c,d]=(0,A.lJ)("hyperlink"),p=(0,P.kE)(c,(0,P.H1)(a));return e?e=>{if(!(0,x.gl)(p)){if(p?.type==="cms_link_field_alias"){if((0,S.uy)(C.Egt)){(0,K.AK)("SceneGraphHelpers is nullish when it should be defined");return}let n=Object.keys(t),o=(0,k.getActiveTSSceneGraph)();for(let n of Object.keys(t)){let t=o.get(n);if(t)for(let n of t.getNodesForCmsBinding(p.collectionId))null!==n.hyperlink&&"mixed"!==n.hyperlink&&"URL"===n.hyperlink.type&&(C.Egt.replaceSelection([n.id],!1),d({url:n.hyperlink.value,openInNewTab:e}))}C.Egt.replaceSelection(n,!1)}else d({...p,openInNewTab:e})}}:e=>{switch(l?.type){case"url":case"cms_link_field_alias":s({...l,openInNewTab:e})}}}({shouldLinkPanelSetHyperlink:c}),{link:m,linkAction:g,cmsAliasData:y}=function({shouldLinkPanelSetHyperlink:e}){let t=(0,r.d4)(O.Cy),n=(0,P.j4)(t).map(e=>(0,P.GH)(e)).filter(e=>null!==e),o=n[0]??null,i=(0,P.w0)(o??null),[a]=(0,A.lJ)("hyperlink"),{variableConsumptionMap:l}=(0,j.R1)(),s=(0,P.kE)(a,(0,P.H1)(l)),{collectionId:c,fieldSchemaId:d}=(0,P.L4)(o??null,l),p={collectionId:c,fieldSchemaId:d};return!function(e,t){if((0,x.gl)(t))return!0;if(e.length>1){let t=e[0];if(!e.filter(e=>!!e).every(e=>(0,P.Ij)(e,t)))return!0}else if(0===e.length)return!1;if(t){let n=e[0]??null;switch(t.type){case"internal":if(t.id!==b.dI(n?.transitionNodeID))return!0;break;case"url":if(t.url!==n?.connectionURL||t.openInNewTab!==n?.openUrlInNewTab)return!0}}return!1}(n,s)?e?{link:s,linkAction:void 0,cmsAliasData:p}:{link:i,linkAction:o??void 0,cmsAliasData:p}:{link:x.oV,linkAction:void 0,cmsAliasData:p}}({shouldLinkPanelSetHyperlink:c}),v=function(){let e=(0,r.d4)(O.Cy);return!!(0,P.fI)(e.filter(e=>e.event?.interactionType==="ON_CLICK"))}();if(i.useEffect(()=>{if(!d){a(!1);return}if(m||v){a(!0);return}a(!1)},[d,m,a,v]),!d)return null;let I=c?(0,P.Si)(m):(0,P.Q6)(g??null,m);return(0,o.jsx)(en,{cmsAliasData:y,disableOpenInNewTabCheckbox:_,disabled:!n,isInteractionModal:e,isLinkInternal:I,link:m,linkAction:g,onAddLink:()=>{a(!0)},onLinkChange:p,onOpenInNewTabChange:h,onRemoveLink:()=>{a(!1),s()},recordingKey:t,setPropertiesForAnchorLink:l})}function en({link:e,linkAction:t,cmsAliasData:n,isLinkInternal:b,onLinkChange:A,onAddLink:O,onRemoveLink:j,onOpenInNewTabChange:S,setPropertiesForAnchorLink:C,disableOpenInNewTabCheckbox:D,disabled:k,isInteractionModal:w,recordingKey:R}){let L=(0,u.md)(P.ZB),M=(0,ee.T0)(e),U=(0,r.wA)(),K=e&&!(0,x.gl)(e)&&("url"===e.type||"cms_link_field_alias"===e.type&&null!=e.openInNewTab&&!b),V=e&&!(0,x.gl)(e)&&e?.type==="url"&&(e?.url.startsWith("mailto:")||e?.url.startsWith("tel:")),B=(0,i.useCallback)(t=>{!e||(0,x.gl)(e)||e?.type!=="url"||(V?(0,I.UA)(U,e.url,"sites-link-panel"):U((0,y.RK)({rawInput:e.url,event:t})))},[U,V,e]),F=()=>!e||(0,x.gl)(e)||e?.type!=="url"?null:(0,o.jsx)(a.K,{onClick:B,children:V?(0,o.jsx)(c.h,{}):(0,o.jsx)(d.V,{}),"aria-label":V?(0,m.t)("sites.panel.copy_link"):(0,m.t)("sites.panel.open_link_new_tab")}),H=()=>(0,o.jsxs)(g.U,{collectionId:n.collectionId,fieldSchemaId:n.fieldSchemaId,type:"link",children:[(0,o.jsx)(_.DE,{label:null,input:(0,o.jsx)(Y.MO,{id:w?"interaction_modal":"link_panel",disabled:k,recordingKey:R,link:e,onLinkChange:A,showCMSLinkFields:(0,p.kc)().dakota,showCMSItemPages:(0,p.kc)().dakota,showLinkPresets:!0,error:M}),icon:F()}),K&&(0,o.jsx)(E.TN,{children:(0,o.jsx)(l.S,{label:(0,o.jsx)(s.J,{children:(0,m.tx)("proto.action_open_url_in_new_tab")}),onChange:S,recordingKey:h.Pt(R,"open-url-in-new-tab-check"),checked:e.openInNewTab,disabled:D})}),t&&!(0,x.gl)(e)&&e?.type==="anchor_link"&&(0,o.jsx)(f.k,{action:t,recordingKey:R,interactionType:"ON_CLICK",setPropertiesForAnchorLink:C,hideXOffset:!0,renderWithIconSpacing:!0})]});return(0,o.jsx)(v.fu,{name:"Link panel",children:(0,o.jsx)(N.Zk,{children:w?(0,o.jsx)("div",{className:"xz9dl7a",children:H()}):(0,o.jsx)(T.u,{title:(0,m.t)("sites.panel.link"),addProperty:O,removeProperty:j,contentsVisibleOrMixed:L,recordingKey:R,plusButtonLabel:(0,m.t)("sites.panel.create_link"),minusButtonLabel:(0,m.t)("sites.panel.remove_link"),children:H()})})})}},947507:(e,t,n)=>{n.d(t,{Nw:()=>o,RZ:()=>p,Tl:()=>h,Ve:()=>c,eF:()=>_,l4:()=>u,qe:()=>d});var o,i=n(382629),r=n(266808),a=n(264993),l=n(919778);function s(e){return e?e.filter(e=>"NONE"!==e.connectionType&&"URL"!==e.connectionType&&!("INTERNAL_NODE"===e.connectionType&&"NAVIGATE"===e.navigationType)&&!(0,l.cn)(e)&&!e.linkParam):[]}function c(e){let t=o.getClickInteraction(e.prototypeInteractions);if(!t)return;let n=s(t.actions);if(0===n.length)e.prototypeInteractions=u(e.prototypeInteractions);else{t.actions=n;let o=u(e.prototypeInteractions);e.prototypeInteractions=o.concat(t)}}function d(e,t){let n;if(!p(e))return;let l=o.getClickInteraction(e.prototypeInteractions),c=o.getMatchingAction(l),d=c?.openUrlInNewTab;if(t?.connectionType==="URL"&&c?.connectionType==="URL"&&(0,i.uy)(t.openUrlInNewTab)&&(0,i.Vq)(d)&&(t.openUrlInNewTab=d),l){let e=s(l.actions);l.actions=e.concat(t?[t]:[]),n=l}else n=function({id:e,action:t}){let n=e??null;if(!e){let e=r.glU.generateUniqueID();if(!e)throw Error("Failed to generate a unique id");n=a.sH(e)}if(!n)throw Error("No interaction ID");return{id:n,event:{interactionType:"ON_CLICK"},stateManagementVersion:1,actions:[t]}}({action:t});let _=u(e.prototypeInteractions);e.prototypeInteractions=_.concat(n)}function p(e){return!!(e&&!(e.isResponsiveSetOrWebpage||e.isResponsiveSetBreakpoint||e.isWebpageBreakpoint||e.isStateGroup||e.isSection||e.isHTMLWidget||e.isSlotReactive))}function u(e){return e.filter(e=>e.event?.interactionType!=="ON_CLICK")}function _(e){return e.filter(e=>!e.actions?.find(e=>"NONE"===e.connectionType))}(e=>{e.getClickInteraction=function(e){return e.find(e=>e.event?.interactionType==="ON_CLICK")??null},e.getMatchingAction=function(e){return e?.actions?.find(e=>"URL"===e.connectionType||"NAVIGATE"===e.navigationType||l.cn(e))??null}})(o||(o={}));let h="sites-link-panel"},702043:(e,t,n)=>{n.d(t,{qd:()=>i});var o=n(716976);n(962301),n(307352),n(276690),n(556936),n(118098),n(75644),n(947507),n(657058),n(800403),n(542653),n(732741),n(201733);let i=o.createContext(void 0)},298874:(e,t,n)=>{n.d(t,{jk:()=>Y});var o=n(104076),i=n(716976),r=n(237420),a=n(276800),l=n(170627),s=n(812714),c=n(287211),d=n(324063),p=n(674524),u=n(511570),_=n.n(u),h=n(428710),m=n(851824),g=n(146283),y=n(294990),v=n(236631),x=n(278491),I=n(41076),f=n(819851),N=n(53537),T=n(356846),E=n(506192),b=n(176203),A=n(349311),O=n(954741),j=n(410527),P=n(965815),S=n(285490);let C="widget_controls--label--YWqiO text--fontNeg12--2PWcg text--_fontBase--QdLsd text--_negText--j9g-L",D="widget_controls--img--bNdQj",k=(0,d.UJ)(e=>e.includes("xmlns")?"data:image/svg+xml;utf8,"+encodeURIComponent(e.trim()):(g.k.warn("Your widget must include the xmlns property on any SVGs used in the property menu. See https://developer.mozilla.org/en-US/docs/Web/SVG/Element/svg for more info"),null),1e3);function w(e){let t=(0,f.E3)(),n=e.icon?k(e.icon):null,i=void 0!==t&&t===b.nT.Design;return n?(0,o.jsx)(R,{label:e.label,propertyName:e.propertyName,href:e.href,size:i?"small":"large",tooltip:e.tooltip,icon:n,onClick:e.onClick,active:e.active?e.active:"NONE"}):(0,o.jsx)(L,{label:e.label,propertyName:e.propertyName,href:e.href,tooltip:e.tooltip,onClick:e.onClick,active:e.active?e.active:"NONE"})}function R(e){let t=e.href?(0,o.jsx)(y.N,{href:e.href,className:v.s.cursorDefault.wFull.hFull.$,target:"_blank",trusted:!1,children:(0,o.jsx)("img",{src:e.icon,className:D,alt:`${e.propertyName}`})}):(0,o.jsx)("img",{src:e.icon,className:D,alt:`${e.propertyName}`});return(0,o.jsx)(P.$n,{buttonStyle:{overflow:"hidden",flexShrink:0},size:e.size,tooltip:e.tooltip,onClick:e.onClick,active:e.active?e.active:"NONE",recordingKey:(0,p.Pt)("widgetControl",e.propertyName),children:t})}function L(e){let t=e.href?(0,o.jsx)(y.N,{href:e.href,className:_()(C,v.s.cursorDefault.wFull.hFull.$),target:"_blank",trusted:!1,children:e.label}):(0,o.jsx)("span",{className:C,children:e.label});return(0,o.jsx)(P.$n,{className:v.s.flexShrink0.$,tooltip:e.tooltip===e.label?void 0:e.tooltip,onClick:e.onClick,active:e.active?e.active:"NONE",recordingKey:(0,p.Pt)("widgetControl",e.propertyName),children:t})}function M({widgetInfo:e,item:t}){let n=(0,f.E3)(),r=l.nc.user("widget-select-color",n=>{let o=(0,h.colorToHex)(n.option);N.x.runPropertyMenuCallback(e.pluginID,e.widgetID,t.propertyName,_[o]??o)}),a=(0,m.A)(r,100),[s,c]=i.useState(!1),d=[t.selectedOption,...t.options.map(e=>e.option)],u={},_={};for(let e of d)try{let t=I.z5.parse(e);u[e]=t,_[(0,h.colorToHex)(t)]=e}catch(t){return g.k.warn(`Cannot render widget color selector. ${e} is an invalid color.`),(0,o.jsx)("div",{"data-testid":"emptyColorSelector"})}let y=n===b.nT.Design;return(0,o.jsx)(j.qW,{buttonSize:y?"xsmall":"small",inlineButtonTooltip:t.tooltip,isColorPopoverOpen:s,isDesignInlineMenu:y,onColorChange:e=>{a(e)},optionSize:"medium",options:t.options.map(e=>({option:u[e.option],tooltip:e.tooltip})),paletteType:"widget",recordingKey:(0,p.Pt)("widgetControl",t.propertyName),setIsColorPopoverOpen:c,value:{option:u[t.selectedOption]}})}function U({widgetInfo:e,item:t}){return(0,o.jsx)(w,{tooltip:t.tooltip,label:t.tooltip,propertyName:t.propertyName,icon:t.icon,onClick:l.nc.user("widget-action",()=>{N.x.runPropertyMenuCallback(e.pluginID,e.widgetID,t.propertyName,null)})})}let K=O.l6,V=O.c$;function B({item:e,widgetInfo:t}){let n=(0,f.E3)(),i=(0,r.wA)(),a=(0,E.Um)(),l=e.options.find(t=>t.option===e.selectedOption),s=(0,p.Pt)("widgetControl",e.propertyName),c=void 0!==n&&n===b.nT.Design;return(0,o.jsx)("div",{className:c?void 0:S.kL,"data-tooltip-show-above":!0,"data-tooltip-type":A.Ib.TEXT,"data-tooltip":e.tooltip,children:(0,o.jsx)(K,{ariaLabel:e.tooltip,blurOnChange:!0,chevronClassName:c?"widget_controls--chevron--a3ua2":S.ai,className:c?"widget_controls--select---Nqnq text--fontNeg11--StdFq text--_fontBase--QdLsd text--_negText--j9g-L":S.Lt,dispatch:i,dropdownAlignment:"left",dropdownClassName:x.Dm,dropdownShown:a,dropdownWidth:144,formatter:{format:e=>e.tooltip,isEqual:(e,t)=>e.option===t.option},id:`widgetControl.${e.propertyName}`,inputClassName:c?"widget_controls--input--Z6nHO":S.hF,onChange:n=>{N.x.runPropertyMenuCallback(t.pluginID,t.widgetID,e.propertyName,n.option)},property:{option:e.selectedOption,tooltip:l?l.tooltip:e.selectedOption},recordingKey:s,targetDomNode:document.body,children:e.options.map((t,n)=>(0,o.jsx)(V,{value:t,formattedValue:t.tooltip,recordingKey:(0,p.Pt)(s,t.option),selected:e.selectedOption===t.option,truncateInMiddle:!0},n))})})}function F({widgetInfo:e,item:t}){return(0,o.jsx)(w,{tooltip:t.tooltip,label:t.tooltip,propertyName:t.propertyName,icon:t.icon,active:t.isToggled?"LOUD":"NONE",onClick:l.nc.user("widget-toggle",()=>{N.x.runPropertyMenuCallback(e.pluginID,e.widgetID,t.propertyName,null)})})}function H({widgetInfo:e,item:t}){let n;let i=(0,s.kc)().widget_link_encode_uri_component?encodeURIComponent(t.href):t.href;return null!==t.icon&&(n=t.icon?t.icon:'<svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg"> <path fill-rule="evenodd" clip-rule="evenodd" d="M12 12H16V13H13V27H27V24H28V27V28H13H12V27V13V12ZM27.0001 13H26.9913L27.0001 13.0088V13ZM20.0001 13H26.2999L17.0251 22.2747L17.7323 22.9818L27.0001 13.714V20H28.0001V12.5V12H27.5001H20.0001V13Z" fill="white" fill-opacity="0.8"/></svg>'),(0,o.jsx)(w,{tooltip:t.tooltip,label:t.tooltip,propertyName:t.propertyName,icon:n,onClick:a.lQ,href:"https://www.figma.com/exit?url="+i})}function Y(){let e=function(){let e=(0,c.R)(e=>e.mirror.selectionProperties.selectedWidgetInfo);return i.useMemo(()=>{if(!e)return e;let{pluginID:t}=e;if(!(0,T.Vi)(t))return e;let n=e.propertyMenu.map(e=>"separator"===e.itemType?e:{...e,tooltip:(0,T.kZ)(t,e.propertyName)||e.tooltip});return{...e,propertyMenu:n}},[e])}();return e&&e.propertyMenu.length?(0,o.jsx)(o.Fragment,{children:e.propertyMenu.map((t,n)=>{switch(t.itemType){case"action":return(0,o.jsx)(U,{item:t,widgetInfo:e},n);case"separator":return(0,o.jsx)(P.wv,{},n);case"color-selector":return(0,o.jsx)(M,{item:t,widgetInfo:e},n);case"dropdown":return(0,o.jsx)(B,{item:t,widgetInfo:e},n);case"toggle":return(0,o.jsx)(F,{item:t,widgetInfo:e},n);case"link":return(0,o.jsx)(H,{item:t,widgetInfo:e},n)}})}):null}},344725:(e,t,n)=>{n.d(t,{x:()=>V});var o=n(104076),i=n(716976),r=n(237420),a=n(293422);let l=(0,i.memo)(function(e){return(0,o.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,"data-fpl-icon-size":"24L",children:(0,o.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",d:"M18.5 4A1.5 1.5 0 0 1 20 5.5V19a1 1 0 0 1-.898.995L19 20h-1l-.102-.005A1 1 0 0 1 17 19v-6H7v6a1 1 0 0 1-.897.995L6 20H5l-.103-.005A1 1 0 0 1 4 19V5.5a1.5 1.5 0 1 1 3 0V7h10V5.5A1.5 1.5 0 0 1 18.5 4m0 1a.5.5 0 0 0-.5.5V19h1V5.5a.5.5 0 0 0-.5-.5m-13 0a.5.5 0 0 0-.5.5V19h1V5.5a.5.5 0 0 0-.5-.5m9.701 7H17v-1.799zM7 11.2v.8h.802l-.009-.009L11.784 8H10.2zm2.198.8h1.603l-.008-.008L14.785 8h-1.587zM16.2 8l-4 4h1.588L17 8.787V8zM7 9.786 8.786 8H7z"})})});var s=n(287211),c=n(674524),d=n(783728),p=n.n(d),u=n(190028),_=n(192075),h=n(977745),m=n(260745),g=n(4033),y=n(211862),v=n(288747),x=n(912610),I=n(402276),f=n(525972),N=n(792028),T=n(176203),E=n(437761),b=n(349311),A=n(423683);let O=(0,n(560201).ex)("figjam_plugin_relaunch_button_info",function(e){let{name:t,description:n}=e;return(0,o.jsxs)("div",{className:"figjam_plugin_relaunch_button_info_tooltip--figjamRelaunchButtonInfo--d289K text--fontPos11--2LvXf text--_fontBase--QdLsd",children:[(0,o.jsx)("span",{className:"figjam_plugin_relaunch_button_info_tooltip--handle--XUJNp",children:t}),n&&(0,o.jsx)("div",{children:n})]})},e=>({name:e.getAttribute("data-tooltip-name"),description:e.getAttribute("data-tooltip-description")}));var j=n(573820),P=n(684742),S=n(390579);function C({onClick:e,recordingKey:t,ariaLabel:n,tooltip:i,tooltipType:r,tooltipName:a,tooltipDescription:l,showChevron:s,children:c}){return(0,o.jsx)(P.E,{className:"whiteboard_inline_menu_icon_button--iconButton40--yjNDz",onClick:e,recordingKey:t,"aria-label":n,htmlAttributes:{"data-tooltip":i,"data-tooltip-type":r,"data-tooltip-show-above":!0,"data-tooltip-name":a,"data-tooltip-description":l,"data-testid":t},children:(0,o.jsxs)("span",{"aria-hidden":!0,className:"whiteboard_inline_menu_icon_button--icon--SUTLm",children:[c,s&&(0,o.jsx)(S.O,{className:"whiteboard_inline_menu_icon_button--chevron--tjrn4"})]})})}var D=n(965815),k=n(97919),w=n(725837),R=n(58212),L=n(638641);function M(e){let{tooltipName:t,tooltipDescription:n,onClick:i,hasMultipleOptions:r,recordingKey:a,plugin:s}=e,c=(0,j._r)(),d=r?(0,_.t)("whiteboard.inline_menu.open_relaunch_menu.aria_label",{pluginName:s.name}):t??s.name,p=r?{tooltip:s.name,tooltipType:b.Ib.TEXT}:{tooltip:O,tooltipType:c&&t?b.Ib.SPECIAL:void 0,tooltipName:t,tooltipDescription:"string"==typeof n?n:String(n)};return(0,o.jsx)(C,{onClick:i,recordingKey:a,showChevron:r,ariaLabel:d,...p,children:(0,E.ZQ)(s)?(0,o.jsx)(l,{}):(0,o.jsx)(A.V,{className:"plugin_relaunch_content--pluginIcon--dxgZD plugin--pluginIconBase--yAG5F",plugin:s,alt:s.name})})}function U({children:e}){return(0,o.jsx)("div",{className:"plugin_relaunch_content--flexColumn--3aDVl",children:e})}function K(e){let{relaunchData:t}=e,n=e=>parseInt(e||"0");return(0,o.jsx)(k.Fn,{onChange:o=>{let i=t[n(o)];i&&e.onSelect(i)},value:null,renderOption:({value:e,onClick:i})=>{let r=t[n(e)];if(!r)return null;let l=r.relaunchButton.name.length>34||"string"==typeof r.relaunchButton.description&&r.relaunchButton.description.length>34,s=(0,c.Pt)("relaunchMenuSelectorOption",r.pluginTypeAndID,r.relaunchButton.command);return(0,o.jsx)("div",{"data-tooltip":O,"data-tooltip-type":r.relaunchButton.name&&l?b.Ib.SPECIAL:void 0,"data-tooltip-show-right":!0,"data-tooltip-name":r.relaunchButton.name,"data-tooltip-description":r.relaunchButton.description,children:(0,o.jsx)("div",{className:"plugin_relaunch_content--menuItem--fZT86",children:(0,o.jsxs)(a.WW,{variant:"secondary",onClick:i,recordingKey:s,children:[(0,o.jsx)("div",{className:"plugin_relaunch_content--name--VYXnN ellipsis--ellipsis--Tjyfa",children:r.relaunchButton.name}),r.relaunchButton.description&&(0,o.jsx)("div",{className:"plugin_relaunch_content--description--aAoGx ellipsis--ellipsis--Tjyfa",children:String(r.relaunchButton.description)})]})})},`${r.pluginTypeAndID}-${e}`)},renderButton:({onClick:e,value:i})=>{let r=t[n(i)];return r?(0,o.jsx)(M,{hasMultipleOptions:!0,onClick:e,plugin:r.plugin,recordingKey:(0,c.Pt)("relaunchMenuSelectorIconButton",r.pluginTypeAndID)}):null},options:t.map((e,t)=>`${t}`),OptionWrapper:U})}function V(){let e=(0,s.R)(e=>e.mirror.selectionProperties.pluginRelaunchData),t=(0,r.d4)(e=>e.mirror.selectionProperties.numSelected),n=(0,s.R)(e=>e.publishedPlugins),a=(0,s.R)(e=>e.localPlugins),l=(0,v.dq)(),d=(0,y.tS)(),b=(0,i.useRef)(new I.O(u.A.duration(1,"day"))),A=(0,g.V2)(),O=(0,r.wA)(),j=e=>O(h.af({id:e,resourceType:n[e]?.is_widget?N.bD.WIDGET:N.bD.PLUGIN})),P=(0,x.vA)(e,n,a,l,t||0,(e,t)=>b.current.debounceRefresh(e,()=>j(e),t),E.FW.FIGJAM),S=p()(P,e=>e.pluginTypeAndID),C=e=>{var t,n;if(!d)return;if(!A){f.R.instance.handleUpgrade(m.Q7.RUN_WIDGET);return}t=(0,_.t)("whiteboard.inline_menu.relaunching_plugin",{commandName:e.relaunchButton.name}),n="figjam-plugin-relaunched",w.D.dispatch(R.F.enqueue({message:t,type:n,icon:L.zX.CHECK,timeoutOverride:3e3}));let{canRun:o}=(0,x.JT)({plugin:e.plugin,editorType:T.nT.Whiteboard});o&&f.R.instance.enqueue({mode:"run-forever",runPluginArgs:{plugin:e.plugin,openFileKey:d||"",command:e.relaunchButton.command,queryMode:!1,runMode:"default",triggeredFrom:"relaunch",ignoreForRunLastPlugin:!0,isWidget:!1}})};return 0===P.length?null:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(D.wv,{}),Object.values(S).map(e=>{if(!e||!e[0])return;let t=e[0],n=`relaunch-button-${t.pluginTypeAndID}-${e.length}`;return 1===e.length?(0,o.jsx)(M,{tooltipName:t.relaunchButton.name,tooltipDescription:t.relaunchButton.description,plugin:t.plugin,onClick:()=>C(t),recordingKey:(0,c.Pt)("relaunchIconButton",t.pluginTypeAndID,t.relaunchButton.command)},n):(0,o.jsx)(K,{relaunchData:e,onSelect:C},n)})]})}}}]);

//# debugId=3ab0220c-11bc-5fa4-b807-90d17c2047fd

//# sourceMappingURL=https://admin.figma.com/admin/webpack-artifacts/d391cb90e00945d92e9e0d5d54b84aecc55607e7/1798-1dc534a9964c2bcf.min.js.map